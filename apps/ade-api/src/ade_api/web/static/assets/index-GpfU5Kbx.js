(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();function I0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vh={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function cN(){if(vv)return Ul;vv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var h in l)h!=="key"&&(u[h]=l[h])}else u=l;return l=u.ref,{$$typeof:e,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Ul.Fragment=t,Ul.jsx=r,Ul.jsxs=r,Ul}var yv;function uN(){return yv||(yv=1,Vh.exports=cN()),Vh.exports}var a=uN(),Qh={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function dN(){if(wv)return ut;wv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function N(L,W,pe){this.props=L,this.context=W,this.refs=_,this.updater=pe||j}N.prototype.isReactComponent={},N.prototype.setState=function(L,W){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,W,"setState")},N.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function E(){}E.prototype=N.prototype;function D(L,W,pe){this.props=L,this.context=W,this.refs=_,this.updater=pe||j}var U=D.prototype=new E;U.constructor=D,C(U,N.prototype),U.isPureReactComponent=!0;var z=Array.isArray;function V(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function B(L,W,pe){var G=pe.ref;return{$$typeof:e,type:L,key:W,ref:G!==void 0?G:null,props:pe}}function T(L,W){return B(L.type,W,L.props)}function K(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function $(L){var W={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(pe){return W[pe]})}var q=/\/+/g;function I(L,W){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):W.toString(36)}function je(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(V,V):(L.status="pending",L.then(function(W){L.status==="pending"&&(L.status="fulfilled",L.value=W)},function(W){L.status==="pending"&&(L.status="rejected",L.reason=W)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function M(L,W,pe,G,ie){var J=typeof L;(J==="undefined"||J==="boolean")&&(L=null);var ne=!1;if(L===null)ne=!0;else switch(J){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(L.$$typeof){case e:case t:ne=!0;break;case v:return ne=L._init,M(ne(L._payload),W,pe,G,ie)}}if(ne)return ie=ie(L),ne=G===""?"."+I(L,0):G,z(ie)?(pe="",ne!=null&&(pe=ne.replace(q,"$&/")+"/"),M(ie,W,pe,"",function(ue){return ue})):ie!=null&&(K(ie)&&(ie=T(ie,pe+(ie.key==null||L&&L.key===ie.key?"":(""+ie.key).replace(q,"$&/")+"/")+ne)),W.push(ie)),1;ne=0;var oe=G===""?".":G+":";if(z(L))for(var he=0;he<L.length;he++)G=L[he],J=oe+I(G,he),ne+=M(G,W,pe,J,ie);else if(he=S(L),typeof he=="function")for(L=he.call(L),he=0;!(G=L.next()).done;)G=G.value,J=oe+I(G,he++),ne+=M(G,W,pe,J,ie);else if(J==="object"){if(typeof L.then=="function")return M(je(L),W,pe,G,ie);throw W=String(L),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ne}function H(L,W,pe){if(L==null)return L;var G=[],ie=0;return M(L,G,"","",function(J){return W.call(pe,J,ie++)}),G}function ee(L){if(L._status===-1){var W=L._result;W=W(),W.then(function(pe){(L._status===0||L._status===-1)&&(L._status=1,L._result=pe)},function(pe){(L._status===0||L._status===-1)&&(L._status=2,L._result=pe)}),L._status===-1&&(L._status=0,L._result=W)}if(L._status===1)return L._result.default;throw L._result}var be=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},de={map:H,forEach:function(L,W,pe){H(L,function(){W.apply(this,arguments)},pe)},count:function(L){var W=0;return H(L,function(){W++}),W},toArray:function(L){return H(L,function(W){return W})||[]},only:function(L){if(!K(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return ut.Activity=b,ut.Children=de,ut.Component=N,ut.Fragment=r,ut.Profiler=l,ut.PureComponent=D,ut.StrictMode=i,ut.Suspense=p,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ut.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},ut.cache=function(L){return function(){return L.apply(null,arguments)}},ut.cacheSignal=function(){return null},ut.cloneElement=function(L,W,pe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var G=C({},L.props),ie=L.key;if(W!=null)for(J in W.key!==void 0&&(ie=""+W.key),W)!A.call(W,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&W.ref===void 0||(G[J]=W[J]);var J=arguments.length-2;if(J===1)G.children=pe;else if(1<J){for(var ne=Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe+2];G.children=ne}return B(L.type,ie,G)},ut.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},ut.createElement=function(L,W,pe){var G,ie={},J=null;if(W!=null)for(G in W.key!==void 0&&(J=""+W.key),W)A.call(W,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(ie[G]=W[G]);var ne=arguments.length-2;if(ne===1)ie.children=pe;else if(1<ne){for(var oe=Array(ne),he=0;he<ne;he++)oe[he]=arguments[he+2];ie.children=oe}if(L&&L.defaultProps)for(G in ne=L.defaultProps,ne)ie[G]===void 0&&(ie[G]=ne[G]);return B(L,J,ie)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(L){return{$$typeof:h,render:L}},ut.isValidElement=K,ut.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ee}},ut.memo=function(L,W){return{$$typeof:x,type:L,compare:W===void 0?null:W}},ut.startTransition=function(L){var W=R.T,pe={};R.T=pe;try{var G=L(),ie=R.S;ie!==null&&ie(pe,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(V,be)}catch(J){be(J)}finally{W!==null&&pe.types!==null&&(W.types=pe.types),R.T=W}},ut.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ut.use=function(L){return R.H.use(L)},ut.useActionState=function(L,W,pe){return R.H.useActionState(L,W,pe)},ut.useCallback=function(L,W){return R.H.useCallback(L,W)},ut.useContext=function(L){return R.H.useContext(L)},ut.useDebugValue=function(){},ut.useDeferredValue=function(L,W){return R.H.useDeferredValue(L,W)},ut.useEffect=function(L,W){return R.H.useEffect(L,W)},ut.useEffectEvent=function(L){return R.H.useEffectEvent(L)},ut.useId=function(){return R.H.useId()},ut.useImperativeHandle=function(L,W,pe){return R.H.useImperativeHandle(L,W,pe)},ut.useInsertionEffect=function(L,W){return R.H.useInsertionEffect(L,W)},ut.useLayoutEffect=function(L,W){return R.H.useLayoutEffect(L,W)},ut.useMemo=function(L,W){return R.H.useMemo(L,W)},ut.useOptimistic=function(L,W){return R.H.useOptimistic(L,W)},ut.useReducer=function(L,W,pe){return R.H.useReducer(L,W,pe)},ut.useRef=function(L){return R.H.useRef(L)},ut.useState=function(L){return R.H.useState(L)},ut.useSyncExternalStore=function(L,W,pe){return R.H.useSyncExternalStore(L,W,pe)},ut.useTransition=function(){return R.H.useTransition()},ut.version="19.2.0",ut}var jv;function Im(){return jv||(jv=1,Qh.exports=dN()),Qh.exports}var f=Im();const Wt=I0(f);var Zh={exports:{}},$l={},Kh={exports:{}},Gh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function fN(){return Sv||(Sv=1,(function(e){function t(M,H){var ee=M.length;M.push(H);e:for(;0<ee;){var be=ee-1>>>1,de=M[be];if(0<l(de,H))M[be]=H,M[ee]=de,ee=be;else break e}}function r(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var H=M[0],ee=M.pop();if(ee!==H){M[0]=ee;e:for(var be=0,de=M.length,L=de>>>1;be<L;){var W=2*(be+1)-1,pe=M[W],G=W+1,ie=M[G];if(0>l(pe,ee))G<de&&0>l(ie,pe)?(M[be]=ie,M[G]=ee,be=G):(M[be]=pe,M[W]=ee,be=W);else if(G<de&&0>l(ie,ee))M[be]=ie,M[G]=ee,be=G;else break e}}return H}function l(M,H){var ee=M.sortIndex-H.sortIndex;return ee!==0?ee:M.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var p=[],x=[],v=1,b=null,y=3,S=!1,j=!1,C=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(M){for(var H=r(x);H!==null;){if(H.callback===null)i(x);else if(H.startTime<=M)i(x),H.sortIndex=H.expirationTime,t(p,H);else break;H=r(x)}}function z(M){if(C=!1,U(M),!j)if(r(p)!==null)j=!0,V||(V=!0,$());else{var H=r(x);H!==null&&je(z,H.startTime-M)}}var V=!1,R=-1,A=5,B=-1;function T(){return _?!0:!(e.unstable_now()-B<A)}function K(){if(_=!1,V){var M=e.unstable_now();B=M;var H=!0;try{e:{j=!1,C&&(C=!1,E(R),R=-1),S=!0;var ee=y;try{t:{for(U(M),b=r(p);b!==null&&!(b.expirationTime>M&&T());){var be=b.callback;if(typeof be=="function"){b.callback=null,y=b.priorityLevel;var de=be(b.expirationTime<=M);if(M=e.unstable_now(),typeof de=="function"){b.callback=de,U(M),H=!0;break t}b===r(p)&&i(p),U(M)}else i(p);b=r(p)}if(b!==null)H=!0;else{var L=r(x);L!==null&&je(z,L.startTime-M),H=!1}}break e}finally{b=null,y=ee,S=!1}H=void 0}}finally{H?$():V=!1}}}var $;if(typeof D=="function")$=function(){D(K)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,I=q.port2;q.port1.onmessage=K,$=function(){I.postMessage(null)}}else $=function(){N(K,0)};function je(M,H){R=N(function(){M(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var ee=y;y=H;try{return M()}finally{y=ee}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ee=y;y=M;try{return H()}finally{y=ee}},e.unstable_scheduleCallback=function(M,H,ee){var be=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?be+ee:be):ee=be,M){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,M={id:v++,callback:H,priorityLevel:M,startTime:ee,expirationTime:de,sortIndex:-1},ee>be?(M.sortIndex=ee,t(x,M),r(p)===null&&M===r(x)&&(C?(E(R),R=-1):C=!0,je(z,ee-be))):(M.sortIndex=de,t(p,M),j||S||(j=!0,V||(V=!0,$()))),M},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(M){var H=y;return function(){var ee=y;y=H;try{return M.apply(this,arguments)}finally{y=ee}}}})(Gh)),Gh}var Nv;function hN(){return Nv||(Nv=1,Kh.exports=fN()),Kh.exports}var Wh={exports:{}},ps={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function mN(){if(Cv)return ps;Cv=1;var e=Im();function t(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,x,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:p,containerInfo:x,implementation:v}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return ps.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ps.createPortal=function(p,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return u(p,x,null,v)},ps.flushSync=function(p){var x=d.T,v=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=x,i.p=v,i.d.f()}},ps.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(p,x))},ps.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},ps.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var v=x.as,b=h(v,x.crossOrigin),y=typeof x.integrity=="string"?x.integrity:void 0,S=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?i.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:S}):v==="script"&&i.d.X(p,{crossOrigin:b,integrity:y,fetchPriority:S,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},ps.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=h(x.as,x.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(p)},ps.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,b=h(v,x.crossOrigin);i.d.L(p,v,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},ps.preloadModule=function(p,x){if(typeof p=="string")if(x){var v=h(x.as,x.crossOrigin);i.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(p)},ps.requestFormReset=function(p){i.d.r(p)},ps.unstable_batchedUpdates=function(p,x){return p(x)},ps.useFormState=function(p,x,v){return d.H.useFormState(p,x,v)},ps.useFormStatus=function(){return d.H.useHostTransitionStatus()},ps.version="19.2.0",ps}var _v;function H0(){if(_v)return Wh.exports;_v=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wh.exports=mN(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function pN(){if(Ev)return $l;Ev=1;var e=hN(),t=Im(),r=H0();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(u(n)!==n)throw Error(i(188))}function x(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,c=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return p(m),n;if(g===c)return p(m),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=m,c=g;else{for(var w=!1,k=m.child;k;){if(k===o){w=!0,o=m,c=g;break}if(k===c){w=!0,c=m,o=g;break}k=k.sibling}if(!w){for(k=g.child;k;){if(k===o){w=!0,o=g,c=m;break}if(k===c){w=!0,c=g,o=m;break}k=k.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function $(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var q=Symbol.for("react.client.reference");function I(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case z:return"Suspense";case V:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case D:return n.displayName||"Context";case E:return(n._context.displayName||"Context")+".Consumer";case U:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:I(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return I(n(s))}catch{}}return null}var je=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},be=[],de=-1;function L(n){return{current:n}}function W(n){0>de||(n.current=be[de],be[de]=null,de--)}function pe(n,s){de++,be[de]=n.current,n.current=s}var G=L(null),ie=L(null),J=L(null),ne=L(null);function oe(n,s){switch(pe(J,s),pe(ie,n),pe(G,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Fb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Fb(s),n=Ib(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(G),pe(G,n)}function he(){W(G),W(ie),W(J)}function ue(n){n.memoizedState!==null&&pe(ne,n);var s=G.current,o=Ib(s,n.type);s!==o&&(pe(ie,n),pe(G,o))}function Oe(n){ie.current===n&&(W(G),W(ie)),ne.current===n&&(W(ne),Ml._currentValue=ee)}var Ge,Se;function ze(n){if(Ge===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ge=s&&s[1]||"",Se=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+n+Se}var Pe=!1;function Me(n,s){if(!n||Pe)return"";Pe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(ve){var fe=ve}Reflect.construct(n,[],Ee)}else{try{Ee.call()}catch(ve){fe=ve}n.call(Ee.prototype)}}else{try{throw Error()}catch(ve){fe=ve}(Ee=n())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(ve){if(ve&&fe&&typeof ve.stack=="string")return[ve.stack,fe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),w=g[0],k=g[1];if(w&&k){var Q=w.split(`
`),ce=k.split(`
`);for(m=c=0;c<Q.length&&!Q[c].includes("DetermineComponentFrameRoot");)c++;for(;m<ce.length&&!ce[m].includes("DetermineComponentFrameRoot");)m++;if(c===Q.length||m===ce.length)for(c=Q.length-1,m=ce.length-1;1<=c&&0<=m&&Q[c]!==ce[m];)m--;for(;1<=c&&0<=m;c--,m--)if(Q[c]!==ce[m]){if(c!==1||m!==1)do if(c--,m--,0>m||Q[c]!==ce[m]){var Ne=`
`+Q[c].replace(" at new "," at ");return n.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",n.displayName)),Ne}while(1<=c&&0<=m);break}}}finally{Pe=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ze(o):""}function Be(n,s){switch(n.tag){case 26:case 27:case 5:return ze(n.type);case 16:return ze("Lazy");case 13:return n.child!==s&&s!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return Me(n.type,!1);case 11:return Me(n.type.render,!1);case 1:return Me(n.type,!0);case 31:return ze("Activity");default:return""}}function We(n){try{var s="",o=null;do s+=Be(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var st=Object.prototype.hasOwnProperty,P=e.unstable_scheduleCallback,F=e.unstable_cancelCallback,X=e.unstable_shouldYield,Te=e.unstable_requestPaint,_e=e.unstable_now,me=e.unstable_getCurrentPriorityLevel,De=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,ke=e.unstable_NormalPriority,Ie=e.unstable_LowPriority,ht=e.unstable_IdlePriority,tt=e.log,An=e.unstable_setDisableYieldValue,Ut=null,At=null;function $t(n){if(typeof tt=="function"&&An(n),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Ut,n)}catch{}}var Ze=Math.clz32?Math.clz32:we,pn=Math.log,Rn=Math.LN2;function we(n){return n>>>=0,n===0?32:31-(pn(n)/Rn|0)|0}var He=256,vt=262144,lt=4194304;function yt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,g=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var k=c&134217727;return k!==0?(c=k&~g,c!==0?m=yt(c):(w&=k,w!==0?m=yt(w):o||(o=k&~n,o!==0&&(m=yt(o))))):(k=c&~g,k!==0?m=yt(k):w!==0?m=yt(w):o||(o=c&~n,o!==0&&(m=yt(o)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:m}function an(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function jn(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var n=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),n}function xn(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Fn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ct(n,s,o,c,m,g){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var k=n.entanglements,Q=n.expirationTimes,ce=n.hiddenUpdates;for(o=w&~o;0<o;){var Ne=31-Ze(o),Ee=1<<Ne;k[Ne]=0,Q[Ne]=-1;var fe=ce[Ne];if(fe!==null)for(ce[Ne]=null,Ne=0;Ne<fe.length;Ne++){var ve=fe[Ne];ve!==null&&(ve.lane&=-536870913)}o&=~Ee}c!==0&&_t(n,c,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(w&~s))}function _t(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Ze(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function dn(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Ze(o),m=1<<c;m&s|n[c]&s&&(n[c]|=s),o&=~m}}function it(n,s){var o=s&-s;return o=(o&42)!==0?1:Ms(o),(o&(n.suspendedLanes|s))!==0?0:o}function Ms(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ns(){var n=H.p;return n!==0?n:(n=window.event,n===void 0?32:fv(n.type))}function bs(n,s){var o=H.p;try{return H.p=n,s()}finally{H.p=o}}var In=Math.random().toString(36).slice(2),bn="__reactFiber$"+In,Hn="__reactProps$"+In,Ar="__reactContainer$"+In,Xr="__reactEvents$"+In,Ko="__reactListeners$"+In,Hi="__reactHandles$"+In,Tt="__reactResources$"+In,fs="__reactMarker$"+In;function ss(n){delete n[bn],delete n[Hn],delete n[Xr],delete n[Ko],delete n[Hi]}function rs(n){var s=n[bn];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ar]||o[bn]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Wb(n);n!==null;){if(o=n[bn])return o;n=Wb(n)}return s}n=o,o=n.parentNode}return null}function as(n){if(n=n[bn]||n[Ar]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function fn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Rr(n){var s=n[Tt];return s||(s=n[Tt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function nn(n){n[fs]=!0}var vs=new Set,Os={};function is(n,s){fr(n,s),fr(n+"Capture",s)}function fr(n,s){for(Os[n]=s,n=0;n<s.length;n++)vs.add(s[n])}var on=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mr={},En={};function li(n){return st.call(En,n)?!0:st.call(Mr,n)?!1:on.test(n)?En[n]=!0:(Mr[n]=!0,!1)}function Or(n,s,o){if(li(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function zr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function dt(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function Vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mn(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Vi(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(w){o=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Jr(n){if(!n._valueTracker){var s=Mn(n)?"checked":"value";n._valueTracker=Vi(n,s,""+n[s])}}function Qi(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Mn(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function Lr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ea=/[\n"\\]/g;function hs(n){return n.replace(ea,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ys(n,s,o,c,m,g,w,k){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),s!=null?w==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Vn(s)):n.value!==""+Vn(s)&&(n.value=""+Vn(s)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),s!=null?ci(n,w,Vn(s)):o!=null?ci(n,w,Vn(o)):c!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+Vn(k):n.removeAttribute("name")}function hr(n,s,o,c,m,g,w,k){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Jr(n);return}o=o!=null?""+Vn(o):"",s=s!=null?""+Vn(s):o,k||s===n.value||(n.value=s),n.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=k?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),Jr(n)}function ci(n,s,o){s==="number"&&Lr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function mr(n,s,o,c){if(n=n.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=s.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Vn(o),s=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function Zi(n,s,o){if(s!=null&&(s=""+Vn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Vn(o):""}function Xe(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(je(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Vn(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Jr(n)}function Ur(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var $r=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ta(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||$r.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ki(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&o[m]!==c&&ta(n,m,c)}else for(var g in s)s.hasOwnProperty(g)&&ta(n,g,s[g])}function ui(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var os=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qr(n){return pr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function On(){}var Ys=null;function Br(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,Pr=null;function Na(n){var s=as(n);if(s&&(n=s.stateNode)){var o=n[Hn]||null;e:switch(n=s.stateNode,s.type){case"input":if(ys(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+hs(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var m=c[Hn]||null;if(!m)throw Error(i(90));ys(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Qi(c)}break e;case"textarea":Zi(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&mr(n,!!o.multiple,s,!1)}}}var di=!1;function gr(n,s,o){if(di)return n(s,o);di=!0;try{var c=n(s);return c}finally{if(di=!1,(zs!==null||Pr!==null)&&(ru(),zs&&(s=zs,n=Pr,Pr=zs=null,Na(s),n)))for(s=0;s<n.length;s++)Na(n[s])}}function ln(n,s){var o=n.stateNode;if(o===null)return null;var c=o[Hn]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(Ls)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{Xs=!1}var js=null,Ca=null,ms=null;function Js(){if(ms)return ms;var n,s=Ca,o=s.length,c,m="value"in js?js.value:js.textContent,g=m.length;for(n=0;n<o&&s[n]===m[n];n++);var w=o-n;for(c=1;c<=w&&s[o-c]===m[g-c];c++);return ms=m.slice(n,1<c?1-c:void 0)}function Fr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function na(){return!0}function sa(){return!1}function O(n){function s(o,c,m,g,w){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(o=n[k],this[k]=o?o(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?na:sa,this.isPropagationStopped=sa,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),s}var se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},re=O(se),xe=b({},se,{view:0,detail:0}),Le=O(xe),nt,at,Mt,mt=b({},xe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jo,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mt&&(Mt&&n.type==="mousemove"?(nt=n.screenX-Mt.screenX,at=n.screenY-Mt.screenY):at=nt=0,Mt=n),nt)},movementY:function(n){return"movementY"in n?n.movementY:at}}),Us=O(mt),Go=b({},mt,{dataTransfer:0}),_a=O(Go),ra=b({},xe,{relatedTarget:0}),Wo=O(ra),Ud=b({},se,{animationName:0,elapsedTime:0,pseudoElement:0}),$d=O(Ud),Gi=b({},se,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xr=O(Gi),Yo=b({},se,{data:0}),Wi=O(Yo),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ea={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qd(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=fi[n])?!!s[n]:!1}function Jo(){return qd}var Bd=b({},xe,{key:function(n){if(n.key){var s=Xo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Fr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ea[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jo,charCode:function(n){return n.type==="keypress"?Fr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pd=O(Bd),br=b({},mt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=O(br),Fd=b({},xe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jo}),Id=O(Fd),Hd=b({},se,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vd=O(Hd),Yi=b({},mt,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qd=O(Yi),Zd=b({},se,{newState:0,oldState:0}),Kd=O(Zd),Gd=[9,13,27,32],el=Ls&&"CompositionEvent"in window,ka=null;Ls&&"documentMode"in document&&(ka=document.documentMode);var Wd=Ls&&"TextEvent"in window&&!ka,bc=Ls&&(!el||ka&&8<ka&&11>=ka),vc=" ",yc=!1;function wc(n,s){switch(n){case"keyup":return Gd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Da=!1;function Yd(n,s){switch(n){case"compositionend":return jc(s);case"keypress":return s.which!==32?null:(yc=!0,vc);case"textInput":return n=s.data,n===vc&&yc?null:n;default:return null}}function Xd(n,s){if(Da)return n==="compositionend"||!el&&wc(n,s)?(n=Js(),ms=Ca=js=null,Da=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return bc&&s.locale!=="ko"?null:s.data;default:return null}}var tl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!tl[n.type]:s==="textarea"}function ge(n,s,o,c){zs?Pr?Pr.push(c):Pr=[c]:zs=c,s=du(s,"onChange"),0<s.length&&(o=new re("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var qe=null,Ue=null;function et(n){Lb(n,0)}function xt(n){var s=fn(n);if(Qi(s))return n}function bt(n,s){if(n==="change")return s}var vn=!1;if(Ls){var aa;if(Ls){var Qn="oninput"in document;if(!Qn){var sn=document.createElement("div");sn.setAttribute("oninput","return;"),Qn=typeof sn.oninput=="function"}aa=Qn}else aa=!1;vn=aa&&(!document.documentMode||9<document.documentMode)}function Yt(){qe&&(qe.detachEvent("onpropertychange",vr),Ue=qe=null)}function vr(n){if(n.propertyName==="value"&&xt(Ue)){var s=[];ge(s,Ue,n,Br(n)),gr(et,s)}}function hi(n,s,o){n==="focusin"?(Yt(),qe=s,Ue=o,qe.attachEvent("onpropertychange",vr)):n==="focusout"&&Yt()}function Sc(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xt(Ue)}function nl(n,s){if(n==="click")return xt(s)}function B1(n,s){if(n==="input"||n==="change")return xt(s)}function P1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var $s=typeof Object.is=="function"?Object.is:P1;function sl(n,s){if($s(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!st.call(s,m)||!$s(n[m],s[m]))return!1}return!0}function ig(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function og(n,s){var o=ig(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ig(o)}}function lg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?lg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function cg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Lr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Lr(n.document)}return s}function Jd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var F1=Ls&&"documentMode"in document&&11>=document.documentMode,Xi=null,ef=null,rl=null,tf=!1;function ug(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;tf||Xi==null||Xi!==Lr(c)||(c=Xi,"selectionStart"in c&&Jd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rl&&sl(rl,c)||(rl=c,c=du(ef,"onSelect"),0<c.length&&(s=new re("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Xi)))}function mi(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Ji={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionrun:mi("Transition","TransitionRun"),transitionstart:mi("Transition","TransitionStart"),transitioncancel:mi("Transition","TransitionCancel"),transitionend:mi("Transition","TransitionEnd")},nf={},dg={};Ls&&(dg=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function pi(n){if(nf[n])return nf[n];if(!Ji[n])return n;var s=Ji[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in dg)return nf[n]=s[o];return n}var fg=pi("animationend"),hg=pi("animationiteration"),mg=pi("animationstart"),I1=pi("transitionrun"),H1=pi("transitionstart"),V1=pi("transitioncancel"),pg=pi("transitionend"),gg=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function yr(n,s){gg.set(n,s),is(s,[n])}var Nc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},er=[],eo=0,rf=0;function Cc(){for(var n=eo,s=rf=eo=0;s<n;){var o=er[s];er[s++]=null;var c=er[s];er[s++]=null;var m=er[s];er[s++]=null;var g=er[s];if(er[s++]=null,c!==null&&m!==null){var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}g!==0&&xg(o,m,g)}}function _c(n,s,o,c){er[eo++]=n,er[eo++]=s,er[eo++]=o,er[eo++]=c,rf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function af(n,s,o,c){return _c(n,s,o,c),Ec(n)}function gi(n,s){return _c(n,null,null,s),Ec(n)}function xg(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&s!==null&&(m=31-Ze(o),n=g.hiddenUpdates,c=n[m],c===null?n[m]=[s]:c.push(s),s.lane=o|536870912),g):null}function Ec(n){if(50<_l)throw _l=0,ph=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var to={};function Q1(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(n,s,o,c){return new Q1(n,s,o,c)}function of(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ia(n,s){var o=n.alternate;return o===null?(o=qs(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function bg(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function kc(n,s,o,c,m,g){var w=0;if(c=n,typeof n=="function")of(n)&&(w=1);else if(typeof n=="string")w=YS(n,o,G.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=qs(31,o,s,m),n.elementType=B,n.lanes=g,n;case C:return xi(o.children,m,g,s);case _:w=8,m|=24;break;case N:return n=qs(12,o,s,m|2),n.elementType=N,n.lanes=g,n;case z:return n=qs(13,o,s,m),n.elementType=z,n.lanes=g,n;case V:return n=qs(19,o,s,m),n.elementType=V,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:w=10;break e;case E:w=9;break e;case U:w=11;break e;case R:w=14;break e;case A:w=16,c=null;break e}w=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=qs(w,o,s,m),s.elementType=n,s.type=c,s.lanes=g,s}function xi(n,s,o,c){return n=qs(7,n,c,s),n.lanes=o,n}function lf(n,s,o){return n=qs(6,n,null,s),n.lanes=o,n}function vg(n){var s=qs(18,null,null,0);return s.stateNode=n,s}function cf(n,s,o){return s=qs(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var yg=new WeakMap;function tr(n,s){if(typeof n=="object"&&n!==null){var o=yg.get(n);return o!==void 0?o:(s={value:n,source:s,stack:We(s)},yg.set(n,s),s)}return{value:n,source:s,stack:We(s)}}var no=[],so=0,Dc=null,al=0,nr=[],sr=0,Ta=null,Ir=1,Hr="";function oa(n,s){no[so++]=al,no[so++]=Dc,Dc=n,al=s}function wg(n,s,o){nr[sr++]=Ir,nr[sr++]=Hr,nr[sr++]=Ta,Ta=n;var c=Ir;n=Hr;var m=32-Ze(c)-1;c&=~(1<<m),o+=1;var g=32-Ze(s)+m;if(30<g){var w=m-m%5;g=(c&(1<<w)-1).toString(32),c>>=w,m-=w,Ir=1<<32-Ze(s)+m|o<<m|c,Hr=g+n}else Ir=1<<g|o<<m|c,Hr=n}function uf(n){n.return!==null&&(oa(n,1),wg(n,1,0))}function df(n){for(;n===Dc;)Dc=no[--so],no[so]=null,al=no[--so],no[so]=null;for(;n===Ta;)Ta=nr[--sr],nr[sr]=null,Hr=nr[--sr],nr[sr]=null,Ir=nr[--sr],nr[sr]=null}function jg(n,s){nr[sr++]=Ir,nr[sr++]=Hr,nr[sr++]=Ta,Ir=s.id,Hr=s.overflow,Ta=n}var ls=null,cn=null,Et=!1,Aa=null,rr=!1,ff=Error(i(519));function Ra(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw il(tr(s,n)),ff}function Sg(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[bn]=n,s[Hn]=c,o){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(o=0;o<kl.length;o++)jt(kl[o],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":jt("invalid",s),hr(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":jt("invalid",s);break;case"textarea":jt("invalid",s),Xe(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||Bb(s.textContent,o)?(c.popover!=null&&(jt("beforetoggle",s),jt("toggle",s)),c.onScroll!=null&&jt("scroll",s),c.onScrollEnd!=null&&jt("scrollend",s),c.onClick!=null&&(s.onclick=On),s=!0):s=!1,s||Ra(n,!0)}function Ng(n){for(ls=n.return;ls;)switch(ls.tag){case 5:case 31:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:ls=ls.return}}function ro(n){if(n!==ls)return!1;if(!Et)return Ng(n),Et=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Th(n.type,n.memoizedProps)),o=!o),o&&cn&&Ra(n),Ng(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));cn=Gb(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));cn=Gb(n)}else s===27?(s=cn,Qa(n.type)?(n=zh,zh=null,cn=n):cn=s):cn=ls?ir(n.stateNode.nextSibling):null;return!0}function bi(){cn=ls=null,Et=!1}function hf(){var n=Aa;return n!==null&&(_s===null?_s=n:_s.push.apply(_s,n),Aa=null),n}function il(n){Aa===null?Aa=[n]:Aa.push(n)}var mf=L(null),vi=null,la=null;function Ma(n,s,o){pe(mf,s._currentValue),s._currentValue=o}function ca(n){n._currentValue=mf.current,W(mf)}function pf(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function gf(n,s,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var w=m.child;g=g.firstContext;e:for(;g!==null;){var k=g;g=m;for(var Q=0;Q<s.length;Q++)if(k.context===s[Q]){g.lanes|=o,k=g.alternate,k!==null&&(k.lanes|=o),pf(g.return,o,n),c||(w=null);break e}g=k.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(i(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),pf(w,o,n),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===n){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function ao(n,s,o,c){n=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var k=m.type;$s(m.pendingProps.value,w.value)||(n!==null?n.push(k):n=[k])}}else if(m===ne.current){if(w=m.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Ml):n=[Ml])}m=m.return}n!==null&&gf(s,n,o,c),s.flags|=262144}function Tc(n){for(n=n.firstContext;n!==null;){if(!$s(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function yi(n){vi=n,la=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function cs(n){return Cg(vi,n)}function Ac(n,s){return vi===null&&yi(n),Cg(n,s)}function Cg(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},la===null){if(n===null)throw Error(i(308));la=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else la=la.next=s;return o}var Z1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},K1=e.unstable_scheduleCallback,G1=e.unstable_NormalPriority,zn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new Z1,data:new Map,refCount:0}}function ol(n){n.refCount--,n.refCount===0&&K1(G1,function(){n.controller.abort()})}var ll=null,bf=0,io=0,oo=null;function W1(n,s){if(ll===null){var o=ll=[];bf=0,io=wh(),oo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return bf++,s.then(_g,_g),s}function _g(){if(--bf===0&&ll!==null){oo!==null&&(oo.status="fulfilled");var n=ll;ll=null,io=0,oo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Y1(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Eg=M.S;M.S=function(n,s){ub=_e(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&W1(n,s),Eg!==null&&Eg(n,s)};var wi=L(null);function vf(){var n=wi.current;return n!==null?n:Xt.pooledCache}function Rc(n,s){s===null?pe(wi,wi.current):pe(wi,s.pool)}function kg(){var n=vf();return n===null?null:{parent:zn._currentValue,pool:n}}var lo=Error(i(460)),yf=Error(i(474)),Mc=Error(i(542)),Oc={then:function(){}};function Dg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tg(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(On,On),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Rg(n),n;default:if(typeof s.status=="string")s.then(On,On);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Rg(n),n}throw Si=s,lo}}function ji(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Si=o,lo):o}}var Si=null;function Ag(){if(Si===null)throw Error(i(459));var n=Si;return Si=null,n}function Rg(n){if(n===lo||n===Mc)throw Error(i(483))}var co=null,cl=0;function zc(n){var s=cl;return cl+=1,co===null&&(co=[]),Tg(co,n,s)}function ul(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Lc(n,s){throw s.$$typeof===y?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Mg(n){function s(ae,Y){if(n){var le=ae.deletions;le===null?(ae.deletions=[Y],ae.flags|=16):le.push(Y)}}function o(ae,Y){if(!n)return null;for(;Y!==null;)s(ae,Y),Y=Y.sibling;return null}function c(ae){for(var Y=new Map;ae!==null;)ae.key!==null?Y.set(ae.key,ae):Y.set(ae.index,ae),ae=ae.sibling;return Y}function m(ae,Y){return ae=ia(ae,Y),ae.index=0,ae.sibling=null,ae}function g(ae,Y,le){return ae.index=le,n?(le=ae.alternate,le!==null?(le=le.index,le<Y?(ae.flags|=67108866,Y):le):(ae.flags|=67108866,Y)):(ae.flags|=1048576,Y)}function w(ae){return n&&ae.alternate===null&&(ae.flags|=67108866),ae}function k(ae,Y,le,Ce){return Y===null||Y.tag!==6?(Y=lf(le,ae.mode,Ce),Y.return=ae,Y):(Y=m(Y,le),Y.return=ae,Y)}function Q(ae,Y,le,Ce){var Je=le.type;return Je===C?Ne(ae,Y,le.props.children,Ce,le.key):Y!==null&&(Y.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===A&&ji(Je)===Y.type)?(Y=m(Y,le.props),ul(Y,le),Y.return=ae,Y):(Y=kc(le.type,le.key,le.props,null,ae.mode,Ce),ul(Y,le),Y.return=ae,Y)}function ce(ae,Y,le,Ce){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==le.containerInfo||Y.stateNode.implementation!==le.implementation?(Y=cf(le,ae.mode,Ce),Y.return=ae,Y):(Y=m(Y,le.children||[]),Y.return=ae,Y)}function Ne(ae,Y,le,Ce,Je){return Y===null||Y.tag!==7?(Y=xi(le,ae.mode,Ce,Je),Y.return=ae,Y):(Y=m(Y,le),Y.return=ae,Y)}function Ee(ae,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=lf(""+Y,ae.mode,le),Y.return=ae,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return le=kc(Y.type,Y.key,Y.props,null,ae.mode,le),ul(le,Y),le.return=ae,le;case j:return Y=cf(Y,ae.mode,le),Y.return=ae,Y;case A:return Y=ji(Y),Ee(ae,Y,le)}if(je(Y)||$(Y))return Y=xi(Y,ae.mode,le,null),Y.return=ae,Y;if(typeof Y.then=="function")return Ee(ae,zc(Y),le);if(Y.$$typeof===D)return Ee(ae,Ac(ae,Y),le);Lc(ae,Y)}return null}function fe(ae,Y,le,Ce){var Je=Y!==null?Y.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Je!==null?null:k(ae,Y,""+le,Ce);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case S:return le.key===Je?Q(ae,Y,le,Ce):null;case j:return le.key===Je?ce(ae,Y,le,Ce):null;case A:return le=ji(le),fe(ae,Y,le,Ce)}if(je(le)||$(le))return Je!==null?null:Ne(ae,Y,le,Ce,null);if(typeof le.then=="function")return fe(ae,Y,zc(le),Ce);if(le.$$typeof===D)return fe(ae,Y,Ac(ae,le),Ce);Lc(ae,le)}return null}function ve(ae,Y,le,Ce,Je){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ae=ae.get(le)||null,k(Y,ae,""+Ce,Je);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case S:return ae=ae.get(Ce.key===null?le:Ce.key)||null,Q(Y,ae,Ce,Je);case j:return ae=ae.get(Ce.key===null?le:Ce.key)||null,ce(Y,ae,Ce,Je);case A:return Ce=ji(Ce),ve(ae,Y,le,Ce,Je)}if(je(Ce)||$(Ce))return ae=ae.get(le)||null,Ne(Y,ae,Ce,Je,null);if(typeof Ce.then=="function")return ve(ae,Y,le,zc(Ce),Je);if(Ce.$$typeof===D)return ve(ae,Y,le,Ac(Y,Ce),Je);Lc(Y,Ce)}return null}function Qe(ae,Y,le,Ce){for(var Je=null,Ot=null,Ye=Y,gt=Y=0,Ct=null;Ye!==null&&gt<le.length;gt++){Ye.index>gt?(Ct=Ye,Ye=null):Ct=Ye.sibling;var zt=fe(ae,Ye,le[gt],Ce);if(zt===null){Ye===null&&(Ye=Ct);break}n&&Ye&&zt.alternate===null&&s(ae,Ye),Y=g(zt,Y,gt),Ot===null?Je=zt:Ot.sibling=zt,Ot=zt,Ye=Ct}if(gt===le.length)return o(ae,Ye),Et&&oa(ae,gt),Je;if(Ye===null){for(;gt<le.length;gt++)Ye=Ee(ae,le[gt],Ce),Ye!==null&&(Y=g(Ye,Y,gt),Ot===null?Je=Ye:Ot.sibling=Ye,Ot=Ye);return Et&&oa(ae,gt),Je}for(Ye=c(Ye);gt<le.length;gt++)Ct=ve(Ye,ae,gt,le[gt],Ce),Ct!==null&&(n&&Ct.alternate!==null&&Ye.delete(Ct.key===null?gt:Ct.key),Y=g(Ct,Y,gt),Ot===null?Je=Ct:Ot.sibling=Ct,Ot=Ct);return n&&Ye.forEach(function(Ya){return s(ae,Ya)}),Et&&oa(ae,gt),Je}function rt(ae,Y,le,Ce){if(le==null)throw Error(i(151));for(var Je=null,Ot=null,Ye=Y,gt=Y=0,Ct=null,zt=le.next();Ye!==null&&!zt.done;gt++,zt=le.next()){Ye.index>gt?(Ct=Ye,Ye=null):Ct=Ye.sibling;var Ya=fe(ae,Ye,zt.value,Ce);if(Ya===null){Ye===null&&(Ye=Ct);break}n&&Ye&&Ya.alternate===null&&s(ae,Ye),Y=g(Ya,Y,gt),Ot===null?Je=Ya:Ot.sibling=Ya,Ot=Ya,Ye=Ct}if(zt.done)return o(ae,Ye),Et&&oa(ae,gt),Je;if(Ye===null){for(;!zt.done;gt++,zt=le.next())zt=Ee(ae,zt.value,Ce),zt!==null&&(Y=g(zt,Y,gt),Ot===null?Je=zt:Ot.sibling=zt,Ot=zt);return Et&&oa(ae,gt),Je}for(Ye=c(Ye);!zt.done;gt++,zt=le.next())zt=ve(Ye,ae,gt,zt.value,Ce),zt!==null&&(n&&zt.alternate!==null&&Ye.delete(zt.key===null?gt:zt.key),Y=g(zt,Y,gt),Ot===null?Je=zt:Ot.sibling=zt,Ot=zt);return n&&Ye.forEach(function(lN){return s(ae,lN)}),Et&&oa(ae,gt),Je}function Gt(ae,Y,le,Ce){if(typeof le=="object"&&le!==null&&le.type===C&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case S:e:{for(var Je=le.key;Y!==null;){if(Y.key===Je){if(Je=le.type,Je===C){if(Y.tag===7){o(ae,Y.sibling),Ce=m(Y,le.props.children),Ce.return=ae,ae=Ce;break e}}else if(Y.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===A&&ji(Je)===Y.type){o(ae,Y.sibling),Ce=m(Y,le.props),ul(Ce,le),Ce.return=ae,ae=Ce;break e}o(ae,Y);break}else s(ae,Y);Y=Y.sibling}le.type===C?(Ce=xi(le.props.children,ae.mode,Ce,le.key),Ce.return=ae,ae=Ce):(Ce=kc(le.type,le.key,le.props,null,ae.mode,Ce),ul(Ce,le),Ce.return=ae,ae=Ce)}return w(ae);case j:e:{for(Je=le.key;Y!==null;){if(Y.key===Je)if(Y.tag===4&&Y.stateNode.containerInfo===le.containerInfo&&Y.stateNode.implementation===le.implementation){o(ae,Y.sibling),Ce=m(Y,le.children||[]),Ce.return=ae,ae=Ce;break e}else{o(ae,Y);break}else s(ae,Y);Y=Y.sibling}Ce=cf(le,ae.mode,Ce),Ce.return=ae,ae=Ce}return w(ae);case A:return le=ji(le),Gt(ae,Y,le,Ce)}if(je(le))return Qe(ae,Y,le,Ce);if($(le)){if(Je=$(le),typeof Je!="function")throw Error(i(150));return le=Je.call(le),rt(ae,Y,le,Ce)}if(typeof le.then=="function")return Gt(ae,Y,zc(le),Ce);if(le.$$typeof===D)return Gt(ae,Y,Ac(ae,le),Ce);Lc(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,Y!==null&&Y.tag===6?(o(ae,Y.sibling),Ce=m(Y,le),Ce.return=ae,ae=Ce):(o(ae,Y),Ce=lf(le,ae.mode,Ce),Ce.return=ae,ae=Ce),w(ae)):o(ae,Y)}return function(ae,Y,le,Ce){try{cl=0;var Je=Gt(ae,Y,le,Ce);return co=null,Je}catch(Ye){if(Ye===lo||Ye===Mc)throw Ye;var Ot=qs(29,Ye,null,ae.mode);return Ot.lanes=Ce,Ot.return=ae,Ot}finally{}}}var Ni=Mg(!0),Og=Mg(!1),Oa=!1;function wf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function za(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function La(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(qt&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=Ec(n),xg(n,null,o),s}return _c(n,c,s,o),Ec(n)}function dl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,dn(n,o)}}function Sf(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Nf=!1;function fl(){if(Nf){var n=oo;if(n!==null)throw n}}function hl(n,s,o,c){Nf=!1;var m=n.updateQueue;Oa=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var Q=k,ce=Q.next;Q.next=null,w===null?g=ce:w.next=ce,w=Q;var Ne=n.alternate;Ne!==null&&(Ne=Ne.updateQueue,k=Ne.lastBaseUpdate,k!==w&&(k===null?Ne.firstBaseUpdate=ce:k.next=ce,Ne.lastBaseUpdate=Q))}if(g!==null){var Ee=m.baseState;w=0,Ne=ce=Q=null,k=g;do{var fe=k.lane&-536870913,ve=fe!==k.lane;if(ve?(Nt&fe)===fe:(c&fe)===fe){fe!==0&&fe===io&&(Nf=!0),Ne!==null&&(Ne=Ne.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Qe=n,rt=k;fe=s;var Gt=o;switch(rt.tag){case 1:if(Qe=rt.payload,typeof Qe=="function"){Ee=Qe.call(Gt,Ee,fe);break e}Ee=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=rt.payload,fe=typeof Qe=="function"?Qe.call(Gt,Ee,fe):Qe,fe==null)break e;Ee=b({},Ee,fe);break e;case 2:Oa=!0}}fe=k.callback,fe!==null&&(n.flags|=64,ve&&(n.flags|=8192),ve=m.callbacks,ve===null?m.callbacks=[fe]:ve.push(fe))}else ve={lane:fe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Ne===null?(ce=Ne=ve,Q=Ee):Ne=Ne.next=ve,w|=fe;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;ve=k,k=ve.next,ve.next=null,m.lastBaseUpdate=ve,m.shared.pending=null}}while(!0);Ne===null&&(Q=Ee),m.baseState=Q,m.firstBaseUpdate=ce,m.lastBaseUpdate=Ne,g===null&&(m.shared.lanes=0),Pa|=w,n.lanes=w,n.memoizedState=Ee}}function zg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Lg(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)zg(o[n],s)}var uo=L(null),Uc=L(0);function Ug(n,s){n=ba,pe(Uc,n),pe(uo,s),ba=n|s.baseLanes}function Cf(){pe(Uc,ba),pe(uo,uo.current)}function _f(){ba=Uc.current,W(uo),W(Uc)}var Bs=L(null),ar=null;function Ua(n){var s=n.alternate;pe(kn,kn.current&1),pe(Bs,n),ar===null&&(s===null||uo.current!==null||s.memoizedState!==null)&&(ar=n)}function Ef(n){pe(kn,kn.current),pe(Bs,n),ar===null&&(ar=n)}function $g(n){n.tag===22?(pe(kn,kn.current),pe(Bs,n),ar===null&&(ar=n)):$a()}function $a(){pe(kn,kn.current),pe(Bs,Bs.current)}function Ps(n){W(Bs),ar===n&&(ar=null),W(kn)}var kn=L(0);function $c(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Mh(o)||Oh(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ua=0,pt=null,Zt=null,Ln=null,qc=!1,fo=!1,Ci=!1,Bc=0,ml=0,ho=null,X1=0;function Sn(){throw Error(i(321))}function kf(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!$s(n[o],s[o]))return!1;return!0}function Df(n,s,o,c,m,g){return ua=g,pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=n===null||n.memoizedState===null?wx:Hf,Ci=!1,g=o(c,m),Ci=!1,fo&&(g=Bg(s,o,c,m)),qg(n),g}function qg(n){M.H=xl;var s=Zt!==null&&Zt.next!==null;if(ua=0,Ln=Zt=pt=null,qc=!1,ml=0,ho=null,s)throw Error(i(300));n===null||Un||(n=n.dependencies,n!==null&&Tc(n)&&(Un=!0))}function Bg(n,s,o,c){pt=n;var m=0;do{if(fo&&(ho=null),ml=0,fo=!1,25<=m)throw Error(i(301));if(m+=1,Ln=Zt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}M.H=jx,g=s(o,c)}while(fo);return g}function J1(){var n=M.H,s=n.useState()[0];return s=typeof s.then=="function"?pl(s):s,n=n.useState()[0],(Zt!==null?Zt.memoizedState:null)!==n&&(pt.flags|=1024),s}function Tf(){var n=Bc!==0;return Bc=0,n}function Af(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Rf(n){if(qc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}qc=!1}ua=0,Ln=Zt=pt=null,fo=!1,ml=Bc=0,ho=null}function gs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?pt.memoizedState=Ln=n:Ln=Ln.next=n,Ln}function Dn(){if(Zt===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Zt.next;var s=Ln===null?pt.memoizedState:Ln.next;if(s!==null)Ln=s,Zt=n;else{if(n===null)throw pt.alternate===null?Error(i(467)):Error(i(310));Zt=n,n={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Ln===null?pt.memoizedState=Ln=n:Ln=Ln.next=n}return Ln}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(n){var s=ml;return ml+=1,ho===null&&(ho=[]),n=Tg(ho,n,s),s=pt,(Ln===null?s.memoizedState:Ln.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?wx:Hf),n}function Fc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pl(n);if(n.$$typeof===D)return cs(n)}throw Error(i(438,String(n)))}function Mf(n){var s=null,o=pt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=pt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Pc(),pt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=T;return s.index++,o}function da(n,s){return typeof s=="function"?s(n):s}function Ic(n){var s=Dn();return Of(s,Zt,n)}function Of(n,s,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var m=n.baseQueue,g=c.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}s.baseQueue=m=g,c.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{s=m.next;var k=w=null,Q=null,ce=s,Ne=!1;do{var Ee=ce.lane&-536870913;if(Ee!==ce.lane?(Nt&Ee)===Ee:(ua&Ee)===Ee){var fe=ce.revertLane;if(fe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Ee===io&&(Ne=!0);else if((ua&fe)===fe){ce=ce.next,fe===io&&(Ne=!0);continue}else Ee={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Q===null?(k=Q=Ee,w=g):Q=Q.next=Ee,pt.lanes|=fe,Pa|=fe;Ee=ce.action,Ci&&o(g,Ee),g=ce.hasEagerState?ce.eagerState:o(g,Ee)}else fe={lane:Ee,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Q===null?(k=Q=fe,w=g):Q=Q.next=fe,pt.lanes|=Ee,Pa|=Ee;ce=ce.next}while(ce!==null&&ce!==s);if(Q===null?w=g:Q.next=k,!$s(g,n.memoizedState)&&(Un=!0,Ne&&(o=oo,o!==null)))throw o;n.memoizedState=g,n.baseState=w,n.baseQueue=Q,c.lastRenderedState=g}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function zf(n){var s=Dn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do g=n(g,w.action),w=w.next;while(w!==m);$s(g,s.memoizedState)||(Un=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function Pg(n,s,o){var c=pt,m=Dn(),g=Et;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!$s((Zt||m).memoizedState,o);if(w&&(m.memoizedState=o,Un=!0),m=m.queue,$f(Hg.bind(null,c,m,n),[n]),m.getSnapshot!==s||w||Ln!==null&&Ln.memoizedState.tag&1){if(c.flags|=2048,mo(9,{destroy:void 0},Ig.bind(null,c,m,o,s),null),Xt===null)throw Error(i(349));g||(ua&127)!==0||Fg(c,s,o)}return o}function Fg(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=pt.updateQueue,s===null?(s=Pc(),pt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Ig(n,s,o,c){s.value=o,s.getSnapshot=c,Vg(s)&&Qg(n)}function Hg(n,s,o){return o(function(){Vg(s)&&Qg(n)})}function Vg(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!$s(n,o)}catch{return!0}}function Qg(n){var s=gi(n,2);s!==null&&Es(s,n,2)}function Lf(n){var s=gs();if(typeof n=="function"){var o=n;if(n=o(),Ci){$t(!0);try{o()}finally{$t(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:n},s}function Zg(n,s,o,c){return n.baseState=o,Of(n,Zt,typeof c=="function"?c:da)}function eS(n,s,o,c,m){if(Qc(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};M.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,Kg(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Kg(n,s){var o=s.action,c=s.payload,m=n.state;if(s.isTransition){var g=M.T,w={};M.T=w;try{var k=o(m,c),Q=M.S;Q!==null&&Q(w,k),Gg(n,s,k)}catch(ce){Uf(n,s,ce)}finally{g!==null&&w.types!==null&&(g.types=w.types),M.T=g}}else try{g=o(m,c),Gg(n,s,g)}catch(ce){Uf(n,s,ce)}}function Gg(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Wg(n,s,c)},function(c){return Uf(n,s,c)}):Wg(n,s,o)}function Wg(n,s,o){s.status="fulfilled",s.value=o,Yg(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Kg(n,o)))}function Uf(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,Yg(s),s=s.next;while(s!==c)}n.action=null}function Yg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Xg(n,s){return s}function Jg(n,s){if(Et){var o=Xt.formState;if(o!==null){e:{var c=pt;if(Et){if(cn){t:{for(var m=cn,g=rr;m.nodeType!==8;){if(!g){m=null;break t}if(m=ir(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){cn=ir(m.nextSibling),c=m.data==="F!";break e}}Ra(c)}c=!1}c&&(s=o[0])}}return o=gs(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xg,lastRenderedState:s},o.queue=c,o=bx.bind(null,pt,c),c.dispatch=o,c=Lf(!1),g=If.bind(null,pt,!1,c.queue),c=gs(),m={state:s,dispatch:null,action:n,pending:null},c.queue=m,o=eS.bind(null,pt,m,g,o),m.dispatch=o,c.memoizedState=n,[s,o,!1]}function ex(n){var s=Dn();return tx(s,Zt,n)}function tx(n,s,o){if(s=Of(n,s,Xg)[0],n=Ic(da)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=pl(s)}catch(w){throw w===lo?Mc:w}else c=s;s=Dn();var m=s.queue,g=m.dispatch;return o!==s.memoizedState&&(pt.flags|=2048,mo(9,{destroy:void 0},tS.bind(null,m,o),null)),[c,g,n]}function tS(n,s){n.action=s}function nx(n){var s=Dn(),o=Zt;if(o!==null)return tx(s,o,n);Dn(),s=s.memoizedState,o=Dn();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function mo(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=pt.updateQueue,s===null&&(s=Pc(),pt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function sx(){return Dn().memoizedState}function Hc(n,s,o,c){var m=gs();pt.flags|=n,m.memoizedState=mo(1|s,{destroy:void 0},o,c===void 0?null:c)}function Vc(n,s,o,c){var m=Dn();c=c===void 0?null:c;var g=m.memoizedState.inst;Zt!==null&&c!==null&&kf(c,Zt.memoizedState.deps)?m.memoizedState=mo(s,g,o,c):(pt.flags|=n,m.memoizedState=mo(1|s,g,o,c))}function rx(n,s){Hc(8390656,8,n,s)}function $f(n,s){Vc(2048,8,n,s)}function nS(n){pt.flags|=4;var s=pt.updateQueue;if(s===null)s=Pc(),pt.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function ax(n){var s=Dn().memoizedState;return nS({ref:s,nextImpl:n}),function(){if((qt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function ix(n,s){return Vc(4,2,n,s)}function ox(n,s){return Vc(4,4,n,s)}function lx(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function cx(n,s,o){o=o!=null?o.concat([n]):null,Vc(4,4,lx.bind(null,s,n),o)}function qf(){}function ux(n,s){var o=Dn();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&kf(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function dx(n,s){var o=Dn();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&kf(s,c[1]))return c[0];if(c=n(),Ci){$t(!0);try{n()}finally{$t(!1)}}return o.memoizedState=[c,s],c}function Bf(n,s,o){return o===void 0||(ua&1073741824)!==0&&(Nt&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=fb(),pt.lanes|=n,Pa|=n,o)}function fx(n,s,o,c){return $s(o,s)?o:uo.current!==null?(n=Bf(n,o,c),$s(n,s)||(Un=!0),n):(ua&42)===0||(ua&1073741824)!==0&&(Nt&261930)===0?(Un=!0,n.memoizedState=o):(n=fb(),pt.lanes|=n,Pa|=n,s)}function hx(n,s,o,c,m){var g=H.p;H.p=g!==0&&8>g?g:8;var w=M.T,k={};M.T=k,If(n,!1,s,o);try{var Q=m(),ce=M.S;if(ce!==null&&ce(k,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Ne=Y1(Q,c);gl(n,s,Ne,Hs(n))}else gl(n,s,c,Hs(n))}catch(Ee){gl(n,s,{then:function(){},status:"rejected",reason:Ee},Hs())}finally{H.p=g,w!==null&&k.types!==null&&(w.types=k.types),M.T=w}}function sS(){}function Pf(n,s,o,c){if(n.tag!==5)throw Error(i(476));var m=mx(n).queue;hx(n,m,s,ee,o===null?sS:function(){return px(n),o(c)})}function mx(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:ee},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function px(n){var s=mx(n);s.next===null&&(s=n.alternate.memoizedState),gl(n,s.next.queue,{},Hs())}function Ff(){return cs(Ml)}function gx(){return Dn().memoizedState}function xx(){return Dn().memoizedState}function rS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Hs();n=za(o);var c=La(s,n,o);c!==null&&(Es(c,s,o),dl(c,s,o)),s={cache:xf()},n.payload=s;return}s=s.return}}function aS(n,s,o){var c=Hs();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Qc(n)?vx(s,o):(o=af(n,s,o,c),o!==null&&(Es(o,n,c),yx(o,s,c)))}function bx(n,s,o){var c=Hs();gl(n,s,o,c)}function gl(n,s,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qc(n))vx(s,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,k=g(w,o);if(m.hasEagerState=!0,m.eagerState=k,$s(k,w))return _c(n,s,m,0),Xt===null&&Cc(),!1}catch{}finally{}if(o=af(n,s,m,c),o!==null)return Es(o,n,c),yx(o,s,c),!0}return!1}function If(n,s,o,c){if(c={lane:2,revertLane:wh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qc(n)){if(s)throw Error(i(479))}else s=af(n,o,c,2),s!==null&&Es(s,n,2)}function Qc(n){var s=n.alternate;return n===pt||s!==null&&s===pt}function vx(n,s){fo=qc=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function yx(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,dn(n,o)}}var xl={readContext:cs,use:Fc,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useLayoutEffect:Sn,useInsertionEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useSyncExternalStore:Sn,useId:Sn,useHostTransitionStatus:Sn,useFormState:Sn,useActionState:Sn,useOptimistic:Sn,useMemoCache:Sn,useCacheRefresh:Sn};xl.useEffectEvent=Sn;var wx={readContext:cs,use:Fc,useCallback:function(n,s){return gs().memoizedState=[n,s===void 0?null:s],n},useContext:cs,useEffect:rx,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Hc(4194308,4,lx.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Hc(4194308,4,n,s)},useInsertionEffect:function(n,s){Hc(4,2,n,s)},useMemo:function(n,s){var o=gs();s=s===void 0?null:s;var c=n();if(Ci){$t(!0);try{n()}finally{$t(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=gs();if(o!==void 0){var m=o(s);if(Ci){$t(!0);try{o(s)}finally{$t(!1)}}}else m=s;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=aS.bind(null,pt,n),[c.memoizedState,n]},useRef:function(n){var s=gs();return n={current:n},s.memoizedState=n},useState:function(n){n=Lf(n);var s=n.queue,o=bx.bind(null,pt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:qf,useDeferredValue:function(n,s){var o=gs();return Bf(o,n,s)},useTransition:function(){var n=Lf(!1);return n=hx.bind(null,pt,n.queue,!0,!1),gs().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=pt,m=gs();if(Et){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Xt===null)throw Error(i(349));(Nt&127)!==0||Fg(c,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,rx(Hg.bind(null,c,g,n),[n]),c.flags|=2048,mo(9,{destroy:void 0},Ig.bind(null,c,g,o,s),null),o},useId:function(){var n=gs(),s=Xt.identifierPrefix;if(Et){var o=Hr,c=Ir;o=(c&~(1<<32-Ze(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Bc++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=X1++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Ff,useFormState:Jg,useActionState:Jg,useOptimistic:function(n){var s=gs();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=If.bind(null,pt,!0,o),o.dispatch=s,[n,s]},useMemoCache:Mf,useCacheRefresh:function(){return gs().memoizedState=rS.bind(null,pt)},useEffectEvent:function(n){var s=gs(),o={impl:n};return s.memoizedState=o,function(){if((qt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Hf={readContext:cs,use:Fc,useCallback:ux,useContext:cs,useEffect:$f,useImperativeHandle:cx,useInsertionEffect:ix,useLayoutEffect:ox,useMemo:dx,useReducer:Ic,useRef:sx,useState:function(){return Ic(da)},useDebugValue:qf,useDeferredValue:function(n,s){var o=Dn();return fx(o,Zt.memoizedState,n,s)},useTransition:function(){var n=Ic(da)[0],s=Dn().memoizedState;return[typeof n=="boolean"?n:pl(n),s]},useSyncExternalStore:Pg,useId:gx,useHostTransitionStatus:Ff,useFormState:ex,useActionState:ex,useOptimistic:function(n,s){var o=Dn();return Zg(o,Zt,n,s)},useMemoCache:Mf,useCacheRefresh:xx};Hf.useEffectEvent=ax;var jx={readContext:cs,use:Fc,useCallback:ux,useContext:cs,useEffect:$f,useImperativeHandle:cx,useInsertionEffect:ix,useLayoutEffect:ox,useMemo:dx,useReducer:zf,useRef:sx,useState:function(){return zf(da)},useDebugValue:qf,useDeferredValue:function(n,s){var o=Dn();return Zt===null?Bf(o,n,s):fx(o,Zt.memoizedState,n,s)},useTransition:function(){var n=zf(da)[0],s=Dn().memoizedState;return[typeof n=="boolean"?n:pl(n),s]},useSyncExternalStore:Pg,useId:gx,useHostTransitionStatus:Ff,useFormState:nx,useActionState:nx,useOptimistic:function(n,s){var o=Dn();return Zt!==null?Zg(o,Zt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:xx};jx.useEffectEvent=ax;function Vf(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:b({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Qf={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=Hs(),m=za(c);m.payload=s,o!=null&&(m.callback=o),s=La(n,m,c),s!==null&&(Es(s,n,c),dl(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=Hs(),m=za(c);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=La(n,m,c),s!==null&&(Es(s,n,c),dl(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Hs(),c=za(o);c.tag=2,s!=null&&(c.callback=s),s=La(n,c,o),s!==null&&(Es(s,n,o),dl(s,n,o))}};function Sx(n,s,o,c,m,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!sl(o,c)||!sl(m,g):!0}function Nx(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Qf.enqueueReplaceState(s,s.state,null)}function _i(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=b({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Cx(n){Nc(n)}function _x(n){console.error(n)}function Ex(n){Nc(n)}function Zc(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function kx(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Zf(n,s,o){return o=za(o),o.tag=3,o.payload={element:null},o.callback=function(){Zc(n,s)},o}function Dx(n){return n=za(n),n.tag=3,n}function Tx(n,s,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;n.payload=function(){return m(g)},n.callback=function(){kx(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){kx(s,o,c),typeof m!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})})}function iS(n,s,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&ao(s,o,m,!0),o=Bs.current,o!==null){switch(o.tag){case 31:case 13:return ar===null?au():o.alternate===null&&Nn===0&&(Nn=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Oc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),bh(n,c,m)),!1;case 22:return o.flags|=65536,c===Oc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),bh(n,c,m)),!1}throw Error(i(435,o.tag))}return bh(n,c,m),au(),!1}if(Et)return s=Bs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==ff&&(n=Error(i(422),{cause:c}),il(tr(n,o)))):(c!==ff&&(s=Error(i(423),{cause:c}),il(tr(s,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=tr(c,o),m=Zf(n.stateNode,c,m),Sf(n,m),Nn!==4&&(Nn=2)),!1;var g=Error(i(520),{cause:c});if(g=tr(g,o),Cl===null?Cl=[g]:Cl.push(g),Nn!==4&&(Nn=2),s===null)return!0;c=tr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=Zf(o.stateNode,c,n),Sf(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Fa===null||!Fa.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Dx(m),Tx(m,n,o,c),Sf(o,m),!1}o=o.return}while(o!==null);return!1}var Kf=Error(i(461)),Un=!1;function us(n,s,o,c){s.child=n===null?Og(s,null,o,c):Ni(s,n.child,o,c)}function Ax(n,s,o,c,m){o=o.render;var g=s.ref;if("ref"in c){var w={};for(var k in c)k!=="ref"&&(w[k]=c[k])}else w=c;return yi(s),c=Df(n,s,o,w,g,m),k=Tf(),n!==null&&!Un?(Af(n,s,m),fa(n,s,m)):(Et&&k&&uf(s),s.flags|=1,us(n,s,c,m),s.child)}function Rx(n,s,o,c,m){if(n===null){var g=o.type;return typeof g=="function"&&!of(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Mx(n,s,g,c,m)):(n=kc(o.type,null,c,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!nh(n,m)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:sl,o(w,c)&&n.ref===s.ref)return fa(n,s,m)}return s.flags|=1,n=ia(g,c),n.ref=s.ref,n.return=s,s.child=n}function Mx(n,s,o,c,m){if(n!==null){var g=n.memoizedProps;if(sl(g,c)&&n.ref===s.ref)if(Un=!1,s.pendingProps=c=g,nh(n,m))(n.flags&131072)!==0&&(Un=!0);else return s.lanes=n.lanes,fa(n,s,m)}return Gf(n,s,o,c,m)}function Ox(n,s,o,c){var m=c.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=s.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,s.child=null;return zx(n,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Rc(s,g!==null?g.cachePool:null),g!==null?Ug(s,g):Cf(),$g(s);else return c=s.lanes=536870912,zx(n,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Rc(s,g.cachePool),Ug(s,g),$a(),s.memoizedState=null):(n!==null&&Rc(s,null),Cf(),$a());return us(n,s,m,o),s.child}function bl(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function zx(n,s,o,c,m){var g=vf();return g=g===null?null:{parent:zn._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},n!==null&&Rc(s,null),Cf(),$g(s),n!==null&&ao(n,s,c,!0),s.childLanes=m,null}function Kc(n,s){return s=Wc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Lx(n,s,o){return Ni(s,n.child,null,o),n=Kc(s,s.pendingProps),n.flags|=2,Ps(s),s.memoizedState=null,n}function oS(n,s,o){var c=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Et){if(c.mode==="hidden")return n=Kc(s,c),s.lanes=536870912,bl(null,n);if(Ef(s),(n=cn)?(n=Kb(n,rr),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ta!==null?{id:Ir,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},o=vg(n),o.return=s,s.child=o,ls=s,cn=null)):n=null,n===null)throw Ra(s);return s.lanes=536870912,null}return Kc(s,c)}var g=n.memoizedState;if(g!==null){var w=g.dehydrated;if(Ef(s),m)if(s.flags&256)s.flags&=-257,s=Lx(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Un||ao(n,s,o,!1),m=(o&n.childLanes)!==0,Un||m){if(c=Xt,c!==null&&(w=it(c,o),w!==0&&w!==g.retryLane))throw g.retryLane=w,gi(n,w),Es(c,n,w),Kf;au(),s=Lx(n,s,o)}else n=g.treeContext,cn=ir(w.nextSibling),ls=s,Et=!0,Aa=null,rr=!1,n!==null&&jg(s,n),s=Kc(s,c),s.flags|=4096;return s}return n=ia(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Gc(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Gf(n,s,o,c,m){return yi(s),o=Df(n,s,o,c,void 0,m),c=Tf(),n!==null&&!Un?(Af(n,s,m),fa(n,s,m)):(Et&&c&&uf(s),s.flags|=1,us(n,s,o,m),s.child)}function Ux(n,s,o,c,m,g){return yi(s),s.updateQueue=null,o=Bg(s,c,o,m),qg(n),c=Tf(),n!==null&&!Un?(Af(n,s,g),fa(n,s,g)):(Et&&c&&uf(s),s.flags|=1,us(n,s,o,g),s.child)}function $x(n,s,o,c,m){if(yi(s),s.stateNode===null){var g=to,w=o.contextType;typeof w=="object"&&w!==null&&(g=cs(w)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Qf,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},wf(s),w=o.contextType,g.context=typeof w=="object"&&w!==null?cs(w):to,g.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Vf(s,o,w,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Qf.enqueueReplaceState(g,g.state,null),hl(s,c,g,m),fl(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){g=s.stateNode;var k=s.memoizedProps,Q=_i(o,k);g.props=Q;var ce=g.context,Ne=o.contextType;w=to,typeof Ne=="object"&&Ne!==null&&(w=cs(Ne));var Ee=o.getDerivedStateFromProps;Ne=typeof Ee=="function"||typeof g.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,Ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k||ce!==w)&&Nx(s,g,c,w),Oa=!1;var fe=s.memoizedState;g.state=fe,hl(s,c,g,m),fl(),ce=s.memoizedState,k||fe!==ce||Oa?(typeof Ee=="function"&&(Vf(s,o,Ee,c),ce=s.memoizedState),(Q=Oa||Sx(s,o,Q,c,fe,ce,w))?(Ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ce),g.props=c,g.state=ce,g.context=w,c=Q):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,jf(n,s),w=s.memoizedProps,Ne=_i(o,w),g.props=Ne,Ee=s.pendingProps,fe=g.context,ce=o.contextType,Q=to,typeof ce=="object"&&ce!==null&&(Q=cs(ce)),k=o.getDerivedStateFromProps,(ce=typeof k=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==Ee||fe!==Q)&&Nx(s,g,c,Q),Oa=!1,fe=s.memoizedState,g.state=fe,hl(s,c,g,m),fl();var ve=s.memoizedState;w!==Ee||fe!==ve||Oa||n!==null&&n.dependencies!==null&&Tc(n.dependencies)?(typeof k=="function"&&(Vf(s,o,k,c),ve=s.memoizedState),(Ne=Oa||Sx(s,o,Ne,c,fe,ve,Q)||n!==null&&n.dependencies!==null&&Tc(n.dependencies))?(ce||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ve,Q),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ve,Q)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ve),g.props=c,g.state=ve,g.context=Q,c=Ne):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(s.flags|=1024),c=!1)}return g=c,Gc(n,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&c?(s.child=Ni(s,n.child,null,m),s.child=Ni(s,null,o,m)):us(n,s,o,m),s.memoizedState=g.state,n=s.child):n=fa(n,s,m),n}function qx(n,s,o,c){return bi(),s.flags|=256,us(n,s,o,c),s.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(n){return{baseLanes:n,cachePool:kg()}}function Xf(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Is),n}function Bx(n,s,o){var c=s.pendingProps,m=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=n!==null&&n.memoizedState===null?!1:(kn.current&2)!==0),w&&(m=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,n===null){if(Et){if(m?Ua(s):$a(),(n=cn)?(n=Kb(n,rr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ta!==null?{id:Ir,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},o=vg(n),o.return=s,s.child=o,ls=s,cn=null)):n=null,n===null)throw Ra(s);return Oh(n)?s.lanes=32:s.lanes=536870912,null}var k=c.children;return c=c.fallback,m?($a(),m=s.mode,k=Wc({mode:"hidden",children:k},m),c=xi(c,m,o,null),k.return=s,c.return=s,k.sibling=c,s.child=k,c=s.child,c.memoizedState=Yf(o),c.childLanes=Xf(n,w,o),s.memoizedState=Wf,bl(null,c)):(Ua(s),Jf(s,k))}var Q=n.memoizedState;if(Q!==null&&(k=Q.dehydrated,k!==null)){if(g)s.flags&256?(Ua(s),s.flags&=-257,s=eh(n,s,o)):s.memoizedState!==null?($a(),s.child=n.child,s.flags|=128,s=null):($a(),k=c.fallback,m=s.mode,c=Wc({mode:"visible",children:c.children},m),k=xi(k,m,o,null),k.flags|=2,c.return=s,k.return=s,c.sibling=k,s.child=c,Ni(s,n.child,null,o),c=s.child,c.memoizedState=Yf(o),c.childLanes=Xf(n,w,o),s.memoizedState=Wf,s=bl(null,c));else if(Ua(s),Oh(k)){if(w=k.nextSibling&&k.nextSibling.dataset,w)var ce=w.dgst;w=ce,c=Error(i(419)),c.stack="",c.digest=w,il({value:c,source:null,stack:null}),s=eh(n,s,o)}else if(Un||ao(n,s,o,!1),w=(o&n.childLanes)!==0,Un||w){if(w=Xt,w!==null&&(c=it(w,o),c!==0&&c!==Q.retryLane))throw Q.retryLane=c,gi(n,c),Es(w,n,c),Kf;Mh(k)||au(),s=eh(n,s,o)}else Mh(k)?(s.flags|=192,s.child=n.child,s=null):(n=Q.treeContext,cn=ir(k.nextSibling),ls=s,Et=!0,Aa=null,rr=!1,n!==null&&jg(s,n),s=Jf(s,c.children),s.flags|=4096);return s}return m?($a(),k=c.fallback,m=s.mode,Q=n.child,ce=Q.sibling,c=ia(Q,{mode:"hidden",children:c.children}),c.subtreeFlags=Q.subtreeFlags&65011712,ce!==null?k=ia(ce,k):(k=xi(k,m,o,null),k.flags|=2),k.return=s,c.return=s,c.sibling=k,s.child=c,bl(null,c),c=s.child,k=n.child.memoizedState,k===null?k=Yf(o):(m=k.cachePool,m!==null?(Q=zn._currentValue,m=m.parent!==Q?{parent:Q,pool:Q}:m):m=kg(),k={baseLanes:k.baseLanes|o,cachePool:m}),c.memoizedState=k,c.childLanes=Xf(n,w,o),s.memoizedState=Wf,bl(n.child,c)):(Ua(s),o=n.child,n=o.sibling,o=ia(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(w=s.deletions,w===null?(s.deletions=[n],s.flags|=16):w.push(n)),s.child=o,s.memoizedState=null,o)}function Jf(n,s){return s=Wc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Wc(n,s){return n=qs(22,n,null,s),n.lanes=0,n}function eh(n,s,o){return Ni(s,n.child,null,o),n=Jf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Px(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),pf(n.return,s,o)}function th(n,s,o,c,m,g){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:g}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=m,w.treeForkCount=g)}function Fx(n,s,o){var c=s.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var w=kn.current,k=(w&2)!==0;if(k?(w=w&1|2,s.flags|=128):w&=1,pe(kn,w),us(n,s,c,o),c=Et?al:0,!k&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Px(n,o,s);else if(n.tag===19)Px(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)n=o.alternate,n!==null&&$c(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),th(s,!1,m,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&$c(n)===null){s.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}th(s,!0,o,null,g,c);break;case"together":th(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function fa(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Pa|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(ao(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ia(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ia(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function nh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Tc(n)))}function lS(n,s,o){switch(s.tag){case 3:oe(s,s.stateNode.containerInfo),Ma(s,zn,n.memoizedState.cache),bi();break;case 27:case 5:ue(s);break;case 4:oe(s,s.stateNode.containerInfo);break;case 10:Ma(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ef(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ua(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Bx(n,s,o):(Ua(s),n=fa(n,s,o),n!==null?n.sibling:null);Ua(s);break;case 19:var m=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(ao(n,s,o,!1),c=(o&s.childLanes)!==0),m){if(c)return Fx(n,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),pe(kn,kn.current),c)break;return null;case 22:return s.lanes=0,Ox(n,s,o,s.pendingProps);case 24:Ma(s,zn,n.memoizedState.cache)}return fa(n,s,o)}function Ix(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Un=!0;else{if(!nh(n,o)&&(s.flags&128)===0)return Un=!1,lS(n,s,o);Un=(n.flags&131072)!==0}else Un=!1,Et&&(s.flags&1048576)!==0&&wg(s,al,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=ji(s.elementType),s.type=n,typeof n=="function")of(n)?(c=_i(n,c),s.tag=1,s=$x(null,s,n,c,o)):(s.tag=0,s=Gf(null,s,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===U){s.tag=11,s=Ax(null,s,n,c,o);break e}else if(m===R){s.tag=14,s=Rx(null,s,n,c,o);break e}}throw s=I(n)||n,Error(i(306,s,""))}}return s;case 0:return Gf(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,m=_i(c,s.pendingProps),$x(n,s,c,m,o);case 3:e:{if(oe(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;m=g.element,jf(n,s),hl(s,c,null,o);var w=s.memoizedState;if(c=w.cache,Ma(s,zn,c),c!==g.cache&&gf(s,[zn],o,!0),fl(),c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=qx(n,s,c,o);break e}else if(c!==m){m=tr(Error(i(424)),s),il(m),s=qx(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(cn=ir(n.firstChild),ls=s,Et=!0,Aa=null,rr=!0,o=Og(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(bi(),c===m){s=fa(n,s,o);break e}us(n,s,c,o)}s=s.child}return s;case 26:return Gc(n,s),n===null?(o=ev(s.type,null,s.pendingProps,null))?s.memoizedState=o:Et||(o=s.type,n=s.pendingProps,c=fu(J.current).createElement(o),c[bn]=s,c[Hn]=n,ds(c,o,n),nn(c),s.stateNode=c):s.memoizedState=ev(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ue(s),n===null&&Et&&(c=s.stateNode=Yb(s.type,s.pendingProps,J.current),ls=s,rr=!0,m=cn,Qa(s.type)?(zh=m,cn=ir(c.firstChild)):cn=m),us(n,s,s.pendingProps.children,o),Gc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Et&&((m=c=cn)&&(c=$S(c,s.type,s.pendingProps,rr),c!==null?(s.stateNode=c,ls=s,cn=ir(c.firstChild),rr=!1,m=!0):m=!1),m||Ra(s)),ue(s),m=s.type,g=s.pendingProps,w=n!==null?n.memoizedProps:null,c=g.children,Th(m,g)?c=null:w!==null&&Th(m,w)&&(s.flags|=32),s.memoizedState!==null&&(m=Df(n,s,J1,null,null,o),Ml._currentValue=m),Gc(n,s),us(n,s,c,o),s.child;case 6:return n===null&&Et&&((n=o=cn)&&(o=qS(o,s.pendingProps,rr),o!==null?(s.stateNode=o,ls=s,cn=null,n=!0):n=!1),n||Ra(s)),null;case 13:return Bx(n,s,o);case 4:return oe(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ni(s,null,c,o):us(n,s,c,o),s.child;case 11:return Ax(n,s,s.type,s.pendingProps,o);case 7:return us(n,s,s.pendingProps,o),s.child;case 8:return us(n,s,s.pendingProps.children,o),s.child;case 12:return us(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ma(s,s.type,c.value),us(n,s,c.children,o),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,yi(s),m=cs(m),c=c(m),s.flags|=1,us(n,s,c,o),s.child;case 14:return Rx(n,s,s.type,s.pendingProps,o);case 15:return Mx(n,s,s.type,s.pendingProps,o);case 19:return Fx(n,s,o);case 31:return oS(n,s,o);case 22:return Ox(n,s,o,s.pendingProps);case 24:return yi(s),c=cs(zn),n===null?(m=vf(),m===null&&(m=Xt,g=xf(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:c,cache:m},wf(s),Ma(s,zn,m)):((n.lanes&o)!==0&&(jf(n,s),hl(s,null,null,o),fl()),m=n.memoizedState,g=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Ma(s,zn,c)):(c=g.cache,Ma(s,zn,c),c!==m.cache&&gf(s,[zn],o,!0))),us(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ha(n){n.flags|=4}function sh(n,s,o,c,m){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(gb())n.flags|=8192;else throw Si=Oc,yf}else n.flags&=-16777217}function Hx(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!av(s))if(gb())n.flags|=8192;else throw Si=Oc,yf}function Yc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?gn():536870912,n.lanes|=s,bo|=s)}function vl(n,s){if(!Et)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function un(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function cS(n,s,o){var c=s.pendingProps;switch(df(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(s),null;case 1:return un(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ca(zn),he(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ro(s)?ha(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hf())),un(s),null;case 26:var m=s.type,g=s.memoizedState;return n===null?(ha(s),g!==null?(un(s),Hx(s,g)):(un(s),sh(s,m,null,c,o))):g?g!==n.memoizedState?(ha(s),un(s),Hx(s,g)):(un(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&ha(s),un(s),sh(s,m,n,c,o)),null;case 27:if(Oe(s),o=J.current,m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ha(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return un(s),null}n=G.current,ro(s)?Sg(s):(n=Yb(m,c,o),s.stateNode=n,ha(s))}return un(s),null;case 5:if(Oe(s),m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ha(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return un(s),null}if(g=G.current,ro(s))Sg(s);else{var w=fu(J.current);switch(g){case 1:g=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=w.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?w.createElement(m,{is:c.is}):w.createElement(m)}}g[bn]=s,g[Hn]=c;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=g;e:switch(ds(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ha(s)}}return un(s),sh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&ha(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=J.current,ro(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,m=ls,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[bn]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Bb(n.nodeValue,o)),n||Ra(s,!0)}else n=fu(n).createTextNode(c),n[bn]=s,s.stateNode=n}return un(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=ro(s),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[bn]=s}else bi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;un(s),n=!1}else o=hf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Ps(s),s):(Ps(s),null);if((s.flags&128)!==0)throw Error(i(558))}return un(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=ro(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[bn]=s}else bi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;un(s),m=!1}else m=hf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Ps(s),s):(Ps(s),null)}return Ps(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Yc(s,s.updateQueue),un(s),null);case 4:return he(),n===null&&Ch(s.stateNode.containerInfo),un(s),null;case 10:return ca(s.type),un(s),null;case 19:if(W(kn),c=s.memoizedState,c===null)return un(s),null;if(m=(s.flags&128)!==0,g=c.rendering,g===null)if(m)vl(c,!1);else{if(Nn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=$c(n),g!==null){for(s.flags|=128,vl(c,!1),n=g.updateQueue,s.updateQueue=n,Yc(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)bg(o,n),o=o.sibling;return pe(kn,kn.current&1|2),Et&&oa(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&_e()>nu&&(s.flags|=128,m=!0,vl(c,!1),s.lanes=4194304)}else{if(!m)if(n=$c(g),n!==null){if(s.flags|=128,m=!0,n=n.updateQueue,s.updateQueue=n,Yc(s,n),vl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Et)return un(s),null}else 2*_e()-c.renderingStartTime>nu&&o!==536870912&&(s.flags|=128,m=!0,vl(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(n=c.last,n!==null?n.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=_e(),n.sibling=null,o=kn.current,pe(kn,m?o&1|2:o&1),Et&&oa(s,c.treeForkCount),n):(un(s),null);case 22:case 23:return Ps(s),_f(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(un(s),s.subtreeFlags&6&&(s.flags|=8192)):un(s),o=s.updateQueue,o!==null&&Yc(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&W(wi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ca(zn),un(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function uS(n,s){switch(df(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ca(zn),he(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Oe(s),null;case 31:if(s.memoizedState!==null){if(Ps(s),s.alternate===null)throw Error(i(340));bi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Ps(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));bi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return W(kn),null;case 4:return he(),null;case 10:return ca(s.type),null;case 22:case 23:return Ps(s),_f(),n!==null&&W(wi),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ca(zn),null;case 25:return null;default:return null}}function Vx(n,s){switch(df(s),s.tag){case 3:ca(zn),he();break;case 26:case 27:case 5:Oe(s);break;case 4:he();break;case 31:s.memoizedState!==null&&Ps(s);break;case 13:Ps(s);break;case 19:W(kn);break;case 10:ca(s.type);break;case 22:case 23:Ps(s),_f(),n!==null&&W(wi);break;case 24:ca(zn)}}function yl(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var g=o.create,w=o.inst;c=g(),w.destroy=c}o=o.next}while(o!==m)}}catch(k){Qt(s,s.return,k)}}function qa(n,s,o){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&n)===n){var w=c.inst,k=w.destroy;if(k!==void 0){w.destroy=void 0,m=s;var Q=o,ce=k;try{ce()}catch(Ne){Qt(m,Q,Ne)}}}c=c.next}while(c!==g)}}catch(Ne){Qt(s,s.return,Ne)}}function Qx(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Lg(s,o)}catch(c){Qt(n,n.return,c)}}}function Zx(n,s,o){o.props=_i(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Qt(n,s,c)}}function wl(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){Qt(n,s,m)}}function Vr(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){Qt(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Qt(n,s,m)}else o.current=null}function Kx(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){Qt(n,n.return,m)}}function rh(n,s,o){try{var c=n.stateNode;RS(c,n.type,o,s),c[Hn]=s}catch(m){Qt(n,n.return,m)}}function Gx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qa(n.type)||n.tag===4}function ah(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Gx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ih(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=On));else if(c!==4&&(c===27&&Qa(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(ih(n,s,o),n=n.sibling;n!==null;)ih(n,s,o),n=n.sibling}function Xc(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&Qa(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Xc(n,s,o),n=n.sibling;n!==null;)Xc(n,s,o),n=n.sibling}function Wx(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);ds(s,c,o),s[bn]=n,s[Hn]=o}catch(g){Qt(n,n.return,g)}}var ma=!1,$n=!1,oh=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function dS(n,s){if(n=n.containerInfo,kh=vu,n=cg(n),Jd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var w=0,k=-1,Q=-1,ce=0,Ne=0,Ee=n,fe=null;t:for(;;){for(var ve;Ee!==o||m!==0&&Ee.nodeType!==3||(k=w+m),Ee!==g||c!==0&&Ee.nodeType!==3||(Q=w+c),Ee.nodeType===3&&(w+=Ee.nodeValue.length),(ve=Ee.firstChild)!==null;)fe=Ee,Ee=ve;for(;;){if(Ee===n)break t;if(fe===o&&++ce===m&&(k=w),fe===g&&++Ne===c&&(Q=w),(ve=Ee.nextSibling)!==null)break;Ee=fe,fe=Ee.parentNode}Ee=ve}o=k===-1||Q===-1?null:{start:k,end:Q}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dh={focusedElem:n,selectionRange:o},vu=!1,Yn=s;Yn!==null;)if(s=Yn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Yn=n;else for(;Yn!==null;){switch(s=Yn,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Qe=_i(o.type,m);n=c.getSnapshotBeforeUpdate(Qe,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(rt){Qt(o,o.return,rt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Rh(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Yn=n;break}Yn=s.return}}function Xx(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ga(n,o),c&4&&yl(5,o);break;case 1:if(ga(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(w){Qt(o,o.return,w)}else{var m=_i(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Qt(o,o.return,w)}}c&64&&Qx(o),c&512&&wl(o,o.return);break;case 3:if(ga(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Lg(n,s)}catch(w){Qt(o,o.return,w)}}break;case 27:s===null&&c&4&&Wx(o);case 26:case 5:ga(n,o),s===null&&c&4&&Kx(o),c&512&&wl(o,o.return);break;case 12:ga(n,o);break;case 31:ga(n,o),c&4&&tb(n,o);break;case 13:ga(n,o),c&4&&nb(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=yS.bind(null,o),BS(n,o))));break;case 22:if(c=o.memoizedState!==null||ma,!c){s=s!==null&&s.memoizedState!==null||$n,m=ma;var g=$n;ma=c,($n=s)&&!g?xa(n,o,(o.subtreeFlags&8772)!==0):ga(n,o),ma=m,$n=g}break;case 30:break;default:ga(n,o)}}function Jx(n){var s=n.alternate;s!==null&&(n.alternate=null,Jx(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ss(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var hn=null,Ss=!1;function pa(n,s,o){for(o=o.child;o!==null;)eb(n,s,o),o=o.sibling}function eb(n,s,o){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Ut,o)}catch{}switch(o.tag){case 26:$n||Vr(o,s),pa(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:$n||Vr(o,s);var c=hn,m=Ss;Qa(o.type)&&(hn=o.stateNode,Ss=!1),pa(n,s,o),Tl(o.stateNode),hn=c,Ss=m;break;case 5:$n||Vr(o,s);case 6:if(c=hn,m=Ss,hn=null,pa(n,s,o),hn=c,Ss=m,hn!==null)if(Ss)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(o.stateNode)}catch(g){Qt(o,s,g)}else try{hn.removeChild(o.stateNode)}catch(g){Qt(o,s,g)}break;case 18:hn!==null&&(Ss?(n=hn,Qb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_o(n)):Qb(hn,o.stateNode));break;case 4:c=hn,m=Ss,hn=o.stateNode.containerInfo,Ss=!0,pa(n,s,o),hn=c,Ss=m;break;case 0:case 11:case 14:case 15:qa(2,o,s),$n||qa(4,o,s),pa(n,s,o);break;case 1:$n||(Vr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Zx(o,s,c)),pa(n,s,o);break;case 21:pa(n,s,o);break;case 22:$n=(c=$n)||o.memoizedState!==null,pa(n,s,o),$n=c;break;default:pa(n,s,o)}}function tb(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_o(n)}catch(o){Qt(s,s.return,o)}}}function nb(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_o(n)}catch(o){Qt(s,s.return,o)}}function fS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Yx),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Yx),s;default:throw Error(i(435,n.tag))}}function Jc(n,s){var o=fS(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var m=wS.bind(null,n,c);c.then(m,m)}})}function Ns(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=n,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 27:if(Qa(k.type)){hn=k.stateNode,Ss=!1;break e}break;case 5:hn=k.stateNode,Ss=!1;break e;case 3:case 4:hn=k.stateNode.containerInfo,Ss=!0;break e}k=k.return}if(hn===null)throw Error(i(160));eb(g,w,m),hn=null,Ss=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)sb(s,n),s=s.sibling}var wr=null;function sb(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ns(s,n),Cs(n),c&4&&(qa(3,n,n.return),yl(3,n),qa(5,n,n.return));break;case 1:Ns(s,n),Cs(n),c&512&&($n||o===null||Vr(o,o.return)),c&64&&ma&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=wr;if(Ns(s,n),Cs(n),c&512&&($n||o===null||Vr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[fs]||g[bn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),ds(g,c,o),g[bn]=n,nn(g),c=g;break e;case"link":var w=sv("link","href",m).get(c+(o.href||""));if(w){for(var k=0;k<w.length;k++)if(g=w[k],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(k,1);break t}}g=m.createElement(c),ds(g,c,o),m.head.appendChild(g);break;case"meta":if(w=sv("meta","content",m).get(c+(o.content||""))){for(k=0;k<w.length;k++)if(g=w[k],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(k,1);break t}}g=m.createElement(c),ds(g,c,o),m.head.appendChild(g);break;default:throw Error(i(468,c))}g[bn]=n,nn(g),c=g}n.stateNode=c}else rv(m,n.type,n.stateNode);else n.stateNode=nv(m,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?rv(m,n.type,n.stateNode):nv(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&rh(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ns(s,n),Cs(n),c&512&&($n||o===null||Vr(o,o.return)),o!==null&&c&4&&rh(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ns(s,n),Cs(n),c&512&&($n||o===null||Vr(o,o.return)),n.flags&32){m=n.stateNode;try{Ur(m,"")}catch(Qe){Qt(n,n.return,Qe)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,rh(n,m,o!==null?o.memoizedProps:m)),c&1024&&(oh=!0);break;case 6:if(Ns(s,n),Cs(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Qe){Qt(n,n.return,Qe)}}break;case 3:if(pu=null,m=wr,wr=hu(s.containerInfo),Ns(s,n),wr=m,Cs(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{_o(s.containerInfo)}catch(Qe){Qt(n,n.return,Qe)}oh&&(oh=!1,rb(n));break;case 4:c=wr,wr=hu(n.stateNode.containerInfo),Ns(s,n),Cs(n),wr=c;break;case 12:Ns(s,n),Cs(n);break;case 31:Ns(s,n),Cs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Jc(n,c)));break;case 13:Ns(s,n),Cs(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(tu=_e()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Jc(n,c)));break;case 22:m=n.memoizedState!==null;var Q=o!==null&&o.memoizedState!==null,ce=ma,Ne=$n;if(ma=ce||m,$n=Ne||Q,Ns(s,n),$n=Ne,ma=ce,Cs(n),c&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||Q||ma||$n||Ei(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){Q=o=s;try{if(g=Q.stateNode,m)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{k=Q.stateNode;var Ee=Q.memoizedProps.style,fe=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;k.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(Qe){Qt(Q,Q.return,Qe)}}}else if(s.tag===6){if(o===null){Q=s;try{Q.stateNode.nodeValue=m?"":Q.memoizedProps}catch(Qe){Qt(Q,Q.return,Qe)}}}else if(s.tag===18){if(o===null){Q=s;try{var ve=Q.stateNode;m?Zb(ve,!0):Zb(Q.stateNode,!1)}catch(Qe){Qt(Q,Q.return,Qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Jc(n,o))));break;case 19:Ns(s,n),Cs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Jc(n,c)));break;case 30:break;case 21:break;default:Ns(s,n),Cs(n)}}function Cs(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(Gx(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,g=ah(n);Xc(n,g,m);break;case 5:var w=o.stateNode;o.flags&32&&(Ur(w,""),o.flags&=-33);var k=ah(n);Xc(n,k,w);break;case 3:case 4:var Q=o.stateNode.containerInfo,ce=ah(n);ih(n,ce,Q);break;default:throw Error(i(161))}}catch(Ne){Qt(n,n.return,Ne)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function rb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;rb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ga(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Xx(n,s.alternate,s),s=s.sibling}function Ei(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:qa(4,s,s.return),Ei(s);break;case 1:Vr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Zx(s,s.return,o),Ei(s);break;case 27:Tl(s.stateNode);case 26:case 5:Vr(s,s.return),Ei(s);break;case 22:s.memoizedState===null&&Ei(s);break;case 30:Ei(s);break;default:Ei(s)}n=n.sibling}}function xa(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=n,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:xa(m,g,o),yl(4,g);break;case 1:if(xa(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ce){Qt(c,c.return,ce)}if(c=g,m=c.updateQueue,m!==null){var k=c.stateNode;try{var Q=m.shared.hiddenCallbacks;if(Q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Q.length;m++)zg(Q[m],k)}catch(ce){Qt(c,c.return,ce)}}o&&w&64&&Qx(g),wl(g,g.return);break;case 27:Wx(g);case 26:case 5:xa(m,g,o),o&&c===null&&w&4&&Kx(g),wl(g,g.return);break;case 12:xa(m,g,o);break;case 31:xa(m,g,o),o&&w&4&&tb(m,g);break;case 13:xa(m,g,o),o&&w&4&&nb(m,g);break;case 22:g.memoizedState===null&&xa(m,g,o),wl(g,g.return);break;case 30:break;default:xa(m,g,o)}s=s.sibling}}function lh(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ol(o))}function ch(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ol(n))}function jr(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ab(n,s,o,c),s=s.sibling}function ab(n,s,o,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:jr(n,s,o,c),m&2048&&yl(9,s);break;case 1:jr(n,s,o,c);break;case 3:jr(n,s,o,c),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ol(n)));break;case 12:if(m&2048){jr(n,s,o,c),n=s.stateNode;try{var g=s.memoizedProps,w=g.id,k=g.onPostCommit;typeof k=="function"&&k(w,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Q){Qt(s,s.return,Q)}}else jr(n,s,o,c);break;case 31:jr(n,s,o,c);break;case 13:jr(n,s,o,c);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?jr(n,s,o,c):jl(n,s):g._visibility&2?jr(n,s,o,c):(g._visibility|=2,po(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),m&2048&&lh(w,s);break;case 24:jr(n,s,o,c),m&2048&&ch(s.alternate,s);break;default:jr(n,s,o,c)}}function po(n,s,o,c,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,w=s,k=o,Q=c,ce=w.flags;switch(w.tag){case 0:case 11:case 15:po(g,w,k,Q,m),yl(8,w);break;case 23:break;case 22:var Ne=w.stateNode;w.memoizedState!==null?Ne._visibility&2?po(g,w,k,Q,m):jl(g,w):(Ne._visibility|=2,po(g,w,k,Q,m)),m&&ce&2048&&lh(w.alternate,w);break;case 24:po(g,w,k,Q,m),m&&ce&2048&&ch(w.alternate,w);break;default:po(g,w,k,Q,m)}s=s.sibling}}function jl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,m=c.flags;switch(c.tag){case 22:jl(o,c),m&2048&&lh(c.alternate,c);break;case 24:jl(o,c),m&2048&&ch(c.alternate,c);break;default:jl(o,c)}s=s.sibling}}var Sl=8192;function go(n,s,o){if(n.subtreeFlags&Sl)for(n=n.child;n!==null;)ib(n,s,o),n=n.sibling}function ib(n,s,o){switch(n.tag){case 26:go(n,s,o),n.flags&Sl&&n.memoizedState!==null&&XS(o,wr,n.memoizedState,n.memoizedProps);break;case 5:go(n,s,o);break;case 3:case 4:var c=wr;wr=hu(n.stateNode.containerInfo),go(n,s,o),wr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Sl,Sl=16777216,go(n,s,o),Sl=c):go(n,s,o));break;default:go(n,s,o)}}function ob(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Nl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Yn=c,cb(c,n)}ob(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)lb(n),n=n.sibling}function lb(n){switch(n.tag){case 0:case 11:case 15:Nl(n),n.flags&2048&&qa(9,n,n.return);break;case 3:Nl(n);break;case 12:Nl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,eu(n)):Nl(n);break;default:Nl(n)}}function eu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Yn=c,cb(c,n)}ob(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:qa(8,s,s.return),eu(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,eu(s));break;default:eu(s)}n=n.sibling}}function cb(n,s){for(;Yn!==null;){var o=Yn;switch(o.tag){case 0:case 11:case 15:qa(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ol(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Yn=c;else e:for(o=n;Yn!==null;){c=Yn;var m=c.sibling,g=c.return;if(Jx(c),c===o){Yn=null;break e}if(m!==null){m.return=g,Yn=m;break e}Yn=g}}}var hS={getCacheForType:function(n){var s=cs(zn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return cs(zn).controller.signal}},mS=typeof WeakMap=="function"?WeakMap:Map,qt=0,Xt=null,wt=null,Nt=0,Vt=0,Fs=null,Ba=!1,xo=!1,uh=!1,ba=0,Nn=0,Pa=0,ki=0,dh=0,Is=0,bo=0,Cl=null,_s=null,fh=!1,tu=0,ub=0,nu=1/0,su=null,Fa=null,Zn=0,Ia=null,vo=null,va=0,hh=0,mh=null,db=null,_l=0,ph=null;function Hs(){return(qt&2)!==0&&Nt!==0?Nt&-Nt:M.T!==null?wh():ns()}function fb(){if(Is===0)if((Nt&536870912)===0||Et){var n=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),Is=n}else Is=536870912;return n=Bs.current,n!==null&&(n.flags|=32),Is}function Es(n,s,o){(n===Xt&&(Vt===2||Vt===9)||n.cancelPendingCommit!==null)&&(yo(n,0),Ha(n,Nt,Is,!1)),Fn(n,o),((qt&2)===0||n!==Xt)&&(n===Xt&&((qt&2)===0&&(ki|=o),Nn===4&&Ha(n,Nt,Is,!1)),Qr(n))}function hb(n,s,o){if((qt&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||an(n,s),m=c?xS(n,s):xh(n,s,!0),g=c;do{if(m===0){xo&&!c&&Ha(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!pS(o)){m=xh(n,s,!1),g=!1;continue}if(m===2){if(g=s,n.errorRecoveryDisabledLanes&g)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var k=n;m=Cl;var Q=k.current.memoizedState.isDehydrated;if(Q&&(yo(k,w).flags|=256),w=xh(k,w,!1),w!==2){if(uh&&!Q){k.errorRecoveryDisabledLanes|=g,ki|=g,m=4;break e}g=_s,_s=m,g!==null&&(_s===null?_s=g:_s.push.apply(_s,g))}m=w}if(g=!1,m!==2)continue}}if(m===1){yo(n,0),Ha(n,s,0,!0);break}e:{switch(c=n,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ha(c,s,Is,!Ba);break e;case 2:_s=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=tu+300-_e(),10<m)){if(Ha(c,s,Is,!Ba),Rt(c,0,!0)!==0)break e;va=s,c.timeoutHandle=Hb(mb.bind(null,c,o,_s,su,fh,s,Is,ki,bo,Ba,g,"Throttled",-0,0),m);break e}mb(c,o,_s,su,fh,s,Is,ki,bo,Ba,g,null,-0,0)}}break}while(!0);Qr(n)}function mb(n,s,o,c,m,g,w,k,Q,ce,Ne,Ee,fe,ve){if(n.timeoutHandle=-1,Ee=s.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:On},ib(s,g,Ee);var Qe=(g&62914560)===g?tu-_e():(g&4194048)===g?ub-_e():0;if(Qe=JS(Ee,Qe),Qe!==null){va=g,n.cancelPendingCommit=Qe(jb.bind(null,n,s,g,o,c,m,w,k,Q,Ne,Ee,null,fe,ve)),Ha(n,g,w,!ce);return}}jb(n,s,g,o,c,m,w,k,Q)}function pS(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!$s(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ha(n,s,o,c){s&=~dh,s&=~ki,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var m=s;0<m;){var g=31-Ze(m),w=1<<g;c[g]=-1,m&=~w}o!==0&&_t(n,o,s)}function ru(){return(qt&6)===0?(El(0),!1):!0}function gh(){if(wt!==null){if(Vt===0)var n=wt.return;else n=wt,la=vi=null,Rf(n),co=null,cl=0,n=wt;for(;n!==null;)Vx(n.alternate,n),n=n.return;wt=null}}function yo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,zS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),va=0,gh(),Xt=n,wt=o=ia(n.current,null),Nt=s,Vt=0,Fs=null,Ba=!1,xo=an(n,s),uh=!1,bo=Is=dh=ki=Pa=Nn=0,_s=Cl=null,fh=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var m=31-Ze(c),g=1<<m;s|=n[m],c&=~g}return ba=s,Cc(),o}function pb(n,s){pt=null,M.H=xl,s===lo||s===Mc?(s=Ag(),Vt=3):s===yf?(s=Ag(),Vt=4):Vt=s===Kf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Fs=s,wt===null&&(Nn=1,Zc(n,tr(s,n.current)))}function gb(){var n=Bs.current;return n===null?!0:(Nt&4194048)===Nt?ar===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?n===ar:!1}function xb(){var n=M.H;return M.H=xl,n===null?xl:n}function bb(){var n=M.A;return M.A=hS,n}function au(){Nn=4,Ba||(Nt&4194048)!==Nt&&Bs.current!==null||(xo=!0),(Pa&134217727)===0&&(ki&134217727)===0||Xt===null||Ha(Xt,Nt,Is,!1)}function xh(n,s,o){var c=qt;qt|=2;var m=xb(),g=bb();(Xt!==n||Nt!==s)&&(su=null,yo(n,s)),s=!1;var w=Nn;e:do try{if(Vt!==0&&wt!==null){var k=wt,Q=Fs;switch(Vt){case 8:gh(),w=6;break e;case 3:case 2:case 9:case 6:Bs.current===null&&(s=!0);var ce=Vt;if(Vt=0,Fs=null,wo(n,k,Q,ce),o&&xo){w=0;break e}break;default:ce=Vt,Vt=0,Fs=null,wo(n,k,Q,ce)}}gS(),w=Nn;break}catch(Ne){pb(n,Ne)}while(!0);return s&&n.shellSuspendCounter++,la=vi=null,qt=c,M.H=m,M.A=g,wt===null&&(Xt=null,Nt=0,Cc()),w}function gS(){for(;wt!==null;)vb(wt)}function xS(n,s){var o=qt;qt|=2;var c=xb(),m=bb();Xt!==n||Nt!==s?(su=null,nu=_e()+500,yo(n,s)):xo=an(n,s);e:do try{if(Vt!==0&&wt!==null){s=wt;var g=Fs;t:switch(Vt){case 1:Vt=0,Fs=null,wo(n,s,g,1);break;case 2:case 9:if(Dg(g)){Vt=0,Fs=null,yb(s);break}s=function(){Vt!==2&&Vt!==9||Xt!==n||(Vt=7),Qr(n)},g.then(s,s);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:Dg(g)?(Vt=0,Fs=null,yb(s)):(Vt=0,Fs=null,wo(n,s,g,7));break;case 5:var w=null;switch(wt.tag){case 26:w=wt.memoizedState;case 5:case 27:var k=wt;if(w?av(w):k.stateNode.complete){Vt=0,Fs=null;var Q=k.sibling;if(Q!==null)wt=Q;else{var ce=k.return;ce!==null?(wt=ce,iu(ce)):wt=null}break t}}Vt=0,Fs=null,wo(n,s,g,5);break;case 6:Vt=0,Fs=null,wo(n,s,g,6);break;case 8:gh(),Nn=6;break e;default:throw Error(i(462))}}bS();break}catch(Ne){pb(n,Ne)}while(!0);return la=vi=null,M.H=c,M.A=m,qt=o,wt!==null?0:(Xt=null,Nt=0,Cc(),Nn)}function bS(){for(;wt!==null&&!X();)vb(wt)}function vb(n){var s=Ix(n.alternate,n,ba);n.memoizedProps=n.pendingProps,s===null?iu(n):wt=s}function yb(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Ux(o,s,s.pendingProps,s.type,void 0,Nt);break;case 11:s=Ux(o,s,s.pendingProps,s.type.render,s.ref,Nt);break;case 5:Rf(s);default:Vx(o,s),s=wt=bg(s,ba),s=Ix(o,s,ba)}n.memoizedProps=n.pendingProps,s===null?iu(n):wt=s}function wo(n,s,o,c){la=vi=null,Rf(s),co=null,cl=0;var m=s.return;try{if(iS(n,m,s,o,Nt)){Nn=1,Zc(n,tr(o,n.current)),wt=null;return}}catch(g){if(m!==null)throw wt=m,g;Nn=1,Zc(n,tr(o,n.current)),wt=null;return}s.flags&32768?(Et||c===1?n=!0:xo||(Nt&536870912)!==0?n=!1:(Ba=n=!0,(c===2||c===9||c===3||c===6)&&(c=Bs.current,c!==null&&c.tag===13&&(c.flags|=16384))),wb(s,n)):iu(s)}function iu(n){var s=n;do{if((s.flags&32768)!==0){wb(s,Ba);return}n=s.return;var o=cS(s.alternate,s,ba);if(o!==null){wt=o;return}if(s=s.sibling,s!==null){wt=s;return}wt=s=n}while(s!==null);Nn===0&&(Nn=5)}function wb(n,s){do{var o=uS(n.alternate,n);if(o!==null){o.flags&=32767,wt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){wt=n;return}wt=n=o}while(n!==null);Nn=6,wt=null}function jb(n,s,o,c,m,g,w,k,Q){n.cancelPendingCommit=null;do ou();while(Zn!==0);if((qt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=rf,ct(n,o,g,w,k,Q),n===Xt&&(wt=Xt=null,Nt=0),vo=s,Ia=n,va=o,hh=g,mh=m,db=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jS(ke,function(){return Eb(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=M.T,M.T=null,m=H.p,H.p=2,w=qt,qt|=4;try{dS(n,s,o)}finally{qt=w,H.p=m,M.T=c}}Zn=1,Sb(),Nb(),Cb()}}function Sb(){if(Zn===1){Zn=0;var n=Ia,s=vo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var c=H.p;H.p=2;var m=qt;qt|=4;try{sb(s,n);var g=Dh,w=cg(n.containerInfo),k=g.focusedElem,Q=g.selectionRange;if(w!==k&&k&&k.ownerDocument&&lg(k.ownerDocument.documentElement,k)){if(Q!==null&&Jd(k)){var ce=Q.start,Ne=Q.end;if(Ne===void 0&&(Ne=ce),"selectionStart"in k)k.selectionStart=ce,k.selectionEnd=Math.min(Ne,k.value.length);else{var Ee=k.ownerDocument||document,fe=Ee&&Ee.defaultView||window;if(fe.getSelection){var ve=fe.getSelection(),Qe=k.textContent.length,rt=Math.min(Q.start,Qe),Gt=Q.end===void 0?rt:Math.min(Q.end,Qe);!ve.extend&&rt>Gt&&(w=Gt,Gt=rt,rt=w);var ae=og(k,rt),Y=og(k,Gt);if(ae&&Y&&(ve.rangeCount!==1||ve.anchorNode!==ae.node||ve.anchorOffset!==ae.offset||ve.focusNode!==Y.node||ve.focusOffset!==Y.offset)){var le=Ee.createRange();le.setStart(ae.node,ae.offset),ve.removeAllRanges(),rt>Gt?(ve.addRange(le),ve.extend(Y.node,Y.offset)):(le.setEnd(Y.node,Y.offset),ve.addRange(le))}}}}for(Ee=[],ve=k;ve=ve.parentNode;)ve.nodeType===1&&Ee.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Ee.length;k++){var Ce=Ee[k];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}vu=!!kh,Dh=kh=null}finally{qt=m,H.p=c,M.T=o}}n.current=s,Zn=2}}function Nb(){if(Zn===2){Zn=0;var n=Ia,s=vo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var c=H.p;H.p=2;var m=qt;qt|=4;try{Xx(n,s.alternate,s)}finally{qt=m,H.p=c,M.T=o}}Zn=3}}function Cb(){if(Zn===4||Zn===3){Zn=0,Te();var n=Ia,s=vo,o=va,c=db;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zn=5:(Zn=0,vo=Ia=null,_b(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Fa=null),tn(o),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Ut,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=M.T,m=H.p,H.p=2,M.T=null;try{for(var g=n.onRecoverableError,w=0;w<c.length;w++){var k=c[w];g(k.value,{componentStack:k.stack})}}finally{M.T=s,H.p=m}}(va&3)!==0&&ou(),Qr(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===ph?_l++:(_l=0,ph=n):_l=0,El(0)}}function _b(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,ol(s)))}function ou(){return Sb(),Nb(),Cb(),Eb()}function Eb(){if(Zn!==5)return!1;var n=Ia,s=hh;hh=0;var o=tn(va),c=M.T,m=H.p;try{H.p=32>o?32:o,M.T=null,o=mh,mh=null;var g=Ia,w=va;if(Zn=0,vo=Ia=null,va=0,(qt&6)!==0)throw Error(i(331));var k=qt;if(qt|=4,lb(g.current),ab(g,g.current,w,o),qt=k,El(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Ut,g)}catch{}return!0}finally{H.p=m,M.T=c,_b(n,s)}}function kb(n,s,o){s=tr(o,s),s=Zf(n.stateNode,s,2),n=La(n,s,2),n!==null&&(Fn(n,2),Qr(n))}function Qt(n,s,o){if(n.tag===3)kb(n,n,o);else for(;s!==null;){if(s.tag===3){kb(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fa===null||!Fa.has(c))){n=tr(o,n),o=Dx(2),c=La(s,o,2),c!==null&&(Tx(o,c,s,n),Fn(c,2),Qr(c));break}}s=s.return}}function bh(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new mS;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(o)||(uh=!0,m.add(o),n=vS.bind(null,n,s,o),s.then(n,n))}function vS(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(Nt&o)===o&&(Nn===4||Nn===3&&(Nt&62914560)===Nt&&300>_e()-tu?(qt&2)===0&&yo(n,0):dh|=o,bo===Nt&&(bo=0)),Qr(n)}function Db(n,s){s===0&&(s=gn()),n=gi(n,s),n!==null&&(Fn(n,s),Qr(n))}function yS(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Db(n,o)}function wS(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Db(n,o)}function jS(n,s){return P(n,s)}var lu=null,jo=null,vh=!1,cu=!1,yh=!1,Va=0;function Qr(n){n!==jo&&n.next===null&&(jo===null?lu=jo=n:jo=jo.next=n),cu=!0,vh||(vh=!0,NS())}function El(n,s){if(!yh&&cu){yh=!0;do for(var o=!1,c=lu;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var w=c.suspendedLanes,k=c.pingedLanes;g=(1<<31-Ze(42|n)+1)-1,g&=m&~(w&~k),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Mb(c,g))}else g=Nt,g=Rt(c,c===Xt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||an(c,g)||(o=!0,Mb(c,g));c=c.next}while(o);yh=!1}}function SS(){Tb()}function Tb(){cu=vh=!1;var n=0;Va!==0&&OS()&&(n=Va);for(var s=_e(),o=null,c=lu;c!==null;){var m=c.next,g=Ab(c,s);g===0?(c.next=null,o===null?lu=m:o.next=m,m===null&&(jo=o)):(o=c,(n!==0||(g&3)!==0)&&(cu=!0)),c=m}Zn!==0&&Zn!==5||El(n),Va!==0&&(Va=0)}function Ab(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var w=31-Ze(g),k=1<<w,Q=m[w];Q===-1?((k&o)===0||(k&c)!==0)&&(m[w]=jn(k,s)):Q<=s&&(n.expiredLanes|=k),g&=~k}if(s=Xt,o=Nt,o=Rt(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(Vt===2||Vt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&F(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||an(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&F(c),tn(o)){case 2:case 8:o=ye;break;case 32:o=ke;break;case 268435456:o=ht;break;default:o=ke}return c=Rb.bind(null,n),o=P(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&F(c),n.callbackPriority=2,n.callbackNode=null,2}function Rb(n,s){if(Zn!==0&&Zn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(ou()&&n.callbackNode!==o)return null;var c=Nt;return c=Rt(n,n===Xt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(hb(n,c,s),Ab(n,_e()),n.callbackNode!=null&&n.callbackNode===o?Rb.bind(null,n):null)}function Mb(n,s){if(ou())return null;hb(n,s,!0)}function NS(){LS(function(){(qt&6)!==0?P(De,SS):Tb()})}function wh(){if(Va===0){var n=io;n===0&&(n=He,He<<=1,(He&261888)===0&&(He=256)),Va=n}return Va}function Ob(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:qr(""+n)}function zb(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function CS(n,s,o,c,m){if(s==="submit"&&o&&o.stateNode===m){var g=Ob((m[Hn]||null).action),w=c.submitter;w&&(s=(s=w[Hn]||null)?Ob(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var k=new re("action","action",null,c,m);n.push({event:k,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Va!==0){var Q=w?zb(m,w):new FormData(m);Pf(o,{pending:!0,data:Q,method:m.method,action:g},null,Q)}}else typeof g=="function"&&(k.preventDefault(),Q=w?zb(m,w):new FormData(m),Pf(o,{pending:!0,data:Q,method:m.method,action:g},g,Q))},currentTarget:m}]})}}for(var jh=0;jh<sf.length;jh++){var Sh=sf[jh],_S=Sh.toLowerCase(),ES=Sh[0].toUpperCase()+Sh.slice(1);yr(_S,"on"+ES)}yr(fg,"onAnimationEnd"),yr(hg,"onAnimationIteration"),yr(mg,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(I1,"onTransitionRun"),yr(H1,"onTransitionStart"),yr(V1,"onTransitionCancel"),yr(pg,"onTransitionEnd"),fr("onMouseEnter",["mouseout","mouseover"]),fr("onMouseLeave",["mouseout","mouseover"]),fr("onPointerEnter",["pointerout","pointerover"]),fr("onPointerLeave",["pointerout","pointerover"]),is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),is("onBeforeInput",["compositionend","keypress","textInput","paste"]),is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function Lb(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var k=c[w],Q=k.instance,ce=k.currentTarget;if(k=k.listener,Q!==g&&m.isPropagationStopped())break e;g=k,m.currentTarget=ce;try{g(m)}catch(Ne){Nc(Ne)}m.currentTarget=null,g=Q}else for(w=0;w<c.length;w++){if(k=c[w],Q=k.instance,ce=k.currentTarget,k=k.listener,Q!==g&&m.isPropagationStopped())break e;g=k,m.currentTarget=ce;try{g(m)}catch(Ne){Nc(Ne)}m.currentTarget=null,g=Q}}}}function jt(n,s){var o=s[Xr];o===void 0&&(o=s[Xr]=new Set);var c=n+"__bubble";o.has(c)||(Ub(s,n,2,!1),o.add(c))}function Nh(n,s,o){var c=0;s&&(c|=4),Ub(o,n,c,s)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Ch(n){if(!n[uu]){n[uu]=!0,vs.forEach(function(o){o!=="selectionchange"&&(kS.has(o)||Nh(o,!1,n),Nh(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[uu]||(s[uu]=!0,Nh("selectionchange",!1,s))}}function Ub(n,s,o,c){switch(fv(s)){case 2:var m=nN;break;case 8:m=sN;break;default:m=Bh}o=m.bind(null,s,o,n),m=void 0,!Xs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(s,o,{capture:!0,passive:m}):n.addEventListener(s,o,!0):m!==void 0?n.addEventListener(s,o,{passive:m}):n.addEventListener(s,o,!1)}function _h(n,s,o,c,m){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var k=c.stateNode.containerInfo;if(k===m)break;if(w===4)for(w=c.return;w!==null;){var Q=w.tag;if((Q===3||Q===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;k!==null;){if(w=rs(k),w===null)return;if(Q=w.tag,Q===5||Q===6||Q===26||Q===27){c=g=w;continue e}k=k.parentNode}}c=c.return}gr(function(){var ce=g,Ne=Br(o),Ee=[];e:{var fe=gg.get(n);if(fe!==void 0){var ve=re,Qe=n;switch(n){case"keypress":if(Fr(o)===0)break e;case"keydown":case"keyup":ve=Pd;break;case"focusin":Qe="focus",ve=Wo;break;case"focusout":Qe="blur",ve=Wo;break;case"beforeblur":case"afterblur":ve=Wo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=_a;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Id;break;case fg:case hg:case mg:ve=$d;break;case pg:ve=Vd;break;case"scroll":case"scrollend":ve=Le;break;case"wheel":ve=Qd;break;case"copy":case"cut":case"paste":ve=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=xc;break;case"toggle":case"beforetoggle":ve=Kd}var rt=(s&4)!==0,Gt=!rt&&(n==="scroll"||n==="scrollend"),ae=rt?fe!==null?fe+"Capture":null:fe;rt=[];for(var Y=ce,le;Y!==null;){var Ce=Y;if(le=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||le===null||ae===null||(Ce=ln(Y,ae),Ce!=null&&rt.push(Dl(Y,Ce,le))),Gt)break;Y=Y.return}0<rt.length&&(fe=new ve(fe,Qe,null,o,Ne),Ee.push({event:fe,listeners:rt}))}}if((s&7)===0){e:{if(fe=n==="mouseover"||n==="pointerover",ve=n==="mouseout"||n==="pointerout",fe&&o!==Ys&&(Qe=o.relatedTarget||o.fromElement)&&(rs(Qe)||Qe[Ar]))break e;if((ve||fe)&&(fe=Ne.window===Ne?Ne:(fe=Ne.ownerDocument)?fe.defaultView||fe.parentWindow:window,ve?(Qe=o.relatedTarget||o.toElement,ve=ce,Qe=Qe?rs(Qe):null,Qe!==null&&(Gt=u(Qe),rt=Qe.tag,Qe!==Gt||rt!==5&&rt!==27&&rt!==6)&&(Qe=null)):(ve=null,Qe=ce),ve!==Qe)){if(rt=Us,Ce="onMouseLeave",ae="onMouseEnter",Y="mouse",(n==="pointerout"||n==="pointerover")&&(rt=xc,Ce="onPointerLeave",ae="onPointerEnter",Y="pointer"),Gt=ve==null?fe:fn(ve),le=Qe==null?fe:fn(Qe),fe=new rt(Ce,Y+"leave",ve,o,Ne),fe.target=Gt,fe.relatedTarget=le,Ce=null,rs(Ne)===ce&&(rt=new rt(ae,Y+"enter",Qe,o,Ne),rt.target=le,rt.relatedTarget=Gt,Ce=rt),Gt=Ce,ve&&Qe)t:{for(rt=DS,ae=ve,Y=Qe,le=0,Ce=ae;Ce;Ce=rt(Ce))le++;Ce=0;for(var Je=Y;Je;Je=rt(Je))Ce++;for(;0<le-Ce;)ae=rt(ae),le--;for(;0<Ce-le;)Y=rt(Y),Ce--;for(;le--;){if(ae===Y||Y!==null&&ae===Y.alternate){rt=ae;break t}ae=rt(ae),Y=rt(Y)}rt=null}else rt=null;ve!==null&&$b(Ee,fe,ve,rt,!1),Qe!==null&&Gt!==null&&$b(Ee,Gt,Qe,rt,!0)}}e:{if(fe=ce?fn(ce):window,ve=fe.nodeName&&fe.nodeName.toLowerCase(),ve==="select"||ve==="input"&&fe.type==="file")var Ot=bt;else if(Z(fe))if(vn)Ot=B1;else{Ot=Sc;var Ye=hi}else ve=fe.nodeName,!ve||ve.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?ce&&ui(ce.elementType)&&(Ot=bt):Ot=nl;if(Ot&&(Ot=Ot(n,ce))){ge(Ee,Ot,o,Ne);break e}Ye&&Ye(n,fe,ce),n==="focusout"&&ce&&fe.type==="number"&&ce.memoizedProps.value!=null&&ci(fe,"number",fe.value)}switch(Ye=ce?fn(ce):window,n){case"focusin":(Z(Ye)||Ye.contentEditable==="true")&&(Xi=Ye,ef=ce,rl=null);break;case"focusout":rl=ef=Xi=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,ug(Ee,o,Ne);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":ug(Ee,o,Ne)}var gt;if(el)e:{switch(n){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Da?wc(n,o)&&(Ct="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ct="onCompositionStart");Ct&&(bc&&o.locale!=="ko"&&(Da||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Da&&(gt=Js()):(js=Ne,Ca="value"in js?js.value:js.textContent,Da=!0)),Ye=du(ce,Ct),0<Ye.length&&(Ct=new Wi(Ct,n,null,o,Ne),Ee.push({event:Ct,listeners:Ye}),gt?Ct.data=gt:(gt=jc(o),gt!==null&&(Ct.data=gt)))),(gt=Wd?Yd(n,o):Xd(n,o))&&(Ct=du(ce,"onBeforeInput"),0<Ct.length&&(Ye=new Wi("onBeforeInput","beforeinput",null,o,Ne),Ee.push({event:Ye,listeners:Ct}),Ye.data=gt)),CS(Ee,n,ce,o,Ne)}Lb(Ee,s)})}function Dl(n,s,o){return{instance:n,listener:s,currentTarget:o}}function du(n,s){for(var o=s+"Capture",c=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=ln(n,o),m!=null&&c.unshift(Dl(n,m,g)),m=ln(n,s),m!=null&&c.push(Dl(n,m,g))),n.tag===3)return c;n=n.return}return[]}function DS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $b(n,s,o,c,m){for(var g=s._reactName,w=[];o!==null&&o!==c;){var k=o,Q=k.alternate,ce=k.stateNode;if(k=k.tag,Q!==null&&Q===c)break;k!==5&&k!==26&&k!==27||ce===null||(Q=ce,m?(ce=ln(o,g),ce!=null&&w.unshift(Dl(o,ce,Q))):m||(ce=ln(o,g),ce!=null&&w.push(Dl(o,ce,Q)))),o=o.return}w.length!==0&&n.push({event:s,listeners:w})}var TS=/\r\n?/g,AS=/\u0000|\uFFFD/g;function qb(n){return(typeof n=="string"?n:""+n).replace(TS,`
`).replace(AS,"")}function Bb(n,s){return s=qb(s),qb(n)===s}function Kt(n,s,o,c,m,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Ur(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Ur(n,""+c);break;case"className":zr(n,"class",c);break;case"tabIndex":zr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(n,o,c);break;case"style":Ki(n,c,g);break;case"data":if(s!=="object"){zr(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=qr(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Kt(n,s,"name",m.name,m,null),Kt(n,s,"formEncType",m.formEncType,m,null),Kt(n,s,"formMethod",m.formMethod,m,null),Kt(n,s,"formTarget",m.formTarget,m,null)):(Kt(n,s,"encType",m.encType,m,null),Kt(n,s,"method",m.method,m,null),Kt(n,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=qr(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=On);break;case"onScroll":c!=null&&jt("scroll",n);break;case"onScrollEnd":c!=null&&jt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=qr(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":jt("beforetoggle",n),jt("toggle",n),Or(n,"popover",c);break;case"xlinkActuate":dt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":dt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":dt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":dt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":dt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":dt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":dt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":dt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":dt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Or(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=os.get(o)||o,Or(n,o,c))}}function Eh(n,s,o,c,m,g){switch(o){case"style":Ki(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Ur(n,c):(typeof c=="number"||typeof c=="bigint")&&Ur(n,""+c);break;case"onScroll":c!=null&&jt("scroll",n);break;case"onScrollEnd":c!=null&&jt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=On);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Os.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=n[Hn]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Or(n,o,c)}}}function ds(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",n),jt("load",n);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Kt(n,s,g,w,o,null)}}m&&Kt(n,s,"srcSet",o.srcSet,o,null),c&&Kt(n,s,"src",o.src,o,null);return;case"input":jt("invalid",n);var k=g=w=m=null,Q=null,ce=null;for(c in o)if(o.hasOwnProperty(c)){var Ne=o[c];if(Ne!=null)switch(c){case"name":m=Ne;break;case"type":w=Ne;break;case"checked":Q=Ne;break;case"defaultChecked":ce=Ne;break;case"value":g=Ne;break;case"defaultValue":k=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,s));break;default:Kt(n,s,c,Ne,o,null)}}hr(n,g,k,Q,ce,w,m,!1);return;case"select":jt("invalid",n),c=w=g=null;for(m in o)if(o.hasOwnProperty(m)&&(k=o[m],k!=null))switch(m){case"value":g=k;break;case"defaultValue":w=k;break;case"multiple":c=k;default:Kt(n,s,m,k,o,null)}s=g,o=w,n.multiple=!!c,s!=null?mr(n,!!c,s,!1):o!=null&&mr(n,!!c,o,!0);return;case"textarea":jt("invalid",n),g=m=c=null;for(w in o)if(o.hasOwnProperty(w)&&(k=o[w],k!=null))switch(w){case"value":c=k;break;case"defaultValue":m=k;break;case"children":g=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Kt(n,s,w,k,o,null)}Xe(n,c,m,g);return;case"option":for(Q in o)if(o.hasOwnProperty(Q)&&(c=o[Q],c!=null))switch(Q){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Kt(n,s,Q,c,o,null)}return;case"dialog":jt("beforetoggle",n),jt("toggle",n),jt("cancel",n),jt("close",n);break;case"iframe":case"object":jt("load",n);break;case"video":case"audio":for(c=0;c<kl.length;c++)jt(kl[c],n);break;case"image":jt("error",n),jt("load",n);break;case"details":jt("toggle",n);break;case"embed":case"source":case"link":jt("error",n),jt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in o)if(o.hasOwnProperty(ce)&&(c=o[ce],c!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Kt(n,s,ce,c,o,null)}return;default:if(ui(s)){for(Ne in o)o.hasOwnProperty(Ne)&&(c=o[Ne],c!==void 0&&Eh(n,s,Ne,c,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(c=o[k],c!=null&&Kt(n,s,k,c,o,null))}function RS(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,w=null,k=null,Q=null,ce=null,Ne=null;for(ve in o){var Ee=o[ve];if(o.hasOwnProperty(ve)&&Ee!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":Q=Ee;default:c.hasOwnProperty(ve)||Kt(n,s,ve,null,c,Ee)}}for(var fe in c){var ve=c[fe];if(Ee=o[fe],c.hasOwnProperty(fe)&&(ve!=null||Ee!=null))switch(fe){case"type":g=ve;break;case"name":m=ve;break;case"checked":ce=ve;break;case"defaultChecked":Ne=ve;break;case"value":w=ve;break;case"defaultValue":k=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,s));break;default:ve!==Ee&&Kt(n,s,fe,ve,c,Ee)}}ys(n,w,k,Q,ce,Ne,g,m);return;case"select":ve=w=k=fe=null;for(g in o)if(Q=o[g],o.hasOwnProperty(g)&&Q!=null)switch(g){case"value":break;case"multiple":ve=Q;default:c.hasOwnProperty(g)||Kt(n,s,g,null,c,Q)}for(m in c)if(g=c[m],Q=o[m],c.hasOwnProperty(m)&&(g!=null||Q!=null))switch(m){case"value":fe=g;break;case"defaultValue":k=g;break;case"multiple":w=g;default:g!==Q&&Kt(n,s,m,g,c,Q)}s=k,o=w,c=ve,fe!=null?mr(n,!!o,fe,!1):!!c!=!!o&&(s!=null?mr(n,!!o,s,!0):mr(n,!!o,o?[]:"",!1));return;case"textarea":ve=fe=null;for(k in o)if(m=o[k],o.hasOwnProperty(k)&&m!=null&&!c.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Kt(n,s,k,null,c,m)}for(w in c)if(m=c[w],g=o[w],c.hasOwnProperty(w)&&(m!=null||g!=null))switch(w){case"value":fe=m;break;case"defaultValue":ve=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&Kt(n,s,w,m,c,g)}Zi(n,fe,ve);return;case"option":for(var Qe in o)if(fe=o[Qe],o.hasOwnProperty(Qe)&&fe!=null&&!c.hasOwnProperty(Qe))switch(Qe){case"selected":n.selected=!1;break;default:Kt(n,s,Qe,null,c,fe)}for(Q in c)if(fe=c[Q],ve=o[Q],c.hasOwnProperty(Q)&&fe!==ve&&(fe!=null||ve!=null))switch(Q){case"selected":n.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Kt(n,s,Q,fe,c,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in o)fe=o[rt],o.hasOwnProperty(rt)&&fe!=null&&!c.hasOwnProperty(rt)&&Kt(n,s,rt,null,c,fe);for(ce in c)if(fe=c[ce],ve=o[ce],c.hasOwnProperty(ce)&&fe!==ve&&(fe!=null||ve!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,s));break;default:Kt(n,s,ce,fe,c,ve)}return;default:if(ui(s)){for(var Gt in o)fe=o[Gt],o.hasOwnProperty(Gt)&&fe!==void 0&&!c.hasOwnProperty(Gt)&&Eh(n,s,Gt,void 0,c,fe);for(Ne in c)fe=c[Ne],ve=o[Ne],!c.hasOwnProperty(Ne)||fe===ve||fe===void 0&&ve===void 0||Eh(n,s,Ne,fe,c,ve);return}}for(var ae in o)fe=o[ae],o.hasOwnProperty(ae)&&fe!=null&&!c.hasOwnProperty(ae)&&Kt(n,s,ae,null,c,fe);for(Ee in c)fe=c[Ee],ve=o[Ee],!c.hasOwnProperty(Ee)||fe===ve||fe==null&&ve==null||Kt(n,s,Ee,fe,c,ve)}function Pb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],g=m.transferSize,w=m.initiatorType,k=m.duration;if(g&&k&&Pb(w)){for(w=0,k=m.responseEnd,c+=1;c<o.length;c++){var Q=o[c],ce=Q.startTime;if(ce>k)break;var Ne=Q.transferSize,Ee=Q.initiatorType;Ne&&Pb(Ee)&&(Q=Q.responseEnd,w+=Ne*(Q<k?1:(k-ce)/(Q-ce)))}if(--c,s+=8*(g+w)/(m.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var kh=null,Dh=null;function fu(n){return n.nodeType===9?n:n.ownerDocument}function Fb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ib(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Th(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ah=null;function OS(){var n=window.event;return n&&n.type==="popstate"?n===Ah?!1:(Ah=n,!0):(Ah=null,!1)}var Hb=typeof setTimeout=="function"?setTimeout:void 0,zS=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,LS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(n){return Vb.resolve(null).then(n).catch(US)}:Hb;function US(n){setTimeout(function(){throw n})}function Qa(n){return n==="head"}function Qb(n,s){var o=s,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),_o(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Tl(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Tl(o);for(var g=o.firstChild;g;){var w=g.nextSibling,k=g.nodeName;g[fs]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=w}}else o==="body"&&Tl(n.ownerDocument.body);o=m}while(o);_o(s)}function Zb(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Rh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rh(o),ss(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function $S(n,s,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[fs])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=ir(n.nextSibling),n===null)break}return null}function qS(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ir(n.nextSibling),n===null))return null;return n}function Kb(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ir(n.nextSibling),n===null))return null;return n}function Mh(n){return n.data==="$?"||n.data==="$~"}function Oh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function BS(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function ir(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var zh=null;function Gb(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ir(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Wb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function Yb(n,s,o){switch(s=fu(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Tl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ss(n)}var or=new Map,Xb=new Set;function hu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ya=H.d;H.d={f:PS,r:FS,D:IS,C:HS,L:VS,m:QS,X:KS,S:ZS,M:GS};function PS(){var n=ya.f(),s=ru();return n||s}function FS(n){var s=as(n);s!==null&&s.tag===5&&s.type==="form"?px(s):ya.r(n)}var So=typeof document>"u"?null:document;function Jb(n,s,o){var c=So;if(c&&typeof s=="string"&&s){var m=hs(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Xb.has(m)||(Xb.add(m),n={rel:n,crossOrigin:o,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),ds(s,"link",n),nn(s),c.head.appendChild(s)))}}function IS(n){ya.D(n),Jb("dns-prefetch",n,null)}function HS(n,s){ya.C(n,s),Jb("preconnect",n,s)}function VS(n,s,o){ya.L(n,s,o);var c=So;if(c&&n&&s){var m='link[rel="preload"][as="'+hs(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+hs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+hs(o.imageSizes)+'"]')):m+='[href="'+hs(n)+'"]';var g=m;switch(s){case"style":g=No(n);break;case"script":g=Co(n)}or.has(g)||(n=b({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),or.set(g,n),c.querySelector(m)!==null||s==="style"&&c.querySelector(Al(g))||s==="script"&&c.querySelector(Rl(g))||(s=c.createElement("link"),ds(s,"link",n),nn(s),c.head.appendChild(s)))}}function QS(n,s){ya.m(n,s);var o=So;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+hs(c)+'"][href="'+hs(n)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Co(n)}if(!or.has(g)&&(n=b({rel:"modulepreload",href:n},s),or.set(g,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Rl(g)))return}c=o.createElement("link"),ds(c,"link",n),nn(c),o.head.appendChild(c)}}}function ZS(n,s,o){ya.S(n,s,o);var c=So;if(c&&n){var m=Rr(c).hoistableStyles,g=No(n);s=s||"default";var w=m.get(g);if(!w){var k={loading:0,preload:null};if(w=c.querySelector(Al(g)))k.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":s},o),(o=or.get(g))&&Lh(n,o);var Q=w=c.createElement("link");nn(Q),ds(Q,"link",n),Q._p=new Promise(function(ce,Ne){Q.onload=ce,Q.onerror=Ne}),Q.addEventListener("load",function(){k.loading|=1}),Q.addEventListener("error",function(){k.loading|=2}),k.loading|=4,mu(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:k},m.set(g,w)}}}function KS(n,s){ya.X(n,s);var o=So;if(o&&n){var c=Rr(o).hoistableScripts,m=Co(n),g=c.get(m);g||(g=o.querySelector(Rl(m)),g||(n=b({src:n,async:!0},s),(s=or.get(m))&&Uh(n,s),g=o.createElement("script"),nn(g),ds(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function GS(n,s){ya.M(n,s);var o=So;if(o&&n){var c=Rr(o).hoistableScripts,m=Co(n),g=c.get(m);g||(g=o.querySelector(Rl(m)),g||(n=b({src:n,async:!0,type:"module"},s),(s=or.get(m))&&Uh(n,s),g=o.createElement("script"),nn(g),ds(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function ev(n,s,o,c){var m=(m=J.current)?hu(m):null;if(!m)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=No(o.href),o=Rr(m).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=No(o.href);var g=Rr(m).hoistableStyles,w=g.get(n);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,w),(g=m.querySelector(Al(n)))&&!g._p&&(w.instance=g,w.state.loading=5),or.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},or.set(n,o),g||WS(m,n,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Co(o),o=Rr(m).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function No(n){return'href="'+hs(n)+'"'}function Al(n){return'link[rel="stylesheet"]['+n+"]"}function tv(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function WS(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),ds(s,"link",o),nn(s),n.head.appendChild(s))}function Co(n){return'[src="'+hs(n)+'"]'}function Rl(n){return"script[async]"+n}function nv(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+hs(o.href)+'"]');if(c)return s.instance=c,nn(c),c;var m=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),nn(c),ds(c,"style",m),mu(c,o.precedence,n),s.instance=c;case"stylesheet":m=No(o.href);var g=n.querySelector(Al(m));if(g)return s.state.loading|=4,s.instance=g,nn(g),g;c=tv(o),(m=or.get(m))&&Lh(c,m),g=(n.ownerDocument||n).createElement("link"),nn(g);var w=g;return w._p=new Promise(function(k,Q){w.onload=k,w.onerror=Q}),ds(g,"link",c),s.state.loading|=4,mu(g,o.precedence,n),s.instance=g;case"script":return g=Co(o.src),(m=n.querySelector(Rl(g)))?(s.instance=m,nn(m),m):(c=o,(m=or.get(g))&&(c=b({},o),Uh(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),nn(m),ds(m,"link",c),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,mu(c,o.precedence,n));return s.instance}function mu(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,w=0;w<c.length;w++){var k=c[w];if(k.dataset.precedence===s)g=k;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Lh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Uh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var pu=null;function sv(n,s,o){if(pu===null){var c=new Map,m=pu=new Map;m.set(o,c)}else m=pu,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var g=o[m];if(!(g[fs]||g[bn]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=n+w;var k=c.get(w);k?k.push(g):c.set(w,[g])}}return c}function rv(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function YS(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function av(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function XS(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=No(c.href),g=s.querySelector(Al(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=gu.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=g,nn(g);return}g=s.ownerDocument||s,c=tv(c),(m=or.get(m))&&Lh(c,m),g=g.createElement("link"),nn(g);var w=g;w._p=new Promise(function(k,Q){w.onload=k,w.onerror=Q}),ds(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=gu.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var $h=0;function JS(n,s){return n.stylesheets&&n.count===0&&bu(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&bu(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&$h===0&&($h=62500*MS());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&bu(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>$h?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bu(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xu=null;function bu(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xu=new Map,s.forEach(eN,n),xu=null,gu.call(n))}function eN(n,s){if(!(s.state.loading&4)){var o=xu.get(n);if(o)var c=o.get(null);else{o=new Map,xu.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var w=m[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}m=s.instance,w=m.getAttribute("data-precedence"),g=o.get(w)||c,g===c&&o.set(null,m),o.set(w,m),this.count++,c=gu.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var Ml={$$typeof:D,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function tN(n,s,o,c,m,g,w,k,Q){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xn(0),this.hiddenUpdates=xn(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function iv(n,s,o,c,m,g,w,k,Q,ce,Ne,Ee){return n=new tN(n,s,o,w,Q,ce,Ne,Ee,k),s=1,g===!0&&(s|=24),g=qs(3,null,null,s),n.current=g,g.stateNode=n,s=xf(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},wf(g),n}function ov(n){return n?(n=to,n):to}function lv(n,s,o,c,m,g){m=ov(m),c.context===null?c.context=m:c.pendingContext=m,c=za(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=La(n,c,s),o!==null&&(Es(o,n,s),dl(o,n,s))}function cv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function qh(n,s){cv(n,s),(n=n.alternate)&&cv(n,s)}function uv(n){if(n.tag===13||n.tag===31){var s=gi(n,67108864);s!==null&&Es(s,n,67108864),qh(n,67108864)}}function dv(n){if(n.tag===13||n.tag===31){var s=Hs();s=Ms(s);var o=gi(n,s);o!==null&&Es(o,n,s),qh(n,s)}}var vu=!0;function nN(n,s,o,c){var m=M.T;M.T=null;var g=H.p;try{H.p=2,Bh(n,s,o,c)}finally{H.p=g,M.T=m}}function sN(n,s,o,c){var m=M.T;M.T=null;var g=H.p;try{H.p=8,Bh(n,s,o,c)}finally{H.p=g,M.T=m}}function Bh(n,s,o,c){if(vu){var m=Ph(c);if(m===null)_h(n,s,c,yu,o),hv(n,c);else if(aN(m,n,s,o,c))c.stopPropagation();else if(hv(n,c),s&4&&-1<rN.indexOf(n)){for(;m!==null;){var g=as(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=yt(g.pendingLanes);if(w!==0){var k=g;for(k.pendingLanes|=2,k.entangledLanes|=2;w;){var Q=1<<31-Ze(w);k.entanglements[1]|=Q,w&=~Q}Qr(g),(qt&6)===0&&(nu=_e()+500,El(0))}}break;case 31:case 13:k=gi(g,2),k!==null&&Es(k,g,2),ru(),qh(g,2)}if(g=Ph(c),g===null&&_h(n,s,c,yu,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else _h(n,s,c,null,o)}}function Ph(n){return n=Br(n),Fh(n)}var yu=null;function Fh(n){if(yu=null,n=rs(n),n!==null){var s=u(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=d(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return yu=n,null}function fv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case De:return 2;case ye:return 8;case ke:case Ie:return 32;case ht:return 268435456;default:return 32}default:return 32}}var Ih=!1,Za=null,Ka=null,Ga=null,Ol=new Map,zl=new Map,Wa=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hv(n,s){switch(n){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Ol.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(s.pointerId)}}function Ll(n,s,o,c,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},s!==null&&(s=as(s),s!==null&&uv(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function aN(n,s,o,c,m){switch(s){case"focusin":return Za=Ll(Za,n,s,o,c,m),!0;case"dragenter":return Ka=Ll(Ka,n,s,o,c,m),!0;case"mouseover":return Ga=Ll(Ga,n,s,o,c,m),!0;case"pointerover":var g=m.pointerId;return Ol.set(g,Ll(Ol.get(g)||null,n,s,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,zl.set(g,Ll(zl.get(g)||null,n,s,o,c,m)),!0}return!1}function mv(n){var s=rs(n.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=d(o),s!==null){n.blockedOn=s,bs(n.priority,function(){dv(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,bs(n.priority,function(){dv(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wu(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Ph(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Ys=c,o.target.dispatchEvent(c),Ys=null}else return s=as(o),s!==null&&uv(s),n.blockedOn=o,!1;s.shift()}return!0}function pv(n,s,o){wu(n)&&o.delete(s)}function iN(){Ih=!1,Za!==null&&wu(Za)&&(Za=null),Ka!==null&&wu(Ka)&&(Ka=null),Ga!==null&&wu(Ga)&&(Ga=null),Ol.forEach(pv),zl.forEach(pv)}function ju(n,s){n.blockedOn===s&&(n.blockedOn=null,Ih||(Ih=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iN)))}var Su=null;function gv(n){Su!==n&&(Su=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Su===n&&(Su=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],m=n[s+2];if(typeof c!="function"){if(Fh(c||o)===null)continue;break}var g=as(o);g!==null&&(n.splice(s,3),s-=3,Pf(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function _o(n){function s(Q){return ju(Q,n)}Za!==null&&ju(Za,n),Ka!==null&&ju(Ka,n),Ga!==null&&ju(Ga,n),Ol.forEach(s),zl.forEach(s);for(var o=0;o<Wa.length;o++){var c=Wa[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Wa.length&&(o=Wa[0],o.blockedOn===null);)mv(o),o.blockedOn===null&&Wa.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],w=m[Hn]||null;if(typeof g=="function")w||gv(o);else if(w){var k=null;if(g&&g.hasAttribute("formAction")){if(m=g,w=g[Hn]||null)k=w.formAction;else if(Fh(m)!==null)continue}else k=w.action;typeof k=="function"?o[c+1]=k:(o.splice(c,3),c-=3),gv(o)}}}function xv(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Hh(n){this._internalRoot=n}Nu.prototype.render=Hh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Hs();lv(o,c,n,s,null,null)},Nu.prototype.unmount=Hh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;lv(n.current,2,null,n,null,null),ru(),s[Ar]=null}};function Nu(n){this._internalRoot=n}Nu.prototype.unstable_scheduleHydration=function(n){if(n){var s=ns();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Wa.length&&s!==0&&s<Wa[o].priority;o++);Wa.splice(o,0,n),o===0&&mv(n)}};var bv=t.version;if(bv!=="19.2.0")throw Error(i(527,bv,"19.2.0"));H.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=x(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var oN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Ut=Cu.inject(oN),At=Cu}catch{}}return $l.createRoot=function(n,s){if(!l(n))throw Error(i(299));var o=!1,c="",m=Cx,g=_x,w=Ex;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=iv(n,1,!1,null,null,o,c,null,m,g,w,xv),n[Ar]=s.current,Ch(n),new Hh(s)},$l.hydrateRoot=function(n,s,o){if(!l(n))throw Error(i(299));var c=!1,m="",g=Cx,w=_x,k=Ex,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.formState!==void 0&&(Q=o.formState)),s=iv(n,1,!0,s,o??null,c,m,Q,g,w,k,xv),s.context=ov(null),o=s.current,c=Hs(),c=Ms(c),m=za(c),m.callback=null,La(o,m,c),o=c,s.current.lanes=o,Fn(s,o),Qr(s),n[Ar]=s.current,Ch(n),new Nu(s)},$l.version="19.2.0",$l}var kv;function gN(){if(kv)return Zh.exports;kv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zh.exports=pN(),Zh.exports}var xN=gN();const bN=I0(xN),dd=f.createContext(null);function vN({children:e}){const[t,r]=f.useState(()=>({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash})),i=f.useRef(new Set),l=f.useRef(t);f.useEffect(()=>{l.current=t},[t]);const u=f.useCallback(x=>{for(const v of i.current)if(v(x)===!1)return!1;return!0},[]);f.useEffect(()=>{const x=()=>{const v={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},b=`${v.pathname}${v.search}${v.hash}`;if(!u({kind:"pop",to:b,location:v})){const S=l.current;window.history.pushState(null,"",`${S.pathname}${S.search}${S.hash}`);return}r(v)};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[u]);const d=f.useCallback(x=>(i.current.add(x),()=>{i.current.delete(x)}),[]),h=f.useCallback((x,v)=>{const b=new URL(x,window.location.origin),y={pathname:b.pathname,search:b.search,hash:b.hash},S=`${y.pathname}${y.search}${y.hash}`,j=v?.replace?"replace":"push";u({kind:j,to:S,location:y})&&(v?.replace?window.history.replaceState(null,"",S):window.history.pushState(null,"",S),window.dispatchEvent(new PopStateEvent("popstate")))},[u]),p=f.useMemo(()=>({location:t,navigate:h,registerBlocker:d}),[t,h,d]);return a.jsx(dd.Provider,{value:p,children:e})}function es(){const e=f.useContext(dd);if(!e)throw new Error("useLocation must be used within NavProvider");return e.location}function en(){const e=f.useContext(dd);if(!e)throw new Error("useNavigate must be used within NavProvider");return e.navigate}function V0(e,t=!0){const r=f.useContext(dd);if(!r)throw new Error("useNavigationBlocker must be used within NavProvider");f.useEffect(()=>{if(t)return r.registerBlocker(e)},[e,r,t])}var Io=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yN={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},wN=class{#e=yN;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Ri=new wN;function jN(e){setTimeout(e,0)}var zi=typeof window>"u"||"Deno"in globalThis;function xs(){}function SN(e,t){return typeof e=="function"?e(t):e}function pm(e){return typeof e=="number"&&e>=0&&e!==1/0}function Q0(e,t){return Math.max(e+(t||0)-Date.now(),0)}function si(e,t){return typeof e=="function"?e(t):e}function cr(e,t){return typeof e=="function"?e(t):e}function Dv(e,t){const{type:r="all",exact:i,fetchStatus:l,predicate:u,queryKey:d,stale:h}=e;if(d){if(i){if(t.queryHash!==Hm(d,t.options))return!1}else if(!Xl(t.queryKey,d))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||l&&l!==t.state.fetchStatus||u&&!u(t))}function Tv(e,t){const{exact:r,status:i,predicate:l,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(Li(t.options.mutationKey)!==Li(u))return!1}else if(!Xl(t.options.mutationKey,u))return!1}return!(i&&t.state.status!==i||l&&!l(t))}function Hm(e,t){return(t?.queryKeyHashFn||Li)(e)}function Li(e){return JSON.stringify(e,(t,r)=>gm(r)?Object.keys(r).sort().reduce((i,l)=>(i[l]=r[l],i),{}):r)}function Xl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Xl(e[r],t[r])):!1}var NN=Object.prototype.hasOwnProperty;function Z0(e,t){if(e===t)return e;const r=Av(e)&&Av(t);if(!r&&!(gm(e)&&gm(t)))return t;const l=(r?e:Object.keys(e)).length,u=r?t:Object.keys(t),d=u.length,h=r?new Array(d):{};let p=0;for(let x=0;x<d;x++){const v=r?x:u[x],b=e[v],y=t[v];if(b===y){h[v]=b,(r?x<l:NN.call(e,v))&&p++;continue}if(b===null||y===null||typeof b!="object"||typeof y!="object"){h[v]=y;continue}const S=Z0(b,y);h[v]=S,S===b&&p++}return l===d&&p===l?e:h}function Zu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Av(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function gm(e){if(!Rv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Rv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Rv(e){return Object.prototype.toString.call(e)==="[object Object]"}function CN(e){return new Promise(t=>{Ri.setTimeout(t,e)})}function xm(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Z0(e,t):t}function _N(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function EN(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var Vm=Symbol();function K0(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Vm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function G0(e,t){return typeof e=="function"?e(...t):!!e}var kN=class extends Io{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!zi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Qm=new kN;function bm(){let e,t;const r=new Promise((l,u)=>{e=l,t=u});r.status="pending",r.catch(()=>{});function i(l){Object.assign(r,l),delete r.resolve,delete r.reject}return r.resolve=l=>{i({status:"fulfilled",value:l}),e(l)},r.reject=l=>{i({status:"rejected",reason:l}),t(l)},r}var DN=jN;function TN(){let e=[],t=0,r=h=>{h()},i=h=>{h()},l=DN;const u=h=>{t?e.push(h):l(()=>{r(h)})},d=()=>{const h=e;e=[],h.length&&l(()=>{i(()=>{h.forEach(p=>{r(p)})})})};return{batch:h=>{let p;t++;try{p=h()}finally{t--,t||d()}return p},batchCalls:h=>(...p)=>{u(()=>{h(...p)})},schedule:u,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{i=h},setScheduler:h=>{l=h}}}var Gn=TN(),AN=class extends Io{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!zi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Ku=new AN;function RN(e){return Math.min(1e3*2**e,3e4)}function W0(e){return(e??"online")==="online"?Ku.isOnline():!0}var vm=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Y0(e){let t=!1,r=0,i;const l=bm(),u=()=>l.status!=="pending",d=C=>{if(!u()){const _=new vm(C);y(_),e.onCancel?.(_)}},h=()=>{t=!0},p=()=>{t=!1},x=()=>Qm.isFocused()&&(e.networkMode==="always"||Ku.isOnline())&&e.canRun(),v=()=>W0(e.networkMode)&&e.canRun(),b=C=>{u()||(i?.(),l.resolve(C))},y=C=>{u()||(i?.(),l.reject(C))},S=()=>new Promise(C=>{i=_=>{(u()||x())&&C(_)},e.onPause?.()}).then(()=>{i=void 0,u()||e.onContinue?.()}),j=()=>{if(u())return;let C;const _=r===0?e.initialPromise:void 0;try{C=_??e.fn()}catch(N){C=Promise.reject(N)}Promise.resolve(C).then(b).catch(N=>{if(u())return;const E=e.retry??(zi?0:3),D=e.retryDelay??RN,U=typeof D=="function"?D(r,N):D,z=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,N);if(t||!z){y(N);return}r++,e.onFail?.(r,N),CN(U).then(()=>x()?void 0:S()).then(()=>{t?y(N):j()})})};return{promise:l,status:()=>l.status,cancel:d,continue:()=>(i?.(),l),cancelRetry:h,continueRetry:p,canStart:v,start:()=>(v()?j():S().then(j),l)}}var X0=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pm(this.gcTime)&&(this.#e=Ri.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(zi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ri.clearTimeout(this.#e),this.#e=void 0)}},MN=class extends X0{#e;#t;#n;#r;#s;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Mv(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Mv(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=xm(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(xs).catch(xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>cr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>si(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Q0(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},l=()=>{const h=K0(this.options,t),x=(()=>{const v={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(v),v})();return this.#o=!1,this.options.persister?this.options.persister(h,x,this):h(x)},d=(()=>{const h={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:l};return i(h),h})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=Y0({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:h=>{h instanceof vm&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(h,p)=>{this.#a({type:"failed",failureCount:h,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const h=await this.#s.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof vm){if(h.silent)return this.#s.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#a({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...J0(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const l=e.error;return{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Gn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function J0(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:W0(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Mv(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ew=class extends Io{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=bm(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#i;#o;#a;#p;#f;#h;#c;#u;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Ov(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ym(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ym(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof cr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),t._defaulted&&!Zu(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&zv(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),i&&(this.#t!==r||cr(this.options.enabled,this.#t)!==cr(t.enabled,this.#t)||si(this.options.staleTime,this.#t)!==si(t.staleTime,this.#t))&&this.#g();const l=this.#x();i&&(this.#t!==r||cr(this.options.enabled,this.#t)!==cr(t.enabled,this.#t)||l!==this.#l)&&this.#b(l)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return zN(this,r)&&(this.#r=r,this.#i=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#j();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(xs)),t}#g(){this.#y();const e=si(this.options.staleTime,this.#t);if(zi||this.#r.isStale||!pm(e))return;const r=Q0(this.#r.dataUpdatedAt,e)+1;this.#c=Ri.setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#l=e,!(zi||cr(this.options.enabled,this.#t)===!1||!pm(this.#l)||this.#l===0)&&(this.#u=Ri.setInterval(()=>{(this.options.refetchIntervalInBackground||Qm.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#b(this.#x())}#y(){this.#c&&(Ri.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Ri.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,i=this.options,l=this.#r,u=this.#s,d=this.#i,p=e!==r?e.state:this.#n,{state:x}=e;let v={...x},b=!1,y;if(t._optimisticResults){const A=this.hasListeners(),B=!A&&Ov(e,t),T=A&&zv(e,r,t,i);(B||T)&&(v={...v,...J0(x.data,e.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:S,errorUpdatedAt:j,status:C}=v;y=v.data;let _=!1;if(t.placeholderData!==void 0&&y===void 0&&C==="pending"){let A;l?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(A=l.data,_=!0):A=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,A!==void 0&&(C="success",y=xm(l?.data,A,t),b=!0)}if(t.select&&y!==void 0&&!_)if(l&&y===u?.data&&t.select===this.#p)y=this.#f;else try{this.#p=t.select,y=t.select(y),y=xm(l?.data,y,t),this.#f=y,this.#a=null}catch(A){this.#a=A}this.#a&&(S=this.#a,y=this.#f,j=Date.now(),C="error");const N=v.fetchStatus==="fetching",E=C==="pending",D=C==="error",U=E&&N,z=y!==void 0,R={status:C,fetchStatus:v.fetchStatus,isPending:E,isSuccess:C==="success",isError:D,isInitialLoading:U,isLoading:U,data:y,dataUpdatedAt:v.dataUpdatedAt,error:S,errorUpdatedAt:j,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:N,isRefetching:N&&!E,isLoadingError:D&&!z,isPaused:v.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:D&&z,isStale:Zm(e,t),refetch:this.refetch,promise:this.#o,isEnabled:cr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const A=K=>{R.status==="error"?K.reject(R.error):R.data!==void 0&&K.resolve(R.data)},B=()=>{const K=this.#o=R.promise=bm();A(K)},T=this.#o;switch(T.status){case"pending":e.queryHash===r.queryHash&&A(T);break;case"fulfilled":(R.status==="error"||R.data!==T.value)&&B();break;case"rejected":(R.status!=="error"||R.error!==T.reason)&&B();break}}return R}updateResult(){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Zu(t,e))return;this.#r=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!this.#m.size)return!0;const u=new Set(l??this.#m);return this.options.throwOnError&&u.add("error"),Object.keys(this.#r).some(d=>{const h=d;return this.#r[h]!==e[h]&&u.has(h)})};this.#S({listeners:r()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){Gn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ON(e,t){return cr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ov(e,t){return ON(e,t)||e.state.data!==void 0&&ym(e,t,t.refetchOnMount)}function ym(e,t,r){if(cr(t.enabled,e)!==!1&&si(t.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Zm(e,t)}return!1}function zv(e,t,r,i){return(e!==t||cr(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Zm(e,r)}function Zm(e,t){return cr(t.enabled,e)!==!1&&e.isStaleByTime(si(t.staleTime,e))}function zN(e,t){return!Zu(e.getCurrentResult(),t)}function Gu(e){return{onFetch:(t,r)=>{const i=t.options,l=t.fetchOptions?.meta?.fetchMore?.direction,u=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},p=0;const x=async()=>{let v=!1;const b=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=K0(t.options,t.fetchOptions),S=async(j,C,_)=>{if(v)return Promise.reject();if(C==null&&j.pages.length)return Promise.resolve(j);const E=(()=>{const V={client:t.client,queryKey:t.queryKey,pageParam:C,direction:_?"backward":"forward",meta:t.options.meta};return b(V),V})(),D=await y(E),{maxPages:U}=t.options,z=_?EN:_N;return{pages:z(j.pages,D,U),pageParams:z(j.pageParams,C,U)}};if(l&&u.length){const j=l==="backward",C=j?tw:wm,_={pages:u,pageParams:d},N=C(i,_);h=await S(_,N,j)}else{const j=e??u.length;do{const C=p===0?d[0]??i.initialPageParam:wm(i,h);if(p>0&&C==null)break;h=await S(h,C),p++}while(p<j)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(x,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=x}}}function wm(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function tw(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function LN(e,t){return t?wm(e,t)!=null:!1}function UN(e,t){return!t||!e.getPreviousPageParam?!1:tw(e,t)!=null}var $N=class extends ew{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Gu()})}getOptimisticResult(e){return e.behavior=Gu(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,i=super.createResult(e,t),{isFetching:l,isRefetching:u,isError:d,isRefetchError:h}=i,p=r.fetchMeta?.fetchMore?.direction,x=d&&p==="forward",v=l&&p==="forward",b=d&&p==="backward",y=l&&p==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:LN(t,r.data),hasPreviousPage:UN(t,r.data),isFetchNextPageError:x,isFetchingNextPage:v,isFetchPreviousPageError:b,isFetchingPreviousPage:y,isRefetchError:h&&!x&&!b,isRefetching:u&&!v&&!y}}},qN=class extends X0{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||nw(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Y0({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",l=!this.#r.canStart();try{if(i)t();else{this.#s({type:"pending",variables:e,isPaused:l}),await this.#n.config.onMutate?.(e,this,r);const d=await this.options.onMutate?.(e,r);d!==this.state.context&&this.#s({type:"pending",context:d,variables:e,isPaused:l})}const u=await this.#r.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,r),await this.options.onSuccess?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(u,null,e,this.state.context,r),this.#s({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,r),await this.options.onError?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,u,e,this.state.context,r),u}finally{this.#s({type:"error",error:u})}}finally{this.#n.runNext(this)}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Gn.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function nw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var BN=class extends Io{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,r){const i=new qN({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){this.#e.add(e);const t=_u(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=_u(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=_u(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(l=>l.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=_u(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Tv(t,r))}findAll(e={}){return this.getAll().filter(t=>Tv(e,t))}notify(e){Gn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Gn.batch(()=>Promise.all(e.map(t=>t.continue().catch(xs))))}};function _u(e){return e.options.scope?.id}var PN=class extends Io{#e;#t=void 0;#n;#r;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Zu(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&Li(r.mutationKey)!==Li(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(t,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#s(){const t=this.#n?.state??nw();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Gn.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,i=this.#t.context,l={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#r.onSuccess?.(t.data,r,i,l),this.#r.onSettled?.(t.data,null,r,i,l)):t?.type==="error"&&(this.#r.onError?.(t.error,r,i,l),this.#r.onSettled?.(void 0,t.error,r,i,l))}this.listeners.forEach(r=>{r(this.#t)})})}},FN=class extends Io{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const i=t.queryKey,l=t.queryHash??Hm(i,t);let u=this.get(l);return u||(u=new MN({client:e,queryKey:i,queryHash:l,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Dv(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Dv(e,r)):t}notify(e){Gn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Gn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},IN=class{#e;#t;#n;#r;#s;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new FN,this.#t=e.mutationCache||new BN,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Qm.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ku.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(si(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),u=this.#e.get(i.queryHash)?.state.data,d=SN(t,u);if(d!==void 0)return this.#e.build(this,i).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return Gn.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Gn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Gn.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},i=Gn.batch(()=>this.#e.findAll(e).map(l=>l.cancel(r)));return Promise.all(i).then(xs).catch(xs)}invalidateQueries(e,t={}){return Gn.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=Gn.batch(()=>this.#e.findAll(e).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let u=l.fetch(void 0,r);return r.throwOnError||(u=u.catch(xs)),l.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(xs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(si(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xs).catch(xs)}fetchInfiniteQuery(e){return e.behavior=Gu(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xs).catch(xs)}ensureInfiniteQueryData(e){return e.behavior=Gu(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ku.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#r.set(Li(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],r={};return t.forEach(i=>{Xl(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,t){this.#s.set(Li(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(i=>{Xl(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Hm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Vm&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},sw=f.createContext(void 0),Ft=e=>{const t=f.useContext(sw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},HN=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(sw.Provider,{value:e,children:t})),rw=f.createContext(!1),VN=()=>f.useContext(rw);rw.Provider;function QN(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ZN=f.createContext(QN()),KN=()=>f.useContext(ZN),GN=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},WN=e=>{f.useEffect(()=>{e.clearReset()},[e])},YN=({result:e,errorResetBoundary:t,throwOnError:r,query:i,suspense:l})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(l&&e.data===void 0||G0(r,[e.error,i])),XN=e=>{if(e.suspense){const r=l=>l==="static"?l:Math.max(l??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...l)=>r(i(...l)):r(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},JN=(e,t)=>e.isLoading&&e.isFetching&&!t,e2=(e,t)=>e?.suspense&&t.isPending,Lv=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function aw(e,t,r){const i=VN(),l=KN(),u=Ft(),d=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=i?"isRestoring":"optimistic",XN(d),GN(d,l),WN(l);const h=!u.getQueryCache().get(d.queryHash),[p]=f.useState(()=>new t(u,d)),x=p.getOptimisticResult(d),v=!i&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(b=>{const y=v?p.subscribe(Gn.batchCalls(b)):xs;return p.updateResult(),y},[p,v]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),f.useEffect(()=>{p.setOptions(d)},[d,p]),e2(d,x))throw Lv(d,p,l);if(YN({result:x,errorResetBoundary:l,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw x.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(d,x),d.experimental_prefetchInRender&&!zi&&JN(x,i)&&(h?Lv(d,p,l):u.getQueryCache().get(d.queryHash)?.promise)?.catch(xs).finally(()=>{p.updateResult()}),d.notifyOnChangeProps?x:p.trackResult(x)}function yn(e,t){return aw(e,ew)}function Pn(e,t){const r=Ft(),[i]=f.useState(()=>new PN(r,e));f.useEffect(()=>{i.setOptions(e)},[i,e]);const l=f.useSyncExternalStore(f.useCallback(d=>i.subscribe(Gn.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=f.useCallback((d,h)=>{i.mutate(d,h).catch(xs)},[i]);if(l.error&&G0(i.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:u,mutateAsync:l.mutate}}function Km(e,t){return aw(e,$N)}const t2="modulepreload",n2=function(e){return"/"+e},Uv={},Gm=function(t,r,i){let l=Promise.resolve();if(r&&r.length>0){let p=function(x){return Promise.all(x.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");l=p(r.map(x=>{if(x=n2(x),x in Uv)return;Uv[x]=!0;const v=x.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${b}`))return;const y=document.createElement("link");if(y.rel=v?"stylesheet":t2,v||(y.as="script"),y.crossOrigin="",y.href=x,h&&y.setAttribute("nonce",h),document.head.appendChild(y),v)return new Promise((S,j)=>{y.addEventListener("load",S),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&u(h.reason);return t().catch(u)})},s2=[{id:"default",label:"Default",description:"Slate neutrals + indigo accent.",kind:"accent"},{id:"ocean",label:"Ocean",description:"Cyan accent on slate neutrals.",kind:"accent"},{id:"forest",label:"Forest",description:"Emerald accent on slate neutrals.",kind:"accent"},{id:"sunset",label:"Sunset",description:"Orange accent on slate neutrals.",kind:"accent"},{id:"rose",label:"Rose",description:"Rose accent on slate neutrals.",kind:"accent"},{id:"grape",label:"Grape",description:"Violet accent on slate neutrals.",kind:"accent"},{id:"sand",label:"Sand",description:"Stone neutrals + teal accent.",kind:"full"},{id:"carbon",label:"Carbon",description:"Zinc neutrals + blue accent.",kind:"full"}],Wm="ade.mode",Ym="ade.theme";function iw(e){if(typeof window>"u")return null;try{return window.localStorage.getItem(e)}catch(t){return console.warn("Failed to read theme preference",t),null}}function r2(){const e=iw(Wm);return e==="light"||e==="dark"||e==="system"?e:null}function a2(){const e=iw(Ym);return typeof e=="string"&&e.length>0?e:null}function i2(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Wm,e)}catch(t){console.warn("Failed to persist theme mode",t)}}function o2(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Ym,e)}catch(t){console.warn("Failed to persist theme name",t)}}const ow=f.createContext(null),$v="(prefers-color-scheme: dark)";function l2({children:e}){const t=f.useMemo(()=>r2(),[]),r=f.useMemo(()=>a2(),[]),[i,l]=f.useState(t??"system"),[u,d]=f.useState(r??qv),[h,p]=f.useState(null),[x,v]=f.useState(()=>typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia($v).matches);f.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const N=window.matchMedia($v),E=D=>{v(D.matches)};return typeof N.addEventListener=="function"?N.addEventListener("change",E):typeof N.addListener=="function"&&N.addListener(E),v(N.matches),()=>{typeof N.removeEventListener=="function"?N.removeEventListener("change",E):typeof N.removeListener=="function"&&N.removeListener(E)}},[]);const b=f.useMemo(()=>c2(i,x),[i,x]),y=h??u;f.useEffect(()=>{u2(y,b)},[y,b]),f.useEffect(()=>{o2(u)},[u]),f.useEffect(()=>{i2(i)},[i]),f.useEffect(()=>{if(typeof window>"u")return;const N=E=>{if(E.key===Wm){const D=E.newValue;D==="light"||D==="dark"||D==="system"?l(D):D===null&&l("system");return}if(E.key===Ym){const D=E.newValue;typeof D=="string"&&D.length>0?(d(D),p(null)):D===null&&(d(qv),p(null))}};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]);const S=f.useCallback(N=>{d(N),p(null)},[]),j=f.useCallback(N=>{p(N)},[]),C=f.useCallback(N=>{l(N)},[]),_=f.useMemo(()=>({theme:u,modePreference:i,resolvedMode:b,systemPrefersDark:x,setTheme:S,setPreviewTheme:j,setModePreference:C}),[i,b,C,j,S,x,u]);return a.jsx(ow.Provider,{value:_,children:e})}function Xm(){const e=f.useContext(ow);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const qv="default",lw=[{value:"system",label:"System",description:"Match your device"},{value:"light",label:"Light",description:"Bright and clear"},{value:"dark",label:"Dark",description:"Low-light friendly"}],cw=s2;function uw(e){return e==="dark"}function c2(e,t){return e==="system"?t?"dark":"light":e}function u2(e,t){if(typeof document>"u")return;const r=document.documentElement;r.dataset.theme=e,r.dataset.mode=t,r.style.colorScheme=uw(t)?"dark":"light"}function d2({children:e}){const[t]=f.useState(()=>new IN({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}}));return a.jsx(l2,{children:a.jsxs(HN,{client:t,children:[e,null]})})}const dw=f.createContext(void 0);function Bv({session:e,refetch:t,children:r}){return a.jsx(dw.Provider,{value:{session:e,refetch:t},children:r})}function f2(){const e=f.useContext(dw);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e}function Pi(){return f2().session}class Ht extends Error{status;problem;constructor(t,r,i){super(t),this.name="ApiError",this.status=r,this.problem=i}}const h2=/\{[^{}]+\}/g,m2=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function p2(){return Math.random().toString(36).slice(2,11)}function g2(e){let{baseUrl:t="",Request:r=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:l,bodySerializer:u,headers:d,requestInitExt:h=void 0,...p}={...e};h=m2()?h:void 0,t=Iv(t);const x=[];async function v(b,y){const{baseUrl:S,fetch:j=i,Request:C=r,headers:_,params:N={},parseAs:E="json",querySerializer:D,bodySerializer:U=u??b2,body:z,middleware:V=[],...R}=y||{};let A=t;S&&(A=Iv(S)??t);let B=typeof l=="function"?l:Pv(l);D&&(B=typeof D=="function"?D:Pv({...typeof l=="object"?l:{},...D}));const T=z===void 0?void 0:U(z,Fv(d,_,N.header)),K=Fv(T===void 0||T instanceof FormData?{}:{"Content-Type":"application/json"},d,_,N.header),$=[...x,...V],q={redirect:"follow",...p,...R,body:T,headers:K};let I,je,M=new C(v2(b,{baseUrl:A,params:N,querySerializer:B}),q),H;for(const be in R)be in M||(M[be]=R[be]);if($.length){I=p2(),je=Object.freeze({baseUrl:A,fetch:j,parseAs:E,querySerializer:B,bodySerializer:U});for(const be of $)if(be&&typeof be=="object"&&typeof be.onRequest=="function"){const de=await be.onRequest({request:M,schemaPath:b,params:N,options:je,id:I});if(de)if(de instanceof C)M=de;else if(de instanceof Response){H=de;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!H){try{H=await j(M,h)}catch(be){let de=be;if($.length)for(let L=$.length-1;L>=0;L--){const W=$[L];if(W&&typeof W=="object"&&typeof W.onError=="function"){const pe=await W.onError({request:M,error:de,schemaPath:b,params:N,options:je,id:I});if(pe){if(pe instanceof Response){de=void 0,H=pe;break}if(pe instanceof Error){de=pe;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(de)throw de}if($.length)for(let be=$.length-1;be>=0;be--){const de=$[be];if(de&&typeof de=="object"&&typeof de.onResponse=="function"){const L=await de.onResponse({request:M,response:H,schemaPath:b,params:N,options:je,id:I});if(L){if(!(L instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");H=L}}}}if(H.status===204||M.method==="HEAD"||H.headers.get("Content-Length")==="0")return H.ok?{data:void 0,response:H}:{error:void 0,response:H};if(H.ok)return E==="stream"?{data:H.body,response:H}:{data:await H[E](),response:H};let ee=await H.text();try{ee=JSON.parse(ee)}catch{}return{error:ee,response:H}}return{request(b,y,S){return v(y,{...S,method:b.toUpperCase()})},GET(b,y){return v(b,{...y,method:"GET"})},PUT(b,y){return v(b,{...y,method:"PUT"})},POST(b,y){return v(b,{...y,method:"POST"})},DELETE(b,y){return v(b,{...y,method:"DELETE"})},OPTIONS(b,y){return v(b,{...y,method:"OPTIONS"})},HEAD(b,y){return v(b,{...y,method:"HEAD"})},PATCH(b,y){return v(b,{...y,method:"PATCH"})},TRACE(b,y){return v(b,{...y,method:"TRACE"})},use(...b){for(const y of b)if(y){if(typeof y!="object"||!("onRequest"in y||"onResponse"in y||"onError"in y))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");x.push(y)}},eject(...b){for(const y of b){const S=x.indexOf(y);S!==-1&&x.splice(S,1)}}}}function fd(e,t,r){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${r?.allowReserved===!0?t:encodeURIComponent(t)}`}function fw(e,t,r){if(!t||typeof t!="object")return"";const i=[],l={simple:",",label:".",matrix:";"}[r.style]||"&";if(r.style!=="deepObject"&&r.explode===!1){for(const h in t)i.push(h,r.allowReserved===!0?t[h]:encodeURIComponent(t[h]));const d=i.join(",");switch(r.style){case"form":return`${e}=${d}`;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return d}}for(const d in t){const h=r.style==="deepObject"?`${e}[${d}]`:d;i.push(fd(h,t[d],r))}const u=i.join(l);return r.style==="label"||r.style==="matrix"?`${l}${u}`:u}function hw(e,t,r){if(!Array.isArray(t))return"";if(r.explode===!1){const u={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",d=(r.allowReserved===!0?t:t.map(h=>encodeURIComponent(h))).join(u);switch(r.style){case"simple":return d;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return`${e}=${d}`}}const i={simple:",",label:".",matrix:";"}[r.style]||"&",l=[];for(const u of t)r.style==="simple"||r.style==="label"?l.push(r.allowReserved===!0?u:encodeURIComponent(u)):l.push(fd(e,u,r));return r.style==="label"||r.style==="matrix"?`${i}${l.join(i)}`:l.join(i)}function Pv(e){return function(r){const i=[];if(r&&typeof r=="object")for(const l in r){const u=r[l];if(u!=null){if(Array.isArray(u)){if(u.length===0)continue;i.push(hw(l,u,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof u=="object"){i.push(fw(l,u,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}i.push(fd(l,u,e))}}return i.join("&")}}function x2(e,t){let r=e;for(const i of e.match(h2)??[]){let l=i.substring(1,i.length-1),u=!1,d="simple";if(l.endsWith("*")&&(u=!0,l=l.substring(0,l.length-1)),l.startsWith(".")?(d="label",l=l.substring(1)):l.startsWith(";")&&(d="matrix",l=l.substring(1)),!t||t[l]===void 0||t[l]===null)continue;const h=t[l];if(Array.isArray(h)){r=r.replace(i,hw(l,h,{style:d,explode:u}));continue}if(typeof h=="object"){r=r.replace(i,fw(l,h,{style:d,explode:u}));continue}if(d==="matrix"){r=r.replace(i,`;${fd(l,h)}`);continue}r=r.replace(i,d==="label"?`.${encodeURIComponent(h)}`:encodeURIComponent(h))}return r}function b2(e,t){return e instanceof FormData?e:t&&(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function v2(e,t){let r=`${t.baseUrl}${e}`;t.params?.path&&(r=x2(r,t.params.path));let i=t.querySerializer(t.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(r+=`?${i}`),r}function Fv(...e){const t=new Headers;for(const r of e){if(!r||typeof r!="object")continue;const i=r instanceof Headers?r.entries():Object.entries(r);for(const[l,u]of i)if(u===null)t.delete(l);else if(Array.isArray(u))for(const d of u)t.append(l,d);else u!==void 0&&t.set(l,u)}return t}function Iv(e){return e.endsWith("/")?e.substring(0,e.length-1):e}const y2=["ade_csrf","backend_app_csrf"];function w2(){return y2}function j2(){if(typeof document>"u")return null;const e=document.cookie;if(!e)return null;const t=new Map,r=e.split(";");for(const i of r){const[l,...u]=i.trim().split("=");l&&t.set(l,decodeURIComponent(u.join("=")))}return t}function mw(){const e=j2();if(!e)return null;for(const t of w2()){const r=e.get(t);if(r)return r}return null}const pw=new Set(["GET","HEAD","OPTIONS","TRACE"]),Yh="",Wu=Yh.endsWith("/api/v1")?Yh.slice(0,-7):Yh;function Sa(e){if(!e.startsWith("/"))throw new Error("API paths must begin with '/' relative to the server root");return Wu.length>0?`${Wu}${e}`:e}function Jm(e,t){const r=new Headers(t??{});r.set("X-Requested-With","fetch");const i=e.toUpperCase();if(!pw.has(i)){const l=mw();l&&!r.has("X-CSRF-Token")&&r.set("X-CSRF-Token",l)}return r}async function ep(e,t={}){const r=Sa(e),i=t.method??"GET",l=Jm(i,t.headers);return await fetch(r,{credentials:"include",...t,headers:l})}const Ve=g2({baseUrl:Wu.length>0?Wu:void 0,credentials:"include",headers:{"X-Requested-With":"fetch"}}),S2={onRequest({request:e}){const t=e.method?.toUpperCase()??"GET";if(!pw.has(t)){const r=mw();r&&!e.headers.has("X-CSRF-Token")&&e.headers.set("X-CSRF-Token",r)}return e}},N2={async onResponse({response:e}){if(e.ok)return e;const t=await C2(e),r=t?.title??`Request failed with status ${e.status}`;throw new Ht(r,e.status,t)}};Ve.use(S2);Ve.use(N2);async function C2(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Er={root:["auth"],detail:()=>[...Er.root,"session"],providers:()=>[...Er.root,"providers"],setupStatus:()=>[...Er.root,"setup-status"]};async function _2(e={}){try{const{data:t}=await Ve.GET("/api/v1/auth/providers",{signal:e.signal});return t?O2(t):{providers:[],force_sso:!1}}catch(t){if(t instanceof Ht&&t.status===404)return{providers:[],force_sso:!1};throw t}}async function E2(e={}){const t=await gw(e.signal);return t?xw(t,null):null}async function k2(e,t={}){return await A2(e,t.signal),tp(t.signal,null)}async function D2(e={}){return tp(e.signal,null)}async function T2(e={}){try{await Ve.POST("/api/v1/auth/cookie/logout",{signal:e.signal,body:void 0})}catch(t){!(t instanceof Ht)||t.status!==401&&t.status}}async function tp(e,t=null){const r=await gw(e);if(!r)throw new Error("Unable to load session after authentication.");return xw(r,t)}async function gw(e){const t="/api/v1/me/bootstrap";try{const{data:r}=await Ve.GET(t,{signal:e,params:{query:{page:1,page_size:200,include_total:!1}}});return r??null}catch(r){if(r instanceof Ht&&(r.status===401||r.status===403))return null;throw r}}async function A2(e,t){const r=new URLSearchParams;r.set("username",e.email),r.set("password",e.password);const i=await ep("/api/v1/auth/cookie/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r,signal:t});if(i.ok)return;const l=await L2(i),u=l?.detail??l?.title??`Request failed with status ${i.status}`;throw new Ht(u,i.status,l)}function R2(e){const t=e.items.find(r=>r.is_default);return t?t.id:null}function Hv(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"):[]}function M2(e){return e?{...e,items:e.items??[]}:{items:[],page:1,page_size:0,total:0,has_next:!1,has_previous:!1}}function xw(e,t=null){const r=Hv(e.roles),i=Hv(e.permissions),l=M2(e.workspaces);return{user:{...e.user,roles:r,permissions:i,preferred_workspace_id:R2(l)??null},workspaces:l,roles:r,permissions:i,return_to:t}}function O2(e){return{providers:(e.providers??[]).map(z2),force_sso:!!e.force_sso}}function z2(e){return{...e,start_url:e.start_url??"",icon_url:e.icon_url??null}}async function L2(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}function bw(e={}){const t=Ft(),r=yn({queryKey:Er.detail(),queryFn:async({signal:l})=>{const u=await E2({signal:l});return u||null},enabled:e.enabled??!0,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnMount:!0}),i=r.data??null;return f.useEffect(()=>{i||t.removeQueries({queryKey:Er.providers(),exact:!1})},[t,i]),{...r,session:i}}async function U2(e={}){try{const{data:t}=await Ve.GET("/api/v1/auth/setup",{signal:e.signal});if(!t)throw new Error("Expected setup status payload.");return t}catch(t){if(t instanceof Ht&&t.status===404)return{setup_required:!1,registration_mode:"closed",oidc_configured:!1,providers:[]};throw t}}async function $2(e){return await Ve.POST("/api/v1/auth/setup",{body:e}),tp()}function np(e=!0){return yn({queryKey:Er.setupStatus(),queryFn:({signal:t})=>U2({signal:t}),enabled:e,staleTime:3e5,refetchOnWindowFocus:!1})}const lc="/workspaces",q2=new Set(["/","/login","/setup","/logout"]);function B2(e){if(!e)return!0;const t=F2(e);return!!(q2.has(t)||t==="/auth"||t.startsWith("/auth/"))}function P2(e){return`${e.pathname}${e.search}${e.hash}`}function Vv(e){const t=P2(e)||"/";return Yu(t)??lc}function Yu(e){if(!e)return null;const t=e.trim();return!t.startsWith("/")||t.startsWith("//")?null:t==="/"?lc:B2(t)?null:t}function Bo(e){return Yu(e)??lc}function vw(e){return ww("/login",e)}function yw(e){return ww("/setup",e)}function ww(e,t){const r=Bo(t),i=new URLSearchParams;r!==lc&&i.set("redirectTo",r);const l=i.toString();return l?`${e}?${l}`:e}function Xu(e,t){const r=Yu(e);if(r)return r;const i=Yu(t);return i||lc}function F2(e){let t=e;const r=t.indexOf("#");r>=0&&(t=t.slice(0,r));const i=t.indexOf("?");return i>=0&&(t=t.slice(0,i)),t?t.startsWith("/")?t:`/${t}`:"/"}function cc({children:e}){const t=es(),r=en(),i=bw(),{session:l,isLoading:u,isError:d,refetch:h}=i,p=!l&&!u&&!d,{data:x,isPending:v,isError:b,isSuccess:y,refetch:S}=np(p);return f.useEffect(()=>{if(l||u||d)return;if(p){if(v||b)return;if(y&&x?.setup_required){const C=Vv(t);r(yw(C),{replace:!0});return}}const j=Vv(t);r(vw(j),{replace:!0})},[d,u,b,v,y,t,r,l,x?.setup_required,p]),u?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background text-sm text-muted-foreground",children:a.jsx("p",{children:"Loading your workspace"})}):d?a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"We were unable to confirm your session."}),a.jsx("button",{onClick:()=>h(),className:"focus-ring rounded-lg border border-border-strong bg-card px-4 py-2 font-semibold text-muted-foreground hover:bg-muted",children:"Try again"})]}):l?e?a.jsx(Bv,{session:l,refetch:h,children:e}):a.jsx(Bv,{session:l,refetch:h,children:e??null}):p&&v?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background text-sm text-muted-foreground",children:a.jsx("p",{children:"Preparing initial setup"})}):p&&b?a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"We were unable to check whether ADE is ready."}),a.jsx("button",{onClick:()=>S(),className:"focus-ring rounded-lg border border-border-strong bg-card px-4 py-2 font-semibold text-muted-foreground hover:bg-muted",children:"Try again"})]}):null}const uc=100,sp=50;function hd(e){if(!(typeof e!="number"||Number.isNaN(e)||e<=0))return Math.min(e,uc)}async function jw(e,t={}){const{maxPages:r=50}=t,i=[];let l=[],u;for(let p=1;p<=r;p+=1){const x=await e(p);if(i.push(x),l=l.concat(x.items??[]),u===void 0&&x.total!==void 0&&(u=x.total??null),!x.has_next)break}const d=i.at(-1),h=i.at(0);if(!d||!h)throw new Error("No pages were returned while collecting pagination results.");return{...d,items:l,page:1,page_size:h.page_size,has_next:!1,has_previous:!1,total:u??d.total}}function Sw(e,t){return f.useMemo(()=>{if(!e||e.length===0)return[];const r=[],i=new Map;for(const l of e){const u=Array.isArray(l.items)?l.items:[];for(const d of u){const h=t(d),p=i.get(h);if(p===void 0){i.set(h,r.length),r.push(d);continue}r[p]=d}}return r},[e,t])}const Nw=uc,Cw=sp,_w=sp,Ew=sp,I2="workspace",qu={page:1,pageSize:Nw,includeTotal:!1},H2={page:1,pageSize:Cw,includeTotal:!1},V2={page:1,pageSize:_w,includeTotal:!1},Q2={scope:I2,page:1,pageSize:Ew,includeTotal:!1},Cn={all:()=>["workspaces"],list:(e=qu)=>[...Cn.all(),"list",{...e}],detail:e=>[...Cn.all(),"detail",e],members:(e,t=H2)=>[...Cn.detail(e),"members",{...t}],roles:(e,t=V2)=>[...Cn.detail(e),"roles",{...t}],permissions:(e=Q2)=>["permissions",{...e}]},Bu={page:qu.page,pageSize:qu.pageSize,includeTotal:qu.includeTotal},kw="workspace";async function Z2(e={}){const{page:t,pageSize:r,includeTotal:i,signal:l}=e,u={};typeof t=="number"&&t>0&&(u.page=t);const d=hd(r??Nw);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:h}=await Ve.GET("/api/v1/workspaces",{params:{query:u},signal:l});if(!h)throw new Error("Expected workspace page payload.");const p=[...h.items].sort((x,v)=>x.name.localeCompare(v.name));return{...h,items:p}}async function K2(e){const{data:t}=await Ve.POST("/api/v1/workspaces",{body:e});if(!t)throw new Error("Expected workspace payload.");return t}async function G2(e,t){const{data:r}=await Ve.PATCH("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}},body:t});if(!r)throw new Error("Expected workspace payload.");return r}async function W2(e){await Ve.DELETE("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}}})}async function Y2(e,t={}){const{page:r,pageSize:i,includeTotal:l,signal:u}=t,d={};typeof r=="number"&&r>0&&(d.page=r);const h=hd(i??Cw);h&&(d.page_size=h),l&&(d.include_total=!0);const{data:p}=await Ve.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e},query:d},signal:u});if(!p)throw new Error("Expected workspace member page payload.");return p}async function X2(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},body:t});if(!r)throw new Error("Expected workspace member payload.");return r}async function J2(e,t,r){const{data:i}=await Ve.PUT("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:t}},body:r});if(!i)throw new Error("Expected workspace member payload.");return i}async function eC(e,t){await Ve.DELETE("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:t}}})}async function tC(e={}){const{page:t,pageSize:r,includeTotal:i,signal:l}=e,u={scope:kw};typeof t=="number"&&t>0&&(u.page=t);const d=hd(r??_w);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:h}=await Ve.GET("/api/v1/rbac/roles",{params:{query:u},signal:l});if(!h)throw new Error("Expected workspace role page payload.");return h}async function nC(e,t){const{data:r}=await Ve.POST("/api/v1/rbac/roles",{body:t});if(!r)throw new Error("Expected role payload.");return r}async function sC(e,t,r){const{data:i}=await Ve.PATCH("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:t}},body:r});if(!i)throw new Error("Expected role payload.");return i}async function rC(e,t){await Ve.DELETE("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:t}}})}async function aC(e={}){const{scope:t=kw,page:r,pageSize:i,includeTotal:l,signal:u}=e,d={scope:t};typeof r=="number"&&r>0&&(d.page=r);const h=hd(i??Ew);h&&(d.page_size=h),l&&(d.include_total=!0);const{data:p}=await Ve.GET("/api/v1/rbac/permissions",{params:{query:d},signal:u});if(!p)throw new Error("Expected permission page payload.");return p}const iC="/api/v1/workspaces/{workspace_id}/default";async function oC(e){await Ve.PUT(iC,{params:{path:{workspace_id:e}}})}function lC(){const e=Ft();return Pn({mutationFn:K2,onSuccess(t){e.setQueryData(Cn.detail(t.id),t),e.getQueriesData({queryKey:Cn.all()}).forEach(([r,i])=>{if(!Array.isArray(r)||r[0]!=="workspaces"||r[1]!=="list"||!i)return;const l=i.items.findIndex(p=>p.id===t.id),d=[...l>=0?i.items.map(p=>p.id===t.id?t:p):[...i.items,t]].sort((p,x)=>p.name.localeCompare(x.name)),h=typeof i.total=="number"&&l===-1?i.total+1:i.total;e.setQueryData(r,{...i,items:d,total:h})}),e.invalidateQueries({queryKey:Cn.all()})}})}function cC(e,t){if(!e||typeof e!="object")return e;if("items"in e){const r=e;if(!Array.isArray(r.items))return e;const i=r.items.map(l=>({...l,is_default:l.id===t}));return{...r,items:i}}if("id"in e&&"is_default"in e){const r=e;return{...r,is_default:r.id===t}}return e}function Dw(){const e=Ft();return Pn({mutationFn:t=>oC(t),onSuccess:(t,r)=>{e.setQueriesData({queryKey:Cn.all()},i=>cC(i,r))}})}function Tw(e){const t=Ft();return Pn({mutationFn:r=>G2(e,r),onSuccess:r=>{t.setQueryData(Cn.detail(r.id),r),t.getQueriesData({queryKey:Cn.all()}).forEach(([i,l])=>{if(!Array.isArray(i)||i[0]!=="workspaces"||i[1]!=="list"||!l)return;const d=[...l.items.map(h=>h.id===r.id?r:h)].sort((h,p)=>h.name.localeCompare(p.name));t.setQueryData(i,{...l,items:d})})}})}function uC(e={}){const t=e.page??Bu.page,r=e.pageSize??Bu.pageSize,i=e.includeTotal??Bu.includeTotal;return{queryKey:Cn.list({page:t,pageSize:r,includeTotal:i}),queryFn:({signal:l})=>Z2({page:t,pageSize:r,includeTotal:i,signal:l}),staleTime:6e4,enabled:e.enabled??!0}}function md(e={}){const t=Ft(),r=uC(e),i=t.getQueryData(r.queryKey);return yn({...r,initialData:i})}const dC="documents";function rp(e){return`/workspaces/${e}/${dC}`}function Xh(e){return e instanceof Error?e:new Error(String(e))}function ja(e){return{get(){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read from storage",Xh(t)),null}},set(t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn("Failed to write to storage",Xh(r))}},clear(){if(!(typeof window>"u"))try{window.localStorage.removeItem(e)}catch(t){console.warn("Failed to clear storage",Xh(t))}}}}const fC="backend.app.active_workspace",jm=ja(fC);function Aw(){return jm.get()}function Rw(e){if(!e){jm.clear();return}jm.set(e)}function Mw(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=Mw(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function te(){for(var e,t,r=0,i="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=Mw(e))&&(i&&(i+=" "),i+=t);return i}const hC={primary:"bg-brand-600 text-on-brand hover:bg-brand-700 focus-visible:ring-brand-500 disabled:bg-brand-300",secondary:"bg-card text-muted-foreground border border-border hover:bg-muted focus-visible:ring-ring disabled:text-muted-foreground",ghost:"bg-transparent text-muted-foreground hover:bg-muted focus-visible:ring-ring",danger:"bg-danger-600 text-on-danger hover:bg-danger-700 focus-visible:ring-danger-500 disabled:bg-danger-300"},mC={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},Ae=f.forwardRef(({type:e="button",variant:t="primary",size:r="md",isLoading:i=!1,className:l,children:u,disabled:d,...h},p)=>{const x=d||i;return a.jsxs("button",{ref:p,type:e,disabled:x,"aria-busy":i||void 0,className:te("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed",hC[t],mC[r],l),...h,children:[i?a.jsx("span",{"aria-hidden":"true",className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,a.jsx("span",{children:u})]})});Ae.displayName="Button";const pC={loading:"animate-spin border-2 border-brand-500 border-t-transparent",empty:"bg-border",error:"bg-danger-500"};function Dt({title:e,description:t,action:r,variant:i="empty",className:l}){return a.jsxs("div",{className:te("flex min-h-[240px] flex-col items-center justify-center rounded-xl border border-dashed border-border bg-card/70 px-6 py-12 text-center text-sm text-muted-foreground",l),children:[a.jsx("span",{"aria-hidden":"true",className:te("mb-4 h-8 w-8 rounded-full border-current",pC[i])}),a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e}),t?a.jsx("p",{className:"mt-2 max-w-md leading-relaxed",children:t}):null,r?a.jsx("div",{className:"mt-4",children:r}):null]})}function gC(){return a.jsx(cc,{children:a.jsx(xC,{})})}function xC(){const e=es(),t=en(),r=Pi(),i=md(),l=i.data?.items??[],h=[Aw(),r.user.preferred_workspace_id].filter(p=>!!p).map(p=>l.find(x=>x.id===p)).find(p=>!!p)??l[0]??null;return f.useEffect(()=>{if(i.isLoading||i.isError)return;if(!h){e.pathname!=="/workspaces"&&t("/workspaces",{replace:!0});return}const p=rp(h.id);e.pathname+e.search!==p&&t(p,{replace:!0})},[e.pathname,e.search,t,h,i.isError,i.isLoading]),i.isLoading?a.jsx(Dt,{title:"Loading workspaces",variant:"loading"}):i.isError?a.jsx(Dt,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error",action:a.jsx(Ae,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})}):null}function Re(e,t,r){function i(h,p){var x;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(x=h._zod).traits??(x.traits=new Set),h._zod.traits.add(e),t(h,p);for(const v in d.prototype)v in h||Object.defineProperty(h,v,{value:d.prototype[v].bind(h)});h._zod.constr=d,h._zod.def=p}const l=r?.Parent??Object;class u extends l{}Object.defineProperty(u,"name",{value:e});function d(h){var p;const x=r?.Parent?new u:this;i(x,h),(p=x._zod).deferred??(p.deferred=[]);for(const v of x._zod.deferred)v();return x}return Object.defineProperty(d,"init",{value:i}),Object.defineProperty(d,Symbol.hasInstance,{value:h=>r?.Parent&&h instanceof r.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(d,"name",{value:e}),d}class Lo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ow extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const zw={};function Ui(e){return zw}function bC(e){const t=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,l])=>t.indexOf(+i)===-1).map(([i,l])=>l)}function Sm(e,t){return typeof t=="bigint"?t.toString():t}function ap(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ip(e){return e==null}function op(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}const Qv=Symbol("evaluating");function rn(e,t,r){let i;Object.defineProperty(e,t,{get(){if(i!==Qv)return i===void 0&&(i=Qv,i=r()),i},set(l){Object.defineProperty(e,t,{value:l})},configurable:!0})}function Fi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ii(...e){const t={};for(const r of e){const i=Object.getOwnPropertyDescriptors(r);Object.assign(t,i)}return Object.defineProperties({},t)}function Zv(e){return JSON.stringify(e)}const Lw="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ju(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const vC=ap(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Jl(e){if(Ju(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ju(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Uw(e){return Jl(e)?{...e}:Array.isArray(e)?[...e]:e}const yC=new Set(["string","number","symbol"]);function pd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ii(e,t,r){const i=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(i._zod.parent=e),i}function ot(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function wC(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function jC(e,t){const r=e._zod.def,i=Ii(e._zod.def,{get shape(){const l={};for(const u in t){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&(l[u]=r.shape[u])}return Fi(this,"shape",l),l},checks:[]});return ii(e,i)}function SC(e,t){const r=e._zod.def,i=Ii(e._zod.def,{get shape(){const l={...e._zod.def.shape};for(const u in t){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&delete l[u]}return Fi(this,"shape",l),l},checks:[]});return ii(e,i)}function NC(e,t){if(!Jl(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const l=Ii(e._zod.def,{get shape(){const u={...e._zod.def.shape,...t};return Fi(this,"shape",u),u},checks:[]});return ii(e,l)}function CC(e,t){if(!Jl(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const i={...e._zod.def.shape,...t};return Fi(this,"shape",i),i},checks:e._zod.def.checks};return ii(e,r)}function _C(e,t){const r=Ii(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t._zod.def.shape};return Fi(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return ii(e,r)}function EC(e,t,r){const i=Ii(t._zod.def,{get shape(){const l=t._zod.def.shape,u={...l};if(r)for(const d in r){if(!(d in l))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=e?new e({type:"optional",innerType:l[d]}):l[d])}else for(const d in l)u[d]=e?new e({type:"optional",innerType:l[d]}):l[d];return Fi(this,"shape",u),u},checks:[]});return ii(t,i)}function kC(e,t,r){const i=Ii(t._zod.def,{get shape(){const l=t._zod.def.shape,u={...l};if(r)for(const d in r){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=new e({type:"nonoptional",innerType:l[d]}))}else for(const d in l)u[d]=new e({type:"nonoptional",innerType:l[d]});return Fi(this,"shape",u),u},checks:[]});return ii(t,i)}function Mo(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function $w(e,t){return t.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(e),r})}function Eu(e){return typeof e=="string"?e:e?.message}function $i(e,t,r){const i={...e,path:e.path??[]};if(!e.message){const l=Eu(e.inst?._zod.def?.error?.(e))??Eu(t?.error?.(e))??Eu(r.customError?.(e))??Eu(r.localeError?.(e))??"Invalid input";i.message=l}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function lp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function ec(...e){const[t,r,i]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:i}:{...t}}const qw=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Sm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},cp=Re("$ZodError",qw),gd=Re("$ZodError",qw,{Parent:Error});function DC(e,t=r=>r.message){const r={},i=[];for(const l of e.issues)l.path.length>0?(r[l.path[0]]=r[l.path[0]]||[],r[l.path[0]].push(t(l))):i.push(t(l));return{formErrors:i,fieldErrors:r}}function TC(e,t=r=>r.message){const r={_errors:[]},i=l=>{for(const u of l.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>i({issues:d}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)r._errors.push(t(u));else{let d=r,h=0;for(;h<u.path.length;){const p=u.path[h];h===u.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(t(u))):d[p]=d[p]||{_errors:[]},d=d[p],h++}}};return i(e),r}const xd=e=>(t,r,i,l)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},d=t._zod.run({value:r,issues:[]},u);if(d instanceof Promise)throw new Lo;if(d.issues.length){const h=new(l?.Err??e)(d.issues.map(p=>$i(p,u,Ui())));throw Lw(h,l?.callee),h}return d.value},AC=xd(gd),bd=e=>async(t,r,i,l)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let d=t._zod.run({value:r,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const h=new(l?.Err??e)(d.issues.map(p=>$i(p,u,Ui())));throw Lw(h,l?.callee),h}return d.value},RC=bd(gd),vd=e=>(t,r,i)=>{const l=i?{...i,async:!1}:{async:!1},u=t._zod.run({value:r,issues:[]},l);if(u instanceof Promise)throw new Lo;return u.issues.length?{success:!1,error:new(e??cp)(u.issues.map(d=>$i(d,l,Ui())))}:{success:!0,data:u.value}},MC=vd(gd),yd=e=>async(t,r,i)=>{const l=i?Object.assign(i,{async:!0}):{async:!0};let u=t._zod.run({value:r,issues:[]},l);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>$i(d,l,Ui())))}:{success:!0,data:u.value}},OC=yd(gd),zC=e=>(t,r,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return xd(e)(t,r,l)},LC=e=>(t,r,i)=>xd(e)(t,r,i),UC=e=>async(t,r,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return bd(e)(t,r,l)},$C=e=>async(t,r,i)=>bd(e)(t,r,i),qC=e=>(t,r,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return vd(e)(t,r,l)},BC=e=>(t,r,i)=>vd(e)(t,r,i),PC=e=>async(t,r,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return yd(e)(t,r,l)},FC=e=>async(t,r,i)=>yd(e)(t,r,i),IC=/^[cC][^\s-]{8,}$/,HC=/^[0-9a-z]+$/,VC=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,QC=/^[0-9a-vA-V]{20}$/,ZC=/^[A-Za-z0-9]{27}$/,KC=/^[a-zA-Z0-9_-]{21}$/,GC=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,WC=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Kv=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,YC=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,XC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function JC(){return new RegExp(XC,"u")}const e_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t_=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,n_=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,s_=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,r_=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Bw=/^[A-Za-z0-9_-]*$/,a_=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,i_=/^\+(?:[0-9]){6,14}[0-9]$/,Pw="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",o_=new RegExp(`^${Pw}$`);function Fw(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function l_(e){return new RegExp(`^${Fw(e)}$`)}function c_(e){const t=Fw({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${r.join("|")})`;return new RegExp(`^${Pw}T(?:${i})$`)}const u_=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},d_=/^[^A-Z]*$/,f_=/^[^a-z]*$/,Yr=Re("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),h_=Re("$ZodCheckMaxLength",(e,t)=>{var r;Yr.init(e,t),(r=e._zod.def).when??(r.when=i=>{const l=i.value;return!ip(l)&&l.length!==void 0}),e._zod.onattach.push(i=>{const l=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<l&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const l=i.value;if(l.length<=t.maximum)return;const d=lp(l);i.issues.push({origin:d,code:"too_big",maximum:t.maximum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),m_=Re("$ZodCheckMinLength",(e,t)=>{var r;Yr.init(e,t),(r=e._zod.def).when??(r.when=i=>{const l=i.value;return!ip(l)&&l.length!==void 0}),e._zod.onattach.push(i=>{const l=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>l&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const l=i.value;if(l.length>=t.minimum)return;const d=lp(l);i.issues.push({origin:d,code:"too_small",minimum:t.minimum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),p_=Re("$ZodCheckLengthEquals",(e,t)=>{var r;Yr.init(e,t),(r=e._zod.def).when??(r.when=i=>{const l=i.value;return!ip(l)&&l.length!==void 0}),e._zod.onattach.push(i=>{const l=i._zod.bag;l.minimum=t.length,l.maximum=t.length,l.length=t.length}),e._zod.check=i=>{const l=i.value,u=l.length;if(u===t.length)return;const d=lp(l),h=u>t.length;i.issues.push({origin:d,...h?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),wd=Re("$ZodCheckStringFormat",(e,t)=>{var r,i;Yr.init(e,t),e._zod.onattach.push(l=>{const u=l._zod.bag;u.format=t.format,t.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=l=>{t.pattern.lastIndex=0,!t.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:t.format,input:l.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),g_=Re("$ZodCheckRegex",(e,t)=>{wd.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),x_=Re("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=d_),wd.init(e,t)}),b_=Re("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=f_),wd.init(e,t)}),v_=Re("$ZodCheckIncludes",(e,t)=>{Yr.init(e,t);const r=pd(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=i,e._zod.onattach.push(l=>{const u=l._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=l=>{l.value.includes(t.includes,t.position)||l.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:l.value,inst:e,continue:!t.abort})}}),y_=Re("$ZodCheckStartsWith",(e,t)=>{Yr.init(e,t);const r=new RegExp(`^${pd(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(i=>{const l=i._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),w_=Re("$ZodCheckEndsWith",(e,t)=>{Yr.init(e,t);const r=new RegExp(`.*${pd(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(i=>{const l=i._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),j_=Re("$ZodCheckOverwrite",(e,t)=>{Yr.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class S_{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(d=>d),l=Math.min(...i.map(d=>d.length-d.trimStart().length)),u=i.map(d=>d.slice(l)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const t=Function,r=this?.args,l=[...(this?.content??[""]).map(u=>`  ${u}`)];return new t(...r,l.join(`
`))}}const N_={major:4,minor:1,patch:12},Wn=Re("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=N_;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const l of i)for(const u of l._zod.onattach)u(e);if(i.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const l=(d,h,p)=>{let x=Mo(d),v;for(const b of h){if(b._zod.def.when){if(!b._zod.def.when(d))continue}else if(x)continue;const y=d.issues.length,S=b._zod.check(d);if(S instanceof Promise&&p?.async===!1)throw new Lo;if(v||S instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await S,d.issues.length!==y&&(x||(x=Mo(d,y)))});else{if(d.issues.length===y)continue;x||(x=Mo(d,y))}}return v?v.then(()=>d):d},u=(d,h,p)=>{if(Mo(d))return d.aborted=!0,d;const x=l(h,i,p);if(x instanceof Promise){if(p.async===!1)throw new Lo;return x.then(v=>e._zod.parse(v,p))}return e._zod.parse(x,p)};e._zod.run=(d,h)=>{if(h.skipChecks)return e._zod.parse(d,h);if(h.direction==="backward"){const x=e._zod.parse({value:d.value,issues:[]},{...h,skipChecks:!0});return x instanceof Promise?x.then(v=>u(v,d,h)):u(x,d,h)}const p=e._zod.parse(d,h);if(p instanceof Promise){if(h.async===!1)throw new Lo;return p.then(x=>l(x,i,h))}return l(p,i,h)}}e["~standard"]={validate:l=>{try{const u=MC(e,l);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return OC(e,l).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),up=Re("$ZodString",(e,t)=>{Wn.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??u_(e._zod.bag),e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),mn=Re("$ZodStringFormat",(e,t)=>{wd.init(e,t),up.init(e,t)}),C_=Re("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=WC),mn.init(e,t)}),__=Re("$ZodUUID",(e,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Kv(i))}else t.pattern??(t.pattern=Kv());mn.init(e,t)}),E_=Re("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=YC),mn.init(e,t)}),k_=Re("$ZodURL",(e,t)=>{mn.init(e,t),e._zod.check=r=>{try{const i=r.value.trim(),l=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(l.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:a_.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(l.protocol.endsWith(":")?l.protocol.slice(0,-1):l.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=l.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),D_=Re("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=JC()),mn.init(e,t)}),T_=Re("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=KC),mn.init(e,t)}),A_=Re("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=IC),mn.init(e,t)}),R_=Re("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=HC),mn.init(e,t)}),M_=Re("$ZodULID",(e,t)=>{t.pattern??(t.pattern=VC),mn.init(e,t)}),O_=Re("$ZodXID",(e,t)=>{t.pattern??(t.pattern=QC),mn.init(e,t)}),z_=Re("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ZC),mn.init(e,t)}),L_=Re("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=c_(t)),mn.init(e,t)}),U_=Re("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=o_),mn.init(e,t)}),$_=Re("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=l_(t)),mn.init(e,t)}),q_=Re("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=GC),mn.init(e,t)}),B_=Re("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=e_),mn.init(e,t),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv4"})}),P_=Re("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=t_),mn.init(e,t),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),F_=Re("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=n_),mn.init(e,t)}),I_=Re("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=s_),mn.init(e,t),e._zod.check=r=>{const i=r.value.split("/");try{if(i.length!==2)throw new Error;const[l,u]=i;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${l}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Iw(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const H_=Re("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=r_),mn.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Iw(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function V_(e){if(!Bw.test(e))return!1;const t=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Iw(r)}const Q_=Re("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Bw),mn.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{V_(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Z_=Re("$ZodE164",(e,t)=>{t.pattern??(t.pattern=i_),mn.init(e,t)});function K_(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[i]=r;if(!i)return!1;const l=JSON.parse(atob(i));return!("typ"in l&&l?.typ!=="JWT"||!l.alg||t&&(!("alg"in l)||l.alg!==t))}catch{return!1}}const G_=Re("$ZodJWT",(e,t)=>{mn.init(e,t),e._zod.check=r=>{K_(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),W_=Re("$ZodUnknown",(e,t)=>{Wn.init(e,t),e._zod.parse=r=>r}),Y_=Re("$ZodNever",(e,t)=>{Wn.init(e,t),e._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Gv(e,t,r){e.issues.length&&t.issues.push(...$w(r,e.issues)),t.value[r]=e.value}const X_=Re("$ZodArray",(e,t)=>{Wn.init(e,t),e._zod.parse=(r,i)=>{const l=r.value;if(!Array.isArray(l))return r.issues.push({expected:"array",code:"invalid_type",input:l,inst:e}),r;r.value=Array(l.length);const u=[];for(let d=0;d<l.length;d++){const h=l[d],p=t.element._zod.run({value:h,issues:[]},i);p instanceof Promise?u.push(p.then(x=>Gv(x,r,d))):Gv(p,r,d)}return u.length?Promise.all(u).then(()=>r):r}});function ed(e,t,r,i){e.issues.length&&t.issues.push(...$w(r,e.issues)),e.value===void 0?r in i&&(t.value[r]=void 0):t.value[r]=e.value}function Hw(e){const t=Object.keys(e.shape);for(const i of t)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const r=wC(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function Vw(e,t,r,i,l,u){const d=[],h=l.keySet,p=l.catchall._zod,x=p.def.type;for(const v of Object.keys(t)){if(h.has(v))continue;if(x==="never"){d.push(v);continue}const b=p.run({value:t[v],issues:[]},i);b instanceof Promise?e.push(b.then(y=>ed(y,r,v,t))):ed(b,r,v,t)}return d.length&&r.issues.push({code:"unrecognized_keys",keys:d,input:t,inst:u}),e.length?Promise.all(e).then(()=>r):r}const J_=Re("$ZodObject",(e,t)=>{if(Wn.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const h=t.shape;Object.defineProperty(t,"shape",{get:()=>{const p={...h};return Object.defineProperty(t,"shape",{value:p}),p}})}const i=ap(()=>Hw(t));rn(e._zod,"propValues",()=>{const h=t.shape,p={};for(const x in h){const v=h[x]._zod;if(v.values){p[x]??(p[x]=new Set);for(const b of v.values)p[x].add(b)}}return p});const l=Ju,u=t.catchall;let d;e._zod.parse=(h,p)=>{d??(d=i.value);const x=h.value;if(!l(x))return h.issues.push({expected:"object",code:"invalid_type",input:x,inst:e}),h;h.value={};const v=[],b=d.shape;for(const y of d.keys){const j=b[y]._zod.run({value:x[y],issues:[]},p);j instanceof Promise?v.push(j.then(C=>ed(C,h,y,x))):ed(j,h,y,x)}return u?Vw(v,x,h,p,i.value,e):v.length?Promise.all(v).then(()=>h):h}}),eE=Re("$ZodObjectJIT",(e,t)=>{J_.init(e,t);const r=e._zod.parse,i=ap(()=>Hw(t)),l=y=>{const S=new S_(["shape","payload","ctx"]),j=i.value,C=D=>{const U=Zv(D);return`shape[${U}]._zod.run({ value: input[${U}], issues: [] }, ctx)`};S.write("const input = payload.value;");const _=Object.create(null);let N=0;for(const D of j.keys)_[D]=`key_${N++}`;S.write("const newResult = {};");for(const D of j.keys){const U=_[D],z=Zv(D);S.write(`const ${U} = ${C(D)};`),S.write(`
        if (${U}.issues.length) {
          payload.issues = payload.issues.concat(${U}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${z}, ...iss.path] : [${z}]
          })));
        }
        
        
        if (${U}.value === undefined) {
          if (${z} in input) {
            newResult[${z}] = undefined;
          }
        } else {
          newResult[${z}] = ${U}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const E=S.compile();return(D,U)=>E(y,D,U)};let u;const d=Ju,h=!zw.jitless,x=h&&vC.value,v=t.catchall;let b;e._zod.parse=(y,S)=>{b??(b=i.value);const j=y.value;return d(j)?h&&x&&S?.async===!1&&S.jitless!==!0?(u||(u=l(t.shape)),y=u(y,S),v?Vw([],j,y,S,b,e):y):r(y,S):(y.issues.push({expected:"object",code:"invalid_type",input:j,inst:e}),y)}});function Wv(e,t,r,i){for(const u of e)if(u.issues.length===0)return t.value=u.value,t;const l=e.filter(u=>!Mo(u));return l.length===1?(t.value=l[0].value,l[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(u=>u.issues.map(d=>$i(d,i,Ui())))}),t)}const tE=Re("$ZodUnion",(e,t)=>{Wn.init(e,t),rn(e._zod,"optin",()=>t.options.some(l=>l._zod.optin==="optional")?"optional":void 0),rn(e._zod,"optout",()=>t.options.some(l=>l._zod.optout==="optional")?"optional":void 0),rn(e._zod,"values",()=>{if(t.options.every(l=>l._zod.values))return new Set(t.options.flatMap(l=>Array.from(l._zod.values)))}),rn(e._zod,"pattern",()=>{if(t.options.every(l=>l._zod.pattern)){const l=t.options.map(u=>u._zod.pattern);return new RegExp(`^(${l.map(u=>op(u.source)).join("|")})$`)}});const r=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(l,u)=>{if(r)return i(l,u);let d=!1;const h=[];for(const p of t.options){const x=p._zod.run({value:l.value,issues:[]},u);if(x instanceof Promise)h.push(x),d=!0;else{if(x.issues.length===0)return x;h.push(x)}}return d?Promise.all(h).then(p=>Wv(p,l,e,u)):Wv(h,l,e,u)}}),nE=Re("$ZodIntersection",(e,t)=>{Wn.init(e,t),e._zod.parse=(r,i)=>{const l=r.value,u=t.left._zod.run({value:l,issues:[]},i),d=t.right._zod.run({value:l,issues:[]},i);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([p,x])=>Yv(r,p,x)):Yv(r,u,d)}});function Nm(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Jl(e)&&Jl(t)){const r=Object.keys(t),i=Object.keys(e).filter(u=>r.indexOf(u)!==-1),l={...e,...t};for(const u of i){const d=Nm(e[u],t[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};l[u]=d.data}return{valid:!0,data:l}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let i=0;i<e.length;i++){const l=e[i],u=t[i],d=Nm(l,u);if(!d.valid)return{valid:!1,mergeErrorPath:[i,...d.mergeErrorPath]};r.push(d.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Yv(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Mo(e))return e;const i=Nm(t.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const sE=Re("$ZodEnum",(e,t)=>{Wn.init(e,t);const r=bC(t.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=new RegExp(`^(${r.filter(l=>yC.has(typeof l)).map(l=>typeof l=="string"?pd(l):l.toString()).join("|")})$`),e._zod.parse=(l,u)=>{const d=l.value;return i.has(d)||l.issues.push({code:"invalid_value",values:r,input:d,inst:e}),l}}),rE=Re("$ZodTransform",(e,t)=>{Wn.init(e,t),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Ow(e.constructor.name);const l=t.transform(r.value,r);if(i.async)return(l instanceof Promise?l:Promise.resolve(l)).then(d=>(r.value=d,r));if(l instanceof Promise)throw new Lo;return r.value=l,r}});function Xv(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const aE=Re("$ZodOptional",(e,t)=>{Wn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",rn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),rn(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${op(r.source)})?$`):void 0}),e._zod.parse=(r,i)=>{if(t.innerType._zod.optin==="optional"){const l=t.innerType._zod.run(r,i);return l instanceof Promise?l.then(u=>Xv(u,r.value)):Xv(l,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,i)}}),iE=Re("$ZodNullable",(e,t)=>{Wn.init(e,t),rn(e._zod,"optin",()=>t.innerType._zod.optin),rn(e._zod,"optout",()=>t.innerType._zod.optout),rn(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${op(r.source)}|null)$`):void 0}),rn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,i)=>r.value===null?r:t.innerType._zod.run(r,i)}),oE=Re("$ZodDefault",(e,t)=>{Wn.init(e,t),e._zod.optin="optional",rn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return t.innerType._zod.run(r,i);if(r.value===void 0)return r.value=t.defaultValue,r;const l=t.innerType._zod.run(r,i);return l instanceof Promise?l.then(u=>Jv(u,t)):Jv(l,t)}});function Jv(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const lE=Re("$ZodPrefault",(e,t)=>{Wn.init(e,t),e._zod.optin="optional",rn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,i))}),cE=Re("$ZodNonOptional",(e,t)=>{Wn.init(e,t),rn(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),e._zod.parse=(r,i)=>{const l=t.innerType._zod.run(r,i);return l instanceof Promise?l.then(u=>ey(u,e)):ey(l,e)}});function ey(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const uE=Re("$ZodCatch",(e,t)=>{Wn.init(e,t),rn(e._zod,"optin",()=>t.innerType._zod.optin),rn(e._zod,"optout",()=>t.innerType._zod.optout),rn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return t.innerType._zod.run(r,i);const l=t.innerType._zod.run(r,i);return l instanceof Promise?l.then(u=>(r.value=u.value,u.issues.length&&(r.value=t.catchValue({...r,error:{issues:u.issues.map(d=>$i(d,i,Ui()))},input:r.value}),r.issues=[]),r)):(r.value=l.value,l.issues.length&&(r.value=t.catchValue({...r,error:{issues:l.issues.map(u=>$i(u,i,Ui()))},input:r.value}),r.issues=[]),r)}}),dE=Re("$ZodPipe",(e,t)=>{Wn.init(e,t),rn(e._zod,"values",()=>t.in._zod.values),rn(e._zod,"optin",()=>t.in._zod.optin),rn(e._zod,"optout",()=>t.out._zod.optout),rn(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,i)=>{if(i.direction==="backward"){const u=t.out._zod.run(r,i);return u instanceof Promise?u.then(d=>ku(d,t.in,i)):ku(u,t.in,i)}const l=t.in._zod.run(r,i);return l instanceof Promise?l.then(u=>ku(u,t.out,i)):ku(l,t.out,i)}});function ku(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const fE=Re("$ZodReadonly",(e,t)=>{Wn.init(e,t),rn(e._zod,"propValues",()=>t.innerType._zod.propValues),rn(e._zod,"values",()=>t.innerType._zod.values),rn(e._zod,"optin",()=>t.innerType._zod.optin),rn(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,i)=>{if(i.direction==="backward")return t.innerType._zod.run(r,i);const l=t.innerType._zod.run(r,i);return l instanceof Promise?l.then(ty):ty(l)}});function ty(e){return e.value=Object.freeze(e.value),e}const hE=Re("$ZodCustom",(e,t)=>{Yr.init(e,t),Wn.init(e,t),e._zod.parse=(r,i)=>r,e._zod.check=r=>{const i=r.value,l=t.fn(i);if(l instanceof Promise)return l.then(u=>ny(u,r,i,e));ny(l,r,i,e)}});function ny(e,t,r,i){if(!e){const l={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(l.params=i._zod.def.params),t.issues.push(ec(l))}}class mE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const i=r[0];if(this._map.set(t,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const i={...this.get(r)??{}};delete i.id;const l={...i,...this._map.get(t)};return Object.keys(l).length?l:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function pE(){return new mE}const Du=pE();function gE(e,t){return new e({type:"string",...ot(t)})}function xE(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ot(t)})}function sy(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ot(t)})}function bE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ot(t)})}function vE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ot(t)})}function yE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ot(t)})}function wE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ot(t)})}function jE(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ot(t)})}function SE(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ot(t)})}function NE(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ot(t)})}function CE(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ot(t)})}function _E(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ot(t)})}function EE(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ot(t)})}function kE(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ot(t)})}function DE(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ot(t)})}function TE(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ot(t)})}function AE(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ot(t)})}function RE(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ot(t)})}function ME(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ot(t)})}function OE(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ot(t)})}function zE(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ot(t)})}function LE(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ot(t)})}function UE(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ot(t)})}function $E(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ot(t)})}function qE(e,t){return new e({type:"string",format:"date",check:"string_format",...ot(t)})}function BE(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ot(t)})}function PE(e,t){return new e({type:"string",format:"duration",check:"string_format",...ot(t)})}function FE(e){return new e({type:"unknown"})}function IE(e,t){return new e({type:"never",...ot(t)})}function Qw(e,t){return new h_({check:"max_length",...ot(t),maximum:e})}function td(e,t){return new m_({check:"min_length",...ot(t),minimum:e})}function Zw(e,t){return new p_({check:"length_equals",...ot(t),length:e})}function HE(e,t){return new g_({check:"string_format",format:"regex",...ot(t),pattern:e})}function VE(e){return new x_({check:"string_format",format:"lowercase",...ot(e)})}function QE(e){return new b_({check:"string_format",format:"uppercase",...ot(e)})}function ZE(e,t){return new v_({check:"string_format",format:"includes",...ot(t),includes:e})}function KE(e,t){return new y_({check:"string_format",format:"starts_with",...ot(t),prefix:e})}function GE(e,t){return new w_({check:"string_format",format:"ends_with",...ot(t),suffix:e})}function dc(e){return new j_({check:"overwrite",tx:e})}function WE(e){return dc(t=>t.normalize(e))}function YE(){return dc(e=>e.trim())}function XE(){return dc(e=>e.toLowerCase())}function JE(){return dc(e=>e.toUpperCase())}function ek(e,t,r){return new e({type:"array",element:t,...ot(r)})}function tk(e,t,r){return new e({type:"custom",check:"custom",fn:t,...ot(r)})}function nk(e){const t=sk(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(ec(i,r.value,t._zod.def));else{const l=i;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=t),l.continue??(l.continue=!t._zod.def.abort),r.issues.push(ec(l))}},e(r.value,r)));return t}function sk(e,t){const r=new Yr({check:"custom",...ot(t)});return r._zod.check=e,r}const rk=Re("ZodISODateTime",(e,t)=>{L_.init(e,t),wn.init(e,t)});function ak(e){return $E(rk,e)}const ik=Re("ZodISODate",(e,t)=>{U_.init(e,t),wn.init(e,t)});function ok(e){return qE(ik,e)}const lk=Re("ZodISOTime",(e,t)=>{$_.init(e,t),wn.init(e,t)});function ck(e){return BE(lk,e)}const uk=Re("ZodISODuration",(e,t)=>{q_.init(e,t),wn.init(e,t)});function dk(e){return PE(uk,e)}const fk=(e,t)=>{cp.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>TC(e,r)},flatten:{value:r=>DC(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Sm,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Sm,2)}},isEmpty:{get(){return e.issues.length===0}}})},dr=Re("ZodError",fk,{Parent:Error}),hk=xd(dr),mk=bd(dr),pk=vd(dr),gk=yd(dr),xk=zC(dr),bk=LC(dr),vk=UC(dr),yk=$C(dr),wk=qC(dr),jk=BC(dr),Sk=PC(dr),Nk=FC(dr),ts=Re("ZodType",(e,t)=>(Wn.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Ii(t,{checks:[...t.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(r,i)=>ii(e,r,i),e.brand=()=>e,e.register=((r,i)=>(r.add(e,i),e)),e.parse=(r,i)=>hk(e,r,i,{callee:e.parse}),e.safeParse=(r,i)=>pk(e,r,i),e.parseAsync=async(r,i)=>mk(e,r,i,{callee:e.parseAsync}),e.safeParseAsync=async(r,i)=>gk(e,r,i),e.spa=e.safeParseAsync,e.encode=(r,i)=>xk(e,r,i),e.decode=(r,i)=>bk(e,r,i),e.encodeAsync=async(r,i)=>vk(e,r,i),e.decodeAsync=async(r,i)=>yk(e,r,i),e.safeEncode=(r,i)=>wk(e,r,i),e.safeDecode=(r,i)=>jk(e,r,i),e.safeEncodeAsync=async(r,i)=>Sk(e,r,i),e.safeDecodeAsync=async(r,i)=>Nk(e,r,i),e.refine=(r,i)=>e.check(mD(r,i)),e.superRefine=r=>e.check(pD(r)),e.overwrite=r=>e.check(dc(r)),e.optional=()=>iy(e),e.nullable=()=>oy(e),e.nullish=()=>iy(oy(e)),e.nonoptional=r=>oD(e,r),e.array=()=>Zk(e),e.or=r=>Wk([e,r]),e.and=r=>Xk(e,r),e.transform=r=>ly(e,tD(r)),e.default=r=>rD(e,r),e.prefault=r=>iD(e,r),e.catch=r=>cD(e,r),e.pipe=r=>ly(e,r),e.readonly=()=>fD(e),e.describe=r=>{const i=e.clone();return Du.add(i,{description:r}),i},Object.defineProperty(e,"description",{get(){return Du.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Du.get(e);const i=e.clone();return Du.add(i,r[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Kw=Re("_ZodString",(e,t)=>{up.init(e,t),ts.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...i)=>e.check(HE(...i)),e.includes=(...i)=>e.check(ZE(...i)),e.startsWith=(...i)=>e.check(KE(...i)),e.endsWith=(...i)=>e.check(GE(...i)),e.min=(...i)=>e.check(td(...i)),e.max=(...i)=>e.check(Qw(...i)),e.length=(...i)=>e.check(Zw(...i)),e.nonempty=(...i)=>e.check(td(1,...i)),e.lowercase=i=>e.check(VE(i)),e.uppercase=i=>e.check(QE(i)),e.trim=()=>e.check(YE()),e.normalize=(...i)=>e.check(WE(...i)),e.toLowerCase=()=>e.check(XE()),e.toUpperCase=()=>e.check(JE())}),Ck=Re("ZodString",(e,t)=>{up.init(e,t),Kw.init(e,t),e.email=r=>e.check(xE(_k,r)),e.url=r=>e.check(jE(Ek,r)),e.jwt=r=>e.check(UE(Fk,r)),e.emoji=r=>e.check(SE(kk,r)),e.guid=r=>e.check(sy(ry,r)),e.uuid=r=>e.check(bE(Tu,r)),e.uuidv4=r=>e.check(vE(Tu,r)),e.uuidv6=r=>e.check(yE(Tu,r)),e.uuidv7=r=>e.check(wE(Tu,r)),e.nanoid=r=>e.check(NE(Dk,r)),e.guid=r=>e.check(sy(ry,r)),e.cuid=r=>e.check(CE(Tk,r)),e.cuid2=r=>e.check(_E(Ak,r)),e.ulid=r=>e.check(EE(Rk,r)),e.base64=r=>e.check(OE(qk,r)),e.base64url=r=>e.check(zE(Bk,r)),e.xid=r=>e.check(kE(Mk,r)),e.ksuid=r=>e.check(DE(Ok,r)),e.ipv4=r=>e.check(TE(zk,r)),e.ipv6=r=>e.check(AE(Lk,r)),e.cidrv4=r=>e.check(RE(Uk,r)),e.cidrv6=r=>e.check(ME($k,r)),e.e164=r=>e.check(LE(Pk,r)),e.datetime=r=>e.check(ak(r)),e.date=r=>e.check(ok(r)),e.time=r=>e.check(ck(r)),e.duration=r=>e.check(dk(r))});function Cr(e){return gE(Ck,e)}const wn=Re("ZodStringFormat",(e,t)=>{mn.init(e,t),Kw.init(e,t)}),_k=Re("ZodEmail",(e,t)=>{E_.init(e,t),wn.init(e,t)}),ry=Re("ZodGUID",(e,t)=>{C_.init(e,t),wn.init(e,t)}),Tu=Re("ZodUUID",(e,t)=>{__.init(e,t),wn.init(e,t)}),Ek=Re("ZodURL",(e,t)=>{k_.init(e,t),wn.init(e,t)}),kk=Re("ZodEmoji",(e,t)=>{D_.init(e,t),wn.init(e,t)}),Dk=Re("ZodNanoID",(e,t)=>{T_.init(e,t),wn.init(e,t)}),Tk=Re("ZodCUID",(e,t)=>{A_.init(e,t),wn.init(e,t)}),Ak=Re("ZodCUID2",(e,t)=>{R_.init(e,t),wn.init(e,t)}),Rk=Re("ZodULID",(e,t)=>{M_.init(e,t),wn.init(e,t)}),Mk=Re("ZodXID",(e,t)=>{O_.init(e,t),wn.init(e,t)}),Ok=Re("ZodKSUID",(e,t)=>{z_.init(e,t),wn.init(e,t)}),zk=Re("ZodIPv4",(e,t)=>{B_.init(e,t),wn.init(e,t)}),Lk=Re("ZodIPv6",(e,t)=>{P_.init(e,t),wn.init(e,t)}),Uk=Re("ZodCIDRv4",(e,t)=>{F_.init(e,t),wn.init(e,t)}),$k=Re("ZodCIDRv6",(e,t)=>{I_.init(e,t),wn.init(e,t)}),qk=Re("ZodBase64",(e,t)=>{H_.init(e,t),wn.init(e,t)}),Bk=Re("ZodBase64URL",(e,t)=>{Q_.init(e,t),wn.init(e,t)}),Pk=Re("ZodE164",(e,t)=>{Z_.init(e,t),wn.init(e,t)}),Fk=Re("ZodJWT",(e,t)=>{G_.init(e,t),wn.init(e,t)}),Ik=Re("ZodUnknown",(e,t)=>{W_.init(e,t),ts.init(e,t)});function ay(){return FE(Ik)}const Hk=Re("ZodNever",(e,t)=>{Y_.init(e,t),ts.init(e,t)});function Vk(e){return IE(Hk,e)}const Qk=Re("ZodArray",(e,t)=>{X_.init(e,t),ts.init(e,t),e.element=t.element,e.min=(r,i)=>e.check(td(r,i)),e.nonempty=r=>e.check(td(1,r)),e.max=(r,i)=>e.check(Qw(r,i)),e.length=(r,i)=>e.check(Zw(r,i)),e.unwrap=()=>e.element});function Zk(e,t){return ek(Qk,e,t)}const Kk=Re("ZodObject",(e,t)=>{eE.init(e,t),ts.init(e,t),rn(e,"shape",()=>t.shape),e.keyof=()=>Jk(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ay()}),e.loose=()=>e.clone({...e._zod.def,catchall:ay()}),e.strict=()=>e.clone({...e._zod.def,catchall:Vk()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>NC(e,r),e.safeExtend=r=>CC(e,r),e.merge=r=>_C(e,r),e.pick=r=>jC(e,r),e.omit=r=>SC(e,r),e.partial=(...r)=>EC(Gw,e,r[0]),e.required=(...r)=>kC(Ww,e,r[0])});function jd(e,t){const r={type:"object",shape:e??{},...ot(t)};return new Kk(r)}const Gk=Re("ZodUnion",(e,t)=>{tE.init(e,t),ts.init(e,t),e.options=t.options});function Wk(e,t){return new Gk({type:"union",options:e,...ot(t)})}const Yk=Re("ZodIntersection",(e,t)=>{nE.init(e,t),ts.init(e,t)});function Xk(e,t){return new Yk({type:"intersection",left:e,right:t})}const Cm=Re("ZodEnum",(e,t)=>{sE.init(e,t),ts.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(i,l)=>{const u={};for(const d of i)if(r.has(d))u[d]=t.entries[d];else throw new Error(`Key ${d} not found in enum`);return new Cm({...t,checks:[],...ot(l),entries:u})},e.exclude=(i,l)=>{const u={...t.entries};for(const d of i)if(r.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new Cm({...t,checks:[],...ot(l),entries:u})}});function Jk(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Cm({type:"enum",entries:r,...ot(t)})}const eD=Re("ZodTransform",(e,t)=>{rE.init(e,t),ts.init(e,t),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Ow(e.constructor.name);r.addIssue=u=>{if(typeof u=="string")r.issues.push(ec(u,r.value,t));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=r.value),d.inst??(d.inst=e),r.issues.push(ec(d))}};const l=t.transform(r.value,r);return l instanceof Promise?l.then(u=>(r.value=u,r)):(r.value=l,r)}});function tD(e){return new eD({type:"transform",transform:e})}const Gw=Re("ZodOptional",(e,t)=>{aE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iy(e){return new Gw({type:"optional",innerType:e})}const nD=Re("ZodNullable",(e,t)=>{iE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType});function oy(e){return new nD({type:"nullable",innerType:e})}const sD=Re("ZodDefault",(e,t)=>{oE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function rD(e,t){return new sD({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Uw(t)}})}const aD=Re("ZodPrefault",(e,t)=>{lE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iD(e,t){return new aD({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Uw(t)}})}const Ww=Re("ZodNonOptional",(e,t)=>{cE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType});function oD(e,t){return new Ww({type:"nonoptional",innerType:e,...ot(t)})}const lD=Re("ZodCatch",(e,t)=>{uE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function cD(e,t){return new lD({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const uD=Re("ZodPipe",(e,t)=>{dE.init(e,t),ts.init(e,t),e.in=t.in,e.out=t.out});function ly(e,t){return new uD({type:"pipe",in:e,out:t})}const dD=Re("ZodReadonly",(e,t)=>{fE.init(e,t),ts.init(e,t),e.unwrap=()=>e._zod.def.innerType});function fD(e){return new dD({type:"readonly",innerType:e})}const hD=Re("ZodCustom",(e,t)=>{hE.init(e,t),ts.init(e,t)});function mD(e,t={}){return tk(hD,e,t)}function pD(e){return nk(e)}function gD(){return yn({queryKey:Er.providers(),queryFn:({signal:e})=>_2({signal:e}),staleTime:6e5,retry:!1,refetchOnWindowFocus:!1})}const xD={info:"bg-brand-50 text-brand-700 ring-brand-100",success:"bg-success-50 text-success-700 ring-success-100",warning:"bg-warning-50 text-warning-700 ring-warning-100",danger:"bg-danger-50 text-danger-700 ring-danger-100"};function Lt({tone:e="info",heading:t,icon:r,className:i,children:l,...u}){return a.jsxs("div",{role:"status",className:te("flex w-full items-start gap-3 rounded-lg px-4 py-3 text-sm ring-1 ring-inset",xD[e],i),...u,children:[r?a.jsx("span",{"aria-hidden":"true",children:r}):null,a.jsxs("div",{className:"space-y-1",children:[t?a.jsx("p",{className:"font-semibold",children:t}):null,l?a.jsx("p",{className:"leading-relaxed",children:l}):null]})]})}function Pt({label:e,hint:t,error:r,required:i=!1,children:l,className:u}){const d=f.useId(),h=f.isValidElement(l)?l.props??{}:{},p=h.id??d,x=t?`${p}-hint`:void 0,v=r?`${p}-error`:void 0,b=[x,v,h["aria-describedby"]].filter(Boolean).join(" ")||void 0;return a.jsxs("div",{className:te("space-y-2",u),children:[e?a.jsxs("label",{htmlFor:p,className:"text-sm font-medium text-foreground","aria-required":i||void 0,children:[e,i?a.jsx("span",{className:"ml-1 text-danger-600","aria-hidden":"true",children:"*"}):null]}):null,f.isValidElement(l)?f.cloneElement(l,{id:p,required:i||h.required,"aria-describedby":b,"aria-invalid":r?!0:h["aria-invalid"]}):l,t?a.jsx("p",{id:x,className:"text-xs text-muted-foreground",children:t}):null,r?a.jsx("p",{id:v,className:"text-xs font-medium text-danger-600",children:r}):null]})}const Yw="block w-full rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground shadow-sm transition placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground",kt=f.forwardRef(({className:e,invalid:t=!1,...r},i)=>a.jsx("input",{ref:i,className:te(Yw,t&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":t||void 0,...r}));kt.displayName="Input";const bD=f.forwardRef(({className:e,invalid:t=!1,rows:r=4,...i},l)=>a.jsx("textarea",{ref:l,rows:r,className:te(Yw,"resize-y",t&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":t||void 0,...i}));bD.displayName="TextArea";const vD=jd({email:Cr().trim().min(1,"Enter your email address.").email("Enter a valid email address."),password:Cr().min(1,"Enter your password.")});function yD(e,t){const r=(e??"").trim();if(!r)return"#";if(!t)return r;const i=r.includes("?")?"&":"?";return`${r}${i}return_to=${encodeURIComponent(t)}`}function wD(){const e=es(),t=en(),r=Ft(),i=bw(),{session:l,isLoading:u,isError:d}=i,h=!l&&!u&&!d,p=np(h),x=gD(),b=(x.data?.providers??[]).filter(V=>V.type!=="password"),y=x.data?.force_sso??!1,S=x.isError&&!x.isFetching?"We couldn't load the list of providers. Refresh the page or continue with email.":null,j=f.useMemo(()=>{const V=new URLSearchParams(e.search);return Bo(V.get("redirectTo"))},[e.search]);f.useEffect(()=>{l&&t(Xu(l.return_to,j),{replace:!0})},[t,j,l]),f.useEffect(()=>{h&&(p.isPending||p.isError||p.data?.setup_required&&t(yw(j),{replace:!0}))},[t,j,p.data?.setup_required,p.isError,p.isPending,h]);const[C,_]=f.useState(null),[N,E]=f.useState(!1);if(f.useEffect(()=>{_(null)},[e.search]),u)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking your session"})});if(d)return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background px-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"We were unable to verify your session. Refresh the page to try again."}),a.jsx(Ae,{variant:"secondary",onClick:()=>i.refetch(),children:"Retry"})]});if(p.isPending&&h)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Preparing initial setup"})});if(p.isError&&h)return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background px-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"We were unable to check whether ADE is ready."}),a.jsx(Ae,{variant:"secondary",onClick:()=>p.refetch(),children:"Try again"})]});const D=async V=>{V.preventDefault(),_(null);const R=new FormData(V.currentTarget),A=Object.fromEntries(R.entries()),B=vD.safeParse(A);if(!B.success){const I=B.error.issues[0]?.message??"Invalid input.";_(I);return}const{email:T,password:K}=B.data,$=typeof A.redirectTo=="string"?A.redirectTo:null,q=Bo($);E(!0);try{const I=await k2({email:T,password:K});r.setQueryData(Er.detail(),I),t(Xu(I.return_to,q),{replace:!0})}catch(I){if(I instanceof Ht){const je=I.problem?.detail??I.message??"Unable to sign in.";_(je)}else I instanceof Error?_(I.message):_("Unable to sign in.")}finally{E(!1)}},U=!!C&&!N,z=x.isLoading||x.isFetching;return a.jsx("div",{className:"mx-auto flex min-h-screen flex-col justify-center bg-background px-6 py-16",children:a.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-border bg-card p-10 shadow-soft",children:[a.jsxs("header",{className:"space-y-2 text-center",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Welcome back"}),a.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Sign in to ADE"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email and password or continue with a connected provider."})]}),S?a.jsx(Lt,{tone:"warning",className:"mt-6",children:S}):null,z?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-muted"}),a.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-muted"})]}):b.length>0?a.jsx("div",{className:"mt-6 space-y-3",children:b.map(V=>a.jsxs("a",{href:yD(V.start_url,j),className:"flex w-full items-center justify-center rounded-lg border border-border-strong bg-card px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:["Continue with ",V.label]},V.id))}):null,y?a.jsx(Lt,{tone:"info",className:"mt-8",children:"Password sign-in is disabled for this deployment. Use one of the configured providers above."}):a.jsxs("form",{method:"post",className:"mt-8 space-y-6",onSubmit:D,children:[a.jsx("input",{type:"hidden",name:"redirectTo",value:j}),a.jsx(Pt,{label:"Email address",required:!0,children:a.jsx(kt,{id:"email",type:"email",autoComplete:"email",placeholder:"you@example.com",name:"email",disabled:N})}),a.jsx(Pt,{label:"Password",required:!0,children:a.jsx(kt,{id:"password",type:"password",autoComplete:"current-password",placeholder:"",name:"password",disabled:N})}),U?a.jsx(Lt,{tone:"danger",children:C}):null,a.jsx(Ae,{type:"submit",className:"w-full justify-center",isLoading:N,disabled:N,children:N?"Signing in":"Continue"})]})]})})}function jD(){const e=en(),t=es(),r=Ft(),[i,l]=f.useState(null);return f.useEffect(()=>{let u=!1;const d=new URLSearchParams(t.search),h=Bo(d.get("return_to")??d.get("redirectTo")??d.get("next"));async function p(){try{const x=await D2();if(u)return;r.setQueryData(Er.detail(),x);const v=Xu(null,h);e(v,{replace:!0})}catch(x){if(u)return;x instanceof Ht?l(x.problem?.detail??x.message):x instanceof Error?l(x.message):l("Unexpected callback error.")}}return p(),()=>{u=!0}},[t.search,e,r]),i?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(Dt,{title:"Unable to finish sign-in",description:i,variant:"error",action:a.jsx(Ae,{variant:"secondary",onClick:()=>e("/login",{replace:!0}),children:"Return to sign in"})})}):a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(Dt,{title:"Finishing sign-in",variant:"loading"})})}const SD=jd({displayName:Cr().min(1,"Display name is required."),email:Cr().min(1,"Email is required.").email("Enter a valid email address."),password:Cr().min(12,"Use at least 12 characters."),confirmPassword:Cr().min(1,"Confirm your password.")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match."});function ND(){const e=es(),t=en(),r=Ft(),i=np(!0),l=f.useMemo(()=>{const v=new URLSearchParams(e.search);return Bo(v.get("redirectTo"))},[e.search]);f.useEffect(()=>{i.isPending||i.isError||i.data?.setup_required||t(vw(l),{replace:!0})},[t,l,i.data?.setup_required,i.isError,i.isPending]);const[u,d]=f.useState(null),[h,p]=f.useState(!1);if(i.isPending)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading setup status"})});if(i.isError)return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background px-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"We couldn't check whether ADE requires initial setup."}),a.jsx(Ae,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})]});if(!i.data?.setup_required)return null;const x=async v=>{v.preventDefault(),d(null);const b=new FormData(v.currentTarget),y=Object.fromEntries(b.entries()),S=SD.safeParse(y);if(!S.success){const C=S.error.issues[0]?.message??"Invalid input.";d(C);return}p(!0);const j=Bo(y.redirectTo);try{const C=await $2({display_name:S.data.displayName,email:S.data.email,password:S.data.password});r.setQueryData(Er.detail(),C),t(Xu(C.return_to,j),{replace:!0})}catch(C){if(C instanceof Ht){const _=C.problem?.detail??C.message??"Setup failed. Try again.";d(_)}else C instanceof Error?d(C.message):d("Setup failed. Try again.")}finally{p(!1)}};return a.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col justify-center bg-background px-6 py-16",children:a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-10 shadow-soft",children:[a.jsxs("header",{className:"space-y-3 text-center",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"First-run configuration"}),a.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Create the first administrator"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide credentials for the inaugural administrator account. We'll redirect after completion."})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[a.jsx("input",{type:"hidden",name:"redirectTo",value:l}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(Pt,{label:"Display name",required:!0,children:a.jsx(kt,{id:"displayName",name:"displayName",placeholder:"Casey Operator",required:!0,disabled:h})}),a.jsx(Pt,{label:"Email",required:!0,children:a.jsx(kt,{id:"email",name:"email",type:"email",placeholder:"casey@example.com",required:!0,disabled:h})})]}),a.jsx(Pt,{label:"Password",hint:"Use at least 12 characters.",required:!0,children:a.jsx(kt,{id:"password",name:"password",type:"password",minLength:12,placeholder:"",required:!0,disabled:h})}),a.jsx(Pt,{label:"Confirm password",required:!0,children:a.jsx(kt,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:12,placeholder:"Re-enter your password",required:!0,disabled:h})}),u?a.jsx(Lt,{tone:"danger",children:u}):null,a.jsx("div",{className:"flex justify-end",children:a.jsx(Ae,{type:"submit",isLoading:h,disabled:h,children:h?"Creating administrator":"Create administrator"})})]})]})})}var Ts=H0();const CD=232,_D=30,Di=6;function kr({open:e,position:t,onClose:r,items:i,appearance:l="dark",onPointerLeave:u}){const d=f.useRef(null),h=f.useRef([]),[p,x]=f.useState(null),v=f.useMemo(()=>i.findIndex(j=>!j.disabled),[i]),[b,y]=f.useState(()=>v>=0?v:0);if(f.useEffect(()=>{if(!e||!t||typeof window>"u"){x(null);return}const j=i.length*_D+Di*2,C=Math.max(Di,(window.innerWidth||0)-CD-Di),_=Math.max(Di,(window.innerHeight||0)-j-Di),N=Math.min(Math.max(t.x,Di),C),E=Math.min(Math.max(t.y,Di),_);x({x:N,y:E})},[e,t,i.length]),f.useEffect(()=>{e&&y(v>=0?v:0)},[e,v]),f.useEffect(()=>{if(!e)return;h.current[b]?.focus()},[e,b]),f.useEffect(()=>{if(!e||typeof window>"u")return;const j=N=>{d.current&&(d.current.contains(N.target)||r())},C=N=>{if(d.current){if(d.current.contains(N.target)){N.preventDefault();return}r()}},_=N=>{if(N.key==="Escape"){N.preventDefault(),r();return}if(N.key==="ArrowDown"||N.key==="ArrowUp"){N.preventDefault();const E=N.key==="ArrowDown"?1:-1;y(D=>{if(i.length===0)return D;let U=D;for(let z=0;z<i.length;z+=1)if(U=(U+E+i.length)%i.length,!i[U]?.disabled)return U;return D});return}if(N.key==="Enter"||N.key===" "){N.preventDefault();const E=i[b];E&&!E.disabled&&(E.onSelect(),r())}};return window.addEventListener("mousedown",j),window.addEventListener("contextmenu",C),window.addEventListener("keydown",_),()=>{window.removeEventListener("mousedown",j),window.removeEventListener("contextmenu",C),window.removeEventListener("keydown",_)}},[e,r,i,b]),!e||!t||typeof window>"u"||!p)return null;const S=l==="dark"?{bg:"bg-popover text-foreground",border:"border-border/70",shadow:"shadow-[0_12px_28px_rgb(var(--sys-color-shadow)/0.5)]",item:"hover:bg-muted focus-visible:bg-muted",disabled:"text-muted-foreground",danger:"text-danger-300 hover:text-on-danger hover:bg-danger-600 focus-visible:bg-danger-600",shortcut:"text-muted-foreground",separator:"border-border/60"}:{bg:"bg-popover text-foreground",border:"border-border/80",shadow:"shadow-[0_12px_28px_rgb(var(--sys-color-shadow)/0.18)]",item:"hover:bg-muted focus-visible:bg-muted",disabled:"text-muted-foreground",danger:"text-danger-600 hover:text-on-danger hover:bg-danger-600 focus-visible:bg-danger-600",shortcut:"text-muted-foreground",separator:"border-border/70"};return Ts.createPortal(a.jsx("div",{ref:d,role:"menu",className:te("z-[60] min-w-[200px] rounded-sm border",S.bg,S.border,S.shadow),style:{top:p.y,left:p.x,position:"fixed"},onPointerLeave:u,children:a.jsx("ul",{className:"py-1",role:"none",children:i.map((j,C)=>{const _=!!j.disabled,N=!!j.danger;return a.jsxs(f.Fragment,{children:[j.dividerAbove?a.jsx("li",{role:"separator",className:te("mx-2 my-1 border-t",S.separator)}):null,a.jsx("li",{role:"none",children:a.jsxs("button",{ref:E=>{h.current[C]=E},type:"button",role:"menuitem",className:te("flex w-full items-center justify-between gap-6 px-3 py-1.5 text-[13px] leading-5 outline-none transition",S.item,_&&S.disabled,N&&!_&&S.danger,_&&"cursor-default"),onClick:E=>{E.stopPropagation(),!_&&(j.onSelect(),r())},onMouseEnter:()=>{_||(y(C),j.onHover?.())},disabled:_,children:[a.jsxs("span",{className:"flex min-w-0 items-center gap-3",children:[j.icon?a.jsx("span",{className:"text-base opacity-80",children:j.icon}):a.jsx("span",{className:"inline-block h-4 w-4"}),a.jsx("span",{className:"truncate",children:j.label})]}),j.shortcut?a.jsx("span",{className:te("text-[11px] uppercase tracking-wide",S.shortcut),children:j.shortcut}):null]})})]},j.id)})})}),window.document.body)}function $e({title:e,children:t,viewBox:r="0 0 20 20",fill:i="none",stroke:l="currentColor",strokeWidth:u=1.6,strokeLinecap:d="round",strokeLinejoin:h="round",...p}){const x=p["aria-label"],v=p["aria-labelledby"],b=!!(e||x||v),y=p["aria-hidden"]??(b?void 0:!0),S=p.role??(b?"img":"presentation"),j=p.focusable??!1;return a.jsxs("svg",{viewBox:r,fill:i,stroke:l,strokeWidth:u,strokeLinecap:d,strokeLinejoin:h,"aria-hidden":y,role:S,focusable:j,...p,children:[e?a.jsx("title",{children:e}):null,t]})}const Fe={viewBox:"0 0 24 24",strokeWidth:2},ED={viewBox:"0 0 16 16",strokeWidth:1.4},kD={viewBox:"0 0 10 10",strokeWidth:1.5};function dp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),a.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),a.jsx("path",{d:"M10 9H8"}),a.jsx("path",{d:"M16 13H8"}),a.jsx("path",{d:"M16 17H8"})]})}function Sd(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:11,cy:11,r:8}),a.jsx("path",{d:"m21 21-4.3-4.3"})]})}function Nd(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:12,x2:12,y1:3,y2:15})]})}function tc(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:12,x2:12,y1:15,y2:3})]})}function Xw(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:3,y:3,width:7,height:7,rx:1}),a.jsx("rect",{x:14,y:3,width:7,height:7,rx:1}),a.jsx("rect",{x:14,y:14,width:7,height:7,rx:1}),a.jsx("rect",{x:3,y:14,width:7,height:7,rx:1})]})}function DD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2}),a.jsx("path",{d:"M8 7v7"}),a.jsx("path",{d:"M12 7v4"}),a.jsx("path",{d:"M16 7v9"})]})}function Ws(e){return a.jsxs($e,{...Fe,...e,strokeWidth:2.25,children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})}function fp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M9 17H7A5 5 0 0 1 7 7h2"}),a.jsx("path",{d:"M15 7h2a5 5 0 1 1 0 10h-2"}),a.jsx("line",{x1:8,x2:16,y1:12,y2:12})]})}function hp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),a.jsx("line",{x1:10,x2:10,y1:11,y2:17}),a.jsx("line",{x1:14,x2:14,y1:11,y2:17})]})}function TD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M15 3h6v6"}),a.jsx("path",{d:"M10 14 21 3"}),a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"})]})}function Jw(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:1}),a.jsx("circle",{cx:19,cy:12,r:1}),a.jsx("circle",{cx:5,cy:12,r:1})]})}function Cd(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"}),a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),a.jsx("path",{d:"M8 16H3v5"})]})}function ej(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("line",{x1:21,x2:14,y1:4,y2:4}),a.jsx("line",{x1:10,x2:3,y1:4,y2:4}),a.jsx("line",{x1:21,x2:12,y1:12,y2:12}),a.jsx("line",{x1:8,x2:3,y1:12,y2:12}),a.jsx("line",{x1:21,x2:16,y1:20,y2:20}),a.jsx("line",{x1:12,x2:3,y1:20,y2:20}),a.jsx("line",{x1:14,x2:14,y1:2,y2:6}),a.jsx("line",{x1:8,x2:8,y1:10,y2:14}),a.jsx("line",{x1:16,x2:16,y1:18,y2:22})]})}function tj(e){return a.jsx($e,{...Fe,...e,children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}function mp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:12,cy:7,r:4})]})}function oi(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"m6 9 6 6 6-6"})})}function AD(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"m15 18-6-6 6-6"})})}function RD(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"m9 18 6-6-6-6"})})}function ri(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"M20 6 9 17l-5-5"})})}function pp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}),a.jsx("path",{d:"M12 9v4"}),a.jsx("path",{d:"M12 17h.01"})]})}function MD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:10}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]})}function OD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}),a.jsx("path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})]})}function zD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("line",{x1:4,x2:20,y1:12,y2:12}),a.jsx("line",{x1:4,x2:20,y1:6,y2:6}),a.jsx("line",{x1:4,x2:20,y1:18,y2:18})]})}function gp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"}),a.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"}),a.jsx("path",{d:"M12 2v2"}),a.jsx("path",{d:"M12 22v-2"}),a.jsx("path",{d:"m17 20.66-1-1.73"}),a.jsx("path",{d:"M11 10.27 7 3.34"}),a.jsx("path",{d:"m20.66 17-1.73-1"}),a.jsx("path",{d:"m3.34 7 1.73 1"}),a.jsx("path",{d:"M14 12h8"}),a.jsx("path",{d:"M2 12h2"}),a.jsx("path",{d:"m20.66 7-1.73 1"}),a.jsx("path",{d:"m3.34 17 1.73-1"}),a.jsx("path",{d:"m17 3.34-1 1.73"}),a.jsx("path",{d:"m11 13.73-4 6.93"})]})}function xp(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12 17v5"}),a.jsx("path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"})]})}function nj(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12 17v5"}),a.jsx("path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"}),a.jsx("path",{d:"m2 2 20 20"}),a.jsx("path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"})]})}function LD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M3 12h.01"}),a.jsx("path",{d:"M3 18h.01"}),a.jsx("path",{d:"M3 6h.01"}),a.jsx("path",{d:"M8 12h13"}),a.jsx("path",{d:"M8 18h13"}),a.jsx("path",{d:"M8 6h13"})]})}function UD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M20 7h-9"}),a.jsx("path",{d:"M14 17H5"}),a.jsx("circle",{cx:17,cy:17,r:3}),a.jsx("circle",{cx:7,cy:7,r:3})]})}function $D(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:10,opacity:.8}),a.jsx("path",{d:"M12 16v-4"}),a.jsx("path",{d:"M12 8h.01"})]})}function qD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:10,opacity:.8}),a.jsx("path",{d:"m9 12 2 2 4-4"})]})}function BD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:10,opacity:.8}),a.jsx("line",{x1:12,x2:12,y1:8,y2:12}),a.jsx("line",{x1:12,x2:12.01,y1:16,y2:16})]})}function PD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:10,opacity:.8}),a.jsx("path",{d:"m15 9-6 6"}),a.jsx("path",{d:"m9 9 6 6"})]})}function FD(e){return a.jsx($e,{...Fe,...e,stroke:"none",children:a.jsx("path",{d:"M17.5 0h-9L7 1.5V6H2.5L1 7.5v15.07L2.5 24h12.07L16 22.57V18h4.7l1.3-1.43V4.5L17.5 0zm0 2.12l2.38 2.38H17.5V2.12zm-3 20.38h-12v-15H7v9.07L8.5 18h6v4.5zm6-6h-12v-15H16V6h4.5v10.5z",fill:"currentColor"})})}function ID(e){return a.jsx($e,{...Fe,...e,stroke:"none",children:a.jsx("path",{d:"M21.007 8.222A3.738 3.738 0 0 0 15.045 5.2a3.737 3.737 0 0 0 1.156 6.583 2.988 2.988 0 0 1-2.668 1.67h-2.99a4.456 4.456 0 0 0-2.989 1.165V7.4a3.737 3.737 0 1 0-1.494 0v9.117a3.776 3.776 0 1 0 1.816.099 2.99 2.99 0 0 1 2.668-1.667h2.99a4.484 4.484 0 0 0 4.223-3.039 3.736 3.736 0 0 0 3.25-3.687zM4.565 3.738a2.242 2.242 0 1 1 4.484 0 2.242 2.242 0 0 1-4.484 0zm4.484 16.441a2.242 2.242 0 1 1-4.484 0 2.242 2.242 0 0 1 4.484 0zm8.221-9.715a2.242 2.242 0 1 1 0-4.485 2.242 2.242 0 0 1 0 4.485z",fill:"currentColor"})})}function HD(e){return a.jsx($e,{...Fe,...e,children:a.jsx("path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z"})})}function VD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2}),a.jsx("path",{d:"M9 3v18"})]})}function sj(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),a.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]})}function QD(e){return a.jsx($e,{...Fe,...e,children:a.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})})}function ZD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2}),a.jsx("path",{d:"M9 3v18"}),a.jsx("path",{d:"m16 15-3-3 3-3"})]})}function KD(e){return a.jsx($e,{...Fe,...e,children:a.jsx("path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"})})}function cy(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:8,y:8,width:14,height:14,rx:2,ry:2}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function bp(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"m6 9 6 6 6-6"})})}function GD(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"m18 15-6-6-6 6"})})}function rj(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),a.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),a.jsx("path",{d:"M9 15h6"}),a.jsx("path",{d:"M12 18v-6"})]})}function _m(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12 10v6"}),a.jsx("path",{d:"M9 13h6"}),a.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})]})}function WD(e){return a.jsxs($e,{viewBox:"0 0 16 16",strokeWidth:0,...e,stroke:"none",children:[a.jsx("path",{d:"M9 9H4v1h5V9z",fill:"currentColor"}),a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2V3zm1 2h4l1 1v4h2V3H6v2zm4 1H3v7h7V6z",fill:"currentColor"})]})}function uy(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),a.jsx("line",{x1:10,x2:10,y1:11,y2:17}),a.jsx("line",{x1:14,x2:14,y1:11,y2:17})]})}function YD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M13 12h8"}),a.jsx("path",{d:"M13 18h8"}),a.jsx("path",{d:"M13 6h8"}),a.jsx("path",{d:"M3 12h1"}),a.jsx("path",{d:"M3 18h1"}),a.jsx("path",{d:"M3 6h1"}),a.jsx("path",{d:"M8 12h1"}),a.jsx("path",{d:"M8 18h1"}),a.jsx("path",{d:"M8 6h1"})]})}function XD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12 17V3"}),a.jsx("path",{d:"m6 11 6 6 6-6"}),a.jsx("path",{d:"M19 21H5"})]})}function JD(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("polyline",{points:"4 17 10 11 4 5"}),a.jsx("line",{x1:12,x2:20,y1:19,y2:19})]})}function eT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),a.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),a.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),a.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]})}function tT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:8,y:8,width:14,height:14,rx:2,ry:2}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function nT(e){return a.jsx($e,{...Fe,...e,strokeWidth:2.25,children:a.jsx("path",{d:"M5 12h14"})})}function aj(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),a.jsx("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),a.jsx("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})]})}function sT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M10 2v3a1 1 0 0 0 1 1h5"}),a.jsx("path",{d:"M18 18v-6a1 1 0 0 0-1-1h-6a1 1 0 0 0-1 1v6"}),a.jsx("path",{d:"M18 22H4a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9.172a2 2 0 0 1 1.414.586l2.828 2.828A2 2 0 0 1 22 6.828V16a2 2 0 0 1-2.01 2z"})]})}function rT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("line",{x1:12,x2:18,y1:12,y2:18}),a.jsx("line",{x1:12,x2:18,y1:18,y2:12}),a.jsx("rect",{x:8,y:8,width:14,height:14,rx:2,ry:2}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function aT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M3 5v14"}),a.jsx("path",{d:"M21 12H7"}),a.jsx("path",{d:"m15 18 6-6-6-6"})]})}function iT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),a.jsx("path",{d:"m15 9-6 6"}),a.jsx("path",{d:"m9 9 6 6"})]})}function oT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12 3v18"}),a.jsx("path",{d:"M3 12h18"}),a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2})]})}function lT(e){return a.jsx($e,{...Fe,...e,children:a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2})})}function cT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),a.jsx("path",{d:"m15 9-6 6"}),a.jsx("path",{d:"m9 9 6 6"})]})}function uT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("circle",{cx:12,cy:12,r:1}),a.jsx("circle",{cx:19,cy:12,r:1}),a.jsx("circle",{cx:5,cy:12,r:1})]})}function Hl(e){return a.jsxs($e,{...e,viewBox:"0 0 24 24",strokeWidth:2.4,children:[a.jsx("circle",{cx:12,cy:12,r:9,opacity:.2}),a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})]})}function dT(e){return a.jsxs($e,{...ED,...e,strokeWidth:1.6,children:[a.jsx("circle",{cx:8,cy:8,r:6,opacity:.3}),a.jsx("path",{d:"M14 8a6 6 0 0 0-6-6"})]})}function Em(e){return a.jsx($e,{...Fe,...e,stroke:"none",children:a.jsx("polygon",{points:"6 3 20 12 6 21 6 3",fill:"currentColor"})})}function fT({filled:e,className:t}){const r={viewBox:"0 0 24 24",strokeWidth:2.1};return a.jsx($e,{...r,className:t,stroke:e?"none":void 0,children:e?a.jsxs("g",{children:[a.jsx("path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",fill:"currentColor"}),a.jsx("rect",{x:"11.1",y:"17",width:"1.8",height:"5",rx:"0.9",fill:"currentColor"})]}):a.jsxs("g",{children:[a.jsx("path",{d:"M12 17v5"}),a.jsx("path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"})]})})}function hT(e){return a.jsx($e,{...kD,...e,children:a.jsx("path",{d:"M3 1l4 4-4 4"})})}function mT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5v14"})]})}function pT(e){return a.jsx($e,{...Fe,...e,children:a.jsx("path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"})})}function gT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),a.jsx("circle",{cx:12,cy:12,r:3})]})}function xT(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}),a.jsx("circle",{cx:7.5,cy:7.5,r:".5",fill:"currentColor"})]})}function ij(e){return a.jsx($e,{...Fe,...e,children:a.jsx("path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"})})}function oj(e){return a.jsxs($e,{...Fe,...e,children:[a.jsx("path",{d:"M9 13h6"}),a.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})]})}const bT=8;function lj({className:e,tone:t="default"}){const{theme:r,modePreference:i,resolvedMode:l,setModePreference:u,setPreviewTheme:d,setTheme:h}=Xm(),p=f.useRef(null),[x,v]=f.useState(!1),[b,y]=f.useState(null),S=t==="header",j=f.useCallback(()=>{if(!p.current)return;const N=p.current.getBoundingClientRect();y({x:N.left,y:N.bottom+bT})},[]),C=f.useCallback(()=>{v(!1),d(null)},[d]);f.useEffect(()=>{if(!x){d(null);return}j();const N=()=>j();return window.addEventListener("resize",N),window.addEventListener("scroll",N,!0),()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0)}},[x,d,j]);const _=f.useMemo(()=>{const N=lw.map(D=>({id:`mode-${D.value}`,label:`${D.label} mode`,onSelect:()=>{u(D.value),C()},icon:i===D.value?a.jsx(ri,{className:"h-3.5 w-3.5 text-brand-500"}):void 0})),E=cw.map((D,U)=>({id:`theme-${D.id}`,label:D.label,onSelect:()=>{h(D.id),C()},onHover:()=>d(D.id),icon:r===D.id?a.jsx(ri,{className:"h-3.5 w-3.5 text-brand-500"}):void 0,dividerAbove:U===0}));return[...N,...E]},[C,i,u,d,h,r]);return a.jsxs("div",{className:te("relative",e),children:[a.jsxs("button",{ref:p,type:"button","aria-haspopup":"menu","aria-expanded":x,"aria-label":"Appearance settings",title:"Appearance",className:te("focus-ring inline-flex h-9 items-center gap-2 rounded-xl border px-2.5 text-xs transition",S?"border-header-border/40 bg-header/25 text-header-foreground shadow-none hover:border-header-border/70 hover:bg-header/30":"border-border/80 bg-card text-muted-foreground shadow-sm hover:border-border-strong hover:text-foreground",x&&(S?"border-header-ring ring-2 ring-header-ring/30":"border-brand-400 ring-2 ring-brand-500/10 text-foreground")),onClick:()=>v(N=>!N),onKeyDown:N=>{(N.key==="ArrowDown"||N.key==="Enter"||N.key===" ")&&(N.preventDefault(),v(!0))},children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:"rgb(var(--sys-color-accent))"},"aria-hidden":!0}),a.jsx(ej,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Appearance"}),a.jsx(oi,{className:te("h-3.5 w-3.5 transition",x&&"rotate-180")})]}),a.jsx(kr,{open:x,position:b,onClose:C,items:_,appearance:l,onPointerLeave:()=>d(null)})]})}function cj({id:e,value:t,defaultValue:r="",placeholder:i="Search",ariaLabel:l,shortcutHint:u="K",shortcutKey:d="k",enableShortcut:h=!0,scopeLabel:p,leadingIcon:x,trailingIcon:v,className:b,variant:y="default",isLoading:S=!1,loadingLabel:j="Loading suggestions",filters:C,onSelectFilter:_,emptyState:N,onChange:E,onSubmit:D,onClear:U,onFocus:z,onBlur:V,suggestions:R=[],onSelectSuggestion:A,renderSuggestion:B}){const T=f.useId(),K=e??T,$=`${T}-suggestions`,q=f.useRef(null),I=f.useRef(null),je=t!==void 0,[M,H]=f.useState(r),[ee,be]=f.useState(!1),de=f.useRef(!1),[L,W]=f.useState(0),pe=je?t??"":M,G=R.length>0,ie=!!C?.length,J=ee&&(G||S||!!N||ie),ne=ee&&!G&&!S&&!!N,oe=!!(U||!je),he=u||"K",ue=l??i,Oe=()=>{de.current&&(de.current=!1,be(!1),V?.())};f.useEffect(()=>{je||H(r)},[r,je]),f.useEffect(()=>{W(0)},[R.length,pe]),f.useEffect(()=>{if(!h||typeof window>"u")return;const me=De=>{if((De.metaKey||De.ctrlKey)&&De.key.toLowerCase()===d.toLowerCase()){const ye=De.target;if(!!!(ye&&ye instanceof Node&&q.current?.contains(ye))&&yT(ye))return;De.preventDefault(),I.current?.focus({preventScroll:!0})}};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[h,d]);const Ge=me=>{me.preventDefault();const De=pe.trim();!De&&!D||D?.(De)},Se=me=>{je||H(me),E?.(me)},ze=()=>{pe&&(je||H(""),E?.(""),U?.(),I.current?.focus({preventScroll:!0}))},Pe=me=>{if(!me)return;A?.(me),me.action?.(),Oe();const De=document.activeElement;De&&q.current?.contains(De)&&De.blur()},Me=me=>{if(me.key==="Escape"){me.preventDefault(),Oe(),me.currentTarget.blur();return}if(!(!J||!G)){if(me.key==="ArrowDown"){me.preventDefault(),W(De=>(De+1)%R.length);return}if(me.key==="ArrowUp"){me.preventDefault(),W(De=>(De-1+R.length)%R.length);return}me.key==="Enter"&&(me.preventDefault(),Pe(R[L]))}},Be=y==="header",We=Be?te("rounded-2xl border border-header-border/40 bg-header/20 text-header-foreground backdrop-blur-sm","shadow-none ring-1 ring-inset ring-header-border/30 transition","focus-within:border-header-ring focus-within:bg-header/30 focus-within:ring-header-ring/40"):y==="minimal"?te("rounded-xl border border-border bg-card/90 shadow-sm ring-1 ring-inset ring-border/40","transition focus-within:border-brand-400 focus-within:shadow-[0_18px_45px_-35px_rgb(var(--sys-color-shadow)/0.4)]"):te("rounded-xl border border-border/70 bg-gradient-to-r from-card/95 via-muted/80 to-card/95","shadow-[0_20px_45px_-30px_rgb(var(--sys-color-shadow)/0.6)] ring-1 ring-inset ring-border/30 transition","focus-within:border-brand-400 focus-within:shadow-[0_25px_55px_-35px_rgb(var(--sys-color-shadow)/0.55)] sm:rounded-2xl"),st=Be?"text-header-muted":"text-muted-foreground",P=Be?"text-header-foreground placeholder:text-header-muted":"text-foreground placeholder:text-muted-foreground",F=Be?"border-header-border/40 bg-header/30 text-header-foreground":"border-border/70 bg-card/80 text-muted-foreground",X=Be?"lg:inline-flex":"md:inline-flex",Te=Be?"text-header-muted hover:border-header-border/50 hover:bg-header/20":"text-muted-foreground hover:border-border hover:bg-card",_e=Be?"bg-header/30 text-header-foreground ring-header-border/40":"bg-card text-brand-600 ring-border/40";return a.jsxs("div",{ref:q,className:te("relative",b),onFocusCapture:()=>{de.current||(de.current=!0,be(!0),z?.())},onBlurCapture:()=>{requestAnimationFrame(()=>{const me=q.current,De=document.activeElement;!!(me&&De&&me.contains(De))||Oe()})},onKeyDownCapture:me=>{if(me.key==="Escape"){me.preventDefault(),Oe();const De=document.activeElement;De&&q.current?.contains(De)&&De.blur()}},children:[a.jsx("div",{className:te("group/search overflow-hidden",We,J&&y==="default"&&"focus-within:shadow-[0_35px_80px_-40px_rgb(var(--sys-color-shadow)/0.55)]"),children:a.jsxs("form",{className:te("flex w-full items-center gap-3 px-4 py-2 text-sm sm:px-5 sm:py-2.5",st),role:"search","aria-label":ue,onSubmit:Ge,children:[a.jsx("label",{htmlFor:K,className:"sr-only",children:ue}),x??a.jsx("span",{className:te("inline-flex h-9 w-9 items-center justify-center rounded-xl shadow-inner shadow-white/10 ring-1 ring-inset sm:h-10 sm:w-10",_e),children:a.jsx(Sd,{className:te("h-4 w-4 flex-shrink-0",Be?"text-header-foreground":"text-brand-600")})}),a.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[p?a.jsx("span",{className:te("text-[0.6rem] font-semibold uppercase tracking-wide sm:text-[0.65rem]",Be?"text-header-muted":"text-muted-foreground"),children:p}):null,a.jsx("input",{ref:I,id:K,type:"search",value:pe,onChange:me=>Se(me.target.value),role:"combobox","aria-autocomplete":"list","aria-haspopup":"listbox",onKeyDown:Me,placeholder:i,className:te("w-full border-0 bg-transparent text-base font-medium focus:outline-none",P),"aria-expanded":J,"aria-controls":J?$:void 0,"aria-activedescendant":J&&G?`${$}-option-${L}`:void 0})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[oe&&pe?a.jsx("button",{type:"button",onClick:ze,"aria-label":"Clear search",className:te("focus-ring inline-flex h-7 w-7 items-center justify-center rounded-full border border-transparent",Te),children:a.jsx(Ws,{className:"h-3.5 w-3.5"})}):null,S?a.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center","aria-live":"polite","aria-label":j,children:a.jsx(Hl,{className:"h-4 w-4 animate-spin text-brand-600"})}):null,v,a.jsx("span",{className:te("hidden items-center gap-1 rounded-full border px-2 py-1 text-xs font-semibold shadow-inner shadow-white/10",F,X),children:he})]})]})}),J?a.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-2 overflow-hidden rounded-2xl border border-border/70 bg-popover shadow-[0_35px_80px_-40px_rgb(var(--sys-color-shadow)/0.55)] ring-1 ring-inset ring-border/30",children:[G?a.jsx("ul",{id:$,role:"listbox","aria-label":"Search suggestions",className:"divide-y divide-border/60",children:R.map((me,De)=>{const ye=De===L,ke=B?.({suggestion:me,active:ye})??a.jsx(vT,{suggestion:me,active:ye});return a.jsx("li",{children:a.jsx("button",{id:`${$}-option-${De}`,type:"button",role:"option","aria-selected":ye,onMouseEnter:()=>W(De),onClick:()=>Pe(me),className:te("flex w-full px-5 py-3 text-left transition",ye?"bg-brand-500/10":"hover:bg-muted"),children:ke})},me.id)})}):null,ne?a.jsx("div",{className:"px-5 py-4 text-sm text-muted-foreground",role:"status",children:N}):null,ie?a.jsx("div",{className:"border-t border-border/60 bg-muted/60 px-4 py-2.5",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-muted-foreground",children:[a.jsx("span",{className:"uppercase tracking-wide text-[0.6rem] text-muted-foreground",children:"Filters:"}),C?.map(me=>a.jsx("button",{type:"button",onClick:()=>_?.(me),className:te("focus-ring inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-semibold transition",me.active?"border-brand-400 bg-brand-500/10 text-brand-600":"border-border bg-card text-muted-foreground hover:border-border-strong"),children:me.label},me.id))]})}):null]}):null]})}function vT({suggestion:e,active:t}){return a.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.icon?a.jsx("span",{className:"mt-0.5 text-muted-foreground",children:e.icon}):a.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-border","aria-hidden":!0}),a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-foreground",children:e.label}),e.shortcutHint?a.jsx("span",{className:"rounded border border-border bg-card px-1.5 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-muted-foreground",children:e.shortcutHint}):null]}),e.description?a.jsx("span",{className:te("text-xs",t?"text-brand-600":"text-muted-foreground"),children:e.description}):null]})]})}function yT(e){if(!e||!(e instanceof HTMLElement))return!1;const t=e.tagName.toLowerCase();return!!(t==="input"||t==="textarea"||t==="select"||e.isContentEditable||e.closest?.("[contenteditable='true']"))}function uj({brand:e,leading:t,actions:r,trailing:i,search:l,secondaryContent:u,scrollContainer:d}){const[h,p]=f.useState(!1);f.useEffect(()=>{if(typeof window>"u")return;let b=!1;const y=d??window,S=()=>y===window?window.scrollY:y.scrollTop,j=()=>{b=!1;const _=S()>0;p(N=>N===_?N:_)},C=()=>{b||(b=!0,window.requestAnimationFrame(j))};return j(),y.addEventListener("scroll",C,{passive:!0}),()=>y.removeEventListener("scroll",C)},[d]);const x=!!l,v=l?{...l,variant:l.variant??"header",className:te("w-full col-span-2 row-start-2 xl:col-span-1 xl:row-start-1 xl:col-start-2 xl:justify-self-center xl:max-w-[42rem]",l.className)}:void 0;return a.jsxs("header",{className:te("sticky top-0 z-50","border-b border-header-border","bg-header text-header-foreground","transition-shadow duration-200 motion-reduce:transition-none",h?"shadow-[0_12px_40px_-30px_rgb(var(--sys-color-shadow)/0.45)]":"shadow-none"),style:{"--focus-ring-offset":"rgb(var(--sys-color-header-bg) / 1)"},role:"banner",children:[a.jsx("a",{href:"#main-content",className:te("sr-only","focus:not-sr-only focus:absolute focus:left-4 focus:top-3 focus:z-[60]","rounded-lg border border-header-border bg-card px-3 py-2 text-sm font-semibold text-foreground shadow","focus:outline-none focus:ring-2 focus:ring-header-ring focus:ring-offset-2 focus:ring-offset-header"),children:"Skip to content"}),a.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3 sm:px-6 lg:px-10",children:[a.jsxs("div",{className:te("grid min-h-[3.5rem] w-full items-center gap-3 sm:gap-4",x?"grid-cols-[minmax(0,1fr)_auto] xl:grid-cols-[auto_minmax(0,1fr)_auto] xl:gap-8":"grid-cols-[minmax(0,1fr)_auto]"),children:[a.jsxs("div",{className:"col-start-1 row-start-1 flex w-full min-w-0 items-center gap-3",children:[e,t]}),v?a.jsx(cj,{...v}):null,a.jsxs("div",{className:te("col-start-2 row-start-1 flex flex-wrap items-center justify-end gap-2",x&&"xl:col-start-3 xl:row-start-1"),children:[r,i]})]}),u?a.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u}):null]})]})}const wT=140,jT=288,ST=8,Eo=12;function dj({displayName:e,email:t,actions:r=[],tone:i="default"}){const l=f.useId(),[u,d]=f.useState(!1),[h,p]=f.useState(!1),[x,v]=f.useState(!1),[b,y]=f.useState(null),[S,j]=f.useState(!1),C=f.useRef(null),_=f.useRef(null),N=en(),E=f.useMemo(()=>NT(e||t),[e,t]),D=i==="header",U=f.useCallback(T=>{d(!1),T?.restoreFocus&&requestAnimationFrame(()=>C.current?.focus({preventScroll:!0}))},[]),z=f.useCallback(()=>{if(typeof window>"u"||!C.current)return;const T=C.current.getBoundingClientRect(),K=_.current?.offsetWidth??jT,$=_.current?.offsetHeight??0,q=Math.max(Eo,window.innerWidth-K-Eo),I=Math.max(Eo,window.innerHeight-$-Eo);let je=T.right-K,M=T.bottom+ST;je=Math.min(Math.max(je,Eo),q),M=Math.min(Math.max(M,Eo),I),y({top:M,left:je})},[]);f.useEffect(()=>{if(u){p(!0);const K=window.requestAnimationFrame(()=>{z(),v(!0)});return()=>window.cancelAnimationFrame(K)}v(!1),y(null);const T=window.setTimeout(()=>p(!1),wT);return()=>window.clearTimeout(T)},[u,z]),f.useEffect(()=>{if(!u)return;const T=()=>z();return window.addEventListener("resize",T),window.addEventListener("scroll",T,!0),()=>{window.removeEventListener("resize",T),window.removeEventListener("scroll",T,!0)}},[u,z]),f.useEffect(()=>{if(!u)return;const T=$=>{const q=$.target;q&&(_.current?.contains(q)||C.current?.contains(q)||U())},K=$=>{$.key==="Escape"&&U({restoreFocus:!0})};return window.addEventListener("pointerdown",T,{passive:!0}),window.addEventListener("keydown",K),()=>{window.removeEventListener("pointerdown",T),window.removeEventListener("keydown",K)}},[U,u]),f.useEffect(()=>{u&&requestAnimationFrame(()=>{_.current?.querySelector("button[data-menu-item]")?.focus({preventScroll:!0})})},[u]);const V=f.useCallback(T=>{U(),T()},[U]),R=f.useCallback(async()=>{S||(U(),j(!0),N("/logout",{replace:!0}))},[U,S,N]),A=T=>{const K=Array.from(_.current?.querySelectorAll("button[data-menu-item]")??[]);if(K.length===0)return;const $=(T%K.length+K.length)%K.length;K[$]?.focus({preventScroll:!0})},B=T=>{const K=Array.from(_.current?.querySelectorAll("button[data-menu-item]")??[]);if(K.length===0)return;const $=document.activeElement,q=$?K.indexOf($):-1,I=q===-1?0:q+T;A(I)};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{ref:C,type:"button",className:te("focus-ring inline-flex items-center gap-3 rounded-xl border px-2.5 py-1.5 text-left text-sm font-semibold transition",D?"border-header-border/40 bg-header/25 text-header-foreground shadow-none hover:border-header-border/70 hover:bg-header/30":"border-border bg-card text-muted-foreground shadow-sm hover:border-border-strong hover:text-foreground",u&&(D?"border-header-ring ring-2 ring-header-ring/30":"border-brand-400 ring-2 ring-brand-500/10")),"aria-haspopup":"menu","aria-controls":l,"aria-expanded":u,onClick:()=>d(T=>!T),onKeyDown:T=>{(T.key==="ArrowDown"||T.key==="Enter"||T.key===" ")&&(T.preventDefault(),d(!0))},children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-sm font-semibold text-on-brand shadow-sm",children:E}),a.jsxs("span",{className:"hidden min-w-0 flex-col xl:flex",children:[a.jsx("span",{className:te("truncate text-sm font-semibold",D?"text-header-foreground":"text-foreground"),children:e}),a.jsx("span",{className:te("truncate text-xs",D?"text-header-muted":"text-muted-foreground"),children:t})]}),a.jsx(oi,{className:te("h-4 w-4 transition-transform duration-150",D?"text-header-muted":"text-muted-foreground",u&&"rotate-180")})]}),h&&typeof document<"u"?Ts.createPortal(a.jsxs("div",{ref:_,id:l,role:"menu",tabIndex:-1,className:te("fixed w-72 origin-top-right rounded-xl border border-border bg-popover p-2 text-sm shadow-2xl ring-1 ring-border/50","isolate","transition-[opacity,transform] duration-150 ease-out motion-reduce:transition-none",x?"opacity-100 translate-y-0 scale-100":"pointer-events-none opacity-0 -translate-y-1 scale-[0.98]"),style:b?{top:b.top,left:b.left,position:"fixed",zIndex:90,backgroundColor:"rgb(var(--sys-color-surface-elevated))"}:{top:0,left:0,visibility:"hidden"},onKeyDown:T=>{if(T.key==="ArrowDown"){T.preventDefault(),B(1);return}if(T.key==="ArrowUp"){T.preventDefault(),B(-1);return}if(T.key==="Home"){T.preventDefault(),A(0);return}if(T.key==="End"){T.preventDefault(),A(Number.MAX_SAFE_INTEGER);return}T.key==="Escape"&&(T.preventDefault(),U({restoreFocus:!0}))},children:[a.jsxs("div",{className:"px-2 pb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Signed in as"}),a.jsx("p",{className:"truncate text-xs text-muted-foreground",children:t})]}),a.jsx("ul",{className:"space-y-1",role:"none",children:r.map(T=>a.jsx("li",{role:"none",children:a.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm font-medium text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",onClick:()=>V(T.onSelect),children:[a.jsx("span",{className:"inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-muted text-xs font-semibold text-muted-foreground",children:T.icon??T.label.charAt(0).toUpperCase()}),a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate",children:T.label}),T.description?a.jsx("span",{className:"truncate text-xs font-normal text-muted-foreground",children:T.description}):null]})]})},T.id))}),a.jsx("div",{className:"mt-3 border-t border-border pt-3",children:a.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"focus-ring flex w-full items-center justify-between gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm font-semibold text-muted-foreground transition hover:border-brand-400 hover:text-brand-600 disabled:cursor-not-allowed disabled:opacity-60",onClick:R,disabled:S,children:[a.jsx("span",{children:"Sign out"}),S?a.jsx(Hl,{className:"h-4 w-4 animate-spin text-brand-600"}):null]})})]}),document.body):null]})}function NT(e){const t=e.split(" ").map(r=>r.trim()).filter(Boolean);return t.length===0?"":t.length===1?t[0].charAt(0).toUpperCase():`${t[0].charAt(0)}${t[t.length-1].charAt(0)}`.toUpperCase()}const CT="1.6.4",_T=CT.trim(),ET=_T||"unknown";async function kT(e={}){const{data:t}=await Ve.GET("/api/v1/system/safeMode",{signal:e.signal}),r=t??{},i=!!r.enabled,l=typeof r.detail=="string"&&r.detail.trim().length>0?r.detail.trim():fj;return{enabled:i,detail:l}}async function DT(e={}){const{data:t}=await Ve.GET("/api/v1/meta/versions",{signal:e.signal}),r=t??{};return{ade_api:dy(r.ade_api),ade_engine:dy(r.ade_engine)}}const fj="ADE safe mode enabled; skipping engine execution until ADE_SAFE_MODE is disabled.";function dy(e){return typeof e=="string"&&e.trim().length>0?e.trim():"unknown"}const fy=["system","safeMode"],hy=["system","versions"];function TT(){const t=Ft().getQueryData(fy);return yn({queryKey:fy,queryFn:({signal:r})=>kT({signal:r}),initialData:t,staleTime:3e4,refetchInterval:6e4})}function AT(e={}){const r=Ft().getQueryData(hy);return yn({queryKey:hy,queryFn:({signal:i})=>DT({signal:i}),initialData:r,staleTime:300*1e3,enabled:e.enabled??!0})}function hj({open:e,onClose:t}){const r=f.useRef(null),i=f.useRef(null),l=AT({enabled:e}),u=l.isError,d=l.data?.ade_api??(l.isPending?"Loading...":"unknown"),h=l.data?.ade_engine??(l.isPending?"Loading...":"unknown");if(f.useEffect(()=>{if(!e)return;const x=v=>{v.key==="Escape"&&t()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,t]),f.useEffect(()=>{if(!e)return;const{body:x}=document,v=x.style.overflow;return x.style.overflow="hidden",()=>{x.style.overflow=v}},[e]),f.useEffect(()=>{e&&i.current?.focus({preventScroll:!0})},[e]),typeof document>"u"||!e)return null;const p=a.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-overlay/60 px-4",role:"presentation",onMouseDown:x=>{x.target===x.currentTarget&&t()},children:a.jsxs("div",{ref:r,role:"dialog","aria-modal":"true","aria-labelledby":"about-versions-heading",className:"w-full max-w-xl rounded-2xl border border-border/80 bg-card p-6 shadow-2xl",children:[a.jsxs("header",{className:"mb-6 flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"About"}),a.jsx("h2",{id:"about-versions-heading",className:"text-xl font-semibold text-foreground",children:"ADE versions"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Installed versions for this ADE deployment across the web UI and backend runtime."})]}),a.jsx(Ae,{ref:i,variant:"ghost",size:"sm",onClick:t,children:"Close"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Jh,{label:"ade-web",value:ET,hint:"Frontend build"}),a.jsx(Jh,{label:"ade-api",value:d,hint:"Backend service"}),a.jsx(Jh,{label:"ade-engine",value:h,hint:"Engine runtime"})]}),u?a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx(Lt,{tone:"warning",heading:"Backend versions unavailable",children:"Could not load backend versions. Check connectivity and try again."}),a.jsx(Ae,{size:"sm",variant:"secondary",onClick:()=>l.refetch(),children:"Retry"})]}):null]})});return Ts.createPortal(p,document.body)}function Jh({label:e,value:t,hint:r}){return a.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl border border-border/70 bg-muted px-4 py-3",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("span",{className:"text-xs text-muted-foreground",children:r})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("code",{className:"rounded bg-foreground px-2.5 py-1 text-xs font-mono text-background shadow-sm",children:t})})]})}function mj({children:e,sidePanel:t,actions:r,search:i}){const l=Pi(),u=en(),[d,h]=f.useState(!1),p=l.user.display_name||l.user.email||"Signed in",x=l.user.email??"";return a.jsxs(a.Fragment,{children:[a.jsx(hj,{open:d,onClose:()=>h(!1)}),a.jsxs("div",{className:"flex min-h-screen flex-col bg-background text-foreground",children:[a.jsx(uj,{brand:a.jsxs("button",{type:"button",onClick:()=>u("/workspaces"),className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-header-border/40 bg-header/20 px-3 py-2 text-left text-sm font-semibold text-header-foreground transition hover:border-header-border/70 hover:bg-header/30",children:[a.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-on-brand shadow-sm",children:a.jsx(OD,{className:"h-5 w-5","aria-hidden":!0})}),a.jsxs("span",{className:"flex flex-col leading-tight",children:[a.jsx("span",{className:"text-sm font-semibold text-header-foreground",children:"Workspace directory"}),a.jsx("span",{className:"text-xs text-header-muted",children:"Automatic Data Extractor"})]})]}),search:i,actions:r?a.jsx("div",{className:"flex min-w-0 flex-wrap items-center gap-2",children:r}):void 0,trailing:a.jsxs("div",{className:"flex min-w-0 flex-wrap items-center gap-2",children:[a.jsx(lj,{tone:"header"}),a.jsx(dj,{displayName:p,email:x,tone:"header",actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>h(!0)}]})]})}),a.jsx("main",{id:"main-content",tabIndex:-1,className:"flex flex-1 overflow-y-auto",children:a.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:a.jsxs("div",{className:`grid gap-6 ${t?"lg:grid-cols-[minmax(0,1fr)_280px]":""}`,children:[a.jsx("div",{children:e}),t?a.jsx("aside",{className:"space-y-6",children:t}):null]})})})]})]})}const RT="K",MT="Ctrl+K";function pj({macLabel:e=RT,windowsLabel:t=MT}={}){const[r,i]=f.useState(e);return f.useEffect(()=>{if(typeof window>"u")return;const l=window.navigator.platform??"",u=/Mac|iPhone|iPad|Macintosh/.test(l);i(u?e:t)},[e,t]),r}function OT(){return a.jsx(cc,{children:a.jsx(zT,{})})}function zT(){const e=en(),t=Pi(),r=md(),i=Dw(),[l,u]=f.useState(null),[d,h]=f.useState(null),p=f.useMemo(()=>(t.user.permissions??[]).map($=>$.toLowerCase()),[t.user.permissions]),x=p.includes("workspaces.create")||p.includes("workspaces.manage_all"),[v,b]=f.useState(""),y=pj(),S=r.data,j=f.useMemo(()=>S?.items??[],[S?.items]),C=v.trim().toLowerCase(),_=f.useMemo(()=>C?j.filter($=>{const q=$.name.toLowerCase(),I=$.slug?.toLowerCase()??"";return q.includes(C)||I.includes(C)}):j,[j,C]),N=f.useCallback($=>e(rp($)),[e]),E=x?a.jsx(Ae,{variant:"primary",onClick:()=>e("/workspaces/new"),children:"Create workspace"}):void 0,D=f.useCallback(()=>{if(!C)return;const $=_[0];$&&N($.id)},[_,C,N]),U=f.useCallback(()=>b(""),[]),V=(C?_:j).slice(0,5).map($=>({id:$.id,label:$.name,description:$.slug?`Slug  ${$.slug}`:"Workspace"})),R=f.useCallback($=>{b(""),N($.id)},[N]),A=f.useCallback(async $=>{h(null),u($.id);try{await i.mutateAsync($.id),Rw($.id)}catch(q){console.warn("workspaces.set_default.failed",q),h("Unable to set the default workspace. Please try again.")}finally{u(null)}},[i]),B={value:v,onChange:b,onSubmit:D,placeholder:"Search workspaces or jump to one instantly",shortcutHint:y,scopeLabel:"Workspace directory",suggestions:V,onSelectSuggestion:R,onClear:U},T={...B,shortcutHint:void 0,onClear:U,enableShortcut:!1,variant:"minimal"};if(r.isLoading)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(Dt,{title:"Loading workspaces",variant:"loading"})});if(r.isError)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(Dt,{title:"We couldn't load your workspaces",description:"Refresh the page or try again later.",variant:"error",action:a.jsx(Ae,{variant:"secondary",onClick:()=>r.refetch(),children:"Retry"})})});const K=j.length===0?x?a.jsx(UT,{onCreate:()=>e("/workspaces/new")}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{id:"page-title",className:"sr-only",children:"Workspaces"}),a.jsx(Dt,{title:"No workspaces available",description:"You don't have access to any workspaces yet. Ask an administrator to add you or create one on your behalf.",variant:"empty"})]}):_.length===0?a.jsx("div",{className:"space-y-4",children:a.jsx(Dt,{title:`No workspaces matching "${v}"`,description:"Try searching by another workspace name or slug.",action:a.jsx(Ae,{variant:"secondary",onClick:U,children:"Clear search"})})}):a.jsxs("div",{className:"space-y-6 rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("header",{children:[a.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-foreground",children:"Workspaces"}),a.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Select a workspace to jump straight into documents."})]}),d?a.jsx(Lt,{tone:"danger",heading:"We couldn't update your default workspace",children:d}):null,a.jsx(cj,{...T,className:"w-full"}),a.jsx("section",{className:"grid gap-5 lg:grid-cols-2",children:_.map($=>{const q=i.isPending&&l===$.id;return a.jsxs("div",{className:"group relative rounded-xl border border-border bg-card p-5 text-left shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-within:ring-2 focus-within:ring-brand-500 focus-within:ring-offset-2 focus-within:ring-offset-background",children:[a.jsxs("button",{type:"button",onClick:()=>N($.id),className:"w-full text-left focus-visible:outline-none","aria-label":`Open workspace ${$.name}`,children:[a.jsx("div",{className:"flex items-start justify-between gap-3",children:a.jsxs("div",{className:"space-y-1 pr-24",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:$.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slug: ",$.slug]})]})}),a.jsx("p",{className:"mt-4 text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Permissions"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:$.permissions.length>0?$.permissions.join(", "):"None"})]}),a.jsx("div",{className:"absolute right-5 top-5",children:$.is_default?a.jsx("span",{className:"rounded-full bg-brand-50 px-2 py-1 text-xs font-semibold text-brand-600",children:"Default"}):a.jsx(Ae,{variant:"secondary",size:"sm",isLoading:q,disabled:q,onClick:()=>void A($),children:"Set as default"})})]},$.id)})})]});return a.jsx(mj,{actions:E,search:B,sidePanel:a.jsx(LT,{canCreate:x,onCreate:()=>e("/workspaces/new")}),children:K})}function LT({canCreate:e,onCreate:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("section",{className:"space-y-3 rounded-2xl border border-border bg-card p-5 shadow-soft",children:[a.jsxs("header",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Workspace tips"}),a.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Why multiple workspaces?"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Segment teams by business unit or client, control access with roles, and tailor extraction settings per workspace. Everything stays organised and secure."}),e?a.jsx(Ae,{variant:"secondary",onClick:t,className:"w-full",children:"New workspace"}):null]}),a.jsxs("section",{className:"space-y-3 rounded-2xl border border-border bg-card p-5 shadow-soft",children:[a.jsxs("header",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Need a hand?"}),a.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Workspace setup checklist"})]}),a.jsxs("ul",{className:"space-y-2 text-xs text-muted-foreground",children:[a.jsx("li",{children:"Add at least one additional administrator."}),a.jsx("li",{children:"Review configurations before uploading production files."}),a.jsx("li",{children:"Review workspace permissions for external collaborators."})]})]})]})}function UT({onCreate:e}){return a.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-dashed border-border-strong bg-card p-10 text-center shadow-soft",children:[a.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-foreground",children:"No workspaces yet"}),a.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Create your first workspace to start uploading configuration sets and documents."}),a.jsx(Ae,{variant:"primary",onClick:e,className:"mt-6",children:"Create workspace"})]})}var fc=e=>e.type==="checkbox",Mi=e=>e instanceof Date,Ds=e=>e==null;const gj=e=>typeof e=="object";var Bn=e=>!Ds(e)&&!Array.isArray(e)&&gj(e)&&!Mi(e),$T=e=>Bn(e)&&e.target?fc(e.target)?e.target.checked:e.target.value:e,qT=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,BT=(e,t)=>e.has(qT(t)),PT=e=>{const t=e.constructor&&e.constructor.prototype;return Bn(t)&&t.hasOwnProperty("isPrototypeOf")},vp=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xn(e){let t;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(vp&&(e instanceof Blob||i))&&(r||Bn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!PT(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=Xn(e[l]));else return e;return t}var _d=e=>/^\w*$/.test(e),Tn=e=>e===void 0,yp=e=>Array.isArray(e)?e.filter(Boolean):[],wp=e=>yp(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ke=(e,t,r)=>{if(!t||!Bn(e))return r;const i=(_d(t)?[t]:wp(t)).reduce((l,u)=>Ds(l)?l:l[u],e);return Tn(i)||i===e?Tn(e[t])?r:e[t]:i},Kr=e=>typeof e=="boolean",Jt=(e,t,r)=>{let i=-1;const l=_d(t)?[t]:wp(t),u=l.length,d=u-1;for(;++i<u;){const h=l[i];let p=r;if(i!==d){const x=e[h];p=Bn(x)||Array.isArray(x)?x:isNaN(+l[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=p,e=e[h]}};const my={BLUR:"blur",FOCUS_OUT:"focusout"},Sr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},wa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},FT=Wt.createContext(null);FT.displayName="HookFormContext";var IT=(e,t,r,i=!0)=>{const l={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(l,u,{get:()=>{const d=u;return t._proxyFormState[d]!==Sr.all&&(t._proxyFormState[d]=!i||Sr.all),e[d]}});return l};const HT=typeof window<"u"?Wt.useLayoutEffect:Wt.useEffect;var Gs=e=>typeof e=="string",VT=(e,t,r,i,l)=>Gs(e)?(i&&t.watch.add(e),Ke(r,e,l)):Array.isArray(e)?e.map(u=>(i&&t.watch.add(u),Ke(r,u))):(i&&(t.watchAll=!0),r),km=e=>Ds(e)||!gj(e);function Ja(e,t,r=new WeakSet){if(km(e)||km(t))return e===t;if(Mi(e)&&Mi(t))return e.getTime()===t.getTime();const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const u of i){const d=e[u];if(!l.includes(u))return!1;if(u!=="ref"){const h=t[u];if(Mi(d)&&Mi(h)||Bn(d)&&Bn(h)||Array.isArray(d)&&Array.isArray(h)?!Ja(d,h,r):d!==h)return!1}}return!0}var jp=(e,t,r,i,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:l||!0}}:{},Vl=e=>Array.isArray(e)?e:[e],py=()=>{let e=[];return{get observers(){return e},next:l=>{for(const u of e)u.next&&u.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(u=>u!==l)}}),unsubscribe:()=>{e=[]}}};function xj(e,t){const r={};for(const i in e)if(e.hasOwnProperty(i)){const l=e[i],u=t[i];if(l&&Bn(l)&&u){const d=xj(l,u);Bn(d)&&(r[i]=d)}else e[i]&&(r[i]=u)}return r}var ks=e=>Bn(e)&&!Object.keys(e).length,Sp=e=>e.type==="file",Nr=e=>typeof e=="function",nd=e=>{if(!vp)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},bj=e=>e.type==="select-multiple",Np=e=>e.type==="radio",QT=e=>Np(e)||fc(e),em=e=>nd(e)&&e.isConnected;function ZT(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=Tn(e)?i++:e[t[i++]];return e}function KT(e){for(const t in e)if(e.hasOwnProperty(t)&&!Tn(e[t]))return!1;return!0}function qn(e,t){const r=Array.isArray(t)?t:_d(t)?[t]:wp(t),i=r.length===1?e:ZT(e,r),l=r.length-1,u=r[l];return i&&delete i[u],l!==0&&(Bn(i)&&ks(i)||Array.isArray(i)&&KT(i))&&qn(e,r.slice(0,-1)),e}var GT=e=>{for(const t in e)if(Nr(e[t]))return!0;return!1};function vj(e){return Array.isArray(e)||Bn(e)&&!GT(e)}function Dm(e,t={}){for(const r in e)vj(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Dm(e[r],t[r])):Tn(e[r])||(t[r]=!0);return t}function Ro(e,t,r){r||(r=Dm(t));for(const i in e)vj(e[i])?Tn(t)||km(r[i])?r[i]=Dm(e[i],Array.isArray(e[i])?[]:{}):Ro(e[i],Ds(t)?{}:t[i],r[i]):r[i]=!Ja(e[i],t[i]);return r}const gy={value:!1,isValid:!1},xy={value:!0,isValid:!0};var yj=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Tn(e[0].attributes.value)?Tn(e[0].value)||e[0].value===""?xy:{value:e[0].value,isValid:!0}:xy:gy}return gy},wj=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>Tn(e)?e:t?e===""?NaN:e&&+e:r&&Gs(e)?new Date(e):i?i(e):e;const by={isValid:!1,value:null};var jj=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,by):by;function vy(e){const t=e.ref;return Sp(t)?t.files:Np(t)?jj(e.refs).value:bj(t)?[...t.selectedOptions].map(({value:r})=>r):fc(t)?yj(e.refs).value:wj(Tn(t.value)?e.ref.value:t.value,e)}var WT=(e,t,r,i)=>{const l={};for(const u of e){const d=Ke(t,u);d&&Jt(l,u,d._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:i}},sd=e=>e instanceof RegExp,ql=e=>Tn(e)?e:sd(e)?e.source:Bn(e)?sd(e.value)?e.value.source:e.value:e,yy=e=>({isOnSubmit:!e||e===Sr.onSubmit,isOnBlur:e===Sr.onBlur,isOnChange:e===Sr.onChange,isOnAll:e===Sr.all,isOnTouch:e===Sr.onTouched});const wy="AsyncFunction";var YT=e=>!!e&&!!e.validate&&!!(Nr(e.validate)&&e.validate.constructor.name===wy||Bn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===wy)),XT=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),jy=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Ql=(e,t,r,i)=>{for(const l of r||Object.keys(e)){const u=Ke(e,l);if(u){const{_f:d,...h}=u;if(d){if(d.refs&&d.refs[0]&&t(d.refs[0],l)&&!i)return!0;if(d.ref&&t(d.ref,d.name)&&!i)return!0;if(Ql(h,t))break}else if(Bn(h)&&Ql(h,t))break}}};function Sy(e,t,r){const i=Ke(e,r);if(i||_d(r))return{error:i,name:r};const l=r.split(".");for(;l.length;){const u=l.join("."),d=Ke(t,u),h=Ke(e,u);if(d&&!Array.isArray(d)&&r!==u)return{name:r};if(h&&h.type)return{name:u,error:h};if(h&&h.root&&h.root.type)return{name:`${u}.root`,error:h.root};l.pop()}return{name:r}}var JT=(e,t,r,i)=>{r(e);const{name:l,...u}=e;return ks(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(d=>t[d]===(!i||Sr.all))},eA=(e,t,r)=>!e||!t||e===t||Vl(e).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i))),tA=(e,t,r,i,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?i.isOnBlur:l.isOnBlur)?!e:(r?i.isOnChange:l.isOnChange)?e:!0,nA=(e,t)=>!yp(Ke(e,t)).length&&qn(e,t),sA=(e,t,r)=>{const i=Vl(Ke(e,r));return Jt(i,"root",t[r]),Jt(e,r,i),e};function Ny(e,t,r="validate"){if(Gs(e)||Array.isArray(e)&&e.every(Gs)||Kr(e)&&!e)return{type:r,message:Gs(e)?e:"",ref:t}}var ko=e=>Bn(e)&&!sd(e)?e:{value:e,message:""},Cy=async(e,t,r,i,l,u)=>{const{ref:d,refs:h,required:p,maxLength:x,minLength:v,min:b,max:y,pattern:S,validate:j,name:C,valueAsNumber:_,mount:N}=e._f,E=Ke(r,C);if(!N||t.has(C))return{};const D=h?h[0]:d,U=$=>{l&&D.reportValidity&&(D.setCustomValidity(Kr($)?"":$||""),D.reportValidity())},z={},V=Np(d),R=fc(d),A=V||R,B=(_||Sp(d))&&Tn(d.value)&&Tn(E)||nd(d)&&d.value===""||E===""||Array.isArray(E)&&!E.length,T=jp.bind(null,C,i,z),K=($,q,I,je=wa.maxLength,M=wa.minLength)=>{const H=$?q:I;z[C]={type:$?je:M,message:H,ref:d,...T($?je:M,H)}};if(u?!Array.isArray(E)||!E.length:p&&(!A&&(B||Ds(E))||Kr(E)&&!E||R&&!yj(h).isValid||V&&!jj(h).isValid)){const{value:$,message:q}=Gs(p)?{value:!!p,message:p}:ko(p);if($&&(z[C]={type:wa.required,message:q,ref:D,...T(wa.required,q)},!i))return U(q),z}if(!B&&(!Ds(b)||!Ds(y))){let $,q;const I=ko(y),je=ko(b);if(!Ds(E)&&!isNaN(E)){const M=d.valueAsNumber||E&&+E;Ds(I.value)||($=M>I.value),Ds(je.value)||(q=M<je.value)}else{const M=d.valueAsDate||new Date(E),H=de=>new Date(new Date().toDateString()+" "+de),ee=d.type=="time",be=d.type=="week";Gs(I.value)&&E&&($=ee?H(E)>H(I.value):be?E>I.value:M>new Date(I.value)),Gs(je.value)&&E&&(q=ee?H(E)<H(je.value):be?E<je.value:M<new Date(je.value))}if(($||q)&&(K(!!$,I.message,je.message,wa.max,wa.min),!i))return U(z[C].message),z}if((x||v)&&!B&&(Gs(E)||u&&Array.isArray(E))){const $=ko(x),q=ko(v),I=!Ds($.value)&&E.length>+$.value,je=!Ds(q.value)&&E.length<+q.value;if((I||je)&&(K(I,$.message,q.message),!i))return U(z[C].message),z}if(S&&!B&&Gs(E)){const{value:$,message:q}=ko(S);if(sd($)&&!E.match($)&&(z[C]={type:wa.pattern,message:q,ref:d,...T(wa.pattern,q)},!i))return U(q),z}if(j){if(Nr(j)){const $=await j(E,r),q=Ny($,D);if(q&&(z[C]={...q,...T(wa.validate,q.message)},!i))return U(q.message),z}else if(Bn(j)){let $={};for(const q in j){if(!ks($)&&!i)break;const I=Ny(await j[q](E,r),D,q);I&&($={...I,...T(q,I.message)},U(I.message),i&&(z[C]=$))}if(!ks($)&&(z[C]={ref:D,...$},!i))return z}}return U(!0),z};const rA={mode:Sr.onSubmit,reValidateMode:Sr.onChange,shouldFocusError:!0};function aA(e={}){let t={...rA,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Nr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},l=Bn(t.defaultValues)||Bn(t.values)?Xn(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:Xn(l),d={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,x=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...v};const y={array:py(),state:py()},S=t.criteriaMode===Sr.all,j=P=>F=>{clearTimeout(x),x=setTimeout(P,F)},C=async P=>{if(!t.disabled&&(v.isValid||b.isValid||P)){const F=t.resolver?ks((await R()).errors):await B(i,!0);F!==r.isValid&&y.state.next({isValid:F})}},_=(P,F)=>{!t.disabled&&(v.isValidating||v.validatingFields||b.isValidating||b.validatingFields)&&((P||Array.from(h.mount)).forEach(X=>{X&&(F?Jt(r.validatingFields,X,F):qn(r.validatingFields,X))}),y.state.next({validatingFields:r.validatingFields,isValidating:!ks(r.validatingFields)}))},N=(P,F=[],X,Te,_e=!0,me=!0)=>{if(Te&&X&&!t.disabled){if(d.action=!0,me&&Array.isArray(Ke(i,P))){const De=X(Ke(i,P),Te.argA,Te.argB);_e&&Jt(i,P,De)}if(me&&Array.isArray(Ke(r.errors,P))){const De=X(Ke(r.errors,P),Te.argA,Te.argB);_e&&Jt(r.errors,P,De),nA(r.errors,P)}if((v.touchedFields||b.touchedFields)&&me&&Array.isArray(Ke(r.touchedFields,P))){const De=X(Ke(r.touchedFields,P),Te.argA,Te.argB);_e&&Jt(r.touchedFields,P,De)}(v.dirtyFields||b.dirtyFields)&&(r.dirtyFields=Ro(l,u)),y.state.next({name:P,isDirty:K(P,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Jt(u,P,F)},E=(P,F)=>{Jt(r.errors,P,F),y.state.next({errors:r.errors})},D=P=>{r.errors=P,y.state.next({errors:r.errors,isValid:!1})},U=(P,F,X,Te)=>{const _e=Ke(i,P);if(_e){const me=Ke(u,P,Tn(X)?Ke(l,P):X);Tn(me)||Te&&Te.defaultChecked||F?Jt(u,P,F?me:vy(_e._f)):I(P,me),d.mount&&C()}},z=(P,F,X,Te,_e)=>{let me=!1,De=!1;const ye={name:P};if(!t.disabled){if(!X||Te){(v.isDirty||b.isDirty)&&(De=r.isDirty,r.isDirty=ye.isDirty=K(),me=De!==ye.isDirty);const ke=Ja(Ke(l,P),F);De=!!Ke(r.dirtyFields,P),ke?qn(r.dirtyFields,P):Jt(r.dirtyFields,P,!0),ye.dirtyFields=r.dirtyFields,me=me||(v.dirtyFields||b.dirtyFields)&&De!==!ke}if(X){const ke=Ke(r.touchedFields,P);ke||(Jt(r.touchedFields,P,X),ye.touchedFields=r.touchedFields,me=me||(v.touchedFields||b.touchedFields)&&ke!==X)}me&&_e&&y.state.next(ye)}return me?ye:{}},V=(P,F,X,Te)=>{const _e=Ke(r.errors,P),me=(v.isValid||b.isValid)&&Kr(F)&&r.isValid!==F;if(t.delayError&&X?(p=j(()=>E(P,X)),p(t.delayError)):(clearTimeout(x),p=null,X?Jt(r.errors,P,X):qn(r.errors,P)),(X?!Ja(_e,X):_e)||!ks(Te)||me){const De={...Te,...me&&Kr(F)?{isValid:F}:{},errors:r.errors,name:P};r={...r,...De},y.state.next(De)}},R=async P=>{_(P,!0);const F=await t.resolver(u,t.context,WT(P||h.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return _(P),F},A=async P=>{const{errors:F}=await R(P);if(P)for(const X of P){const Te=Ke(F,X);Te?Jt(r.errors,X,Te):qn(r.errors,X)}else r.errors=F;return F},B=async(P,F,X={valid:!0})=>{for(const Te in P){const _e=P[Te];if(_e){const{_f:me,...De}=_e;if(me){const ye=h.array.has(me.name),ke=_e._f&&YT(_e._f);ke&&v.validatingFields&&_([me.name],!0);const Ie=await Cy(_e,h.disabled,u,S,t.shouldUseNativeValidation&&!F,ye);if(ke&&v.validatingFields&&_([me.name]),Ie[me.name]&&(X.valid=!1,F))break;!F&&(Ke(Ie,me.name)?ye?sA(r.errors,Ie,me.name):Jt(r.errors,me.name,Ie[me.name]):qn(r.errors,me.name))}!ks(De)&&await B(De,F,X)}}return X.valid},T=()=>{for(const P of h.unMount){const F=Ke(i,P);F&&(F._f.refs?F._f.refs.every(X=>!em(X)):!em(F._f.ref))&&ne(P)}h.unMount=new Set},K=(P,F)=>!t.disabled&&(P&&F&&Jt(u,P,F),!Ja(de(),l)),$=(P,F,X)=>VT(P,h,{...d.mount?u:Tn(F)?l:Gs(P)?{[P]:F}:F},X,F),q=P=>yp(Ke(d.mount?u:l,P,t.shouldUnregister?Ke(l,P,[]):[])),I=(P,F,X={})=>{const Te=Ke(i,P);let _e=F;if(Te){const me=Te._f;me&&(!me.disabled&&Jt(u,P,wj(F,me)),_e=nd(me.ref)&&Ds(F)?"":F,bj(me.ref)?[...me.ref.options].forEach(De=>De.selected=_e.includes(De.value)):me.refs?fc(me.ref)?me.refs.forEach(De=>{(!De.defaultChecked||!De.disabled)&&(Array.isArray(_e)?De.checked=!!_e.find(ye=>ye===De.value):De.checked=_e===De.value||!!_e)}):me.refs.forEach(De=>De.checked=De.value===_e):Sp(me.ref)?me.ref.value="":(me.ref.value=_e,me.ref.type||y.state.next({name:P,values:Xn(u)})))}(X.shouldDirty||X.shouldTouch)&&z(P,_e,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&be(P)},je=(P,F,X)=>{for(const Te in F){if(!F.hasOwnProperty(Te))return;const _e=F[Te],me=P+"."+Te,De=Ke(i,me);(h.array.has(P)||Bn(_e)||De&&!De._f)&&!Mi(_e)?je(me,_e,X):I(me,_e,X)}},M=(P,F,X={})=>{const Te=Ke(i,P),_e=h.array.has(P),me=Xn(F);Jt(u,P,me),_e?(y.array.next({name:P,values:Xn(u)}),(v.isDirty||v.dirtyFields||b.isDirty||b.dirtyFields)&&X.shouldDirty&&y.state.next({name:P,dirtyFields:Ro(l,u),isDirty:K(P,me)})):Te&&!Te._f&&!Ds(me)?je(P,me,X):I(P,me,X),jy(P,h)&&y.state.next({...r,name:P}),y.state.next({name:d.mount?P:void 0,values:Xn(u)})},H=async P=>{d.mount=!0;const F=P.target;let X=F.name,Te=!0;const _e=Ke(i,X),me=ke=>{Te=Number.isNaN(ke)||Mi(ke)&&isNaN(ke.getTime())||Ja(ke,Ke(u,X,ke))},De=yy(t.mode),ye=yy(t.reValidateMode);if(_e){let ke,Ie;const ht=F.type?vy(_e._f):$T(P),tt=P.type===my.BLUR||P.type===my.FOCUS_OUT,An=!XT(_e._f)&&!t.resolver&&!Ke(r.errors,X)&&!_e._f.deps||tA(tt,Ke(r.touchedFields,X),r.isSubmitted,ye,De),Ut=jy(X,h,tt);Jt(u,X,ht),tt?(!F||!F.readOnly)&&(_e._f.onBlur&&_e._f.onBlur(P),p&&p(0)):_e._f.onChange&&_e._f.onChange(P);const At=z(X,ht,tt),$t=!ks(At)||Ut;if(!tt&&y.state.next({name:X,type:P.type,values:Xn(u)}),An)return(v.isValid||b.isValid)&&(t.mode==="onBlur"?tt&&C():tt||C()),$t&&y.state.next({name:X,...Ut?{}:At});if(!tt&&Ut&&y.state.next({...r}),t.resolver){const{errors:Ze}=await R([X]);if(me(ht),Te){const pn=Sy(r.errors,i,X),Rn=Sy(Ze,i,pn.name||X);ke=Rn.error,X=Rn.name,Ie=ks(Ze)}}else _([X],!0),ke=(await Cy(_e,h.disabled,u,S,t.shouldUseNativeValidation))[X],_([X]),me(ht),Te&&(ke?Ie=!1:(v.isValid||b.isValid)&&(Ie=await B(i,!0)));Te&&(_e._f.deps&&(!Array.isArray(_e._f.deps)||_e._f.deps.length>0)&&be(_e._f.deps),V(X,Ie,ke,At))}},ee=(P,F)=>{if(Ke(r.errors,F)&&P.focus)return P.focus(),1},be=async(P,F={})=>{let X,Te;const _e=Vl(P);if(t.resolver){const me=await A(Tn(P)?P:_e);X=ks(me),Te=P?!_e.some(De=>Ke(me,De)):X}else P?(Te=(await Promise.all(_e.map(async me=>{const De=Ke(i,me);return await B(De&&De._f?{[me]:De}:De)}))).every(Boolean),!(!Te&&!r.isValid)&&C()):Te=X=await B(i);return y.state.next({...!Gs(P)||(v.isValid||b.isValid)&&X!==r.isValid?{}:{name:P},...t.resolver||!P?{isValid:X}:{},errors:r.errors}),F.shouldFocus&&!Te&&Ql(i,ee,P?_e:h.mount),Te},de=(P,F)=>{let X={...d.mount?u:l};return F&&(X=xj(F.dirtyFields?r.dirtyFields:r.touchedFields,X)),Tn(P)?X:Gs(P)?Ke(X,P):P.map(Te=>Ke(X,Te))},L=(P,F)=>({invalid:!!Ke((F||r).errors,P),isDirty:!!Ke((F||r).dirtyFields,P),error:Ke((F||r).errors,P),isValidating:!!Ke(r.validatingFields,P),isTouched:!!Ke((F||r).touchedFields,P)}),W=P=>{P&&Vl(P).forEach(F=>qn(r.errors,F)),y.state.next({errors:P?r.errors:{}})},pe=(P,F,X)=>{const Te=(Ke(i,P,{_f:{}})._f||{}).ref,_e=Ke(r.errors,P)||{},{ref:me,message:De,type:ye,...ke}=_e;Jt(r.errors,P,{...ke,...F,ref:Te}),y.state.next({name:P,errors:r.errors,isValid:!1}),X&&X.shouldFocus&&Te&&Te.focus&&Te.focus()},G=(P,F)=>Nr(P)?y.state.subscribe({next:X=>"values"in X&&P($(void 0,F),X)}):$(P,F,!0),ie=P=>y.state.subscribe({next:F=>{eA(P.name,F.name,P.exact)&&JT(F,P.formState||v,Be,P.reRenderRoot)&&P.callback({values:{...u},...r,...F,defaultValues:l})}}).unsubscribe,J=P=>(d.mount=!0,b={...b,...P.formState},ie({...P,formState:b})),ne=(P,F={})=>{for(const X of P?Vl(P):h.mount)h.mount.delete(X),h.array.delete(X),F.keepValue||(qn(i,X),qn(u,X)),!F.keepError&&qn(r.errors,X),!F.keepDirty&&qn(r.dirtyFields,X),!F.keepTouched&&qn(r.touchedFields,X),!F.keepIsValidating&&qn(r.validatingFields,X),!t.shouldUnregister&&!F.keepDefaultValue&&qn(l,X);y.state.next({values:Xn(u)}),y.state.next({...r,...F.keepDirty?{isDirty:K()}:{}}),!F.keepIsValid&&C()},oe=({disabled:P,name:F})=>{(Kr(P)&&d.mount||P||h.disabled.has(F))&&(P?h.disabled.add(F):h.disabled.delete(F))},he=(P,F={})=>{let X=Ke(i,P);const Te=Kr(F.disabled)||Kr(t.disabled);return Jt(i,P,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:P}},name:P,mount:!0,...F}}),h.mount.add(P),X?oe({disabled:Kr(F.disabled)?F.disabled:t.disabled,name:P}):U(P,!0,F.value),{...Te?{disabled:F.disabled||t.disabled}:{},...t.progressive?{required:!!F.required,min:ql(F.min),max:ql(F.max),minLength:ql(F.minLength),maxLength:ql(F.maxLength),pattern:ql(F.pattern)}:{},name:P,onChange:H,onBlur:H,ref:_e=>{if(_e){he(P,F),X=Ke(i,P);const me=Tn(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,De=QT(me),ye=X._f.refs||[];if(De?ye.find(ke=>ke===me):me===X._f.ref)return;Jt(i,P,{_f:{...X._f,...De?{refs:[...ye.filter(em),me,...Array.isArray(Ke(l,P))?[{}]:[]],ref:{type:me.type,name:P}}:{ref:me}}}),U(P,!1,void 0,me)}else X=Ke(i,P,{}),X._f&&(X._f.mount=!1),(t.shouldUnregister||F.shouldUnregister)&&!(BT(h.array,P)&&d.action)&&h.unMount.add(P)}}},ue=()=>t.shouldFocusError&&Ql(i,ee,h.mount),Oe=P=>{Kr(P)&&(y.state.next({disabled:P}),Ql(i,(F,X)=>{const Te=Ke(i,X);Te&&(F.disabled=Te._f.disabled||P,Array.isArray(Te._f.refs)&&Te._f.refs.forEach(_e=>{_e.disabled=Te._f.disabled||P}))},0,!1))},Ge=(P,F)=>async X=>{let Te;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let _e=Xn(u);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:me,values:De}=await R();r.errors=me,_e=Xn(De)}else await B(i);if(h.disabled.size)for(const me of h.disabled)qn(_e,me);if(qn(r.errors,"root"),ks(r.errors)){y.state.next({errors:{}});try{await P(_e,X)}catch(me){Te=me}}else F&&await F({...r.errors},X),ue(),setTimeout(ue);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ks(r.errors)&&!Te,submitCount:r.submitCount+1,errors:r.errors}),Te)throw Te},Se=(P,F={})=>{Ke(i,P)&&(Tn(F.defaultValue)?M(P,Xn(Ke(l,P))):(M(P,F.defaultValue),Jt(l,P,Xn(F.defaultValue))),F.keepTouched||qn(r.touchedFields,P),F.keepDirty||(qn(r.dirtyFields,P),r.isDirty=F.defaultValue?K(P,Xn(Ke(l,P))):K()),F.keepError||(qn(r.errors,P),v.isValid&&C()),y.state.next({...r}))},ze=(P,F={})=>{const X=P?Xn(P):l,Te=Xn(X),_e=ks(P),me=_e?l:Te;if(F.keepDefaultValues||(l=X),!F.keepValues){if(F.keepDirtyValues){const De=new Set([...h.mount,...Object.keys(Ro(l,u))]);for(const ye of Array.from(De))Ke(r.dirtyFields,ye)?Jt(me,ye,Ke(u,ye)):M(ye,Ke(me,ye))}else{if(vp&&Tn(P))for(const De of h.mount){const ye=Ke(i,De);if(ye&&ye._f){const ke=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(nd(ke)){const Ie=ke.closest("form");if(Ie){Ie.reset();break}}}}if(F.keepFieldsRef)for(const De of h.mount)M(De,Ke(me,De));else i={}}u=t.shouldUnregister?F.keepDefaultValues?Xn(l):{}:Xn(me),y.array.next({values:{...me}}),y.state.next({values:{...me}})}h={mount:F.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!v.isValid||!!F.keepIsValid||!!F.keepDirtyValues,d.watch=!!t.shouldUnregister,y.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:_e?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!Ja(P,l)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:_e?{}:F.keepDirtyValues?F.keepDefaultValues&&u?Ro(l,u):r.dirtyFields:F.keepDefaultValues&&P?Ro(l,P):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},Pe=(P,F)=>ze(Nr(P)?P(u):P,F),Me=(P,F={})=>{const X=Ke(i,P),Te=X&&X._f;if(Te){const _e=Te.refs?Te.refs[0]:Te.ref;_e.focus&&(_e.focus(),F.shouldSelect&&Nr(_e.select)&&_e.select())}},Be=P=>{r={...r,...P}},st={control:{register:he,unregister:ne,getFieldState:L,handleSubmit:Ge,setError:pe,_subscribe:ie,_runSchema:R,_focusError:ue,_getWatch:$,_getDirty:K,_setValid:C,_setFieldArray:N,_setDisabledField:oe,_setErrors:D,_getFieldArray:q,_reset:ze,_resetDefaultValues:()=>Nr(t.defaultValues)&&t.defaultValues().then(P=>{Pe(P,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Oe,_subjects:y,_proxyFormState:v,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(P){d=P},get _defaultValues(){return l},get _names(){return h},set _names(P){h=P},get _formState(){return r},get _options(){return t},set _options(P){t={...t,...P}}},subscribe:J,trigger:be,register:he,handleSubmit:Ge,watch:G,setValue:M,getValues:de,reset:Pe,resetField:Se,clearErrors:W,unregister:ne,setError:pe,setFocus:Me,getFieldState:L};return{...st,formControl:st}}function Sj(e={}){const t=Wt.useRef(void 0),r=Wt.useRef(void 0),[i,l]=Wt.useState({isDirty:!1,isValidating:!1,isLoading:Nr(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Nr(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:i},e.defaultValues&&!Nr(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...h}=aA(e);t.current={...h,formState:i}}const u=t.current.control;return u._options=e,HT(()=>{const d=u._subscribe({formState:u._proxyFormState,callback:()=>l({...u._formState}),reRenderRoot:!0});return l(h=>({...h,isReady:!0})),u._formState.isReady=!0,d},[u]),Wt.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),Wt.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),Wt.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),Wt.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),Wt.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),Wt.useEffect(()=>{e.values&&!Ja(e.values,r.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),r.current=e.values,l(d=>({...d}))):u._resetDefaultValues()},[u,e.values]),Wt.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),t.current.formState=IT(i,u),t.current}const _y=(e,t,r)=>{if(e&&"reportValidity"in e){const i=Ke(r,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Tm=(e,t)=>{for(const r in t.fields){const i=t.fields[r];i&&i.ref&&"reportValidity"in i.ref?_y(i.ref,r,e):i&&i.refs&&i.refs.forEach(l=>_y(l,r,e))}},Ey=(e,t)=>{t.shouldUseNativeValidation&&Tm(e,t);const r={};for(const i in e){const l=Ke(t.fields,i),u=Object.assign(e[i]||{},{ref:l&&l.ref});if(iA(t.names||Object.keys(e),i)){const d=Object.assign({},Ke(r,i));Jt(d,"root",u),Jt(r,i,d)}else Jt(r,i,u)}return r},iA=(e,t)=>{const r=ky(t);return e.some(i=>ky(i).match(`^${r}\\.\\d+`))};function ky(e){return e.replace(/\]|\[/g,"")}function Dy(e,t){try{var r=e()}catch(i){return t(i)}return r&&r.then?r.then(void 0,t):r}function oA(e,t){for(var r={};e.length;){var i=e[0],l=i.code,u=i.message,d=i.path.join(".");if(!r[d])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];r[d]={message:h.message,type:h.code}}else r[d]={message:u,type:l};if("unionErrors"in i&&i.unionErrors.forEach(function(v){return v.errors.forEach(function(b){return e.push(b)})}),t){var p=r[d].types,x=p&&p[i.code];r[d]=jp(d,t,r,l,x?[].concat(x,i.message):i.message)}e.shift()}return r}function lA(e,t){for(var r={};e.length;){var i=e[0],l=i.code,u=i.message,d=i.path.join(".");if(!r[d])if(i.code==="invalid_union"&&i.errors.length>0){var h=i.errors[0][0];r[d]={message:h.message,type:h.code}}else r[d]={message:u,type:l};if(i.code==="invalid_union"&&i.errors.forEach(function(v){return v.forEach(function(b){return e.push(b)})}),t){var p=r[d].types,x=p&&p[i.code];r[d]=jp(d,t,r,l,x?[].concat(x,i.message):i.message)}e.shift()}return r}function Nj(e,t,r){if(r===void 0&&(r={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,l,u){try{return Promise.resolve(Dy(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(d){return u.shouldUseNativeValidation&&Tm({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(h){return Array.isArray(h?.issues)})(d))return{values:{},errors:Ey(oA(d.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,l,u){try{return Promise.resolve(Dy(function(){return Promise.resolve((r.mode==="sync"?AC:RC)(e,i,t)).then(function(d){return u.shouldUseNativeValidation&&Tm({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(h){return h instanceof cp})(d))return{values:{},errors:Ey(lA(d.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};throw new Error("Invalid input: not a Zod schema")}async function cA(e={}){const{page:t,pageSize:r,search:i,includeTotal:l,signal:u}=e,d={};typeof t=="number"&&t>0&&(d.page=t),typeof r=="number"&&r>0&&(d.page_size=r),l&&(d.include_total=!0);const h=i?.trim();h&&(d.q=h);const{data:p}=await Ve.GET("/api/v1/users",{params:{query:d},signal:u});if(!p)throw new Error("Expected user page payload.");return p}function Cj(e={}){const{enabled:t=!0,search:r="",pageSize:i}=e,l=r.trim(),u=l.length>=2?l:"",d=Km({queryKey:["users","all",{search:l,pageSize:i}],initialPageParam:1,queryFn:({pageParam:x,signal:v})=>cA(uA({page:typeof x=="number"?x:1,pageSize:i,search:u||void 0,signal:v})),getNextPageParam:x=>x.has_next?x.page+1:void 0,enabled:t,staleTime:6e4}),h=f.useCallback(x=>x.id,[]),p=Sw(d.data?.pages,h);return{...d,users:p}}function uA(e){const t=!e.page||e.page<1?1:e.page;return{...e,page:t}}const dA=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,fA=jd({name:Cr().min(1,"Workspace name is required.").max(100,"Keep the name under 100 characters."),slug:Cr().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(dA,"Use lowercase letters, numbers, and dashes."),ownerUserId:Cr().optional()});function hA(){return a.jsx(cc,{children:a.jsx(mA,{})})}function mA(){const e=en(),t=Pi(),r=lC(),l=f.useMemo(()=>(t.user.permissions??[]).map(A=>A.toLowerCase()),[t.user.permissions]).includes("users.read_all"),u=Cj({enabled:l,pageSize:50}),d=f.useMemo(()=>u.users,[u.users]),h=f.useMemo(()=>t.user.id?d.filter(A=>A.id!==t.user.id):d,[d,t.user.id]),{register:p,handleSubmit:x,watch:v,setValue:b,setError:y,clearErrors:S,formState:{errors:j,dirtyFields:C}}=Sj({resolver:Nj(fA),defaultValues:{name:"",slug:"",ownerUserId:t.user.id??""}}),_=v("name"),N=v("slug");f.useEffect(()=>{if(C.slug)return;const A=pA(_);A!==N&&b("slug",A,{shouldValidate:!!A})},[C.slug,_,b,N]),f.useEffect(()=>{!l&&t.user.id&&b("ownerUserId",t.user.id,{shouldDirty:!1})},[l,t.user.id,b]);const E=r.isPending,D=u.isPending&&u.users.length===0,U=E||D||!l,z=t.user.display_name?`${t.user.display_name} (you)`:`${t.user.email??"Current user"} (you)`,V=p("ownerUserId"),R=x(A=>{if(S("root"),l&&!A.ownerUserId){y("ownerUserId",{type:"manual",message:"Select a workspace owner."});return}r.mutate({name:A.name.trim(),slug:A.slug.trim(),owner_user_id:l&&A.ownerUserId||void 0},{onSuccess(B){e(rp(B.id))},onError(B){if(B instanceof Ht){const T=B.problem?.detail??B.message,K=B.problem?.errors??{};y("root",{type:"server",message:T}),K.name?.[0]&&y("name",{type:"server",message:K.name[0]}),K.slug?.[0]&&y("slug",{type:"server",message:K.slug[0]}),K.owner_user_id?.[0]&&y("ownerUserId",{type:"server",message:K.owner_user_id[0]});return}y("root",{type:"server",message:B instanceof Error?B.message:"Workspace creation failed."})}})});return a.jsx(mj,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Create a workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Name the workspace and choose who should own it. You can adjust settings and permissions after the workspace is created."})]}),a.jsxs("form",{className:"space-y-6 rounded-2xl border border-border bg-card p-6 shadow-soft",onSubmit:R,children:[a.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[a.jsx(Pt,{label:"Workspace name",required:!0,error:j.name?.message,children:a.jsx(kt,{id:"workspaceName",placeholder:"Finance Operations",...p("name"),invalid:!!j.name,disabled:E})}),a.jsx(Pt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier",required:!0,error:j.slug?.message,children:a.jsx(kt,{id:"workspaceSlug",placeholder:"finance-ops",...p("slug"),invalid:!!j.slug,disabled:E})})]}),l?a.jsxs(Pt,{label:"Workspace owner",hint:"Owner receives workspace-level permissions immediately.",error:j.ownerUserId?.message,children:[a.jsxs("select",{id:"workspaceOwner",...V,onChange:A=>{V.onChange(A),S("ownerUserId")},disabled:U,className:"rounded-lg border border-border-strong bg-card px-3 py-2 text-sm text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground",children:[a.jsx("option",{value:t.user.id??"",children:z}),h.map(A=>a.jsx("option",{value:A.id,children:A.display_name?`${A.display_name} (${A.email})`:A.email},A.id))]}),u.hasNextPage?a.jsx("div",{className:"pt-2",children:a.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>u.fetchNextPage(),disabled:u.isFetchingNextPage,children:u.isFetchingNextPage?"Loading more users":"Load more users"})}):null]}):null,j.root?a.jsx(Lt,{tone:"danger",children:j.root.message}):null,l&&u.isError?a.jsx(Lt,{tone:"warning",children:"Unable to load the user list. Continue with yourself as the workspace owner or try again later."}):null,a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[a.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>e("/workspaces"),disabled:E,children:"Cancel"}),a.jsx(Ae,{type:"submit",isLoading:E,children:E?"Creating workspace":"Create workspace"})]})]})]})})}function pA(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}const _j=f.createContext(void 0);function gA({workspace:e,workspaces:t,children:r}){const i=f.useMemo(()=>{const l=e.permissions;return{workspace:e,workspaces:t,permissions:l,hasPermission(u){const d=u.toLowerCase();return l.includes(u)||l.includes(d)}}},[e,t]);return a.jsx(_j.Provider,{value:i,children:r})}function Tr(){const e=f.useContext(_j);if(!e)throw new Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}const xA=[{id:"explorer",label:"Explorer",icon:a.jsx(FD,{className:"h-5 w-5"})},{id:"search",label:"Search",icon:a.jsx(Sd,{className:"h-5 w-5"})},{id:"scm",label:"Source Control",icon:a.jsx(ID,{className:"h-5 w-5"})},{id:"extensions",label:"Extensions",icon:a.jsx(HD,{className:"h-5 w-5"})}];function bA({activeView:e,onSelectView:t,onOpenSettings:r,appearance:i}){const l={bg:"bg-card",border:"border-border",iconIdle:"text-muted-foreground",iconActive:"text-brand-400",hover:"hover:text-foreground hover:bg-muted focus-visible:text-foreground",indicator:"bg-brand-500"};return a.jsxs("aside",{className:te("flex h-full w-14 flex-col items-center justify-between border-r",l.bg,l.border,l.iconIdle),"aria-label":"Workbench navigation",children:[a.jsx("div",{className:"flex flex-col items-center gap-1 py-3",children:xA.map(u=>{const d=e===u.id;return a.jsxs("button",{type:"button",onClick:()=>t(u.id),className:te("relative flex h-10 w-10 items-center justify-center rounded-lg text-base transition",d?l.iconActive:te(l.iconIdle,l.hover)),"aria-label":u.label,"aria-pressed":d,children:[d?a.jsx("span",{className:te("absolute left-0 top-1/2 h-6 w-1 -translate-y-1/2 rounded",l.indicator)}):null,u.icon]},u.id)})}),a.jsx("div",{className:"flex flex-col items-center gap-3 pb-3",children:a.jsx("button",{type:"button",onClick:r,className:te("flex h-10 w-10 items-center justify-center rounded-lg text-base transition",l.iconIdle,l.hover),"aria-label":"Open settings",children:a.jsx(gp,{className:"h-5 w-5"})})})]})}const Cp=f.createContext(null);function Ed({value:e,onValueChange:t,children:r}){const i=f.useId(),l=f.useRef([]),u=f.useRef(new Map),d=f.useCallback((b,y)=>{l.current.includes(b)||l.current.push(b),u.current.set(b,y)},[]),h=f.useCallback(b=>{l.current=l.current.filter(y=>y!==b),u.current.delete(b)},[]),p=f.useCallback(b=>{b&&u.current.get(b)?.focus()},[]),x=f.useCallback(()=>l.current.slice(),[]),v=f.useMemo(()=>({value:e,setValue:t,baseId:i,registerValue:d,unregisterValue:h,focusValue:p,getValues:x}),[e,t,i,d,h,p,x]);return a.jsx(Cp.Provider,{value:v,children:r})}function kd({children:e,...t}){return a.jsx("div",{role:"tablist",...t,children:e})}function nc({value:e,children:t,className:r,onClick:i,onKeyDown:l,disabled:u,...d}){const h=f.useContext(Cp);if(!h)throw new Error("TabsTrigger must be used within a TabsRoot");const{registerValue:p,unregisterValue:x,focusValue:v,getValues:b}=h,y=h.value===e,S=`${h.baseId}-tab-${e}`,j=`${h.baseId}-panel-${e}`,C=f.useCallback(N=>{p(e,N)},[p,e]);f.useLayoutEffect(()=>()=>x(e),[x,e]);const _=N=>{if(l?.(N),N.defaultPrevented)return;const E=b(),D=E.indexOf(e);if(D===-1||E.length===0)return;let U=D;N.key==="ArrowRight"?(N.preventDefault(),U=(D+1)%E.length):N.key==="ArrowLeft"?(N.preventDefault(),U=(D-1+E.length)%E.length):N.key==="Home"?(N.preventDefault(),U=0):N.key==="End"&&(N.preventDefault(),U=E.length-1);const z=E[U];z&&z!==h.value&&h.setValue(z),v(z)};return a.jsx("button",{...d,ref:C,type:"button",role:"tab",id:S,"aria-selected":y,"aria-controls":j,tabIndex:y?0:-1,className:r,disabled:u,onKeyDown:_,onClick:N=>{i?.(N),!N.defaultPrevented&&!u&&h.setValue(e)},children:t})}function ei({value:e,children:t,className:r,...i}){const l=f.useContext(Cp);if(!l)throw new Error("TabsContent must be used within a TabsRoot");const u=l.value===e,d=`${l.baseId}-panel-${e}`,h=`${l.baseId}-tab-${e}`;return a.jsx("div",{...i,role:"tabpanel",id:d,"aria-labelledby":h,className:r,hidden:!u,tabIndex:0,children:t})}function Do(e,t,r){let i=r.initialDeps??[],l,u=!0;function d(){var h,p,x;let v;r.key&&((h=r.debug)!=null&&h.call(r))&&(v=Date.now());const b=e();if(!(b.length!==i.length||b.some((j,C)=>i[C]!==j)))return l;i=b;let S;if(r.key&&((p=r.debug)!=null&&p.call(r))&&(S=Date.now()),l=t(...b),r.key&&((x=r.debug)!=null&&x.call(r))){const j=Math.round((Date.now()-v)*100)/100,C=Math.round((Date.now()-S)*100)/100,_=C/16,N=(E,D)=>{for(E=String(E);E.length<D;)E=" "+E;return E};console.info(`%c ${N(C,5)} /${N(j,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*_,120))}deg 100% 31%);`,r?.key)}return r?.onChange&&!(u&&r.skipInitialOnChange)&&r.onChange(l),u=!1,l}return d.updateDeps=h=>{i=h},d}function Ty(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const vA=(e,t)=>Math.abs(e-t)<1.01,yA=(e,t,r)=>{let i;return function(...l){e.clearTimeout(i),i=e.setTimeout(()=>t.apply(this,l),r)}},Ay=e=>{const{offsetWidth:t,offsetHeight:r}=e;return{width:t,height:r}},wA=e=>e,jA=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let l=t;l<=r;l++)i.push(l);return i},SA=(e,t)=>{const r=e.scrollElement;if(!r)return;const i=e.targetWindow;if(!i)return;const l=d=>{const{width:h,height:p}=d;t({width:Math.round(h),height:Math.round(p)})};if(l(Ay(r)),!i.ResizeObserver)return()=>{};const u=new i.ResizeObserver(d=>{const h=()=>{const p=d[0];if(p?.borderBoxSize){const x=p.borderBoxSize[0];if(x){l({width:x.inlineSize,height:x.blockSize});return}}l(Ay(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(h):h()});return u.observe(r,{box:"border-box"}),()=>{u.unobserve(r)}},Ry={passive:!0},My=typeof window>"u"?!0:"onscrollend"in window,NA=(e,t)=>{const r=e.scrollElement;if(!r)return;const i=e.targetWindow;if(!i)return;let l=0;const u=e.options.useScrollendEvent&&My?()=>{}:yA(i,()=>{t(l,!1)},e.options.isScrollingResetDelay),d=v=>()=>{const{horizontal:b,isRtl:y}=e.options;l=b?r.scrollLeft*(y&&-1||1):r.scrollTop,u(),t(l,v)},h=d(!0),p=d(!1);p(),r.addEventListener("scroll",h,Ry);const x=e.options.useScrollendEvent&&My;return x&&r.addEventListener("scrollend",p,Ry),()=>{r.removeEventListener("scroll",h),x&&r.removeEventListener("scrollend",p)}},CA=(e,t,r)=>{if(t?.borderBoxSize){const i=t.borderBoxSize[0];if(i)return Math.round(i[r.options.horizontal?"inlineSize":"blockSize"])}return e[r.options.horizontal?"offsetWidth":"offsetHeight"]},_A=(e,{adjustments:t=0,behavior:r},i)=>{var l,u;const d=e+t;(u=(l=i.scrollElement)==null?void 0:l.scrollTo)==null||u.call(l,{[i.options.horizontal?"left":"top"]:d,behavior:r})};class EA{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const i=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(l=>{l.forEach(u=>{const d=()=>{this._measureElement(u.target,u)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()})}));return{disconnect:()=>{var l;(l=i())==null||l.disconnect(),r=null},observe:l=>{var u;return(u=i())==null?void 0:u.observe(l,{box:"border-box"})},unobserve:l=>{var u;return(u=i())==null?void 0:u.unobserve(l)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([i,l])=>{typeof l>"u"&&delete r[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:wA,rangeExtractor:jA,onChange:()=>{},measureElement:CA,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...r}},this.notify=r=>{var i,l;(l=(i=this.options).onChange)==null||l.call(i,this,r)},this.maybeNotify=Do(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,u)=>{this.scrollAdjustments=0,this.scrollDirection=u?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=u,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,i)=>{const l=new Map,u=new Map;for(let d=i-1;d>=0;d--){const h=r[d];if(l.has(h.lane))continue;const p=u.get(h.lane);if(p==null||h.end>p.end?u.set(h.lane,h):h.end<p.end&&l.set(h.lane,!0),l.size===this.options.lanes)break}return u.size===this.options.lanes?Array.from(u.values()).sort((d,h)=>d.end===h.end?d.index-h.index:d.end-h.end)[0]:void 0},this.getMeasurementOptions=Do(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(r,i,l,u,d,h)=>(this.prevLanes!==void 0&&this.prevLanes!==h&&(this.lanesChangedFlag=!0),this.prevLanes=h,this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:i,scrollMargin:l,getItemKey:u,enabled:d,lanes:h}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Do(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:i,scrollMargin:l,getItemKey:u,enabled:d,lanes:h},p)=>{if(!d)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>r)for(const y of this.laneAssignments.keys())y>=r&&this.laneAssignments.delete(y);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(y=>{this.itemSizeCache.set(y.key,y.size)}));const x=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===r&&(this.lanesSettling=!1);const v=this.measurementsCache.slice(0,x),b=new Array(h).fill(void 0);for(let y=0;y<x;y++){const S=v[y];S&&(b[S.lane]=y)}for(let y=x;y<r;y++){const S=u(y),j=this.laneAssignments.get(y);let C,_;if(j!==void 0&&this.options.lanes>1){C=j;const U=b[C],z=U!==void 0?v[U]:void 0;_=z?z.end+this.options.gap:i+l}else{const U=this.options.lanes===1?v[y-1]:this.getFurthestMeasurement(v,y);_=U?U.end+this.options.gap:i+l,C=U?U.lane:y%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(y,C)}const N=p.get(S),E=typeof N=="number"?N:this.options.estimateSize(y),D=_+E;v[y]={index:y,start:_,size:E,end:D,key:S,lane:C},b[C]=y}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Do(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(r,i,l,u)=>this.range=r.length>0&&i>0?kA({measurements:r,outerSize:i,scrollOffset:l,lanes:u}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Do(()=>{let r=null,i=null;const l=this.calculateRange();return l&&(r=l.startIndex,i=l.endIndex),this.maybeNotify.updateDeps([this.isScrolling,r,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,r,i]},(r,i,l,u,d)=>u===null||d===null?[]:r({startIndex:u,endIndex:d,overscan:i,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const i=this.options.indexAttribute,l=r.getAttribute(i);return l?parseInt(l,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(r,i)=>{const l=this.indexFromElement(r),u=this.measurementsCache[l];if(!u)return;const d=u.key,h=this.elementsCache.get(d);h!==r&&(h&&this.observer.unobserve(h),this.observer.observe(r),this.elementsCache.set(d,r)),r.isConnected&&this.resizeItem(l,this.options.measureElement(r,i,this))},this.resizeItem=(r,i)=>{const l=this.measurementsCache[r];if(!l)return;const u=this.itemSizeCache.get(l.key)??l.size,d=i-u;d!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,d,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=d,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,i)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((i,l)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(l))});return}this._measureElement(r,void 0)},this.getVirtualItems=Do(()=>[this.getVirtualIndexes(),this.getMeasurements()],(r,i)=>{const l=[];for(let u=0,d=r.length;u<d;u++){const h=r[u],p=i[h];l.push(p)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const i=this.getMeasurements();if(i.length!==0)return Ty(i[Ej(0,i.length-1,l=>Ty(i[l]).start,r)])},this.getOffsetForAlignment=(r,i,l=0)=>{const u=this.getSize(),d=this.getScrollOffset();i==="auto"&&(i=r>=d+u?"end":"start"),i==="center"?r+=(l-u)/2:i==="end"&&(r-=u);const h=this.getTotalSize()+this.options.scrollMargin-u;return Math.max(Math.min(h,r),0)},this.getOffsetForIndex=(r,i="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const l=this.measurementsCache[r];if(!l)return;const u=this.getSize(),d=this.getScrollOffset();if(i==="auto")if(l.end>=d+u-this.options.scrollPaddingEnd)i="end";else if(l.start<=d+this.options.scrollPaddingStart)i="start";else return[d,i];const h=i==="end"?l.end+this.options.scrollPaddingEnd:l.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(h,i,l.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(r,{align:i="start",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,i),{adjustments:void 0,behavior:l})},this.scrollToIndex=(r,{align:i="auto",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r=Math.max(0,Math.min(r,this.options.count-1));let u=0;const d=10,h=x=>{if(!this.targetWindow)return;const v=this.getOffsetForIndex(r,x);if(!v){console.warn("Failed to get offset for index:",r);return}const[b,y]=v;this._scrollToOffset(b,{adjustments:void 0,behavior:l}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),j=this.getOffsetForIndex(r,y);if(!j){console.warn("Failed to get offset for index:",r);return}vA(j[0],S)||p(y)})},p=x=>{this.targetWindow&&(u++,u<d?this.targetWindow.requestAnimationFrame(()=>h(x)):console.warn(`Failed to scroll to index ${r} after ${d} attempts.`))};h(i)},this.scrollBy=(r,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var r;const i=this.getMeasurements();let l;if(i.length===0)l=this.options.paddingStart;else if(this.options.lanes===1)l=((r=i[i.length-1])==null?void 0:r.end)??0;else{const u=Array(this.options.lanes).fill(null);let d=i.length-1;for(;d>=0&&u.some(h=>h===null);){const h=i[d];u[h.lane]===null&&(u[h.lane]=h.end),d--}l=Math.max(...u.filter(h=>h!==null))}return Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:i,behavior:l})=>{this.options.scrollToFn(r,{behavior:l,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Ej=(e,t,r,i)=>{for(;e<=t;){const l=(e+t)/2|0,u=r(l);if(u<i)e=l+1;else if(u>i)t=l-1;else return l}return e>0?e-1:0};function kA({measurements:e,outerSize:t,scrollOffset:r,lanes:i}){const l=e.length-1,u=p=>e[p].start;if(e.length<=i)return{startIndex:0,endIndex:l};let d=Ej(0,l,u,r),h=d;if(i===1)for(;h<l&&e[h].end<r+t;)h++;else if(i>1){const p=Array(i).fill(0);for(;h<l&&p.some(v=>v<r+t);){const v=e[h];p[v.lane]=v.end,h++}const x=Array(i).fill(r+t);for(;d>=0&&x.some(v=>v>=r);){const v=e[d];x[v.lane]=v.start,d--}d=Math.max(0,d-d%i),h=Math.min(l,h+(i-1-h%i))}return{startIndex:d,endIndex:h}}const Oy=typeof document<"u"?f.useLayoutEffect:f.useEffect;function DA(e){const t=f.useReducer(()=>({}),{})[1],r={...e,onChange:(l,u)=>{var d;u?Ts.flushSync(t):t(),(d=e.onChange)==null||d.call(e,l,u)}},[i]=f.useState(()=>new EA(r));return i.setOptions(r),Oy(()=>i._didMount(),[]),Oy(()=>i._willUpdate()),i}function kj(e){return DA({observeElementRect:SA,observeElementOffset:NA,scrollToFn:_A,...e})}function zy(e){return e==="debug"?0:e==="error"?3:e==="warning"?2:e==="success"||e==="info"?1:0}function TA(e){const t=e.raw;if(t&&typeof t=="object"){const r=OA(t);if(r)return r}return MA(e.message)}function Dj(e){const t=e.raw;if(!t||typeof t!="object")return null;try{return JSON.stringify(t)}catch{return null}}function AA(e){if(e==null)return a.jsx("span",{className:"text-muted-foreground",children:"null"});let t;try{t=JSON.stringify(e,null,2)}catch{t=String(e)}return a.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed text-foreground",children:Tj(t)})}function RA(e){try{const t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{return null}return null}function MA(e){if(e.includes(`
`)){const i=e.split(/\r?\n/),[l,...u]=i;return a.jsxs("div",{className:"flex flex-col gap-[2px]",children:[a.jsx("span",{className:"break-words",children:l||" "}),u.length>0?a.jsx("pre",{className:"whitespace-pre-wrap break-words border-l border-border pl-3 text-[12px] leading-snug text-muted-foreground",children:u.join(`
`)}):null]})}const t=RA(e);if(!t)return e;const r=JSON.stringify(t,null,2);return a.jsx("pre",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-foreground",children:Tj(r)})}function Tj(e){const t=/("(?:\\.|[^"])*"(?=:)|"(?:\\.|[^"])*")|(-?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b)|\b(true|false|null)\b/g,r=[];let i=0,l,u=0;for(;(l=t.exec(e))!==null;){l.index>i&&r.push(e.slice(i,l.index));const d=l[0],h=l[1]?"text-info-300":l[2]?"text-warning-300":"text-danger-300";r.push(a.jsx("span",{className:h,children:d},`json-${u++}`)),i=t.lastIndex}return i<e.length&&r.push(e.slice(i)),r}function OA(e){const t=typeof e.event=="string"?e.event:"";if(!t)return null;const r=typeof e.level=="string"?e.level.toLowerCase():"",i=typeof e.message=="string"?e.message:"",l=e.data&&typeof e.data=="object"?e.data:{};if(t==="console.line"){const u=typeof l.message=="string"?l.message:i;return a.jsx("span",{className:"break-words",children:u||" "})}if(t==="engine.log"){const u=$A(i);return a.jsx("span",{className:"break-words",children:u.text||" "})}if(t.startsWith("build.")||t.startsWith("run.")){const u=typeof l.status=="string"?l.status:void 0,d=typeof l.reason=="string"?l.reason:void 0,h=typeof l.phase=="string"?l.phase:void 0,p=typeof l.message=="string"?l.message:void 0,x=v=>{if(!v||v<0)return"";if(v<1e3)return`${Math.round(v)} ms`;if(v<6e4)return`${(v/1e3).toFixed(1)} s`;const b=Math.floor(v/6e4),y=Math.round(v%6e4/1e3);return`${b}m ${y}s`};if(t==="build.phase.start")return a.jsx("span",{className:"break-words",children:p||(h?`Build: ${h}`:"Build phase started")});if(t==="build.start")return a.jsx("span",{className:"break-words",children:`Build started${d?` (${d})`:""}`});if(t==="build.queued")return a.jsx("span",{className:"break-words",children:`Build queued${d?` (${d})`:""}`});if(t==="build.complete")return a.jsx("span",{className:"break-words",children:`Build ${u??"completed"}`});if(t==="run.queued"){const v=typeof l.mode=="string"?l.mode:void 0;return a.jsx("span",{className:"break-words",children:`Run queued${v?` (${v})`:""}`})}if(t==="run.start"){const v=typeof l.mode=="string"?l.mode:void 0;return a.jsx("span",{className:"break-words",children:`Run started${v?` (${v})`:""}`})}if(t==="run.complete"){const v=l.execution&&typeof l.execution=="object"?l.execution:{},b=typeof v.duration_ms=="number"?v.duration_ms:void 0,y=b?`  ${x(b)}`:"";return a.jsx("span",{className:"break-words",children:`Run ${u??"completed"}${y}`})}return i.trim()?a.jsx("span",{className:"break-words",children:i}):t.startsWith("build.")?a.jsx("span",{className:"break-words",children:p||h||u||t}):a.jsx("span",{className:"break-words",children:u||t})}if(t==="engine.config.loaded"){const u=It(l.config_package)??It(l.config_package_name),d=It(l.entrypoint),h=Array.isArray(l.fields)?l.fields.length:void 0,p=lr(l.settings),x=It(p?.log_format),v=typeof p?.log_level=="number"?p.log_level:void 0,b=u?Ai(u):void 0,y=["Config loaded",d?`entry=${d}`:null,typeof h=="number"?`fields=${h}`:null,x?`log=${x}${typeof v=="number"?`(${v})`:""}`:null,b&&b!=="src"?b:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:y.join("  ")})}if(t==="engine.settings.effective"){const u=lr(l.settings);if(!u)return a.jsx("span",{className:"break-words",children:"Settings (effective)"});const d=It(u.log_format),h=typeof u.log_level=="number"?u.log_level:void 0,p=typeof u.max_empty_rows_run=="number"?u.max_empty_rows_run:void 0,x=typeof u.max_empty_cols_run=="number"?u.max_empty_cols_run:void 0,v=It(u.unmapped_prefix),b=["Settings",d?`log=${d}${typeof h=="number"?`(${h})`:""}`:null,v?`unmapped=${v}`:null,typeof p=="number"?`maxEmptyRows=${p}`:null,typeof x=="number"?`maxEmptyCols=${x}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:b.join("  ")})}if(t==="engine.hook.start"||t==="engine.hook.end"){const u=It(l.hook_name)??It(l.hook),d=t.endsWith(".start")?"start":"end";return a.jsx("span",{className:"break-words",children:u?`Hook ${u}  ${d}`:`Hook  ${d}`})}if(t==="engine.run.started"){const u=It(l.input_file),d=It(l.config_package),h=["Run started",u?Ai(u):null,d?`config=${Ai(d)}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:h.join("  ")})}if(t==="engine.run.planned"){const u=It(l.output_file),d=It(l.logs_file),h=["Run planned",u?`output=${Ai(u)}`:null,d?`logs=${Ai(d)}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:h.join("  ")})}if(t==="engine.run.completed"){const u=lr(l.execution)??{},d=lr(l.evaluation)??{},h=lr(l.counts)??{},p=It(u.status),x=It(d.outcome),v=typeof u.duration_ms=="number"?u.duration_ms:void 0,b=typeof h.tables=="number"?h.tables:void 0,y=["Run completed",p||null,x?`outcome=${x}`:null,typeof b=="number"?`tables=${b}`:null,typeof v=="number"?`${Math.round(v)}ms`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:y.join("  ")})}if(t==="engine.workbook.started"){const u=typeof l.sheet_count=="number"?l.sheet_count:void 0;return a.jsx("span",{className:"break-words",children:`Workbook start${typeof u=="number"?`  sheets=${u}`:""}`})}if(t==="engine.sheet.started"){const u=It(l.sheet_name),d=typeof l.sheet_index=="number"?l.sheet_index+1:void 0,h=["Sheet start",u||null,typeof d=="number"?`#${d}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:h.join("  ")})}if(t==="engine.sheet.tables_detected"){const u=It(l.sheet_name),d=typeof l.table_count=="number"?l.table_count:void 0,h=typeof l.row_count=="number"?l.row_count:void 0,p=[u||"Sheet",typeof d=="number"?`tables=${d}`:null,typeof h=="number"?`rows=${h}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:p.join("  ")})}if(t==="engine.table.detected"){const u=It(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,h=typeof l.row_count=="number"?l.row_count:void 0,p=typeof l.column_count=="number"?l.column_count:void 0,x=[u||null,typeof d=="number"?`Table ${d}`:"Table","detected",typeof h=="number"?`rows=${h}`:null,typeof p=="number"?`cols=${p}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:x.join("  ")})}if(t==="engine.table.extracted"){const u=It(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,h=typeof l.row_count=="number"?l.row_count:void 0,p=typeof l.col_count=="number"?l.col_count:void 0,x=[u||null,typeof d=="number"?`Table ${d}`:"Table","extracted",typeof h=="number"?`rows=${h}`:null,typeof p=="number"?`cols=${p}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:x.join("  ")})}if(t==="engine.table.mapped"){const u=It(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,h=typeof l.detected_fields=="number"?l.detected_fields:void 0,p=typeof l.expected_fields=="number"?l.expected_fields:void 0,x=typeof l.not_detected_fields=="number"?l.not_detected_fields:void 0,v=[u||null,typeof d=="number"?`Table ${d}`:"Table","mapped",typeof h=="number"&&typeof p=="number"?`detected=${h}/${p}`:null,typeof x=="number"?`not_detected=${x}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:v.join("  ")})}if(t==="engine.table.mapping_patched"){const u=It(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,h=[u||null,typeof d=="number"?`Table ${d}`:"Table","mapping patched"].filter(Boolean);return a.jsx("span",{className:"break-words",children:h.join("  ")})}if(t==="engine.table.normalized"){const u=It(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,h=typeof l.row_count=="number"?l.row_count:void 0,p=typeof l.issue_count=="number"?l.issue_count:void 0,x=lr(l.issues_by_severity),v=x?LA(x,2):null,b=[u||null,typeof d=="number"?`Table ${d}`:"Table","normalized",typeof h=="number"?`rows=${h}`:null,typeof p=="number"?`issues=${p}`:null,v||null].filter(Boolean);return a.jsx("span",{className:"break-words",children:b.join("  ")})}if(t==="engine.table.written"){const u=It(l.sheet_name),d=typeof l.table_index=="number"?l.table_index:void 0,h=It(l.output_range),p=UA(i),x=[u||null,typeof d=="number"?`Table ${d+1}`:null,"written",h||null,p?`mapped=${p.mapped} unmapped=${p.unmapped}`:null].filter(Boolean).join("  ");return a.jsx("span",{className:"break-words",children:x||"Table written"})}if(t==="engine.validation.result"){const u=typeof l.validator=="string"?l.validator:void 0,d=typeof l.field=="string"?l.field:void 0,h=typeof l.issues_found=="number"?l.issues_found:void 0,p=typeof l.column_index=="number"?l.column_index:void 0,x=Array.isArray(l.results_sample)?l.results_sample:[],v=typeof h=="number"&&h>0&&x.length>0?`sample=${Ly(JSON.stringify(x[0]),80)}`:null,b=["Validate",d??null,typeof p=="number"?`Col ${Au(p)}`:null,u?`via ${u}`:null,typeof h=="number"?`issues=${h}`:null,v].filter(Boolean);return a.jsx("span",{className:"break-words",children:b.join("  ")})}if(t==="engine.validation.summary"){const u=typeof l.issues_total=="number"?l.issues_total:void 0;return a.jsx("span",{className:"break-words",children:`Validation summary${typeof u=="number"?`  issues=${u}`:""}`})}if(t==="engine.transform.result"){const u=typeof l.transform=="string"?l.transform:void 0,d=typeof l.field=="string"?l.field:void 0,h=typeof l.input_len=="number"?l.input_len:void 0,p=typeof l.output_len=="number"?l.output_len:void 0,x=typeof l.row_count=="number"?l.row_count:void 0,v=[u?`Transform ${u}`:"Transform",d??null,typeof x=="number"?`rows=${x}`:null,typeof h=="number"&&typeof p=="number"?`${h}${p}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:v.join("  ")})}if(t==="engine.transform.derived_merge"){const u=It(l.field),d=It(l.mode),h=["Derived merge",u??null,d?`mode=${d}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:h.join("  ")})}if(t==="engine.column_detector.candidate"){const u=typeof l.column_index=="number"?l.column_index:void 0,d=typeof l.header=="string"?l.header:void 0,h=typeof l.best_field=="string"?l.best_field:void 0,p=typeof l.best_score=="number"?l.best_score:void 0,x=lr(l.scores),v=x?Bl(x,3):null,b=lr(l.contributions),y=b?Bl(b,2):null,S=[typeof u=="number"?`Col ${Au(u)}`:null,d?`"${Ly(d,32)}"`:null,h?`suggested=${h}`:null,typeof p=="number"?`(${p.toFixed(3)})`:null,v?`why: ${v}`:null,y?`signals: ${y}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:S.join("  ")})}if(t==="engine.column_detector.summary"){const u=Array.isArray(l.mapped)?l.mapped:[],d=typeof l.total_columns=="number"?l.total_columns:void 0,h=Array.isArray(l.unmapped_indices)?l.unmapped_indices.length:void 0,p=["Columns",typeof d=="number"?`total=${d}`:null,`mapped=${u.length}`,typeof h=="number"?`unmapped=${h}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:p.join("  ")})}if(t==="engine.row_detector.summary"){const u=It(l.sheet_name),d=typeof l.header_row_index=="number"?l.header_row_index+1:void 0,h=typeof l.header_score=="number"?l.header_score:void 0,p=typeof l.data_start_index=="number"?l.data_start_index+1:void 0,x=typeof l.data_end_index=="number"?l.data_end_index+1:void 0,v=[u?`${u}`:"Rows",typeof d=="number"?`headerRow=${d}`:null,typeof h=="number"?`score=${h.toFixed(3)}`:null,typeof p=="number"&&typeof x=="number"?`dataRows=${p}..${x}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:v.join("  ")})}if(t==="engine.detector.column_result"||t==="engine.detector.row_result"){const u=typeof l.sheet_name=="string"?l.sheet_name:void 0,d=typeof l.column_index=="number"?l.column_index:void 0,h=typeof l.row_index=="number"?l.row_index:void 0,p=l.detector&&typeof l.detector=="object"?l.detector:{},x=typeof p.name=="string"?p.name:void 0,v=typeof p.duration_ms=="number"?p.duration_ms:void 0,b=p.scores&&typeof p.scores=="object"?p.scores:null,y=b?Bl(b,2):null;return a.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Col ${Au(d)}`:null,typeof h=="number"?`Row ${h+1}`:null,x?`ran ${x}`:"ran detector",typeof v=="number"?zA(v):null,y?`scores: ${y}`:null].filter(Boolean).join("  ")})}if(t==="engine.row_classification"){const u=It(l.sheet_name),d=typeof l.row_index=="number"?l.row_index+1:void 0,h=lr(l.scores),p=h?Bl(h,2):null,x=lr(l.classification),v=It(x?.row_kind),b=typeof x?.score=="number"?x.score:void 0,y=Array.isArray(x?.considered_row_kinds)?x?.considered_row_kinds.length:void 0;return a.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Row ${d}`:"Row",v?`label=${v}`:null,typeof b=="number"?`(${b.toFixed(3)})`:null,typeof y=="number"?`considered=${y}`:null,p?`why: ${p}`:null].filter(Boolean).join("  ")})}if(t==="engine.column_classification"){const u=It(l.sheet_name),d=typeof l.column_index=="number"?l.column_index:void 0,h=lr(l.scores),p=h?Bl(h,2):null,x=lr(l.classification),v=It(x?.field),b=typeof x?.score=="number"?x.score:void 0,y=Array.isArray(x?.considered_fields)?x?.considered_fields.length:void 0;return a.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Col ${Au(d)}`:"Col",v?`label=${v}`:null,typeof b=="number"?`(${b.toFixed(3)})`:null,typeof y=="number"?`considered=${y}`:null,p?`why: ${p}`:null].filter(Boolean).join("  ")})}return i&&i!==t?a.jsx("span",{className:"break-words",children:i}):Object.keys(l).length?r==="debug"&&t.startsWith("engine.")?a.jsx("span",{className:"break-words",children:t}):a.jsx("span",{className:"break-words",children:t}):null}function It(e){return typeof e=="string"&&e.trim().length?e:null}function lr(e){return!e||typeof e!="object"?null:e}function Ai(e){const t=e.trim();if(!t)return"";const r=t.split(/[\\/]/).filter(Boolean);return r[r.length-1]??t}function Ly(e,t){return e.length<=t?e:e.slice(0,Math.max(0,t-1))+""}function Au(e){let t=Math.floor(e);if(!Number.isFinite(t)||t<0)return String(e);let r="";for(;t>=0;)r=String.fromCharCode(t%26+65)+r,t=Math.floor(t/26)-1;return r}function zA(e){return!Number.isFinite(e)||e<0?`${e}ms`:e<1?`${e.toFixed(3)}ms`:e<10?`${e.toFixed(2)}ms`:e<100?`${e.toFixed(1)}ms`:e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`}function Bl(e,t){const r=[];for(const[i,l]of Object.entries(e))typeof l=="number"&&Number.isFinite(l)&&r.push([i,l]);return r.length?(r.sort((i,l)=>l[1]-i[1]),r.slice(0,Math.max(1,t)).map(([i,l])=>`${i}=${l.toFixed(3)}`).join(" ")):null}function LA(e,t){const r=[];for(const[i,l]of Object.entries(e))typeof l=="number"&&Number.isFinite(l)&&r.push([i,l]);return r.length?(r.sort((i,l)=>l[1]-i[1]),r.slice(0,Math.max(1,t)).map(([i,l])=>`${i}=${Math.round(l)}`).join(" ")):null}function UA(e){const t=e.match(/Rendered table with\s+(\d+)\s+\w+\s+columns?\s+and\s+(\d+)\s+unmapped/i);if(!t)return null;const r=Number(t[1]),i=Number(t[2]);return!Number.isFinite(r)||!Number.isFinite(i)?null:{mapped:r,unmapped:i}}function $A(e){const t=(e||"").trim();if(!t)return{text:""};const r="Config hook:",i=t.startsWith(r)?t.slice(r.length).trim():t,l=i.match(/^workbook start\s*\((.+)\)\s*$/i);if(l){const v=l[1];return{text:`Workbook start  ${Ai(v)}`,title:v}}const u=i.match(/^workbook before save\s*\((.+)\)\s*$/i);if(u){const v=u[1];return{text:`Workbook save  ${Ai(v)}`,title:v}}const d=i.match(/^sheet start\s*\((.+)\)\s*$/i);if(d)return{text:`Sheet start  ${d[1]}`};const h=i.match(/^table detected\s*\((.+)\)\s*$/i);if(h)return{text:`Table detected  ${h[1].replace(/\s*,\s*/g,"  ")}`};const p=i.match(/^table mapped\s*\((.+)\)\s*$/i);if(p){const v=p[1],b=v.match(/detected_fields=\[(.*)\]/i);return b?{text:`Table mapped  detected=${b[1].split(",").map(S=>S.trim()).filter(Boolean).length}`,title:v}:{text:`Table mapped  ${v}`}}const x=i.match(/^table written\s*\((.+)\)\s*$/i);return x?{text:`Table written  ${x[1].replace(/\s*,\s*/g,"  ")}`}:{text:t}}const Uy="ade.ui.workbench.console.levelFilter.v1";function qA({console:e,latestRun:t,onClearConsole:r,runStatus:i}){const[l,u]=f.useState(()=>{const H={origin:"all",level:"info"};if(typeof window>"u")return H;try{const ee=window.localStorage.getItem(Uy);if(ee==="all"||ee==="debug"||ee==="info"||ee==="warning"||ee==="error"||ee==="success")return{...H,level:ee}}catch{}return H}),[d,h]=f.useState(!0),[p,x]=f.useState(!1),[v,b]=f.useState(!1),[y,S]=f.useState("parsed"),[j,C]=f.useState(null),[_,N]=f.useState(!1),E=f.useRef(null),D=f.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot,e.getSnapshot),U=D.length,z=f.useMemo(()=>{const H=zy(l.level),ee=[];for(let be=0;be<D.length;be+=1){const de=e.getLine(be);if(!de)continue;const L=l.origin==="all"||(de.origin??"run")===l.origin,W=zy(de.level),pe=l.level==="all"||W>=H;L&&pe&&ee.push(be)}return ee},[e,D,l]),V=z.length>0,R=U>0,A=i&&i!=="idle"?i:null,B=typeof navigator<"u"&&typeof navigator.clipboard?.writeText=="function",T=kj({count:z.length,getScrollElement:()=>E.current,estimateSize:()=>22,overscan:16});f.useEffect(()=>{d&&z.length!==0&&T.scrollToIndex(z.length-1,{align:"end"})},[d,z.length,D,T]),f.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Uy,l.level)}catch{}},[l.level]);const K=H=>{const ee=H.currentTarget,de=ee.scrollHeight-ee.scrollTop-ee.clientHeight<16;!de&&d?h(!1):de&&!d&&h(!0)},$=()=>{h(!0),T.scrollToIndex(z.length-1,{align:"end"})},q=f.useCallback(async H=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(H),!0}catch{}if(typeof document>"u")return!1;try{const ee=document.createElement("textarea");ee.value=H,ee.setAttribute("readonly","true"),ee.style.position="fixed",ee.style.left="-9999px",document.body.appendChild(ee),ee.select();const be=document.execCommand("copy");return document.body.removeChild(ee),be}catch{return!1}},[]),I=async()=>{if(!V)return;const H=[];for(const be of z){const de=e.getLine(be);de&&H.push(ZA(de,y))}const ee=await q(H.join(`
`));x(ee),ee&&window.setTimeout(()=>x(!1),1500)},je=f.useCallback(H=>{!H.raw||typeof H.raw!="object"||(C(H),N(!0))},[]),M=()=>{N(!1)};return a.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-md border border-terminal-border bg-terminal font-mono text-[13px] leading-relaxed text-terminal-foreground shadow-[0_8px_24px_rgb(var(--sys-color-shadow)/0.25)]",children:[a.jsxs("div",{className:"flex flex-col border-b border-terminal-border bg-gradient-to-r from-terminal/95 via-terminal/80 to-terminal/95",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-4 py-2",children:[a.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase tracking-[0.22em] text-terminal-muted",children:[a.jsx("span",{className:"font-semibold tracking-[0.3em] text-terminal-foreground",children:"ADE"}),a.jsx("span",{className:"text-terminal-muted",children:"Terminal"}),A?a.jsx("span",{className:"rounded border border-terminal-border bg-terminal/70 px-2 py-1 text-[10px] font-semibold tracking-[0.2em] text-terminal-foreground/80",children:A}):null]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-terminal-muted",children:[a.jsxs("label",{className:"flex items-center gap-1 text-terminal-muted",title:"Filter logs by scope",children:["Origin",a.jsxs("select",{value:l.origin,onChange:H=>u(ee=>({...ee,origin:H.target.value})),className:"rounded border border-terminal-border bg-terminal/80 px-2 py-1 text-[11px] text-terminal-foreground shadow-sm focus:border-ring focus:outline-none",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"run",children:"Run"}),a.jsx("option",{value:"build",children:"Build"})]})]}),a.jsxs("label",{className:"flex items-center gap-1 text-terminal-muted",title:"Filter by severity",children:["Level",a.jsxs("select",{value:l.level,onChange:H=>u(ee=>({...ee,level:H.target.value})),className:"rounded border border-terminal-border bg-terminal/80 px-2 py-1 text-[11px] text-terminal-foreground shadow-sm focus:border-ring focus:outline-none",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"debug",children:"Debug"}),a.jsx("option",{value:"info",children:"Info"}),a.jsx("option",{value:"warning",children:"Warning"}),a.jsx("option",{value:"error",children:"Error"}),a.jsx("option",{value:"success",children:"Success"})]})]}),a.jsx("button",{type:"button",onClick:()=>d?h(!1):$(),className:te("rounded px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",d?"border border-success-500/60 bg-success-500/10 text-success-500":"border border-terminal-border bg-transparent text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),title:"Auto-scroll to newest logs",children:d?"Following":"Follow"}),a.jsxs("div",{className:"flex items-center gap-2",title:"Toggle between parsed view and raw NDJSON",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-terminal-muted",children:"View"}),a.jsxs("div",{role:"radiogroup","aria-label":"Console view mode",className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",role:"radio","aria-checked":y==="parsed",onClick:()=>S("parsed"),className:te("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition focus:outline-none focus:ring-1 focus:ring-ring",y==="parsed"?"border-success-500/70 bg-success-500/10 text-success-500":"border-terminal-border text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),children:"Parsed"}),a.jsx("button",{type:"button",role:"radio","aria-checked":y==="ndjson",onClick:()=>S("ndjson"),className:te("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition focus:outline-none focus:ring-1 focus:ring-ring",y==="ndjson"?"border-success-500/70 bg-success-500/10 text-success-500":"border-terminal-border text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),children:"NDJSON"})]})]}),a.jsx("button",{type:"button",onClick:I,className:te("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",p?"border border-success-500/60 bg-success-500/10 text-success-500":"border border-terminal-border bg-transparent text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),disabled:!V,title:B?"Copy visible console output":"Copy may be blocked by browser permissions",children:p?"Copied":"Copy"}),a.jsx("button",{type:"button",onClick:()=>r?.(),className:"rounded border border-terminal-border bg-terminal/70 px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] text-terminal-muted transition hover:border-terminal-border/80 hover:text-terminal-foreground",title:"Clear console output",children:"Clear"})]})]}),t?a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-terminal-border bg-terminal/80 px-4 py-1.5 text-[11px] text-terminal-muted",children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[a.jsx(BA,{status:t.status}),a.jsxs("span",{className:"truncate",title:t.runId,children:["Run ",t.runId]}),a.jsxs("span",{className:"truncate text-terminal-muted",children:[t.documentName??"Document not recorded",qy(t.sheetNames)?`  ${qy(t.sheetNames)}`:""]}),t.durationMs!=null?a.jsxs("span",{className:"text-terminal-muted",children:[" ",KA(t.durationMs)]}):null]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-terminal-muted",children:"Downloads"}),a.jsx(tm,{href:t.outputUrl,label:t.outputFilename?`Output (${t.outputFilename})`:"Output",disabledLabel:"Output (not ready)",disabledReason:"Output is not available for this run."}),a.jsx(tm,{href:t.logsUrl,label:"Events (NDJSON)",disabledLabel:"Events",disabledReason:"Events log is not available."}),a.jsx(tm,{href:t.inputUrl,label:"Input",disabledLabel:"Input",disabledReason:"Input file download is not available."})]})]}):null]}),a.jsx("div",{ref:E,onScroll:K,className:"flex-1 overflow-auto bg-terminal",children:V?a.jsx("div",{style:{height:T.getTotalSize(),position:"relative"},children:T.getVirtualItems().map(H=>{const ee=z[H.index],be=typeof ee=="number"?e.getLine(ee):void 0;if(!be)return null;const de=be.id??`${be.timestamp??"tbd"}-${be.origin??"run"}-${ee}`,L=!!(be.raw&&typeof be.raw=="object"),W=y==="ndjson"?a.jsx("span",{className:"whitespace-pre-wrap break-words",children:Dj(be)??be.message}):TA(be);return a.jsx("div",{"data-index":H.index,ref:T.measureElement,className:"group flex items-start gap-3 border-b border-terminal-border/60 px-3 py-[2px] transition hover:bg-terminal/70 last:border-b-0",style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${H.start}px)`},children:a.jsxs("div",{className:"flex min-w-0 flex-1 items-baseline gap-2",children:[HA(be.timestamp),a.jsx("span",{className:"shrink-0 w-12 text-right font-mono text-[11px] leading-snug text-terminal-muted/70",children:Am(be.origin)}),a.jsx("span",{className:te("shrink-0 w-14 text-right font-mono text-[11px] leading-snug",QA(be.level)),children:VA(be.level)}),a.jsx("div",{className:te("min-w-0 whitespace-pre-wrap break-words text-[13px] leading-snug",PA(be.level)),children:W}),L?a.jsx("button",{type:"button",onClick:()=>je(be),className:"ml-2 shrink-0 rounded border border-terminal-border bg-terminal/70 px-2 py-[2px] text-[10px] font-semibold uppercase tracking-[0.12em] text-terminal-muted opacity-0 transition hover:border-terminal-border/80 hover:text-terminal-foreground group-hover:opacity-100",title:"Inspect pretty JSON",children:"JSON"}):null]})},de)})}):R?a.jsx($y,{title:"No console output matches these filters.",description:"Adjust origin or level filters to see more."}):a.jsx($y,{title:"Waiting for ADE output",description:"Run validation or a test to stream logs into this terminal."})}),_&&j?.raw&&typeof j.raw=="object"?a.jsxs("div",{className:"border-t border-terminal-border bg-terminal",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 text-[11px] text-terminal-muted",children:[a.jsxs("div",{className:"min-w-0 truncate",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-terminal-muted",children:"Inspector"}),j.timestamp?a.jsxs("span",{className:"ml-2 text-terminal-muted",children:["[",_p(j.timestamp),"]"]}):null,a.jsx("span",{className:"ml-2 text-terminal-muted",children:Am(j.origin)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:async()=>{const H=j.raw,ee=JSON.stringify(H,null,2),be=await q(ee);b(be),be&&window.setTimeout(()=>b(!1),1500)},className:"rounded border border-terminal-border bg-terminal/70 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground",title:"Copy pretty JSON",children:v?"Copied":"Copy JSON"}),a.jsx("button",{type:"button",onClick:M,className:"rounded border border-terminal-border bg-terminal/70 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground",title:"Close inspector",children:"Close"})]})]}),a.jsx("div",{className:"max-h-[260px] overflow-auto bg-terminal/80 px-3 pb-3",children:AA(j.raw)})]}):null]})}function $y({title:e,description:t}){return a.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-terminal-muted",children:[a.jsx("p",{className:"tracking-wide text-terminal-muted",children:e}),a.jsx("p",{className:"text-[12px] leading-relaxed text-terminal-muted",children:t})]})}function BA({status:e}){const t=IA(e),r=e==="succeeded"?"bg-success-500":e==="running"||e==="queued"?"bg-warning-400":t?"bg-terminal-muted":"bg-danger-500";return a.jsx("span",{className:te("inline-block h-2.5 w-2.5 rounded-full",r),"aria-hidden":!0})}function PA(e){switch(e){case"warning":return"text-warning-500";case"error":return"text-danger-500";case"success":return"text-success-500";default:return"text-terminal-foreground"}}function FA(e){switch(e){case"warning":return"WARN";case"error":return"ERROR";case"success":return"DONE";default:return"INFO"}}function IA(e){return e==="cancelled"}function Am(e){return e==="build"?"[build]":"[run]"}function HA(e){const t=_p(e);return t?a.jsxs("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-terminal-muted/80",children:["[",t,"]"]}):a.jsx("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-terminal-muted/70","aria-hidden":!0,children:""})}function VA(e){switch(e){case"warning":return" warn";case"error":return" error";case"success":return" done";default:return" info"}}function QA(e){switch(e){case"warning":return"text-warning-500";case"error":return"text-danger-500";case"success":return"text-success-500";default:return"text-terminal-muted/70"}}function _p(e){if(!e)return"";const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});const r=e.trim();return r.length>0?r:""}function ZA(e,t){const r=_p(e.timestamp),i=Am(e.origin),l=FA(e.level).toLowerCase(),u=t==="ndjson"?Dj(e)??e.message??"":e.message??"";return`${r?`[${r}] `:""}${i} ${l} ${u}`.trim()}function qy(e){return e?e.length===0?"All worksheets":e.join(", "):null}function KA(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const t=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${t}m ${r}s`}function tm({href:e,label:t,disabledLabel:r,disabledReason:i}){const l=typeof e=="string"&&e.trim().length>0,u="inline-flex items-center gap-1 rounded border px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] transition",d="border-terminal-border bg-terminal/70 text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground",h="border-terminal-border bg-terminal/60 text-terminal-muted/60 cursor-not-allowed";return l?a.jsxs("a",{className:te(u,d),href:e,title:t,children:[a.jsx(tc,{className:"h-3.5 w-3.5 text-terminal-muted"}),a.jsx("span",{className:"truncate",children:t})]}):a.jsx("span",{className:te(u,h),title:i,children:r})}function GA({validation:e}){const t=YA(e),r=XA(e);return a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:t}),e.lastRunAt?a.jsxs("span",{children:["Last run ",JA(e.lastRunAt)]}):null]}),e.messages.length>0?a.jsx("ul",{className:"space-y-1.5",children:e.messages.map((i,l)=>a.jsxs("li",{className:WA(i.level),children:[i.path?a.jsx("span",{className:"block text-[11px] font-medium uppercase tracking-wide text-muted-foreground",children:i.path}):null,a.jsx("span",{className:"text-[13px]",children:i.message})]},`${i.level}-${i.path??l}-${l}`))}):a.jsx("p",{className:"text-xs leading-relaxed text-muted-foreground",children:r})]})}function WA(e){switch(e){case"error":return"text-danger-600";case"warning":return"text-warning-600";default:return"text-muted-foreground"}}function YA(e){switch(e.status){case"running":return"Running validation...";case"success":{if(e.messages.length===0)return"Validation completed with no issues.";const t=e.messages.length;return`Validation completed with ${t} ${t===1?"issue":"issues"}.`}case"error":return e.error??"Validation failed.";default:return"No validation run yet."}}function XA(e){return e.status==="running"?"Validation in progress...":e.status==="success"?"No validation issues detected.":e.status==="error"?e.error??"Validation failed.":"Trigger validation from the workbench header to see ADE parsing results and manifest issues."}function JA(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function eR({height:e,console:t,validation:r,activePane:i,onPaneChange:l,latestRun:u,onClearConsole:d,runStatus:h,onToggleCollapse:p,appearance:x="light"}){const v=r.messages.length>0,b=x==="dark"?{surface:"border-border bg-card text-foreground",header:"border-border bg-card",hideButton:"border-border-strong bg-popover text-foreground hover:border-border-strong hover:bg-muted"}:{surface:"border-border bg-muted text-foreground",header:"border-border bg-muted",hideButton:"border-border-strong bg-card text-foreground hover:border-border-strong hover:bg-muted"};return a.jsx("section",{className:te("flex min-h-0 flex-col overflow-hidden border-t",b.surface),style:{height:e},children:a.jsxs(Ed,{value:i,onValueChange:y=>l(y),children:[a.jsxs("div",{className:te("flex flex-none items-center justify-between border-b px-3 py-1.5",b.header),onDoubleClick:p,title:p?"Double-click to hide console":void 0,children:[a.jsxs(kd,{className:"flex items-center gap-3 text-[11px] font-medium",children:[a.jsx(nc,{value:"terminal",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:"Terminal"}),a.jsxs(nc,{value:"problems",className:"flex items-center gap-1 rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Problems",v?a.jsx("span",{className:"inline-flex h-4 min-w-[1.25rem] items-center justify-center rounded-full bg-danger-600 px-1 text-[10px] font-semibold text-on-danger",children:r.messages.length}):null]})]}),p?a.jsx("button",{type:"button",onClick:p,className:te("rounded px-2 py-1 text-[11px] font-semibold uppercase tracking-wide shadow-sm transition",b.hideButton),title:"Hide console",children:"Hide"}):null]}),a.jsx(ei,{value:"terminal",className:"flex min-h-0 flex-1 flex-col",children:a.jsx(qA,{console:t,latestRun:u,onClearConsole:d,runStatus:h})}),a.jsx(ei,{value:"problems",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:a.jsx(GA,{validation:r})})]})})}function tR({containerRef:e,tabs:t,activeTabId:r,onCloseTab:i,onSelectRecentTab:l,onSelectTab:u}){return f.useEffect(()=>{if(!t.length)return;const d=p=>{const x=e.current;if(!x)return!1;const v=p.target;if(v instanceof Node&&x.contains(v))return!0;const b=document.activeElement;return!!(b&&x.contains(b))},h=p=>{if(!(p.ctrlKey||p.metaKey)||!d(p))return;if(p.key.toLowerCase()==="w"){if(!r)return;p.preventDefault(),i(r);return}if(p.key==="Tab"){if(t.length<2)return;p.preventDefault(),l(p.shiftKey?"backward":"forward");return}const x=v=>{if(t.length<2)return;const b=t.findIndex(C=>C.id===r),S=((b>=0?b:0)+v+t.length)%t.length,j=t[S];j&&u(j.id)};if(p.key==="PageUp"){p.preventDefault(),x(-1);return}p.key==="PageDown"&&(p.preventDefault(),x(1))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,r,i,l,u,e]),null}const nR=f.lazy(()=>Gm(()=>import("./MonacoCodeEditor-D-08hFjd.js"),[])),sR=f.forwardRef(function(t,r){const{className:i,...l}=t;return a.jsx(f.Suspense,{fallback:a.jsx("div",{className:te("relative h-full w-full",i),children:a.jsx("div",{className:"flex h-full items-center justify-center text-xs text-muted-foreground",children:"Loading editor"})}),children:a.jsx(nR,{...l,ref:r,className:i})})});function rR({tabs:e,activeTabId:t,editorTheme:r,onContentChange:i,onSaveTab:l,canSaveFiles:u=!1,readOnly:d=!1,onRetryTabLoad:h,onSelectTab:p,isTabDragging:x=!1}){return f.useMemo(()=>e.find(b=>b.id===t)??null,[e,t])?a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1",children:e.map(b=>a.jsx(ei,{value:b.id,className:"flex min-h-0 min-w-0 flex-1",children:b.status==="loading"?a.jsxs("div",{className:"flex flex-1 items-center justify-center text-sm text-muted-foreground",children:["Loading ",b.name,""]}):b.status==="error"?a.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:b.error??"Unable to load the file."}),a.jsx("button",{type:"button",className:"rounded bg-brand-600 px-3 py-1 text-xs font-medium text-on-brand hover:bg-brand-500",onClick:()=>h?h(b.id):p(b.id),children:"Retry loading"})]}):a.jsx("div",{className:te("flex min-h-0 min-w-0 flex-1",x&&"pointer-events-none select-none"),children:a.jsx(sR,{value:b.content,language:b.language??"plaintext",path:b.id,theme:r,readOnly:d,onChange:y=>i(b.id,y??""),onSaveShortcut:()=>{u&&l?.(b.id)}})})},b.id))}):a.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-muted-foreground",children:"Select a file from the explorer to begin editing."})}function aR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.useMemo(()=>i=>{t.forEach(l=>l(i))},t)}const Dd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ho(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ep(e){return"nodeType"in e}function Rs(e){var t,r;return e?Ho(e)?e:Ep(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function kp(e){const{Document:t}=Rs(e);return e instanceof t}function hc(e){return Ho(e)?!1:e instanceof Rs(e).HTMLElement}function Aj(e){return e instanceof Rs(e).SVGElement}function Vo(e){return e?Ho(e)?e.document:Ep(e)?kp(e)?e:hc(e)||Aj(e)?e.ownerDocument:document:document:document}const Gr=Dd?f.useLayoutEffect:f.useEffect;function Dp(e){const t=f.useRef(e);return Gr(()=>{t.current=e}),f.useCallback(function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return t.current==null?void 0:t.current(...i)},[])}function iR(){const e=f.useRef(null),t=f.useCallback((i,l)=>{e.current=setInterval(i,l)},[]),r=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function sc(e,t){t===void 0&&(t=[e]);const r=f.useRef(e);return Gr(()=>{r.current!==e&&(r.current=e)},t),r}function mc(e,t){const r=f.useRef();return f.useMemo(()=>{const i=e(r.current);return r.current=i,i},[...t])}function rd(e){const t=Dp(e),r=f.useRef(null),i=f.useCallback(l=>{l!==r.current&&t?.(l,r.current),r.current=l},[]);return[r,i]}function Rm(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let nm={};function pc(e,t){return f.useMemo(()=>{if(t)return t;const r=nm[e]==null?0:nm[e]+1;return nm[e]=r,e+"-"+r},[e,t])}function Rj(e){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];return i.reduce((u,d)=>{const h=Object.entries(d);for(const[p,x]of h){const v=u[p];v!=null&&(u[p]=v+e*x)}return u},{...t})}}const Uo=Rj(1),ad=Rj(-1);function oR(e){return"clientX"in e&&"clientY"in e}function Tp(e){if(!e)return!1;const{KeyboardEvent:t}=Rs(e.target);return t&&e instanceof t}function lR(e){if(!e)return!1;const{TouchEvent:t}=Rs(e.target);return t&&e instanceof t}function Mm(e){if(lR(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return oR(e)?{x:e.clientX,y:e.clientY}:null}const rc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[rc.Translate.toString(e),rc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:i}=e;return t+" "+r+"ms "+i}}}),By="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cR(e){return e.matches(By)?e:e.querySelector(By)}const uR={display:"none"};function dR(e){let{id:t,value:r}=e;return Wt.createElement("div",{id:t,style:uR},r)}function fR(e){let{id:t,announcement:r,ariaLiveType:i="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Wt.createElement("div",{id:t,style:l,role:"status","aria-live":i,"aria-atomic":!0},r)}function hR(){const[e,t]=f.useState("");return{announce:f.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const Mj=f.createContext(null);function mR(e){const t=f.useContext(Mj);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function pR(){const[e]=f.useState(()=>new Set),t=f.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[f.useCallback(i=>{let{type:l,event:u}=i;e.forEach(d=>{var h;return(h=d[l])==null?void 0:h.call(d,u)})},[e]),t]}const gR={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xR={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bR(e){let{announcements:t=xR,container:r,hiddenTextDescribedById:i,screenReaderInstructions:l=gR}=e;const{announce:u,announcement:d}=hR(),h=pc("DndLiveRegion"),[p,x]=f.useState(!1);if(f.useEffect(()=>{x(!0)},[]),mR(f.useMemo(()=>({onDragStart(b){let{active:y}=b;u(t.onDragStart({active:y}))},onDragMove(b){let{active:y,over:S}=b;t.onDragMove&&u(t.onDragMove({active:y,over:S}))},onDragOver(b){let{active:y,over:S}=b;u(t.onDragOver({active:y,over:S}))},onDragEnd(b){let{active:y,over:S}=b;u(t.onDragEnd({active:y,over:S}))},onDragCancel(b){let{active:y,over:S}=b;u(t.onDragCancel({active:y,over:S}))}}),[u,t])),!p)return null;const v=Wt.createElement(Wt.Fragment,null,Wt.createElement(dR,{id:i,value:l.draggable}),Wt.createElement(fR,{id:h,announcement:d}));return r?Ts.createPortal(v,r):v}var Kn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Kn||(Kn={}));function id(){}function vR(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function yR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const Dr=Object.freeze({x:0,y:0});function wR(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jR(e,t){let{data:{value:r}}=e,{data:{value:i}}=t;return r-i}function SR(e,t){let{data:{value:r}}=e,{data:{value:i}}=t;return i-r}function NR(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Py(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const CR=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:i}=e;const l=Py(t,t.left,t.top),u=[];for(const d of i){const{id:h}=d,p=r.get(h);if(p){const x=wR(Py(p),l);u.push({id:h,data:{droppableContainer:d,value:x}})}}return u.sort(jR)};function _R(e,t){const r=Math.max(t.top,e.top),i=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),u=Math.min(t.top+t.height,e.top+e.height),d=l-i,h=u-r;if(i<l&&r<u){const p=t.width*t.height,x=e.width*e.height,v=d*h,b=v/(p+x-v);return Number(b.toFixed(4))}return 0}const ER=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:i}=e;const l=[];for(const u of i){const{id:d}=u,h=r.get(d);if(h){const p=_R(h,t);p>0&&l.push({id:d,data:{droppableContainer:u,value:p}})}}return l.sort(SR)};function kR(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function Oj(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Dr}function DR(e){return function(r){for(var i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];return l.reduce((d,h)=>({...d,top:d.top+e*h.y,bottom:d.bottom+e*h.y,left:d.left+e*h.x,right:d.right+e*h.x}),{...r})}}const TR=DR(1);function AR(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function RR(e,t,r){const i=AR(t);if(!i)return e;const{scaleX:l,scaleY:u,x:d,y:h}=i,p=e.left-d-(1-l)*parseFloat(r),x=e.top-h-(1-u)*parseFloat(r.slice(r.indexOf(" ")+1)),v=l?e.width/l:e.width,b=u?e.height/u:e.height;return{width:v,height:b,top:x,right:p+v,bottom:x+b,left:p}}const MR={ignoreTransform:!1};function Qo(e,t){t===void 0&&(t=MR);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:x,transformOrigin:v}=Rs(e).getComputedStyle(e);x&&(r=RR(r,x,v))}const{top:i,left:l,width:u,height:d,bottom:h,right:p}=r;return{top:i,left:l,width:u,height:d,bottom:h,right:p}}function Fy(e){return Qo(e,{ignoreTransform:!0})}function OR(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function zR(e,t){return t===void 0&&(t=Rs(e).getComputedStyle(e)),t.position==="fixed"}function LR(e,t){t===void 0&&(t=Rs(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const u=t[l];return typeof u=="string"?r.test(u):!1})}function Ap(e,t){const r=[];function i(l){if(t!=null&&r.length>=t||!l)return r;if(kp(l)&&l.scrollingElement!=null&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!hc(l)||Aj(l)||r.includes(l))return r;const u=Rs(e).getComputedStyle(l);return l!==e&&LR(l,u)&&r.push(l),zR(l,u)?r:i(l.parentNode)}return e?i(e):r}function zj(e){const[t]=Ap(e,1);return t??null}function sm(e){return!Dd||!e?null:Ho(e)?e:Ep(e)?kp(e)||e===Vo(e).scrollingElement?window:hc(e)?e:null:null}function Lj(e){return Ho(e)?e.scrollX:e.scrollLeft}function Uj(e){return Ho(e)?e.scrollY:e.scrollTop}function Om(e){return{x:Lj(e),y:Uj(e)}}var Jn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Jn||(Jn={}));function $j(e){return!Dd||!e?!1:e===document.scrollingElement}function qj(e){const t={x:0,y:0},r=$j(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,u=e.scrollLeft<=t.x,d=e.scrollTop>=i.y,h=e.scrollLeft>=i.x;return{isTop:l,isLeft:u,isBottom:d,isRight:h,maxScroll:i,minScroll:t}}const UR={x:.2,y:.2};function $R(e,t,r,i,l){let{top:u,left:d,right:h,bottom:p}=r;i===void 0&&(i=10),l===void 0&&(l=UR);const{isTop:x,isBottom:v,isLeft:b,isRight:y}=qj(e),S={x:0,y:0},j={x:0,y:0},C={height:t.height*l.y,width:t.width*l.x};return!x&&u<=t.top+C.height?(S.y=Jn.Backward,j.y=i*Math.abs((t.top+C.height-u)/C.height)):!v&&p>=t.bottom-C.height&&(S.y=Jn.Forward,j.y=i*Math.abs((t.bottom-C.height-p)/C.height)),!y&&h>=t.right-C.width?(S.x=Jn.Forward,j.x=i*Math.abs((t.right-C.width-h)/C.width)):!b&&d<=t.left+C.width&&(S.x=Jn.Backward,j.x=i*Math.abs((t.left+C.width-d)/C.width)),{direction:S,speed:j}}function qR(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:t,left:r,right:i,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:i,bottom:l,width:e.clientWidth,height:e.clientHeight}}function Bj(e){return e.reduce((t,r)=>Uo(t,Om(r)),Dr)}function BR(e){return e.reduce((t,r)=>t+Lj(r),0)}function PR(e){return e.reduce((t,r)=>t+Uj(r),0)}function FR(e,t){if(t===void 0&&(t=Qo),!e)return;const{top:r,left:i,bottom:l,right:u}=t(e);zj(e)&&(l<=0||u<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const IR=[["x",["left","right"],BR],["y",["top","bottom"],PR]];class Rp{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Ap(r),l=Bj(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,d,h]of IR)for(const p of d)Object.defineProperty(this,p,{get:()=>{const x=h(i),v=l[u]-x;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Zl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...r)})},this.target=t}add(t,r,i){var l;(l=this.target)==null||l.addEventListener(t,r,i),this.listeners.push([t,r,i])}}function HR(e){const{EventTarget:t}=Rs(e);return e instanceof t?e:Vo(e)}function rm(e,t){const r=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+i**2)>t:"x"in t&&"y"in t?r>t.x&&i>t.y:"x"in t?r>t.x:"y"in t?i>t.y:!1}var ur;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ur||(ur={}));function Iy(e){e.preventDefault()}function VR(e){e.stopPropagation()}var Bt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Bt||(Bt={}));const Pj={start:[Bt.Space,Bt.Enter],cancel:[Bt.Esc],end:[Bt.Space,Bt.Enter,Bt.Tab]},QR=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Bt.Right:return{...r,x:r.x+25};case Bt.Left:return{...r,x:r.x-25};case Bt.Down:return{...r,y:r.y+25};case Bt.Up:return{...r,y:r.y-25}}};class Fj{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Zl(Vo(r)),this.windowListeners=new Zl(Rs(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ur.Resize,this.handleCancel),this.windowListeners.add(ur.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ur.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,i=t.node.current;i&&FR(i),r(Dr)}handleKeyDown(t){if(Tp(t)){const{active:r,context:i,options:l}=this.props,{keyboardCodes:u=Pj,coordinateGetter:d=QR,scrollBehavior:h="smooth"}=l,{code:p}=t;if(u.end.includes(p)){this.handleEnd(t);return}if(u.cancel.includes(p)){this.handleCancel(t);return}const{collisionRect:x}=i.current,v=x?{x:x.left,y:x.top}:Dr;this.referenceCoordinates||(this.referenceCoordinates=v);const b=d(t,{active:r,context:i.current,currentCoordinates:v});if(b){const y=ad(b,v),S={x:0,y:0},{scrollableAncestors:j}=i.current;for(const C of j){const _=t.code,{isTop:N,isRight:E,isLeft:D,isBottom:U,maxScroll:z,minScroll:V}=qj(C),R=qR(C),A={x:Math.min(_===Bt.Right?R.right-R.width/2:R.right,Math.max(_===Bt.Right?R.left:R.left+R.width/2,b.x)),y:Math.min(_===Bt.Down?R.bottom-R.height/2:R.bottom,Math.max(_===Bt.Down?R.top:R.top+R.height/2,b.y))},B=_===Bt.Right&&!E||_===Bt.Left&&!D,T=_===Bt.Down&&!U||_===Bt.Up&&!N;if(B&&A.x!==b.x){const K=C.scrollLeft+y.x,$=_===Bt.Right&&K<=z.x||_===Bt.Left&&K>=V.x;if($&&!y.y){C.scrollTo({left:K,behavior:h});return}$?S.x=C.scrollLeft-K:S.x=_===Bt.Right?C.scrollLeft-z.x:C.scrollLeft-V.x,S.x&&C.scrollBy({left:-S.x,behavior:h});break}else if(T&&A.y!==b.y){const K=C.scrollTop+y.y,$=_===Bt.Down&&K<=z.y||_===Bt.Up&&K>=V.y;if($&&!y.x){C.scrollTo({top:K,behavior:h});return}$?S.y=C.scrollTop-K:S.y=_===Bt.Down?C.scrollTop-z.y:C.scrollTop-V.y,S.y&&C.scrollBy({top:-S.y,behavior:h});break}}this.handleMove(t,Uo(ad(b,this.referenceCoordinates),S))}}}handleMove(t,r){const{onMove:i}=this.props;t.preventDefault(),i(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Fj.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:i=Pj,onActivation:l}=t,{active:u}=r;const{code:d}=e.nativeEvent;if(i.start.includes(d)){const h=u.activatorNode.current;return h&&e.target!==h?!1:(e.preventDefault(),l?.({event:e.nativeEvent}),!0)}return!1}}];function Hy(e){return!!(e&&"distance"in e)}function Vy(e){return!!(e&&"delay"in e)}class Mp{constructor(t,r,i){var l;i===void 0&&(i=HR(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:u}=t,{target:d}=u;this.props=t,this.events=r,this.document=Vo(d),this.documentListeners=new Zl(this.document),this.listeners=new Zl(i),this.windowListeners=new Zl(Rs(d)),this.initialCoordinates=(l=Mm(u))!=null?l:Dr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ur.Resize,this.handleCancel),this.windowListeners.add(ur.DragStart,Iy),this.windowListeners.add(ur.VisibilityChange,this.handleCancel),this.windowListeners.add(ur.ContextMenu,Iy),this.documentListeners.add(ur.Keydown,this.handleKeydown),r){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vy(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Hy(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:i,onPending:l}=this.props;l(i,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(ur.Click,VR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ur.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:i,initialCoordinates:l,props:u}=this,{onMove:d,options:{activationConstraint:h}}=u;if(!l)return;const p=(r=Mm(t))!=null?r:Dr,x=ad(l,p);if(!i&&h){if(Hy(h)){if(h.tolerance!=null&&rm(x,h.tolerance))return this.handleCancel();if(rm(x,h.distance))return this.handleStart()}if(Vy(h)&&rm(x,h.tolerance))return this.handleCancel();this.handlePending(h,x);return}t.cancelable&&t.preventDefault(),d(p)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Bt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ZR={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Op extends Mp{constructor(t){const{event:r}=t,i=Vo(r.target);super(t,ZR,i)}}Op.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:i}=t;return!r.isPrimary||r.button!==0?!1:(i?.({event:r}),!0)}}];const KR={move:{name:"mousemove"},end:{name:"mouseup"}};var zm;(function(e){e[e.RightClick=2]="RightClick"})(zm||(zm={}));class GR extends Mp{constructor(t){super(t,KR,Vo(t.event.target))}}GR.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:i}=t;return r.button===zm.RightClick?!1:(i?.({event:r}),!0)}}];const am={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class WR extends Mp{constructor(t){super(t,am)}static setup(){return window.addEventListener(am.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(am.move.name,t)};function t(){}}}WR.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:i}=t;const{touches:l}=r;return l.length>1?!1:(i?.({event:r}),!0)}}];var Kl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Kl||(Kl={}));var od;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(od||(od={}));function YR(e){let{acceleration:t,activator:r=Kl.Pointer,canScroll:i,draggingRect:l,enabled:u,interval:d=5,order:h=od.TreeOrder,pointerCoordinates:p,scrollableAncestors:x,scrollableAncestorRects:v,delta:b,threshold:y}=e;const S=JR({delta:b,disabled:!u}),[j,C]=iR(),_=f.useRef({x:0,y:0}),N=f.useRef({x:0,y:0}),E=f.useMemo(()=>{switch(r){case Kl.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case Kl.DraggableRect:return l}},[r,l,p]),D=f.useRef(null),U=f.useCallback(()=>{const V=D.current;if(!V)return;const R=_.current.x*N.current.x,A=_.current.y*N.current.y;V.scrollBy(R,A)},[]),z=f.useMemo(()=>h===od.TreeOrder?[...x].reverse():x,[h,x]);f.useEffect(()=>{if(!u||!x.length||!E){C();return}for(const V of z){if(i?.(V)===!1)continue;const R=x.indexOf(V),A=v[R];if(!A)continue;const{direction:B,speed:T}=$R(V,A,E,t,y);for(const K of["x","y"])S[K][B[K]]||(T[K]=0,B[K]=0);if(T.x>0||T.y>0){C(),D.current=V,j(U,d),_.current=T,N.current=B;return}}_.current={x:0,y:0},N.current={x:0,y:0},C()},[t,U,i,C,u,d,JSON.stringify(E),JSON.stringify(S),j,x,z,v,JSON.stringify(y)])}const XR={x:{[Jn.Backward]:!1,[Jn.Forward]:!1},y:{[Jn.Backward]:!1,[Jn.Forward]:!1}};function JR(e){let{delta:t,disabled:r}=e;const i=Rm(t);return mc(l=>{if(r||!i||!l)return XR;const u={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[Jn.Backward]:l.x[Jn.Backward]||u.x===-1,[Jn.Forward]:l.x[Jn.Forward]||u.x===1},y:{[Jn.Backward]:l.y[Jn.Backward]||u.y===-1,[Jn.Forward]:l.y[Jn.Forward]||u.y===1}}},[r,t,i])}function eM(e,t){const r=t!=null?e.get(t):void 0,i=r?r.node.current:null;return mc(l=>{var u;return t==null?null:(u=i??l)!=null?u:null},[i,t])}function tM(e,t){return f.useMemo(()=>e.reduce((r,i)=>{const{sensor:l}=i,u=l.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,i)}));return[...r,...u]},[]),[e,t])}var ac;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ac||(ac={}));var Lm;(function(e){e.Optimized="optimized"})(Lm||(Lm={}));const Qy=new Map;function nM(e,t){let{dragging:r,dependencies:i,config:l}=t;const[u,d]=f.useState(null),{frequency:h,measure:p,strategy:x}=l,v=f.useRef(e),b=_(),y=sc(b),S=f.useCallback(function(N){N===void 0&&(N=[]),!y.current&&d(E=>E===null?N:E.concat(N.filter(D=>!E.includes(D))))},[y]),j=f.useRef(null),C=mc(N=>{if(b&&!r)return Qy;if(!N||N===Qy||v.current!==e||u!=null){const E=new Map;for(let D of e){if(!D)continue;if(u&&u.length>0&&!u.includes(D.id)&&D.rect.current){E.set(D.id,D.rect.current);continue}const U=D.node.current,z=U?new Rp(p(U),U):null;D.rect.current=z,z&&E.set(D.id,z)}return E}return N},[e,u,r,b,p]);return f.useEffect(()=>{v.current=e},[e]),f.useEffect(()=>{b||S()},[r,b]),f.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),f.useEffect(()=>{b||typeof h!="number"||j.current!==null||(j.current=setTimeout(()=>{S(),j.current=null},h))},[h,b,S,...i]),{droppableRects:C,measureDroppableContainers:S,measuringScheduled:u!=null};function _(){switch(x){case ac.Always:return!1;case ac.BeforeDragging:return r;default:return!r}}}function Ij(e,t){return mc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function sM(e,t){return Ij(e,t)}function rM(e){let{callback:t,disabled:r}=e;const i=Dp(t),l=f.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(i)},[i,r]);return f.useEffect(()=>()=>l?.disconnect(),[l]),l}function Td(e){let{callback:t,disabled:r}=e;const i=Dp(t),l=f.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(i)},[r]);return f.useEffect(()=>()=>l?.disconnect(),[l]),l}function aM(e){return new Rp(Qo(e),e)}function Zy(e,t,r){t===void 0&&(t=aM);const[i,l]=f.useState(null);function u(){l(p=>{if(!e)return null;if(e.isConnected===!1){var x;return(x=p??r)!=null?x:null}const v=t(e);return JSON.stringify(p)===JSON.stringify(v)?p:v})}const d=rM({callback(p){if(e)for(const x of p){const{type:v,target:b}=x;if(v==="childList"&&b instanceof HTMLElement&&b.contains(e)){u();break}}}}),h=Td({callback:u});return Gr(()=>{u(),e?(h?.observe(e),d?.observe(document.body,{childList:!0,subtree:!0})):(h?.disconnect(),d?.disconnect())},[e]),i}function iM(e){const t=Ij(e);return Oj(e,t)}const Ky=[];function oM(e){const t=f.useRef(e),r=mc(i=>e?i&&i!==Ky&&e&&t.current&&e.parentNode===t.current.parentNode?i:Ap(e):Ky,[e]);return f.useEffect(()=>{t.current=e},[e]),r}function lM(e){const[t,r]=f.useState(null),i=f.useRef(e),l=f.useCallback(u=>{const d=sm(u.target);d&&r(h=>h?(h.set(d,Om(d)),new Map(h)):null)},[]);return f.useEffect(()=>{const u=i.current;if(e!==u){d(u);const h=e.map(p=>{const x=sm(p);return x?(x.addEventListener("scroll",l,{passive:!0}),[x,Om(x)]):null}).filter(p=>p!=null);r(h.length?new Map(h):null),i.current=e}return()=>{d(e),d(u)};function d(h){h.forEach(p=>{const x=sm(p);x?.removeEventListener("scroll",l)})}},[l,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((u,d)=>Uo(u,d),Dr):Bj(e):Dr,[e,t])}function Gy(e,t){t===void 0&&(t=[]);const r=f.useRef(null);return f.useEffect(()=>{r.current=null},t),f.useEffect(()=>{const i=e!==Dr;i&&!r.current&&(r.current=e),!i&&r.current&&(r.current=null)},[e]),r.current?ad(e,r.current):Dr}function cM(e){f.useEffect(()=>{if(!Dd)return;const t=e.map(r=>{let{sensor:i}=r;return i.setup==null?void 0:i.setup()});return()=>{for(const r of t)r?.()}},e.map(t=>{let{sensor:r}=t;return r}))}function uM(e,t){return f.useMemo(()=>e.reduce((r,i)=>{let{eventName:l,handler:u}=i;return r[l]=d=>{u(d,t)},r},{}),[e,t])}function Hj(e){return f.useMemo(()=>e?OR(e):null,[e])}const Wy=[];function dM(e,t){t===void 0&&(t=Qo);const[r]=e,i=Hj(r?Rs(r):null),[l,u]=f.useState(Wy);function d(){u(()=>e.length?e.map(p=>$j(p)?i:new Rp(t(p),p)):Wy)}const h=Td({callback:d});return Gr(()=>{h?.disconnect(),d(),e.forEach(p=>h?.observe(p))},[e]),l}function fM(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return hc(t)?t:e}function hM(e){let{measure:t}=e;const[r,i]=f.useState(null),l=f.useCallback(x=>{for(const{target:v}of x)if(hc(v)){i(b=>{const y=t(v);return b?{...b,width:y.width,height:y.height}:y});break}},[t]),u=Td({callback:l}),d=f.useCallback(x=>{const v=fM(x);u?.disconnect(),v&&u?.observe(v),i(v?t(v):null)},[t,u]),[h,p]=rd(d);return f.useMemo(()=>({nodeRef:h,rect:r,setRef:p}),[r,h,p])}const mM=[{sensor:Op,options:{}},{sensor:Fj,options:{}}],pM={current:{}},Pu={draggable:{measure:Fy},droppable:{measure:Fy,strategy:ac.WhileDragging,frequency:Lm.Optimized},dragOverlay:{measure:Qo}};class Gl extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,i;return(r=(i=this.get(t))==null?void 0:i.node.current)!=null?r:void 0}}const gM={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Gl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:id},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Pu,measureDroppableContainers:id,windowRect:null,measuringScheduled:!1},xM={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:id,draggableNodes:new Map,over:null,measureDroppableContainers:id},Ad=f.createContext(xM),Vj=f.createContext(gM);function bM(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Gl}}}function vM(e,t){switch(t.type){case Kn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Kn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Kn.DragEnd:case Kn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Kn.RegisterDroppable:{const{element:r}=t,{id:i}=r,l=new Gl(e.droppable.containers);return l.set(i,r),{...e,droppable:{...e.droppable,containers:l}}}case Kn.SetDroppableDisabled:{const{id:r,key:i,disabled:l}=t,u=e.droppable.containers.get(r);if(!u||i!==u.key)return e;const d=new Gl(e.droppable.containers);return d.set(r,{...u,disabled:l}),{...e,droppable:{...e.droppable,containers:d}}}case Kn.UnregisterDroppable:{const{id:r,key:i}=t,l=e.droppable.containers.get(r);if(!l||i!==l.key)return e;const u=new Gl(e.droppable.containers);return u.delete(r),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function yM(e){let{disabled:t}=e;const{active:r,activatorEvent:i,draggableNodes:l}=f.useContext(Ad),u=Rm(i),d=Rm(r?.id);return f.useEffect(()=>{if(!t&&!i&&u&&d!=null){if(!Tp(u)||document.activeElement===u.target)return;const h=l.get(d);if(!h)return;const{activatorNode:p,node:x}=h;if(!p.current&&!x.current)return;requestAnimationFrame(()=>{for(const v of[p.current,x.current]){if(!v)continue;const b=cR(v);if(b){b.focus();break}}})}},[i,t,l,d,u]),null}function wM(e,t){let{transform:r,...i}=t;return e!=null&&e.length?e.reduce((l,u)=>u({transform:l,...i}),r):r}function jM(e){return f.useMemo(()=>({draggable:{...Pu.draggable,...e?.draggable},droppable:{...Pu.droppable,...e?.droppable},dragOverlay:{...Pu.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function SM(e){let{activeNode:t,measure:r,initialRect:i,config:l=!0}=e;const u=f.useRef(!1),{x:d,y:h}=typeof l=="boolean"?{x:l,y:l}:l;Gr(()=>{if(!d&&!h||!t){u.current=!1;return}if(u.current||!i)return;const x=t?.node.current;if(!x||x.isConnected===!1)return;const v=r(x),b=Oj(v,i);if(d||(b.x=0),h||(b.y=0),u.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const y=zj(x);y&&y.scrollBy({top:b.y,left:b.x})}},[t,d,h,i,r])}const Qj=f.createContext({...Dr,scaleX:1,scaleY:1});var Xa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xa||(Xa={}));const NM=f.memo(function(t){var r,i,l,u;let{id:d,accessibility:h,autoScroll:p=!0,children:x,sensors:v=mM,collisionDetection:b=ER,measuring:y,modifiers:S,...j}=t;const C=f.useReducer(vM,void 0,bM),[_,N]=C,[E,D]=pR(),[U,z]=f.useState(Xa.Uninitialized),V=U===Xa.Initialized,{draggable:{active:R,nodes:A,translate:B},droppable:{containers:T}}=_,K=R!=null?A.get(R):null,$=f.useRef({initial:null,translated:null}),q=f.useMemo(()=>{var lt;return R!=null?{id:R,data:(lt=K?.data)!=null?lt:pM,rect:$}:null},[R,K]),I=f.useRef(null),[je,M]=f.useState(null),[H,ee]=f.useState(null),be=sc(j,Object.values(j)),de=pc("DndDescribedBy",d),L=f.useMemo(()=>T.getEnabled(),[T]),W=jM(y),{droppableRects:pe,measureDroppableContainers:G,measuringScheduled:ie}=nM(L,{dragging:V,dependencies:[B.x,B.y],config:W.droppable}),J=eM(A,R),ne=f.useMemo(()=>H?Mm(H):null,[H]),oe=vt(),he=sM(J,W.draggable.measure);SM({activeNode:R!=null?A.get(R):null,config:oe.layoutShiftCompensation,initialRect:he,measure:W.draggable.measure});const ue=Zy(J,W.draggable.measure,he),Oe=Zy(J?J.parentElement:null),Ge=f.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=T.getNodeFor((r=Ge.current.over)==null?void 0:r.id),ze=hM({measure:W.dragOverlay.measure}),Pe=(i=ze.nodeRef.current)!=null?i:J,Me=V?(l=ze.rect)!=null?l:ue:null,Be=!!(ze.nodeRef.current&&ze.rect),We=iM(Be?null:ue),st=Hj(Pe?Rs(Pe):null),P=oM(V?Se??J:null),F=dM(P),X=wM(S,{transform:{x:B.x-We.x,y:B.y-We.y,scaleX:1,scaleY:1},activatorEvent:H,active:q,activeNodeRect:ue,containerNodeRect:Oe,draggingNodeRect:Me,over:Ge.current.over,overlayNodeRect:ze.rect,scrollableAncestors:P,scrollableAncestorRects:F,windowRect:st}),Te=ne?Uo(ne,B):null,_e=lM(P),me=Gy(_e),De=Gy(_e,[ue]),ye=Uo(X,me),ke=Me?TR(Me,X):null,Ie=q&&ke?b({active:q,collisionRect:ke,droppableRects:pe,droppableContainers:L,pointerCoordinates:Te}):null,ht=NR(Ie,"id"),[tt,An]=f.useState(null),Ut=Be?X:Uo(X,De),At=kR(Ut,(u=tt?.rect)!=null?u:null,ue),$t=f.useRef(null),Ze=f.useCallback((lt,yt)=>{let{sensor:Rt,options:an}=yt;if(I.current==null)return;const jn=A.get(I.current);if(!jn)return;const gn=lt.nativeEvent,xn=new Rt({active:I.current,activeNode:jn,event:gn,options:an,context:Ge,onAbort(ct){if(!A.get(ct))return;const{onDragAbort:dn}=be.current,it={id:ct};dn?.(it),E({type:"onDragAbort",event:it})},onPending(ct,_t,dn,it){if(!A.get(ct))return;const{onDragPending:tn}=be.current,ns={id:ct,constraint:_t,initialCoordinates:dn,offset:it};tn?.(ns),E({type:"onDragPending",event:ns})},onStart(ct){const _t=I.current;if(_t==null)return;const dn=A.get(_t);if(!dn)return;const{onDragStart:it}=be.current,Ms={activatorEvent:gn,active:{id:_t,data:dn.data,rect:$}};Ts.unstable_batchedUpdates(()=>{it?.(Ms),z(Xa.Initializing),N({type:Kn.DragStart,initialCoordinates:ct,active:_t}),E({type:"onDragStart",event:Ms}),M($t.current),ee(gn)})},onMove(ct){N({type:Kn.DragMove,coordinates:ct})},onEnd:Fn(Kn.DragEnd),onCancel:Fn(Kn.DragCancel)});$t.current=xn;function Fn(ct){return async function(){const{active:dn,collisions:it,over:Ms,scrollAdjustedTranslate:tn}=Ge.current;let ns=null;if(dn&&tn){const{cancelDrop:bs}=be.current;ns={activatorEvent:gn,active:dn,collisions:it,delta:tn,over:Ms},ct===Kn.DragEnd&&typeof bs=="function"&&await Promise.resolve(bs(ns))&&(ct=Kn.DragCancel)}I.current=null,Ts.unstable_batchedUpdates(()=>{N({type:ct}),z(Xa.Uninitialized),An(null),M(null),ee(null),$t.current=null;const bs=ct===Kn.DragEnd?"onDragEnd":"onDragCancel";if(ns){const In=be.current[bs];In?.(ns),E({type:bs,event:ns})}})}}},[A]),pn=f.useCallback((lt,yt)=>(Rt,an)=>{const jn=Rt.nativeEvent,gn=A.get(an);if(I.current!==null||!gn||jn.dndKit||jn.defaultPrevented)return;const xn={active:gn};lt(Rt,yt.options,xn)===!0&&(jn.dndKit={capturedBy:yt.sensor},I.current=an,Ze(Rt,yt))},[A,Ze]),Rn=tM(v,pn);cM(v),Gr(()=>{ue&&U===Xa.Initializing&&z(Xa.Initialized)},[ue,U]),f.useEffect(()=>{const{onDragMove:lt}=be.current,{active:yt,activatorEvent:Rt,collisions:an,over:jn}=Ge.current;if(!yt||!Rt)return;const gn={active:yt,activatorEvent:Rt,collisions:an,delta:{x:ye.x,y:ye.y},over:jn};Ts.unstable_batchedUpdates(()=>{lt?.(gn),E({type:"onDragMove",event:gn})})},[ye.x,ye.y]),f.useEffect(()=>{const{active:lt,activatorEvent:yt,collisions:Rt,droppableContainers:an,scrollAdjustedTranslate:jn}=Ge.current;if(!lt||I.current==null||!yt||!jn)return;const{onDragOver:gn}=be.current,xn=an.get(ht),Fn=xn&&xn.rect.current?{id:xn.id,rect:xn.rect.current,data:xn.data,disabled:xn.disabled}:null,ct={active:lt,activatorEvent:yt,collisions:Rt,delta:{x:jn.x,y:jn.y},over:Fn};Ts.unstable_batchedUpdates(()=>{An(Fn),gn?.(ct),E({type:"onDragOver",event:ct})})},[ht]),Gr(()=>{Ge.current={activatorEvent:H,active:q,activeNode:J,collisionRect:ke,collisions:Ie,droppableRects:pe,draggableNodes:A,draggingNode:Pe,draggingNodeRect:Me,droppableContainers:T,over:tt,scrollableAncestors:P,scrollAdjustedTranslate:ye},$.current={initial:Me,translated:ke}},[q,J,Ie,ke,A,Pe,Me,pe,T,tt,P,ye]),YR({...oe,delta:B,draggingRect:ke,pointerCoordinates:Te,scrollableAncestors:P,scrollableAncestorRects:F});const we=f.useMemo(()=>({active:q,activeNode:J,activeNodeRect:ue,activatorEvent:H,collisions:Ie,containerNodeRect:Oe,dragOverlay:ze,draggableNodes:A,droppableContainers:T,droppableRects:pe,over:tt,measureDroppableContainers:G,scrollableAncestors:P,scrollableAncestorRects:F,measuringConfiguration:W,measuringScheduled:ie,windowRect:st}),[q,J,ue,H,Ie,Oe,ze,A,T,pe,tt,G,P,F,W,ie,st]),He=f.useMemo(()=>({activatorEvent:H,activators:Rn,active:q,activeNodeRect:ue,ariaDescribedById:{draggable:de},dispatch:N,draggableNodes:A,over:tt,measureDroppableContainers:G}),[H,Rn,q,ue,N,de,A,tt,G]);return Wt.createElement(Mj.Provider,{value:D},Wt.createElement(Ad.Provider,{value:He},Wt.createElement(Vj.Provider,{value:we},Wt.createElement(Qj.Provider,{value:At},x)),Wt.createElement(yM,{disabled:h?.restoreFocus===!1})),Wt.createElement(bR,{...h,hiddenTextDescribedById:de}));function vt(){const lt=je?.autoScrollEnabled===!1,yt=typeof p=="object"?p.enabled===!1:p===!1,Rt=V&&!lt&&!yt;return typeof p=="object"?{...p,enabled:Rt}:{enabled:Rt}}}),CM=f.createContext(null),Yy="button",_M="Draggable";function EM(e){let{id:t,data:r,disabled:i=!1,attributes:l}=e;const u=pc(_M),{activators:d,activatorEvent:h,active:p,activeNodeRect:x,ariaDescribedById:v,draggableNodes:b,over:y}=f.useContext(Ad),{role:S=Yy,roleDescription:j="draggable",tabIndex:C=0}=l??{},_=p?.id===t,N=f.useContext(_?Qj:CM),[E,D]=rd(),[U,z]=rd(),V=uM(d,t),R=sc(r);Gr(()=>(b.set(t,{id:t,key:u,node:E,activatorNode:U,data:R}),()=>{const B=b.get(t);B&&B.key===u&&b.delete(t)}),[b,t]);const A=f.useMemo(()=>({role:S,tabIndex:C,"aria-disabled":i,"aria-pressed":_&&S===Yy?!0:void 0,"aria-roledescription":j,"aria-describedby":v.draggable}),[i,S,C,_,j,v.draggable]);return{active:p,activatorEvent:h,activeNodeRect:x,attributes:A,isDragging:_,listeners:i?void 0:V,node:E,over:y,setNodeRef:D,setActivatorNodeRef:z,transform:N}}function kM(){return f.useContext(Vj)}const DM="Droppable",TM={timeout:25};function AM(e){let{data:t,disabled:r=!1,id:i,resizeObserverConfig:l}=e;const u=pc(DM),{active:d,dispatch:h,over:p,measureDroppableContainers:x}=f.useContext(Ad),v=f.useRef({disabled:r}),b=f.useRef(!1),y=f.useRef(null),S=f.useRef(null),{disabled:j,updateMeasurementsFor:C,timeout:_}={...TM,...l},N=sc(C??i),E=f.useCallback(()=>{if(!b.current){b.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{x(Array.isArray(N.current)?N.current:[N.current]),S.current=null},_)},[_]),D=Td({callback:E,disabled:j||!d}),U=f.useCallback((A,B)=>{D&&(B&&(D.unobserve(B),b.current=!1),A&&D.observe(A))},[D]),[z,V]=rd(U),R=sc(t);return f.useEffect(()=>{!D||!z.current||(D.disconnect(),b.current=!1,D.observe(z.current))},[z,D]),f.useEffect(()=>(h({type:Kn.RegisterDroppable,element:{id:i,key:u,disabled:r,node:z,rect:y,data:R}}),()=>h({type:Kn.UnregisterDroppable,key:u,id:i})),[i]),f.useEffect(()=>{r!==v.current.disabled&&(h({type:Kn.SetDroppableDisabled,id:i,key:u,disabled:r}),v.current.disabled=r)},[i,u,r,h]),{active:d,rect:y,isOver:p?.id===i,node:z,over:p,setNodeRef:V}}function Zj(e,t,r){const i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(t,1)[0]),i}function RM(e,t){return e.reduce((r,i,l)=>{const u=t.get(i);return u&&(r[l]=u),r},Array(e.length))}function Ru(e){return e!==null&&e>=0}function MM(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function OM(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Mu={scaleX:1,scaleY:1},zM=e=>{var t;let{rects:r,activeNodeRect:i,activeIndex:l,overIndex:u,index:d}=e;const h=(t=r[l])!=null?t:i;if(!h)return null;const p=LM(r,d,l);if(d===l){const x=r[u];return x?{x:l<u?x.left+x.width-(h.left+h.width):x.left-h.left,y:0,...Mu}:null}return d>l&&d<=u?{x:-h.width-p,y:0,...Mu}:d<l&&d>=u?{x:h.width+p,y:0,...Mu}:{x:0,y:0,...Mu}};function LM(e,t,r){const i=e[t],l=e[t-1],u=e[t+1];return!i||!l&&!u?0:r<t?l?i.left-(l.left+l.width):u.left-(i.left+i.width):u?u.left-(i.left+i.width):i.left-(l.left+l.width)}const Kj=e=>{let{rects:t,activeIndex:r,overIndex:i,index:l}=e;const u=Zj(t,i,r),d=t[l],h=u[l];return!h||!d?null:{x:h.left-d.left,y:h.top-d.top,scaleX:h.width/d.width,scaleY:h.height/d.height}},Gj="Sortable",Wj=Wt.createContext({activeIndex:-1,containerId:Gj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Kj,disabled:{draggable:!1,droppable:!1}});function UM(e){let{children:t,id:r,items:i,strategy:l=Kj,disabled:u=!1}=e;const{active:d,dragOverlay:h,droppableRects:p,over:x,measureDroppableContainers:v}=kM(),b=pc(Gj,r),y=h.rect!==null,S=f.useMemo(()=>i.map(V=>typeof V=="object"&&"id"in V?V.id:V),[i]),j=d!=null,C=d?S.indexOf(d.id):-1,_=x?S.indexOf(x.id):-1,N=f.useRef(S),E=!MM(S,N.current),D=_!==-1&&C===-1||E,U=OM(u);Gr(()=>{E&&j&&v(S)},[E,S,j,v]),f.useEffect(()=>{N.current=S},[S]);const z=f.useMemo(()=>({activeIndex:C,containerId:b,disabled:U,disableTransforms:D,items:S,overIndex:_,useDragOverlay:y,sortedRects:RM(S,p),strategy:l}),[C,b,U.draggable,U.droppable,D,S,_,p,y,l]);return Wt.createElement(Wj.Provider,{value:z},t)}const $M=e=>{let{id:t,items:r,activeIndex:i,overIndex:l}=e;return Zj(r,i,l).indexOf(t)},qM=e=>{let{containerId:t,isSorting:r,wasDragging:i,index:l,items:u,newIndex:d,previousItems:h,previousContainerId:p,transition:x}=e;return!x||!i||h!==u&&l===d?!1:r?!0:d!==l&&t===p},BM={duration:200,easing:"ease"},Yj="transform",PM=rc.Transition.toString({property:Yj,duration:0,easing:"linear"}),FM={roleDescription:"sortable"};function IM(e){let{disabled:t,index:r,node:i,rect:l}=e;const[u,d]=f.useState(null),h=f.useRef(r);return Gr(()=>{if(!t&&r!==h.current&&i.current){const p=l.current;if(p){const x=Qo(i.current,{ignoreTransform:!0}),v={x:p.left-x.left,y:p.top-x.top,scaleX:p.width/x.width,scaleY:p.height/x.height};(v.x||v.y)&&d(v)}}r!==h.current&&(h.current=r)},[t,r,i,l]),f.useEffect(()=>{u&&d(null)},[u]),u}function HM(e){let{animateLayoutChanges:t=qM,attributes:r,disabled:i,data:l,getNewIndex:u=$M,id:d,strategy:h,resizeObserverConfig:p,transition:x=BM}=e;const{items:v,containerId:b,activeIndex:y,disabled:S,disableTransforms:j,sortedRects:C,overIndex:_,useDragOverlay:N,strategy:E}=f.useContext(Wj),D=VM(i,S),U=v.indexOf(d),z=f.useMemo(()=>({sortable:{containerId:b,index:U,items:v},...l}),[b,l,U,v]),V=f.useMemo(()=>v.slice(v.indexOf(d)),[v,d]),{rect:R,node:A,isOver:B,setNodeRef:T}=AM({id:d,data:z,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...p}}),{active:K,activatorEvent:$,activeNodeRect:q,attributes:I,setNodeRef:je,listeners:M,isDragging:H,over:ee,setActivatorNodeRef:be,transform:de}=EM({id:d,data:z,attributes:{...FM,...r},disabled:D.draggable}),L=aR(T,je),W=!!K,pe=W&&!j&&Ru(y)&&Ru(_),G=!N&&H,ie=G&&pe?de:null,ne=pe?ie??(h??E)({rects:C,activeNodeRect:q,activeIndex:y,overIndex:_,index:U}):null,oe=Ru(y)&&Ru(_)?u({id:d,items:v,activeIndex:y,overIndex:_}):U,he=K?.id,ue=f.useRef({activeId:he,items:v,newIndex:oe,containerId:b}),Oe=v!==ue.current.items,Ge=t({active:K,containerId:b,isDragging:H,isSorting:W,id:d,index:U,items:v,newIndex:ue.current.newIndex,previousItems:ue.current.items,previousContainerId:ue.current.containerId,transition:x,wasDragging:ue.current.activeId!=null}),Se=IM({disabled:!Ge,index:U,node:A,rect:R});return f.useEffect(()=>{W&&ue.current.newIndex!==oe&&(ue.current.newIndex=oe),b!==ue.current.containerId&&(ue.current.containerId=b),v!==ue.current.items&&(ue.current.items=v)},[W,oe,b,v]),f.useEffect(()=>{if(he===ue.current.activeId)return;if(he!=null&&ue.current.activeId==null){ue.current.activeId=he;return}const Pe=setTimeout(()=>{ue.current.activeId=he},50);return()=>clearTimeout(Pe)},[he]),{active:K,activeIndex:y,attributes:I,data:z,rect:R,index:U,newIndex:oe,items:v,isOver:B,isSorting:W,isDragging:H,listeners:M,node:A,overIndex:_,over:ee,setNodeRef:L,setActivatorNodeRef:be,setDroppableNodeRef:T,setDraggableNodeRef:je,transform:Se??ne,transition:ze()};function ze(){if(Se||Oe&&ue.current.newIndex===U)return PM;if(!(G&&!Tp($)||!x)&&(W||Ge))return rc.Transition.toString({...x,property:Yj})}}function VM(e,t){var r,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:t.draggable,droppable:(i=e?.droppable)!=null?i:t.droppable}}Bt.Down,Bt.Right,Bt.Up,Bt.Left;function QM({tab:e,isActive:t,isDirty:r,draggingId:i,onContextMenu:l,onCloseTab:u,setTabNode:d}){const{attributes:h,listeners:p,setNodeRef:x,transform:v,transition:b,isDragging:y}=HM({id:e.id}),S={transform:rc.Transform.toString(v),transition:b},j=y||i===e.id,C=!!e.pinned;return a.jsxs("div",{ref:_=>{x(_),d(e.id,_)},style:S,className:te("group relative mr-1 flex min-w-0 items-stretch",j&&"opacity-60"),"data-editor-tab":"true",...h,...p,children:[a.jsxs(nc,{value:e.id,"data-tab-id":e.id,title:e.id,onContextMenu:l,onMouseDown:_=>{_.button===1&&(_.preventDefault(),u(e.id))},className:te("relative flex min-w-[3rem] max-w-[16rem] items-center gap-2 overflow-hidden rounded-t-lg border px-2 py-1.5 pr-8 text-sm font-medium transition-[background-color,border-color,color] duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",t?"border-border border-b-card bg-card text-foreground shadow-[0_1px_0_rgb(var(--sys-color-shadow)/0.08)]":"border-transparent border-b-border text-muted-foreground hover:border-border hover:bg-card/70 hover:text-foreground",C?"min-w-[4rem] max-w-[8rem] justify-center":"min-w-[9rem] justify-start px-3"),children:[C?a.jsx("span",{className:"flex-none text-[12px]","aria-label":"Pinned",children:a.jsx(fT,{filled:t})}):null,a.jsx("span",{className:"block min-w-0 flex-1 truncate text-left",children:e.name}),e.status==="loading"?a.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-muted-foreground","aria-label":"Loading",children:""}):null,e.status==="error"?a.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Load failed",children:"!"}):null,e.saving?a.jsx("span",{className:"flex-none","aria-label":"Saving",title:"Saving changes",children:a.jsx(dT,{})}):null,e.saveError?a.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Save failed",title:e.saveError,children:"!"}):null,r?a.jsx("span",{className:"flex-none text-xs leading-none text-brand-600",children:""}):null]}),a.jsx("button",{type:"button",className:te("absolute right-1 top-1/2 -translate-y-1/2 rounded p-0.5 text-xs transition focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-1 focus-visible:ring-offset-background",t?"text-muted-foreground hover:bg-muted hover:text-foreground":"text-muted-foreground opacity-0 group-hover:opacity-100 hover:bg-muted hover:text-foreground"),onClick:_=>{_.stopPropagation(),u(e.id)},"aria-label":`Close ${e.name}`,children:""})]})}const Zr="h-4 w-4 text-current opacity-80";function ZM({currentTab:e,tabs:t,canSaveFiles:r,hasDirtyTabs:i,onCloseTab:l,onCloseOtherTabs:u,onCloseTabsToRight:d,onCloseAllTabs:h,onPinTab:p,onUnpinTab:x,onSaveTab:v,onSaveAllTabs:b}){const y=t.findIndex(D=>D.id===e.id),S=y>=0&&y<t.length-1,j=t.length>1,C=e.status==="ready"&&e.content!==e.initialContent,_=!!v&&r&&C&&!e.saving,N=!!b&&r&&i,E={save:"Ctrl+S",saveAll:"Ctrl+Shift+S",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W"};return[{id:"save",label:e.saving?"Saving":"Save",icon:a.jsx(aj,{className:Zr}),disabled:!_,shortcut:E.save,onSelect:()=>v?.(e.id)},{id:"save-all",label:"Save All",icon:a.jsx(sT,{className:Zr}),disabled:!N,shortcut:E.saveAll,onSelect:()=>b?.()},{id:"pin",label:e.pinned?"Unpin":"Pin",icon:e.pinned?a.jsx(nj,{className:Zr}):a.jsx(xp,{className:Zr}),dividerAbove:!0,onSelect:()=>e.pinned?x(e.id):p(e.id)},{id:"close",label:"Close",icon:a.jsx(Ws,{className:Zr}),dividerAbove:!0,shortcut:E.close,onSelect:()=>l(e.id)},{id:"close-others",label:"Close Others",icon:a.jsx(rT,{className:Zr}),disabled:!j,shortcut:E.closeOthers,onSelect:()=>u(e.id)},{id:"close-right",label:"Close Tabs to the Right",icon:a.jsx(aT,{className:Zr}),disabled:!S,shortcut:E.closeRight,onSelect:()=>d(e.id)},{id:"close-all",label:"Close All",icon:a.jsx(iT,{className:Zr}),dividerAbove:!0,disabled:t.length===0,shortcut:E.closeAll,onSelect:()=>h()}]}function KM({pinnedTabs:e,regularTabs:t,activeTabId:r,onSelectTab:i}){if(e.length===0&&t.length===0)return[{id:"empty",label:"No open editors",onSelect:()=>{},disabled:!0}];const l=[],u=(d,h)=>{const p=d.status==="ready"&&d.content!==d.initialContent,x=[];d.id===r&&x.push("Active"),d.saving?x.push("Saving"):p&&x.push("Unsaved"),l.push({id:`switch-${d.id}`,label:`${d.saving?" ":p?" ":""}${d.name}`,icon:d.pinned?a.jsx(xp,{className:Zr}):a.jsx(sj,{className:Zr}),shortcut:x.length>0?x.join("  "):void 0,dividerAbove:h,onSelect:()=>i(d.id)})};return e.forEach(d=>u(d,!1)),t.forEach((d,h)=>u(d,h===0&&e.length>0)),l}const Xy=220,Jy=64,GM=14;function WM({tabs:e,activeTabId:t,menuAppearance:r,canSaveFiles:i=!1,onSelectTab:l,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:h,onCloseAllTabs:p,onMoveTab:x,onPinTab:v,onUnpinTab:b,onSaveTab:y,onSaveAllTabs:S,onTabDragStateChange:j}){const[C,_]=f.useState(null),[N,E]=f.useState(null),[D,U]=f.useState(null),[z,V]=f.useState({left:!1,right:!1}),[R,A]=f.useState(0),B=f.useRef(null),T=f.useRef(null),K=f.useRef(new Map),$=f.useMemo(()=>e.filter(oe=>oe.pinned),[e]),q=f.useMemo(()=>e.filter(oe=>!oe.pinned),[e]),je=f.useMemo(()=>e.filter(oe=>oe.status==="ready"&&oe.content!==oe.initialContent),[e]).length>0,M=yR(vR(Op,{activationConstraint:{distance:5}})),H="border-border bg-card",ee="text-muted-foreground hover:bg-muted hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",be=f.useCallback((oe,he)=>{const ue=K.current;he?ue.set(oe,he):ue.delete(oe)},[]);f.useEffect(()=>{C&&!e.some(oe=>oe.id===C.tabId)&&_(null),e.length||E(null)},[C,e]);const de=f.useCallback(oe=>{U(String(oe.active.id)),j?.(!0)},[j]),L=f.useCallback(oe=>{const he=oe.active.id,ue=oe.over?.id;if(ue&&he!==ue){const Oe=e.findIndex(Se=>Se.id===he),Ge=e.findIndex(Se=>Se.id===ue);if(Oe!==-1&&Ge!==-1){const Se=Oe<Ge?Ge+1:Ge;x(String(he),Se)}}U(null),j?.(!1)},[x,j,e]),W=f.useCallback(()=>{U(null),j?.(!1)},[j]),pe=f.useCallback(()=>{const oe=B.current;if(!oe){V({left:!1,right:!1});return}const{scrollLeft:he,scrollWidth:ue,clientWidth:Oe}=oe;V({left:he>2,right:he+Oe<ue-2})},[]);f.useEffect(()=>{const oe=B.current;if(!oe){V({left:!1,right:!1});return}pe();const he=()=>pe();oe.addEventListener("scroll",he),window.addEventListener("resize",pe);const ue=typeof ResizeObserver<"u"?new ResizeObserver(pe):null;return ue?.observe(oe),()=>{oe.removeEventListener("scroll",he),window.removeEventListener("resize",pe),ue?.disconnect()}},[e.length,pe]),f.useEffect(()=>{if(!D){A(0);return}const oe=he=>{const ue=B.current;if(!ue){A(0);return}const Oe=ue.getBoundingClientRect();he.clientX<Oe.left+Jy?A(-1):he.clientX>Oe.right-Jy?A(1):A(0)};return window.addEventListener("pointermove",oe),()=>{window.removeEventListener("pointermove",oe),A(0)}},[D]),f.useEffect(()=>{if(!D||R===0)return;let oe;const he=()=>{const ue=B.current;ue&&(ue.scrollBy({left:R*GM}),oe=window.requestAnimationFrame(he))};return oe=window.requestAnimationFrame(he),()=>window.cancelAnimationFrame(oe)},[R,D]),f.useEffect(()=>{K.current.get(t)?.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},[t,e.length]);const G=f.useMemo(()=>{if(!C)return[];const oe=e.find(he=>he.id===C.tabId);return oe?ZM({currentTab:oe,tabs:e,canSaveFiles:i,hasDirtyTabs:je,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:h,onCloseAllTabs:p,onPinTab:v,onUnpinTab:b,onSaveTab:y,onSaveAllTabs:S}):[]},[i,C,je,p,d,u,h,v,S,y,b,e]),ie=f.useMemo(()=>KM({pinnedTabs:$,regularTabs:q,activeTabId:t,onSelectTab:l}),[$,q,t,l]),J=f.useCallback(oe=>{B.current?.scrollBy({left:oe,behavior:"smooth"})},[]),ne=f.useCallback(()=>{const oe=T.current?.getBoundingClientRect();oe&&E({x:oe.left,y:oe.bottom+6})},[]);return a.jsxs(a.Fragment,{children:[a.jsx(NM,{sensors:M,collisionDetection:CR,onDragStart:de,onDragEnd:L,onDragCancel:W,children:a.jsx(UM,{items:e.map(oe=>oe.id),strategy:zM,children:a.jsxs("div",{className:te("flex items-center gap-1 px-1",H,"border-b"),children:[a.jsx(e0,{appearance:r,direction:"left",disabled:!z.left,onClick:()=>J(-Xy)}),a.jsxs("div",{className:"relative flex min-w-0 flex-1 items-stretch",children:[z.left?a.jsx(t0,{position:"left",appearance:r}):null,z.right?a.jsx(t0,{position:"right",appearance:r}):null,a.jsx("div",{ref:B,className:"flex min-w-0 flex-1 overflow-x-auto pb-1",onWheel:oe=>{Math.abs(oe.deltaY)>Math.abs(oe.deltaX)&&(oe.preventDefault(),B.current?.scrollBy({left:oe.deltaY}))},children:a.jsx(kd,{className:"flex min-h-[2.75rem] flex-1 items-end gap-0 px-1",children:e.map(oe=>{const he=oe.status==="ready"&&oe.content!==oe.initialContent,ue=oe.id===t;return a.jsx(QM,{tab:oe,isActive:ue,isDirty:he,draggingId:D,setTabNode:be,onContextMenu:Oe=>{Oe.preventDefault(),_({tabId:oe.id,x:Oe.clientX,y:Oe.clientY})},onCloseTab:u},oe.id)})})})]}),a.jsx(e0,{appearance:r,direction:"right",disabled:!z.right,onClick:()=>J(Xy)}),a.jsx("button",{ref:T,type:"button",className:te("mx-1 flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2",ee),"aria-label":"Open editors list",onClick:ne,children:a.jsx(oi,{className:"h-4 w-4"})})]})})}),a.jsx(kr,{open:!!C,position:C&&{x:C.x,y:C.y},onClose:()=>_(null),items:G,appearance:r}),a.jsx(kr,{open:!!N,position:N,onClose:()=>E(null),items:ie,appearance:r})]})}function e0({appearance:e,direction:t,disabled:r,onClick:i}){return a.jsx("button",{type:"button",className:te("flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none","text-muted-foreground",r?"cursor-default opacity-30":"hover:bg-muted hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card"),onClick:i,disabled:r,"aria-label":t==="left"?"Scroll tabs left":"Scroll tabs right",children:t==="left"?a.jsx(AD,{className:"h-4 w-4"}):a.jsx(RD,{className:"h-4 w-4"})})}function t0({position:e,appearance:t}){const r=e==="left"?"left-0 bg-gradient-to-r from-card via-card/80 to-transparent":"right-0 bg-gradient-to-l from-card via-card/80 to-transparent";return a.jsx("div",{className:te("pointer-events-none absolute top-0 bottom-0 w-8",r)})}function YM({tabs:e,activeTabId:t,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:l,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:h,onPinTab:p,onUnpinTab:x,onContentChange:v,onSaveTab:b,onSaveAllTabs:y,onSelectRecentTab:S,editorTheme:j,menuAppearance:C,canSaveFiles:_=!1,readOnly:N=!1,minHeight:E,onRetryTabLoad:D}){const U=e.length>0,z=f.useRef(null),[V,R]=f.useState(!1),A=f.useMemo(()=>e.find(B=>B.id===t)??null,[e,t]);return!U||!A?a.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-muted-foreground",children:"Select a file from the explorer to begin editing."}):a.jsxs("div",{ref:z,className:"flex min-h-0 min-w-0 flex-1 flex-col",style:E?{minHeight:E}:void 0,"data-editor-area":!0,children:[a.jsx(tR,{containerRef:z,tabs:e,activeTabId:t,onCloseTab:i,onSelectTab:r,onSelectRecentTab:S}),a.jsxs(Ed,{value:A.id,onValueChange:r,children:[a.jsx(WM,{tabs:e,activeTabId:A.id,menuAppearance:C,canSaveFiles:_,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:l,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:h,onPinTab:p,onUnpinTab:x,onSaveTab:b,onSaveAllTabs:y,onTabDragStateChange:R}),a.jsx(rR,{tabs:e,activeTabId:A.id,editorTheme:j,onContentChange:v,onSaveTab:b,canSaveFiles:_,readOnly:N,onRetryTabLoad:D,onSelectTab:r,isTabDragging:V})]})]})}function qi(e){return(e||"").trim().replace(/\\/g,"/").replace(/\/+/g,"/").replace(/^\/+/,"").replace(/\/+$/,"")}function XM(e,t){const r=qi(e),i=qi(t);return r?i?`${r}/${i}`.replace(/\/+/g,"/"):r:i}function JM(e){const t=qi(e);return t?t.split("/").every(i=>i.length>0&&i!=="."&&i!==".."):!1}function e4(e){const t=qi(e);return t==="assets"||t.startsWith("assets/")}function Wl(e){return e?Array.from(e.types??[]).includes("Files"):!1}async function t4(e){const r=Array.from(e.items??[]).filter(i=>i.kind==="file").map(i=>i.webkitGetAsEntry?.()??null).filter(i=>!!i);return r.length>0?(await Promise.all(r.map(l=>Xj(l)))).flat():Array.from(e.files??[]).filter(i=>!!i).map(i=>({file:i,relativePath:i.name}))}async function Xj(e){if(e.isFile)try{const l=await new Promise((d,h)=>{if(!e.file){h(new Error("Dropped file entry is missing a file() reader."));return}e.file(d,h)}),u=s4(e.fullPath||l.name);return u?[{file:l,relativePath:u}]:[]}catch{return[]}if(!e.isDirectory||!e.createReader)return[];const t=e.createReader(),r=await n4(t);return(await Promise.all(r.map(l=>Xj(l)))).flat()}async function n4(e){const t=[];for(;;){const r=await new Promise((i,l)=>e.readEntries(i,l));if(!r.length)break;t.push(...r)}return t}function s4(e){return qi(e)}const n0={surface:"rgb(var(--sys-color-surface))",border:"rgb(var(--sys-color-border))",heading:"rgb(var(--sys-color-fg))",label:"rgb(var(--sys-color-fg-muted))",textPrimary:"rgb(var(--sys-color-fg))",textMuted:"rgb(var(--sys-color-fg-muted))",rowHover:"rgb(var(--sys-color-surface-muted))",folderActiveBg:"transparent",selectionBg:"rgb(var(--sys-color-surface-muted))",selectionText:"rgb(var(--sys-color-fg))",badgeActive:"rgb(var(--sys-color-ring))",badgeOpen:"rgb(var(--sys-color-fg-muted))",folderIcon:"rgb(var(--sys-color-ring))",folderIconActive:"rgb(var(--sys-color-ring))",chevronIdle:"rgb(var(--sys-color-fg-muted))",chevronActive:"rgb(var(--sys-color-fg))"},r4={dark:n0,light:n0},a4="focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card";function i4(e){const t=new Set,r=i=>{i.kind==="folder"&&(t.add(i.id),i.children?.forEach(r))};return r(e),t}function im(e,t,r){const i=new Set;for(const l of e)t.has(l)&&i.add(l);return i.add(r),i}function s0(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function o4({width:e,tree:t,activeFileId:r="",openFileIds:i=[],onSelectFile:l,theme:u,canUploadFiles:d=!1,onUploadFiles:h,isUploadingFiles:p=!1,canCreateFile:x=!1,canCreateFolder:v=!1,isCreatingEntry:b=!1,onCreateFile:y,onCreateFolder:S,canDeleteFile:j=!1,deletingFilePath:C=null,canDeleteFolder:_=!1,deletingFolderPath:N=null,onDeleteFile:E,onDeleteFolder:D,expandedStorageKey:U,onHide:z}){const V=f.useMemo(()=>U?ja(U):null,[U]),R=f.useMemo(()=>i4(t),[t]),A=f.useMemo(()=>{const ye=new Map,ke=Ie=>{ye.set(Ie.id,Ie),Ie.children?.forEach(ke)};return ke(t),ye},[t]),[B,T]=f.useState(()=>{const ye=V?.get()??null,ke=ye?new Set(ye):new Set([t.id]);return im(ke,R,t.id)}),[K,$]=f.useState(null),[q,I]=f.useState(null),[je,M]=f.useState(null),[H,ee]=f.useState(!1),[be,de]=f.useState(null),L=f.useRef(0),W=f.useRef(null),pe=f.useRef(null);f.useEffect(()=>{I(null),M(null),de(null),ee(!1),L.current=0,pe.current=null,W.current&&(clearTimeout(W.current),W.current=null)},[t.id]),f.useEffect(()=>{T(ye=>{const ke=im(ye,R,t.id);return s0(ye,ke)?ye:ke})},[R,t.id]),f.useEffect(()=>{if(!V)return;const ye=V.get();if(!ye)return;const ke=im(new Set(ye),R,t.id);T(Ie=>s0(Ie,ke)?Ie:ke)},[V,R,t.id]),f.useEffect(()=>{if(!V)return;const ye=Array.from(B).filter(ke=>ke!==t.id&&R.has(ke));V.set(ye)},[B,V,R,t.id]);const G=f.useCallback(ye=>{T(ke=>{const Ie=new Set(ke);return Ie.has(ye)?Ie.delete(ye):Ie.add(ye),Ie.add(t.id),Ie})},[t.id]),ie=f.useCallback((ye,ke)=>{T(Ie=>{const ht=new Set(Ie);return ke?ht.add(ye):ye!==t.id&&ht.delete(ye),ht.add(t.id),ht})},[t.id]),J=f.useCallback(()=>{W.current&&(clearTimeout(W.current),W.current=null),pe.current=null},[]),ne=f.useCallback(ye=>{const ke=ye?.closest?.("[data-explorer-drop-row]"),Ie=ke?.dataset.explorerDropPath??"",ht=ke?.dataset.explorerDropRow??t.id;return{folderPath:Ie===t.id?"":Ie,rowId:ht}},[t.id]),oe=f.useCallback(ye=>{Wl(ye.dataTransfer)&&(L.current+=1,ee(!0))},[]),he=f.useCallback(ye=>{H&&(L.current=Math.max(0,L.current-1),L.current===0&&(ee(!1),de(null),J()))},[J,H]),ue=f.useCallback(ye=>{if(!Wl(ye.dataTransfer))return;ye.preventDefault(),ye.dataTransfer.dropEffect=d&&h&&!p?"copy":"none",H||ee(!0);const ke=ne(ye.target);de(ht=>ht?.rowId===ke.rowId&&ht.folderPath===ke.folderPath?ht:ke);const Ie=A.get(ke.rowId);if(!Ie||Ie.kind!=="folder"){J();return}if(B.has(Ie.id)){J();return}pe.current===Ie.id&&W.current||(J(),pe.current=Ie.id,W.current=setTimeout(()=>{ie(Ie.id,!0),J()},650))},[d,J,H,B,p,A,h,ne,ie]),Oe=f.useCallback(async ye=>{if(!Wl(ye.dataTransfer))return;ye.preventDefault(),ye.stopPropagation(),ee(!1),de(null),L.current=0,J();const ke=await t4(ye.dataTransfer);if(!d||!h||p||ke.length===0)return;const Ie=ne(ye.target);h(Ie.folderPath,ke)},[d,J,p,h,ne]),Ge=f.useCallback(()=>{T(new Set([t.id]))},[t.id]),Se=f.useCallback((ye,ke)=>{M(null),T(Ie=>{const ht=new Set(Ie);return ht.add(t.id),ht.add(ye),ht}),I({parentId:ye,kind:ke})},[t.id]),ze=f.useCallback(async(ye,ke,Ie)=>{const ht=ke.trim();if(!ht){M("Name cannot be empty.");return}const tt=Ie==="folder"?S:y;if(tt)try{M(null),await tt(ye===t.id?"":ye,ht),I(null)}catch(An){const Ut=An instanceof Error?An.message:"Unable to create entry.";M(Ut)}},[y,S,t.id]),Pe=f.useCallback(()=>{I(null),M(null)},[]),Me=f.useCallback((ye,ke)=>{ye.preventDefault(),$({node:ke,position:{x:ye.clientX,y:ye.clientY}})},[]),Be=f.useCallback(async ye=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(ye);return}catch{}if(typeof document>"u")return;const ke=document.createElement("textarea");ke.value=ye,ke.setAttribute("readonly","true"),ke.style.position="absolute",ke.style.left="-9999px",document.body.appendChild(ke),ke.select(),document.execCommand("copy"),document.body.removeChild(ke)},[]),We=f.useCallback(ye=>{E&&(E(ye),$(null))},[E]),st=f.useCallback(ye=>{D&&(D(ye),$(null))},[D]),P=f.useMemo(()=>{if(!K)return[];const{node:ye}=K,ke={open:"Enter",newFile:"Ctrl+N",newFolder:"Ctrl+Shift+N",copyPath:"Ctrl+K Ctrl+C",collapseAll:"Ctrl+K Ctrl+0",delete:"Delete"};if(ye.kind==="file")return[{id:"open-file",label:"Open",icon:a.jsx(KD,{className:Qs}),shortcut:ke.open,onSelect:()=>l(ye.id)},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:a.jsx(cy,{className:Qs}),shortcut:ke.copyPath,onSelect:()=>{Be(ye.id)}},{id:"delete-file",label:"Delete",icon:a.jsx(uy,{className:Qs}),shortcut:ke.delete,disabled:!j||!E,onSelect:()=>We(ye.id)}];const Ie=B.has(ye.id);return[{id:"new-file",label:"New File",icon:a.jsx(rj,{className:Qs}),shortcut:ke.newFile,disabled:!x||!y,onSelect:()=>{!x||!y||(Se(ye.id,"file"),$(null))}},{id:"new-folder",label:"New Folder",icon:a.jsx(_m,{className:Qs}),shortcut:ke.newFolder,disabled:!v||!S,onSelect:()=>{!v||!S||(Se(ye.id,"folder"),$(null))}},{id:"toggle-folder",label:Ie?"Collapse Folder":"Expand Folder",icon:Ie?a.jsx(bp,{className:Qs}):a.jsx(GD,{className:Qs}),onSelect:()=>ie(ye.id,!Ie)},{id:"collapse-all",label:"Collapse All",icon:a.jsx(WD,{className:Qs}),shortcut:ke.collapseAll,dividerAbove:!0,onSelect:()=>Ge()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:a.jsx(cy,{className:Qs}),shortcut:ke.copyPath,onSelect:()=>{Be(ye.id)}},{id:"delete-folder",label:"Delete Folder",icon:a.jsx(uy,{className:Qs}),shortcut:ke.delete,disabled:!_||!D,onSelect:()=>st(ye.id)}]},[K,l,Be,j,E,B,ie,Ge,x,v,y,S,Se,_,D,st,We]),F=r4[u],X=a4,Te=f.useMemo(()=>t.children??[],[t]),_e=u==="dark"?"dark":"light",me=f.useMemo(()=>{if(!H)return null;const ye=be?.folderPath??"";return ye||"root"},[H,be?.folderPath]),De=d&&!!h&&!p;return a.jsxs(a.Fragment,{children:[a.jsxs("aside",{className:"flex h-full min-h-0 flex-col border-r text-[13px]",style:{width:e,backgroundColor:F.surface,borderColor:F.border,color:F.textPrimary},"aria-label":"Config files explorer",children:[a.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",style:{borderColor:F.border,backgroundColor:F.rowHover},children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em]",style:{color:F.heading},children:"Explorer"}),p?a.jsxs("div",{className:"flex items-center gap-1 text-[11px]",style:{color:F.label},children:[a.jsx("span",{className:"inline-flex h-2.5 w-2.5 animate-spin rounded-full border border-current border-t-transparent","aria-hidden":!0}),a.jsx("span",{className:"font-medium",children:"Uploading"})]}):null]}),a.jsx("button",{type:"button",onClick:z,"aria-label":"Hide explorer",className:te("flex h-7 w-7 items-center justify-center rounded-md text-muted-foreground transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","hover:bg-muted hover:text-foreground"),children:a.jsx(ZD,{className:"h-3.5 w-3.5"})})]}),a.jsxs("nav",{className:"relative flex-1 overflow-auto px-2 py-2","aria-label":"Workspace files tree",onDragEnter:oe,onDragLeave:he,onDragOver:ue,onDrop:Oe,children:[a.jsxs("ul",{className:"space-y-0.5",children:[Te.map(ye=>a.jsx(Jj,{node:ye,parentId:t.id,depth:0,expanded:B,activeFileId:r,openFileIds:i,onToggleFolder:G,onSelectFile:l,tokens:F,theme:u,focusRingClass:X,onContextMenu:Me,editing:q,onSubmitCreateEntry:ze,onCancelCreateEntry:Pe,createError:je,isCreatingEntry:b,deletingFilePath:C,deletingFolderPath:N,onClearCreateError:()=>M(null),dropActive:H,dropTargetRowId:be?.rowId??null},ye.id)),q?.parentId===t.id?a.jsx("li",{className:"pl-2",children:a.jsx(e1,{appearance:u,icon:q.kind==="folder"?a.jsx(_m,{className:Qs}):void 0,placeholder:q.kind==="folder"?"new_folder":"new_file.py",onSubmit:ye=>ze(t.id,ye,q.kind),onCancel:Pe,onChange:()=>M(null),isSubmitting:b,error:je})}):null]}),H?a.jsx("div",{className:te("pointer-events-none absolute inset-2 rounded-xl border border-dashed p-3 transition",De?"opacity-100":"opacity-90"),style:{borderColor:F.badgeActive,backgroundColor:"rgb(var(--sys-color-surface) / 0.85)"},"aria-hidden":!H,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:te("inline-flex h-9 w-9 items-center justify-center rounded-full border border-border/60 bg-card/80"),style:{color:F.badgeActive},children:a.jsx(Nd,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-[13px] font-semibold",style:{color:F.textPrimary},children:De?"Drop to upload":"Upload disabled"}),a.jsx("p",{className:"mt-0.5 text-[12px]",style:{color:F.textMuted},children:De?a.jsxs(a.Fragment,{children:["Upload to ",a.jsx("span",{className:"font-semibold",children:me})]}):p?"Uploads are in progress.":"Uploads arent available right now."})]})]})}):null]})]}),a.jsx(kr,{open:!!K,position:K?K.position:null,onClose:()=>$(null),items:P,appearance:_e})]})}function Jj({node:e,parentId:t,depth:r,expanded:i,activeFileId:l,openFileIds:u,onToggleFolder:d,onSelectFile:h,tokens:p,theme:x,focusRingClass:v,onContextMenu:b,editing:y,onSubmitCreateEntry:S,onCancelCreateEntry:j,createError:C,isCreatingEntry:_,deletingFilePath:N,deletingFolderPath:E,onClearCreateError:D,dropActive:U,dropTargetRowId:z}){const R={paddingLeft:8+r*16,"--tree-hover-bg":p.rowHover},A=U&&z===e.id;if(e.kind==="folder"){const I=i.has(e.id),je=E===e.id,M=y?.parentId===e.id,H={...R,color:I?p.textPrimary:p.textMuted};return I&&p.folderActiveBg!=="transparent"&&(H.backgroundColor=p.folderActiveBg),A&&(H.outline=`1px dashed ${p.badgeActive}`,H.outlineOffset=-1,H.backgroundColor=p.rowHover),a.jsxs("li",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>d(e.id),onContextMenu:ee=>b(ee,e),"data-explorer-drop-row":e.id,"data-explorer-drop-path":e.id,className:te("group flex w-full items-center gap-2 rounded-md px-2 py-1 text-left font-medium transition hover:bg-[var(--tree-hover-bg)]",v,je&&"opacity-60"),style:H,"aria-expanded":I,disabled:je,children:[a.jsx(hT,{className:te("h-3 w-3 flex-shrink-0 transition-transform duration-150",I?"rotate-90":void 0),stroke:I?p.chevronActive:p.chevronIdle}),a.jsx(QD,{className:"h-4 w-4 flex-shrink-0 transition-colors",stroke:I?p.folderIconActive:p.folderIcon,fill:I?p.folderIconActive:"none",opacity:I?.25:1}),a.jsx("span",{className:"truncate",children:e.name})]}),I?a.jsxs("ul",{className:"mt-0.5 space-y-0.5",children:[e.children?.map(ee=>a.jsx(Jj,{node:ee,parentId:e.id,depth:r+1,expanded:i,activeFileId:l,openFileIds:u,onToggleFolder:d,onSelectFile:h,tokens:p,theme:x,focusRingClass:v,onContextMenu:b,editing:y,onSubmitCreateEntry:S,onCancelCreateEntry:j,createError:C,isCreatingEntry:_,deletingFilePath:N,deletingFolderPath:E,onClearCreateError:D,dropActive:U,dropTargetRowId:z},ee.id)),M?a.jsx("li",{className:"pl-2",children:a.jsx(e1,{appearance:x,icon:y?.kind==="folder"?a.jsx(_m,{className:Qs}):void 0,placeholder:y?.kind==="folder"?"new_folder":"new_file.py",onSubmit:ee=>{y&&S(e.id,ee,y.kind)},onCancel:j,onChange:D,isSubmitting:_,error:C})}):null]}):null]})}const B=l===e.id,T=u.includes(e.id),K=N===e.id,$=l4(e.name,e.language),q={...R,color:p.textPrimary};return B&&(q.backgroundColor=p.selectionBg,q.color=p.selectionText),A&&(q.outline=`1px dashed ${p.badgeActive}`,q.outlineOffset=-1,B||(q.backgroundColor=p.rowHover)),a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>h(e.id),onContextMenu:I=>b(I,e),"data-explorer-drop-row":e.id,"data-explorer-drop-path":t,className:te("flex w-full items-center gap-2 rounded-md px-2 py-1 text-left transition hover:bg-[var(--tree-hover-bg)]",v,B&&"shadow-inner shadow-black/10",K&&"opacity-60"),style:q,disabled:K,children:[a.jsx("span",{className:"inline-flex w-4 justify-center",children:a.jsx(sj,{className:te("h-4 w-4 flex-shrink-0",$,T&&!B&&"opacity-90",!T&&!B&&"opacity-75")})}),a.jsx("span",{className:te("flex-1 truncate",B&&"font-semibold"),children:e.name}),T&&!B?a.jsx("span",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:p.badgeOpen}}):null]})})}const r0={json:"text-filetype-json",py:"text-filetype-py",ts:"text-filetype-ts",tsx:"text-filetype-tsx",js:"text-filetype-js",jsx:"text-filetype-jsx",md:"text-filetype-md",env:"text-filetype-env",txt:"text-filetype-txt",lock:"text-filetype-lock"};function l4(e,t){if(t==="python")return"text-filetype-py";const r=e.toLowerCase().split("."),i=r.length>1?r.pop()??"":"";return i&&r0[i]?r0[i]:"text-muted-foreground"}const Qs="h-4 w-4 text-current opacity-80";function e1({appearance:e,onSubmit:t,onCancel:r,onChange:i,isSubmitting:l,error:u,placeholder:d="new_file.py",icon:h}){const[p,x]=f.useState(""),v=f.useRef(null);f.useEffect(()=>{v.current?.focus(),v.current?.select()},[]);const b=f.useCallback(()=>{t(p.trim())},[t,p]);return a.jsxs("div",{className:"rounded-md border border-border bg-muted px-2 py-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex w-4 justify-center text-brand-500",children:h??a.jsx(rj,{className:Qs})}),a.jsx("input",{ref:v,value:p,onChange:S=>{x(S.target.value),i?.()},onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),b()),S.key==="Escape"&&(S.preventDefault(),r())},className:"flex-1 rounded-sm border border-transparent bg-card/80 px-2 py-1 text-[13px] text-foreground outline-none focus:border-ring",placeholder:d,disabled:l}),a.jsx("button",{type:"button",className:te("rounded-sm px-2 py-1 text-[12px] font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",l?"cursor-wait bg-muted text-muted-foreground":"bg-brand-600 text-on-brand hover:bg-brand-500"),onClick:b,disabled:l,children:l?"Creating":"Create"}),a.jsx("button",{type:"button",className:"rounded-sm px-2 py-1 text-[12px] font-semibold text-muted-foreground transition hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",onClick:r,disabled:l,children:"Cancel"})]}),a.jsx("div",{className:te("mt-1 text-[11px]","text-muted-foreground"),children:"Enter a name and press Enter. Escape to cancel."}),u?a.jsx("div",{className:"mt-1 text-[11px] font-semibold text-danger-500",children:u}):null]})}function a0({orientation:e,onPointerDown:t,onDoubleClick:r,onToggle:i,collapsed:l}){const u=e==="vertical",d=u?"":l?"":"";return a.jsxs("div",{role:"separator","aria-orientation":e,className:te("relative select-none bg-transparent group",u?"w-4 cursor-col-resize":"h-3 cursor-row-resize"),style:{touchAction:"none"},onPointerDown:t,onDoubleClick:r,title:u?"Drag to resize":"Drag to resize  Double-click to hide/show console",children:[a.jsx("span",{className:"sr-only",children:"Resize panel"}),a.jsx("div",{className:te("absolute inset-0 flex items-center justify-center",u?"px-[6px]":"py-[6px]"),"aria-hidden":!0,children:a.jsx("div",{className:te(u?"h-full w-px":"h-px w-full","bg-muted-foreground/50")})}),i&&!u?a.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),i()},className:"absolute right-1/2 top-1/2 h-5 w-5 -translate-y-1/2 translate-x-[40%] rounded bg-foreground/70 text-[10px] text-background opacity-0 shadow-sm transition-opacity group-hover:opacity-100 focus:opacity-100 focus:outline-none","aria-label":l?"Show console":"Hide console",title:l?"Show console":"Hide console",children:d}):null]})}const c4={json:"json",py:"python",ts:"typescript",tsx:"typescriptreact",js:"javascript",jsx:"javascriptreact",env:"dotenv",md:"markdown",yml:"yaml",yaml:"yaml",toml:"toml"};function i0(e){const t=e.root||e.prefix||e.entries[0]?.parent||"",r=e.entries.length>0;if(!t&&!r)return null;const i=Yl(t),l={id:t,name:o0(t),kind:"folder",children:[]},u=new Map([[t,l]]),d=p=>{if(p.length===0)return l;const x=Yl(p),v=x===i?t:x,b=u.get(v);if(b)return b;const y={id:v,name:o0(v),kind:"folder",children:[]};u.set(v,y);const S=v===t?"":f4(v)??t,j=d(S);return om(j,y),y},h=[...e.entries].sort((p,x)=>p.depth!==x.depth?p.depth-x.depth:p.path.localeCompare(x.path));for(const p of h){const x=p.parent&&p.parent.length>0?Yl(p.parent):t,v=d(x);if(p.kind==="dir"){const y=d(p.path);y.name=p.name,y.metadata={size:p.size??null,modifiedAt:p.mtime,contentType:p.content_type,etag:p.etag},y!==v&&om(v,y);continue}const b={id:p.path,name:p.name,kind:"file",language:d4(p.path),metadata:{size:p.size??null,modifiedAt:p.mtime,contentType:p.content_type,etag:p.etag}};u.set(p.path,b),om(v,b)}return l}function om(e,t){const r=e.children??[],i=r.some(l=>l.id===t.id)?r.map(l=>l.id===t.id?t:l):[...r,t];e.children=i.sort(u4)}function u4(e,t){return e.kind!==t.kind?e.kind==="folder"?-1:1:e.name.localeCompare(t.name)}function d4(e){const t=e.toLowerCase(),r=t.lastIndexOf(".");if(r===-1)return;const i=t.slice(r+1);return c4[i]}function o0(e){const t=Yl(e);if(!t)return"";const r=t.lastIndexOf("/");return r>=0?t.slice(r+1):t}function f4(e){const t=Yl(e);if(!t)return;const r=t.lastIndexOf("/");return r===-1?"":t.slice(0,r)}function Yl(e){return e?e.replace(/\/+$/,""):""}function Ks(e,t){if(e.id===t)return e;if(!e.children)return null;for(const r of e.children){const i=Ks(r,t);if(i)return i}return null}function zp(e){if(e.kind==="file")return e;if(!e.children)return null;for(const t of e.children){const r=zp(t);if(r)return r}return null}function h4({tree:e,initialActiveFileId:t,loadFile:r,persistence:i}){const[l,u]=f.useState([]),[d,h]=f.useState(""),[p,x]=f.useState([]),[v,b]=f.useState(()=>!i),[y,S]=f.useState(!1),j=f.useRef(new Set),C=f.useRef([]),_=f.useRef(""),N=f.useRef([]),E=f.useCallback(G=>{h(ie=>ie===G?ie:G),x(ie=>{const J=ie.filter(oe=>C.current.some(he=>he.id===oe));if(!G)return J;const ne=J.filter(oe=>oe!==G);return[G,...ne]})},[]);f.useEffect(()=>{_.current=d},[d]),f.useEffect(()=>{N.current=p},[p]),f.useEffect(()=>{if(!e){u([]),h(""),x([]);return}u(ie=>ie.filter(J=>!!Ks(e,J.id)).map(J=>{const ne=Ks(e,J.id);return!ne||ne.kind!=="file"?J:{...J,name:ne.name,language:ne.language,metadata:ne.metadata}}));const G=_.current;(!G||!Ks(e,G))&&E("")},[e,E]);const D=f.useMemo(()=>l.find(G=>G.id===d)??l[0]??null,[d,l]),U=f.useCallback(async G=>{if(!C.current.some(J=>J.id===G))return;let ie=!1;if(u(J=>J.map(ne=>ne.id!==G?ne:ne.status==="ready"?(ie=!0,ne):{...ne,status:"loading",error:null})),!ie)try{const J=await r(G);u(ne=>ne.map(oe=>oe.id===G?{...oe,initialContent:J.content,content:J.content,status:"ready",error:null,etag:J.etag??null,saving:!1,saveError:null}:oe))}catch(J){const ne=J instanceof Error?J.message:"Unable to load file.";u(oe=>oe.map(he=>he.id===G?{...he,status:"error",error:ne}:he))}},[r]),z=f.useCallback((G,ie)=>{if(!e)return;const J=Ks(e,G);!J||J.kind!=="file"||(u(ne=>{if(ne.some(he=>he.id===G))return ne;const oe={id:J.id,name:J.name,language:J.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:J.metadata,pinned:!1,saving:!1,saveError:null,lastSavedAt:null};return[...ne,oe]}),(ie?.activate??!0)&&E(G))},[e,E]);f.useEffect(()=>{if(v||!i||!e){i||b(!0);return}const G=i.get(),J=(G?.openTabs??[]).map(ne=>typeof ne=="string"?{id:ne,pinned:!1}:ne).filter(ne=>!!(ne&&ne.id));if(J.length>0){const ne=[];for(const oe of J){const he=Ks(e,oe.id);!he||he.kind!=="file"||ne.push({id:he.id,name:he.name,language:he.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:he.metadata,pinned:!!oe.pinned,saving:!1,saveError:null,lastSavedAt:null})}if(ne.length>0){u(ne);const oe=(G?.activeTabId&&ne.some(Oe=>Oe.id===G.activeTabId)?G.activeTabId:ne[0]?.id)??"";h(oe);const ue=(G?.mru&&G.mru.length>0?G.mru:ne.map(Oe=>Oe.id)).filter(Oe=>ne.some(Ge=>Ge.id===Oe));x(ue),S(!0)}}b(!0)},[v,i,e]),f.useEffect(()=>{if(!e||!v)return;if(l.length>0){y||S(!0);return}if(y)return;const G=t&&Ks(e,t)||zp(e);if(!G){S(!0);return}z(G.id),S(!0)},[e,t,z,v,l.length,y]);const V=f.useCallback(G=>{z(G)},[z]),R=f.useCallback(G=>{E(G),u(ie=>ie.map(J=>J.id===G&&J.status==="error"?{...J,status:"loading",error:null}:J))},[E]),A=f.useCallback(G=>{u(ie=>{const J=ie.filter(he=>he.id!==G),ne=_.current,oe=ne===G?J[J.length-1]?.id??"":J.some(he=>he.id===ne)?ne:J[J.length-1]?.id??"";return E(oe),J})},[E]),B=f.useCallback(G=>{u(ie=>!ie.some(J=>J.id===G)||ie.length<=1?ie:(E(G),ie.filter(J=>J.id===G)))},[E]),T=f.useCallback(G=>{u(ie=>{const J=ie.findIndex(he=>he.id===G);if(J===-1||J===ie.length-1)return ie;const ne=ie.slice(0,J+1),oe=ne.some(he=>he.id===_.current)?_.current:G;return E(oe),ne})},[E]),K=f.useCallback(()=>{u([]),h(""),x([])},[]),$=f.useCallback((G,ie)=>{u(J=>{if(J.length<=1)return J;const ne=J.findIndex(ze=>ze.id===G);if(ne===-1)return J;const oe=J.filter((ze,Pe)=>Pe!==ne),he=Math.max(0,Math.min(ie,oe.length)),ue=[],Oe=[],Ge=J[ne];if(oe.forEach(ze=>{ze.pinned?ue.push(ze):Oe.push(ze)}),(he<=ue.length?"pinned":"regular")==="pinned"){const ze=Math.max(0,Math.min(he,ue.length));ue.splice(ze,0,{...Ge,pinned:!0})}else{const ze=Math.max(0,Math.min(he-ue.length,Oe.length));Oe.splice(ze,0,{...Ge,pinned:!1})}return[...ue,...Oe]})},[]),q=f.useCallback(G=>{if(j.current.has(G))return;let ie=!1;u(J=>J.map(ne=>ne.id!==G?ne:(ie=!0,{...ne,status:"loading",error:null}))),ie&&(j.current.add(G),U(G).finally(()=>{j.current.delete(G)}))},[U]),I=f.useCallback(G=>{u(ie=>{const J=[],ne=[];let oe=null;for(const ue of ie){if(ue.id===G){oe=ue;continue}ue.pinned?J.push(ue):ne.push(ue)}if(!oe||oe.pinned)return ie;const he={...oe,pinned:!0};return[...J,he,...ne]})},[]),je=f.useCallback(G=>{u(ie=>{const J=[],ne=[];let oe=null;for(const ue of ie){if(ue.id===G){oe=ue;continue}ue.pinned?J.push(ue):ne.push(ue)}if(!oe||!oe.pinned)return ie;const he={...oe,pinned:!1};return[...J,he,...ne]})},[]),M=f.useCallback((G,ie)=>{ie?I(G):je(G)},[I,je]),H=f.useCallback(G=>{const ie=N.current.filter(Ge=>C.current.some(Se=>Se.id===Ge));if(ie.length<=1)return;const J=_.current||ie[0],ne=ie.indexOf(J),ue=((ne>=0?ne:0)+(G==="forward"?1:-1)+ie.length)%ie.length,Oe=ie[ue];Oe&&Oe!==J&&E(Oe)},[E]),ee=f.useCallback((G,ie)=>{u(J=>J.map(ne=>ne.id===G?{...ne,content:ie,status:ne.status==="ready"?ne.status:"ready",error:null,saveError:null}:ne))},[]),be=f.useCallback(G=>{u(ie=>ie.map(J=>J.id===G?{...J,saving:!0,saveError:null}:J))},[]),de=f.useCallback((G,ie)=>{u(J=>J.map(ne=>{if(ne.id!==G)return ne;const oe=ie?.metadata??ne.metadata??null,he=ie?.etag??ne.etag??null,ue=ie?.savedContent??ne.content;return{...ne,saving:!1,saveError:null,initialContent:ue,etag:he,metadata:oe&&{...oe,etag:oe.etag??he??null},lastSavedAt:new Date().toISOString()}}))},[]),L=f.useCallback((G,ie)=>{u(J=>J.map(ne=>ne.id===G?{...ne,saving:!1,saveError:ie}:ne))},[]),W=f.useCallback((G,ie)=>{u(J=>J.map(ne=>ne.id!==G?ne:{...ne,content:ie.content,initialContent:ie.content,status:"ready",error:null,saving:!1,saveError:null,etag:ie.etag??ne.etag??null,metadata:ie.metadata??ne.metadata}))},[]),pe=f.useMemo(()=>l.some(G=>G.status==="ready"&&G.content!==G.initialContent),[l]);return f.useEffect(()=>{C.current=l},[l]),f.useEffect(()=>{x(G=>{const ie=G.filter(J=>l.some(ne=>ne.id===J));return ie.length===G.length?G:ie})},[l]),f.useEffect(()=>{const G=new Set(l.map(ie=>ie.id));for(const ie of j.current)G.has(ie)||j.current.delete(ie);for(const ie of l){if(ie.status!=="loading"||j.current.has(ie.id))continue;j.current.add(ie.id),U(ie.id).finally(()=>{j.current.delete(ie.id)})}},[l,U]),f.useEffect(()=>{if(!i||!v)return;const G=[d,...p].filter(ie=>!!ie).filter((ie,J,ne)=>ne.indexOf(ie)===J).filter(ie=>l.some(J=>J.id===ie));i.set({openTabs:l.map(ie=>({id:ie.id,pinned:!!ie.pinned})),activeTabId:d||null,mru:G})},[i,l,d,p,v]),{tree:e,tabs:l,activeTabId:d,activeTab:D,openFile:V,selectTab:R,closeTab:A,closeOtherTabs:B,closeTabsToRight:T,closeAllTabs:K,moveTab:$,reloadTab:q,pinTab:I,unpinTab:je,toggleTabPin:M,selectRecentTab:H,updateContent:ee,beginSavingTab:be,completeSavingTab:de,failSavingTab:L,replaceTabContent:W,isDirty:pe}}function t1(e){if(e instanceof URLSearchParams)return new URLSearchParams(e);if(typeof e=="string"||Array.isArray(e))return new URLSearchParams(e);const t=new URLSearchParams;for(const[r,i]of Object.entries(e)){if(i==null)continue;const l=Array.isArray(i)?i:[i];for(const u of l)u!=null&&t.append(r,String(u))}return t}const n1=f.createContext(null);function m4({value:e,children:t}){return f.createElement(n1.Provider,{value:e},t)}function p4(){const e=f.useContext(n1),t=es(),r=en(),i=f.useMemo(()=>new URLSearchParams(t.search),[t.search]),l=f.useCallback((u,d)=>{const h=typeof u=="function"?u(new URLSearchParams(i)):u,x=t1(h).toString(),v=`${t.pathname}${x?`?${x}`:""}${t.hash}`;r(v,{replace:d?.replace})},[t.hash,t.pathname,r,i]);return[e?.params??i,e?.setSearchParams??l]}const Fu={pane:"terminal",console:"closed"},g4=["pane","console","file"],x4=["tab","view","runId"];function b4(e){return e==="open"?"open":"closed"}function v4(e){return e==="problems"?"problems":"terminal"}function s1(e){const t=e instanceof URLSearchParams?e:new URLSearchParams(e),r=t.get("pane"),i=t.get("console"),l=t.get("file");return{...{pane:v4(r),console:b4(i),fileId:l??void 0},present:{pane:t.has("pane"),console:t.has("console"),fileId:t.has("file")}}}function lm(e,t){const r=s1(e),i={...Fu,...r,...t},l=new URLSearchParams(e);for(const u of g4)l.delete(u);for(const u of x4)l.delete(u);return i.pane!==Fu.pane&&l.set("pane",i.pane),i.console!==Fu.console&&l.set("console",i.console),i.fileId&&i.fileId.length>0&&l.set("file",i.fileId),l}function y4(){const[e,t]=p4(),r=f.useMemo(()=>s1(e),[e]),i=f.useCallback(d=>{r.fileId===d||!d&&!r.present.fileId||t(h=>lm(h,{fileId:d??void 0}),{replace:!0})},[t,r.fileId,r.present.fileId]),l=f.useCallback(d=>{r.pane!==d&&t(h=>lm(h,{pane:d}),{replace:!0})},[t,r.pane]),u=f.useCallback(d=>{r.console!==d&&t(h=>lm(h,{console:d}),{replace:!0})},[t,r.console]);return{fileId:r.fileId??Fu.fileId,pane:r.pane,console:r.console,consoleExplicit:r.present.console,setFileId:i,setPane:l,setConsole:u}}const w4="You have unsaved changes in the config editor. Are you sure you want to leave?";function j4({isDirty:e,confirm:t=window.confirm,message:r=w4,shouldBypassNavigation:i}){const l=es(),u=f.useCallback(d=>!e||i?.()||d.location.pathname===l.pathname?!0:t(r),[t,e,l.pathname,r,i]);V0(u,e),f.useEffect(()=>{if(!e)return;const d=h=>(h.preventDefault(),h.returnValue=r,r);return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[e,r])}function Vs(e,t,r){return Math.min(Math.max(e,t),r)}function l0(e,t){const{onMove:r,onEnd:i,cursor:l}=t;if(typeof window>"u")return;e.preventDefault();const u=e.pointerId,d=e.currentTarget,h=document.body.style.cursor,p=document.body.style.userSelect;let x=null,v=null,b=!0;const y=_=>{if(b){if(b=!1,x!==null&&(cancelAnimationFrame(x),x=null),document.body.style.cursor=h,document.body.style.userSelect=p,window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",j),window.removeEventListener("pointercancel",j),d.removeEventListener("lostpointercapture",C),d.hasPointerCapture?.(u))try{d.releasePointerCapture(u)}catch{}i&&i(_)}},S=_=>{!b||_.pointerId!==u||(v=_,x===null&&(x=window.requestAnimationFrame(()=>{x=null,v&&r(v)})))},j=_=>{_.pointerId===u&&y(_)},C=_=>{_.pointerId===u&&y(_)};l&&(document.body.style.cursor=l),document.body.style.userSelect="none";try{d.setPointerCapture(u)}catch{}window.addEventListener("pointermove",S),window.addEventListener("pointerup",j),window.addEventListener("pointercancel",j),d.addEventListener("lostpointercapture",C)}function As({open:e,title:t,description:r,confirmLabel:i="Confirm",cancelLabel:l="Cancel",onConfirm:u,onCancel:d,isConfirming:h,children:p,confirmDisabled:x,tone:v="default"}){const b=f.useRef(null);if(f.useEffect(()=>{if(!e)return;const S=C=>{if(C.key==="Escape"&&d(),C.key==="Tab"){const _=b.current;if(!_)return;const N=Array.from(_.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(U=>!U.hasAttribute("disabled"));if(N.length===0)return;const E=N.indexOf(document.activeElement),D=C.shiftKey?E<=0?N.length-1:E-1:E===N.length-1?0:E+1;N[D]?.focus(),C.preventDefault()}};return window.addEventListener("keydown",S),b.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",S)},[d,e]),!e)return null;const y=v==="danger"?{badge:"bg-danger-500/15 text-danger-400",confirmVariant:"danger"}:{badge:"bg-brand-500/10 text-brand-500",confirmVariant:"primary"};return Ts.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50 px-4",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-overlay/50",onClick:d,"aria-label":"Close dialog"}),a.jsx("div",{className:"relative flex min-h-full items-center justify-center",children:a.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":t,className:"w-full max-w-lg rounded-2xl border border-border bg-card p-6 shadow-2xl",ref:b,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:te("inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em]",y.badge),children:"Confirm"}),a.jsx("h3",{className:"text-xl font-semibold text-foreground",children:t}),r?a.jsx("p",{className:"text-sm text-muted-foreground",children:r}):null]}),p?a.jsx("div",{className:"mt-4 space-y-3",children:p}):null,a.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[a.jsx(Ae,{type:"button",variant:"ghost",onClick:d,disabled:h,children:l}),a.jsx(Ae,{type:"button",variant:y.confirmVariant,onClick:u,isLoading:h,disabled:x||h,className:v==="danger"?"hover:bg-danger-600":void 0,children:i})]})]})})]}),document.body)}const S4="inline-flex items-center gap-2 rounded-l-md px-3 py-1.5 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed",N4="inline-flex items-center justify-center rounded-r-md border-l px-2 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed";function C4({label:e,icon:t,disabled:r,isLoading:i,highlight:l,className:u,primaryClassName:d,menuClassName:h,title:p,menuAriaLabel:x="Open menu",menuIcon:v=a.jsx(oi,{className:"h-4 w-4"}),onPrimaryClick:b,onOpenMenu:y,onContextMenu:S}){const j=f.useRef(null),C=!!(r||i),_=N=>{if(C)return;N.preventDefault();const E=j.current?.getBoundingClientRect();if(E){y?.({x:E.left,y:E.bottom});return}y?.({x:N.clientX,y:N.clientY})};return a.jsxs("div",{role:"group",className:te("inline-flex items-stretch rounded-md shadow-sm",l&&"ring-2 ring-brand-300/70 ring-offset-2 ring-offset-transparent",u),onContextMenu:S,children:[a.jsxs("button",{type:"button",title:p,disabled:C,className:te(S4,d),onClick:N=>{C||b?.(N)},children:[t,a.jsx("span",{className:"whitespace-nowrap",children:e})]}),a.jsx("button",{ref:j,type:"button","aria-label":x,"aria-haspopup":"menu","aria-expanded":"false",disabled:C,className:te(N4,h),onClick:_,children:v})]})}async function _4(e,t={}){const{signal:r,page:i,pageSize:l,includeTotal:u}=t,d={};typeof i=="number"&&i>0&&(d.page=i),typeof l=="number"&&l>0&&(d.page_size=l),u&&(d.include_total=!0);const{data:h}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e},query:d},signal:r});if(!h)throw new Error("Expected configuration page payload.");return h}async function E4(e,t,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}",{params:{path:{workspace_id:e,configuration_id:t}},signal:r});return i??null}async function Lp(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/validate",{params:{path:{workspace_id:e,configuration_id:t}}});if(!r)throw new Error("Expected validation payload.");return r}async function k4(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/publish",{params:{path:{workspace_id:e,configuration_id:t}},body:null});if(!r)throw new Error("Expected configuration payload.");return r}async function D4(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/archive",{params:{path:{workspace_id:e,configuration_id:t}}});if(!r)throw new Error("Expected configuration payload.");return r}async function T4(e,t,r={}){const{prefix:i,depth:l,include:u,exclude:d,limit:h,pageToken:p,sort:x,order:v,signal:b}=r,{data:y}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files",{params:{path:{workspace_id:e,configuration_id:t},query:{prefix:i??"",depth:l??"infinity",include:u?.length?[...u]:void 0,exclude:d?.length?[...d]:void 0,limit:h,page_token:p??void 0,sort:x,order:v}},signal:b,requestInitExt:{cache:"no-store"}});if(!y)throw new Error("Expected file listing payload.");return y}async function c0(e,t,r,i){const{data:l}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:t,file_path:r}},headers:{Accept:"application/json"},signal:i,requestInitExt:{cache:"no-store"}});if(!l)throw new Error("Expected file payload.");return l}async function Up(e,t){const{data:r,response:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/export",{params:{path:{workspace_id:e,configuration_id:t}},parseAs:"blob"});if(!r)throw new Error("Expected configuration archive payload.");const d=(i?.headers?.get("content-disposition")??"").match(/filename="?([^";]+)"?/i)?.[1];return{blob:r,filename:d??void 0}}async function A4(e,t,r){const i=$4(r.path),l=r.parents?{parents:!0}:{},u=new URLSearchParams;l.parents&&u.set("parents","true");const d=u.toString(),h=r.content,p=r.contentType??(typeof Blob<"u"&&r.content instanceof Blob&&r.content.type?r.content.type:"application/octet-stream"),x=await ep(`/api/v1/workspaces/${e}/configurations/${t}/files/${i}${d?`?${d}`:""}`,{method:"PUT",body:h,headers:{"Content-Type":p,...r.create?{"If-None-Match":"*"}:r.etag?{"If-Match":r.etag}:{}}});if(!x.ok){const b=await q4(x),y=b?.title??`Request failed with status ${x.status}`;throw new Ht(y,x.status,b)}const v=await x.json().catch(()=>({}));if(!v||!v.path)throw new Error("Expected write response payload.");return v}async function R4(e,t,r,i={}){await Ve.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:t,file_path:r}},headers:i.etag?{"If-Match":i.etag}:void 0})}async function M4(e,t,r){const{data:i}=await Ve.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:t,directory_path:r}}});if(!i)throw new Error("Expected directory response payload.");return i}async function O4(e,t,r,i={}){const l={};i.recursive&&(l.recursive=!0),await Ve.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:t,directory_path:r},query:l}})}async function z4(e,t){const r=new FormData;r.append("display_name",t.displayName),r.append("file",t.file);const{data:i}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations/import",{params:{path:{workspace_id:e}},body:r,bodySerializer:()=>r});if(!i)throw new Error("Expected configuration payload.");return i}async function L4(e,t,r){const i=new FormData;i.append("file",r.file);const{data:l}=await Ve.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/import",{params:{path:{workspace_id:e,configuration_id:t}},headers:r.ifMatch?{"If-Match":r.ifMatch}:void 0,body:i,bodySerializer:()=>i});if(!l)throw new Error("Expected configuration payload.");return l}function U4(e){return e.type==="template"?{type:"template"}:{type:"clone",configuration_id:e.configurationId.trim()}}async function r1(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e}},body:{display_name:t.displayName.trim(),source:U4(t.source)}});if(!r)throw new Error("Expected configuration payload.");return r}function $4(e){return e.split("/").map(t=>encodeURIComponent(t)).join("/")}async function q4(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const _n={root:e=>["workspaces",e,"configurations"],list:(e,t={})=>[..._n.root(e),"list",{...t}],detail:(e,t)=>[..._n.root(e),"detail",t],files:(e,t)=>[..._n.detail(e,t),"files"],file:(e,t,r)=>[..._n.files(e,t),"file",r]};function B4({workspaceId:e,configId:t,enabled:r=!0,...i}){const{prefix:l="",depth:u="infinity",include:d,exclude:h,limit:p,pageToken:x,sort:v="path",order:b="asc"}=i;return yn({queryKey:[..._n.files(e,t),l,u,d?.join("|")??"",h?.join("|")??"",p??"",x??"",v,b],queryFn:({signal:y})=>T4(e,t,{prefix:l,depth:u,include:d,exclude:h,limit:p,pageToken:x,sort:v,order:b,signal:y}),enabled:r&&e.length>0&&t.length>0,staleTime:5e3})}function P4(e,t){const r=Ft();return Pn({mutationFn:i=>A4(e,t,i),async onSuccess(i,l){await Promise.all([r.invalidateQueries({queryKey:_n.files(e,t)}),r.invalidateQueries({queryKey:_n.file(e,t,l.path)})])}})}function F4(e,t){const r=Ft();return Pn({mutationFn:i=>R4(e,t,i.path,{etag:i.etag}),async onSuccess(i,l){await Promise.all([r.invalidateQueries({queryKey:_n.files(e,t)}),r.invalidateQueries({queryKey:_n.file(e,t,l.path)})])}})}function I4(e,t){const r=Ft();return Pn({mutationFn:i=>M4(e,t,i.path),async onSuccess(){await r.invalidateQueries({queryKey:_n.files(e,t)})}})}function H4(e,t){const r=Ft();return Pn({mutationFn:i=>O4(e,t,i.path,{recursive:i.recursive}),async onSuccess(i,l){await Promise.all([r.invalidateQueries({queryKey:_n.files(e,t)}),r.invalidateQueries({queryKey:_n.file(e,t,l.path)})])}})}const V4=100;function Rd({workspaceId:e,enabled:t=!0,page:r=1,pageSize:i=V4}){return yn({queryKey:_n.list(e,{page:r,pageSize:i}),queryFn:({signal:l})=>_4(e,{page:r,pageSize:i,signal:l}),enabled:t&&e.length>0,staleTime:15e3,placeholderData:l=>l})}function a1({workspaceId:e,configurationId:t,enabled:r=!0}){return yn({queryKey:_n.detail(e,t??""),queryFn:({signal:i})=>t?E4(e,t,i):Promise.resolve(null),enabled:r&&e.length>0&&!!t,staleTime:1e4})}function $p(e){const t=Ft();return Pn({mutationFn:({configurationId:r})=>k4(e,r),async onSuccess(){await t.invalidateQueries({queryKey:_n.root(e)})}})}function i1(e){const t=Ft();return Pn({mutationFn:({configurationId:r})=>D4(e,r),async onSuccess(){await t.invalidateQueries({queryKey:_n.root(e)})}})}function qp(e){const t=Ft();return Pn({mutationFn:({sourceConfigurationId:r,displayName:i})=>r1(e,{displayName:i,source:{type:"clone",configurationId:r}}),async onSuccess(){await t.invalidateQueries({queryKey:_n.root(e)})}})}function Q4(e){return Pn({mutationFn:t=>z4(e,t)})}function Z4(e,t){return Pn({mutationFn:r=>L4(e,t,r)})}const K4=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"});function G4(e,t,r={}){const{method:i="POST",headers:l,onProgress:u,signal:d}=r,h=Sa(e),p=new XMLHttpRequest,x=new Promise((b,y)=>{p.open(i,h),p.withCredentials=!0,Jm(i,l).forEach((j,C)=>{p.setRequestHeader(C,j)}),p.upload.onprogress=j=>{const C=j.lengthComputable?j.total:null,_=C&&C>0?Math.round(j.loaded/C*100):null;u?.({loaded:j.loaded,total:C,percent:_})},p.onload=()=>{const j=p.status,C=p.getResponseHeader("Content-Type")??"",_=p.responseText??"",N=W4(_,C);if(j>=200&&j<300){b({data:N,status:j});return}const E=Y4(_,C),D=E?.title??E?.detail??`Request failed with status ${j}`;y(new Ht(D,j,E))},p.onerror=()=>{y(new Ht("Upload failed due to a network error.",p.status||0))},p.onabort=()=>{y(K4)},p.send(t)}),v=()=>{p.abort()};return d&&(d.aborted?p.abort():(d.addEventListener("abort",v),x.finally(()=>d.removeEventListener("abort",v)))),{promise:x,abort:()=>p.abort()}}function W4(e,t){if(!e||!t.includes("application/json"))return null;try{return JSON.parse(e)}catch{return null}}function Y4(e,t){if(!(!e||!t.includes("application/json")))try{return JSON.parse(e)}catch{return}}function X4(e,t,r={}){const i=new FormData;return i.append("file",t),r.runOptions&&i.append("run_options",JSON.stringify(r.runOptions)),G4(`/api/v1/workspaces/${e}/documents`,i,{onProgress:r.onProgress})}async function J4(e,t,r){const{data:i}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/uploadSessions",{params:{path:{workspace_id:e}},body:t,signal:r});if(!i)throw new Error("Expected upload session response.");return i}async function e3(e,t,r){const i=await ep(`/api/v1/workspaces/${e}/documents/uploadSessions/${t}`,{method:"PUT",body:r.body,headers:{"Content-Range":`bytes ${r.start}-${r.end}/${r.total}`,"Content-Type":"application/octet-stream"},signal:r.signal});if(!i.ok){const u=await r3(i),d=u?.title??`Request failed with status ${i.status}`;throw new Ht(d,i.status,u)}const l=await i.json().catch(()=>null);if(!l)throw new Error("Expected upload range response.");return l}async function t3(e,t,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents/uploadSessions/{upload_session_id}",{params:{path:{workspace_id:e,upload_session_id:t}},signal:r});if(!i)throw new Error("Expected upload session status response.");return i}async function n3(e,t,r){const{data:i}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/uploadSessions/{upload_session_id}/commit",{params:{path:{workspace_id:e,upload_session_id:t}},signal:r});if(!i)throw new Error("Expected upload commit response.");return i}async function s3(e,t,r){await Ve.DELETE("/api/v1/workspaces/{workspace_id}/documents/uploadSessions/{upload_session_id}",{params:{path:{workspace_id:e,upload_session_id:t}},signal:r})}async function r3(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}function a3(e,t={}){const r=new URLSearchParams;t.cursor&&r.set("cursor",t.cursor),typeof t.limit=="number"&&r.set("limit",String(t.limit));const i=r.toString();return Sa(`/api/v1/workspaces/${e}/documents/changes/stream${i?`?${i}`:""}`)}async function*i3(e,t){const r=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"}),i=new AbortController,l=()=>i.abort();let u=null;t?.aborted?i.abort():t&&t.addEventListener("abort",l);try{const d=Jm("GET",{Accept:"text/event-stream"}),h=await fetch(e,{method:"GET",credentials:"include",headers:d,signal:i.signal});if(!h.ok){const v=await o3(h),b=v?.title??`Request failed with status ${h.status}`;throw new Ht(b,h.status,v)}if(!h.body)throw new Error("Document change stream unavailable.");u=h.body.getReader();const p=new TextDecoder;let x="";for(;;){const{value:v,done:b}=await u.read();for(x+=p.decode(v??new Uint8Array,{stream:!b});;){const y=x.match(/\r?\n\r?\n/);if(!y||y.index===void 0)break;const S=x.slice(0,y.index);x=x.slice(y.index+y[0].length);const j=u0(S);j&&(yield j)}if(b){const y=u0(x);y&&(yield y);return}}}catch(d){throw i.signal.aborted?r:d}finally{if(t&&t.removeEventListener("abort",l),u)try{await u.cancel()}catch{}i.signal.aborted||i.abort()}}function u0(e){const t=[];for(const i of e.split(/\r?\n/))if(i.startsWith("data:")){const l=i.slice(5);t.push(l.startsWith(" ")?l.slice(1):l)}if(!t.length)return null;const r=t.join(`
`);if(!r.trim())return null;try{const i=JSON.parse(r);return!i||typeof i!="object"||typeof i.type!="string"||typeof i.cursor!="string"?null:i}catch(i){return console.warn("Skipping malformed document change event",i,r),null}}async function o3(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}async function l3(e,t,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/sheets",{params:{path:{workspace_id:e,document_id:t}},signal:r});return i??[]}const o1=f.createContext(null),c3=6e3,u3=7e3,d0=4;function d3({children:e}){const[t,r]=f.useState([]),[i,l]=f.useState([]),u=f.useCallback(v=>{r(b=>b.filter(y=>y.id!==v)),l(b=>b.filter(y=>y.id!==v))},[]),d=f.useCallback(v=>{const b={kind:"toast",id:v.id??f0(),title:v.title,description:v.description,intent:v.intent??"info",actions:v.actions??[],duration:v.duration===void 0?c3:v.duration,dismissible:v.dismissible??!0,scope:v.scope,persistKey:v.persistKey,icon:v.icon,createdAt:Date.now()};return r(y=>{const j=[...b.persistKey?y.filter(C=>C.persistKey!==b.persistKey):y,b];return j.length>d0?j.slice(j.length-d0):j}),typeof window<"u"&&b.duration&&b.duration>0&&window.setTimeout(()=>u(b.id),b.duration+50),b.id},[u]),h=f.useCallback(v=>{const b={kind:"banner",id:v.id??f0(),title:v.title,description:v.description,intent:v.intent??"info",actions:v.actions??[],duration:v.duration===void 0?v.sticky?null:u3:v.duration,dismissible:v.dismissible??!0,scope:v.scope,persistKey:v.persistKey,icon:v.icon,sticky:v.sticky??!1,createdAt:Date.now()};return l(y=>[...b.persistKey?y.filter(j=>j.persistKey!==b.persistKey):y,b]),typeof window<"u"&&b.duration&&b.duration>0&&window.setTimeout(()=>u(b.id),b.duration+50),b.id},[u]),p=f.useCallback((v,b)=>{v&&((!b||b==="toast")&&r(y=>y.filter(S=>S.scope!==v)),(!b||b==="banner")&&l(y=>y.filter(S=>S.scope!==v)))},[]),x=f.useMemo(()=>({toasts:t,banners:i,pushToast:d,pushBanner:h,dismiss:u,clearScope:p}),[t,i,d,h,u,p]);return a.jsxs(o1.Provider,{value:x,children:[e,a.jsx(f3,{})]})}function l1(){const e=f.useContext(o1);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e}function f3(){const{toasts:e,banners:t,dismiss:r}=l1(),[i,l]=f.useState(!1);return f.useEffect(()=>l(!0),[]),!i||typeof document>"u"?null:Ts.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-0 z-[205] flex flex-col items-center gap-3 px-4 pt-3 sm:items-end sm:pr-6",children:t.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>a.jsx(m3,{banner:u,onDismiss:r},u.id))}),a.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-[210] flex flex-col items-center gap-3 px-4 sm:inset-x-auto sm:right-6 sm:bottom-6 sm:items-end sm:px-0",children:e.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>a.jsx(h3,{toast:u,onDismiss:r},u.id))})]}),document.body)}function h3({toast:e,onDismiss:t}){const r=e.duration!==null&&e.duration>0,[i,l]=f.useState(100);f.useEffect(()=>{if(!r||!e.duration)return;l(100);const d=requestAnimationFrame(()=>l(0)),h=window.setTimeout(()=>t(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(h)}},[r,e.duration,e.id,t]);const u=p3[e.intent];return a.jsxs("div",{className:te("pointer-events-auto w-full max-w-sm rounded-2xl border px-4 py-3 text-sm shadow-2xl",u.container,u.border),children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:te("mt-1 flex h-8 w-8 items-center justify-center rounded-full",u.icon),children:e.icon??u1(e.intent)}),a.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[a.jsx("p",{className:"text-sm font-semibold leading-snug text-foreground",children:e.title}),e.description?a.jsx("p",{className:"mt-1 text-xs leading-relaxed text-muted-foreground",children:e.description}):null,e.actions.length>0?a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(d=>a.jsx(c1,{action:d,onPress:()=>{d.onSelect(),t(e.id)}},d.label))}):null]}),e.dismissible?a.jsx("button",{type:"button",className:"ml-2 inline-flex h-8 w-8 items-center justify-center rounded-full text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/40","aria-label":"Dismiss notification",onClick:()=>t(e.id),children:a.jsx(Ws,{className:"h-4 w-4"})}):null]}),r&&e.duration?a.jsx("div",{className:"mt-4 h-1 overflow-hidden rounded-full bg-foreground/10",children:a.jsx("div",{className:te("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function m3({banner:e,onDismiss:t}){const r=!e.sticky&&e.duration!==null&&e.duration>0,[i,l]=f.useState(100);f.useEffect(()=>{if(!r||!e.duration)return;l(100);const d=requestAnimationFrame(()=>l(0)),h=window.setTimeout(()=>t(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(h)}},[r,e.duration,e.id,t]);const u=g3[e.intent];return a.jsxs("div",{className:te("pointer-events-auto w-full max-w-sm rounded-lg border px-3.5 py-2.5 shadow-[0_16px_32px_rgb(var(--sys-color-shadow)/0.35)] sm:min-w-[300px]",u.container,u.border),children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:te("flex h-7 w-7 items-center justify-center rounded-full text-base",u.icon),children:e.icon??u1(e.intent)}),a.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[a.jsx("p",{className:"text-[13px] font-semibold leading-tight",children:e.title}),e.description?a.jsx("p",{className:"text-[12px] leading-relaxed text-muted-foreground",children:e.description}):null,e.actions.length>0?a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:e.actions.map(d=>a.jsx(c1,{action:d,onPress:()=>{d.onSelect(),e.sticky||t(e.id)}},d.label))}):null]}),e.dismissible?a.jsx("button",{type:"button",className:te("ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full text-muted-foreground transition hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/40",u.dismiss),"aria-label":"Dismiss notification",onClick:()=>t(e.id),children:a.jsx(Ws,{className:"h-4 w-4"})}):null]}),r&&e.duration?a.jsx("div",{className:"mt-2 h-0.5 overflow-hidden rounded-full bg-foreground/10",children:a.jsx("div",{className:te("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function c1({action:e,onPress:t}){const r=e.variant??"secondary";return a.jsx("button",{type:"button",className:te("inline-flex items-center justify-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2",r==="primary"?"bg-foreground text-background hover:bg-foreground/90 focus-visible:ring-ring/50":"border-border/60 text-foreground hover:bg-muted focus-visible:ring-ring/40"),onClick:t,children:e.label})}function u1(e){switch(e){case"success":return a.jsx(qD,{className:"h-5 w-5"});case"warning":return a.jsx(BD,{className:"h-5 w-5"});case"danger":return a.jsx(PD,{className:"h-5 w-5"});default:return a.jsx($D,{className:"h-5 w-5"})}}const p3={info:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-info-500/15 text-info-500",progress:"bg-gradient-to-r from-info-500 to-info-400"},success:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-success-500/15 text-success-500",progress:"bg-gradient-to-r from-success-500 to-success-400"},warning:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-warning-400/20 text-warning-500",progress:"bg-gradient-to-r from-warning-400 to-warning-300"},danger:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-danger-500/15 text-danger-500",progress:"bg-gradient-to-r from-danger-500 to-danger-400"}},g3={info:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-info-500/15 text-info-500",progress:"bg-gradient-to-r from-info-500 to-info-400",dismiss:"hover:bg-muted"},success:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-success-500/15 text-success-500",progress:"bg-gradient-to-r from-success-500 to-success-400",dismiss:"hover:bg-muted"},warning:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-warning-500/15 text-warning-500",progress:"bg-gradient-to-r from-warning-400 to-warning-300",dismiss:"hover:bg-muted"},danger:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-danger-500/15 text-danger-500",progress:"bg-gradient-to-r from-danger-500 to-danger-400",dismiss:"hover:bg-muted"}};function f0(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}function Md(){const e=l1();return f.useMemo(()=>({notifyToast:t=>e.pushToast(t),notifyBanner:t=>e.pushBanner(t),dismissNotification:t=>e.dismiss(t),dismissScope:(t,r)=>e.clearScope(t,r)}),[e])}const x3="block w-full rounded-lg border border-border bg-card px-3 py-2 text-sm font-medium text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground",Bi=f.forwardRef(({className:e,...t},r)=>a.jsx("select",{ref:r,className:te(x3,e),...t}));Bi.displayName="Select";class b3{constructor(t){if(this.capacity=t,!Number.isFinite(t)||t<=0)throw new Error("RingBuffer capacity must be a positive number.");this.buffer=new Array(t)}buffer;start=0;_length=0;get length(){return this._length}clear(){this.buffer.fill(void 0),this.start=0,this._length=0}push(t){if(this._length<this.capacity){const r=(this.start+this._length)%this.capacity;this.buffer[r]=t,this._length+=1;return}this.buffer[this.start]=t,this.start=(this.start+1)%this.capacity}get(t){if(t<0||t>=this._length)return;const r=(this.start+t)%this.capacity;return this.buffer[r]}toArray(){const t=[];for(let r=0;r<this._length;r+=1){const i=this.get(r);i!==void 0&&t.push(i)}return t}}class v3{constructor(t,r){this.capacity=t,this.buffer=new b3(t),this.snapshot={version:this.version,length:this.buffer.length,capacity:this.capacity},r?.length&&this.appendMany(r)}listeners=new Set;buffer;version=0;snapshot;notifyScheduled=!1;nextId=1;subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}getSnapshot=()=>this.snapshot;get length(){return this.buffer.length}getLine(t){return this.buffer.get(t)}toArray(){return this.buffer.toArray()}clear(){this.buffer.clear(),this.bump()}append(t){this.buffer.push(h0(t,this.nextId++)),this.scheduleNotify()}appendMany(t){for(const r of t)this.buffer.push(h0(r,this.nextId++));this.scheduleNotify()}bump(){this.version+=1,this.snapshot={version:this.version,length:this.buffer.length,capacity:this.capacity};for(const t of this.listeners)t()}scheduleNotify(){if(this.notifyScheduled)return;this.notifyScheduled=!0;const t=()=>{this.notifyScheduled=!1,this.bump()};if(typeof requestAnimationFrame=="function"){requestAnimationFrame(t);return}setTimeout(t,0)}}function h0(e,t){if(e.id)return e;const r=e.origin??"run",i=e.timestamp??"ts";return{...e,id:`console-${r}-${i}-${t}`}}const y3={dry_run:!1,validate_only:!1,force_rebuild:!1,log_level:"INFO",active_sheet_only:!1};async function w3(e,t,r){const i={workspace_id:e},{input_document_id:l,configuration_id:u,...d}=t,h={...y3,...d};if(!l)throw new Error("input_document_id is required to start a run.");const p={input_document_id:l,configuration_id:u??void 0,options:h},{data:x}=await Ve.POST("/api/v1/workspaces/{workspace_id}/runs",{params:{path:i},body:p,signal:r});if(!x)throw new Error("Expected run creation response.");return x}async function*d1(e,t){yield*j3(e,t)}async function*j3(e,t){const r=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"}),i=new AbortController,l=()=>i.abort();let u=null;t?.aborted?i.abort():t&&t.addEventListener("abort",l);try{const d=await fetch(e,{method:"GET",credentials:"include",headers:{Accept:"text/event-stream"},signal:i.signal});if(!d.body||!d.ok)throw new Error("Run event stream unavailable.");u=d.body.getReader();const h=new TextDecoder;let p="",x=!1;for(;;){const{value:v,done:b}=await u.read();p+=h.decode(v??new Uint8Array,{stream:!b});const y=p.split(`

`);p=y.pop()??"";for(const S of y){const j=m0(S);if(j&&(yield j,j.event==="run.complete")){x=!0;break}}if(b||x){const S=m0(p);S&&(yield S);return}}}catch(d){throw i.signal.aborted?r:d}finally{if(t&&t.removeEventListener("abort",l),u)try{await u.cancel()}catch{}i.signal.aborted||i.abort()}}function m0(e){const t=[];for(const i of e.split(/\n/))if(i.startsWith("data:")){const l=i.slice(5);t.push(l.startsWith(" ")?l.slice(1):l);continue}if(!t.length)return null;const r=t.join(`
`);if(!r.trim())return null;try{const i=JSON.parse(r);return!i||typeof i!="object"||typeof i.event!="string"||i.event.trim().length===0||!("timestamp"in i)?null:(i._raw=r,i)}catch(i){return console.warn("Skipping malformed run event",i,r),null}}function S3(e,t){const r=e.events_stream_url??e.links?.events_stream;if(!r)return null;const i=[];if(Number.isFinite(t.afterSequence)){const u=Math.max(0,Math.floor(t.afterSequence));i.push(`after_sequence=${u}`)}const l=i.length?i.join("&"):void 0;return k3(r,{appendQuery:l})}async function*N3(e,t){const r=typeof e=="string"?await f1(e,t?.signal):e,i=S3(r,{afterSequence:t?.afterSequence});if(!i)throw new Error("Run events link unavailable.");for await(const l of d1(i,t?.signal))yield l}async function f1(e,t){const{data:r}=await Ve.GET("/api/v1/runs/{run_id}",{params:{path:{run_id:e}},signal:t});if(!r)throw new Error("Run not found");return r}function C3(e){const t=e.output,r=t?.ready,i=t?.download_url??e.links?.output_download??e.links?.output;return r===!1||!i?null:Sa(i)}function _3(e){const t=e.events_download_url??e.links?.events_download;return t?Sa(t):null}function E3(e){const t=e.links?.input_download??e.links?.input;return t?Sa(t):null}function k3(e,t){const r=e.includes("?"),i=t?.appendQuery?`${e}${r?"&":"?"}${t.appendQuery}`:e;return Sa(i)}function D3(e){const t=new Date(e.timestamp);return Number.isNaN(t.getTime())?new Date().toISOString():t.toISOString()}function p0(e){return e.event.toString()}function T3(e){const t=e.data;return t&&typeof t=="object"?t:{}}function A3({workspaceId:e,configId:t,onJobIdChange:r,seed:i,maxConsoleLines:l=2e3,onError:u}){const d=f.useRef(new v3(l,i?.console?[...i.console].slice(-l):void 0)),h=f.useRef(null),p=f.useRef(!1),[x,v]=f.useState(null),[b,y]=f.useState(null),[S,j]=f.useState("idle"),[C,_]=f.useState(null),N=S==="running",E=f.useCallback(()=>{const R=h.current;R&&(R.abort(),h.current=null)},[]);f.useEffect(()=>()=>{E()},[E]);const D=f.useCallback(()=>{d.current.clear()},[]),U=f.useCallback(R=>{u&&u(R)},[u]),z=f.useCallback(R=>{const A=p0(R),B=T3(R),K=(A.startsWith("build.")?"build":A==="console.line"&&typeof B.scope=="string"?B.scope:"run")==="build"?"build":"run",$=typeof R.level=="string"?R.level.toLowerCase():"info",q=$==="debug"||$==="warning"||$==="error"||$==="success"?$:"info",I=typeof R.message=="string"?R.message:"",je=I.trim()?I:A,M={id:typeof R.event_id=="string"?R.event_id:void 0,level:q,message:je,timestamp:D3(R),origin:K,raw:R};if(d.current.append(M),A==="run.complete"){_(B);const H=typeof B.status=="string"?B.status.toLowerCase():"";j(H==="succeeded"||H==="success"?"succeeded":H==="cancelled"||H==="canceled"?"cancelled":"failed")}},[]),V=f.useCallback(async(R,A,B)=>{if(p.current||N||B?.prepare&&B.prepare()===!1)return null;E(),D(),_(null),y(A.mode),j("running"),v(null),r?.(null);const T=new Date().toISOString(),K=new AbortController;h.current=K,p.current=!0;let $=null;try{const q=await w3(e,{...R,configuration_id:t},K.signal);$=q.id,v(q.id),r?.(q.id);for await(const I of N3(q,{afterSequence:0,signal:K.signal}))if(z(I),p0(I)==="run.complete")break;if(!$)throw new Error("Run creation response missing run id.");return{jobId:$,startedAt:T}}catch(q){return K.signal.aborted||(j("failed"),U(q)),null}finally{p.current=!1,h.current===K&&(h.current=null)}},[D,t,N,r,U,z,E,e]);return f.useMemo(()=>({console:d.current,jobId:x,jobMode:b,jobStatus:S,jobInProgress:N,completedDetails:C,clearConsole:D,startJob:V}),[x,b,S,N,C,D,V])}function R3(e){return e==="succeeded"||e==="failed"||e==="cancelled"}function M3(e){const t=(e??"").toLowerCase();return t==="succeeded"||t==="failed"||t==="cancelled"?t:t==="success"?"succeeded":"failed"}function O3({workspaceId:e,configId:t,runId:r,seed:i,maxConsoleLines:l,onRunIdChange:u,onRunComplete:d}){const h=f.useRef(null),{console:p,jobId:x,jobMode:v,jobStatus:b,jobInProgress:y,completedDetails:S,clearConsole:j,startJob:C}=A3({workspaceId:e,configId:t,onJobIdChange:u,seed:i?{console:i.console}:void 0,maxConsoleLines:l}),_=x??r,N=v??null,[E,D]=f.useState(null),U=f.useRef(null),z=f.useMemo(()=>({status:y&&N==="validation"?"running":"idle",messages:[],lastRunAt:void 0,error:null,digest:null}),[y,N]);f.useEffect(()=>{if(!_||!R3(b)||U.current===_)return;U.current=_;const A=M3(typeof S?.status=="string"?S.status:null),B=N??"extraction",T=S?.execution??{},K=typeof T.started_at=="string"?T.started_at:null,$=typeof T.completed_at=="string"?T.completed_at:new Date().toISOString(),q=typeof T.duration_ms=="number"?T.duration_ms:null;if(d?.({runId:_,status:A,mode:B,startedAt:K,completedAt:$,durationMs:q,payload:S}),B==="validation")return;const I=h.current,je=S?.artifacts??{},M=typeof je.output_path=="string"?je.output_path:null,H=typeof je.processed_file=="string"?je.processed_file:null;D({runId:_,status:A,outputUrl:void 0,inputUrl:void 0,outputReady:M?!0:void 0,outputFilename:M?z3(M):null,outputPath:M,logsUrl:void 0,processedFile:H,outputLoaded:!1,documentName:I?.documentName,sheetNames:I?.sheetNames??[],error:null,startedAt:K,completedAt:$,durationMs:q}),(async()=>{try{const ee=await f1(_),be=C3(ee)??void 0,de=_3(ee)??void 0,L=E3(ee)??void 0;D(W=>W&&W.runId===_?{...W,outputUrl:be??W.outputUrl,outputReady:be?!0:W.outputReady,logsUrl:de??W.logsUrl,inputUrl:L??W.inputUrl,outputLoaded:!0}:W)}catch{D(ee=>ee&&ee.runId===_?{...ee,outputLoaded:!0}:ee)}})()},[_,b,S,d,N]);const V=f.useCallback(async(A,B,T)=>{h.current=B;const K=T?.forceRebuild?{...A,force_rebuild:!0}:A,$=await C(K,B,{prepare:T?.prepare});return $&&B.mode==="extraction"&&D(null),$?{runId:$.jobId,startedAt:$.startedAt}:null},[C]),R=b;return f.useMemo(()=>({runStatus:R,runMode:N??void 0,runInProgress:y,validation:z,console:p,latestRun:E,clearConsole:j,startRun:V}),[R,N,y,z,p,E,j,V])}function z3(e){const t=e.trim();if(!t)return"";const r=t.split("/");return r[r.length-1]||t}const h1=e=>`ade.ui.workspace.${e}.config-builder.last`;function Bp(e){return ja(h1(e))}function Pp(e,t){if(t){const r={configId:t};return e.set(r),r}return e.clear(),null}function $o(e){return e?typeof e=="string"?e.toLowerCase():String(e).toLowerCase():""}function g0(e,t){const r=e?new Date(e).getTime():0;return(t?new Date(t).getTime():0)-r}function Fp(e,t){const r=`Copy of ${e}`.trim();if(!t.has(r.toLowerCase()))return r;for(let i=2;i<100;i+=1){const l=`${r} (${i})`;if(!t.has(l.toLowerCase()))return l}return`${r} (${Date.now()})`}const L3={min:200,max:420},U3=320,$3=120,cm=140,q3=220,B3=40,P3=2e3,x0=10,F3=56,b0="Panel closed to keep the editor readable on this screen size. Resize the window or collapse other panes to reopen it.",I3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.tabs`,H3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.console`,V3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.explorer.expanded`,Q3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.layout`,Z3={explorer:"",search:"Search coming soon",scm:"Source Control coming soon",extensions:"Extensions coming soon"},K3=[{value:"DEBUG",label:"Debug"},{value:"INFO",label:"Info"},{value:"WARNING",label:"Warning"},{value:"ERROR",label:"Error"}];function m1({workspaceId:e,configId:t,configName:r,configDisplayName:i,seed:l,windowState:u,onMinimizeWindow:d,onMaximizeWindow:h,onRestoreWindow:p,onCloseWorkbench:x,shouldBypassUnsavedGuard:v}){const b=Ft(),y=en(),{fileId:S,pane:j,console:C,consoleExplicit:_,setFileId:N,setPane:E,setConsole:D}=y4(),[U,z]=f.useState(null),V=!!l,R=B4({workspaceId:e,configId:t,depth:"infinity",sort:"path",order:"asc",enabled:!V}),A=R.data?.fileset_hash??null,B=R.data?.status==="draft",T=R.data?.capabilities,K=V||!!T?.editable,$=!K,q=f.useMemo(()=>Bp(e),[e]),I=Rd({workspaceId:e,enabled:!V}),je=f.useMemo(()=>{const Z=I.data?.items??[];return new Set(Z.map(ge=>ge.display_name.trim().toLowerCase()))},[I.data?.items]),M=f.useMemo(()=>{const Z=I.data?.items??[];for(const ge of Z)if($o(ge.status)==="active")return ge;return null},[I.data?.items]),H=qp(e),ee=$p(e),[be,de]=f.useState(!1),[L,W]=f.useState(""),[pe,G]=f.useState(null),[ie,J]=f.useState(!1),[ne,oe]=f.useState(null),he=f.useMemo(()=>l?l.tree:R.data?i0(R.data):null,[l,R.data]);f.useEffect(()=>{t&&(V||R.isSuccess)&&Pp(q,t)},[t,V,R.isSuccess,q]);const ue=f.useCallback(()=>{H.reset(),G(null),W(Fp(i,je)),de(!0)},[i,H,je]);f.useEffect(()=>{if(!ie||!B||V)return;let Z=!1;return oe({stage:"checking"}),Lp(e,t).then(ge=>{if(!Z){if(Array.isArray(ge.issues)&&ge.issues.length>0){oe({stage:"issues",issues:ge.issues});return}oe({stage:"confirm"})}}).catch(ge=>{if(Z)return;const qe=ge instanceof Error?ge.message:"Unable to validate configuration.";oe({stage:"error",message:qe})}),()=>{Z=!0}},[t,B,ie,V,e]);const[Oe,Ge]=f.useState(null),Se=f.useCallback(Z=>{Ge(Z)},[]),ze=Z4(e,t),Pe=f.useRef(null),[Me,Be]=f.useState(null),[We,st]=f.useState(!1),[P,F]=f.useState(!1),{runStatus:X,runMode:Te,runInProgress:_e,validation:me,console:De,latestRun:ye,clearConsole:ke,startRun:Ie}=O3({workspaceId:e,configId:t,runId:U,seed:l,maxConsoleLines:P3,onRunIdChange:z,onRunComplete:Se}),[ht,tt]=f.useState(!1),[An,Ut]=f.useState(!1),At=f.useMemo(()=>l?null:ja(I3(e,t)),[e,t,l]),$t=f.useMemo(()=>l?null:ja(H3(e,t)),[e,t,l]),Ze=f.useMemo(()=>ja(Q3(e,t)),[e,t]),pn=f.useRef(null),Rn=Xm(),we=uw(Rn.resolvedMode)?"dark":"light",He=Rn.resolvedMode==="light"?"vs-light":"ade-dark",vt=me.lastRunAt?`Last run ${eO(me.lastRunAt)}`:void 0,[lt,yt]=f.useState(()=>{const Z=Ze.get();return Z?.explorer?{collapsed:!!Z.explorer.collapsed,fraction:Z.explorer.fraction??280/1200}:{collapsed:!1,fraction:280/1200}}),[Rt,an]=f.useState(null),jn=f.useRef(null),[gn,xn]=f.useState(!1);f.useEffect(()=>{$t?pn.current=$t.get()??null:pn.current=null,jn.current=null,an(null),xn(!1)},[$t]);const[Fn,ct]=f.useState({width:0,height:0}),[_t,dn]=f.useState(null),[it,Ms]=f.useState("explorer"),[tn,ns]=f.useState(null),[bs,In]=f.useState(null),[bn,Hn]=f.useState(!1),[Ar,Xr]=f.useState(!1),[Ko,Hi]=f.useState(!1),[Tt,fs]=f.useState(null),[ss,rs]=f.useState(!1),[as,fn]=f.useState(null),[Rr,nn]=f.useState(null),[vs,Os]=f.useState(null),{notifyBanner:is,dismissScope:fr,notifyToast:on}=Md(),Mr=f.useMemo(()=>`workbench-console:${e}:${t}`,[e,t]),En=f.useMemo(()=>`workbench-upload:${e}:${t}`,[e,t]),li=F4(e,t),Or=I4(e,t),zr=H4(e,t),dt=f.useCallback((Z,ge)=>{is({title:Z,intent:ge?.intent??"info",duration:ge?.duration??6e3,dismissible:!0,scope:Mr,persistKey:Mr})},[is,Mr]),Vn=f.useCallback(()=>{fr(Mr,"banner")},[fr,Mr]),Mn=f.useCallback(Z=>{const ge=um(Z);dt(ge,{intent:"danger",duration:null})},[dt]),Vi=f.useCallback(async()=>{st(!0);try{const Z=await Up(e,t),ge=Z.filename??`${t}.zip`,qe=URL.createObjectURL(Z.blob),Ue=document.createElement("a");Ue.href=qe,Ue.download=ge,Ue.click(),URL.revokeObjectURL(qe),dt(`Exported ${ge}`,{intent:"success",duration:4e3})}catch(Z){Mn(Z),dt("Export failed. Try again in a moment.",{intent:"danger",duration:6e3})}finally{st(!1)}},[e,t,dt,Mn]),Jr=f.useCallback(()=>{de(!1),G(null)},[]),Qi=f.useCallback(()=>{const Z=L.trim();if(!Z){G("Enter a name for the new draft configuration.");return}G(null),H.mutate({sourceConfigurationId:t,displayName:Z},{onSuccess(ge){on({title:"Draft created.",intent:"success",duration:3500}),Jr(),y(`/workspaces/${e}/config-builder/${encodeURIComponent(ge.id)}/editor`)},onError(ge){G(ge instanceof Error?ge.message:"Unable to duplicate configuration.")}})},[Jr,t,L,H,y,on,e]),Lr=f.useCallback(()=>{ee.reset(),oe({stage:"checking"}),J(!0)},[ee]),ea=f.useCallback(()=>{J(!1),oe(null)},[]),hs=f.useCallback(()=>{ee.mutate({configurationId:t},{async onSuccess(){on({title:"Configuration is now active and locked.",description:"Duplicate it to make further edits.",intent:"success",duration:5e3}),ea(),await Promise.all([b.invalidateQueries({queryKey:_n.files(e,t)}),b.invalidateQueries({queryKey:_n.root(e)})])},onError(Z){const ge=Z instanceof Error?Z.message:"Unable to make configuration active.";oe({stage:"error",message:ge})}})},[ea,t,ee,on,b,e]);f.useEffect(()=>{if(!Oe)return;const{runId:Z,status:ge,payload:qe}=Oe,Ue=qe?.failure??void 0,xt=(typeof Ue?.message=="string"?Ue.message.trim():null)||"ADE run failed.",bt=ge==="cancelled";dt(ge==="succeeded"?"ADE run completed successfully.":bt?"ADE run cancelled.":xt,{intent:ge==="succeeded"?"success":bt?"info":"danger"}),Ge(Qn=>Qn&&Qn.runId===Z?null:Qn)},[Oe,dt,Ge]);const ys=u==="maximized",hr=typeof navigator<"u"?/mac/i.test(navigator.platform):!1,ci=f.useCallback(()=>{x()},[x]),mr=!lt.collapsed,Zi=f.useCallback(async Z=>{if(l)return{content:l.content[Z]??"",etag:null};const ge=await b.fetchQuery({queryKey:_n.file(e,t,Z),queryFn:({signal:qe})=>c0(e,t,Z,qe)});if(!ge)throw new Error("File could not be loaded.");return{content:v0(ge),etag:ge.etag??null}},[l,b,e,t]),Xe=h4({tree:he,initialActiveFileId:S,loadFile:Zi,persistence:At??void 0}),Ur=f.useCallback((Z,ge)=>{Xe.updateContent(Z,ge)},[Xe]),$r=P4(e,t),ta=f.useCallback(async Z=>{if(V)return null;const ge=await b.fetchQuery({queryKey:_n.file(e,t,Z),queryFn:({signal:Ue})=>c0(e,t,Z,Ue)}),qe=v0(ge);return Xe.replaceTabContent(Z,{content:qe,etag:ge.etag??null,metadata:{size:ge.size??null,modifiedAt:ge.mtime??null,contentType:ge.content_type??Xe.tabs.find(Ue=>Ue.id===Z)?.metadata?.contentType??null,etag:ge.etag??null}}),ge},[V,b,e,t,Xe]);j4({isDirty:Xe.isDirty,shouldBypassNavigation:v});const Ki=f.useCallback(()=>{d()},[d]),ui=f.useCallback(()=>{ys?p():h()},[ys,h,p]),os=C!=="open",pr=f.useMemo(()=>Xe.tabs.filter(Z=>Z.status==="ready"&&Z.content!==Z.initialContent),[Xe.tabs]),qr=Xe.tabs.some(Z=>Z.saving),On=!V&&K&&pr.length>0;f.useEffect(()=>{typeof window>"u"||requestAnimationFrame(()=>{window.dispatchEvent(new Event("ade:workbench-layout"))})},[lt.collapsed,lt.fraction,os,Rt,ys,j]);const Ys=f.useCallback(async Z=>{if(V)return!1;const ge=Xe.tabs.find(et=>et.id===Z);if(!ge||ge.status!=="ready"||ge.content===ge.initialContent||ge.saving)return!1;const qe=ge.content,Ue=ge.etag??void 0;Xe.beginSavingTab(Z);try{const et=await $r.mutateAsync({path:ge.id,content:qe,etag:Ue,create:!Ue,parents:!0}),xt={size:et.size??ge.metadata?.size??null,modifiedAt:et.mtime??ge.metadata?.modifiedAt??null,contentType:ge.metadata?.contentType??null,etag:et.etag??ge.metadata?.etag??null};return Xe.completeSavingTab(Z,{etag:et.etag??ge.etag??null,metadata:xt,savedContent:qe}),dt(`Saved ${ge.name}`,{intent:"success",duration:4e3}),!0}catch(et){const xt=et instanceof Ht&&et.status===412,bt=xt?new Error("Save blocked because this file changed on the server. Reloading latest version."):et;if(Xe.failSavingTab(Z,bt instanceof Error?bt.message:String(bt)),xt)try{await ta(Z),dt("File reloaded with the latest version from the server. Review before saving again.",{intent:"warning",duration:6e3})}catch(vn){Mn(vn)}return Mn(bt),!1}},[V,Xe,$r,dt,ta,Mn]),Br=f.useCallback(async Z=>{const ge=[];for(const qe of Z)await Ys(qe)&&ge.push(qe);return ge},[Ys]),zs=f.useCallback(async()=>{if(!On||pr.length===0)return!0;const ge=(await Br(pr.map(qe=>qe.id))).length===pr.length;return ge||dt("Save failed. Fix errors before running again.",{intent:"danger",duration:7e3}),ge},[On,pr,Br,dt]),Pr=f.useCallback(Z=>{Ys(Z)},[Ys]),Na=f.useCallback(()=>{Xe.activeTab&&Ys(Xe.activeTab.id)},[Xe.activeTab,Ys]),di=f.useCallback(()=>{if(!On)return;const Z=pr.map(ge=>ge.id);(async()=>{const ge=await Br(Z);ge.length>1&&dt(`Saved ${ge.length} files`,{intent:"success",duration:5e3})})()},[On,pr,Br,dt]);f.useEffect(()=>{const Z=_t;if(!Z||typeof window>"u")return;const ge=()=>{const Ue=Z.getBoundingClientRect(),et=Ue.width,xt=Ue.height;ct({width:et,height:xt}),window.dispatchEvent(new Event("ade:workbench-layout"))};if(ge(),typeof window.ResizeObserver>"u")return window.addEventListener("resize",ge),()=>window.removeEventListener("resize",ge);const qe=new window.ResizeObserver(()=>ge());return qe.observe(Z),()=>qe.disconnect()},[_t]);const gr=os?U3:$3,ln=f.useMemo(()=>{const Z=Math.max(0,Fn.height),qe=Math.max(0,Z-gr-x0),Ue=Math.min(cm,qe);return{container:Z,minPx:Ue,maxPx:qe}},[Fn.height,gr]),Ls=f.useCallback((Z,ge=ln)=>Vs(Z,ge.minPx,ge.maxPx),[ln]),Xs=f.useCallback(()=>{const Z=pn.current;return Z&&"version"in Z&&Z.version===2&&typeof Z.fraction=="number"?Vs(Z.fraction,0,1):Z&&"height"in Z&&typeof Z.height=="number"&&ln.container>0?Vs(Z.height/ln.container,0,1):.25},[ln.container]);f.useEffect(()=>{Rt===null&&ln.container>0&&an(Xs())},[Rt,ln.container,Xs]);const ws=f.useCallback(()=>ln.container>0&&ln.maxPx<cm?(D("closed"),dt(b0,{intent:"warning",duration:1e4}),!1):(Vn(),D("open"),an(Z=>Z!==null?Vs(Z,0,1):jn.current!==null?Vs(jn.current,0,1):Xs()),!0),[ln,D,dt,Vn,Xs]),js=f.useCallback(()=>{jn.current=Rt,D("closed"),Vn()},[Rt,D,Vn]);f.useEffect(()=>{if(gn)return;const Z=pn.current?.state;if(_||!Z){xn(!0);return}(Z==="open"||Z==="closed")&&Z!==C&&D(Z),xn(!0)},[_,C,D,gn]),f.useEffect(()=>{!$t||bn||Rt===null||$t.set({version:2,fraction:Vs(Rt,0,1),state:C})},[$t,Rt,C,bn]),f.useEffect(()=>{if(!(C!=="open"||!ln.container)){if(ln.maxPx<cm){D("closed"),dt(b0,{intent:"warning",duration:1e4});return}an(Z=>Z===null?Xs():Vs(Z,0,1))}},[C,ln,D,dt,Xs]);const Ca=f.useCallback((Z,ge)=>{if(Z<=0)return{minPx:ge.min,maxPx:ge.max,minFrac:0,maxFrac:1};const qe=Math.min(ge.min,Z),Ue=Math.min(ge.max,Z);return{minPx:qe,maxPx:Ue,minFrac:qe/Z,maxFrac:Ue/Z}},[]),ms=Math.max(0,Fn.width-F3),Js=f.useMemo(()=>Ca(ms,L3),[ms,Ca]),Fr=f.useCallback((Z,ge)=>Vs(Z,ge.minFrac,ge.maxFrac),[]);f.useEffect(()=>{ms<=0||yt(Z=>{if(Z.collapsed)return Z;const ge=Fr(Z.fraction,Js);return ge===Z.fraction?Z:{...Z,fraction:ge}})},[ms,Js,Fr]),f.useEffect(()=>{Ze.set({version:2,explorer:{collapsed:lt.collapsed,fraction:lt.fraction}})},[Ze,lt]);const na=lt.collapsed?0:Vs(lt.fraction,Js.minFrac,Js.maxFrac)*ms,sa=ms>0?Math.min(na,ms):na,O=Math.max(0,ln.container),xe=(Rt??(O>0?Vs(q3/O,0,1):.25))*O,Le=O>0?Ls(xe):0,nt=x0,at=os?B3:Le,Mt=O>0?Math.max(gr,O-nt-at):gr;f.useEffect(()=>{const Z=Xe.activeTabId;if(!Z){N(void 0);return}N(Z)},[Xe.activeTabId,N]),f.useEffect(()=>{!as||!he||Ks(he,as)&&(Xe.openFile(as),N(as),fn(null))},[as,he,Xe,N]);const mt=f.useCallback(()=>ws()?(E("terminal"),!0):!1,[ws,E]),Us=f.useCallback(async()=>{if(V||!he||R.isLoading||R.isError||!await zs())return;let ge=null;try{ge=(await p1(e))[0]??null}catch(qe){on({title:"Unable to load documents for validation.",message:um(qe),intent:"warning",duration:5e3});return}if(!ge){on({title:"Upload a document to run validation.",intent:"warning",duration:5e3});return}await Ie({validate_only:!0,input_document_id:ge.id},{mode:"validation",documentId:ge.id,documentName:ge.name},{prepare:mt})},[V,he,R.isLoading,R.isError,zs,Ie,mt,e,on]),Go=f.useCallback(async Z=>{if(tt(!1),Ut(!1),V||!he||R.isLoading||R.isError||!await zs())return;const qe=Array.from(new Set((Z.sheetNames??[]).filter(Boolean)));Ie({input_document_id:Z.documentId,input_sheet_names:qe.length?qe:void 0,log_level:Z.logLevel},{mode:"extraction",documentId:Z.documentId,documentName:Z.documentName,sheetNames:qe},{forceRebuild:An,prepare:mt})},[V,he,R.isLoading,R.isError,Ie,An,mt,zs]);f.useEffect(()=>{if(typeof window>"u")return;const Z=ge=>{if(!(hr?ge.metaKey:ge.ctrlKey)||ge.altKey||ge.key.toLowerCase()!=="s")return;const Ue=ge.target;if(Ue){const et=Ue.tagName;if(et==="INPUT"||et==="TEXTAREA"||Ue.isContentEditable)return}On&&(ge.preventDefault(),Na())};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[hr,On,Na]);const _a=Te??(_e?"extraction":void 0),ra=_e,Wo=me.status==="running"||ra&&_a==="validation",Ud=!V&&!!he&&!R.isLoading&&!R.isError&&!ra&&me.status!=="running",$d=ra&&_a!=="validation",Gi=!V&&!!he&&!R.isLoading&&!R.isError&&!ra,xr=!V&&!R.isLoading&&!R.isError&&!!T?.can_create,Yo=xr&&!li.isPending&&!!T?.can_delete,Wi=xr&&!Or.isPending,Xo=xr&&!zr.isPending&&!!T?.can_delete,Ea=B&&!V&&!ze.isPending&&!!A,fi=B&&!V&&!Xe.isDirty&&!ee.isPending,qd=f.useCallback(Z=>{Ms(Z),Z==="explorer"&&yt(ge=>({...ge,collapsed:!1}))},[]),Jo=f.useCallback(Z=>{Z.preventDefault();const ge=Z.currentTarget.getBoundingClientRect();ns({x:ge.right+8,y:ge.top})},[]),Bd=f.useCallback(Z=>{Be(Z)},[]),Pd=f.useCallback(()=>ns(null),[]),br=f.useCallback(()=>{os?ws():js()},[os,ws,js]);f.useEffect(()=>{if(typeof window>"u")return;const Z=ge=>{if(!(hr?ge.metaKey:ge.ctrlKey)||ge.altKey||ge.key?.toLowerCase()!=="`"&&ge.code!=="Backquote")return;const et=ge.target;if(et&&!(typeof et.closest=="function"?et.closest("[data-editor-area]"):null)){const bt=et.tagName,vn=et.getAttribute("role");if(bt==="INPUT"||bt==="TEXTAREA"||vn==="textbox"||et.isContentEditable)return}ge.preventDefault(),br()};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[hr,br]);const xc=f.useCallback(()=>{ke()},[ke]),Fd=f.useCallback(()=>{yt(Z=>({...Z,collapsed:!Z.collapsed}))},[]),Id=f.useCallback(()=>{yt(Z=>({...Z,collapsed:!0}))},[]),Hd=f.useCallback(Z=>{Wl(Z.dataTransfer)&&Z.preventDefault()},[]),Vd=f.useCallback(Z=>{Z.defaultPrevented||!Wl(Z.dataTransfer)||(Z.preventDefault(),on({title:"Drop files into the Explorer to upload.",description:"Open the Explorer pane, then drop into a folder in the file tree.",intent:"info",duration:7e3,persistKey:En,actions:[{label:"Show Explorer",variant:"secondary",onSelect:()=>yt(ge=>({...ge,collapsed:!1}))}]}))},[on,En,yt]),Yi=f.useCallback(async(Z,ge)=>{if(V){on({title:"Uploads arent available in demo mode.",intent:"warning",duration:6e3,persistKey:En});return}if($){on({title:"This configuration is read-only.",description:"Duplicate it to upload files.",intent:"warning",duration:7e3,persistKey:En});return}if(!xr){on({title:"Files are still loading.",description:"Wait for the explorer to finish syncing and try again.",intent:"info",duration:6e3,persistKey:En});return}if(ss){on({title:"Upload already in progress.",description:"Wait for the current upload to finish before starting another.",intent:"info",duration:6e3,persistKey:En});return}const qe=Z.items.length;if(qe===0){on({title:"No files to upload.",intent:"warning",duration:5e3,persistKey:En});return}rs(!0),on({title:`Uploading ${qe} file${qe===1?"":"s"}`,description:Z.folderPath?`Destination: ${Z.folderPath}`:"Destination: root",intent:"info",duration:null,dismissible:!1,persistKey:En});const Ue=[],et=[];try{for(const sn of Z.items)if(!(sn.exists&&!ge.overwriteExisting))try{await $r.mutateAsync({path:sn.targetPath,content:sn.file,parents:!0,create:!sn.exists,etag:sn.exists?sn.etag??void 0:void 0,contentType:sn.file.type||void 0}),Ue.push(sn.targetPath)}catch(Yt){const vr=Yt instanceof Ht&&Yt.status===412?"Upload blocked because the file changed on the server. Refresh and try again.":Yt instanceof Ht&&Yt.status===428?"Upload blocked: refresh the file list and try again.":Yt instanceof Ht&&Yt.status===413?Yt.problem?.detail||"File is larger than the allowed limit.":um(Yt);et.push({path:sn.targetPath,message:vr})}try{await R.refetch()}catch{}for(const sn of Ue){const Yt=Xe.tabs.find(hi=>hi.id===sn);if(!(!Yt||Yt.status!=="ready"||Yt.content!==Yt.initialContent))try{await ta(sn)}catch{}}}finally{rs(!1)}const xt=Z.skipped.length,bt=Ue.length,vn=et.length,aa=vn>0?bt>0?"warning":"danger":xt>0?"warning":"success",Qn=[];bt>0&&Qn.push(`${bt} uploaded`),xt>0&&Qn.push(`${xt} skipped`),vn>0&&Qn.push(`${vn} failed`),on({title:vn>0?"Upload finished with issues.":xt>0?"Upload finished.":"Upload complete.",description:Qn.join("  "),intent:aa,duration:8e3,dismissible:!0,persistKey:En,actions:et.length>0?[{label:"Show errors",variant:"secondary",onSelect:()=>{const sn=et.slice(0,6).map(Yt=>`${Yt.path}: ${Yt.message}`).join("  ");is({title:"Upload errors",description:sn||"Upload errors occurred.",intent:"danger",duration:null,dismissible:!0,scope:En,persistKey:`${En}:errors`})}}]:void 0})},[xr,R,$,ss,is,on,ta,$r,En,V,Xe.tabs]),Qd=f.useCallback(async(Z,ge)=>{if(ss){on({title:"Upload already in progress.",description:"Wait for the current upload to finish before dropping more files.",intent:"info",duration:6e3,persistKey:En});return}if(Tt){on({title:"Resolve the overwrite prompt first.",description:"Choose whether to overwrite existing files, then try again.",intent:"info",duration:6e3,persistKey:En});return}if(!he)return;const qe=qi(Z),Ue=R.data?.limits??null,et=[],xt=[],bt=new Set;for(const Qn of ge){const sn=qi(Qn.relativePath);if(!sn){xt.push({relativePath:Qn.relativePath,reason:"Missing file name."});continue}const Yt=XM(qe,sn);if(!Yt||!JM(Yt)){xt.push({relativePath:sn,reason:"Invalid path."});continue}if(bt.has(Yt)){xt.push({relativePath:sn,reason:"Duplicate path in drop payload."});continue}bt.add(Yt);const vr=Ks(he,Yt);if(vr&&vr.kind==="folder"){xt.push({relativePath:sn,reason:"A folder with this name already exists."});continue}const hi=!!(vr&&vr.kind==="file"),Sc=hi?vr?.metadata?.etag??null:null;if(hi&&!Sc){xt.push({relativePath:sn,reason:"Missing file version. Refresh and try again."});continue}const nl=Ue&&typeof Ue.code_max_bytes=="number"&&typeof Ue.asset_max_bytes=="number"?e4(Yt)?Ue.asset_max_bytes:Ue.code_max_bytes:null;if(typeof nl=="number"&&Qn.file.size>nl){xt.push({relativePath:sn,reason:`File exceeds ${nl} bytes.`});continue}et.push({file:Qn.file,relativePath:sn,targetPath:Yt,exists:hi,etag:Sc})}if(et.length===0){on({title:"No uploadable files.",description:xt.length?`${xt.length} item${xt.length===1?"":"s"} skipped.`:void 0,intent:"warning",duration:7e3,persistKey:En});return}const vn=et.filter(Qn=>Qn.exists),aa={folderPath:qe,items:et,conflicts:vn,skipped:xt};if(vn.length>0){fs(aa);return}await Yi(aa,{overwriteExisting:!1})},[R.data?.limits,ss,on,Yi,he,Tt,En]),Zd=f.useCallback(async(Z,ge)=>{const qe=ge.trim();if(!qe)throw new Error("Enter a file name.");if(qe.includes(".."))throw new Error("File name cannot include '..'.");if($)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!xr)throw new Error("Files are still loading.");const Ue=Z.replace(/\/+$/,""),et=qe.replace(/^\/+/,"").replace(/\/+/g,"/"),bt=(Ue?`${Ue}/${et}`:et).replace(/\/+/g,"/");if(!bt||bt.endsWith("/"))throw new Error("Enter a valid file name.");if(he&&Ks(he,bt))throw new Error("A file or folder with that name already exists.");Xr(!0);try{await $r.mutateAsync({path:bt,content:"",parents:!0,create:!0}),fn(bt),await R.refetch(),dt(`Created ${bt}`,{intent:"success",duration:4e3})}catch(vn){throw Mn(vn),vn instanceof Error?vn:new Error("Unable to create file.")}finally{Xr(!1)}},[xr,$,he,$r,R,dt,Mn]),Kd=f.useCallback(async(Z,ge)=>{const qe=ge.trim();if(!qe)throw new Error("Enter a folder name.");if(qe.includes(".."))throw new Error("Folder name cannot include '..'.");if($)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Wi)throw new Error("Files are still loading.");const Ue=Z.replace(/\/+$/,""),et=qe.replace(/^\/+/,"").replace(/\/+/g,"/"),bt=(Ue?`${Ue}/${et}`:et).replace(/\/+/g,"/").replace(/\/$/,"");if(!bt)throw new Error("Enter a valid folder name.");if(he&&Ks(he,bt))throw new Error("A file or folder with that name already exists.");Hi(!0);try{await Or.mutateAsync({path:bt}),await R.refetch(),dt(`Folder ready: ${bt}`,{intent:"success",duration:4e3})}catch(vn){throw Mn(vn),vn instanceof Error?vn:new Error("Unable to create folder.")}finally{Hi(!1)}},[Wi,$,he,Or,R,dt,Mn]),Gd=f.useCallback(async Z=>{if($)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Yo)throw new Error("Files are still loading.");const ge=he?Ks(he,Z):null;if(!he||!ge)throw new Error("File not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete ${Z}? This cannot be undone.`)){Xr(!1),nn(Z);try{await li.mutateAsync({path:Z,etag:ge.metadata?.etag}),Xe.closeTab(Z),fn(Ue=>Ue===Z?null:Ue),await R.refetch(),dt(`Deleted ${Z}`,{intent:"info",duration:4e3})}catch(Ue){const et=Ue instanceof Ht&&Ue.status===428?"Delete blocked: missing latest file version. Reload the explorer and try again.":Ue instanceof Error?Ue.message:"Unable to delete file.";throw Mn(et),new Error(et)}finally{nn(Ue=>Ue===Z?null:Ue)}}},[Yo,$,he,li,Xe,R,dt,Mn,nn]),el=f.useCallback(async Z=>{if($)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Xo)throw new Error("Files are still loading.");const ge=he?Ks(he,Z):null;if(!he||!ge||ge.kind!=="folder")throw new Error("Folder not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete folder ${Z} and all contents? This cannot be undone.`)){Os(Z);try{await zr.mutateAsync({path:Z,recursive:!0}),fn(Ue=>Ue===Z?null:Ue),Xe.closeTab(Z),await R.refetch(),dt(`Deleted folder ${Z}`,{intent:"info",duration:4e3})}catch(Ue){const et=Ue instanceof Error?Ue.message:"Unable to delete folder.";throw Mn(et),new Error(et)}finally{Os(Ue=>Ue===Z?null:Ue)}}},[Xo,$,he,zr,Xe,R,dt,Mn,Os]),ka=f.useCallback(()=>{if(!Ea){dt("Replace is only available for draft configurations.",{intent:"warning",duration:6e3}),Be(null);return}Be(null),F(!0)},[Ea,dt]),Wd=f.useCallback(async Z=>{const ge=Z.target.files?.[0]??null;if(Z.target.value="",!!ge)try{await ze.mutateAsync({file:ge,ifMatch:A}),At?.clear?.(),Xe.closeAllTabs(),N(void 0);const Ue=(await R.refetch()).data??R.data??null,et=Ue?i0(Ue):null,xt=et?zp(et):null;fn(xt?.id??null),dt("Configuration replaced from archive.",{intent:"success",duration:6e3})}catch(qe){const Ue=qe instanceof Ht&&qe.status===412?"Replace blocked: the configuration changed on the server. Reload and try again.":qe instanceof Ht&&qe.status===428?"Replace blocked: refresh the file list and try again.":qe instanceof Error?qe.message:"Unable to replace configuration.";Mn(Ue),dt(Ue,{intent:"danger",duration:6e3})}},[ze,A,At,Xe,R,N,fn,dt,Mn]),bc=f.useMemo(()=>{const Z=a.jsx("span",{className:"inline-block h-4 w-4 opacity-0"});return[{id:"toggle-explorer",label:lt.collapsed?"Show Explorer":"Hide Explorer",icon:lt.collapsed?Z:a.jsx(ri,{className:"h-4 w-4 text-brand-400"}),onSelect:()=>yt(ge=>({...ge,collapsed:!ge.collapsed}))},{id:"toggle-console",label:os?"Show Console":"Hide Console",icon:os?Z:a.jsx(ri,{className:"h-4 w-4 text-brand-400"}),onSelect:br}]},[lt.collapsed,os,br]),vc=f.useMemo(()=>{const Z=[];return B&&Z.push({id:"make-active",label:"Make active",disabled:!fi,onSelect:()=>{Be(null),Lr()}}),Z.push({id:"duplicate",label:"Duplicate to edit",onSelect:()=>{Be(null),ue()}}),Z.push({id:"export",label:We?"Exporting":"Export (.zip)",disabled:We,dividerAbove:!0,onSelect:()=>{Be(null),Vi()}},{id:"replace",label:"Import from zip",disabled:!Ea,onSelect:ka}),Z},[fi,Ea,Vi,ka,B,We,ue,Lr]);f.useEffect(()=>{if(typeof document>"u"||!ys)return;const Z=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=Z||""}},[ys]);const yc=tO(e),wc=hr?"S":"Ctrl+S",jc=hr?"`":"Ctrl+`",Da=f.useMemo(()=>[{id:"test-force",label:"Force build and test",disabled:!Gi,onSelect:()=>{Ut(!0),tt(!0),In(null)}}],[Gi,Ut,tt,In]);if(!l&&R.isLoading)return a.jsx(Dt,{variant:"loading",title:"Loading configuration files",description:"Fetching workspace configuration files for the workbench."});if(!l&&R.isError)return a.jsx(Dt,{variant:"error",title:"Unable to load configuration files",description:"Try reloading the page or check your connection."});if(!he)return a.jsx(Dt,{variant:"empty",title:"No configuration files found",description:"Create files in the ADE configuration package to begin editing."});const Yd=ys?"bg-background text-foreground":"bg-transparent text-foreground",Xd=ys?"fixed inset-0 z-[90] flex flex-col bg-background text-foreground":"flex w-full min-h-0 min-w-0 flex-1 flex-col overflow-hidden bg-card text-foreground",tl={bar:"border-border bg-card text-foreground",hint:"text-muted-foreground",button:"border-border-strong bg-popover text-foreground hover:border-border-strong hover:bg-muted"};return a.jsxs("div",{className:te("flex h-full min-h-0 w-full min-w-0 flex-1 flex-col overflow-hidden",Yd),onDragOver:Hd,onDrop:Vd,children:[ys?a.jsx("div",{className:"fixed inset-0 z-40 bg-overlay/60"}):null,a.jsxs("div",{className:Xd,children:[a.jsx(W3,{configName:r,workspaceLabel:yc,validationLabel:vt,canSaveFiles:On,isSavingFiles:qr,onSaveFile:Na,saveShortcutLabel:wc,onOpenTestMenu:Z=>In(Z),onOpenActionsMenu:Bd,canRunValidation:Ud,isRunningValidation:Wo,onRunValidation:Us,canRunExtraction:Gi,isRunningExtraction:$d,onRunExtraction:Z=>{Gi&&(Ut(Z),tt(!0))},explorerVisible:mr,onToggleExplorer:Fd,consoleOpen:!os,onToggleConsole:br,appearance:we,windowState:u,onMinimizeWindow:Ki,onToggleMaximize:ui,onCloseWindow:ci,actionsBusy:We||ze.isPending}),V?null:a.jsx("div",{className:"border-b border-border bg-card px-4 py-3 text-foreground",role:"status","aria-live":"polite",children:$?a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Read-only configuration"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:R.data?.status==="active"?"Active configurations cant be edited. Duplicate this configuration to create a draft you can change.":"Archived configurations cant be edited. Duplicate this configuration to create a draft you can change."})]}),a.jsx(Ae,{size:"sm",onClick:ue,children:"Duplicate to edit"})]}):a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Draft configuration"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Make this draft active to use it for extraction runs.",M?` The current active configuration ${M.display_name} will be archived.`:""]}),!fi&&Xe.isDirty?a.jsx("p",{className:"text-xs font-medium text-warning-500",children:"Save changes before making active."}):null]}),a.jsx(Ae,{size:"sm",variant:"secondary",onClick:Lr,disabled:!fi,title:!fi&&Xe.isDirty?"Save changes before making active.":void 0,children:"Make active"})]})}),a.jsxs("div",{ref:dn,className:"flex min-h-0 min-w-0 flex-1 overflow-hidden",children:[a.jsx(bA,{activeView:it,onSelectView:qd,onOpenSettings:Jo,appearance:we}),mr?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex min-h-0",style:{width:sa},children:it==="explorer"&&Xe.tree?a.jsx(o4,{width:sa,tree:Xe.tree,activeFileId:Xe.activeTab?.id??"",openFileIds:Xe.tabs.map(Z=>Z.id),onSelectFile:Z=>{Xe.openFile(Z),N(Z)},theme:we,canUploadFiles:xr,onUploadFiles:Qd,isUploadingFiles:ss,canCreateFile:xr,canCreateFolder:Wi,isCreatingEntry:Ar||Ko,onCreateFile:Zd,onCreateFolder:Kd,canDeleteFile:Yo,canDeleteFolder:Xo,deletingFilePath:Rr,deletingFolderPath:vs,onDeleteFile:Gd,onDeleteFolder:el,expandedStorageKey:V3(e,t),onHide:Id}):a.jsx(G3,{width:sa,view:it,appearance:we})}),a.jsx(a0,{orientation:"vertical",onPointerDown:Z=>{const ge=Z.clientX,qe=sa;l0(Z,{cursor:"col-resize",onMove:Ue=>{const et=Ue.clientX-ge,xt=Vs(qe+et,Js.minPx,Js.maxPx);yt(bt=>bt.collapsed||ms<=0?bt:{...bt,fraction:Fr(xt/ms,Js)})}})}})]}):null,a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-card text-card-foreground",children:a.jsxs("div",{className:"grid min-h-0 min-w-0 flex-1",style:{height:O>0?`${O}px`:void 0,gridTemplateRows:`${Math.max(gr,Mt)}px ${nt}px ${Math.max(0,at)}px`},children:[a.jsx(YM,{tabs:Xe.tabs,activeTabId:Xe.activeTab?.id??"",onSelectTab:Z=>{Xe.selectTab(Z),N(Z)},onCloseTab:Xe.closeTab,onCloseOtherTabs:Xe.closeOtherTabs,onCloseTabsToRight:Xe.closeTabsToRight,onCloseAllTabs:Xe.closeAllTabs,onContentChange:Ur,onSaveTab:Pr,onSaveAllTabs:di,onMoveTab:Xe.moveTab,onRetryTabLoad:Xe.reloadTab,onPinTab:Xe.pinTab,onUnpinTab:Xe.unpinTab,onSelectRecentTab:Xe.selectRecentTab,editorTheme:He,menuAppearance:we,canSaveFiles:On,readOnly:$,minHeight:gr}),a.jsx(a0,{orientation:"horizontal",onPointerDown:Z=>{Hn(!0);const ge=Z.clientY,qe=Le;let Ue=!1;l0(Z,{cursor:"row-resize",onMove:et=>{if(os&&!Ue&&(ws(),Ue=!0),ln.maxPx<=0||O<=0)return;const xt=ge-et.clientY,bt=Vs(qe+xt,ln.minPx,ln.maxPx);an(Vs(bt/O,0,1))},onEnd:()=>{Hn(!1)}})},onDoubleClick:()=>{os?ws():js()},onToggle:br,collapsed:os}),os?a.jsxs("div",{className:te("flex cursor-pointer items-center justify-between border-t px-4 py-2 text-[12px] shadow-inner",tl.bar),onDoubleClick:br,title:"Double-click to show console",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Console hidden"}),a.jsxs("span",{className:te("text-[11px]",tl.hint),children:["(double-click gutter or ",jc,")"]})]}),a.jsx("button",{type:"button",onClick:br,className:te("rounded px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition",tl.button),title:"Show console",children:"Show console"})]}):a.jsx(eR,{height:Math.max(0,Le),console:De,validation:me,activePane:j,onPaneChange:E,latestRun:ye,onClearConsole:xc,runStatus:X,onToggleCollapse:br,appearance:we})]})})]})]}),ht?a.jsx(Y3,{open:ht,workspaceId:e,onClose:()=>{tt(!1),Ut(!1)},onRun:Go}):null,a.jsx("input",{ref:Pe,type:"file",accept:".zip",onChange:Wd,className:"hidden"}),P?a.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-overlay/60 px-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-border bg-card p-6 shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"replace-config-title",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{id:"replace-config-title",className:"text-lg font-semibold text-foreground",children:"Import from zip"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Importing will replace this configurations current code with the uploaded archive. Unsaved editor changes will be discarded."}),Ea?null:a.jsx("p",{className:"text-sm font-medium text-danger-600",children:"Only draft configurations can be replaced."}),Xe.isDirty?a.jsx("p",{className:"text-sm font-medium text-warning-700",children:"You have unsaved changes that will be lost."}):null]}),a.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[a.jsx(Ae,{variant:"secondary",onClick:()=>F(!1),disabled:ze.isPending,children:"Cancel"}),a.jsx(Ae,{onClick:()=>{F(!1),Pe.current?.click()},disabled:!Ea||ze.isPending,isLoading:ze.isPending,children:"Continue"})]})]})}):null,a.jsxs(As,{open:be,title:"Duplicate configuration",description:`Create a new draft based on ${i}.`,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:Jr,onConfirm:Qi,isConfirming:H.isPending,confirmDisabled:H.isPending||L.trim().length===0,children:[a.jsx(Pt,{label:"New configuration name",required:!0,children:a.jsx(kt,{value:L,onChange:Z=>W(Z.target.value),placeholder:"Copy of My Config",disabled:H.isPending})}),pe?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:pe}):null]}),a.jsx(As,{open:ie,title:ne?.stage==="checking"?"Checking configuration":ne?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:ne?.stage==="checking"?"Running validation before activation.":ne?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":M?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${M.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:ne?.stage==="issues"?"Continue editing":ne?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:ea,onConfirm:()=>{if(ne?.stage==="issues"){ea();return}if(ne?.stage==="error"){ea();return}hs()},isConfirming:ee.isPending,confirmDisabled:ne?.stage==="checking"||ee.isPending,children:ne?.stage==="checking"?a.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-border border-t-brand-600","aria-hidden":"true"}),a.jsx("span",{children:"Validating"})]}):ne?.stage==="issues"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Issues:"}),a.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-border bg-muted p-3 text-xs text-foreground",children:ne.issues.map(Z=>a.jsxs("li",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:Z.path}),a.jsx("p",{className:"text-muted-foreground",children:Z.message})]},`${Z.path}:${Z.message}`))})]}):ne?.stage==="error"?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:ne.message}):null}),a.jsx(As,{open:!!Tt,title:Tt&&Tt.conflicts.length===1?"Overwrite existing file?":"Overwrite existing files?",description:Tt?`${Tt.conflicts.length} file${Tt.conflicts.length===1?"":"s"} already exist${Tt.folderPath?` in ${Tt.folderPath}.`:" in the configuration root."} Overwrite to replace them.`:void 0,confirmLabel:Tt?`Overwrite ${Tt.conflicts.length} file${Tt.conflicts.length===1?"":"s"}`:"Overwrite",cancelLabel:"Cancel",onCancel:()=>fs(null),onConfirm:()=>{const Z=Tt;fs(null),Z&&Yi(Z,{overwriteExisting:!0})},isConfirming:ss,confirmDisabled:!Tt||Tt.conflicts.length===0||ss,tone:"danger",children:Tt?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"max-h-56 overflow-auto rounded-lg border border-border bg-muted p-3 text-xs text-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:"Will overwrite:"}),a.jsx("ul",{className:"mt-2 space-y-1",children:Tt.conflicts.slice(0,20).map(Z=>a.jsx("li",{className:"break-all",children:Z.targetPath},Z.targetPath))}),Tt.conflicts.length>20?a.jsxs("p",{className:"mt-2 text-[11px] text-muted-foreground",children:["And ",Tt.conflicts.length-20," more"]}):null]}),Tt.skipped.length>0?a.jsxs("p",{className:"text-xs text-muted-foreground",children:[Tt.skipped.length," item",Tt.skipped.length===1?"":"s"," will be skipped due to invalid paths or size limits."]}):null,Tt.items.length>Tt.conflicts.length?a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-border bg-card px-3 py-2 text-xs text-foreground",children:[a.jsx("p",{className:"font-medium",children:"Prefer not to overwrite?"}),a.jsxs(Ae,{size:"sm",variant:"secondary",disabled:ss,onClick:()=>{const Z=Tt;fs(null),Yi(Z,{overwriteExisting:!1})},children:["Upload new only (",Tt.items.length-Tt.conflicts.length,")"]})]}):null]}):null}),a.jsx(kr,{open:!!Me,position:Me,onClose:()=>Be(null),items:vc,appearance:we}),a.jsx(kr,{open:!!bs,position:bs,onClose:()=>In(null),items:Da,appearance:we}),a.jsx(kr,{open:!!tn,position:tn,onClose:Pd,items:bc,appearance:we})]})}function G3({width:e,view:t,appearance:r}){const i=Z3[t]||"Coming soon";return a.jsx("div",{className:te("flex h-full min-h-0 flex-col items-center justify-center border-r px-4 text-center text-[11px] uppercase tracking-wide","border-border bg-muted text-muted-foreground"),style:{width:e},"aria-live":"polite",children:i})}function W3({configName:e,workspaceLabel:t,validationLabel:r,canSaveFiles:i,isSavingFiles:l,onSaveFile:u,saveShortcutLabel:d,onOpenTestMenu:h,onOpenActionsMenu:p,canRunValidation:x,isRunningValidation:v,onRunValidation:b,canRunExtraction:y,isRunningExtraction:S,onRunExtraction:j,explorerVisible:C,onToggleExplorer:_,consoleOpen:N,onToggleConsole:E,appearance:D,windowState:U,onMinimizeWindow:z,onToggleMaximize:V,onCloseWindow:R,actionsBusy:A=!1}){const B="border-border bg-card text-foreground",T="text-muted-foreground",K="bg-success-600 text-on-success hover:bg-success-500 disabled:bg-muted disabled:text-muted-foreground",$="bg-brand-600 text-on-brand hover:bg-brand-500 disabled:bg-muted disabled:text-muted-foreground",q=U==="maximized";return a.jsxs("div",{className:te("flex items-center justify-between border-b px-4 py-2",B),children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx(J3,{}),a.jsxs("div",{className:"min-w-0 leading-tight",children:[a.jsx("div",{className:te("text-[10px] font-semibold uppercase tracking-[0.35em]",T),children:"Config Workbench"}),a.jsx("div",{className:"truncate text-sm font-semibold",title:e,children:e}),a.jsxs("div",{className:te("text-[11px]",T),title:t,children:["Workspace  ",t]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[r?a.jsx("span",{className:te("text-xs",T),children:r}):null,a.jsxs("button",{type:"button",onClick:u,disabled:!i,className:te("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",K),title:`Save (${d})`,children:[l?a.jsx(Hl,{className:"h-4 w-4 animate-spin"}):a.jsx(aj,{className:"h-4 w-4"}),l?"Saving":"Save"]}),a.jsxs("button",{type:"button",onClick:b,disabled:!x,className:te("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",$),children:[v?a.jsx(Hl,{className:"h-4 w-4 animate-spin"}):a.jsx(Em,{className:"h-4 w-4"}),v?"Running":"Run validation"]}),a.jsx(C4,{label:S?"Running":"Test run",icon:S?a.jsx(Hl,{className:"h-4 w-4 animate-spin"}):a.jsx(Em,{className:"h-4 w-4"}),disabled:!y,isLoading:S,title:"Run test run",primaryClassName:te($,"rounded-r-none focus-visible:ring-offset-0"),menuClassName:te($,"rounded-l-none px-2","border-border-strong"),menuAriaLabel:"Open test options",onPrimaryClick:()=>j(!1),onOpenMenu:I=>h(I),onContextMenu:I=>{I.preventDefault(),h({x:I.clientX,y:I.clientY})}}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(To,{ariaLabel:C?"Hide explorer":"Show explorer",onClick:_,appearance:D,active:C,icon:a.jsx(VD,{className:te("h-4 w-4",!C&&"opacity-60")})}),a.jsx(To,{ariaLabel:N?"Hide console":"Show console",onClick:E,appearance:D,active:N,icon:a.jsx(JD,{className:"h-3.5 w-3.5"})})]}),a.jsx(To,{ariaLabel:"Configuration actions",onClick:I=>{const je=I.currentTarget.getBoundingClientRect();p({x:je.right+8,y:je.bottom})},appearance:D,disabled:A,icon:a.jsx(uT,{className:"h-4 w-4"})}),a.jsxs("div",{className:te("flex items-center gap-2 border-l pl-3","border-border/70"),children:[a.jsx(To,{ariaLabel:"Minimize workbench",onClick:z,appearance:D,icon:a.jsx(nT,{className:"h-3.5 w-3.5"})}),a.jsx(To,{ariaLabel:q?"Restore workbench":"Maximize workbench",onClick:V,appearance:D,active:q,icon:q?a.jsx(tT,{className:"h-3.5 w-3.5"}):a.jsx(eT,{className:"h-3.5 w-3.5"})}),a.jsx(To,{ariaLabel:"Close workbench",onClick:R,appearance:D,icon:a.jsx(Ws,{className:"h-3.5 w-3.5"})})]})]})]})}function Y3({open:e,workspaceId:t,onClose:r,onRun:i}){const l=f.useRef(null),u=yn({queryKey:["builder-documents",t],queryFn:({signal:z})=>p1(t,z),staleTime:6e4,enabled:e}),d=f.useMemo(()=>u.data??[],[u.data]),[h,p]=f.useState("");f.useEffect(()=>{if(e){if(!d.length){p("");return}p(z=>z&&d.some(V=>V.id===z)?z:d[0]?.id??"")}},[d,e]);const x=d.find(z=>z.id===h)??null,v=yn({queryKey:["builder-document-sheets",t,h],queryFn:({signal:z})=>l3(t,h,z),enabled:e&&!!h,staleTime:6e4}),b=f.useMemo(()=>v.data??[],[v.data]),[y,S]=f.useState([]),[j,C]=f.useState("INFO");f.useEffect(()=>{if(e){if(!b.length){S([]);return}S(z=>z.filter(V=>b.some(R=>R.name===V)))}},[e,b]);const _=f.useMemo(()=>Array.from(new Set(y.filter(z=>b.some(V=>V.name===z)))),[y,b]),N=f.useCallback(z=>{S(V=>V.includes(z)?V.filter(R=>R!==z):[...V,z])},[]);if(!e)return null;const E=!x||u.isLoading||u.isError,D=b.length>0,U=a.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-overlay/60 px-4",children:a.jsxs("div",{ref:l,role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl border border-border bg-card p-6 shadow-2xl",children:[a.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Select a document"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a workspace document and optional worksheet before running a test."})]}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:r,children:"Close"})]}),u.isError?a.jsx(Lt,{tone:"danger",children:"Unable to load documents. Try again later."}):u.isLoading?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading documents"}):d.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a document in the workspace to run the extractor."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",htmlFor:"builder-run-document-select",children:"Document"}),a.jsx(Bi,{id:"builder-run-document-select",value:h,onChange:z=>p(z.target.value),className:"w-full",children:d.map(z=>a.jsx("option",{value:z.id,children:z.name},z.id))}),x?a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded ",X3(x.created_at)," "," ",(x.byte_size??0).toLocaleString()," bytes"]}):null]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",htmlFor:"builder-run-log-level-select",children:"Log level"}),a.jsx(Bi,{id:"builder-run-log-level-select",value:j,onChange:z=>C(z.target.value),className:"w-full",children:K3.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls the engine runtime verbosity for this run."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Worksheet"}),v.isLoading?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading worksheets"}):v.isError?a.jsx(Lt,{tone:"warning",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ae,{variant:"secondary",size:"sm",onClick:()=>v.refetch(),disabled:v.isFetching,children:"Retry loading"}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>S([]),children:"Use all worksheets"})]})]})}):D?a.jsxs("div",{className:"space-y-3 rounded-lg border border-border p-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Worksheets"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:_.length===0?"All worksheets will be processed by default. Select specific sheets to narrow the run.":`${_.length.toLocaleString()} worksheet${_.length===1?"":"s"} selected.`})]}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>S([]),children:"Use all worksheets"})]}),a.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-border p-2",children:b.map(z=>{const V=_.includes(z.name);return a.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-foreground hover:bg-muted",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border text-success-600 focus:ring-success-500",checked:V,onChange:()=>N(z.name)}),a.jsxs("span",{className:"flex-1 truncate",children:[z.name,z.is_active?" (active)":""]})]},`${z.index}-${z.name}`)})})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"This file will be ingested directly."})]})]}),a.jsxs("footer",{className:"mt-6 flex items-center justify-end gap-2",children:[a.jsx(Ae,{variant:"ghost",onClick:r,children:"Cancel"}),a.jsx(Ae,{onClick:()=>{x&&i({documentId:x.id,documentName:x.name,sheetNames:_.length>0?_:void 0,logLevel:j})},disabled:E,children:"Start test run"})]})]})});return typeof document>"u"?null:Ts.createPortal(U,document.body)}async function p1(e,t){const{data:r}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:{sort:"-created_at",page_size:50}},signal:t});return r?.items??[]}function X3(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function To({ariaLabel:e,onClick:t,icon:r,appearance:i,active:l=!1,disabled:u=!1}){return a.jsx("button",{type:"button","aria-label":e,onClick:t,disabled:u,className:te("flex h-7 w-7 items-center justify-center rounded-[4px] border border-transparent text-sm transition focus-visible:outline-none focus-visible:ring-2","text-muted-foreground hover:text-foreground hover:bg-muted hover:border-border-strong focus-visible:ring-ring/40",l&&"text-foreground border-border-strong bg-muted",u&&"cursor-not-allowed opacity-50"),title:e,children:r})}function J3(){return a.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-400 via-brand-500 to-brand-600 text-on-brand shadow-[0_12px_24px_rgb(var(--sys-color-shadow)/0.35)]",children:a.jsx(Xw,{className:"h-4 w-4"})})}function um(e){return e instanceof Ht?e.message:e instanceof DOMException&&e.name==="AbortError"?"Operation cancelled.":e instanceof Error?e.message:String(e)}function eO(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function tO(e){return e.length<=12?e:`${e.slice(0,6)}${e.slice(-4)}`}function v0(e){if(e.encoding==="base64"){const t=globalThis.Buffer;if(t)return t.from(e.content,"base64").toString("utf-8");if(typeof atob=="function")try{const r=atob(e.content),i=new Uint8Array(r.length);for(let u=0;u<r.length;u+=1)i[u]=r.charCodeAt(u);if(typeof TextDecoder<"u")return new TextDecoder("utf-8",{fatal:!1}).decode(i);let l="";for(let u=0;u<i.length;u+=1)l+=String.fromCharCode(i[u]);return l}catch{}}return e.content}function nO(e){return`ade.ui.workspace.${e}.workbench.returnPath`}const g1=f.createContext(null);function x1(){const e=f.useContext(g1);if(!e)throw new Error("useWorkbenchWindow must be used within a WorkbenchWindowProvider");return e}function sO({workspaceId:e,children:t}){const r=en(),i=es(),[l,u]=f.useState(null),[d,h]=f.useState("restored"),p=f.useRef(0),x=f.useRef(null),v=f.useRef(!1),b=f.useMemo(()=>ja(nO(e)),[e]),y=f.useMemo(()=>`/workspaces/${e}/config-builder`,[e]),S=f.useMemo(()=>iO(i.pathname,e),[i.pathname,e]),j=!!S;f.useEffect(()=>{b.get()||b.set(y)},[b,y]),f.useEffect(()=>{j||b.set(`${i.pathname}${i.search}${i.hash}`)},[j,i.pathname,i.search,i.hash,b]),f.useEffect(()=>{if(!l){x.current=null;return}const T=x.current;if(j&&S===l.configId){if(T==="dock"){x.current=null,h("minimized");return}T&&(x.current=null);return}if(T==="dock"){x.current=null;return}if(T==="close"){x.current=null;return}u(null),h("restored"),x.current=null},[l,j,S,d]),f.useEffect(()=>{if(!l||!j||S!==l.configId)return;const T=w0(i.search);T!==l.editorSearch&&u(K=>!K||K.instanceId!==l.instanceId?K:{...K,editorSearch:T})},[l,j,S,i.search]);const C=f.useCallback(()=>b.get()??y,[b,y]),_=f.useCallback(T=>{u(K=>{if(!K)return K;const $=new URLSearchParams(K.editorSearch),q=typeof T=="function"?T(new URLSearchParams($)):T,je=t1(q).toString();return je===K.editorSearch?K:{...K,editorSearch:je}})},[]),N=f.useCallback(T=>{const K=w0(T.editorSearch??i.search);let $=d==="minimized";u(q=>{if(q&&q.workspaceId===T.workspaceId&&q.configId===T.configId){const I=T.seed??q.seed,je=T.editorSearch!==void 0?K:q.editorSearch;return q.configName===T.configName&&q.configDisplayName===T.configDisplayName&&q.seed===I&&q.editorSearch===je?q:{...q,configName:T.configName,configDisplayName:T.configDisplayName,seed:I,editorSearch:je}}return $=!0,p.current+=1,{...T,editorSearch:K,instanceId:`${T.workspaceId}:${T.configId}:${p.current}`}}),$&&h("restored")},[i.search,d]),E=f.useCallback(()=>{l&&(u(null),h("restored"),x.current="close",r(C()))},[l,r,C]),D=f.useCallback(()=>{l&&(v.current=!0,h("minimized"),x.current="dock",r(C()))},[l,r,C]),U=f.useCallback(()=>{if(!l)return;h("restored");const T=oO(l.workspaceId,l.configId,l.editorSearch);`${i.pathname}${i.search}`!==T&&r(T)},[l,r,i.pathname,i.search]),z=f.useCallback(()=>{l&&h("maximized")},[l]),V=f.useCallback(()=>{const T=v.current;return v.current=!1,T},[]),R=f.useMemo(()=>({session:l,windowState:d,openSession:N,closeSession:E,minimizeWindow:D,maximizeWindow:z,restoreWindow:U,shouldBypassUnsavedGuard:V}),[l,d,N,E,D,z,U,V]),A=!!l&&(!j||S!==l?.configId),B=f.useMemo(()=>A&&l?{params:new URLSearchParams(l.editorSearch),setSearchParams:_}:null,[A,l,_]);return a.jsxs(g1.Provider,{value:R,children:[t,a.jsx(m4,{value:B,children:a.jsx(rO,{session:l,windowState:d,onClose:E,onMinimize:D,onMaximize:z,onRestore:U,shouldBypassUnsavedGuard:V})}),l&&d==="minimized"?a.jsx(aO,{configName:l.configName,onRestore:U,onDismiss:E}):null]})}function rO({session:e,windowState:t,onClose:r,onMinimize:i,onMaximize:l,onRestore:u,shouldBypassUnsavedGuard:d}){return!e||t!=="maximized"?null:a.jsx("div",{className:"fixed inset-0 z-40 flex flex-col bg-background",children:a.jsx(m1,{workspaceId:e.workspaceId,configId:e.configId,configName:e.configName,configDisplayName:e.configDisplayName,seed:e.seed,windowState:"maximized",onCloseWorkbench:r,onMinimizeWindow:i,onMaximizeWindow:l,onRestoreWindow:u,shouldBypassUnsavedGuard:d},e.instanceId)})}function aO({configName:e,onRestore:t,onDismiss:r}){return a.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40",children:a.jsx("div",{className:"pointer-events-auto border-t border-border bg-card/95 shadow-[0_-12px_40px_rgb(var(--sys-color-shadow)/0.15)] backdrop-blur",children:a.jsxs("div",{className:"relative mx-auto flex h-14 max-w-6xl items-center px-4 text-foreground",children:[a.jsxs("button",{type:"button",onClick:t,className:"group flex min-w-0 flex-1 items-center gap-4 rounded-md px-3 py-1.5 text-left transition hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-border bg-background text-brand-600 shadow-inner",children:a.jsx(oT,{className:"h-4 w-4"})}),a.jsxs("span",{className:"flex min-w-0 flex-col leading-tight",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Config workbench"}),a.jsx("span",{className:"truncate text-sm font-semibold text-foreground",title:e,children:e})]}),a.jsx("span",{className:"ml-auto inline-flex items-center rounded border border-border bg-card px-2 py-0.5 text-[11px] font-medium text-muted-foreground transition group-hover:border-border-strong group-hover:bg-background",children:"Restore"})]}),a.jsxs("div",{className:"ml-3 flex h-10 overflow-hidden rounded-md border border-border bg-card text-muted-foreground",children:[a.jsx(y0,{ariaLabel:"Restore minimized workbench",onClick:t,destructive:!1,children:a.jsx(lT,{className:"h-3.5 w-3.5"})}),a.jsx(y0,{ariaLabel:"Close minimized workbench",onClick:r,destructive:!0,children:a.jsx(cT,{className:"h-3.5 w-3.5"})})]})]})})})}function y0({ariaLabel:e,onClick:t,children:r,destructive:i=!1}){return a.jsx("button",{type:"button","aria-label":e,onClick:t,className:te("flex h-full w-12 items-center justify-center transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",i?"text-danger-600 hover:bg-danger-50":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:r})}function iO(e,t){const r=`/workspaces/${t}/config-builder/`;if(!e.startsWith(r))return null;const i=e.slice(r.length).split("/").filter(Boolean);if(i.length>=2&&i[1]==="editor")try{return decodeURIComponent(i[0])}catch{return i[0]}return null}function oO(e,t,r){const i=`/workspaces/${e}/config-builder/${encodeURIComponent(t)}/editor`;return r.length>0?`${i}?${r}`:i}function w0(e){return e?e.startsWith("?")?e.slice(1):e:""}function Um({to:e,replace:t,className:r,title:i,children:l,onClick:u,ariaCurrent:d}){const h=en();return a.jsx("a",{href:e,className:r,title:i,"aria-current":d,onClick:p=>{u?.(p),!(p.defaultPrevented||p.metaKey||p.ctrlKey||p.shiftKey||p.altKey)&&(p.preventDefault(),h(e,{replace:t}))},children:l})}function Ip({to:e,end:t,className:r,children:i,title:l,onClick:u}){const{pathname:d}=es(),h=t?d===e:d===e||d.startsWith(`${e}/`),p=typeof r=="function"?r({isActive:h}):r,x=typeof i=="function"?i({isActive:h}):i,v=h?"page":void 0;return a.jsx(Um,{to:e,className:p,title:l,onClick:u,ariaCurrent:v,children:x})}const b1=[{id:"documents",path:"documents",label:"Documents",icon:dp},{id:"runs",path:"runs",label:"Runs",icon:LD},{id:"config-builder",path:"config-builder",label:"Config Builder",icon:UD},{id:"settings",path:"settings",label:"Workspace Settings",icon:gp,matchPrefix:!0}],ld=b1[0];function v1(e){return b1.map(t=>({id:t.id,label:t.label,href:`/workspaces/${e.id}/${t.path}`,icon:t.icon,matchPrefix:t.matchPrefix}))}const j0="4.5rem",S0="16rem",lO=70,cO=140;function uO({workspace:e,isPinned:t,onTogglePinned:r,items:i}){const l=i??v1(e),u=mO(l),d=u?l.filter(R=>R.id!==u.id):l,[h,p]=f.useState("pointer"),[x,v]=f.useState(!1),[b,y]=f.useState(!1),[S,j]=f.useState(!1),C=f.useRef(null),_=f.useRef(null),N=f.useCallback(()=>{C.current&&(window.clearTimeout(C.current),C.current=null),_.current&&(window.clearTimeout(_.current),_.current=null)},[]),E=!t&&(x||b&&h==="keyboard");f.useEffect(()=>{if(t){N(),j(!1);return}if(!(E&&S)&&!(!E&&!S))if(N(),E){if(b&&h==="keyboard"){j(!0);return}C.current=window.setTimeout(()=>j(!0),lO)}else _.current=window.setTimeout(()=>j(!1),cO)},[N,h,b,x,S,t,E]),f.useEffect(()=>N,[N]),f.useEffect(()=>{const R=A=>{const B=A.key.toLowerCase();(B==="tab"||B.startsWith("arrow"))&&p("keyboard")};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[]);const D=t||S,U=t?S0:j0,z=D?S0:j0;return a.jsx("aside",{className:te("relative hidden min-h-0 flex-shrink-0 bg-sidebar text-sidebar-foreground lg:flex","border-r border-sidebar-border","transition-[width] duration-200 ease-out motion-reduce:transition-none"),style:{width:U,height:"calc(100vh - var(--workspace-topbar-height, 0px))",willChange:"width"},"aria-label":"Primary workspace navigation","data-pinned":t?"true":"false","data-expanded":D?"true":"false",children:a.jsx("div",{className:te("absolute inset-y-0 left-0 z-40 flex min-h-0 flex-col bg-sidebar text-sidebar-foreground","border-r border-sidebar-border","transition-[width,box-shadow] duration-200 ease-out motion-reduce:transition-none",!t&&D&&"shadow-xl"),style:{width:z,willChange:"width"},onMouseEnter:()=>{t||v(!0)},onMouseLeave:()=>{t||v(!1)},onPointerDownCapture:()=>p("pointer"),onKeyDownCapture:R=>{const A=R.key.toLowerCase();(A==="tab"||A.startsWith("arrow"))&&p("keyboard")},onFocusCapture:()=>y(!0),onBlurCapture:()=>{requestAnimationFrame(()=>{const R=document.activeElement,A=document.querySelector("[data-workspace-nav-panel='true']");A&&R&&A.contains(R)||y(!1)})},"data-workspace-nav-panel":"true",children:a.jsx(dO,{items:d,settingsItem:u,expanded:D,isPinned:t,onTogglePinned:r})})})}function dO({items:e,settingsItem:t,expanded:r,isPinned:i,onTogglePinned:l}){const u=r?"drawer":"rail";return a.jsxs(a.Fragment,{children:[a.jsx("nav",{className:te("flex-1 overflow-y-auto","overflow-x-hidden",r?"px-3 py-4":"px-2 py-3"),"aria-label":"Workspace sections",children:a.jsx(y1,{items:e,variant:u})}),a.jsx("div",{className:te("border-t border-sidebar-border",r?"px-3 py-3":"px-2 py-2"),children:a.jsxs("div",{className:te("flex flex-col",r?"gap-1.5":"gap-2"),children:[t?a.jsx(fO,{item:t,expanded:r}):null,a.jsx(hO,{isPinned:i,expanded:r,onToggle:l})]})})]})}function y1({items:e,variant:t="drawer",onNavigate:r,className:i,showHeading:l=!0}){const u=t==="drawer";return a.jsxs(a.Fragment,{children:[l&&u?a.jsx("p",{className:"mb-3 px-2 text-[0.63rem] font-semibold uppercase tracking-[0.4em] text-sidebar-foreground",children:"Workspace"}):null,a.jsx("ul",{className:te("flex flex-col",u?"gap-1.5":"gap-2",i),children:e.map(d=>a.jsx("li",{className:"w-full",children:a.jsx(Ip,{to:d.href,end:!(d.matchPrefix??!1),title:u?void 0:d.label,"aria-label":u?void 0:d.label,onClick:h=>{if(w1(h)&&h.currentTarget.getAttribute("aria-current")==="page"){h.preventDefault();return}r?.()},className:({isActive:h})=>te("group relative flex w-full items-center rounded-lg","transition-colors duration-150 motion-reduce:transition-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-2 focus-visible:ring-offset-sidebar",u?"px-3 py-2":"justify-center px-2 py-2",h?"bg-sidebar-item-active text-sidebar-foreground":"text-sidebar-foreground hover:bg-sidebar-item-hover hover:text-sidebar-foreground"),children:({isActive:h})=>a.jsxs(a.Fragment,{children:[a.jsx("span",{className:te("flex h-10 w-10 items-center justify-center rounded-xl","transition-colors duration-150 motion-reduce:transition-none",h?"bg-sidebar-item-active text-sidebar-foreground":"bg-sidebar-item-hover/70 text-sidebar-foreground group-hover:bg-sidebar-item-hover group-hover:text-sidebar-foreground"),children:a.jsx(d.icon,{className:te("h-5 w-5 transition-colors duration-150","text-sidebar-foreground"),"aria-hidden":!0})}),a.jsx("span",{className:te("min-w-0 overflow-hidden truncate","transition-[max-width,opacity,transform,margin-left] duration-200 motion-reduce:transition-none",u?"ml-3 max-w-[14rem] opacity-100 translate-x-0":"ml-0 max-w-0 opacity-0 translate-x-1","text-sm font-semibold text-sidebar-foreground"),"aria-hidden":!u,children:d.label})]})})},d.id))})]})}function fO({item:e,expanded:t}){const r=e.label||"Workspace settings";return a.jsx(Ip,{to:e.href,end:!(e.matchPrefix??!1),title:t?void 0:r,onClick:i=>{w1(i)&&i.currentTarget.getAttribute("aria-current")==="page"&&i.preventDefault()},className:({isActive:i})=>te("group relative flex w-full items-center rounded-lg","transition-colors duration-150 motion-reduce:transition-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-2 focus-visible:ring-offset-sidebar",t?"px-2 py-2":"justify-center px-2 py-2",i?"bg-sidebar-item-active text-sidebar-foreground":"text-sidebar-foreground hover:bg-sidebar-item-hover hover:text-sidebar-foreground"),children:({isActive:i})=>a.jsxs(a.Fragment,{children:[a.jsx("span",{className:te("flex h-10 w-10 items-center justify-center rounded-xl","transition-colors duration-150 motion-reduce:transition-none",i?"bg-sidebar-item-active text-sidebar-foreground":"bg-sidebar-item-hover/70 text-sidebar-foreground group-hover:bg-sidebar-item-hover group-hover:text-sidebar-foreground"),"aria-hidden":!0,children:a.jsx(gp,{className:"h-5 w-5"})}),a.jsx("span",{className:te("min-w-0 overflow-hidden truncate","transition-[max-width,opacity,transform,margin-left] duration-200 motion-reduce:transition-none",t?"ml-3 max-w-[14rem] opacity-100 translate-x-0":"ml-0 max-w-0 opacity-0 translate-x-1","text-xs font-semibold text-sidebar-foreground"),"aria-hidden":!t,children:"Settings"})]})})}function hO({isPinned:e,expanded:t,onToggle:r}){const i=e?"Unpin sidebar":"Pin sidebar";return a.jsxs("button",{type:"button",onClick:r,"aria-label":i,"aria-pressed":e,title:i,className:te("group relative flex w-full items-center rounded-lg","transition-colors duration-150 motion-reduce:transition-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-2 focus-visible:ring-offset-sidebar",t?"px-2 py-2":"justify-center px-2 py-2","text-sidebar-foreground hover:bg-sidebar-item-hover hover:text-sidebar-foreground"),children:[a.jsx("span",{className:te("flex h-10 w-10 items-center justify-center rounded-xl bg-sidebar-item-hover/70 text-sidebar-foreground transition-colors duration-150 group-hover:bg-sidebar-item-hover group-hover:text-sidebar-foreground"),"aria-hidden":!0,children:e?a.jsx(nj,{className:"h-4 w-4"}):a.jsx(xp,{className:"h-4 w-4"})}),a.jsx("span",{className:te("min-w-0 overflow-hidden truncate","transition-[max-width,opacity,transform,margin-left] duration-200 motion-reduce:transition-none",t?"ml-3 max-w-[14rem] opacity-100 translate-x-0":"ml-0 max-w-0 opacity-0 translate-x-1","text-xs font-semibold text-sidebar-foreground"),"aria-hidden":!t,children:e?"Pinned":"Pin sidebar"})]})}function w1(e){return e.button===0&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey}function mO(e){const t=new Set(["settings","workspace-settings","workspacesettings","preferences"]),r=e.find(d=>t.has(d.id.toLowerCase()));if(r)return r;const i=e.find(d=>d.id.toLowerCase().includes("settings"));if(i)return i;const l=e.find(d=>/settings|preferences/i.test(d.href));return l||e.find(d=>/settings|preferences/i.test(d.label))}function pO(){return a.jsxs("section",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Workspace Overview"}),a.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"TODO: add workspace summary widgets."})]})}function gO(e){const t=Sa(e);return t.startsWith("https://")?`wss://${t.slice(8)}`:t.startsWith("http://")?`ws://${t.slice(7)}`:t.startsWith("/")?`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${t}`:t}function xO(e){return gO(`/api/v1/workspaces/${e}/presence`)}const bO=15e3,vO=3e4;function N0(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client-${Math.random().toString(36).slice(2,10)}${Date.now().toString(36)}`}function yO(e){if(!e)return{};const t={};for(const r of Object.keys(e).sort())t[r]=e[r];return t}function wO({workspaceId:e,scope:t,context:r,enabled:i=!0}){const[l,u]=f.useState([]),[d,h]=f.useState("idle"),[p,x]=f.useState(()=>N0()),v=f.useRef(null),b=f.useRef(null),y=f.useRef(0),S=f.useRef(bO),j=f.useRef(null),C=f.useMemo(()=>yO(r),[r]),_=f.useMemo(()=>JSON.stringify(C),[C]);f.useEffect(()=>{x(N0())},[e]);const N=f.useCallback(()=>{b.current&&(window.clearInterval(b.current),b.current=null)},[]),E=f.useCallback(A=>{const B=v.current;!B||B.readyState!==WebSocket.OPEN||B.send(JSON.stringify(A))},[]),D=f.useCallback(()=>{N(),b.current=window.setInterval(()=>{E({type:"heartbeat"})},S.current)},[E,N]),U=f.useCallback(()=>{if(!e)return;const A={type:"hello",client_id:p,scope:t,context:C},B=JSON.stringify(A);B!==j.current&&(j.current=B,E(A))},[p,C,t,E,e]);f.useEffect(()=>{if(!i||!e){N(),v.current?.close(),v.current=null,u([]),h("idle");return}let A=!0,B=null;const T=()=>{if(!A)return;const q=y.current,je=Math.min(vO,1e3*2**Math.min(q,5));y.current+=1;const M=Math.floor(je*.15*Math.random());B=window.setTimeout($,je+M)},K=q=>{if(typeof q.data!="string")return;let I;try{I=JSON.parse(q.data)}catch{return}const je=typeof I.type=="string"?I.type:"";if(je){if(je==="hello"){typeof I.client_id=="string"&&x(I.client_id),typeof I.heartbeat_interval=="number"&&(S.current=Math.max(5e3,I.heartbeat_interval*1e3),v.current?.readyState===WebSocket.OPEN&&D());return}if(je==="snapshot"){const M=Array.isArray(I.participants)?I.participants:[];u(M);return}if(je==="join"){const M=I.participant;if(!M||typeof M.client_id!="string")return;u(H=>{const ee=H.filter(be=>be.client_id!==M.client_id);return ee.push(M),ee});return}if(je==="leave"){const M=I.client_id;if(typeof M!="string")return;u(H=>H.filter(ee=>ee.client_id!==M));return}if(je==="presence"||je==="selection"||je==="editing"){const M=I.client_id;if(typeof M!="string")return;const{type:H,client_id:ee,...be}=I;u(de=>de.map(L=>{if(L.client_id!==M)return L;if(je==="presence"){const W=typeof I.status=="string"?I.status:L.status;return{...L,presence:be,status:W}}return je==="selection"?{...L,selection:be}:{...L,editing:be}}))}}},$=()=>{if(!A)return;h("connecting");const q=new WebSocket(xO(e));v.current=q,q.onopen=()=>{y.current=0,h("open"),j.current=null,D(),U()},q.onmessage=K,q.onclose=()=>{N(),h("closed"),A&&(u([]),T())},q.onerror=()=>{}};return $(),()=>{A=!1,B&&window.clearTimeout(B),N(),v.current?.close(),v.current=null,u([]),h("idle")}},[i,U,D,N,e]),f.useEffect(()=>{!i||!e||U()},[_,i,t,U,e]);const z=f.useCallback(A=>{E({type:"presence",...A})},[E]),V=f.useCallback(A=>{E({type:"selection",...A})},[E]),R=f.useCallback(A=>{E({type:"editing",...A})},[E]);return{participants:l,connectionState:d,clientId:p,sendPresence:z,sendSelection:V,sendEditing:R}}function Po(e,t){const r=typeof t=="number"?t:typeof t=="string"?Date.parse(t):NaN,i=Number.isNaN(r)?e:r,l=Math.max(0,e-i),u=Math.floor(l/6e4);if(u<1)return"just now";if(u<60)return`${u}m ago`;const d=Math.floor(u/60);return d<24?`${d}h ago`:`${Math.floor(d/24)}d ago`}function Oo(e){const t=e?Date.parse(e):NaN;return Number.isNaN(t)?Date.now():t}function qo(e){if(e===0)return"0 B";const t=1024,r=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(e)/Math.log(t)),r.length-1),l=e/Math.pow(t,i);return`${l.toFixed(l>=10||i===0?0:1)} ${r[i]}`}function j1(e){return`${e.replace(/\.[^.]+$/,"")}_normalized.xlsx`}function Hp(e){if(!e)return null;const t=e.match(/filename\*=UTF-8''([^;]+)/i);return t?.[1]?decodeURIComponent(t[1]):e.match(/filename="?([^";]+)"?/i)?.[1]??null}function Vp(e,t){if(typeof window>"u")return;const r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=t,i.click(),window.setTimeout(()=>window.URL.revokeObjectURL(r),0)}function jO(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):e instanceof Date?e.toLocaleDateString():String(e)}function S1(e,t){return Array.from({length:t},(r,i)=>e[i]??"")}function SO(e,t){const r=e.map(d=>d.trim()),i=r.some(Boolean),l=Math.max(r.length,t),u=i?r:Array.from({length:l},(d,h)=>N1(h));return S1(u,l)}function N1(e){let t="",r=e+1;for(;r>0;){const i=(r-1)%26;t=String.fromCharCode(65+i)+t,r=Math.floor((r-1)/26)}return`Column ${t}`}function Iu(e,t=8){return e?e.slice(0,Math.max(4,t)):""}async function NO(e){if(typeof navigator<"u"&&navigator.clipboard?.writeText){await navigator.clipboard.writeText(e);return}const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="-1000px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function CO(e){const t=e.toLowerCase();return t.endsWith(".xlsx")?"xlsx":t.endsWith(".xls")?"xls":t.endsWith(".csv")?"csv":t.endsWith(".pdf")?"pdf":"unknown"}function Qp(e){switch(e){case"xlsx":return"XLSX";case"xls":return"XLS";case"csv":return"CSV";case"pdf":return"PDF";default:return"File"}}function _O(e){return e.toLowerCase().match(/\.([a-z0-9]+)$/)?.[1]??""}function EO(e,t){const r=_O(e);if(r==="xlsx")return"xlsx";if(r==="xls")return"xls";if(r==="csv")return"csv";if(r==="pdf")return"pdf";const i=(t??"").toLowerCase();return i.includes("spreadsheetml")?"xlsx":i.includes("ms-excel")?"xls":i.includes("csv")?"csv":i.includes("pdf")?"pdf":"unknown"}function kO(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`id_${Math.random().toString(16).slice(2)}_${Date.now()}`}const DO={xs:"h-6 w-6 text-[10px]",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function TO(e,t){if(e&&e.trim().length>0){const r=e.trim().split(/\s+/u),i=r[0]?.[0],l=r[r.length-1]?.[0];if(i)return`${i}${l??""}`.toUpperCase()}return t&&t.trim().length>0?t.trim()[0]?.toUpperCase():"?"}function Zp({name:e,email:t,size:r="md",className:i}){const l=f.useMemo(()=>TO(e,t),[e,t]);return a.jsx("span",{"aria-hidden":"true",className:te("inline-flex select-none items-center justify-center rounded-full bg-gradient-to-br from-brand-100 via-brand-200 to-brand-300 font-semibold text-brand-900 shadow-sm",DO[r],i),children:l})}const AO={xs:"h-6 w-6 text-[10px]",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function Kp({items:e,size:t="sm",max:r=3,className:i}){const l=e.slice(0,Math.max(0,r)),u=Math.max(0,e.length-l.length);return a.jsxs("div",{className:te("flex items-center -space-x-2",i),children:[l.map(d=>{const h=d.name||d.email||"Participant";return a.jsx("span",{title:h,className:"rounded-full ring-2 ring-background",children:a.jsx(Zp,{name:d.name,email:d.email,size:t})},d.id)}),u>0?a.jsxs("span",{className:te("flex items-center justify-center rounded-full border border-border bg-muted font-semibold text-muted-foreground ring-2 ring-background",AO[t]),children:["+",u]}):null]})}function Oi({title:e,description:t,action:r}){return a.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-border bg-card px-8 py-12 text-center",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t}),r?a.jsx(Ae,{type:"button",onClick:r.onClick,size:"sm",children:r.label}):null]})}function C1({mapping:e,showPending:t=!1}){const r=!!(e.pending&&e.attention===0&&e.unmapped===0);return r&&!t?null:r?a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",children:[a.jsx(MD,{className:"h-3 w-3"}),"Mapping pending"]}):e.attention===0&&e.unmapped===0?null:a.jsxs("span",{className:te("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold","border-warning-200 bg-warning-50 text-warning-700"),children:[a.jsx(pp,{className:"h-3 w-3"}),e.attention>0?`${e.attention} need attention`:`${e.unmapped} unmapped`]})}const Wr="__unassigned__",_1=["queued","processing","ready","failed"],gc={statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]};function RO(e){return[{id:"all_documents",label:"All documents",count:e.total},{id:"active_documents",label:"Active documents",count:e.active},{id:"assigned_to_me",label:"Assigned to me",count:e.assignedToMe},{id:"assigned_to_me_or_unassigned",label:"Assigned to me or Unassigned",count:e.assignedToMeOrUnassigned},{id:"unassigned",label:"Unassigned",count:e.unassigned},{id:"processed",label:"Processed",count:e.processed},{id:"processing",label:"Processing",count:e.processing},{id:"failed",label:"Failed",count:e.failed},{id:"archived",label:"Archived",count:e.archived}]}function Gp(e,t){const r={...gc};switch(e){case"active_documents":return{...r,statuses:[..._1]};case"assigned_to_me":return{...r,assignees:[t]};case"assigned_to_me_or_unassigned":return{...r,assignees:[t,Wr]};case"unassigned":return{...r,assignees:[Wr]};case"processed":return{...r,statuses:["ready"]};case"processing":return{...r,statuses:["queued","processing"]};case"failed":return{...r,statuses:["failed"]};case"archived":return{...r,statuses:["archived"]};case"all_documents":default:return r}}function Ou(e,t){if(e.length!==t.length){const i=new Set(e),l=new Set(t);if(i.size!==l.size)return!1;for(const u of i)if(!l.has(u))return!1;return!0}const r=new Set(t);for(const i of e)if(!r.has(i))return!1;return!0}function Wp(e,t){return(e.tags.length===0&&t.tags.length===0?!0:e.tagMode===t.tagMode)&&Ou(e.statuses,t.statuses)&&Ou(e.fileTypes,t.fileTypes)&&Ou(e.tags,t.tags)&&Ou(e.assignees,t.assignees)}function MO(e,t){const r=["all_documents","active_documents","assigned_to_me","assigned_to_me_or_unassigned","unassigned","processed","processing","failed","archived"];for(const i of r){const l=Gp(i,t);if(Wp(e,l))return i}return null}function C0(e,t,r,i){if(t.trim().length>=2)return"custom";const l=MO(e,i);return l||(r.find(d=>Wp(d.filters,e))?.id??"custom")}function E1(e){const t=e.filter(i=>i.startsWith("user:")).map(i=>i.slice(5)).filter(Boolean),r=e.includes(Wr);return{assigneeIds:t,includeUnassigned:r}}function OO(e,t){const r=e.map(i=>`user:${i}`).filter(Boolean);return t&&r.push(Wr),r}function Od({people:e,value:t,onChange:r,placeholder:i,multiple:l=!1,includeUnassigned:u=!1,disabled:d=!1,buttonClassName:h,onOpenChange:p}){const x=f.useRef(null),v=f.useRef(null),b=f.useId(),[y,S]=f.useState(!1),[j,C]=f.useState("");f.useEffect(()=>{y&&v.current?.focus()},[y]),f.useEffect(()=>{p?.(y)},[p,y]),f.useEffect(()=>{function z(R){if(!y)return;const A=R.target;x.current&&A&&!x.current.contains(A)&&(S(!1),C(""))}function V(R){y&&R.key==="Escape"&&(S(!1),C(""))}return window.addEventListener("mousedown",z),window.addEventListener("keydown",V),()=>{window.removeEventListener("mousedown",z),window.removeEventListener("keydown",V)}},[y]);const _=f.useMemo(()=>{const z=e.slice().sort((V,R)=>V.label.localeCompare(R.label));return u?[{key:Wr,label:"Unassigned",kind:"label"},...z]:z},[u,e]),N=f.useMemo(()=>{const z=j.trim().toLowerCase();return z?_.filter(V=>V.label.toLowerCase().includes(z)):_},[_,j]),E=f.useMemo(()=>{const z=new Map(_.map(R=>[R.key,R.label]));return t.map(R=>z.get(R)??(R===Wr?"Unassigned":R)).filter(Boolean)},[_,t]);function D(z){if(d)return;if(!l){r([z]),S(!1),C("");return}const V=new Set(t);V.has(z)?V.delete(z):V.add(z),r(Array.from(V))}const U=E.length===0?i:l?E.length===1?E[0]:`${E[0]} +${E.length-1}`:E[0];return a.jsxs("div",{ref:x,className:te("relative",y?"z-50":"z-0"),"data-ignore-row-click":"true",children:[a.jsxs("button",{type:"button",disabled:d,onClick:()=>S(z=>!z),className:te("inline-flex min-w-0 items-center justify-between gap-2 rounded-lg border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground shadow-sm transition",d?"opacity-60":"hover:bg-background",h),"aria-expanded":y,"aria-controls":y?b:void 0,"aria-haspopup":"listbox",children:[a.jsx("span",{className:te("min-w-0 truncate",E.length===0?"text-muted-foreground":"text-foreground"),children:U}),a.jsx(oi,{className:te("h-3.5 w-3.5 text-muted-foreground transition",y&&"rotate-180")})]}),y?a.jsxs("div",{className:"absolute left-0 z-50 mt-2 w-72 rounded-2xl border border-border bg-card shadow-lg",role:"listbox",id:b,"aria-multiselectable":l||void 0,children:[a.jsx("div",{className:"border-b border-border p-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sd,{className:"pointer-events-none absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),a.jsx(kt,{ref:v,value:j,onChange:z=>C(z.target.value),placeholder:"Search people...",className:"h-9 pl-9 text-sm"})]})}),a.jsx("div",{className:"max-h-72 overflow-auto p-2",children:N.length===0?a.jsx("div",{className:"px-3 py-3 text-xs text-muted-foreground",children:"No matches."}):N.map(z=>{const V=t.includes(z.key);return a.jsxs("button",{type:"button",onClick:()=>D(z.key),role:"option","aria-selected":V,className:te("flex w-full items-center justify-between gap-3 rounded-xl px-3 py-2 text-left text-sm transition",V?"bg-brand-50 text-foreground dark:bg-brand-500/20 dark:text-brand-200":"hover:bg-background dark:hover:bg-muted/40"),children:[a.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground",children:z.label}),V?a.jsx(ri,{className:"h-4 w-4 text-brand-600"}):null]},z.key)})}),l&&t.length>0?a.jsxs("div",{className:"flex items-center justify-between border-t border-border px-3 py-2",children:[a.jsx("button",{type:"button",onClick:()=>r([]),className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Clear"}),a.jsx("button",{type:"button",onClick:()=>{S(!1),C("")},className:"text-xs font-semibold text-brand-600",children:"Done"})]}):null]}):null]})}function Yp(e){return e.length===0||e[0]===Wr?null:e[0]}function Xp(){return Wr}function Jp({upload:e}){const t=Math.max(0,Math.min(100,e.progress.percent??0)),r=zO(e.status,t);return a.jsxs("div",{className:"flex flex-col gap-1 text-[10px] text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:r}),e.status==="uploading"?a.jsxs("span",{className:"tabular-nums",children:[t,"%"]}):null]}),a.jsx("div",{className:"h-1.5 w-full rounded-full bg-muted",children:a.jsx("div",{className:te("h-1.5 rounded-full",LO(e.status)),style:{width:`${t}%`}})})]})}function zO(e,t){switch(e){case"uploading":return`Uploading (${t}%)`;case"succeeded":return"Complete";case"paused":return"Upload paused";case"failed":return"Upload failed";case"cancelled":return"Upload cancelled";case"queued":return"Queued";default:return"Uploading"}}function LO(e){switch(e){case"failed":return"bg-danger-500";case"paused":return"bg-warning-500";case"cancelled":return"bg-muted-foreground";case"succeeded":return"bg-success-500";default:return"bg-brand-500"}}const UO={queued:"bg-muted-foreground",processing:"bg-warning-500",ready:"bg-success-500",failed:"bg-danger-500",archived:"bg-muted"};function $O({columns:e,groupBy:t,onGroupByChange:r,activeId:i,onActivate:l,density:u,now:d,isLoading:h,isError:p,hasNextPage:x,isFetchingNextPage:v,onLoadMore:b,onRefresh:y,onUploadClick:S,onClearFilters:j,showNoDocuments:C,showNoResults:_,presenceByDocument:N,people:E,onAssign:D,onPickUp:U}){const z=e.reduce((q,I)=>q+I.items.length,0),V=h&&z===0,R=p&&z===0,A=u==="compact",B=A?"gap-2":"gap-3",T=A?"px-2.5 py-2.5":"px-3 py-3",K=A?"gap-2":"gap-3",$=A?"px-2.5 py-2.5":"px-3 py-3";return a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-background",children:[a.jsxs("div",{className:"flex shrink-0 flex-wrap items-center justify-between gap-3 border-b border-border bg-card px-6 py-3 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2 font-semibold text-muted-foreground",children:[a.jsx("span",{children:"Group by"}),a.jsx("div",{className:"flex items-center rounded-full border border-border bg-background px-1 py-1",children:["status","tag","uploader"].map(q=>a.jsx("button",{type:"button",onClick:()=>r(q),className:te("rounded-full px-3 py-1 text-xs font-semibold transition",t===q?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),"aria-pressed":t===q,children:q==="status"?"Status":q==="tag"?"Tag":"Uploader"},q))})]}),a.jsx("span",{className:"text-muted-foreground",children:"Select a card to open the preview."})]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-6 py-4",children:V?a.jsx("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-border bg-card text-sm text-muted-foreground",children:"Loading board..."}):R?a.jsx(Oi,{title:"Unable to load documents",description:"We could not refresh this board. Try again.",action:{label:"Try again",onClick:y}}):C?a.jsx(Oi,{title:"No documents yet",description:"Upload your first batch to start the processing loop.",action:{label:"Upload files",onClick:S}}):_?a.jsx(Oi,{title:"No results",description:"Try clearing filters or adjusting the search.",action:{label:"Clear filters",onClick:j}}):a.jsx("div",{className:"flex min-h-full gap-4",children:e.map(q=>a.jsxs("div",{className:"flex w-72 min-w-[18rem] flex-col",children:[a.jsx("div",{className:"mb-3 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:q.label}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[q.items.length," items"]})]})}),a.jsx("div",{className:te("flex min-h-[12rem] flex-1 flex-col rounded-2xl border border-dashed border-border bg-card",B,T),children:q.items.length===0?a.jsx("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 text-center text-xs text-muted-foreground",children:a.jsx("p",{children:"No items yet"})}):q.items.map(I=>{const je=N?.[I.id]??[],M=je.length>0,H=je.map(ee=>({id:ee.client_id,name:ee.display_name,email:ee.email}));return a.jsxs("div",{onClick:()=>l(I.id),onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&(ee.preventDefault(),l(I.id))},className:te("flex cursor-pointer flex-col rounded-2xl border bg-card shadow-sm transition-colors duration-150 ease-out motion-reduce:transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",K,$,i===I.id?"border-brand-400":"border-border hover:border-brand-300 hover:bg-background/40",M&&i!==I.id?"ring-1 ring-brand-200/60 ring-inset":null),role:"button",tabIndex:0,"aria-label":`Open ${I.name}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:I.name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Updated ",Po(d,I.activity_at??I.updated_at)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[M?a.jsx(Kp,{items:H,size:"xs",max:3}):null,a.jsx("span",{className:te("h-2.5 w-2.5 rounded-full",UO[I.status]),"aria-hidden":!0})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[a.jsxs("span",{className:"font-semibold",children:["Assignee: ",I.assignee_label??"Unassigned"]}),I.assignee_key?null:a.jsx("button",{type:"button",onClick:ee=>{ee.stopPropagation(),U(I.id)},className:"shrink-0 whitespace-nowrap rounded-full border border-brand-200 bg-brand-50 px-2 py-0.5 font-semibold text-brand-700 dark:border-brand-500/40 dark:bg-brand-500/20 dark:text-brand-200",children:"Pick up"}),a.jsx("div",{onPointerDown:ee=>ee.stopPropagation(),className:"min-w-0 rounded-full border border-border bg-background px-1 py-0.5",children:a.jsx(Od,{people:E,value:[I.assignee_key??Xp()],onChange:ee=>D(I.id,Yp(ee)),placeholder:"Assign...",includeUnassigned:!0,buttonClassName:"min-w-0 max-w-[11rem] border-0 bg-transparent px-2 py-0 text-[11px] shadow-none"})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[a.jsx("span",{className:"font-semibold",children:I.uploader_label??"Unassigned"}),I.tags.length>0?a.jsxs("span",{className:"rounded-full border border-border bg-background px-2 py-0.5",children:[I.tags[0],I.tags.length>1?` +${I.tags.length-1}`:""]}):a.jsx("span",{className:"text-muted-foreground",children:"No tags"}),a.jsx(C1,{mapping:I.mapping_health})]}),I.upload&&I.upload.status!=="succeeded"?a.jsx("div",{className:"pt-1",children:a.jsx(Jp,{upload:I.upload})}):null]},I.id)})})]},q.id))})}),x?a.jsx("div",{className:"flex shrink-0 justify-center border-t border-border bg-card px-6 py-3",children:a.jsx("button",{type:"button",onClick:b,className:"text-xs font-semibold text-brand-600",disabled:v,children:v?"Loading more...":"Load more"})}):null]})}function qO({count:e,outputReadyCount:t,archiveCount:r,restoreCount:i,onArchive:l,onRestore:u,onClear:d,onAddTag:h,onDownloadOriginals:p,onDownloadOutputs:x,onDelete:v}){return e<=0?null:a.jsx("div",{className:"sticky bottom-0 z-10 shrink-0 border-t border-border bg-card px-6 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"text-sm text-foreground",children:[a.jsx("span",{className:"font-semibold",children:e})," selected"]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Ae,{size:"sm",type:"button",variant:"secondary",onClick:h,children:"Add tags"}),a.jsxs(Ae,{size:"sm",type:"button",variant:"secondary",onClick:l,disabled:r<=0,children:["Archive (",r,")"]}),a.jsxs(Ae,{size:"sm",type:"button",variant:"secondary",onClick:u,disabled:i<=0,children:["Restore (",i,")"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ae,{size:"sm",type:"button",variant:"secondary",onClick:x,children:"Download outputs"}),a.jsxs("span",{className:"text-[11px] font-semibold text-muted-foreground",children:[t,"/",e," processed"]})]}),a.jsx(Ae,{size:"sm",type:"button",variant:"secondary",onClick:p,children:"Download originals"}),a.jsx(Ae,{size:"sm",type:"button",variant:"danger",onClick:v,children:"Delete"}),a.jsx(Ae,{size:"sm",type:"button",variant:"ghost",onClick:d,children:"Clear"})]})]})})}function ic({workspaceId:e,selected:t,onToggle:r,placeholder:i,disabled:l,buttonClassName:u,onOpenChange:d}){const[h,p]=f.useState(!1),[x,v]=f.useState(""),b=f.useRef(null),y=f.useRef(null),S=f.useId(),j=x.trim(),C=j.length>=2,_=yn({queryKey:["documents",e,"tags",{q:C?j:""}],queryFn:async({signal:D})=>{const{data:U}=await Ve.GET("/api/v1/workspaces/{workspace_id}/tags",{params:{path:{workspace_id:e},query:{q:C?j:null,sort:"-count",page:1,page_size:20,include_total:!1}},signal:D});if(!U)throw new Error("Expected tag catalog page.");return U},enabled:h&&e.length>0,staleTime:3e4}),N=f.useMemo(()=>_.data?.items??[],[_.data?.items]),E=f.useMemo(()=>{const D=j;return!D||N.some(z=>z.tag.toLowerCase()===D.toLowerCase())?null:D},[j,N]);return f.useEffect(()=>{h&&y.current?.focus()},[h]),f.useEffect(()=>{d?.(h)},[d,h]),f.useEffect(()=>{if(!h)return;const D=z=>{const V=z.target;V&&b.current&&!b.current.contains(V)&&p(!1)},U=z=>{z.key==="Escape"&&p(!1)};return window.addEventListener("mousedown",D),window.addEventListener("keydown",U),()=>{window.removeEventListener("mousedown",D),window.removeEventListener("keydown",U)}},[h]),a.jsxs("div",{className:"relative",ref:b,"data-ignore-row-click":"true",children:[a.jsxs("button",{type:"button",onClick:()=>p(D=>!D),disabled:l,className:te("inline-flex min-w-0 items-center gap-2 rounded-lg border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-60",l?"border-border bg-background text-muted-foreground":"border-border bg-card text-foreground hover:bg-background dark:hover:bg-muted/40",u),"aria-expanded":h,"aria-haspopup":"listbox","aria-controls":h?S:void 0,children:[a.jsx(xT,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":!0}),t.length===0?a.jsx("span",{className:"min-w-0 truncate text-muted-foreground",children:i}):a.jsxs("span",{className:"min-w-0 truncate",children:[t.slice(0,2).join(", "),t.length>2?` +${t.length-2}`:""]}),a.jsx(oi,{className:te("h-3.5 w-3.5 text-muted-foreground transition",h&&"rotate-180")})]}),h?a.jsxs("div",{className:"absolute left-0 top-[calc(100%+0.5rem)] z-20 w-[20rem] rounded-2xl border border-border bg-card p-3 shadow-lg","data-ignore-row-click":"true",role:"listbox",id:S,"aria-multiselectable":!0,children:[a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Sd,{className:"pointer-events-none absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-muted-foreground"}),a.jsx(kt,{ref:y,value:x,onChange:D=>v(D.target.value),placeholder:"Search or create tag",className:"h-9 pl-9"})]}),a.jsx("div",{className:"mt-1 text-[11px] text-muted-foreground",children:"Type 2+ characters to search existing tags."})]}),t.length?a.jsx("div",{className:"mb-2 flex flex-wrap gap-1",children:t.map(D=>a.jsxs("button",{type:"button",onClick:()=>r(D),className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-foreground hover:text-danger-700",title:"Remove tag",children:[D,a.jsx(Ws,{className:"h-3 w-3"})]},D))}):null,a.jsxs("div",{className:"max-h-56 overflow-y-auto rounded-xl border border-border",children:[E?a.jsxs("button",{type:"button",onClick:()=>r(E),role:"option","aria-selected":!1,className:"flex w-full items-center justify-between px-3 py-2 text-left text-xs font-semibold text-foreground hover:bg-background dark:hover:bg-muted/40",children:[a.jsxs("span",{children:["Create ",E,""]}),a.jsx("span",{className:"text-[11px] text-muted-foreground",children:"new"})]}):null,_.isLoading?a.jsx("div",{className:"px-3 py-3 text-xs text-muted-foreground",children:"Loading tags"}):N.length===0?a.jsx("div",{className:"px-3 py-3 text-xs text-muted-foreground",children:C?"No matches.":"No tags yet."}):N.map(D=>{const U=t.includes(D.tag);return a.jsxs("button",{type:"button",onClick:()=>r(D.tag),role:"option","aria-selected":U,className:te("flex w-full items-center justify-between px-3 py-2 text-left text-xs font-semibold transition",U?"bg-brand-50 text-foreground dark:bg-brand-500/20 dark:text-brand-200":"text-foreground hover:bg-background dark:hover:bg-muted/40"),children:[a.jsx("span",{className:"truncate",children:D.tag}),a.jsxs("span",{className:"ml-3 flex items-center gap-2 text-[11px] text-muted-foreground",children:[D.document_count,U?a.jsx(ri,{className:"h-3.5 w-3.5 text-brand-600"}):null]})]},D.tag)})]}),a.jsx("div",{className:"mt-2 text-[11px] text-muted-foreground",children:"Click a tag to toggle it."})]}):null]})}function BO({open:e,workspaceId:t,selectedCount:r,onClose:i,onApply:l}){const[u,d]=f.useState([]),[h,p]=f.useState([]);return f.useEffect(()=>{e&&(d([]),p([]))},[e]),e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-overlay/30 px-4",children:a.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-border bg-card p-5 shadow-xl",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Bulk tag update"}),a.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Adding to ",r," documents."]}),a.jsxs("div",{className:"mt-4 grid gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"Add tags"}),a.jsx("div",{className:"mt-2",children:a.jsx(ic,{workspaceId:t,selected:u,onToggle:x=>{d(v=>v.includes(x)?v.filter(b=>b!==x):[...v,x])},placeholder:u.length?"Edit add tags":"Add tags"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"Remove tags"}),a.jsx("div",{className:"mt-2",children:a.jsx(ic,{workspaceId:t,selected:h,onToggle:x=>{p(v=>v.includes(x)?v.filter(b=>b!==x):[...v,x])},placeholder:h.length?"Edit remove tags":"Remove tags"})})]})]}),a.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[a.jsx(Ae,{type:"button",variant:"ghost",onClick:i,children:"Cancel"}),a.jsx(Ae,{type:"button",onClick:()=>{const x=u.filter(b=>!h.includes(b)),v=h.filter(b=>!u.includes(b));x.length===0&&v.length===0||(l({add:x,remove:v}),i())},disabled:u.length===0&&h.length===0,children:"Apply"})]})]})}):null}const PO=[{value:"queued",label:"Queued"},{value:"processing",label:"Processing"},{value:"ready",label:"Processed"},{value:"failed",label:"Failed"},{value:"archived",label:"Archived"}],FO=[{value:"xlsx",label:"XLSX"},{value:"xls",label:"XLS"},{value:"csv",label:"CSV"},{value:"pdf",label:"PDF"}];function IO({workspaceId:e,filters:t,onChange:r,people:i}){const l=f.useRef(null),[u,d]=f.useState(!1);f.useEffect(()=>{function p(x){if(!u)return;const v=x.target;l.current&&v&&!l.current.contains(v)&&d(!1)}return window.addEventListener("mousedown",p),()=>window.removeEventListener("mousedown",p)},[u]);const h=t.statuses.length+t.fileTypes.length+t.tags.length+t.assignees.length;return a.jsxs("div",{ref:l,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>d(p=>!p),className:"inline-flex h-8 items-center gap-2 rounded-lg border border-border bg-background px-3 text-sm font-semibold text-foreground shadow-sm hover:border-brand-300","aria-expanded":u,"aria-haspopup":"dialog",children:[a.jsx(pT,{className:"h-4 w-4"}),"Filters",h>0?a.jsx("span",{className:"rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",children:h}):null,a.jsx(bp,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":!0})]}),u?a.jsx("div",{className:"absolute left-0 z-30 mt-2 w-[22rem] rounded-2xl border border-border bg-card p-4 shadow-lg",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(zu,{label:"Status",children:a.jsx(_0,{options:PO,value:t.statuses,onToggle:p=>{const x=new Set(t.statuses);x.has(p)?x.delete(p):x.add(p),r({...t,statuses:Array.from(x)})}})}),a.jsx(zu,{label:"File type",children:a.jsx(_0,{options:FO,value:t.fileTypes,onToggle:p=>{const x=new Set(t.fileTypes);x.has(p)?x.delete(p):x.add(p),r({...t,fileTypes:Array.from(x)})},renderLabel:p=>Qp(p)})}),a.jsx(zu,{label:"Tags",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("div",{className:"flex items-center gap-1 rounded-full border border-border bg-background px-2 py-1",children:["any","all"].map(p=>a.jsx("button",{type:"button",className:te("rounded-full px-2 py-0.5 text-[11px] font-semibold transition",t.tagMode===p?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>r({...t,tagMode:p}),children:p==="any"?"Any":"All"},p))}),a.jsx(ic,{workspaceId:e,selected:t.tags,onToggle:p=>{const x=t.tags.includes(p)?t.tags.filter(v=>v!==p):[...t.tags,p];r({...t,tags:x})},placeholder:t.tags.length?"Edit tags":"Filter tags"})]})}),a.jsx(zu,{label:"Assignee",children:a.jsx(Od,{people:i,value:t.assignees,onChange:p=>r({...t,assignees:p}),placeholder:"Assignee...",multiple:!0,includeUnassigned:!0})}),a.jsxs("div",{className:"flex items-center justify-between border-t border-border pt-3",children:[a.jsx("button",{type:"button",onClick:()=>r({statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]}),className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Clear filters"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-xs font-semibold text-brand-600",children:"Done"})]})]})}):null]})}function zu({label:e,children:t}){return a.jsxs("div",{children:[a.jsx("div",{className:"mb-2 text-xs font-semibold text-muted-foreground",children:e}),t]})}function _0({options:e,value:t,onToggle:r,renderLabel:i}){return a.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map(l=>{const u=t.includes(l.value),d=i?i(l.value):l.label;return a.jsx("button",{type:"button",onClick:()=>r(l.value),className:te("rounded-full border px-2 py-0.5 text-[11px] font-semibold transition",u?"border-brand-200 bg-brand-50 text-brand-700 dark:border-brand-500/40 dark:bg-brand-500/20 dark:text-brand-200":"border-transparent text-muted-foreground hover:bg-background dark:hover:bg-muted/40 hover:text-foreground"),children:d},l.value)})})}const eg=[50,100,200,1e3,2e3],tg=[{value:"auto",label:"Auto",intervalMs:!1},{value:"off",label:"Off",intervalMs:!1},{value:"30s",label:"Every 30s",intervalMs:3e4},{value:"1m",label:"Every 1m",intervalMs:6e4},{value:"5m",label:"Every 5m",intervalMs:3e5}],k1=[{value:"comfortable",label:"Comfortable"},{value:"compact",label:"Compact"}],ti={pageSize:eg[0],refreshInterval:"auto",density:"comfortable"};function $m(e){const t=e??{},r=typeof t.pageSize=="string"?Number(t.pageSize):t.pageSize;return{pageSize:VO(r)?r:ti.pageSize,refreshInterval:QO(t.refreshInterval)?t.refreshInterval:ti.refreshInterval,density:ZO(t.density)?t.density:ti.density}}function HO(e){return tg.find(t=>t.value===e)?.intervalMs??!1}function VO(e){return eg.includes(e)}function QO(e){return tg.some(t=>t.value===e)}function ZO(e){return k1.some(t=>t.value===e)}function KO({settings:e,onChange:t}){const r=f.useRef(null),[i,l]=f.useState(!1);f.useEffect(()=>{function h(p){if(!i)return;const x=p.target;r.current&&x&&!r.current.contains(x)&&l(!1)}return window.addEventListener("mousedown",h),()=>window.removeEventListener("mousedown",h)},[i]);const u=f.useMemo(()=>e.pageSize===ti.pageSize&&e.refreshInterval===ti.refreshInterval&&e.density===ti.density,[e]),d=h=>t({...e,...h});return a.jsxs("div",{ref:r,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>l(h=>!h),className:te("inline-flex h-8 items-center gap-2 rounded-lg border border-border bg-background px-3 text-sm font-semibold shadow-sm transition",i?"text-foreground":"text-muted-foreground hover:text-foreground"),"aria-expanded":i,"aria-haspopup":"dialog",children:[a.jsx(ej,{className:"h-4 w-4"}),"List settings",a.jsx(oi,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":!0})]}),i?a.jsx("div",{className:"absolute right-0 z-30 mt-2 w-[20.5rem] rounded-2xl border border-border bg-card p-4 shadow-lg",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(dm,{label:"Records per page",children:a.jsx(Bi,{"aria-label":"Records per page",value:String(e.pageSize),onChange:h=>d({pageSize:Number(h.target.value)}),children:eg.map(h=>a.jsx("option",{value:h,children:h},h))})}),a.jsx(dm,{label:"Refresh frequency",children:a.jsx(Bi,{"aria-label":"Refresh frequency",value:e.refreshInterval,onChange:h=>d({refreshInterval:h.target.value}),children:tg.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))})}),a.jsx(dm,{label:"Display density",controlClassName:"w-auto",children:a.jsx("div",{className:"inline-flex items-center gap-1 rounded-full border border-border bg-background p-1",role:"radiogroup","aria-label":"Display density",children:k1.map(h=>{const p=e.density===h.value;return a.jsx("button",{type:"button",role:"radio","aria-checked":p,onClick:()=>d({density:h.value}),className:te("rounded-full px-3 py-1 text-[11px] font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",p?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:h.label},h.value)})})}),a.jsxs("div",{className:"flex items-center justify-between border-t border-border pt-3",children:[a.jsx("button",{type:"button",onClick:()=>d(ti),className:te("text-xs font-semibold",u?"text-muted-foreground/60":"text-muted-foreground hover:text-foreground"),disabled:u,children:"Reset defaults"}),a.jsx("button",{type:"button",onClick:()=>l(!1),className:"text-xs font-semibold text-brand-600",children:"Done"})]})]})}):null]})}function dm({label:e,children:t,controlClassName:r}){return a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("div",{className:"min-w-0 text-xs font-semibold text-muted-foreground",children:e}),a.jsx("div",{className:te("w-44",r),children:t})]})}function GO({activeViewId:e,onSetBuiltInView:t,savedViews:r,onSelectSavedView:i,onDeleteSavedView:l,onOpenSaveDialog:u,counts:d}){const h=f.useRef(null),[p,x]=f.useState(!1);f.useEffect(()=>{function y(S){if(!p)return;const j=S.target;h.current&&j&&!h.current.contains(j)&&x(!1)}return window.addEventListener("mousedown",y),()=>window.removeEventListener("mousedown",y)},[p]);const v=f.useMemo(()=>RO(d),[d]),b=f.useMemo(()=>{if(e==="custom")return"Custom view";const y=v.find(j=>j.id===e);return y?y.label:r.find(j=>j.id===e)?.name??"Views"},[e,v,r]);return a.jsxs("div",{ref:h,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>x(y=>!y),className:"inline-flex h-8 items-center gap-2 rounded-lg border border-border bg-background px-3 text-sm font-semibold text-foreground shadow-sm hover:border-brand-300","aria-expanded":p,"aria-haspopup":"dialog",children:[a.jsx(gT,{className:"h-4 w-4"}),a.jsx("span",{children:"Views"}),a.jsx("span",{className:"max-w-[10rem] truncate text-[11px] font-medium text-muted-foreground",children:b}),a.jsx(bp,{className:"h-3.5 w-3.5 text-muted-foreground","aria-hidden":!0})]}),p?a.jsxs("div",{className:"absolute left-0 z-30 mt-2 w-[22rem] rounded-2xl border border-border bg-card p-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Views"}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Switch between built-in and saved views."})]}),a.jsxs("button",{type:"button",onClick:()=>{x(!1),u()},className:"inline-flex items-center gap-2 rounded-xl border border-border bg-background px-3 py-1.5 text-xs font-semibold text-foreground hover:border-brand-300",children:[a.jsx(mT,{className:"h-3.5 w-3.5"}),"Save current view"]})]}),e==="custom"?a.jsx("div",{className:"mt-3 rounded-xl border border-dashed border-border bg-background px-3 py-2 text-xs text-muted-foreground",children:"You are on a custom view. Save it to reuse later."}):null,a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Built-in"}),a.jsx("div",{className:"flex flex-col gap-1",children:v.map(y=>a.jsxs("button",{type:"button",onClick:()=>{t(y.id),x(!1)},className:te("flex items-center justify-between rounded-xl px-3 py-2 text-left text-sm transition",e===y.id?"bg-brand-50 text-brand-800 dark:bg-brand-500/20 dark:text-brand-200":"hover:bg-background dark:hover:bg-muted/40 text-foreground"),children:[a.jsx("span",{className:"font-semibold",children:y.label}),a.jsx("span",{className:"rounded-full border border-border bg-card px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",children:y.count})]},y.id))})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Saved"}),r.length===0?a.jsx("div",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No saved views yet."}):a.jsx("div",{className:"flex flex-col gap-1",children:r.slice().sort((y,S)=>S.updatedAt-y.updatedAt).map(y=>a.jsxs("div",{className:"group flex items-center justify-between rounded-xl px-3 py-2 hover:bg-background",children:[a.jsx("button",{type:"button",onClick:()=>{i(y.id),x(!1)},className:te("min-w-0 flex-1 truncate text-left text-sm font-semibold",e===y.id?"text-brand-800 dark:text-brand-200":"text-foreground"),title:y.name,children:y.name}),a.jsxs("button",{type:"button",onClick:S=>{S.stopPropagation(),l(y.id)},className:"ml-2 hidden items-center gap-1 text-xs font-semibold text-muted-foreground hover:text-danger-600 group-hover:inline-flex","aria-label":`Delete view ${y.name}`,children:[a.jsx(hp,{className:"h-3.5 w-3.5"}),"Delete"]})]},y.id))})]})]}):null]})}function WO({viewMode:e,onViewModeChange:t,listSettings:r,onListSettingsChange:i,workspaceId:l,filters:u,onChange:d,people:h,showingCount:p,totalCount:x,isRefreshing:v,lastUpdatedAt:b,now:y,onRefresh:S,presenceParticipants:j,activeViewId:C,onSetBuiltInView:_,savedViews:N,onSelectSavedView:E,onDeleteSavedView:D,onOpenSaveDialog:U,counts:z}){const V=u.statuses.length+u.fileTypes.length+u.tags.length+u.assignees.length,R=b?Po(y,b):"",A=j.map(B=>({id:B.client_id,name:B.display_name,email:B.email}));return a.jsxs("div",{className:"flex shrink-0 flex-wrap items-center justify-between gap-3 border-b border-border bg-card px-6 py-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(GO,{activeViewId:C,onSetBuiltInView:_,savedViews:N,onSelectSavedView:E,onDeleteSavedView:D,onOpenSaveDialog:U,counts:z}),a.jsx(IO,{workspaceId:l,filters:u,onChange:d,people:h}),V>0?a.jsx("button",{type:"button",onClick:()=>d({statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]}),className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Clear filters"}):null]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-muted-foreground",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[j.length>0?a.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-muted-foreground",children:[a.jsx("span",{className:"flex h-2 w-2 rounded-full bg-success-500","aria-hidden":!0}),a.jsx(Kp,{items:A,size:"xs",max:4})]}):null,a.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-muted-foreground",children:[a.jsxs("span",{className:"hidden sm:inline",children:["Updated ",R,"  ",p," of ",x]}),a.jsxs("span",{className:"sm:hidden",children:[p,"/",x]}),a.jsx(Ae,{type:"button",size:"sm",variant:"ghost",onClick:S,className:"h-6 w-6 rounded-full p-0 text-muted-foreground hover:text-foreground","aria-label":"Refresh documents",children:a.jsx(Cd,{className:te("h-3.5 w-3.5",v&&"animate-spin")})})]})]}),a.jsx("span",{className:"h-5 w-px bg-border/70","aria-hidden":!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(KO,{settings:r,onChange:i}),a.jsxs("div",{className:"flex h-8 items-center rounded-lg border border-border bg-background px-1 text-sm shadow-sm",children:[a.jsxs(Ae,{type:"button",size:"sm",variant:e==="grid"?"secondary":"ghost",onClick:()=>t("grid"),className:te("rounded-md px-3",e==="grid"?"shadow-sm":"text-muted-foreground"),"aria-pressed":e==="grid","aria-label":"Grid view",children:[a.jsx(Xw,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(Ae,{type:"button",size:"sm",variant:e==="board"?"secondary":"ghost",onClick:()=>t("board"),className:te("rounded-md px-3",e==="board"?"shadow-sm":"text-muted-foreground"),"aria-pressed":e==="board","aria-label":"Board view",children:[a.jsx(DD,{className:"h-4 w-4"}),"Board"]})]})]})]})]})}const qm=50,Bm=200,St={root:()=>["documents"],workspace:e=>[...St.root(),e],list:(e,t)=>[...St.workspace(e),"list",t],members:e=>[...St.workspace(e),"members"],document:(e,t)=>[...St.workspace(e),"document",t],runsForDocument:(e,t)=>[...St.workspace(e),"runs",{input_document_id:t}],run:e=>[...St.root(),"run",e],runMetrics:e=>[...St.run(e),"metrics"],workbook:e=>[...St.root(),"workbook",e]};async function E0(e,t,r){const i={sort:t.sort??void 0,page:t.page>0?t.page:1,page_size:t.pageSize>0?t.pageSize:qm,include_total:!1,...t.query??{}},{data:l,response:u}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:i},signal:r});if(!l)throw new Error("Expected document page payload.");const d=u?.headers?.get("x-ade-changes-cursor");return{...l,changesCursorHeader:d}}async function YO(e,t,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/listRow",{params:{path:{workspace_id:e,document_id:t}},signal:r});if(!i)throw new Error("Expected document list row payload.");return i}async function XO(e,t){const{data:r}=await Ve.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},signal:t});if(!r)throw new Error("Expected workspace member page payload.");return r}async function JO(e,t,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/runs",{params:{path:{workspace_id:e},query:{page:1,page_size:25,include_total:!1,input_document_id:t}},signal:r});if(!i)throw new Error("Expected run page payload.");return i.items??[]}async function ez(e,t){try{const{data:r}=await Ve.GET("/api/v1/runs/{run_id}/metrics",{params:{path:{run_id:e}},signal:t});return r??null}catch(r){if(r instanceof Ht&&r.status===404)return null;throw r}}async function tz(e,t){const r=await fetch(e,{credentials:"include",signal:t});if(!r.ok)throw new Error("Unable to fetch processed workbook.");const i=await r.arrayBuffer(),l=await Gm(()=>import("./xlsx-DGuHH-KN.js"),[]),u=l.read(i,{type:"array"});return{sheets:u.SheetNames.map(h=>{const p=u.Sheets[h],x=l.utils.sheet_to_json(p,{header:1,raw:!1,blankrows:!1}),v=x.length,b=x.reduce((N,E)=>Math.max(N,E.length),0),y=v>Bm,S=x.slice(0,Bm).map(N=>N.map(E=>jO(E))),j=Math.max(S[0]?.length??0,b,1),C=SO(S[0]??[],j),_=S.slice(1).map(N=>S1(N,C.length));return{name:h,headers:C,rows:_,totalRows:v,totalColumns:b,truncatedRows:y,truncatedColumns:!1}})}}async function k0(e,t,r){const i=await fetch(`/api/v1/workspaces/${e}/documents/${t}/download`,{credentials:"include"});if(!i.ok)throw new Error("Unable to download original file.");const l=await i.blob(),u=Hp(i.headers.get("content-disposition"))??r;return Vp(l,u),u}async function nz(e,t){const r=await fetch(e,{credentials:"include"});if(!r.ok)throw new Error("Unable to download processed output.");const i=await r.blob(),l=Hp(r.headers.get("content-disposition"))??j1(t);return Vp(i,l),l}async function D0(e,t){const r=await fetch(`/api/v1/runs/${e}/output/download`,{credentials:"include"});if(!r.ok)throw new Error("Unable to download processed output.");const i=await r.blob(),l=Hp(r.headers.get("content-disposition"))??j1(t);return Vp(i,l),l}async function sz(e,t){const{data:r}=await Ve.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:{configuration_id:e}},body:{options:{dry_run:!1,validate_only:!1,force_rebuild:!1,debug:!1,input_document_id:t}}});if(!r)throw new Error("Unable to create run.");return r}async function rz(e,t,r){const{data:i}=await Ve.PATCH("/api/v1/workspaces/{workspace_id}/documents/{document_id}/tags",{params:{path:{workspace_id:e,document_id:t}},body:r});if(!i)throw new Error("Expected updated document record.");return i}async function az(e,t,r){const{data:i}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/batch/tags",{params:{path:{workspace_id:e}},body:{document_ids:t,...r}});if(!i)throw new Error("Expected updated document records.");return i.documents}async function iz(e,t){await Ve.DELETE("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:t}}})}async function oz(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/batch/delete",{params:{path:{workspace_id:e}},body:{document_ids:t}});if(!r)throw new Error("Expected delete response.");return r.document_ids??[]}async function lz(e,t,r){const i={};"assigneeUserId"in r&&(i.assignee_user_id=r.assigneeUserId??null),"metadata"in r&&(i.metadata=r.metadata??null);const{data:l}=await Ve.PATCH("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:t}},body:i});if(!l)throw new Error("Expected updated document record.");return l}async function cz(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/{document_id}/archive",{params:{path:{workspace_id:e,document_id:t}}});if(!r)throw new Error("Expected updated document record.");return r}async function uz(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/{document_id}/restore",{params:{path:{workspace_id:e,document_id:t}}});if(!r)throw new Error("Expected updated document record.");return r}async function dz(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/batch/archive",{params:{path:{workspace_id:e}},body:{document_ids:t}});if(!r)throw new Error("Expected updated document records.");return r.documents}async function fz(e,t){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/documents/batch/restore",{params:{path:{workspace_id:e}},body:{document_ids:t}});if(!r)throw new Error("Expected updated document records.");return r.documents}function D1(e){return e.output?.download_url?e.output.download_url:e.links?.output_download?e.links.output_download:null}function hz(e){return!e||e.status!=="succeeded"?!1:!!D1(e)}function cd(e){return e?e.last_successful_run?e.last_successful_run:e.last_run?.status==="succeeded"?e.last_run:null:null}function mz({onOpenDetails:e,onReprocess:t,reprocessDisabled:r,showClosePreview:i,onClosePreview:l,onDownloadOriginal:u,onCopyLink:d,onDelete:h,onArchive:p,onRestore:x,isArchived:v,originalDisabled:b,copyDisabled:y,deleteDisabled:S,archiveDisabled:j}){const[C,_]=f.useState(!1),[N,E]=f.useState(null),D=!!p&&!v,U=!!x&&!!v,z=D||U;return a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-transparent bg-transparent text-muted-foreground transition hover:border-border hover:bg-background hover:text-muted-foreground",onClick:V=>{V.stopPropagation(),E({x:V.clientX,y:V.clientY}),_(!0)},"aria-label":"Row actions",children:a.jsx(Jw,{className:"h-4 w-4"})}),a.jsx(kr,{open:C,position:N,onClose:()=>_(!1),appearance:"light",items:[{id:"details",label:"Open details",onSelect:e},...t?[{id:"reprocess",label:"Reprocess",onSelect:t,disabled:r,icon:a.jsx(Cd,{className:"h-4 w-4"})}]:[],{id:"download-original",label:"Download original",onSelect:u,disabled:b,icon:a.jsx(tc,{className:"h-4 w-4"}),dividerAbove:!0},{id:"copy-link",label:"Copy link",onSelect:d,disabled:y,icon:a.jsx(fp,{className:"h-4 w-4"})},...z?[{id:U?"restore":"archive",label:U?"Restore document":"Archive document",onSelect:U?x:p,disabled:j,icon:U?a.jsx(ij,{className:"h-4 w-4"}):a.jsx(oj,{className:"h-4 w-4"}),dividerAbove:!0}]:[],...i&&l?[{id:"close-preview",label:"Close preview",onSelect:l,icon:a.jsx(Ws,{className:"h-4 w-4"}),dividerAbove:!h}]:[],...h?[{id:"delete",label:"Delete document",onSelect:h,disabled:S,danger:!0,icon:a.jsx(hp,{className:"h-4 w-4"}),dividerAbove:!z}]:[]]})]})}const pz={ready:{label:"Processed",pill:"border-success-200 bg-success-50 text-success-700",dot:"bg-success-500"},processing:{label:"Processing",pill:"border-warning-200 bg-warning-50 text-warning-700",dot:"bg-warning-500"},failed:{label:"Failed",pill:"border-danger-200 bg-danger-50 text-danger-700",dot:"bg-danger-500"},queued:{label:"Queued",pill:"border-border bg-background text-muted-foreground",dot:"bg-muted-foreground"},archived:{label:"Archived",pill:"border-border bg-muted text-muted-foreground",dot:"bg-muted-foreground"}};function gz({status:e,queueState:t,queueReason:r}){const i=pz[e],l=e==="queued"?xz(t,r):i.label;return a.jsxs("span",{className:te("inline-flex items-center gap-2 rounded-full border px-2.5 py-1 text-[11px] font-semibold",i.pill),children:[a.jsx("span",{className:te("h-2 w-2 rounded-full",i.dot)}),l]})}function xz(e,t){if(e==="queued"||e!=="waiting")return"Queued";switch(t){case"processing_paused":return"Processing paused";case"queue_full":return"Waiting for capacity";case"no_active_configuration":return"Waiting for configuration";default:return"Waiting to start"}}const bz="button, a, input, select, textarea, [role='button'], [role='menuitem'], [data-ignore-row-click='true']";function vz(e,t){if(!(e instanceof Element))return!1;const r=e.closest(bz);return!(!r||t&&r===t)}function yz(e){return!!(e.shiftKey||e.metaKey||e.ctrlKey)}function T0(e){return!!e.shiftKey}function wz(e){const t=e==="compact";return{rowGap:t?"gap-2":"gap-3",rowPadding:t?"py-2":"py-3",iconSize:t?"h-8 w-8":"h-9 w-9",avatarSize:t?"h-6 w-6":"h-7 w-7",pickerButtonClass:t?"min-w-0 max-w-[12rem] bg-background px-2 py-0.5 text-[11px] shadow-none":"min-w-0 max-w-[12rem] bg-background px-2 py-1 text-[11px] shadow-none"}}function jz({workspaceId:e,documents:t,density:r,activeId:i,selectedIds:l,onSelect:u,onSelectAll:d,onClearSelection:h,allVisibleSelected:p,someVisibleSelected:x,onActivate:v,onUploadClick:b,onClearFilters:y,showNoDocuments:S,showNoResults:j,isLoading:C,isError:_,hasNextPage:N,isFetchingNextPage:E,onLoadMore:D,onRefresh:U,now:z,onKeyNavigate:V,processingPaused:R,people:A,onAssign:B,onPickUp:T,onTagsChange:K,onDownloadOriginal:$,onDownloadOutput:q,onCopyLink:I,onReprocess:je,onDelete:M,onArchive:H,onRestore:ee,onOpenDetails:be,onOpenNotes:de,onClosePreview:L,expandedId:W,expandedContent:pe,presenceByDocument:G}){const ie=t.some(Pe=>Pe.record),J=C&&t.length===0,ne=_&&t.length===0,oe=f.useRef(null),he=f.useRef(null),ue=wz(r),[Oe,Ge]=f.useState(null),Se=f.useCallback((Pe,Me)=>{Ge(Be=>Me?Pe:Be===Pe?null:Be)},[]),ze=kj({count:t.length,getScrollElement:()=>he.current,estimateSize:()=>r==="compact"?96:120,overscan:8});return f.useEffect(()=>{oe.current&&(oe.current.indeterminate=x&&!p)},[p,x]),a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-card",children:[a.jsx("div",{className:"shrink-0 border-b border-border/70 bg-background/60 px-6 py-2 text-[11px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:a.jsxs("div",{className:te("grid grid-cols-[auto_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.6fr)_auto] items-center",ue.rowGap),children:[a.jsx("div",{children:a.jsx("input",{type:"checkbox",ref:oe,checked:p,onChange:Pe=>Pe.target.checked?d():h(),"aria-label":"Select all visible documents",disabled:!ie,className:"h-4 w-4 rounded border-border-strong"})}),a.jsx("div",{children:"Document"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Assignee"}),a.jsx("div",{children:"Tags"}),a.jsx("div",{className:"text-right",children:"Updated"}),a.jsx("div",{className:"text-right",children:"Actions"})]})}),a.jsx("div",{ref:he,className:"flex-1 min-h-0 overflow-y-auto px-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onKeyDown:V,tabIndex:0,role:"listbox","aria-label":"Documents",children:J?a.jsx("div",{className:"py-8",children:a.jsx(Oi,{title:"Loading documents",description:"Fetching the latest processing activity."})}):ne?a.jsx("div",{className:"py-8",children:a.jsx(Oi,{title:"Unable to load documents",description:"We could not refresh this view. Try again.",action:{label:"Try again",onClick:U}})}):S?a.jsx("div",{className:"py-8",children:a.jsx(Oi,{title:"No documents yet",description:"Upload your first batch to start processing.",action:{label:"Upload files",onClick:b}})}):j?a.jsx("div",{className:"py-8",children:a.jsx(Oi,{title:"No results",description:"Try clearing filters or adjusting the search.",action:{label:"Clear filters",onClick:y}})}):a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"relative",style:{height:ze.getTotalSize()},children:ze.getVirtualItems().map(Pe=>{const Me=t[Pe.index];if(!Me)return null;const Be=!!Me.record,st=!!cd(Me.record)?.run_id,P=!Me.assignee_key,F=!!(pe&&W===Me.id),X=!!(F&&i===Me.id),Te=l.has(Me.id),_e=Me.status==="archived",me=G?.[Me.id]??[],De=me.length>0,ye=me.map(Ze=>({id:Ze.client_id,name:Ze.display_name,email:Ze.email})),ke=Oe===Me.id,Ie=`documents-preview-${Me.id}`,ht=Me.comment_count>0,tt=st?"Download output":"Output not ready",An=Be,Ut=Ze=>{if(!vz(Ze.target,Ze.currentTarget)){if(yz(Ze)){if(Be){const pn=T0(Ze);u(Me.id,{mode:pn?"range":"toggle",checked:pn?!0:!Te})}return}v(Me.id)}},At=Ze=>{Ze.key!=="Enter"&&Ze.key!==" "||Ze.currentTarget===Ze.target&&(Ze.preventDefault(),v(Me.id))},$t=Ze=>{if(Ze.stopPropagation(),!Be)return;const pn=T0(Ze),Rn=!Te;u(Me.id,{mode:pn?"range":"toggle",checked:Rn})};return a.jsxs("div",{"data-index":Pe.index,ref:ze.measureElement,className:te("absolute left-0 top-0 w-full border-b border-border/70",ke?"z-40":"z-0"),style:{transform:`translateY(${Pe.start}px)`},children:[a.jsxs("div",{role:"button",onClick:Ut,onKeyDown:At,className:te("group grid cursor-pointer select-none grid-cols-[auto_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.6fr)_auto] items-center transition-colors duration-150 ease-out motion-reduce:transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",ue.rowGap,ue.rowPadding,X?"bg-brand-50 dark:bg-brand-500/20":Te?"bg-muted/40 dark:bg-muted/30":"hover:bg-muted/20 dark:hover:bg-muted/40",De&&!X?"ring-1 ring-brand-200/50 ring-inset":null),tabIndex:0,"aria-expanded":F,"aria-controls":F?Ie:void 0,children:[a.jsx("div",{children:a.jsx("input",{type:"checkbox",checked:Te,onChange:()=>{},onClick:$t,"aria-label":`Select ${Me.name}`,disabled:!Be,className:"h-4 w-4 rounded border-border-strong"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:te("flex items-center justify-center rounded-xl border border-border bg-background",ue.iconSize),children:a.jsx(dp,{className:"h-4 w-4 text-muted-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:Me.name}),a.jsxs("p",{className:"flex items-center gap-2 text-[11px] text-muted-foreground",children:[a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground",children:Qp(Me.file_type)}),a.jsx("span",{"aria-hidden":!0,className:"text-muted-foreground",children:""}),a.jsxs("span",{children:["Uploaded ",Po(z,Me.created_at)]}),a.jsx("span",{"aria-hidden":!0,className:"text-muted-foreground",children:""}),a.jsxs("button",{type:"button",onClick:Ze=>{Ze.stopPropagation(),de(Me.id)},className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[10px] font-semibold text-muted-foreground transition hover:text-foreground",title:ht?`${Me.comment_count} notes`:"No notes yet",children:[a.jsx(tj,{className:"h-3 w-3"}),a.jsx("span",{className:"tabular-nums",children:Me.comment_count})]})]}),De?a.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[10px] font-medium text-muted-foreground",children:[a.jsx(Kp,{items:ye,size:"xs",max:3}),a.jsx("span",{children:"Viewing"})]}):null]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[a.jsx(gz,{status:Me.status,queueState:Me.queue_state,queueReason:Me.queue_reason}),a.jsx(C1,{mapping:Me.mapping_health})]}),Me.upload&&Me.upload.status!=="succeeded"?a.jsx(Jp,{upload:Me.upload}):null]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:te("inline-flex items-center justify-center rounded-full border border-border bg-background",ue.avatarSize),children:a.jsx(mp,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx("div",{className:"min-w-0",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Od,{people:A,value:[Me.assignee_key??Xp()],onChange:Ze=>B(Me.id,Yp(Ze)),placeholder:"Assignee...",includeUnassigned:!0,buttonClassName:ue.pickerButtonClass,onOpenChange:Ze=>Se(Me.id,Ze)}),P?a.jsx("button",{type:"button",onClick:Ze=>{Ze.stopPropagation(),T(Me.id)},className:"shrink-0 whitespace-nowrap text-[11px] font-semibold text-brand-600 hover:text-brand-700",children:"Assign to me"}):null]})})]}),a.jsx("div",{className:"flex min-w-0 items-center",children:a.jsx(ic,{workspaceId:e,selected:Me.tags,onToggle:Ze=>{const pn=Me.tags.includes(Ze)?Me.tags.filter(Rn=>Rn!==Ze):[...Me.tags,Ze];K(Me.id,pn)},placeholder:"Add tags",disabled:!An,buttonClassName:"min-w-0 max-w-[12rem] bg-background px-2 py-1 text-[11px] shadow-none",onOpenChange:Ze=>Se(Me.id,Ze)})}),a.jsx("div",{className:"text-right text-xs text-muted-foreground",children:Po(z,Me.activity_at??Me.updated_at)}),a.jsx("div",{className:"flex justify-end","data-ignore-row-click":!0,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Ze=>{Ze.stopPropagation(),st&&q(Me)},disabled:!st,"aria-label":tt,title:tt,className:te("inline-flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-card text-muted-foreground transition","hover:bg-background hover:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:text-muted-foreground disabled:hover:bg-card disabled:hover:text-muted-foreground"),children:a.jsx(tc,{className:"h-4 w-4"})}),a.jsx(mz,{onOpenDetails:()=>be(Me.id),onReprocess:F?()=>je(Me):void 0,reprocessDisabled:!Me.record||!F||R,showClosePreview:F,onClosePreview:L,onDownloadOriginal:()=>$(Me),onCopyLink:()=>I(Me),onDelete:()=>M(Me),onArchive:()=>H(Me),onRestore:()=>ee(Me),isArchived:_e,originalDisabled:!Me.record,copyDisabled:!Me.record,deleteDisabled:!Me.record,archiveDisabled:!Me.record})]})})]}),F?a.jsx("div",{id:Ie,role:"region","aria-label":`Preview details for ${Me.name}`,className:"bg-background/60 px-6 pb-4 pt-2",children:a.jsx("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:pe})}):null]},Me.id)})}),N?a.jsx("div",{className:"flex justify-center py-4",children:a.jsx("button",{type:"button",onClick:D,className:"rounded-md text-xs font-semibold text-brand-600 transition hover:text-brand-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:text-muted-foreground",disabled:E,children:E?"Loading more...":"Load more"})}):null]})})]})}function Sz({canManageConfigurations:e,onOpenConfigBuilder:t}){return a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-warning-200 bg-warning-50 px-4 py-3 text-xs text-warning-900",children:[a.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[a.jsx(pp,{className:"mt-0.5 h-4 w-4 text-warning-600","aria-hidden":!0}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-semibold",children:"No active configuration"}),a.jsx("p",{className:"text-[11px] text-warning-800",children:"Uploads are stored, but runs will not start until a configuration is active."})]})]}),e&&t?a.jsx(Ae,{type:"button",size:"sm",onClick:t,className:"h-7 px-3 text-xs",children:"Open Config Builder"}):a.jsx("span",{className:"text-[11px] font-medium text-warning-800",children:"Ask an admin to activate a configuration."})]})}function Nz({canManageSettings:e,onOpenSettings:t,configMissing:r}){const i=r?"Uploads are stored, but runs will not start until processing is resumed and a configuration is active.":"Uploads are stored, but runs will not start until processing is resumed.";return a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-warning-200 bg-warning-50 px-4 py-3 text-xs text-warning-900",children:[a.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[a.jsx(pp,{className:"mt-0.5 h-4 w-4 text-warning-600","aria-hidden":!0}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-semibold",children:"Processing paused"}),a.jsx("p",{className:"text-[11px] text-warning-800",children:i})]})]}),e&&t?a.jsx(Ae,{type:"button",size:"sm",onClick:t,className:"h-7 px-3 text-xs",children:"Open processing settings"}):a.jsx("span",{className:"text-[11px] font-medium text-warning-800",children:"Ask an admin to resume processing."})]})}function Cz({items:e,summary:t,onPause:r,onResume:i,onRetry:l,onCancel:u,onRemove:d,onClearCompleted:h}){const p=f.useRef(null),[x,v]=f.useState(!1),b=t.totalCount>0,y=t.completedCount;f.useEffect(()=>{function j(C){if(!x)return;const _=C.target;p.current&&_&&!p.current.contains(_)&&v(!1)}return window.addEventListener("mousedown",j),()=>window.removeEventListener("mousedown",j)},[x]);const S=f.useMemo(()=>{if(!b)return"Uploads";const j=t.uploadingCount+t.queuedCount+t.pausedCount;return j>0?`${j} in progress`:`${t.succeededCount} completed`},[b,t]);return b?a.jsxs("div",{ref:p,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>v(j=>!j),className:te("inline-flex items-center gap-2 rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold shadow-sm transition",x?"text-foreground":"text-muted-foreground hover:text-foreground"),"aria-haspopup":"dialog","aria-expanded":x,children:[a.jsx(Nd,{className:"h-4 w-4"}),S,a.jsx("span",{className:"rounded-full bg-muted px-1.5 py-0.5 text-[10px] text-muted-foreground",children:t.totalCount})]}),x?a.jsxs("div",{className:"absolute right-0 z-30 mt-2 w-[22rem] rounded-2xl border border-border bg-card p-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Upload manager"}),a.jsx("p",{className:"text-[11px] text-muted-foreground",children:t.uploadingCount>0?`${t.uploadingCount} uploading`:"All uploads paused or complete"})]}),y>0?a.jsx("button",{type:"button",onClick:()=>h(),className:"text-[11px] font-semibold text-brand-600 hover:text-brand-700",children:"Clear completed"}):null]}),a.jsxs("div",{className:"mt-3 flex items-center justify-between text-[10px] text-muted-foreground",children:[a.jsxs("span",{children:[t.uploadedBytes>0?qo(t.uploadedBytes):"0 B"," /"," ",t.totalBytes>0?qo(t.totalBytes):"0 B"]}),a.jsxs("span",{className:"tabular-nums",children:[t.percent,"%"]})]}),a.jsx("div",{className:"mt-1 h-1.5 w-full rounded-full bg-muted",children:a.jsx("div",{className:"h-1.5 rounded-full bg-brand-500",style:{width:`${Math.max(0,Math.min(100,t.percent))}%`}})}),a.jsx("div",{className:"mt-4 max-h-[18rem] space-y-3 overflow-y-auto pr-1",children:e.map(j=>a.jsxs("div",{className:"rounded-xl border border-border bg-background px-3 py-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate text-xs font-semibold text-foreground",children:j.file.name}),a.jsx("p",{className:"text-[10px] text-muted-foreground",children:qo(j.file.size)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[j.status==="uploading"?a.jsx(Pl,{label:"Pause",onClick:()=>r(j.id),children:"Pause"}):null,j.status==="paused"?a.jsx(Pl,{label:"Resume",onClick:()=>i(j.id),children:"Resume"}):null,j.status==="failed"?a.jsx(Pl,{label:"Retry",onClick:()=>l(j.id),children:a.jsx(Cd,{className:"h-3 w-3"})}):null,j.status==="uploading"||j.status==="queued"||j.status==="paused"?a.jsx(Pl,{label:"Cancel",onClick:()=>u(j.id),children:a.jsx(Ws,{className:"h-3 w-3"})}):null,j.status==="failed"||j.status==="cancelled"||j.status==="succeeded"?a.jsx(Pl,{label:"Remove",onClick:()=>d(j.id),children:"Remove"}):null]})]}),a.jsx("div",{className:"mt-2",children:a.jsx(Jp,{upload:j})}),j.error?a.jsx("p",{className:"mt-2 text-[10px] font-semibold text-danger-500",children:j.error}):null]},j.id))})]}):null]}):null}function Pl({label:e,onClick:t,children:r}){return a.jsx("button",{type:"button",onClick:t,className:"inline-flex h-7 items-center justify-center rounded-lg border border-border bg-card px-2 text-[10px] font-semibold text-muted-foreground transition hover:text-foreground","aria-label":e,title:e,children:r})}function _z({onUploadClick:e,fileInputRef:t,onFileInputChange:r,showConfigurationWarning:i,processingPaused:l,canManageConfigurations:u,canManageSettings:d,onOpenConfigBuilder:h,onOpenSettings:p,uploads:x,onPauseUpload:v,onResumeUpload:b,onRetryUpload:y,onCancelUpload:S,onRemoveUpload:j,onClearCompletedUploads:C}){return a.jsxs("header",{className:"shrink-0 border-b border-border bg-gradient-to-b from-card via-card to-background/60 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4 px-6 py-4",children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-border/80 bg-background text-foreground shadow-sm",children:a.jsx(dp,{className:"h-5 w-5"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Documents"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Shared team workspace for processing."})]})]}),a.jsxs("div",{className:"ml-auto flex flex-wrap items-center gap-3",children:[a.jsx(Cz,{items:x.items,summary:x.summary,onPause:v,onResume:b,onRetry:y,onCancel:S,onRemove:j,onClearCompleted:C}),a.jsxs(Ae,{type:"button",onClick:e,size:"md",className:"gap-2",children:[a.jsx(Nd,{className:"h-4 w-4"}),"Upload"]}),a.jsx("input",{ref:t,type:"file",multiple:!0,className:"hidden",onChange:r})]})]}),l?a.jsx("div",{className:"border-t border-border px-6 py-3",children:a.jsx(Nz,{canManageSettings:d,onOpenSettings:p,configMissing:i})}):i?a.jsx("div",{className:"border-t border-border px-6 py-3",children:a.jsx("div",{className:"space-y-2",children:a.jsx(Sz,{canManageConfigurations:u,onOpenConfigBuilder:h})})}):null]})}function Ez(e){const t=[],r=/@{([^}]+)}/g;let i=0,l;for(;l=r.exec(e);)l.index>i&&t.push(e.slice(i,l.index)),t.push({mention:l[1]}),i=r.lastIndex;return i<e.length&&t.push(e.slice(i)),t}function A0(e,t){const r=e.slice(0,t),i=r.lastIndexOf("@");if(i<0)return null;const l=i===0?" ":r[i-1];if(l!==" "&&l!==`
`&&l!=="	")return null;const u=r.slice(i+1);return u.includes("{")||u.includes("}")||u.length>40||u.includes(" ")?null:{start:i,query:u}}function kz({now:e,comments:t,people:r,currentUserKey:i,currentUserLabel:l,onAdd:u,onEdit:d,onDelete:h}){const p=f.useRef(null),[x,v]=f.useState(""),[b,y]=f.useState(null),[S,j]=f.useState(""),[C,_]=f.useState(null),[N,E]=f.useState(0),D=f.useMemo(()=>{const A=C?.query.trim().toLowerCase()??"",B=r.filter(T=>T.kind==="user");return A?B.filter(T=>T.label.toLowerCase().includes(A)).slice(0,10):B.slice(0,10)},[r,C?.query]);function U(A){const T=Array.from(A.matchAll(/@{([^}]+)}/g)).map($=>$[1]).filter(Boolean),K=new Map;return r.forEach($=>K.set($.label,$)),T.map($=>({key:K.get($)?.key??`label:${$}`,label:$}))}function z(A){const B=p.current;if(!B)return;const T=B.selectionStart??x.length,K=A0(x,T);if(!K)return;const $=x.slice(0,K.start),q=x.slice(T),I=`@{${A}} `,je=`${$}${I}${q}`;v(je),_(null),requestAnimationFrame(()=>{const M=($+I).length;B.focus(),B.setSelectionRange(M,M)})}function V(A){v(A);const T=p.current?.selectionStart??A.length,K=A0(A,T);_(K),E(0)}function R(){const A=x.trim();A&&(u(A,U(A)),v(""),_(null))}return a.jsxs("div",{className:"flex min-h-0 flex-col gap-4",children:[a.jsxs("div",{className:"rounded-2xl border border-border bg-background px-4 py-3 text-xs text-muted-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:"Notes and comments"}),a.jsxs("p",{className:"mt-1",children:["Use ",a.jsx("span",{className:"font-semibold",children:"@"})," to mention teammates (e.g. ",a.jsxs("span",{className:"font-semibold",children:["@","{Jane Doe}"]}),"). Mentions are styled now and can power notifications later."]}),a.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"(For now, notes are stored locally per browser until backend syncing is added.)"})]}),a.jsx("div",{className:"flex-1 overflow-auto rounded-2xl border border-border bg-card",children:t.length===0?a.jsx("div",{className:"px-4 py-6 text-sm text-muted-foreground",children:"No notes yet. Add the first note to capture context for the team."}):a.jsx("div",{className:"divide-y divide-border",children:t.slice().sort((A,B)=>A.createdAt-B.createdAt).map(A=>{const B=A.authorKey===i,T=b===A.id;return a.jsxs("div",{className:"px-4 py-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:A.authorLabel}),a.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[Po(e,A.createdAt),A.updatedAt!==A.createdAt?" - edited":""]})]}),B?a.jsx("div",{className:"flex items-center gap-2",children:T?null:a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{y(A.id),j(A.body)},className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Edit"}),a.jsx("button",{type:"button",onClick:()=>h(A.id),className:"text-xs font-semibold text-danger-600 hover:text-danger-700",children:"Delete"})]})}):null]}),T?a.jsxs("div",{className:"mt-3",children:[a.jsx("textarea",{value:S,onChange:K=>j(K.target.value),className:"w-full rounded-xl border border-border bg-card px-3 py-2 text-sm outline-none focus:border-brand-300",rows:3}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(Ae,{type:"button",size:"sm",onClick:()=>{const K=S.trim();K&&(d(A.id,K,U(K)),y(null),j(""))},children:"Save"}),a.jsx(Ae,{type:"button",size:"sm",variant:"ghost",onClick:()=>{y(null),j("")},children:"Cancel"})]})]}):a.jsx("div",{className:"mt-3 whitespace-pre-wrap text-sm text-foreground",children:Ez(A.body).map((K,$)=>typeof K=="string"?a.jsx("span",{children:K},$):a.jsxs("span",{className:"rounded-md bg-brand-50 px-1.5 py-0.5 font-semibold text-brand-700 dark:bg-brand-500/20 dark:text-brand-200",title:"Mention (notifications coming soon)",children:["@",K.mention]},$))})]},A.id)})})}),a.jsxs("div",{className:"relative rounded-2xl border border-border bg-card px-4 py-4",children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"Add a note"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("textarea",{ref:p,value:x,onChange:A=>V(A.target.value),onKeyDown:A=>{if(C&&D.length>0){if(A.key==="ArrowDown"&&(A.preventDefault(),E(B=>Math.min(D.length-1,B+1))),A.key==="ArrowUp"&&(A.preventDefault(),E(B=>Math.max(0,B-1))),A.key==="Enter"&&!A.shiftKey){A.preventDefault();const B=D[N];B&&z(B.label);return}A.key==="Escape"&&_(null)}(A.metaKey||A.ctrlKey)&&A.key==="Enter"&&(A.preventDefault(),R())},placeholder:`Write a note... (author: ${l})`,className:"w-full rounded-xl border border-border bg-card px-3 py-2 text-sm outline-none focus:border-brand-300",rows:3}),C&&D.length>0?a.jsxs("div",{className:"absolute bottom-[5.5rem] left-4 right-4 z-20 rounded-2xl border border-border bg-card shadow-lg",children:[a.jsx("div",{className:"border-b border-border px-3 py-2 text-[11px] text-muted-foreground",children:"Mention someone (Enter to select, Esc to close)"}),a.jsx("div",{className:"max-h-56 overflow-auto p-2",children:D.map((A,B)=>a.jsxs("button",{type:"button",onMouseDown:T=>{T.preventDefault(),z(A.label)},className:te("flex w-full items-center justify-between rounded-xl px-3 py-2 text-left text-sm transition",B===N?"bg-brand-50 dark:bg-brand-500/20":"hover:bg-background dark:hover:bg-muted/40"),children:[a.jsx("span",{className:"font-semibold text-foreground",children:A.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:A.kind==="user"?"Member":""})]},A.key))})]}):null,a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Tip: Ctrl/Cmd+Enter to submit"}),a.jsx(Ae,{type:"button",size:"sm",onClick:R,disabled:!x.trim(),children:"Post note"})]})]})]})]})}function R0({workspaceId:e,document:t,now:r,activeSheetId:i,onSheetChange:l,runs:u,runsLoading:d,selectedRunId:h,onSelectRun:p,activeRun:x,runLoading:v,runMetrics:b,outputUrl:y,onDownloadOutput:S,onDownloadOriginal:j,onReprocess:C,onArchive:_,onRestore:N,processingPaused:E,people:D,currentUserKey:U,currentUserLabel:z,onAssign:V,onPickUp:R,onCopyLink:A,comments:B,onAddComment:T,onEditComment:K,onDeleteComment:$,onTagsChange:q,workbook:I,workbookLoading:je,workbookError:M,onClose:H,detailsRequestId:ee,detailsRequestTab:be,onDetailsRequestHandled:de}){const[L,W]=f.useState(!1),[pe,G]=f.useState("details"),ie=en();f.useEffect(()=>{W(!1),G("details")},[t?.id]),f.useEffect(()=>{const We=st=>{if(st.key!=="Escape")return;const P=st.target;P&&(P.tagName==="INPUT"||P.tagName==="TEXTAREA"||P.isContentEditable)||(st.stopPropagation(),H())};return window.addEventListener("keydown",We),()=>window.removeEventListener("keydown",We)},[H]);const J=I?.sheets??[],ne=i??J[0]?.name??"",oe=J.find(We=>We.name===ne)??J[0],he=f.useMemo(()=>u.slice().sort((We,st)=>Date.parse(st.created_at)-Date.parse(We.created_at)),[u]),ue=x??(h?he.find(We=>We.id===h)??null:null)??he[0]??null,Oe=ue?.status==="succeeded"&&!!y,Ge=ue?`/workspaces/${e}/runs?run=${ue.id}`:null,Se=zz(ue),ze=!!(t?.record&&y),Pe=!!t?.record,Me=!!(t?.record&&x?.configuration_id&&!E),Be=We=>{G(We),W(!0)};return f.useEffect(()=>{!ee||ee!==t?.id||(G(be??"details"),W(!0),de?.())},[ee,be,t?.id,de]),a.jsxs("div",{className:"relative flex min-h-0 w-full flex-col",children:[a.jsx("div",{className:"px-6 py-2",children:t?a.jsx("div",{className:"relative overflow-hidden rounded-2xl border border-border bg-card shadow-sm",children:a.jsxs("div",{className:"relative bg-background/40",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-border bg-card/90 px-4 py-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Ae,{type:"button",size:"sm",onClick:()=>S(t),disabled:!ze,title:ze?"Download output":"Output not ready",children:"Download output"}),a.jsx(Ae,{type:"button",size:"sm",variant:"secondary",onClick:()=>j(t),disabled:!Pe,title:Pe?"Download original":"Original unavailable",children:"Download original"}),a.jsx(T1,{ariaLabel:"Copy link",title:"Copy link",onClick:()=>A(t),disabled:!t.record,children:a.jsx(fp,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[b||Se?a.jsx(Lz,{metrics:b,runtime:Se}):null,he.length>1?a.jsx(Bi,{value:h??he[0]?.id??"",onChange:We=>p(We.target.value),className:"h-7 min-w-[9rem] text-[11px] shadow-sm","aria-label":"Select run",children:he.map(We=>a.jsxs("option",{value:We.id,children:[Iu(We.id),"  ",$z(We.status)]},We.id))}):null,a.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-muted-foreground transition hover:text-foreground disabled:cursor-not-allowed disabled:opacity-60",onClick:()=>{Ge&&ie(Ge)},disabled:!Ge,"aria-label":"Open run details",title:"Open run details",children:["Run details",a.jsx(TD,{className:"h-3 w-3"})]}),a.jsx(Bz,{document:t,canDownloadOutput:ze,canDownloadOriginal:Pe,canReprocess:Me,onDownloadOutput:S,onDownloadOriginal:j,onCopyLink:A,onReprocess:C,onArchive:_,onRestore:N,onOpenDetails:()=>Be("details"),onOpenNotes:()=>Be("notes"),onClosePreview:H})]})]}),Oe?y?je?a.jsx(Ti,{title:"Loading preview",children:"Fetching the processed workbook for review."}):M?a.jsx(Ti,{title:"Preview unavailable",children:"The XLSX is ready to download, but we could not render the preview."}):oe?a.jsxs("div",{children:[a.jsxs(Ed,{value:ne,onValueChange:l,children:[J.map(We=>a.jsx(ei,{value:We.name,className:"max-h-[30rem] overflow-auto",children:a.jsx(qz,{sheet:We})},We.name)),a.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2 border-t border-border bg-card px-3 py-1",children:a.jsx(kd,{className:"flex flex-wrap items-center gap-1 overflow-x-auto text-[11px] text-muted-foreground",children:J.map(We=>a.jsx(nc,{value:We.name,className:te("rounded-t-md border border-transparent px-3 py-1 font-semibold transition",ne===We.name?"-mt-px border-border bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:We.name},We.name))})})]}),oe.truncatedRows||oe.truncatedColumns?a.jsxs("div",{className:"border-t border-border bg-card px-4 py-2 text-[11px] text-muted-foreground",children:["Showing first ",Math.min(oe.totalRows,Bm)," rows",oe.truncatedColumns?` and ${oe.headers.length} columns`:"","."]}):null]}):a.jsx(Ti,{title:"Preview unavailable",children:"The processed XLSX is ready to download, but we cannot render a preview here."}):a.jsx(Ti,{title:"Output link unavailable",children:"We could not load the processed output link yet. Try again in a moment."}):ue?.status==="failed"?a.jsx(Ti,{title:ue.failure_message??"Run failed",children:ue.failure_stage??"We could not complete normalization for this file."}):v?a.jsx(Ti,{title:"Loading run output",children:"Fetching the latest run status."}):a.jsx(Ti,{title:Dz(t),children:t.stage??"Preparing normalized output"})]})}):a.jsxs("div",{className:"flex min-h-[14rem] flex-col items-center justify-center rounded-2xl border border-dashed border-border bg-background px-6 text-center text-sm text-muted-foreground",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Preview is ready when you are."}),a.jsx("p",{children:"Select a document from the list to see its processed output."})]})}),L&&t?a.jsx(Pz,{tab:pe,onTabChange:G,document:t,workspaceId:e,now:r,people:D,currentUserKey:U,currentUserLabel:z,onAssign:V,onPickUp:R,onTagsChange:q,comments:B,onAddComment:T,onEditComment:K,onDeleteComment:$,onClose:()=>W(!1)}):null]})}function Ti({title:e,children:t}){return a.jsxs("div",{className:"flex flex-col gap-2 px-4 py-4 text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:e}),a.jsx("p",{children:t})]})}function Dz(e){return e.queue_state==="waiting"&&e.queue_reason==="processing_paused"?"Processing paused":e.queue_state==="waiting"?"Waiting to start":e.queue_state==="queued"||e.status==="queued"?"Queued for processing":(e.status==="processing","Processing output")}const Tz=new Intl.NumberFormat;function Hu(e){return typeof e!="number"||Number.isNaN(e)?null:Tz.format(e)}function Az(e,t){return t===1?e:`${e}s`}function Rz(e){const t=e.validation_issues_total;if(typeof t!="number")return null;const r=Hu(t);if(!r)return null;const i=e.validation_max_severity,l=i==="error"||i==="warning"||i==="info"?i:"issue";return t===0?r:`${r} ${Az(l,t)}`}function Mz(e){const t=e.column_count_mapped,r=e.column_count_unmapped;if(typeof t=="number"||typeof r=="number"){const u=typeof t=="number"?Hu(t):null,d=typeof r=="number"?Hu(r):null,h=[];if(u&&h.push(`${u} mapped`),d&&h.push(`${d} unmapped`),h.length>0)return`Columns ${h.join(" / ")}`}const i=e.column_count_total;if(typeof i!="number")return null;const l=Hu(i);return l?`Columns ${l}`:null}function Oz(e){const t=Math.floor(e/60),r=Math.round(e%60);return t<=0?`${r}s`:`${t}m ${r}s`}function zz(e){if(!e)return null;const t=e.duration_seconds;return typeof t!="number"||Number.isNaN(t)?null:`Runtime ${Oz(t)}`}function Lz({metrics:e,runtime:t}){const r=e?Rz(e):null,i=e?Mz(e):null,l=[r?`Validation ${r}`:null,i,t].filter(Boolean);return l.length===0?null:a.jsx("span",{className:"hidden lg:inline-flex items-center text-[11px] text-muted-foreground",children:l.join(" | ")})}const Uz={queued:{label:"Queued"},running:{label:"Running"},succeeded:{label:"Succeeded"},failed:{label:"Failed"},cancelled:{label:"Cancelled"}};function $z(e){return Uz[e]?.label??e}function qz({sheet:e}){const t=e.headers.length;return a.jsxs("table",{className:"min-w-full w-max text-left text-xs",children:[a.jsx("thead",{className:"sticky top-0 z-10 border-b border-border bg-background/95 text-muted-foreground backdrop-blur",children:a.jsx("tr",{children:Array.from({length:t}).map((r,i)=>{const u=(e.headers[i]??"")||N1(i);return a.jsx("th",{className:"max-w-[22rem] truncate px-3 py-2 text-[11px] font-semibold",title:u,children:u},`${e.name}-h-${i}`)})})}),a.jsx("tbody",{className:"bg-card",children:e.rows.map((r,i)=>a.jsx("tr",{className:te("border-t border-border",i%2===1&&"bg-background/40"),children:Array.from({length:t}).map((l,u)=>{const d=r[u]??"";return a.jsx("td",{className:"max-w-[22rem] truncate px-3 py-2 text-foreground",title:d,children:d},`${e.name}-${i}-${u}`)})},`${e.name}-${i}`))})]})}function T1({children:e,onClick:t,disabled:r,ariaLabel:i,title:l}){return a.jsx("button",{type:"button",onClick:t,disabled:r,"aria-label":i,title:l??i,className:te("inline-flex h-9 w-9 items-center justify-center rounded-md border border-transparent bg-transparent text-muted-foreground transition","hover:border-border hover:bg-background hover:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-60 disabled:hover:bg-card disabled:hover:text-muted-foreground"),children:e})}function Bz({document:e,canDownloadOutput:t,canDownloadOriginal:r,canReprocess:i,onDownloadOutput:l,onDownloadOriginal:u,onCopyLink:d,onReprocess:h,onArchive:p,onRestore:x,onOpenDetails:v,onOpenNotes:b,onClosePreview:y}){const[S,j]=f.useState(!1),[C,_]=f.useState(null),N=e.status==="archived",E=!!e.record;return a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-border bg-card/90 text-muted-foreground shadow-sm backdrop-blur transition hover:bg-background",onClick:D=>{D.stopPropagation(),_({x:D.clientX,y:D.clientY}),j(!0)},"aria-label":"Preview actions",children:a.jsx(Jw,{className:"h-4 w-4"})}),a.jsx(kr,{open:S,position:C,onClose:()=>j(!1),appearance:"light",items:[{id:"open-details",label:"Open details",onSelect:v,icon:a.jsx(mp,{className:"h-4 w-4"})},{id:"open-notes",label:"Open notes",onSelect:b,icon:a.jsx(tj,{className:"h-4 w-4"})},{id:"download-output",label:"Download output",onSelect:()=>l(e),disabled:!t,icon:a.jsx(tc,{className:"h-4 w-4"}),dividerAbove:!0},{id:"download-original",label:"Download original",onSelect:()=>u(e),disabled:!r,icon:a.jsx(tc,{className:"h-4 w-4"})},{id:"copy-link",label:"Copy link",onSelect:()=>d(e),disabled:!e.record,icon:a.jsx(fp,{className:"h-4 w-4"})},{id:"reprocess",label:"Reprocess",onSelect:()=>h(e),disabled:!i,icon:a.jsx(Cd,{className:"h-4 w-4"})},{id:N?"restore":"archive",label:N?"Restore document":"Archive document",onSelect:()=>N?x(e):p(e),disabled:!E,icon:N?a.jsx(ij,{className:"h-4 w-4"}):a.jsx(oj,{className:"h-4 w-4"}),dividerAbove:!0},{id:"close-preview",label:"Close preview",onSelect:y,icon:a.jsx(Ws,{className:"h-4 w-4"}),dividerAbove:!1}]})]})}function Pz({tab:e,onTabChange:t,document:r,workspaceId:i,now:l,people:u,currentUserKey:d,currentUserLabel:h,onAssign:p,onPickUp:x,onTagsChange:v,comments:b,onAddComment:y,onEditComment:S,onDeleteComment:j,onClose:C}){return a.jsxs("div",{className:"absolute inset-0 z-20",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 bg-overlay/10",onClick:C,role:"presentation","aria-hidden":"true"}),a.jsxs("div",{className:"absolute inset-y-0 right-0 flex w-full max-w-[26rem] flex-col border-l border-border bg-card shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Document details",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Details"}),a.jsx("p",{className:"truncate text-[11px] text-muted-foreground",title:r.name,children:r.name})]}),a.jsx(T1,{ariaLabel:"Close details",title:"Close",onClick:C,children:a.jsx(Ws,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"border-b border-border bg-background px-3 py-2",children:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:["details","notes"].map(_=>a.jsx("button",{type:"button",onClick:()=>t(_),className:te("rounded-full px-3 py-1 font-semibold transition",e===_?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),"aria-pressed":e===_,children:_==="details"?"Details":`Notes${r.comment_count?` (${r.comment_count})`:""}`},_))})}),a.jsx("div",{className:"flex-1 overflow-auto px-4 py-4",children:e==="details"?a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-border bg-background",children:a.jsx(mp,{className:"h-4 w-4 text-muted-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Assignee"}),a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:r.assignee_label??"Unassigned"})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[r.assignee_key?r.assignee_key!==d?a.jsx(Ae,{type:"button",size:"sm",variant:"secondary",onClick:()=>x(r.id),className:"text-xs",children:"Assign to me"}):null:a.jsx(Ae,{type:"button",size:"sm",onClick:()=>x(r.id),className:"text-xs",children:"Pick up"}),a.jsx(Od,{people:u,value:[r.assignee_key??Xp()],onChange:_=>p(r.id,Yp(_)),placeholder:"Assign",includeUnassigned:!0,buttonClassName:"min-w-0 max-w-[16rem] text-xs"})]})]}),a.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground",children:"Metadata"}),a.jsxs("span",{className:"text-[11px] text-muted-foreground",children:["Updated ",Po(l,r.updated_at)]})]}),a.jsxs("dl",{className:"mt-4 grid gap-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Uploader"}),a.jsx("dd",{className:"font-semibold text-foreground",children:r.uploader_label??"Unassigned"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Size"}),a.jsx("dd",{className:"font-semibold text-foreground",children:r.size_label})]})]})]}),a.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground",children:"Tags"}),a.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Shared"})]}),a.jsx("div",{className:"mt-3",children:a.jsx(ic,{workspaceId:i,selected:r.tags,onToggle:_=>{const N=r.tags.includes(_)?r.tags.filter(E=>E!==_):[...r.tags,_];v(r.id,N)},placeholder:r.tags.length?"Edit tags":"Add tags",disabled:!r.record})})]}),a.jsxs("section",{className:"rounded-2xl border border-border bg-background px-4 py-3 text-xs text-muted-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:"Tip"}),a.jsxs("p",{className:"mt-1",children:["Keep the preview clean: use ",a.jsx("span",{className:"font-semibold",children:"Notes"})," for context, and ",a.jsx("span",{className:"font-semibold",children:"Tags"})," for retrieval."]})]})]}):a.jsx(kz,{now:l,comments:b,people:u,currentUserKey:d,currentUserLabel:h,onAdd:(_,N)=>y(r.id,_,N),onEdit:(_,N,E)=>S(r.id,_,N,E),onDelete:_=>j(r.id,_)})})]})]})}function Fz({open:e,onClose:t,onSave:r}){const[i,l]=f.useState(""),u=f.useId();return f.useEffect(()=>{e&&l("")},[e]),e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-overlay/30 px-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-border bg-card p-5 shadow-xl",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Save view"}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Save your current filters as a reusable view."}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:u,className:"text-xs font-semibold text-muted-foreground",children:"View name"}),a.jsx(kt,{id:u,value:i,onChange:d=>l(d.target.value),placeholder:"e.g. My triage queue",className:"mt-2"})]}),a.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[a.jsx(Ae,{type:"button",variant:"ghost",onClick:t,children:"Cancel"}),a.jsx(Ae,{type:"button",onClick:()=>{const d=i.trim();d&&(r(d),l(""),t())},disabled:!i.trim(),children:"Save"})]})]})}):null}function Iz({open:e,files:t,onConfirm:r,onCancel:i,processingPaused:l,configMissing:u}){const d=f.useRef(null),[h,p]=f.useState([]),[x,v]=f.useState({}),[b,y]=f.useState("active"),[S,j]=f.useState([]),[C,_]=f.useState(!1);f.useEffect(()=>{if(!e){p([]);return}p(t.map(q=>({id:kO(),file:q,type:EO(q.name,q.type)})))},[t,e]),f.useEffect(()=>{e&&(y("active"),j([]),_(!1),v({}))},[e,h.length]),f.useEffect(()=>{if(!e||h.length===0)return;if(h.length!==1){v({});return}const q=h[0];if(!Lu(q.type)){v({[q.id]:{status:"ready",names:[],activeName:null}});return}let I=!1;return v({[q.id]:{status:"loading",names:[],activeName:null}}),(async()=>{try{const M=await Hz(q.file);if(I)return;v({[q.id]:{status:"ready",names:M.names,activeName:M.activeName}})}catch(M){if(I)return;v({[q.id]:{status:"error",names:[],activeName:null,error:M instanceof Error?M.message:"Unable to read worksheets."}})}})(),()=>{I=!0}},[h,e]),f.useEffect(()=>{if(!e)return;const q=I=>{if(I.key==="Escape"&&i(),I.key==="Tab"){const je=d.current;if(!je)return;const M=Array.from(je.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(be=>!be.hasAttribute("disabled"));if(M.length===0)return;const H=M.indexOf(document.activeElement),ee=I.shiftKey?H<=0?M.length-1:H-1:H===M.length-1?0:H+1;M[ee]?.focus(),I.preventDefault()}};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[i,e]),f.useEffect(()=>{if(!e)return;const{body:q}=document,I=q.style.overflow;return q.style.overflow="hidden",()=>{q.style.overflow=I}},[e]),f.useEffect(()=>{if(!e)return;d.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus({preventScroll:!0})},[e]);const N=h.length===1,E=h.filter(q=>Lu(q.type)).length,D=N?h[0]:null,U=D?x[D.id]:null,z=U?.activeName??null,V=U?.names??[],R=U?.status??"idle",A=!!(D&&Lu(D.type));f.useEffect(()=>{e&&b==="custom"&&(S.length>0||z&&j([z]))},[z,e,S.length,b]);const B=f.useMemo(()=>h.length===0?!0:N?!A||b==="all"?!1:b==="custom"?S.length===0:!z||R!=="ready":!1,[z,A,N,h.length,S.length,b,R]),T=f.useMemo(()=>l?"Processing is paused. Uploads will be stored until processing resumes.":u?"No active configuration yet. Uploads will process once one is enabled.":"Uploads will process automatically after they finish.",[u,l]);if(!e||typeof document>"u")return null;const K=()=>{if(B||h.length===0)return;const q=h.map(I=>Lu(I.type)?N?b==="custom"&&S.length>0?{file:I.file,runOptions:{input_sheet_names:S,active_sheet_only:!1}}:b==="active"&&z?{file:I.file,runOptions:{active_sheet_only:!0}}:{file:I.file}:C?{file:I.file,runOptions:{active_sheet_only:!0}}:{file:I.file}:{file:I.file});r(q)},$=a.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-overlay/60 px-4 py-6",role:"presentation",onMouseDown:q=>{q.target===q.currentTarget&&i()},children:a.jsxs("div",{ref:d,role:"dialog","aria-modal":"true","aria-labelledby":"upload-preflight-title",className:"flex w-full max-w-2xl max-h-[90vh] flex-col overflow-hidden rounded-2xl border border-border bg-card p-6 shadow-2xl",children:[a.jsxs("header",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:"Upload"}),a.jsx("h2",{id:"upload-preflight-title",className:"text-xl font-semibold text-foreground",children:"Choose sheets before upload"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:N?"Pick the sheets to process for this file.":"Batch uploads use a shared sheet rule."})]}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Close dialog",children:a.jsx(Ws,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"mt-6 flex min-h-0 flex-1 flex-col gap-6",children:[a.jsxs("section",{className:"flex min-h-0 flex-1 flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground",children:[h.length," file",h.length===1?"":"s"," ready"]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Total size ",qo(h.reduce((q,I)=>q+I.file.size,0))]})]}),a.jsx("div",{className:"flex-1 min-h-0 space-y-2 overflow-auto pr-1",children:h.map(q=>a.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-border/80 bg-muted/30 px-3 py-2",children:[a.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg border border-border bg-card text-[10px] font-semibold text-muted-foreground",children:Qp(q.type)}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"truncate text-sm font-medium text-foreground",children:q.file.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:qo(q.file.size)})]}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>p(I=>I.filter(je=>je.id!==q.id)),"aria-label":`Remove ${q.file.name}`,children:a.jsx(hp,{className:"h-4 w-4"})})]},q.id))})]}),a.jsx("section",{className:"space-y-4",children:N?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Sheet selection"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:A?"Active sheet is recommended for most uploads.":"Sheet selection is not available for this file type."})]}),A&&R==="loading"?a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground border-t-transparent"}),"Reading worksheet names..."]}):null,A&&R==="error"?a.jsx(Lt,{tone:"warning",heading:"Worksheet metadata unavailable",children:U?.error??"We could not read worksheets from this file."}):null,A?a.jsxs(a.Fragment,{children:[a.jsxs("fieldset",{className:"space-y-2","aria-label":"Sheet selection mode",children:[a.jsx("legend",{className:"sr-only",children:"Sheet selection mode"}),[{value:"active",title:"Active sheet",description:z?`Active sheet: ${z}`:"Active sheet not detected",disabled:R!=="ready"||!z},{value:"all",title:"All sheets",description:"Process every sheet in the workbook.",disabled:!1},{value:"custom",title:"Choose sheets",description:"Select specific sheets from the list.",disabled:R==="error"||V.length===0}].map(q=>a.jsxs("label",{className:te("flex cursor-pointer items-start gap-3 rounded-xl border p-3 transition",b===q.value?"border-brand-500 bg-brand-500/10":"border-border bg-card hover:border-muted-foreground/40",q.disabled&&"cursor-not-allowed opacity-60"),children:[a.jsx("input",{type:"radio",name:"sheet-mode",className:"mt-1 h-4 w-4 border-border text-brand-600 focus:ring-brand-500",checked:b===q.value,onChange:()=>y(q.value),disabled:q.disabled}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:q.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:q.description})]})]},q.value))]}),b==="custom"?a.jsxs("div",{className:"rounded-xl border border-border bg-muted/30 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:S.length===0?"Select at least one sheet.":`${S.length} sheet${S.length===1?"":"s"} selected`}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>j(V),disabled:V.length===0,children:"Select all"}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>j([]),children:"Clear"})]})]}),a.jsx("div",{className:"mt-3 max-h-48 space-y-1 overflow-auto rounded-lg border border-border bg-card/60 p-2",children:V.map(q=>{const I=S.includes(q),je=z===q;return a.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-foreground hover:bg-muted",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border text-brand-600 focus:ring-brand-500",checked:I,onChange:()=>j(M=>M.includes(q)?M.filter(H=>H!==q):[...M,q])}),a.jsxs("span",{className:"flex-1 truncate",children:[q,je?" (active)":""]})]},q)})})]}):null]}):a.jsx("div",{className:"rounded-lg border border-border/70 bg-muted/40 p-3 text-xs text-muted-foreground",children:"This file will be processed as a single sheet."})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Batch rules"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sheet-by-sheet selection is only available for single uploads."})]}),a.jsxs("label",{className:te("flex items-center justify-between gap-4 rounded-xl border border-border bg-card px-4 py-3",E===0&&"opacity-60"),children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Process only the active sheet"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies to Excel files in this upload."})]}),a.jsxs("span",{className:"relative inline-flex items-center",children:[a.jsx("input",{type:"checkbox",className:"peer sr-only",checked:C,disabled:E===0,onChange:q=>_(q.target.checked)}),a.jsx("span",{className:"h-5 w-9 rounded-full bg-muted transition peer-checked:bg-brand-600 peer-disabled:cursor-not-allowed"}),a.jsx("span",{className:"absolute left-0.5 h-4 w-4 rounded-full bg-white transition peer-checked:translate-x-4"})]})]}),C?a.jsx("p",{className:"text-xs text-muted-foreground",children:"Active sheet selection is resolved during processing."}):null]})})]}),a.jsxs("footer",{className:"mt-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:T}),a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(Ae,{variant:"ghost",onClick:i,children:"Cancel"}),a.jsxs(Ae,{onClick:K,disabled:B,className:"gap-2",children:[a.jsx(Nd,{className:"h-4 w-4"}),"Upload ",h.length===1?"file":"files"]})]})]})]})});return Ts.createPortal($,document.body)}function Lu(e){return e==="xlsx"||e==="xls"}async function Hz(e){const t=await e.arrayBuffer(),i=(await Gm(()=>import("./xlsx-DGuHH-KN.js"),[])).read(t,{type:"array"}),l=i.SheetNames??[],u=Vz(i,l);return{names:l,activeName:u}}function Vz(e,t){const r=e.Workbook?.Views?.[0]?.activeTab;return typeof r=="number"&&r>=0&&r<t.length?t[r]:t[0]??null}function Qz(e){const t=Ft();return Pn({mutationFn:r=>r1(e,r),async onSuccess(){await t.invalidateQueries({queryKey:_n.root(e)})}})}const Zz=3,Kz=10*1024*1024,Gz=5*1024*1024;function Wz({workspaceId:e,concurrency:t=Zz,sessionThresholdBytes:r=Kz}){const[i,l]=f.useState([]),u=f.useRef(new Set),d=f.useRef(new Map),h=f.useRef(new Map),p=f.useCallback(N=>{if(!N.length)return[];const E=Date.now(),D=N.map((U,z)=>({id:e5(E,z),file:U.file,status:"queued",runOptions:U.runOptions,progress:{loaded:0,total:Math.max(U.file.size,0),percent:0}}));return l(U=>[...U,...D]),D},[]),x=f.useCallback(N=>{h.current.set(N,"pause");const E=d.current.get(N);E&&E(),l(D=>D.map(U=>U.id===N&&U.status==="uploading"?{...U,status:"paused"}:U))},[]),v=f.useCallback(N=>{l(E=>E.map(D=>D.id!==N||D.status!=="paused"?D:D.mode==="simple"?{...D,status:"queued",progress:ud(D.file)}:{...D,status:"queued"}))},[]),b=f.useCallback(N=>{l(E=>E.map(D=>D.id!==N||D.status!=="failed"?D:D.mode==="simple"?{...D,status:"queued",progress:ud(D.file),error:void 0,response:void 0}:{...D,status:"queued",error:void 0}))},[]),y=f.useCallback(N=>{h.current.set(N,"cancel");const E=d.current.get(N);E&&E(),l(U=>U.map(z=>z.id===N&&z.status!=="succeeded"?{...z,status:"cancelled"}:z));const D=i.find(U=>U.id===N);D?.sessionId&&s3(e,D.sessionId).catch(()=>null)},[i,e]),S=f.useCallback(N=>{y(N),l(E=>E.filter(D=>D.id!==N))},[y]),j=f.useCallback(()=>{l(N=>N.filter(E=>!Jz(E.status)))},[]),C=f.useCallback((N,E)=>{l(D=>D.map(U=>U.id===N?{...U,response:E}:U))},[]);f.useEffect(()=>{if(!e)return;const N=i.filter(U=>U.status==="uploading").length;if(N>=t)return;const E=t-N,D=i.filter(U=>U.status==="queued").slice(0,E);for(const U of D){if(u.current.has(U.id))continue;u.current.add(U.id);const z=U.mode??(U.file.size>=r?"session":"simple");l(A=>A.map(B=>B.id===U.id?{...B,status:"uploading",mode:z}:B));const V=new AbortController;d.current.set(U.id,()=>V.abort()),(z==="session"?n5(U,{workspaceId:e,controller:V,updateItem:A=>l(B=>B.map(T=>T.id===U.id?{...T,...A}:T))}):t5(U,{workspaceId:e,controller:V,onProgress:A=>l(B=>B.map(T=>T.id===U.id?{...T,progress:Yz(T.file,A)}:T))})).then(A=>{l(B=>B.map(T=>T.id===U.id?{...T,status:"succeeded",progress:Xz(T.file),response:A,error:void 0}:T))}).catch(A=>{const B=h.current.get(U.id),K=(A instanceof Error?A.name:"")==="AbortError";if(K&&B)return;const $=A instanceof Error?A.message:"Upload failed.";l(q=>q.map(I=>I.id===U.id?{...I,status:K?"cancelled":"failed",error:$}:I))}).finally(()=>{u.current.delete(U.id),d.current.delete(U.id),h.current.delete(U.id)})}},[t,i,r,e]);const _=f.useMemo(()=>{let N=0,E=0,D=0,U=0,z=0,V=0,R=0,A=0;for(const $ of i)switch(N+=Math.max($.file.size,0),E+=$.progress.loaded,$.status){case"queued":D+=1;break;case"uploading":U+=1;break;case"paused":z+=1;break;case"succeeded":V+=1;break;case"failed":R+=1;break;case"cancelled":A+=1;break}const B=V+R+A,T=D+U+z,K=N>0?Math.min(100,Math.round(E/N*100)):0;return{totalCount:i.length,queuedCount:D,uploadingCount:U,pausedCount:z,succeededCount:V,failedCount:R,cancelledCount:A,completedCount:B,totalBytes:N,uploadedBytes:E,percent:K,inFlightCount:T}},[i]);return{items:i,summary:_,enqueue:p,pause:x,resume:v,retry:b,cancel:y,remove:S,clearCompleted:j,updateResponse:C}}function Yz(e,t){const r=t.total??Math.max(e.size,0),i=Math.max(t.loaded,0),l=r>0?Math.min(100,Math.round(i/r*100)):0;return{loaded:i,total:r,percent:l}}function ud(e){const t=Math.max(e.size,0);return{loaded:0,total:t,percent:(t>0,0)}}function Xz(e){const t=Math.max(e.size,0);return{loaded:t,total:t,percent:t>0?100:0}}function Jz(e){return e==="succeeded"||e==="failed"||e==="cancelled"}function e5(e,t){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`upload-${e}-${t}-${Math.random().toString(36).slice(2,9)}`}async function t5(e,t){const r=X4(t.workspaceId,e.file,{onProgress:t.onProgress,runOptions:e.runOptions});t.controller.signal.addEventListener("abort",()=>r.abort(),{once:!0});const i=await r.promise;if(!i.data)throw new Error("Expected upload response.");return i.data}async function n5(e,t){const r=Math.max(e.file.size,0);let i=e.sessionId,l=e.chunkSizeBytes??Gz,u=Math.min(e.progress.loaded,r);if(i)try{const h=await t3(t.workspaceId,i,t.controller.signal);u=Math.min(h.received_bytes??u,r),t.updateItem({sessionId:h.upload_session_id,nextExpectedRanges:h.next_expected_ranges,progress:{loaded:u,total:r,percent:r>0?Math.min(100,Math.round(u/r*100)):0}})}catch(h){if(h instanceof Ht&&(h.status===404||h.status===410))i=void 0,u=0,t.updateItem({sessionId:void 0,nextExpectedRanges:void 0,progress:ud(e.file)});else throw h}if(!i){const h=await J4(t.workspaceId,{filename:e.file.name,byte_size:r,content_type:e.file.type||void 0,run_options:e.runOptions},t.controller.signal);i=h.upload_session_id,l=h.chunk_size_bytes??l,u=0,t.updateItem({sessionId:i,chunkSizeBytes:l,nextExpectedRanges:h.next_expected_ranges,progress:ud(e.file)})}for(;u<r;){if(t.controller.signal.aborted)throw new DOMException("Aborted","AbortError");const h=Math.min(u+l-1,r-1),p=e.file.slice(u,h+1),x=await e3(t.workspaceId,i,{start:u,end:h,total:r,body:p,signal:t.controller.signal});u=h+1,t.updateItem({nextExpectedRanges:x.next_expected_ranges,progress:{loaded:u,total:r,percent:r>0?Math.min(100,Math.round(u/r*100)):0}})}return await n3(t.workspaceId,i,t.controller.signal)}function s5(e,t,r){const i=t.document_id??t.row?.id;if(!i)return{data:e,updatesAvailable:!1,applied:!1};let l=!1,u=!1,d=!1;const h=e.pages.map(p=>{if(!p.items?.length)return p;const x=p.items.findIndex(v=>v.id===i);if(x===-1)return p;if(l=!0,t.type==="document.deleted")return d=!0,{...p,items:p.items.filter(v=>v.id!==i)};if(t.type==="document.upsert"&&t.row){const v=t.row;if(!M0(v,r.filters,r.search))return d=!0,u=!0,{...p,items:p.items.filter(S=>S.id!==i)};const b=p.items[x];r5(b,v,r.sort)&&(u=!0);const y=p.items.slice();return y[x]=v,d=!0,{...p,items:y}}return p});return!l&&t.type==="document.upsert"&&t.row&&M0(t.row,r.filters,r.search)&&(u=!0),!l&&!d?{data:e,updatesAvailable:u,applied:!1}:{data:{...e,pages:h},updatesAvailable:u,applied:d}}function M0(e,t,r){const i=r.trim().toLowerCase();if(i.length>=2&&![e.name,e.uploader_label??"",(e.tags??[]).join(" "),e.file_type].join(" ").toLowerCase().includes(i))return!1;const u=t.statuses;if(u.length>0){const d=e.status??"queued";if(!u.includes(d))return!1}if(t.fileTypes.length>0&&!t.fileTypes.includes(e.file_type))return!1;if(t.tags.length>0){const d=e.tags??[];if(t.tagMode==="all"){if(!t.tags.every(h=>d.includes(h)))return!1}else if(!t.tags.some(h=>d.includes(h)))return!1}if(t.assignees.length>0){const d=t.assignees.includes(Wr),h=e.assignee_key;if(h){if(!t.assignees.includes(h))return!1}else if(!d)return!1}return!0}function r5(e,t,r){if(!r)return!1;switch(r.replace(/^-/,"")){case"activity_at":{const l=Oo(e.activity_at??e.updated_at),u=Oo(t.activity_at??t.updated_at);return l!==u}case"created_at":{const l=Oo(e.created_at),u=Oo(t.created_at);return l!==u}case"display_status":return e.status!==t.status;default:return!1}}const a5=["queued","processing","ready","failed","archived"],ai={views:e=>`ade.documents.views.${e}`,viewsLegacy:e=>`ade.documents.v10.views.${e}`,comments:e=>`ade.documents.comments.${e}`,commentsLegacy:e=>`ade.documents.v10.comments.${e}`,listSettings:e=>`ade.documents.list_settings.${e}`};function ng(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function O0(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(ai.views(e))??window.localStorage.getItem(ai.viewsLegacy(e)),r=ng(t);return r?r.map(i=>({...i,filters:{...gc,...i.filters??{},tagMode:i.filters?.tagMode??"any",assignees:i.filters?.assignees??[]}})):[]}function z0(e,t){typeof window>"u"||window.localStorage.setItem(ai.views(e),JSON.stringify(t))}function L0(e){if(typeof window>"u")return{};const t=window.localStorage.getItem(ai.comments(e))??window.localStorage.getItem(ai.commentsLegacy(e));return ng(t)??{}}function fm(e,t){typeof window>"u"||window.localStorage.setItem(ai.comments(e),JSON.stringify(t))}function U0(e){if(typeof window>"u")return ti;const t=window.localStorage.getItem(ai.listSettings(e)),r=ng(t);return $m(r)}function i5(e,t){typeof window>"u"||window.localStorage.setItem(ai.listSettings(e),JSON.stringify(t))}function o5({workspaceId:e,currentUserLabel:t,currentUserId:r,processingPaused:i,initialFilters:l}){const{notifyToast:u}=Md(),d=Ft(),h=`user:${r}`,p=l??gc,x=f.useMemo(()=>O0(e),[e]),[v,b]=f.useState("grid"),[y,S]=f.useState("status"),[j,C]=f.useState(""),[_,N]=f.useState(new Set),[E,D]=f.useState(null),[U,z]=f.useState(!1),[V,R]=f.useState(null),[A,B]=f.useState(null),[T,K]=f.useState(p),[$,q]=f.useState(()=>C0(p,"",x,h)),[I,je]=f.useState(!1),[M,H]=f.useState(()=>U0(e)),[ee,be]=f.useState(()=>x),[de,L]=f.useState(()=>L0(e)),[W,pe]=f.useState(null),[G,ie]=f.useState(()=>Date.now()),J=f.useRef(null),ne=f.useRef(null),oe=f.useRef(!1),he=f.useRef(new Map),ue=f.useRef(new Set),Oe=f.useRef(new Map),Ge=f.useRef(new Map),Se=f.useRef(e),ze=f.useRef(null),Pe=f.useRef(null),Me=f.useRef([]),Be=f.useRef(null),We=f.useRef(null),st=f.useRef(null),P=f.useRef(!1),F=f.useRef(!1);f.useEffect(()=>{const O=window.setInterval(()=>ie(Date.now()),3e4);return()=>window.clearInterval(O)},[]),f.useEffect(()=>{const O=xe=>{xe.key==="Escape"&&z(!1),xe.key==="Shift"&&(oe.current=!0)},se=xe=>{xe.key==="Shift"&&(oe.current=!1)},re=()=>{oe.current=!1};return window.addEventListener("keydown",O),window.addEventListener("keyup",se),window.addEventListener("blur",re),()=>{window.removeEventListener("keydown",O),window.removeEventListener("keyup",se),window.removeEventListener("blur",re)}},[]),f.useEffect(()=>{be(O0(e)),L(L0(e)),H(U0(e)),Oe.current.clear()},[e]),f.useEffect(()=>{e&&i5(e,M)},[M,e]);const X=Wz({workspaceId:e}),Te=Rd({workspaceId:e}),{refetch:_e}=Te,me=f.useMemo(()=>(Te.data?.items??[]).find(se=>se.status==="active")??null,[Te.data?.items]),De=Te.isSuccess&&!me,ye="-created_at",ke=f.useMemo(()=>St.list(e,{sort:ye,pageSize:M.pageSize,filters:T,search:j}),[T,M.pageSize,j,ye,e]),Ie=f.useMemo(()=>HO(M.refreshInterval),[M.refreshInterval]),ht=M.refreshInterval==="auto",tt=Km({queryKey:ke,initialPageParam:1,queryFn:({pageParam:O,signal:se})=>E0(e,{sort:ye,page:typeof O=="number"?O:1,pageSize:M.pageSize??qm,query:$0(T,j)},se),getNextPageParam:O=>O.has_next?O.page+1:void 0,enabled:e.length>0,staleTime:15e3,refetchInterval:Ie}),{refetch:An}=tt,Ut=f.useMemo(()=>tt.data?.pages.flatMap(O=>O.items??[])??[],[tt.data?.pages]);f.useEffect(()=>{const O=tt.data?.pages[0],se=O?.changes_cursor??O?.changesCursorHeader??null;se&&ze.current!==se&&(ze.current=se,We.current=se,pe(se))},[tt.data?.pages]),f.useEffect(()=>{pe(null),ze.current=null,We.current=null,Me.current=[],Pe.current?.abort(),Be.current&&(window.clearTimeout(Be.current),Be.current=null),st.current&&(window.clearTimeout(st.current),st.current=null)},[ke]);const At=f.useMemo(()=>new Map(Ut.map(O=>[O.id,O])),[Ut]),$t=f.useMemo(()=>{const O=new Set;return Ut.forEach(se=>{const re=se.last_run;re&&(re.status==="queued"||re.status==="running")&&O.add(re.run_id)}),Array.from(O)},[Ut]);f.useEffect(()=>{if(!e)return;const O=Ge.current;Se.current!==e&&(O.forEach(re=>re.abort()),O.clear(),Se.current=e);const se=new Set($t);O.forEach((re,xe)=>{se.has(xe)||(re.abort(),O.delete(xe))}),se.forEach(re=>{if(O.has(re))return;const xe=new AbortController;O.set(re,xe),(async()=>{try{const Le=Sa(`/api/v1/runs/${re}/events/stream`);for await(const nt of d1(Le,xe.signal))if((nt.event==="run.start"||nt.event==="run.complete")&&d.invalidateQueries({queryKey:St.workspace(e)}),nt.event==="run.complete")break}catch(Le){xe.signal.aborted||console.warn("Run event stream failed",Le)}finally{O.delete(re)}})()})},[$t,d,e]),f.useEffect(()=>()=>{Ge.current.forEach(O=>O.abort()),Ge.current.clear()},[]),f.useEffect(()=>()=>{st.current&&(window.clearTimeout(st.current),st.current=null)},[]),f.useEffect(()=>{ht||(Pe.current?.abort(),Me.current=[],We.current=null,Be.current&&(window.clearTimeout(Be.current),Be.current=null))},[ht]);const Ze=f.useCallback(async()=>{if(e){if(P.current){F.current=!0;return}P.current=!0;try{const O=await E0(e,{sort:ye,page:1,pageSize:M.pageSize??qm,query:$0(T,j)});d.setQueryData(ke,se=>se&&{...se,pages:[O],pageParams:se.pageParams.length>0?[se.pageParams[0]]:[1]})}catch(O){console.warn("Document refresh failed",O)}finally{P.current=!1,F.current&&(F.current=!1,Ze())}}},[T,ke,M.pageSize,d,j,ye,e]),pn=f.useCallback(()=>{st.current||(st.current=window.setTimeout(()=>{st.current=null,Ze()},500))},[Ze]),Rn=f.useCallback(()=>{Be.current&&window.clearTimeout(Be.current),Be.current=null;const O=c5(Me.current.splice(0));if(O.length===0)return;let se=!1;d.setQueryData(ke,re=>{if(!re)return re;let xe=re;return O.forEach(Le=>{const nt=s5(xe,Le,{filters:T,search:j,sort:ye});xe=nt.data,nt.updatesAvailable&&(se=!0)}),xe}),O.forEach(re=>{re.type==="document.upsert"&&re.row&&d.setQueryData(St.document(e,re.row.id),re.row),re.type==="document.deleted"&&re.document_id&&d.removeQueries({queryKey:St.document(e,re.document_id)})}),se&&pn()},[T,ke,d,pn,j,ye,e]),we=f.useCallback(O=>{Me.current.push(O),!Be.current&&(Be.current=window.setTimeout(()=>{Rn()},200))},[Rn]);f.useEffect(()=>{if(!e||!W||!ht)return;Pe.current?.abort(),Me.current=[],Be.current&&(window.clearTimeout(Be.current),Be.current=null);const O=new AbortController;Pe.current=O;const se=re=>new Promise(xe=>{let Le;const nt=()=>{window.clearTimeout(Le),O.signal.removeEventListener("abort",nt),xe()};Le=window.setTimeout(()=>{O.signal.removeEventListener("abort",nt),xe()},re),O.signal.addEventListener("abort",nt)});return(async()=>{let re=0;for(;!O.signal.aborted;){const xe=We.current??W,Le=a3(e,{cursor:xe});try{for await(const Us of i3(Le,O.signal))We.current=Us.cursor,we(Us),re=0}catch(Us){if(O.signal.aborted)return;if(Us instanceof Ht&&Us.status===410){An();return}console.warn("Document change stream failed",Us)}if(O.signal.aborted)return;const Mt=Math.min(3e4,1e3*2**Math.min(re,5));re+=1;const mt=Math.floor(Mt*.15*Math.random());await se(Mt+mt)}})(),()=>O.abort()},[ht,W,we,An,e]),f.useEffect(()=>{X.items.forEach(O=>{O.status==="succeeded"&&O.response&&!ue.current.has(O.id)&&ue.current.add(O.id),O.status==="failed"&&O.error&&!ue.current.has(`fail-${O.id}`)&&(ue.current.add(`fail-${O.id}`),u({title:"Upload failed",description:O.error,intent:"danger"}))})},[u,X.items]),f.useEffect(()=>{if(!De)return;const O=window.setInterval(()=>{_e()},1e4);return()=>window.clearInterval(O)},[De,_e]),f.useEffect(()=>{let O=!1;if(X.items.forEach(re=>{re.status==="succeeded"&&re.response?.id&&(Oe.current.set(re.id,re.response.id),O=!0)}),!O)return;N(re=>{let xe=null;return Oe.current.forEach((Le,nt)=>{re.has(nt)&&(xe||(xe=new Set(re)),xe.delete(nt),xe.add(Le))}),xe??re}),D(re=>re&&(Oe.current.get(re)??re));const se=ne.current;se&&Oe.current.has(se)&&(ne.current=Oe.current.get(se)??se)},[X.items]);const He=f.useMemo(()=>{const O=[];return X.items.forEach(se=>{const re=he.current.get(se.id)??Date.now(),xe=se.file.name;if(se.status==="succeeded"&&se.response?.id&&At.has(se.response.id))return;const Le=se.status==="failed"?"failed":se.status==="uploading"?"processing":"queued",nt=new Date(re).toISOString();O.push({id:se.id,workspace_id:e,name:xe,status:Le,file_type:CO(xe),stage:u5(se.status),uploader_label:t,assignee_user_id:null,assignee_key:null,tags:[],byte_size:se.file.size,size_label:qo(se.file.size),queue_state:null,queue_reason:null,mapping_health:{attention:0,unmapped:0,pending:!0},created_at:nt,updated_at:nt,activity_at:nt,last_run:null,last_successful_run:null,progress:se.status==="uploading"?se.progress.percent:void 0,error:se.status==="failed"?{summary:se.error??"Upload failed",detail:"We could not upload this file. Check the connection and retry.",nextStep:"Retry now or remove the upload."}:void 0,assignee_label:null,comment_count:(de[se.id]??[]).length,upload:se})}),O},[de,t,At,X.items,e]),vt=f.useMemo(()=>!!(E&&X.items.some(O=>O.id===E)),[E,X.items]),lt=f.useMemo(()=>Ut.map(O=>({...O,record:O,assignee_label:null,comment_count:0})),[Ut]),yt=yn({queryKey:St.members(e),queryFn:({signal:O})=>XO(e,O),enabled:!!e,staleTime:6e4}),Rt=f.useMemo(()=>{const O=new Map;return O.set(h,{key:h,label:t,kind:"user",userId:r}),(yt.data?.items??[]).forEach(re=>{const xe=`user:${re.user_id}`,Le=re.user_id===r?t:`Member ${Iu(re.user_id)}`;O.has(xe)||O.set(xe,{key:xe,label:Le,kind:"user",userId:re.user_id})}),Array.from(O.values()).sort((re,xe)=>re.label.localeCompare(xe.label))},[r,h,t,yt.data?.items]),an=f.useMemo(()=>new Map(Rt.map(O=>[O.key,O])),[Rt]),jn=f.useCallback(O=>{if(!O)return null;const se=an.get(O);return se?se.label:O.startsWith("user:")?`Member ${Iu(O.slice(5))}`:O.startsWith("label:")?O.slice(6):O},[an]),gn=yn({queryKey:E&&e?St.document(e,E):[...St.root(),"document","none"],queryFn:({signal:O})=>E?YO(e,E,O):Promise.reject(),enabled:!!(E&&e)&&!At.has(E??"")&&!vt,staleTime:3e4,retry:(O,se)=>se instanceof Ht&&se.status===404?!1:O<2}),xn=f.useMemo(()=>{if(!gn.data)return null;const O=gn.data;return{...O,record:O,assignee_label:null,comment_count:0}},[gn.data]),Fn=f.useMemo(()=>{const O=[...l5(He,T,j),...lt];return xn&&!O.some(se=>se.id===xn.id)?[xn,...O]:O},[lt,T,xn,j,He]),ct=f.useMemo(()=>Fn.map(O=>{const se=O.assignee_key??null,re=(de[O.id]??[]).length;return{...O,assignee_key:se,assignee_label:jn(se),comment_count:re}}),[jn,Fn,de]),_t=f.useMemo(()=>new Map(ct.map(O=>[O.id,O])),[ct]);f.useEffect(()=>{if(ct.length===0){D(null);return}(!E||!_t.has(E))&&D(ct[0].id)},[E,ct,_t]);const dn=f.useMemo(()=>E?_t.get(E)??null:null,[E,_t]),it=f.useMemo(()=>ct,[ct]),Ms=f.useMemo(()=>{if(y==="status")return a5.map(xe=>({id:xe,label:d5(xe),items:it.filter(Le=>Le.status===xe)}));if(y==="tag"){const xe=new Set;it.forEach(at=>at.tags.forEach(Mt=>xe.add(Mt)));const nt=Array.from(xe).sort((at,Mt)=>at.localeCompare(Mt)).map(at=>({id:at,label:at,items:it.filter(Mt=>Mt.tags.includes(at))}));return nt.push({id:"__untagged__",label:"Untagged",items:it.filter(at=>at.tags.length===0)}),nt}const O=new Set;it.forEach(xe=>{xe.uploader_label&&O.add(xe.uploader_label)});const re=Array.from(O).sort((xe,Le)=>xe.localeCompare(Le)).map(xe=>({id:xe,label:xe,items:it.filter(Le=>Le.uploader_label===xe)}));return re.push({id:"__unassigned_uploader__",label:"Unassigned",items:it.filter(xe=>!xe.uploader_label)}),re},[y,it]),tn=f.useMemo(()=>it.filter(O=>O.record).map(O=>O.id),[it]);f.useMemo(()=>ct.filter(O=>_.has(O.id)&&O.record).map(O=>O.id),[ct,_]);const ns=f.useMemo(()=>tn.filter(O=>_.has(O)).length,[tn,_]),bs=tn.length>0&&ns===tn.length,In=ns>0&&!bs;f.useEffect(()=>{N(O=>{const se=new Set;return tn.forEach(re=>{O.has(re)&&se.add(re)}),se.size===O.size?O:se}),ne.current&&!tn.includes(ne.current)&&(ne.current=null)},[tn]);const bn=j.trim().length>=2||T.statuses.length>0||T.fileTypes.length>0||T.tags.length>0||T.assignees.length>0,Hn=ct.length===0&&!bn,Ar=ct.length===0&&bn,Xr=tt.dataUpdatedAt>0?tt.dataUpdatedAt:null,Ko=tt.isFetching&&!!tt.data,Hi=f.useMemo(()=>{const O=ct.filter(mt=>mt.assignee_key===h).length,se=ct.filter(mt=>!mt.assignee_key).length,re=ct.filter(mt=>mt.assignee_key===h||!mt.assignee_key).length,xe=ct.filter(mt=>_1.includes(mt.status)).length,Le=ct.filter(mt=>mt.status==="ready").length,nt=ct.filter(mt=>mt.status==="processing"||mt.status==="queued").length,at=ct.filter(mt=>mt.status==="failed").length,Mt=ct.filter(mt=>mt.status==="archived").length;return{total:ct.length,active:xe,assignedToMe:O,assignedToMeOrUnassigned:re,unassigned:se,processed:Le,processing:nt,failed:at,archived:Mt}},[h,ct]),Tt=f.useMemo(()=>dn?de[dn.id]??[]:[],[dn,de]),fs=dn?.record?.id??null,ss=yn({queryKey:fs?St.runsForDocument(e,fs):[...St.workspace(e),"runs","none"],queryFn:({signal:O})=>fs?JO(e,fs,O):Promise.resolve([]),enabled:!!fs&&U,staleTime:5e3,refetchInterval:U?7500:!1}),rs=f.useMemo(()=>(ss.data??[]).slice().sort((se,re)=>Oo(re.created_at)-Oo(se.created_at)),[ss.data]),as=dn?.record?.last_run?.run_id??null;f.useEffect(()=>{U&&B(O=>{const se=O&&rs.some(re=>re.id===O)?O:null;return se||(as&&rs.some(re=>re.id===as)?as:rs[0]?.id??null)})},[dn?.id,as,U,rs]);const fn=f.useMemo(()=>A?rs.find(O=>O.id===A)??null:null,[rs,A]),Rr=U&&fn?fn.status==="running"||fn.status==="queued":!1,nn=yn({queryKey:A?St.runMetrics(A):[...St.root(),"runMetrics","none"],queryFn:({signal:O})=>A?ez(A,O):Promise.resolve(null),enabled:!!A&&U,staleTime:3e4,refetchInterval:Rr?1e4:!1}),vs=f.useMemo(()=>!fn||!hz(fn)?null:D1(fn),[fn]),Os=yn({queryKey:vs?St.workbook(vs):[...St.root(),"workbook","none"],queryFn:({signal:O})=>vs?tz(vs,O):Promise.reject(new Error("No output URL")),enabled:!!vs&&U,staleTime:3e4});f.useEffect(()=>{R(null)},[dn?.id,A]),f.useEffect(()=>{Os.data?.sheets.length&&R(Os.data.sheets[0].name)},[Os.data?.sheets]);const is=f.useCallback((O,se)=>C0(O,se,ee,h),[h,ee]),fr=f.useCallback(O=>{C(O),q(is(T,O))},[T,is]),on=f.useCallback(O=>b(O),[]),Mr=f.useCallback(O=>S(O),[]),En=f.useCallback((O,se)=>{const re=se?.mode==="range"||oe.current;N(xe=>{const Le=new Set(xe),nt=re?se?.checked??!0:se?.checked??!xe.has(O),at=ne.current;if(re&&at){const Mt=tn.indexOf(at),mt=tn.indexOf(O);if(Mt!==-1&&mt!==-1){const[Us,Go]=Mt<mt?[Mt,mt]:[mt,Mt];for(let _a=Us;_a<=Go;_a+=1){const ra=tn[_a];nt?Le.add(ra):Le.delete(ra)}return Le}}return nt?Le.add(O):Le.delete(O),Le}),(!re||!ne.current)&&(ne.current=O)},[tn]),li=f.useCallback(()=>N(new Set(tn)),[tn]),Or=f.useCallback(()=>{N(new Set),ne.current=null},[]),zr=f.useCallback(O=>{ne.current=O,D(O),z(!0)},[]),dt=f.useCallback(()=>z(!1),[]),Vn=f.useCallback(O=>R(O),[]),Mn=f.useCallback(O=>{if(!O.length)return;const se=X.enqueue(O),re=Date.now();se.forEach((Le,nt)=>{he.current.set(Le.id,re+nt*1e3)});const xe=i?De?"Uploads saved. Processing is paused and no configuration is active yet.":"Uploads saved. Processing is paused for this workspace.":De?"Uploads saved. Processing will start once an active configuration is set.":"Processing will begin automatically.";u({title:`${se.length} file${se.length===1?"":"s"} added`,description:xe,intent:"success"})},[De,u,i,X]),Vi=f.useCallback(()=>J.current?.click(),[]),Jr=f.useCallback(O=>X.pause(O),[X]),Qi=f.useCallback(O=>X.resume(O),[X]),Lr=f.useCallback(O=>X.retry(O),[X]),ea=f.useCallback(O=>X.cancel(O),[X]),hs=f.useCallback(O=>X.remove(O),[X]),ys=f.useCallback(()=>X.clearCompleted(),[X]),hr=f.useCallback(()=>{tt.refetch()},[tt]),ci=f.useCallback(()=>{tt.hasNextPage&&tt.fetchNextPage()},[tt]),mr=f.useCallback(O=>{if(O.target?.closest("input, textarea, select, button, a, [role='button'], [role='menuitem']")||it.length===0||O.key!=="ArrowDown"&&O.key!=="ArrowUp")return;O.preventDefault();const re=it.findIndex(Le=>Le.id===E);if(re<0){D(it[0].id);return}const xe=O.key==="ArrowDown"?Math.min(it.length-1,re+1):Math.max(0,re-1);D(it[xe].id)},[E,it]),Zi=f.useCallback(O=>{K(O),q(is(O,j))},[is,j]),Xe=f.useCallback(O=>{const se=$m(O);H(se)},[$m]),Ur=f.useCallback(O=>{q(O),K(Gp(O,h))},[h]),$r=f.useCallback(O=>{const se=ee.find(re=>re.id===O);se&&(K(se.filters),q(O))},[ee]),ta=f.useCallback(()=>je(!0),[]),Ki=f.useCallback(()=>je(!1),[]),ui=f.useCallback(O=>{const se=Date.now(),re={id:`view_${se}`,name:O,createdAt:se,updatedAt:se,filters:T},xe=[re,...ee];be(xe),z0(e,xe),q(re.id),u({title:"View saved",description:O,intent:"success"})},[T,u,ee,e]),os=f.useCallback(O=>{const se=ee.filter(re=>re.id!==O);be(se),z0(e,se),$===O&&q("all_documents"),u({title:"View deleted",description:O,intent:"success"})},[$,u,ee,e]),pr=f.useCallback((O,se)=>{const re=_t.get(O);if(!re?.record)return;const xe=re.tags,Le=se.filter(at=>!xe.includes(at)),nt=xe.filter(at=>!se.includes(at));Le.length===0&&nt.length===0||rz(e,re.id,{add:Le,remove:nt}).then(()=>{d.setQueryData(ke,at=>at?.pages?{...at,pages:at.pages.map(Mt=>({...Mt,items:(Mt.items??[]).map(mt=>mt.id===re.id?{...mt,tags:se}:mt)}))}:at),d.setQueryData(St.document(e,re.id),at=>at&&{...at,tags:se})}).catch(at=>{u({title:"Tag update failed",description:at instanceof Error?at.message:"Unable to update tags.",intent:"danger"})})},[_t,ke,u,d,e]),qr=f.useCallback((O,se)=>{const re=_t.get(O);if(!re?.record)return;const xe=se?.startsWith("user:")?se.slice(5):null;lz(e,re.id,{assigneeUserId:xe}).then(()=>{d.setQueryData(ke,Le=>Le?.pages?{...Le,pages:Le.pages.map(nt=>({...nt,items:(nt.items??[]).map(at=>at.id===re.id?{...at,assignee_user_id:xe,assignee_key:se}:at)}))}:Le),d.setQueryData(St.document(e,re.id),Le=>Le&&{...Le,assignee_user_id:xe,assignee_key:se}),u({title:"Assignment updated",description:se?an.get(se)?.label??se:"Unassigned",intent:"success"})}).catch(Le=>{u({title:"Assignment failed",description:Le instanceof Error?Le.message:"Unable to update assignment.",intent:"danger"})})},[_t,ke,u,an,d,e]),On=f.useCallback(O=>qr(O,h),[qr,h]),Ys=f.useCallback((O,se,re)=>{const xe=Date.now(),Le={id:`c_${xe}_${Math.random().toString(16).slice(2)}`,documentId:O,authorKey:h,authorLabel:t,body:se,createdAt:xe,updatedAt:xe,mentions:re};L(nt=>{const at=[...nt[O]??[],Le],Mt={...nt,[O]:at};return fm(e,Mt),Mt}),u({title:"Note added",description:"Saved locally for now.",intent:"success"})},[h,t,u,e]),Br=f.useCallback((O,se,re,xe)=>{L(Le=>{const at=(Le[O]??[]).map(mt=>mt.id===se?{...mt,body:re,mentions:xe,updatedAt:Date.now()}:mt),Mt={...Le,[O]:at};return fm(e,Mt),Mt}),u({title:"Note updated",description:"Saved locally for now.",intent:"success"})},[u,e]),zs=f.useCallback((O,se)=>{L(re=>{const Le=(re[O]??[]).filter(at=>at.id!==se),nt={...re,[O]:Le};return fm(e,nt),nt}),u({title:"Note deleted",description:"Removed locally for now.",intent:"success"})},[u,e]),Pr=f.useCallback(O=>B(O),[]),Na=f.useCallback(O=>{if(O?.record){if(!vs){u({title:"No output link",description:"We could not find the output download link yet.",intent:"warning"});return}nz(vs,O.name).then(se=>u({title:"Download started",description:se,intent:"success"})).catch(se=>u({title:"Download failed",description:se instanceof Error?se.message:"Unable to download the processed XLSX.",intent:"danger"}))}},[u,vs]),di=f.useCallback(O=>{const se=cd(O.record)?.run_id??null;if(!O.record||!se){u({title:"Output not ready",description:"Open the document to see run history and download output.",intent:"warning"});return}D0(se,O.name).then(re=>u({title:"Download started",description:re,intent:"success"})).catch(re=>u({title:"Download failed",description:re instanceof Error?re.message:"Unable to download the processed XLSX.",intent:"danger"}))},[u]),gr=f.useCallback(O=>{O?.record&&k0(e,O.id,O.name).then(se=>u({title:"Download started",description:se,intent:"success"})).catch(se=>u({title:"Download failed",description:se instanceof Error?se.message:"Unable to download the original file.",intent:"danger"}))},[u,e]),ln=f.useCallback(O=>{if(O?.record){if(i){u({title:"Processing is paused",description:"Resume processing in workspace settings to reprocess documents.",intent:"warning"});return}if(!fn?.configuration_id){u({title:"Cannot reprocess yet",description:"No configuration is available for this document's runs yet.",intent:"warning"});return}sz(fn.configuration_id,O.id).then(se=>{u({title:"Reprocess queued",description:`Run ${Iu(se.id)}`,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)})}).catch(se=>u({title:"Reprocess failed",description:se instanceof Error?se.message:"Unable to reprocess.",intent:"danger"}))}},[fn?.configuration_id,u,i,d,e]),Ls=f.useCallback(O=>{if(!O?.record)return;const se=new URL(window.location.href);se.searchParams.set("doc",O.id),NO(se.toString()).then(()=>u({title:"Link copied",description:"Share it with your team.",intent:"success"})).catch(()=>u({title:"Copy failed",description:"Unable to copy link to clipboard.",intent:"danger"}))},[u]),Xs=f.useCallback(O=>{const se=_t.get(O);se?.record&&iz(e,se.id).then(()=>{u({title:"Document deleted",description:se.name,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)}),d.invalidateQueries({queryKey:St.document(e,se.id)}),N(re=>{if(!re.has(O))return re;const xe=new Set(re);return xe.delete(O),xe})}).catch(re=>u({title:"Delete failed",description:re instanceof Error?re.message:"Unable to delete document.",intent:"danger"}))},[_t,u,d,e]),ws=f.useCallback(O=>{const se=_t.get(O);se?.record&&cz(e,se.id).then(()=>{u({title:"Document archived",description:se.name,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)}),d.invalidateQueries({queryKey:St.document(e,se.id)}),N(re=>{if(!re.has(O))return re;const xe=new Set(re);return xe.delete(O),xe})}).catch(re=>u({title:"Archive failed",description:re instanceof Error?re.message:"Unable to archive document.",intent:"danger"}))},[_t,u,d,e]),js=f.useCallback(O=>{const se=_t.get(O);se?.record&&uz(e,se.id).then(()=>{u({title:"Document restored",description:se.name,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)}),d.invalidateQueries({queryKey:St.document(e,se.id)}),N(re=>{if(!re.has(O))return re;const xe=new Set(re);return xe.delete(O),xe})}).catch(re=>u({title:"Restore failed",description:re instanceof Error?re.message:"Unable to restore document.",intent:"danger"}))},[_t,u,d,e]),Ca=f.useCallback(O=>{const se=O?.length?O.map(re=>_t.get(re)).filter(re=>!!re?.record):it.filter(re=>_.has(re.id)&&re.record);se.length!==0&&oz(e,se.map(re=>re.id)).then(()=>{u({title:"Documents deleted",description:`${se.length} removed`,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)}),se.forEach(re=>{d.invalidateQueries({queryKey:St.document(e,re.id)})}),N(re=>{const xe=new Set(re);return se.forEach(Le=>xe.delete(Le.id)),xe})}).catch(re=>u({title:"Bulk delete failed",description:re instanceof Error?re.message:"Unable to delete documents.",intent:"danger"}))},[_t,u,d,_,it,e]),ms=f.useCallback(O=>{const re=(O?.length?O.map(xe=>_t.get(xe)).filter(xe=>!!xe?.record):it.filter(xe=>_.has(xe.id)&&xe.record)).filter(xe=>xe.status!=="archived");re.length!==0&&dz(e,re.map(xe=>xe.id)).then(()=>{u({title:"Documents archived",description:`${re.length} archived`,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)}),re.forEach(xe=>{d.invalidateQueries({queryKey:St.document(e,xe.id)})}),N(xe=>{const Le=new Set(xe);return re.forEach(nt=>Le.delete(nt.id)),Le})}).catch(xe=>u({title:"Bulk archive failed",description:xe instanceof Error?xe.message:"Unable to archive documents.",intent:"danger"}))},[_t,u,d,_,it,e]),Js=f.useCallback(O=>{const re=(O?.length?O.map(xe=>_t.get(xe)).filter(xe=>!!xe?.record):it.filter(xe=>_.has(xe.id)&&xe.record)).filter(xe=>xe.status==="archived");re.length!==0&&fz(e,re.map(xe=>xe.id)).then(()=>{u({title:"Documents restored",description:`${re.length} restored`,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)}),re.forEach(xe=>{d.invalidateQueries({queryKey:St.document(e,xe.id)})}),N(xe=>{const Le=new Set(xe);return re.forEach(nt=>Le.delete(nt.id)),Le})}).catch(xe=>u({title:"Bulk restore failed",description:xe instanceof Error?xe.message:"Unable to restore documents.",intent:"danger"}))},[_t,u,d,_,it,e]),Fr=f.useCallback(O=>{const se=O.add.filter(Boolean),re=O.remove.filter(Boolean);if(se.length===0&&re.length===0)return;const xe=it.filter(Le=>_.has(Le.id)&&Le.record);xe.length!==0&&az(e,xe.map(Le=>Le.id),{add:se,remove:re}).then(()=>{u({title:"Tags applied",description:`${se.length} added  ${re.length} removed`,intent:"success"}),d.invalidateQueries({queryKey:St.workspace(e)})}).catch(Le=>{u({title:"Bulk tag failed",description:Le instanceof Error?Le.message:"Unable to apply tags.",intent:"danger"})})},[u,d,_,it,e]),na=f.useCallback(()=>{const O=it.filter(se=>_.has(se.id)&&se.record);O.length!==0&&(O.forEach(se=>{k0(e,se.id,se.name).catch(()=>{})}),u({title:"Downloads started",description:`${O.length} originals`,intent:"success"}))},[u,_,it,e]),sa=f.useCallback(()=>{const O=it.filter(re=>_.has(re.id)&&re.record);if(O.length===0)return;let se=0;O.forEach(re=>{const xe=cd(re.record)?.run_id??null;xe&&(se+=1,D0(xe,re.name).catch(()=>{}))}),se>0?u({title:"Downloads started",description:`${se} outputs`,intent:"success"}):u({title:"No outputs ready",description:"Select documents with successful runs to download outputs.",intent:"warning"})},[u,_,it]);return{state:{viewMode:v,groupBy:y,search:j,selectedIds:_,activeId:E,previewOpen:U,activeSheetId:V,filters:T,activeViewId:$,saveViewOpen:I,selectedRunId:A,listSettings:M},derived:{now:G,documents:ct,visibleDocuments:it,activeDocument:dn,boardColumns:Ms,isLoading:tt.isLoading,isError:tt.isError,hasNextPage:!!tt.hasNextPage,isFetchingNextPage:tt.isFetchingNextPage,people:Rt,currentUserKey:h,runs:rs,runsLoading:ss.isLoading,selectedRunId:A,activeRun:fn,runLoading:ss.isFetching,runMetrics:nn.data??null,runMetricsLoading:nn.isLoading,runMetricsError:nn.isError,outputUrl:vs,workbook:Os.data??null,workbookLoading:Os.isLoading,workbookError:Os.isError,showNoDocuments:Hn,showNoResults:Ar,allVisibleSelected:bs,someVisibleSelected:In,savedViews:ee,activeComments:Tt,counts:Hi,lastUpdatedAt:Xr,isRefreshing:Ko,changesCursor:W,configMissing:De,processingPaused:i,uploads:{items:X.items,summary:X.summary}},refs:{fileInputRef:J},actions:{setSearch:fr,setViewMode:on,setGroupBy:Mr,updateSelection:En,selectAllVisible:li,clearSelection:Or,openPreview:zr,closePreview:dt,setActiveSheetId:Vn,queueUploads:Mn,handleUploadClick:Vi,pauseUpload:Jr,resumeUpload:Qi,retryUpload:Lr,cancelUpload:ea,removeUpload:hs,clearCompletedUploads:ys,refreshDocuments:hr,loadMore:ci,handleKeyNavigate:mr,setFilters:Zi,setListSettings:Xe,setBuiltInView:Ur,selectSavedView:$r,openSaveView:ta,closeSaveView:Ki,saveView:ui,deleteView:os,updateTagsOptimistic:pr,assignDocument:qr,pickUpDocument:On,addComment:Ys,editComment:Br,deleteComment:zs,selectRun:Pr,downloadOutput:Na,downloadOutputFromRow:di,downloadOriginal:gr,reprocess:ln,copyLink:Ls,deleteDocument:Xs,archiveDocument:ws,restoreDocument:js,bulkDeleteDocuments:Ca,bulkArchiveDocuments:ms,bulkRestoreDocuments:Js,bulkUpdateTags:Fr,bulkDownloadOriginals:na,bulkDownloadOutputs:sa}}}function $0(e,t){const r={},i=t.trim();if(i.length>=2&&(r.q=i),e.statuses.length>0&&(r.display_status=e.statuses),e.fileTypes.length>0){const l=e.fileTypes.filter(u=>u!=="unknown");l.length>0&&(r.file_type=l)}if(e.tags.length>0&&(r.tags=e.tags,r.tag_mode=e.tagMode),e.assignees.length>0){const{assigneeIds:l,includeUnassigned:u}=E1(e.assignees);l.length>0&&(r.assignee_user_id=l),u&&(r.assignee_unassigned=!0)}return r}function l5(e,t,r){const i=r.trim().toLowerCase(),l=i.length>=2,u=t.statuses;return e.filter(d=>{if(l&&![d.name,d.uploader_label??"",d.tags.join(" "),d.assignee_label??"",d.assignee_key??"",d.file_type].join(" ").toLowerCase().includes(i)||u.length>0&&!u.includes(d.status)||t.fileTypes.length>0&&!t.fileTypes.includes(d.file_type))return!1;if(t.tags.length>0){if(t.tagMode==="all"){if(!t.tags.every(h=>d.tags.includes(h)))return!1}else if(!t.tags.some(h=>d.tags.includes(h)))return!1}if(t.assignees.length>0){const h=t.assignees.includes(Wr),p=d.assignee_key?t.assignees.includes(d.assignee_key):!1,x=!d.assignee_key&&h;if(!p&&!x)return!1}return!0})}function c5(e){if(e.length<=1)return e;const t=new Set,r=[];for(let i=e.length-1;i>=0;i-=1){const l=e[i],u=l.document_id??l.row?.id;!u||t.has(u)||(t.add(u),r.push(l))}return r.reverse()}function u5(e){switch(e){case"paused":return"Upload paused";case"cancelled":return"Upload cancelled";case"failed":return"Upload failed";case"uploading":return"Uploading";case"queued":return"Queued for upload";case"succeeded":return"Upload complete";default:return"Queued for upload"}}function d5(e){switch(e){case"ready":return"Processed";case"processing":return"Processing";case"failed":return"Failed";case"archived":return"Archived";case"queued":return"Queued";default:return e}}function f5(){return a.jsx(cc,{children:a.jsx(v5,{})})}const h5=new Set(["queued","processing","ready","failed","archived"]),m5=new Set(["xlsx","xls","csv","pdf"]);function p5(e){const t=new URLSearchParams(e),r=q0(Uu(t,["status","status_in","display_status","display_status_in"]),h5),i=q0(Uu(t,["file_type"]),m5),l=Uu(t,["tags"]),u=x5(t.get("tag_mode")??t.get("tags_match")),d=l.length>0?u:"any",h=Uu(t,["assignee_user_id","assignee_user_id_in"]),p=b5(t.get("assignee_unassigned")),x=OO(h,p);return{...gc,statuses:r,fileTypes:i,tags:l,tagMode:d,assignees:x}}function g5(e,t,r){const i=new URLSearchParams,l=t.trim();l&&i.set("q",l),r&&i.set("doc",r),e.statuses.forEach(h=>i.append("status",h)),e.fileTypes.forEach(h=>i.append("file_type",h)),e.tags.forEach(h=>i.append("tags",h)),e.tags.length>0&&e.tagMode!=="any"&&i.set("tag_mode",e.tagMode);const{assigneeIds:u,includeUnassigned:d}=E1(e.assignees);return u.forEach(h=>i.append("assignee_user_id",h)),d&&i.set("assignee_unassigned","true"),i.toString()}function x5(e){return e==="all"?"all":"any"}function b5(e){if(!e)return!1;const t=e.trim().toLowerCase();return t==="true"||t==="1"||t==="yes"||t==="on"}function Uu(e,t){const i=t.flatMap(l=>e.getAll(l)).flatMap(l=>l.split(",")).map(l=>l.trim()).filter(Boolean);return Array.from(new Set(i))}function q0(e,t){return e.filter(r=>t.has(r))}function v5(){const e=es(),t=en(),r=Pi(),i=md(),l=i.data?.items??[],h=[Aw(),r.user.preferred_workspace_id].filter(p=>!!p).map(p=>l.find(x=>x.id===p)).find(p=>!!p)??l[0]??null;return f.useEffect(()=>{if(i.isLoading||i.isError)return;if(!h){t("/workspaces",{replace:!0});return}const p=`/workspaces/${h.id}/documents${e.search}${e.hash}`;t(p,{replace:!0})},[e.hash,e.search,t,h,i.isError,i.isLoading]),i.isLoading?a.jsx(Dt,{title:"Loading Documents",variant:"loading"}):i.isError?a.jsx(Dt,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error"}):null}function y5(){const e=Pi(),{workspace:t,hasPermission:r}=Tr(),i=es(),l=en(),u=e.user.display_name||e.user.email||"You",d=e.user.id,h=`user:${d}`,p=r("workspace.configurations.manage"),x=r("workspace.settings.manage"),v=f.useMemo(()=>p5(i.search),[i.search]),b=o5({currentUserLabel:u,currentUserId:d,workspaceId:t.id,processingPaused:t.processing_paused??!1,initialFilters:v}),y=f.useMemo(()=>({screen:"documents"}),[]),S=wO({workspaceId:t.id,scope:"documents",context:y}),j=f.useMemo(()=>{const Se=new Set,ze=[];return S.participants.forEach(Pe=>{Se.has(Pe.user_id)||(Se.add(Pe.user_id),ze.push(Pe))}),ze},[S.participants]),C=f.useMemo(()=>{const Se={},ze=new Map;return S.participants.forEach(Pe=>{const Me=Pe.selection;if(!Me||typeof Me!="object")return;const Be=Me.doc_id;if(typeof Be!="string"||!Be)return;let We=ze.get(Be);We||(We=new Set,ze.set(Be,We)),!We.has(Pe.user_id)&&(We.add(Pe.user_id),(Se[Be]??=[]).push(Pe))}),Se},[S.participants]);f.useEffect(()=>{if(S.connectionState!=="open")return;const Se=b.state.previewOpen?b.state.activeId:null;S.sendSelection({doc_id:Se??null})},[b.state.activeId,b.state.previewOpen,S.connectionState,S.sendSelection]);const{actions:_,state:N}=b,[E,D]=f.useState(null),[U,z]=f.useState(!1),[V,R]=f.useState(null),[A,B]=f.useState([]),T=f.useMemo(()=>new URLSearchParams(i.search).get("q")??"",[i.search]),K=f.useMemo(()=>new URLSearchParams(i.search).get("doc"),[i.search]);f.useEffect(()=>{T!==N.search&&_.setSearch(T)},[_,N.search,T]),f.useEffect(()=>{Wp(b.state.filters,v)||b.actions.setFilters(v)},[b.actions,b.state.filters,v]),f.useEffect(()=>{if(!K){N.previewOpen&&_.closePreview();return}(N.activeId!==K||!N.previewOpen)&&_.openPreview(K)},[_,N.activeId,N.previewOpen,K]);const $=f.useCallback((Se,ze,Pe,Me=!0)=>{const Be=g5(Se,ze,Pe),We=`${i.pathname}${Be?`?${Be}`:""}${i.hash??""}`,st=`${i.pathname}${i.search}${i.hash??""}`;We!==st&&l(We,{replace:Me})},[i.hash,i.pathname,i.search,l]);f.useEffect(()=>{N.previewOpen&&N.activeId&&K&&K!==N.activeId&&$(N.filters,T,N.activeId,!0)},[N.activeId,N.filters,N.previewOpen,$,K,T]);const q=f.useCallback(Se=>{_.setFilters(Se);const ze=N.previewOpen?N.activeId:null;$(Se,T,ze)},[_,N.activeId,N.previewOpen,$,T]),I=f.useCallback(Se=>{_.setBuiltInView(Se);const ze=N.previewOpen?N.activeId:null,Pe=Gp(Se,h);$(Pe,T,ze)},[_,h,N.activeId,N.previewOpen,$,T]),je=f.useCallback(Se=>{const ze=b.derived.savedViews.find(Me=>Me.id===Se);if(!ze)return;_.selectSavedView(Se);const Pe=N.previewOpen?N.activeId:null;$(ze.filters,T,Pe)},[_,b.derived.savedViews,N.activeId,N.previewOpen,$,T]),M=()=>{_.setSearch(""),_.setBuiltInView("all_documents");const Se=N.previewOpen?N.activeId:null;$(gc,"",Se)},H=f.useCallback(()=>{l(`/workspaces/${t.id}/config-builder`)},[l,t.id]),ee=f.useCallback(()=>{l(`/workspaces/${t.id}/settings/processing`)},[l,t.id]),be=Se=>{if(N.activeId===Se&&N.previewOpen){de();return}_.openPreview(Se),$(N.filters,T,Se,!!K)},de=()=>{_.closePreview(),D(null),$(N.filters,T,null,!1)},L=f.useCallback(Se=>{_.openPreview(Se),$(N.filters,T,Se,!!K),D({id:Se,tab:"details"})},[_,N.filters,$,K,T]),W=f.useCallback(Se=>{_.openPreview(Se),$(N.filters,T,Se,!!K),D({id:Se,tab:"notes"})},[_,N.filters,$,K,T]),pe=f.useCallback(Se=>{R({ids:[Se.id],title:`Delete ${Se.name}?`,description:"This removes the document from the workspace.",confirmLabel:"Delete document"})},[]),G=f.useMemo(()=>b.derived.visibleDocuments.filter(Se=>b.state.selectedIds.has(Se.id)&&Se.record),[b.derived.visibleDocuments,b.state.selectedIds]),ie=f.useMemo(()=>G.filter(Se=>!!cd(Se.record)).length,[G]),J=f.useMemo(()=>G.filter(Se=>Se.status==="archived").length,[G]),ne=G.length-J,oe=f.useCallback(()=>{if(G.length===0)return;const Se=G.length===1?"document":"documents";R({ids:G.map(ze=>ze.id),title:`Delete ${G.length} ${Se}?`,description:`This removes the ${Se} from the workspace.`,confirmLabel:`Delete ${G.length} ${Se}`})},[G]),he=f.useCallback(()=>{if(!V)return;const Se=V.ids;if(Se.length===0){R(null);return}N.previewOpen&&N.activeId&&Se.includes(N.activeId)&&de(),Se.length===1?_.deleteDocument(Se[0]):_.bulkDeleteDocuments(Se),R(null)},[_,V,de,N.activeId,N.previewOpen]),ue=f.useCallback(Se=>{const ze=Array.from(Se.target.files??[]);ze.length>0&&B(ze),Se.target.value=""},[]),Oe=f.useCallback(Se=>{b.actions.queueUploads(Se),B([])},[b.actions.queueUploads]),Ge=f.useCallback(()=>{B([])},[]);return a.jsxs("div",{className:"documents flex min-h-0 flex-1 flex-col bg-background text-foreground",children:[a.jsx(_z,{onUploadClick:b.actions.handleUploadClick,fileInputRef:b.refs.fileInputRef,onFileInputChange:ue,showConfigurationWarning:b.derived.configMissing,processingPaused:b.derived.processingPaused,canManageConfigurations:p,canManageSettings:x,onOpenConfigBuilder:H,onOpenSettings:ee,uploads:b.derived.uploads,onPauseUpload:b.actions.pauseUpload,onResumeUpload:b.actions.resumeUpload,onRetryUpload:b.actions.retryUpload,onCancelUpload:b.actions.cancelUpload,onRemoveUpload:b.actions.removeUpload,onClearCompletedUploads:b.actions.clearCompletedUploads}),a.jsx(Iz,{open:A.length>0,files:A,onConfirm:Oe,onCancel:Ge,processingPaused:b.derived.processingPaused,configMissing:b.derived.configMissing}),a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:a.jsxs("section",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:[a.jsx(WO,{viewMode:b.state.viewMode,onViewModeChange:b.actions.setViewMode,listSettings:b.state.listSettings,onListSettingsChange:b.actions.setListSettings,workspaceId:t.id,filters:b.state.filters,onChange:q,people:b.derived.people,showingCount:b.derived.visibleDocuments.length,totalCount:b.derived.documents.length,isRefreshing:b.derived.isRefreshing,lastUpdatedAt:b.derived.lastUpdatedAt,now:b.derived.now,onRefresh:b.actions.refreshDocuments,presenceParticipants:j,activeViewId:b.state.activeViewId,onSetBuiltInView:I,savedViews:b.derived.savedViews,onSelectSavedView:je,onDeleteSavedView:Se=>b.actions.deleteView(Se),onOpenSaveDialog:b.actions.openSaveView,counts:b.derived.counts}),b.state.viewMode==="grid"?a.jsxs(a.Fragment,{children:[a.jsx(jz,{workspaceId:t.id,documents:b.derived.visibleDocuments,density:b.state.listSettings.density,activeId:b.state.activeId,presenceByDocument:C,selectedIds:b.state.selectedIds,onSelect:b.actions.updateSelection,onSelectAll:b.actions.selectAllVisible,onClearSelection:b.actions.clearSelection,allVisibleSelected:b.derived.allVisibleSelected,someVisibleSelected:b.derived.someVisibleSelected,onActivate:be,onUploadClick:b.actions.handleUploadClick,onClearFilters:M,showNoDocuments:b.derived.showNoDocuments,showNoResults:b.derived.showNoResults,isLoading:b.derived.isLoading,isError:b.derived.isError,hasNextPage:b.derived.hasNextPage,isFetchingNextPage:b.derived.isFetchingNextPage,onLoadMore:b.actions.loadMore,onRefresh:b.actions.refreshDocuments,now:b.derived.now,onKeyNavigate:b.actions.handleKeyNavigate,processingPaused:b.derived.processingPaused,people:b.derived.people,onAssign:b.actions.assignDocument,onPickUp:b.actions.pickUpDocument,onTagsChange:b.actions.updateTagsOptimistic,onDownloadOriginal:b.actions.downloadOriginal,onDownloadOutput:b.actions.downloadOutputFromRow,onCopyLink:b.actions.copyLink,onReprocess:Se=>b.actions.reprocess(Se),onDelete:pe,onArchive:Se=>b.actions.archiveDocument(Se.id),onRestore:Se=>b.actions.restoreDocument(Se.id),onOpenDetails:L,onOpenNotes:W,onClosePreview:de,expandedId:b.state.previewOpen?b.state.activeId:null,expandedContent:b.state.previewOpen?a.jsx(R0,{workspaceId:t.id,document:b.derived.activeDocument,now:b.derived.now,activeSheetId:b.state.activeSheetId,onSheetChange:b.actions.setActiveSheetId,runs:b.derived.runs,runsLoading:b.derived.runsLoading,selectedRunId:b.derived.selectedRunId,onSelectRun:b.actions.selectRun,activeRun:b.derived.activeRun,runLoading:b.derived.runLoading,runMetrics:b.derived.runMetrics,outputUrl:b.derived.outputUrl,onDownloadOutput:b.actions.downloadOutput,onDownloadOriginal:b.actions.downloadOriginal,onReprocess:b.actions.reprocess,onArchive:Se=>{Se&&b.actions.archiveDocument(Se.id)},onRestore:Se=>{Se&&b.actions.restoreDocument(Se.id)},processingPaused:b.derived.processingPaused,people:b.derived.people,currentUserKey:b.derived.currentUserKey,currentUserLabel:u,onAssign:b.actions.assignDocument,onPickUp:b.actions.pickUpDocument,onCopyLink:b.actions.copyLink,comments:b.derived.activeComments,onAddComment:b.actions.addComment,onEditComment:b.actions.editComment,onDeleteComment:b.actions.deleteComment,onTagsChange:b.actions.updateTagsOptimistic,workbook:b.derived.workbook,workbookLoading:b.derived.workbookLoading,workbookError:b.derived.workbookError,onClose:de,detailsRequestId:E?.id??null,detailsRequestTab:E?.tab??null,onDetailsRequestHandled:()=>D(null)}):null}),a.jsx(qO,{count:G.length,outputReadyCount:ie,archiveCount:ne,restoreCount:J,onArchive:b.actions.bulkArchiveDocuments,onRestore:b.actions.bulkRestoreDocuments,onClear:b.actions.clearSelection,onAddTag:()=>z(!0),onDownloadOriginals:b.actions.bulkDownloadOriginals,onDownloadOutputs:b.actions.bulkDownloadOutputs,onDelete:oe})]}):a.jsxs(a.Fragment,{children:[a.jsx($O,{columns:b.derived.boardColumns,groupBy:b.state.groupBy,onGroupByChange:b.actions.setGroupBy,activeId:b.state.previewOpen?b.state.activeId:null,onActivate:be,density:b.state.listSettings.density,now:b.derived.now,isLoading:b.derived.isLoading,isError:b.derived.isError,hasNextPage:b.derived.hasNextPage,isFetchingNextPage:b.derived.isFetchingNextPage,onLoadMore:b.actions.loadMore,onRefresh:b.actions.refreshDocuments,presenceByDocument:C,onUploadClick:b.actions.handleUploadClick,onClearFilters:M,showNoDocuments:b.derived.showNoDocuments,showNoResults:b.derived.showNoResults,people:b.derived.people,onAssign:b.actions.assignDocument,onPickUp:b.actions.pickUpDocument}),b.state.previewOpen?a.jsx("div",{className:"border-t border-border bg-background px-6 pb-6 pt-4",children:a.jsx("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:a.jsx(R0,{workspaceId:t.id,document:b.derived.activeDocument,now:b.derived.now,activeSheetId:b.state.activeSheetId,onSheetChange:b.actions.setActiveSheetId,runs:b.derived.runs,runsLoading:b.derived.runsLoading,selectedRunId:b.derived.selectedRunId,onSelectRun:b.actions.selectRun,activeRun:b.derived.activeRun,runLoading:b.derived.runLoading,runMetrics:b.derived.runMetrics,outputUrl:b.derived.outputUrl,onDownloadOutput:b.actions.downloadOutput,onDownloadOriginal:b.actions.downloadOriginal,onReprocess:b.actions.reprocess,onArchive:Se=>{Se&&b.actions.archiveDocument(Se.id)},onRestore:Se=>{Se&&b.actions.restoreDocument(Se.id)},processingPaused:b.derived.processingPaused,people:b.derived.people,currentUserKey:b.derived.currentUserKey,currentUserLabel:u,onAssign:b.actions.assignDocument,onPickUp:b.actions.pickUpDocument,onCopyLink:b.actions.copyLink,comments:b.derived.activeComments,onAddComment:b.actions.addComment,onEditComment:b.actions.editComment,onDeleteComment:b.actions.deleteComment,onTagsChange:b.actions.updateTagsOptimistic,workbook:b.derived.workbook,workbookLoading:b.derived.workbookLoading,workbookError:b.derived.workbookError,onClose:de,detailsRequestId:E?.id??null,detailsRequestTab:E?.tab??null,onDetailsRequestHandled:()=>D(null)})})}):null]})]})}),a.jsx(Fz,{open:b.state.saveViewOpen,onClose:b.actions.closeSaveView,onSave:b.actions.saveView}),a.jsx(BO,{open:U,workspaceId:t.id,selectedCount:G.length,onClose:()=>z(!1),onApply:Se=>b.actions.bulkUpdateTags(Se)}),a.jsx(As,{open:!!V,title:V?.title??"Delete documents?",description:V?.description,confirmLabel:V?.confirmLabel??"Delete",onCancel:()=>R(null),onConfirm:he,tone:"danger"})]})}function w5(){return a.jsx(y5,{})}const Fo={search:"",status:"all",dateRange:"14d",configurationId:null},A1=[{value:"14d",label:"Last 14 days"},{value:"7d",label:"Last 7 days"},{value:"24h",label:"Last 24 hours"},{value:"30d",label:"Last 30 days"},{value:"custom",label:"Custom range"}],Pm={queued:{label:"Queued",badgeClass:"bg-muted text-muted-foreground",dotClass:"bg-muted-foreground",ringClass:"ring-border",textClass:"text-muted-foreground",surfaceClass:"bg-muted"},running:{label:"Running",badgeClass:"bg-info-100 text-info-700",dotClass:"bg-info-500",ringClass:"ring-info-200",textClass:"text-info-700",surfaceClass:"bg-info-50"},succeeded:{label:"Success",badgeClass:"bg-success-100 text-success-700",dotClass:"bg-success-500",ringClass:"ring-success-200",textClass:"text-success-700",surfaceClass:"bg-success-50"},failed:{label:"Failed",badgeClass:"bg-danger-100 text-danger-700",dotClass:"bg-danger-500",ringClass:"ring-danger-200",textClass:"text-danger-700",surfaceClass:"bg-danger-50"},cancelled:{label:"Cancelled",badgeClass:"bg-muted text-muted-foreground",dotClass:"bg-muted-foreground",ringClass:"ring-border",textClass:"text-muted-foreground",surfaceClass:"bg-muted"}};function j5({filters:e,configOptions:t,showingCount:r,totalCount:i,onChange:l,onReset:u}){return a.jsx("div",{className:"shrink-0 border-b border-border bg-card px-4 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-[1fr_1fr_1fr]",children:[a.jsx("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.dateRange,onChange:d=>l({dateRange:d.target.value}),children:A1.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))}),a.jsxs("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.status,onChange:d=>l({status:d.target.value}),children:[a.jsx("option",{value:"all",children:"Status: all"}),a.jsx("option",{value:"succeeded",children:"Success"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"running",children:"Running"}),a.jsx("option",{value:"queued",children:"Queued"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.jsxs("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.configurationId??"",onChange:d=>l({configurationId:d.target.value||null}),children:[a.jsx("option",{value:"",children:"Config: all"}),t.map(d=>a.jsx("option",{value:d.id,children:d.label},d.id))]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Showing ",a.jsx("span",{className:"font-semibold text-foreground",children:r})," of"," ",a.jsx("span",{className:"font-semibold text-foreground",children:i})]}),a.jsx(Ae,{size:"sm",variant:"ghost",onClick:u,children:"Reset"})]})]})})}function S5({onExport:e}){return a.jsx("header",{className:"shrink-0 border-b border-border bg-card",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-4 px-6 py-4",children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-border bg-muted text-foreground",children:a.jsx(Em,{className:"h-5 w-5"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Runs"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Monitor execution health, output quality, and mapping coverage."})]})]}),a.jsx("div",{className:"ml-auto flex flex-wrap items-center gap-3",children:a.jsx(Ae,{variant:"secondary",onClick:e,children:"Export"})})]})})}const N5=new Intl.NumberFormat("en-US");function ft(e){return e==null?"":N5.format(e)}function sg(e){return e==null?"":`${e}%`}function R1(e){return e==null||Number.isNaN(e)?"":e.toFixed(2)}function M1(e){if(!e)return null;const t=e.field_count_expected??null,r=e.field_count_detected??null;return!t||t<=0||r===null?null:Math.round(r/t*100)}function C5(e,t){if(typeof e=="number"&&Number.isFinite(e)){const r=Math.floor(e/60),i=Math.round(e%60);return r<=0?`${i}s`:`${r}m ${i}s`}return t==="queued"?"Queued":t==="running"?"Running":t==="cancelled"?"Cancelled":""}function _5(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function E5(e){return e.warnings===0&&e.errors===0?"Clean":typeof e.errors=="number"&&e.errors>0?`${e.errors} errors`:typeof e.warnings=="number"?`${e.warnings} warnings`:""}function k5(e){return!e||e==="all"?"all":["queued","running","succeeded","failed","cancelled"].includes(e)?e:"all"}function D5(e){return e&&["14d","7d","24h","30d","custom"].includes(e)?e:"14d"}function T5(e){let t=!1;const r={total:0,success:0,warning:null,failed:0,running:0,queued:0,cancelled:0,active:0};return e.forEach(i=>{r.total+=1,i.status==="succeeded"&&(r.success+=1),i.status==="failed"&&(r.failed+=1),i.status==="cancelled"&&(r.cancelled+=1),i.status==="running"&&(r.running+=1),i.status==="queued"&&(r.queued+=1),typeof i.warnings=="number"&&(t=!0,r.warning=(r.warning??0)+i.warnings)}),r.active=r.running+r.queued,t||(r.warning=null),r}function A5(e,t=new Date){if(e==="custom")return{};const r=new Date(t),i=new Date(t);return e==="24h"?i.setHours(i.getHours()-24):e==="7d"?i.setDate(i.getDate()-7):e==="30d"?i.setDate(i.getDate()-30):i.setDate(i.getDate()-14),{created_after:i.toISOString(),created_before:r.toISOString()}}function R5({counts:e,rangeLabel:t}){const r=e.success+e.failed+e.cancelled,i=e.failed+e.cancelled,l=r>0?Math.round(e.success/r*100):0,u=e.warning===null?"":ft(e.warning);return a.jsx("div",{className:"shrink-0 border-b border-border bg-card px-6 py-4",children:a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-[1.1fr_1fr_1fr_1fr_1fr]",children:[a.jsx(Fl,{label:"Total runs",value:ft(e.total),meta:t}),a.jsx(Fl,{label:"Active queue",value:ft(e.active),meta:`${ft(e.running)} running  ${ft(e.queued)} queued`,tone:"info"}),a.jsx(Fl,{label:"Success rate",value:`${l}%`,meta:`${ft(e.success)} of ${ft(r)} completed`,tone:"success"}),a.jsx(Fl,{label:"Failed",value:ft(i),meta:"Failed or cancelled runs",tone:"danger"}),a.jsx(Fl,{label:"Warnings",value:u,meta:"Validation warnings",tone:"warning"})]})})}function Fl({label:e,value:t,meta:r,tone:i="default"}){const l=i==="success"?"text-success-700":i==="warning"?"text-warning-700":i==="danger"?"text-danger-700":i==="info"?"text-info-700":"text-foreground";return a.jsxs("div",{className:"rounded-xl border border-border bg-background px-4 py-3",children:[a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:e}),a.jsx("p",{className:te("mt-1 text-2xl font-semibold",l),children:t}),a.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})}function M5({run:e,onClose:t,metrics:r,metricsLoading:i,metricsError:l,fields:u,fieldsLoading:d,fieldsError:h,columns:p,columnsLoading:x,columnsError:v}){const[b,y]=f.useState("summary"),S=f.useMemo(()=>{const _=r?.validation_issues_warning??r?.evaluation_findings_warning??e.warnings??null,N=r?.validation_issues_error??r?.evaluation_findings_error??e.errors??null,E=r?.row_count_total??e.rows??null,D=M1(r)??e.quality??null;return{warnings:_,errors:N,rows:E,quality:D}},[r,e.errors,e.quality,e.rows,e.warnings]),j=S.warnings===null?"Warnings data unavailable":`${ft(S.warnings)} warnings detected`,C=S.errors===null?"Errors data unavailable":`${ft(S.errors)} errors detected`;return a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:te("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",Pm[e.status].badgeClass),children:Pm[e.status].label}),a.jsx("h3",{className:"mt-2 text-base font-semibold text-foreground",children:e.inputName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.id})]}),a.jsxs("div",{className:"flex items-start gap-3 text-xs text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("p",{children:e.startedAtLabel}),a.jsx("p",{children:e.durationLabel})]}),t?a.jsx(Ae,{size:"sm",variant:"ghost",onClick:t,children:"Close preview"}):null]})]}),a.jsxs(Ed,{value:b,onValueChange:_=>y(_),children:[a.jsxs(kd,{className:"mt-4 flex flex-wrap gap-2 border-b border-border pb-2",children:[a.jsx($u,{value:"summary",label:"Summary",active:b==="summary"}),a.jsx($u,{value:"metrics",label:"Metrics",active:b==="metrics"}),a.jsx($u,{value:"fields",label:"Fields",active:b==="fields"}),a.jsx($u,{value:"columns",label:"Columns",active:b==="columns"})]}),a.jsx(ei,{value:"summary",className:"mt-4",children:a.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1.4fr_1fr]",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"grid gap-2 sm:grid-cols-4",children:[a.jsx(ni,{label:"Rows",value:ft(S.rows)}),a.jsx(ni,{label:"Quality",value:sg(S.quality)}),a.jsx(ni,{label:"Warnings",value:ft(S.warnings)}),a.jsx(ni,{label:"Errors",value:ft(S.errors)})]}),a.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-muted-foreground sm:grid-cols-2",children:[a.jsx(Ao,{label:"Output",value:e.outputName??"Output not available"}),a.jsx(Ao,{label:"Config",value:e.configLabel}),a.jsx(Ao,{label:"Trigger",value:e.triggerLabel}),a.jsx(Ao,{label:"Engine",value:e.engineLabel}),a.jsx(Ao,{label:"Region",value:e.regionLabel}),a.jsx(Ao,{label:"Owner",value:e.ownerLabel})]})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-background p-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Quick issues"}),a.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-muted-foreground",children:[a.jsx("li",{className:"rounded-lg border border-border bg-card px-2 py-2",children:j}),a.jsx("li",{className:"rounded-lg border border-border bg-card px-2 py-2",children:C}),a.jsxs("li",{className:"rounded-lg border border-border bg-card px-2 py-2",children:["Notes: ",e.notes??"No notes captured"]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[a.jsx(Ae,{size:"sm",variant:"secondary",children:"View logs"}),a.jsx(Ae,{size:"sm",variant:"ghost",children:"Open output"})]})]})]})}),a.jsx(ei,{value:"metrics",className:"mt-4",children:a.jsx(O5,{metrics:r,loading:i,error:l})}),a.jsx(ei,{value:"fields",className:"mt-4",children:a.jsx(z5,{fields:u,loading:d,error:h})}),a.jsx(ei,{value:"columns",className:"mt-4",children:a.jsx(L5,{columns:p,loading:x,error:v})})]})]})}function O5({metrics:e,loading:t,error:r}){if(t)return a.jsx(_r,{title:"Loading metrics",description:"Fetching run metrics and validation summary."});if(r)return a.jsx(_r,{title:"Unable to load metrics",description:"Refresh the page or try again later."});if(!e)return a.jsx(_r,{title:"Metrics not available yet",description:"Metrics appear after the run completes and the engine summary is captured."});const i=M1(e),l=[{label:"Outcome",value:e.evaluation_outcome??""},{label:"Findings total",value:ft(e.evaluation_findings_total)},{label:"Findings info",value:ft(e.evaluation_findings_info)},{label:"Findings warning",value:ft(e.evaluation_findings_warning)},{label:"Findings error",value:ft(e.evaluation_findings_error)}],u=[{label:"Issues total",value:ft(e.validation_issues_total)},{label:"Info",value:ft(e.validation_issues_info)},{label:"Warnings",value:ft(e.validation_issues_warning)},{label:"Errors",value:ft(e.validation_issues_error)},{label:"Max severity",value:e.validation_max_severity??""}],d=[{label:"Workbooks",value:ft(e.workbook_count)},{label:"Sheets",value:ft(e.sheet_count)},{label:"Tables",value:ft(e.table_count)},{label:"Rows",value:ft(e.row_count_total)},{label:"Empty rows",value:ft(e.row_count_empty)},{label:"Columns",value:ft(e.column_count_total)},{label:"Mapped columns",value:ft(e.column_count_mapped)},{label:"Unmapped columns",value:ft(e.column_count_unmapped)},{label:"Fields detected",value:`${ft(e.field_count_detected)} / ${ft(e.field_count_expected)}`},{label:"Cells non-empty",value:ft(e.cell_count_non_empty)},{label:"Cells total",value:ft(e.cell_count_total)}];return a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(ni,{label:"Evaluation",value:e.evaluation_outcome??""}),a.jsx(ni,{label:"Validation",value:e.validation_max_severity??""}),a.jsx(ni,{label:"Rows",value:ft(e.row_count_total)}),a.jsx(ni,{label:"Field coverage",value:sg(i)})]}),a.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1.2fr_1fr]",children:[a.jsx(hm,{title:"Validation issues",items:u}),a.jsx(hm,{title:"Evaluation findings",items:l})]}),a.jsx(hm,{title:"Structure and volume",items:d})]})}function z5({fields:e,loading:t,error:r}){if(t)return a.jsx(_r,{title:"Loading field detection",description:"Fetching per-field detection coverage."});if(r)return a.jsx(_r,{title:"Unable to load field detection",description:"Refresh the page or try again later."});if(!e)return a.jsx(_r,{title:"Field detection not available",description:"Field summaries appear once the run metrics are computed."});if(e.length===0)return a.jsx(_r,{title:"No fields detected",description:"No fields were detected for this run."});const i=e.filter(d=>d.detected).length,l=e.length-i,u=e.length>0?Math.round(i/e.length*100):null;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[a.jsx(zo,{label:"Total fields",value:ft(e.length)}),a.jsx(zo,{label:"Detected",value:ft(i)}),a.jsx(zo,{label:"Not detected",value:ft(l)}),a.jsx(zo,{label:"Coverage",value:sg(u)})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("div",{className:"min-w-[720px]",children:[a.jsxs("div",{className:"grid grid-cols-[1.6fr_120px_140px_120px_120px] border-b border-border bg-muted/40 px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("span",{children:"Field"}),a.jsx("span",{children:"Status"}),a.jsx("span",{children:"Best score"}),a.jsx("span",{children:"Tables"}),a.jsx("span",{children:"Columns"})]}),e.map(d=>a.jsx("div",{className:"border-b border-border/70 px-4 py-3",children:a.jsxs("div",{className:"grid grid-cols-[1.6fr_120px_140px_120px_120px] items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:d.label??d.field}),a.jsx("p",{className:"text-xs text-muted-foreground",children:d.field})]}),a.jsx(U5,{detected:d.detected}),a.jsx("span",{className:"text-xs text-foreground",children:R1(d.best_mapping_score)}),a.jsx("span",{className:"text-xs text-muted-foreground",children:ft(d.occurrences_tables)}),a.jsx("span",{className:"text-xs text-muted-foreground",children:ft(d.occurrences_columns)})]})},d.field))]})})]})}function L5({columns:e,loading:t,error:r}){if(t)return a.jsx(_r,{title:"Loading columns",description:"Fetching detected column headers."});if(r)return a.jsx(_r,{title:"Unable to load columns",description:"Refresh the page or try again later."});if(!e)return a.jsx(_r,{title:"Column mappings not available",description:"Column details appear once the run metrics are computed."});if(e.length===0)return a.jsx(_r,{title:"No columns",description:"No columns were detected for this run."});const i=e.reduce((l,u)=>{const d=z1(u.mapping_status);return l.total+=1,l[d]=(l[d]??0)+1,l},{total:0});return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[a.jsx(zo,{label:"Total columns",value:ft(i.total)}),Object.entries(O1).filter(([l])=>i[l]).map(([l,u])=>a.jsx(zo,{label:u.label,value:ft(i[l])},l))]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("div",{className:"min-w-[860px]",children:[a.jsxs("div",{className:"grid grid-cols-[1.5fr_1.4fr_140px_140px_120px_120px] border-b border-border bg-muted/40 px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("span",{children:"Location"}),a.jsx("span",{children:"Header"}),a.jsx("span",{children:"Status"}),a.jsx("span",{children:"Mapped field"}),a.jsx("span",{children:"Score"}),a.jsx("span",{children:"Non-empty"})]}),e.map((l,u)=>{const d=l.sheet_name??`Sheet ${l.sheet_index+1}`,h=`Table ${l.table_index+1}`,p=l.workbook_name??`Workbook ${l.workbook_index+1}`,x=l.header_raw??l.header_normalized??"",v=l.header_normalized,b=l.mapped_field??"";return a.jsx("div",{className:"border-b border-border/70 px-4 py-3",children:a.jsxs("div",{className:"grid grid-cols-[1.5fr_1.4fr_140px_140px_120px_120px] items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:d}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[p," / ",h]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:x}),v&&v!==x?a.jsx("p",{className:"text-xs text-muted-foreground",children:v}):null]}),a.jsx($5,{status:l.mapping_status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:b}),a.jsx("span",{className:"text-xs text-muted-foreground",children:R1(l.mapping_score)}),a.jsx("span",{className:"text-xs text-muted-foreground",children:ft(l.non_empty_cells)})]})},`${l.workbook_index}-${l.sheet_index}-${l.table_index}-${l.column_index}-${u}`)})]})})]})}function ni({label:e,value:t}){return a.jsxs("div",{className:"rounded-xl border border-border bg-background px-3 py-2",children:[a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:e}),a.jsx("p",{className:"mt-1 text-sm font-semibold text-foreground",children:t})]})}function Ao({label:e,value:t}){return a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border bg-background px-3 py-2",children:[a.jsx("span",{children:e}),a.jsx("span",{className:"text-foreground",children:t})]})}function hm({title:e,items:t}){return a.jsxs("div",{className:"rounded-xl border border-border bg-background p-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:t.map(r=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/70 bg-card px-3 py-2 text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:r.label}),a.jsx("span",{className:"text-foreground",children:r.value})]},r.label))})]})}function zo({label:e,value:t}){return a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-border bg-background px-3 py-1",children:[a.jsx("span",{children:e}),a.jsx("span",{className:"font-semibold text-foreground",children:t})]})}function U5({detected:e}){return a.jsx("span",{className:te("inline-flex items-center justify-center rounded-full px-2 py-1 text-[11px] font-semibold",e?"bg-success-100 text-success-700":"bg-muted text-muted-foreground"),children:e?"Detected":"Not detected"})}const O1={mapped:{label:"Mapped",className:"bg-success-100 text-success-700"},unmapped:{label:"Unmapped",className:"bg-muted text-muted-foreground"}};function $5({status:e}){const t=z1(e),r=O1[t];return a.jsx("span",{className:te("inline-flex items-center justify-center rounded-full px-2 py-1 text-[11px] font-semibold",r.className),children:r.label})}function z1(e){return e?.toLowerCase?.()==="mapped"?"mapped":"unmapped"}function $u({value:e,label:t,active:r}){return a.jsx(nc,{value:e,className:te("rounded-full border px-3 py-1 text-xs font-semibold transition",r?"border-transparent bg-brand-600 text-on-brand":"border-border bg-background text-muted-foreground"),children:t})}function _r({title:e,description:t}){return a.jsxs("div",{className:"rounded-xl border border-dashed border-border bg-background px-4 py-4",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:t})]})}const q5="button, a, input, select, textarea, [role='button'], [role='menuitem'], [data-ignore-row-click='true']";function B5(e){return e instanceof Element?!!e.closest(q5):!1}function P5({runs:e,activeId:t,onSelect:r,onNavigate:i,expandedId:l,expandedContent:u}){const d=f.useRef(null),h=f.useRef(new Map);f.useEffect(()=>{if(!t)return;const x=d.current,v=h.current.get(t);if(!x||!v)return;const b=v.offsetTop-x.offsetTop;x.scrollTo({top:Math.max(0,b)})},[t]);const p=x=>{if(!i||x.target?.closest("input, textarea, select, button, a, [role='button'], [role='menuitem']")||e.length===0||x.key!=="ArrowDown"&&x.key!=="ArrowUp")return;x.preventDefault();const b=e.findIndex(S=>S.id===t);if(b<0){i(e[0].id);return}const y=x.key==="ArrowDown"?Math.min(e.length-1,b+1):Math.max(0,b-1);i(e[y].id)};return a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-card",children:[a.jsx("div",{className:"shrink-0 border-b border-border bg-background/40 px-6 py-2 text-[11px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:a.jsxs("div",{className:"grid grid-cols-[120px_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.8fr)_minmax(0,0.8fr)_minmax(0,0.6fr)_minmax(0,0.8fr)_minmax(0,0.6fr)] items-center gap-3",children:[a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Input"}),a.jsx("div",{children:"Config"}),a.jsx("div",{children:"Started"}),a.jsx("div",{className:"text-right",children:"Duration"}),a.jsx("div",{className:"text-right",children:"Result"}),a.jsx("div",{className:"text-right",children:"Rows"}),a.jsx("div",{children:"Owner"}),a.jsx("div",{className:"text-right",children:"Actions"})]})}),a.jsx("div",{ref:d,className:"flex-1 min-h-0 overflow-y-auto px-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",tabIndex:0,role:"listbox","aria-label":"Runs",onKeyDown:p,children:a.jsx("div",{className:"flex flex-col",children:e.map(x=>{const v=Pm[x.status],b=t===x.id,y=!!(u&&l===x.id),S=`runs-preview-${x.id}`,j=C=>{C.key!=="Enter"&&C.key!==" "||C.currentTarget===C.target&&(C.preventDefault(),r(x.id))};return a.jsxs("div",{ref:C=>{C?h.current.set(x.id,C):h.current.delete(x.id)},className:"border-b border-border/70",children:[a.jsxs("div",{role:"option",tabIndex:0,onKeyDown:j,onClick:C=>{B5(C.target)||r(x.id)},className:te("grid cursor-pointer grid-cols-[120px_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.8fr)_minmax(0,0.8fr)_minmax(0,0.6fr)_minmax(0,0.8fr)_minmax(0,0.6fr)] items-center gap-3 py-3 text-left text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",b?"bg-brand-50 dark:bg-brand-500/20":"hover:bg-background dark:hover:bg-muted/40"),"aria-selected":b,"aria-expanded":y,"aria-controls":y?S:void 0,children:[a.jsxs("div",{className:"inline-flex items-center gap-2 text-xs font-semibold text-foreground",children:[a.jsx("span",{className:te("h-2.5 w-2.5 rounded-full",v.dotClass)}),v.label]}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate font-semibold text-foreground",children:x.inputName}),a.jsx("p",{className:"truncate text-[11px] text-muted-foreground",children:x.id})]}),a.jsx("span",{className:"truncate text-xs text-foreground",children:x.configLabel}),a.jsx("span",{className:"text-xs text-muted-foreground",children:x.startedAtLabel}),a.jsx("span",{className:"text-right text-sm text-muted-foreground",children:x.durationLabel}),a.jsx("div",{className:"flex justify-end",children:a.jsx(F5,{run:x})}),a.jsx("span",{className:"text-right text-sm text-foreground",children:ft(x.rows)}),a.jsx("span",{className:"truncate text-sm text-foreground",children:x.ownerLabel}),a.jsxs("div",{className:"flex items-center justify-end gap-2","data-ignore-row-click":!0,children:[a.jsx(B0,{label:"View logs",href:x.raw.links?.logs??null,icon:a.jsx(YD,{className:"h-4 w-4"})}),a.jsx(B0,{label:x.raw.output?.ready?"Open output":"Output not ready",href:x.raw.output?.ready?x.raw.links?.output_download??x.raw.links?.output??null:null,icon:a.jsx(XD,{className:"h-4 w-4"})})]})]}),y?a.jsx("div",{id:S,role:"region","aria-label":`Run details for ${x.inputName}`,className:"bg-background/60 px-6 pb-4 pt-2",children:a.jsx("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:u})}):null]},x.id)})})})]})}function F5({run:e}){const t=E5(e),r=t==="",i=t==="Clean",l=typeof e.errors=="number"&&e.errors>0?"bg-danger-100 text-danger-700":typeof e.warnings=="number"&&e.warnings>0?"bg-warning-100 text-warning-700":i?"bg-success-100 text-success-700":"bg-muted text-muted-foreground";return a.jsx("span",{className:te("inline-flex items-center justify-center rounded-full px-2 py-1 text-[11px] font-semibold",l,r?"opacity-70":""),children:t})}function B0({label:e,href:t,icon:r}){return t?a.jsx("a",{href:t,onClick:i=>i.stopPropagation(),target:"_blank",rel:"noreferrer","aria-label":e,title:e,className:te("inline-flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-card text-muted-foreground transition","hover:bg-background hover:text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background"),children:r}):a.jsx("button",{type:"button",onClick:i=>i.stopPropagation(),disabled:!0,"aria-label":e,title:e,className:te("inline-flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-card text-muted-foreground/60","cursor-not-allowed"),children:r})}const I5=50,Zs={root:()=>["runs"],workspace:e=>[...Zs.root(),e],list:(e,t)=>[...Zs.workspace(e),"list",t],run:e=>[...Zs.root(),"run",e],metrics:e=>[...Zs.run(e),"metrics"],fields:e=>[...Zs.run(e),"fields"],columns:(e,t)=>[...Zs.run(e),"columns",t??{}]};async function H5(e,t,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/runs",{params:{path:{workspace_id:e},query:t},signal:r});if(!i)throw new Error("Expected run page payload.");return i}async function V5(e,t){try{const{data:r}=await Ve.GET("/api/v1/runs/{run_id}/metrics",{params:{path:{run_id:e}},signal:t});if(!r)throw new Error("Expected run metrics payload.");return r}catch(r){if(r instanceof Ht&&r.status===404)return null;throw r}}async function Q5(e,t){try{const{data:r}=await Ve.GET("/api/v1/runs/{run_id}/fields",{params:{path:{run_id:e}},signal:t});if(!r)throw new Error("Expected run fields payload.");return r}catch(r){if(r instanceof Ht&&r.status===404)return null;throw r}}async function Z5(e,t,r){try{const{data:i}=await Ve.GET("/api/v1/runs/{run_id}/columns",{params:{path:{run_id:e},query:t??void 0},signal:r});if(!i)throw new Error("Expected run columns payload.");return i}catch(i){if(i instanceof Ht&&i.status===404)return null;throw i}}function K5(e){const t=e.input?.filename??e.input?.document_id??`Run ${e.id}`,r=e.output?.filename??null,i=_5(e.started_at??e.created_at),l=C5(e.duration_seconds??null,e.status),u=e.config_version??e.configuration_id??"";return{id:e.id,configurationId:e.configuration_id,status:e.status,inputName:t,outputName:r,configLabel:u,startedAtLabel:i,durationLabel:l,rows:null,warnings:null,errors:null,quality:null,ownerLabel:"",triggerLabel:"",engineLabel:e.engine_version??"",regionLabel:"",notes:e.failure_message??null,raw:e}}function G5({workspaceId:e,initialFilters:t}){const[r,i]=f.useState(t??Fo),[l,u]=f.useState(null),[d,h]=f.useState(!1),p=f.useMemo(()=>{const B=A5(r.dateRange),T=r.search.trim();return{page:1,page_size:I5,include_total:!0,q:T.length>=2?T:void 0,status:r.status!=="all"?r.status:void 0,configuration_id:r.configurationId??void 0,sort:"-created_at",...B}},[r.configurationId,r.dateRange,r.search,r.status]),x=yn({queryKey:Zs.list(e,p),queryFn:({signal:B})=>H5(e,p,B),enabled:!!e,staleTime:15e3}),v=f.useMemo(()=>(x.data?.items??[]).map(B=>K5(B)),[x.data?.items]),b=f.useMemo(()=>T5(v),[v]),y=f.useMemo(()=>{const B=new Map;return v.forEach(T=>{if(!T.configurationId)return;const K=T.configLabel&&T.configLabel!==""?T.configLabel:T.configurationId;B.set(T.configurationId,K)}),Array.from(B,([T,K])=>({id:T,label:K})).sort((T,K)=>T.label.localeCompare(K.label))},[v]),S=f.useMemo(()=>l?v.find(B=>B.id===l)??null:null,[l,v]),j=!!(l&&d),C=d&&S?S.status==="running"||S.status==="queued":!1,_=yn({queryKey:l?Zs.metrics(l):[...Zs.root(),"metrics","none"],queryFn:({signal:B})=>l?V5(l,B):Promise.resolve(null),enabled:j,staleTime:3e4,refetchInterval:C?1e4:!1}),N=yn({queryKey:l?Zs.fields(l):[...Zs.root(),"fields","none"],queryFn:({signal:B})=>l?Q5(l,B):Promise.resolve(null),enabled:j,staleTime:3e4,refetchInterval:C?1e4:!1}),E=yn({queryKey:l?Zs.columns(l,null):[...Zs.root(),"columns","none"],queryFn:({signal:B})=>l?Z5(l,null,B):Promise.resolve(null),enabled:j,staleTime:3e4,refetchInterval:C?1e4:!1}),D=f.useCallback(B=>{i(T=>({...T,...B}))},[]),U=f.useCallback(B=>{i(B)},[]),z=f.useCallback(()=>{i(Fo)},[]),V=f.useCallback(B=>{u(B),h(!0)},[]),R=f.useCallback(()=>{h(!1)},[]),A=f.useCallback(B=>{if(d&&l===B){h(!1);return}u(B),h(!0)},[l,d]);return{state:{filters:r,activeId:l,previewOpen:d},derived:{runs:v,visibleRuns:v,counts:b,configOptions:y,activeRun:S,isLoading:x.isLoading,isError:x.isError,totalCount:x.data?.total??x.data?.items?.length??0,metrics:_.data??null,metricsLoading:_.isLoading,metricsError:_.isError,fields:N.data??null,fieldsLoading:N.isLoading,fieldsError:N.isError,columns:E.data??null,columnsLoading:E.isLoading,columnsError:E.isError},actions:{updateFilters:D,setFilters:U,resetFilters:z,openPreview:V,closePreview:R,togglePreview:A,setActiveId:u,refetch:x.refetch}}}function W5(){const{workspace:e}=Tr(),t=es(),r=en(),i=f.useMemo(()=>Y5(t.search),[t.search]),l=f.useMemo(()=>new URLSearchParams(t.search).get("run"),[t.search]),u=G5({workspaceId:e.id,initialFilters:i}),d=u.state.previewOpen?u.state.activeId:null;f.useEffect(()=>{J5(u.state.filters,i)||u.actions.setFilters(i)},[u.actions,u.state.filters,i]),f.useEffect(()=>{if(!l){u.state.previewOpen&&u.actions.closePreview();return}(u.state.activeId!==l||!u.state.previewOpen)&&u.actions.openPreview(l)},[u.actions,u.state.activeId,u.state.previewOpen,l]);const h=f.useCallback((y,S)=>{const j=X5(y,S),C=`${t.pathname}${j?`?${j}`:""}${t.hash??""}`,_=`${t.pathname}${t.search}${t.hash??""}`;C!==_&&r(C,{replace:!0})},[t.hash,t.pathname,t.search,r]),p=f.useCallback(()=>{u.actions.closePreview(),h(u.state.filters,null)},[u.actions,u.state.filters,h]);f.useEffect(()=>{const y=S=>{if(S.key!=="Escape"||!u.state.previewOpen)return;const j=S.target;j&&(j.tagName==="INPUT"||j.tagName==="TEXTAREA"||j.isContentEditable)||p()};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[p,u.state.previewOpen]);const x=y=>{if(u.state.previewOpen&&u.state.activeId===y){p();return}u.actions.openPreview(y),h(u.state.filters,y)},v=y=>{const S={...u.state.filters,...y};u.actions.setFilters(S),h(S,u.state.previewOpen?u.state.activeId:null)},b=()=>{u.actions.resetFilters(),h(Fo,u.state.previewOpen?u.state.activeId:null)};return a.jsxs("div",{className:"runs flex min-h-0 flex-1 flex-col bg-background text-foreground",children:[a.jsx(S5,{onExport:()=>{}}),a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:a.jsxs("section",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:[a.jsx(R5,{counts:u.derived.counts,rangeLabel:e6(u.state.filters.dateRange)}),a.jsx(j5,{filters:u.state.filters,configOptions:u.derived.configOptions,showingCount:u.derived.visibleRuns.length,totalCount:u.derived.totalCount,onChange:v,onReset:b}),u.derived.isLoading?a.jsx("div",{className:"flex-1 bg-card px-6 py-10",children:a.jsx(Dt,{title:"Loading runs",variant:"loading"})}):u.derived.isError?a.jsx("div",{className:"flex-1 bg-card px-6 py-10",children:a.jsx(Dt,{title:"Unable to load runs",description:"Refresh the page or try again later.",variant:"error"})}):u.derived.visibleRuns.length===0?a.jsx("div",{className:"flex-1 bg-card px-6 py-10",children:a.jsx(Dt,{title:"No runs found",description:"Try adjusting filters or clearing them.",variant:"empty"})}):a.jsx(P5,{runs:u.derived.visibleRuns,activeId:d,onSelect:x,onNavigate:u.actions.setActiveId,expandedId:d,expandedContent:u.state.previewOpen&&u.derived.activeRun?a.jsx(M5,{run:u.derived.activeRun,metrics:u.derived.metrics,metricsLoading:u.derived.metricsLoading,metricsError:u.derived.metricsError,fields:u.derived.fields,fieldsLoading:u.derived.fieldsLoading,fieldsError:u.derived.fieldsError,columns:u.derived.columns,columnsLoading:u.derived.columnsLoading,columnsError:u.derived.columnsError,onClose:p}):null})]})})]})}function Y5(e){const t=new URLSearchParams(e),r=t.get("q")??Fo.search,i=k5(t.get("status")),l=D5(t.get("range")),u=t.get("configuration_id");return{search:r,status:i,dateRange:l,configurationId:u||null}}function X5(e,t){const r=new URLSearchParams;return e.search.trim()&&r.set("q",e.search.trim()),e.status!==Fo.status&&r.set("status",e.status),e.dateRange!==Fo.dateRange&&r.set("range",e.dateRange),e.configurationId&&r.set("configuration_id",e.configurationId),t&&r.set("run",t),r.toString()}function J5(e,t){return e.search===t.search&&e.status===t.status&&e.dateRange===t.dateRange&&e.configurationId===t.configurationId}function e6(e){return A1.find(t=>t.value===e)?.label??"Selected range"}function Vu({status:e}){const t=e.toLowerCase(),r=t==="active"?"Active":t==="draft"?"Draft":t==="archived"?"Archived":e,i=t==="active"?"bg-success-100 text-success-700":t==="draft"?"bg-warning-100 text-warning-700":"bg-muted text-foreground";return a.jsx("span",{className:te("rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide",i),title:r,children:r})}const t6="Default template",Il=(e,t)=>`/workspaces/${e}/config-builder/${encodeURIComponent(t)}`;function n6(){const{workspace:e}=Tr(),t=en(),{notifyToast:r}=Md(),i=f.useMemo(()=>h1(e.id),[e.id]),l=f.useMemo(()=>Bp(e.id),[e.id]),u=Rd({workspaceId:e.id}),{refetch:d}=u,h=Qz(e.id),p=Q4(e.id),x=$p(e.id),v=i1(e.id),b=qp(e.id),[y,S]=f.useState(()=>`${e.name} Config`),[j,C]=f.useState(null),[_,N]=f.useState(()=>`${e.name} Import`),[E,D]=f.useState(null),[U,z]=f.useState(null),[V,R]=f.useState(()=>l.get()),A=f.useRef(null),B=f.useRef(null),T=f.useMemo(()=>(u.data?.items??[]).filter(we=>!("deleted_at"in we&&we.deleted_at)),[u.data]),K=f.useMemo(()=>{const we=new Map;for(const He of T)we.set(He.id,$o(He.status));return we},[T]),$=f.useMemo(()=>{for(const we of T)if(K.get(we.id)==="active")return we;return null},[T,K]),q=f.useMemo(()=>T.filter(we=>K.get(we.id)==="draft").sort((we,He)=>g0(we.updated_at,He.updated_at)),[T,K]),I=f.useMemo(()=>T.filter(we=>K.get(we.id)==="archived").sort((we,He)=>g0(we.updated_at,He.updated_at)),[T,K]),je=f.useMemo(()=>T.find(we=>we.id===V?.configId)??null,[T,V]),M=f.useCallback(we=>{R(Pp(l,we))},[l]);f.useEffect(()=>{R(l.get())},[l]),f.useEffect(()=>{const we=B.current,He=we?.id!==e.id,vt=we?.name!==e.name;if(!(!He&&!vt)){if(B.current={id:e.id,name:e.name},He){S(`${e.name} Config`),C(null),N(`${e.name} Import`),D(null),z(null),A.current&&(A.current.value="");return}vt&&(S(lt=>lt===`${we?.name??""} Config`?`${e.name} Config`:lt),N(lt=>lt===`${we?.name??""} Import`?`${e.name} Import`:lt))}},[e.id,e.name]),f.useEffect(()=>{if(typeof window>"u")return;const we=He=>{if(!(He.storageArea!==window.localStorage||He.key!==i))try{R(He.newValue?JSON.parse(He.newValue):null)}catch{R(null)}};return window.addEventListener("storage",we),()=>window.removeEventListener("storage",we)},[i]),f.useEffect(()=>{V?.configId&&(T.some(we=>we.id===V.configId)||M(null))},[T,V?.configId,M]);const H=f.useCallback(we=>{M(we),t(Il(e.id,we))},[t,M,e.id]),ee=f.useCallback(we=>{M(we),t(`${Il(e.id,we)}/editor`)},[t,M,e.id]),[be,de]=f.useState(null),L=f.useMemo(()=>be?T.find(we=>we.id===be.configId)??null:null,[T,be]),[W,pe]=f.useState(null),G=f.useCallback(async we=>{pe(we.id);try{const He=await Up(e.id,we.id),vt=He.filename??`${we.id}.zip`,lt=URL.createObjectURL(He.blob),yt=document.createElement("a");yt.href=lt,yt.download=vt,yt.click(),URL.revokeObjectURL(lt),r({title:`Exported ${vt}`,intent:"success",duration:4e3})}catch(He){const vt=He instanceof Error?He.message:"Unable to export configuration.";r({title:vt,intent:"danger",duration:6e3})}finally{pe(He=>He===we.id?null:He)}},[r,e.id]),[ie,J]=f.useState(null),ne=f.useMemo(()=>ie?T.find(we=>we.id===ie)??null:null,[T,ie]),oe=f.useMemo(()=>new Set(T.map(we=>we.display_name.trim().toLowerCase())),[T]),[he,ue]=f.useState(""),[Oe,Ge]=f.useState(null),Se=f.useCallback(we=>{b.reset(),Ge(null),ue(Fp(we.display_name,oe)),J(we.id)},[b,oe]),[ze,Pe]=f.useState(null),Me=f.useMemo(()=>ze?T.find(we=>we.id===ze)??null:null,[ze,T]),[Be,We]=f.useState(null),st=f.useMemo(()=>Be?T.find(we=>we.id===Be)??null:null,[T,Be]),P=st?.id??null,[F,X]=f.useState(null);f.useEffect(()=>{if(!P){X(null);return}let we=!1;return X({stage:"checking"}),Lp(e.id,P).then(He=>{if(!we){if(Array.isArray(He.issues)&&He.issues.length>0){X({stage:"issues",issues:He.issues});return}X({stage:"confirm"})}}).catch(He=>{if(we)return;const vt=He instanceof Error?He.message:"Unable to validate configuration.";X({stage:"error",message:vt})}),()=>{we=!0}},[P,e.id]);const Te=f.useCallback(we=>{x.reset(),X({stage:"checking"}),We(we.id)},[x]),_e=f.useCallback(()=>{We(null),X(null)},[]),me=f.useCallback(()=>{J(null),Ge(null)},[]),De=f.useCallback(()=>{Pe(null)},[]),ye=f.useCallback(()=>{st&&x.mutate({configurationId:st.id},{onSuccess(){r({title:"Configuration is now active.",intent:"success",duration:4e3}),_e(),d()},onError(we){r({title:we instanceof Error?we.message:"Unable to make configuration active.",intent:"danger",duration:6e3})}})},[_e,x,st,r,d]),ke=f.useCallback(()=>{Me&&v.mutate({configurationId:Me.id},{onSuccess(){r({title:"Active configuration archived.",intent:"success",duration:4e3}),De(),d()},onError(we){r({title:we instanceof Error?we.message:"Unable to archive configuration.",intent:"danger",duration:6e3})}})},[v,Me,De,r,d]),Ie=f.useCallback(()=>{if(!ne)return;const we=he.trim();if(!we){Ge("Enter a name for the new draft configuration.");return}Ge(null),b.mutate({sourceConfigurationId:ne.id,displayName:we},{onSuccess(He){M(He.id),r({title:"Draft created.",intent:"success",duration:3500}),me(),t(`${Il(e.id,He.id)}/editor`)},onError(He){const vt=He instanceof Error?He.message:"Unable to duplicate configuration.";Ge(vt)}})},[me,b,he,ne,t,r,M,e.id]),ht=f.useCallback((we,He)=>{we.preventDefault(),we.stopPropagation();const vt=we.currentTarget.getBoundingClientRect();de({configId:He,x:vt.right+8,y:vt.bottom})},[]),tt=f.useMemo(()=>{if(!L)return[];const we=K.get(L.id)??$o(L.status),He=W===L.id,vt=[{id:"open-editor",label:"Open editor",onSelect:()=>ee(L.id)},{id:"export",label:He?"Exporting":"Export",onSelect:()=>{G(L)},disabled:He},{id:"duplicate",label:"Duplicate to edit",onSelect:()=>Se(L),dividerAbove:!0}];return we==="active"&&vt.push({id:"archive",label:"Archive",onSelect:()=>Pe(L.id),danger:!0,dividerAbove:!0}),vt},[L,W,G,ee,K,Se]),An=f.useCallback(we=>{z(null),D(we.target.files?.[0]??null),we.target.value=""},[]),Ut=we=>{we.preventDefault();const He=y.trim();if(!He){C("Enter a display name for the configuration.");return}C(null),h.mutate({displayName:He,source:{type:"template"}},{onSuccess(vt){M(vt.id),t(Il(e.id,vt.id))}})},At=we=>{we.preventDefault();const He=_.trim();if(!He){z("Enter a display name for the imported configuration.");return}if(!E){z("Select a .zip file to import.");return}z(null),p.mutate({displayName:He,file:E},{onSuccess(vt){M(vt.id),D(null),u.refetch(),t(Il(e.id,vt.id))},onError(vt){z(vt instanceof Error?vt.message:"Unable to import configuration.")}})},$t=j??(h.error instanceof Error?h.error.message:null),Ze=y.trim().length>0&&!h.isPending,pn=_.trim().length>0&&!!E&&!p.isPending,Rn=we=>a.jsx(Pt,{label:"Template",children:a.jsx(kt,{value:t6,readOnly:!0,disabled:we})});return u.isLoading?a.jsx(Dt,{variant:"loading",title:"Loading configurations",description:"Fetching workspace configurations"}):u.isError?a.jsx(Dt,{variant:"error",title:"Unable to load configurations",description:"Try refreshing the page."}):T.length===0?a.jsx(Dt,{className:"mx-auto w-full max-w-xl",title:"Create your first configuration",description:"Copy a starter template into this workspace to begin editing detectors, hooks, and manifests.",action:a.jsxs("div",{className:"space-y-6 text-left",children:[a.jsxs("form",{onSubmit:Ut,className:"space-y-4 rounded-xl border border-border bg-card p-4 shadow-sm",children:[a.jsx(Pt,{label:"Configuration name",required:!0,children:a.jsx(kt,{value:y,onChange:we=>S(we.target.value),placeholder:"Membership normalization",disabled:h.isPending})}),Rn(h.isPending),$t?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:$t}):null,a.jsx(Ae,{type:"submit",className:"w-full",disabled:!Ze,isLoading:h.isPending,children:"Create from template"})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-card p-4 shadow-sm",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-base font-semibold text-foreground",children:"Import configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),a.jsxs("form",{onSubmit:At,className:"mt-3 space-y-4",children:[a.jsx(Pt,{label:"Configuration name",required:!0,children:a.jsx(kt,{value:_,onChange:we=>N(we.target.value),placeholder:"Imported configuration",disabled:p.isPending})}),a.jsxs(Pt,{label:"Archive (.zip)",required:!0,children:[a.jsx(kt,{type:"file",ref:A,accept:".zip",onChange:An,disabled:p.isPending}),E?a.jsx("p",{className:"mt-1 text-xs text-muted-foreground","aria-live":"polite",children:E.name}):null]}),U?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:U}):null,a.jsx(Ae,{type:"submit",className:"w-full",disabled:!pn,isLoading:p.isPending,children:"Import archive"})]})]})]})}):a.jsxs("div",{className:"grid gap-6 p-4 lg:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",children:[a.jsxs("section",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Configurations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage draft, active, and archived configurations for this workspace."})]}),je?a.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>H(je.id),children:"Resume last opened"}):null]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-xl border border-border",children:[a.jsx("div",{className:"border-b border-border px-4 py-3",children:a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Active configuration"})}),$?a.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-background",children:[a.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onClick:()=>H($.id),children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:$.display_name}),a.jsx(Vu,{status:$.status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Used for extraction runs"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Updated ",mm($.updated_at)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[a.jsx(Ae,{size:"sm",onClick:we=>{we.stopPropagation(),Se($)},children:"Duplicate to edit"}),a.jsx(Ae,{size:"sm",variant:"ghost",onClick:we=>ht(we,$.id),children:""})]})]}):a.jsxs("div",{className:"space-y-2 p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"No active configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Extraction runs will be blocked until you make a draft configuration active."})]})]}),a.jsxs("div",{className:"rounded-xl border border-border",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[a.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:["Drafts (",q.length,")"]}),q.length===0&&$?a.jsx("p",{className:"text-xs text-muted-foreground",children:"Duplicate Active to start editing."}):null]}),q.length?a.jsx("div",{className:"divide-y divide-border",children:q.map(we=>a.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-background",children:[a.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onClick:()=>H(we.id),children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:we.display_name}),a.jsx(Vu,{status:we.status}),je?.id===we.id?a.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-brand-600",children:"Last opened"}):null]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Updated ",mm(we.updated_at)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[a.jsx(Ae,{size:"sm",variant:"secondary",onClick:He=>{He.stopPropagation(),Te(we)},children:"Make active"}),a.jsx(Ae,{size:"sm",variant:"ghost",onClick:He=>ht(He,we.id),children:""})]})]},we.id))}):a.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No draft configurations."})]}),a.jsxs("div",{className:"rounded-xl border border-border",children:[a.jsx("div",{className:"border-b border-border px-4 py-3",children:a.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:["Archived (",I.length,")"]})}),I.length?a.jsx("div",{className:"divide-y divide-border",children:I.map(we=>a.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-background",children:[a.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onClick:()=>H(we.id),children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:we.display_name}),a.jsx(Vu,{status:we.status})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Updated ",mm(we.updated_at)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[a.jsx(Ae,{size:"sm",onClick:He=>{He.stopPropagation(),Se(we)},children:"Duplicate to edit"}),a.jsx(Ae,{size:"sm",variant:"ghost",onClick:He=>ht(He,we.id),children:""})]})]},we.id))}):a.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No archived configurations."})]})]})]}),a.jsxs("aside",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-sm",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"New configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Copy the starter template to begin editing detectors, hooks, and manifests."})]}),a.jsxs("form",{onSubmit:Ut,className:"space-y-4",children:[a.jsx(Pt,{label:"Configuration name",required:!0,children:a.jsx(kt,{value:y,onChange:we=>S(we.target.value),placeholder:"Membership normalization",disabled:h.isPending})}),Rn(h.isPending),$t?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:$t}):null,a.jsx(Ae,{type:"submit",className:"w-full",disabled:!Ze,isLoading:h.isPending,children:"Create from template"})]}),a.jsxs("div",{className:"border-t border-border pt-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Import configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),a.jsxs("form",{onSubmit:At,className:"mt-3 space-y-4",children:[a.jsx(Pt,{label:"Configuration name",required:!0,children:a.jsx(kt,{value:_,onChange:we=>N(we.target.value),placeholder:"Imported configuration",disabled:p.isPending})}),a.jsxs(Pt,{label:"Archive (.zip)",required:!0,children:[a.jsx(kt,{type:"file",ref:A,accept:".zip",onChange:An,disabled:p.isPending}),E?a.jsx("p",{className:"mt-1 text-xs text-muted-foreground","aria-live":"polite",children:E.name}):null]}),U?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:U}):null,a.jsx(Ae,{type:"submit",className:"w-full",disabled:!pn,isLoading:p.isPending,children:"Import archive"})]})]})]}),a.jsx(kr,{open:!!be,position:be?{x:be.x,y:be.y}:null,onClose:()=>de(null),items:tt,appearance:"light"}),a.jsx(As,{open:!!st,title:F?.stage==="checking"?"Checking configuration":F?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:F?.stage==="checking"?"Running validation before activation.":F?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":$&&st?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${$.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:F?.stage==="issues"?"Open editor":F?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:_e,onConfirm:()=>{if(!st){_e();return}if(F?.stage==="issues"){_e(),ee(st.id);return}if(F?.stage==="error"){_e();return}ye()},isConfirming:x.isPending,confirmDisabled:F?.stage==="checking"||x.isPending,children:F?.stage==="checking"?a.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-border border-t-brand-600","aria-hidden":"true"}),a.jsx("span",{children:"Validating"})]}):F?.stage==="issues"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Issues:"}),a.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-border bg-background p-3 text-xs text-foreground",children:F.issues.map(we=>a.jsxs("li",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:we.path}),a.jsx("p",{className:"text-muted-foreground",children:we.message})]},`${we.path}:${we.message}`))})]}):F?.stage==="error"?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:F.message}):null}),a.jsx(As,{open:!!Me,title:"Archive active configuration?",description:"This will leave the workspace with no active configuration. Extraction runs will be blocked until you make a draft active.",confirmLabel:"Archive",cancelLabel:"Cancel",tone:"danger",onCancel:De,onConfirm:ke,isConfirming:v.isPending,confirmDisabled:v.isPending,children:v.error?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:v.error instanceof Error?v.error.message:"Unable to archive configuration."}):null}),a.jsxs(As,{open:!!ne,title:"Duplicate configuration",description:ne?`Create a new draft based on ${ne.display_name}.`:void 0,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:me,onConfirm:Ie,isConfirming:b.isPending,confirmDisabled:b.isPending||he.trim().length===0,children:[a.jsx(Pt,{label:"New configuration name",required:!0,children:a.jsx(kt,{value:he,onChange:we=>ue(we.target.value),placeholder:"Copy of My Config",disabled:b.isPending})}),Oe?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:Oe}):null]})]})}function mm(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function s6({params:e}={}){const{workspace:t}=Tr(),r=en(),{notifyToast:i}=Md(),l=e?.configId,u=f.useMemo(()=>Bp(t.id),[t.id]),d=a1({workspaceId:t.id,configurationId:l}),{refetch:h}=d,p=Rd({workspaceId:t.id}),{refetch:x}=p,v=d.data,b=v?.id??l??"",y=$o(v?.status),S=y==="draft";f.useEffect(()=>{!l||!v||Pp(u,l)},[l,v,u]);const j=b?`/workspaces/${t.id}/config-builder/${encodeURIComponent(b)}`:"",C=f.useCallback(()=>{j&&r(`${j}/editor`)},[j,r]),_=f.useMemo(()=>{const ue=p.data?.items??[];for(const Oe of ue)if($o(Oe.status)==="active")return Oe;return null},[p.data?.items]),N=f.useMemo(()=>{const ue=p.data?.items??[];return new Set(ue.map(Oe=>Oe.display_name.trim().toLowerCase()))},[p.data?.items]),[E,D]=f.useState(null),U=f.useCallback(ue=>{ue.preventDefault();const Oe=ue.currentTarget.getBoundingClientRect();D({x:Oe.right+8,y:Oe.bottom})},[]),[z,V]=f.useState(!1),R=f.useCallback(async()=>{if(v){V(!0);try{const ue=await Up(t.id,v.id),Oe=ue.filename??`${v.id}.zip`,Ge=URL.createObjectURL(ue.blob),Se=document.createElement("a");Se.href=Ge,Se.download=Oe,Se.click(),URL.revokeObjectURL(Ge),i({title:`Exported ${Oe}`,intent:"success",duration:4e3})}catch(ue){const Oe=ue instanceof Error?ue.message:"Unable to export configuration.";i({title:Oe,intent:"danger",duration:6e3})}finally{V(!1)}}},[v,i,t.id]),A=$p(t.id),B=i1(t.id),T=qp(t.id),[K,$]=f.useState(!1),[q,I]=f.useState(null);f.useEffect(()=>{if(!K||!v||!S)return;let ue=!1;return I({stage:"checking"}),Lp(t.id,v.id).then(Oe=>{if(!ue){if(Array.isArray(Oe.issues)&&Oe.issues.length>0){I({stage:"issues",issues:Oe.issues});return}I({stage:"confirm"})}}).catch(Oe=>{if(ue)return;const Ge=Oe instanceof Error?Oe.message:"Unable to validate configuration.";I({stage:"error",message:Ge})}),()=>{ue=!0}},[v,S,K,t.id]);const je=f.useCallback(()=>{A.reset(),I({stage:"checking"}),$(!0)},[A]),[M,H]=f.useState(!1),[ee,be]=f.useState(""),[de,L]=f.useState(null),W=f.useCallback(()=>{v&&(T.reset(),L(null),be(Fp(v.display_name,N)),H(!0))},[v,T,N]),[pe,G]=f.useState(!1),ie=f.useCallback(()=>{B.reset(),G(!0)},[B]),J=f.useMemo(()=>{const ue=[{id:"export",label:z?"Exporting":"Export",onSelect:()=>void R(),disabled:z},{id:"duplicate",label:"Duplicate to edit",onSelect:W,dividerAbove:!0}];return y==="active"&&ue.push({id:"archive",label:"Archive",onSelect:ie,danger:!0,dividerAbove:!0}),ue},[z,R,ie,W,y]),ne=f.useCallback(()=>{if(!v)return;const ue=ee.trim();if(!ue){L("Enter a name for the new draft configuration.");return}L(null),T.mutate({sourceConfigurationId:v.id,displayName:ue},{onSuccess(Oe){i({title:"Draft created.",intent:"success",duration:3500}),H(!1),r(`/workspaces/${t.id}/config-builder/${encodeURIComponent(Oe.id)}/editor`)},onError(Oe){L(Oe instanceof Error?Oe.message:"Unable to duplicate configuration.")}})},[v,T,ee,r,i,t.id]),oe=f.useCallback(()=>{v&&A.mutate({configurationId:v.id},{onSuccess(){i({title:"Configuration is now active.",intent:"success",duration:4e3}),$(!1),I(null),x(),h()},onError(ue){i({title:ue instanceof Error?ue.message:"Unable to make configuration active.",intent:"danger",duration:6e3})}})},[v,A,i,h,x]),he=f.useCallback(()=>{v&&B.mutate({configurationId:v.id},{onSuccess(){i({title:"Active configuration archived.",intent:"success",duration:4e3}),G(!1),x(),h()},onError(ue){i({title:ue instanceof Error?ue.message:"Unable to archive configuration.",intent:"danger",duration:6e3})}})},[B,v,i,h,x]);return l?d.isLoading?a.jsx(Dt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details."}):d.isError?a.jsx(Dt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page."}):v?a.jsxs("div",{className:"flex h-full flex-col gap-4 p-4",children:[a.jsxs("section",{className:"space-y-3 rounded-2xl border border-border bg-card p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Configuration"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h1",{className:"text-xl font-semibold text-foreground",children:v.display_name}),a.jsx(Vu,{status:v.status})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S?a.jsx(Ae,{variant:"secondary",onClick:je,children:"Make active"}):a.jsx(Ae,{onClick:W,children:"Duplicate to edit"}),a.jsx(Ae,{variant:"ghost",onClick:C,children:"Open editor"}),a.jsx(Ae,{variant:"ghost",size:"sm",onClick:U,"aria-label":"More actions",children:""})]})]}),S?null:a.jsxs("div",{className:"rounded-lg border border-border bg-background p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Read-only configuration"}),a.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Active and archived configurations cant be edited. Duplicate this configuration to create a draft you can change."}),a.jsx("div",{className:"mt-3",children:a.jsx(Ae,{size:"sm",onClick:W,children:"Duplicate to edit"})})]}),a.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Config ID"}),a.jsx("dd",{className:"text-sm text-foreground",children:v.id})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Status"}),a.jsx("dd",{className:"text-sm text-foreground",children:$o(v.status)})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Updated"}),a.jsx("dd",{className:"text-sm text-foreground",children:P0(v.updated_at)})]}),v.activated_at?a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Activated"}),a.jsx("dd",{className:"text-sm text-foreground",children:P0(v.activated_at)})]}):null]})]}),a.jsxs("section",{className:"flex-1 rounded-2xl border border-dashed border-border-strong bg-background p-6",children:[a.jsx("h2",{className:"text-base font-semibold text-foreground",children:"Overview"}),a.jsx("p",{className:"mt-2 max-w-2xl text-sm text-muted-foreground",children:"The refreshed config workbench will eventually surface manifest summaries, validation history, and deployment metrics here. For now this page offers a quick launch point into the editor while we rebuild the experience."})]}),a.jsx(kr,{open:!!E,position:E,onClose:()=>D(null),items:J,appearance:"light"}),a.jsx(As,{open:K,title:q?.stage==="checking"?"Checking configuration":q?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:q?.stage==="checking"?"Running validation before activation.":q?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":_?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${_.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:q?.stage==="issues"?"Open editor":q?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:()=>{$(!1),I(null)},onConfirm:()=>{if(q?.stage==="issues"){$(!1),C();return}if(q?.stage==="error"){$(!1),I(null);return}oe()},isConfirming:A.isPending,confirmDisabled:q?.stage==="checking"||A.isPending,children:q?.stage==="checking"?a.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-border border-t-brand-600","aria-hidden":"true"}),a.jsx("span",{children:"Validating"})]}):q?.stage==="issues"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Issues:"}),a.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-border bg-background p-3 text-xs text-foreground",children:q.issues.map(ue=>a.jsxs("li",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:ue.path}),a.jsx("p",{className:"text-muted-foreground",children:ue.message})]},`${ue.path}:${ue.message}`))})]}):q?.stage==="error"?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:q.message}):null}),a.jsx(As,{open:pe,title:"Archive active configuration?",description:"This will leave the workspace with no active configuration. Extraction runs will be blocked until you make a draft active.",confirmLabel:"Archive",cancelLabel:"Cancel",tone:"danger",onCancel:()=>G(!1),onConfirm:he,isConfirming:B.isPending,confirmDisabled:B.isPending,children:B.error?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:B.error instanceof Error?B.error.message:"Unable to archive configuration."}):null}),a.jsxs(As,{open:M,title:"Duplicate configuration",description:`Create a new draft based on ${v.display_name}.`,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:()=>H(!1),onConfirm:ne,isConfirming:T.isPending,confirmDisabled:T.isPending||ee.trim().length===0,children:[a.jsx(Pt,{label:"New configuration name",required:!0,children:a.jsx(kt,{value:ee,onChange:ue=>be(ue.target.value),placeholder:"Copy of My Config",disabled:T.isPending})}),de?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:de}):null]})]}):a.jsx(Dt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."}):a.jsx(Dt,{variant:"error",title:"Configuration not found",description:"Pick a configuration from the list to view its details."})}function P0(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function r6({params:e}={}){const{workspace:t}=Tr(),{session:r,windowState:i,openSession:l,closeSession:u,minimizeWindow:d,maximizeWindow:h,restoreWindow:p,shouldBypassUnsavedGuard:x}=x1(),v=e?.configId,b=a1({workspaceId:t.id,configurationId:v});if(f.useEffect(()=>{v||u()},[v,u]),f.useEffect(()=>{if(!v||b.isError)return;const _=b.data?.display_name??v;l({workspaceId:t.id,configId:v,configName:`${t.name}  ${_}`,configDisplayName:_})},[v,b.data?.display_name,b.isError,t.id,t.name,l]),f.useEffect(()=>{v&&(b.isError||b.isSuccess&&!b.data)&&u()},[u,v,b.data,b.isError,b.isSuccess]),!v)return a.jsx(Dt,{variant:"error",title:"Select a configuration",description:"Choose a configuration from the list to open the workbench."});if(b.isLoading)return a.jsx(Dt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details before opening the workbench."});if(b.isError)return a.jsx(Dt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page or pick a different configuration."});if(!b.data)return a.jsx(Dt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."});const y=r&&r.configId===v?r:null,S=!!(y&&i==="minimized"),j=!!(y&&i==="restored"),C=!!(y&&i==="maximized");return j&&y?a.jsx("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:a.jsx(m1,{workspaceId:t.id,configId:y.configId,configName:y.configName,configDisplayName:b.data.display_name??y.configId,windowState:"restored",onMinimizeWindow:d,onMaximizeWindow:h,onRestoreWindow:p,onCloseWorkbench:u,shouldBypassUnsavedGuard:x})}):C?a.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:a.jsx(Dt,{variant:"empty",title:"Immersive focus active",description:"Exit immersive mode from the workbench focus menu to return here."})}):S?a.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:a.jsx(Dt,{variant:"empty",title:"Workbench docked",description:"Use the dock at the bottom of the screen to resume editing."})}):a.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:a.jsx(Dt,{variant:"loading",title:"Launching config workbench",description:"If the editor does not appear, refresh the page."})})}function a6({workspaceName:e,navGroups:t,activeSectionId:r,activeSectionLabel:i,activeSectionDescription:l,activeGroupLabel:u,children:d}){const p=t.flatMap(j=>j.items).find(j=>j.id===r)?.tone??"default",[x,v]=f.useState(""),b=x.trim().toLowerCase(),y=f.useMemo(()=>b?t.map(j=>({...j,items:j.items.filter(C=>`${C.label} ${C.description}`.toLowerCase().includes(b))})).filter(j=>j.items.length>0):t,[t,b]),S=f.useMemo(()=>["Settings",u,i].filter(Boolean),[u,i]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("header",{className:"rounded-3xl border border-border bg-card p-6 shadow-soft",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:[a.jsx("span",{children:"Workspace"}),a.jsx("span",{"aria-hidden":!0,children:""}),a.jsx("span",{children:"Settings"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e}),a.jsx("span",{className:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:"Settings"})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground",children:S.map((j,C)=>a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx("span",{className:C===S.length-1?"font-semibold text-foreground":"text-muted-foreground",children:j}),C<S.length-1?a.jsx("span",{"aria-hidden":!0,className:"text-muted-foreground",children:"/"}):null]},j))}),l?a.jsx("p",{className:"max-w-3xl text-sm text-muted-foreground",children:l}):null]}),a.jsxs("div",{className:"w-full max-w-xs",children:[a.jsx(kt,{value:x,onChange:j=>v(j.target.value),placeholder:"Search settings","aria-label":"Search workspace settings"}),a.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"Filter sections by name or description."})]})]})}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-[280px,1fr]",children:[a.jsx("nav",{className:"rounded-2xl border border-border bg-card p-4 shadow-soft","aria-label":"Workspace settings sections",children:a.jsx("div",{className:"space-y-4",children:y.length===0?a.jsxs("p",{className:"rounded-lg border border-dashed border-border bg-background p-3 text-xs text-muted-foreground",children:['No sections match "',x,'".']}):y.map(j=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"px-1 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:j.label}),a.jsx("ul",{className:"space-y-1",children:j.items.map(C=>{const _=C.id===r,N=C.tone==="danger"?{active:"bg-danger-50 text-danger-700 ring-danger-100",idle:"hover:bg-danger-50/60 text-danger-700",badgeActive:"bg-danger-500 text-on-danger",badgeIdle:"bg-danger-100 text-danger-700 group-hover:bg-danger-200"}:{active:"bg-brand-50 text-brand-700 ring-brand-100",idle:"hover:bg-background text-foreground",badgeActive:"bg-brand-500 text-on-brand",badgeIdle:"bg-muted text-muted-foreground group-hover:bg-muted"},E=te("group flex w-full items-start gap-3 rounded-xl px-3 py-2.5 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2",_?N.active:N.idle,C.disabled&&"cursor-not-allowed opacity-50 ring-0 hover:bg-card");return C.disabled?a.jsx("li",{className:"w-full",children:a.jsx("div",{className:E,"aria-disabled":!0,children:a.jsxs("div",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"text-sm font-semibold",children:C.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:C.description})]})})},C.id):a.jsx("li",{className:"w-full",children:a.jsxs(Ip,{to:C.href,className:E,children:[a.jsxs("div",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"text-sm font-semibold",children:C.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:C.description})]}),a.jsx("span",{"aria-hidden":!0,className:te("ml-auto inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] font-bold transition",_?N.badgeActive:N.badgeIdle),children:C.label.slice(0,1).toUpperCase()})]})},C.id)})})]},j.id))})}),a.jsx("div",{className:te("space-y-6 rounded-3xl border border-border bg-card p-6 shadow-soft",p==="danger"&&"border-danger-100 bg-danger-50/40"),children:d})]})]})}const L1=f.createContext(null);function i6({value:e,children:t}){return a.jsx(L1.Provider,{value:e,children:t})}function U1(){const e=f.useContext(L1);if(!e)throw new Error("useSettingsSection must be used within a SettingsSectionProvider");return e}function Zo({title:e,description:t,actions:r}){return a.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-semibold text-foreground",children:e}),t?a.jsx("p",{className:"text-sm text-muted-foreground",children:t}):null]}),r?a.jsx("div",{className:"flex items-center gap-2",children:r}):null]})}function o6(){const{workspace:e,hasPermission:t}=Tr(),r=en(),i=Ft(),[l,u]=f.useState(!1),[d,h]=f.useState(""),[p,x]=f.useState(null),v=Pn({mutationFn:()=>W2(e.id),onSuccess:()=>{i.invalidateQueries({queryKey:Cn.all()}),r("/workspaces",{replace:!0})},onError:S=>{x(S instanceof Error?S.message:"Unable to delete workspace.")}}),b=t("workspace.delete")||t("workspace.settings.manage"),y=f.useMemo(()=>{const S=d.trim().toLowerCase();return S.length>0&&(S===e.slug.toLowerCase()||S===e.name.toLowerCase())},[d,e.name,e.slug]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Zo,{title:"Danger zone",description:"Delete this workspace when it is no longer needed."}),a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Delete workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently remove this workspace and all associated data. This action cannot be undone."})]}),a.jsx(Ae,{type:"button",variant:"danger",onClick:()=>u(!0),disabled:!b||v.isPending,isLoading:v.isPending,children:"Delete workspace"})]}),b?null:a.jsx(Lt,{tone:"warning",className:"mt-3",children:"You need additional permissions to delete this workspace."}),p?a.jsx(Lt,{tone:"danger",className:"mt-3",children:p}):null,a.jsx("p",{className:"mt-3 text-sm text-warning-700",children:"All workspace configurations, documents, runs, and history will be removed."})]}),a.jsxs("div",{className:"rounded-2xl border border-warning-100 bg-warning-50 p-4 text-sm text-warning-800",children:[a.jsx("p",{className:"font-semibold",children:"Looking for ADE safe mode?"}),a.jsx("p",{className:"mt-1",children:"Safe mode is a system-wide control. Manage it from the system settings area instead of workspace settings."})]}),a.jsxs(As,{open:l,title:"Delete this workspace?",description:"Type the workspace slug to confirm. This cannot be undone.",confirmLabel:"Delete workspace",tone:"danger",onCancel:()=>{u(!1),h(""),x(null)},onConfirm:()=>{y&&(x(null),v.mutate())},isConfirming:v.isPending,confirmDisabled:!y,children:[a.jsx(Pt,{label:"Workspace slug",required:!0,children:a.jsx(kt,{value:d,onChange:S=>h(S.target.value),placeholder:e.slug,disabled:v.isPending})}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Enter ",a.jsx("strong",{children:e.slug})," to confirm deletion."]})]})]})}function l6({theme:e,onThemeChange:t,themes:r=cw,className:i,label:l="Theme"}){return a.jsxs("div",{className:te("space-y-2",i),children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:l}),a.jsx("div",{role:"radiogroup","aria-label":l,className:"grid gap-2",children:r.map(u=>{const d=u.id===e;return a.jsxs("button",{type:"button",role:"radio","aria-checked":d,"data-menu-item":!0,onClick:()=>t(u.id),className:te("flex w-full items-center justify-between gap-3 rounded-lg border px-3 py-2 text-left text-sm font-medium transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",d?"border-brand-400 bg-muted text-foreground shadow-sm":"border-border bg-card text-foreground hover:border-border-strong hover:bg-muted"),children:[a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate text-sm font-semibold",children:u.label}),a.jsx("span",{className:"truncate text-xs text-muted-foreground",children:u.description})]}),d?a.jsx(ri,{className:"h-4 w-4 text-brand-500"}):null]},u.id)})})]})}function c6(){const{modePreference:e,setModePreference:t,theme:r,setTheme:i}=Xm();return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Zo,{title:"Appearance",description:"Choose your color mode and theme. These preferences follow your account."}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs("section",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Color mode"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the system setting or set a fixed light or dark mode."})]}),a.jsx("div",{role:"radiogroup","aria-label":"Color mode",className:"mt-4 grid gap-2",children:lw.map(l=>{const u=l.value===e;return a.jsxs("button",{type:"button",role:"radio","aria-checked":u,onClick:()=>t(l.value),className:te("flex w-full items-center justify-between gap-3 rounded-lg border px-3 py-2 text-left text-sm font-medium transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",u?"border-brand-400 bg-muted text-foreground shadow-sm":"border-border bg-card text-foreground hover:border-border-strong hover:bg-muted"),children:[a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate text-sm font-semibold",children:l.label}),a.jsx("span",{className:"truncate text-xs text-muted-foreground",children:l.description})]}),u?a.jsx(ri,{className:"h-4 w-4 text-brand-500"}):null]},l.value)})})]}),a.jsx("section",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:a.jsx(l6,{theme:r,onThemeChange:i,label:"Theme"})})]})]})}function $1({when:e,title:t="Discard unsaved changes?",description:r="You have unsaved changes. If you leave now, your edits will be lost.",confirmLabel:i="Leave without saving",cancelLabel:l="Stay on page"}){const u=en(),[d,h]=f.useState(null),[p,x]=f.useState(!1),v=f.useRef(!1);f.useEffect(()=>{if(!e){x(!1),h(null);return}const S=j=>{j.preventDefault(),j.returnValue=""};return window.addEventListener("beforeunload",S),()=>window.removeEventListener("beforeunload",S)},[e]),V0(S=>e?v.current?(v.current=!1,!0):(h(S),x(!0),!1):!0,e);const b=()=>{if(!d)return;v.current=!0;const S=d.kind==="replace"||d.kind==="pop";u(d.to,{replace:S}),x(!1),h(null),setTimeout(()=>{v.current=!1},0)},y=()=>{x(!1),h(null)};return a.jsx(As,{open:p&&e,title:t,description:r,confirmLabel:i,cancelLabel:l,tone:"danger",onConfirm:b,onCancel:y})}$1.displayName="UnsavedChangesPrompt";function u6({isDirty:e,isSaving:t,onCancel:r,onSave:i,saveLabel:l="Save changes",cancelLabel:u="Discard",children:d}){return!e&&!d?null:a.jsx("div",{className:"sticky bottom-0 left-0 right-0 mt-4 rounded-b-2xl border border-t bg-card/95 p-4 shadow-[0_-8px_20px_-12px_rgb(var(--sys-color-shadow)/0.25)] backdrop-blur",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:d}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r?a.jsx(Ae,{type:"button",variant:"ghost",onClick:r,disabled:t||!e,children:u}):null,a.jsx(Ae,{type:"button",onClick:i,isLoading:t,disabled:!e||t,children:l})]})]})})}const d6=jd({name:Cr().min(1,"Workspace name is required.").max(255,"Keep the name under 255 characters."),slug:Cr().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.")});function f6(){const{workspace:e}=Tr(),t=Tw(e.id),r=Dw(),[i,l]=f.useState(null),{register:u,handleSubmit:d,formState:{errors:h,isDirty:p},reset:x}=Sj({resolver:Nj(d6),defaultValues:{name:e.name,slug:e.slug}});f.useEffect(()=>{x({name:e.name,slug:e.slug})},[x,e.name,e.slug]);const v=d(S=>{l(null),t.mutate({name:S.name.trim(),slug:S.slug.trim()},{onSuccess:()=>{l({tone:"success",message:"Workspace details saved."})},onError:j=>{const C=j instanceof Error?j.message:"Unable to save workspace details.";l({tone:"danger",message:C})}})}),b=e.is_default,y=r.isPending;return a.jsxs("div",{className:"space-y-6",children:[a.jsx($1,{when:p&&!t.isPending}),a.jsx(Zo,{title:"General",description:"Manage the workspace identity and your default workspace preference."}),i?a.jsx(Lt,{tone:i.tone,children:i.message}):null,a.jsxs("form",{className:"overflow-hidden rounded-2xl border border-border bg-card shadow-soft",onSubmit:v,noValidate:!0,children:[a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Workspace identity"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Update the name and slug. Changes apply immediately across navigation and shared links."})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(Pt,{label:"Workspace name",required:!0,error:h.name?.message,children:a.jsx(kt,{...u("name"),placeholder:"Finance Operations",invalid:!!h.name,disabled:t.isPending})}),a.jsx(Pt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier.",required:!0,error:h.slug?.message,children:a.jsx(kt,{...u("slug"),placeholder:"finance-ops",invalid:!!h.slug,disabled:t.isPending})})]}),t.isError?a.jsx(Lt,{tone:"danger",children:t.error instanceof Error?t.error.message:"Unable to save workspace details."}):null]}),a.jsx(u6,{isDirty:p,isSaving:t.isPending,onCancel:()=>{x(),l(null)},onSave:v,children:"Changes apply to everyone who can access this workspace."})]}),a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Default workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the workspace you land on first after signing in. This only affects your account."})]}),a.jsx(Ae,{type:"button",variant:b?"secondary":"primary",onClick:()=>{l(null),r.mutate(e.id,{onSuccess:()=>l({tone:"success",message:"Workspace set as your default."}),onError:S=>{const j=S instanceof Error?S.message:"Unable to set the default workspace right now.";l({tone:"danger",message:j})}})},disabled:b||y,isLoading:y,children:b?"Default workspace":"Make default"})]}),a.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:b?"This workspace is already your default.":"You can switch the default workspace at any time."})]})]})}function rg({open:e,title:t,description:r,onClose:i,children:l,footer:u,widthClassName:d="w-full max-w-xl"}){const h=f.useRef(null);return f.useEffect(()=>{if(!e)return;const p=v=>{if(v.key==="Escape"&&i(),v.key==="Tab"){const b=h.current;if(!b)return;const y=Array.from(b.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(C=>!C.hasAttribute("disabled"));if(y.length===0)return;const S=y.indexOf(document.activeElement),j=v.shiftKey?S<=0?y.length-1:S-1:S===y.length-1?0:S+1;y[j]?.focus(),v.preventDefault()}};return window.addEventListener("keydown",p),h.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",p)},[i,e]),e?Ts.createPortal(a.jsxs("div",{className:"fixed inset-0 z-40",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-overlay/50",onClick:i,"aria-label":"Close drawer"}),a.jsxs("div",{ref:h,role:"dialog","aria-modal":"true","aria-label":t,className:te("absolute inset-y-0 right-0 flex h-full flex-col bg-card shadow-2xl transition",d),children:[a.jsxs("div",{className:"flex items-start justify-between gap-4 border-b border-border px-5 py-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:"Details"}),a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:t}),r?a.jsx("p",{className:"text-sm text-muted-foreground",children:r}):null]}),a.jsx("button",{type:"button",onClick:i,className:"rounded-full border border-border bg-card p-2 text-muted-foreground transition hover:bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2","aria-label":"Close drawer",children:a.jsx(Ws,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:l}),u?a.jsx("div",{className:"border-t border-border bg-background px-5 py-4",children:u}):null]})]}),document.body):null}const Fm=uc,zd={page:1,pageSize:Fm,includeTotal:!0};function h6(e){const t=Km({queryKey:Cn.members(e,zd),initialPageParam:1,queryFn:({pageParam:u,signal:d})=>Y2(e,{page:typeof u=="number"?u:1,pageSize:Fm,includeTotal:u===1,signal:d}),getNextPageParam:u=>u.has_next?u.page+1:void 0,enabled:e.length>0,staleTime:15e3,placeholderData:u=>u}),r=t.data?.pages??[],i=Sw(r,u=>u.user_id),l=r[0]?.total??r[r.length-1]?.total??void 0;return{...t,members:i,total:l,pageSize:Fm}}function m6(e){const t=Ft(),r=Cn.members(e,zd);return Pn({mutationFn:async({user:i,roleIds:l})=>{const u={user_id:i.id,role_ids:Array.from(l)};return X2(e,u)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})}function p6(e){const t=Ft(),r=Cn.members(e,zd);return Pn({mutationFn:({userId:i,roleIds:l})=>J2(e,i,{role_ids:Array.from(l)}),onSuccess:()=>{t.invalidateQueries({queryKey:r})}})}function g6(e){const t=Ft(),r=Cn.members(e,zd);return Pn({mutationFn:i=>eC(e,i),onSuccess:()=>{t.invalidateQueries({queryKey:r})}})}const ag=uc,x6=uc,Ld={page:1,pageSize:ag,includeTotal:!0},b6={scope:"workspace",page:1,pageSize:x6,includeTotal:!1};function q1(e){return yn({queryKey:Cn.roles(e,Ld),queryFn:({signal:t})=>jw(r=>tC({page:r,pageSize:ag,includeTotal:r===1,signal:t})),enabled:e.length>0,staleTime:15e3,placeholderData:t=>t})}function v6(e="workspace"){const t={...b6,scope:e};return yn({queryKey:Cn.permissions(t),queryFn:({signal:r})=>jw(i=>aC({scope:e,page:i,pageSize:t.pageSize,includeTotal:i===1,signal:r})),staleTime:6e4,placeholderData:r=>r})}function y6(e){const t=Ft(),r=Cn.roles(e,Ld);return Pn({mutationFn:i=>nC(e,i),onSuccess:i=>{t.setQueryData(r,l=>S6(l,i))},onSettled:()=>{t.invalidateQueries({queryKey:r})}})}function w6(e){const t=Ft(),r=Cn.roles(e,Ld);return Pn({mutationFn:({roleId:i,payload:l})=>sC(e,i,l),onSuccess:i=>{t.setQueryData(r,l=>l&&{...l,items:l.items.map(u=>u.id===i.id?i:u)})},onSettled:()=>{t.invalidateQueries({queryKey:r})}})}function j6(e){const t=Ft(),r=Cn.roles(e,Ld);return Pn({mutationFn:i=>rC(e,i),onSuccess:(i,l)=>{t.setQueryData(r,u=>{if(!u)return u;const d=u.items.filter(h=>h.id!==l);return{...u,items:d,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}})},onSettled:()=>{t.invalidateQueries({queryKey:r})}})}function S6(e,t){return e?{...e,items:[t,...e.items],total:typeof e.total=="number"?e.total+1:e.total,has_next:!1,has_previous:!1}:{items:[t],page:1,page_size:ag,has_next:!1,has_previous:!1,total:1}}function N6(){const{workspace:e,hasPermission:t}=Tr(),{params:r}=U1(),i=en(),l=es(),u=t("workspace.members.manage"),d=h6(e.id),h=q1(e.id),p=m6(e.id),x=p6(e.id),v=g6(e.id),[b,y]=f.useState(""),[S,j]=f.useState(null),C=f.useMemo(()=>{const de=d.members,L=new Intl.Collator("en",{sensitivity:"base"});return[...de].sort((W,pe)=>{const G=W.user?.display_name??W.user?.email??W.user_id,ie=pe.user?.display_name??pe.user?.email??pe.user_id;return L.compare(G??"",ie??"")})},[d.members]),_=f.useMemo(()=>new Set(C.map(de=>de.user_id)),[C]),N=d.total??C.length,E=b.trim().toLowerCase(),D=f.useMemo(()=>E?C.filter(de=>{const L=de.user?.display_name??"",W=de.user?.email??"";return L.toLowerCase().includes(E)||W.toLowerCase().includes(E)||de.user_id.toLowerCase().includes(E)}):C,[C,E]),U=!!d.hasNextPage,z=d.isLoading,V=d.isFetchingNextPage,R=f.useMemo(()=>{const de=new Intl.Collator("en",{sensitivity:"base"});return(h.data?.items??[]).slice().sort((L,W)=>de.compare(L.name,W.name))},[h.data]),A=r[0],B=A==="new",T=A&&A!=="new"?decodeURIComponent(A):null,K=C.find(de=>de.user_id===T),$=`/workspaces/${e.id}/settings/access/members`,q=`${l.search}${l.hash}`,I=()=>i(`${$}${q}`,{replace:!0}),je=()=>i(`${$}/new${q}`),M=de=>i(`${$}/${encodeURIComponent(de)}${q}`),H=async({user:de,roleIds:L})=>{j(null),await p.mutateAsync({user:de,roleIds:L}),j({tone:"success",message:`${de.display_name??de.email} added to the workspace.`}),I()},ee=async(de,L)=>{j(null),await x.mutateAsync({userId:de,roleIds:L}),j({tone:"success",message:"Member roles updated."}),I()},be=async de=>{j(null),await v.mutateAsync(de.user_id),j({tone:"success",message:"Member removed."}),I()};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Zo,{title:"Members",description:"Add members, adjust workspace roles, or remove access.",actions:a.jsxs("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:[N," member",N===1?"":"s"]})}),S?a.jsx(Lt,{tone:S.tone,children:S.message}):null,d.isError?a.jsx(Lt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace members."}):null,h.isError?a.jsx(Lt,{tone:"warning",children:h.error instanceof Error?h.error.message:"Unable to load workspace roles."}):null,a.jsxs("section",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Workspace members"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:z?"Loading members":`${N} member${N===1?"":"s"} total`})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(Pt,{label:"Search members",className:"w-full max-w-xs",children:a.jsx(kt,{value:b,onChange:de=>y(de.target.value),placeholder:"Search by name, email, or ID",disabled:z})}),u?a.jsx(Ae,{type:"button",onClick:je,children:"Add member"}):null]})]}),z?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading members"}):D.length===0?a.jsx("p",{className:"rounded-lg border border-dashed border-border bg-background p-4 text-sm text-muted-foreground",children:b?`No members match "${b}".`:"No members yet. Add teammates to collaborate."}):a.jsx("div",{className:"overflow-hidden rounded-xl border border-border",children:a.jsxs("table",{className:"min-w-full divide-y divide-border",children:[a.jsx("thead",{className:"bg-background",children:a.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("th",{className:"px-4 py-3",children:"Member"}),a.jsx("th",{className:"px-4 py-3",children:"Roles"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border bg-card",children:D.map(de=>{const L=de.role_ids.map(pe=>R.find(G=>G.id===pe)?.name??pe).sort((pe,G)=>pe.localeCompare(G)),W=de.user?.display_name??de.user?.email??de.user_id;return a.jsxs("tr",{className:"text-sm text-foreground",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Zp,{name:de.user?.display_name,email:de.user?.email,size:"sm"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate font-semibold text-foreground",children:W}),a.jsx("p",{className:"truncate text-xs text-muted-foreground",children:de.user?.email??de.user_id})]})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:L.length===0?a.jsx("span",{className:"text-xs text-muted-foreground",children:"No roles assigned."}):L.map(pe=>a.jsx("span",{className:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:pe},`${de.user_id}-${pe}`))})}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(de.user_id),disabled:!u,children:"Manage"})})]},de.user_id)})})]})}),U?a.jsx("div",{className:"pt-4",children:a.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>d.fetchNextPage(),disabled:V,children:V?"Loading more members":"Load more members"})}):null,u?null:a.jsx(Lt,{tone:"info",children:"You do not have permission to manage workspace members."})]}),a.jsx(C6,{open:B&&u,onClose:I,availableRoles:R,memberIds:_,isSubmitting:p.isPending,onAdd:H}),a.jsx(_6,{open:!!T&&u,member:K,availableRoles:R,onClose:I,onSaveRoles:de=>ee(T??"",de),onRemove:()=>K?be(K):Promise.resolve(),isSaving:x.isPending,isRemoving:v.isPending})]})}function C6({open:e,onClose:t,availableRoles:r,memberIds:i,isSubmitting:l,onAdd:u}){const[d,h]=f.useState(""),[p,x]=f.useState([]),[v,b]=f.useState(""),[y,S]=f.useState(""),[j,C]=f.useState(null);f.useEffect(()=>{const R=window.setTimeout(()=>S(v.trim()),250);return()=>window.clearTimeout(R)},[v]),f.useEffect(()=>{e||(h(""),x([]),b(""),C(null))},[e]);const _=Cj({enabled:e,search:y,pageSize:50}),N=f.useMemo(()=>{const R=new Intl.Collator("en",{sensitivity:"base"});return _.users.filter(A=>!i.has(A.id)).sort((A,B)=>{const T=A.display_name??A.email,K=B.display_name??B.email;return R.compare(T??"",K??"")})},[i,_.users]),E=f.useMemo(()=>N.find(R=>R.id===d),[N,d]),D=!!d&&p.length>0&&!l,U=v.trim().length>0&&v.trim().length<2,z=_.isPending&&_.users.length===0,V=async R=>{R.preventDefault(),C(null);const A=N.find(B=>B.id===d);if(!A){C("Select a user to add.");return}if(p.length===0){C("Select at least one role for this member.");return}try{await u({user:A,roleIds:p}),h(""),b(""),x([])}catch(B){const T=B instanceof Error?B.message:"Unable to add member.";C(T)}};return a.jsx(rg,{open:e,onClose:t,title:"Add member",description:"Add an existing user and choose their workspace roles.",children:a.jsxs("form",{className:"space-y-4",onSubmit:V,children:[j?a.jsx(Lt,{tone:"danger",children:j}):null,_.isError?a.jsx(Lt,{tone:"warning",children:_.error instanceof Error?_.error.message:"Unable to load the user directory."}):null,a.jsxs(Pt,{label:"Search directory",hint:"Enter at least two characters to search by name or email.",children:[a.jsx(kt,{value:v,onChange:R=>b(R.target.value),placeholder:"Search users",disabled:l||z}),U?a.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter at least two characters to search the full directory."}):null]}),a.jsxs(Pt,{label:"User",required:!0,children:[a.jsxs(Bi,{value:d,onChange:R=>{h(R.target.value),R.target.value&&b("")},disabled:l||z,required:!0,children:[a.jsx("option",{value:"",children:"Select a user"}),E&&!N.some(R=>R.id===E.id)?a.jsx("option",{value:E.id,children:E.display_name?`${E.display_name} (${E.email})`:E.email}):null,N.map(R=>a.jsx("option",{value:R.id,children:R.display_name?`${R.display_name} (${R.email})`:R.email},R.id))]}),N.length===0&&v?a.jsxs("p",{className:"text-xs text-muted-foreground",children:['No users matched "',v,'".']}):null]}),a.jsxs("fieldset",{className:"space-y-2",children:[a.jsx("legend",{className:"text-sm font-semibold text-foreground",children:"Roles"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign at least one role to grant access."}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.length===0?a.jsx("p",{className:"text-xs text-muted-foreground",children:"No workspace roles available yet."}):r.map(R=>a.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border-strong",checked:p.includes(R.id),onChange:A=>x(B=>A.target.checked?[...B,R.id]:B.filter(T=>T!==R.id)),disabled:l}),a.jsx("span",{children:R.name})]},R.id))}),p.length>0?a.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length," role(s) selected."]}):null]}),_.hasNextPage?a.jsx("div",{className:"pt-2",children:a.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>_.fetchNextPage(),disabled:_.isFetchingNextPage,children:_.isFetchingNextPage?"Loading more users":"Load more users"})}):null,a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(Ae,{type:"button",variant:"ghost",onClick:t,disabled:l,children:"Cancel"}),a.jsx(Ae,{type:"submit",isLoading:l,disabled:!D,children:"Add member"})]})]})})}function _6({open:e,member:t,availableRoles:r,onClose:i,onSaveRoles:l,onRemove:u,isSaving:d,isRemoving:h}){const[p,x]=f.useState([]),[v,b]=f.useState(null),[y,S]=f.useState(!1);f.useEffect(()=>{if(!e||!t){x([]),b(null),S(!1);return}x(t.role_ids),b(null),S(!1)},[t,e]);const j=async()=>{if(t){b(null);try{await l(p)}catch(N){const E=N instanceof Error?N.message:"Unable to save member roles.";b(E)}}},C=async()=>{if(t){b(null);try{await u()}catch(N){const E=N instanceof Error?N.message:"Unable to remove member.";b(E)}finally{S(!1)}}},_=t?t.user?.display_name??t.user?.email??t.user_id:"Member details";return a.jsxs(a.Fragment,{children:[a.jsxs(rg,{open:e,onClose:i,title:_,description:t?"Update roles or remove this member from the workspace.":void 0,children:[t?a.jsxs("div",{className:"space-y-4",children:[v?a.jsx(Lt,{tone:"danger",children:v}):null,a.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-border bg-background p-3",children:[a.jsx(Zp,{name:t.user?.display_name,email:t.user?.email,size:"md"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-base font-semibold text-foreground",children:t.user?.display_name??t.user?.email??t.user_id}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.user?.email??"No email available"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["User ID: ",t.user_id]})]})]}),a.jsxs("fieldset",{className:"space-y-3",children:[a.jsx("legend",{className:"text-sm font-semibold text-foreground",children:"Roles"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the roles this member should have inside the workspace."}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.length===0?a.jsx("p",{className:"text-xs text-muted-foreground",children:"No workspace roles available."}):r.map(N=>a.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border-strong",checked:p.includes(N.id),onChange:E=>x(D=>E.target.checked?Array.from(new Set([...D,N.id])):D.filter(U=>U!==N.id)),disabled:d}),a.jsx("span",{children:N.name})]},N.id))}),p.length>0?a.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length," role(s) selected."]}):null]})]}):a.jsx(Lt,{tone:"warning",children:"This member could not be found."}),a.jsxs("div",{className:"mt-6 flex items-center justify-between gap-2",children:[a.jsx(Ae,{type:"button",variant:"ghost",onClick:i,disabled:d||h,children:"Close"}),a.jsxs("div",{className:"flex items-center gap-2",children:[t?a.jsx(Ae,{type:"button",variant:"danger",onClick:()=>S(!0),disabled:h,isLoading:h,children:"Remove"}):null,a.jsx(Ae,{type:"button",onClick:j,isLoading:d,disabled:!t||d,children:"Save changes"})]})]})]}),a.jsx(As,{open:y,title:"Remove member?",description:t?`Remove ${t.user?.display_name??t.user?.email??t.user_id} from this workspace.`:"",confirmLabel:"Remove member",tone:"danger",onCancel:()=>S(!1),onConfirm:C,isConfirming:h})]})}function E6(){const{workspace:e,hasPermission:t}=Tr(),r=Tw(e.id),[i,l]=f.useState(null),u=t("workspace.settings.manage"),d=e.processing_paused??!1,h=()=>{!u||r.isPending||(l(null),r.mutate({processing_paused:!d},{onSuccess:()=>{l({tone:"success",message:d?"Processing resumed for this workspace.":"Processing paused for this workspace."})},onError:p=>{const x=p instanceof Error?p.message:"Unable to update processing state.";l({tone:"danger",message:x})}}))};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Zo,{title:"Processing",description:"Pause or resume automatic document processing for this workspace."}),i?a.jsx(Lt,{tone:i.tone,children:i.message}):null,a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Processing queue"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Uploads are stored, but runs will not start until processing is resumed.":"Runs start automatically after upload when an active configuration is available."})]}),a.jsx(Ae,{type:"button",variant:d?"primary":"secondary",onClick:h,disabled:!u||r.isPending,isLoading:r.isPending,children:d?"Resume processing":"Pause processing"})]}),u?null:a.jsx(Lt,{tone:"warning",className:"mt-3",children:"You need workspace settings permissions to update processing behavior."}),d?a.jsx("div",{className:"mt-3 rounded-xl border border-warning-200 bg-warning-50 px-3 py-2 text-xs text-warning-800",children:"Processing is paused. Pending documents will remain in a waiting state."}):null]})]})}function k6(){const{workspace:e,hasPermission:t}=Tr(),{params:r}=U1(),i=en(),l=es(),u=t("workspace.roles.manage"),d=q1(e.id),h=v6(),p=y6(e.id),x=w6(e.id),v=j6(e.id),[b,y]=f.useState(""),[S,j]=f.useState(null),C=f.useMemo(()=>(h.data?.items??[]).filter(M=>M.scope_type==="workspace"),[h.data]),_=f.useMemo(()=>{const M=new Intl.Collator("en",{sensitivity:"base"});return(d.data?.items??[]).slice().sort((H,ee)=>M.compare(H.name,ee.name))},[d.data]),N=d.data?.total??_.length,E=b.trim().toLowerCase(),D=f.useMemo(()=>E?_.filter(M=>`${M.name} ${M.slug??""}`.toLowerCase().includes(E)):_,[E,_]),U=r[0],z=U==="new",V=U&&U!=="new"?decodeURIComponent(U):null,R=_.find(M=>M.id===V),A=`/workspaces/${e.id}/settings/access/roles`,B=`${l.search}${l.hash}`,T=()=>i(`${A}${B}`,{replace:!0}),K=()=>i(`${A}/new${B}`),$=M=>i(`${A}/${encodeURIComponent(M)}${B}`),q=async M=>{j(null),await p.mutateAsync({name:M.name.trim(),slug:M.slug.trim()||void 0,description:M.description.trim()||void 0,permissions:M.permissions}),j({tone:"success",message:"Role created."}),T()},I=async(M,H)=>{j(null),await x.mutateAsync({roleId:M,payload:{name:H.name.trim(),description:H.description.trim()||void 0,permissions:H.permissions}}),j({tone:"success",message:"Role updated."}),T()},je=async M=>{j(null),await v.mutateAsync(M.id),j({tone:"success",message:`Deleted role "${M.name}".`}),T()};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Zo,{title:"Roles",description:"Workspace roles group permissions so you can safely delegate access.",actions:a.jsxs("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:[N," role",N===1?"":"s"]})}),S?a.jsx(Lt,{tone:S.tone,children:S.message}):null,d.isError?a.jsx(Lt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace roles."}):null,h.isError?a.jsx(Lt,{tone:"warning",children:h.error instanceof Error?h.error.message:"Unable to load permission catalog."}):null,a.jsxs("section",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Workspace roles"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d.isLoading?"Loading roles":`${N} role${N===1?"":"s"} total`})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(Pt,{label:"Search roles",className:"w-full max-w-xs",children:a.jsx(kt,{value:b,onChange:M=>y(M.target.value),placeholder:"Search by name or slug",disabled:d.isLoading})}),u?a.jsx(Ae,{type:"button",onClick:K,children:"New role"}):null]})]}),d.isLoading?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading roles"}):D.length===0?a.jsx("p",{className:"rounded-lg border border-dashed border-border bg-background p-4 text-sm text-muted-foreground",children:b?`No roles match "${b}".`:"No workspace roles yet. Create one to tailor permissions."}):a.jsx("div",{className:"overflow-hidden rounded-xl border border-border",children:a.jsxs("table",{className:"min-w-full divide-y divide-border",children:[a.jsx("thead",{className:"bg-background",children:a.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("th",{className:"px-4 py-3",children:"Role"}),a.jsx("th",{className:"px-4 py-3",children:"Slug"}),a.jsx("th",{className:"px-4 py-3",children:"Permissions"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border bg-card",children:D.map(M=>a.jsxs("tr",{className:"text-sm text-foreground",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-semibold text-foreground",children:M.name}),M.is_system?a.jsx("span",{className:"inline-flex items-center rounded-full bg-muted px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:"System"}):null,M.is_editable?null:a.jsx("span",{className:"inline-flex items-center rounded-full bg-warning-100 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-warning-700",children:"Locked"})]})}),a.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:M.slug}),a.jsxs("td",{className:"px-4 py-3 text-muted-foreground",children:[M.permissions.length," permission",M.permissions.length===1?"":"s"]}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>$(M.id),disabled:!u,children:"Manage"})})]},M.id))})]})}),u?null:a.jsx(Lt,{tone:"info",children:"You do not have permission to manage workspace roles."})]}),a.jsx(F0,{open:z&&u,mode:"create",permissions:C,onClose:T,onSave:M=>q(M),isSaving:p.isPending,isDeleting:!1}),a.jsx(F0,{open:!!V&&u,mode:"edit",role:R,permissions:C,onClose:T,onSave:M=>V?I(V,M):Promise.resolve(),onDelete:R?()=>je(R):void 0,isSaving:x.isPending,isDeleting:v.isPending})]})}function F0({open:e,mode:t,role:r,permissions:i,onClose:l,onSave:u,onDelete:d,isSaving:h,isDeleting:p}){const[x,v]=f.useState({name:"",slug:"",description:"",permissions:[]}),[b,y]=f.useState(""),[S,j]=f.useState(null),[C,_]=f.useState(!1),[N,E]=f.useState("");f.useEffect(()=>{if(!e){j(null),y(""),_(!1),E("");return}v(t==="edit"&&r?{name:r.name,slug:r.slug,description:r.description??"",permissions:r.permissions}:{name:"",slug:"",description:"",permissions:[]})},[t,e,r]);const D=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,U=t==="create"||(r?.is_editable??!1),z=t==="edit"&&r&&r.is_editable&&!r.is_system&&d,V=f.useMemo(()=>{const $=b.trim().toLowerCase();return $?i.filter(q=>`${q.label} ${q.key}`.toLowerCase().includes($)):i},[b,i]),R=($,q)=>{v(I=>({...I,permissions:q?Array.from(new Set([...I.permissions??[],$])):(I.permissions??[]).filter(je=>je!==$)}))},A=async()=>{if(j(null),!x.name.trim()){j("Role name is required.");return}if(t==="create"&&x.slug&&!D.test(x.slug)){j("Use lowercase letters, numbers, and dashes for the role slug.");return}try{await u({...x,name:x.name.trim(),slug:t==="create"?x.slug.trim():r?.slug??"",description:x.description.trim(),permissions:x.permissions})}catch($){const q=$ instanceof Error?$.message:"Unable to save role.";j(q)}},B=async()=>{if(!(!d||!r)){j(null);try{await d()}catch($){const q=$ instanceof Error?$.message:"Unable to delete role.";j(q)}finally{_(!1),E("")}}},T=a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(Ae,{type:"button",variant:"ghost",onClick:l,disabled:h||p,children:"Close"}),a.jsxs("div",{className:"flex items-center gap-2",children:[z?a.jsx(Ae,{type:"button",variant:"danger",onClick:()=>_(!0),disabled:p,isLoading:p,children:"Delete"}):null,a.jsx(Ae,{type:"button",onClick:A,isLoading:h,disabled:!U||h,children:t==="create"?"Create role":"Save changes"})]})]}),K=t==="create"?"New role":r?.name??"Role details";return a.jsxs(a.Fragment,{children:[a.jsxs(rg,{open:e,onClose:l,title:K,description:t==="create"?"Create a workspace-scoped role.":"Edit workspace role details and permissions.",footer:T,children:[S?a.jsx(Lt,{tone:"danger",children:S}):null,t==="edit"&&r&&!r.is_editable?a.jsx(Lt,{tone:"warning",children:"This role is locked and cannot be modified."}):null,a.jsxs("div",{className:"space-y-4",children:[a.jsx(Pt,{label:"Role name",required:!0,children:a.jsx(kt,{value:x.name,onChange:$=>v(q=>({...q,name:$.target.value})),placeholder:"Data reviewer",disabled:h||!U})}),t==="create"?a.jsx(Pt,{label:"Role slug",hint:"Lowercase, URL-friendly identifier. Leave blank to auto-generate.",children:a.jsx(kt,{value:x.slug,onChange:$=>v(q=>({...q,slug:$.target.value})),placeholder:"data-reviewer",disabled:h||!U})}):a.jsx(Pt,{label:"Role slug",children:a.jsx(kt,{value:r?.slug??"",disabled:!0})}),a.jsx(Pt,{label:"Description",hint:"Optional context about what this role controls.",children:a.jsx(kt,{value:x.description,onChange:$=>v(q=>({...q,description:$.target.value})),placeholder:"What does this role control?",disabled:h||!U})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Permissions"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Select the permissions included with this role. ",x.permissions.length," selected."]})]}),a.jsx(kt,{value:b,onChange:$=>y($.target.value),placeholder:"Filter permissions",disabled:h})]}),a.jsx("div",{className:"max-h-72 space-y-2 overflow-y-auto rounded-lg border border-border p-3",children:V.length===0?a.jsx("p",{className:"text-xs text-muted-foreground",children:"No permissions match this filter."}):V.map($=>{const q=`permission-${$.key.replaceAll(".","-")}`;return a.jsxs("label",{htmlFor:q,"aria-label":$.label,className:"flex items-start gap-3 rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",children:[a.jsx("input",{id:q,type:"checkbox",className:"mt-1 h-4 w-4 rounded border-border-strong",checked:x.permissions.includes($.key),onChange:I=>R($.key,I.target.checked),disabled:h||!U}),a.jsxs("span",{children:[a.jsx("span",{className:"block font-semibold",children:$.label}),a.jsx("span",{className:"block text-xs text-muted-foreground",children:$.description})]})]},$.key)})})]})]})]}),a.jsx(As,{open:C&&!!r,title:"Delete this role?",description:"Deleting this role will remove it from any members assigned to it.",confirmLabel:"Delete role",tone:"danger",confirmDisabled:N.trim()!==(r?.slug??""),onCancel:()=>{_(!1),E("")},onConfirm:B,isConfirming:p,children:a.jsx(Pt,{label:"Type the role slug to confirm",required:!0,children:a.jsx(kt,{value:N,onChange:$=>E($.target.value),placeholder:r?.slug??"role-slug",disabled:p})})})]})}const D6={workspace:"Workspace",preferences:"Preferences",access:"Access",lifecycle:"Lifecycle"},oc=[{id:"workspace.general",group:"workspace",label:"General",description:"Workspace name, slug, and defaults.",path:"general",element:a.jsx(f6,{})},{id:"workspace.processing",group:"workspace",label:"Processing",description:"Pause or resume automatic processing.",path:"processing",required:{view:["workspace.settings.manage"],edit:["workspace.settings.manage"]},element:a.jsx(E6,{})},{id:"preferences.appearance",group:"preferences",label:"Appearance",description:"Theme and color mode preferences.",path:"preferences/appearance",element:a.jsx(c6,{})},{id:"access.members",group:"access",label:"Members",description:"Manage members and access.",path:"access/members",required:{view:["workspace.members.view"],edit:["workspace.members.manage"]},element:a.jsx(N6,{})},{id:"access.roles",group:"access",label:"Roles",description:"Workspace-scoped roles and permissions.",path:"access/roles",required:{view:["workspace.roles.view"],edit:["workspace.roles.manage"]},element:a.jsx(k6,{})},{id:"lifecycle.danger",group:"lifecycle",label:"Danger zone",description:"Deletion and operational safeguards.",path:"lifecycle/danger",tone:"danger",required:{view:["workspace.settings.manage","workspace.delete"],edit:["workspace.delete"]},element:a.jsx(o6,{})}],Qu=oc[0];function T6(e){const t=e.join("/");return oc.find(r=>t===r.path||t.startsWith(`${r.path}/`))}function A6(e,t){const r=oc.map(i=>{const l=i.required?.view?i.required.view.some(d=>t(d)):!0,u=i.required?.edit?i.required.edit.some(d=>t(d)):!0;return{id:i.id,label:i.label,description:i.description,href:`/workspaces/${e}/settings/${i.path}`,disabled:!(l||u),tone:i.tone??"default"}});return Object.values(r.reduce((i,l)=>{const u=oc.find(p=>p.id===l.id);if(!u)return i;const d=i[u.group],h=d?{...d,items:[...d.items,l]}:{id:u.group,label:D6[u.group],items:[l]};return i[u.group]=h,i},{}))}function R6({sectionSegments:e=[]}){const{workspace:t,hasPermission:r}=Tr(),i=en(),l=es(),{effectiveSegments:u,redirectTo:d}=f.useMemo(()=>M6(e,t.id,l.search,l.hash),[e,t.id,l.search,l.hash]),h=T6(u)??Qu;f.useEffect(()=>{d&&i(d,{replace:!0})},[d,i]);const p=f.useMemo(()=>{const C=h.path.split("/");return u.slice(C.length)},[h.path,u]),x=f.useMemo(()=>A6(t.id,r),[t.id,r]),b=x.flatMap(C=>C.items).find(C=>C.id===h.id),y=x.find(C=>C.items.some(_=>_.id===h.id))?.label,j=b?.disabled?a.jsx(Dt,{title:"You don't have access to this section",description:"You need additional permissions to manage this area of workspace settings.",variant:"error"}):h.element;return a.jsx(a6,{workspaceName:t.name,navGroups:x,activeSectionId:h.id,activeSectionLabel:h.label,activeSectionDescription:h.description,activeGroupLabel:y??"Settings",children:a.jsx(i6,{value:{sectionId:h.id,params:p},children:j})})}function M6(e,t,r,i){const l={members:"access/members",roles:"access/roles",danger:"lifecycle/danger"},u=e.length>0?[...e]:Qu.path.split("/"),d=l[u[0]],h=d?[...d.split("/"),...u.slice(1)]:u,p=h.join("/"),x=d&&p?`/workspaces/${t}/settings/${p}${r}${i}`:void 0,v=e.length===0,b=oc.some(S=>p===S.path||p.startsWith(`${S.path}/`))||d!==void 0,y=`/workspaces/${t}/settings/${Qu.path}${r}${i}`;return{effectiveSegments:b?h:Qu.path.split("/"),redirectTo:v||!b||d?x??y:null}}function O6(){return a.jsx(cc,{children:a.jsx(z6,{})})}function z6(){const e=es(),t=en(),r=Ft(),i=md(),l=f.useMemo(()=>i.data?.items??[],[i.data?.items]),u=$6(e.pathname),d=f.useMemo(()=>B6(l,u),[l,u]);return f.useEffect(()=>{i.data&&r.setQueryData(Cn.list(Bu),i.data)},[r,i.data]),f.useEffect(()=>{!i.isLoading&&!i.isError&&l.length===0&&t("/workspaces",{replace:!0})},[i.isLoading,i.isError,l.length,t]),f.useEffect(()=>{d&&!u&&t(`/workspaces/${d.id}/${ld.path}${e.search}${e.hash}`,{replace:!0})},[d,u,e.search,e.hash,t]),f.useEffect(()=>{if(!(!d||!u)&&u!==d.id){const h=P6(e.pathname,e.search,d.id,u);h!==e.pathname+e.search&&t(h+e.hash,{replace:!0})}},[d,u,e.pathname,e.search,e.hash,t]),f.useEffect(()=>{d&&Rw(d.id)},[d]),i.isLoading?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(Dt,{title:"Loading workspace",variant:"loading"})}):i.isError?a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-background px-6 text-center",children:[a.jsx(Dt,{title:"Unable to load workspace",description:"We were unable to fetch workspace information. Refresh the page to try again.",variant:"error"}),a.jsx("button",{type:"button",className:"focus-ring rounded-lg border border-border-strong bg-card px-4 py-2 text-sm font-semibold text-muted-foreground hover:bg-muted",onClick:()=>i.refetch(),children:"Retry"})]}):d?a.jsx(gA,{workspace:d,workspaces:l,children:a.jsx(L6,{workspace:d})}):null}function L6({workspace:e}){return a.jsx(d3,{children:a.jsx(sO,{workspaceId:e.id,children:a.jsx(U6,{workspace:e})})})}function U6({workspace:e}){const t=Pi(),r=en(),i=es(),{session:l,windowState:u}=x1(),d=TT(),h=d.data?.enabled??!1,p=d.data?.detail??fj,x=pj(),[v,b]=f.useState(0),[y,S]=f.useState(null),j=f.useRef(null),C=f.useCallback(F=>{S(F)},[]),_=f.useMemo(()=>v1(e),[e]),[N,E]=f.useState(""),[D,U]=f.useState(!1),[z,V]=f.useState(!1),R=N.trim().toLowerCase(),A=!!(l&&u==="maximized"),B=f.useMemo(()=>_.map(F=>({id:F.id,label:F.label,description:`Jump to ${F.label}`,icon:a.jsx(F.icon,{className:"h-4 w-4 text-muted-foreground","aria-hidden":!0})})),[_]),T=f.useMemo(()=>ja(`ade.ui.workspace.${e.id}.navPinned`),[e.id]),K=f.useMemo(()=>ja(`ade.ui.workspace.${e.id}.navCollapsed`),[e.id]),[$,q]=f.useState(()=>{const F=T.get();if(typeof F=="boolean")return F;const X=K.get();return typeof X=="boolean"?!X:!1});f.useEffect(()=>{const F=T.get();if(typeof F=="boolean"){q(F);return}const X=K.get();q(typeof X=="boolean"?!X:!1)},[T,K]),f.useEffect(()=>{T.set($)},[$,T]),f.useEffect(()=>{E("")},[e.id]),f.useEffect(()=>{if(typeof window>"u")return;const F=()=>{window.innerWidth>=1024&&U(!1)};return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),f.useEffect(()=>{if(typeof document>"u")return;const F=document.body.style.overflow;return D?document.body.style.overflow="hidden":document.body.style.overflow=F||"",()=>{document.body.style.overflow=F}},[D]),f.useEffect(()=>{A&&U(!1)},[A]),f.useLayoutEffect(()=>{if(A){b(0);return}const F=j.current;if(!F)return;const X=()=>{const _e=Math.round(F.getBoundingClientRect().height);b(me=>me===_e?me:_e)};if(X(),typeof ResizeObserver>"u")return;const Te=new ResizeObserver(()=>X());return Te.observe(F),()=>Te.disconnect()},[A]);const I=f.useCallback(()=>{if(!R)return;const F=_.find(X=>X.label.toLowerCase().includes(R))??_.find(X=>X.id.toLowerCase().includes(R));F&&r(F.href)},[R,_,r]),je=f.useCallback(F=>{const X=_.find(Te=>Te.id===F.id);X&&(r(X.href),E(""))},[_,r]),M=f.useCallback(()=>U(!0),[]),H=f.useCallback(()=>U(!1),[]),ee=`Switch workspace: ${e.name}`,be=F6(e.name),de=a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx("button",{type:"button",onClick:M,className:te("focus-ring inline-flex h-11 w-11 items-center justify-center rounded-xl border lg:hidden","border-header-border/40 bg-header/20 text-header-muted transition","hover:border-header-border/70 hover:bg-header/30 hover:text-header-foreground"),"aria-label":"Open workspace navigation",children:a.jsx(zD,{className:"h-4 w-4"})}),a.jsxs("button",{type:"button",onClick:()=>r("/workspaces"),"aria-label":ee,title:ee,className:te("group inline-flex min-w-0 items-center gap-3 rounded-xl border px-3 py-2 text-left transition","w-fit max-w-full sm:max-w-[16rem] lg:max-w-[18rem] sm:shrink-0","border-header-border/40 bg-header/20 text-header-foreground hover:border-header-border/70 hover:bg-header/30","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-header-ring focus-visible:ring-offset-2 focus-visible:ring-offset-header"),children:[a.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-brand-500 text-xs font-semibold uppercase text-on-brand shadow-sm transition-colors group-hover:bg-brand-600",children:be}),a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate text-sm font-semibold text-header-foreground",children:e.name}),a.jsx("span",{className:"hidden truncate text-xs text-header-muted sm:block",children:"Switch workspace"})]}),a.jsx("span",{className:"hidden text-header-muted sm:inline-flex","aria-hidden":!0,children:a.jsx(oi,{className:"h-4 w-4"})})]})]}),L=t.user.display_name||t.user.email||"Signed in",W=t.user.email??"",pe=a.jsxs("div",{className:"flex min-w-0 flex-wrap items-center gap-2",children:[a.jsx(lj,{tone:"header"}),a.jsx(dj,{displayName:L,email:W,tone:"header",actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>V(!0)}]})]}),G={value:N,onChange:E,onSubmit:I,placeholder:`Search ${e.name} or jump to a section`,shortcutHint:x,scopeLabel:e.name,suggestions:B,onSelectSuggestion:je},ie=q6(i.pathname,e.id),J=I6(e.id,ie,i.search,i.hash),ne=J?.kind==="content"&&J.key==="documents",oe=J?.kind==="content"&&J.key==="runs",he=ne?new URLSearchParams(i.search).get("q")??"":"",ue=oe?new URLSearchParams(i.search).get("q")??"":"",Oe=f.useCallback(F=>{if(!ne)return;const X=new URLSearchParams(i.search);F?X.set("q",F):X.delete("q");const Te=X.toString();r(`${i.pathname}${Te?`?${Te}`:""}${i.hash}`,{replace:!0})},[ne,i.hash,i.pathname,i.search,r]),Ge=f.useCallback(F=>{Oe(F)},[Oe]),Se=f.useCallback(()=>{Oe("")},[Oe]),ze=ne?{value:he,onChange:Oe,onSubmit:Ge,onClear:Se,placeholder:"Search documents",shortcutHint:x,scopeLabel:"Documents",enableShortcut:!0}:void 0,Pe=f.useCallback(F=>{if(!oe)return;const X=new URLSearchParams(i.search);F?X.set("q",F):X.delete("q");const Te=X.toString();r(`${i.pathname}${Te?`?${Te}`:""}${i.hash}`,{replace:!0})},[oe,i.hash,i.pathname,i.search,r]),Me=f.useCallback(F=>{Pe(F)},[Pe]),Be=f.useCallback(()=>{Pe("")},[Pe]),st=ze??(oe?{value:ue,onChange:Pe,onSubmit:Me,onClear:Be,placeholder:"Search runs",shortcutHint:x,scopeLabel:"Runs",enableShortcut:!0}:void 0)??G;if(f.useEffect(()=>{J?.kind==="redirect"&&r(J.to,{replace:!0})},[J,r]),!J||J.kind==="redirect")return null;const P=J.fullHeight??!1;return a.jsxs(a.Fragment,{children:[a.jsx(hj,{open:z,onClose:()=>V(!1)}),a.jsxs("div",{className:te("flex min-w-0 flex-col bg-background text-foreground h-screen overflow-hidden"),style:{"--workspace-topbar-height":`${v}px`},children:[A?null:a.jsx("div",{ref:j,children:a.jsx(uj,{brand:de,trailing:pe,search:st,scrollContainer:y})}),a.jsxs("div",{className:"relative flex min-h-0 min-w-0 flex-1",children:[A?null:a.jsx(uO,{workspace:e,items:_,isPinned:$,onTogglePinned:()=>q(F=>!F)}),a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:[!A&&D?a.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-overlay/40 backdrop-blur-sm",onClick:H,"aria-label":"Close navigation"}),a.jsxs("div",{className:"absolute inset-y-0 left-0 flex h-full w-[min(20rem,85vw)] max-w-xs flex-col rounded-r-3xl border-r border-sidebar-border bg-sidebar text-sidebar-foreground shadow-[0_45px_90px_-50px_rgb(var(--sys-color-shadow)/0.85)]",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-sidebar-border px-4 py-3",children:[a.jsxs("div",{className:"flex flex-col leading-tight",children:[a.jsx("span",{className:"text-sm font-semibold text-sidebar-foreground",children:e.name}),a.jsx("span",{className:"text-xs text-sidebar-foreground",children:"Workspace navigation"})]}),a.jsx("button",{type:"button",onClick:H,className:"focus-ring inline-flex h-9 w-9 items-center justify-center rounded-xl border border-sidebar-border bg-sidebar-item-hover text-sidebar-foreground/80 hover:bg-sidebar-item-active hover:text-sidebar-foreground","aria-label":"Close navigation",children:a.jsx(Ws,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:a.jsx(y1,{items:_,onNavigate:H,showHeading:!1})})]})]}):null,a.jsx("div",{className:"relative flex min-h-0 min-w-0 flex-1 overflow-hidden",children:a.jsx("main",{id:"main-content",tabIndex:-1,className:te("relative flex-1 min-h-0 min-w-0",P?"flex flex-col overflow-hidden":"overflow-y-auto"),ref:C,children:a.jsxs("div",{className:te(P?"flex w-full flex-1 min-h-0 flex-col px-0 py-0":"mx-auto flex w-full max-w-7xl flex-col px-4 py-6"),children:[h?a.jsx("div",{className:te("mb-4",P?"px-6 pt-4":""),children:a.jsx(Lt,{tone:"warning",heading:"Safe mode active",children:p})}):null,a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:J.element})]})})},`section-${J.key}`)]})]})]})]})}function $6(e){return e.match(/^\/workspaces\/([^/]+)/)?.[1]??null}function q6(e,t){const r=`/workspaces/${t}`;return e.startsWith(r)?e.slice(r.length).split("/").map(l=>l.trim()).filter(l=>l.length>0):[]}function B6(e,t){return t?e.find(r=>r.id===t)??e.find(r=>r.slug===t)??e[0]??null:e[0]??null}function P6(e,t,r,i){const l=`/workspaces/${i}`,u=e.startsWith(l)?e.slice(l.length):"",d=u&&u!=="/"?u:`/${ld.path}`;return`/workspaces/${r}${d}${t}`}function F6(e){const t=e.trim().split(/\s+/);return t.length===0?"WS":t.slice(0,2).map(i=>i[0]??"").join("").toUpperCase()}function I6(e,t,r,i){const l=`${r}${i}`;if(t.length===0)return{kind:"redirect",to:`/workspaces/${e}/${ld.path}${l}`};const[u,d,h]=t;switch(u){case"overview":return{kind:"content",key:"overview",element:a.jsx(pO,{})};case ld.path:case"documents":{if(d){const p=new URLSearchParams(r);p.set("doc",decodeURIComponent(d));const x=p.toString();return{kind:"redirect",to:`/workspaces/${e}/documents${x?`?${x}`:""}${i}`}}return{kind:"content",key:"documents",element:a.jsx(w5,{}),fullHeight:!0}}case"runs":return{kind:"content",key:"runs",element:a.jsx(W5,{}),fullHeight:!0};case"config-builder":return d?h==="editor"?{kind:"content",key:`config-builder:${d}:editor`,element:a.jsx(H6,{configId:decodeURIComponent(d)}),fullHeight:!0}:{kind:"content",key:`config-builder:${d}`,element:a.jsx(s6,{params:{configId:decodeURIComponent(d)}})}:{kind:"content",key:"config-builder",element:a.jsx(n6,{})};case"settings":{const p=t.slice(1),x=p.length>0?p:[];return{kind:"content",key:`settings:${x.length>0?x.join(":"):"general"}`,element:a.jsx(R6,{sectionSegments:x})}}default:return{kind:"content",key:`not-found:${t.join("/")}`,element:a.jsx(Dt,{title:"Section not found",description:"The requested workspace section could not be located.",variant:"error"})}}}function H6({configId:e}){return a.jsx(r6,{params:{configId:e}})}function V6(){const e=en(),t=Ft();return f.useEffect(()=>{let r=!1;const i=new AbortController;return(async()=>{try{await T2({signal:i.signal})}finally{r||(t.removeQueries({queryKey:Er.root,exact:!1}),e("/login",{replace:!0}))}})().catch(()=>{r||e("/login",{replace:!0})}),()=>{r=!0,i.abort()}},[e,t]),null}function Q6(){return a.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col justify-center px-6 py-16 text-center",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-brand-600",children:"404"}),a.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Page not found"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["The resource you're looking for doesn't exist yet. Add a screen under ",a.jsx("code",{children:"src/screens/<ScreenName>/"})," and register it inside ",a.jsx("code",{children:"src/app/App.tsx"})," if this surface should exist in the routerless SPA."]}),a.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[a.jsx(Um,{to:"/",className:"focus-ring inline-flex items-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-on-brand transition hover:bg-brand-700",children:"Return home"}),a.jsx(Um,{to:"/login",className:"focus-ring inline-flex items-center rounded-lg border border-border-strong bg-card px-4 py-2 font-semibold text-muted-foreground hover:bg-background",children:"Go to sign in"})]})]})})}function Z6(){return a.jsx(vN,{children:a.jsx(d2,{children:a.jsx(K6,{})})})}function K6(){const e=es(),r=G6(e.pathname).split("/").filter(Boolean);if(r.length===0)return a.jsx(gC,{});const[i,l]=r;switch(i){case"login":return a.jsx(wD,{});case"logout":return a.jsx(V6,{});case"auth":if(l==="callback")return a.jsx(jD,{});break;case"setup":return a.jsx(ND,{});case"workspaces":return l?l==="new"?a.jsx(hA,{}):a.jsx(O6,{}):a.jsx(OT,{});case"documents":return a.jsx(f5,{})}return a.jsx(Q6,{})}function G6(e){return!e||e==="/"?"/":e.endsWith("/")&&e.length>1?e.slice(0,-1):e}bN.createRoot(document.getElementById("root")).render(a.jsx(Wt.StrictMode,{children:a.jsx(Z6,{})}));export{Wt as W,te as c,a as j,f as r};
