(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function Vb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nf={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx;function cj(){if(Hx)return Ll;Hx=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:e,type:i,key:d,ref:c!==void 0?c:null,props:u}}return Ll.Fragment=n,Ll.jsx=r,Ll.jsxs=r,Ll}var Fx;function uj(){return Fx||(Fx=1,Nf.exports=cj()),Nf.exports}var l=uj(),_f={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx;function dj(){if(Zx)return Ie;Zx=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function S(T){return T===null||typeof T!="object"?null:(T=w&&T[w]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,C={};function k(T,W,le){this.props=T,this.context=W,this.refs=C,this.updater=le||N}k.prototype.isReactComponent={},k.prototype.setState=function(T,W){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,W,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=k.prototype;function A(T,W,le){this.props=T,this.context=W,this.refs=C,this.updater=le||N}var L=A.prototype=new _;L.constructor=A,j(L,k.prototype),L.isPureReactComponent=!0;var O=Array.isArray;function J(){}var U={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function R(T,W,le){var Z=le.ref;return{$$typeof:e,type:T,key:W,ref:Z!==void 0?Z:null,props:le}}function H(T,W){return R(T.type,W,T.props)}function ae(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function I(T){var W={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(le){return W[le]})}var F=/\/+/g;function ue(T,W){return typeof T=="object"&&T!==null&&T.key!=null?I(""+T.key):W.toString(36)}function xe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(J,J):(T.status="pending",T.then(function(W){T.status==="pending"&&(T.status="fulfilled",T.value=W)},function(W){T.status==="pending"&&(T.status="rejected",T.reason=W)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function M(T,W,le,Z,X){var B=typeof T;(B==="undefined"||B==="boolean")&&(T=null);var P=!1;if(T===null)P=!0;else switch(B){case"bigint":case"string":case"number":P=!0;break;case"object":switch(T.$$typeof){case e:case n:P=!0;break;case b:return P=T._init,M(P(T._payload),W,le,Z,X)}}if(P)return X=X(T),P=Z===""?"."+ue(T,0):Z,O(X)?(le="",P!=null&&(le=P.replace(F,"$&/")+"/"),M(X,W,le,"",function(me){return me})):X!=null&&(ae(X)&&(X=H(X,le+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(F,"$&/")+"/")+P)),W.push(X)),1;P=0;var $=Z===""?".":Z+":";if(O(T))for(var re=0;re<T.length;re++)Z=T[re],B=$+ue(Z,re),P+=M(Z,W,le,B,X);else if(re=S(T),typeof re=="function")for(T=re.call(T),re=0;!(Z=T.next()).done;)Z=Z.value,B=$+ue(Z,re++),P+=M(Z,W,le,B,X);else if(B==="object"){if(typeof T.then=="function")return M(xe(T),W,le,Z,X);throw W=String(T),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return P}function G(T,W,le){if(T==null)return T;var Z=[],X=0;return M(T,Z,"","",function(B){return W.call(le,B,X++)}),Z}function Y(T){if(T._status===-1){var W=T._result;W=W(),W.then(function(le){(T._status===0||T._status===-1)&&(T._status=1,T._result=le)},function(le){(T._status===0||T._status===-1)&&(T._status=2,T._result=le)}),T._status===-1&&(T._status=0,T._result=W)}if(T._status===1)return T._result.default;throw T._result}var we=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ie={map:G,forEach:function(T,W,le){G(T,function(){W.apply(this,arguments)},le)},count:function(T){var W=0;return G(T,function(){W++}),W},toArray:function(T){return G(T,function(W){return W})||[]},only:function(T){if(!ae(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ie.Activity=v,Ie.Children=ie,Ie.Component=k,Ie.Fragment=r,Ie.Profiler=c,Ie.PureComponent=A,Ie.StrictMode=i,Ie.Suspense=x,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(T){return U.H.useMemoCache(T)}},Ie.cache=function(T){return function(){return T.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(T,W,le){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Z=j({},T.props),X=T.key;if(W!=null)for(B in W.key!==void 0&&(X=""+W.key),W)!ne.call(W,B)||B==="key"||B==="__self"||B==="__source"||B==="ref"&&W.ref===void 0||(Z[B]=W[B]);var B=arguments.length-2;if(B===1)Z.children=le;else if(1<B){for(var P=Array(B),$=0;$<B;$++)P[$]=arguments[$+2];Z.children=P}return R(T.type,X,Z)},Ie.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},Ie.createElement=function(T,W,le){var Z,X={},B=null;if(W!=null)for(Z in W.key!==void 0&&(B=""+W.key),W)ne.call(W,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(X[Z]=W[Z]);var P=arguments.length-2;if(P===1)X.children=le;else if(1<P){for(var $=Array(P),re=0;re<P;re++)$[re]=arguments[re+2];X.children=$}if(T&&T.defaultProps)for(Z in P=T.defaultProps,P)X[Z]===void 0&&(X[Z]=P[Z]);return R(T,B,X)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(T){return{$$typeof:m,render:T}},Ie.isValidElement=ae,Ie.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:Y}},Ie.memo=function(T,W){return{$$typeof:g,type:T,compare:W===void 0?null:W}},Ie.startTransition=function(T){var W=U.T,le={};U.T=le;try{var Z=T(),X=U.S;X!==null&&X(le,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(J,we)}catch(B){we(B)}finally{W!==null&&le.types!==null&&(W.types=le.types),U.T=W}},Ie.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ie.use=function(T){return U.H.use(T)},Ie.useActionState=function(T,W,le){return U.H.useActionState(T,W,le)},Ie.useCallback=function(T,W){return U.H.useCallback(T,W)},Ie.useContext=function(T){return U.H.useContext(T)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(T,W){return U.H.useDeferredValue(T,W)},Ie.useEffect=function(T,W){return U.H.useEffect(T,W)},Ie.useEffectEvent=function(T){return U.H.useEffectEvent(T)},Ie.useId=function(){return U.H.useId()},Ie.useImperativeHandle=function(T,W,le){return U.H.useImperativeHandle(T,W,le)},Ie.useInsertionEffect=function(T,W){return U.H.useInsertionEffect(T,W)},Ie.useLayoutEffect=function(T,W){return U.H.useLayoutEffect(T,W)},Ie.useMemo=function(T,W){return U.H.useMemo(T,W)},Ie.useOptimistic=function(T,W){return U.H.useOptimistic(T,W)},Ie.useReducer=function(T,W,le){return U.H.useReducer(T,W,le)},Ie.useRef=function(T){return U.H.useRef(T)},Ie.useState=function(T){return U.H.useState(T)},Ie.useSyncExternalStore=function(T,W,le){return U.H.useSyncExternalStore(T,W,le)},Ie.useTransition=function(){return U.H.useTransition()},Ie.version="19.2.0",Ie}var Vx;function wh(){return Vx||(Vx=1,_f.exports=dj()),_f.exports}var p=wh();const bt=Vb(p);var Cf={exports:{}},Ul={},kf={exports:{}},Tf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function fj(){return Px||(Px=1,(function(e){function n(M,G){var Y=M.length;M.push(G);e:for(;0<Y;){var we=Y-1>>>1,ie=M[we];if(0<c(ie,G))M[we]=G,M[Y]=ie,Y=we;else break e}}function r(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var G=M[0],Y=M.pop();if(Y!==G){M[0]=Y;e:for(var we=0,ie=M.length,T=ie>>>1;we<T;){var W=2*(we+1)-1,le=M[W],Z=W+1,X=M[Z];if(0>c(le,Y))Z<ie&&0>c(X,le)?(M[we]=X,M[Z]=Y,we=Z):(M[we]=le,M[W]=Y,we=W);else if(Z<ie&&0>c(X,Y))M[we]=X,M[Z]=Y,we=Z;else break e}}return G}function c(M,G){var Y=M.sortIndex-G.sortIndex;return Y!==0?Y:M.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var x=[],g=[],b=1,v=null,w=3,S=!1,N=!1,j=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function L(M){for(var G=r(g);G!==null;){if(G.callback===null)i(g);else if(G.startTime<=M)i(g),G.sortIndex=G.expirationTime,n(x,G);else break;G=r(g)}}function O(M){if(j=!1,L(M),!N)if(r(x)!==null)N=!0,J||(J=!0,I());else{var G=r(g);G!==null&&xe(O,G.startTime-M)}}var J=!1,U=-1,ne=5,R=-1;function H(){return C?!0:!(e.unstable_now()-R<ne)}function ae(){if(C=!1,J){var M=e.unstable_now();R=M;var G=!0;try{e:{N=!1,j&&(j=!1,_(U),U=-1),S=!0;var Y=w;try{t:{for(L(M),v=r(x);v!==null&&!(v.expirationTime>M&&H());){var we=v.callback;if(typeof we=="function"){v.callback=null,w=v.priorityLevel;var ie=we(v.expirationTime<=M);if(M=e.unstable_now(),typeof ie=="function"){v.callback=ie,L(M),G=!0;break t}v===r(x)&&i(x),L(M)}else i(x);v=r(x)}if(v!==null)G=!0;else{var T=r(g);T!==null&&xe(O,T.startTime-M),G=!1}}break e}finally{v=null,w=Y,S=!1}G=void 0}}finally{G?I():J=!1}}}var I;if(typeof A=="function")I=function(){A(ae)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ue=F.port2;F.port1.onmessage=ae,I=function(){ue.postMessage(null)}}else I=function(){k(ae,0)};function xe(M,G){U=k(function(){M(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(M){switch(w){case 1:case 2:case 3:var G=3;break;default:G=w}var Y=w;w=G;try{return M()}finally{w=Y}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(M,G){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=w;w=M;try{return G()}finally{w=Y}},e.unstable_scheduleCallback=function(M,G,Y){var we=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?we+Y:we):Y=we,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Y+ie,M={id:b++,callback:G,priorityLevel:M,startTime:Y,expirationTime:ie,sortIndex:-1},Y>we?(M.sortIndex=Y,n(g,M),r(x)===null&&M===r(g)&&(j?(_(U),U=-1):j=!0,xe(O,Y-we))):(M.sortIndex=ie,n(x,M),N||S||(N=!0,J||(J=!0,I()))),M},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(M){var G=w;return function(){var Y=w;w=G;try{return M.apply(this,arguments)}finally{w=Y}}}})(Tf)),Tf}var Qx;function hj(){return Qx||(Qx=1,kf.exports=fj()),kf.exports}var Af={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function mj(){if(Ix)return zn;Ix=1;var e=wh();function n(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:x,containerInfo:g,implementation:b}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zn.createPortal=function(x,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(x,g,null,b)},zn.flushSync=function(x){var g=d.T,b=i.p;try{if(d.T=null,i.p=2,x)return x()}finally{d.T=g,i.p=b,i.d.f()}},zn.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},zn.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},zn.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var b=g.as,v=m(b,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:S}):b==="script"&&i.d.X(x,{crossOrigin:v,integrity:w,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zn.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},zn.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,v=m(b,g.crossOrigin);i.d.L(x,b,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zn.preloadModule=function(x,g){if(typeof x=="string")if(g){var b=m(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},zn.requestFormReset=function(x){i.d.r(x)},zn.unstable_batchedUpdates=function(x,g){return x(g)},zn.useFormState=function(x,g,b){return d.H.useFormState(x,g,b)},zn.useFormStatus=function(){return d.H.useHostTransitionStatus()},zn.version="19.2.0",zn}var Wx;function Pb(){if(Wx)return Af.exports;Wx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Af.exports=mj(),Af.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function pj(){if(Gx)return Ul;Gx=1;var e=hj(),n=wh(),r=Pb();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(i(188))}function g(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,o=s;;){var f=a.return;if(f===null)break;var h=f.alternate;if(h===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===a)return x(f),t;if(h===o)return x(f),s;h=h.sibling}throw Error(i(188))}if(a.return!==o.return)a=f,o=h;else{for(var y=!1,E=f.child;E;){if(E===a){y=!0,a=f,o=h;break}if(E===o){y=!0,o=f,a=h;break}E=E.sibling}if(!y){for(E=h.child;E;){if(E===a){y=!0,a=h,o=f;break}if(E===o){y=!0,o=h,a=f;break}E=E.sibling}if(!y)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=ae&&t[ae]||t["@@iterator"],typeof t=="function"?t:null)}var F=Symbol.for("react.client.reference");function ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===F?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case O:return"Suspense";case J:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case A:return t.displayName||"Context";case _:return(t._context.displayName||"Context")+".Consumer";case L:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return s=t.displayName||null,s!==null?s:ue(t.type)||"Memo";case ne:s=t._payload,t=t._init;try{return ue(t(s))}catch{}}return null}var xe=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},we=[],ie=-1;function T(t){return{current:t}}function W(t){0>ie||(t.current=we[ie],we[ie]=null,ie--)}function le(t,s){ie++,we[ie]=t.current,t.current=s}var Z=T(null),X=T(null),B=T(null),P=T(null);function $(t,s){switch(le(B,s),le(X,t),le(Z,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ux(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ux(s),t=dx(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(Z),le(Z,t)}function re(){W(Z),W(X),W(B)}function me(t){t.memoizedState!==null&&le(P,t);var s=Z.current,a=dx(s,t.type);s!==a&&(le(X,t),le(Z,a))}function Me(t){X.current===t&&(W(Z),W(X)),P.current===t&&(W(P),Dl._currentValue=Y)}var ve,Oe;function Be(t){if(ve===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ve=s&&s[1]||"",Oe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+t+Oe}var Ne=!1;function Le(t,s){if(!t||Ne)return"";Ne=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var se=oe}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(oe){se=oe}t.call(pe.prototype)}}else{try{throw Error()}catch(oe){se=oe}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),y=h[0],E=h[1];if(y&&E){var z=y.split(`
`),te=E.split(`
`);for(f=o=0;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(o===z.length||f===te.length)for(o=z.length-1,f=te.length-1;1<=o&&0<=f&&z[o]!==te[f];)f--;for(;1<=o&&0<=f;o--,f--)if(z[o]!==te[f]){if(o!==1||f!==1)do if(o--,f--,0>f||z[o]!==te[f]){var de=`
`+z[o].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=o&&0<=f);break}}}finally{Ne=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Be(a):""}function rn(t,s){switch(t.tag){case 26:case 27:case 5:return Be(t.type);case 16:return Be("Lazy");case 13:return t.child!==s&&s!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Le(t.type,!1);case 11:return Le(t.type.render,!1);case 1:return Le(t.type,!0);case 31:return Be("Activity");default:return""}}function Et(t){try{var s="",a=null;do s+=rn(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Tt=Object.prototype.hasOwnProperty,D=e.unstable_scheduleCallback,K=e.unstable_cancelCallback,ce=e.unstable_shouldYield,Ee=e.unstable_requestPaint,ye=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,De=e.unstable_ImmediatePriority,Qe=e.unstable_UserBlockingPriority,We=e.unstable_NormalPriority,Nt=e.unstable_LowPriority,Se=e.unstable_IdlePriority,_e=e.log,Fe=e.unstable_setDisableYieldValue,Mt=null,nt=null;function Gt(t){if(typeof _e=="function"&&Fe(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(Mt,t)}catch{}}var _t=Math.clz32?Math.clz32:qi,vr=Math.log,Os=Math.LN2;function qi(t){return t>>>=0,t===0?32:31-(vr(t)/Os|0)|0}var Ls=256,yr=262144,zt=4194304;function yt(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function At(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var f=0,h=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~h,o!==0?f=yt(o):(y&=E,y!==0?f=yt(y):a||(a=E&~t,a!==0&&(f=yt(a))))):(E=o&~h,E!==0?f=yt(E):y!==0?f=yt(y):a||(a=o&~t,a!==0&&(f=yt(a)))),f===0?0:s!==0&&s!==f&&(s&h)===0&&(h=f&-f,a=s&-s,h>=a||h===32&&(a&4194048)!==0)?s:f}function kn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function fn(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hn(){var t=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),t}function mn(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Ln(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function qt(t,s,a,o,f,h){var y=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,z=t.expirationTimes,te=t.hiddenUpdates;for(a=y&~a;0<a;){var de=31-_t(a),pe=1<<de;E[de]=0,z[de]=-1;var se=te[de];if(se!==null)for(te[de]=null,de=0;de<se.length;de++){var oe=se[de];oe!==null&&(oe.lane&=-536870913)}a&=~pe}o!==0&&vn(t,o,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(y&~s))}function vn(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-_t(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function yn(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-_t(a),f=1<<o;f&s|t[o]&s&&(t[o]|=s),a&=~f}}function Tn(t,s){var a=s&-s;return a=(a&42)!==0?1:Kn(a),(a&(t.suspendedLanes|s))!==0?0:a}function Kn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ke(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function An(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:zx(t.type))}function Ot(t,s){var a=G.p;try{return G.p=t,s()}finally{G.p=a}}var Un=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Un,Pt="__reactProps$"+Un,wr="__reactContainer$"+Un,Oa="__reactEvents$"+Un,Su="__reactListeners$"+Un,Ze="__reactHandles$"+Un,ta="__reactResources$"+Un,jr="__reactMarker$"+Un;function Hi(t){delete t[Ct],delete t[Pt],delete t[Oa],delete t[Su],delete t[Ze]}function Sr(t){var s=t[Ct];if(s)return s;for(var a=t.parentNode;a;){if(s=a[wr]||a[Ct]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=bx(t);t!==null;){if(a=t[Ct])return a;t=bx(t)}return s}t=a,a=t.parentNode}return null}function Kt(t){if(t=t[Ct]||t[wr]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Yn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Er(t){var s=t[ta];return s||(s=t[ta]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(t){t[jr]=!0}var Xs=new Set,na={};function ls(t,s){Nr(t,s),Nr(t+"Capture",s)}function Nr(t,s){for(na[t]=s,t=0;t<s.length;t++)Xs.add(s[t])}var Fi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fo={},Js={};function an(t){return Tt.call(Js,t)?!0:Tt.call(fo,t)?!1:Fi.test(t)?Js[t]=!0:(fo[t]=!0,!1)}function La(t,s,a){if(an(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function ws(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Rn(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function Dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function js(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,h.call(this,y)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ss(t){if(!t._valueTracker){var s=Zi(t)?"checked":"value";t._valueTracker=js(t,s,""+t[s])}}function Ua(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Zi(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function sa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $a=/[\n"\\]/g;function $t(t){return t.replace($a,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ho(t,s,a,o,f,h,y,E){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),s!=null?y==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Dn(s)):t.value!==""+Dn(s)&&(t.value=""+Dn(s)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),s!=null?Vi(t,y,Dn(s)):a!=null?Vi(t,y,Dn(a)):o!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Dn(E):t.removeAttribute("name")}function Eu(t,s,a,o,f,h,y,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),s!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||s!=null)){Ss(t);return}a=a!=null?""+Dn(a):"",s=s!=null?""+Dn(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),Ss(t)}function Vi(t,s,a){s==="number"&&sa(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Us(t,s,a,o){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Dn(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function Pi(t,s,a){if(s!=null&&(s=""+Dn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Dn(a):""}function Qi(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(i(92));if(xe(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=Dn(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Ss(t)}function _r(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mo(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Ba.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function po(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in s)o=s[f],s.hasOwnProperty(f)&&a[f]!==o&&mo(t,f,o)}else for(var h in s)s.hasOwnProperty(h)&&mo(t,h,s[h])}function qa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ha=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(t){return Nu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Es(){}var Cr=null;function $s(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bs=null,qs=null;function Za(t){var s=Kt(t);if(s&&(t=s.stateNode)){var a=t[Pt]||null;e:switch(t=s.stateNode,s.type){case"input":if(ho(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+$t(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var f=o[Pt]||null;if(!f)throw Error(i(90));ho(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&Ua(o)}break e;case"textarea":Pi(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Us(t,!!a.multiple,s,!1)}}}var Hs=!1;function go(t,s,a){if(Hs)return t(s,a);Hs=!0;try{var o=t(s);return o}finally{if(Hs=!1,(Bs!==null||qs!==null)&&(tc(),Bs&&(s=Bs,t=qs,qs=Bs=null,Za(s),t)))for(s=0;s<t.length;s++)Za(t[s])}}function ra(t,s){var a=t.stateNode;if(a===null)return null;var o=a[Pt]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ii=!1;if(Ns)try{var $n={};Object.defineProperty($n,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{Ii=!1}var Fs=null,Wi=null,Va=null;function xo(){if(Va)return Va;var t,s=Wi,a=s.length,o,f="value"in Fs?Fs.value:Fs.textContent,h=f.length;for(t=0;t<a&&s[t]===f[t];t++);var y=a-t;for(o=1;o<=y&&s[a-o]===f[h-o];o++);return Va=f.slice(t,1<o?1-o:void 0)}function Pa(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Qa(){return!0}function bo(){return!1}function wn(t){function s(a,o,f,h,y){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Qa:bo,this.isPropagationStopped=bo,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),s}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=wn(er),aa=v({},er,{view:0,detail:0}),_u=wn(aa),Gi,Ki,ia,Wa=v({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ia&&(ia&&t.type==="mousemove"?(Gi=t.screenX-ia.screenX,Ki=t.screenY-ia.screenY):Ki=Gi=0,ia=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:Ki}}),vo=wn(Wa),Cu=v({},Wa,{dataTransfer:0}),ku=wn(Cu),Yi=v({},aa,{relatedTarget:0}),Q=wn(Yi),ge=v({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Te=wn(ge),ke=v({},er,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pe=wn(ke),ln=v({},er,{data:0}),ct=wn(ln),Mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xi(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=mm[t])?!!s[t]:!1}function Tu(){return Xi}var yw=v({},aa,{key:function(t){if(t.key){var s=Mn[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(t){return t.type==="keypress"?Pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ww=wn(yw),jw=v({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pm=wn(jw),Sw=v({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),Ew=wn(Sw),Nw=v({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),_w=wn(Nw),Cw=v({},Wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kw=wn(Cw),Tw=v({},er,{newState:0,oldState:0}),Aw=wn(Tw),Rw=[9,13,27,32],Au=Ns&&"CompositionEvent"in window,Ji=null;Ns&&"documentMode"in document&&(Ji=document.documentMode);var Dw=Ns&&"TextEvent"in window&&!Ji,gm=Ns&&(!Au||Ji&&8<Ji&&11>=Ji),xm=" ",bm=!1;function vm(t,s){switch(t){case"keyup":return Rw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ym(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ga=!1;function Mw(t,s){switch(t){case"compositionend":return ym(s);case"keypress":return s.which!==32?null:(bm=!0,xm);case"textInput":return t=s.data,t===xm&&bm?null:t;default:return null}}function zw(t,s){if(Ga)return t==="compositionend"||!Au&&vm(t,s)?(t=xo(),Va=Wi=Fs=null,Ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return gm&&s.locale!=="ko"?null:s.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ow[t.type]:s==="textarea"}function jm(t,s,a,o){Bs?qs?qs.push(o):qs=[o]:Bs=o,s=oc(s,"onChange"),0<s.length&&(a=new Ia("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var el=null,tl=null;function Lw(t){rx(t,0)}function yo(t){var s=Yn(t);if(Ua(s))return t}function Sm(t,s){if(t==="change")return s}var Em=!1;if(Ns){var Ru;if(Ns){var Du="oninput"in document;if(!Du){var Nm=document.createElement("div");Nm.setAttribute("oninput","return;"),Du=typeof Nm.oninput=="function"}Ru=Du}else Ru=!1;Em=Ru&&(!document.documentMode||9<document.documentMode)}function _m(){el&&(el.detachEvent("onpropertychange",Cm),tl=el=null)}function Cm(t){if(t.propertyName==="value"&&yo(tl)){var s=[];jm(s,tl,t,$s(t)),go(Lw,s)}}function Uw(t,s,a){t==="focusin"?(_m(),el=s,tl=a,el.attachEvent("onpropertychange",Cm)):t==="focusout"&&_m()}function $w(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yo(tl)}function Bw(t,s){if(t==="click")return yo(s)}function qw(t,s){if(t==="input"||t==="change")return yo(s)}function Hw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Xn=typeof Object.is=="function"?Object.is:Hw;function nl(t,s){if(Xn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!Tt.call(s,f)||!Xn(t[f],s[f]))return!1}return!0}function km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tm(t,s){var a=km(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=km(a)}}function Am(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Am(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Rm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=sa(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=sa(t.document)}return s}function Mu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Fw=Ns&&"documentMode"in document&&11>=document.documentMode,Ka=null,zu=null,sl=null,Ou=!1;function Dm(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ou||Ka==null||Ka!==sa(o)||(o=Ka,"selectionStart"in o&&Mu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),sl&&nl(sl,o)||(sl=o,o=oc(zu,"onSelect"),0<o.length&&(s=new Ia("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Ka)))}function la(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ya={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},Lu={},Mm={};Ns&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function oa(t){if(Lu[t])return Lu[t];if(!Ya[t])return t;var s=Ya[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Mm)return Lu[t]=s[a];return t}var zm=oa("animationend"),Om=oa("animationiteration"),Lm=oa("animationstart"),Zw=oa("transitionrun"),Vw=oa("transitionstart"),Pw=oa("transitioncancel"),Um=oa("transitionend"),$m=new Map,Uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uu.push("scrollEnd");function _s(t,s){$m.set(t,s),ls(s,[t])}var wo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},os=[],Xa=0,$u=0;function jo(){for(var t=Xa,s=$u=Xa=0;s<t;){var a=os[s];os[s++]=null;var o=os[s];os[s++]=null;var f=os[s];os[s++]=null;var h=os[s];if(os[s++]=null,o!==null&&f!==null){var y=o.pending;y===null?f.next=f:(f.next=y.next,y.next=f),o.pending=f}h!==0&&Bm(a,f,h)}}function So(t,s,a,o){os[Xa++]=t,os[Xa++]=s,os[Xa++]=a,os[Xa++]=o,$u|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Bu(t,s,a,o){return So(t,s,a,o),Eo(t)}function ca(t,s){return So(t,null,null,s),Eo(t)}function Bm(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var f=!1,h=t.return;h!==null;)h.childLanes|=a,o=h.alternate,o!==null&&(o.childLanes|=a),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,f&&s!==null&&(f=31-_t(a),t=h.hiddenUpdates,o=t[f],o===null?t[f]=[s]:o.push(s),s.lane=a|536870912),h):null}function Eo(t){if(50<Nl)throw Nl=0,Wd=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ja={};function Qw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,s,a,o){return new Qw(t,s,a,o)}function qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,s){var a=t.alternate;return a===null?(a=Jn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function qm(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function No(t,s,a,o,f,h){var y=0;if(o=t,typeof t=="function")qu(t)&&(y=1);else if(typeof t=="string")y=Y1(t,a,Z.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Jn(31,a,s,f),t.elementType=R,t.lanes=h,t;case j:return ua(a.children,f,h,s);case C:y=8,f|=24;break;case k:return t=Jn(12,a,s,f|2),t.elementType=k,t.lanes=h,t;case O:return t=Jn(13,a,s,f),t.elementType=O,t.lanes=h,t;case J:return t=Jn(19,a,s,f),t.elementType=J,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A:y=10;break e;case _:y=9;break e;case L:y=11;break e;case U:y=14;break e;case ne:y=16,o=null;break e}y=29,a=Error(i(130,t===null?"null":typeof t,"")),o=null}return s=Jn(y,a,s,f),s.elementType=t,s.type=o,s.lanes=h,s}function ua(t,s,a,o){return t=Jn(7,t,o,s),t.lanes=a,t}function Hu(t,s,a){return t=Jn(6,t,null,s),t.lanes=a,t}function Hm(t){var s=Jn(18,null,null,0);return s.stateNode=t,s}function Fu(t,s,a){return s=Jn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Fm=new WeakMap;function cs(t,s){if(typeof t=="object"&&t!==null){var a=Fm.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Et(s)},Fm.set(t,s),s)}return{value:t,source:s,stack:Et(s)}}var ei=[],ti=0,_o=null,rl=0,us=[],ds=0,kr=null,Zs=1,Vs="";function nr(t,s){ei[ti++]=rl,ei[ti++]=_o,_o=t,rl=s}function Zm(t,s,a){us[ds++]=Zs,us[ds++]=Vs,us[ds++]=kr,kr=t;var o=Zs;t=Vs;var f=32-_t(o)-1;o&=~(1<<f),a+=1;var h=32-_t(s)+f;if(30<h){var y=f-f%5;h=(o&(1<<y)-1).toString(32),o>>=y,f-=y,Zs=1<<32-_t(s)+f|a<<f|o,Vs=h+t}else Zs=1<<h|a<<f|o,Vs=t}function Zu(t){t.return!==null&&(nr(t,1),Zm(t,1,0))}function Vu(t){for(;t===_o;)_o=ei[--ti],ei[ti]=null,rl=ei[--ti],ei[ti]=null;for(;t===kr;)kr=us[--ds],us[ds]=null,Vs=us[--ds],us[ds]=null,Zs=us[--ds],us[ds]=null}function Vm(t,s){us[ds++]=Zs,us[ds++]=Vs,us[ds++]=kr,Zs=s.id,Vs=s.overflow,kr=t}var jn=null,Rt=null,st=!1,Tr=null,fs=!1,Pu=Error(i(519));function Ar(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(cs(s,t)),Pu}function Pm(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Ct]=t,s[Pt]=o,a){case"dialog":Je("cancel",s),Je("close",s);break;case"iframe":case"object":case"embed":Je("load",s);break;case"video":case"audio":for(a=0;a<Cl.length;a++)Je(Cl[a],s);break;case"source":Je("error",s);break;case"img":case"image":case"link":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"input":Je("invalid",s),Eu(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Je("invalid",s);break;case"textarea":Je("invalid",s),Qi(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||ox(s.textContent,a)?(o.popover!=null&&(Je("beforetoggle",s),Je("toggle",s)),o.onScroll!=null&&Je("scroll",s),o.onScrollEnd!=null&&Je("scrollend",s),o.onClick!=null&&(s.onclick=Es),s=!0):s=!1,s||Ar(t,!0)}function Qm(t){for(jn=t.return;jn;)switch(jn.tag){case 5:case 31:case 13:fs=!1;return;case 27:case 3:fs=!0;return;default:jn=jn.return}}function ni(t){if(t!==jn)return!1;if(!st)return Qm(t),st=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||uf(t.type,t.memoizedProps)),a=!a),a&&Rt&&Ar(t),Qm(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Rt=xx(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Rt=xx(t)}else s===27?(s=Rt,Vr(t.type)?(t=pf,pf=null,Rt=t):Rt=s):Rt=jn?ms(t.stateNode.nextSibling):null;return!0}function da(){Rt=jn=null,st=!1}function Qu(){var t=Tr;return t!==null&&(Pn===null?Pn=t:Pn.push.apply(Pn,t),Tr=null),t}function al(t){Tr===null?Tr=[t]:Tr.push(t)}var Iu=T(null),fa=null,sr=null;function Rr(t,s,a){le(Iu,s._currentValue),s._currentValue=a}function rr(t){t._currentValue=Iu.current,W(Iu)}function Wu(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Gu(t,s,a,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var y=f.child;h=h.firstContext;e:for(;h!==null;){var E=h;h=f;for(var z=0;z<s.length;z++)if(E.context===s[z]){h.lanes|=a,E=h.alternate,E!==null&&(E.lanes|=a),Wu(h.return,a,t),o||(y=null);break e}h=E.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(i(341));y.lanes|=a,h=y.alternate,h!==null&&(h.lanes|=a),Wu(y,a,t),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function si(t,s,a,o){t=null;for(var f=s,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var E=f.type;Xn(f.pendingProps.value,y.value)||(t!==null?t.push(E):t=[E])}}else if(f===P.current){if(y=f.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Dl):t=[Dl])}f=f.return}t!==null&&Gu(s,t,a,o),s.flags|=262144}function Co(t){for(t=t.firstContext;t!==null;){if(!Xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ha(t){fa=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Sn(t){return Im(fa,t)}function ko(t,s){return fa===null&&ha(t),Im(t,s)}function Im(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(i(308));sr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else sr=sr.next=s;return a}var Iw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Ww=e.unstable_scheduleCallback,Gw=e.unstable_NormalPriority,Yt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ku(){return{controller:new Iw,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&Ww(Gw,function(){t.controller.abort()})}var ll=null,Yu=0,ri=0,ai=null;function Kw(t,s){if(ll===null){var a=ll=[];Yu=0,ri=ef(),ai={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Yu++,s.then(Wm,Wm),s}function Wm(){if(--Yu===0&&ll!==null){ai!==null&&(ai.status="fulfilled");var t=ll;ll=null,ri=0,ai=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Yw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var Gm=M.S;M.S=function(t,s){Dg=ye(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Kw(t,s),Gm!==null&&Gm(t,s)};var ma=T(null);function Xu(){var t=ma.current;return t!==null?t:jt.pooledCache}function To(t,s){s===null?le(ma,ma.current):le(ma,s.pool)}function Km(){var t=Xu();return t===null?null:{parent:Yt._currentValue,pool:t}}var ii=Error(i(460)),Ju=Error(i(474)),Ao=Error(i(542)),Ro={then:function(){}};function Ym(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xm(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Es,Es),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ep(t),t;default:if(typeof s.status=="string")s.then(Es,Es);else{if(t=jt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=o}},function(o){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ep(t),t}throw ga=s,ii}}function pa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ga=a,ii):a}}var ga=null;function Jm(){if(ga===null)throw Error(i(459));var t=ga;return ga=null,t}function ep(t){if(t===ii||t===Ao)throw Error(i(483))}var li=null,ol=0;function Do(t){var s=ol;return ol+=1,li===null&&(li=[]),Xm(li,t,s)}function cl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Mo(t,s){throw s.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function tp(t){function s(V,q){if(t){var ee=V.deletions;ee===null?(V.deletions=[q],V.flags|=16):ee.push(q)}}function a(V,q){if(!t)return null;for(;q!==null;)s(V,q),q=q.sibling;return null}function o(V){for(var q=new Map;V!==null;)V.key!==null?q.set(V.key,V):q.set(V.index,V),V=V.sibling;return q}function f(V,q){return V=tr(V,q),V.index=0,V.sibling=null,V}function h(V,q,ee){return V.index=ee,t?(ee=V.alternate,ee!==null?(ee=ee.index,ee<q?(V.flags|=67108866,q):ee):(V.flags|=67108866,q)):(V.flags|=1048576,q)}function y(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function E(V,q,ee,fe){return q===null||q.tag!==6?(q=Hu(ee,V.mode,fe),q.return=V,q):(q=f(q,ee),q.return=V,q)}function z(V,q,ee,fe){var Ue=ee.type;return Ue===j?de(V,q,ee.props.children,fe,ee.key):q!==null&&(q.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ne&&pa(Ue)===q.type)?(q=f(q,ee.props),cl(q,ee),q.return=V,q):(q=No(ee.type,ee.key,ee.props,null,V.mode,fe),cl(q,ee),q.return=V,q)}function te(V,q,ee,fe){return q===null||q.tag!==4||q.stateNode.containerInfo!==ee.containerInfo||q.stateNode.implementation!==ee.implementation?(q=Fu(ee,V.mode,fe),q.return=V,q):(q=f(q,ee.children||[]),q.return=V,q)}function de(V,q,ee,fe,Ue){return q===null||q.tag!==7?(q=ua(ee,V.mode,fe,Ue),q.return=V,q):(q=f(q,ee),q.return=V,q)}function pe(V,q,ee){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Hu(""+q,V.mode,ee),q.return=V,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return ee=No(q.type,q.key,q.props,null,V.mode,ee),cl(ee,q),ee.return=V,ee;case N:return q=Fu(q,V.mode,ee),q.return=V,q;case ne:return q=pa(q),pe(V,q,ee)}if(xe(q)||I(q))return q=ua(q,V.mode,ee,null),q.return=V,q;if(typeof q.then=="function")return pe(V,Do(q),ee);if(q.$$typeof===A)return pe(V,ko(V,q),ee);Mo(V,q)}return null}function se(V,q,ee,fe){var Ue=q!==null?q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ue!==null?null:E(V,q,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return ee.key===Ue?z(V,q,ee,fe):null;case N:return ee.key===Ue?te(V,q,ee,fe):null;case ne:return ee=pa(ee),se(V,q,ee,fe)}if(xe(ee)||I(ee))return Ue!==null?null:de(V,q,ee,fe,null);if(typeof ee.then=="function")return se(V,q,Do(ee),fe);if(ee.$$typeof===A)return se(V,q,ko(V,ee),fe);Mo(V,ee)}return null}function oe(V,q,ee,fe,Ue){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return V=V.get(ee)||null,E(q,V,""+fe,Ue);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case S:return V=V.get(fe.key===null?ee:fe.key)||null,z(q,V,fe,Ue);case N:return V=V.get(fe.key===null?ee:fe.key)||null,te(q,V,fe,Ue);case ne:return fe=pa(fe),oe(V,q,ee,fe,Ue)}if(xe(fe)||I(fe))return V=V.get(ee)||null,de(q,V,fe,Ue,null);if(typeof fe.then=="function")return oe(V,q,ee,Do(fe),Ue);if(fe.$$typeof===A)return oe(V,q,ee,ko(q,fe),Ue);Mo(q,fe)}return null}function Ae(V,q,ee,fe){for(var Ue=null,at=null,ze=q,Ye=q=0,tt=null;ze!==null&&Ye<ee.length;Ye++){ze.index>Ye?(tt=ze,ze=null):tt=ze.sibling;var it=se(V,ze,ee[Ye],fe);if(it===null){ze===null&&(ze=tt);break}t&&ze&&it.alternate===null&&s(V,ze),q=h(it,q,Ye),at===null?Ue=it:at.sibling=it,at=it,ze=tt}if(Ye===ee.length)return a(V,ze),st&&nr(V,Ye),Ue;if(ze===null){for(;Ye<ee.length;Ye++)ze=pe(V,ee[Ye],fe),ze!==null&&(q=h(ze,q,Ye),at===null?Ue=ze:at.sibling=ze,at=ze);return st&&nr(V,Ye),Ue}for(ze=o(ze);Ye<ee.length;Ye++)tt=oe(ze,V,Ye,ee[Ye],fe),tt!==null&&(t&&tt.alternate!==null&&ze.delete(tt.key===null?Ye:tt.key),q=h(tt,q,Ye),at===null?Ue=tt:at.sibling=tt,at=tt);return t&&ze.forEach(function(Gr){return s(V,Gr)}),st&&nr(V,Ye),Ue}function qe(V,q,ee,fe){if(ee==null)throw Error(i(151));for(var Ue=null,at=null,ze=q,Ye=q=0,tt=null,it=ee.next();ze!==null&&!it.done;Ye++,it=ee.next()){ze.index>Ye?(tt=ze,ze=null):tt=ze.sibling;var Gr=se(V,ze,it.value,fe);if(Gr===null){ze===null&&(ze=tt);break}t&&ze&&Gr.alternate===null&&s(V,ze),q=h(Gr,q,Ye),at===null?Ue=Gr:at.sibling=Gr,at=Gr,ze=tt}if(it.done)return a(V,ze),st&&nr(V,Ye),Ue;if(ze===null){for(;!it.done;Ye++,it=ee.next())it=pe(V,it.value,fe),it!==null&&(q=h(it,q,Ye),at===null?Ue=it:at.sibling=it,at=it);return st&&nr(V,Ye),Ue}for(ze=o(ze);!it.done;Ye++,it=ee.next())it=oe(ze,V,Ye,it.value,fe),it!==null&&(t&&it.alternate!==null&&ze.delete(it.key===null?Ye:it.key),q=h(it,q,Ye),at===null?Ue=it:at.sibling=it,at=it);return t&&ze.forEach(function(oj){return s(V,oj)}),st&&nr(V,Ye),Ue}function xt(V,q,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===j&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:e:{for(var Ue=ee.key;q!==null;){if(q.key===Ue){if(Ue=ee.type,Ue===j){if(q.tag===7){a(V,q.sibling),fe=f(q,ee.props.children),fe.return=V,V=fe;break e}}else if(q.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ne&&pa(Ue)===q.type){a(V,q.sibling),fe=f(q,ee.props),cl(fe,ee),fe.return=V,V=fe;break e}a(V,q);break}else s(V,q);q=q.sibling}ee.type===j?(fe=ua(ee.props.children,V.mode,fe,ee.key),fe.return=V,V=fe):(fe=No(ee.type,ee.key,ee.props,null,V.mode,fe),cl(fe,ee),fe.return=V,V=fe)}return y(V);case N:e:{for(Ue=ee.key;q!==null;){if(q.key===Ue)if(q.tag===4&&q.stateNode.containerInfo===ee.containerInfo&&q.stateNode.implementation===ee.implementation){a(V,q.sibling),fe=f(q,ee.children||[]),fe.return=V,V=fe;break e}else{a(V,q);break}else s(V,q);q=q.sibling}fe=Fu(ee,V.mode,fe),fe.return=V,V=fe}return y(V);case ne:return ee=pa(ee),xt(V,q,ee,fe)}if(xe(ee))return Ae(V,q,ee,fe);if(I(ee)){if(Ue=I(ee),typeof Ue!="function")throw Error(i(150));return ee=Ue.call(ee),qe(V,q,ee,fe)}if(typeof ee.then=="function")return xt(V,q,Do(ee),fe);if(ee.$$typeof===A)return xt(V,q,ko(V,ee),fe);Mo(V,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,q!==null&&q.tag===6?(a(V,q.sibling),fe=f(q,ee),fe.return=V,V=fe):(a(V,q),fe=Hu(ee,V.mode,fe),fe.return=V,V=fe),y(V)):a(V,q)}return function(V,q,ee,fe){try{ol=0;var Ue=xt(V,q,ee,fe);return li=null,Ue}catch(ze){if(ze===ii||ze===Ao)throw ze;var at=Jn(29,ze,null,V.mode);return at.lanes=fe,at.return=V,at}finally{}}}var xa=tp(!0),np=tp(!1),Dr=!1;function ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(lt&2)!==0){var f=o.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s,s=Eo(t),Bm(t,null,a),s}return So(t,o,s,a),Eo(t)}function ul(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,yn(t,a)}}function nd(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?f=h=y:h=h.next=y,a=a.next}while(a!==null);h===null?f=h=s:h=h.next=s}else f=h=s;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var sd=!1;function dl(){if(sd){var t=ai;if(t!==null)throw t}}function fl(t,s,a,o){sd=!1;var f=t.updateQueue;Dr=!1;var h=f.firstBaseUpdate,y=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var z=E,te=z.next;z.next=null,y===null?h=te:y.next=te,y=z;var de=t.alternate;de!==null&&(de=de.updateQueue,E=de.lastBaseUpdate,E!==y&&(E===null?de.firstBaseUpdate=te:E.next=te,de.lastBaseUpdate=z))}if(h!==null){var pe=f.baseState;y=0,de=te=z=null,E=h;do{var se=E.lane&-536870913,oe=se!==E.lane;if(oe?(et&se)===se:(o&se)===se){se!==0&&se===ri&&(sd=!0),de!==null&&(de=de.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ae=t,qe=E;se=s;var xt=a;switch(qe.tag){case 1:if(Ae=qe.payload,typeof Ae=="function"){pe=Ae.call(xt,pe,se);break e}pe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=qe.payload,se=typeof Ae=="function"?Ae.call(xt,pe,se):Ae,se==null)break e;pe=v({},pe,se);break e;case 2:Dr=!0}}se=E.callback,se!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:E.tag,payload:E.payload,callback:E.callback,next:null},de===null?(te=de=oe,z=pe):de=de.next=oe,y|=se;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;oe=E,E=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);de===null&&(z=pe),f.baseState=z,f.firstBaseUpdate=te,f.lastBaseUpdate=de,h===null&&(f.shared.lanes=0),Br|=y,t.lanes=y,t.memoizedState=pe}}function sp(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function rp(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)sp(a[t],s)}var oi=T(null),zo=T(0);function ap(t,s){t=hr,le(zo,t),le(oi,s),hr=t|s.baseLanes}function rd(){le(zo,hr),le(oi,oi.current)}function ad(){hr=zo.current,W(oi),W(zo)}var es=T(null),hs=null;function Or(t){var s=t.alternate;le(Qt,Qt.current&1),le(es,t),hs===null&&(s===null||oi.current!==null||s.memoizedState!==null)&&(hs=t)}function id(t){le(Qt,Qt.current),le(es,t),hs===null&&(hs=t)}function ip(t){t.tag===22?(le(Qt,Qt.current),le(es,t),hs===null&&(hs=t)):Lr()}function Lr(){le(Qt,Qt.current),le(es,es.current)}function ts(t){W(es),hs===t&&(hs=null),W(Qt)}var Qt=T(0);function Oo(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hf(a)||mf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ar=0,Ge=null,pt=null,Xt=null,Lo=!1,ci=!1,ba=!1,Uo=0,hl=0,ui=null,Xw=0;function Ht(){throw Error(i(321))}function ld(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Xn(t[a],s[a]))return!1;return!0}function od(t,s,a,o,f,h){return ar=h,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=t===null||t.memoizedState===null?Zp:Sd,ba=!1,h=a(o,f),ba=!1,ci&&(h=op(s,a,o,f)),lp(t),h}function lp(t){M.H=gl;var s=pt!==null&&pt.next!==null;if(ar=0,Xt=pt=Ge=null,Lo=!1,hl=0,ui=null,s)throw Error(i(300));t===null||Jt||(t=t.dependencies,t!==null&&Co(t)&&(Jt=!0))}function op(t,s,a,o){Ge=t;var f=0;do{if(ci&&(ui=null),hl=0,ci=!1,25<=f)throw Error(i(301));if(f+=1,Xt=pt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}M.H=Vp,h=s(a,o)}while(ci);return h}function Jw(){var t=M.H,s=t.useState()[0];return s=typeof s.then=="function"?ml(s):s,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(Ge.flags|=1024),s}function cd(){var t=Uo!==0;return Uo=0,t}function ud(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function dd(t){if(Lo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Lo=!1}ar=0,Xt=pt=Ge=null,ci=!1,hl=Uo=0,ui=null}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Ge.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function It(){if(pt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var s=Xt===null?Ge.memoizedState:Xt.next;if(s!==null)Xt=s,pt=t;else{if(t===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Xt===null?Ge.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function $o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(t){var s=hl;return hl+=1,ui===null&&(ui=[]),t=Xm(ui,t,s),s=Ge,(Xt===null?s.memoizedState:Xt.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?Zp:Sd),t}function Bo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ml(t);if(t.$$typeof===A)return Sn(t)}throw Error(i(438,String(t)))}function fd(t){var s=null,a=Ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ge.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=$o(),Ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=H;return s.index++,a}function ir(t,s){return typeof s=="function"?s(t):s}function qo(t){var s=It();return hd(s,pt,t)}function hd(t,s,a){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var f=t.baseQueue,h=o.pending;if(h!==null){if(f!==null){var y=f.next;f.next=h.next,h.next=y}s.baseQueue=f=h,o.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{s=f.next;var E=y=null,z=null,te=s,de=!1;do{var pe=te.lane&-536870913;if(pe!==te.lane?(et&pe)===pe:(ar&pe)===pe){var se=te.revertLane;if(se===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),pe===ri&&(de=!0);else if((ar&se)===se){te=te.next,se===ri&&(de=!0);continue}else pe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(E=z=pe,y=h):z=z.next=pe,Ge.lanes|=se,Br|=se;pe=te.action,ba&&a(h,pe),h=te.hasEagerState?te.eagerState:a(h,pe)}else se={lane:pe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(E=z=se,y=h):z=z.next=se,Ge.lanes|=pe,Br|=pe;te=te.next}while(te!==null&&te!==s);if(z===null?y=h:z.next=E,!Xn(h,t.memoizedState)&&(Jt=!0,de&&(a=ai,a!==null)))throw a;t.memoizedState=h,t.baseState=y,t.baseQueue=z,o.lastRenderedState=h}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function md(t){var s=It(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var o=a.dispatch,f=a.pending,h=s.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do h=t(h,y.action),y=y.next;while(y!==f);Xn(h,s.memoizedState)||(Jt=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),a.lastRenderedState=h}return[h,o]}function cp(t,s,a){var o=Ge,f=It(),h=st;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=s();var y=!Xn((pt||f).memoizedState,a);if(y&&(f.memoizedState=a,Jt=!0),f=f.queue,xd(fp.bind(null,o,f,t),[t]),f.getSnapshot!==s||y||Xt!==null&&Xt.memoizedState.tag&1){if(o.flags|=2048,di(9,{destroy:void 0},dp.bind(null,o,f,a,s),null),jt===null)throw Error(i(349));h||(ar&127)!==0||up(o,s,a)}return a}function up(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ge.updateQueue,s===null?(s=$o(),Ge.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function dp(t,s,a,o){s.value=a,s.getSnapshot=o,hp(s)&&mp(t)}function fp(t,s,a){return a(function(){hp(s)&&mp(t)})}function hp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Xn(t,a)}catch{return!0}}function mp(t){var s=ca(t,2);s!==null&&Qn(s,t,2)}function pd(t){var s=Bn();if(typeof t=="function"){var a=t;if(t=a(),ba){Gt(!0);try{a()}finally{Gt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:t},s}function pp(t,s,a,o){return t.baseState=a,hd(t,pt,typeof o=="function"?o:ir)}function e1(t,s,a,o,f){if(Zo(t))throw Error(i(485));if(t=s.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};M.T!==null?a(!0):h.isTransition=!1,o(h),a=s.pending,a===null?(h.next=s.pending=h,gp(s,h)):(h.next=a.next,s.pending=a.next=h)}}function gp(t,s){var a=s.action,o=s.payload,f=t.state;if(s.isTransition){var h=M.T,y={};M.T=y;try{var E=a(f,o),z=M.S;z!==null&&z(y,E),xp(t,s,E)}catch(te){gd(t,s,te)}finally{h!==null&&y.types!==null&&(h.types=y.types),M.T=h}}else try{h=a(f,o),xp(t,s,h)}catch(te){gd(t,s,te)}}function xp(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){bp(t,s,o)},function(o){return gd(t,s,o)}):bp(t,s,a)}function bp(t,s,a){s.status="fulfilled",s.value=a,vp(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,gp(t,a)))}function gd(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,vp(s),s=s.next;while(s!==o)}t.action=null}function vp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function yp(t,s){return s}function wp(t,s){if(st){var a=jt.formState;if(a!==null){e:{var o=Ge;if(st){if(Rt){t:{for(var f=Rt,h=fs;f.nodeType!==8;){if(!h){f=null;break t}if(f=ms(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Rt=ms(f.nextSibling),o=f.data==="F!";break e}}Ar(o)}o=!1}o&&(s=a[0])}}return a=Bn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:s},a.queue=o,a=qp.bind(null,Ge,o),o.dispatch=a,o=pd(!1),h=jd.bind(null,Ge,!1,o.queue),o=Bn(),f={state:s,dispatch:null,action:t,pending:null},o.queue=f,a=e1.bind(null,Ge,f,h,a),f.dispatch=a,o.memoizedState=t,[s,a,!1]}function jp(t){var s=It();return Sp(s,pt,t)}function Sp(t,s,a){if(s=hd(t,s,yp)[0],t=qo(ir)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=ml(s)}catch(y){throw y===ii?Ao:y}else o=s;s=It();var f=s.queue,h=f.dispatch;return a!==s.memoizedState&&(Ge.flags|=2048,di(9,{destroy:void 0},t1.bind(null,f,a),null)),[o,h,t]}function t1(t,s){t.action=s}function Ep(t){var s=It(),a=pt;if(a!==null)return Sp(s,a,t);It(),s=s.memoizedState,a=It();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function di(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=$o(),Ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function Np(){return It().memoizedState}function Ho(t,s,a,o){var f=Bn();Ge.flags|=t,f.memoizedState=di(1|s,{destroy:void 0},a,o===void 0?null:o)}function Fo(t,s,a,o){var f=It();o=o===void 0?null:o;var h=f.memoizedState.inst;pt!==null&&o!==null&&ld(o,pt.memoizedState.deps)?f.memoizedState=di(s,h,a,o):(Ge.flags|=t,f.memoizedState=di(1|s,h,a,o))}function _p(t,s){Ho(8390656,8,t,s)}function xd(t,s){Fo(2048,8,t,s)}function n1(t){Ge.flags|=4;var s=Ge.updateQueue;if(s===null)s=$o(),Ge.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Cp(t){var s=It().memoizedState;return n1({ref:s,nextImpl:t}),function(){if((lt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function kp(t,s){return Fo(4,2,t,s)}function Tp(t,s){return Fo(4,4,t,s)}function Ap(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Rp(t,s,a){a=a!=null?a.concat([t]):null,Fo(4,4,Ap.bind(null,s,t),a)}function bd(){}function Dp(t,s){var a=It();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&ld(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function Mp(t,s){var a=It();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&ld(s,o[1]))return o[0];if(o=t(),ba){Gt(!0);try{t()}finally{Gt(!1)}}return a.memoizedState=[o,s],o}function vd(t,s,a){return a===void 0||(ar&1073741824)!==0&&(et&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=zg(),Ge.lanes|=t,Br|=t,a)}function zp(t,s,a,o){return Xn(a,s)?a:oi.current!==null?(t=vd(t,a,o),Xn(t,s)||(Jt=!0),t):(ar&42)===0||(ar&1073741824)!==0&&(et&261930)===0?(Jt=!0,t.memoizedState=a):(t=zg(),Ge.lanes|=t,Br|=t,s)}function Op(t,s,a,o,f){var h=G.p;G.p=h!==0&&8>h?h:8;var y=M.T,E={};M.T=E,jd(t,!1,s,a);try{var z=f(),te=M.S;if(te!==null&&te(E,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var de=Yw(z,o);pl(t,s,de,rs(t))}else pl(t,s,o,rs(t))}catch(pe){pl(t,s,{then:function(){},status:"rejected",reason:pe},rs())}finally{G.p=h,y!==null&&E.types!==null&&(y.types=E.types),M.T=y}}function s1(){}function yd(t,s,a,o){if(t.tag!==5)throw Error(i(476));var f=Lp(t).queue;Op(t,f,s,Y,a===null?s1:function(){return Up(t),a(o)})}function Lp(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:Y},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Up(t){var s=Lp(t);s.next===null&&(s=t.alternate.memoizedState),pl(t,s.next.queue,{},rs())}function wd(){return Sn(Dl)}function $p(){return It().memoizedState}function Bp(){return It().memoizedState}function r1(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=rs();t=Mr(a);var o=zr(s,t,a);o!==null&&(Qn(o,s,a),ul(o,s,a)),s={cache:Ku()},t.payload=s;return}s=s.return}}function a1(t,s,a){var o=rs();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zo(t)?Hp(s,a):(a=Bu(t,s,a,o),a!==null&&(Qn(a,t,o),Fp(a,s,o)))}function qp(t,s,a){var o=rs();pl(t,s,a,o)}function pl(t,s,a,o){var f={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zo(t))Hp(s,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var y=s.lastRenderedState,E=h(y,a);if(f.hasEagerState=!0,f.eagerState=E,Xn(E,y))return So(t,s,f,0),jt===null&&jo(),!1}catch{}finally{}if(a=Bu(t,s,f,o),a!==null)return Qn(a,t,o),Fp(a,s,o),!0}return!1}function jd(t,s,a,o){if(o={lane:2,revertLane:ef(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zo(t)){if(s)throw Error(i(479))}else s=Bu(t,a,o,2),s!==null&&Qn(s,t,2)}function Zo(t){var s=t.alternate;return t===Ge||s!==null&&s===Ge}function Hp(t,s){ci=Lo=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Fp(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,yn(t,a)}}var gl={readContext:Sn,use:Bo,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};gl.useEffectEvent=Ht;var Zp={readContext:Sn,use:Bo,useCallback:function(t,s){return Bn().memoizedState=[t,s===void 0?null:s],t},useContext:Sn,useEffect:_p,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ho(4194308,4,Ap.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ho(4194308,4,t,s)},useInsertionEffect:function(t,s){Ho(4,2,t,s)},useMemo:function(t,s){var a=Bn();s=s===void 0?null:s;var o=t();if(ba){Gt(!0);try{t()}finally{Gt(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=Bn();if(a!==void 0){var f=a(s);if(ba){Gt(!0);try{a(s)}finally{Gt(!1)}}}else f=s;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=a1.bind(null,Ge,t),[o.memoizedState,t]},useRef:function(t){var s=Bn();return t={current:t},s.memoizedState=t},useState:function(t){t=pd(t);var s=t.queue,a=qp.bind(null,Ge,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:bd,useDeferredValue:function(t,s){var a=Bn();return vd(a,t,s)},useTransition:function(){var t=pd(!1);return t=Op.bind(null,Ge,t.queue,!0,!1),Bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Ge,f=Bn();if(st){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),jt===null)throw Error(i(349));(et&127)!==0||up(o,s,a)}f.memoizedState=a;var h={value:a,getSnapshot:s};return f.queue=h,_p(fp.bind(null,o,h,t),[t]),o.flags|=2048,di(9,{destroy:void 0},dp.bind(null,o,h,a,s),null),a},useId:function(){var t=Bn(),s=jt.identifierPrefix;if(st){var a=Vs,o=Zs;a=(o&~(1<<32-_t(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Uo++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Xw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:wd,useFormState:wp,useActionState:wp,useOptimistic:function(t){var s=Bn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=jd.bind(null,Ge,!0,a),a.dispatch=s,[t,s]},useMemoCache:fd,useCacheRefresh:function(){return Bn().memoizedState=r1.bind(null,Ge)},useEffectEvent:function(t){var s=Bn(),a={impl:t};return s.memoizedState=a,function(){if((lt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Sd={readContext:Sn,use:Bo,useCallback:Dp,useContext:Sn,useEffect:xd,useImperativeHandle:Rp,useInsertionEffect:kp,useLayoutEffect:Tp,useMemo:Mp,useReducer:qo,useRef:Np,useState:function(){return qo(ir)},useDebugValue:bd,useDeferredValue:function(t,s){var a=It();return zp(a,pt.memoizedState,t,s)},useTransition:function(){var t=qo(ir)[0],s=It().memoizedState;return[typeof t=="boolean"?t:ml(t),s]},useSyncExternalStore:cp,useId:$p,useHostTransitionStatus:wd,useFormState:jp,useActionState:jp,useOptimistic:function(t,s){var a=It();return pp(a,pt,t,s)},useMemoCache:fd,useCacheRefresh:Bp};Sd.useEffectEvent=Cp;var Vp={readContext:Sn,use:Bo,useCallback:Dp,useContext:Sn,useEffect:xd,useImperativeHandle:Rp,useInsertionEffect:kp,useLayoutEffect:Tp,useMemo:Mp,useReducer:md,useRef:Np,useState:function(){return md(ir)},useDebugValue:bd,useDeferredValue:function(t,s){var a=It();return pt===null?vd(a,t,s):zp(a,pt.memoizedState,t,s)},useTransition:function(){var t=md(ir)[0],s=It().memoizedState;return[typeof t=="boolean"?t:ml(t),s]},useSyncExternalStore:cp,useId:$p,useHostTransitionStatus:wd,useFormState:Ep,useActionState:Ep,useOptimistic:function(t,s){var a=It();return pt!==null?pp(a,pt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:fd,useCacheRefresh:Bp};Vp.useEffectEvent=Cp;function Ed(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:v({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Nd={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=rs(),f=Mr(o);f.payload=s,a!=null&&(f.callback=a),s=zr(t,f,o),s!==null&&(Qn(s,t,o),ul(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=rs(),f=Mr(o);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=zr(t,f,o),s!==null&&(Qn(s,t,o),ul(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=rs(),o=Mr(a);o.tag=2,s!=null&&(o.callback=s),s=zr(t,o,a),s!==null&&(Qn(s,t,a),ul(s,t,a))}};function Pp(t,s,a,o,f,h,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,y):s.prototype&&s.prototype.isPureReactComponent?!nl(a,o)||!nl(f,h):!0}function Qp(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&Nd.enqueueReplaceState(s,s.state,null)}function va(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=v({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Ip(t){wo(t)}function Wp(t){console.error(t)}function Gp(t){wo(t)}function Vo(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function Kp(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _d(t,s,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Vo(t,s)},a}function Yp(t){return t=Mr(t),t.tag=3,t}function Xp(t,s,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var h=o.value;t.payload=function(){return f(h)},t.callback=function(){Kp(s,a,o)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Kp(s,a,o),typeof f!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function i1(t,s,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&si(s,a,f,!0),a=es.current,a!==null){switch(a.tag){case 31:case 13:return hs===null?nc():a.alternate===null&&Ft===0&&(Ft=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===Ro?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Yd(t,o,f)),!1;case 22:return a.flags|=65536,o===Ro?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Yd(t,o,f)),!1}throw Error(i(435,a.tag))}return Yd(t,o,f),nc(),!1}if(st)return s=es.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,o!==Pu&&(t=Error(i(422),{cause:o}),al(cs(t,a)))):(o!==Pu&&(s=Error(i(423),{cause:o}),al(cs(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=cs(o,a),f=_d(t.stateNode,o,f),nd(t,f),Ft!==4&&(Ft=2)),!1;var h=Error(i(520),{cause:o});if(h=cs(h,a),El===null?El=[h]:El.push(h),Ft!==4&&(Ft=2),s===null)return!0;o=cs(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=_d(a.stateNode,o,t),nd(a,t),!1;case 1:if(s=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(qr===null||!qr.has(h))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Yp(f),Xp(f,t,a,o),nd(a,f),!1}a=a.return}while(a!==null);return!1}var Cd=Error(i(461)),Jt=!1;function En(t,s,a,o){s.child=t===null?np(s,null,a,o):xa(s,t.child,a,o)}function Jp(t,s,a,o,f){a=a.render;var h=s.ref;if("ref"in o){var y={};for(var E in o)E!=="ref"&&(y[E]=o[E])}else y=o;return ha(s),o=od(t,s,a,y,h,f),E=cd(),t!==null&&!Jt?(ud(t,s,f),lr(t,s,f)):(st&&E&&Zu(s),s.flags|=1,En(t,s,o,f),s.child)}function eg(t,s,a,o,f){if(t===null){var h=a.type;return typeof h=="function"&&!qu(h)&&h.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=h,tg(t,s,h,o,f)):(t=No(a.type,null,o,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(h=t.child,!Od(t,f)){var y=h.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(y,o)&&t.ref===s.ref)return lr(t,s,f)}return s.flags|=1,t=tr(h,o),t.ref=s.ref,t.return=s,s.child=t}function tg(t,s,a,o,f){if(t!==null){var h=t.memoizedProps;if(nl(h,o)&&t.ref===s.ref)if(Jt=!1,s.pendingProps=o=h,Od(t,f))(t.flags&131072)!==0&&(Jt=!0);else return s.lanes=t.lanes,lr(t,s,f)}return kd(t,s,a,o,f)}function ng(t,s,a,o){var f=o.children,h=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,t!==null){for(o=s.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~h}else o=0,s.child=null;return sg(t,s,h,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&To(s,h!==null?h.cachePool:null),h!==null?ap(s,h):rd(),ip(s);else return o=s.lanes=536870912,sg(t,s,h!==null?h.baseLanes|a:a,a,o)}else h!==null?(To(s,h.cachePool),ap(s,h),Lr(),s.memoizedState=null):(t!==null&&To(s,null),rd(),Lr());return En(t,s,f,a),s.child}function xl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sg(t,s,a,o,f){var h=Xu();return h=h===null?null:{parent:Yt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&To(s,null),rd(),ip(s),t!==null&&si(t,s,o,!0),s.childLanes=f,null}function Po(t,s){return s=Io({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function rg(t,s,a){return xa(s,t.child,null,a),t=Po(s,s.pendingProps),t.flags|=2,ts(s),s.memoizedState=null,t}function l1(t,s,a){var o=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(st){if(o.mode==="hidden")return t=Po(s,o),s.lanes=536870912,xl(null,t);if(id(s),(t=Rt)?(t=gx(t,fs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:kr!==null?{id:Zs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},a=Hm(t),a.return=s,s.child=a,jn=s,Rt=null)):t=null,t===null)throw Ar(s);return s.lanes=536870912,null}return Po(s,o)}var h=t.memoizedState;if(h!==null){var y=h.dehydrated;if(id(s),f)if(s.flags&256)s.flags&=-257,s=rg(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Jt||si(t,s,a,!1),f=(a&t.childLanes)!==0,Jt||f){if(o=jt,o!==null&&(y=Tn(o,a),y!==0&&y!==h.retryLane))throw h.retryLane=y,ca(t,y),Qn(o,t,y),Cd;nc(),s=rg(t,s,a)}else t=h.treeContext,Rt=ms(y.nextSibling),jn=s,st=!0,Tr=null,fs=!1,t!==null&&Vm(s,t),s=Po(s,o),s.flags|=4096;return s}return t=tr(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Qo(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function kd(t,s,a,o,f){return ha(s),a=od(t,s,a,o,void 0,f),o=cd(),t!==null&&!Jt?(ud(t,s,f),lr(t,s,f)):(st&&o&&Zu(s),s.flags|=1,En(t,s,a,f),s.child)}function ag(t,s,a,o,f,h){return ha(s),s.updateQueue=null,a=op(s,o,a,f),lp(t),o=cd(),t!==null&&!Jt?(ud(t,s,h),lr(t,s,h)):(st&&o&&Zu(s),s.flags|=1,En(t,s,a,h),s.child)}function ig(t,s,a,o,f){if(ha(s),s.stateNode===null){var h=Ja,y=a.contextType;typeof y=="object"&&y!==null&&(h=Sn(y)),h=new a(o,h),s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Nd,s.stateNode=h,h._reactInternals=s,h=s.stateNode,h.props=o,h.state=s.memoizedState,h.refs={},ed(s),y=a.contextType,h.context=typeof y=="object"&&y!==null?Sn(y):Ja,h.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Ed(s,a,y,o),h.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&Nd.enqueueReplaceState(h,h.state,null),fl(s,o,h,f),dl(),h.state=s.memoizedState),typeof h.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){h=s.stateNode;var E=s.memoizedProps,z=va(a,E);h.props=z;var te=h.context,de=a.contextType;y=Ja,typeof de=="object"&&de!==null&&(y=Sn(de));var pe=a.getDerivedStateFromProps;de=typeof pe=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,de||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||te!==y)&&Qp(s,h,o,y),Dr=!1;var se=s.memoizedState;h.state=se,fl(s,o,h,f),dl(),te=s.memoizedState,E||se!==te||Dr?(typeof pe=="function"&&(Ed(s,a,pe,o),te=s.memoizedState),(z=Dr||Pp(s,a,z,o,se,te,y))?(de||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=te),h.props=o,h.state=te,h.context=y,o=z):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{h=s.stateNode,td(t,s),y=s.memoizedProps,de=va(a,y),h.props=de,pe=s.pendingProps,se=h.context,te=a.contextType,z=Ja,typeof te=="object"&&te!==null&&(z=Sn(te)),E=a.getDerivedStateFromProps,(te=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==pe||se!==z)&&Qp(s,h,o,z),Dr=!1,se=s.memoizedState,h.state=se,fl(s,o,h,f),dl();var oe=s.memoizedState;y!==pe||se!==oe||Dr||t!==null&&t.dependencies!==null&&Co(t.dependencies)?(typeof E=="function"&&(Ed(s,a,E,o),oe=s.memoizedState),(de=Dr||Pp(s,a,de,o,se,oe,z)||t!==null&&t.dependencies!==null&&Co(t.dependencies))?(te||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,oe,z),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,oe,z)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&se===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&se===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=oe),h.props=o,h.state=oe,h.context=z,o=de):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&se===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&se===t.memoizedState||(s.flags|=1024),o=!1)}return h=o,Qo(t,s),o=(s.flags&128)!==0,h||o?(h=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:h.render(),s.flags|=1,t!==null&&o?(s.child=xa(s,t.child,null,f),s.child=xa(s,null,a,f)):En(t,s,a,f),s.memoizedState=h.state,t=s.child):t=lr(t,s,f),t}function lg(t,s,a,o){return da(),s.flags|=256,En(t,s,a,o),s.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(t){return{baseLanes:t,cachePool:Km()}}function Rd(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=ss),t}function og(t,s,a){var o=s.pendingProps,f=!1,h=(s.flags&128)!==0,y;if((y=h)||(y=t!==null&&t.memoizedState===null?!1:(Qt.current&2)!==0),y&&(f=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,t===null){if(st){if(f?Or(s):Lr(),(t=Rt)?(t=gx(t,fs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:kr!==null?{id:Zs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},a=Hm(t),a.return=s,s.child=a,jn=s,Rt=null)):t=null,t===null)throw Ar(s);return mf(t)?s.lanes=32:s.lanes=536870912,null}var E=o.children;return o=o.fallback,f?(Lr(),f=s.mode,E=Io({mode:"hidden",children:E},f),o=ua(o,f,a,null),E.return=s,o.return=s,E.sibling=o,s.child=E,o=s.child,o.memoizedState=Ad(a),o.childLanes=Rd(t,y,a),s.memoizedState=Td,xl(null,o)):(Or(s),Dd(s,E))}var z=t.memoizedState;if(z!==null&&(E=z.dehydrated,E!==null)){if(h)s.flags&256?(Or(s),s.flags&=-257,s=Md(t,s,a)):s.memoizedState!==null?(Lr(),s.child=t.child,s.flags|=128,s=null):(Lr(),E=o.fallback,f=s.mode,o=Io({mode:"visible",children:o.children},f),E=ua(E,f,a,null),E.flags|=2,o.return=s,E.return=s,o.sibling=E,s.child=o,xa(s,t.child,null,a),o=s.child,o.memoizedState=Ad(a),o.childLanes=Rd(t,y,a),s.memoizedState=Td,s=xl(null,o));else if(Or(s),mf(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var te=y.dgst;y=te,o=Error(i(419)),o.stack="",o.digest=y,al({value:o,source:null,stack:null}),s=Md(t,s,a)}else if(Jt||si(t,s,a,!1),y=(a&t.childLanes)!==0,Jt||y){if(y=jt,y!==null&&(o=Tn(y,a),o!==0&&o!==z.retryLane))throw z.retryLane=o,ca(t,o),Qn(y,t,o),Cd;hf(E)||nc(),s=Md(t,s,a)}else hf(E)?(s.flags|=192,s.child=t.child,s=null):(t=z.treeContext,Rt=ms(E.nextSibling),jn=s,st=!0,Tr=null,fs=!1,t!==null&&Vm(s,t),s=Dd(s,o.children),s.flags|=4096);return s}return f?(Lr(),E=o.fallback,f=s.mode,z=t.child,te=z.sibling,o=tr(z,{mode:"hidden",children:o.children}),o.subtreeFlags=z.subtreeFlags&65011712,te!==null?E=tr(te,E):(E=ua(E,f,a,null),E.flags|=2),E.return=s,o.return=s,o.sibling=E,s.child=o,xl(null,o),o=s.child,E=t.child.memoizedState,E===null?E=Ad(a):(f=E.cachePool,f!==null?(z=Yt._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Km(),E={baseLanes:E.baseLanes|a,cachePool:f}),o.memoizedState=E,o.childLanes=Rd(t,y,a),s.memoizedState=Td,xl(t.child,o)):(Or(s),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(y=s.deletions,y===null?(s.deletions=[t],s.flags|=16):y.push(t)),s.child=a,s.memoizedState=null,a)}function Dd(t,s){return s=Io({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Io(t,s){return t=Jn(22,t,null,s),t.lanes=0,t}function Md(t,s,a){return xa(s,t.child,null,a),t=Dd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function cg(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Wu(t.return,s,a)}function zd(t,s,a,o,f,h){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f,treeForkCount:h}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=a,y.tailMode=f,y.treeForkCount=h)}function ug(t,s,a){var o=s.pendingProps,f=o.revealOrder,h=o.tail;o=o.children;var y=Qt.current,E=(y&2)!==0;if(E?(y=y&1|2,s.flags|=128):y&=1,le(Qt,y),En(t,s,o,a),o=st?rl:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cg(t,a,s);else if(t.tag===19)cg(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&Oo(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),zd(s,!1,f,a,h,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Oo(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}zd(s,!0,a,null,h,o);break;case"together":zd(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function lr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Br|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(si(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=tr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Od(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Co(t)))}function o1(t,s,a){switch(s.tag){case 3:$(s,s.stateNode.containerInfo),Rr(s,Yt,t.memoizedState.cache),da();break;case 27:case 5:me(s);break;case 4:$(s,s.stateNode.containerInfo);break;case 10:Rr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,id(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(Or(s),s.flags|=128,null):(a&s.child.childLanes)!==0?og(t,s,a):(Or(s),t=lr(t,s,a),t!==null?t.sibling:null);Or(s);break;case 19:var f=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(si(t,s,a,!1),o=(a&s.childLanes)!==0),f){if(o)return ug(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Qt,Qt.current),o)break;return null;case 22:return s.lanes=0,ng(t,s,a,s.pendingProps);case 24:Rr(s,Yt,t.memoizedState.cache)}return lr(t,s,a)}function dg(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Jt=!0;else{if(!Od(t,a)&&(s.flags&128)===0)return Jt=!1,o1(t,s,a);Jt=(t.flags&131072)!==0}else Jt=!1,st&&(s.flags&1048576)!==0&&Zm(s,rl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=pa(s.elementType),s.type=t,typeof t=="function")qu(t)?(o=va(t,o),s.tag=1,s=ig(null,s,t,o,a)):(s.tag=0,s=kd(null,s,t,o,a));else{if(t!=null){var f=t.$$typeof;if(f===L){s.tag=11,s=Jp(null,s,t,o,a);break e}else if(f===U){s.tag=14,s=eg(null,s,t,o,a);break e}}throw s=ue(t)||t,Error(i(306,s,""))}}return s;case 0:return kd(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,f=va(o,s.pendingProps),ig(t,s,o,f,a);case 3:e:{if($(s,s.stateNode.containerInfo),t===null)throw Error(i(387));o=s.pendingProps;var h=s.memoizedState;f=h.element,td(t,s),fl(s,o,null,a);var y=s.memoizedState;if(o=y.cache,Rr(s,Yt,o),o!==h.cache&&Gu(s,[Yt],a,!0),dl(),o=y.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){s=lg(t,s,o,a);break e}else if(o!==f){f=cs(Error(i(424)),s),al(f),s=lg(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rt=ms(t.firstChild),jn=s,st=!0,Tr=null,fs=!0,a=np(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(da(),o===f){s=lr(t,s,a);break e}En(t,s,o,a)}s=s.child}return s;case 26:return Qo(t,s),t===null?(a=jx(s.type,null,s.pendingProps,null))?s.memoizedState=a:st||(a=s.type,t=s.pendingProps,o=cc(B.current).createElement(a),o[Ct]=s,o[Pt]=t,Nn(o,a,t),wt(o),s.stateNode=o):s.memoizedState=jx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return me(s),t===null&&st&&(o=s.stateNode=vx(s.type,s.pendingProps,B.current),jn=s,fs=!0,f=Rt,Vr(s.type)?(pf=f,Rt=ms(o.firstChild)):Rt=f),En(t,s,s.pendingProps.children,a),Qo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&st&&((f=o=Rt)&&(o=$1(o,s.type,s.pendingProps,fs),o!==null?(s.stateNode=o,jn=s,Rt=ms(o.firstChild),fs=!1,f=!0):f=!1),f||Ar(s)),me(s),f=s.type,h=s.pendingProps,y=t!==null?t.memoizedProps:null,o=h.children,uf(f,h)?o=null:y!==null&&uf(f,y)&&(s.flags|=32),s.memoizedState!==null&&(f=od(t,s,Jw,null,null,a),Dl._currentValue=f),Qo(t,s),En(t,s,o,a),s.child;case 6:return t===null&&st&&((t=a=Rt)&&(a=B1(a,s.pendingProps,fs),a!==null?(s.stateNode=a,jn=s,Rt=null,t=!0):t=!1),t||Ar(s)),null;case 13:return og(t,s,a);case 4:return $(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=xa(s,null,o,a):En(t,s,o,a),s.child;case 11:return Jp(t,s,s.type,s.pendingProps,a);case 7:return En(t,s,s.pendingProps,a),s.child;case 8:return En(t,s,s.pendingProps.children,a),s.child;case 12:return En(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,Rr(s,s.type,o.value),En(t,s,o.children,a),s.child;case 9:return f=s.type._context,o=s.pendingProps.children,ha(s),f=Sn(f),o=o(f),s.flags|=1,En(t,s,o,a),s.child;case 14:return eg(t,s,s.type,s.pendingProps,a);case 15:return tg(t,s,s.type,s.pendingProps,a);case 19:return ug(t,s,a);case 31:return l1(t,s,a);case 22:return ng(t,s,a,s.pendingProps);case 24:return ha(s),o=Sn(Yt),t===null?(f=Xu(),f===null&&(f=jt,h=Ku(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=a),f=h),s.memoizedState={parent:o,cache:f},ed(s),Rr(s,Yt,f)):((t.lanes&a)!==0&&(td(t,s),fl(s,null,null,a),dl()),f=t.memoizedState,h=s.memoizedState,f.parent!==o?(f={parent:o,cache:o},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Rr(s,Yt,o)):(o=h.cache,Rr(s,Yt,o),o!==f.cache&&Gu(s,[Yt],a,!0))),En(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function or(t){t.flags|=4}function Ld(t,s,a,o,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if($g())t.flags|=8192;else throw ga=Ro,Ju}else t.flags&=-16777217}function fg(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Cx(s))if($g())t.flags|=8192;else throw ga=Ro,Ju}function Wo(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?hn():536870912,t.lanes|=s,pi|=s)}function bl(t,s){if(!st)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Dt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function c1(t,s,a){var o=s.pendingProps;switch(Vu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(s),null;case 1:return Dt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),rr(Yt),re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ni(s)?or(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qu())),Dt(s),null;case 26:var f=s.type,h=s.memoizedState;return t===null?(or(s),h!==null?(Dt(s),fg(s,h)):(Dt(s),Ld(s,f,null,o,a))):h?h!==t.memoizedState?(or(s),Dt(s),fg(s,h)):(Dt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&or(s),Dt(s),Ld(s,f,t,o,a)),null;case 27:if(Me(s),a=B.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&or(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Dt(s),null}t=Z.current,ni(s)?Pm(s):(t=vx(f,o,a),s.stateNode=t,or(s))}return Dt(s),null;case 5:if(Me(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&or(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Dt(s),null}if(h=Z.current,ni(s))Pm(s);else{var y=cc(B.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?y.createElement(f,{is:o.is}):y.createElement(f)}}h[Ct]=s,h[Pt]=o;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=h;e:switch(Nn(h,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&or(s)}}return Dt(s),Ld(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&or(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(t=B.current,ni(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,f=jn,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Ct]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||ox(t.nodeValue,a)),t||Ar(s,!0)}else t=cc(t).createTextNode(o),t[Ct]=s,s.stateNode=t}return Dt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=ni(s),a!==null){if(t===null){if(!o)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ct]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),t=!1}else a=Qu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(ts(s),s):(ts(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Dt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=ni(s),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ct]=s}else da(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),f=!1}else f=Qu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ts(s),s):(ts(s),null)}return ts(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==f&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Wo(s,s.updateQueue),Dt(s),null);case 4:return re(),t===null&&rf(s.stateNode.containerInfo),Dt(s),null;case 10:return rr(s.type),Dt(s),null;case 19:if(W(Qt),o=s.memoizedState,o===null)return Dt(s),null;if(f=(s.flags&128)!==0,h=o.rendering,h===null)if(f)bl(o,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(h=Oo(t),h!==null){for(s.flags|=128,bl(o,!1),t=h.updateQueue,s.updateQueue=t,Wo(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)qm(a,t),a=a.sibling;return le(Qt,Qt.current&1|2),st&&nr(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&ye()>Jo&&(s.flags|=128,f=!0,bl(o,!1),s.lanes=4194304)}else{if(!f)if(t=Oo(h),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,Wo(s,t),bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!st)return Dt(s),null}else 2*ye()-o.renderingStartTime>Jo&&a!==536870912&&(s.flags|=128,f=!0,bl(o,!1),s.lanes=4194304);o.isBackwards?(h.sibling=s.child,s.child=h):(t=o.last,t!==null?t.sibling=h:s.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ye(),t.sibling=null,a=Qt.current,le(Qt,f?a&1|2:a&1),st&&nr(s,o.treeForkCount),t):(Dt(s),null);case 22:case 23:return ts(s),ad(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Dt(s),s.subtreeFlags&6&&(s.flags|=8192)):Dt(s),a=s.updateQueue,a!==null&&Wo(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&W(ma),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),rr(Yt),Dt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function u1(t,s){switch(Vu(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return rr(Yt),re(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 31:if(s.memoizedState!==null){if(ts(s),s.alternate===null)throw Error(i(340));da()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(ts(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));da()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return W(Qt),null;case 4:return re(),null;case 10:return rr(s.type),null;case 22:case 23:return ts(s),ad(),t!==null&&W(ma),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return rr(Yt),null;case 25:return null;default:return null}}function hg(t,s){switch(Vu(s),s.tag){case 3:rr(Yt),re();break;case 26:case 27:case 5:Me(s);break;case 4:re();break;case 31:s.memoizedState!==null&&ts(s);break;case 13:ts(s);break;case 19:W(Qt);break;case 10:rr(s.type);break;case 22:case 23:ts(s),ad(),t!==null&&W(ma);break;case 24:rr(Yt)}}function vl(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&t)===t){o=void 0;var h=a.create,y=a.inst;o=h(),y.destroy=o}a=a.next}while(a!==f)}}catch(E){ht(s,s.return,E)}}function Ur(t,s,a){try{var o=s.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var h=f.next;o=h;do{if((o.tag&t)===t){var y=o.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,f=s;var z=a,te=E;try{te()}catch(de){ht(f,z,de)}}}o=o.next}while(o!==h)}}catch(de){ht(s,s.return,de)}}function mg(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{rp(s,a)}catch(o){ht(t,t.return,o)}}}function pg(t,s,a){a.props=va(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){ht(t,s,o)}}function yl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(f){ht(t,s,f)}}function Ps(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){ht(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ht(t,s,f)}else a.current=null}function gg(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){ht(t,t.return,f)}}function Ud(t,s,a){try{var o=t.stateNode;D1(o,t.type,a,s),o[Pt]=s}catch(f){ht(t,t.return,f)}}function xg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vr(t.type)||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bd(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Es));else if(o!==4&&(o===27&&Vr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Bd(t,s,a),t=t.sibling;t!==null;)Bd(t,s,a),t=t.sibling}function Go(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&Vr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Go(t,s,a),t=t.sibling;t!==null;)Go(t,s,a),t=t.sibling}function bg(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Nn(s,o,a),s[Ct]=t,s[Pt]=a}catch(h){ht(t,t.return,h)}}var cr=!1,en=!1,qd=!1,vg=typeof WeakSet=="function"?WeakSet:Set,pn=null;function d1(t,s){if(t=t.containerInfo,of=gc,t=Rm(t),Mu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var y=0,E=-1,z=-1,te=0,de=0,pe=t,se=null;t:for(;;){for(var oe;pe!==a||f!==0&&pe.nodeType!==3||(E=y+f),pe!==h||o!==0&&pe.nodeType!==3||(z=y+o),pe.nodeType===3&&(y+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)se=pe,pe=oe;for(;;){if(pe===t)break t;if(se===a&&++te===f&&(E=y),se===h&&++de===o&&(z=y),(oe=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=oe}a=E===-1||z===-1?null:{start:E,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(cf={focusedElem:t,selectionRange:a},gc=!1,pn=s;pn!==null;)if(s=pn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,pn=t;else for(;pn!==null;){switch(s=pn,h=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,a=s,f=h.memoizedProps,h=h.memoizedState,o=a.stateNode;try{var Ae=va(a.type,f);t=o.getSnapshotBeforeUpdate(Ae,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(qe){ht(a,a.return,qe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,pn=t;break}pn=s.return}}function yg(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:dr(t,a),o&4&&vl(5,a);break;case 1:if(dr(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(y){ht(a,a.return,y)}else{var f=va(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(y){ht(a,a.return,y)}}o&64&&mg(a),o&512&&yl(a,a.return);break;case 3:if(dr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{rp(t,s)}catch(y){ht(a,a.return,y)}}break;case 27:s===null&&o&4&&bg(a);case 26:case 5:dr(t,a),s===null&&o&4&&gg(a),o&512&&yl(a,a.return);break;case 12:dr(t,a);break;case 31:dr(t,a),o&4&&Sg(t,a);break;case 13:dr(t,a),o&4&&Eg(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=y1.bind(null,a),q1(t,a))));break;case 22:if(o=a.memoizedState!==null||cr,!o){s=s!==null&&s.memoizedState!==null||en,f=cr;var h=en;cr=o,(en=s)&&!h?fr(t,a,(a.subtreeFlags&8772)!==0):dr(t,a),cr=f,en=h}break;case 30:break;default:dr(t,a)}}function wg(t){var s=t.alternate;s!==null&&(t.alternate=null,wg(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Hi(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Lt=null,Fn=!1;function ur(t,s,a){for(a=a.child;a!==null;)jg(t,s,a),a=a.sibling}function jg(t,s,a){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(Mt,a)}catch{}switch(a.tag){case 26:en||Ps(a,s),ur(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||Ps(a,s);var o=Lt,f=Fn;Vr(a.type)&&(Lt=a.stateNode,Fn=!1),ur(t,s,a),Tl(a.stateNode),Lt=o,Fn=f;break;case 5:en||Ps(a,s);case 6:if(o=Lt,f=Fn,Lt=null,ur(t,s,a),Lt=o,Fn=f,Lt!==null)if(Fn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(a.stateNode)}catch(h){ht(a,s,h)}else try{Lt.removeChild(a.stateNode)}catch(h){ht(a,s,h)}break;case 18:Lt!==null&&(Fn?(t=Lt,mx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Si(t)):mx(Lt,a.stateNode));break;case 4:o=Lt,f=Fn,Lt=a.stateNode.containerInfo,Fn=!0,ur(t,s,a),Lt=o,Fn=f;break;case 0:case 11:case 14:case 15:Ur(2,a,s),en||Ur(4,a,s),ur(t,s,a);break;case 1:en||(Ps(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&pg(a,s,o)),ur(t,s,a);break;case 21:ur(t,s,a);break;case 22:en=(o=en)||a.memoizedState!==null,ur(t,s,a),en=o;break;default:ur(t,s,a)}}function Sg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Si(t)}catch(a){ht(s,s.return,a)}}}function Eg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Si(t)}catch(a){ht(s,s.return,a)}}function f1(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new vg),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new vg),s;default:throw Error(i(435,t.tag))}}function Ko(t,s){var a=f1(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var f=w1.bind(null,t,o);o.then(f,f)}})}function Zn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],h=t,y=s,E=y;e:for(;E!==null;){switch(E.tag){case 27:if(Vr(E.type)){Lt=E.stateNode,Fn=!1;break e}break;case 5:Lt=E.stateNode,Fn=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,Fn=!0;break e}E=E.return}if(Lt===null)throw Error(i(160));jg(h,y,f),Lt=null,Fn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ng(s,t),s=s.sibling}var Cs=null;function Ng(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Zn(s,t),Vn(t),o&4&&(Ur(3,t,t.return),vl(3,t),Ur(5,t,t.return));break;case 1:Zn(s,t),Vn(t),o&512&&(en||a===null||Ps(a,a.return)),o&64&&cr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=Cs;if(Zn(s,t),Vn(t),o&512&&(en||a===null||Ps(a,a.return)),o&4){var h=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":h=f.getElementsByTagName("title")[0],(!h||h[jr]||h[Ct]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(o),f.head.insertBefore(h,f.querySelector("head > title"))),Nn(h,o,a),h[Ct]=t,wt(h),o=h;break e;case"link":var y=Nx("link","href",f).get(o+(a.href||""));if(y){for(var E=0;E<y.length;E++)if(h=y[E],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(E,1);break t}}h=f.createElement(o),Nn(h,o,a),f.head.appendChild(h);break;case"meta":if(y=Nx("meta","content",f).get(o+(a.content||""))){for(E=0;E<y.length;E++)if(h=y[E],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(E,1);break t}}h=f.createElement(o),Nn(h,o,a),f.head.appendChild(h);break;default:throw Error(i(468,o))}h[Ct]=t,wt(h),o=h}t.stateNode=o}else _x(f,t.type,t.stateNode);else t.stateNode=Ex(f,o,t.memoizedProps);else h!==o?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,o===null?_x(f,t.type,t.stateNode):Ex(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:Zn(s,t),Vn(t),o&512&&(en||a===null||Ps(a,a.return)),a!==null&&o&4&&Ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Zn(s,t),Vn(t),o&512&&(en||a===null||Ps(a,a.return)),t.flags&32){f=t.stateNode;try{_r(f,"")}catch(Ae){ht(t,t.return,Ae)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,Ud(t,f,a!==null?a.memoizedProps:f)),o&1024&&(qd=!0);break;case 6:if(Zn(s,t),Vn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Ae){ht(t,t.return,Ae)}}break;case 3:if(fc=null,f=Cs,Cs=uc(s.containerInfo),Zn(s,t),Cs=f,Vn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Si(s.containerInfo)}catch(Ae){ht(t,t.return,Ae)}qd&&(qd=!1,_g(t));break;case 4:o=Cs,Cs=uc(t.stateNode.containerInfo),Zn(s,t),Vn(t),Cs=o;break;case 12:Zn(s,t),Vn(t);break;case 31:Zn(s,t),Vn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ko(t,o)));break;case 13:Zn(s,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xo=ye()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ko(t,o)));break;case 22:f=t.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,te=cr,de=en;if(cr=te||f,en=de||z,Zn(s,t),en=de,cr=te,Vn(t),o&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||z||cr||en||ya(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){z=a=s;try{if(h=z.stateNode,f)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=z.stateNode;var pe=z.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;E.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ae){ht(z,z.return,Ae)}}}else if(s.tag===6){if(a===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Ae){ht(z,z.return,Ae)}}}else if(s.tag===18){if(a===null){z=s;try{var oe=z.stateNode;f?px(oe,!0):px(z.stateNode,!1)}catch(Ae){ht(z,z.return,Ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ko(t,a))));break;case 19:Zn(s,t),Vn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ko(t,o)));break;case 30:break;case 21:break;default:Zn(s,t),Vn(t)}}function Vn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(xg(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,h=$d(t);Go(t,h,f);break;case 5:var y=a.stateNode;a.flags&32&&(_r(y,""),a.flags&=-33);var E=$d(t);Go(t,E,y);break;case 3:case 4:var z=a.stateNode.containerInfo,te=$d(t);Bd(t,te,z);break;default:throw Error(i(161))}}catch(de){ht(t,t.return,de)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function _g(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;_g(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function dr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)yg(t,s.alternate,s),s=s.sibling}function ya(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ur(4,s,s.return),ya(s);break;case 1:Ps(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&pg(s,s.return,a),ya(s);break;case 27:Tl(s.stateNode);case 26:case 5:Ps(s,s.return),ya(s);break;case 22:s.memoizedState===null&&ya(s);break;case 30:ya(s);break;default:ya(s)}t=t.sibling}}function fr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,f=t,h=s,y=h.flags;switch(h.tag){case 0:case 11:case 15:fr(f,h,a),vl(4,h);break;case 1:if(fr(f,h,a),o=h,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){ht(o,o.return,te)}if(o=h,f=o.updateQueue,f!==null){var E=o.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)sp(z[f],E)}catch(te){ht(o,o.return,te)}}a&&y&64&&mg(h),yl(h,h.return);break;case 27:bg(h);case 26:case 5:fr(f,h,a),a&&o===null&&y&4&&gg(h),yl(h,h.return);break;case 12:fr(f,h,a);break;case 31:fr(f,h,a),a&&y&4&&Sg(f,h);break;case 13:fr(f,h,a),a&&y&4&&Eg(f,h);break;case 22:h.memoizedState===null&&fr(f,h,a),yl(h,h.return);break;case 30:break;default:fr(f,h,a)}s=s.sibling}}function Hd(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&il(a))}function Fd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&il(t))}function ks(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cg(t,s,a,o),s=s.sibling}function Cg(t,s,a,o){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ks(t,s,a,o),f&2048&&vl(9,s);break;case 1:ks(t,s,a,o);break;case 3:ks(t,s,a,o),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&il(t)));break;case 12:if(f&2048){ks(t,s,a,o),t=s.stateNode;try{var h=s.memoizedProps,y=h.id,E=h.onPostCommit;typeof E=="function"&&E(y,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){ht(s,s.return,z)}}else ks(t,s,a,o);break;case 31:ks(t,s,a,o);break;case 13:ks(t,s,a,o);break;case 23:break;case 22:h=s.stateNode,y=s.alternate,s.memoizedState!==null?h._visibility&2?ks(t,s,a,o):wl(t,s):h._visibility&2?ks(t,s,a,o):(h._visibility|=2,fi(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Hd(y,s);break;case 24:ks(t,s,a,o),f&2048&&Fd(s.alternate,s);break;default:ks(t,s,a,o)}}function fi(t,s,a,o,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var h=t,y=s,E=a,z=o,te=y.flags;switch(y.tag){case 0:case 11:case 15:fi(h,y,E,z,f),vl(8,y);break;case 23:break;case 22:var de=y.stateNode;y.memoizedState!==null?de._visibility&2?fi(h,y,E,z,f):wl(h,y):(de._visibility|=2,fi(h,y,E,z,f)),f&&te&2048&&Hd(y.alternate,y);break;case 24:fi(h,y,E,z,f),f&&te&2048&&Fd(y.alternate,y);break;default:fi(h,y,E,z,f)}s=s.sibling}}function wl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,f=o.flags;switch(o.tag){case 22:wl(a,o),f&2048&&Hd(o.alternate,o);break;case 24:wl(a,o),f&2048&&Fd(o.alternate,o);break;default:wl(a,o)}s=s.sibling}}var jl=8192;function hi(t,s,a){if(t.subtreeFlags&jl)for(t=t.child;t!==null;)kg(t,s,a),t=t.sibling}function kg(t,s,a){switch(t.tag){case 26:hi(t,s,a),t.flags&jl&&t.memoizedState!==null&&X1(a,Cs,t.memoizedState,t.memoizedProps);break;case 5:hi(t,s,a);break;case 3:case 4:var o=Cs;Cs=uc(t.stateNode.containerInfo),hi(t,s,a),Cs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=jl,jl=16777216,hi(t,s,a),jl=o):hi(t,s,a));break;default:hi(t,s,a)}}function Tg(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Sl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];pn=o,Rg(o,t)}Tg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ag(t),t=t.sibling}function Ag(t){switch(t.tag){case 0:case 11:case 15:Sl(t),t.flags&2048&&Ur(9,t,t.return);break;case 3:Sl(t);break;case 12:Sl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Yo(t)):Sl(t);break;default:Sl(t)}}function Yo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];pn=o,Rg(o,t)}Tg(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ur(8,s,s.return),Yo(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Yo(s));break;default:Yo(s)}t=t.sibling}}function Rg(t,s){for(;pn!==null;){var a=pn;switch(a.tag){case 0:case 11:case 15:Ur(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:il(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,pn=o;else e:for(a=t;pn!==null;){o=pn;var f=o.sibling,h=o.return;if(wg(o),o===a){pn=null;break e}if(f!==null){f.return=h,pn=f;break e}pn=h}}}var h1={getCacheForType:function(t){var s=Sn(Yt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Sn(Yt).controller.signal}},m1=typeof WeakMap=="function"?WeakMap:Map,lt=0,jt=null,Xe=null,et=0,ft=0,ns=null,$r=!1,mi=!1,Zd=!1,hr=0,Ft=0,Br=0,wa=0,Vd=0,ss=0,pi=0,El=null,Pn=null,Pd=!1,Xo=0,Dg=0,Jo=1/0,ec=null,qr=null,on=0,Hr=null,gi=null,mr=0,Qd=0,Id=null,Mg=null,Nl=0,Wd=null;function rs(){return(lt&2)!==0&&et!==0?et&-et:M.T!==null?ef():An()}function zg(){if(ss===0)if((et&536870912)===0||st){var t=yr;yr<<=1,(yr&3932160)===0&&(yr=262144),ss=t}else ss=536870912;return t=es.current,t!==null&&(t.flags|=32),ss}function Qn(t,s,a){(t===jt&&(ft===2||ft===9)||t.cancelPendingCommit!==null)&&(xi(t,0),Fr(t,et,ss,!1)),Ln(t,a),((lt&2)===0||t!==jt)&&(t===jt&&((lt&2)===0&&(wa|=a),Ft===4&&Fr(t,et,ss,!1)),Qs(t))}function Og(t,s,a){if((lt&6)!==0)throw Error(i(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||kn(t,s),f=o?x1(t,s):Kd(t,s,!0),h=o;do{if(f===0){mi&&!o&&Fr(t,s,0,!1);break}else{if(a=t.current.alternate,h&&!p1(a)){f=Kd(t,s,!1),h=!1;continue}if(f===2){if(h=s,t.errorRecoveryDisabledLanes&h)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;e:{var E=t;f=El;var z=E.current.memoizedState.isDehydrated;if(z&&(xi(E,y).flags|=256),y=Kd(E,y,!1),y!==2){if(Zd&&!z){E.errorRecoveryDisabledLanes|=h,wa|=h,f=4;break e}h=Pn,Pn=f,h!==null&&(Pn===null?Pn=h:Pn.push.apply(Pn,h))}f=y}if(h=!1,f!==2)continue}}if(f===1){xi(t,0),Fr(t,s,0,!0);break}e:{switch(o=t,h=f,h){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Fr(o,s,ss,!$r);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Xo+300-ye(),10<f)){if(Fr(o,s,ss,!$r),At(o,0,!0)!==0)break e;mr=s,o.timeoutHandle=fx(Lg.bind(null,o,a,Pn,ec,Pd,s,ss,wa,pi,$r,h,"Throttled",-0,0),f);break e}Lg(o,a,Pn,ec,Pd,s,ss,wa,pi,$r,h,null,-0,0)}}break}while(!0);Qs(t)}function Lg(t,s,a,o,f,h,y,E,z,te,de,pe,se,oe){if(t.timeoutHandle=-1,pe=s.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Es},kg(s,h,pe);var Ae=(h&62914560)===h?Xo-ye():(h&4194048)===h?Dg-ye():0;if(Ae=J1(pe,Ae),Ae!==null){mr=h,t.cancelPendingCommit=Ae(Vg.bind(null,t,s,h,a,o,f,y,E,z,de,pe,null,se,oe)),Fr(t,h,y,!te);return}}Vg(t,s,h,a,o,f,y,E,z)}function p1(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],h=f.getSnapshot;f=f.value;try{if(!Xn(h(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fr(t,s,a,o){s&=~Vd,s&=~wa,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var f=s;0<f;){var h=31-_t(f),y=1<<h;o[h]=-1,f&=~y}a!==0&&vn(t,a,s)}function tc(){return(lt&6)===0?(_l(0),!1):!0}function Gd(){if(Xe!==null){if(ft===0)var t=Xe.return;else t=Xe,sr=fa=null,dd(t),li=null,ol=0,t=Xe;for(;t!==null;)hg(t.alternate,t),t=t.return;Xe=null}}function xi(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,O1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),mr=0,Gd(),jt=t,Xe=a=tr(t.current,null),et=s,ft=0,ns=null,$r=!1,mi=kn(t,s),Zd=!1,pi=ss=Vd=wa=Br=Ft=0,Pn=El=null,Pd=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var f=31-_t(o),h=1<<f;s|=t[f],o&=~h}return hr=s,jo(),a}function Ug(t,s){Ge=null,M.H=gl,s===ii||s===Ao?(s=Jm(),ft=3):s===Ju?(s=Jm(),ft=4):ft=s===Cd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ns=s,Xe===null&&(Ft=1,Vo(t,cs(s,t.current)))}function $g(){var t=es.current;return t===null?!0:(et&4194048)===et?hs===null:(et&62914560)===et||(et&536870912)!==0?t===hs:!1}function Bg(){var t=M.H;return M.H=gl,t===null?gl:t}function qg(){var t=M.A;return M.A=h1,t}function nc(){Ft=4,$r||(et&4194048)!==et&&es.current!==null||(mi=!0),(Br&134217727)===0&&(wa&134217727)===0||jt===null||Fr(jt,et,ss,!1)}function Kd(t,s,a){var o=lt;lt|=2;var f=Bg(),h=qg();(jt!==t||et!==s)&&(ec=null,xi(t,s)),s=!1;var y=Ft;e:do try{if(ft!==0&&Xe!==null){var E=Xe,z=ns;switch(ft){case 8:Gd(),y=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(s=!0);var te=ft;if(ft=0,ns=null,bi(t,E,z,te),a&&mi){y=0;break e}break;default:te=ft,ft=0,ns=null,bi(t,E,z,te)}}g1(),y=Ft;break}catch(de){Ug(t,de)}while(!0);return s&&t.shellSuspendCounter++,sr=fa=null,lt=o,M.H=f,M.A=h,Xe===null&&(jt=null,et=0,jo()),y}function g1(){for(;Xe!==null;)Hg(Xe)}function x1(t,s){var a=lt;lt|=2;var o=Bg(),f=qg();jt!==t||et!==s?(ec=null,Jo=ye()+500,xi(t,s)):mi=kn(t,s);e:do try{if(ft!==0&&Xe!==null){s=Xe;var h=ns;t:switch(ft){case 1:ft=0,ns=null,bi(t,s,h,1);break;case 2:case 9:if(Ym(h)){ft=0,ns=null,Fg(s);break}s=function(){ft!==2&&ft!==9||jt!==t||(ft=7),Qs(t)},h.then(s,s);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Ym(h)?(ft=0,ns=null,Fg(s)):(ft=0,ns=null,bi(t,s,h,7));break;case 5:var y=null;switch(Xe.tag){case 26:y=Xe.memoizedState;case 5:case 27:var E=Xe;if(y?Cx(y):E.stateNode.complete){ft=0,ns=null;var z=E.sibling;if(z!==null)Xe=z;else{var te=E.return;te!==null?(Xe=te,sc(te)):Xe=null}break t}}ft=0,ns=null,bi(t,s,h,5);break;case 6:ft=0,ns=null,bi(t,s,h,6);break;case 8:Gd(),Ft=6;break e;default:throw Error(i(462))}}b1();break}catch(de){Ug(t,de)}while(!0);return sr=fa=null,M.H=o,M.A=f,lt=a,Xe!==null?0:(jt=null,et=0,jo(),Ft)}function b1(){for(;Xe!==null&&!ce();)Hg(Xe)}function Hg(t){var s=dg(t.alternate,t,hr);t.memoizedProps=t.pendingProps,s===null?sc(t):Xe=s}function Fg(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=ag(a,s,s.pendingProps,s.type,void 0,et);break;case 11:s=ag(a,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:dd(s);default:hg(a,s),s=Xe=qm(s,hr),s=dg(a,s,hr)}t.memoizedProps=t.pendingProps,s===null?sc(t):Xe=s}function bi(t,s,a,o){sr=fa=null,dd(s),li=null,ol=0;var f=s.return;try{if(i1(t,f,s,a,et)){Ft=1,Vo(t,cs(a,t.current)),Xe=null;return}}catch(h){if(f!==null)throw Xe=f,h;Ft=1,Vo(t,cs(a,t.current)),Xe=null;return}s.flags&32768?(st||o===1?t=!0:mi||(et&536870912)!==0?t=!1:($r=t=!0,(o===2||o===9||o===3||o===6)&&(o=es.current,o!==null&&o.tag===13&&(o.flags|=16384))),Zg(s,t)):sc(s)}function sc(t){var s=t;do{if((s.flags&32768)!==0){Zg(s,$r);return}t=s.return;var a=c1(s.alternate,s,hr);if(a!==null){Xe=a;return}if(s=s.sibling,s!==null){Xe=s;return}Xe=s=t}while(s!==null);Ft===0&&(Ft=5)}function Zg(t,s){do{var a=u1(t.alternate,t);if(a!==null){a.flags&=32767,Xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Xe=t;return}Xe=t=a}while(t!==null);Ft=6,Xe=null}function Vg(t,s,a,o,f,h,y,E,z){t.cancelPendingCommit=null;do rc();while(on!==0);if((lt&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(h=s.lanes|s.childLanes,h|=$u,qt(t,a,h,y,E,z),t===jt&&(Xe=jt=null,et=0),gi=s,Hr=t,mr=a,Qd=h,Id=f,Mg=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,j1(We,function(){return Gg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=M.T,M.T=null,f=G.p,G.p=2,y=lt,lt|=4;try{d1(t,s,a)}finally{lt=y,G.p=f,M.T=o}}on=1,Pg(),Qg(),Ig()}}function Pg(){if(on===1){on=0;var t=Hr,s=gi,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var o=G.p;G.p=2;var f=lt;lt|=4;try{Ng(s,t);var h=cf,y=Rm(t.containerInfo),E=h.focusedElem,z=h.selectionRange;if(y!==E&&E&&E.ownerDocument&&Am(E.ownerDocument.documentElement,E)){if(z!==null&&Mu(E)){var te=z.start,de=z.end;if(de===void 0&&(de=te),"selectionStart"in E)E.selectionStart=te,E.selectionEnd=Math.min(de,E.value.length);else{var pe=E.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var oe=se.getSelection(),Ae=E.textContent.length,qe=Math.min(z.start,Ae),xt=z.end===void 0?qe:Math.min(z.end,Ae);!oe.extend&&qe>xt&&(y=xt,xt=qe,qe=y);var V=Tm(E,qe),q=Tm(E,xt);if(V&&q&&(oe.rangeCount!==1||oe.anchorNode!==V.node||oe.anchorOffset!==V.offset||oe.focusNode!==q.node||oe.focusOffset!==q.offset)){var ee=pe.createRange();ee.setStart(V.node,V.offset),oe.removeAllRanges(),qe>xt?(oe.addRange(ee),oe.extend(q.node,q.offset)):(ee.setEnd(q.node,q.offset),oe.addRange(ee))}}}}for(pe=[],oe=E;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<pe.length;E++){var fe=pe[E];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}gc=!!of,cf=of=null}finally{lt=f,G.p=o,M.T=a}}t.current=s,on=2}}function Qg(){if(on===2){on=0;var t=Hr,s=gi,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var o=G.p;G.p=2;var f=lt;lt|=4;try{yg(t,s.alternate,s)}finally{lt=f,G.p=o,M.T=a}}on=3}}function Ig(){if(on===4||on===3){on=0,Ee();var t=Hr,s=gi,a=mr,o=Mg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?on=5:(on=0,gi=Hr=null,Wg(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(qr=null),Ke(a),s=s.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(Mt,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=M.T,f=G.p,G.p=2,M.T=null;try{for(var h=t.onRecoverableError,y=0;y<o.length;y++){var E=o[y];h(E.value,{componentStack:E.stack})}}finally{M.T=s,G.p=f}}(mr&3)!==0&&rc(),Qs(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Wd?Nl++:(Nl=0,Wd=t):Nl=0,_l(0)}}function Wg(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,il(s)))}function rc(){return Pg(),Qg(),Ig(),Gg()}function Gg(){if(on!==5)return!1;var t=Hr,s=Qd;Qd=0;var a=Ke(mr),o=M.T,f=G.p;try{G.p=32>a?32:a,M.T=null,a=Id,Id=null;var h=Hr,y=mr;if(on=0,gi=Hr=null,mr=0,(lt&6)!==0)throw Error(i(331));var E=lt;if(lt|=4,Ag(h.current),Cg(h,h.current,y,a),lt=E,_l(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(Mt,h)}catch{}return!0}finally{G.p=f,M.T=o,Wg(t,s)}}function Kg(t,s,a){s=cs(a,s),s=_d(t.stateNode,s,2),t=zr(t,s,2),t!==null&&(Ln(t,2),Qs(t))}function ht(t,s,a){if(t.tag===3)Kg(t,t,a);else for(;s!==null;){if(s.tag===3){Kg(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(qr===null||!qr.has(o))){t=cs(a,t),a=Yp(2),o=zr(s,a,2),o!==null&&(Xp(a,o,s,t),Ln(o,2),Qs(o));break}}s=s.return}}function Yd(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new m1;var f=new Set;o.set(s,f)}else f=o.get(s),f===void 0&&(f=new Set,o.set(s,f));f.has(a)||(Zd=!0,f.add(a),t=v1.bind(null,t,s,a),s.then(t,t))}function v1(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,jt===t&&(et&a)===a&&(Ft===4||Ft===3&&(et&62914560)===et&&300>ye()-Xo?(lt&2)===0&&xi(t,0):Vd|=a,pi===et&&(pi=0)),Qs(t)}function Yg(t,s){s===0&&(s=hn()),t=ca(t,s),t!==null&&(Ln(t,s),Qs(t))}function y1(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Yg(t,a)}function w1(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),Yg(t,a)}function j1(t,s){return D(t,s)}var ac=null,vi=null,Xd=!1,ic=!1,Jd=!1,Zr=0;function Qs(t){t!==vi&&t.next===null&&(vi===null?ac=vi=t:vi=vi.next=t),ic=!0,Xd||(Xd=!0,E1())}function _l(t,s){if(!Jd&&ic){Jd=!0;do for(var a=!1,o=ac;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var h=0;else{var y=o.suspendedLanes,E=o.pingedLanes;h=(1<<31-_t(42|t)+1)-1,h&=f&~(y&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,tx(o,h))}else h=et,h=At(o,o===jt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||kn(o,h)||(a=!0,tx(o,h));o=o.next}while(a);Jd=!1}}function S1(){Xg()}function Xg(){ic=Xd=!1;var t=0;Zr!==0&&z1()&&(t=Zr);for(var s=ye(),a=null,o=ac;o!==null;){var f=o.next,h=Jg(o,s);h===0?(o.next=null,a===null?ac=f:a.next=f,f===null&&(vi=a)):(a=o,(t!==0||(h&3)!==0)&&(ic=!0)),o=f}on!==0&&on!==5||_l(t),Zr!==0&&(Zr=0)}function Jg(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var y=31-_t(h),E=1<<y,z=f[y];z===-1?((E&a)===0||(E&o)!==0)&&(f[y]=fn(E,s)):z<=s&&(t.expiredLanes|=E),h&=~E}if(s=jt,a=et,a=At(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(ft===2||ft===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&K(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||kn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&K(o),Ke(a)){case 2:case 8:a=Qe;break;case 32:a=We;break;case 268435456:a=Se;break;default:a=We}return o=ex.bind(null,t),a=D(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&K(o),t.callbackPriority=2,t.callbackNode=null,2}function ex(t,s){if(on!==0&&on!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(rc()&&t.callbackNode!==a)return null;var o=et;return o=At(t,t===jt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Og(t,o,s),Jg(t,ye()),t.callbackNode!=null&&t.callbackNode===a?ex.bind(null,t):null)}function tx(t,s){if(rc())return null;Og(t,s,!0)}function E1(){L1(function(){(lt&6)!==0?D(De,S1):Xg()})}function ef(){if(Zr===0){var t=ri;t===0&&(t=Ls,Ls<<=1,(Ls&261888)===0&&(Ls=256)),Zr=t}return Zr}function nx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Fa(""+t)}function sx(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function N1(t,s,a,o,f){if(s==="submit"&&a&&a.stateNode===f){var h=nx((f[Pt]||null).action),y=o.submitter;y&&(s=(s=y[Pt]||null)?nx(s.formAction):y.getAttribute("formAction"),s!==null&&(h=s,y=null));var E=new Ia("action","action",null,o,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Zr!==0){var z=y?sx(f,y):new FormData(f);yd(a,{pending:!0,data:z,method:f.method,action:h},null,z)}}else typeof h=="function"&&(E.preventDefault(),z=y?sx(f,y):new FormData(f),yd(a,{pending:!0,data:z,method:f.method,action:h},h,z))},currentTarget:f}]})}}for(var tf=0;tf<Uu.length;tf++){var nf=Uu[tf],_1=nf.toLowerCase(),C1=nf[0].toUpperCase()+nf.slice(1);_s(_1,"on"+C1)}_s(zm,"onAnimationEnd"),_s(Om,"onAnimationIteration"),_s(Lm,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(Zw,"onTransitionRun"),_s(Vw,"onTransitionStart"),_s(Pw,"onTransitionCancel"),_s(Um,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function rx(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],f=o.event;o=o.listeners;e:{var h=void 0;if(s)for(var y=o.length-1;0<=y;y--){var E=o[y],z=E.instance,te=E.currentTarget;if(E=E.listener,z!==h&&f.isPropagationStopped())break e;h=E,f.currentTarget=te;try{h(f)}catch(de){wo(de)}f.currentTarget=null,h=z}else for(y=0;y<o.length;y++){if(E=o[y],z=E.instance,te=E.currentTarget,E=E.listener,z!==h&&f.isPropagationStopped())break e;h=E,f.currentTarget=te;try{h(f)}catch(de){wo(de)}f.currentTarget=null,h=z}}}}function Je(t,s){var a=s[Oa];a===void 0&&(a=s[Oa]=new Set);var o=t+"__bubble";a.has(o)||(ax(s,t,2,!1),a.add(o))}function sf(t,s,a){var o=0;s&&(o|=4),ax(a,t,o,s)}var lc="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[lc]){t[lc]=!0,Xs.forEach(function(a){a!=="selectionchange"&&(k1.has(a)||sf(a,!1,t),sf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[lc]||(s[lc]=!0,sf("selectionchange",!1,s))}}function ax(t,s,a,o){switch(zx(s)){case 2:var f=nj;break;case 8:f=sj;break;default:f=yf}a=f.bind(null,s,a,t),f=void 0,!Ii||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function af(t,s,a,o,f){var h=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var E=o.stateNode.containerInfo;if(E===f)break;if(y===4)for(y=o.return;y!==null;){var z=y.tag;if((z===3||z===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;E!==null;){if(y=Sr(E),y===null)return;if(z=y.tag,z===5||z===6||z===26||z===27){o=h=y;continue e}E=E.parentNode}}o=o.return}go(function(){var te=h,de=$s(a),pe=[];e:{var se=$m.get(t);if(se!==void 0){var oe=Ia,Ae=t;switch(t){case"keypress":if(Pa(a)===0)break e;case"keydown":case"keyup":oe=ww;break;case"focusin":Ae="focus",oe=Q;break;case"focusout":Ae="blur",oe=Q;break;case"beforeblur":case"afterblur":oe=Q;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Ew;break;case zm:case Om:case Lm:oe=Te;break;case Um:oe=_w;break;case"scroll":case"scrollend":oe=_u;break;case"wheel":oe=kw;break;case"copy":case"cut":case"paste":oe=Pe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=pm;break;case"toggle":case"beforetoggle":oe=Aw}var qe=(s&4)!==0,xt=!qe&&(t==="scroll"||t==="scrollend"),V=qe?se!==null?se+"Capture":null:se;qe=[];for(var q=te,ee;q!==null;){var fe=q;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||V===null||(fe=ra(q,V),fe!=null&&qe.push(kl(q,fe,ee))),xt)break;q=q.return}0<qe.length&&(se=new oe(se,Ae,null,a,de),pe.push({event:se,listeners:qe}))}}if((s&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",se&&a!==Cr&&(Ae=a.relatedTarget||a.fromElement)&&(Sr(Ae)||Ae[wr]))break e;if((oe||se)&&(se=de.window===de?de:(se=de.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(Ae=a.relatedTarget||a.toElement,oe=te,Ae=Ae?Sr(Ae):null,Ae!==null&&(xt=u(Ae),qe=Ae.tag,Ae!==xt||qe!==5&&qe!==27&&qe!==6)&&(Ae=null)):(oe=null,Ae=te),oe!==Ae)){if(qe=vo,fe="onMouseLeave",V="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(qe=pm,fe="onPointerLeave",V="onPointerEnter",q="pointer"),xt=oe==null?se:Yn(oe),ee=Ae==null?se:Yn(Ae),se=new qe(fe,q+"leave",oe,a,de),se.target=xt,se.relatedTarget=ee,fe=null,Sr(de)===te&&(qe=new qe(V,q+"enter",Ae,a,de),qe.target=ee,qe.relatedTarget=xt,fe=qe),xt=fe,oe&&Ae)t:{for(qe=T1,V=oe,q=Ae,ee=0,fe=V;fe;fe=qe(fe))ee++;fe=0;for(var Ue=q;Ue;Ue=qe(Ue))fe++;for(;0<ee-fe;)V=qe(V),ee--;for(;0<fe-ee;)q=qe(q),fe--;for(;ee--;){if(V===q||q!==null&&V===q.alternate){qe=V;break t}V=qe(V),q=qe(q)}qe=null}else qe=null;oe!==null&&ix(pe,se,oe,qe,!1),Ae!==null&&xt!==null&&ix(pe,xt,Ae,qe,!0)}}e:{if(se=te?Yn(te):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var at=Sm;else if(wm(se))if(Em)at=qw;else{at=$w;var ze=Uw}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&qa(te.elementType)&&(at=Sm):at=Bw;if(at&&(at=at(t,te))){jm(pe,at,a,de);break e}ze&&ze(t,se,te),t==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&Vi(se,"number",se.value)}switch(ze=te?Yn(te):window,t){case"focusin":(wm(ze)||ze.contentEditable==="true")&&(Ka=ze,zu=te,sl=null);break;case"focusout":sl=zu=Ka=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Dm(pe,a,de);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":Dm(pe,a,de)}var Ye;if(Au)e:{switch(t){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Ga?vm(t,a)&&(tt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(tt="onCompositionStart");tt&&(gm&&a.locale!=="ko"&&(Ga||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Ga&&(Ye=xo()):(Fs=de,Wi="value"in Fs?Fs.value:Fs.textContent,Ga=!0)),ze=oc(te,tt),0<ze.length&&(tt=new ct(tt,t,null,a,de),pe.push({event:tt,listeners:ze}),Ye?tt.data=Ye:(Ye=ym(a),Ye!==null&&(tt.data=Ye)))),(Ye=Dw?Mw(t,a):zw(t,a))&&(tt=oc(te,"onBeforeInput"),0<tt.length&&(ze=new ct("onBeforeInput","beforeinput",null,a,de),pe.push({event:ze,listeners:tt}),ze.data=Ye)),N1(pe,t,te,a,de)}rx(pe,s)})}function kl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function oc(t,s){for(var a=s+"Capture",o=[];t!==null;){var f=t,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=ra(t,a),f!=null&&o.unshift(kl(t,f,h)),f=ra(t,s),f!=null&&o.push(kl(t,f,h))),t.tag===3)return o;t=t.return}return[]}function T1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ix(t,s,a,o,f){for(var h=s._reactName,y=[];a!==null&&a!==o;){var E=a,z=E.alternate,te=E.stateNode;if(E=E.tag,z!==null&&z===o)break;E!==5&&E!==26&&E!==27||te===null||(z=te,f?(te=ra(a,h),te!=null&&y.unshift(kl(a,te,z))):f||(te=ra(a,h),te!=null&&y.push(kl(a,te,z)))),a=a.return}y.length!==0&&t.push({event:s,listeners:y})}var A1=/\r\n?/g,R1=/\u0000|\uFFFD/g;function lx(t){return(typeof t=="string"?t:""+t).replace(A1,`
`).replace(R1,"")}function ox(t,s){return s=lx(s),lx(t)===s}function gt(t,s,a,o,f,h){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||_r(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&_r(t,""+o);break;case"className":ws(t,"class",o);break;case"tabIndex":ws(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(t,a,o);break;case"style":po(t,o,h);break;case"data":if(s!=="object"){ws(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Fa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(s!=="input"&&gt(t,s,"name",f.name,f,null),gt(t,s,"formEncType",f.formEncType,f,null),gt(t,s,"formMethod",f.formMethod,f,null),gt(t,s,"formTarget",f.formTarget,f,null)):(gt(t,s,"encType",f.encType,f,null),gt(t,s,"method",f.method,f,null),gt(t,s,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Fa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Es);break;case"onScroll":o!=null&&Je("scroll",t);break;case"onScrollEnd":o!=null&&Je("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Fa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Je("beforetoggle",t),Je("toggle",t),La(t,"popover",o);break;case"xlinkActuate":Rn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Rn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Rn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Rn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Rn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Rn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":La(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ha.get(a)||a,La(t,a,o))}}function lf(t,s,a,o,f,h){switch(a){case"style":po(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof o=="string"?_r(t,o):(typeof o=="number"||typeof o=="bigint")&&_r(t,""+o);break;case"onScroll":o!=null&&Je("scroll",t);break;case"onScrollEnd":o!=null&&Je("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!na.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),h=t[Pt]||null,h=h!=null?h[a]:null,typeof h=="function"&&t.removeEventListener(s,h,f),typeof o=="function")){typeof h!="function"&&h!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,f);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):La(t,a,o)}}}function Nn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",t),Je("load",t);var o=!1,f=!1,h;for(h in a)if(a.hasOwnProperty(h)){var y=a[h];if(y!=null)switch(h){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:gt(t,s,h,y,a,null)}}f&&gt(t,s,"srcSet",a.srcSet,a,null),o&&gt(t,s,"src",a.src,a,null);return;case"input":Je("invalid",t);var E=h=y=f=null,z=null,te=null;for(o in a)if(a.hasOwnProperty(o)){var de=a[o];if(de!=null)switch(o){case"name":f=de;break;case"type":y=de;break;case"checked":z=de;break;case"defaultChecked":te=de;break;case"value":h=de;break;case"defaultValue":E=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,s));break;default:gt(t,s,o,de,a,null)}}Eu(t,h,E,z,te,y,f,!1);return;case"select":Je("invalid",t),o=y=h=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":h=E;break;case"defaultValue":y=E;break;case"multiple":o=E;default:gt(t,s,f,E,a,null)}s=h,a=y,t.multiple=!!o,s!=null?Us(t,!!o,s,!1):a!=null&&Us(t,!!o,a,!0);return;case"textarea":Je("invalid",t),h=f=o=null;for(y in a)if(a.hasOwnProperty(y)&&(E=a[y],E!=null))switch(y){case"value":o=E;break;case"defaultValue":f=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:gt(t,s,y,E,a,null)}Qi(t,o,f,h);return;case"option":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:gt(t,s,z,o,a,null)}return;case"dialog":Je("beforetoggle",t),Je("toggle",t),Je("cancel",t),Je("close",t);break;case"iframe":case"object":Je("load",t);break;case"video":case"audio":for(o=0;o<Cl.length;o++)Je(Cl[o],t);break;case"image":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"embed":case"source":case"link":Je("error",t),Je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in a)if(a.hasOwnProperty(te)&&(o=a[te],o!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:gt(t,s,te,o,a,null)}return;default:if(qa(s)){for(de in a)a.hasOwnProperty(de)&&(o=a[de],o!==void 0&&lf(t,s,de,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&gt(t,s,E,o,a,null))}function D1(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,y=null,E=null,z=null,te=null,de=null;for(oe in a){var pe=a[oe];if(a.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":z=pe;default:o.hasOwnProperty(oe)||gt(t,s,oe,null,o,pe)}}for(var se in o){var oe=o[se];if(pe=a[se],o.hasOwnProperty(se)&&(oe!=null||pe!=null))switch(se){case"type":h=oe;break;case"name":f=oe;break;case"checked":te=oe;break;case"defaultChecked":de=oe;break;case"value":y=oe;break;case"defaultValue":E=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:oe!==pe&&gt(t,s,se,oe,o,pe)}}ho(t,y,E,z,te,de,h,f);return;case"select":oe=y=E=se=null;for(h in a)if(z=a[h],a.hasOwnProperty(h)&&z!=null)switch(h){case"value":break;case"multiple":oe=z;default:o.hasOwnProperty(h)||gt(t,s,h,null,o,z)}for(f in o)if(h=o[f],z=a[f],o.hasOwnProperty(f)&&(h!=null||z!=null))switch(f){case"value":se=h;break;case"defaultValue":E=h;break;case"multiple":y=h;default:h!==z&&gt(t,s,f,h,o,z)}s=E,a=y,o=oe,se!=null?Us(t,!!a,se,!1):!!o!=!!a&&(s!=null?Us(t,!!a,s,!0):Us(t,!!a,a?[]:"",!1));return;case"textarea":oe=se=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:gt(t,s,E,null,o,f)}for(y in o)if(f=o[y],h=a[y],o.hasOwnProperty(y)&&(f!=null||h!=null))switch(y){case"value":se=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==h&&gt(t,s,y,f,o,h)}Pi(t,se,oe);return;case"option":for(var Ae in a)if(se=a[Ae],a.hasOwnProperty(Ae)&&se!=null&&!o.hasOwnProperty(Ae))switch(Ae){case"selected":t.selected=!1;break;default:gt(t,s,Ae,null,o,se)}for(z in o)if(se=o[z],oe=a[z],o.hasOwnProperty(z)&&se!==oe&&(se!=null||oe!=null))switch(z){case"selected":t.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:gt(t,s,z,se,o,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in a)se=a[qe],a.hasOwnProperty(qe)&&se!=null&&!o.hasOwnProperty(qe)&&gt(t,s,qe,null,o,se);for(te in o)if(se=o[te],oe=a[te],o.hasOwnProperty(te)&&se!==oe&&(se!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:gt(t,s,te,se,o,oe)}return;default:if(qa(s)){for(var xt in a)se=a[xt],a.hasOwnProperty(xt)&&se!==void 0&&!o.hasOwnProperty(xt)&&lf(t,s,xt,void 0,o,se);for(de in o)se=o[de],oe=a[de],!o.hasOwnProperty(de)||se===oe||se===void 0&&oe===void 0||lf(t,s,de,se,o,oe);return}}for(var V in a)se=a[V],a.hasOwnProperty(V)&&se!=null&&!o.hasOwnProperty(V)&&gt(t,s,V,null,o,se);for(pe in o)se=o[pe],oe=a[pe],!o.hasOwnProperty(pe)||se===oe||se==null&&oe==null||gt(t,s,pe,se,o,oe)}function cx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var f=a[o],h=f.transferSize,y=f.initiatorType,E=f.duration;if(h&&E&&cx(y)){for(y=0,E=f.responseEnd,o+=1;o<a.length;o++){var z=a[o],te=z.startTime;if(te>E)break;var de=z.transferSize,pe=z.initiatorType;de&&cx(pe)&&(z=z.responseEnd,y+=de*(z<E?1:(E-te)/(z-te)))}if(--o,s+=8*(h+y)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var of=null,cf=null;function cc(t){return t.nodeType===9?t:t.ownerDocument}function ux(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dx(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function uf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var df=null;function z1(){var t=window.event;return t&&t.type==="popstate"?t===df?!1:(df=t,!0):(df=null,!1)}var fx=typeof setTimeout=="function"?setTimeout:void 0,O1=typeof clearTimeout=="function"?clearTimeout:void 0,hx=typeof Promise=="function"?Promise:void 0,L1=typeof queueMicrotask=="function"?queueMicrotask:typeof hx<"u"?function(t){return hx.resolve(null).then(t).catch(U1)}:fx;function U1(t){setTimeout(function(){throw t})}function Vr(t){return t==="head"}function mx(t,s){var a=s,o=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(f),Si(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Tl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Tl(a);for(var h=a.firstChild;h;){var y=h.nextSibling,E=h.nodeName;h[jr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=y}}else a==="body"&&Tl(t.ownerDocument.body);a=f}while(a);Si(s)}function px(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function ff(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ff(a),Hi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function $1(t,s,a,o){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[jr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=ms(t.nextSibling),t===null)break}return null}function B1(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ms(t.nextSibling),t===null))return null;return t}function gx(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ms(t.nextSibling),t===null))return null;return t}function hf(t){return t.data==="$?"||t.data==="$~"}function mf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function q1(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ms(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var pf=null;function xx(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return ms(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function bx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function vx(t,s,a){switch(s=cc(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Tl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Hi(t)}var ps=new Map,yx=new Set;function uc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pr=G.d;G.d={f:H1,r:F1,D:Z1,C:V1,L:P1,m:Q1,X:W1,S:I1,M:G1};function H1(){var t=pr.f(),s=tc();return t||s}function F1(t){var s=Kt(t);s!==null&&s.tag===5&&s.type==="form"?Up(s):pr.r(t)}var yi=typeof document>"u"?null:document;function wx(t,s,a){var o=yi;if(o&&typeof s=="string"&&s){var f=$t(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),yx.has(f)||(yx.add(f),t={rel:t,crossOrigin:a,href:s},o.querySelector(f)===null&&(s=o.createElement("link"),Nn(s,"link",t),wt(s),o.head.appendChild(s)))}}function Z1(t){pr.D(t),wx("dns-prefetch",t,null)}function V1(t,s){pr.C(t,s),wx("preconnect",t,s)}function P1(t,s,a){pr.L(t,s,a);var o=yi;if(o&&t&&s){var f='link[rel="preload"][as="'+$t(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+$t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+$t(a.imageSizes)+'"]')):f+='[href="'+$t(t)+'"]';var h=f;switch(s){case"style":h=wi(t);break;case"script":h=ji(t)}ps.has(h)||(t=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),ps.set(h,t),o.querySelector(f)!==null||s==="style"&&o.querySelector(Al(h))||s==="script"&&o.querySelector(Rl(h))||(s=o.createElement("link"),Nn(s,"link",t),wt(s),o.head.appendChild(s)))}}function Q1(t,s){pr.m(t,s);var a=yi;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+$t(o)+'"][href="'+$t(t)+'"]',h=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ji(t)}if(!ps.has(h)&&(t=v({rel:"modulepreload",href:t},s),ps.set(h,t),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rl(h)))return}o=a.createElement("link"),Nn(o,"link",t),wt(o),a.head.appendChild(o)}}}function I1(t,s,a){pr.S(t,s,a);var o=yi;if(o&&t){var f=Er(o).hoistableStyles,h=wi(t);s=s||"default";var y=f.get(h);if(!y){var E={loading:0,preload:null};if(y=o.querySelector(Al(h)))E.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":s},a),(a=ps.get(h))&&gf(t,a);var z=y=o.createElement("link");wt(z),Nn(z,"link",t),z._p=new Promise(function(te,de){z.onload=te,z.onerror=de}),z.addEventListener("load",function(){E.loading|=1}),z.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dc(y,s,o)}y={type:"stylesheet",instance:y,count:1,state:E},f.set(h,y)}}}function W1(t,s){pr.X(t,s);var a=yi;if(a&&t){var o=Er(a).hoistableScripts,f=ji(t),h=o.get(f);h||(h=a.querySelector(Rl(f)),h||(t=v({src:t,async:!0},s),(s=ps.get(f))&&xf(t,s),h=a.createElement("script"),wt(h),Nn(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function G1(t,s){pr.M(t,s);var a=yi;if(a&&t){var o=Er(a).hoistableScripts,f=ji(t),h=o.get(f);h||(h=a.querySelector(Rl(f)),h||(t=v({src:t,async:!0,type:"module"},s),(s=ps.get(f))&&xf(t,s),h=a.createElement("script"),wt(h),Nn(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function jx(t,s,a,o){var f=(f=B.current)?uc(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=wi(a.href),a=Er(f).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=wi(a.href);var h=Er(f).hoistableStyles,y=h.get(t);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,y),(h=f.querySelector(Al(t)))&&!h._p&&(y.instance=h,y.state.loading=5),ps.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ps.set(t,a),h||K1(f,t,a,y.state))),s&&o===null)throw Error(i(528,""));return y}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ji(a),a=Er(f).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function wi(t){return'href="'+$t(t)+'"'}function Al(t){return'link[rel="stylesheet"]['+t+"]"}function Sx(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function K1(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),Nn(s,"link",a),wt(s),t.head.appendChild(s))}function ji(t){return'[src="'+$t(t)+'"]'}function Rl(t){return"script[async]"+t}function Ex(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+$t(a.href)+'"]');if(o)return s.instance=o,wt(o),o;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),wt(o),Nn(o,"style",f),dc(o,a.precedence,t),s.instance=o;case"stylesheet":f=wi(a.href);var h=t.querySelector(Al(f));if(h)return s.state.loading|=4,s.instance=h,wt(h),h;o=Sx(a),(f=ps.get(f))&&gf(o,f),h=(t.ownerDocument||t).createElement("link"),wt(h);var y=h;return y._p=new Promise(function(E,z){y.onload=E,y.onerror=z}),Nn(h,"link",o),s.state.loading|=4,dc(h,a.precedence,t),s.instance=h;case"script":return h=ji(a.src),(f=t.querySelector(Rl(h)))?(s.instance=f,wt(f),f):(o=a,(f=ps.get(h))&&(o=v({},a),xf(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),wt(f),Nn(f,"link",o),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,dc(o,a.precedence,t));return s.instance}function dc(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,h=f,y=0;y<o.length;y++){var E=o[y];if(E.dataset.precedence===s)h=E;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function gf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function xf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var fc=null;function Nx(t,s,a){if(fc===null){var o=new Map,f=fc=new Map;f.set(a,o)}else f=fc,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var h=a[f];if(!(h[jr]||h[Ct]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(s)||"";y=t+y;var E=o.get(y);E?E.push(h):o.set(y,[h])}}return o}function _x(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Y1(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Cx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function X1(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=wi(o.href),h=s.querySelector(Al(f));if(h){s=h._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=hc.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=h,wt(h);return}h=s.ownerDocument||s,o=Sx(o),(f=ps.get(f))&&gf(o,f),h=h.createElement("link"),wt(h);var y=h;y._p=new Promise(function(E,z){y.onload=E,y.onerror=z}),Nn(h,"link",o),a.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=hc.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var bf=0;function J1(t,s){return t.stylesheets&&t.count===0&&pc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&pc(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+s);0<t.imgBytes&&bf===0&&(bf=62500*M1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&pc(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>bf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mc=null;function pc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mc=new Map,s.forEach(ej,t),mc=null,hc.call(t))}function ej(t,s){if(!(s.state.loading&4)){var a=mc.get(t);if(a)var o=a.get(null);else{a=new Map,mc.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var y=f[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),o=y)}o&&a.set(null,o)}f=s.instance,y=f.getAttribute("data-precedence"),h=a.get(y)||o,h===o&&a.set(null,f),a.set(y,f),this.count++,o=hc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Dl={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function tj(t,s,a,o,f,h,y,E,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.hiddenUpdates=mn(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function kx(t,s,a,o,f,h,y,E,z,te,de,pe){return t=new tj(t,s,a,y,z,te,de,pe,E),s=1,h===!0&&(s|=24),h=Jn(3,null,null,s),t.current=h,h.stateNode=t,s=Ku(),s.refCount++,t.pooledCache=s,s.refCount++,h.memoizedState={element:o,isDehydrated:a,cache:s},ed(h),t}function Tx(t){return t?(t=Ja,t):Ja}function Ax(t,s,a,o,f,h){f=Tx(f),o.context===null?o.context=f:o.pendingContext=f,o=Mr(s),o.payload={element:a},h=h===void 0?null:h,h!==null&&(o.callback=h),a=zr(t,o,s),a!==null&&(Qn(a,t,s),ul(a,t,s))}function Rx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function vf(t,s){Rx(t,s),(t=t.alternate)&&Rx(t,s)}function Dx(t){if(t.tag===13||t.tag===31){var s=ca(t,67108864);s!==null&&Qn(s,t,67108864),vf(t,67108864)}}function Mx(t){if(t.tag===13||t.tag===31){var s=rs();s=Kn(s);var a=ca(t,s);a!==null&&Qn(a,t,s),vf(t,s)}}var gc=!0;function nj(t,s,a,o){var f=M.T;M.T=null;var h=G.p;try{G.p=2,yf(t,s,a,o)}finally{G.p=h,M.T=f}}function sj(t,s,a,o){var f=M.T;M.T=null;var h=G.p;try{G.p=8,yf(t,s,a,o)}finally{G.p=h,M.T=f}}function yf(t,s,a,o){if(gc){var f=wf(o);if(f===null)af(t,s,o,xc,a),Ox(t,o);else if(aj(f,t,s,a,o))o.stopPropagation();else if(Ox(t,o),s&4&&-1<rj.indexOf(t)){for(;f!==null;){var h=Kt(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=yt(h.pendingLanes);if(y!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var z=1<<31-_t(y);E.entanglements[1]|=z,y&=~z}Qs(h),(lt&6)===0&&(Jo=ye()+500,_l(0))}}break;case 31:case 13:E=ca(h,2),E!==null&&Qn(E,h,2),tc(),vf(h,2)}if(h=wf(o),h===null&&af(t,s,o,xc,a),h===f)break;f=h}f!==null&&o.stopPropagation()}else af(t,s,o,null,a)}}function wf(t){return t=$s(t),jf(t)}var xc=null;function jf(t){if(xc=null,t=Sr(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=m(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return xc=t,null}function zx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case De:return 2;case Qe:return 8;case We:case Nt:return 32;case Se:return 268435456;default:return 32}default:return 32}}var Sf=!1,Pr=null,Qr=null,Ir=null,Ml=new Map,zl=new Map,Wr=[],rj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ox(t,s){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Ml.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(s.pointerId)}}function Ol(t,s,a,o,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:h,targetContainers:[f]},s!==null&&(s=Kt(s),s!==null&&Dx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function aj(t,s,a,o,f){switch(s){case"focusin":return Pr=Ol(Pr,t,s,a,o,f),!0;case"dragenter":return Qr=Ol(Qr,t,s,a,o,f),!0;case"mouseover":return Ir=Ol(Ir,t,s,a,o,f),!0;case"pointerover":var h=f.pointerId;return Ml.set(h,Ol(Ml.get(h)||null,t,s,a,o,f)),!0;case"gotpointercapture":return h=f.pointerId,zl.set(h,Ol(zl.get(h)||null,t,s,a,o,f)),!0}return!1}function Lx(t){var s=Sr(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,Ot(t.priority,function(){Mx(a)});return}}else if(s===31){if(s=m(a),s!==null){t.blockedOn=s,Ot(t.priority,function(){Mx(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=wf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Cr=o,a.target.dispatchEvent(o),Cr=null}else return s=Kt(a),s!==null&&Dx(s),t.blockedOn=a,!1;s.shift()}return!0}function Ux(t,s,a){bc(t)&&a.delete(s)}function ij(){Sf=!1,Pr!==null&&bc(Pr)&&(Pr=null),Qr!==null&&bc(Qr)&&(Qr=null),Ir!==null&&bc(Ir)&&(Ir=null),Ml.forEach(Ux),zl.forEach(Ux)}function vc(t,s){t.blockedOn===s&&(t.blockedOn=null,Sf||(Sf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ij)))}var yc=null;function $x(t){yc!==t&&(yc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){yc===t&&(yc=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],f=t[s+2];if(typeof o!="function"){if(jf(o||a)===null)continue;break}var h=Kt(a);h!==null&&(t.splice(s,3),s-=3,yd(h,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function Si(t){function s(z){return vc(z,t)}Pr!==null&&vc(Pr,t),Qr!==null&&vc(Qr,t),Ir!==null&&vc(Ir,t),Ml.forEach(s),zl.forEach(s);for(var a=0;a<Wr.length;a++){var o=Wr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Wr.length&&(a=Wr[0],a.blockedOn===null);)Lx(a),a.blockedOn===null&&Wr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],h=a[o+1],y=f[Pt]||null;if(typeof h=="function")y||$x(a);else if(y){var E=null;if(h&&h.hasAttribute("formAction")){if(f=h,y=h[Pt]||null)E=y.formAction;else if(jf(f)!==null)continue}else E=y.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),$x(a)}}}function Bx(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Ef(t){this._internalRoot=t}wc.prototype.render=Ef.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,o=rs();Ax(a,o,t,s,null,null)},wc.prototype.unmount=Ef.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ax(t.current,2,null,t,null,null),tc(),s[wr]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var s=An();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Wr.length&&s!==0&&s<Wr[a].priority;a++);Wr.splice(a,0,t),a===0&&Lx(t)}};var qx=n.version;if(qx!=="19.2.0")throw Error(i(527,qx,"19.2.0"));G.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var lj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Mt=jc.inject(lj),nt=jc}catch{}}return Ul.createRoot=function(t,s){if(!c(t))throw Error(i(299));var a=!1,o="",f=Ip,h=Wp,y=Gp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=kx(t,1,!1,null,null,a,o,null,f,h,y,Bx),t[wr]=s.current,rf(t),new Ef(s)},Ul.hydrateRoot=function(t,s,a){if(!c(t))throw Error(i(299));var o=!1,f="",h=Ip,y=Wp,E=Gp,z=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(z=a.formState)),s=kx(t,1,!0,s,a??null,o,f,z,h,y,E,Bx),s.context=Tx(null),a=s.current,o=rs(),o=Kn(o),f=Mr(o),f.callback=null,zr(a,f,o),a=o,s.current.lanes=a,Ln(s,a),Qs(s),t[wr]=s.current,rf(t),new wc(s)},Ul.version="19.2.0",Ul}var Kx;function gj(){if(Kx)return Cf.exports;Kx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Cf.exports=pj(),Cf.exports}var xj=gj();const bj=Vb(xj),Xc=p.createContext(null);function vj({children:e}){const[n,r]=p.useState(()=>({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash})),i=p.useRef(new Set),c=p.useRef(n);p.useEffect(()=>{c.current=n},[n]);const u=p.useCallback(g=>{for(const b of i.current)if(b(g)===!1)return!1;return!0},[]);p.useEffect(()=>{const g=()=>{const b={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},v=`${b.pathname}${b.search}${b.hash}`;if(!u({kind:"pop",to:v,location:b})){const S=c.current;window.history.pushState(null,"",`${S.pathname}${S.search}${S.hash}`);return}r(b)};return window.addEventListener("popstate",g),()=>window.removeEventListener("popstate",g)},[u]);const d=p.useCallback(g=>(i.current.add(g),()=>{i.current.delete(g)}),[]),m=p.useCallback((g,b)=>{const v=new URL(g,window.location.origin),w={pathname:v.pathname,search:v.search,hash:v.hash},S=`${w.pathname}${w.search}${w.hash}`,N=b?.replace?"replace":"push";u({kind:N,to:S,location:w})&&(b?.replace?window.history.replaceState(null,"",S):window.history.pushState(null,"",S),window.dispatchEvent(new PopStateEvent("popstate")))},[u]),x=p.useMemo(()=>({location:n,navigate:m,registerBlocker:d}),[n,m,d]);return l.jsx(Xc.Provider,{value:x,children:e})}function Hn(){const e=p.useContext(Xc);if(!e)throw new Error("useLocation must be used within NavProvider");return e.location}function Vt(){const e=p.useContext(Xc);if(!e)throw new Error("useNavigate must be used within NavProvider");return e.navigate}function Qb(e,n=!0){const r=p.useContext(Xc);if(!r)throw new Error("useNavigationBlocker must be used within NavProvider");p.useEffect(()=>{if(n)return r.registerBlocker(e)},[e,r,n])}var zi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yj={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},wj=class{#e=yj;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},Ea=new wj;function jj(e){setTimeout(e,0)}var ka=typeof window>"u"||"Deno"in globalThis;function qn(){}function Sj(e,n){return typeof e=="function"?e(n):e}function Wf(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ib(e,n){return Math.max(e+(n||0)-Date.now(),0)}function Xr(e,n){return typeof e=="function"?e(n):e}function gs(e,n){return typeof e=="function"?e(n):e}function Yx(e,n){const{type:r="all",exact:i,fetchStatus:c,predicate:u,queryKey:d,stale:m}=e;if(d){if(i){if(n.queryHash!==jh(d,n.options))return!1}else if(!Ql(n.queryKey,d))return!1}if(r!=="all"){const x=n.isActive();if(r==="active"&&!x||r==="inactive"&&x)return!1}return!(typeof m=="boolean"&&n.isStale()!==m||c&&c!==n.state.fetchStatus||u&&!u(n))}function Xx(e,n){const{exact:r,status:i,predicate:c,mutationKey:u}=e;if(u){if(!n.options.mutationKey)return!1;if(r){if(Ta(n.options.mutationKey)!==Ta(u))return!1}else if(!Ql(n.options.mutationKey,u))return!1}return!(i&&n.state.status!==i||c&&!c(n))}function jh(e,n){return(n?.queryKeyHashFn||Ta)(e)}function Ta(e){return JSON.stringify(e,(n,r)=>Gf(r)?Object.keys(r).sort().reduce((i,c)=>(i[c]=r[c],i),{}):r)}function Ql(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(r=>Ql(e[r],n[r])):!1}var Ej=Object.prototype.hasOwnProperty;function Wb(e,n){if(e===n)return e;const r=Jx(e)&&Jx(n);if(!r&&!(Gf(e)&&Gf(n)))return n;const c=(r?e:Object.keys(e)).length,u=r?n:Object.keys(n),d=u.length,m=r?new Array(d):{};let x=0;for(let g=0;g<d;g++){const b=r?g:u[g],v=e[b],w=n[b];if(v===w){m[b]=v,(r?g<c:Ej.call(e,b))&&x++;continue}if(v===null||w===null||typeof v!="object"||typeof w!="object"){m[b]=w;continue}const S=Wb(v,w);m[b]=S,S===v&&x++}return c===d&&x===c?e:m}function Lc(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}function Jx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gf(e){if(!e0(e))return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(!e0(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function e0(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nj(e){return new Promise(n=>{Ea.setTimeout(n,e)})}function Kf(e,n,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,n):r.structuralSharing!==!1?Wb(e,n):n}function _j(e,n,r=0){const i=[...e,n];return r&&i.length>r?i.slice(1):i}function Cj(e,n,r=0){const i=[n,...e];return r&&i.length>r?i.slice(0,-1):i}var Sh=Symbol();function Gb(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===Sh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Kb(e,n){return typeof e=="function"?e(...n):!!e}var kj=class extends zi{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!ka&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Eh=new kj;function Yf(){let e,n;const r=new Promise((c,u)=>{e=c,n=u});r.status="pending",r.catch(()=>{});function i(c){Object.assign(r,c),delete r.resolve,delete r.reject}return r.resolve=c=>{i({status:"fulfilled",value:c}),e(c)},r.reject=c=>{i({status:"rejected",reason:c}),n(c)},r}var Tj=jj;function Aj(){let e=[],n=0,r=m=>{m()},i=m=>{m()},c=Tj;const u=m=>{n?e.push(m):c(()=>{r(m)})},d=()=>{const m=e;e=[],m.length&&c(()=>{i(()=>{m.forEach(x=>{r(x)})})})};return{batch:m=>{let x;n++;try{x=m()}finally{n--,n||d()}return x},batchCalls:m=>(...x)=>{u(()=>{m(...x)})},schedule:u,setNotifyFunction:m=>{r=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{c=m}}}var un=Aj(),Rj=class extends zi{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!ka&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Uc=new Rj;function Dj(e){return Math.min(1e3*2**e,3e4)}function Yb(e){return(e??"online")==="online"?Uc.isOnline():!0}var Xf=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Xb(e){let n=!1,r=0,i;const c=Yf(),u=()=>c.status!=="pending",d=j=>{if(!u()){const C=new Xf(j);w(C),e.onCancel?.(C)}},m=()=>{n=!0},x=()=>{n=!1},g=()=>Eh.isFocused()&&(e.networkMode==="always"||Uc.isOnline())&&e.canRun(),b=()=>Yb(e.networkMode)&&e.canRun(),v=j=>{u()||(i?.(),c.resolve(j))},w=j=>{u()||(i?.(),c.reject(j))},S=()=>new Promise(j=>{i=C=>{(u()||g())&&j(C)},e.onPause?.()}).then(()=>{i=void 0,u()||e.onContinue?.()}),N=()=>{if(u())return;let j;const C=r===0?e.initialPromise:void 0;try{j=C??e.fn()}catch(k){j=Promise.reject(k)}Promise.resolve(j).then(v).catch(k=>{if(u())return;const _=e.retry??(ka?0:3),A=e.retryDelay??Dj,L=typeof A=="function"?A(r,k):A,O=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,k);if(n||!O){w(k);return}r++,e.onFail?.(r,k),Nj(L).then(()=>g()?void 0:S()).then(()=>{n?w(k):N()})})};return{promise:c,status:()=>c.status,cancel:d,continue:()=>(i?.(),c),cancelRetry:m,continueRetry:x,canStart:b,start:()=>(b()?N():S().then(N),c)}}var Jb=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wf(this.gcTime)&&(this.#e=Ea.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ka?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ea.clearTimeout(this.#e),this.#e=void 0)}},Mj=class extends Jb{#e;#t;#n;#r;#s;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=t0(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=t0(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const r=Kf(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.#a({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(qn).catch(qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>gs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Xr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ib(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#l=!0,r.signal)})},c=()=>{const m=Gb(this.options,n),g=(()=>{const b={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(b),b})();return this.#l=!1,this.options.persister?this.options.persister(m,g,this):m(g)},d=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:c};return i(m),m})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=Xb({initialPromise:n?.initialPromise,fn:d.fetchFn,onCancel:m=>{m instanceof Xf&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(m,x)=>{this.#a({type:"failed",failureCount:m,error:x})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const m=await this.#s.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#n.config.onSuccess?.(m,this),this.#n.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof Xf){if(m.silent)return this.#s.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#a({type:"error",error:m}),this.#n.config.onError?.(m,this),this.#n.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#a(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ev(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const c=e.error;return{...r,error:c,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),un.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function ev(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yb(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function t0(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,r=n!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var tv=class extends zi{constructor(e,n){super(),this.options=n,this.#e=e,this.#a=null,this.#l=Yf(),this.bindMethods(),this.setOptions(n)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#i;#l;#a;#p;#f;#h;#c;#u;#o;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),n0(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),n._defaulted&&!Lc(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&s0(this.#t,r,this.options,n)&&this.#d(),this.updateResult(),i&&(this.#t!==r||gs(this.options.enabled,this.#t)!==gs(n.enabled,this.#t)||Xr(this.options.staleTime,this.#t)!==Xr(n.staleTime,this.#t))&&this.#g();const c=this.#x();i&&(this.#t!==r||gs(this.options.enabled,this.#t)!==gs(n.enabled,this.#t)||c!==this.#o)&&this.#b(c)}getOptimisticResult(e){const n=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(n,e);return Oj(this,r)&&(this.#r=r,this.#i=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#j();let n=this.#t.fetch(this.options,e);return e?.throwOnError||(n=n.catch(qn)),n}#g(){this.#y();const e=Xr(this.options.staleTime,this.#t);if(ka||this.#r.isStale||!Wf(e))return;const r=Ib(this.#r.dataUpdatedAt,e)+1;this.#c=Ea.setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#o=e,!(ka||gs(this.options.enabled,this.#t)===!1||!Wf(this.#o)||this.#o===0)&&(this.#u=Ea.setInterval(()=>{(this.options.refetchIntervalInBackground||Eh.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#b(this.#x())}#y(){this.#c&&(Ea.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Ea.clearInterval(this.#u),this.#u=void 0)}createResult(e,n){const r=this.#t,i=this.options,c=this.#r,u=this.#s,d=this.#i,x=e!==r?e.state:this.#n,{state:g}=e;let b={...g},v=!1,w;if(n._optimisticResults){const ne=this.hasListeners(),R=!ne&&n0(e,n),H=ne&&s0(e,r,n,i);(R||H)&&(b={...b,...ev(g.data,e.options)}),n._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:S,errorUpdatedAt:N,status:j}=b;w=b.data;let C=!1;if(n.placeholderData!==void 0&&w===void 0&&j==="pending"){let ne;c?.isPlaceholderData&&n.placeholderData===d?.placeholderData?(ne=c.data,C=!0):ne=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,ne!==void 0&&(j="success",w=Kf(c?.data,ne,n),v=!0)}if(n.select&&w!==void 0&&!C)if(c&&w===u?.data&&n.select===this.#p)w=this.#f;else try{this.#p=n.select,w=n.select(w),w=Kf(c?.data,w,n),this.#f=w,this.#a=null}catch(ne){this.#a=ne}this.#a&&(S=this.#a,w=this.#f,N=Date.now(),j="error");const k=b.fetchStatus==="fetching",_=j==="pending",A=j==="error",L=_&&k,O=w!==void 0,U={status:j,fetchStatus:b.fetchStatus,isPending:_,isSuccess:j==="success",isError:A,isInitialLoading:L,isLoading:L,data:w,dataUpdatedAt:b.dataUpdatedAt,error:S,errorUpdatedAt:N,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>x.dataUpdateCount||b.errorUpdateCount>x.errorUpdateCount,isFetching:k,isRefetching:k&&!_,isLoadingError:A&&!O,isPaused:b.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:A&&O,isStale:Nh(e,n),refetch:this.refetch,promise:this.#l,isEnabled:gs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const ne=ae=>{U.status==="error"?ae.reject(U.error):U.data!==void 0&&ae.resolve(U.data)},R=()=>{const ae=this.#l=U.promise=Yf();ne(ae)},H=this.#l;switch(H.status){case"pending":e.queryHash===r.queryHash&&ne(H);break;case"fulfilled":(U.status==="error"||U.data!==H.value)&&R();break;case"rejected":(U.status!=="error"||U.error!==H.reason)&&R();break}}return U}updateResult(){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Lc(n,e))return;this.#r=n;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,c=typeof i=="function"?i():i;if(c==="all"||!c&&!this.#m.size)return!0;const u=new Set(c??this.#m);return this.options.throwOnError&&u.add("error"),Object.keys(this.#r).some(d=>{const m=d;return this.#r[m]!==e[m]&&u.has(m)})};this.#S({listeners:r()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const n=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){un.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function zj(e,n){return gs(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function n0(e,n){return zj(e,n)||e.state.data!==void 0&&Jf(e,n,n.refetchOnMount)}function Jf(e,n,r){if(gs(n.enabled,e)!==!1&&Xr(n.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Nh(e,n)}return!1}function s0(e,n,r,i){return(e!==n||gs(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Nh(e,r)}function Nh(e,n){return gs(n.enabled,e)!==!1&&e.isStaleByTime(Xr(n.staleTime,e))}function Oj(e,n){return!Lc(e.getCurrentResult(),n)}function $c(e){return{onFetch:(n,r)=>{const i=n.options,c=n.fetchOptions?.meta?.fetchMore?.direction,u=n.state.data?.pages||[],d=n.state.data?.pageParams||[];let m={pages:[],pageParams:[]},x=0;const g=async()=>{let b=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(n.signal.aborted?b=!0:n.signal.addEventListener("abort",()=>{b=!0}),n.signal)})},w=Gb(n.options,n.fetchOptions),S=async(N,j,C)=>{if(b)return Promise.reject();if(j==null&&N.pages.length)return Promise.resolve(N);const _=(()=>{const J={client:n.client,queryKey:n.queryKey,pageParam:j,direction:C?"backward":"forward",meta:n.options.meta};return v(J),J})(),A=await w(_),{maxPages:L}=n.options,O=C?Cj:_j;return{pages:O(N.pages,A,L),pageParams:O(N.pageParams,j,L)}};if(c&&u.length){const N=c==="backward",j=N?nv:eh,C={pages:u,pageParams:d},k=j(i,C);m=await S(C,k,N)}else{const N=e??u.length;do{const j=x===0?d[0]??i.initialPageParam:eh(i,m);if(x>0&&j==null)break;m=await S(m,j),x++}while(x<N)}return m};n.options.persister?n.fetchFn=()=>n.options.persister?.(g,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},r):n.fetchFn=g}}}function eh(e,{pages:n,pageParams:r}){const i=n.length-1;return n.length>0?e.getNextPageParam(n[i],n,r[i],r):void 0}function nv(e,{pages:n,pageParams:r}){return n.length>0?e.getPreviousPageParam?.(n[0],n,r[0],r):void 0}function Lj(e,n){return n?eh(e,n)!=null:!1}function Uj(e,n){return!n||!e.getPreviousPageParam?!1:nv(e,n)!=null}var $j=class extends tv{constructor(e,n){super(e,n)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:$c()})}getOptimisticResult(e){return e.behavior=$c(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,n){const{state:r}=e,i=super.createResult(e,n),{isFetching:c,isRefetching:u,isError:d,isRefetchError:m}=i,x=r.fetchMeta?.fetchMore?.direction,g=d&&x==="forward",b=c&&x==="forward",v=d&&x==="backward",w=c&&x==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Lj(n,r.data),hasPreviousPage:Uj(n,r.data),isFetchNextPageError:g,isFetchingNextPage:b,isFetchPreviousPageError:v,isFetchingPreviousPage:w,isRefetchError:m&&!g&&!v,isRefetching:u&&!b&&!w}}},Bj=class extends Jb{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||sv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Xb({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",c=!this.#r.canStart();try{if(i)n();else{this.#s({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,r);const d=await this.options.onMutate?.(e,r);d!==this.state.context&&this.#s({type:"pending",context:d,variables:e,isPaused:c})}const u=await this.#r.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,r),await this.options.onSuccess?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(u,null,e,this.state.context,r),this.#s({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,r),await this.options.onError?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,u,e,this.state.context,r),u}finally{this.#s({type:"error",error:u})}}finally{this.#n.runNext(this)}}#s(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),un.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function sv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qj=class extends zi{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,r){const i=new Bj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){this.#e.add(e);const n=Sc(e);if(typeof n=="string"){const r=this.#t.get(n);r?r.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=Sc(e);if(typeof n=="string"){const r=this.#t.get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Sc(e);if(typeof n=="string"){const i=this.#t.get(n)?.find(c=>c.state.status==="pending");return!i||i===e}else return!0}runNext(e){const n=Sc(e);return typeof n=="string"?this.#t.get(n)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){un.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Xx(n,r))}findAll(e={}){return this.getAll().filter(n=>Xx(e,n))}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(e.map(n=>n.continue().catch(qn))))}};function Sc(e){return e.options.scope?.id}var Hj=class extends zi{#e;#t=void 0;#n;#r;constructor(n,r){super(),this.#e=n,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const r=this.options;this.options=this.#e.defaultMutationOptions(n),Lc(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ta(r.mutationKey)!==Ta(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??sv();this.#t={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){un.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,i=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};n?.type==="success"?(this.#r.onSuccess?.(n.data,r,i,c),this.#r.onSettled?.(n.data,null,r,i,c)):n?.type==="error"&&(this.#r.onError?.(n.error,r,i,c),this.#r.onSettled?.(void 0,n.error,r,i,c))}this.listeners.forEach(r=>{r(this.#t)})})}},Fj=class extends zi{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,r){const i=n.queryKey,c=n.queryHash??jh(i,n);let u=this.get(c);return u||(u=new Mj({client:e,queryKey:i,queryHash:c,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Yx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Yx(e,r)):n}notify(e){un.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zj=class{#e;#t;#n;#r;#s;#i;#l;#a;constructor(e={}){this.#e=e.queryCache||new Fj,this.#t=e.mutationCache||new qj,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=Eh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Uc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),r=this.#e.build(this,n),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Xr(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.defaultQueryOptions({queryKey:e}),u=this.#e.get(i.queryHash)?.state.data,d=Sj(n,u);if(d!==void 0)return this.#e.build(this,i).setData(d,{...r,manual:!0})}setQueriesData(e,n,r){return un.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;un.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=this.#e;return un.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const r={revert:!0,...n},i=un.batch(()=>this.#e.findAll(e).map(c=>c.cancel(r)));return Promise.all(i).then(qn).catch(qn)}invalidateQueries(e,n={}){return un.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},i=un.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let u=c.fetch(void 0,r);return r.throwOnError||(u=u.catch(qn)),c.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(qn)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(Xr(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(qn).catch(qn)}fetchInfiniteQuery(e){return e.behavior=$c(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(qn).catch(qn)}ensureInfiniteQueryData(e){return e.behavior=$c(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Uc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(Ta(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()],r={};return n.forEach(i=>{Ql(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,n){this.#s.set(Ta(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],r={};return n.forEach(i=>{Ql(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=jh(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Sh&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},rv=p.createContext(void 0),dt=e=>{const n=p.useContext(rv);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},Vj=({client:e,children:n})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(rv.Provider,{value:e,children:n})),av=p.createContext(!1),Pj=()=>p.useContext(av);av.Provider;function Qj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ij=p.createContext(Qj()),Wj=()=>p.useContext(Ij),Gj=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},Kj=e=>{p.useEffect(()=>{e.clearReset()},[e])},Yj=({result:e,errorResetBoundary:n,throwOnError:r,query:i,suspense:c})=>e.isError&&!n.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||Kb(r,[e.error,i])),Xj=e=>{if(e.suspense){const r=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>r(i(...c)):r(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Jj=(e,n)=>e.isLoading&&e.isFetching&&!n,eS=(e,n)=>e?.suspense&&n.isPending,r0=(e,n,r)=>n.fetchOptimistic(e).catch(()=>{r.clearReset()});function iv(e,n,r){const i=Pj(),c=Wj(),u=dt(),d=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=i?"isRestoring":"optimistic",Xj(d),Gj(d,c),Kj(c);const m=!u.getQueryCache().get(d.queryHash),[x]=p.useState(()=>new n(u,d)),g=x.getOptimisticResult(d),b=!i&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(v=>{const w=b?x.subscribe(un.batchCalls(v)):qn;return x.updateResult(),w},[x,b]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),p.useEffect(()=>{x.setOptions(d)},[d,x]),eS(d,g))throw r0(d,x,c);if(Yj({result:g,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw g.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(d,g),d.experimental_prefetchInRender&&!ka&&Jj(g,i)&&(m?r0(d,x,c):u.getQueryCache().get(d.queryHash)?.promise)?.catch(qn).finally(()=>{x.updateResult()}),d.notifyOnChangeProps?g:x.trackResult(g)}function _n(e,n){return iv(e,tv)}function sn(e,n){const r=dt(),[i]=p.useState(()=>new Hj(r,e));p.useEffect(()=>{i.setOptions(e)},[i,e]);const c=p.useSyncExternalStore(p.useCallback(d=>i.subscribe(un.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=p.useCallback((d,m)=>{i.mutate(d,m).catch(qn)},[i]);if(c.error&&Kb(i.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}function _h(e,n){return iv(e,$j)}const tS="modulepreload",nS=function(e){return"/"+e},a0={},sS=function(n,r,i){let c=Promise.resolve();if(r&&r.length>0){let x=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");c=x(r.map(g=>{if(g=nS(g),g in a0)return;a0[g]=!0;const b=g.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":tS,b||(w.as="script"),w.crossOrigin="",w.href=g,m&&w.setAttribute("nonce",m),document.head.appendChild(w),b)return new Promise((S,N)=>{w.addEventListener("load",S),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return c.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return n().catch(u)})};function rS({children:e}){const[n]=p.useState(()=>new Zj({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}}));return l.jsxs(Vj,{client:n,children:[e,null]})}const aS=["ade_csrf","backend_app_csrf"];function iS(){return aS}function lS(){if(typeof document>"u")return null;const e=document.cookie;if(!e)return null;const n=new Map,r=e.split(";");for(const i of r){const[c,...u]=i.trim().split("=");c&&n.set(c,decodeURIComponent(u.join("=")))}return n}function Ch(){const e=lS();if(!e)return null;for(const n of iS()){const r=e.get(n);if(r)return r}return null}const lv="/api/v1",oS=new Set(["GET","HEAD","OPTIONS"]);class On extends Error{status;problem;constructor(n,r,i){super(n),this.name="ApiError",this.status=r,this.problem=i}}class cS{baseUrl;constructor(n=lv){this.baseUrl=n.endsWith("/")?n.slice(0,-1):n}async request(n,r={}){const{parseJson:i=!0,returnRawResponse:c=!1,headers:u,body:d,method:m,credentials:x,...g}=r,b=(m??"GET").toUpperCase(),v=this.composeUrl(n),w=new Headers({Accept:i&&!c?"application/json":"*/*"});if(this.copyHeaders(w,u),d&&!(d instanceof FormData)&&!w.has("Content-Type")&&w.set("Content-Type","application/json"),!oS.has(b)&&!w.has("X-CSRF-Token")){const j=Ch();j&&w.set("X-CSRF-Token",j)}const S=await fetch(v,{...g,method:b,headers:w,body:d,credentials:x??"include"});if(!S.ok){const j=await this.tryParseProblem(S),C=j?.title??`Request failed with status ${S.status}`;throw new On(C,S.status,j)}if(c)return S;if(!i||S.status===204)return;const N=await S.text();return N?JSON.parse(N):void 0}composeUrl(n){if(!n.startsWith("/"))throw new Error("API paths must include a leading slash.");return this.baseUrl?`${this.baseUrl}${n}`:n}copyHeaders(n,r){if(r){if(r instanceof Headers){r.forEach((i,c)=>n.set(c,i));return}if(Array.isArray(r)){r.forEach(([i,c])=>n.set(i,c));return}Object.entries(r).forEach(([i,c])=>{typeof c>"u"||n.set(i,Array.isArray(c)?c.join(", "):c)})}}async tryParseProblem(n){if((n.headers.get("content-type")??"").includes("application/json"))try{return await n.json()}catch(i){const c=i instanceof Error?i:new Error(String(i));console.warn("Failed to parse problem details",c);return}}}new cS(lv);const uS=/\{[^{}]+\}/g,dS=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function fS(){return Math.random().toString(36).slice(2,11)}function hS(e){let{baseUrl:n="",Request:r=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:c,bodySerializer:u,headers:d,requestInitExt:m=void 0,...x}={...e};m=dS()?m:void 0,n=o0(n);const g=[];async function b(v,w){const{baseUrl:S,fetch:N=i,Request:j=r,headers:C,params:k={},parseAs:_="json",querySerializer:A,bodySerializer:L=u??pS,body:O,middleware:J=[],...U}=w||{};let ne=n;S&&(ne=o0(S)??n);let R=typeof c=="function"?c:i0(c);A&&(R=typeof A=="function"?A:i0({...typeof c=="object"?c:{},...A}));const H=O===void 0?void 0:L(O,l0(d,C,k.header)),ae=l0(H===void 0||H instanceof FormData?{}:{"Content-Type":"application/json"},d,C,k.header),I=[...g,...J],F={redirect:"follow",...x,...U,body:H,headers:ae};let ue,xe,M=new j(gS(v,{baseUrl:ne,params:k,querySerializer:R}),F),G;for(const we in U)we in M||(M[we]=U[we]);if(I.length){ue=fS(),xe=Object.freeze({baseUrl:ne,fetch:N,parseAs:_,querySerializer:R,bodySerializer:L});for(const we of I)if(we&&typeof we=="object"&&typeof we.onRequest=="function"){const ie=await we.onRequest({request:M,schemaPath:v,params:k,options:xe,id:ue});if(ie)if(ie instanceof j)M=ie;else if(ie instanceof Response){G=ie;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!G){try{G=await N(M,m)}catch(we){let ie=we;if(I.length)for(let T=I.length-1;T>=0;T--){const W=I[T];if(W&&typeof W=="object"&&typeof W.onError=="function"){const le=await W.onError({request:M,error:ie,schemaPath:v,params:k,options:xe,id:ue});if(le){if(le instanceof Response){ie=void 0,G=le;break}if(le instanceof Error){ie=le;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(ie)throw ie}if(I.length)for(let we=I.length-1;we>=0;we--){const ie=I[we];if(ie&&typeof ie=="object"&&typeof ie.onResponse=="function"){const T=await ie.onResponse({request:M,response:G,schemaPath:v,params:k,options:xe,id:ue});if(T){if(!(T instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");G=T}}}}if(G.status===204||M.method==="HEAD"||G.headers.get("Content-Length")==="0")return G.ok?{data:void 0,response:G}:{error:void 0,response:G};if(G.ok)return _==="stream"?{data:G.body,response:G}:{data:await G[_](),response:G};let Y=await G.text();try{Y=JSON.parse(Y)}catch{}return{error:Y,response:G}}return{request(v,w,S){return b(w,{...S,method:v.toUpperCase()})},GET(v,w){return b(v,{...w,method:"GET"})},PUT(v,w){return b(v,{...w,method:"PUT"})},POST(v,w){return b(v,{...w,method:"POST"})},DELETE(v,w){return b(v,{...w,method:"DELETE"})},OPTIONS(v,w){return b(v,{...w,method:"OPTIONS"})},HEAD(v,w){return b(v,{...w,method:"HEAD"})},PATCH(v,w){return b(v,{...w,method:"PATCH"})},TRACE(v,w){return b(v,{...w,method:"TRACE"})},use(...v){for(const w of v)if(w){if(typeof w!="object"||!("onRequest"in w||"onResponse"in w||"onError"in w))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");g.push(w)}},eject(...v){for(const w of v){const S=g.indexOf(w);S!==-1&&g.splice(S,1)}}}}function Jc(e,n,r){if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${r?.allowReserved===!0?n:encodeURIComponent(n)}`}function ov(e,n,r){if(!n||typeof n!="object")return"";const i=[],c={simple:",",label:".",matrix:";"}[r.style]||"&";if(r.style!=="deepObject"&&r.explode===!1){for(const m in n)i.push(m,r.allowReserved===!0?n[m]:encodeURIComponent(n[m]));const d=i.join(",");switch(r.style){case"form":return`${e}=${d}`;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return d}}for(const d in n){const m=r.style==="deepObject"?`${e}[${d}]`:d;i.push(Jc(m,n[d],r))}const u=i.join(c);return r.style==="label"||r.style==="matrix"?`${c}${u}`:u}function cv(e,n,r){if(!Array.isArray(n))return"";if(r.explode===!1){const u={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",d=(r.allowReserved===!0?n:n.map(m=>encodeURIComponent(m))).join(u);switch(r.style){case"simple":return d;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return`${e}=${d}`}}const i={simple:",",label:".",matrix:";"}[r.style]||"&",c=[];for(const u of n)r.style==="simple"||r.style==="label"?c.push(r.allowReserved===!0?u:encodeURIComponent(u)):c.push(Jc(e,u,r));return r.style==="label"||r.style==="matrix"?`${i}${c.join(i)}`:c.join(i)}function i0(e){return function(r){const i=[];if(r&&typeof r=="object")for(const c in r){const u=r[c];if(u!=null){if(Array.isArray(u)){if(u.length===0)continue;i.push(cv(c,u,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof u=="object"){i.push(ov(c,u,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}i.push(Jc(c,u,e))}}return i.join("&")}}function mS(e,n){let r=e;for(const i of e.match(uS)??[]){let c=i.substring(1,i.length-1),u=!1,d="simple";if(c.endsWith("*")&&(u=!0,c=c.substring(0,c.length-1)),c.startsWith(".")?(d="label",c=c.substring(1)):c.startsWith(";")&&(d="matrix",c=c.substring(1)),!n||n[c]===void 0||n[c]===null)continue;const m=n[c];if(Array.isArray(m)){r=r.replace(i,cv(c,m,{style:d,explode:u}));continue}if(typeof m=="object"){r=r.replace(i,ov(c,m,{style:d,explode:u}));continue}if(d==="matrix"){r=r.replace(i,`;${Jc(c,m)}`);continue}r=r.replace(i,d==="label"?`.${encodeURIComponent(m)}`:encodeURIComponent(m))}return r}function pS(e,n){return e instanceof FormData?e:n&&(n.get instanceof Function?n.get("Content-Type")??n.get("content-type"):n["Content-Type"]??n["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function gS(e,n){let r=`${n.baseUrl}${e}`;n.params?.path&&(r=mS(r,n.params.path));let i=n.querySerializer(n.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(r+=`?${i}`),r}function l0(...e){const n=new Headers;for(const r of e){if(!r||typeof r!="object")continue;const i=r instanceof Headers?r.entries():Object.entries(r);for(const[c,u]of i)if(u===null)n.delete(c);else if(Array.isArray(u))for(const d of u)n.append(c,d);else u!==void 0&&n.set(c,u)}return n}function o0(e){return e.endsWith("/")?e.substring(0,e.length-1):e}const uv=new Set(["GET","HEAD","OPTIONS","TRACE"]),xS="ade.auth.tokens",Rf="",Bc=Rf.endsWith("/api/v1")?Rf.slice(0,-7):Rf;function eo(e){if(!e.startsWith("/"))throw new Error("API paths must begin with '/' relative to the server root");return Bc.length>0?`${Bc}${e}`:e}async function bS(e,n={}){const r=eo(e),i=new Headers(n.headers??{});if(i.set("X-Requested-With","fetch"),!i.has("Authorization")){const d=dv();d&&i.set("Authorization",`${d.token_type} ${d.access_token}`)}const c=n.method?.toUpperCase()??"GET";if(!uv.has(c)){const d=Ch();d&&!i.has("X-CSRF-Token")&&i.set("X-CSRF-Token",d)}return await fetch(r,{credentials:"include",...n,headers:i})}const He=hS({baseUrl:Bc.length>0?Bc:void 0,credentials:"include",headers:{"X-Requested-With":"fetch"}}),vS={onRequest({request:e}){const n=e.method?.toUpperCase()??"GET";if(!uv.has(n)){const r=Ch();r&&!e.headers.has("X-CSRF-Token")&&e.headers.set("X-CSRF-Token",r)}return e}},yS={onRequest({request:e}){if(!e.headers.has("Authorization")){const n=dv();n&&e.headers.set("Authorization",`${n.token_type} ${n.access_token}`)}return e}},wS={async onResponse({response:e}){if(e.ok)return e;const n=await jS(e),r=n?.title??`Request failed with status ${e.status}`;throw new On(r,e.status,n)}};He.use(vS);He.use(yS);He.use(wS);function dv(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(xS);if(!e)return null;const n=JSON.parse(e);if(n&&typeof n.access_token=="string")return{access_token:n.access_token,token_type:n.token_type??"bearer"}}catch{}return null}async function jS(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Ms={root:["auth"],detail:()=>[...Ms.root,"session"],providers:()=>[...Ms.root,"providers"],setupStatus:()=>[...Ms.root,"setup-status"]},kh="ade.auth.tokens";let to=SS();function SS(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(kh);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.access_token!="string"?null:{access_token:n.access_token,token_type:n.token_type??"bearer",expires_at:n.expires_at??null,refresh_expires_at:n.refresh_expires_at??null}}catch{return null}}function c0(e,n){if(e){const r=Date.parse(e);if(!Number.isNaN(r))return r}return typeof n=="number"?Date.now()+n*1e3:null}function ES(e){const n={access_token:e.access_token,token_type:e.token_type??"bearer",expires_at:c0(e.expires_at,e.expires_in),refresh_expires_at:c0(e.refresh_expires_at,e.refresh_expires_in)};if(to=n,typeof window<"u")try{window.localStorage.setItem(kh,JSON.stringify(n))}catch{}return n}function Th(){if(to=null,typeof window<"u")try{window.localStorage.removeItem(kh)}catch{}}function NS(){return to}function _S(e=to){return e?.access_token?{Authorization:`${e.token_type?.trim()||"bearer"} ${e.access_token}`}:{}}function u0(e){if(!e)return null;const n=new Date(e);return Number.isNaN(n.getTime())?null:n.toISOString()}function CS(e){const n=e.items.find(r=>r.is_default);return n?n.id:null}function d0(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function kS(e){return e?{...e,items:e.items??[]}:{items:[],page:1,page_size:0,total:0,has_next:!1,has_previous:!1}}async function fv(e,n){const r="/api/v1/me/bootstrap";try{const{data:i}=await He.GET(r,{signal:n,headers:_S(e),params:{query:{page:1,page_size:200,include_total:!1}}});return i??null}catch(i){if(i instanceof On&&(i.status===401||i.status===403))return null;throw i}}function hv(e,n=to,r=null,i=null){const c=d0(e.roles),u=d0(e.permissions),d=kS(e.workspaces);return{user:{...e.user,roles:c,permissions:u,preferred_workspace_id:CS(d)??null},workspaces:d,roles:c,permissions:u,expires_at:u0(n?.expires_at??null),refresh_expires_at:u0(n?.refresh_expires_at??null),return_to:r,state:i}}async function eu(e,n={}){const r=ES(e.session),i=await fv(r,n.signal);if(!i)throw Th(),new Error("Unable to load session after authentication.");return hv(i,r,null,null)}async function TS(e={}){try{const{data:n}=await He.GET("/api/v1/auth/providers",{signal:e.signal});return n?OS(n):{providers:[],force_sso:!1}}catch(n){if(n instanceof On&&n.status===404)return{providers:[],force_sso:!1};throw n}}async function AS(e={}){const n=NS(),r=await fv(n,e.signal);return r?hv(r,n):(n&&Th(),null)}async function RS(e,n={}){const{data:r}=await He.POST("/api/v1/auth/session",{body:e,signal:n.signal});if(!r)throw new Error("Expected session payload from login response.");return eu(r,n)}async function DS(e={}){const{data:n}=await He.POST("/api/v1/auth/session/refresh",{body:void 0,signal:e.signal});if(!n)throw new Error("Expected session payload from refresh response.");return eu(n,e)}async function MS(e){const{code:n,state:r,provider:i="sso",signal:c}=e,{data:u}=await He.GET("/api/v1/auth/sso/{provider}/callback",{signal:c,params:{path:{provider:i},query:{code:n,state:r}}});if(!u)throw new Error("Expected session payload from SSO callback.");return eu(u,{signal:c})}async function zS(e={}){try{await He.DELETE("/api/v1/auth/session",{signal:e.signal,body:void 0})}catch(n){!(n instanceof On)||n.status!==401&&n.status}finally{Th()}}function OS(e){return{providers:(e.providers??[]).map(LS),force_sso:!!e.force_sso}}function LS(e){return{...e,start_url:e.start_url??"",icon_url:e.icon_url??null}}const mv=p.createContext(void 0);function Ec(e){return e instanceof Error?e:new Error(String(e))}function f0({session:e,refetch:n,children:r}){return BS(e,n),l.jsx(mv.Provider,{value:{session:e,refetch:n},children:r})}function US(){const e=p.useContext(mv);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e}function Oi(){return US().session}const $S=6e4;function BS(e,n){p.useEffect(()=>{if(typeof window>"u")return;const r=typeof e.expires_at=="string"?Date.parse(e.expires_at):NaN,i=typeof e.refresh_expires_at=="string"?Date.parse(e.refresh_expires_at):NaN;if(Number.isNaN(r)||Number.isNaN(i))return;const c=Date.now();if(i<=c){n().catch(g=>{console.warn("Failed to refetch session after refresh expiry",Ec(g))});return}const u=Math.min(r,i)-$S,d=Math.max(u-c,0);let m=!1;const x=window.setTimeout(async()=>{try{if(await DS(),m)return;await n().catch(g=>{console.warn("Failed to refetch session after refresh",Ec(g))})}catch(g){if(m)return;console.warn("Failed to refresh session",Ec(g)),await n().catch(b=>{console.warn("Failed to refetch session after refresh failure",Ec(b))})}},d);return()=>{m=!0,window.clearTimeout(x)}},[n,e.expires_at,e.refresh_expires_at])}function pv(e={}){const n=dt(),r=_n({queryKey:Ms.detail(),queryFn:async({signal:c})=>{const u=await AS({signal:c});return u||null},enabled:e.enabled??!0,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnMount:!0}),i=r.data??null;return p.useEffect(()=>{i||n.removeQueries({queryKey:Ms.providers(),exact:!1})},[n,i]),{...r,session:i}}async function qS(e={}){try{const{data:n}=await He.GET("/api/v1/auth/setup",{signal:e.signal});if(!n)throw new Error("Expected setup status payload.");return n}catch(n){if(n instanceof On&&n.status===404)return{requires_setup:!1,has_users:!0};throw n}}async function HS(e){const{data:n}=await He.POST("/api/v1/auth/setup",{body:e});if(!n)throw new Error("Expected session payload from setup response.");return eu(n)}function Ah(e=!0){return _n({queryKey:Ms.setupStatus(),queryFn:({signal:n})=>qS({signal:n}),enabled:e,staleTime:3e5,refetchOnWindowFocus:!1})}const no="/workspaces",FS=new Set(["/","/login","/setup","/logout"]);function ZS(e){if(!e)return!0;const n=PS(e);return!!(FS.has(n)||n==="/auth"||n.startsWith("/auth/"))}function VS(e){return`${e.pathname}${e.search}${e.hash}`}function h0(e){const n=VS(e)||"/";return qc(n)??no}function qc(e){if(!e)return null;const n=e.trim();return!n.startsWith("/")||n.startsWith("//")?null:n==="/"?no:ZS(n)?null:n}function Il(e){return qc(e)??no}function gv(e){return bv("/login",e)}function xv(e){return bv("/setup",e)}function bv(e,n){const r=Il(n),i=new URLSearchParams;r!==no&&i.set("redirectTo",r);const c=i.toString();return c?`${e}?${c}`:e}function Hc(e,n){const r=qc(e);if(r)return r;const i=qc(n);return i||no}function PS(e){let n=e;const r=n.indexOf("#");r>=0&&(n=n.slice(0,r));const i=n.indexOf("?");return i>=0&&(n=n.slice(0,i)),n?n.startsWith("/")?n:`/${n}`:"/"}function tu({children:e}){const n=Hn(),r=Vt(),i=pv(),{session:c,isLoading:u,isError:d,refetch:m}=i,x=!c&&!u&&!d,{data:g,isPending:b,isError:v,isSuccess:w,refetch:S}=Ah(x);return p.useEffect(()=>{if(c||u||d)return;if(x){if(b||v)return;if(w&&g?.requires_setup){const j=h0(n);r(xv(j),{replace:!0});return}}const N=h0(n);r(gv(N),{replace:!0})},[d,u,v,b,w,n,r,c,g?.requires_setup,x]),u?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:l.jsx("p",{children:"Loading your workspace"})}):d?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[l.jsx("p",{children:"We were unable to confirm your session."}),l.jsx("button",{onClick:()=>m(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):c?e?l.jsx(f0,{session:c,refetch:m,children:e}):l.jsx(f0,{session:c,refetch:m,children:e??null}):x&&b?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:l.jsx("p",{children:"Preparing initial setup"})}):x&&v?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[l.jsx("p",{children:"We were unable to check whether ADE is ready."}),l.jsx("button",{onClick:()=>S(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):null}const so=100,Rh=50;function nu(e){if(!(typeof e!="number"||Number.isNaN(e)||e<=0))return Math.min(e,so)}async function vv(e,n={}){const{maxPages:r=50}=n,i=[];let c=[],u;for(let x=1;x<=r;x+=1){const g=await e(x);if(i.push(g),c=c.concat(g.items??[]),u===void 0&&g.total!==void 0&&(u=g.total??null),!g.has_next)break}const d=i.at(-1),m=i.at(0);if(!d||!m)throw new Error("No pages were returned while collecting pagination results.");return{...d,items:c,page:1,page_size:m.page_size,has_next:!1,has_previous:!1,total:u??d.total}}function Dh(e,n){return p.useMemo(()=>{if(!e||e.length===0)return[];const r=[],i=new Map;for(const c of e){const u=Array.isArray(c.items)?c.items:[];for(const d of u){const m=n(d),x=i.get(m);if(x===void 0){i.set(m,r.length),r.push(d);continue}r[x]=d}}return r},[e,n])}const yv=so,wv=Rh,jv=Rh,Sv=Rh,Mh="workspace";async function QS(e={}){const{page:n,pageSize:r,includeTotal:i,signal:c}=e,u={};typeof n=="number"&&n>0&&(u.page=n);const d=nu(r??yv);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:m}=await He.GET("/api/v1/workspaces",{params:{query:u},signal:c});if(!m)throw new Error("Expected workspace page payload.");const x=[...m.items].sort((g,b)=>g.name.localeCompare(b.name));return{...m,items:x}}async function IS(e){const{data:n}=await He.POST("/api/v1/workspaces",{body:e});if(!n)throw new Error("Expected workspace payload.");return n}async function WS(e,n){const{data:r}=await He.PATCH("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}},body:n});if(!r)throw new Error("Expected workspace payload.");return r}async function GS(e){await He.DELETE("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}}})}async function KS(e,n={}){const{page:r,pageSize:i,includeTotal:c,signal:u}=n,d={};typeof r=="number"&&r>0&&(d.page=r);const m=nu(i??wv);m&&(d.page_size=m),c&&(d.include_total=!0);const{data:x}=await He.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e},query:d},signal:u});if(!x)throw new Error("Expected workspace member page payload.");return x}async function YS(e,n){const{data:r}=await He.POST("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},body:n});if(!r)throw new Error("Expected workspace member payload.");return r}async function XS(e,n,r){const{data:i}=await He.PUT("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}},body:r});if(!i)throw new Error("Expected workspace member payload.");return i}async function JS(e,n){await He.DELETE("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}}})}async function eE(e={}){const{page:n,pageSize:r,includeTotal:i,signal:c}=e,u={scope:Mh};typeof n=="number"&&n>0&&(u.page=n);const d=nu(r??jv);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:m}=await He.GET("/api/v1/rbac/roles",{params:{query:u},signal:c});if(!m)throw new Error("Expected workspace role page payload.");return m}async function tE(e,n){const{data:r}=await He.POST("/api/v1/rbac/roles",{body:n});if(!r)throw new Error("Expected role payload.");return r}async function nE(e,n,r){const{data:i}=await He.PATCH("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}},body:r});if(!i)throw new Error("Expected role payload.");return i}async function sE(e,n){await He.DELETE("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}}})}async function rE(e={}){const{scope:n=Mh,page:r,pageSize:i,includeTotal:c,signal:u}=e,d={scope:n};typeof r=="number"&&r>0&&(d.page=r);const m=nu(i??Sv);m&&(d.page_size=m),c&&(d.include_total=!0);const{data:x}=await He.GET("/api/v1/rbac/permissions",{params:{query:d},signal:u});if(!x)throw new Error("Expected permission page payload.");return x}const Ca={page:1,pageSize:yv,includeTotal:!1},aE={page:1,pageSize:wv,includeTotal:!1},iE={page:1,pageSize:jv,includeTotal:!1},lE={scope:Mh,page:1,pageSize:Sv,includeTotal:!1},Zt={all:()=>["workspaces"],list:(e=Ca)=>[...Zt.all(),"list",{...e}],detail:e=>[...Zt.all(),"detail",e],members:(e,n=aE)=>[...Zt.detail(e),"members",{...n}],roles:(e,n=iE)=>[...Zt.detail(e),"roles",{...n}],permissions:(e=lE)=>["permissions",{...e}]};function oE(e={}){const n=e.page??Ca.page,r=e.pageSize??Ca.pageSize,i=e.includeTotal??Ca.includeTotal;return{queryKey:Zt.list({page:n,pageSize:r,includeTotal:i}),queryFn:({signal:c})=>QS({page:n,pageSize:r,includeTotal:i,signal:c}),staleTime:6e4,enabled:e.enabled??!0}}function su(e={}){const n=dt(),r=oE(e),i=n.getQueryData(r.queryKey);return _n({...r,initialData:i})}const Ev={page:Ca.page,pageSize:Ca.pageSize,includeTotal:Ca.includeTotal},cE="/api/v1/workspaces/{workspace_id}/default";async function uE(e){await He.PUT(cE,{params:{path:{workspace_id:e}}})}function dE(e,n){if(!e||typeof e!="object")return e;if("items"in e){const r=e;if(!Array.isArray(r.items))return e;const i=r.items.map(c=>({...c,is_default:c.id===n}));return{...r,items:i}}if("id"in e&&"is_default"in e){const r=e;return{...r,is_default:r.id===n}}return e}function Nv(){const e=dt();return sn({mutationFn:n=>uE(n),onSuccess:(n,r)=>{e.setQueriesData({queryKey:Zt.all()},i=>dE(i,r))}})}function Df(e){return e instanceof Error?e:new Error(String(e))}function Gs(e){return{get(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):null}catch(n){return console.warn("Failed to read from storage",Df(n)),null}},set(n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch(r){console.warn("Failed to write to storage",Df(r))}},clear(){if(!(typeof window>"u"))try{window.localStorage.removeItem(e)}catch(n){console.warn("Failed to clear storage",Df(n))}}}}const fE="backend.app.active_workspace",th=Gs(fE);function hE(){return th.get()}function _v(e){if(!e){th.clear();return}th.set(e.id)}function Cv(e){var n,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(n=0;n<c;n++)e[n]&&(r=Cv(e[n]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function he(){for(var e,n,r=0,i="",c=arguments.length;r<c;r++)(e=arguments[r])&&(n=Cv(e))&&(i&&(i+=" "),i+=n);return i}const kv=p.createContext(void 0);function mE({workspace:e,workspaces:n,children:r}){const i=p.useMemo(()=>{const c=e.permissions;return{workspace:e,workspaces:n,permissions:c,hasPermission(u){const d=u.toLowerCase();return c.includes(u)||c.includes(d)}}},[e,n]);return l.jsx(kv.Provider,{value:i,children:r})}function xr(){const e=p.useContext(kv);if(!e)throw new Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}var vs=Pb();const pE=[{id:"explorer",label:"Explorer",icon:l.jsx(xE,{})},{id:"search",label:"Search",icon:l.jsx(bE,{})},{id:"scm",label:"Source Control",icon:l.jsx(vE,{})},{id:"extensions",label:"Extensions",icon:l.jsx(yE,{})}];function gE({activeView:e,onSelectView:n,onOpenSettings:r,appearance:i}){const c=i==="dark"?{bg:"bg-[#1b1b1f]",border:"border-[#111111]",iconIdle:"text-slate-400",iconActive:"text-[#4fc1ff]",hover:"hover:text-white hover:bg-white/5 focus-visible:text-white",indicator:"bg-[#4fc1ff]"}:{bg:"bg-[#f3f3f3]",border:"border-[#d0d0d0]",iconIdle:"text-slate-500",iconActive:"text-[#005fb8]",hover:"hover:text-[#0f172a] hover:bg-black/5 focus-visible:text-[#0f172a]",indicator:"bg-[#005fb8]"};return l.jsxs("aside",{className:he("flex h-full w-14 flex-col items-center justify-between border-r",c.bg,c.border,c.iconIdle),"aria-label":"Workbench navigation",children:[l.jsx("div",{className:"flex flex-col items-center gap-1 py-3",children:pE.map(u=>{const d=e===u.id;return l.jsxs("button",{type:"button",onClick:()=>n(u.id),className:he("relative flex h-10 w-10 items-center justify-center rounded-lg text-base transition",d?c.iconActive:he(c.iconIdle,c.hover)),"aria-label":u.label,"aria-pressed":d,children:[d?l.jsx("span",{className:he("absolute left-0 top-1/2 h-6 w-1 -translate-y-1/2 rounded",c.indicator)}):null,u.icon]},u.id)})}),l.jsx("div",{className:"flex flex-col items-center gap-3 pb-3",children:l.jsx("button",{type:"button",onClick:r,className:he("flex h-10 w-10 items-center justify-center rounded-lg text-base transition",c.iconIdle,c.hover),"aria-label":"Open settings",children:l.jsx(wE,{})})})]})}function xE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"4",y:"4",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"}),l.jsx("path",{d:"M4 8.25h12",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M8.25 4v12",stroke:"currentColor",strokeWidth:"1.2"})]})}function bE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"9",cy:"9",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M12.7 12.7l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function vE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6.5 4a1.75 1.75 0 1 1-1.5 0v12m9-8a1.75 1.75 0 1 1-1.5 0v8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),l.jsx("path",{d:"M5 9.5h10",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function yE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6 4.5h4l4 4v6.5a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.3"}),l.jsx("path",{d:"M10 4.5v4h4",stroke:"currentColor",strokeWidth:"1.3"})]})}function wE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M10 6.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M3 10h2m10 0h2M10 3v2m0 10v2M5.2 5.2l1.4 1.4m7 7 1.4 1.4M14.8 5.2l-1.4 1.4m-7 7-1.4 1.4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}const zh=p.createContext(null);function Tv({value:e,onValueChange:n,children:r}){const i=p.useId(),c=p.useRef([]),u=p.useRef(new Map),d=p.useCallback((v,w)=>{c.current.includes(v)||c.current.push(v),u.current.set(v,w)},[]),m=p.useCallback(v=>{c.current=c.current.filter(w=>w!==v),u.current.delete(v)},[]),x=p.useCallback(v=>{v&&u.current.get(v)?.focus()},[]),g=p.useCallback(()=>c.current.slice(),[]),b=p.useMemo(()=>({value:e,setValue:n,baseId:i,registerValue:d,unregisterValue:m,focusValue:x,getValues:g}),[e,n,i,d,m,x,g]);return l.jsx(zh.Provider,{value:b,children:r})}function Av({children:e,...n}){return l.jsx("div",{role:"tablist",...n,children:e})}function nh({value:e,children:n,className:r,onClick:i,onKeyDown:c,disabled:u,...d}){const m=p.useContext(zh);if(!m)throw new Error("TabsTrigger must be used within a TabsRoot");const{registerValue:x,unregisterValue:g,focusValue:b,getValues:v}=m,w=m.value===e,S=`${m.baseId}-tab-${e}`,N=`${m.baseId}-panel-${e}`,j=p.useCallback(k=>{x(e,k)},[x,e]);p.useLayoutEffect(()=>()=>g(e),[g,e]);const C=k=>{if(c?.(k),k.defaultPrevented)return;const _=v(),A=_.indexOf(e);if(A===-1||_.length===0)return;let L=A;k.key==="ArrowRight"?(k.preventDefault(),L=(A+1)%_.length):k.key==="ArrowLeft"?(k.preventDefault(),L=(A-1+_.length)%_.length):k.key==="Home"?(k.preventDefault(),L=0):k.key==="End"&&(k.preventDefault(),L=_.length-1);const O=_[L];O&&O!==m.value&&m.setValue(O),b(O)};return l.jsx("button",{...d,ref:j,type:"button",role:"tab",id:S,"aria-selected":w,"aria-controls":N,tabIndex:w?0:-1,className:r,disabled:u,onKeyDown:C,onClick:k=>{i?.(k),!k.defaultPrevented&&!u&&m.setValue(e)},children:n})}function sh({value:e,children:n,className:r,...i}){const c=p.useContext(zh);if(!c)throw new Error("TabsContent must be used within a TabsRoot");const u=c.value===e,d=`${c.baseId}-panel-${e}`,m=`${c.baseId}-tab-${e}`;return l.jsx("div",{...i,role:"tabpanel",id:d,"aria-labelledby":m,className:r,hidden:!u,tabIndex:0,children:n})}function Oh(e){if(!e||typeof e!="object")return!1;const n=e,r=n.created_at,i=typeof r=="string"||typeof r=="number"||r instanceof Date;return typeof n.type=="string"&&i}function Lh(e){const n=e.created_at,r=new Date(n);return Number.isNaN(r.getTime())?new Date().toISOString():r.toISOString()}const jE={hour:"2-digit",minute:"2-digit",second:"2-digit"};function Uh(e){const n=e instanceof Date?Number.isNaN(e.getTime())?null:e.toISOString():e;if(!n)return"";const r=new Date(n);return Number.isNaN(r.getTime())?"":r.toLocaleTimeString([],jE)}function $h(e){const n=e.payload;return n&&typeof n=="object"?n:{}}function ru(e){return e==="error"?"error":e==="warning"||e==="warn"?"warning":e==="success"?"success":"info"}function Bh(e){if(typeof e!="number"||Number.isNaN(e)||e<0)return null;if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function Rv(e,n,r,i){const c=n.stream,u=n.level??(c==="stderr"?"warning":"info"),d=n.message??(typeof n.text=="string"?n.text:JSON.stringify(n)),m=n.scope??void 0,x=i??(m==="build"?"build":"run");return{level:ru(u),message:String(d??""),timestamp:r,origin:x,raw:e}}function SE(e){return e.type==="console.line"}function EE(e){if(!Oh(e))return!1;const n=$h(e);return typeof e.type=="string"&&e.type.startsWith("build.")||e.type==="console.line"&&n.scope==="build"}function NE(e){return Uh(Lh(e))}const _E={"build.created":(e,n,r)=>ME(n,r),"build.queued":(e,n,r)=>DE(n,r),"build.start":(e,n,r)=>zE(n,r),"build.progress":(e,n,r)=>LE(n,r),"build.phase.start":(e,n,r)=>OE(n,r),"build.phase.complete":(e,n,r)=>UE(n,r),"build.complete":(e,n,r)=>RE(n,r)},CE={"run.queued":(e,n,r)=>BE(e,n,r),"run.waiting_for_build":(e,n,r)=>qE(n,r),"run.start":(e,n,r)=>m0(n,r),"engine.start":(e,n,r)=>m0(n,r),"engine.phase.start":(e,n,r)=>HE(n,r),"engine.phase.complete":(e,n,r)=>FE(n,r),"engine.table.summary":(e,n,r)=>ZE(n,r),"engine.detector.column.score":(e,n,r)=>eN(n,r),"engine.detector.row.score":(e,n,r)=>tN(n,r),"engine.file.summary":(e,n,r)=>XE(n,r),"engine.sheet.summary":(e,n,r)=>JE(n,r),"engine.validation.issue":(e,n,r)=>VE(n,r),"engine.validation.summary":(e,n,r)=>PE(n,r),"run.error":(e,n,r)=>QE(n,r),"run.complete":(e,n,r)=>Mf(e,n,r),"engine.complete":(e,n,r)=>Mf(e,n,r),"engine.run.summary":(e,n,r)=>Mf(e,n,r)},kE=[{prefix:"config.",formatter:(e,n,r)=>WE(e,n,r)},{prefix:"run.transform.",formatter:(e,n,r)=>GE(e,n,r)}];function TE(e){return EE(e)?AE(e):$E(e)}function AE(e){if(!Oh(e))return Ts(e,{level:"info",message:JSON.stringify(e),timestamp:"",origin:"raw"});const n=$h(e),r=NE(e),i=e.type;if(i==="console.line")return Ts(e,Rv(e,n,r,"build"));if(!i?.startsWith("build."))return Ts(e,{level:"info",message:JSON.stringify(e),timestamp:r,origin:"build"});const c=i?_E[i]:null;return c?Ts(e,c(e,n,r)):Ts(e,{level:"info",message:JSON.stringify(e),timestamp:r,origin:"build"})}function RE(e,n){const r=e.status??"completed",i=r==="ready"?"succeeded":r,c=e.summary?.trim(),u=e.execution??{},d=typeof u.exit_code=="number"?u.exit_code:void 0,m=e.failure??void 0,x=typeof m?.message=="string"?m.message.trim():void 0;if(i==="succeeded"||i==="reused"||i==="ready")return{level:"success",message:c||`Build ${i}.`,timestamp:n,origin:"build",raw:e};if(i==="cancelled")return{level:"warning",message:"Build was cancelled before completion.",timestamp:n,origin:"build",raw:e};if(i==="failed"){const g=typeof d=="number"?` (exit code ${d})`:"";return{level:"error",message:(x||c||"Build failed.")+g,timestamp:n,origin:"build",raw:e}}return i==="skipped"?{level:"info",message:c||"Build skipped.",timestamp:n,origin:"build",raw:e}:{level:"info",message:c||`Build ${i}.`,timestamp:n,origin:"build",raw:e}}function DE(e,n){const r=e.reason??void 0;return{level:"info",message:r?`Build queued (${r}).`:"Build queued.",timestamp:n,origin:"build"}}function ME(e,n){return{level:"info",message:`Build queued (${e.reason??"queued"}).`,timestamp:n,origin:"build"}}function zE(e,n){const r=e.reason??void 0;return{level:"info",message:r?`Build started (${r}).`:"Build started.",timestamp:n,origin:"build"}}function OE(e,n){const r=e.phase??"building";return{level:"info",message:e.message??`Starting ${r}`,timestamp:n,origin:"build"}}function LE(e,n){return{level:"info",message:e.message??(e.step?`Build: ${e.step}`:"Build progress"),timestamp:n,origin:"build"}}function UE(e,n){const r=e.phase??"build",i=e.status??"completed",c=Bh(e.duration_ms),u=e.message??`${r} ${i}${c?` in ${c}`:""}`;return{level:i==="failed"?"error":i==="skipped"?"warning":"success",message:u,timestamp:n,origin:"build"}}function $E(e){if(!Oh(e))return Ts(e,{level:"info",message:JSON.stringify(e),timestamp:"",origin:"raw"});const n=$h(e),r=Uh(Lh(e)),i=e.type;if(SE(e))return Ts(e,Rv(e,n,r,n.scope==="build"?"build":"run"));if(!i?.startsWith("run.")&&!i?.startsWith("engine.")&&!i?.startsWith("config."))return Ts(e,{level:"info",message:JSON.stringify(e),timestamp:r,origin:"run"});const c=i?CE[i]:null;if(c)return Ts(e,c(e,n,r));const u=i?kE.find(d=>i.startsWith(d.prefix)):void 0;return u?Ts(e,u.formatter(i,n,r)):Ts(e,{level:"info",message:JSON.stringify(e),timestamp:r,origin:"run"})}function BE(e,n,r){const i=n.mode??void 0,c=e.run_id??"",u=i?` (${i})`:"";return{level:"info",message:`Run ${c?`${c} `:""}queued${u}.`,timestamp:r,origin:"run"}}function qE(e,n){const r=e.reason??void 0,i=e.build_id??void 0,c=r?` (${r})`:"",u=i?`  ${i}`:"";return{level:"info",message:`Waiting for build${c}${u}.`,timestamp:n,origin:"run"}}function m0(e,n){const r=e.mode??void 0,i=e.env??void 0,c=i?.reused?" (reused environment)":i?.reason?` (${i.reason})`:"";return{level:"info",message:`Run started${r?` (${r})`:""}${c}.`,timestamp:n,origin:"run"}}function HE(e,n){const r=e.phase??"progress",i=e.message??`Phase: ${r}`;return{level:ru(e.level??"info"),message:i,timestamp:n,origin:"run"}}function FE(e,n){const r=e.phase??"phase",i=e.status??"completed",c=Bh(e.duration_ms),u=e.message??`Phase ${r} ${i}${c?` in ${c}`:""}`;return{level:i==="failed"?"error":i==="skipped"?"warning":"success",message:u,timestamp:n,origin:"run"}}function ZE(e,n){return Dv(e,"table")?KE(e,n):YE(e,n)}function VE(e,n){const r=e.severity??"info";return{level:r==="error"?"error":r==="warning"?"warning":"info",message:`Validation issue${e.code?`: ${e.code}`:""}`,timestamp:n,origin:"run"}}function PE(e,n){const r=e.issues_total??0,i=e.max_severity??void 0,c=i==="error"?"error":i==="warning"||r>0?"warning":"info",u=i?`${i}`:r>0?"issues":"clean";return{level:c,message:`Validation summary: ${r} ${u}`,timestamp:n,origin:"run"}}function QE(e,n){const r=e.code??"unknown_error",i=e.message??"Run error.",c=e.stage??e.phase,u=c?` [${c}]`:"";return{level:"error",message:`${i}${u} (${r})`,timestamp:n,origin:"run"}}function Mf(e,n,r){return Dv(n,"run")?nN(n,r):IE(e,n,r)}function IE(e,n,r){const i=n.scope==="run"&&typeof n.source=="object",c=n.source??{},u=i?c.status??"completed":n.status??"completed",d=i?{}:n.execution??{},m=typeof d.exit_code=="number"?d.exit_code:void 0,x=i?c.failure:n.failure,g=typeof x?.message=="string"?x.message.trim():null,b=typeof n.summary=="string"?n.summary.trim():null,v=!i&&n.artifacts&&typeof n.artifacts=="object"&&n.artifacts||null,w=v&&typeof v.output_path=="string"?v.output_path:null,S=v&&typeof v.events_path=="string"?v.events_path:null,N=i?null:Bh(d.duration_ms),C=u==="failed"?"error":u==="cancelled"?"warning":u==="succeeded"?"success":"info",k=g||b||`Run ${u}`,_=typeof m=="number"?` (exit code ${m})`:"",A=`${k}${_}${N?` in ${N}`:""}.`,L=e.run_id??null,O=w?{path:w,label:Fc(w),href:sN(L)}:null;return{level:C,message:JSON.stringify({type:"ade.console.run_complete",headline:A,output:O,eventsPath:S}),timestamp:r,origin:"run"}}function Ts(e,n){return{...n,raw:e}}function WE(e,n,r){const i=typeof n.message=="string"?n.message:`Config event: ${e.replace(/^config\\./,"")}`;return{level:ru(n.level??"info"),message:i,timestamp:r,origin:"run",raw:n}}function GE(e,n,r){const i=e.replace("run.transform.",""),c=ru(n.level??"info"),u=n.message??`Transform ${i}${n.status?` ${n.status}`:""}`;return{level:c,message:u,timestamp:r,origin:"run",raw:n}}function Dv(e,n){const r=e.scope===n,i=typeof e.schema_id=="string"&&e.schema_id.startsWith("ade.summary");return e.type==="summary"||r||i}function KE(e,n){const r=e.source??{},i=r.sheet_name??"sheet",c=$e(r.table_index)??0,u=r.output_sheet??void 0,d=e.counts??{},m=$e(d.rows?.total),x=$e(d.columns?.physical_total),g=d.fields??{},b=$e(g.required),v=$e(g.required_unmapped)??0,w=$e(g.mapped),S=$e(g.total),N=d.columns??{},j=$e(N.distinct_headers_mapped),C=$e(N.distinct_headers),_=(Array.isArray(e.fields)?e.fields:[]).filter(H=>H&&typeof H=="object"&&H.required===!0&&H.mapped===!1).map(H=>H.field||H.label).filter(Boolean),A=au(e.details,r.file_path),L=[`Table summary: ${i}${u?`  ${u}`:""}`,`table ${c}`,m!==void 0?`rows ${m}`:null,x!==void 0?`cols ${x}`:null].filter(Boolean),O=S!==void 0&&w!==void 0?`mapped fields ${w}/${S}${b!==void 0?`  required missing ${v}/${b}`:""}`:b!==void 0?`required missing ${v}/${b}`:null,J=j!==void 0&&C!==void 0?`headers mapped ${j}/${C}`:null,U=[];_.length&&U.push(`Unmapped fields: ${_.join(", ")}`);const ne=[L.join("  "),O,J,A?`(${A})`:null].concat(U).filter(Boolean);return{level:v>0?"error":j!==void 0&&C!==void 0&&j<C?"warning":"success",message:ne.join(`
`),timestamp:n,origin:"run",raw:e}}function YE(e,n){const r=e.source_sheet??e.source_file??e.table_id??"table",i=$e(e.mapped_column_count),c=$e(e.column_count),u=$e(e.row_count),d=c&&i!==void 0&&c>0?i/c*100:null,m=c&&i!==void 0?`mapped ${i}/${c} (${iN(d)})`:i!==void 0?`mapped ${i} column${i===1?"":"s"}`:null,x=rN(e),g=aN(e),b=[`Table ${r}:`,u!==void 0?`${u} row${u===1?"":"s"}`:null,c!==void 0?`${c} col${c===1?"":"s"}`:null,m].filter(Boolean),v=[x.length?`Missing required: ${p0(x,3)}`:null,g.length?`Unmapped: ${p0(g,100)}`:null].filter(Boolean),w=au(e.details,e.source_file),S=[b.join("  "),v.find(j=>j?.startsWith("Missing required"))??null,v.find(j=>j?.startsWith("Unmapped"))??null,w?`(${w})`:null].filter(Boolean);return{level:x.length>0?"warning":d!==null&&d>=85?"success":"info",message:S.join(`
`),timestamp:n,origin:"run",raw:e}}function XE(e,n){const r=typeof e.source=="object"&&e.source?e.source.file_path:void 0,i=r?Fc(r):"file",c=e.counts??{},u=$e(c.rows?.total),d=$e(c.columns?.physical_total),m=$e(c.tables?.total),x=$e(c.sheets?.total),g=c.fields??{},b=$e(g.required),v=$e(g.required_unmapped)??0,w=$e(g.mapped),S=$e(g.total),N=c.columns??{},j=$e(N.distinct_headers_mapped),C=$e(N.distinct_headers),_=(Array.isArray(e.fields)?e.fields:[]).filter(H=>H&&typeof H=="object"&&H.required===!0&&H.mapped===!1).map(H=>H.field||H.label).filter(Boolean),A=au(e.details,r),L=[`File summary: ${i}`,u!==void 0?`rows ${u}`:null,d!==void 0?`cols ${d}`:null,m!==void 0?`tables ${m}`:null,x!==void 0?`sheets ${x}`:null].filter(Boolean),O=S!==void 0&&w!==void 0?`mapped fields ${w}/${S}${b!==void 0?`  required missing ${v}/${b}`:""}`:b!==void 0?`required missing ${v}/${b}`:null,J=j!==void 0&&C!==void 0?`headers mapped ${j}/${C}`:null,U=[];_.length&&U.push(`Unmapped fields: ${_.join(", ")}`);const ne=[L.join("  "),O,J,A?`(${A})`:null].concat(U).filter(Boolean);return{level:v>0?"error":j!==void 0&&C!==void 0&&j<C?"warning":"success",message:ne.join(`
`),timestamp:n,origin:"run",raw:e}}function JE(e,n){const r=typeof e.source=="object"&&e.source?e.source.file_path:void 0,i=typeof e.sheet=="object"&&e.sheet?e.sheet.name:void 0,c=e.counts??{},u=$e(c.rows?.total),d=$e(c.columns?.physical_total),m=$e(c.tables?.total),x=au(e.details,r);return{level:"info",message:[[`Sheet summary: ${i??"sheet"}`,u!==void 0?`rows ${u}`:null,d!==void 0?`cols ${d}`:null,m!==void 0?`tables ${m}`:null].filter(Boolean).join("  "),x?`(${x})`:null].filter(Boolean).join(`
`),timestamp:n,origin:"run",raw:e}}function eN(e,n){const r=e.field??"field",i=$e(e.threshold),c=e.chosen??{},u=c.header??"unknown",d=$e(c.score)??0,m=c.passed_threshold===!0,x=$e(c.column_index)??$e(c.source_column_index),b=(Array.isArray(e.candidates)?e.candidates:[]).slice(0,3).map(_=>{const A=_.header??`col ${$e(_.column_index)??"?"}`,L=Ws($e(_.score)),O=_.passed_threshold===!0?"":"";return`"${A}" ${L}${O?` ${O}`:""}`}).join(" | "),w=(Array.isArray(c.contributions)?c.contributions:[]).slice(0,3).map(_=>`${Mv(_.detector)} ${Ws($e(_.delta))}`).join(", "),S=i!==void 0?`${Ws(d)} ${m?"":"<"} ${Ws(i)}`:Ws(d),N=m?`Matched ${r} to "${u}"${x!==void 0?` (col ${x})`:""}  score ${S}`:`No match for ${r}${i!==void 0?` (score ${S})`:""}`,j=b?`Top candidates: ${b}`:"",C=w?`Signals: ${w}`:"";return{level:m?"success":"warning",message:[N,j,C].filter(Boolean).join(`
`),timestamp:n,origin:"run",raw:e}}function tN(e,n){const r=e.thresholds??{},i=$e(r.header),c=$e(r.data),u=$e(e.header_row_index),d=$e(e.data_row_start_index),m=$e(e.data_row_end_index),x=e.trigger??{},g=$e(x.row_index),b=x.scores?.header??x.header_score,v=x.scores?.data??x.data_score,w=$e(b)??0,S=$e(v)??0,j=(Array.isArray(x.contributions)?x.contributions:[]).flatMap(O=>{const J=Mv(O.detector),U=O.scores??{};return Object.entries(U).map(([ne,R])=>`${J} ${ne}:${Ws($e(R))}`)}).sort().slice(0,3).join("; "),C=Array.isArray(x.sample)&&x.sample.length?`Sample: ${x.sample.slice(0,5).join(", ")}${x.sample.length>5?"":""}`:"",k=`Picked header row ${u??"?"}, data rows ${d??"?"}-${m??"?"}${g!==void 0?` (trigger ${g})`:""}`,_=`hdr ${Ws(w)}${i!==void 0?`/${Ws(i)}`:""}  data ${Ws(S)}${c!==void 0?`/${Ws(c)}`:""}`,A=j?`Signals: ${j}`:C;return{level:i!==void 0&&w<i||c!==void 0&&S<c?"warning":"info",message:[k,_,A,C&&j?C:""].filter(Boolean).join(`
`),timestamp:n,origin:"run",raw:e}}function nN(e,n){const r=e.source??{},i=r.status??"completed",c=r.failure??void 0,u=c?.code??void 0,d=c?.message??void 0,m=c?.stage??void 0,x=e.counts??{},g=$e(x.tables?.total),b=$e(x.files?.total),v=$e(x.sheets?.total),w=$e(x.rows?.total),S=$e(x.columns?.physical_total),N=x.fields??{},j=$e(N.mapped),C=$e(N.total),k=$e(N.required),_=$e(N.required_unmapped)??0,A=e.details??{},O=(Array.isArray(e.fields)?e.fields:[]).filter(F=>F&&typeof F=="object"&&F.mapped===!1).map(F=>F.field||F.label).filter(Boolean),J=typeof A.output_path=="string"?A.output_path:Array.isArray(A.output_paths)&&A.output_paths.length?String(A.output_paths[0]):null,U=[`Run summary: ${i}`,m?`stage ${m}`:null,u?`code ${u}`:null].filter(Boolean),ne=[b!==void 0?`files ${b}`:null,v!==void 0?`sheets ${v}`:null,g!==void 0?`tables ${g}`:null,w!==void 0?`rows ${w}`:null,S!==void 0?`cols ${S}`:null].filter(Boolean).join("  "),R=C!==void 0&&j!==void 0?`mapped fields ${j}/${C}${k!==void 0?`  required missing ${_}/${k}`:""}`:k!==void 0?`required missing ${_}/${k}`:null,H=[];d&&H.push(`Failure: ${d}`),O.length&&H.push(`Unmapped fields: ${O.join(", ")}`),J&&H.push(`Output: ${J}`);const ae=[U.join("  "),ne,R,H.join("  ")].filter(F=>F&&F.length>0);return{level:i==="failed"||d?"error":_>0?"warning":i==="succeeded"?"success":"info",message:ae.join(`
`),timestamp:n,origin:"run",raw:e}}function au(e,n){if(!e||typeof e!="object")return n?Fc(n):null;const r=e,i=$e(r.header_row),c=$e(r.first_data_row),u=$e(r.last_data_row),d=[];return i!==void 0&&d.push(`header row ${i}`),c!==void 0&&u!==void 0&&d.push(`data ${c}-${u}`),n&&d.push(Fc(n)),d.length?d.join("  "):null}function sN(e){return e?`/api/v1/runs/${encodeURIComponent(e)}/output/download`:null}function Fc(e){const n=e.trim();if(!n)return"";const r=n.split("/");return r[r.length-1]||n}function rN(e){const n=e?.mapping;return(n&&typeof n=="object"&&Array.isArray(n.mapped_columns)?n.mapped_columns:Array.isArray(e.mapped_fields)?e.mapped_fields:[]).filter(i=>i&&typeof i=="object"&&i.is_required===!0&&i.is_satisfied===!1).map(i=>typeof i.field=="string"&&i.field.trim()||"").filter(Boolean)}function aN(e){const n=Array.isArray(e.unmapped_columns)?e.unmapped_columns:[],r=e.mapping&&typeof e.mapping=="object"&&Array.isArray(e.mapping.unmapped_columns)?e.mapping.unmapped_columns:[];return[...n,...r].map(c=>c&&typeof c=="object"?c.header:void 0).map(c=>(c??"").trim()).filter(Boolean)}function iN(e){return e===null||!Number.isFinite(e)?"0.0%":`${(Math.round(e*10)/10).toFixed(1)}%`}function p0(e,n){if(!e.length)return"";const r=e.slice(0,n),i=e.length-r.length,c=i>0?`... (+${i} more)`:"";return`${r.join(", ")}${c}`}function lN(e){return e==null||Number.isNaN(e)?"0.00":(Math.round(e*100)/100).toFixed(2)}function Ws(e){return lN(e)}function Mv(e){if(!e)return"";const n=e.split(".");return n[n.length-1]||e}function $e(e){if(!(typeof e!="number"||Number.isNaN(e)))return e}function g0(e){return e==="error"?3:e==="warning"?2:e==="success"||e==="info"?1:0}function oN(e){const n=cN(e);if(!n){if(e.includes(`
`)){const c=e.split(/\r?\n/),[u,...d]=c;return l.jsxs("div",{className:"flex flex-col gap-[2px]",children:[l.jsx("span",{className:"break-words",children:u||" "}),d.length>0?l.jsx("pre",{className:"whitespace-pre-wrap break-words border-l border-[#2f2f2f] pl-3 text-[12px] leading-snug text-[#9da5b4]",children:d.join(`
`)}):null]})}return e}const r=dN(n);if(r)return r;const i=JSON.stringify(n,null,2);return l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-[#d4d4d4]",children:uN(i)})}function cN(e){try{const n=JSON.parse(e);if(n&&typeof n=="object")return n}catch{return null}return null}function uN(e){const n=/("(?:\\.|[^"])*"(?=:)|"(?:\\.|[^"])*")|(-?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b)|\b(true|false|null)\b/g,r=[];let i=0,c,u=0;for(;(c=n.exec(e))!==null;){c.index>i&&r.push(e.slice(i,c.index));const d=c[0],m=c[1]?"text-sky-300":c[2]?"text-amber-300":"text-rose-300";r.push(l.jsx("span",{className:m,children:d},`json-${u++}`)),i=n.lastIndex}return i<e.length&&r.push(e.slice(i)),r}function dN(e){const n=typeof e.type=="string"?e.type:"",r=e.payload??{},i=typeof r.status=="string"?r.status:void 0,c=typeof r.reason=="string"?r.reason:void 0,u=typeof r.step=="string"?r.step:void 0,d=typeof r.message=="string"?r.message:void 0,m=typeof r.duration_ms=="number"&&Number.isFinite(r.duration_ms)?r.duration_ms:void 0,x=g=>{if(!g||g<0)return"";if(g<1e3)return`${Math.round(g)} ms`;if(g<6e4)return`${(g/1e3).toFixed(1)} s`;const b=Math.floor(g/6e4),v=Math.round(g%6e4/1e3);return`${b}m ${v}s`};switch(n){case"ade.console.run_complete":{const g=typeof e.headline=="string"?e.headline:"Run completed.",b=e.output&&typeof e.output=="object"?e.output:null,v=typeof e.eventsPath=="string"?e.eventsPath:null;return l.jsxs("div",{className:"flex flex-col gap-[2px]",children:[l.jsx("span",{className:"break-words",children:g}),b?l.jsx("div",{className:"flex flex-wrap items-center gap-2 text-[12px] text-emerald-200",children:(()=>{const w=typeof b?.label=="string"&&b.label.trim()||typeof b?.path=="string"&&b.path.trim()||"output",S=typeof b?.href=="string"&&b.href.trim().length>0?b.href:null;return S?l.jsx("a",{href:S,className:"text-emerald-200 hover:underline",children:w},S):l.jsx("span",{className:"text-slate-300",children:w},w)})()}):null,v?l.jsxs("span",{className:"text-[12px] text-slate-400",children:["Events log: ",v]}):null]})}case"run.queued":{const g=typeof r.mode=="string"?r.mode:void 0;return`Run queued${g?` (${g})`:""}.`}case"run.waiting_for_build":return`Waiting for build${c?` (${c})`:""}${r.build_id?`  ${r.build_id}`:""}`;case"run.start":case"run.started":case"engine.start":{const g=typeof r.mode=="string"?r.mode:void 0;return`Run started${g?` (${g})`:""}.`}case"run.complete":case"engine.run.summary":case"engine.complete":return`Run ${i??"completed"}${m?` in ${x(m)}`:""}.`;case"build.queued":return`Build queued${c?` (${c})`:""}.`;case"build.start":case"build.started":return`Build started${c?` (${c})`:""}.`;case"build.complete":case"build.completed":return`Build ${i??"completed"}.`;case"build.phase.start":case"build.phase.started":return`Starting ${typeof r.phase=="string"?r.phase:"build"}${d?`  ${d}`:""}`;case"build.phase.complete":case"build.phase.completed":return`${typeof r.phase=="string"?r.phase:"build"} ${i??"completed"}${m?` in ${x(m)}`:""}.`;case"build.progress":return d??(u?`Build: ${u}`:"Build progress");default:if(n.startsWith("run.phase.")||n.startsWith("engine.phase.")){const g=typeof r.phase=="string"?r.phase:"phase";if(n.endsWith(".completed")||n.endsWith(".complete"))return`${g} ${i??"completed"}${m?` in ${x(m)}`:""}.`;if(n.endsWith(".started")||n.endsWith(".start"))return`Starting ${g}${d?`  ${d}`:""}`}if(n.startsWith("build.phase.")){const g=typeof r.phase=="string"?r.phase:"build";if(n.endsWith(".completed")||n.endsWith(".complete"))return`${g} ${i??"completed"}${m?` in ${x(m)}`:""}.`;if(n.endsWith(".started")||n.endsWith(".start"))return`Starting ${g}${d?`  ${d}`:""}`}return null}}function fN({consoleLines:e,latestRun:n,onClearConsole:r,runStatus:i}){const[c,u]=p.useState({origin:"all",level:"all"}),[d,m]=p.useState(!0),[x,g]=p.useState(!1),[b,v]=p.useState("parsed"),w=p.useRef(null),S=p.useMemo(()=>{const R=g0(c.level);return e.filter(H=>{const ae=c.origin==="all"||(H.origin??"run")===c.origin,I=g0(H.level),F=c.level==="all"||I>=R;return ae&&F})},[e,c]),N=p.useMemo(()=>S.map((R,H)=>({...R,key:R.id??`${R.timestamp??"tbd"}-${R.origin??"run"}-${H}`,rendered:b==="raw"?yN(R.raw??R.message):oN(R.message)})),[S,b]),j=p.useMemo(()=>S.map(R=>wN(R,b)).join(`
`),[S,b]),C=typeof navigator<"u"&&typeof navigator.clipboard?.writeText=="function",k=!!j,_=N.length>0,A=e.length>0,L=i&&i!=="idle"?i:null;p.useEffect(()=>{if(!d)return;const R=w.current;R&&(R.scrollTop=R.scrollHeight)},[N,d]);const O=R=>{const H=R.currentTarget,I=H.scrollHeight-H.scrollTop-H.clientHeight<16;!I&&d?m(!1):I&&!d&&m(!0)},J=()=>{m(!0);const R=w.current;R&&(R.scrollTop=R.scrollHeight)},U=p.useCallback(async R=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(R),!0}catch{}if(typeof document>"u")return!1;try{const H=document.createElement("textarea");H.value=R,H.setAttribute("readonly","true"),H.style.position="fixed",H.style.left="-9999px",document.body.appendChild(H),H.select();const ae=document.execCommand("copy");return document.body.removeChild(H),ae}catch{return!1}},[]),ne=async()=>{if(!k)return;const R=await U(j);g(R),R&&window.setTimeout(()=>g(!1),1500)};return l.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-md border border-[#2a2a2a] bg-[#1e1e1e] font-mono text-[13px] leading-relaxed text-[#d4d4d4] shadow-[0_8px_24px_rgba(0,0,0,0.45)]",children:[l.jsxs("div",{className:"flex flex-col border-b border-[#2a2a2a] bg-gradient-to-r from-[#1f1f1f] to-[#232323]",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-4 py-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase tracking-[0.22em] text-[#9da5b4]",children:[l.jsx("span",{className:"font-semibold tracking-[0.3em] text-[#d4d4d4]",children:"Terminal"}),l.jsx("span",{className:"text-[10px] tracking-[0.3em] text-emerald-400",children:"live"}),L?l.jsx("span",{className:"rounded-full border border-[#3a3a3a] bg-[#2b2b2b] px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.2em] text-[#d4d4d4]",children:L}):null]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-300",children:[l.jsxs("label",{className:"flex items-center gap-1 text-slate-400",title:"Filter by event origin",children:["Origin",l.jsxs("select",{value:c.origin,onChange:R=>u(H=>({...H,origin:R.target.value})),className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[11px] text-slate-100 shadow-sm focus:border-emerald-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"run",children:"Run"}),l.jsx("option",{value:"build",children:"Build"}),l.jsx("option",{value:"raw",children:"Raw"})]})]}),l.jsxs("label",{className:"flex items-center gap-1 text-slate-400",title:"Filter by severity",children:["Level",l.jsxs("select",{value:c.level,onChange:R=>u(H=>({...H,level:R.target.value})),className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[11px] text-slate-100 shadow-sm focus:border-emerald-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"info",children:"Info"}),l.jsx("option",{value:"warning",children:"Warning"}),l.jsx("option",{value:"error",children:"Error"}),l.jsx("option",{value:"success",children:"Success"})]})]}),l.jsxs("div",{className:"flex items-center rounded border border-slate-600 text-[11px] font-semibold uppercase tracking-[0.12em] text-slate-200",title:"Toggle between parsed view and raw JSON events",children:[l.jsx("button",{type:"button",onClick:()=>v("parsed"),className:he("px-2 py-[6px] transition",b==="parsed"?"bg-slate-700 text-white":"hover:bg-[#0f0f0f] text-slate-300"),children:"Parsed"}),l.jsx("button",{type:"button",onClick:()=>v("raw"),className:he("px-2 py-[6px] border-l border-slate-600 transition",b==="raw"?"bg-slate-700 text-white":"hover:bg-[#0f0f0f] text-slate-300"),children:"Raw"})]}),l.jsx("button",{type:"button",onClick:()=>d?m(!1):J(),className:he("rounded px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",d?"border border-emerald-600/60 bg-transparent text-emerald-200":"border border-slate-600 bg-transparent text-slate-200 hover:border-slate-400"),title:"Auto-scroll to newest logs",children:d?"Following":"Follow"}),l.jsx("button",{type:"button",onClick:ne,className:he("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",x?"border-emerald-600/60 bg-transparent text-emerald-200":"border border-slate-600 bg-transparent text-slate-200 hover:border-slate-400"),disabled:!k,title:C?"Copy visible console output":"Copy may be blocked by browser permissions",children:x?"Copied":"Copy"}),l.jsx("button",{type:"button",onClick:()=>r?.(),className:"rounded border border-slate-600 bg-[#0f0f0f] px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] text-slate-200 transition hover:border-slate-400",title:"Clear console output",children:"Clear"})]})]}),n?l.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-[#2a2a2a] bg-[#181818] px-4 py-1.5 text-[11px] text-[#7f8794]",children:l.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[l.jsx(hN,{status:n.status}),l.jsxs("span",{className:"truncate",title:n.runId,children:["Run ",n.runId]}),l.jsxs("span",{className:"truncate text-slate-500",children:[n.documentName??"Document not recorded",b0(n.sheetNames)?`  ${b0(n.sheetNames)}`:""]}),n.durationMs!=null?l.jsxs("span",{className:"text-slate-600",children:[" ",SN(n.durationMs)]}):null]})}):null]}),l.jsx("div",{ref:w,onScroll:O,className:"flex-1 overflow-auto bg-[#1e1e1e] [color-scheme:dark]",style:{scrollbarColor:"#2f2f2f #111111"},children:_?l.jsx("ul",{className:"bg-[#1e1e1e]",children:N.map(R=>l.jsx("li",{className:"flex items-start gap-3 border-b border-[#1a1a1a] px-3 py-[2px] transition hover:bg-[#232323] last:border-b-0",children:l.jsxs("div",{className:"flex min-w-0 flex-1 items-baseline gap-2",children:[xN(R.timestamp),l.jsx("span",{className:"shrink-0 w-12 text-right font-mono text-[11px] leading-snug text-[#606674]",children:zv(R.origin)}),l.jsx("span",{className:he("shrink-0 w-14 text-right font-mono text-[11px] leading-snug",vN(R.level)),children:bN(R.level)}),l.jsx("div",{className:he("min-w-0 whitespace-pre-wrap break-words text-[13px] leading-snug",mN(R.level)),children:R.rendered})]})},R.key))}):A?l.jsx(x0,{title:"No console output matches these filters.",description:"Adjust origin or level filters to see more."}):l.jsx(x0,{title:"Waiting for ADE output",description:"Run validation or a test to stream logs into this terminal."})})]})}function x0({title:e,description:n}){return l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-slate-500",children:[l.jsx("p",{className:"tracking-wide text-slate-300",children:e}),l.jsx("p",{className:"text-[12px] leading-relaxed text-slate-500",children:n})]})}function hN({status:e}){const n=gN(e),r=e==="succeeded"?"bg-emerald-500":e==="running"||e==="queued"?"bg-amber-400":n?"bg-slate-400":"bg-rose-500";return l.jsx("span",{className:he("inline-block h-2.5 w-2.5 rounded-full",r),"aria-hidden":!0})}function mN(e){switch(e){case"warning":return"text-amber-100";case"error":return"text-rose-100";case"success":return"text-emerald-100";default:return"text-[#d4d4d4]"}}function pN(e){switch(e){case"warning":return"WARN";case"error":return"ERROR";case"success":return"DONE";default:return"INFO"}}function gN(e){return e==="cancelled"}function zv(e){return e==="build"?"[build]":e==="raw"?"[raw]":"[run]"}function xN(e){const n=Ov(e);return n?l.jsxs("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-[#7a8090]",children:["[",n,"]"]}):l.jsx("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-[#4f5665]","aria-hidden":!0,children:""})}function bN(e){switch(e){case"warning":return" warn";case"error":return" error";case"success":return" done";default:return" info"}}function vN(e){switch(e){case"warning":return"text-amber-300";case"error":return"text-rose-300";case"success":return"text-emerald-300";default:return"text-[#6f7683]"}}function Ov(e){if(!e)return"";const n=Uh(e);if(n&&n.trim().length>0)return n;const r=e.trim();return r.length>0?r:""}function yN(e){return typeof e=="string"?l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-snug text-[#d4d4d4]",children:e}):e&&typeof e=="object"?l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-snug text-[#d4d4d4]",children:JSON.stringify(e,null,2)}):null}function wN(e,n){const r=Ov(e.timestamp),i=zv(e.origin),c=pN(e.level).toLowerCase();if(n==="parsed"){const u=jN(e.message);if(u?.type==="ade.console.run_complete"){const d=u.headline??"",m=u.output&&typeof u.output=="object"&&(typeof u.output.label=="string"&&u.output.label.trim()||typeof u.output.path=="string"&&u.output.path.trim())||null,x=m?` Output: ${m}`:"",g=typeof u.eventsPath=="string"&&u.eventsPath.trim()?` Events: ${u.eventsPath}`:"";return`${r?`[${r}] `:""}${i} ${c} ${d}${x}${g}`.trim()}}if(n==="raw"){const u=typeof e.raw=="string"?e.raw:e.raw?JSON.stringify(e.raw,null,2):e.message??"";return`${r?`[${r}] `:""}${i} ${c} ${u}`.trim()}return`${r?`[${r}] `:""}${i} ${c} ${e.message??""}`.trim()}function jN(e){if(!e)return null;try{const n=JSON.parse(e);if(n&&typeof n=="object")return n}catch{return null}return null}function b0(e){return e?e.length===0?"All worksheets":e.join(", "):null}function SN(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function EN({validation:e}){const n=_N(e),r=CN(e);return l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[l.jsx("span",{children:n}),e.lastRunAt?l.jsxs("span",{children:["Last run ",kN(e.lastRunAt)]}):null]}),e.messages.length>0?l.jsx("ul",{className:"space-y-1.5",children:e.messages.map((i,c)=>l.jsxs("li",{className:NN(i.level),children:[i.path?l.jsx("span",{className:"block text-[11px] font-medium uppercase tracking-wide text-slate-500",children:i.path}):null,l.jsx("span",{className:"text-[13px]",children:i.message})]},`${i.level}-${i.path??c}-${c}`))}):l.jsx("p",{className:"text-xs leading-relaxed text-slate-500",children:r})]})}function NN(e){switch(e){case"error":return"text-danger-600";case"warning":return"text-amber-600";default:return"text-slate-600"}}function _N(e){switch(e.status){case"running":return"Running validation...";case"success":{if(e.messages.length===0)return"Validation completed with no issues.";const n=e.messages.length;return`Validation completed with ${n} ${n===1?"issue":"issues"}.`}case"error":return e.error??"Validation failed.";default:return"No validation run yet."}}function CN(e){return e.status==="running"?"Validation in progress...":e.status==="success"?"No validation issues detected.":e.status==="error"?e.error??"Validation failed.":"Trigger validation from the workbench header to see ADE parsing results and manifest issues."}function kN(e){const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function TN({height:e,consoleLines:n,validation:r,activePane:i,onPaneChange:c,latestRun:u,onClearConsole:d,runStatus:m,onToggleCollapse:x,appearance:g="light"}){const b=r.messages.length>0,v=g==="dark"?{surface:"border-[#1f2431] bg-[#0f111a] text-slate-100",header:"border-[#1f2431] bg-[#0f111a]",hideButton:"border-[#2b3040] bg-[#161926] text-slate-100 hover:border-[#3b4153] hover:bg-[#1e2333]"}:{surface:"border-slate-200 bg-slate-50 text-slate-800",header:"border-slate-200 bg-slate-50",hideButton:"border-slate-300 bg-white text-slate-700 hover:border-slate-400"};return l.jsx("section",{className:he("flex min-h-0 flex-col overflow-hidden border-t",v.surface),style:{height:e},children:l.jsxs(Tv,{value:i,onValueChange:w=>c(w),children:[l.jsxs("div",{className:he("flex flex-none items-center justify-between border-b px-3 py-1.5",v.header),onDoubleClick:x,title:x?"Double-click to hide console":void 0,children:[l.jsxs(Av,{className:"flex items-center gap-3 text-[11px] font-medium",children:[l.jsx(nh,{value:"terminal",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:"Terminal"}),l.jsxs(nh,{value:"problems",className:"flex items-center gap-1 rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Problems",b?l.jsx("span",{className:"inline-flex h-4 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-600 px-1 text-[10px] font-semibold text-white",children:r.messages.length}):null]})]}),x?l.jsx("button",{type:"button",onClick:x,className:he("rounded px-2 py-1 text-[11px] font-semibold uppercase tracking-wide shadow-sm transition",v.hideButton),title:"Hide console",children:"Hide"}):null]}),l.jsx(sh,{value:"terminal",className:"flex min-h-0 flex-1 flex-col",children:l.jsx(fN,{consoleLines:n,latestRun:u,onClearConsole:d,runStatus:m})}),l.jsx(sh,{value:"problems",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:l.jsx(EN,{validation:r})})]})})}function AN({containerRef:e,tabs:n,activeTabId:r,onCloseTab:i,onSelectRecentTab:c,onSelectTab:u}){return p.useEffect(()=>{if(!n.length)return;const d=x=>{const g=e.current;if(!g)return!1;const b=x.target;if(b instanceof Node&&g.contains(b))return!0;const v=document.activeElement;return!!(v&&g.contains(v))},m=x=>{if(!(x.ctrlKey||x.metaKey)||!d(x))return;if(x.key.toLowerCase()==="w"){if(!r)return;x.preventDefault(),i(r);return}if(x.key==="Tab"){if(n.length<2)return;x.preventDefault(),c(x.shiftKey?"backward":"forward");return}const g=b=>{if(n.length<2)return;const v=n.findIndex(j=>j.id===r),S=((v>=0?v:0)+b+n.length)%n.length,N=n[S];N&&u(N.id)};if(x.key==="PageUp"){x.preventDefault(),g(-1);return}x.key==="PageDown"&&(x.preventDefault(),g(1))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[n,r,i,c,u,e]),null}const RN=p.lazy(()=>sS(()=>import("./MonacoCodeEditor-C-Eyyurc.js"),[])),DN=p.forwardRef(function(n,r){const{className:i,...c}=n;return l.jsx(p.Suspense,{fallback:l.jsx("div",{className:he("relative h-full w-full",i),children:l.jsx("div",{className:"flex h-full items-center justify-center text-xs text-slate-400",children:"Loading editor"})}),children:l.jsx(RN,{...c,ref:r,className:i})})});function MN({tabs:e,activeTabId:n,editorTheme:r,onContentChange:i,onSaveTab:c,canSaveFiles:u=!1,onRetryTabLoad:d,onSelectTab:m,isTabDragging:x=!1}){return p.useMemo(()=>e.find(b=>b.id===n)??null,[e,n])?l.jsx("div",{className:"flex min-h-0 min-w-0 flex-1",children:e.map(b=>l.jsx(sh,{value:b.id,className:"flex min-h-0 min-w-0 flex-1",children:b.status==="loading"?l.jsxs("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:["Loading ",b.name,""]}):b.status==="error"?l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 text-center text-sm text-slate-500",children:[l.jsx("p",{children:b.error??"Unable to load the file."}),l.jsx("button",{type:"button",className:"rounded bg-brand-600 px-3 py-1 text-xs font-medium text-white hover:bg-brand-500",onClick:()=>d?d(b.id):m(b.id),children:"Retry loading"})]}):l.jsx("div",{className:he("flex min-h-0 min-w-0 flex-1",x&&"pointer-events-none select-none"),children:l.jsx(DN,{value:b.content,language:b.language??"plaintext",path:b.id,theme:r,onChange:v=>i(b.id,v??""),onSaveShortcut:()=>{u&&c?.(b.id)}})})},b.id))}):l.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."})}function zN(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.useMemo(()=>i=>{n.forEach(c=>c(i))},n)}const iu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Li(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function qh(e){return"nodeType"in e}function Gn(e){var n,r;return e?Li(e)?e:qh(e)&&(n=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function Hh(e){const{Document:n}=Gn(e);return e instanceof n}function ro(e){return Li(e)?!1:e instanceof Gn(e).HTMLElement}function Lv(e){return e instanceof Gn(e).SVGElement}function Ui(e){return e?Li(e)?e.document:qh(e)?Hh(e)?e:ro(e)||Lv(e)?e.ownerDocument:document:document:document}const Ks=iu?p.useLayoutEffect:p.useEffect;function Fh(e){const n=p.useRef(e);return Ks(()=>{n.current=e}),p.useCallback(function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return n.current==null?void 0:n.current(...i)},[])}function ON(){const e=p.useRef(null),n=p.useCallback((i,c)=>{e.current=setInterval(i,c)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,r]}function Wl(e,n){n===void 0&&(n=[e]);const r=p.useRef(e);return Ks(()=>{r.current!==e&&(r.current=e)},n),r}function ao(e,n){const r=p.useRef();return p.useMemo(()=>{const i=e(r.current);return r.current=i,i},[...n])}function Zc(e){const n=Fh(e),r=p.useRef(null),i=p.useCallback(c=>{c!==r.current&&n?.(c,r.current),r.current=c},[]);return[r,i]}function rh(e){const n=p.useRef();return p.useEffect(()=>{n.current=e},[e]),n.current}let zf={};function io(e,n){return p.useMemo(()=>{if(n)return n;const r=zf[e]==null?0:zf[e]+1;return zf[e]=r,e+"-"+r},[e,n])}function Uv(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return i.reduce((u,d)=>{const m=Object.entries(d);for(const[x,g]of m){const b=u[x];b!=null&&(u[x]=b+e*g)}return u},{...n})}}const Ti=Uv(1),Vc=Uv(-1);function LN(e){return"clientX"in e&&"clientY"in e}function Zh(e){if(!e)return!1;const{KeyboardEvent:n}=Gn(e.target);return n&&e instanceof n}function UN(e){if(!e)return!1;const{TouchEvent:n}=Gn(e.target);return n&&e instanceof n}function ah(e){if(UN(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return LN(e)?{x:e.clientX,y:e.clientY}:null}const Gl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Gl.Translate.toString(e),Gl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:i}=e;return n+" "+r+"ms "+i}}}),v0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function $N(e){return e.matches(v0)?e:e.querySelector(v0)}const BN={display:"none"};function qN(e){let{id:n,value:r}=e;return bt.createElement("div",{id:n,style:BN},r)}function HN(e){let{id:n,announcement:r,ariaLiveType:i="assertive"}=e;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bt.createElement("div",{id:n,style:c,role:"status","aria-live":i,"aria-atomic":!0},r)}function FN(){const[e,n]=p.useState("");return{announce:p.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const $v=p.createContext(null);function ZN(e){const n=p.useContext($v);p.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function VN(){const[e]=p.useState(()=>new Set),n=p.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[p.useCallback(i=>{let{type:c,event:u}=i;e.forEach(d=>{var m;return(m=d[c])==null?void 0:m.call(d,u)})},[e]),n]}const PN={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},QN={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function IN(e){let{announcements:n=QN,container:r,hiddenTextDescribedById:i,screenReaderInstructions:c=PN}=e;const{announce:u,announcement:d}=FN(),m=io("DndLiveRegion"),[x,g]=p.useState(!1);if(p.useEffect(()=>{g(!0)},[]),ZN(p.useMemo(()=>({onDragStart(v){let{active:w}=v;u(n.onDragStart({active:w}))},onDragMove(v){let{active:w,over:S}=v;n.onDragMove&&u(n.onDragMove({active:w,over:S}))},onDragOver(v){let{active:w,over:S}=v;u(n.onDragOver({active:w,over:S}))},onDragEnd(v){let{active:w,over:S}=v;u(n.onDragEnd({active:w,over:S}))},onDragCancel(v){let{active:w,over:S}=v;u(n.onDragCancel({active:w,over:S}))}}),[u,n])),!x)return null;const b=bt.createElement(bt.Fragment,null,bt.createElement(qN,{id:i,value:c.draggable}),bt.createElement(HN,{id:m,announcement:d}));return r?vs.createPortal(b,r):b}var cn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(cn||(cn={}));function Pc(){}function WN(e,n){return p.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function GN(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const zs=Object.freeze({x:0,y:0});function KN(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function YN(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return r-i}function XN(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return i-r}function JN(e,n){if(!e||e.length===0)return null;const[r]=e;return r[n]}function y0(e,n,r){return n===void 0&&(n=e.left),r===void 0&&(r=e.top),{x:n+e.width*.5,y:r+e.height*.5}}const e_=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e;const c=y0(n,n.left,n.top),u=[];for(const d of i){const{id:m}=d,x=r.get(m);if(x){const g=KN(y0(x),c);u.push({id:m,data:{droppableContainer:d,value:g}})}}return u.sort(YN)};function t_(e,n){const r=Math.max(n.top,e.top),i=Math.max(n.left,e.left),c=Math.min(n.left+n.width,e.left+e.width),u=Math.min(n.top+n.height,e.top+e.height),d=c-i,m=u-r;if(i<c&&r<u){const x=n.width*n.height,g=e.width*e.height,b=d*m,v=b/(x+g-b);return Number(v.toFixed(4))}return 0}const n_=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e;const c=[];for(const u of i){const{id:d}=u,m=r.get(d);if(m){const x=t_(m,n);x>0&&c.push({id:d,data:{droppableContainer:u,value:x}})}}return c.sort(XN)};function s_(e,n,r){return{...e,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function Bv(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:zs}function r_(e){return function(r){for(var i=arguments.length,c=new Array(i>1?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];return c.reduce((d,m)=>({...d,top:d.top+e*m.y,bottom:d.bottom+e*m.y,left:d.left+e*m.x,right:d.right+e*m.x}),{...r})}}const a_=r_(1);function i_(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function l_(e,n,r){const i=i_(n);if(!i)return e;const{scaleX:c,scaleY:u,x:d,y:m}=i,x=e.left-d-(1-c)*parseFloat(r),g=e.top-m-(1-u)*parseFloat(r.slice(r.indexOf(" ")+1)),b=c?e.width/c:e.width,v=u?e.height/u:e.height;return{width:b,height:v,top:g,right:x+b,bottom:g+v,left:x}}const o_={ignoreTransform:!1};function $i(e,n){n===void 0&&(n=o_);let r=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:g,transformOrigin:b}=Gn(e).getComputedStyle(e);g&&(r=l_(r,g,b))}const{top:i,left:c,width:u,height:d,bottom:m,right:x}=r;return{top:i,left:c,width:u,height:d,bottom:m,right:x}}function w0(e){return $i(e,{ignoreTransform:!0})}function c_(e){const n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function u_(e,n){return n===void 0&&(n=Gn(e).getComputedStyle(e)),n.position==="fixed"}function d_(e,n){n===void 0&&(n=Gn(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const u=n[c];return typeof u=="string"?r.test(u):!1})}function Vh(e,n){const r=[];function i(c){if(n!=null&&r.length>=n||!c)return r;if(Hh(c)&&c.scrollingElement!=null&&!r.includes(c.scrollingElement))return r.push(c.scrollingElement),r;if(!ro(c)||Lv(c)||r.includes(c))return r;const u=Gn(e).getComputedStyle(c);return c!==e&&d_(c,u)&&r.push(c),u_(c,u)?r:i(c.parentNode)}return e?i(e):r}function qv(e){const[n]=Vh(e,1);return n??null}function Of(e){return!iu||!e?null:Li(e)?e:qh(e)?Hh(e)||e===Ui(e).scrollingElement?window:ro(e)?e:null:null}function Hv(e){return Li(e)?e.scrollX:e.scrollLeft}function Fv(e){return Li(e)?e.scrollY:e.scrollTop}function ih(e){return{x:Hv(e),y:Fv(e)}}var xn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(xn||(xn={}));function Zv(e){return!iu||!e?!1:e===document.scrollingElement}function Vv(e){const n={x:0,y:0},r=Zv(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},c=e.scrollTop<=n.y,u=e.scrollLeft<=n.x,d=e.scrollTop>=i.y,m=e.scrollLeft>=i.x;return{isTop:c,isLeft:u,isBottom:d,isRight:m,maxScroll:i,minScroll:n}}const f_={x:.2,y:.2};function h_(e,n,r,i,c){let{top:u,left:d,right:m,bottom:x}=r;i===void 0&&(i=10),c===void 0&&(c=f_);const{isTop:g,isBottom:b,isLeft:v,isRight:w}=Vv(e),S={x:0,y:0},N={x:0,y:0},j={height:n.height*c.y,width:n.width*c.x};return!g&&u<=n.top+j.height?(S.y=xn.Backward,N.y=i*Math.abs((n.top+j.height-u)/j.height)):!b&&x>=n.bottom-j.height&&(S.y=xn.Forward,N.y=i*Math.abs((n.bottom-j.height-x)/j.height)),!w&&m>=n.right-j.width?(S.x=xn.Forward,N.x=i*Math.abs((n.right-j.width-m)/j.width)):!v&&d<=n.left+j.width&&(S.x=xn.Backward,N.x=i*Math.abs((n.left+j.width-d)/j.width)),{direction:S,speed:N}}function m_(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:n,left:r,right:i,bottom:c}=e.getBoundingClientRect();return{top:n,left:r,right:i,bottom:c,width:e.clientWidth,height:e.clientHeight}}function Pv(e){return e.reduce((n,r)=>Ti(n,ih(r)),zs)}function p_(e){return e.reduce((n,r)=>n+Hv(r),0)}function g_(e){return e.reduce((n,r)=>n+Fv(r),0)}function x_(e,n){if(n===void 0&&(n=$i),!e)return;const{top:r,left:i,bottom:c,right:u}=n(e);qv(e)&&(c<=0||u<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const b_=[["x",["left","right"],p_],["y",["top","bottom"],g_]];class Ph{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Vh(r),c=Pv(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[u,d,m]of b_)for(const x of d)Object.defineProperty(this,x,{get:()=>{const g=m(i),b=c[u]-g;return this.rect[x]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bl{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...r)})},this.target=n}add(n,r,i){var c;(c=this.target)==null||c.addEventListener(n,r,i),this.listeners.push([n,r,i])}}function v_(e){const{EventTarget:n}=Gn(e);return e instanceof n?e:Ui(e)}function Lf(e,n){const r=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(r**2+i**2)>n:"x"in n&&"y"in n?r>n.x&&i>n.y:"x"in n?r>n.x:"y"in n?i>n.y:!1}var xs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(xs||(xs={}));function j0(e){e.preventDefault()}function y_(e){e.stopPropagation()}var ot;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ot||(ot={}));const Qv={start:[ot.Space,ot.Enter],cancel:[ot.Esc],end:[ot.Space,ot.Enter,ot.Tab]},w_=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case ot.Right:return{...r,x:r.x+25};case ot.Left:return{...r,x:r.x-25};case ot.Down:return{...r,y:r.y+25};case ot.Up:return{...r,y:r.y-25}}};class Iv{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new Bl(Ui(r)),this.windowListeners=new Bl(Gn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xs.Resize,this.handleCancel),this.windowListeners.add(xs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,i=n.node.current;i&&x_(i),r(zs)}handleKeyDown(n){if(Zh(n)){const{active:r,context:i,options:c}=this.props,{keyboardCodes:u=Qv,coordinateGetter:d=w_,scrollBehavior:m="smooth"}=c,{code:x}=n;if(u.end.includes(x)){this.handleEnd(n);return}if(u.cancel.includes(x)){this.handleCancel(n);return}const{collisionRect:g}=i.current,b=g?{x:g.left,y:g.top}:zs;this.referenceCoordinates||(this.referenceCoordinates=b);const v=d(n,{active:r,context:i.current,currentCoordinates:b});if(v){const w=Vc(v,b),S={x:0,y:0},{scrollableAncestors:N}=i.current;for(const j of N){const C=n.code,{isTop:k,isRight:_,isLeft:A,isBottom:L,maxScroll:O,minScroll:J}=Vv(j),U=m_(j),ne={x:Math.min(C===ot.Right?U.right-U.width/2:U.right,Math.max(C===ot.Right?U.left:U.left+U.width/2,v.x)),y:Math.min(C===ot.Down?U.bottom-U.height/2:U.bottom,Math.max(C===ot.Down?U.top:U.top+U.height/2,v.y))},R=C===ot.Right&&!_||C===ot.Left&&!A,H=C===ot.Down&&!L||C===ot.Up&&!k;if(R&&ne.x!==v.x){const ae=j.scrollLeft+w.x,I=C===ot.Right&&ae<=O.x||C===ot.Left&&ae>=J.x;if(I&&!w.y){j.scrollTo({left:ae,behavior:m});return}I?S.x=j.scrollLeft-ae:S.x=C===ot.Right?j.scrollLeft-O.x:j.scrollLeft-J.x,S.x&&j.scrollBy({left:-S.x,behavior:m});break}else if(H&&ne.y!==v.y){const ae=j.scrollTop+w.y,I=C===ot.Down&&ae<=O.y||C===ot.Up&&ae>=J.y;if(I&&!w.x){j.scrollTo({top:ae,behavior:m});return}I?S.y=j.scrollTop-ae:S.y=C===ot.Down?j.scrollTop-O.y:j.scrollTop-J.y,S.y&&j.scrollBy({top:-S.y,behavior:m});break}}this.handleMove(n,Ti(Vc(v,this.referenceCoordinates),S))}}}handleMove(n,r){const{onMove:i}=this.props;n.preventDefault(),i(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Iv.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:i=Qv,onActivation:c}=n,{active:u}=r;const{code:d}=e.nativeEvent;if(i.start.includes(d)){const m=u.activatorNode.current;return m&&e.target!==m?!1:(e.preventDefault(),c?.({event:e.nativeEvent}),!0)}return!1}}];function S0(e){return!!(e&&"distance"in e)}function E0(e){return!!(e&&"delay"in e)}class Qh{constructor(n,r,i){var c;i===void 0&&(i=v_(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:u}=n,{target:d}=u;this.props=n,this.events=r,this.document=Ui(d),this.documentListeners=new Bl(this.document),this.listeners=new Bl(i),this.windowListeners=new Bl(Gn(d)),this.initialCoordinates=(c=ah(u))!=null?c:zs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(xs.Resize,this.handleCancel),this.windowListeners.add(xs.DragStart,j0),this.windowListeners.add(xs.VisibilityChange,this.handleCancel),this.windowListeners.add(xs.ContextMenu,j0),this.documentListeners.add(xs.Keydown,this.handleKeydown),r){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(E0(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(S0(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:i,onPending:c}=this.props;c(i,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(xs.Click,y_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xs.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:i,initialCoordinates:c,props:u}=this,{onMove:d,options:{activationConstraint:m}}=u;if(!c)return;const x=(r=ah(n))!=null?r:zs,g=Vc(c,x);if(!i&&m){if(S0(m)){if(m.tolerance!=null&&Lf(g,m.tolerance))return this.handleCancel();if(Lf(g,m.distance))return this.handleStart()}if(E0(m)&&Lf(g,m.tolerance))return this.handleCancel();this.handlePending(m,g);return}n.cancelable&&n.preventDefault(),d(x)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===ot.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const j_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ih extends Qh{constructor(n){const{event:r}=n,i=Ui(r.target);super(n,j_,i)}}Ih.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return!r.isPrimary||r.button!==0?!1:(i?.({event:r}),!0)}}];const S_={move:{name:"mousemove"},end:{name:"mouseup"}};var lh;(function(e){e[e.RightClick=2]="RightClick"})(lh||(lh={}));class E_ extends Qh{constructor(n){super(n,S_,Ui(n.event.target))}}E_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return r.button===lh.RightClick?!1:(i?.({event:r}),!0)}}];const Uf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class N_ extends Qh{constructor(n){super(n,Uf)}static setup(){return window.addEventListener(Uf.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Uf.move.name,n)};function n(){}}}N_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;const{touches:c}=r;return c.length>1?!1:(i?.({event:r}),!0)}}];var ql;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ql||(ql={}));var Qc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qc||(Qc={}));function __(e){let{acceleration:n,activator:r=ql.Pointer,canScroll:i,draggingRect:c,enabled:u,interval:d=5,order:m=Qc.TreeOrder,pointerCoordinates:x,scrollableAncestors:g,scrollableAncestorRects:b,delta:v,threshold:w}=e;const S=k_({delta:v,disabled:!u}),[N,j]=ON(),C=p.useRef({x:0,y:0}),k=p.useRef({x:0,y:0}),_=p.useMemo(()=>{switch(r){case ql.Pointer:return x?{top:x.y,bottom:x.y,left:x.x,right:x.x}:null;case ql.DraggableRect:return c}},[r,c,x]),A=p.useRef(null),L=p.useCallback(()=>{const J=A.current;if(!J)return;const U=C.current.x*k.current.x,ne=C.current.y*k.current.y;J.scrollBy(U,ne)},[]),O=p.useMemo(()=>m===Qc.TreeOrder?[...g].reverse():g,[m,g]);p.useEffect(()=>{if(!u||!g.length||!_){j();return}for(const J of O){if(i?.(J)===!1)continue;const U=g.indexOf(J),ne=b[U];if(!ne)continue;const{direction:R,speed:H}=h_(J,ne,_,n,w);for(const ae of["x","y"])S[ae][R[ae]]||(H[ae]=0,R[ae]=0);if(H.x>0||H.y>0){j(),A.current=J,N(L,d),C.current=H,k.current=R;return}}C.current={x:0,y:0},k.current={x:0,y:0},j()},[n,L,i,j,u,d,JSON.stringify(_),JSON.stringify(S),N,g,O,b,JSON.stringify(w)])}const C_={x:{[xn.Backward]:!1,[xn.Forward]:!1},y:{[xn.Backward]:!1,[xn.Forward]:!1}};function k_(e){let{delta:n,disabled:r}=e;const i=rh(n);return ao(c=>{if(r||!i||!c)return C_;const u={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[xn.Backward]:c.x[xn.Backward]||u.x===-1,[xn.Forward]:c.x[xn.Forward]||u.x===1},y:{[xn.Backward]:c.y[xn.Backward]||u.y===-1,[xn.Forward]:c.y[xn.Forward]||u.y===1}}},[r,n,i])}function T_(e,n){const r=n!=null?e.get(n):void 0,i=r?r.node.current:null;return ao(c=>{var u;return n==null?null:(u=i??c)!=null?u:null},[i,n])}function A_(e,n){return p.useMemo(()=>e.reduce((r,i)=>{const{sensor:c}=i,u=c.activators.map(d=>({eventName:d.eventName,handler:n(d.handler,i)}));return[...r,...u]},[]),[e,n])}var Kl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Kl||(Kl={}));var oh;(function(e){e.Optimized="optimized"})(oh||(oh={}));const N0=new Map;function R_(e,n){let{dragging:r,dependencies:i,config:c}=n;const[u,d]=p.useState(null),{frequency:m,measure:x,strategy:g}=c,b=p.useRef(e),v=C(),w=Wl(v),S=p.useCallback(function(k){k===void 0&&(k=[]),!w.current&&d(_=>_===null?k:_.concat(k.filter(A=>!_.includes(A))))},[w]),N=p.useRef(null),j=ao(k=>{if(v&&!r)return N0;if(!k||k===N0||b.current!==e||u!=null){const _=new Map;for(let A of e){if(!A)continue;if(u&&u.length>0&&!u.includes(A.id)&&A.rect.current){_.set(A.id,A.rect.current);continue}const L=A.node.current,O=L?new Ph(x(L),L):null;A.rect.current=O,O&&_.set(A.id,O)}return _}return k},[e,u,r,v,x]);return p.useEffect(()=>{b.current=e},[e]),p.useEffect(()=>{v||S()},[r,v]),p.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),p.useEffect(()=>{v||typeof m!="number"||N.current!==null||(N.current=setTimeout(()=>{S(),N.current=null},m))},[m,v,S,...i]),{droppableRects:j,measureDroppableContainers:S,measuringScheduled:u!=null};function C(){switch(g){case Kl.Always:return!1;case Kl.BeforeDragging:return r;default:return!r}}}function Wv(e,n){return ao(r=>e?r||(typeof n=="function"?n(e):e):null,[n,e])}function D_(e,n){return Wv(e,n)}function M_(e){let{callback:n,disabled:r}=e;const i=Fh(n),c=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(i)},[i,r]);return p.useEffect(()=>()=>c?.disconnect(),[c]),c}function lu(e){let{callback:n,disabled:r}=e;const i=Fh(n),c=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(i)},[r]);return p.useEffect(()=>()=>c?.disconnect(),[c]),c}function z_(e){return new Ph($i(e),e)}function _0(e,n,r){n===void 0&&(n=z_);const[i,c]=p.useState(null);function u(){c(x=>{if(!e)return null;if(e.isConnected===!1){var g;return(g=x??r)!=null?g:null}const b=n(e);return JSON.stringify(x)===JSON.stringify(b)?x:b})}const d=M_({callback(x){if(e)for(const g of x){const{type:b,target:v}=g;if(b==="childList"&&v instanceof HTMLElement&&v.contains(e)){u();break}}}}),m=lu({callback:u});return Ks(()=>{u(),e?(m?.observe(e),d?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),d?.disconnect())},[e]),i}function O_(e){const n=Wv(e);return Bv(e,n)}const C0=[];function L_(e){const n=p.useRef(e),r=ao(i=>e?i&&i!==C0&&e&&n.current&&e.parentNode===n.current.parentNode?i:Vh(e):C0,[e]);return p.useEffect(()=>{n.current=e},[e]),r}function U_(e){const[n,r]=p.useState(null),i=p.useRef(e),c=p.useCallback(u=>{const d=Of(u.target);d&&r(m=>m?(m.set(d,ih(d)),new Map(m)):null)},[]);return p.useEffect(()=>{const u=i.current;if(e!==u){d(u);const m=e.map(x=>{const g=Of(x);return g?(g.addEventListener("scroll",c,{passive:!0}),[g,ih(g)]):null}).filter(x=>x!=null);r(m.length?new Map(m):null),i.current=e}return()=>{d(e),d(u)};function d(m){m.forEach(x=>{const g=Of(x);g?.removeEventListener("scroll",c)})}},[c,e]),p.useMemo(()=>e.length?n?Array.from(n.values()).reduce((u,d)=>Ti(u,d),zs):Pv(e):zs,[e,n])}function k0(e,n){n===void 0&&(n=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},n),p.useEffect(()=>{const i=e!==zs;i&&!r.current&&(r.current=e),!i&&r.current&&(r.current=null)},[e]),r.current?Vc(e,r.current):zs}function $_(e){p.useEffect(()=>{if(!iu)return;const n=e.map(r=>{let{sensor:i}=r;return i.setup==null?void 0:i.setup()});return()=>{for(const r of n)r?.()}},e.map(n=>{let{sensor:r}=n;return r}))}function B_(e,n){return p.useMemo(()=>e.reduce((r,i)=>{let{eventName:c,handler:u}=i;return r[c]=d=>{u(d,n)},r},{}),[e,n])}function Gv(e){return p.useMemo(()=>e?c_(e):null,[e])}const T0=[];function q_(e,n){n===void 0&&(n=$i);const[r]=e,i=Gv(r?Gn(r):null),[c,u]=p.useState(T0);function d(){u(()=>e.length?e.map(x=>Zv(x)?i:new Ph(n(x),x)):T0)}const m=lu({callback:d});return Ks(()=>{m?.disconnect(),d(),e.forEach(x=>m?.observe(x))},[e]),c}function H_(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return ro(n)?n:e}function F_(e){let{measure:n}=e;const[r,i]=p.useState(null),c=p.useCallback(g=>{for(const{target:b}of g)if(ro(b)){i(v=>{const w=n(b);return v?{...v,width:w.width,height:w.height}:w});break}},[n]),u=lu({callback:c}),d=p.useCallback(g=>{const b=H_(g);u?.disconnect(),b&&u?.observe(b),i(b?n(b):null)},[n,u]),[m,x]=Zc(d);return p.useMemo(()=>({nodeRef:m,rect:r,setRef:x}),[r,m,x])}const Z_=[{sensor:Ih,options:{}},{sensor:Iv,options:{}}],V_={current:{}},zc={draggable:{measure:w0},droppable:{measure:w0,strategy:Kl.WhileDragging,frequency:oh.Optimized},dragOverlay:{measure:$i}};class Hl extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,i;return(r=(i=this.get(n))==null?void 0:i.node.current)!=null?r:void 0}}const P_={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Hl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Pc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:zc,measureDroppableContainers:Pc,windowRect:null,measuringScheduled:!1},Q_={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Pc,draggableNodes:new Map,over:null,measureDroppableContainers:Pc},ou=p.createContext(Q_),Kv=p.createContext(P_);function I_(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Hl}}}function W_(e,n){switch(n.type){case cn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case cn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case cn.DragEnd:case cn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case cn.RegisterDroppable:{const{element:r}=n,{id:i}=r,c=new Hl(e.droppable.containers);return c.set(i,r),{...e,droppable:{...e.droppable,containers:c}}}case cn.SetDroppableDisabled:{const{id:r,key:i,disabled:c}=n,u=e.droppable.containers.get(r);if(!u||i!==u.key)return e;const d=new Hl(e.droppable.containers);return d.set(r,{...u,disabled:c}),{...e,droppable:{...e.droppable,containers:d}}}case cn.UnregisterDroppable:{const{id:r,key:i}=n,c=e.droppable.containers.get(r);if(!c||i!==c.key)return e;const u=new Hl(e.droppable.containers);return u.delete(r),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function G_(e){let{disabled:n}=e;const{active:r,activatorEvent:i,draggableNodes:c}=p.useContext(ou),u=rh(i),d=rh(r?.id);return p.useEffect(()=>{if(!n&&!i&&u&&d!=null){if(!Zh(u)||document.activeElement===u.target)return;const m=c.get(d);if(!m)return;const{activatorNode:x,node:g}=m;if(!x.current&&!g.current)return;requestAnimationFrame(()=>{for(const b of[x.current,g.current]){if(!b)continue;const v=$N(b);if(v){v.focus();break}}})}},[i,n,c,d,u]),null}function K_(e,n){let{transform:r,...i}=n;return e!=null&&e.length?e.reduce((c,u)=>u({transform:c,...i}),r):r}function Y_(e){return p.useMemo(()=>({draggable:{...zc.draggable,...e?.draggable},droppable:{...zc.droppable,...e?.droppable},dragOverlay:{...zc.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function X_(e){let{activeNode:n,measure:r,initialRect:i,config:c=!0}=e;const u=p.useRef(!1),{x:d,y:m}=typeof c=="boolean"?{x:c,y:c}:c;Ks(()=>{if(!d&&!m||!n){u.current=!1;return}if(u.current||!i)return;const g=n?.node.current;if(!g||g.isConnected===!1)return;const b=r(g),v=Bv(b,i);if(d||(v.x=0),m||(v.y=0),u.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const w=qv(g);w&&w.scrollBy({top:v.y,left:v.x})}},[n,d,m,i,r])}const Yv=p.createContext({...zs,scaleX:1,scaleY:1});var Kr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Kr||(Kr={}));const J_=p.memo(function(n){var r,i,c,u;let{id:d,accessibility:m,autoScroll:x=!0,children:g,sensors:b=Z_,collisionDetection:v=n_,measuring:w,modifiers:S,...N}=n;const j=p.useReducer(W_,void 0,I_),[C,k]=j,[_,A]=VN(),[L,O]=p.useState(Kr.Uninitialized),J=L===Kr.Initialized,{draggable:{active:U,nodes:ne,translate:R},droppable:{containers:H}}=C,ae=U!=null?ne.get(U):null,I=p.useRef({initial:null,translated:null}),F=p.useMemo(()=>{var zt;return U!=null?{id:U,data:(zt=ae?.data)!=null?zt:V_,rect:I}:null},[U,ae]),ue=p.useRef(null),[xe,M]=p.useState(null),[G,Y]=p.useState(null),we=Wl(N,Object.values(N)),ie=io("DndDescribedBy",d),T=p.useMemo(()=>H.getEnabled(),[H]),W=Y_(w),{droppableRects:le,measureDroppableContainers:Z,measuringScheduled:X}=R_(T,{dragging:J,dependencies:[R.x,R.y],config:W.droppable}),B=T_(ne,U),P=p.useMemo(()=>G?ah(G):null,[G]),$=yr(),re=D_(B,W.draggable.measure);X_({activeNode:U!=null?ne.get(U):null,config:$.layoutShiftCompensation,initialRect:re,measure:W.draggable.measure});const me=_0(B,W.draggable.measure,re),Me=_0(B?B.parentElement:null),ve=p.useRef({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:ne,draggingNode:null,draggingNodeRect:null,droppableContainers:H,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Oe=H.getNodeFor((r=ve.current.over)==null?void 0:r.id),Be=F_({measure:W.dragOverlay.measure}),Ne=(i=Be.nodeRef.current)!=null?i:B,Le=J?(c=Be.rect)!=null?c:me:null,rn=!!(Be.nodeRef.current&&Be.rect),Et=O_(rn?null:me),Tt=Gv(Ne?Gn(Ne):null),D=L_(J?Oe??B:null),K=q_(D),ce=K_(S,{transform:{x:R.x-Et.x,y:R.y-Et.y,scaleX:1,scaleY:1},activatorEvent:G,active:F,activeNodeRect:me,containerNodeRect:Me,draggingNodeRect:Le,over:ve.current.over,overlayNodeRect:Be.rect,scrollableAncestors:D,scrollableAncestorRects:K,windowRect:Tt}),Ee=P?Ti(P,R):null,ye=U_(D),je=k0(ye),De=k0(ye,[me]),Qe=Ti(ce,je),We=Le?a_(Le,ce):null,Nt=F&&We?v({active:F,collisionRect:We,droppableRects:le,droppableContainers:T,pointerCoordinates:Ee}):null,Se=JN(Nt,"id"),[_e,Fe]=p.useState(null),Mt=rn?ce:Ti(ce,De),nt=s_(Mt,(u=_e?.rect)!=null?u:null,me),Gt=p.useRef(null),_t=p.useCallback((zt,yt)=>{let{sensor:At,options:kn}=yt;if(ue.current==null)return;const fn=ne.get(ue.current);if(!fn)return;const hn=zt.nativeEvent,mn=new At({active:ue.current,activeNode:fn,event:hn,options:kn,context:ve,onAbort(qt){if(!ne.get(qt))return;const{onDragAbort:yn}=we.current,Tn={id:qt};yn?.(Tn),_({type:"onDragAbort",event:Tn})},onPending(qt,vn,yn,Tn){if(!ne.get(qt))return;const{onDragPending:Ke}=we.current,An={id:qt,constraint:vn,initialCoordinates:yn,offset:Tn};Ke?.(An),_({type:"onDragPending",event:An})},onStart(qt){const vn=ue.current;if(vn==null)return;const yn=ne.get(vn);if(!yn)return;const{onDragStart:Tn}=we.current,Kn={activatorEvent:hn,active:{id:vn,data:yn.data,rect:I}};vs.unstable_batchedUpdates(()=>{Tn?.(Kn),O(Kr.Initializing),k({type:cn.DragStart,initialCoordinates:qt,active:vn}),_({type:"onDragStart",event:Kn}),M(Gt.current),Y(hn)})},onMove(qt){k({type:cn.DragMove,coordinates:qt})},onEnd:Ln(cn.DragEnd),onCancel:Ln(cn.DragCancel)});Gt.current=mn;function Ln(qt){return async function(){const{active:yn,collisions:Tn,over:Kn,scrollAdjustedTranslate:Ke}=ve.current;let An=null;if(yn&&Ke){const{cancelDrop:Ot}=we.current;An={activatorEvent:hn,active:yn,collisions:Tn,delta:Ke,over:Kn},qt===cn.DragEnd&&typeof Ot=="function"&&await Promise.resolve(Ot(An))&&(qt=cn.DragCancel)}ue.current=null,vs.unstable_batchedUpdates(()=>{k({type:qt}),O(Kr.Uninitialized),Fe(null),M(null),Y(null),Gt.current=null;const Ot=qt===cn.DragEnd?"onDragEnd":"onDragCancel";if(An){const Un=we.current[Ot];Un?.(An),_({type:Ot,event:An})}})}}},[ne]),vr=p.useCallback((zt,yt)=>(At,kn)=>{const fn=At.nativeEvent,hn=ne.get(kn);if(ue.current!==null||!hn||fn.dndKit||fn.defaultPrevented)return;const mn={active:hn};zt(At,yt.options,mn)===!0&&(fn.dndKit={capturedBy:yt.sensor},ue.current=kn,_t(At,yt))},[ne,_t]),Os=A_(b,vr);$_(b),Ks(()=>{me&&L===Kr.Initializing&&O(Kr.Initialized)},[me,L]),p.useEffect(()=>{const{onDragMove:zt}=we.current,{active:yt,activatorEvent:At,collisions:kn,over:fn}=ve.current;if(!yt||!At)return;const hn={active:yt,activatorEvent:At,collisions:kn,delta:{x:Qe.x,y:Qe.y},over:fn};vs.unstable_batchedUpdates(()=>{zt?.(hn),_({type:"onDragMove",event:hn})})},[Qe.x,Qe.y]),p.useEffect(()=>{const{active:zt,activatorEvent:yt,collisions:At,droppableContainers:kn,scrollAdjustedTranslate:fn}=ve.current;if(!zt||ue.current==null||!yt||!fn)return;const{onDragOver:hn}=we.current,mn=kn.get(Se),Ln=mn&&mn.rect.current?{id:mn.id,rect:mn.rect.current,data:mn.data,disabled:mn.disabled}:null,qt={active:zt,activatorEvent:yt,collisions:At,delta:{x:fn.x,y:fn.y},over:Ln};vs.unstable_batchedUpdates(()=>{Fe(Ln),hn?.(qt),_({type:"onDragOver",event:qt})})},[Se]),Ks(()=>{ve.current={activatorEvent:G,active:F,activeNode:B,collisionRect:We,collisions:Nt,droppableRects:le,draggableNodes:ne,draggingNode:Ne,draggingNodeRect:Le,droppableContainers:H,over:_e,scrollableAncestors:D,scrollAdjustedTranslate:Qe},I.current={initial:Le,translated:We}},[F,B,Nt,We,ne,Ne,Le,le,H,_e,D,Qe]),__({...$,delta:R,draggingRect:We,pointerCoordinates:Ee,scrollableAncestors:D,scrollableAncestorRects:K});const qi=p.useMemo(()=>({active:F,activeNode:B,activeNodeRect:me,activatorEvent:G,collisions:Nt,containerNodeRect:Me,dragOverlay:Be,draggableNodes:ne,droppableContainers:H,droppableRects:le,over:_e,measureDroppableContainers:Z,scrollableAncestors:D,scrollableAncestorRects:K,measuringConfiguration:W,measuringScheduled:X,windowRect:Tt}),[F,B,me,G,Nt,Me,Be,ne,H,le,_e,Z,D,K,W,X,Tt]),Ls=p.useMemo(()=>({activatorEvent:G,activators:Os,active:F,activeNodeRect:me,ariaDescribedById:{draggable:ie},dispatch:k,draggableNodes:ne,over:_e,measureDroppableContainers:Z}),[G,Os,F,me,k,ie,ne,_e,Z]);return bt.createElement($v.Provider,{value:A},bt.createElement(ou.Provider,{value:Ls},bt.createElement(Kv.Provider,{value:qi},bt.createElement(Yv.Provider,{value:nt},g)),bt.createElement(G_,{disabled:m?.restoreFocus===!1})),bt.createElement(IN,{...m,hiddenTextDescribedById:ie}));function yr(){const zt=xe?.autoScrollEnabled===!1,yt=typeof x=="object"?x.enabled===!1:x===!1,At=J&&!zt&&!yt;return typeof x=="object"?{...x,enabled:At}:{enabled:At}}}),eC=p.createContext(null),A0="button",tC="Draggable";function nC(e){let{id:n,data:r,disabled:i=!1,attributes:c}=e;const u=io(tC),{activators:d,activatorEvent:m,active:x,activeNodeRect:g,ariaDescribedById:b,draggableNodes:v,over:w}=p.useContext(ou),{role:S=A0,roleDescription:N="draggable",tabIndex:j=0}=c??{},C=x?.id===n,k=p.useContext(C?Yv:eC),[_,A]=Zc(),[L,O]=Zc(),J=B_(d,n),U=Wl(r);Ks(()=>(v.set(n,{id:n,key:u,node:_,activatorNode:L,data:U}),()=>{const R=v.get(n);R&&R.key===u&&v.delete(n)}),[v,n]);const ne=p.useMemo(()=>({role:S,tabIndex:j,"aria-disabled":i,"aria-pressed":C&&S===A0?!0:void 0,"aria-roledescription":N,"aria-describedby":b.draggable}),[i,S,j,C,N,b.draggable]);return{active:x,activatorEvent:m,activeNodeRect:g,attributes:ne,isDragging:C,listeners:i?void 0:J,node:_,over:w,setNodeRef:A,setActivatorNodeRef:O,transform:k}}function sC(){return p.useContext(Kv)}const rC="Droppable",aC={timeout:25};function iC(e){let{data:n,disabled:r=!1,id:i,resizeObserverConfig:c}=e;const u=io(rC),{active:d,dispatch:m,over:x,measureDroppableContainers:g}=p.useContext(ou),b=p.useRef({disabled:r}),v=p.useRef(!1),w=p.useRef(null),S=p.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:C}={...aC,...c},k=Wl(j??i),_=p.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{g(Array.isArray(k.current)?k.current:[k.current]),S.current=null},C)},[C]),A=lu({callback:_,disabled:N||!d}),L=p.useCallback((ne,R)=>{A&&(R&&(A.unobserve(R),v.current=!1),ne&&A.observe(ne))},[A]),[O,J]=Zc(L),U=Wl(n);return p.useEffect(()=>{!A||!O.current||(A.disconnect(),v.current=!1,A.observe(O.current))},[O,A]),p.useEffect(()=>(m({type:cn.RegisterDroppable,element:{id:i,key:u,disabled:r,node:O,rect:w,data:U}}),()=>m({type:cn.UnregisterDroppable,key:u,id:i})),[i]),p.useEffect(()=>{r!==b.current.disabled&&(m({type:cn.SetDroppableDisabled,id:i,key:u,disabled:r}),b.current.disabled=r)},[i,u,r,m]),{active:d,rect:w,isOver:x?.id===i,node:O,over:x,setNodeRef:J}}function Xv(e,n,r){const i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}function lC(e,n){return e.reduce((r,i,c)=>{const u=n.get(i);return u&&(r[c]=u),r},Array(e.length))}function Nc(e){return e!==null&&e>=0}function oC(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function cC(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const _c={scaleX:1,scaleY:1},uC=e=>{var n;let{rects:r,activeNodeRect:i,activeIndex:c,overIndex:u,index:d}=e;const m=(n=r[c])!=null?n:i;if(!m)return null;const x=dC(r,d,c);if(d===c){const g=r[u];return g?{x:c<u?g.left+g.width-(m.left+m.width):g.left-m.left,y:0,..._c}:null}return d>c&&d<=u?{x:-m.width-x,y:0,..._c}:d<c&&d>=u?{x:m.width+x,y:0,..._c}:{x:0,y:0,..._c}};function dC(e,n,r){const i=e[n],c=e[n-1],u=e[n+1];return!i||!c&&!u?0:r<n?c?i.left-(c.left+c.width):u.left-(i.left+i.width):u?u.left-(i.left+i.width):i.left-(c.left+c.width)}const Jv=e=>{let{rects:n,activeIndex:r,overIndex:i,index:c}=e;const u=Xv(n,i,r),d=n[c],m=u[c];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},ey="Sortable",ty=bt.createContext({activeIndex:-1,containerId:ey,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jv,disabled:{draggable:!1,droppable:!1}});function fC(e){let{children:n,id:r,items:i,strategy:c=Jv,disabled:u=!1}=e;const{active:d,dragOverlay:m,droppableRects:x,over:g,measureDroppableContainers:b}=sC(),v=io(ey,r),w=m.rect!==null,S=p.useMemo(()=>i.map(J=>typeof J=="object"&&"id"in J?J.id:J),[i]),N=d!=null,j=d?S.indexOf(d.id):-1,C=g?S.indexOf(g.id):-1,k=p.useRef(S),_=!oC(S,k.current),A=C!==-1&&j===-1||_,L=cC(u);Ks(()=>{_&&N&&b(S)},[_,S,N,b]),p.useEffect(()=>{k.current=S},[S]);const O=p.useMemo(()=>({activeIndex:j,containerId:v,disabled:L,disableTransforms:A,items:S,overIndex:C,useDragOverlay:w,sortedRects:lC(S,x),strategy:c}),[j,v,L.draggable,L.droppable,A,S,C,x,w,c]);return bt.createElement(ty.Provider,{value:O},n)}const hC=e=>{let{id:n,items:r,activeIndex:i,overIndex:c}=e;return Xv(r,i,c).indexOf(n)},mC=e=>{let{containerId:n,isSorting:r,wasDragging:i,index:c,items:u,newIndex:d,previousItems:m,previousContainerId:x,transition:g}=e;return!g||!i||m!==u&&c===d?!1:r?!0:d!==c&&n===x},pC={duration:200,easing:"ease"},ny="transform",gC=Gl.Transition.toString({property:ny,duration:0,easing:"linear"}),xC={roleDescription:"sortable"};function bC(e){let{disabled:n,index:r,node:i,rect:c}=e;const[u,d]=p.useState(null),m=p.useRef(r);return Ks(()=>{if(!n&&r!==m.current&&i.current){const x=c.current;if(x){const g=$i(i.current,{ignoreTransform:!0}),b={x:x.left-g.left,y:x.top-g.top,scaleX:x.width/g.width,scaleY:x.height/g.height};(b.x||b.y)&&d(b)}}r!==m.current&&(m.current=r)},[n,r,i,c]),p.useEffect(()=>{u&&d(null)},[u]),u}function vC(e){let{animateLayoutChanges:n=mC,attributes:r,disabled:i,data:c,getNewIndex:u=hC,id:d,strategy:m,resizeObserverConfig:x,transition:g=pC}=e;const{items:b,containerId:v,activeIndex:w,disabled:S,disableTransforms:N,sortedRects:j,overIndex:C,useDragOverlay:k,strategy:_}=p.useContext(ty),A=yC(i,S),L=b.indexOf(d),O=p.useMemo(()=>({sortable:{containerId:v,index:L,items:b},...c}),[v,c,L,b]),J=p.useMemo(()=>b.slice(b.indexOf(d)),[b,d]),{rect:U,node:ne,isOver:R,setNodeRef:H}=iC({id:d,data:O,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:J,...x}}),{active:ae,activatorEvent:I,activeNodeRect:F,attributes:ue,setNodeRef:xe,listeners:M,isDragging:G,over:Y,setActivatorNodeRef:we,transform:ie}=nC({id:d,data:O,attributes:{...xC,...r},disabled:A.draggable}),T=zN(H,xe),W=!!ae,le=W&&!N&&Nc(w)&&Nc(C),Z=!k&&G,X=Z&&le?ie:null,P=le?X??(m??_)({rects:j,activeNodeRect:F,activeIndex:w,overIndex:C,index:L}):null,$=Nc(w)&&Nc(C)?u({id:d,items:b,activeIndex:w,overIndex:C}):L,re=ae?.id,me=p.useRef({activeId:re,items:b,newIndex:$,containerId:v}),Me=b!==me.current.items,ve=n({active:ae,containerId:v,isDragging:G,isSorting:W,id:d,index:L,items:b,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:g,wasDragging:me.current.activeId!=null}),Oe=bC({disabled:!ve,index:L,node:ne,rect:U});return p.useEffect(()=>{W&&me.current.newIndex!==$&&(me.current.newIndex=$),v!==me.current.containerId&&(me.current.containerId=v),b!==me.current.items&&(me.current.items=b)},[W,$,v,b]),p.useEffect(()=>{if(re===me.current.activeId)return;if(re!=null&&me.current.activeId==null){me.current.activeId=re;return}const Ne=setTimeout(()=>{me.current.activeId=re},50);return()=>clearTimeout(Ne)},[re]),{active:ae,activeIndex:w,attributes:ue,data:O,rect:U,index:L,newIndex:$,items:b,isOver:R,isSorting:W,isDragging:G,listeners:M,node:ne,overIndex:C,over:Y,setNodeRef:T,setActivatorNodeRef:we,setDroppableNodeRef:H,setDraggableNodeRef:xe,transform:Oe??P,transition:Be()};function Be(){if(Oe||Me&&me.current.newIndex===L)return gC;if(!(Z&&!Zh(I)||!g)&&(W||ve))return Gl.Transition.toString({...g,property:ny})}}function yC(e,n){var r,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:n.draggable,droppable:(i=e?.droppable)!=null?i:n.droppable}}ot.Down,ot.Right,ot.Up,ot.Left;const wC=232,jC=30,ja=6;function Ai({open:e,position:n,onClose:r,items:i,appearance:c="dark"}){const u=p.useRef(null),d=p.useRef([]),[m,x]=p.useState(null),g=p.useMemo(()=>i.findIndex(S=>!S.disabled),[i]),[b,v]=p.useState(()=>g>=0?g:0);if(p.useEffect(()=>{if(!e||!n||typeof window>"u"){x(null);return}const S=i.length*jC+ja*2,N=Math.max(ja,(window.innerWidth||0)-wC-ja),j=Math.max(ja,(window.innerHeight||0)-S-ja),C=Math.min(Math.max(n.x,ja),N),k=Math.min(Math.max(n.y,ja),j);x({x:C,y:k})},[e,n,i.length]),p.useEffect(()=>{e&&v(g>=0?g:0)},[e,g]),p.useEffect(()=>{if(!e)return;d.current[b]?.focus()},[e,b]),p.useEffect(()=>{if(!e||typeof window>"u")return;const S=C=>{u.current&&(u.current.contains(C.target)||r())},N=C=>{if(u.current){if(u.current.contains(C.target)){C.preventDefault();return}r()}},j=C=>{if(C.key==="Escape"){C.preventDefault(),r();return}if(C.key==="ArrowDown"||C.key==="ArrowUp"){C.preventDefault();const k=C.key==="ArrowDown"?1:-1;v(_=>{if(i.length===0)return _;let A=_;for(let L=0;L<i.length;L+=1)if(A=(A+k+i.length)%i.length,!i[A]?.disabled)return A;return _});return}if(C.key==="Enter"||C.key===" "){C.preventDefault();const k=i[b];k&&!k.disabled&&(k.onSelect(),r())}};return window.addEventListener("mousedown",S),window.addEventListener("contextmenu",N),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",S),window.removeEventListener("contextmenu",N),window.removeEventListener("keydown",j)}},[e,r,i,b]),!e||!n||typeof window>"u"||!m)return null;const w=c==="dark"?{bg:"bg-[#1f1f1f] text-[#f3f3f3]",border:"border-[#3c3c3c]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.55)]",item:"hover:bg-[#094771] focus-visible:bg-[#094771]",disabled:"text-[#7a7a7a]",danger:"text-[#f48771] hover:text-white hover:bg-[#be1a1a] focus-visible:bg-[#be1a1a]",shortcut:"text-[#9f9f9f]",separator:"border-[#3f3f3f]"}:{bg:"bg-[#fdfdfd] text-[#1f1f1f]",border:"border-[#cfcfcf]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.15)]",item:"hover:bg-[#dfe9f6] focus-visible:bg-[#dfe9f6]",disabled:"text-[#9c9c9c]",danger:"text-[#b02020] hover:bg-[#fde7e7] focus-visible:bg-[#fde7e7]",shortcut:"text-[#6d6d6d]",separator:"border-[#e0e0e0]"};return vs.createPortal(l.jsx("div",{ref:u,role:"menu",className:he("z-[60] min-w-[200px] rounded-sm border backdrop-blur-sm",w.bg,w.border,w.shadow),style:{top:m.y,left:m.x,position:"fixed"},children:l.jsx("ul",{className:"py-1",role:"none",children:i.map((S,N)=>{const j=!!S.disabled,C=!!S.danger;return l.jsxs(p.Fragment,{children:[S.dividerAbove?l.jsx("li",{role:"separator",className:he("mx-2 my-1 border-t",w.separator)}):null,l.jsx("li",{role:"none",children:l.jsxs("button",{ref:k=>{d.current[N]=k},type:"button",role:"menuitem",className:he("flex w-full items-center justify-between gap-6 px-3 py-1.5 text-[13px] leading-5 outline-none transition",w.item,j&&w.disabled,C&&!j&&w.danger,j&&"cursor-default"),onClick:k=>{k.stopPropagation(),!j&&(S.onSelect(),r())},onMouseEnter:()=>{j||v(N)},disabled:j,children:[l.jsxs("span",{className:"flex min-w-0 items-center gap-3",children:[S.icon?l.jsx("span",{className:"text-base opacity-80",children:S.icon}):l.jsx("span",{className:"inline-block h-4 w-4"}),l.jsx("span",{className:"truncate",children:S.label})]}),S.shortcut?l.jsx("span",{className:he("text-[11px] uppercase tracking-wide",w.shortcut),children:S.shortcut}):null]})})]},S.id)})})}),window.document.body)}const br="h-4 w-4 text-current opacity-80";function SC({filled:e}){return e?l.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"currentColor",className:"text-slate-500"})}):l.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"none",stroke:"currentColor",strokeWidth:"1.2",className:"text-slate-400"})})}function EC(){return l.jsxs("svg",{className:"h-3 w-3 animate-spin text-brand-500",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"1.2",opacity:"0.3"}),l.jsx("path",{d:"M14 8a6 6 0 0 0-6-6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function NC(){return l.jsxs("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M4 2.5h7.5L13.5 5v8.5H4z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function _C(){return l.jsxs("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 3.5h6l3 3v5.5h-9z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 3.5v3.5h3.5v-3.5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M5 11h4",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),l.jsx("path",{d:"M6.5 6.5h6l1.5 1.5v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",opacity:"0.6"})]})}function CC(){return l.jsx("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M4 4l8 8m0-8l-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function kC(){return l.jsxs("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("rect",{x:"2.5",y:"3",width:"8",height:"10",rx:"1.2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),l.jsx("path",{d:"M7 7l5 5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function TC(){return l.jsxs("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M5 3v10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M7 5l5 3-5 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M12 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function AC(){return l.jsxs("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 4h3a1 1 0 0 1 1 1v7.5M12.5 12h-3a1 1 0 0 1-1-1V3.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M5 6l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function sy(){return l.jsx("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5.5 2.5h5l.5 4h2v1.5h-4V13l-1-.5V8h-3V6.5h3z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function RC(){return l.jsx("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M3.5 3.5l9 9M5.5 2.5h5l.5 4h2v1.5H10M8 8v4.5L7 12.5V8H4V6.5h1",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function DC(){return l.jsx("svg",{className:br,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 2.5h4l2.5 2.5V13.5H5z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"})})}function MC(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M10 3L5 8l5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function zC(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6 3l5 5-5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function OC(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function LC({tab:e,isActive:n,isDirty:r,draggingId:i,onContextMenu:c,onCloseTab:u,setTabNode:d}){const{attributes:m,listeners:x,setNodeRef:g,transform:b,transition:v,isDragging:w}=vC({id:e.id}),S={transform:Gl.Transform.toString(b),transition:v},N=w||i===e.id,j=!!e.pinned;return l.jsxs("div",{ref:C=>{g(C),d(e.id,C)},style:S,className:he("group relative mr-1 flex min-w-0 items-stretch",N&&"opacity-60"),"data-editor-tab":"true",onContextMenu:c,onMouseDown:C=>{C.button===1&&(C.preventDefault(),u(e.id))},...m,...x,children:[l.jsxs(nh,{value:e.id,"data-tab-id":e.id,title:e.id,className:he("relative flex min-w-[3rem] max-w-[16rem] items-center gap-2 overflow-hidden rounded-t-lg border px-2 py-1.5 pr-8 text-sm font-medium transition-[background-color,border-color,color] duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50",n?"border-slate-200 border-b-white bg-white text-slate-900 shadow-[0_1px_0_rgba(15,23,42,0.08)]":"border-transparent border-b-slate-200 text-slate-500 hover:border-slate-200 hover:bg-white/70 hover:text-slate-900",j?"min-w-[4rem] max-w-[8rem] justify-center":"min-w-[9rem] justify-start px-3"),children:[j?l.jsx("span",{className:"flex-none text-[12px]","aria-label":"Pinned",children:l.jsx(SC,{filled:n})}):null,l.jsx("span",{className:"block min-w-0 flex-1 truncate text-left",children:e.name}),e.status==="loading"?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-slate-400","aria-label":"Loading",children:""}):null,e.status==="error"?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Load failed",children:"!"}):null,e.saving?l.jsx("span",{className:"flex-none","aria-label":"Saving",title:"Saving changes",children:l.jsx(EC,{})}):null,e.saveError?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Save failed",title:e.saveError,children:"!"}):null,r?l.jsx("span",{className:"flex-none text-xs leading-none text-brand-600",children:""}):null]}),l.jsx("button",{type:"button",className:he("absolute right-1 top-1/2 -translate-y-1/2 rounded p-0.5 text-xs transition focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-1 focus-visible:ring-offset-white",n?"text-slate-500 hover:bg-slate-200 hover:text-slate-900":"text-slate-400 opacity-0 group-hover:opacity-100 hover:bg-slate-200 hover:text-slate-700"),onClick:C=>{C.stopPropagation(),u(e.id)},"aria-label":`Close ${e.name}`,children:""})]})}function UC({currentTab:e,tabs:n,canSaveFiles:r,hasDirtyTabs:i,onCloseTab:c,onCloseOtherTabs:u,onCloseTabsToRight:d,onCloseAllTabs:m,onPinTab:x,onUnpinTab:g,onSaveTab:b,onSaveAllTabs:v}){const w=n.findIndex(A=>A.id===e.id),S=w>=0&&w<n.length-1,N=n.length>1,j=e.status==="ready"&&e.content!==e.initialContent,C=!!b&&r&&j&&!e.saving,k=!!v&&r&&i,_={save:"Ctrl+S",saveAll:"Ctrl+Shift+S",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W"};return[{id:"save",label:e.saving?"Saving":"Save",icon:l.jsx(NC,{}),disabled:!C,shortcut:_.save,onSelect:()=>b?.(e.id)},{id:"save-all",label:"Save All",icon:l.jsx(_C,{}),disabled:!k,shortcut:_.saveAll,onSelect:()=>v?.()},{id:"pin",label:e.pinned?"Unpin":"Pin",icon:e.pinned?l.jsx(RC,{}):l.jsx(sy,{}),dividerAbove:!0,onSelect:()=>e.pinned?g(e.id):x(e.id)},{id:"close",label:"Close",icon:l.jsx(CC,{}),dividerAbove:!0,shortcut:_.close,onSelect:()=>c(e.id)},{id:"close-others",label:"Close Others",icon:l.jsx(kC,{}),disabled:!N,shortcut:_.closeOthers,onSelect:()=>u(e.id)},{id:"close-right",label:"Close Tabs to the Right",icon:l.jsx(TC,{}),disabled:!S,shortcut:_.closeRight,onSelect:()=>d(e.id)},{id:"close-all",label:"Close All",icon:l.jsx(AC,{}),dividerAbove:!0,disabled:n.length===0,shortcut:_.closeAll,onSelect:()=>m()}]}function $C({pinnedTabs:e,regularTabs:n,activeTabId:r,onSelectTab:i}){if(e.length===0&&n.length===0)return[{id:"empty",label:"No open editors",onSelect:()=>{},disabled:!0}];const c=[],u=(d,m)=>{const x=d.status==="ready"&&d.content!==d.initialContent,g=[];d.id===r&&g.push("Active"),d.saving?g.push("Saving"):x&&g.push("Unsaved"),c.push({id:`switch-${d.id}`,label:`${d.saving?" ":x?" ":""}${d.name}`,icon:d.pinned?l.jsx(sy,{}):l.jsx(DC,{}),shortcut:g.length>0?g.join("  "):void 0,dividerAbove:m,onSelect:()=>i(d.id)})};return e.forEach(d=>u(d,!1)),n.forEach((d,m)=>u(d,m===0&&e.length>0)),c}const R0=220,D0=64,BC=14;function qC({tabs:e,activeTabId:n,menuAppearance:r,canSaveFiles:i=!1,onSelectTab:c,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:m,onCloseAllTabs:x,onMoveTab:g,onPinTab:b,onUnpinTab:v,onSaveTab:w,onSaveAllTabs:S,onTabDragStateChange:N}){const[j,C]=p.useState(null),[k,_]=p.useState(null),[A,L]=p.useState(null),[O,J]=p.useState({left:!1,right:!1}),[U,ne]=p.useState(0),R=p.useRef(null),H=p.useRef(null),ae=p.useRef(new Map),I=p.useMemo(()=>e.filter($=>$.pinned),[e]),F=p.useMemo(()=>e.filter($=>!$.pinned),[e]),xe=p.useMemo(()=>e.filter($=>$.status==="ready"&&$.content!==$.initialContent),[e]).length>0,M=GN(WN(Ih,{activationConstraint:{distance:5}})),G=r==="dark"?"border-[#1f2937] bg-[#0f172a]":"border-slate-200 bg-slate-900/5",Y=r==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white focus-visible:ring-white/30 focus-visible:ring-offset-0":"text-slate-500 hover:bg-white hover:text-slate-900 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5",we=p.useCallback(($,re)=>{const me=ae.current;re?me.set($,re):me.delete($)},[]);p.useEffect(()=>{j&&!e.some($=>$.id===j.tabId)&&C(null),e.length||_(null)},[j,e]);const ie=p.useCallback($=>{L(String($.active.id)),N?.(!0)},[N]),T=p.useCallback($=>{const re=$.active.id,me=$.over?.id;if(me&&re!==me){const Me=e.findIndex(Oe=>Oe.id===re),ve=e.findIndex(Oe=>Oe.id===me);if(Me!==-1&&ve!==-1){const Oe=Me<ve?ve+1:ve;g(String(re),Oe)}}L(null),N?.(!1)},[g,N,e]),W=p.useCallback(()=>{L(null),N?.(!1)},[N]),le=p.useCallback(()=>{const $=R.current;if(!$){J({left:!1,right:!1});return}const{scrollLeft:re,scrollWidth:me,clientWidth:Me}=$;J({left:re>2,right:re+Me<me-2})},[]);p.useEffect(()=>{const $=R.current;if(!$){J({left:!1,right:!1});return}le();const re=()=>le();$.addEventListener("scroll",re),window.addEventListener("resize",le);const me=typeof ResizeObserver<"u"?new ResizeObserver(le):null;return me?.observe($),()=>{$.removeEventListener("scroll",re),window.removeEventListener("resize",le),me?.disconnect()}},[e.length,le]),p.useEffect(()=>{if(!A){ne(0);return}const $=re=>{const me=R.current;if(!me){ne(0);return}const Me=me.getBoundingClientRect();re.clientX<Me.left+D0?ne(-1):re.clientX>Me.right-D0?ne(1):ne(0)};return window.addEventListener("pointermove",$),()=>{window.removeEventListener("pointermove",$),ne(0)}},[A]),p.useEffect(()=>{if(!A||U===0)return;let $;const re=()=>{const me=R.current;me&&(me.scrollBy({left:U*BC}),$=window.requestAnimationFrame(re))};return $=window.requestAnimationFrame(re),()=>window.cancelAnimationFrame($)},[U,A]),p.useEffect(()=>{ae.current.get(n)?.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},[n,e.length]);const Z=p.useMemo(()=>{if(!j)return[];const $=e.find(re=>re.id===j.tabId);return $?UC({currentTab:$,tabs:e,canSaveFiles:i,hasDirtyTabs:xe,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:m,onCloseAllTabs:x,onPinTab:b,onUnpinTab:v,onSaveTab:w,onSaveAllTabs:S}):[]},[i,j,xe,x,d,u,m,b,S,w,v,e]),X=p.useMemo(()=>$C({pinnedTabs:I,regularTabs:F,activeTabId:n,onSelectTab:c}),[I,F,n,c]),B=p.useCallback($=>{R.current?.scrollBy({left:$,behavior:"smooth"})},[]),P=p.useCallback(()=>{const $=H.current?.getBoundingClientRect();$&&_({x:$.left,y:$.bottom+6})},[]);return l.jsxs(l.Fragment,{children:[l.jsx(J_,{sensors:M,collisionDetection:e_,onDragStart:ie,onDragEnd:T,onDragCancel:W,children:l.jsx(fC,{items:e.map($=>$.id),strategy:uC,children:l.jsxs("div",{className:he("flex items-center gap-1 px-1",G,"border-b"),children:[l.jsx(M0,{appearance:r,direction:"left",disabled:!O.left,onClick:()=>B(-R0)}),l.jsxs("div",{className:"relative flex min-w-0 flex-1 items-stretch",children:[O.left?l.jsx(z0,{position:"left",appearance:r}):null,O.right?l.jsx(z0,{position:"right",appearance:r}):null,l.jsx("div",{ref:R,className:"flex min-w-0 flex-1 overflow-x-auto pb-1",onWheel:$=>{Math.abs($.deltaY)>Math.abs($.deltaX)&&($.preventDefault(),R.current?.scrollBy({left:$.deltaY}))},children:l.jsx(Av,{className:"flex min-h-[2.75rem] flex-1 items-end gap-0 px-1",children:e.map($=>{const re=$.status==="ready"&&$.content!==$.initialContent,me=$.id===n;return l.jsx(LC,{tab:$,isActive:me,isDirty:re,draggingId:A,setTabNode:we,onContextMenu:Me=>{Me.preventDefault(),C({tabId:$.id,x:Me.clientX,y:Me.clientY})},onCloseTab:u},$.id)})})})]}),l.jsx(M0,{appearance:r,direction:"right",disabled:!O.right,onClick:()=>B(R0)}),l.jsx("button",{ref:H,type:"button",className:he("mx-1 flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2",Y),"aria-label":"Open editors list",onClick:P,children:l.jsx(OC,{})})]})})}),l.jsx(Ai,{open:!!j,position:j&&{x:j.x,y:j.y},onClose:()=>C(null),items:Z,appearance:r}),l.jsx(Ai,{open:!!k,position:k,onClose:()=>_(null),items:X,appearance:r})]})}function M0({appearance:e,direction:n,disabled:r,onClick:i}){const c=e==="dark"?"hover:bg-white/10 hover:text-white focus-visible:ring-2 focus-visible:ring-white/30":"hover:bg-white hover:text-slate-900 focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5";return l.jsx("button",{type:"button",className:he("flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none",e==="dark"?"text-slate-300":"text-slate-500",r?"cursor-default opacity-30":c),onClick:i,disabled:r,"aria-label":n==="left"?"Scroll tabs left":"Scroll tabs right",children:n==="left"?l.jsx(MC,{}):l.jsx(zC,{})})}function z0({position:e,appearance:n}){const r=n==="dark"?e==="left"?"left-0 bg-gradient-to-r from-[#0f172a] via-[#0f172a]/80 to-transparent":"right-0 bg-gradient-to-l from-[#0f172a] via-[#0f172a]/80 to-transparent":e==="left"?"left-0 bg-gradient-to-r from-slate-100 via-slate-100/70 to-transparent":"right-0 bg-gradient-to-l from-slate-100 via-slate-100/70 to-transparent";return l.jsx("div",{className:he("pointer-events-none absolute top-0 bottom-0 w-8",r)})}function HC({tabs:e,activeTabId:n,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:c,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:m,onPinTab:x,onUnpinTab:g,onContentChange:b,onSaveTab:v,onSaveAllTabs:w,onSelectRecentTab:S,editorTheme:N,menuAppearance:j,canSaveFiles:C=!1,minHeight:k,onRetryTabLoad:_}){const A=e.length>0,L=p.useRef(null),[O,J]=p.useState(!1),U=p.useMemo(()=>e.find(ne=>ne.id===n)??null,[e,n]);return!A||!U?l.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."}):l.jsxs("div",{ref:L,className:"flex min-h-0 min-w-0 flex-1 flex-col",style:k?{minHeight:k}:void 0,"data-editor-area":!0,children:[l.jsx(AN,{containerRef:L,tabs:e,activeTabId:n,onCloseTab:i,onSelectTab:r,onSelectRecentTab:S}),l.jsxs(Tv,{value:U.id,onValueChange:r,children:[l.jsx(qC,{tabs:e,activeTabId:U.id,menuAppearance:j,canSaveFiles:C,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:c,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:m,onPinTab:x,onUnpinTab:g,onSaveTab:v,onSaveAllTabs:w,onTabDragStateChange:J}),l.jsx(MN,{tabs:e,activeTabId:U.id,editorTheme:N,onContentChange:b,onSaveTab:v,canSaveFiles:C,onRetryTabLoad:_,onSelectTab:r,isTabDragging:O})]})]})}const FC={dark:{surface:"#1e1e1e",border:"#252526",heading:"#cccccc",label:"#999999",textPrimary:"#f3f3f3",textMuted:"#c5c5c5",rowHover:"#2a2d2e",folderActiveBg:"transparent",selectionBg:"#2f3136",selectionText:"#f8f8f8",badgeActive:"#4fc1ff",badgeOpen:"#858585",folderIcon:"#c8ae7d",folderIconActive:"#e0c08e",chevronIdle:"#7a7a7a",chevronActive:"#d4d4d4"},light:{surface:"#f3f3f3",border:"#d4d4d4",heading:"#616161",label:"#8a8a8a",textPrimary:"#1e1e1e",textMuted:"#555555",rowHover:"#e8e8e8",folderActiveBg:"transparent",selectionBg:"#dcdcdc",selectionText:"#0f172a",badgeActive:"#0e639c",badgeOpen:"#6b6b6b",folderIcon:"#c0933a",folderIconActive:"#a67c32",chevronIdle:"#7a7a7a",chevronActive:"#3c3c3c"}},ZC={dark:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-[#252526]",light:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-white"};function VC(e){const n=new Set,r=i=>{i.kind==="folder"&&(n.add(i.id),i.children?.forEach(r))};return r(e),n}function $f(e,n,r){const i=new Set;for(const c of e)n.has(c)&&i.add(c);return i.add(r),i}function O0(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function PC({width:e,tree:n,activeFileId:r="",openFileIds:i=[],onSelectFile:c,theme:u,canCreateFile:d=!1,canCreateFolder:m=!1,isCreatingEntry:x=!1,onCreateFile:g,onCreateFolder:b,canDeleteFile:v=!1,deletingFilePath:w=null,canDeleteFolder:S=!1,deletingFolderPath:N=null,onDeleteFile:j,onDeleteFolder:C,expandedStorageKey:k,onHide:_}){const A=p.useMemo(()=>k?Gs(k):null,[k]),L=p.useMemo(()=>VC(n),[n]),[O,J]=p.useState(()=>{const $=A?.get()??null,re=$?new Set($):new Set([n.id]);return $f(re,L,n.id)}),[U,ne]=p.useState(null),[R,H]=p.useState(null),[ae,I]=p.useState(null);p.useEffect(()=>{H(null),I(null)},[n.id]),p.useEffect(()=>{J($=>{const re=$f($,L,n.id);return O0($,re)?$:re})},[L,n.id]),p.useEffect(()=>{if(!A)return;const $=A.get();if(!$)return;const re=$f(new Set($),L,n.id);J(me=>O0(me,re)?me:re)},[A,L,n.id]),p.useEffect(()=>{if(!A)return;const $=Array.from(O).filter(re=>re!==n.id&&L.has(re));A.set($)},[O,A,L,n.id]);const F=p.useCallback($=>{J(re=>{const me=new Set(re);return me.has($)?me.delete($):me.add($),me.add(n.id),me})},[n.id]),ue=p.useCallback(($,re)=>{J(me=>{const Me=new Set(me);return re?Me.add($):$!==n.id&&Me.delete($),Me.add(n.id),Me})},[n.id]),xe=p.useCallback(()=>{J(new Set([n.id]))},[n.id]),M=p.useCallback(($,re)=>{I(null),J(me=>{const Me=new Set(me);return Me.add(n.id),Me.add($),Me}),H({parentId:$,kind:re})},[n.id]),G=p.useCallback(async($,re,me)=>{const Me=re.trim();if(!Me){I("Name cannot be empty.");return}const ve=me==="folder"?b:g;if(ve)try{I(null),await ve($===n.id?"":$,Me),H(null)}catch(Oe){const Be=Oe instanceof Error?Oe.message:"Unable to create entry.";I(Be)}},[g,b,n.id]),Y=p.useCallback(()=>{H(null),I(null)},[]),we=p.useCallback(($,re)=>{$.preventDefault(),ne({node:re,position:{x:$.clientX,y:$.clientY}})},[]),ie=p.useCallback(async $=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText($);return}catch{}if(typeof document>"u")return;const re=document.createElement("textarea");re.value=$,re.setAttribute("readonly","true"),re.style.position="absolute",re.style.left="-9999px",document.body.appendChild(re),re.select(),document.execCommand("copy"),document.body.removeChild(re)},[]),T=p.useCallback($=>{j&&(j($),ne(null))},[j]),W=p.useCallback($=>{C&&(C($),ne(null))},[C]),le=p.useMemo(()=>{if(!U)return[];const{node:$}=U,re={open:"Enter",newFile:"Ctrl+N",newFolder:"Ctrl+Shift+N",copyPath:"Ctrl+K Ctrl+C",collapseAll:"Ctrl+K Ctrl+0",delete:"Delete"};if($.kind==="file")return[{id:"open-file",label:"Open",icon:l.jsx(YC,{}),shortcut:re.open,onSelect:()=>c($.id)},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:l.jsx(U0,{}),shortcut:re.copyPath,onSelect:()=>{ie($.id)}},{id:"delete-file",label:"Delete",icon:l.jsx($0,{}),shortcut:re.delete,disabled:!v||!j,onSelect:()=>T($.id)}];const me=O.has($.id);return[{id:"new-file",label:"New File",icon:l.jsx(ay,{}),shortcut:re.newFile,disabled:!d||!g,onSelect:()=>{!d||!g||(M($.id,"file"),ne(null))}},{id:"new-folder",label:"New Folder",icon:l.jsx(ch,{}),shortcut:re.newFolder,disabled:!m||!b,onSelect:()=>{!m||!b||(M($.id,"folder"),ne(null))}},{id:"toggle-folder",label:me?"Collapse Folder":"Expand Folder",icon:me?l.jsx(XC,{}):l.jsx(JC,{}),onSelect:()=>ue($.id,!me)},{id:"collapse-all",label:"Collapse All",icon:l.jsx(e2,{}),shortcut:re.collapseAll,dividerAbove:!0,onSelect:()=>xe()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:l.jsx(U0,{}),shortcut:re.copyPath,onSelect:()=>{ie($.id)}},{id:"delete-folder",label:"Delete Folder",icon:l.jsx($0,{}),shortcut:re.delete,disabled:!S||!C,onSelect:()=>W($.id)}]},[U,c,ie,v,j,O,ue,xe,d,m,g,b,M,S,C,W,T]),Z=FC[u],X=ZC[u],B=p.useMemo(()=>n.children??[],[n]),P=u==="dark"?"dark":"light";return l.jsxs(l.Fragment,{children:[l.jsxs("aside",{className:"flex h-full min-h-0 flex-col border-r text-[13px]",style:{width:e,backgroundColor:Z.surface,borderColor:Z.border,color:Z.textPrimary},"aria-label":"Config files explorer",children:[l.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",style:{borderColor:Z.border,backgroundColor:u==="dark"?"#181818":"#ececec"},children:[l.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em]",style:{color:Z.heading},children:"Explorer"}),l.jsx("button",{type:"button",onClick:_,"aria-label":"Hide explorer",className:he("flex h-7 w-7 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",u==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white":"text-slate-600 hover:bg-black/10 hover:text-slate-900"),children:l.jsx(KC,{})})]}),l.jsx("nav",{className:"flex-1 overflow-auto px-2 py-2","aria-label":"Workspace files tree",children:l.jsxs("ul",{className:"space-y-0.5",children:[B.map($=>l.jsx(ry,{node:$,depth:0,expanded:O,activeFileId:r,openFileIds:i,onToggleFolder:F,onSelectFile:c,tokens:Z,theme:u,focusRingClass:X,onContextMenu:we,editing:R,onSubmitCreateEntry:G,onCancelCreateEntry:Y,createError:ae,isCreatingEntry:x,deletingFilePath:w,deletingFolderPath:N,onClearCreateError:()=>I(null)},$.id)),R?.parentId===n.id?l.jsx("li",{className:"pl-2",children:l.jsx(iy,{appearance:u,icon:R.kind==="folder"?l.jsx(ch,{}):void 0,placeholder:R.kind==="folder"?"new_folder":"new_file.py",onSubmit:$=>G(n.id,$,R.kind),onCancel:Y,onChange:()=>I(null),isSubmitting:x,error:ae})}):null]})})]}),l.jsx(Ai,{open:!!U,position:U?U.position:null,onClose:()=>ne(null),items:le,appearance:P})]})}function ry({node:e,depth:n,expanded:r,activeFileId:i,openFileIds:c,onToggleFolder:u,onSelectFile:d,tokens:m,theme:x,focusRingClass:g,onContextMenu:b,editing:v,onSubmitCreateEntry:w,onCancelCreateEntry:S,createError:N,isCreatingEntry:j,deletingFilePath:C,deletingFolderPath:k,onClearCreateError:_}){const L={paddingLeft:8+n*16,"--tree-hover-bg":m.rowHover};if(e.kind==="folder"){const H=r.has(e.id),ae=k===e.id,I=v?.parentId===e.id,F={...L,color:H?m.textPrimary:m.textMuted};return H&&m.folderActiveBg!=="transparent"&&(F.backgroundColor=m.folderActiveBg),l.jsxs("li",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>u(e.id),onContextMenu:ue=>b(ue,e),className:he("group flex w-full items-center gap-2 rounded-md px-2 py-1 text-left font-medium transition hover:bg-[var(--tree-hover-bg)]",g,ae&&"opacity-60"),style:F,"aria-expanded":H,disabled:ae,children:[l.jsx(IC,{open:H,tokens:m}),l.jsx(WC,{open:H,tokens:m}),l.jsx("span",{className:"truncate",children:e.name})]}),H?l.jsxs("ul",{className:"mt-0.5 space-y-0.5",children:[e.children?.map(ue=>l.jsx(ry,{node:ue,depth:n+1,expanded:r,activeFileId:i,openFileIds:c,onToggleFolder:u,onSelectFile:d,tokens:m,theme:x,focusRingClass:g,onContextMenu:b,editing:v,onSubmitCreateEntry:w,onCancelCreateEntry:S,createError:N,isCreatingEntry:j,deletingFilePath:C,deletingFolderPath:k,onClearCreateError:_},ue.id)),I?l.jsx("li",{className:"pl-2",children:l.jsx(iy,{appearance:x,icon:v?.kind==="folder"?l.jsx(ch,{}):void 0,placeholder:v?.kind==="folder"?"new_folder":"new_file.py",onSubmit:ue=>{v&&w(e.id,ue,v.kind)},onCancel:S,onChange:_,isSubmitting:j,error:N})}):null]}):null]})}const O=i===e.id,J=c.includes(e.id),U=C===e.id,ne=QC(e.name,e.language),R={...L,color:m.textPrimary};return O&&(R.backgroundColor=m.selectionBg,R.color=m.selectionText),l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>d(e.id),onContextMenu:H=>b(H,e),className:he("flex w-full items-center gap-2 rounded-md px-2 py-1 text-left transition hover:bg-[var(--tree-hover-bg)]",g,O&&"shadow-inner shadow-[#00000033]",U&&"opacity-60"),style:R,disabled:U,children:[l.jsx("span",{className:"inline-flex w-4 justify-center",children:l.jsx(GC,{className:he(ne,J&&!O&&"opacity-90",!J&&!O&&"opacity-75")})}),l.jsx("span",{className:he("flex-1 truncate",O&&"font-semibold"),children:e.name}),J&&!O?l.jsx("span",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:m.badgeOpen}}):null]})})}const L0={json:"text-[#f1d06b]",py:"text-[#519aba]",ts:"text-[#519aba]",tsx:"text-[#519aba]",js:"text-[#f4d13d]",jsx:"text-[#519aba]",md:"text-[#4ec9b0]",env:"text-[#b5cea8]",txt:"text-[#9cdcfe]",lock:"text-[#c586c0]"};function QC(e,n){if(n==="python")return"text-sky-300";const r=e.toLowerCase().split("."),i=r.length>1?r.pop()??"":"";return i&&L0[i]?L0[i]:"text-slate-400"}function IC({open:e,tokens:n}){return l.jsx("svg",{className:he("h-3 w-3 flex-shrink-0 transition-transform duration-150",e?"rotate-90":void 0),viewBox:"0 0 10 10","aria-hidden":!0,children:l.jsx("path",{d:"M3 1l4 4-4 4",stroke:e?n.chevronActive:n.chevronIdle,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}function WC({open:e,tokens:n}){return l.jsx("svg",{className:"h-4 w-4 flex-shrink-0 transition-colors",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M3.5 5.5h4l1.5 1.5H16a1 1 0 0 1 1 1V15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6.5a1 1 0 0 1 1-1Z",stroke:e?n.folderIconActive:n.folderIcon,strokeWidth:1.4,strokeLinejoin:"round",fill:e?n.folderIconActive:"none",opacity:e?.25:1})})}function GC({className:e}){return l.jsxs("svg",{className:he("h-4 w-4 flex-shrink-0",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6 3h4l4 4v9a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 3v4h4",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})]})}function KC(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M3 3h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 13h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 8h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M11 5l2 3-2 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}const Jr="h-4 w-4 text-current opacity-80";function YC(){return l.jsx("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M3 4.5h3l1 1H13a1 1 0 0 1 1 1V12.5a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}function U0(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M6 4.5h5.5a1 1 0 0 1 1 1V13",stroke:"currentColor",strokeWidth:"1.1",strokeLinecap:"round"}),l.jsx("rect",{x:"3.5",y:"2.5",width:"6",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.1",fill:"none"})]})}function XC(){return l.jsx("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 6l3 3 3-3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function ay(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 4.5h4.5l3 3V13a1 1 0 0 1-1 1h-6.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),l.jsx("path",{d:"M11 7.5h-2v-2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M8.5 7.5h2.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function ch(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 5h3.5l1.2 1.4H12.5a1 1 0 0 1 1 1V12a1 1 0 0 1-1 1h-9a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none",strokeLinejoin:"round"}),l.jsx("path",{d:"M8 8v3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M6.5 9.5h3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function JC(){return l.jsx("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 10l3-3 3 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function e2(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3 5h10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 8h6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 11h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function $0(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M6 3.5h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M4 4.5h8",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M5.5 4.5v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M9.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function iy({appearance:e,onSubmit:n,onCancel:r,onChange:i,isSubmitting:c,error:u,placeholder:d="new_file.py",icon:m}){const[x,g]=p.useState(""),b=p.useRef(null);p.useEffect(()=>{b.current?.focus(),b.current?.select()},[]);const v=p.useCallback(()=>{n(x.trim())},[n,x]),w=e==="dark"?"text-slate-300":"text-slate-600",S=e==="dark"?"#232323":"#e8e8e8",N=e==="dark"?"#2f2f2f":"#d4d4d4";return l.jsxs("div",{className:"rounded-md border px-2 py-1",style:{backgroundColor:S,borderColor:N},onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex w-4 justify-center text-[#4fc1ff]",children:m??l.jsx(ay,{})}),l.jsx("input",{ref:b,value:x,onChange:j=>{g(j.target.value),i?.()},onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),v()),j.key==="Escape"&&(j.preventDefault(),r())},className:"flex-1 rounded-sm border border-transparent bg-white/80 px-2 py-1 text-[13px] text-slate-900 outline-none focus:border-[#007acc]",placeholder:d,disabled:c}),l.jsx("button",{type:"button",className:he("rounded-sm px-2 py-1 text-[12px] font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",c?"cursor-wait bg-slate-300 text-slate-500":"bg-[#007acc] text-white hover:bg-[#0e78c6]"),onClick:v,disabled:c,children:c?"Creating":"Create"}),l.jsx("button",{type:"button",className:"rounded-sm px-2 py-1 text-[12px] font-semibold text-slate-500 transition hover:text-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",onClick:r,disabled:c,children:"Cancel"})]}),l.jsx("div",{className:he("mt-1 text-[11px]",w),children:"Enter a name and press Enter. Escape to cancel."}),u?l.jsx("div",{className:"mt-1 text-[11px] font-semibold text-danger-500",children:u}):null]})}function B0({orientation:e,onPointerDown:n,onDoubleClick:r,onToggle:i,collapsed:c}){const u=e==="vertical",d=u?"":c?"":"";return l.jsxs("div",{role:"separator","aria-orientation":e,className:he("relative select-none bg-transparent group",u?"w-4 cursor-col-resize":"h-3 cursor-row-resize"),style:{touchAction:"none"},onPointerDown:n,onDoubleClick:r,title:u?"Drag to resize":"Drag to resize  Double-click to hide/show console",children:[l.jsx("span",{className:"sr-only",children:"Resize panel"}),l.jsx("div",{className:he("absolute inset-0 flex items-center justify-center",u?"px-[6px]":"py-[6px]"),"aria-hidden":!0,children:l.jsx("div",{className:he(u?"h-full w-px":"h-px w-full","bg-slate-400/50")})}),i&&!u?l.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),i()},className:"absolute right-1/2 top-1/2 h-5 w-5 -translate-y-1/2 translate-x-[40%] rounded bg-slate-800/70 text-[10px] text-slate-100 opacity-0 shadow-sm transition-opacity group-hover:opacity-100 focus:opacity-100 focus:outline-none","aria-label":c?"Show console":"Hide console",title:c?"Show console":"Hide console",children:d}):null]})}const t2={json:"json",py:"python",ts:"typescript",tsx:"typescriptreact",js:"javascript",jsx:"javascriptreact",env:"dotenv",md:"markdown",yml:"yaml",yaml:"yaml",toml:"toml"};function q0(e){const n=e.root||e.prefix||e.entries[0]?.parent||"",r=e.entries.length>0;if(!n&&!r)return null;const i=Fl(n),c={id:n,name:H0(n),kind:"folder",children:[]},u=new Map([[n,c]]),d=x=>{if(x.length===0)return c;const g=Fl(x),b=g===i?n:g,v=u.get(b);if(v)return v;const w={id:b,name:H0(b),kind:"folder",children:[]};u.set(b,w);const S=b===n?"":r2(b)??n,N=d(S);return Bf(N,w),w},m=[...e.entries].sort((x,g)=>x.depth!==g.depth?x.depth-g.depth:x.path.localeCompare(g.path));for(const x of m){const g=x.parent&&x.parent.length>0?Fl(x.parent):n,b=d(g);if(x.kind==="dir"){const w=d(x.path);w.name=x.name,w.metadata={size:x.size??null,modifiedAt:x.mtime,contentType:x.content_type,etag:x.etag},w!==b&&Bf(b,w);continue}const v={id:x.path,name:x.name,kind:"file",language:s2(x.path),metadata:{size:x.size??null,modifiedAt:x.mtime,contentType:x.content_type,etag:x.etag}};u.set(x.path,v),Bf(b,v)}return c}function Bf(e,n){const r=e.children??[],i=r.some(c=>c.id===n.id)?r.map(c=>c.id===n.id?n:c):[...r,n];e.children=i.sort(n2)}function n2(e,n){return e.kind!==n.kind?e.kind==="folder"?-1:1:e.name.localeCompare(n.name)}function s2(e){const n=e.toLowerCase(),r=n.lastIndexOf(".");if(r===-1)return;const i=n.slice(r+1);return t2[i]}function H0(e){const n=Fl(e);if(!n)return"";const r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}function r2(e){const n=Fl(e);if(!n)return;const r=n.lastIndexOf("/");return r===-1?"":n.slice(0,r)}function Fl(e){return e?e.replace(/\/+$/,""):""}function bs(e,n){if(e.id===n)return e;if(!e.children)return null;for(const r of e.children){const i=bs(r,n);if(i)return i}return null}function Wh(e){if(e.kind==="file")return e;if(!e.children)return null;for(const n of e.children){const r=Wh(n);if(r)return r}return null}function a2({tree:e,initialActiveFileId:n,loadFile:r,persistence:i}){const[c,u]=p.useState([]),[d,m]=p.useState(""),[x,g]=p.useState([]),[b,v]=p.useState(()=>!i),[w,S]=p.useState(!1),N=p.useRef(new Set),j=p.useRef([]),C=p.useRef(""),k=p.useRef([]),_=p.useCallback(Z=>{m(X=>X===Z?X:Z),g(X=>{const B=X.filter($=>j.current.some(re=>re.id===$));if(!Z)return B;const P=B.filter($=>$!==Z);return[Z,...P]})},[]);p.useEffect(()=>{C.current=d},[d]),p.useEffect(()=>{k.current=x},[x]),p.useEffect(()=>{if(!e){u([]),m(""),g([]);return}u(X=>X.filter(B=>!!bs(e,B.id)).map(B=>{const P=bs(e,B.id);return!P||P.kind!=="file"?B:{...B,name:P.name,language:P.language,metadata:P.metadata}}));const Z=C.current;(!Z||!bs(e,Z))&&_("")},[e,_]);const A=p.useMemo(()=>c.find(Z=>Z.id===d)??c[0]??null,[d,c]),L=p.useCallback(async Z=>{if(!j.current.some(B=>B.id===Z))return;let X=!1;if(u(B=>B.map(P=>P.id!==Z?P:P.status==="ready"?(X=!0,P):{...P,status:"loading",error:null})),!X)try{const B=await r(Z);u(P=>P.map($=>$.id===Z?{...$,initialContent:B.content,content:B.content,status:"ready",error:null,etag:B.etag??null,saving:!1,saveError:null}:$))}catch(B){const P=B instanceof Error?B.message:"Unable to load file.";u($=>$.map(re=>re.id===Z?{...re,status:"error",error:P}:re))}},[r]),O=p.useCallback((Z,X)=>{if(!e)return;const B=bs(e,Z);!B||B.kind!=="file"||(u(P=>{if(P.some(re=>re.id===Z))return P;const $={id:B.id,name:B.name,language:B.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:B.metadata,pinned:!1,saving:!1,saveError:null,lastSavedAt:null};return[...P,$]}),(X?.activate??!0)&&_(Z))},[e,_]);p.useEffect(()=>{if(b||!i||!e){i||v(!0);return}const Z=i.get(),B=(Z?.openTabs??[]).map(P=>typeof P=="string"?{id:P,pinned:!1}:P).filter(P=>!!(P&&P.id));if(B.length>0){const P=[];for(const $ of B){const re=bs(e,$.id);!re||re.kind!=="file"||P.push({id:re.id,name:re.name,language:re.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:re.metadata,pinned:!!$.pinned,saving:!1,saveError:null,lastSavedAt:null})}if(P.length>0){u(P);const $=(Z?.activeTabId&&P.some(Me=>Me.id===Z.activeTabId)?Z.activeTabId:P[0]?.id)??"";m($);const me=(Z?.mru&&Z.mru.length>0?Z.mru:P.map(Me=>Me.id)).filter(Me=>P.some(ve=>ve.id===Me));g(me),S(!0)}}v(!0)},[b,i,e]),p.useEffect(()=>{if(!e||!b)return;if(c.length>0){w||S(!0);return}if(w)return;const Z=n&&bs(e,n)||Wh(e);if(!Z){S(!0);return}O(Z.id),S(!0)},[e,n,O,b,c.length,w]);const J=p.useCallback(Z=>{O(Z)},[O]),U=p.useCallback(Z=>{_(Z),u(X=>X.map(B=>B.id===Z&&B.status==="error"?{...B,status:"loading",error:null}:B))},[_]),ne=p.useCallback(Z=>{u(X=>{const B=X.filter(re=>re.id!==Z),P=C.current,$=P===Z?B[B.length-1]?.id??"":B.some(re=>re.id===P)?P:B[B.length-1]?.id??"";return _($),B})},[_]),R=p.useCallback(Z=>{u(X=>!X.some(B=>B.id===Z)||X.length<=1?X:(_(Z),X.filter(B=>B.id===Z)))},[_]),H=p.useCallback(Z=>{u(X=>{const B=X.findIndex(re=>re.id===Z);if(B===-1||B===X.length-1)return X;const P=X.slice(0,B+1),$=P.some(re=>re.id===C.current)?C.current:Z;return _($),P})},[_]),ae=p.useCallback(()=>{u([]),m(""),g([])},[]),I=p.useCallback((Z,X)=>{u(B=>{if(B.length<=1)return B;const P=B.findIndex(Be=>Be.id===Z);if(P===-1)return B;const $=B.filter((Be,Ne)=>Ne!==P),re=Math.max(0,Math.min(X,$.length)),me=[],Me=[],ve=B[P];if($.forEach(Be=>{Be.pinned?me.push(Be):Me.push(Be)}),(re<=me.length?"pinned":"regular")==="pinned"){const Be=Math.max(0,Math.min(re,me.length));me.splice(Be,0,{...ve,pinned:!0})}else{const Be=Math.max(0,Math.min(re-me.length,Me.length));Me.splice(Be,0,{...ve,pinned:!1})}return[...me,...Me]})},[]),F=p.useCallback(Z=>{if(N.current.has(Z))return;let X=!1;u(B=>B.map(P=>P.id!==Z?P:(X=!0,{...P,status:"loading",error:null}))),X&&(N.current.add(Z),L(Z).finally(()=>{N.current.delete(Z)}))},[L]),ue=p.useCallback(Z=>{u(X=>{const B=[],P=[];let $=null;for(const me of X){if(me.id===Z){$=me;continue}me.pinned?B.push(me):P.push(me)}if(!$||$.pinned)return X;const re={...$,pinned:!0};return[...B,re,...P]})},[]),xe=p.useCallback(Z=>{u(X=>{const B=[],P=[];let $=null;for(const me of X){if(me.id===Z){$=me;continue}me.pinned?B.push(me):P.push(me)}if(!$||!$.pinned)return X;const re={...$,pinned:!1};return[...B,re,...P]})},[]),M=p.useCallback((Z,X)=>{X?ue(Z):xe(Z)},[ue,xe]),G=p.useCallback(Z=>{const X=k.current.filter(ve=>j.current.some(Oe=>Oe.id===ve));if(X.length<=1)return;const B=C.current||X[0],P=X.indexOf(B),me=((P>=0?P:0)+(Z==="forward"?1:-1)+X.length)%X.length,Me=X[me];Me&&Me!==B&&_(Me)},[_]),Y=p.useCallback((Z,X)=>{u(B=>B.map(P=>P.id===Z?{...P,content:X,status:P.status==="ready"?P.status:"ready",error:null,saveError:null}:P))},[]),we=p.useCallback(Z=>{u(X=>X.map(B=>B.id===Z?{...B,saving:!0,saveError:null}:B))},[]),ie=p.useCallback((Z,X)=>{u(B=>B.map(P=>{if(P.id!==Z)return P;const $=X?.metadata??P.metadata??null,re=X?.etag??P.etag??null,me=X?.savedContent??P.content;return{...P,saving:!1,saveError:null,initialContent:me,etag:re,metadata:$&&{...$,etag:$.etag??re??null},lastSavedAt:new Date().toISOString()}}))},[]),T=p.useCallback((Z,X)=>{u(B=>B.map(P=>P.id===Z?{...P,saving:!1,saveError:X}:P))},[]),W=p.useCallback((Z,X)=>{u(B=>B.map(P=>P.id!==Z?P:{...P,content:X.content,initialContent:X.content,status:"ready",error:null,saving:!1,saveError:null,etag:X.etag??P.etag??null,metadata:X.metadata??P.metadata}))},[]),le=p.useMemo(()=>c.some(Z=>Z.status==="ready"&&Z.content!==Z.initialContent),[c]);return p.useEffect(()=>{j.current=c},[c]),p.useEffect(()=>{g(Z=>{const X=Z.filter(B=>c.some(P=>P.id===B));return X.length===Z.length?Z:X})},[c]),p.useEffect(()=>{const Z=new Set(c.map(X=>X.id));for(const X of N.current)Z.has(X)||N.current.delete(X);for(const X of c){if(X.status!=="loading"||N.current.has(X.id))continue;N.current.add(X.id),L(X.id).finally(()=>{N.current.delete(X.id)})}},[c,L]),p.useEffect(()=>{if(!i||!b)return;const Z=[d,...x].filter(X=>!!X).filter((X,B,P)=>P.indexOf(X)===B).filter(X=>c.some(B=>B.id===X));i.set({openTabs:c.map(X=>({id:X.id,pinned:!!X.pinned})),activeTabId:d||null,mru:Z})},[i,c,d,x,b]),{tree:e,tabs:c,activeTabId:d,activeTab:A,openFile:J,selectTab:U,closeTab:ne,closeOtherTabs:R,closeTabsToRight:H,closeAllTabs:ae,moveTab:I,reloadTab:F,pinTab:ue,unpinTab:xe,toggleTabPin:M,selectRecentTab:G,updateContent:Y,beginSavingTab:we,completeSavingTab:ie,failSavingTab:T,replaceTabContent:W,isDirty:le}}function ly(e){if(e instanceof URLSearchParams)return new URLSearchParams(e);if(typeof e=="string"||Array.isArray(e))return new URLSearchParams(e);const n=new URLSearchParams;for(const[r,i]of Object.entries(e)){if(i==null)continue;const c=Array.isArray(i)?i:[i];for(const u of c)u!=null&&n.append(r,String(u))}return n}const oy=p.createContext(null);function i2({value:e,children:n}){return p.createElement(oy.Provider,{value:e},n)}function cy(){const e=p.useContext(oy),n=Hn(),r=Vt(),i=p.useMemo(()=>new URLSearchParams(n.search),[n.search]),c=p.useCallback((u,d)=>{const m=typeof u=="function"?u(new URLSearchParams(i)):u,g=ly(m).toString(),b=`${n.pathname}${g?`?${g}`:""}${n.hash}`;r(b,{replace:d?.replace})},[n.hash,n.pathname,r,i]);return[e?.params??i,e?.setSearchParams??c]}const Sa={tab:"editor",pane:"terminal",console:"closed",view:"editor"},l2=["tab","pane","console","view","file","runId"];function o2(e){return e==="open"?"open":"closed"}function c2(e){return e==="problems"?"problems":"terminal"}function u2(e){return e==="split"||e==="zen"?e:"editor"}function uy(e){const n=e instanceof URLSearchParams?e:new URLSearchParams(e),r=n.get("tab"),i=n.get("pane"),c=n.get("console"),u=n.get("view"),d=n.get("file"),m=n.get("runId"),x=m&&m.length>0?m:void 0;return{...{tab:r==="editor"?"editor":Sa.tab,pane:c2(i),console:o2(c),view:u2(u),file:d??void 0,runId:x},present:{tab:n.has("tab"),pane:n.has("pane"),console:n.has("console"),view:n.has("view"),file:n.has("file"),runId:n.has("runId")}}}function qf(e,n){const r=uy(e),i={...Sa,...r,...n},c=new URLSearchParams(e);for(const u of l2)c.delete(u);return i.tab!==Sa.tab&&c.set("tab",i.tab),i.pane!==Sa.pane&&c.set("pane",i.pane),i.console!==Sa.console&&c.set("console",i.console),i.view!==Sa.view&&c.set("view",i.view),i.file&&i.file.length>0&&c.set("file",i.file),i.runId&&i.runId.length>0&&c.set("runId",i.runId),c}function d2(){const[e,n]=cy(),r=p.useMemo(()=>uy(e),[e]),i=p.useCallback(d=>{r.file===d||!d&&!r.present.file||n(m=>qf(m,{file:d??void 0}),{replace:!0})},[n,r.file,r.present.file]),c=p.useCallback(d=>{r.pane!==d&&n(m=>qf(m,{pane:d}),{replace:!0})},[n,r.pane]),u=p.useCallback(d=>{r.console!==d&&n(m=>qf(m,{console:d}),{replace:!0})},[n,r.console]);return{fileId:r.file??Sa.file,pane:r.pane,console:r.console,consoleExplicit:r.present.console,setFileId:i,setPane:c,setConsole:u}}const f2="You have unsaved changes in the config editor. Are you sure you want to leave?";function h2({isDirty:e,confirm:n=window.confirm,message:r=f2,shouldBypassNavigation:i}){const c=Hn(),u=p.useCallback(d=>!e||i?.()||d.location.pathname===c.pathname?!0:n(r),[n,e,c.pathname,r,i]);Qb(u,e),p.useEffect(()=>{if(!e)return;const d=m=>(m.preventDefault(),m.returnValue=r,r);return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[e,r])}const F0="(prefers-color-scheme: dark)";function Z0(e){return e==="light"||e==="dark"||e==="system"?e:"system"}function m2(e,n){return e==="dark"||e==="system"&&n?"ade-dark":"vs-light"}function p2(e){const n=p.useMemo(()=>Gs(e),[e]),[r,i]=p.useState(()=>{const x=n.get();return Z0(x)}),[c,u]=p.useState(()=>typeof window>"u"?!1:window.matchMedia(F0).matches);p.useEffect(()=>{const x=Z0(n.get());i(g=>g===x?g:x)},[n]),p.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia(F0),g=b=>{u(b.matches)};return typeof x.addEventListener=="function"?x.addEventListener("change",g):typeof x.addListener=="function"&&x.addListener(g),u(x.matches),()=>{typeof x.removeEventListener=="function"?x.removeEventListener("change",g):typeof x.removeListener=="function"&&x.removeListener(g)}},[]),p.useEffect(()=>{n.set(r)},[r,n]);const d=p.useMemo(()=>m2(r,c),[r,c]),m=p.useCallback(x=>{i(x)},[]);return{preference:r,resolvedTheme:d,setPreference:m}}function as(e,n,r){return Math.min(Math.max(e,n),r)}function V0(e,n){const{onMove:r,onEnd:i,cursor:c}=n;if(typeof window>"u")return;e.preventDefault();const u=e.pointerId,d=e.currentTarget,m=document.body.style.cursor,x=document.body.style.userSelect;let g=null,b=null,v=!0;const w=C=>{if(v){if(v=!1,g!==null&&(cancelAnimationFrame(g),g=null),document.body.style.cursor=m,document.body.style.userSelect=x,window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",N),d.removeEventListener("lostpointercapture",j),d.hasPointerCapture?.(u))try{d.releasePointerCapture(u)}catch{}i&&i(C)}},S=C=>{!v||C.pointerId!==u||(b=C,g===null&&(g=window.requestAnimationFrame(()=>{g=null,b&&r(b)})))},N=C=>{C.pointerId===u&&w(C)},j=C=>{C.pointerId===u&&w(C)};c&&(document.body.style.cursor=c),document.body.style.userSelect="none";try{d.setPointerCapture(u)}catch{}window.addEventListener("pointermove",S),window.addEventListener("pointerup",N),window.addEventListener("pointercancel",N),d.addEventListener("lostpointercapture",j)}const g2="inline-flex items-center gap-2 rounded-l-md px-3 py-1.5 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed",x2="inline-flex items-center justify-center rounded-r-md border-l px-2 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed";function b2({label:e,icon:n,disabled:r,isLoading:i,highlight:c,className:u,primaryClassName:d,menuClassName:m,title:x,menuAriaLabel:g="Open menu",menuIcon:b=l.jsx(v2,{}),onPrimaryClick:v,onOpenMenu:w,onContextMenu:S}){const N=p.useRef(null),j=!!(r||i),C=k=>{if(j)return;k.preventDefault();const _=N.current?.getBoundingClientRect();if(_){w?.({x:_.left,y:_.bottom});return}w?.({x:k.clientX,y:k.clientY})};return l.jsxs("div",{role:"group",className:he("inline-flex items-stretch rounded-md shadow-sm",c&&"ring-2 ring-amber-300/70 ring-offset-2 ring-offset-transparent",u),onContextMenu:S,children:[l.jsxs("button",{type:"button",title:x,disabled:j,className:he(g2,d),onClick:k=>{j||v?.(k)},children:[n,l.jsx("span",{className:"whitespace-nowrap",children:e})]}),l.jsx("button",{ref:N,type:"button","aria-label":g,"aria-haspopup":"menu","aria-expanded":"false",disabled:j,className:he(x2,m),onClick:C,children:b})]})}function v2(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:l.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}const y2={loading:"animate-spin border-2 border-brand-500 border-t-transparent",empty:"bg-slate-200",error:"bg-danger-500"};function ut({title:e,description:n,action:r,variant:i="empty",className:c}){return l.jsxs("div",{className:he("flex min-h-[240px] flex-col items-center justify-center rounded-xl border border-dashed border-slate-300 bg-white/70 px-6 py-12 text-center text-sm text-slate-600",c),children:[l.jsx("span",{"aria-hidden":"true",className:he("mb-4 h-8 w-8 rounded-full border-current",y2[i])}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:e}),n?l.jsx("p",{className:"mt-2 max-w-md leading-relaxed",children:n}):null,r?l.jsx("div",{className:"mt-4",children:r}):null]})}const w2=new TextEncoder;async function j2(e,n={}){const{signal:r,page:i,pageSize:c,includeTotal:u}=n,d={};typeof i=="number"&&i>0&&(d.page=i),typeof c=="number"&&c>0&&(d.page_size=c),u&&(d.include_total=!0);const{data:m}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e},query:d},signal:r});if(!m)throw new Error("Expected configuration page payload.");return m}async function S2(e,n,r){const{data:i}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}",{params:{path:{workspace_id:e,configuration_id:n}},signal:r});return i??null}async function E2(e,n,r={}){const{prefix:i,depth:c,include:u,exclude:d,limit:m,pageToken:x,sort:g,order:b,signal:v}=r,{data:w}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files",{params:{path:{workspace_id:e,configuration_id:n},query:{prefix:i??"",depth:c??"infinity",include:u?.length?[...u]:void 0,exclude:d?.length?[...d]:void 0,limit:m,page_token:x??void 0,sort:g,order:b}},signal:v,requestInitExt:{cache:"no-store"}});if(!w)throw new Error("Expected file listing payload.");return w}async function P0(e,n,r,i){const{data:c}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:r}},headers:{Accept:"application/json"},signal:i,requestInitExt:{cache:"no-store"}});if(!c)throw new Error("Expected file payload.");return c}async function N2(e,n){const{data:r,response:i}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/export",{params:{path:{workspace_id:e,configuration_id:n}},parseAs:"blob"});if(!r)throw new Error("Expected configuration archive payload.");const d=(i?.headers?.get("content-disposition")??"").match(/filename="?([^";]+)"?/i)?.[1];return{blob:r,filename:d??void 0}}async function _2(e,n,r){const i=z2(r.path),c=r.parents?"?parents=1":"",u=await bS(`/api/v1/workspaces/${e}/configurations/${n}/files/${i}${c}`,{method:"PUT",body:w2.encode(r.content),headers:{"Content-Type":"application/octet-stream",...r.create?{"If-None-Match":"*"}:r.etag?{"If-Match":r.etag}:{}}});if(!u.ok){const m=await O2(u),x=m?.title??`Request failed with status ${u.status}`;throw new On(x,u.status,m)}const d=await u.json().catch(()=>({}));if(!d||!d.path)throw new Error("Expected write response payload.");return d}async function C2(e,n,r,i={}){await He.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:r}},headers:i.etag?{"If-Match":i.etag}:void 0})}async function k2(e,n,r){const{data:i}=await He.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:r}}});if(!i)throw new Error("Expected directory response payload.");return i}async function T2(e,n,r,i={}){const c={};i.recursive&&(c.recursive=!0),await He.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:r},query:c}})}async function A2(e,n){const r=new FormData;r.append("display_name",n.displayName),r.append("file",n.file);const{data:i}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations/import",{params:{path:{workspace_id:e}},body:r,bodySerializer:()=>r});if(!i)throw new Error("Expected configuration payload.");return i}async function R2(e,n,r){const i=new FormData;i.append("file",r.file);const{data:c}=await He.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/import",{params:{path:{workspace_id:e,configuration_id:n}},headers:r.ifMatch?{"If-Match":r.ifMatch}:void 0,body:i,bodySerializer:()=>i});if(!c)throw new Error("Expected configuration payload.");return c}function D2(e){return e.type==="template"?{type:"template",template_id:e.templateId.trim()}:{type:"clone",configuration_id:e.configurationId.trim()}}async function M2(e,n){const{data:r}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e}},body:{display_name:n.displayName.trim(),source:D2(n.source)}});if(!r)throw new Error("Expected configuration payload.");return r}function z2(e){return e.split("/").map(n=>encodeURIComponent(n)).join("/")}async function O2(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Cn={root:e=>["workspaces",e,"configurations"],list:(e,n={})=>[...Cn.root(e),"list",{...n}],detail:(e,n)=>[...Cn.root(e),"detail",n],files:(e,n)=>[...Cn.detail(e,n),"files"],file:(e,n,r)=>[...Cn.files(e,n),"file",r]};function L2({workspaceId:e,configId:n,enabled:r=!0,...i}){const{prefix:c="",depth:u="infinity",include:d,exclude:m,limit:x,pageToken:g,sort:b="path",order:v="asc"}=i;return _n({queryKey:[...Cn.files(e,n),c,u,d?.join("|")??"",m?.join("|")??"",x??"",g??"",b,v],queryFn:({signal:w})=>E2(e,n,{prefix:c,depth:u,include:d,exclude:m,limit:x,pageToken:g,sort:b,order:v,signal:w}),enabled:r&&e.length>0&&n.length>0,staleTime:5e3})}function U2(e,n){const r=dt();return sn({mutationFn:i=>_2(e,n,i),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:Cn.files(e,n)}),r.invalidateQueries({queryKey:Cn.file(e,n,c.path)})])}})}function $2(e,n){const r=dt();return sn({mutationFn:i=>C2(e,n,i.path,{etag:i.etag}),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:Cn.files(e,n)}),r.invalidateQueries({queryKey:Cn.file(e,n,c.path)})])}})}function B2(e,n){const r=dt();return sn({mutationFn:i=>k2(e,n,i.path),async onSuccess(){await r.invalidateQueries({queryKey:Cn.files(e,n)})}})}function q2(e,n){const r=dt();return sn({mutationFn:i=>T2(e,n,i.path,{recursive:i.recursive}),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:Cn.files(e,n)}),r.invalidateQueries({queryKey:Cn.file(e,n,c.path)})])}})}function H2(e){return sn({mutationFn:n=>A2(e,n)})}function F2(e,n){return sn({mutationFn:r=>R2(e,n,r)})}async function dy(e,n,r){const{data:i}=await He.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/sheets",{params:{path:{workspace_id:e,document_id:n}},signal:r});return i??[]}const fy=p.createContext(null),Z2=6e3,V2=7e3,Q0=4;function P2({children:e}){const[n,r]=p.useState([]),[i,c]=p.useState([]),u=p.useCallback(b=>{r(v=>v.filter(w=>w.id!==b)),c(v=>v.filter(w=>w.id!==b))},[]),d=p.useCallback(b=>{const v={kind:"toast",id:b.id??I0(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?Z2:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,createdAt:Date.now()};return r(w=>{const N=[...v.persistKey?w.filter(j=>j.persistKey!==v.persistKey):w,v];return N.length>Q0?N.slice(N.length-Q0):N}),typeof window<"u"&&v.duration&&v.duration>0&&window.setTimeout(()=>u(v.id),v.duration+50),v.id},[u]),m=p.useCallback(b=>{const v={kind:"banner",id:b.id??I0(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?b.sticky?null:V2:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,sticky:b.sticky??!1,createdAt:Date.now()};return c(w=>[...v.persistKey?w.filter(N=>N.persistKey!==v.persistKey):w,v]),typeof window<"u"&&v.duration&&v.duration>0&&window.setTimeout(()=>u(v.id),v.duration+50),v.id},[u]),x=p.useCallback((b,v)=>{b&&((!v||v==="toast")&&r(w=>w.filter(S=>S.scope!==b)),(!v||v==="banner")&&c(w=>w.filter(S=>S.scope!==b)))},[]),g=p.useMemo(()=>({toasts:n,banners:i,pushToast:d,pushBanner:m,dismiss:u,clearScope:x}),[n,i,d,m,u,x]);return l.jsxs(fy.Provider,{value:g,children:[e,l.jsx(Q2,{})]})}function hy(){const e=p.useContext(fy);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e}function Q2(){const{toasts:e,banners:n,dismiss:r}=hy(),[i,c]=p.useState(!1);return p.useEffect(()=>c(!0),[]),!i||typeof document>"u"?null:vs.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-0 z-[205] flex flex-col items-center gap-3 px-4 pt-3 sm:items-end sm:pr-6",children:n.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>l.jsx(W2,{banner:u,onDismiss:r},u.id))}),l.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-[210] flex flex-col items-center gap-3 px-4 sm:inset-x-auto sm:right-6 sm:bottom-6 sm:items-end sm:px-0",children:e.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>l.jsx(I2,{toast:u,onDismiss:r},u.id))})]}),document.body)}function I2({toast:e,onDismiss:n}){const r=e.duration!==null&&e.duration>0,[i,c]=p.useState(100);p.useEffect(()=>{if(!r||!e.duration)return;c(100);const d=requestAnimationFrame(()=>c(0)),m=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(m)}},[r,e.duration,e.id,n]);const u=G2[e.intent];return l.jsxs("div",{className:he("pointer-events-auto w-full max-w-sm rounded-2xl border px-4 py-3 text-sm shadow-2xl backdrop-blur",u.container,u.border),children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:he("mt-1 flex h-8 w-8 items-center justify-center rounded-full",u.icon),children:e.icon??py(e.intent)}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l.jsx("p",{className:"text-sm font-semibold leading-snug text-white",children:e.title}),e.description?l.jsx("p",{className:"mt-1 text-xs leading-relaxed text-white/70",children:e.description}):null,e.actions.length>0?l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(d=>l.jsx(my,{action:d,onPress:()=>{d.onSelect(),n(e.id)},appearance:"dark"},d.label))}):null]}),e.dismissible?l.jsx("button",{type:"button",className:"ml-2 inline-flex h-8 w-8 items-center justify-center rounded-full text-white/60 transition hover:bg-white/10 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30","aria-label":"Dismiss notification",onClick:()=>n(e.id),children:l.jsx(gy,{})}):null]}),r&&e.duration?l.jsx("div",{className:"mt-4 h-1 overflow-hidden rounded-full bg-white/10",children:l.jsx("div",{className:he("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function W2({banner:e,onDismiss:n}){const r=!e.sticky&&e.duration!==null&&e.duration>0,[i,c]=p.useState(100);p.useEffect(()=>{if(!r||!e.duration)return;c(100);const d=requestAnimationFrame(()=>c(0)),m=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(m)}},[r,e.duration,e.id,n]);const u=K2[e.intent];return l.jsxs("div",{className:he("pointer-events-auto w-full max-w-sm rounded-lg border px-3.5 py-2.5 shadow-lg shadow-black/30 backdrop-blur-sm sm:min-w-[300px]",u.container,u.border),children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:he("flex h-7 w-7 items-center justify-center rounded-full text-base",u.icon),children:e.icon??py(e.intent)}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[l.jsx("p",{className:"text-[13px] font-semibold leading-tight",children:e.title}),e.description?l.jsx("p",{className:"text-[12px] leading-relaxed text-white/75",children:e.description}):null,e.actions.length>0?l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:e.actions.map(d=>l.jsx(my,{action:d,onPress:()=>{d.onSelect(),e.sticky||n(e.id)},appearance:"light"},d.label))}):null]}),e.dismissible?l.jsx("button",{type:"button",className:he("ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full text-white/70 transition hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30",u.dismiss),"aria-label":"Dismiss notification",onClick:()=>n(e.id),children:l.jsx(gy,{})}):null]}),r&&e.duration?l.jsx("div",{className:"mt-2 h-0.5 overflow-hidden rounded-full bg-white/10",children:l.jsx("div",{className:he("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function my({action:e,onPress:n,appearance:r}){const i=e.variant??"secondary",c=r==="dark"?"border-white/15 text-white/90 hover:bg-white/10 focus-visible:ring-white/30":"border-white/20 text-white hover:bg-white/10 focus-visible:ring-white/30";return l.jsx("button",{type:"button",className:he("inline-flex items-center justify-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2",i==="primary"?"bg-white text-slate-900 hover:bg-slate-100 focus-visible:ring-white/40":c),onClick:n,children:e.label})}function py(e){switch(e){case"success":return l.jsx(X2,{});case"warning":return l.jsx(J2,{});case"danger":return l.jsx(ek,{});default:return l.jsx(Y2,{})}}const G2={info:{container:"bg-[#0b1220]/95 text-white",border:"border-white/5",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400"},success:{container:"bg-[#031b16]/95 text-emerald-50",border:"border-emerald-500/20",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400"},warning:{container:"bg-[#211604]/95 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-400/20 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400"},danger:{container:"bg-[#22060b]/95 text-rose-50",border:"border-rose-500/30",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400"}},K2={info:{container:"bg-[#101828]/85 text-white",border:"border-white/10",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400",dismiss:"hover:bg-white/10"},success:{container:"bg-[#0d1c17]/85 text-emerald-50",border:"border-emerald-500/15",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400",dismiss:"hover:bg-white/10"},warning:{container:"bg-[#1b1507]/85 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-500/15 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400",dismiss:"hover:bg-white/10"},danger:{container:"bg-[#200912]/85 text-rose-50",border:"border-rose-500/25",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400",dismiss:"hover:bg-white/10"}};function I0(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}function Y2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M10 7.5v.2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),l.jsx("path",{d:"M9.2 9.5h1.6V14",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function X2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M6.5 10.5l2.5 2.5 4.5-5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}function J2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M9 4.6l-6 10.4a1 1 0 0 0 .87 1.5h12.26a1 1 0 0 0 .87-1.5L11 4.6a1 1 0 0 0-1.74 0Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 8v3.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),l.jsx("path",{d:"M10 14h.01",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}function ek(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M7 7l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function gy(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 4l8 8m0-8-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function tk(){const e=hy();return p.useMemo(()=>({notifyToast:n=>e.pushToast(n),notifyBanner:n=>e.pushBanner(n),dismissNotification:n=>e.dismiss(n),dismissScope:(n,r)=>e.clearScope(n,r)}),[e])}const nk="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",Aa=p.forwardRef(({className:e,...n},r)=>l.jsx("select",{ref:r,className:he(nk,e),...n}));Aa.displayName="Select";const sk={primary:"bg-brand-600 text-white hover:bg-brand-700 focus-visible:ring-brand-500 disabled:bg-brand-300",secondary:"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 focus-visible:ring-slate-400 disabled:text-slate-400",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus-visible:ring-slate-300",danger:"bg-rose-600 text-white hover:bg-rose-700 focus-visible:ring-rose-500 disabled:bg-rose-300"},rk={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},Ce=p.forwardRef(({type:e="button",variant:n="primary",size:r="md",isLoading:i=!1,className:c,children:u,disabled:d,...m},x)=>{const g=d||i;return l.jsxs("button",{ref:x,type:e,disabled:g,"aria-busy":i||void 0,className:he("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed",sk[n],rk[r],c),...m,children:[i?l.jsx("span",{"aria-hidden":"true",className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,l.jsx("span",{children:u})]})});Ce.displayName="Button";const ak={info:"bg-brand-50 text-brand-700 ring-brand-100",success:"bg-success-50 text-success-700 ring-success-100",warning:"bg-warning-50 text-warning-700 ring-warning-100",danger:"bg-danger-50 text-danger-700 ring-danger-100"};function rt({tone:e="info",heading:n,icon:r,className:i,children:c,...u}){return l.jsxs("div",{role:"status",className:he("flex w-full items-start gap-3 rounded-lg px-4 py-3 text-sm ring-1 ring-inset",ak[e],i),...u,children:[r?l.jsx("span",{"aria-hidden":"true",children:r}):null,l.jsxs("div",{className:"space-y-1",children:[n?l.jsx("p",{className:"font-semibold",children:n}):null,c?l.jsx("p",{className:"leading-relaxed",children:c}):null]})]})}function xy(e,n){const r=hk(Gh(n??[],e),"initial");return{runId:null,runMode:void 0,status:"idle",buildPhases:{},runPhases:{},consoleLines:r,validationSummary:null,completedPayload:null,maxConsoleLines:e}}function ik(e,n){switch(n.type){case"RESET":return{...xy(e.maxConsoleLines,n.initialLines),runId:n.runId??null};case"ATTACH_RUN":return{...e,runId:n.runId,runMode:n.runMode??e.runMode};case"CLEAR_CONSOLE":return{...e,consoleLines:[]};case"APPEND_LINE":{const r=Gh([...e.consoleLines,Kh(n.line,e.consoleLines.length)],e.maxConsoleLines);return{...e,consoleLines:r}}case"EVENT":return lk(e,n.event);default:return e}}function lk(e,n){const r=uk(n),i=typeof n.type=="string"?n.type:"",c=TE(n),u=Gh([...e.consoleLines,Kh(c,e.consoleLines.length)],e.maxConsoleLines),d=i==="build.phase.started"||i==="build.phase.start"?{...e.buildPhases,[r.phase]:{status:"running",message:r.message}}:i==="build.phase.completed"||i==="build.phase.complete"?{...e.buildPhases,[r.phase]:{status:W0(r.status),durationMs:uh(r.duration_ms),message:r.message}}:e.buildPhases,m=i==="run.phase.started"||i==="run.phase.start"||i==="engine.phase.start"?{...e.runPhases,[r.phase]:{status:"running",message:r.message}}:i==="run.phase.completed"||i==="run.phase.complete"||i==="engine.phase.complete"?{...e.runPhases,[r.phase]:{status:W0(r.status),durationMs:uh(r.duration_ms),message:r.message}}:e.runPhases;let x=e.validationSummary;if(i==="run.validation.issue"||i==="engine.validation.issue"){const S=vy(r),N=x?.issues??[];x={...x,issues:S?[...N,S]:N}}else(i==="run.validation.summary"||i==="engine.validation.summary")&&(x=dk(r,x));const g=i==="run.complete"||i==="engine.run.summary"?r:e.completedPayload,b=ok(e.status,i,r),v=e.runId??(typeof n.run_id=="string"?n.run_id:null),w=typeof r.mode=="string"?r.mode==="validation"?"validation":"extraction":e.runMode;return{...e,status:b,runId:v,runMode:w,buildPhases:d,runPhases:m,consoleLines:u,validationSummary:x,completedPayload:g}}function ok(e,n,r){switch(n){case"run.queued":return"queued";case"run.waiting_for_build":return"waiting_for_build";case"build.started":case"build.start":return"building";case"run.start":case"run.started":case"engine.start":return"running";case"run.error":return e==="failed"?e:"failed";case"engine.run.summary":{const i=r.source??{},c=typeof i.status=="string"?i.status:void 0;return Hf(c)}case"engine.complete":return Hf(r.status??r.engine_status);case"run.complete":return Hf(r.status);default:return e}}function lo(e){return e==="queued"?"queued":e==="waiting_for_build"?"waiting_for_build":e==="cancelled"?"cancelled":e==="building"?"building":e==="running"?"running":e==="succeeded"?"succeeded":e==="failed"?"failed":"idle"}function by(e){const n=lo(e);return n==="queued"||n==="waiting_for_build"||n==="building"||n==="running"}function ck(e){const n=lo(e);return n==="succeeded"||n==="failed"||n==="cancelled"}function Hf(e){return e==="succeeded"?"succeeded":e==="failed"?"failed":e==="cancelled"?"cancelled":e==="waiting_for_build"?"waiting_for_build":"running"}function W0(e){return e==="failed"?"failed":e==="skipped"?"skipped":e==="succeeded"?"succeeded":e==="running"?"running":"pending"}function uk(e){const n=e?.payload;return n&&typeof n=="object"?n:{}}function vy(e){const n=e.severity??e.level,r=n==="error"?"error":n==="warning"?"warning":"info",i=e.message??e.code??"Validation issue",c=e.path,u=e.code;return{level:r,message:i,path:c,code:u}}function dk(e,n){const r={...n??{}},i=e.issues;if(Array.isArray(i)){const c=i.map(u=>u&&typeof u=="object"?vy(u):null).filter(Boolean);r.issues=c}if("issues_total"in e){const c=uh(e.issues_total);typeof c=="number"&&(r.issues_total=c)}if("max_severity"in e){const c=mk(e.max_severity);c&&(r.max_severity=c)}if("content_digest"in e){const c=typeof e.content_digest=="string"?e.content_digest:null;c!==void 0&&(r.content_digest=c)}if("error"in e){const c=typeof e.error=="string"?e.error:null;r.error=c}return r}function fk(e,n){const r=e.validationSummary??(n?{issues:n}:null),i=e.runMode??(r?"validation":void 0);if(!i&&!r)return{status:"idle",messages:[],lastRunAt:void 0,error:null,digest:null};const c=lo(e.status),u=by(c),d=r?.issues??[],m=!!r?.error,x=typeof e.completedPayload?.completed_at=="string"&&e.completedPayload.completed_at||void 0;let g;u&&i==="validation"?g="running":m||c==="failed"||c==="cancelled"?g="error":d.length>0||c==="succeeded"?g="success":g="idle";const b=g==="error"?r?.error??"Validation failed.":null;return{status:g,messages:d,lastRunAt:x??void 0,error:b,digest:r?.content_digest??null}}function Gh(e,n){return e.length<=n?e.slice():e.slice(e.length-n)}function hk(e,n){return e.map((r,i)=>Kh(r,i,n))}function Kh(e,n,r="line"){if(e.id)return e;const i=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(16).slice(2),c=e.origin??"run",u=e.timestamp??"ts";return{...e,id:`${r}-${c}-${u}-${n}-${i}`}}function uh(e){if(!(typeof e!="number"||Number.isNaN(e)))return e}function mk(e){if(e==="error")return"error";if(e==="warning")return"warning";if(e==="info")return"info"}const pk={dry_run:!1,validate_only:!1,force_rebuild:!1};async function gk(e,n={},r){const i={configuration_id:e},u={options:{...pk,...n}},{data:d}=await He.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:i},body:u,signal:r});if(!d)throw new Error("Expected run creation response.");return d}async function*xk(e,n){const r=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"}),i=new AbortController,c=()=>i.abort();let u=null;n?.aborted?i.abort():n&&n.addEventListener("abort",c);try{const d=await fetch(e,{method:"GET",credentials:"include",headers:{Accept:"text/event-stream"},signal:i.signal});if(!d.body||!d.ok)throw new Error("Run event stream unavailable.");u=d.body.getReader();const m=new TextDecoder;let x="",g=!1;for(;;){const{value:b,done:v}=await u.read();x+=m.decode(b??new Uint8Array,{stream:!v});const w=x.split(`

`);x=w.pop()??"";for(const S of w){const N=G0(S);if(N&&(yield N,N.type==="run.complete")){g=!0;break}}if(v||g){const S=G0(x);S&&(yield S);return}}}catch(d){throw i.signal.aborted?r:d}finally{if(n&&n.removeEventListener("abort",c),u)try{await u.cancel()}catch{}i.signal.aborted||i.abort()}}function G0(e){const n=[];for(const i of e.split(/\n/))if(i.startsWith("data:")){const c=i.slice(5);n.push(c.startsWith(" ")?c.slice(1):c)}if(!n.length)return null;const r=n.join(`
`);if(!r.trim())return null;try{return JSON.parse(r)}catch(i){return console.warn("Skipping malformed run event",i,r),null}}function bk(e,n){const r=e.events_stream_url??e.links?.events_stream??e.events_url??e.links?.events;if(!r)return null;const i=[];r.endsWith("/stream")||r.includes("stream=true")||i.push("stream=true");const u=i.length?i.join("&"):void 0;return wk(r,{appendQuery:u})}async function vk(e,n){const r=typeof e=="string"?await cu(e,n):e,i=r.events_download_url??r.links?.events_download??r.links?.logs;if(!i)throw new Error("Run logs link unavailable.");const c=await fetch(eo(i),{method:"GET",credentials:"include",headers:{Accept:"application/x-ndjson"},signal:n});if(!c.ok)throw new Error(`Run telemetry unavailable (${c.status}).`);return(await c.text()??"").split(/\r?\n/).filter(Boolean).map(m=>{try{return JSON.parse(m)}catch(x){return console.warn("Skipping invalid telemetry line",{error:x,line:m}),null}}).filter(m=>!!m)}async function cu(e,n){const{data:r}=await He.GET("/api/v1/runs/{run_id}",{params:{path:{run_id:e}},signal:n});if(!r)throw new Error("Run not found");return r}async function yk(e,n){try{const{data:c}=await He.GET("/api/v1/runs/{run_id}/summary",{params:{path:{run_id:e}},signal:n});if(c)return c}catch(c){console.warn("Falling back to embedded run summary",c)}const i=(await cu(e,n))?.summary;if(!i)return null;if(typeof i=="string")try{return JSON.parse(i)}catch(c){return console.warn("Unable to parse run summary",{error:c}),null}return i}function yy(e){const n=e.output,r=n?.ready,i=n?.download_url??e.links?.output_download??e.links?.output;return r===!1||!i?null:eo(i)}function dh(e){const n=e.events_download_url??e.links?.events_download??e.links?.logs;return n?eo(n):null}function wk(e,n){const r=e.includes("?"),i=n?.appendQuery?`${e}${r?"&":"?"}${n.appendQuery}`:e;return eo(i)}const Ff={detail:e=>["run",e],telemetry:e=>["run-telemetry",e],summary:e=>["run-summary",e]};function jk({configId:e,runId:n,onRunIdChange:r,seed:i,maxConsoleLines:c=400,onError:u}){const d=p.useMemo(()=>{const R=xy(c,i?.console?[...i.console].slice(-c):void 0);return i?.validation?.length?{...R,runMode:"validation",validationSummary:{issues:[...i.validation]}}:R},[c,i?.console,i?.validation]),[m,x]=p.useReducer(ik,d),g=p.useRef(m),b=p.useRef(null),v=p.useRef(null),w=p.useRef(null),S=p.useRef(null),N=p.useRef(!1);p.useEffect(()=>{g.current=m},[m]);const j=p.useCallback(()=>{const R=S.current;R&&(R.abort(),S.current=null)},[]);p.useEffect(()=>{n===null&&(j(),b.current=null,v.current=null,w.current=null)},[n,j]);const C=p.useCallback(R=>x({type:"APPEND_LINE",line:R}),[x]),k=p.useCallback(()=>{x({type:"CLEAR_CONSOLE"})},[x]),_=p.useCallback(R=>{u&&u(R)},[u]),A=p.useCallback(async(R,H)=>{j();const ae=bk(R);if(!ae)throw new Error("Run events link unavailable.");b.current=R,v.current=H??null,w.current=R.started_at??w.current??null,x({type:"ATTACH_RUN",runId:R.id,runMode:H?.mode});const I=new AbortController;S.current=I;try{for await(const F of xk(ae,I.signal)){if(F?.type==="run.start"||F?.type==="run.started"||F?.type==="engine.start"){const ue=F?.payload??{},xe=typeof ue.started_at=="string"?ue.started_at:Lh(F);w.current=xe}x({type:"EVENT",event:F})}}catch(F){I.signal.aborted||_(F)}finally{S.current===I&&(S.current=null)}},[_,j]),L=lo(m.status),O=m.runMode??v.current?.mode,J=by(L),U=p.useMemo(()=>fk(m,i?.validation),[m,i?.validation]),ne=p.useCallback(async(R,H,ae)=>{const F=ae?.forceRebuild??!1?{...R,force_rebuild:!0}:R;if(J||N.current||ae?.prepare&&ae.prepare()===!1)return null;const ue=new Date;x({type:"RESET",runId:null,initialLines:[]}),N.current=!0;try{const xe=await gk(e,F);return v.current=H,w.current=ue.toISOString(),r?.(xe.id),await A(xe,H),{runId:xe.id,startedAt:ue.toISOString()}}catch(xe){return _(xe),null}finally{N.current=!1}},[e,A,x,r,_,J]);return p.useEffect(()=>()=>{j()},[j]),{stream:m,runResource:b.current,runMetadata:v.current,runStartedAt:w.current,runStatus:L,runMode:O,runInProgress:J,validation:U,appendConsoleLine:C,clearConsole:k,startRun:ne}}function Sk({configId:e,runId:n,seed:r,maxConsoleLines:i,onRunIdChange:c,onRunComplete:u}){const{stream:d,runResource:m,runMetadata:x,runStartedAt:g,runStatus:b,runMode:v,runInProgress:w,validation:S,appendConsoleLine:N,clearConsole:j,startRun:C}=jk({configId:e,runId:n,onRunIdChange:c,seed:r,maxConsoleLines:i}),k=d.consoleLines,[_,A]=p.useState(null),L=p.useRef(null);p.useEffect(()=>{if(!n||!ck(b)||L.current===n)return;L.current=n;const J=d.completedPayload??{},U=J.failure,ne=typeof U?.message=="string"?U.message.trim():null,R=typeof J.summary=="string"?J.summary.trim():null,H=typeof J.started_at=="string"?J.started_at:void 0,ae=J.source,I=typeof ae?.started_at=="string"?ae.started_at:void 0,F=typeof J.completed_at=="string"?J.completed_at:void 0,ue=typeof ae?.completed_at=="string"?ae.completed_at:void 0,xe=J.status??ae?.status??b,M=J.details&&typeof J.details=="object"?J.details:null,G=J.artifacts&&typeof J.artifacts=="object"?J.artifacts:null,Y=Y0(G)??Y0(M),we=X0(G)??X0(M),T=lo(xe),W=v??x?.mode??"extraction",le=H??I??m?.started_at??g??void 0,Z=F??ue??m?.completed_at??new Date().toISOString(),X=Nk(le??null,Z??null);u?.({runId:n,status:T,mode:W,startedAt:le??null,completedAt:Z??new Date().toISOString(),durationMs:X,payload:d.completedPayload}),W!=="validation"&&(A(B=>{const P=K0({runResource:m,fallbackPath:Y??B?.outputPath??null,fallbackProcessedFile:we??B?.processedFile??null}),$=m?dh(m)??void 0:B?.logsUrl;return{runId:n,status:T,outputUrl:P.outputUrl??B?.outputUrl,outputPath:P.outputPath,outputFilename:P.outputFilename??B?.outputFilename,outputReady:P.outputReady??B?.outputReady??(P.outputPath?!0:void 0),processedFile:P.processedFile??B?.processedFile??null,outputLoaded:!0,logsUrl:$,documentName:x?.documentName??B?.documentName,sheetNames:x?.sheetNames??B?.sheetNames??[],summary:null,summaryLoaded:!0,summaryError:null,telemetry:null,telemetryLoaded:!0,telemetryError:null,error:ne??R??B?.error??null,startedAt:le??B?.startedAt??null,completedAt:Z??B?.completedAt??null,durationMs:X}}),(async()=>{let B=m;if(!B)try{B=await cu(n)}catch(P){A($=>$&&$.runId===n?{...$,outputLoaded:!0,summaryLoaded:!0,telemetryLoaded:!0,error:Ek(P)}:$)}if(B){const P=K0({runResource:B,fallbackPath:Y??null,fallbackProcessedFile:we??null}),$=dh(B)??void 0;A(re=>re&&re.runId===n?{...re,outputUrl:P.outputUrl??re.outputUrl,outputPath:P.outputPath??re.outputPath??null,outputFilename:P.outputFilename??re.outputFilename,outputReady:P.outputReady??re.outputReady,processedFile:P.processedFile??re.processedFile,outputLoaded:!0,logsUrl:$}:re)}})())},[n,b,v,x,m,g,d.completedPayload,u]);const O=p.useCallback(async(J,U,ne)=>{const R=await C(J,U,ne);return R&&U.mode==="extraction"&&A(null),R},[C]);return p.useMemo(()=>({stream:d,runStatus:b,runMode:v,runInProgress:w,validation:S,consoleLines:k,latestRun:_,appendConsoleLine:N,clearConsole:j,startRun:O}),[d,b,v,w,S,k,_,N,j,O])}function Ek(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unexpected error"}function Nk(e,n){if(!e||!n)return;const r=new Date(e),i=new Date(n);if(!(Number.isNaN(r.getTime())||Number.isNaN(i.getTime())))return Math.max(0,i.getTime()-r.getTime())}function K0({runResource:e,fallbackPath:n,fallbackProcessedFile:r}){const i=e?.output,c=i?.output_path??n??null,u=i?.processed_file??r??null,d=e?yy(e)??void 0:void 0,m=i?.ready??(d?!0:void 0)??(n?!0:void 0),x=i?.filename??(c?_k(c):null);return{outputUrl:d,outputPath:c,outputFilename:x,outputReady:m,processedFile:u}}function Y0(e){if(!e)return null;if(typeof e.output_path=="string")return e.output_path;if(Array.isArray(e.output_paths)&&e.output_paths.length){const n=e.output_paths[0];if(typeof n=="string")return n}return null}function X0(e){if(!e)return null;if(typeof e.processed_file=="string")return e.processed_file;if(Array.isArray(e.processed_files)&&e.processed_files.length){const n=e.processed_files[0];if(typeof n=="string")return n}return null}function _k(e){const n=e.trim();if(!n)return"";const r=n.split("/");return r[r.length-1]||n}const wy=e=>`ade.ui.workspace.${e}.config-builder.last`;function Yh(e){return Gs(wy(e))}function Xh(e,n){if(n){const r={configId:n};return e.set(r),r}return e.clear(),null}const Ck={min:200,max:420},kk=320,Tk=120,Zf=140,Ak=220,Rk=40,Dk=400,J0=10,Mk=56,eb="Panel closed to keep the editor readable on this screen size. Resize the window or collapse other panes to reopen it.",zk=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.tabs`,Ok=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.console`,Lk=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.editor-theme`,Uk=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.explorer.expanded`,$k=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.layout`,Bk=[{value:"system",label:"System"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}],qk={explorer:"",search:"Search coming soon",scm:"Source Control coming soon",extensions:"Extensions coming soon"};function jy({workspaceId:e,configId:n,configName:r,seed:i,windowState:c,onMinimizeWindow:u,onMaximizeWindow:d,onRestoreWindow:m,onCloseWorkbench:x,shouldBypassUnsavedGuard:g}){const b=dt(),{fileId:v,pane:w,console:S,consoleExplicit:N,setFileId:j,setPane:C,setConsole:k}=d2(),[_,A]=p.useState(null),L=!!i,O=L2({workspaceId:e,configId:n,depth:"infinity",sort:"path",order:"asc",enabled:!L}),J=O.data?.fileset_hash??null,U=O.data?.status==="draft",ne=p.useMemo(()=>Yh(e),[e]),R=p.useMemo(()=>i?i.tree:O.data?q0(O.data):null,[i,O.data]);p.useEffect(()=>{n&&(L||O.isSuccess)&&Xh(ne,n)},[n,L,O.isSuccess,ne]);const[H,ae]=p.useState(null),I=p.useCallback(Q=>{ae(Q)},[]),F=F2(e,n),ue=p.useRef(null),[xe,M]=p.useState(null),[G,Y]=p.useState(!1),[we,ie]=p.useState(!1),{runStatus:T,runMode:W,runInProgress:le,validation:Z,consoleLines:X,latestRun:B,clearConsole:P,startRun:$}=Sk({configId:n,runId:_,seed:i,maxConsoleLines:Dk,onRunIdChange:A,onRunComplete:I}),[re,me]=p.useState(!1),Me=p.useMemo(()=>i?null:Gs(zk(e,n)),[e,n,i]),ve=p.useMemo(()=>i?null:Gs(Ok(e,n)),[e,n,i]),Oe=p.useMemo(()=>Gs($k(e,n)),[e,n]),Be=p.useRef(null),Ne=p2(Lk(e,n)),Le=Ne.resolvedTheme==="vs-light"?"light":"dark",rn=Z.lastRunAt?`Last run ${n5(Z.lastRunAt)}`:void 0,[Et,Tt]=p.useState(()=>{const Q=Oe.get();return Q?.explorer?{collapsed:!!Q.explorer.collapsed,fraction:Q.explorer.fraction??280/1200}:{collapsed:!1,fraction:280/1200}}),[D,K]=p.useState(null),ce=p.useRef(null),[Ee,ye]=p.useState(!1);p.useEffect(()=>{ve?Be.current=ve.get()??null:Be.current=null,ce.current=null,K(null),ye(!1)},[ve]);const[je,De]=p.useState({width:0,height:0}),[Qe,We]=p.useState(null),[Nt,Se]=p.useState("explorer"),[_e,Fe]=p.useState(null),[Mt,nt]=p.useState(null),[Gt,_t]=p.useState(!1),[vr,Os]=p.useState(!1),[qi,Ls]=p.useState(!1),[yr,zt]=p.useState(!1),[yt,At]=p.useState(null),[kn,fn]=p.useState(null),[hn,mn]=p.useState(null),{notifyBanner:Ln,dismissScope:qt}=tk(),vn=p.useMemo(()=>`workbench-console:${e}:${n}`,[e,n]),yn=$2(e,n),Tn=B2(e,n),Kn=q2(e,n),Ke=p.useCallback((Q,ge)=>{Ln({title:Q,intent:ge?.intent??"info",duration:ge?.duration??6e3,dismissible:!0,scope:vn,persistKey:vn})},[Ln,vn]),An=p.useCallback(()=>{qt(vn,"banner")},[qt,vn]),Ot=p.useCallback(Q=>{const ge=t5(Q);Ke(ge,{intent:"danger",duration:null})},[Ke]),Un=p.useCallback(async()=>{Y(!0);try{const Q=await N2(e,n),ge=Q.filename??`${n}.zip`,Te=URL.createObjectURL(Q.blob),ke=document.createElement("a");ke.href=Te,ke.download=ge,ke.click(),URL.revokeObjectURL(Te),Ke(`Exported ${ge}`,{intent:"success",duration:4e3})}catch(Q){Ot(Q),Ke("Export failed. Try again in a moment.",{intent:"danger",duration:6e3})}finally{Y(!1)}},[e,n,Ke,Ot]);p.useEffect(()=>{if(!H)return;const{runId:Q,status:ge,payload:Te}=H,ke=Te?.failure??void 0,Pe=typeof ke?.message=="string"?ke.message.trim():null,ln=typeof Te?.summary=="string"?Te.summary.trim():null,ct=Pe||ln||"ADE run failed.",Mn=ge==="cancelled";Ke(ge==="succeeded"?"ADE run completed successfully.":Mn?"ADE run cancelled.":ct,{intent:ge==="succeeded"?"success":Mn?"info":"danger"}),ae(Xi=>Xi&&Xi.runId===Q?null:Xi)},[H,Ke,ae]);const Ct=c==="maximized",Pt=typeof navigator<"u"?/mac/i.test(navigator.platform):!1,wr=p.useCallback(()=>{x()},[x]),Oa=!Et.collapsed,Su=p.useCallback(async Q=>{if(i)return{content:i.content[Q]??"",etag:null};const ge=await b.fetchQuery({queryKey:Cn.file(e,n,Q),queryFn:({signal:Te})=>P0(e,n,Q,Te)});if(!ge)throw new Error("File could not be loaded.");return{content:nb(ge),etag:ge.etag??null}},[i,b,e,n]),Ze=a2({tree:R,initialActiveFileId:v,loadFile:Su,persistence:Me??void 0}),ta=U2(e,n),jr=p.useCallback(async Q=>{if(L)return null;const ge=await b.fetchQuery({queryKey:Cn.file(e,n,Q),queryFn:({signal:ke})=>P0(e,n,Q,ke)}),Te=nb(ge);return Ze.replaceTabContent(Q,{content:Te,etag:ge.etag??null,metadata:{size:ge.size??null,modifiedAt:ge.mtime??null,contentType:ge.content_type??Ze.tabs.find(ke=>ke.id===Q)?.metadata?.contentType??null,etag:ge.etag??null}}),ge},[L,b,e,n,Ze]);h2({isDirty:Ze.isDirty,shouldBypassNavigation:g});const Hi=p.useCallback(()=>{u()},[u]),Sr=p.useCallback(()=>{Ct?m():d()},[Ct,d,m]),Kt=S!=="open",Yn=p.useMemo(()=>Ze.tabs.filter(Q=>Q.status==="ready"&&Q.content!==Q.initialContent),[Ze.tabs]),Er=Ze.tabs.some(Q=>Q.saving),wt=!L&&Yn.length>0;p.useEffect(()=>{typeof window>"u"||requestAnimationFrame(()=>{window.dispatchEvent(new Event("ade:workbench-layout"))})},[Et.collapsed,Et.fraction,Kt,D,Ct,w]);const Xs=p.useCallback(async Q=>{if(L)return!1;const ge=Ze.tabs.find(Pe=>Pe.id===Q);if(!ge||ge.status!=="ready"||ge.content===ge.initialContent||ge.saving)return!1;const Te=ge.content,ke=ge.etag??void 0;Ze.beginSavingTab(Q);try{const Pe=await ta.mutateAsync({path:ge.id,content:Te,etag:ke,create:!ke,parents:!0}),ln={size:Pe.size??ge.metadata?.size??null,modifiedAt:Pe.mtime??ge.metadata?.modifiedAt??null,contentType:ge.metadata?.contentType??null,etag:Pe.etag??ge.metadata?.etag??null};return Ze.completeSavingTab(Q,{etag:Pe.etag??ge.etag??null,metadata:ln,savedContent:Te}),Ke(`Saved ${ge.name}`,{intent:"success",duration:4e3}),!0}catch(Pe){const ln=Pe instanceof On&&Pe.status===412,ct=ln?new Error("Save blocked because this file changed on the server. Reloading latest version."):Pe;if(Ze.failSavingTab(Q,ct instanceof Error?ct.message:String(ct)),ln)try{await jr(Q),Ke("File reloaded with the latest version from the server. Review before saving again.",{intent:"warning",duration:6e3})}catch(Mn){Ot(Mn)}return Ot(ct),!1}},[L,Ze,ta,Ke,jr,Ot]),na=p.useCallback(async Q=>{const ge=[];for(const Te of Q)await Xs(Te)&&ge.push(Te);return ge},[Xs]),ls=p.useCallback(async()=>{if(!wt||Yn.length===0)return!0;const ge=(await na(Yn.map(Te=>Te.id))).length===Yn.length;return ge||Ke("Save failed. Fix errors before running again.",{intent:"danger",duration:7e3}),ge},[wt,Yn,na,Ke]),Nr=p.useCallback(Q=>{Xs(Q)},[Xs]),Fi=p.useCallback(()=>{Ze.activeTab&&Xs(Ze.activeTab.id)},[Ze.activeTab,Xs]),fo=p.useCallback(()=>{if(!wt)return;const Q=Yn.map(ge=>ge.id);(async()=>{const ge=await na(Q);ge.length>1&&Ke(`Saved ${ge.length} files`,{intent:"success",duration:5e3})})()},[wt,Yn,na,Ke]);p.useEffect(()=>{const Q=Qe;if(!Q||typeof window>"u")return;const ge=()=>{const ke=Q.getBoundingClientRect(),Pe=ke.width,ln=ke.height;De({width:Pe,height:ln}),window.dispatchEvent(new Event("ade:workbench-layout"))};if(ge(),typeof window.ResizeObserver>"u")return window.addEventListener("resize",ge),()=>window.removeEventListener("resize",ge);const Te=new window.ResizeObserver(()=>ge());return Te.observe(Q),()=>Te.disconnect()},[Qe]);const Js=Kt?kk:Tk,an=p.useMemo(()=>{const Q=Math.max(0,je.height),Te=Math.max(0,Q-Js-J0),ke=Math.min(Zf,Te);return{container:Q,minPx:ke,maxPx:Te}},[je.height,Js]),La=p.useCallback((Q,ge=an)=>as(Q,ge.minPx,ge.maxPx),[an]),ws=p.useCallback(()=>{const Q=Be.current;return Q&&"version"in Q&&Q.version===2&&typeof Q.fraction=="number"?as(Q.fraction,0,1):Q&&"height"in Q&&typeof Q.height=="number"&&an.container>0?as(Q.height/an.container,0,1):.25},[an.container]);p.useEffect(()=>{D===null&&an.container>0&&K(ws())},[D,an.container,ws]);const Rn=p.useCallback(()=>an.container>0&&an.maxPx<Zf?(k("closed"),Ke(eb,{intent:"warning",duration:1e4}),!1):(An(),k("open"),K(Q=>Q!==null?as(Q,0,1):ce.current!==null?as(ce.current,0,1):ws()),!0),[an,k,Ke,An,ws]),Dn=p.useCallback(()=>{ce.current=D,k("closed"),An()},[D,k,An]);p.useEffect(()=>{if(Ee)return;const Q=Be.current?.state;if(N||!Q){ye(!0);return}(Q==="open"||Q==="closed")&&Q!==S&&k(Q),ye(!0)},[N,S,k,Ee]),p.useEffect(()=>{!ve||vr||D===null||ve.set({version:2,fraction:as(D,0,1),state:S})},[ve,D,S,vr]),p.useEffect(()=>{if(!(S!=="open"||!an.container)){if(an.maxPx<Zf){k("closed"),Ke(eb,{intent:"warning",duration:1e4});return}K(Q=>Q===null?ws():as(Q,0,1))}},[S,an,k,Ke,ws]);const Zi=p.useCallback((Q,ge)=>{if(Q<=0)return{minPx:ge.min,maxPx:ge.max,minFrac:0,maxFrac:1};const Te=Math.min(ge.min,Q),ke=Math.min(ge.max,Q);return{minPx:Te,maxPx:ke,minFrac:Te/Q,maxFrac:ke/Q}},[]),js=Math.max(0,je.width-Mk),Ss=p.useMemo(()=>Zi(js,Ck),[js,Zi]),Ua=p.useCallback((Q,ge)=>as(Q,ge.minFrac,ge.maxFrac),[]);p.useEffect(()=>{js<=0||Tt(Q=>{if(Q.collapsed)return Q;const ge=Ua(Q.fraction,Ss);return ge===Q.fraction?Q:{...Q,fraction:ge}})},[js,Ss,Ua]),p.useEffect(()=>{Oe.set({version:2,explorer:{collapsed:Et.collapsed,fraction:Et.fraction}})},[Oe,Et]);const sa=Et.collapsed?0:as(Et.fraction,Ss.minFrac,Ss.maxFrac)*js,$a=js>0?Math.min(sa,js):sa,$t=Math.max(0,an.container),Vi=(D??($t>0?as(Ak/$t,0,1):.25))*$t,Us=$t>0?La(Vi):0,Pi=J0,Qi=Kt?Rk:Us,_r=$t>0?Math.max(Js,$t-Pi-Qi):Js;p.useEffect(()=>{const Q=Ze.activeTabId;if(!Q){j(void 0);return}j(Q)},[Ze.activeTabId,j]),p.useEffect(()=>{!yt||!R||bs(R,yt)&&(Ze.openFile(yt),j(yt),At(null))},[yt,R,Ze,j]);const Ba=p.useCallback(()=>Rn()?(C("terminal"),!0):!1,[Rn,C]),mo=p.useCallback(async()=>{L||!R||O.isLoading||O.isError||!await ls()||await $({validate_only:!0},{mode:"validation"},{prepare:Ba})},[L,R,O.isLoading,O.isError,ls,$,Ba]),po=p.useCallback(async Q=>{if(me(!1),_t(!1),L||!R||O.isLoading||O.isError||!await ls())return;const Te=Array.from(new Set((Q.sheetNames??[]).filter(Boolean)));$({input_document_id:Q.documentId,input_sheet_names:Te.length?Te:void 0},{mode:"extraction",documentId:Q.documentId,documentName:Q.documentName,sheetNames:Te},{forceRebuild:Gt,prepare:Ba})},[L,R,O.isLoading,O.isError,$,Gt,Ba,ls]);p.useEffect(()=>{if(typeof window>"u")return;const Q=ge=>{if(!(Pt?ge.metaKey:ge.ctrlKey)||ge.altKey||ge.key.toLowerCase()!=="s")return;const ke=ge.target;if(ke){const Pe=ke.tagName;if(Pe==="INPUT"||Pe==="TEXTAREA"||ke.isContentEditable)return}wt&&(ge.preventDefault(),Fi())};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[Pt,wt,Fi]);const qa=W??(le?"extraction":void 0),Ha=le,Nu=Z.status==="running"||Ha&&qa==="validation",Fa=!L&&!!R&&!O.isLoading&&!O.isError&&!Ha&&Z.status!=="running",Es=Ha&&qa!=="validation",Cr=!L&&!!R&&!O.isLoading&&!O.isError&&!Ha,$s=!L&&!O.isLoading&&!O.isError,Bs=$s&&!yn.isPending,qs=$s&&!Tn.isPending,Za=$s&&!Kn.isPending,Hs=U&&!L&&!F.isPending&&!!J,go=p.useCallback(Q=>{Se(Q),Q==="explorer"&&Tt(ge=>({...ge,collapsed:!1}))},[]),ra=p.useCallback(Q=>{Q.preventDefault();const ge=Q.currentTarget.getBoundingClientRect();Fe({x:ge.right+8,y:ge.top})},[]),Ns=p.useCallback(Q=>{M(Q)},[]),Ii=p.useCallback(()=>Fe(null),[]),$n=p.useCallback(()=>{Kt?Rn():Dn()},[Kt,Rn,Dn]);p.useEffect(()=>{if(typeof window>"u")return;const Q=ge=>{if(!(Pt?ge.metaKey:ge.ctrlKey)||ge.altKey||ge.key?.toLowerCase()!=="`"&&ge.code!=="Backquote")return;const Pe=ge.target;if(Pe&&!(typeof Pe.closest=="function"?Pe.closest("[data-editor-area]"):null)){const ct=Pe.tagName,Mn=Pe.getAttribute("role");if(ct==="INPUT"||ct==="TEXTAREA"||Mn==="textbox"||Pe.isContentEditable)return}ge.preventDefault(),$n()};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[Pt,$n]);const Fs=p.useCallback(()=>{P()},[P]),Wi=p.useCallback(()=>{Tt(Q=>({...Q,collapsed:!Q.collapsed}))},[]),Va=p.useCallback(()=>{Tt(Q=>({...Q,collapsed:!0}))},[]),xo=p.useCallback(async(Q,ge)=>{const Te=ge.trim();if(!Te)throw new Error("Enter a file name.");if(Te.includes(".."))throw new Error("File name cannot include '..'.");if(!$s)throw new Error("Files are still loading.");const ke=Q.replace(/\/+$/,""),Pe=Te.replace(/^\/+/,"").replace(/\/+/g,"/"),ct=(ke?`${ke}/${Pe}`:Pe).replace(/\/+/g,"/");if(!ct||ct.endsWith("/"))throw new Error("Enter a valid file name.");if(R&&bs(R,ct))throw new Error("A file or folder with that name already exists.");Ls(!0);try{await ta.mutateAsync({path:ct,content:"",parents:!0,create:!0}),At(ct),await O.refetch(),Ke(`Created ${ct}`,{intent:"success",duration:4e3})}catch(Mn){throw Ot(Mn),Mn instanceof Error?Mn:new Error("Unable to create file.")}finally{Ls(!1)}},[$s,R,ta,O,Ke,Ot]),Pa=p.useCallback(async(Q,ge)=>{const Te=ge.trim();if(!Te)throw new Error("Enter a folder name.");if(Te.includes(".."))throw new Error("Folder name cannot include '..'.");if(!qs)throw new Error("Files are still loading.");const ke=Q.replace(/\/+$/,""),Pe=Te.replace(/^\/+/,"").replace(/\/+/g,"/"),ct=(ke?`${ke}/${Pe}`:Pe).replace(/\/+/g,"/").replace(/\/$/,"");if(!ct)throw new Error("Enter a valid folder name.");if(R&&bs(R,ct))throw new Error("A file or folder with that name already exists.");zt(!0);try{await Tn.mutateAsync({path:ct}),await O.refetch(),Ke(`Folder ready: ${ct}`,{intent:"success",duration:4e3})}catch(Mn){throw Ot(Mn),Mn instanceof Error?Mn:new Error("Unable to create folder.")}finally{zt(!1)}},[qs,R,Tn,O,Ke,Ot]),Qa=p.useCallback(async Q=>{if(!Bs)throw new Error("Files are still loading.");const ge=R?bs(R,Q):null;if(!R||!ge)throw new Error("File not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete ${Q}? This cannot be undone.`)){Ls(!1),fn(Q);try{await yn.mutateAsync({path:Q,etag:ge.metadata?.etag}),Ze.closeTab(Q),At(ke=>ke===Q?null:ke),await O.refetch(),Ke(`Deleted ${Q}`,{intent:"info",duration:4e3})}catch(ke){const Pe=ke instanceof On&&ke.status===428?"Delete blocked: missing latest file version. Reload the explorer and try again.":ke instanceof Error?ke.message:"Unable to delete file.";throw Ot(Pe),new Error(Pe)}finally{fn(ke=>ke===Q?null:ke)}}},[Bs,R,yn,Ze,O,Ke,Ot,fn]),bo=p.useCallback(async Q=>{if(!Za)throw new Error("Files are still loading.");const ge=R?bs(R,Q):null;if(!R||!ge||ge.kind!=="folder")throw new Error("Folder not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete folder ${Q} and all contents? This cannot be undone.`)){mn(Q);try{await Kn.mutateAsync({path:Q,recursive:!0}),At(ke=>ke===Q?null:ke),Ze.closeTab(Q),await O.refetch(),Ke(`Deleted folder ${Q}`,{intent:"info",duration:4e3})}catch(ke){const Pe=ke instanceof Error?ke.message:"Unable to delete folder.";throw Ot(Pe),new Error(Pe)}finally{mn(ke=>ke===Q?null:ke)}}},[Za,R,Kn,Ze,O,Ke,Ot,mn]),wn=p.useCallback(()=>{if(!Hs){Ke("Replace is only available for draft configurations.",{intent:"warning",duration:6e3}),M(null);return}M(null),ie(!0)},[Hs,Ke]),er=p.useCallback(async Q=>{const ge=Q.target.files?.[0]??null;if(Q.target.value="",!!ge)try{await F.mutateAsync({file:ge,ifMatch:J}),Me?.clear?.(),Ze.closeAllTabs(),j(void 0);const ke=(await O.refetch()).data??O.data??null,Pe=ke?q0(ke):null,ln=Pe?Wh(Pe):null;At(ln?.id??null),Ke("Configuration replaced from archive.",{intent:"success",duration:6e3})}catch(Te){const ke=Te instanceof On&&Te.status===412?"Replace blocked: the configuration changed on the server. Reload and try again.":Te instanceof On&&Te.status===428?"Replace blocked: refresh the file list and try again.":Te instanceof Error?Te.message:"Unable to replace configuration.";Ot(ke),Ke(ke,{intent:"danger",duration:6e3})}},[F,J,Me,Ze,O,j,At,Ke,Ot]),Ia=p.useMemo(()=>{const Q=l.jsx("span",{className:"inline-block h-4 w-4 opacity-0"}),ge=Bk.map(Te=>({id:`theme-${Te.value}`,label:`${Te.label} theme`,icon:Ne.preference===Te.value?l.jsx(Vf,{}):Q,onSelect:()=>Ne.setPreference(Te.value)}));return ge.push({id:"toggle-explorer",label:Et.collapsed?"Show Explorer":"Hide Explorer",dividerAbove:!0,icon:Et.collapsed?Q:l.jsx(Vf,{}),onSelect:()=>Tt(Te=>({...Te,collapsed:!Te.collapsed}))},{id:"toggle-console",label:Kt?"Show Console":"Hide Console",icon:Kt?Q:l.jsx(Vf,{}),onSelect:$n}),ge},[Ne,Et.collapsed,Kt,$n]),aa=p.useMemo(()=>[{id:"export",label:G?"Exporting":"Export (.zip)",disabled:G,onSelect:()=>{M(null),Un()}},{id:"replace",label:"Import from zip",disabled:!Hs,onSelect:wn}],[Hs,Un,wn,G]);p.useEffect(()=>{if(typeof document>"u"||!Ct)return;const Q=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=Q||""}},[Ct]);const _u=s5(e),Gi=Pt?"S":"Ctrl+S",Ki=Pt?"`":"Ctrl+`",ia=p.useMemo(()=>{const Q=!Cr;return[{id:"test-default",label:"Test",disabled:Q,onSelect:()=>{_t(!1),me(!0),nt(null)}},{id:"test-force",label:"Force build and test",disabled:Q,onSelect:()=>{_t(!0),me(!0),nt(null)}}]},[Cr,_t,me,nt]);if(!i&&O.isLoading)return l.jsx(ut,{variant:"loading",title:"Loading configuration files",description:"Fetching workspace configuration files for the workbench."});if(!i&&O.isError)return l.jsx(ut,{variant:"error",title:"Unable to load configuration files",description:"Try reloading the page or check your connection."});if(!R)return l.jsx(ut,{variant:"empty",title:"No configuration files found",description:"Create files in the ADE configuration package to begin editing."});const Wa=Ct?Le==="dark"?"bg-[#0f111a] text-white":"bg-slate-50 text-slate-900":Le==="dark"?"bg-transparent text-white":"bg-transparent text-slate-900",vo=Le==="dark"?"#1b1f27":"#ffffff",Cu=Le==="dark"?"#f5f6fb":"#0f172a",ku=Ct?he("fixed inset-0 z-[90] flex flex-col",Le==="dark"?"bg-[#0f111a] text-white":"bg-white text-slate-900"):he("flex w-full min-h-0 min-w-0 flex-1 flex-col overflow-hidden",Le==="dark"?"bg-[#101322] text-white":"bg-white text-slate-900"),Yi=Le==="dark"?{bar:"border-[#1f2431] bg-[#0f111a] text-slate-200",hint:"text-slate-400",button:"border-[#2b3040] bg-[#161926] text-slate-100 hover:border-[#3b4153] hover:bg-[#1e2333]"}:{bar:"border-slate-300 bg-white text-slate-700",hint:"text-slate-500",button:"border-slate-300 bg-slate-50 text-slate-700 hover:border-slate-400"};return l.jsxs("div",{className:he("flex h-full min-h-0 w-full min-w-0 flex-1 flex-col overflow-hidden",Wa),children:[Ct?l.jsx("div",{className:"fixed inset-0 z-40 bg-slate-900/60"}):null,l.jsxs("div",{className:ku,children:[l.jsx(Fk,{configName:r,workspaceLabel:_u,validationLabel:rn,canSaveFiles:wt,isSavingFiles:Er,onSaveFile:Fi,saveShortcutLabel:Gi,onOpenTestMenu:Q=>nt(Q),onOpenActionsMenu:Ns,canRunValidation:Fa,isRunningValidation:Nu,onRunValidation:mo,canRunExtraction:Cr,isRunningExtraction:Es,onRunExtraction:Q=>{Cr&&(_t(Q),me(!0))},explorerVisible:Oa,onToggleExplorer:Wi,consoleOpen:!Kt,onToggleConsole:$n,appearance:Le,windowState:c,onMinimizeWindow:Hi,onToggleMaximize:Sr,onCloseWindow:wr,actionsBusy:G||F.isPending}),l.jsxs("div",{ref:We,className:"flex min-h-0 min-w-0 flex-1 overflow-hidden",children:[l.jsx(gE,{activeView:Nt,onSelectView:go,onOpenSettings:ra,appearance:Le}),Oa?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex min-h-0",style:{width:$a},children:Nt==="explorer"&&Ze.tree?l.jsx(PC,{width:$a,tree:Ze.tree,activeFileId:Ze.activeTab?.id??"",openFileIds:Ze.tabs.map(Q=>Q.id),onSelectFile:Q=>{Ze.openFile(Q),j(Q)},theme:Le,canCreateFile:$s,canCreateFolder:qs,isCreatingEntry:qi||yr,onCreateFile:xo,onCreateFolder:Pa,canDeleteFile:Bs,canDeleteFolder:Za,deletingFilePath:kn,deletingFolderPath:hn,onDeleteFile:Qa,onDeleteFolder:bo,expandedStorageKey:Uk(e,n),onHide:Va}):l.jsx(Hk,{width:$a,view:Nt,appearance:Le})}),l.jsx(B0,{orientation:"vertical",onPointerDown:Q=>{const ge=Q.clientX,Te=$a;V0(Q,{cursor:"col-resize",onMove:ke=>{const Pe=ke.clientX-ge,ln=as(Te+Pe,Ss.minPx,Ss.maxPx);Tt(ct=>ct.collapsed||js<=0?ct:{...ct,fraction:Ua(ln/js,Ss)})}})}})]}):null,l.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",style:{backgroundColor:vo,color:Cu},children:l.jsxs("div",{className:"grid min-h-0 min-w-0 flex-1",style:{height:$t>0?`${$t}px`:void 0,gridTemplateRows:`${Math.max(Js,_r)}px ${Pi}px ${Math.max(0,Qi)}px`},children:[l.jsx(HC,{tabs:Ze.tabs,activeTabId:Ze.activeTab?.id??"",onSelectTab:Q=>{Ze.selectTab(Q),j(Q)},onCloseTab:Ze.closeTab,onCloseOtherTabs:Ze.closeOtherTabs,onCloseTabsToRight:Ze.closeTabsToRight,onCloseAllTabs:Ze.closeAllTabs,onContentChange:Ze.updateContent,onSaveTab:Nr,onSaveAllTabs:fo,onMoveTab:Ze.moveTab,onRetryTabLoad:Ze.reloadTab,onPinTab:Ze.pinTab,onUnpinTab:Ze.unpinTab,onSelectRecentTab:Ze.selectRecentTab,editorTheme:Ne.resolvedTheme,menuAppearance:Le,canSaveFiles:wt,minHeight:Js}),l.jsx(B0,{orientation:"horizontal",onPointerDown:Q=>{Os(!0);const ge=Q.clientY,Te=Us;let ke=!1;V0(Q,{cursor:"row-resize",onMove:Pe=>{if(Kt&&!ke&&(Rn(),ke=!0),an.maxPx<=0||$t<=0)return;const ln=ge-Pe.clientY,ct=as(Te+ln,an.minPx,an.maxPx);K(as(ct/$t,0,1))},onEnd:()=>{Os(!1)}})},onDoubleClick:()=>{Kt?Rn():Dn()},onToggle:$n,collapsed:Kt}),Kt?l.jsxs("div",{className:he("flex cursor-pointer items-center justify-between border-t px-4 py-2 text-[12px] shadow-inner",Yi.bar),onDoubleClick:$n,title:"Double-click to show console",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:"Console hidden"}),l.jsxs("span",{className:he("text-[11px]",Yi.hint),children:["(double-click gutter or ",Ki,")"]})]}),l.jsx("button",{type:"button",onClick:$n,className:he("rounded px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition",Yi.button),title:"Show console",children:"Show console"})]}):l.jsx(TN,{height:Math.max(0,Us),consoleLines:X,validation:Z,activePane:w,onPaneChange:C,latestRun:B,onClearConsole:Fs,runStatus:T,onToggleCollapse:$n})]})})]})]}),re?l.jsx(Zk,{open:re,workspaceId:e,onClose:()=>{me(!1),_t(!1)},onRun:po}):null,l.jsx("input",{ref:ue,type:"file",accept:".zip",onChange:er,className:"hidden"}),we?l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"replace-config-title",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h2",{id:"replace-config-title",className:"text-lg font-semibold text-slate-900",children:"Import from zip"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Importing will replace this configurations current code with the uploaded archive. Unsaved editor changes will be discarded."}),Hs?null:l.jsx("p",{className:"text-sm font-medium text-danger-600",children:"Only draft configurations can be replaced."}),Ze.isDirty?l.jsx("p",{className:"text-sm font-medium text-amber-700",children:"You have unsaved changes that will be lost."}):null]}),l.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[l.jsx(Ce,{variant:"secondary",onClick:()=>ie(!1),disabled:F.isPending,children:"Cancel"}),l.jsx(Ce,{onClick:()=>{ie(!1),ue.current?.click()},disabled:!Hs||F.isPending,isLoading:F.isPending,children:"Continue"})]})]})}):null,l.jsx(Ai,{open:!!xe,position:xe,onClose:()=>M(null),items:aa,appearance:Le}),l.jsx(Ai,{open:!!Mt,position:Mt,onClose:()=>nt(null),items:ia,appearance:Le}),l.jsx(Ai,{open:!!_e,position:_e,onClose:Ii,items:Ia,appearance:Le})]})}function Hk({width:e,view:n,appearance:r}){const i=qk[n]||"Coming soon",c=r==="dark"?"border-[#111111] bg-[#1e1e1e] text-slate-300":"border-slate-200 bg-slate-50 text-slate-600";return l.jsx("div",{className:he("flex h-full min-h-0 flex-col items-center justify-center border-r px-4 text-center text-[11px] uppercase tracking-wide",c),style:{width:e},"aria-live":"polite",children:i})}function Vf(){return l.jsx("svg",{className:"h-4 w-4 text-[#4fc1ff]",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 8l3 3 5-6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function Fk({configName:e,workspaceLabel:n,validationLabel:r,canSaveFiles:i,isSavingFiles:c,onSaveFile:u,saveShortcutLabel:d,onOpenTestMenu:m,onOpenActionsMenu:x,canRunValidation:g,isRunningValidation:b,onRunValidation:v,canRunExtraction:w,isRunningExtraction:S,onRunExtraction:N,explorerVisible:j,onToggleExplorer:C,consoleOpen:k,onToggleConsole:_,appearance:A,windowState:L,onMinimizeWindow:O,onToggleMaximize:J,onCloseWindow:U,actionsBusy:ne=!1}){const R=A==="dark",H=R?"border-white/10 bg-[#151821] text-white":"border-slate-200 bg-white text-slate-900",ae=R?"text-white/60":"text-slate-500",I=R?"bg-emerald-400/20 text-emerald-50 hover:bg-emerald-400/30 disabled:bg-white/10 disabled:text-white/30":"bg-emerald-500 text-white hover:bg-emerald-400 disabled:bg-slate-200 disabled:text-slate-500",F=R?"bg-brand-500 text-white hover:bg-brand-400 disabled:bg-white/20 disabled:text-white/40":"bg-brand-600 text-white hover:bg-brand-500 disabled:bg-slate-200 disabled:text-slate-500",ue=L==="maximized";return l.jsxs("div",{className:he("flex items-center justify-between border-b px-4 py-2",H),children:[l.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[l.jsx(Qk,{}),l.jsxs("div",{className:"min-w-0 leading-tight",children:[l.jsx("div",{className:he("text-[10px] font-semibold uppercase tracking-[0.35em]",ae),children:"Config Workbench"}),l.jsx("div",{className:"truncate text-sm font-semibold",title:e,children:e}),l.jsxs("div",{className:he("text-[11px]",ae),title:n,children:["Workspace  ",n]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[r?l.jsx("span",{className:he("text-xs",ae),children:r}):null,l.jsxs("button",{type:"button",onClick:u,disabled:!i,className:he("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",I),title:`Save (${d})`,children:[c?l.jsx(Pf,{}):l.jsx(e5,{}),c?"Saving":"Save"]}),l.jsxs("button",{type:"button",onClick:v,disabled:!g,className:he("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",F),children:[b?l.jsx(Pf,{}):l.jsx(tb,{}),b?"Running":"Run validation"]}),l.jsx(b2,{label:S?"Running":"Test run",icon:S?l.jsx(Pf,{}):l.jsx(tb,{}),disabled:!w,isLoading:S,title:"Run test run",primaryClassName:he(F,"rounded-r-none focus-visible:ring-offset-0"),menuClassName:he(F,"rounded-l-none px-2",R?"border-white/20":"border-slate-300"),menuAriaLabel:"Open test options",onPrimaryClick:()=>N(!1),onOpenMenu:xe=>m(xe),onContextMenu:xe=>{xe.preventDefault(),m({x:xe.clientX,y:xe.clientY})}}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ei,{ariaLabel:j?"Hide explorer":"Show explorer",onClick:C,appearance:A,active:j,icon:l.jsx(Ik,{active:j})}),l.jsx(Ei,{ariaLabel:k?"Hide console":"Show console",onClick:_,appearance:A,active:k,icon:l.jsx(Wk,{})})]}),l.jsx(Ei,{ariaLabel:"Configuration actions",onClick:xe=>{const M=xe.currentTarget.getBoundingClientRect();x({x:M.right+8,y:M.bottom})},appearance:A,disabled:ne,icon:l.jsx(Jk,{})}),l.jsxs("div",{className:he("flex items-center gap-2 border-l pl-3",A==="dark"?"border-white/20":"border-slate-200/70"),children:[l.jsx(Ei,{ariaLabel:"Minimize workbench",onClick:O,appearance:A,icon:l.jsx(Yk,{})}),l.jsx(Ei,{ariaLabel:ue?"Restore workbench":"Maximize workbench",onClick:J,appearance:A,active:ue,icon:ue?l.jsx(Kk,{}):l.jsx(Gk,{})}),l.jsx(Ei,{ariaLabel:"Close workbench",onClick:U,appearance:A,icon:l.jsx(Xk,{})})]})]})]})}function Zk({open:e,workspaceId:n,onClose:r,onRun:i}){const c=p.useRef(null),u=_n({queryKey:["builder-documents",n],queryFn:({signal:A})=>Vk(n,A),staleTime:6e4,enabled:e}),d=p.useMemo(()=>u.data??[],[u.data]),[m,x]=p.useState("");p.useEffect(()=>{if(e){if(!d.length){x("");return}x(A=>A&&d.some(L=>L.id===A)?A:d[0]?.id??"")}},[d,e]);const g=d.find(A=>A.id===m)??null,b=_n({queryKey:["builder-document-sheets",n,m],queryFn:({signal:A})=>dy(n,m,A),enabled:e&&!!m,staleTime:6e4}),v=p.useMemo(()=>b.data??[],[b.data]),[w,S]=p.useState([]);p.useEffect(()=>{if(e){if(!v.length){S([]);return}S(A=>A.filter(L=>v.some(O=>O.name===L)))}},[e,v]);const N=p.useMemo(()=>Array.from(new Set(w.filter(A=>v.some(L=>L.name===A)))),[w,v]),j=p.useCallback(A=>{S(L=>L.includes(A)?L.filter(O=>O!==A):[...L,A])},[]);if(!e)return null;const C=!g||u.isLoading||u.isError,k=v.length>0,_=l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:l.jsxs("div",{ref:c,role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-2xl",children:[l.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Select a document"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Choose a workspace document and optional worksheet before running a test."})]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:r,children:"Close"})]}),u.isError?l.jsx(rt,{tone:"danger",children:"Unable to load documents. Try again later."}):u.isLoading?l.jsx("p",{className:"text-sm text-slate-500",children:"Loading documents"}):d.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Upload a document in the workspace to run the extractor."}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"builder-run-document-select",children:"Document"}),l.jsx(Aa,{id:"builder-run-document-select",value:m,onChange:A=>x(A.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm",children:d.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))}),g?l.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",Pk(g.created_at)," "," ",(g.byte_size??0).toLocaleString()," bytes"]}):null]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheet"}),b.isLoading?l.jsx("p",{className:"text-sm text-slate-500",children:"Loading worksheets"}):b.isError?l.jsx(rt,{tone:"warning",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ce,{variant:"secondary",size:"sm",onClick:()=>b.refetch(),disabled:b.isFetching,children:"Retry loading"}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>S([]),children:"Use all worksheets"})]})]})}):k?l.jsxs("div",{className:"space-y-3 rounded-lg border border-slate-200 p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheets"}),l.jsx("p",{className:"text-xs text-slate-500",children:N.length===0?"All worksheets will be processed by default. Select specific sheets to narrow the run.":`${N.length.toLocaleString()} worksheet${N.length===1?"":"s"} selected.`})]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>S([]),children:"Use all worksheets"})]}),l.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:v.map(A=>{const L=N.includes(A.name);return l.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:L,onChange:()=>j(A.name)}),l.jsxs("span",{className:"flex-1 truncate",children:[A.name,A.is_active?" (active)":""]})]},`${A.index}-${A.name}`)})})]}):l.jsx("p",{className:"text-sm text-slate-500",children:"This file will be ingested directly."})]})]}),l.jsxs("footer",{className:"mt-6 flex items-center justify-end gap-2",children:[l.jsx(Ce,{variant:"ghost",onClick:r,children:"Cancel"}),l.jsx(Ce,{onClick:()=>{g&&i({documentId:g.id,documentName:g.name,sheetNames:N.length>0?N:void 0})},disabled:C,children:"Start test run"})]})]})});return typeof document>"u"?null:vs.createPortal(_,document.body)}async function Vk(e,n){const{data:r}=await He.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:{sort:"-created_at",page_size:50}},signal:n});return r?.items??[]}function Pk(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function Ei({ariaLabel:e,onClick:n,icon:r,appearance:i,active:c=!1,disabled:u=!1}){const d=i==="dark",m=d?"text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20 focus-visible:ring-white/40":"text-slate-500 hover:text-slate-900 hover:bg-slate-100 hover:border-slate-300 focus-visible:ring-slate-400/40",x=d?"text-white border-white/30 bg-white/10":"text-slate-900 border-slate-300 bg-slate-200/70";return l.jsx("button",{type:"button","aria-label":e,onClick:n,disabled:u,className:he("flex h-7 w-7 items-center justify-center rounded-[4px] border border-transparent text-sm transition focus-visible:outline-none focus-visible:ring-2",m,c&&x,u&&"cursor-not-allowed opacity-50"),title:e,children:r})}function Qk(){return l.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#4fc1ff] via-[#2d7dff] to-[#7c4dff] text-white shadow-lg shadow-[#10121f]",children:l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none",children:[l.jsx("rect",{x:"2",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"2",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"})]})})}function Ik({active:e}){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"3",y:"4",width:"14",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6}),l.jsx("path",{d:"M7 4v12",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6})]})}function Wk(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M3 10.5h10",stroke:"currentColor",strokeWidth:"1.2"})]})}function Gk(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1.5",stroke:"currentColor",strokeWidth:"1.2"})})}function Kk(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 4h6v6",stroke:"currentColor",strokeWidth:"1.2"})]})}function Yk(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 11h8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function Xk(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M5 5l6 6M11 5l-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function Pf(){return l.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"currentColor",strokeWidth:"2",opacity:"0.35"}),l.jsx("path",{d:"M20 12a8 8 0 0 0-8-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function tb(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4.5 3.5v9l7-4.5-7-4.5Z",fill:"currentColor"})})}function Jk(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"3",cy:"8",r:"1.3",fill:"currentColor"}),l.jsx("circle",{cx:"8",cy:"8",r:"1.3",fill:"currentColor"}),l.jsx("circle",{cx:"13",cy:"8",r:"1.3",fill:"currentColor"})]})}function e5(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4 2.5h7.25L13.5 4.8v8.7H4z",stroke:"currentColor",strokeWidth:"1.3",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function t5(e){return e instanceof On?e.message:e instanceof DOMException&&e.name==="AbortError"?"Operation cancelled.":e instanceof Error?e.message:String(e)}function n5(e){if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function s5(e){return e.length<=12?e:`${e.slice(0,6)}${e.slice(-4)}`}function nb(e){if(e.encoding==="base64"){const n=globalThis.Buffer;if(n)return n.from(e.content,"base64").toString("utf-8");if(typeof atob=="function")try{const r=atob(e.content),i=new Uint8Array(r.length);for(let u=0;u<r.length;u+=1)i[u]=r.charCodeAt(u);if(typeof TextDecoder<"u")return new TextDecoder("utf-8",{fatal:!1}).decode(i);let c="";for(let u=0;u<i.length;u+=1)c+=String.fromCharCode(i[u]);return c}catch{}}return e.content}function r5(e){return`ade.ui.workspace.${e}.workbench.returnPath`}const Sy=p.createContext(null);function Ey(){const e=p.useContext(Sy);if(!e)throw new Error("useWorkbenchWindow must be used within a WorkbenchWindowProvider");return e}function a5({workspaceId:e,children:n}){const r=Vt(),i=Hn(),[c,u]=p.useState(null),[d,m]=p.useState("restored"),x=p.useRef(0),g=p.useRef(null),b=p.useRef(!1),v=p.useMemo(()=>Gs(r5(e)),[e]),w=p.useMemo(()=>`/workspaces/${e}/config-builder`,[e]),S=p.useMemo(()=>d5(i.pathname,e),[i.pathname,e]),N=!!S;p.useEffect(()=>{v.get()||v.set(w)},[v,w]),p.useEffect(()=>{N||v.set(`${i.pathname}${i.search}${i.hash}`)},[N,i.pathname,i.search,i.hash,v]),p.useEffect(()=>{if(!c){g.current=null;return}const H=g.current;if(N&&S===c.configId){if(H==="dock"){g.current=null,m("minimized");return}H&&(g.current=null);return}if(H==="dock"){g.current=null;return}if(H==="close"){g.current=null;return}u(null),m("restored"),g.current=null},[c,N,S,d]),p.useEffect(()=>{if(!c||!N||S!==c.configId)return;const H=rb(i.search);H!==c.editorSearch&&u(ae=>!ae||ae.instanceId!==c.instanceId?ae:{...ae,editorSearch:H})},[c,N,S,i.search]);const j=p.useCallback(()=>v.get()??w,[v,w]),C=p.useCallback(H=>{u(ae=>{if(!ae)return ae;const I=new URLSearchParams(ae.editorSearch),F=typeof H=="function"?H(new URLSearchParams(I)):H,xe=ly(F).toString();return xe===ae.editorSearch?ae:{...ae,editorSearch:xe}})},[]),k=p.useCallback(H=>{const ae=rb(H.editorSearch??i.search);let I=d==="minimized";u(F=>{if(F&&F.workspaceId===H.workspaceId&&F.configId===H.configId){const ue=H.seed??F.seed,xe=H.editorSearch!==void 0?ae:F.editorSearch;return F.configName===H.configName&&F.seed===ue&&F.editorSearch===xe?F:{...F,configName:H.configName,seed:ue,editorSearch:xe}}return I=!0,x.current+=1,{...H,editorSearch:ae,instanceId:`${H.workspaceId}:${H.configId}:${x.current}`}}),I&&m("restored")},[i.search,d]),_=p.useCallback(()=>{c&&(u(null),m("restored"),g.current="close",r(j()))},[c,r,j]),A=p.useCallback(()=>{c&&(b.current=!0,m("minimized"),g.current="dock",r(j()))},[c,r,j]),L=p.useCallback(()=>{if(!c)return;m("restored");const H=f5(c.workspaceId,c.configId,c.editorSearch);`${i.pathname}${i.search}`!==H&&r(H)},[c,r,i.pathname,i.search]),O=p.useCallback(()=>{c&&m("maximized")},[c]),J=p.useCallback(()=>{const H=b.current;return b.current=!1,H},[]),U=p.useMemo(()=>({session:c,windowState:d,openSession:k,closeSession:_,minimizeWindow:A,maximizeWindow:O,restoreWindow:L,shouldBypassUnsavedGuard:J}),[c,d,k,_,A,O,L,J]),ne=!!c&&(!N||S!==c?.configId),R=p.useMemo(()=>ne&&c?{params:new URLSearchParams(c.editorSearch),setSearchParams:C}:null,[ne,c,C]);return l.jsxs(Sy.Provider,{value:U,children:[n,l.jsx(i2,{value:R,children:l.jsx(i5,{session:c,windowState:d,onClose:_,onMinimize:A,onMaximize:O,onRestore:L,shouldBypassUnsavedGuard:J})}),c&&d==="minimized"?l.jsx(l5,{configName:c.configName,onRestore:L,onDismiss:_}):null]})}function i5({session:e,windowState:n,onClose:r,onMinimize:i,onMaximize:c,onRestore:u,shouldBypassUnsavedGuard:d}){return!e||n!=="maximized"?null:l.jsx("div",{className:"fixed inset-0 z-40 flex flex-col bg-slate-50",children:l.jsx(jy,{workspaceId:e.workspaceId,configId:e.configId,configName:e.configName,seed:e.seed,windowState:"maximized",onCloseWorkbench:r,onMinimizeWindow:i,onMaximizeWindow:c,onRestoreWindow:u,shouldBypassUnsavedGuard:d},e.instanceId)})}function l5({configName:e,onRestore:n,onDismiss:r}){return l.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40",children:l.jsx("div",{className:"pointer-events-auto border-t border-slate-200 bg-white/95 shadow-[0_-12px_40px_rgba(15,23,42,0.15)] backdrop-blur",children:l.jsxs("div",{className:"relative mx-auto flex h-14 max-w-6xl items-center px-4 text-slate-900",children:[l.jsxs("button",{type:"button",onClick:n,className:"group flex min-w-0 flex-1 items-center gap-4 rounded-md px-3 py-1.5 text-left transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-slate-200 bg-slate-50 text-brand-600 shadow-inner",children:l.jsx(o5,{})}),l.jsxs("span",{className:"flex min-w-0 flex-col leading-tight",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-slate-400",children:"Config workbench"}),l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",title:e,children:e})]}),l.jsx("span",{className:"ml-auto inline-flex items-center rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-600 transition group-hover:border-slate-300 group-hover:bg-slate-50",children:"Restore"})]}),l.jsxs("div",{className:"ml-3 flex h-10 overflow-hidden rounded-md border border-slate-200 bg-white text-slate-500",children:[l.jsx(sb,{ariaLabel:"Restore minimized workbench",onClick:n,destructive:!1,children:l.jsx(c5,{})}),l.jsx(sb,{ariaLabel:"Close minimized workbench",onClick:r,destructive:!0,children:l.jsx(u5,{})})]})]})})})}function sb({ariaLabel:e,onClick:n,children:r,destructive:i=!1}){return l.jsx("button",{type:"button","aria-label":e,onClick:n,className:he("flex h-full w-12 items-center justify-center transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",i?"text-rose-600 hover:bg-rose-50":"text-slate-500 hover:bg-slate-100 hover:text-slate-900"),children:r})}function o5(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"})]})}function c5(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"})})}function u5(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4.5 11.5 11.5 4.5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M11.5 11.5 4.5 4.5",stroke:"currentColor",strokeWidth:"1.2"})]})}function d5(e,n){const r=`/workspaces/${n}/config-builder/`;if(!e.startsWith(r))return null;const i=e.slice(r.length).split("/").filter(Boolean);if(i.length>=2&&i[1]==="editor")try{return decodeURIComponent(i[0])}catch{return i[0]}return null}function f5(e,n,r){const i=`/workspaces/${e}/config-builder/${encodeURIComponent(n)}/editor`;return r.length>0?`${i}?${r}`:i}function rb(e){return e?e.startsWith("?")?e.slice(1):e:""}function Ny({id:e,value:n,defaultValue:r="",placeholder:i="Search",ariaLabel:c,shortcutHint:u="K",shortcutKey:d="k",enableShortcut:m=!0,scopeLabel:x,leadingIcon:g,trailingIcon:b,className:v,variant:w="default",isLoading:S=!1,loadingLabel:N="Loading suggestions",filters:j,onSelectFilter:C,emptyState:k,onChange:_,onSubmit:A,onClear:L,onFocus:O,onBlur:J,suggestions:U=[],onSelectSuggestion:ne,renderSuggestion:R}){const H=p.useId(),ae=e??H,I=`${H}-suggestions`,F=p.useRef(null),ue=n!==void 0,[xe,M]=p.useState(r),[G,Y]=p.useState(!1),[we,ie]=p.useState(0),T=ue?n??"":xe,W=U.length>0,le=!!j?.length,Z=G&&(W||S||!!k||le),X=G&&!W&&!S&&!!k,B=!!(L||!ue),P=u||"K",$=c??i;p.useEffect(()=>{ue||M(r)},[r,ue]),p.useEffect(()=>{ie(0)},[U.length,T]),p.useEffect(()=>{if(!m||typeof window>"u")return;const Ne=Le=>{(Le.metaKey||Le.ctrlKey)&&Le.key.toLowerCase()===d.toLowerCase()&&(Le.preventDefault(),F.current?.focus())};return window.addEventListener("keydown",Ne),()=>window.removeEventListener("keydown",Ne)},[m,d]);const re=Ne=>{Ne.preventDefault();const Le=T.trim();!Le&&!A||A?.(Le)},me=Ne=>{ue||M(Ne),_?.(Ne)},Me=()=>{T&&(ue||M(""),_?.(""),L?.(),F.current?.focus())},ve=Ne=>{Ne&&(ne?.(Ne),Ne.action?.(),Y(!1),F.current?.blur())},Oe=Ne=>{if(!Z||!W){Ne.key==="Escape"&&(Y(!1),Ne.currentTarget.blur());return}if(Ne.key==="ArrowDown"){Ne.preventDefault(),ie(Le=>(Le+1)%U.length);return}if(Ne.key==="ArrowUp"){Ne.preventDefault(),ie(Le=>(Le-1+U.length)%U.length);return}if(Ne.key==="Enter"){Ne.preventDefault(),ve(U[we]);return}Ne.key==="Escape"&&(Ne.preventDefault(),Y(!1),Ne.currentTarget.blur())},Be=w==="minimal"?"rounded-lg border border-slate-200 bg-white shadow-sm focus-within:border-brand-200":"rounded-xl border border-slate-200/70 bg-gradient-to-r from-white/95 via-slate-50/80 to-white/95 shadow-[0_20px_45px_-30px_rgba(15,23,42,0.65)] ring-1 ring-inset ring-white/80 transition focus-within:border-brand-200 focus-within:shadow-[0_25px_55px_-35px_rgba(79,70,229,0.55)] sm:rounded-2xl";return l.jsxs("div",{className:he("relative",v),children:[l.jsx("div",{className:he("group/search overflow-hidden",Be,Z&&w==="default"&&"focus-within:shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)]"),children:l.jsxs("form",{className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-slate-600 sm:px-5 sm:py-2.5",role:"search","aria-label":$,onSubmit:re,children:[l.jsx("label",{htmlFor:ae,className:"sr-only",children:$}),g??l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/90 text-brand-600 shadow-inner shadow-white/60 ring-1 ring-inset ring-white/70 sm:h-10 sm:w-10 sm:rounded-xl",children:l.jsx(m5,{className:"h-4 w-4 flex-shrink-0 text-brand-600"})}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[x?l.jsx("span",{className:"text-[0.6rem] font-semibold uppercase tracking-wide text-slate-400 sm:text-[0.65rem]",children:x}):null,l.jsx("input",{ref:F,id:ae,type:"search",value:T,onChange:Ne=>me(Ne.target.value),onFocus:()=>{Y(!0),O?.(),W||ie(0)},onBlur:()=>{Y(!1),J?.()},onKeyDown:Oe,placeholder:i,className:"w-full border-0 bg-transparent text-base font-medium text-slate-900 placeholder:text-slate-400 focus:outline-none","aria-expanded":Z,"aria-controls":Z?I:void 0})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[B&&T?l.jsx("button",{type:"button",onClick:Me,"aria-label":"Clear search",className:"focus-ring inline-flex h-7 w-7 items-center justify-center rounded-full border border-transparent text-slate-400 hover:border-slate-200 hover:bg-white",children:l.jsx(p5,{className:"h-3.5 w-3.5"})}):null,S?l.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center","aria-live":"polite","aria-label":N,children:l.jsx(g5,{className:"h-4 w-4 text-brand-600"})}):null,b,l.jsx("span",{className:"hidden items-center gap-1 rounded-full border border-slate-200/80 bg-white/80 px-2 py-1 text-xs font-semibold text-slate-500 shadow-inner shadow-white/60 md:inline-flex",children:P})]})]})}),Z?l.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-2 overflow-hidden rounded-2xl border border-slate-200/70 bg-white/95 shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)] ring-1 ring-inset ring-white/80",children:[W?l.jsx("ul",{id:I,role:"listbox","aria-label":"Search suggestions",className:"divide-y divide-slate-100/80",children:U.map((Ne,Le)=>{const rn=Le===we,Et=R?.({suggestion:Ne,active:rn})??l.jsx(h5,{suggestion:Ne,active:rn});return l.jsx("li",{children:l.jsx("button",{type:"button",role:"option","aria-selected":rn,onMouseEnter:()=>ie(Le),onMouseDown:Tt=>Tt.preventDefault(),onClick:()=>ve(Ne),className:he("flex w-full px-5 py-3 text-left transition",rn?"bg-brand-50/60":"hover:bg-slate-50/80"),children:Et})},Ne.id)})}):null,X?l.jsx("div",{className:"px-5 py-4 text-sm text-slate-500",role:"status",children:k}):null,le?l.jsx("div",{className:"border-t border-slate-100/80 bg-slate-50/60 px-4 py-2.5",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-slate-500",children:[l.jsx("span",{className:"uppercase tracking-wide text-[0.6rem] text-slate-400",children:"Filters:"}),j?.map(Ne=>l.jsx("button",{type:"button",onMouseDown:Le=>Le.preventDefault(),onClick:()=>C?.(Ne),className:he("focus-ring inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-semibold transition",Ne.active?"border-brand-300 bg-brand-50 text-brand-700":"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:Ne.label},Ne.id))]})}):null]}):null]})}function h5({suggestion:e,active:n}){return l.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.icon?l.jsx("span",{className:"mt-0.5 text-slate-400",children:e.icon}):l.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-slate-200","aria-hidden":!0}),l.jsxs("span",{className:"flex min-w-0 flex-col",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.label}),e.shortcutHint?l.jsx("span",{className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-slate-400",children:e.shortcutHint}):null]}),e.description?l.jsx("span",{className:he("text-xs",n?"text-brand-700":"text-slate-500"),children:e.description}):null]})]})}function m5({className:e="h-4 w-4 flex-shrink-0 text-slate-400"}){return l.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("circle",{cx:"9",cy:"9",r:"5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"m13.5 13.5 3 3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function p5({className:e="h-3.5 w-3.5"}){return l.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function g5({className:e="h-4 w-4"}){return l.jsxs("svg",{className:he("animate-spin",e),viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-20",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),l.jsx("path",{className:"opacity-70",d:"M22 12a10 10 0 0 0-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function _y({brand:e,leading:n,actions:r,trailing:i,search:c,secondaryContent:u}){const d=!!c,m=c?{...c,className:he("order-last w-full lg:order-none lg:max-w-2xl lg:justify-self-center",c.className)}:void 0;return l.jsx("header",{className:"sticky top-0 z-40 border-b border-slate-200/70 bg-gradient-to-b from-white/95 via-slate-50/70 to-white/90 shadow-[0_12px_40px_-30px_rgba(15,23,42,0.8)] backdrop-blur supports-[backdrop-filter]:backdrop-blur-xl",children:l.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3 sm:px-6 lg:px-10",children:[l.jsxs("div",{className:he("flex min-h-[3.5rem] w-full flex-wrap items-center gap-3 sm:gap-4",d?"lg:grid lg:grid-cols-[auto_minmax(0,1fr)_auto] lg:items-center lg:gap-8":"justify-between"),children:[l.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3 lg:flex-none",children:[e,n]}),m?l.jsx(Ny,{...m}):null,l.jsxs("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2 sm:flex-none",children:[r,i]})]}),u?l.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u}):null]})})}function Cy({displayName:e,email:n,actions:r=[]}){const[i,c]=p.useState(!1),[u,d]=p.useState(!1),m=p.useRef(null),x=p.useRef(null),g=Vt(),b=p.useMemo(()=>x5(e||n),[e,n]),v=p.useCallback(()=>c(!1),[]);p.useEffect(()=>{if(!i)return;const N=C=>{const k=C.target;k&&(x.current?.contains(k)||m.current?.contains(k)||v())},j=C=>{C.key==="Escape"&&v()};return window.addEventListener("mousedown",N),window.addEventListener("touchstart",N,{passive:!0}),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",N),window.removeEventListener("touchstart",N),window.removeEventListener("keydown",j)}},[v,i]),p.useEffect(()=>{if(!i)return;x.current?.querySelector("button[data-menu-item]")?.focus({preventScroll:!0})},[i]);const w=p.useCallback(N=>{v(),N()},[v]),S=p.useCallback(async()=>{u||(v(),d(!0),g("/logout",{replace:!0}))},[v,u,g]);return l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:m,type:"button",className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-2.5 py-1.5 text-left text-sm font-semibold text-slate-700 shadow-sm transition hover:border-slate-300 hover:text-slate-900","aria-haspopup":"menu","aria-expanded":i,onClick:()=>c(N=>!N),children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-sm font-semibold text-white shadow-sm",children:b}),l.jsxs("span",{className:"hidden min-w-0 flex-col sm:flex",children:[l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:e}),l.jsx("span",{className:"truncate text-xs text-slate-400",children:n})]}),l.jsx(v5,{className:he("text-slate-400 transition-transform",i&&"rotate-180")})]}),i?l.jsxs("div",{ref:x,role:"menu",className:"absolute right-0 z-50 mt-2 w-72 origin-top-right rounded-xl border border-slate-200 bg-white p-2 text-sm shadow-xl",children:[l.jsxs("div",{className:"px-2 pb-2",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Signed in as"}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:n})]}),l.jsx("ul",{className:"space-y-1",role:"none",children:r.map(N=>l.jsx("li",{role:"none",children:l.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>w(N.onSelect),children:[l.jsx("span",{className:"inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100 text-xs font-semibold text-slate-500",children:N.icon??N.label.charAt(0).toUpperCase()}),l.jsxs("span",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"truncate",children:N.label}),N.description?l.jsx("span",{className:"truncate text-xs font-normal text-slate-400",children:N.description}):null]})]})},N.id))}),l.jsx("div",{className:"mt-2 border-t border-slate-200 pt-2",children:l.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"focus-ring flex w-full items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 transition hover:border-brand-200 hover:text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",onClick:S,disabled:u,children:[l.jsx("span",{children:"Sign out"}),u?l.jsx(b5,{}):null]})})]}):null]})}function x5(e){const n=e.split(" ").map(r=>r.trim()).filter(Boolean);return n.length===0?"":n.length===1?n[0].charAt(0).toUpperCase():`${n[0].charAt(0)}${n[n.length-1].charAt(0)}`.toUpperCase()}function b5(){return l.jsx("svg",{className:"h-4 w-4 animate-spin text-brand-600",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:l.jsx("path",{d:"M10 3a7 7 0 1 1-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}function v5({className:e}){return l.jsx("svg",{className:he("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:l.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}const y5="1.6.1",w5=y5.trim(),j5=w5||"unknown";async function S5(e={}){const{data:n}=await He.GET("/api/v1/system/safe-mode",{signal:e.signal}),r=n??{},i=!!r.enabled,c=typeof r.detail=="string"&&r.detail.trim().length>0?r.detail.trim():Bi;return{enabled:i,detail:c}}async function E5(e={}){const{data:n}=await He.GET("/api/v1/meta/versions",{signal:e.signal}),r=n??{};return{ade_api:ab(r.ade_api),ade_engine:ab(r.ade_engine)}}const Bi="ADE safe mode enabled; skipping engine execution until ADE_SAFE_MODE is disabled.";function ab(e){return typeof e=="string"&&e.trim().length>0?e.trim():"unknown"}const ib=["system","safe-mode"],lb=["system","versions"];function ky(){const n=dt().getQueryData(ib);return _n({queryKey:ib,queryFn:({signal:r})=>S5({signal:r}),initialData:n,staleTime:3e4,refetchInterval:6e4})}function N5(e={}){const r=dt().getQueryData(lb);return _n({queryKey:lb,queryFn:({signal:i})=>E5({signal:i}),initialData:r,staleTime:300*1e3,enabled:e.enabled??!0})}function Ty({open:e,onClose:n}){const r=p.useRef(null),i=p.useRef(null),c=N5({enabled:e}),u=c.isError,d=c.data?.ade_api??(c.isPending?"Loading...":"unknown"),m=c.data?.ade_engine??(c.isPending?"Loading...":"unknown");if(p.useEffect(()=>{if(!e)return;const g=b=>{b.key==="Escape"&&n()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[e,n]),p.useEffect(()=>{if(!e)return;const{body:g}=document,b=g.style.overflow;return g.style.overflow="hidden",()=>{g.style.overflow=b}},[e]),p.useEffect(()=>{e&&i.current?.focus({preventScroll:!0})},[e]),typeof document>"u"||!e)return null;const x=l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",role:"presentation",onMouseDown:g=>{g.target===g.currentTarget&&n()},children:l.jsxs("div",{ref:r,role:"dialog","aria-modal":"true","aria-labelledby":"about-versions-heading",className:"w-full max-w-xl rounded-2xl border border-slate-200/80 bg-white p-6 shadow-2xl",children:[l.jsxs("header",{className:"mb-6 flex items-start justify-between gap-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"About"}),l.jsx("h2",{id:"about-versions-heading",className:"text-xl font-semibold text-slate-900",children:"ADE versions"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Installed versions for this ADE deployment across the web UI and backend runtime."})]}),l.jsx(Ce,{ref:i,variant:"ghost",size:"sm",onClick:n,children:"Close"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Qf,{label:"ade-web",value:j5,hint:"Frontend build"}),l.jsx(Qf,{label:"ade-api",value:d,hint:"Backend service"}),l.jsx(Qf,{label:"ade-engine",value:m,hint:"Engine runtime"})]}),u?l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsx(rt,{tone:"warning",heading:"Backend versions unavailable",children:"Could not load backend versions. Check connectivity and try again."}),l.jsx(Ce,{size:"sm",variant:"secondary",onClick:()=>c.refetch(),children:"Retry"})]}):null]})});return vs.createPortal(x,document.body)}function Qf({label:e,value:n,hint:r}){return l.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl border border-slate-100 bg-slate-50 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e}),l.jsx("span",{className:"text-xs text-slate-500",children:r})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("code",{className:"rounded bg-slate-900/90 px-2.5 py-1 text-xs font-mono text-white shadow-sm",children:n})})]})}function fh({to:e,replace:n,className:r,title:i,children:c,onClick:u}){const d=Vt();return l.jsx("a",{href:e,className:r,title:i,onClick:m=>{u?.(m),!(m.defaultPrevented||m.metaKey||m.ctrlKey||m.shiftKey||m.altKey)&&(m.preventDefault(),d(e,{replace:n}))},children:c})}function Ay({to:e,end:n,className:r,children:i,title:c,onClick:u}){const{pathname:d}=Hn(),m=n?d===e:d===e||d.startsWith(`${e}/`),x=typeof r=="function"?r({isActive:m}):r,g=typeof i=="function"?i({isActive:m}):i;return l.jsx(fh,{to:e,className:x,title:c,onClick:u,children:g})}function oo(e){return function({title:r,...i}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":r?void 0:!0,role:r?"img":"presentation",...i,children:[r?l.jsx("title",{children:r}):null,l.jsx("path",{d:e})]})}}const _5=oo("M7 3h7l7 7v11a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2ZM14 3v5a1 1 0 0 0 1 1h5"),C5=oo("M5 6h14M5 12h14M5 18h8M7 4v4M12 10v4M15 16v4"),k5=oo("M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM16.5 12a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5ZM10 7.5h4M7.5 10v4M15.5 10.5 12 14"),T5=oo("M5 7h14M5 17h14M9 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm10 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-7-5h7m-9 0H5"),A5=oo("M4 10.5 12 4l8 6.5V19a1 1 0 0 1-1 1h-4v-5h-6v5H5a1 1 0 0 1-1-1v-8.5Z"),Ry=[{id:"documents",path:"documents",label:"Documents",icon:_5},{id:"runs",path:"runs",label:"Runs",icon:C5},{id:"config-builder",path:"config-builder",label:"Config Builder",icon:k5},{id:"settings",path:"settings",label:"Workspace Settings",icon:T5,matchPrefix:!0}],Di=Ry[0];function Dy(e){return Ry.map(n=>({id:n.id,label:n.label,href:`/workspaces/${e.id}/${n.path}`,icon:n.icon,matchPrefix:n.matchPrefix}))}const R5="4.25rem",D5="18.75rem";function M5({workspace:e,collapsed:n,onToggleCollapse:r,items:i,onGoToWorkspaces:c}){const u=i??Dy(e),d=L5(e.name);return l.jsx("aside",{className:"hidden h-screen flex-shrink-0 bg-gradient-to-b from-slate-50/80 via-white to-slate-50/60 px-3 py-4 transition-[width] duration-200 ease-out lg:flex",style:{width:n?R5:D5},"aria-label":"Primary workspace navigation","aria-expanded":!n,children:l.jsxs("div",{className:he("flex h-full w-full flex-col rounded-[1.7rem] border border-white/70 bg-white/90 shadow-[0_25px_60px_-40px_rgba(15,23,42,0.7)] ring-1 ring-slate-100/60 backdrop-blur-sm",n?"items-center gap-4 px-2 py-5":"gap-5 px-4 py-6"),children:[l.jsxs("div",{className:he("flex w-full items-center gap-3 rounded-2xl border border-white/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-3 py-4 text-sm font-semibold text-slate-700 shadow-inner shadow-white/60",n?"flex-col text-center text-xs":""),children:[l.jsxs("button",{type:"button",onClick:c,className:"flex flex-1 items-center gap-3 text-left",children:[l.jsx("span",{className:he("inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 text-sm font-bold uppercase text-white shadow-[0_10px_25px_-10px_rgba(79,70,229,0.7)]",n&&"h-9 w-9 text-xs"),children:d}),n?l.jsx("span",{className:"sr-only",children:e.name}):l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate",children:e.name}),l.jsx("p",{className:"text-xs font-normal text-slate-500",children:"Switch workspace"})]})]}),l.jsx("button",{type:"button",onClick:r,className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-transparent text-slate-500 hover:border-brand-200 hover:text-brand-600","aria-label":n?"Expand navigation":"Collapse navigation",children:n?l.jsx(O5,{}):l.jsx(z5,{})})]}),l.jsx("nav",{className:"mt-4 flex-1 overflow-y-auto pr-1","aria-label":"Workspace sections",children:l.jsx(My,{items:u,collapsed:n})})]})})}function My({items:e,collapsed:n=!1,onNavigate:r,className:i,showHeading:c=!0}){return l.jsxs(l.Fragment,{children:[c&&!n?l.jsx("p",{className:"mb-3 px-1 text-[0.63rem] font-semibold uppercase tracking-[0.4em] text-slate-400/90",children:"Workspace"}):null,l.jsx("ul",{className:he("flex flex-col gap-1.5",n?"items-center":void 0,i),role:"list",children:e.map(u=>l.jsx("li",{className:"w-full",children:l.jsx(Ay,{to:u.href,end:!(u.matchPrefix??!1),title:n?u.label:void 0,onClick:r,className:({isActive:d})=>he("group relative flex w-full items-center rounded-2xl border border-transparent text-sm font-medium text-slate-600 transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white/80",n?"h-11 justify-center px-0":"gap-3 px-3 py-2.5",d?"border-brand-100 bg-white/90 text-slate-900 shadow-[0_12px_30px_-20px_rgba(79,70,229,0.55)]":"border-transparent hover:border-slate-200 hover:bg-white/70"),children:({isActive:d})=>l.jsxs(l.Fragment,{children:[l.jsx("span",{"aria-hidden":!0,className:he("absolute left-1.5 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-brand-400 to-brand-500 opacity-0 transition-opacity duration-150",n&&"hidden",d?"opacity-100":"group-hover:opacity-60")}),l.jsx("span",{"aria-hidden":!0,className:he("flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-slate-100 text-slate-500 transition",n&&"h-9 w-9 rounded-lg",d?"bg-brand-50 text-brand-600":"group-hover:bg-slate-100/80"),children:l.jsx(u.icon,{className:he("h-5 w-5 flex-shrink-0 transition-colors duration-150",d?"text-brand-600":"text-slate-500")})}),l.jsx("div",{className:he("flex min-w-0 flex-col text-left",n&&"sr-only"),children:l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:u.label})})]})})},u.id))})]})}function z5(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:l.jsx("path",{d:"M12.5 6 9 10l3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function O5(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:l.jsx("path",{d:"m7.5 6 3.5 4-3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function L5(e){const n=e.trim().split(/\s+/);return n.length===0?"WS":n.slice(0,2).map(i=>i[0]??"").join("").toUpperCase()}const U5="K",$5="Ctrl+K";function zy({macLabel:e=U5,windowsLabel:n=$5}={}){const[r,i]=p.useState(e);return p.useEffect(()=>{if(typeof window>"u")return;const c=window.navigator.platform??"",u=/Mac|iPhone|iPad|Macintosh/.test(c);i(u?e:n)},[e,n]),r}function B5(){return l.jsxs("section",{children:[l.jsx("h1",{className:"text-xl font-semibold",children:"Workspace Overview"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: add workspace summary widgets."})]})}const q5=100;function Oy({workspaceId:e,enabled:n=!0,page:r=1,pageSize:i=q5}){return _n({queryKey:Cn.list(e,{page:r,pageSize:i}),queryFn:({signal:c})=>j2(e,{page:r,pageSize:i,signal:c}),enabled:n&&e.length>0,staleTime:15e3,placeholderData:c=>c})}function Ly({workspaceId:e,configurationId:n,enabled:r=!0}){return _n({queryKey:Cn.detail(e,n??""),queryFn:({signal:i})=>n?S2(e,n,i):Promise.resolve(null),enabled:r&&e.length>0&&!!n,staleTime:1e4})}function H5(e){const n=dt();return sn({mutationFn:r=>M2(e,r),async onSuccess(){await n.invalidateQueries({queryKey:Cn.root(e)})}})}function F5({summary:e}){const n=e.counts,r=e.validation.issues_total,i=e.fields??[],c=e.columns??[],u=i.slice(0,6),d=c.slice(0,5);return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:[l.jsx(Cc,{label:"Tables",value:n.tables?.total??""}),l.jsx(Cc,{label:"Rows",value:n.rows.total??""}),l.jsx(Cc,{label:"Mapped fields",value:n.fields.mapped}),l.jsx(Cc,{label:"Issues",value:r,intent:r>0?"warn":"ok"})]}),l.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[l.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Fields"}),i.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No field mappings recorded."}):l.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[u.map(m=>l.jsxs("li",{className:"flex items-center justify-between gap-3",children:[l.jsxs("span",{className:"truncate font-semibold text-slate-800",children:[m.label||m.field," ",m.required?" required":""]}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[m.mapped?"mapped":"unmapped",typeof m.tables_mapped=="number"?`  ${m.tables_mapped} tables`:""]})]},m.field)),i.length>u.length?l.jsxs("li",{className:"text-[11px] text-slate-500",children:["+",i.length-u.length," more fields"]}):null]})]}),l.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Columns"}),c.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No column details recorded."}):l.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[d.map(m=>l.jsxs("li",{className:"flex items-center justify-between gap-3",children:[l.jsx("span",{className:"truncate font-semibold text-slate-800",children:m.header}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[m.mapped?"mapped":"unmapped","  ",m.occurrences?.tables_seen??""," tables"]})]},m.header_normalized)),c.length>d.length?l.jsxs("li",{className:"text-[11px] text-slate-500",children:["+",c.length-d.length," more headers"]}):null]}),l.jsxs("div",{className:"mt-2 text-[11px] text-slate-600",children:["Distinct headers mapped: ",n.columns.distinct_headers_mapped," / ",n.columns.distinct_headers]})]})]})]})}function Z5({events:e}){if(!e.length)return l.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."});const n=e.reduce((i,c)=>{const u=hh(c),d=u.stream==="stderr"?"warning":void 0,m=u.level??d??"info";return i[m]=(i[m]??0)+1,i},{}),r=e.slice(-6).reverse();return l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex flex-wrap gap-2 text-[11px] text-slate-600",children:Object.entries(n).map(([i,c])=>l.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 font-semibold text-slate-700",children:[i,": ",c]},i))}),l.jsx("ul",{className:"space-y-1",children:r.map(i=>l.jsx("li",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-800",children:(()=>{const u=hh(i).message?.trim();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[l.jsx("span",{className:"font-semibold",children:i.type}),l.jsx("span",{className:"text-[11px] text-slate-500",children:V5(i.created_at)})]}),l.jsx("p",{className:"text-[11px] text-slate-600",children:u||`Level: ${P5(i)}`})]})})()},`${i.created_at}-${i.type}`))})]})}function V5(e){const n=e instanceof Date?e:new Date(e);return Number.isNaN(n.getTime())?String(e):n.toLocaleString()}function P5(e){const n=hh(e),r=n.stream==="stderr"?"warning":void 0;return n.level??r??"info"}function hh(e){const n=e.payload;return n&&typeof n=="object"?n:{}}function Cc({label:e,value:n,intent:r="default"}){const i=r==="warn"?"text-amber-700":r==="ok"?"text-emerald-700":"text-slate-700";return l.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:e}),l.jsx("p",{className:`text-sm font-semibold ${i}`,children:n})]})}const Uy={uploaded:"Uploaded",processing:"Processing",processed:"Processed",failed:"Failed",archived:"Archived"},Q5=["-created_at","created_at","-last_run_at","last_run_at","-byte_size","byte_size","name","-name","status","-status","source","-source"],Zl="mine",Na={mine:{label:"My uploads",description:"Documents you uploaded",uploader:"me"},team:{label:"All documents",description:"Everything in this workspace"},attention:{label:"Needs attention",description:"Failed or processing files",presetStatuses:["failed","processing"]},recent:{label:"Recently run",description:"Latest run activity",presetSort:"-last_run_at"}};function I5(e){return e&&Object.keys(Na).includes(e)?e:Zl}function W5(e){if(!e)return new Set;const r=e.split(",").map(i=>i.trim()).filter(Boolean).filter(i=>["uploaded","processing","processed","failed","archived"].includes(i));return new Set(r)}function G5(e){return new Set(Q5).has(e??"")?e:"-created_at"}const $y=new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),Mi={all:()=>["documents"],workspace:e=>[...Mi.all(),e],list:(e,n,r)=>[...Mi.workspace(e),"list",{sort:n,uploader:r}]},By=50;function K5(){const{workspace:e}=xr(),n=Oi(),[r,i]=cy(),c=p.useRef(i);p.useEffect(()=>{c.current=i},[i]);const u=I5(r.get("view")),[d,m]=p.useState(u),[x,g]=p.useState(()=>{const Se=r.get("status");if(Se)return W5(Se);const _e=Na[u].presetStatuses??[];return new Set(_e)}),[b,v]=p.useState(()=>{const Se=r.get("sort");return Se?G5(Se):Na[u].presetSort??"-created_at"}),[w,S]=p.useState(r.get("q")??""),[N,j]=p.useState(w.trim()),C=p.useMemo(()=>Array.from(x),[x]),_=Na[d].uploader??null,A=p.useRef(null),[L,O]=p.useState(new Set),J=p.useMemo(()=>new Set(L),[L]),U=p.useMemo(()=>Array.from(J),[J]),ne=J.size,R=X5(e.id),H=J5(e.id),ae=ky(),I=ae.data?.enabled??!1,F=ae.data?.detail??Bi,ue=ae.isPending,[xe,M]=p.useState(null),[G,Y]=p.useState(null),[we,ie]=p.useState(null),T=R.isPending,W=H.isPending,le=Y5(e.id,{sort:b,uploader:_}),{refetch:Z}=le,X=p.useCallback(Se=>Se.id,[]),B=Dh(le.data?.pages,X),P=p.useMemo(()=>{const Se=N.toLowerCase(),_e=_==="me"?n.user.id:null,Fe=_==="me"?n.user.email??null:null;return B.filter(Mt=>{if(C.length>0&&!C.includes(Mt.status))return!1;if(_==="me"){const nt=Mt.uploader_id??Mt.uploader?.id??null,Gt=Mt.uploader?.email??null;if(_e&&nt&&nt!==_e||!nt&&Fe&&Gt&&Gt!==Fe)return!1}return!(Se&&!`${Mt.name??""} ${Mt.source??""}`.toLowerCase().includes(Se))})},[N,B,n.user.email,n.user.id,C,_]),$=le.isFetchingNextPage,re=le.isFetching&&!$,me=P.length;p.useEffect(()=>{const Se=r.get("q")??"";S(Fe=>Fe===Se?Fe:Se);const _e=Se.trim();j(Fe=>Fe===_e?Fe:_e)},[r]),p.useEffect(()=>{const Se=new URLSearchParams;x.size>0&&Se.set("status",Array.from(x).join(",")),b!=="-created_at"&&Se.set("sort",b),N&&Se.set("q",N),d!==Zl&&Se.set("view",d),c.current(Se,{replace:!0})},[x,b,N,d]),p.useEffect(()=>{const Se=window.setTimeout(()=>j(w.trim()),250);return()=>window.clearTimeout(Se)},[w]),p.useEffect(()=>{O(Se=>{if(Se.size===0)return Se;const _e=new Set,Fe=new Set(P.map(nt=>nt.id));let Mt=!1;for(const nt of Se)Fe.has(nt)?_e.add(nt):Mt=!0;return Mt?_e:Se})},[P]);const Me=p.useMemo(()=>{for(const Se of P)if(J.has(Se.id))return Se;return null},[P,J]),ve=p.useCallback(Se=>{const _e=Na[Se];m(Se),g(new Set(_e.presetStatuses??[])),v(_e.presetSort??"-created_at"),S(""),j("")},[]),Oe=p.useCallback(Se=>{g(_e=>{const Fe=new Set(_e);return Fe.has(Se)?Fe.delete(Se):Fe.add(Se),Fe})},[]),Be=p.useCallback(()=>{g(new Set)},[]);p.useEffect(()=>{const Se=_e=>{if((_e.metaKey||_e.ctrlKey)&&_e.key.toLowerCase()==="u"){_e.preventDefault(),A.current?.click();return}(_e.key==="Delete"||_e.key==="Backspace")&&ne>0&&(_e.preventDefault(),ce())};return window.addEventListener("keydown",Se),()=>window.removeEventListener("keydown",Se)},[ne]);const Ne=p.useCallback(Se=>Uy[Se]??Se,[]),Le=p.useCallback(Se=>l.jsx(ST,{document:Se}),[]),rn=p.useCallback(()=>{A.current?.click()},[]),Et=p.useCallback(async Se=>{if(Se.length){M(null);try{await R.mutateAsync({files:Se})}catch(_e){const Fe=_e instanceof Error?_e.message:"Failed to upload documents.";M({tone:"error",message:Fe})}}},[R]),Tt=async Se=>{const _e=Array.from(Se.target.files??[]);await Et(_e),Se.target.value=""},D=Se=>{O(_e=>{const Fe=new Set(_e);return Fe.has(Se)?Fe.delete(Se):Fe.add(Se),Fe})},K=()=>{O(Se=>{if(P.length===0)return new Set;const _e=P.map(Fe=>Fe.id);return Se.size===P.length&&_e.every(Fe=>Se.has(Fe))?new Set:new Set(_e)})},ce=p.useCallback(async()=>{const Se=U;if(Se.length){M(null);try{await H.mutateAsync({documentIds:Se}),O(new Set)}catch(_e){const Fe=_e instanceof Error?_e.message:"Failed to delete documents.";M({tone:"error",message:Fe})}}},[H,U]),Ee=p.useCallback(async Se=>{M(null);try{await H.mutateAsync({documentIds:[Se.id]}),O(_e=>{const Fe=new Set(_e);return Fe.delete(Se.id),Fe})}catch(_e){const Fe=_e instanceof Error?_e.message:"Failed to delete document.";M({tone:"error",message:Fe})}},[H]),ye=p.useCallback(async Se=>{try{Y(Se.id);const{blob:_e,filename:Fe}=await sT(e.id,Se.id);CT(_e,Fe??Se.name)}catch(_e){const Fe=_e instanceof Error?_e.message:"Failed to download document.";M({tone:"error",message:Fe})}finally{Y(null)}},[e.id]),je=p.useCallback(Se=>{ie(Se)},[]),De=p.useCallback(()=>{Z()},[Z]),Qe=p.useCallback(Se=>{M({tone:"error",message:Se})},[]),We=()=>{m(Zl),S(""),j(""),g(new Set),v("-created_at")},Nt=d===Zl&&x.size===0&&b==="-created_at"&&!N;return l.jsxs(l.Fragment,{children:[l.jsx(vT,{workspaceName:e.name??void 0,disabled:T,onFiles:async Se=>{await Et(Se)}}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{ref:A,type:"file",accept:".csv,.pdf,.tsv,.xls,.xlsx,.xlsm,.xlsb",multiple:!0,className:"hidden",onChange:Tt}),l.jsx(aT,{workspaceName:e.name,totalDocuments:me,view:d,onChangeView:ve,sort:b,onSort:v,onReset:We,isFetching:le.isFetching,isDefault:Nt,onUploadClick:rn,uploadDisabled:T,selectedStatuses:x,onToggleStatus:Oe,onClearStatuses:Be}),xe?l.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",role:"alert",children:xe.message}):null,l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white text-sm text-slate-700",children:le.isLoading?l.jsx("div",{className:"p-4",children:l.jsx(yT,{})}):le.isError?l.jsx("p",{className:"p-4 text-rose-600",children:"Failed to load documents."}):P.length===0?l.jsx("div",{className:"p-6",children:l.jsx(jT,{onUploadClick:rn})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto p-2 sm:p-3",children:l.jsx(oT,{documents:P,selectedIds:J,onToggleDocument:D,onToggleAll:K,disableSelection:re||W||R.isPending,disableRowActions:H.isPending,formatStatusLabel:Ne,onDeleteDocument:Ee,onDownloadDocument:ye,onRunDocument:je,downloadingId:G,renderRunStatus:Le,safeModeEnabled:I,safeModeMessage:F,safeModeLoading:ue})}),le.hasNextPage?l.jsx("div",{className:"flex justify-center border-t border-slate-200 bg-slate-50/60 px-3 py-2",children:l.jsx(Ce,{type:"button",variant:"ghost",onClick:()=>le.fetchNextPage(),disabled:$,children:$?"Loading more documents":"Load more documents"})}):null]})})]}),l.jsx(wT,{count:ne,onClear:()=>O(new Set),onRun:()=>{Me&&!I&&!ue&&je(Me)},onDelete:ce,busy:W,safeModeEnabled:I,safeModeMessage:F,safeModeLoading:ue}),l.jsx(xT,{open:!!we,workspaceId:e.id,documentRecord:we,onClose:()=>ie(null),onRunSuccess:De,onRunError:Qe,safeModeEnabled:I,safeModeMessage:F,safeModeLoading:ue})]})}function Y5(e,n){const r=n.sort.trim()||null;return _h({queryKey:Mi.list(e,r,n.uploader??null),initialPageParam:1,queryFn:({pageParam:i,signal:c})=>nT(e,{sort:r,page:typeof i=="number"?i:1,pageSize:By},c),getNextPageParam:i=>i.has_next?i.page+1:void 0,enabled:e.length>0,placeholderData:i=>i,staleTime:15e3})}function X5(e){const n=dt();return sn({mutationFn:async({files:r})=>{const i=Array.from(r);for(const c of i)await He.POST("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e}},body:{file:""},bodySerializer:()=>{const u=new FormData;return u.append("file",c),u}})},onSuccess:()=>{n.invalidateQueries({queryKey:Mi.workspace(e)})}})}function J5(e){const n=dt();return sn({mutationFn:async({documentIds:r})=>{await Promise.all(r.map(i=>He.DELETE("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:i}}})))},onSuccess:()=>{n.invalidateQueries({queryKey:Mi.workspace(e)})}})}function eT(e){const n=dt();return sn({mutationFn:async({configId:r,options:i})=>{const{data:c}=await He.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:{configuration_id:r}},body:{options:i}});if(!c)throw new Error("Expected run payload.");return c},onSuccess:()=>{n.invalidateQueries({queryKey:Mi.workspace(e)})}})}function tT(e,n){const r=p.useMemo(()=>Gs(`ade.workspace.${e}.document_runs`),[e]),[i,c]=p.useState(()=>ob(r,n));p.useEffect(()=>{c(ob(r,n))},[r,n]);const u=p.useCallback(d=>{c(d);const m=r.get()??{};r.set({...m,[n]:{configId:d.configId,sheetNames:d.sheetNames&&d.sheetNames.length>0?[...d.sheetNames]:null}})},[r,n]);return{preferences:i,setPreferences:u}}async function nT(e,n,r){const i={sort:n.sort??void 0,page:n.page>0?n.page:1,page_size:n.pageSize>0?n.pageSize:By,include_total:!1},{data:c}=await He.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:i},signal:r});if(!c)throw new Error("Expected document page payload.");return c}async function sT(e,n){const{data:r,response:i}=await He.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/download",{params:{path:{workspace_id:e,document_id:n}},parseAs:"blob"});if(!r)throw new Error("Expected document download payload.");const c=rT(i.headers.get("content-disposition"))??`document-${n}`;return{blob:r,filename:c}}function rT(e){if(!e)return null;const n=e.match(/filename\*=UTF-8''([^;]+)/i);if(n?.[1])try{return decodeURIComponent(n[1])}catch{return n[1]}return e.match(/filename="?([^";]+)"?/i)?.[1]??null}function ob(e,n){const r=e.get();if(r&&typeof r=="object"&&n in r){const i=r[n];if(i&&typeof i=="object"){const c=[];if("sheetName"in i){const m=i.sheetName;typeof m=="string"&&c.push(m)}const d=(Array.isArray(i.sheetNames)?i.sheetNames.filter(m=>typeof m=="string"&&m.length>0):null)??(c.length>0?c:null);return{configId:i.configId??null,sheetNames:d}}}return{configId:null,sheetNames:null}}function aT({workspaceName:e,totalDocuments:n,view:r,onChangeView:i,sort:c,onSort:u,onReset:d,isFetching:m,isDefault:x,onUploadClick:g,uploadDisabled:b,selectedStatuses:v,onToggleStatus:w,onClearStatuses:S}){const N=typeof n=="number"?`${n.toLocaleString()} files`:e?`Uploads and runs for ${e}`:"Manage workspace uploads and runs";return l.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/95 p-3 sm:p-4",role:"region","aria-label":"Documents header and filters",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("h1",{className:"truncate text-lg font-semibold text-slate-900 sm:text-xl",children:e?`${e} documents`:"Documents"}),l.jsx("p",{className:"text-xs text-slate-500",children:N})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("button",{type:"button",onClick:d,disabled:x,className:he("rounded border border-transparent px-3 py-1 text-sm font-medium",x?"cursor-default text-slate-300":"text-slate-600 hover:border-slate-200 hover:bg-slate-50 hover:text-slate-900"),children:"Reset"}),l.jsx(Ce,{className:"shrink-0",onClick:g,disabled:b,isLoading:b,"aria-label":"Upload documents",children:"Upload"})]})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[l.jsx(iT,{view:r,onChange:i}),l.jsx(lT,{selectedStatuses:v,onToggleStatus:w,onClearStatuses:S}),l.jsxs(Aa,{value:c,onChange:j=>u(j.target.value),className:"w-40","aria-label":"Sort documents",children:[l.jsx("option",{value:"-created_at",children:"Newest first"}),l.jsx("option",{value:"created_at",children:"Oldest first"}),l.jsx("option",{value:"-last_run_at",children:"Recent runs"}),l.jsx("option",{value:"last_run_at",children:"Least recently run"}),l.jsx("option",{value:"-byte_size",children:"Largest files"}),l.jsx("option",{value:"byte_size",children:"Smallest files"}),l.jsx("option",{value:"name",children:"Name AZ"}),l.jsx("option",{value:"-name",children:"Name ZA"})]}),l.jsxs("span",{className:he("ml-auto inline-flex items-center gap-1 text-[11px] text-slate-500",m?"opacity-100":"opacity-0"),role:"status","aria-live":"polite",children:[l.jsx("span",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-slate-400"}),"Updating"]})]})]})}function iT({view:e,onChange:n}){return l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(Na).map(r=>{const i=Na[r],c=r===e;return l.jsx("button",{type:"button",onClick:()=>n(r),className:he("rounded-full px-3 py-1 text-xs font-medium transition",c?"bg-brand-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-900"),title:i.description,children:i.label},r)})})}function lT({selectedStatuses:e,onToggleStatus:n,onClearStatuses:r}){const[i,c]=p.useState(!1),u=p.useRef(null),d=Object.entries(Uy),m=e.size>0,x=m?`${e.size} ${e.size===1?"status":"statuses"}`:"All statuses";return p.useEffect(()=>{if(!i)return;const g=b=>{u.current&&!u.current.contains(b.target)&&c(!1)};return window.addEventListener("mousedown",g),()=>window.removeEventListener("mousedown",g)},[i]),l.jsxs("div",{className:"relative",ref:u,children:[l.jsxs("button",{type:"button",onClick:()=>c(g=>!g),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 shadow-sm hover:border-slate-300","aria-haspopup":"true","aria-expanded":i,children:["Status: ",x,l.jsx(pT,{className:"h-3 w-3"})]}),i?l.jsxs("div",{className:"absolute z-30 mt-2 w-60 rounded-xl border border-slate-200 bg-white p-3 text-sm shadow-xl",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("span",{children:"Status filters"}),l.jsx("button",{type:"button",onClick:()=>{r(),c(!1)},className:he("text-[11px]",m?"text-slate-500 underline underline-offset-4":"text-slate-300"),children:"Clear"})]}),l.jsx("ul",{className:"space-y-1 text-xs text-slate-600",children:d.map(([g,b])=>{const v=e.has(g);return l.jsx("li",{children:l.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1 hover:bg-slate-50",children:[l.jsx("input",{type:"checkbox",checked:v,onChange:()=>n(g),className:"h-3.5 w-3.5 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),l.jsx("span",{className:"truncate",children:b})]})},g)})}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>c(!1),children:"Done"})})]}):null]})}function oT({documents:e,selectedIds:n,onToggleDocument:r,onToggleAll:i,disableSelection:c=!1,disableRowActions:u=!1,formatStatusLabel:d,onDeleteDocument:m,onDownloadDocument:x,onRunDocument:g,downloadingId:b=null,renderRunStatus:v,safeModeEnabled:w=!1,safeModeMessage:S,safeModeLoading:N=!1}){const j=p.useRef(null),{allSelected:C,someSelected:k}=p.useMemo(()=>{if(e.length===0)return{allSelected:!1,someSelected:!1};const _=e.reduce((A,L)=>n.has(L.id)?A+1:A,0);return{allSelected:_===e.length,someSelected:_>0&&_<e.length}},[e,n]);return p.useEffect(()=>{j.current&&(j.current.indeterminate=k)},[k]),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full table-fixed border-separate border-spacing-0 text-sm text-slate-700",children:[l.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/80 backdrop-blur-sm text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{scope:"col",className:"w-10 px-2 py-2",children:l.jsx("input",{ref:j,type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:C,onChange:i,disabled:c||e.length===0})}),l.jsx("th",{scope:"col",className:"w-20 px-2 py-2 text-left",children:"ID"}),l.jsx("th",{scope:"col",className:"px-2 py-2 text-left",children:"Document"}),l.jsx("th",{scope:"col",className:"w-40 px-2 py-2 text-left",children:"Uploaded"}),l.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Uploader"}),l.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Latest run"}),l.jsx("th",{scope:"col",className:"w-32 px-2 py-2 text-left",children:"Status"}),l.jsx("th",{scope:"col",className:"w-36 px-2 py-2 text-right",children:"Actions"})]})}),l.jsx("tbody",{children:e.map(_=>{const A=n.has(_.id);return l.jsxs("tr",{className:he("border-b border-slate-200 last:border-b-0 transition-colors hover:bg-slate-50",A?"bg-brand-50/50":"bg-white"),children:[l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:A,onChange:()=>r(_.id),disabled:c})}),l.jsx("td",{className:"px-2 py-2 align-middle font-mono text-xs text-slate-500",children:_.id.slice(-6)}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"truncate font-semibold text-slate-900",title:_.name,children:_.name}),l.jsx("div",{className:"text-xs text-slate-500",children:uT(_)})]})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("time",{dateTime:_.created_at,className:"block text-xs text-slate-600",title:$y.format(new Date(_.created_at)),children:mT(_)})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("span",{className:"block truncate text-xs text-slate-600",children:_.uploader?.name??_.uploader?.email??""})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:v?v(_):null}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("span",{className:he("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",hT(_.status)),children:d?d(_.status):_.status})}),l.jsx("td",{className:"px-2 py-2 align-middle text-right",children:l.jsx(cT,{document:_,onDownload:x,onDelete:m,onRun:g,disabled:u,downloading:b===_.id,safeModeEnabled:w,safeModeMessage:S,safeModeLoading:N})})]},_.id)})})]})})}function cT({document:e,onDownload:n,onDelete:r,onRun:i,disabled:c=!1,downloading:u=!1,safeModeEnabled:d=!1,safeModeMessage:m,safeModeLoading:x=!1}){const g=c||!i||d||x,b=d?m??Bi:x?"Checking ADE safe mode status...":void 0;return l.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[l.jsx(Ce,{type:"button",size:"sm",variant:"primary",onClick:()=>{g||i?.(e)},disabled:g,title:b,children:"Run"}),l.jsx("button",{type:"button",onClick:()=>n?.(e),className:he("px-2 py-1 text-xs font-medium text-slate-600 underline underline-offset-4 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",u&&"opacity-60"),disabled:c||u,children:u?"Downloading":"Download"}),l.jsx("button",{type:"button",onClick:()=>r?.(e),className:"px-2 py-1 text-xs font-semibold text-danger-600 hover:text-danger-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-danger-500",disabled:c,children:"Delete"})]})}function uT(e){const n=[];return e.content_type&&n.push(dT(e.content_type)),typeof e.byte_size=="number"&&e.byte_size>=0&&n.push(fT(e.byte_size)),n.join("  ")||"Unknown type"}function dT(e){return{"application/pdf":"PDF document","text/csv":"CSV file","text/tab-separated-values":"TSV file","application/vnd.ms-excel":"Excel spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel spreadsheet","application/vnd.ms-excel.sheet.macroEnabled.12":"Excel macro spreadsheet"}[e]??e}function fT(e){if(e<1024)return`${e} B`;const n=["KB","MB","GB","TB"];let r=e/1024,i=0;for(;r>=1024&&i<n.length-1;)r/=1024,i+=1;return`${r>=10?Math.round(r):Math.round(r*10)/10} ${n[i]}`}function hT(e){switch(e){case"processed":return"bg-success-100 text-success-700";case"processing":return"bg-warning-100 text-warning-700";case"failed":return"bg-danger-100 text-danger-700";case"archived":return"bg-slate-200 text-slate-700";default:return"bg-slate-100 text-slate-700"}}function mT(e){return $y.format(new Date(e.created_at))}function pT({className:e}){return l.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.8,className:e,children:l.jsx("path",{d:"M5 8l5 5 5-5",strokeLinecap:"round",strokeLinejoin:"round"})})}function gT({className:e}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:he("animate-spin text-slate-500",e),role:"presentation",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),l.jsx("path",{className:"opacity-75",d:"M22 12c0-5.523-4.477-10-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function xT({open:e,workspaceId:n,documentRecord:r,onClose:i,onRunSuccess:c,onRunError:u,safeModeEnabled:d=!1,safeModeMessage:m,safeModeLoading:x=!1}){const g=p.useRef(null);return p.useEffect(()=>{typeof window>"u"||(e?g.current=window.document.activeElement instanceof HTMLElement?window.document.activeElement:null:(g.current?.focus(),g.current=null))},[e]),p.useEffect(()=>{if(!e||typeof window>"u")return;const b=window.document.body.style.overflow;return window.document.body.style.overflow="hidden",()=>{window.document.body.style.overflow=b}},[e]),typeof window>"u"||!e||!r?null:vs.createPortal(l.jsx(bT,{workspaceId:n,documentRecord:r,onClose:i,onRunSuccess:c,onRunError:u,safeModeEnabled:d,safeModeMessage:m,safeModeLoading:x}),window.document.body)}function bT({workspaceId:e,documentRecord:n,onClose:r,onRunSuccess:i,onRunError:c,safeModeEnabled:u=!1,safeModeMessage:d,safeModeLoading:m=!1}){const x=p.useRef(null),g=p.useId(),b=p.useId(),v=Oy({workspaceId:e}),[w,S]=p.useState(""),N=eT(e),{preferences:j,setPreferences:C}=tT(e,n.id),[k,_]=p.useState(n.last_run?.run_id??null);p.useEffect(()=>{_(n.last_run?.run_id??null)},[n.id,n.last_run?.run_id]);const A=p.useMemo(()=>v.data?.items??[],[v.data]),L=p.useMemo(()=>A.filter(ve=>!("deleted_at"in ve&&ve.deleted_at)),[A]),O=p.useMemo(()=>{if(j.configId){const ve=L.find(Oe=>Oe.id===j.configId);if(ve)return ve.id}return L[0]?.id??""},[j.configId,L]);p.useEffect(()=>{S(O)},[O]);const J=p.useMemo(()=>L.find(ve=>ve.id===w)??null,[L,w]),U=p.useCallback(ve=>{const Oe=typeof ve.status=="string"?ve.status:"draft";return`${ve.title??ve.display_name??"Untitled configuration"} (${Oe.charAt(0).toUpperCase()}${Oe.slice(1)})`},[]),[ne,R]=p.useState(null),H=d??Bi,ae=_n({queryKey:k?Ff.detail(k):["run","none"],queryFn:({signal:ve})=>k?cu(k,ve):Promise.reject(new Error("No run selected")),enabled:!!k,refetchInterval:ve=>{const Oe=ve.state.data?.status;return Oe==="running"||Oe==="queued"?2e3:!1}}),I=_n({queryKey:k?Ff.summary(k):["run-summary","none"],queryFn:({signal:ve})=>k?yk(k,ve):Promise.reject(new Error("No run selected")),enabled:!!k&&(ae.data?.status==="succeeded"||ae.data?.status==="failed"),staleTime:5e3}),F=_n({queryKey:k?Ff.telemetry(k):["run-telemetry","none"],queryFn:({signal:ve})=>{if(!k)return Promise.reject(new Error("No run selected"));const Oe=ae.data??k;return vk(Oe,ve)},enabled:!!k&&(ae.data?.status==="succeeded"||ae.data?.status==="failed"),staleTime:5e3}),ue=_n({queryKey:["document-sheets",e,n.id],queryFn:({signal:ve})=>dy(e,n.id,ve),staleTime:6e4}),xe=p.useMemo(()=>ue.data??[],[ue.data]),[M,G]=p.useState([]);p.useEffect(()=>{if(!xe.length){G([]);return}const ve=(j.sheetNames??[]).filter(Be=>xe.some(Ne=>Ne.name===Be)),Oe=Array.from(new Set(ve));G(Oe)},[xe,j.sheetNames]);const Y=p.useMemo(()=>Array.from(new Set(M.filter(ve=>xe.some(Oe=>Oe.name===ve)))),[M,xe]);p.useEffect(()=>{J&&C({configId:J.id,sheetNames:Y.length?Y:null})},[Y,J,C]);const we=p.useCallback(ve=>{G(Oe=>Oe.includes(ve)?Oe.filter(Be=>Be!==ve):[...Oe,ve])},[]),ie=ae.data??null,T=ie?.status??null,W=T==="running"||T==="queued",le=ie?yy(ie):null,Z=ie?.output?.output_path??null,X=ie?dh(ie):null,B=I.data??null,P=F.data??[];p.useEffect(()=>{const ve=x.current;if(!ve)return;(cb(ve)[0]??ve).focus();const Be=Ne=>{if(Ne.key==="Escape"){Ne.preventDefault(),r();return}if(Ne.key!=="Tab")return;const Le=cb(ve);if(Le.length===0){Ne.preventDefault();return}const rn=Le[0],Et=Le[Le.length-1],Tt=window.document.activeElement;if(Ne.shiftKey){(!ve.contains(Tt)||Tt===rn)&&(Ne.preventDefault(),Et.focus());return}Tt===Et&&(Ne.preventDefault(),rn.focus())};return ve.addEventListener("keydown",Be),()=>ve.removeEventListener("keydown",Be)},[r]);const $=L.length>0,re=N.isPending||W||m||u||!$||!J,me=u?H:m?"Checking ADE safe mode status...":void 0,Me=()=>{if(u||m)return;if(!J){R("Select a configuration before running the extractor.");return}R(null),_(null);const ve=Y,Oe={dry_run:!1,validate_only:!1,force_rebuild:!1},Be=ve.length>0?{...Oe,input_sheet_names:ve}:Oe;N.mutate({configId:J.id,options:{...Be,input_document_id:n.id}},{onSuccess:Ne=>{C({configId:J.id,sheetNames:ve.length?ve:null}),i?.(Ne),_(Ne.id)},onError:Ne=>{const Le=Ne instanceof Error?Ne.message:"Unable to submit extraction run.";R(Le),c?.(Le)}})};return l.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[l.jsx("button",{type:"button",tabIndex:-1,"aria-hidden":"true",className:"flex-1 bg-slate-900/30 backdrop-blur-sm",onClick:r}),l.jsxs("aside",{ref:x,role:"dialog","aria-modal":"true","aria-labelledby":g,"aria-describedby":b,tabIndex:-1,className:"relative flex h-full w-[min(28rem,92vw)] flex-col border-l border-slate-200 bg-white shadow-2xl",children:[l.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[l.jsxs("div",{children:[l.jsx("h2",{id:g,className:"text-lg font-semibold text-slate-900",children:"Run extraction"}),l.jsx("p",{id:b,className:"text-xs text-slate-500",children:"Prepare and submit a processing run."})]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:r,disabled:N.isPending,children:"Close"})]}),l.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-sm text-slate-600",children:[l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Document"}),l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[l.jsx("p",{className:"font-semibold text-slate-800",title:n.name,children:n.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",new Date(n.created_at).toLocaleString()]}),n.last_run_at?l.jsxs("p",{className:"text-xs text-slate-500",children:["Last run ",new Date(n.last_run_at).toLocaleString()]}):null]})]}),l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Configuration"}),v.isLoading?l.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"Loading configurations"}):v.isError?l.jsxs(rt,{tone:"danger",children:["Unable to load configurations."," ",v.error instanceof Error?v.error.message:"Try again later."]}):$?l.jsx("div",{className:"space-y-2",children:l.jsxs(Aa,{value:w,onChange:ve=>{const Oe=ve.target.value;S(Oe)},disabled:N.isPending,children:[l.jsx("option",{value:"",children:"Select configuration"}),L.map(ve=>l.jsx("option",{value:ve.id,children:U(ve)},ve.id))]})}):l.jsx(rt,{tone:"info",children:"No configurations available. Create one before running extraction."})]}),l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Advanced options"}),ue.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading worksheets"}):ue.isError?l.jsx(rt,{tone:"warning",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ce,{variant:"secondary",size:"sm",onClick:()=>ue.refetch(),disabled:ue.isFetching,children:"Retry loading"}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>G([]),disabled:N.isPending,children:"Use all worksheets"})]})]})}):xe.length>0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Worksheets"}),l.jsx("p",{className:"text-[11px] text-slate-500",children:Y.length===0?"All worksheets will be processed by default. Select any subset to narrow the run.":`${Y.length.toLocaleString()} worksheet${Y.length===1?"":"s"} selected. Clear selections to process every sheet.`})]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>G([]),disabled:N.isPending,children:"Use all worksheets"})]}),l.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:xe.map(ve=>{const Oe=Y.includes(ve.name);return l.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:Oe,onChange:()=>we(ve.name)}),l.jsxs("span",{className:"flex-1 truncate",children:[ve.name,ve.is_active?" (active)":""]})]},`${ve.index}-${ve.name}`)})})]}):l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"This document does not expose multiple worksheets, so ADE will ingest the uploaded file directly."})]}),k?l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Latest run"}),l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-slate-800",title:k,children:["Run ",k]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",T??"loading"]})]}),W?l.jsx(gT,{className:"h-4 w-4 text-slate-500"}):null]}),X?l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.jsx("a",{href:X,className:"inline-flex items-center rounded border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:bg-slate-100",children:"Download logs"})}):null,l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Output"}),ae.isFetching&&!le?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading output"}):le?l.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 break-all rounded border border-slate-100 px-2 py-1 text-xs text-slate-700",children:[l.jsx("a",{href:le,className:"text-emerald-700 hover:underline",children:Z?.split("/").pop()??"Download output"}),Z?l.jsx("span",{className:"text-[11px] text-slate-500",children:Z}):null]}):l.jsx("p",{className:"text-xs text-slate-500",children:"Output will appear here after the run completes."})]}),l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Run summary"}),I.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading summary"}):I.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load run summary."}):B?l.jsx(F5,{summary:B}):l.jsx("p",{className:"text-xs text-slate-500",children:"Summary not available."})]}),l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Telemetry summary"}),F.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading telemetry"}):F.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load telemetry events."}):P.length>0?l.jsx(Z5,{events:P}):l.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."})]})]})]}):null,u?l.jsx(rt,{tone:"warning",children:H}):null,ne?l.jsx(rt,{tone:"danger",children:ne}):null]}),l.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t border-slate-200 px-5 py-4",children:[l.jsx(Ce,{type:"button",variant:"ghost",onClick:r,disabled:N.isPending,children:"Cancel"}),l.jsx(Ce,{type:"button",onClick:Me,isLoading:N.isPending,disabled:re,title:me,children:"Run extraction"})]})]})]})}function vT({onFiles:e,disabled:n,workspaceName:r}){const[i,c]=p.useState(!1),u=p.useRef(0);return p.useEffect(()=>{if(n)return;const d=b=>{!b.dataTransfer||![...b.dataTransfer.types].includes("Files")||(u.current+=1,c(!0))},m=b=>{i&&b.preventDefault()},x=()=>{u.current=Math.max(0,u.current-1),u.current===0&&c(!1)},g=b=>{b.preventDefault(),c(!1),u.current=0;const v=Array.from(b.dataTransfer?.files??[]);v.length&&e(v)};return window.addEventListener("dragenter",d),window.addEventListener("dragover",m),window.addEventListener("dragleave",x),window.addEventListener("drop",g),()=>{window.removeEventListener("dragenter",d),window.removeEventListener("dragover",m),window.removeEventListener("dragleave",x),window.removeEventListener("drop",g)}},[i,n,e]),l.jsxs("div",{"aria-hidden":!i,className:he("pointer-events-none fixed inset-0 z-[60] transition",i?"opacity-100":"opacity-0"),children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/25 backdrop-blur-[2px]"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:l.jsx("div",{className:"pointer-events-none rounded-2xl border border-white/70 bg-white/90 px-6 py-5 shadow-2xl",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow",children:l.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 text-slate-700",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[l.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsxs("div",{className:"text-center sm:text-left",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Drop to upload"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Files will upload to ",l.jsx("span",{className:"font-medium",children:r??"this workspace"})]})]})]})})})]})}function yT(){return l.jsx("div",{className:"space-y-3","aria-hidden":!0,children:Array.from({length:6}).map((e,n)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-4 w-4 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 flex-1 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 w-24 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 w-40 rounded bg-slate-100"}),l.jsx("div",{className:"h-8 w-40 rounded bg-slate-100"})]},n))})}function wT({count:e,onClear:n,onRun:r,onDelete:i,busy:c,safeModeEnabled:u=!1,safeModeMessage:d,safeModeLoading:m=!1}){if(e===0)return null;const x=c||u||m,g=u?d??Bi:m?"Checking ADE safe mode status...":void 0;return l.jsx("div",{className:"fixed inset-x-0 bottom-0 z-40 mx-auto max-w-7xl px-2 pb-2 sm:px-4 sm:pb-4",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white/95 p-3 text-sm text-slate-700 shadow-lg backdrop-blur",children:[l.jsxs("span",{className:"mr-2",children:[l.jsx("strong",{children:e})," selected"]}),l.jsx(Ce,{variant:"ghost",size:"sm",onClick:n,children:"Clear"}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsx(Ce,{size:"sm",onClick:()=>!x&&r(),disabled:x,title:g,children:"Run extraction"}),l.jsx(Ce,{size:"sm",variant:"danger",onClick:i,disabled:c,isLoading:c,children:"Delete selected"})]})]})})}function jT({onUploadClick:e}){return l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-center",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-50",children:l.jsxs("svg",{className:"h-6 w-6 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[l.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No documents yet"}),l.jsx("p",{className:"max-w-md text-sm text-slate-600",children:"Tap Upload or drag files anywhere in the window."}),l.jsx(Ce,{onClick:e,className:"w-full sm:w-auto",children:"Upload"})]})}function ST({document:e}){const n=e.last_run;return n?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("span",{className:he("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",ET(n.status)),children:[NT(n.status),n.run_at?l.jsx("span",{className:"ml-1 font-normal text-slate-500",children:_T(n.run_at)}):null]}),n.message?l.jsx("span",{className:"text-[11px] text-slate-500",children:n.message}):null]}):l.jsx("span",{className:"text-xs text-slate-400",children:"No runs yet"})}function ET(e){switch(e){case"succeeded":return"bg-success-100 text-success-700";case"failed":return"bg-danger-100 text-danger-700";case"running":return"bg-brand-100 text-brand-700";default:return"bg-slate-200 text-slate-700"}}function NT(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ni=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});function _T(e){if(!e)return"unknown";const n=new Date(e);if(Number.isNaN(n.getTime()))return"unknown";const r=n.getTime()-Date.now(),i=Math.round(r/1e3);if(Math.abs(i)<60)return Ni.format(i,"second");const u=Math.round(i/60);if(Math.abs(u)<60)return Ni.format(u,"minute");const m=Math.round(u/60);if(Math.abs(m)<24)return Ni.format(m,"hour");const g=Math.round(m/24);if(Math.abs(g)<30)return Ni.format(g,"day");const b=Math.round(g/30);if(Math.abs(b)<12)return Ni.format(b,"month");const v=Math.round(g/365);return Ni.format(v,"year")}function CT(e,n){const r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=n,i.click(),window.setTimeout(()=>URL.revokeObjectURL(r),1e3)}function cb(e){const n=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(e.querySelectorAll(n.join(","))).filter(r=>!r.hasAttribute("disabled")&&r.getAttribute("aria-hidden")!=="true")}function kT({params:e}){return l.jsxs("section",{children:[l.jsxs("h1",{className:"text-lg font-semibold",children:["Document ",e.documentId]}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: render document details or drawer."})]})}function TT(){return l.jsx(ut,{title:"Runs",description:"Run history will appear here once runs APIs expose listing endpoints.",variant:"empty"})}function mt({label:e,hint:n,error:r,required:i=!1,children:c,className:u}){const d=p.useId(),m=p.isValidElement(c)?c.props??{}:{},x=m.id??d,g=n?`${x}-hint`:void 0,b=r?`${x}-error`:void 0,v=[g,b,m["aria-describedby"]].filter(Boolean).join(" ")||void 0;return l.jsxs("div",{className:he("space-y-2",u),children:[e?l.jsxs("label",{htmlFor:x,className:"text-sm font-medium text-slate-700","aria-required":i||void 0,children:[e,i?l.jsx("span",{className:"ml-1 text-danger-600","aria-hidden":"true",children:"*"}):null]}):null,p.isValidElement(c)?p.cloneElement(c,{id:x,required:i||m.required,"aria-describedby":v,"aria-invalid":r?!0:m["aria-invalid"]}):c,n?l.jsx("p",{id:g,className:"text-xs text-slate-500",children:n}):null,r?l.jsx("p",{id:b,className:"text-xs font-medium text-danger-600",children:r}):null]})}const qy="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",vt=p.forwardRef(({className:e,invalid:n=!1,...r},i)=>l.jsx("input",{ref:i,className:he(qy,n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...r}));vt.displayName="Input";const AT=p.forwardRef(({className:e,invalid:n=!1,rows:r=4,...i},c)=>l.jsx("textarea",{ref:c,rows:r,className:he(qy,"resize-y",n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...i}));AT.displayName="TextArea";const kc=[{value:"default",label:"Default template"}],Tc=(e,n)=>`/workspaces/${e}/config-builder/${encodeURIComponent(n)}`;function RT(){const{workspace:e}=xr(),n=Vt(),r=p.useMemo(()=>wy(e.id),[e.id]),i=p.useMemo(()=>Yh(e.id),[e.id]),c=Oy({workspaceId:e.id}),u=H5(e.id),d=H2(e.id),[m,x]=p.useState(()=>`${e.name} Config`),[g,b]=p.useState(kc[0]?.value??"default"),[v,w]=p.useState(null),[S,N]=p.useState(()=>`${e.name} Import`),[j,C]=p.useState(null),[k,_]=p.useState(null),[A,L]=p.useState(()=>i.get()),O=p.useRef(null),J=p.useRef(null),U=p.useMemo(()=>(c.data?.items??[]).filter(Y=>!("deleted_at"in Y&&Y.deleted_at)),[c.data]),ne=p.useMemo(()=>U.find(Y=>Y.id===A?.configId)??null,[U,A]),R=p.useCallback(Y=>{L(Xh(i,Y))},[i]);p.useEffect(()=>{L(i.get())},[i]),p.useEffect(()=>{const Y=J.current,we=Y?.id!==e.id,ie=Y?.name!==e.name;if(!(!we&&!ie)){if(J.current={id:e.id,name:e.name},we){x(`${e.name} Config`),b(kc[0]?.value??"default"),w(null),N(`${e.name} Import`),C(null),_(null),O.current&&(O.current.value="");return}ie&&(x(T=>T===`${Y?.name??""} Config`?`${e.name} Config`:T),N(T=>T===`${Y?.name??""} Import`?`${e.name} Import`:T))}},[e.id,e.name]),p.useEffect(()=>{if(typeof window>"u")return;const Y=we=>{if(!(we.storageArea!==window.localStorage||we.key!==r))try{L(we.newValue?JSON.parse(we.newValue):null)}catch{L(null)}};return window.addEventListener("storage",Y),()=>window.removeEventListener("storage",Y)},[r]),p.useEffect(()=>{A?.configId&&(U.some(Y=>Y.id===A.configId)||R(null))},[U,A?.configId,R]);const H=Y=>{R(Y),n(Tc(e.id,Y))},ae=Y=>{R(Y),n(`${Tc(e.id,Y)}/editor`)},I=p.useCallback(Y=>{_(null),C(Y.target.files?.[0]??null),Y.target.value=""},[]),F=Y=>{Y.preventDefault();const we=m.trim();if(!we){w("Enter a display name for the configuration.");return}w(null),u.mutate({displayName:we,source:{type:"template",templateId:g}},{onSuccess(ie){R(ie.id),n(Tc(e.id,ie.id))}})},ue=Y=>{Y.preventDefault();const we=S.trim();if(!we){_("Enter a display name for the imported configuration.");return}if(!j){_("Select a .zip file to import.");return}_(null),d.mutate({displayName:we,file:j},{onSuccess(ie){R(ie.id),C(null),c.refetch(),n(Tc(e.id,ie.id))},onError(ie){_(ie instanceof Error?ie.message:"Unable to import configuration.")}})},xe=v??(u.error instanceof Error?u.error.message:null),M=m.trim().length>0&&!u.isPending,G=S.trim().length>0&&!!j&&!d.isPending;return c.isLoading?l.jsx(ut,{variant:"loading",title:"Loading configurations",description:"Fetching workspace configurations"}):c.isError?l.jsx(ut,{variant:"error",title:"Unable to load configurations",description:"Try refreshing the page."}):U.length===0?l.jsx(ut,{className:"mx-auto w-full max-w-xl",title:"Create your first configuration",description:"Copy a starter template into this workspace to begin editing detectors, hooks, and manifests.",action:l.jsxs("div",{className:"space-y-6 text-left",children:[l.jsxs("form",{onSubmit:F,className:"space-y-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsx(mt,{label:"Configuration name",required:!0,children:l.jsx(vt,{value:m,onChange:Y=>x(Y.target.value),placeholder:"Membership normalization",disabled:u.isPending,autoFocus:!0})}),l.jsx(mt,{label:"Template",children:l.jsx(Aa,{value:g,onChange:Y=>b(Y.target.value),disabled:u.isPending,children:kc.map(Y=>l.jsx("option",{value:Y.value,children:Y.label},Y.value))})}),xe?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:xe}):null,l.jsx(Ce,{type:"submit",className:"w-full",disabled:!M,isLoading:u.isPending,children:"Create from template"})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Import configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),l.jsxs("form",{onSubmit:ue,className:"mt-3 space-y-4",children:[l.jsx(mt,{label:"Configuration name",required:!0,children:l.jsx(vt,{value:S,onChange:Y=>N(Y.target.value),placeholder:"Imported configuration",disabled:d.isPending})}),l.jsxs(mt,{label:"Archive (.zip)",required:!0,children:[l.jsx(vt,{type:"file",ref:O,accept:".zip",onChange:I,disabled:d.isPending}),j?l.jsx("p",{className:"mt-1 text-xs text-slate-500","aria-live":"polite",children:j.name}):null]}),k?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:k}):null,l.jsx(Ce,{type:"submit",className:"w-full",disabled:!G,isLoading:d.isPending,children:"Import archive"})]})]})]})}):l.jsxs("div",{className:"grid gap-6 p-4 lg:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",children:[l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Configurations"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Open an existing configuration to view manifest summaries, run validation, or launch the editor."})]}),ne?l.jsx(Ce,{variant:"ghost",size:"sm",onClick:()=>H(ne.id),children:"Resume last opened"}):null]}),l.jsx("div",{className:"divide-y divide-slate-200 rounded-xl border border-slate-200",children:U.map(Y=>l.jsxs("article",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:Y.display_name}),l.jsx(DT,{status:Y.status}),ne?.id===Y.id?l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-brand-600",children:"Last opened"}):null]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Updated ",MT(Y.updated_at)]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[l.jsx(Ce,{size:"sm",variant:"secondary",onClick:()=>H(Y.id),children:"View details"}),l.jsx(Ce,{size:"sm",variant:"ghost",onClick:()=>ae(Y.id),children:"Open editor"})]})]},Y.id))})]}),l.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"New configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Copy the starter template to begin editing detectors, hooks, and manifests."})]}),l.jsxs("form",{onSubmit:F,className:"space-y-4",children:[l.jsx(mt,{label:"Configuration name",required:!0,children:l.jsx(vt,{value:m,onChange:Y=>x(Y.target.value),placeholder:"Membership normalization",disabled:u.isPending})}),l.jsx(mt,{label:"Template",children:l.jsx(Aa,{value:g,onChange:Y=>b(Y.target.value),disabled:u.isPending,children:kc.map(Y=>l.jsx("option",{value:Y.value,children:Y.label},Y.value))})}),xe?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:xe}):null,l.jsx(Ce,{type:"submit",className:"w-full",disabled:!M,isLoading:u.isPending,children:"Create from template"})]}),l.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Import configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),l.jsxs("form",{onSubmit:ue,className:"mt-3 space-y-4",children:[l.jsx(mt,{label:"Configuration name",required:!0,children:l.jsx(vt,{value:S,onChange:Y=>N(Y.target.value),placeholder:"Imported configuration",disabled:d.isPending})}),l.jsxs(mt,{label:"Archive (.zip)",required:!0,children:[l.jsx(vt,{type:"file",ref:O,accept:".zip",onChange:I,disabled:d.isPending}),j?l.jsx("p",{className:"mt-1 text-xs text-slate-500","aria-live":"polite",children:j.name}):null]}),k?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:k}):null,l.jsx(Ce,{type:"submit",className:"w-full",disabled:!G,isLoading:d.isPending,children:"Import archive"})]})]})]})]})}function DT({status:e}){const n=e.toLowerCase(),r=n==="active"?"bg-emerald-100 text-emerald-700":n==="draft"?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-700";return l.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${r}`,children:e})}function MT(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function zT({params:e}={}){const{workspace:n}=xr(),r=Vt(),i=e?.configId,c=p.useMemo(()=>Yh(n.id),[n.id]),u=Ly({workspaceId:n.id,configurationId:i}),d=u.data;return p.useEffect(()=>{!i||!d||Xh(c,i)},[i,d,c]),i?u.isLoading?l.jsx(ut,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details."}):u.isError?l.jsx(ut,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page."}):d?l.jsxs("div",{className:"flex h-full flex-col gap-4 p-4",children:[l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Configuration"}),l.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:d.display_name})]}),l.jsx(Ce,{variant:"secondary",onClick:()=>r(`/workspaces/${n.id}/config-builder/${encodeURIComponent(d.id)}/editor`),children:"Open editor"})]}),l.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Config ID"}),l.jsx("dd",{className:"text-sm text-slate-700",children:d.id})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Status"}),l.jsx("dd",{className:"text-sm capitalize text-slate-700",children:d.status.toLowerCase()})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Updated"}),l.jsx("dd",{className:"text-sm text-slate-700",children:OT(d.updated_at)})]})]})]}),l.jsxs("section",{className:"flex-1 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-800",children:"Overview"}),l.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:"The refreshed config workbench will eventually surface manifest summaries, validation history, and deployment metrics here. For now this page offers a quick launch point into the editor while we rebuild the experience."})]})]}):l.jsx(ut,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."}):l.jsx(ut,{variant:"error",title:"Configuration not found",description:"Pick a configuration from the list to view its details."})}function OT(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function LT({params:e}={}){const{workspace:n}=xr(),{session:r,windowState:i,openSession:c,closeSession:u,minimizeWindow:d,maximizeWindow:m,restoreWindow:x,shouldBypassUnsavedGuard:g}=Ey(),b=e?.configId,v=Ly({workspaceId:n.id,configurationId:b});if(p.useEffect(()=>{b||u()},[b,u]),p.useEffect(()=>{if(!b||v.isError)return;const C=v.data?.display_name??b;c({workspaceId:n.id,configId:b,configName:`${n.name}  ${C}`})},[b,v.data?.display_name,v.isError,n.id,n.name,c]),p.useEffect(()=>{b&&(v.isError||v.isSuccess&&!v.data)&&u()},[u,b,v.data,v.isError,v.isSuccess]),!b)return l.jsx(ut,{variant:"error",title:"Select a configuration",description:"Choose a configuration from the list to open the workbench."});if(v.isLoading)return l.jsx(ut,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details before opening the workbench."});if(v.isError)return l.jsx(ut,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page or pick a different configuration."});if(!v.data)return l.jsx(ut,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."});const w=r&&r.configId===b?r:null,S=!!(w&&i==="minimized"),N=!!(w&&i==="restored"),j=!!(w&&i==="maximized");return N&&w?l.jsx("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:l.jsx(jy,{workspaceId:n.id,configId:w.configId,configName:w.configName,windowState:"restored",onMinimizeWindow:d,onMaximizeWindow:m,onRestoreWindow:x,onCloseWorkbench:u,shouldBypassUnsavedGuard:g})}):j?l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(ut,{variant:"empty",title:"Immersive focus active",description:"Exit immersive mode from the workbench focus menu to return here."})}):S?l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(ut,{variant:"empty",title:"Workbench docked",description:"Use the dock at the bottom of the screen to resume editing."})}):l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(ut,{variant:"loading",title:"Launching config workbench",description:"If the editor does not appear, refresh the page."})})}function UT({workspaceName:e,navGroups:n,activeSectionId:r,activeSectionLabel:i,activeSectionDescription:c,activeGroupLabel:u,children:d}){const x=n.flatMap(N=>N.items).find(N=>N.id===r)?.tone??"default",[g,b]=p.useState(""),v=g.trim().toLowerCase(),w=p.useMemo(()=>v?n.map(N=>({...N,items:N.items.filter(j=>`${j.label} ${j.description}`.toLowerCase().includes(v))})).filter(N=>N.items.length>0):n,[n,v]),S=p.useMemo(()=>["Settings",u,i].filter(Boolean),[u,i]);return l.jsxs("div",{className:"space-y-6",children:[l.jsx("header",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-soft",children:l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold uppercase tracking-[0.28em] text-slate-400",children:[l.jsx("span",{children:"Workspace"}),l.jsx("span",{"aria-hidden":!0,children:""}),l.jsx("span",{children:"Settings"})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:e}),l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:"Settings"})]}),l.jsx("div",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-600",children:S.map((N,j)=>l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx("span",{className:j===S.length-1?"font-semibold text-slate-900":"text-slate-600",children:N}),j<S.length-1?l.jsx("span",{"aria-hidden":!0,className:"text-slate-400",children:"/"}):null]},N))}),c?l.jsx("p",{className:"max-w-3xl text-sm text-slate-600",children:c}):null]}),l.jsxs("div",{className:"w-full max-w-xs",children:[l.jsx(vt,{value:g,onChange:N=>b(N.target.value),placeholder:"Search settings","aria-label":"Search workspace settings"}),l.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Filter sections by name or description."})]})]})}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[280px,1fr]",children:[l.jsx("nav",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-soft","aria-label":"Workspace settings sections",children:l.jsx("div",{className:"space-y-4",children:w.length===0?l.jsxs("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:['No sections match "',g,'".']}):w.map(N=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"px-1 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:N.label}),l.jsx("ul",{className:"space-y-1",role:"list",children:N.items.map(j=>{const C=j.id===r,k=j.tone==="danger"?{active:"bg-danger-50 text-danger-700 ring-danger-100",idle:"hover:bg-danger-50/60 text-danger-700",badgeActive:"bg-danger-500 text-white",badgeIdle:"bg-danger-100 text-danger-700 group-hover:bg-danger-200"}:{active:"bg-brand-50 text-brand-700 ring-brand-100",idle:"hover:bg-slate-50 text-slate-700",badgeActive:"bg-brand-500 text-white",badgeIdle:"bg-slate-100 text-slate-500 group-hover:bg-slate-200"},_=he("group flex w-full items-start gap-3 rounded-xl px-3 py-2.5 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2",C?k.active:k.idle,j.disabled&&"cursor-not-allowed opacity-50 ring-0 hover:bg-white");return j.disabled?l.jsx("li",{className:"w-full",children:l.jsx("div",{className:_,"aria-disabled":!0,children:l.jsxs("div",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"text-sm font-semibold",children:j.label}),l.jsx("span",{className:"text-xs text-slate-500",children:j.description})]})})},j.id):l.jsx("li",{className:"w-full",children:l.jsxs(Ay,{to:j.href,className:_,children:[l.jsxs("div",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"text-sm font-semibold",children:j.label}),l.jsx("span",{className:"text-xs text-slate-500",children:j.description})]}),l.jsx("span",{"aria-hidden":!0,className:he("ml-auto inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] font-bold transition",C?k.badgeActive:k.badgeIdle),children:j.label.slice(0,1).toUpperCase()})]})},j.id)})})]},N.id))})}),l.jsx("div",{className:he("space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-soft",x==="danger"&&"border-danger-100 bg-danger-50/40"),children:d})]})]})}const Hy=p.createContext(null);function $T({value:e,children:n}){return l.jsx(Hy.Provider,{value:e,children:n})}function Fy(){const e=p.useContext(Hy);if(!e)throw new Error("useSettingsSection must be used within a SettingsSectionProvider");return e}function uu({open:e,title:n,description:r,confirmLabel:i="Confirm",cancelLabel:c="Cancel",onConfirm:u,onCancel:d,isConfirming:m,children:x,confirmDisabled:g,tone:b="default"}){const v=p.useRef(null);if(p.useEffect(()=>{if(!e)return;const S=j=>{if(j.key==="Escape"&&d(),j.key==="Tab"){const C=v.current;if(!C)return;const k=Array.from(C.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(L=>!L.hasAttribute("disabled"));if(k.length===0)return;const _=k.indexOf(document.activeElement),A=j.shiftKey?_<=0?k.length-1:_-1:_===k.length-1?0:_+1;k[A]?.focus(),j.preventDefault()}};return window.addEventListener("keydown",S),v.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",S)},[d,e]),!e)return null;const w=b==="danger"?{badge:"bg-danger-100 text-danger-700",confirmVariant:"danger"}:{badge:"bg-brand-50 text-brand-700",confirmVariant:"primary"};return vs.createPortal(l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 px-4",onClick:d,children:l.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":n,className:"w-full max-w-lg rounded-2xl border border-slate-200 bg-white p-6 shadow-2xl",onClick:S=>S.stopPropagation(),ref:v,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:he("inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em]",w.badge),children:"Confirm"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:n}),r?l.jsx("p",{className:"text-sm text-slate-600",children:r}):null]}),x?l.jsx("div",{className:"mt-4 space-y-3",children:x}):null,l.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[l.jsx(Ce,{type:"button",variant:"ghost",onClick:d,disabled:m,children:c}),l.jsx(Ce,{type:"button",variant:w.confirmVariant,onClick:u,isLoading:m,disabled:g||m,className:b==="danger"?"hover:bg-danger-600":void 0,children:i})]})]})}),document.body)}function du({title:e,description:n,actions:r}){return l.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:e}),n?l.jsx("p",{className:"text-sm text-slate-600",children:n}):null]}),r?l.jsx("div",{className:"flex items-center gap-2",children:r}):null]})}function BT(){const{workspace:e,hasPermission:n}=xr(),r=Vt(),i=dt(),[c,u]=p.useState(!1),[d,m]=p.useState(""),[x,g]=p.useState(null),b=sn({mutationFn:()=>GS(e.id),onSuccess:()=>{i.invalidateQueries({queryKey:Zt.all()}),r("/workspaces",{replace:!0})},onError:S=>{g(S instanceof Error?S.message:"Unable to delete workspace.")}}),v=n("workspace.delete")||n("workspace.settings.manage"),w=p.useMemo(()=>{const S=d.trim().toLowerCase();return S.length>0&&(S===e.slug.toLowerCase()||S===e.name.toLowerCase())},[d,e.name,e.slug]);return l.jsxs("div",{className:"space-y-6",children:[l.jsx(du,{title:"Danger zone",description:"Delete this workspace when it is no longer needed."}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Delete workspace"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Permanently remove this workspace and all associated data. This action cannot be undone."})]}),l.jsx(Ce,{type:"button",variant:"danger",onClick:()=>u(!0),disabled:!v||b.isPending,isLoading:b.isPending,children:"Delete workspace"})]}),v?null:l.jsx(rt,{tone:"warning",className:"mt-3",children:"You need additional permissions to delete this workspace."}),x?l.jsx(rt,{tone:"danger",className:"mt-3",children:x}):null,l.jsx("p",{className:"mt-3 text-sm text-amber-700",children:"All workspace configurations, documents, runs, and history will be removed."})]}),l.jsxs("div",{className:"rounded-2xl border border-amber-100 bg-amber-50 p-4 text-sm text-amber-800",children:[l.jsx("p",{className:"font-semibold",children:"Looking for ADE safe mode?"}),l.jsx("p",{className:"mt-1",children:"Safe mode is a system-wide control. Manage it from the system settings area instead of workspace settings."})]}),l.jsxs(uu,{open:c,title:"Delete this workspace?",description:"Type the workspace slug to confirm. This cannot be undone.",confirmLabel:"Delete workspace",tone:"danger",onCancel:()=>{u(!1),m(""),g(null)},onConfirm:()=>{w&&(g(null),b.mutate())},isConfirming:b.isPending,confirmDisabled:!w,children:[l.jsx(mt,{label:"Workspace slug",required:!0,children:l.jsx(vt,{value:d,onChange:S=>m(S.target.value),placeholder:e.slug,disabled:b.isPending})}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Enter ",l.jsx("strong",{children:e.slug})," to confirm deletion."]})]})]})}var co=e=>e.type==="checkbox",_a=e=>e instanceof Date,Wn=e=>e==null;const Zy=e=>typeof e=="object";var nn=e=>!Wn(e)&&!Array.isArray(e)&&Zy(e)&&!_a(e),qT=e=>nn(e)&&e.target?co(e.target)?e.target.checked:e.target.value:e,HT=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,FT=(e,n)=>e.has(HT(n)),ZT=e=>{const n=e.constructor&&e.constructor.prototype;return nn(n)&&n.hasOwnProperty("isPrototypeOf")},Jh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function gn(e){let n;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(!(Jh&&(e instanceof Blob||i))&&(r||nn(e)))if(n=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!ZT(e))n=e;else for(const c in e)e.hasOwnProperty(c)&&(n[c]=gn(e[c]));else return e;return n}var fu=e=>/^\w*$/.test(e),Wt=e=>e===void 0,em=e=>Array.isArray(e)?e.filter(Boolean):[],tm=e=>em(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Re=(e,n,r)=>{if(!n||!nn(e))return r;const i=(fu(n)?[n]:tm(n)).reduce((c,u)=>Wn(c)?c:c[u],e);return Wt(i)||i===e?Wt(e[n])?r:e[n]:i},Is=e=>typeof e=="boolean",St=(e,n,r)=>{let i=-1;const c=fu(n)?[n]:tm(n),u=c.length,d=u-1;for(;++i<u;){const m=c[i];let x=r;if(i!==d){const g=e[m];x=nn(g)||Array.isArray(g)?g:isNaN(+c[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;e[m]=x,e=e[m]}};const ub={BLUR:"blur",FOCUS_OUT:"focusout"},As={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},gr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},VT=bt.createContext(null);VT.displayName="HookFormContext";var PT=(e,n,r,i=!0)=>{const c={defaultValues:n._defaultValues};for(const u in e)Object.defineProperty(c,u,{get:()=>{const d=u;return n._proxyFormState[d]!==As.all&&(n._proxyFormState[d]=!i||As.all),e[d]}});return c};const QT=typeof window<"u"?bt.useLayoutEffect:bt.useEffect;var is=e=>typeof e=="string",IT=(e,n,r,i,c)=>is(e)?(i&&n.watch.add(e),Re(r,e,c)):Array.isArray(e)?e.map(u=>(i&&n.watch.add(u),Re(r,u))):(i&&(n.watchAll=!0),r),mh=e=>Wn(e)||!Zy(e);function Yr(e,n,r=new WeakSet){if(mh(e)||mh(n))return e===n;if(_a(e)&&_a(n))return e.getTime()===n.getTime();const i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;if(r.has(e)||r.has(n))return!0;r.add(e),r.add(n);for(const u of i){const d=e[u];if(!c.includes(u))return!1;if(u!=="ref"){const m=n[u];if(_a(d)&&_a(m)||nn(d)&&nn(m)||Array.isArray(d)&&Array.isArray(m)?!Yr(d,m,r):d!==m)return!1}}return!0}var nm=(e,n,r,i,c)=>n?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:c||!0}}:{},Vl=e=>Array.isArray(e)?e:[e],db=()=>{let e=[];return{get observers(){return e},next:c=>{for(const u of e)u.next&&u.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(u=>u!==c)}}),unsubscribe:()=>{e=[]}}};function Vy(e,n){const r={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],u=n[i];if(c&&nn(c)&&u){const d=Vy(c,u);nn(d)&&(r[i]=d)}else e[i]&&(r[i]=u)}return r}var In=e=>nn(e)&&!Object.keys(e).length,sm=e=>e.type==="file",Rs=e=>typeof e=="function",Ic=e=>{if(!Jh)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},Py=e=>e.type==="select-multiple",rm=e=>e.type==="radio",WT=e=>rm(e)||co(e),If=e=>Ic(e)&&e.isConnected;function GT(e,n){const r=n.slice(0,-1).length;let i=0;for(;i<r;)e=Wt(e)?i++:e[n[i++]];return e}function KT(e){for(const n in e)if(e.hasOwnProperty(n)&&!Wt(e[n]))return!1;return!0}function tn(e,n){const r=Array.isArray(n)?n:fu(n)?[n]:tm(n),i=r.length===1?e:GT(e,r),c=r.length-1,u=r[c];return i&&delete i[u],c!==0&&(nn(i)&&In(i)||Array.isArray(i)&&KT(i))&&tn(e,r.slice(0,-1)),e}var YT=e=>{for(const n in e)if(Rs(e[n]))return!0;return!1};function Qy(e){return Array.isArray(e)||nn(e)&&!YT(e)}function ph(e,n={}){for(const r in e)Qy(e[r])?(n[r]=Array.isArray(e[r])?[]:{},ph(e[r],n[r])):Wt(e[r])||(n[r]=!0);return n}function Ci(e,n,r){r||(r=ph(n));for(const i in e)Qy(e[i])?Wt(n)||mh(r[i])?r[i]=ph(e[i],Array.isArray(e[i])?[]:{}):Ci(e[i],Wn(n)?{}:n[i],r[i]):r[i]=!Yr(e[i],n[i]);return r}const fb={value:!1,isValid:!1},hb={value:!0,isValid:!0};var Iy=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Wt(e[0].attributes.value)?Wt(e[0].value)||e[0].value===""?hb:{value:e[0].value,isValid:!0}:hb:fb}return fb},Wy=(e,{valueAsNumber:n,valueAsDate:r,setValueAs:i})=>Wt(e)?e:n?e===""?NaN:e&&+e:r&&is(e)?new Date(e):i?i(e):e;const mb={isValid:!1,value:null};var Gy=e=>Array.isArray(e)?e.reduce((n,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:n,mb):mb;function pb(e){const n=e.ref;return sm(n)?n.files:rm(n)?Gy(e.refs).value:Py(n)?[...n.selectedOptions].map(({value:r})=>r):co(n)?Iy(e.refs).value:Wy(Wt(n.value)?e.ref.value:n.value,e)}var XT=(e,n,r,i)=>{const c={};for(const u of e){const d=Re(n,u);d&&St(c,u,d._f)}return{criteriaMode:r,names:[...e],fields:c,shouldUseNativeValidation:i}},Wc=e=>e instanceof RegExp,$l=e=>Wt(e)?e:Wc(e)?e.source:nn(e)?Wc(e.value)?e.value.source:e.value:e,gb=e=>({isOnSubmit:!e||e===As.onSubmit,isOnBlur:e===As.onBlur,isOnChange:e===As.onChange,isOnAll:e===As.all,isOnTouch:e===As.onTouched});const xb="AsyncFunction";var JT=e=>!!e&&!!e.validate&&!!(Rs(e.validate)&&e.validate.constructor.name===xb||nn(e.validate)&&Object.values(e.validate).find(n=>n.constructor.name===xb)),eA=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),bb=(e,n,r)=>!r&&(n.watchAll||n.watch.has(e)||[...n.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Pl=(e,n,r,i)=>{for(const c of r||Object.keys(e)){const u=Re(e,c);if(u){const{_f:d,...m}=u;if(d){if(d.refs&&d.refs[0]&&n(d.refs[0],c)&&!i)return!0;if(d.ref&&n(d.ref,d.name)&&!i)return!0;if(Pl(m,n))break}else if(nn(m)&&Pl(m,n))break}}};function vb(e,n,r){const i=Re(e,r);if(i||fu(r))return{error:i,name:r};const c=r.split(".");for(;c.length;){const u=c.join("."),d=Re(n,u),m=Re(e,u);if(d&&!Array.isArray(d)&&r!==u)return{name:r};if(m&&m.type)return{name:u,error:m};if(m&&m.root&&m.root.type)return{name:`${u}.root`,error:m.root};c.pop()}return{name:r}}var tA=(e,n,r,i)=>{r(e);const{name:c,...u}=e;return In(u)||Object.keys(u).length>=Object.keys(n).length||Object.keys(u).find(d=>n[d]===(!i||As.all))},nA=(e,n,r)=>!e||!n||e===n||Vl(e).some(i=>i&&(r?i===n:i.startsWith(n)||n.startsWith(i))),sA=(e,n,r,i,c)=>c.isOnAll?!1:!r&&c.isOnTouch?!(n||e):(r?i.isOnBlur:c.isOnBlur)?!e:(r?i.isOnChange:c.isOnChange)?e:!0,rA=(e,n)=>!em(Re(e,n)).length&&tn(e,n),aA=(e,n,r)=>{const i=Vl(Re(e,r));return St(i,"root",n[r]),St(e,r,i),e};function yb(e,n,r="validate"){if(is(e)||Array.isArray(e)&&e.every(is)||Is(e)&&!e)return{type:r,message:is(e)?e:"",ref:n}}var _i=e=>nn(e)&&!Wc(e)?e:{value:e,message:""},wb=async(e,n,r,i,c,u)=>{const{ref:d,refs:m,required:x,maxLength:g,minLength:b,min:v,max:w,pattern:S,validate:N,name:j,valueAsNumber:C,mount:k}=e._f,_=Re(r,j);if(!k||n.has(j))return{};const A=m?m[0]:d,L=I=>{c&&A.reportValidity&&(A.setCustomValidity(Is(I)?"":I||""),A.reportValidity())},O={},J=rm(d),U=co(d),ne=J||U,R=(C||sm(d))&&Wt(d.value)&&Wt(_)||Ic(d)&&d.value===""||_===""||Array.isArray(_)&&!_.length,H=nm.bind(null,j,i,O),ae=(I,F,ue,xe=gr.maxLength,M=gr.minLength)=>{const G=I?F:ue;O[j]={type:I?xe:M,message:G,ref:d,...H(I?xe:M,G)}};if(u?!Array.isArray(_)||!_.length:x&&(!ne&&(R||Wn(_))||Is(_)&&!_||U&&!Iy(m).isValid||J&&!Gy(m).isValid)){const{value:I,message:F}=is(x)?{value:!!x,message:x}:_i(x);if(I&&(O[j]={type:gr.required,message:F,ref:A,...H(gr.required,F)},!i))return L(F),O}if(!R&&(!Wn(v)||!Wn(w))){let I,F;const ue=_i(w),xe=_i(v);if(!Wn(_)&&!isNaN(_)){const M=d.valueAsNumber||_&&+_;Wn(ue.value)||(I=M>ue.value),Wn(xe.value)||(F=M<xe.value)}else{const M=d.valueAsDate||new Date(_),G=ie=>new Date(new Date().toDateString()+" "+ie),Y=d.type=="time",we=d.type=="week";is(ue.value)&&_&&(I=Y?G(_)>G(ue.value):we?_>ue.value:M>new Date(ue.value)),is(xe.value)&&_&&(F=Y?G(_)<G(xe.value):we?_<xe.value:M<new Date(xe.value))}if((I||F)&&(ae(!!I,ue.message,xe.message,gr.max,gr.min),!i))return L(O[j].message),O}if((g||b)&&!R&&(is(_)||u&&Array.isArray(_))){const I=_i(g),F=_i(b),ue=!Wn(I.value)&&_.length>+I.value,xe=!Wn(F.value)&&_.length<+F.value;if((ue||xe)&&(ae(ue,I.message,F.message),!i))return L(O[j].message),O}if(S&&!R&&is(_)){const{value:I,message:F}=_i(S);if(Wc(I)&&!_.match(I)&&(O[j]={type:gr.pattern,message:F,ref:d,...H(gr.pattern,F)},!i))return L(F),O}if(N){if(Rs(N)){const I=await N(_,r),F=yb(I,A);if(F&&(O[j]={...F,...H(gr.validate,F.message)},!i))return L(F.message),O}else if(nn(N)){let I={};for(const F in N){if(!In(I)&&!i)break;const ue=yb(await N[F](_,r),A,F);ue&&(I={...ue,...H(F,ue.message)},L(ue.message),i&&(O[j]=I))}if(!In(I)&&(O[j]={ref:A,...I},!i))return O}}return L(!0),O};const iA={mode:As.onSubmit,reValidateMode:As.onChange,shouldFocusError:!0};function lA(e={}){let n={...iA,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Rs(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},c=nn(n.defaultValues)||nn(n.values)?gn(n.defaultValues||n.values)||{}:{},u=n.shouldUnregister?{}:gn(c),d={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,g=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...b};const w={array:db(),state:db()},S=n.criteriaMode===As.all,N=D=>K=>{clearTimeout(g),g=setTimeout(D,K)},j=async D=>{if(!n.disabled&&(b.isValid||v.isValid||D)){const K=n.resolver?In((await U()).errors):await R(i,!0);K!==r.isValid&&w.state.next({isValid:K})}},C=(D,K)=>{!n.disabled&&(b.isValidating||b.validatingFields||v.isValidating||v.validatingFields)&&((D||Array.from(m.mount)).forEach(ce=>{ce&&(K?St(r.validatingFields,ce,K):tn(r.validatingFields,ce))}),w.state.next({validatingFields:r.validatingFields,isValidating:!In(r.validatingFields)}))},k=(D,K=[],ce,Ee,ye=!0,je=!0)=>{if(Ee&&ce&&!n.disabled){if(d.action=!0,je&&Array.isArray(Re(i,D))){const De=ce(Re(i,D),Ee.argA,Ee.argB);ye&&St(i,D,De)}if(je&&Array.isArray(Re(r.errors,D))){const De=ce(Re(r.errors,D),Ee.argA,Ee.argB);ye&&St(r.errors,D,De),rA(r.errors,D)}if((b.touchedFields||v.touchedFields)&&je&&Array.isArray(Re(r.touchedFields,D))){const De=ce(Re(r.touchedFields,D),Ee.argA,Ee.argB);ye&&St(r.touchedFields,D,De)}(b.dirtyFields||v.dirtyFields)&&(r.dirtyFields=Ci(c,u)),w.state.next({name:D,isDirty:ae(D,K),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else St(u,D,K)},_=(D,K)=>{St(r.errors,D,K),w.state.next({errors:r.errors})},A=D=>{r.errors=D,w.state.next({errors:r.errors,isValid:!1})},L=(D,K,ce,Ee)=>{const ye=Re(i,D);if(ye){const je=Re(u,D,Wt(ce)?Re(c,D):ce);Wt(je)||Ee&&Ee.defaultChecked||K?St(u,D,K?je:pb(ye._f)):ue(D,je),d.mount&&j()}},O=(D,K,ce,Ee,ye)=>{let je=!1,De=!1;const Qe={name:D};if(!n.disabled){if(!ce||Ee){(b.isDirty||v.isDirty)&&(De=r.isDirty,r.isDirty=Qe.isDirty=ae(),je=De!==Qe.isDirty);const We=Yr(Re(c,D),K);De=!!Re(r.dirtyFields,D),We?tn(r.dirtyFields,D):St(r.dirtyFields,D,!0),Qe.dirtyFields=r.dirtyFields,je=je||(b.dirtyFields||v.dirtyFields)&&De!==!We}if(ce){const We=Re(r.touchedFields,D);We||(St(r.touchedFields,D,ce),Qe.touchedFields=r.touchedFields,je=je||(b.touchedFields||v.touchedFields)&&We!==ce)}je&&ye&&w.state.next(Qe)}return je?Qe:{}},J=(D,K,ce,Ee)=>{const ye=Re(r.errors,D),je=(b.isValid||v.isValid)&&Is(K)&&r.isValid!==K;if(n.delayError&&ce?(x=N(()=>_(D,ce)),x(n.delayError)):(clearTimeout(g),x=null,ce?St(r.errors,D,ce):tn(r.errors,D)),(ce?!Yr(ye,ce):ye)||!In(Ee)||je){const De={...Ee,...je&&Is(K)?{isValid:K}:{},errors:r.errors,name:D};r={...r,...De},w.state.next(De)}},U=async D=>{C(D,!0);const K=await n.resolver(u,n.context,XT(D||m.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return C(D),K},ne=async D=>{const{errors:K}=await U(D);if(D)for(const ce of D){const Ee=Re(K,ce);Ee?St(r.errors,ce,Ee):tn(r.errors,ce)}else r.errors=K;return K},R=async(D,K,ce={valid:!0})=>{for(const Ee in D){const ye=D[Ee];if(ye){const{_f:je,...De}=ye;if(je){const Qe=m.array.has(je.name),We=ye._f&&JT(ye._f);We&&b.validatingFields&&C([je.name],!0);const Nt=await wb(ye,m.disabled,u,S,n.shouldUseNativeValidation&&!K,Qe);if(We&&b.validatingFields&&C([je.name]),Nt[je.name]&&(ce.valid=!1,K))break;!K&&(Re(Nt,je.name)?Qe?aA(r.errors,Nt,je.name):St(r.errors,je.name,Nt[je.name]):tn(r.errors,je.name))}!In(De)&&await R(De,K,ce)}}return ce.valid},H=()=>{for(const D of m.unMount){const K=Re(i,D);K&&(K._f.refs?K._f.refs.every(ce=>!If(ce)):!If(K._f.ref))&&P(D)}m.unMount=new Set},ae=(D,K)=>!n.disabled&&(D&&K&&St(u,D,K),!Yr(ie(),c)),I=(D,K,ce)=>IT(D,m,{...d.mount?u:Wt(K)?c:is(D)?{[D]:K}:K},ce,K),F=D=>em(Re(d.mount?u:c,D,n.shouldUnregister?Re(c,D,[]):[])),ue=(D,K,ce={})=>{const Ee=Re(i,D);let ye=K;if(Ee){const je=Ee._f;je&&(!je.disabled&&St(u,D,Wy(K,je)),ye=Ic(je.ref)&&Wn(K)?"":K,Py(je.ref)?[...je.ref.options].forEach(De=>De.selected=ye.includes(De.value)):je.refs?co(je.ref)?je.refs.forEach(De=>{(!De.defaultChecked||!De.disabled)&&(Array.isArray(ye)?De.checked=!!ye.find(Qe=>Qe===De.value):De.checked=ye===De.value||!!ye)}):je.refs.forEach(De=>De.checked=De.value===ye):sm(je.ref)?je.ref.value="":(je.ref.value=ye,je.ref.type||w.state.next({name:D,values:gn(u)})))}(ce.shouldDirty||ce.shouldTouch)&&O(D,ye,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&we(D)},xe=(D,K,ce)=>{for(const Ee in K){if(!K.hasOwnProperty(Ee))return;const ye=K[Ee],je=D+"."+Ee,De=Re(i,je);(m.array.has(D)||nn(ye)||De&&!De._f)&&!_a(ye)?xe(je,ye,ce):ue(je,ye,ce)}},M=(D,K,ce={})=>{const Ee=Re(i,D),ye=m.array.has(D),je=gn(K);St(u,D,je),ye?(w.array.next({name:D,values:gn(u)}),(b.isDirty||b.dirtyFields||v.isDirty||v.dirtyFields)&&ce.shouldDirty&&w.state.next({name:D,dirtyFields:Ci(c,u),isDirty:ae(D,je)})):Ee&&!Ee._f&&!Wn(je)?xe(D,je,ce):ue(D,je,ce),bb(D,m)&&w.state.next({...r,name:D}),w.state.next({name:d.mount?D:void 0,values:gn(u)})},G=async D=>{d.mount=!0;const K=D.target;let ce=K.name,Ee=!0;const ye=Re(i,ce),je=We=>{Ee=Number.isNaN(We)||_a(We)&&isNaN(We.getTime())||Yr(We,Re(u,ce,We))},De=gb(n.mode),Qe=gb(n.reValidateMode);if(ye){let We,Nt;const Se=K.type?pb(ye._f):qT(D),_e=D.type===ub.BLUR||D.type===ub.FOCUS_OUT,Fe=!eA(ye._f)&&!n.resolver&&!Re(r.errors,ce)&&!ye._f.deps||sA(_e,Re(r.touchedFields,ce),r.isSubmitted,Qe,De),Mt=bb(ce,m,_e);St(u,ce,Se),_e?(!K||!K.readOnly)&&(ye._f.onBlur&&ye._f.onBlur(D),x&&x(0)):ye._f.onChange&&ye._f.onChange(D);const nt=O(ce,Se,_e),Gt=!In(nt)||Mt;if(!_e&&w.state.next({name:ce,type:D.type,values:gn(u)}),Fe)return(b.isValid||v.isValid)&&(n.mode==="onBlur"?_e&&j():_e||j()),Gt&&w.state.next({name:ce,...Mt?{}:nt});if(!_e&&Mt&&w.state.next({...r}),n.resolver){const{errors:_t}=await U([ce]);if(je(Se),Ee){const vr=vb(r.errors,i,ce),Os=vb(_t,i,vr.name||ce);We=Os.error,ce=Os.name,Nt=In(_t)}}else C([ce],!0),We=(await wb(ye,m.disabled,u,S,n.shouldUseNativeValidation))[ce],C([ce]),je(Se),Ee&&(We?Nt=!1:(b.isValid||v.isValid)&&(Nt=await R(i,!0)));Ee&&(ye._f.deps&&(!Array.isArray(ye._f.deps)||ye._f.deps.length>0)&&we(ye._f.deps),J(ce,Nt,We,nt))}},Y=(D,K)=>{if(Re(r.errors,K)&&D.focus)return D.focus(),1},we=async(D,K={})=>{let ce,Ee;const ye=Vl(D);if(n.resolver){const je=await ne(Wt(D)?D:ye);ce=In(je),Ee=D?!ye.some(De=>Re(je,De)):ce}else D?(Ee=(await Promise.all(ye.map(async je=>{const De=Re(i,je);return await R(De&&De._f?{[je]:De}:De)}))).every(Boolean),!(!Ee&&!r.isValid)&&j()):Ee=ce=await R(i);return w.state.next({...!is(D)||(b.isValid||v.isValid)&&ce!==r.isValid?{}:{name:D},...n.resolver||!D?{isValid:ce}:{},errors:r.errors}),K.shouldFocus&&!Ee&&Pl(i,Y,D?ye:m.mount),Ee},ie=(D,K)=>{let ce={...d.mount?u:c};return K&&(ce=Vy(K.dirtyFields?r.dirtyFields:r.touchedFields,ce)),Wt(D)?ce:is(D)?Re(ce,D):D.map(Ee=>Re(ce,Ee))},T=(D,K)=>({invalid:!!Re((K||r).errors,D),isDirty:!!Re((K||r).dirtyFields,D),error:Re((K||r).errors,D),isValidating:!!Re(r.validatingFields,D),isTouched:!!Re((K||r).touchedFields,D)}),W=D=>{D&&Vl(D).forEach(K=>tn(r.errors,K)),w.state.next({errors:D?r.errors:{}})},le=(D,K,ce)=>{const Ee=(Re(i,D,{_f:{}})._f||{}).ref,ye=Re(r.errors,D)||{},{ref:je,message:De,type:Qe,...We}=ye;St(r.errors,D,{...We,...K,ref:Ee}),w.state.next({name:D,errors:r.errors,isValid:!1}),ce&&ce.shouldFocus&&Ee&&Ee.focus&&Ee.focus()},Z=(D,K)=>Rs(D)?w.state.subscribe({next:ce=>"values"in ce&&D(I(void 0,K),ce)}):I(D,K,!0),X=D=>w.state.subscribe({next:K=>{nA(D.name,K.name,D.exact)&&tA(K,D.formState||b,rn,D.reRenderRoot)&&D.callback({values:{...u},...r,...K,defaultValues:c})}}).unsubscribe,B=D=>(d.mount=!0,v={...v,...D.formState},X({...D,formState:v})),P=(D,K={})=>{for(const ce of D?Vl(D):m.mount)m.mount.delete(ce),m.array.delete(ce),K.keepValue||(tn(i,ce),tn(u,ce)),!K.keepError&&tn(r.errors,ce),!K.keepDirty&&tn(r.dirtyFields,ce),!K.keepTouched&&tn(r.touchedFields,ce),!K.keepIsValidating&&tn(r.validatingFields,ce),!n.shouldUnregister&&!K.keepDefaultValue&&tn(c,ce);w.state.next({values:gn(u)}),w.state.next({...r,...K.keepDirty?{isDirty:ae()}:{}}),!K.keepIsValid&&j()},$=({disabled:D,name:K})=>{(Is(D)&&d.mount||D||m.disabled.has(K))&&(D?m.disabled.add(K):m.disabled.delete(K))},re=(D,K={})=>{let ce=Re(i,D);const Ee=Is(K.disabled)||Is(n.disabled);return St(i,D,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:D}},name:D,mount:!0,...K}}),m.mount.add(D),ce?$({disabled:Is(K.disabled)?K.disabled:n.disabled,name:D}):L(D,!0,K.value),{...Ee?{disabled:K.disabled||n.disabled}:{},...n.progressive?{required:!!K.required,min:$l(K.min),max:$l(K.max),minLength:$l(K.minLength),maxLength:$l(K.maxLength),pattern:$l(K.pattern)}:{},name:D,onChange:G,onBlur:G,ref:ye=>{if(ye){re(D,K),ce=Re(i,D);const je=Wt(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,De=WT(je),Qe=ce._f.refs||[];if(De?Qe.find(We=>We===je):je===ce._f.ref)return;St(i,D,{_f:{...ce._f,...De?{refs:[...Qe.filter(If),je,...Array.isArray(Re(c,D))?[{}]:[]],ref:{type:je.type,name:D}}:{ref:je}}}),L(D,!1,void 0,je)}else ce=Re(i,D,{}),ce._f&&(ce._f.mount=!1),(n.shouldUnregister||K.shouldUnregister)&&!(FT(m.array,D)&&d.action)&&m.unMount.add(D)}}},me=()=>n.shouldFocusError&&Pl(i,Y,m.mount),Me=D=>{Is(D)&&(w.state.next({disabled:D}),Pl(i,(K,ce)=>{const Ee=Re(i,ce);Ee&&(K.disabled=Ee._f.disabled||D,Array.isArray(Ee._f.refs)&&Ee._f.refs.forEach(ye=>{ye.disabled=Ee._f.disabled||D}))},0,!1))},ve=(D,K)=>async ce=>{let Ee;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let ye=gn(u);if(w.state.next({isSubmitting:!0}),n.resolver){const{errors:je,values:De}=await U();r.errors=je,ye=gn(De)}else await R(i);if(m.disabled.size)for(const je of m.disabled)tn(ye,je);if(tn(r.errors,"root"),In(r.errors)){w.state.next({errors:{}});try{await D(ye,ce)}catch(je){Ee=je}}else K&&await K({...r.errors},ce),me(),setTimeout(me);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:In(r.errors)&&!Ee,submitCount:r.submitCount+1,errors:r.errors}),Ee)throw Ee},Oe=(D,K={})=>{Re(i,D)&&(Wt(K.defaultValue)?M(D,gn(Re(c,D))):(M(D,K.defaultValue),St(c,D,gn(K.defaultValue))),K.keepTouched||tn(r.touchedFields,D),K.keepDirty||(tn(r.dirtyFields,D),r.isDirty=K.defaultValue?ae(D,gn(Re(c,D))):ae()),K.keepError||(tn(r.errors,D),b.isValid&&j()),w.state.next({...r}))},Be=(D,K={})=>{const ce=D?gn(D):c,Ee=gn(ce),ye=In(D),je=ye?c:Ee;if(K.keepDefaultValues||(c=ce),!K.keepValues){if(K.keepDirtyValues){const De=new Set([...m.mount,...Object.keys(Ci(c,u))]);for(const Qe of Array.from(De))Re(r.dirtyFields,Qe)?St(je,Qe,Re(u,Qe)):M(Qe,Re(je,Qe))}else{if(Jh&&Wt(D))for(const De of m.mount){const Qe=Re(i,De);if(Qe&&Qe._f){const We=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(Ic(We)){const Nt=We.closest("form");if(Nt){Nt.reset();break}}}}if(K.keepFieldsRef)for(const De of m.mount)M(De,Re(je,De));else i={}}u=n.shouldUnregister?K.keepDefaultValues?gn(c):{}:gn(je),w.array.next({values:{...je}}),w.state.next({values:{...je}})}m={mount:K.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!b.isValid||!!K.keepIsValid||!!K.keepDirtyValues,d.watch=!!n.shouldUnregister,w.state.next({submitCount:K.keepSubmitCount?r.submitCount:0,isDirty:ye?!1:K.keepDirty?r.isDirty:!!(K.keepDefaultValues&&!Yr(D,c)),isSubmitted:K.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ye?{}:K.keepDirtyValues?K.keepDefaultValues&&u?Ci(c,u):r.dirtyFields:K.keepDefaultValues&&D?Ci(c,D):K.keepDirty?r.dirtyFields:{},touchedFields:K.keepTouched?r.touchedFields:{},errors:K.keepErrors?r.errors:{},isSubmitSuccessful:K.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Ne=(D,K)=>Be(Rs(D)?D(u):D,K),Le=(D,K={})=>{const ce=Re(i,D),Ee=ce&&ce._f;if(Ee){const ye=Ee.refs?Ee.refs[0]:Ee.ref;ye.focus&&(ye.focus(),K.shouldSelect&&Rs(ye.select)&&ye.select())}},rn=D=>{r={...r,...D}},Tt={control:{register:re,unregister:P,getFieldState:T,handleSubmit:ve,setError:le,_subscribe:X,_runSchema:U,_focusError:me,_getWatch:I,_getDirty:ae,_setValid:j,_setFieldArray:k,_setDisabledField:$,_setErrors:A,_getFieldArray:F,_reset:Be,_resetDefaultValues:()=>Rs(n.defaultValues)&&n.defaultValues().then(D=>{Ne(D,n.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:Me,_subjects:w,_proxyFormState:b,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(D){d=D},get _defaultValues(){return c},get _names(){return m},set _names(D){m=D},get _formState(){return r},get _options(){return n},set _options(D){n={...n,...D}}},subscribe:B,trigger:we,register:re,handleSubmit:ve,watch:Z,setValue:M,getValues:ie,reset:Ne,resetField:Oe,clearErrors:W,unregister:P,setError:le,setFocus:Le,getFieldState:T};return{...Tt,formControl:Tt}}function Ky(e={}){const n=bt.useRef(void 0),r=bt.useRef(void 0),[i,c]=bt.useState({isDirty:!1,isValidating:!1,isLoading:Rs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Rs(e.defaultValues)?void 0:e.defaultValues});if(!n.current)if(e.formControl)n.current={...e.formControl,formState:i},e.defaultValues&&!Rs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...m}=lA(e);n.current={...m,formState:i}}const u=n.current.control;return u._options=e,QT(()=>{const d=u._subscribe({formState:u._proxyFormState,callback:()=>c({...u._formState}),reRenderRoot:!0});return c(m=>({...m,isReady:!0})),u._formState.isReady=!0,d},[u]),bt.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),bt.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),bt.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),bt.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),bt.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),bt.useEffect(()=>{e.values&&!Yr(e.values,r.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),r.current=e.values,c(d=>({...d}))):u._resetDefaultValues()},[u,e.values]),bt.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),n.current.formState=PT(i,u),n.current}function be(e,n,r){function i(m,x){var g;Object.defineProperty(m,"_zod",{value:m._zod??{},enumerable:!1}),(g=m._zod).traits??(g.traits=new Set),m._zod.traits.add(e),n(m,x);for(const b in d.prototype)b in m||Object.defineProperty(m,b,{value:d.prototype[b].bind(m)});m._zod.constr=d,m._zod.def=x}const c=r?.Parent??Object;class u extends c{}Object.defineProperty(u,"name",{value:e});function d(m){var x;const g=r?.Parent?new u:this;i(g,m),(x=g._zod).deferred??(x.deferred=[]);for(const b of g._zod.deferred)b();return g}return Object.defineProperty(d,"init",{value:i}),Object.defineProperty(d,Symbol.hasInstance,{value:m=>r?.Parent&&m instanceof r.Parent?!0:m?._zod?.traits?.has(e)}),Object.defineProperty(d,"name",{value:e}),d}class Ri extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Yy extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const Xy={};function Ra(e){return Xy}function oA(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>n.indexOf(+i)===-1).map(([i,c])=>c)}function gh(e,n){return typeof n=="bigint"?n.toString():n}function am(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function im(e){return e==null}function lm(e){const n=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(n,r)}const jb=Symbol("evaluating");function kt(e,n,r){let i;Object.defineProperty(e,n,{get(){if(i!==jb)return i===void 0&&(i=jb,i=r()),i},set(c){Object.defineProperty(e,n,{value:c})},configurable:!0})}function Ma(e,n,r){Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!0,configurable:!0})}function za(...e){const n={};for(const r of e){const i=Object.getOwnPropertyDescriptors(r);Object.assign(n,i)}return Object.defineProperties({},n)}function Sb(e){return JSON.stringify(e)}const Jy="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Gc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const cA=am(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Yl(e){if(Gc(e)===!1)return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(Gc(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function ew(e){return Yl(e)?{...e}:Array.isArray(e)?[...e]:e}const uA=new Set(["string","number","symbol"]);function hu(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ea(e,n,r){const i=new e._zod.constr(n??e._zod.def);return(!n||r?.parent)&&(i._zod.parent=e),i}function Ve(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function dA(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}function fA(e,n){const r=e._zod.def,i=za(e._zod.def,{get shape(){const c={};for(const u in n){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(c[u]=r.shape[u])}return Ma(this,"shape",c),c},checks:[]});return ea(e,i)}function hA(e,n){const r=e._zod.def,i=za(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const u in n){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&delete c[u]}return Ma(this,"shape",c),c},checks:[]});return ea(e,i)}function mA(e,n){if(!Yl(n))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=za(e._zod.def,{get shape(){const u={...e._zod.def.shape,...n};return Ma(this,"shape",u),u},checks:[]});return ea(e,c)}function pA(e,n){if(!Yl(n))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const i={...e._zod.def.shape,...n};return Ma(this,"shape",i),i},checks:e._zod.def.checks};return ea(e,r)}function gA(e,n){const r=za(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return Ma(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return ea(e,r)}function xA(e,n,r){const i=za(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(r)for(const d in r){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=e?new e({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)u[d]=e?new e({type:"optional",innerType:c[d]}):c[d];return Ma(this,"shape",u),u},checks:[]});return ea(n,i)}function bA(e,n,r){const i=za(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(r)for(const d in r){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=new e({type:"nonoptional",innerType:c[d]}))}else for(const d in c)u[d]=new e({type:"nonoptional",innerType:c[d]});return Ma(this,"shape",u),u},checks:[]});return ea(n,i)}function ki(e,n=0){if(e.aborted===!0)return!0;for(let r=n;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function tw(e,n){return n.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(e),r})}function Ac(e){return typeof e=="string"?e:e?.message}function Da(e,n,r){const i={...e,path:e.path??[]};if(!e.message){const c=Ac(e.inst?._zod.def?.error?.(e))??Ac(n?.error?.(e))??Ac(r.customError?.(e))??Ac(r.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function om(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Xl(...e){const[n,r,i]=e;return typeof n=="string"?{message:n,code:"custom",input:r,inst:i}:{...n}}const nw=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,gh,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},cm=be("$ZodError",nw),mu=be("$ZodError",nw,{Parent:Error});function vA(e,n=r=>r.message){const r={},i=[];for(const c of e.issues)c.path.length>0?(r[c.path[0]]=r[c.path[0]]||[],r[c.path[0]].push(n(c))):i.push(n(c));return{formErrors:i,fieldErrors:r}}function yA(e,n=r=>r.message){const r={_errors:[]},i=c=>{for(const u of c.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>i({issues:d}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)r._errors.push(n(u));else{let d=r,m=0;for(;m<u.path.length;){const x=u.path[m];m===u.path.length-1?(d[x]=d[x]||{_errors:[]},d[x]._errors.push(n(u))):d[x]=d[x]||{_errors:[]},d=d[x],m++}}};return i(e),r}const pu=e=>(n,r,i,c)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},d=n._zod.run({value:r,issues:[]},u);if(d instanceof Promise)throw new Ri;if(d.issues.length){const m=new(c?.Err??e)(d.issues.map(x=>Da(x,u,Ra())));throw Jy(m,c?.callee),m}return d.value},wA=pu(mu),gu=e=>async(n,r,i,c)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let d=n._zod.run({value:r,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const m=new(c?.Err??e)(d.issues.map(x=>Da(x,u,Ra())));throw Jy(m,c?.callee),m}return d.value},jA=gu(mu),xu=e=>(n,r,i)=>{const c=i?{...i,async:!1}:{async:!1},u=n._zod.run({value:r,issues:[]},c);if(u instanceof Promise)throw new Ri;return u.issues.length?{success:!1,error:new(e??cm)(u.issues.map(d=>Da(d,c,Ra())))}:{success:!0,data:u.value}},SA=xu(mu),bu=e=>async(n,r,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:r,issues:[]},c);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>Da(d,c,Ra())))}:{success:!0,data:u.value}},EA=bu(mu),NA=e=>(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return pu(e)(n,r,c)},_A=e=>(n,r,i)=>pu(e)(n,r,i),CA=e=>async(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return gu(e)(n,r,c)},kA=e=>async(n,r,i)=>gu(e)(n,r,i),TA=e=>(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return xu(e)(n,r,c)},AA=e=>(n,r,i)=>xu(e)(n,r,i),RA=e=>async(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return bu(e)(n,r,c)},DA=e=>async(n,r,i)=>bu(e)(n,r,i),MA=/^[cC][^\s-]{8,}$/,zA=/^[0-9a-z]+$/,OA=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,LA=/^[0-9a-vA-V]{20}$/,UA=/^[A-Za-z0-9]{27}$/,$A=/^[a-zA-Z0-9_-]{21}$/,BA=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,qA=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Eb=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,HA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,FA="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ZA(){return new RegExp(FA,"u")}const VA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,QA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,IA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,WA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,sw=/^[A-Za-z0-9_-]*$/,GA=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,KA=/^\+(?:[0-9]){6,14}[0-9]$/,rw="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",YA=new RegExp(`^${rw}$`);function aw(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function XA(e){return new RegExp(`^${aw(e)}$`)}function JA(e){const n=aw({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${r.join("|")})`;return new RegExp(`^${rw}T(?:${i})$`)}const eR=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},tR=/^[^A-Z]*$/,nR=/^[^a-z]*$/,Ys=be("$ZodCheck",(e,n)=>{var r;e._zod??(e._zod={}),e._zod.def=n,(r=e._zod).onattach??(r.onattach=[])}),sR=be("$ZodCheckMaxLength",(e,n)=>{var r;Ys.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!im(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<c&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=n.maximum)return;const d=om(c);i.issues.push({origin:d,code:"too_big",maximum:n.maximum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),rR=be("$ZodCheckMinLength",(e,n)=>{var r;Ys.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!im(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>c&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=n.minimum)return;const d=om(c);i.issues.push({origin:d,code:"too_small",minimum:n.minimum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),aR=be("$ZodCheckLengthEquals",(e,n)=>{var r;Ys.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!im(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=n.length,c.maximum=n.length,c.length=n.length}),e._zod.check=i=>{const c=i.value,u=c.length;if(u===n.length)return;const d=om(c),m=u>n.length;i.issues.push({origin:d,...m?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),vu=be("$ZodCheckStringFormat",(e,n)=>{var r,i;Ys.init(e,n),e._zod.onattach.push(c=>{const u=c._zod.bag;u.format=n.format,n.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(n.pattern))}),n.pattern?(r=e._zod).check??(r.check=c=>{n.pattern.lastIndex=0,!n.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:n.format,input:c.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),iR=be("$ZodCheckRegex",(e,n)=>{vu.init(e,n),e._zod.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),lR=be("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=tR),vu.init(e,n)}),oR=be("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=nR),vu.init(e,n)}),cR=be("$ZodCheckIncludes",(e,n)=>{Ys.init(e,n);const r=hu(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${r}`:r);n.pattern=i,e._zod.onattach.push(c=>{const u=c._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=c=>{c.value.includes(n.includes,n.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:c.value,inst:e,continue:!n.abort})}}),uR=be("$ZodCheckStartsWith",(e,n)=>{Ys.init(e,n);const r=new RegExp(`^${hu(n.prefix)}.*`);n.pattern??(n.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),dR=be("$ZodCheckEndsWith",(e,n)=>{Ys.init(e,n);const r=new RegExp(`.*${hu(n.suffix)}$`);n.pattern??(n.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),fR=be("$ZodCheckOverwrite",(e,n)=>{Ys.init(e,n),e._zod.check=r=>{r.value=n.tx(r.value)}});class hR{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(d=>d),c=Math.min(...i.map(d=>d.length-d.trimStart().length)),u=i.map(d=>d.slice(c)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const n=Function,r=this?.args,c=[...(this?.content??[""]).map(u=>`  ${u}`)];return new n(...r,c.join(`
`))}}const mR={major:4,minor:1,patch:12},dn=be("$ZodType",(e,n)=>{var r;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=mR;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const u of c._zod.onattach)u(e);if(i.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(d,m,x)=>{let g=ki(d),b;for(const v of m){if(v._zod.def.when){if(!v._zod.def.when(d))continue}else if(g)continue;const w=d.issues.length,S=v._zod.check(d);if(S instanceof Promise&&x?.async===!1)throw new Ri;if(b||S instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await S,d.issues.length!==w&&(g||(g=ki(d,w)))});else{if(d.issues.length===w)continue;g||(g=ki(d,w))}}return b?b.then(()=>d):d},u=(d,m,x)=>{if(ki(d))return d.aborted=!0,d;const g=c(m,i,x);if(g instanceof Promise){if(x.async===!1)throw new Ri;return g.then(b=>e._zod.parse(b,x))}return e._zod.parse(g,x)};e._zod.run=(d,m)=>{if(m.skipChecks)return e._zod.parse(d,m);if(m.direction==="backward"){const g=e._zod.parse({value:d.value,issues:[]},{...m,skipChecks:!0});return g instanceof Promise?g.then(b=>u(b,d,m)):u(g,d,m)}const x=e._zod.parse(d,m);if(x instanceof Promise){if(m.async===!1)throw new Ri;return x.then(g=>c(g,i,m))}return c(x,i,m)}}e["~standard"]={validate:c=>{try{const u=SA(e,c);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return EA(e,c).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),um=be("$ZodString",(e,n)=>{dn.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??eR(e._zod.bag),e._zod.parse=(r,i)=>{if(n.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ut=be("$ZodStringFormat",(e,n)=>{vu.init(e,n),um.init(e,n)}),pR=be("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=qA),Ut.init(e,n)}),gR=be("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=Eb(i))}else n.pattern??(n.pattern=Eb());Ut.init(e,n)}),xR=be("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=HA),Ut.init(e,n)}),bR=be("$ZodURL",(e,n)=>{Ut.init(e,n),e._zod.check=r=>{try{const i=r.value.trim(),c=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(c.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:GA.source,input:r.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:r.value,inst:e,continue:!n.abort})),n.normalize?r.value=c.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!n.abort})}}}),vR=be("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=ZA()),Ut.init(e,n)}),yR=be("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=$A),Ut.init(e,n)}),wR=be("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=MA),Ut.init(e,n)}),jR=be("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=zA),Ut.init(e,n)}),SR=be("$ZodULID",(e,n)=>{n.pattern??(n.pattern=OA),Ut.init(e,n)}),ER=be("$ZodXID",(e,n)=>{n.pattern??(n.pattern=LA),Ut.init(e,n)}),NR=be("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=UA),Ut.init(e,n)}),_R=be("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=JA(n)),Ut.init(e,n)}),CR=be("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=YA),Ut.init(e,n)}),kR=be("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=XA(n)),Ut.init(e,n)}),TR=be("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=BA),Ut.init(e,n)}),AR=be("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=VA),Ut.init(e,n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv4"})}),RR=be("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=PA),Ut.init(e,n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!n.abort})}}}),DR=be("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=QA),Ut.init(e,n)}),MR=be("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=IA),Ut.init(e,n),e._zod.check=r=>{const i=r.value.split("/");try{if(i.length!==2)throw new Error;const[c,u]=i;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${c}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!n.abort})}}});function iw(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const zR=be("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=WA),Ut.init(e,n),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{iw(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!n.abort})}});function OR(e){if(!sw.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=n.padEnd(Math.ceil(n.length/4)*4,"=");return iw(r)}const LR=be("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=sw),Ut.init(e,n),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{OR(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!n.abort})}}),UR=be("$ZodE164",(e,n)=>{n.pattern??(n.pattern=KA),Ut.init(e,n)});function $R(e,n=null){try{const r=e.split(".");if(r.length!==3)return!1;const[i]=r;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||n&&(!("alg"in c)||c.alg!==n))}catch{return!1}}const BR=be("$ZodJWT",(e,n)=>{Ut.init(e,n),e._zod.check=r=>{$R(r.value,n.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!n.abort})}}),qR=be("$ZodUnknown",(e,n)=>{dn.init(e,n),e._zod.parse=r=>r}),HR=be("$ZodNever",(e,n)=>{dn.init(e,n),e._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Nb(e,n,r){e.issues.length&&n.issues.push(...tw(r,e.issues)),n.value[r]=e.value}const FR=be("$ZodArray",(e,n)=>{dn.init(e,n),e._zod.parse=(r,i)=>{const c=r.value;if(!Array.isArray(c))return r.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),r;r.value=Array(c.length);const u=[];for(let d=0;d<c.length;d++){const m=c[d],x=n.element._zod.run({value:m,issues:[]},i);x instanceof Promise?u.push(x.then(g=>Nb(g,r,d))):Nb(x,r,d)}return u.length?Promise.all(u).then(()=>r):r}});function Kc(e,n,r,i){e.issues.length&&n.issues.push(...tw(r,e.issues)),e.value===void 0?r in i&&(n.value[r]=void 0):n.value[r]=e.value}function lw(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const r=dA(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(r)}}function ow(e,n,r,i,c,u){const d=[],m=c.keySet,x=c.catchall._zod,g=x.def.type;for(const b of Object.keys(n)){if(m.has(b))continue;if(g==="never"){d.push(b);continue}const v=x.run({value:n[b],issues:[]},i);v instanceof Promise?e.push(v.then(w=>Kc(w,r,b,n))):Kc(v,r,b,n)}return d.length&&r.issues.push({code:"unrecognized_keys",keys:d,input:n,inst:u}),e.length?Promise.all(e).then(()=>r):r}const ZR=be("$ZodObject",(e,n)=>{if(dn.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const m=n.shape;Object.defineProperty(n,"shape",{get:()=>{const x={...m};return Object.defineProperty(n,"shape",{value:x}),x}})}const i=am(()=>lw(n));kt(e._zod,"propValues",()=>{const m=n.shape,x={};for(const g in m){const b=m[g]._zod;if(b.values){x[g]??(x[g]=new Set);for(const v of b.values)x[g].add(v)}}return x});const c=Gc,u=n.catchall;let d;e._zod.parse=(m,x)=>{d??(d=i.value);const g=m.value;if(!c(g))return m.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),m;m.value={};const b=[],v=d.shape;for(const w of d.keys){const N=v[w]._zod.run({value:g[w],issues:[]},x);N instanceof Promise?b.push(N.then(j=>Kc(j,m,w,g))):Kc(N,m,w,g)}return u?ow(b,g,m,x,i.value,e):b.length?Promise.all(b).then(()=>m):m}}),VR=be("$ZodObjectJIT",(e,n)=>{ZR.init(e,n);const r=e._zod.parse,i=am(()=>lw(n)),c=w=>{const S=new hR(["shape","payload","ctx"]),N=i.value,j=A=>{const L=Sb(A);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};S.write("const input = payload.value;");const C=Object.create(null);let k=0;for(const A of N.keys)C[A]=`key_${k++}`;S.write("const newResult = {};");for(const A of N.keys){const L=C[A],O=Sb(A);S.write(`const ${L} = ${j(A)};`),S.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        
        if (${L}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${L}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const _=S.compile();return(A,L)=>_(w,A,L)};let u;const d=Gc,m=!Xy.jitless,g=m&&cA.value,b=n.catchall;let v;e._zod.parse=(w,S)=>{v??(v=i.value);const N=w.value;return d(N)?m&&g&&S?.async===!1&&S.jitless!==!0?(u||(u=c(n.shape)),w=u(w,S),b?ow([],N,w,S,v,e):w):r(w,S):(w.issues.push({expected:"object",code:"invalid_type",input:N,inst:e}),w)}});function _b(e,n,r,i){for(const u of e)if(u.issues.length===0)return n.value=u.value,n;const c=e.filter(u=>!ki(u));return c.length===1?(n.value=c[0].value,c[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:r,errors:e.map(u=>u.issues.map(d=>Da(d,i,Ra())))}),n)}const PR=be("$ZodUnion",(e,n)=>{dn.init(e,n),kt(e._zod,"optin",()=>n.options.some(c=>c._zod.optin==="optional")?"optional":void 0),kt(e._zod,"optout",()=>n.options.some(c=>c._zod.optout==="optional")?"optional":void 0),kt(e._zod,"values",()=>{if(n.options.every(c=>c._zod.values))return new Set(n.options.flatMap(c=>Array.from(c._zod.values)))}),kt(e._zod,"pattern",()=>{if(n.options.every(c=>c._zod.pattern)){const c=n.options.map(u=>u._zod.pattern);return new RegExp(`^(${c.map(u=>lm(u.source)).join("|")})$`)}});const r=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(c,u)=>{if(r)return i(c,u);let d=!1;const m=[];for(const x of n.options){const g=x._zod.run({value:c.value,issues:[]},u);if(g instanceof Promise)m.push(g),d=!0;else{if(g.issues.length===0)return g;m.push(g)}}return d?Promise.all(m).then(x=>_b(x,c,e,u)):_b(m,c,e,u)}}),QR=be("$ZodIntersection",(e,n)=>{dn.init(e,n),e._zod.parse=(r,i)=>{const c=r.value,u=n.left._zod.run({value:c,issues:[]},i),d=n.right._zod.run({value:c,issues:[]},i);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([x,g])=>Cb(r,x,g)):Cb(r,u,d)}});function xh(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Yl(e)&&Yl(n)){const r=Object.keys(n),i=Object.keys(e).filter(u=>r.indexOf(u)!==-1),c={...e,...n};for(const u of i){const d=xh(e[u],n[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};c[u]=d.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let i=0;i<e.length;i++){const c=e[i],u=n[i],d=xh(c,u);if(!d.valid)return{valid:!1,mergeErrorPath:[i,...d.mergeErrorPath]};r.push(d.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Cb(e,n,r){if(n.issues.length&&e.issues.push(...n.issues),r.issues.length&&e.issues.push(...r.issues),ki(e))return e;const i=xh(n.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const IR=be("$ZodEnum",(e,n)=>{dn.init(e,n);const r=oA(n.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=new RegExp(`^(${r.filter(c=>uA.has(typeof c)).map(c=>typeof c=="string"?hu(c):c.toString()).join("|")})$`),e._zod.parse=(c,u)=>{const d=c.value;return i.has(d)||c.issues.push({code:"invalid_value",values:r,input:d,inst:e}),c}}),WR=be("$ZodTransform",(e,n)=>{dn.init(e,n),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Yy(e.constructor.name);const c=n.transform(r.value,r);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(d=>(r.value=d,r));if(c instanceof Promise)throw new Ri;return r.value=c,r}});function kb(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const GR=be("$ZodOptional",(e,n)=>{dn.init(e,n),e._zod.optin="optional",e._zod.optout="optional",kt(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),kt(e._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${lm(r.source)})?$`):void 0}),e._zod.parse=(r,i)=>{if(n.innerType._zod.optin==="optional"){const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>kb(u,r.value)):kb(c,r.value)}return r.value===void 0?r:n.innerType._zod.run(r,i)}}),KR=be("$ZodNullable",(e,n)=>{dn.init(e,n),kt(e._zod,"optin",()=>n.innerType._zod.optin),kt(e._zod,"optout",()=>n.innerType._zod.optout),kt(e._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${lm(r.source)}|null)$`):void 0}),kt(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(r,i)=>r.value===null?r:n.innerType._zod.run(r,i)}),YR=be("$ZodDefault",(e,n)=>{dn.init(e,n),e._zod.optin="optional",kt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);if(r.value===void 0)return r.value=n.defaultValue,r;const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>Tb(u,n)):Tb(c,n)}});function Tb(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const XR=be("$ZodPrefault",(e,n)=>{dn.init(e,n),e._zod.optin="optional",kt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=n.defaultValue),n.innerType._zod.run(r,i))}),JR=be("$ZodNonOptional",(e,n)=>{dn.init(e,n),kt(e._zod,"values",()=>{const r=n.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),e._zod.parse=(r,i)=>{const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>Ab(u,e)):Ab(c,e)}});function Ab(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const eD=be("$ZodCatch",(e,n)=>{dn.init(e,n),kt(e._zod,"optin",()=>n.innerType._zod.optin),kt(e._zod,"optout",()=>n.innerType._zod.optout),kt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>(r.value=u.value,u.issues.length&&(r.value=n.catchValue({...r,error:{issues:u.issues.map(d=>Da(d,i,Ra()))},input:r.value}),r.issues=[]),r)):(r.value=c.value,c.issues.length&&(r.value=n.catchValue({...r,error:{issues:c.issues.map(u=>Da(u,i,Ra()))},input:r.value}),r.issues=[]),r)}}),tD=be("$ZodPipe",(e,n)=>{dn.init(e,n),kt(e._zod,"values",()=>n.in._zod.values),kt(e._zod,"optin",()=>n.in._zod.optin),kt(e._zod,"optout",()=>n.out._zod.optout),kt(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(r,i)=>{if(i.direction==="backward"){const u=n.out._zod.run(r,i);return u instanceof Promise?u.then(d=>Rc(d,n.in,i)):Rc(u,n.in,i)}const c=n.in._zod.run(r,i);return c instanceof Promise?c.then(u=>Rc(u,n.out,i)):Rc(c,n.out,i)}});function Rc(e,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},r)}const nD=be("$ZodReadonly",(e,n)=>{dn.init(e,n),kt(e._zod,"propValues",()=>n.innerType._zod.propValues),kt(e._zod,"values",()=>n.innerType._zod.values),kt(e._zod,"optin",()=>n.innerType._zod.optin),kt(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(Rb):Rb(c)}});function Rb(e){return e.value=Object.freeze(e.value),e}const sD=be("$ZodCustom",(e,n)=>{Ys.init(e,n),dn.init(e,n),e._zod.parse=(r,i)=>r,e._zod.check=r=>{const i=r.value,c=n.fn(i);if(c instanceof Promise)return c.then(u=>Db(u,r,i,e));Db(c,r,i,e)}});function Db(e,n,r,i){if(!e){const c={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),n.issues.push(Xl(c))}}class rD{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...r){const i=r[0];if(this._map.set(n,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,n)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const r=this._map.get(n);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(n),this}get(n){const r=n._zod.parent;if(r){const i={...this.get(r)??{}};delete i.id;const c={...i,...this._map.get(n)};return Object.keys(c).length?c:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function aD(){return new rD}const Dc=aD();function iD(e,n){return new e({type:"string",...Ve(n)})}function lD(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ve(n)})}function Mb(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ve(n)})}function oD(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ve(n)})}function cD(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ve(n)})}function uD(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ve(n)})}function dD(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ve(n)})}function fD(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ve(n)})}function hD(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ve(n)})}function mD(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ve(n)})}function pD(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ve(n)})}function gD(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ve(n)})}function xD(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ve(n)})}function bD(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ve(n)})}function vD(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ve(n)})}function yD(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ve(n)})}function wD(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ve(n)})}function jD(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ve(n)})}function SD(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ve(n)})}function ED(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ve(n)})}function ND(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ve(n)})}function _D(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ve(n)})}function CD(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ve(n)})}function kD(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ve(n)})}function TD(e,n){return new e({type:"string",format:"date",check:"string_format",...Ve(n)})}function AD(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ve(n)})}function RD(e,n){return new e({type:"string",format:"duration",check:"string_format",...Ve(n)})}function DD(e){return new e({type:"unknown"})}function MD(e,n){return new e({type:"never",...Ve(n)})}function cw(e,n){return new sR({check:"max_length",...Ve(n),maximum:e})}function Yc(e,n){return new rR({check:"min_length",...Ve(n),minimum:e})}function uw(e,n){return new aR({check:"length_equals",...Ve(n),length:e})}function zD(e,n){return new iR({check:"string_format",format:"regex",...Ve(n),pattern:e})}function OD(e){return new lR({check:"string_format",format:"lowercase",...Ve(e)})}function LD(e){return new oR({check:"string_format",format:"uppercase",...Ve(e)})}function UD(e,n){return new cR({check:"string_format",format:"includes",...Ve(n),includes:e})}function $D(e,n){return new uR({check:"string_format",format:"starts_with",...Ve(n),prefix:e})}function BD(e,n){return new dR({check:"string_format",format:"ends_with",...Ve(n),suffix:e})}function uo(e){return new fR({check:"overwrite",tx:e})}function qD(e){return uo(n=>n.normalize(e))}function HD(){return uo(e=>e.trim())}function FD(){return uo(e=>e.toLowerCase())}function ZD(){return uo(e=>e.toUpperCase())}function VD(e,n,r){return new e({type:"array",element:n,...Ve(r)})}function PD(e,n,r){return new e({type:"custom",check:"custom",fn:n,...Ve(r)})}function QD(e){const n=ID(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(Xl(i,r.value,n._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=r.value),c.inst??(c.inst=n),c.continue??(c.continue=!n._zod.def.abort),r.issues.push(Xl(c))}},e(r.value,r)));return n}function ID(e,n){const r=new Ys({check:"custom",...Ve(n)});return r._zod.check=e,r}const WD=be("ZodISODateTime",(e,n)=>{_R.init(e,n),Bt.init(e,n)});function GD(e){return kD(WD,e)}const KD=be("ZodISODate",(e,n)=>{CR.init(e,n),Bt.init(e,n)});function YD(e){return TD(KD,e)}const XD=be("ZodISOTime",(e,n)=>{kR.init(e,n),Bt.init(e,n)});function JD(e){return AD(XD,e)}const e4=be("ZodISODuration",(e,n)=>{TR.init(e,n),Bt.init(e,n)});function t4(e){return RD(e4,e)}const n4=(e,n)=>{cm.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>yA(e,r)},flatten:{value:r=>vA(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,gh,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,gh,2)}},isEmpty:{get(){return e.issues.length===0}}})},ys=be("ZodError",n4,{Parent:Error}),s4=pu(ys),r4=gu(ys),a4=xu(ys),i4=bu(ys),l4=NA(ys),o4=_A(ys),c4=CA(ys),u4=kA(ys),d4=TA(ys),f4=AA(ys),h4=RA(ys),m4=DA(ys),bn=be("ZodType",(e,n)=>(dn.init(e,n),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...r)=>e.clone(za(n,{checks:[...n.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(r,i)=>ea(e,r,i),e.brand=()=>e,e.register=((r,i)=>(r.add(e,i),e)),e.parse=(r,i)=>s4(e,r,i,{callee:e.parse}),e.safeParse=(r,i)=>a4(e,r,i),e.parseAsync=async(r,i)=>r4(e,r,i,{callee:e.parseAsync}),e.safeParseAsync=async(r,i)=>i4(e,r,i),e.spa=e.safeParseAsync,e.encode=(r,i)=>l4(e,r,i),e.decode=(r,i)=>o4(e,r,i),e.encodeAsync=async(r,i)=>c4(e,r,i),e.decodeAsync=async(r,i)=>u4(e,r,i),e.safeEncode=(r,i)=>d4(e,r,i),e.safeDecode=(r,i)=>f4(e,r,i),e.safeEncodeAsync=async(r,i)=>h4(e,r,i),e.safeDecodeAsync=async(r,i)=>m4(e,r,i),e.refine=(r,i)=>e.check(rM(r,i)),e.superRefine=r=>e.check(aM(r)),e.overwrite=r=>e.check(uo(r)),e.optional=()=>Lb(e),e.nullable=()=>Ub(e),e.nullish=()=>Lb(Ub(e)),e.nonoptional=r=>Y4(e,r),e.array=()=>U4(e),e.or=r=>q4([e,r]),e.and=r=>F4(e,r),e.transform=r=>$b(e,P4(r)),e.default=r=>W4(e,r),e.prefault=r=>K4(e,r),e.catch=r=>J4(e,r),e.pipe=r=>$b(e,r),e.readonly=()=>nM(e),e.describe=r=>{const i=e.clone();return Dc.add(i,{description:r}),i},Object.defineProperty(e,"description",{get(){return Dc.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Dc.get(e);const i=e.clone();return Dc.add(i,r[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),dw=be("_ZodString",(e,n)=>{um.init(e,n),bn.init(e,n);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...i)=>e.check(zD(...i)),e.includes=(...i)=>e.check(UD(...i)),e.startsWith=(...i)=>e.check($D(...i)),e.endsWith=(...i)=>e.check(BD(...i)),e.min=(...i)=>e.check(Yc(...i)),e.max=(...i)=>e.check(cw(...i)),e.length=(...i)=>e.check(uw(...i)),e.nonempty=(...i)=>e.check(Yc(1,...i)),e.lowercase=i=>e.check(OD(i)),e.uppercase=i=>e.check(LD(i)),e.trim=()=>e.check(HD()),e.normalize=(...i)=>e.check(qD(...i)),e.toLowerCase=()=>e.check(FD()),e.toUpperCase=()=>e.check(ZD())}),p4=be("ZodString",(e,n)=>{um.init(e,n),dw.init(e,n),e.email=r=>e.check(lD(g4,r)),e.url=r=>e.check(fD(x4,r)),e.jwt=r=>e.check(CD(D4,r)),e.emoji=r=>e.check(hD(b4,r)),e.guid=r=>e.check(Mb(zb,r)),e.uuid=r=>e.check(oD(Mc,r)),e.uuidv4=r=>e.check(cD(Mc,r)),e.uuidv6=r=>e.check(uD(Mc,r)),e.uuidv7=r=>e.check(dD(Mc,r)),e.nanoid=r=>e.check(mD(v4,r)),e.guid=r=>e.check(Mb(zb,r)),e.cuid=r=>e.check(pD(y4,r)),e.cuid2=r=>e.check(gD(w4,r)),e.ulid=r=>e.check(xD(j4,r)),e.base64=r=>e.check(ED(T4,r)),e.base64url=r=>e.check(ND(A4,r)),e.xid=r=>e.check(bD(S4,r)),e.ksuid=r=>e.check(vD(E4,r)),e.ipv4=r=>e.check(yD(N4,r)),e.ipv6=r=>e.check(wD(_4,r)),e.cidrv4=r=>e.check(jD(C4,r)),e.cidrv6=r=>e.check(SD(k4,r)),e.e164=r=>e.check(_D(R4,r)),e.datetime=r=>e.check(GD(r)),e.date=r=>e.check(YD(r)),e.time=r=>e.check(JD(r)),e.duration=r=>e.check(t4(r))});function Ds(e){return iD(p4,e)}const Bt=be("ZodStringFormat",(e,n)=>{Ut.init(e,n),dw.init(e,n)}),g4=be("ZodEmail",(e,n)=>{xR.init(e,n),Bt.init(e,n)}),zb=be("ZodGUID",(e,n)=>{pR.init(e,n),Bt.init(e,n)}),Mc=be("ZodUUID",(e,n)=>{gR.init(e,n),Bt.init(e,n)}),x4=be("ZodURL",(e,n)=>{bR.init(e,n),Bt.init(e,n)}),b4=be("ZodEmoji",(e,n)=>{vR.init(e,n),Bt.init(e,n)}),v4=be("ZodNanoID",(e,n)=>{yR.init(e,n),Bt.init(e,n)}),y4=be("ZodCUID",(e,n)=>{wR.init(e,n),Bt.init(e,n)}),w4=be("ZodCUID2",(e,n)=>{jR.init(e,n),Bt.init(e,n)}),j4=be("ZodULID",(e,n)=>{SR.init(e,n),Bt.init(e,n)}),S4=be("ZodXID",(e,n)=>{ER.init(e,n),Bt.init(e,n)}),E4=be("ZodKSUID",(e,n)=>{NR.init(e,n),Bt.init(e,n)}),N4=be("ZodIPv4",(e,n)=>{AR.init(e,n),Bt.init(e,n)}),_4=be("ZodIPv6",(e,n)=>{RR.init(e,n),Bt.init(e,n)}),C4=be("ZodCIDRv4",(e,n)=>{DR.init(e,n),Bt.init(e,n)}),k4=be("ZodCIDRv6",(e,n)=>{MR.init(e,n),Bt.init(e,n)}),T4=be("ZodBase64",(e,n)=>{zR.init(e,n),Bt.init(e,n)}),A4=be("ZodBase64URL",(e,n)=>{LR.init(e,n),Bt.init(e,n)}),R4=be("ZodE164",(e,n)=>{UR.init(e,n),Bt.init(e,n)}),D4=be("ZodJWT",(e,n)=>{BR.init(e,n),Bt.init(e,n)}),M4=be("ZodUnknown",(e,n)=>{qR.init(e,n),bn.init(e,n)});function Ob(){return DD(M4)}const z4=be("ZodNever",(e,n)=>{HR.init(e,n),bn.init(e,n)});function O4(e){return MD(z4,e)}const L4=be("ZodArray",(e,n)=>{FR.init(e,n),bn.init(e,n),e.element=n.element,e.min=(r,i)=>e.check(Yc(r,i)),e.nonempty=r=>e.check(Yc(1,r)),e.max=(r,i)=>e.check(cw(r,i)),e.length=(r,i)=>e.check(uw(r,i)),e.unwrap=()=>e.element});function U4(e,n){return VD(L4,e,n)}const $4=be("ZodObject",(e,n)=>{VR.init(e,n),bn.init(e,n),kt(e,"shape",()=>n.shape),e.keyof=()=>Z4(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ob()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ob()}),e.strict=()=>e.clone({...e._zod.def,catchall:O4()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>mA(e,r),e.safeExtend=r=>pA(e,r),e.merge=r=>gA(e,r),e.pick=r=>fA(e,r),e.omit=r=>hA(e,r),e.partial=(...r)=>xA(fw,e,r[0]),e.required=(...r)=>bA(hw,e,r[0])});function yu(e,n){const r={type:"object",shape:e??{},...Ve(n)};return new $4(r)}const B4=be("ZodUnion",(e,n)=>{PR.init(e,n),bn.init(e,n),e.options=n.options});function q4(e,n){return new B4({type:"union",options:e,...Ve(n)})}const H4=be("ZodIntersection",(e,n)=>{QR.init(e,n),bn.init(e,n)});function F4(e,n){return new H4({type:"intersection",left:e,right:n})}const bh=be("ZodEnum",(e,n)=>{IR.init(e,n),bn.init(e,n),e.enum=n.entries,e.options=Object.values(n.entries);const r=new Set(Object.keys(n.entries));e.extract=(i,c)=>{const u={};for(const d of i)if(r.has(d))u[d]=n.entries[d];else throw new Error(`Key ${d} not found in enum`);return new bh({...n,checks:[],...Ve(c),entries:u})},e.exclude=(i,c)=>{const u={...n.entries};for(const d of i)if(r.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new bh({...n,checks:[],...Ve(c),entries:u})}});function Z4(e,n){const r=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new bh({type:"enum",entries:r,...Ve(n)})}const V4=be("ZodTransform",(e,n)=>{WR.init(e,n),bn.init(e,n),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Yy(e.constructor.name);r.addIssue=u=>{if(typeof u=="string")r.issues.push(Xl(u,r.value,n));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=r.value),d.inst??(d.inst=e),r.issues.push(Xl(d))}};const c=n.transform(r.value,r);return c instanceof Promise?c.then(u=>(r.value=u,r)):(r.value=c,r)}});function P4(e){return new V4({type:"transform",transform:e})}const fw=be("ZodOptional",(e,n)=>{GR.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Lb(e){return new fw({type:"optional",innerType:e})}const Q4=be("ZodNullable",(e,n)=>{KR.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Ub(e){return new Q4({type:"nullable",innerType:e})}const I4=be("ZodDefault",(e,n)=>{YR.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function W4(e,n){return new I4({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():ew(n)}})}const G4=be("ZodPrefault",(e,n)=>{XR.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function K4(e,n){return new G4({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():ew(n)}})}const hw=be("ZodNonOptional",(e,n)=>{JR.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Y4(e,n){return new hw({type:"nonoptional",innerType:e,...Ve(n)})}const X4=be("ZodCatch",(e,n)=>{eD.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function J4(e,n){return new X4({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const eM=be("ZodPipe",(e,n)=>{tD.init(e,n),bn.init(e,n),e.in=n.in,e.out=n.out});function $b(e,n){return new eM({type:"pipe",in:e,out:n})}const tM=be("ZodReadonly",(e,n)=>{nD.init(e,n),bn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function nM(e){return new tM({type:"readonly",innerType:e})}const sM=be("ZodCustom",(e,n)=>{sD.init(e,n),bn.init(e,n)});function rM(e,n={}){return PD(sM,e,n)}function aM(e){return QD(e)}const Bb=(e,n,r)=>{if(e&&"reportValidity"in e){const i=Re(r,n);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},vh=(e,n)=>{for(const r in n.fields){const i=n.fields[r];i&&i.ref&&"reportValidity"in i.ref?Bb(i.ref,r,e):i&&i.refs&&i.refs.forEach(c=>Bb(c,r,e))}},qb=(e,n)=>{n.shouldUseNativeValidation&&vh(e,n);const r={};for(const i in e){const c=Re(n.fields,i),u=Object.assign(e[i]||{},{ref:c&&c.ref});if(iM(n.names||Object.keys(e),i)){const d=Object.assign({},Re(r,i));St(d,"root",u),St(r,i,d)}else St(r,i,u)}return r},iM=(e,n)=>{const r=Hb(n);return e.some(i=>Hb(i).match(`^${r}\\.\\d+`))};function Hb(e){return e.replace(/\]|\[/g,"")}function Fb(e,n){try{var r=e()}catch(i){return n(i)}return r&&r.then?r.then(void 0,n):r}function lM(e,n){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,d=i.path.join(".");if(!r[d])if("unionErrors"in i){var m=i.unionErrors[0].errors[0];r[d]={message:m.message,type:m.code}}else r[d]={message:u,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(b){return b.errors.forEach(function(v){return e.push(v)})}),n){var x=r[d].types,g=x&&x[i.code];r[d]=nm(d,n,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function oM(e,n){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,d=i.path.join(".");if(!r[d])if(i.code==="invalid_union"&&i.errors.length>0){var m=i.errors[0][0];r[d]={message:m.message,type:m.code}}else r[d]={message:u,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(b){return b.forEach(function(v){return e.push(v)})}),n){var x=r[d].types,g=x&&x[i.code];r[d]=nm(d,n,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function mw(e,n,r){if(r===void 0&&(r={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,u){try{return Promise.resolve(Fb(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,n)).then(function(d){return u.shouldUseNativeValidation&&vh({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(m){return Array.isArray(m?.issues)})(d))return{values:{},errors:qb(lM(d.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,u){try{return Promise.resolve(Fb(function(){return Promise.resolve((r.mode==="sync"?wA:jA)(e,i,n)).then(function(d){return u.shouldUseNativeValidation&&vh({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(m){return m instanceof cm})(d))return{values:{},errors:qb(oM(d.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};throw new Error("Invalid input: not a Zod schema")}function cM(e){const n=dt();return sn({mutationFn:r=>WS(e,r),onSuccess:r=>{n.setQueryData(Zt.list(Ev),i=>i&&{...i,items:i.items.map(c=>c.id===r.id?r:c)}),n.invalidateQueries({queryKey:Zt.detail(e),exact:!1})}})}function pw({when:e,title:n="Discard unsaved changes?",description:r="You have unsaved changes. If you leave now, your edits will be lost.",confirmLabel:i="Leave without saving",cancelLabel:c="Stay on page"}){const u=Vt(),[d,m]=p.useState(null),[x,g]=p.useState(!1),b=p.useRef(!1);p.useEffect(()=>{if(!e){g(!1),m(null);return}const S=N=>{N.preventDefault(),N.returnValue=""};return window.addEventListener("beforeunload",S),()=>window.removeEventListener("beforeunload",S)},[e]),Qb(S=>e?b.current?(b.current=!1,!0):(m(S),g(!0),!1):!0,e);const v=()=>{if(!d)return;b.current=!0;const S=d.kind==="replace"||d.kind==="pop";u(d.to,{replace:S}),g(!1),m(null),setTimeout(()=>{b.current=!1},0)},w=()=>{g(!1),m(null)};return l.jsx(uu,{open:x&&e,title:n,description:r,confirmLabel:i,cancelLabel:c,tone:"danger",onConfirm:v,onCancel:w})}pw.displayName="UnsavedChangesPrompt";function uM({isDirty:e,isSaving:n,onCancel:r,onSave:i,saveLabel:c="Save changes",cancelLabel:u="Discard",children:d}){return!e&&!d?null:l.jsx("div",{className:"sticky bottom-0 left-0 right-0 mt-4 rounded-b-2xl border border-t bg-white/95 p-4 shadow-[0_-8px_20px_-12px_rgba(15,23,42,0.25)] backdrop-blur",children:l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsx("div",{className:"text-sm text-slate-600",children:d}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r?l.jsx(Ce,{type:"button",variant:"ghost",onClick:r,disabled:n||!e,children:u}):null,l.jsx(Ce,{type:"button",onClick:i,isLoading:n,disabled:!e||n,children:c})]})]})})}const dM=yu({name:Ds().min(1,"Workspace name is required.").max(255,"Keep the name under 255 characters."),slug:Ds().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.")});function fM(){const{workspace:e}=xr(),n=cM(e.id),r=Nv(),[i,c]=p.useState(null),{register:u,handleSubmit:d,formState:{errors:m,isDirty:x},reset:g}=Ky({resolver:mw(dM),defaultValues:{name:e.name,slug:e.slug}});p.useEffect(()=>{g({name:e.name,slug:e.slug})},[g,e.name,e.slug]);const b=d(S=>{c(null),n.mutate({name:S.name.trim(),slug:S.slug.trim()},{onSuccess:()=>{c({tone:"success",message:"Workspace details saved."})},onError:N=>{const j=N instanceof Error?N.message:"Unable to save workspace details.";c({tone:"danger",message:j})}})}),v=e.is_default,w=r.isPending;return l.jsxs("div",{className:"space-y-6",children:[l.jsx(pw,{when:x&&!n.isPending}),l.jsx(du,{title:"General",description:"Manage the workspace identity and your default workspace preference."}),i?l.jsx(rt,{tone:i.tone,children:i.message}):null,l.jsxs("form",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-soft",onSubmit:b,noValidate:!0,children:[l.jsxs("div",{className:"space-y-6 p-6",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Workspace identity"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Update the name and slug. Changes apply immediately across navigation and shared links."})]}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsx(mt,{label:"Workspace name",required:!0,error:m.name?.message,children:l.jsx(vt,{...u("name"),placeholder:"Finance Operations",invalid:!!m.name,disabled:n.isPending})}),l.jsx(mt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier.",required:!0,error:m.slug?.message,children:l.jsx(vt,{...u("slug"),placeholder:"finance-ops",invalid:!!m.slug,disabled:n.isPending})})]}),n.isError?l.jsx(rt,{tone:"danger",children:n.error instanceof Error?n.error.message:"Unable to save workspace details."}):null]}),l.jsx(uM,{isDirty:x,isSaving:n.isPending,onCancel:()=>{g(),c(null)},onSave:b,children:"Changes apply to everyone who can access this workspace."})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Default workspace"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Choose the workspace you land on first after signing in. This only affects your account."})]}),l.jsx(Ce,{type:"button",variant:v?"secondary":"primary",onClick:()=>{c(null),r.mutate(e.id,{onSuccess:()=>c({tone:"success",message:"Workspace set as your default."}),onError:S=>{const N=S instanceof Error?S.message:"Unable to set the default workspace right now.";c({tone:"danger",message:N})}})},disabled:v||w,isLoading:w,children:v?"Default workspace":"Make default"})]}),l.jsx("p",{className:"mt-3 text-sm text-slate-600",children:v?"This workspace is already your default.":"You can switch the default workspace at any time."})]})]})}async function hM(e={}){const{page:n,pageSize:r,search:i,includeTotal:c,signal:u}=e,d={};typeof n=="number"&&n>0&&(d.page=n),typeof r=="number"&&r>0&&(d.page_size=r),c&&(d.include_total=!0);const m=i?.trim();m&&(d.q=m);const{data:x}=await He.GET("/api/v1/users",{params:{query:d},signal:u});if(!x)throw new Error("Expected user page payload.");return x}function gw(e={}){const{enabled:n=!0,search:r="",pageSize:i}=e,c=r.trim(),u=c.length>=2?c:"",d=_h({queryKey:["users","all",{search:c,pageSize:i}],initialPageParam:1,queryFn:({pageParam:g,signal:b})=>hM(mM({page:typeof g=="number"?g:1,pageSize:i,search:u||void 0,signal:b})),getNextPageParam:g=>g.has_next?g.page+1:void 0,enabled:n,staleTime:6e4}),m=p.useCallback(g=>g.id,[]),x=Dh(d.data?.pages,m);return{...d,users:x}}function mM(e){const n=!e.page||e.page<1?1:e.page;return{...e,page:n}}function dm({open:e,title:n,description:r,onClose:i,children:c,footer:u,widthClassName:d="w-full max-w-xl"}){const m=p.useRef(null);return p.useEffect(()=>{if(!e)return;const x=b=>{if(b.key==="Escape"&&i(),b.key==="Tab"){const v=m.current;if(!v)return;const w=Array.from(v.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(j=>!j.hasAttribute("disabled"));if(w.length===0)return;const S=w.indexOf(document.activeElement),N=b.shiftKey?S<=0?w.length-1:S-1:S===w.length-1?0:S+1;w[N]?.focus(),b.preventDefault()}};return window.addEventListener("keydown",x),m.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",x)},[i,e]),e?vs.createPortal(l.jsx("div",{className:"fixed inset-0 z-40 flex items-start justify-end bg-slate-900/50",onClick:i,role:"presentation",children:l.jsxs("div",{ref:m,role:"dialog","aria-modal":"true","aria-label":n,className:he("flex h-full flex-col bg-white shadow-2xl transition",d),onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"flex items-start justify-between gap-4 border-b border-slate-200 px-5 py-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Details"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:n}),r?l.jsx("p",{className:"text-sm text-slate-600",children:r}):null]}),l.jsx("button",{type:"button",onClick:i,className:"rounded-full border border-slate-200 bg-white p-2 text-slate-500 transition hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2","aria-label":"Close drawer",children:l.jsx(pM,{})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:c}),u?l.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:u}):null]})}),document.body):null}function pM(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}const yh=so,wu={page:1,pageSize:yh,includeTotal:!0};function gM(e){const n=_h({queryKey:Zt.members(e,wu),initialPageParam:1,queryFn:({pageParam:u,signal:d})=>KS(e,{page:typeof u=="number"?u:1,pageSize:yh,includeTotal:u===1,signal:d}),getNextPageParam:u=>u.has_next?u.page+1:void 0,enabled:e.length>0,staleTime:15e3,placeholderData:u=>u}),r=n.data?.pages??[],i=Dh(r,u=>u.user_id),c=r[0]?.total??r[r.length-1]?.total??void 0;return{...n,members:i,total:c,pageSize:yh}}function xM(e){const n=dt(),r=Zt.members(e,wu);return sn({mutationFn:async({user:i,roleIds:c})=>{const u={user_id:i.id,role_ids:Array.from(c)};return YS(e,u)},onSuccess:()=>{n.invalidateQueries({queryKey:r})}})}function bM(e){const n=dt(),r=Zt.members(e,wu);return sn({mutationFn:({userId:i,roleIds:c})=>XS(e,i,{role_ids:Array.from(c)}),onSuccess:()=>{n.invalidateQueries({queryKey:r})}})}function vM(e){const n=dt(),r=Zt.members(e,wu);return sn({mutationFn:i=>JS(e,i),onSuccess:()=>{n.invalidateQueries({queryKey:r})}})}const fm=so,yM=so,ju={page:1,pageSize:fm,includeTotal:!0},wM={scope:"workspace",page:1,pageSize:yM,includeTotal:!1};function xw(e){return _n({queryKey:Zt.roles(e,ju),queryFn:({signal:n})=>vv(r=>eE({page:r,pageSize:fm,includeTotal:r===1,signal:n})),enabled:e.length>0,staleTime:15e3,placeholderData:n=>n})}function jM(e="workspace"){const n={...wM,scope:e};return _n({queryKey:Zt.permissions(n),queryFn:({signal:r})=>vv(i=>rE({scope:e,page:i,pageSize:n.pageSize,includeTotal:i===1,signal:r})),staleTime:6e4,placeholderData:r=>r})}function SM(e){const n=dt(),r=Zt.roles(e,ju);return sn({mutationFn:i=>tE(e,i),onSuccess:i=>{n.setQueryData(r,c=>_M(c,i))},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function EM(e){const n=dt(),r=Zt.roles(e,ju);return sn({mutationFn:({roleId:i,payload:c})=>nE(e,i,c),onSuccess:i=>{n.setQueryData(r,c=>c&&{...c,items:c.items.map(u=>u.id===i.id?i:u)})},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function NM(e){const n=dt(),r=Zt.roles(e,ju);return sn({mutationFn:i=>sE(e,i),onSuccess:(i,c)=>{n.setQueryData(r,u=>{if(!u)return u;const d=u.items.filter(m=>m.id!==c);return{...u,items:d,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}})},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function _M(e,n){return e?{...e,items:[n,...e.items],total:typeof e.total=="number"?e.total+1:e.total,has_next:!1,has_previous:!1}:{items:[n],page:1,page_size:fm,has_next:!1,has_previous:!1,total:1}}const CM={sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function kM(e,n){if(e&&e.trim().length>0){const r=e.trim().split(/\s+/u),i=r[0]?.[0],c=r[r.length-1]?.[0];if(i)return`${i}${c??""}`.toUpperCase()}return n&&n.trim().length>0?n.trim()[0]?.toUpperCase():"?"}function bw({name:e,email:n,size:r="md",className:i}){const c=p.useMemo(()=>kM(e,n),[e,n]);return l.jsx("span",{"aria-hidden":"true",className:he("inline-flex select-none items-center justify-center rounded-full bg-gradient-to-br from-brand-100 via-brand-200 to-brand-300 font-semibold text-brand-900 shadow-sm",CM[r],i),children:c})}function TM(){const{workspace:e,hasPermission:n}=xr(),{params:r}=Fy(),i=Vt(),c=Hn(),u=n("workspace.members.manage"),d=gM(e.id),m=xw(e.id),x=xM(e.id),g=bM(e.id),b=vM(e.id),[v,w]=p.useState(""),[S,N]=p.useState(null),j=p.useMemo(()=>{const ie=d.members,T=new Intl.Collator("en",{sensitivity:"base"});return[...ie].sort((W,le)=>{const Z=W.user?.display_name??W.user?.email??W.user_id,X=le.user?.display_name??le.user?.email??le.user_id;return T.compare(Z??"",X??"")})},[d.members]),C=p.useMemo(()=>new Set(j.map(ie=>ie.user_id)),[j]),k=d.total??j.length,_=v.trim().toLowerCase(),A=p.useMemo(()=>_?j.filter(ie=>{const T=ie.user?.display_name??"",W=ie.user?.email??"";return T.toLowerCase().includes(_)||W.toLowerCase().includes(_)||ie.user_id.toLowerCase().includes(_)}):j,[j,_]),L=!!d.hasNextPage,O=d.isLoading,J=d.isFetchingNextPage,U=p.useMemo(()=>{const ie=new Intl.Collator("en",{sensitivity:"base"});return(m.data?.items??[]).slice().sort((T,W)=>ie.compare(T.name,W.name))},[m.data]),ne=r[0],R=ne==="new",H=ne&&ne!=="new"?decodeURIComponent(ne):null,ae=j.find(ie=>ie.user_id===H),I=`/workspaces/${e.id}/settings/access/members`,F=`${c.search}${c.hash}`,ue=()=>i(`${I}${F}`,{replace:!0}),xe=()=>i(`${I}/new${F}`),M=ie=>i(`${I}/${encodeURIComponent(ie)}${F}`),G=async({user:ie,roleIds:T})=>{N(null),await x.mutateAsync({user:ie,roleIds:T}),N({tone:"success",message:`${ie.display_name??ie.email} added to the workspace.`}),ue()},Y=async(ie,T)=>{N(null),await g.mutateAsync({userId:ie,roleIds:T}),N({tone:"success",message:"Member roles updated."}),ue()},we=async ie=>{N(null),await b.mutateAsync(ie.user_id),N({tone:"success",message:"Member removed."}),ue()};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(du,{title:"Members",description:"Invite teammates, adjust their workspace roles, or remove their access.",actions:l.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:[k," member",k===1?"":"s"]})}),S?l.jsx(rt,{tone:S.tone,children:S.message}):null,d.isError?l.jsx(rt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace members."}):null,m.isError?l.jsx(rt,{tone:"warning",children:m.error instanceof Error?m.error.message:"Unable to load workspace roles."}):null,l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Workspace members"}),l.jsx("p",{className:"text-sm text-slate-500",children:O?"Loading members":`${k} member${k===1?"":"s"} total`})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx(mt,{label:"Search members",className:"w-full max-w-xs",children:l.jsx(vt,{value:v,onChange:ie=>w(ie.target.value),placeholder:"Search by name, email, or ID",disabled:O})}),u?l.jsx(Ce,{type:"button",onClick:xe,children:"Add member"}):null]})]}),O?l.jsx("p",{className:"text-sm text-slate-600",children:"Loading members"}):A.length===0?l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:v?`No members match "${v}".`:"No members yet. Add teammates to collaborate."}):l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Member"}),l.jsx("th",{className:"px-4 py-3",children:"Roles"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:A.map(ie=>{const T=ie.role_ids.map(le=>U.find(Z=>Z.id===le)?.name??le).sort((le,Z)=>le.localeCompare(Z)),W=ie.user?.display_name??ie.user?.email??ie.user_id;return l.jsxs("tr",{className:"text-sm text-slate-700",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(bw,{name:ie.user?.display_name,email:ie.user?.email,size:"sm"}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate font-semibold text-slate-900",children:W}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:ie.user?.email??ie.user_id})]})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:T.length===0?l.jsx("span",{className:"text-xs text-slate-500",children:"No roles assigned."}):T.map(le=>l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:le},`${ie.user_id}-${le}`))})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx(Ce,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(ie.user_id),disabled:!u,children:"Manage"})})]},ie.user_id)})})]})}),L?l.jsx("div",{className:"pt-4",children:l.jsx(Ce,{type:"button",variant:"ghost",onClick:()=>d.fetchNextPage(),disabled:J,children:J?"Loading more members":"Load more members"})}):null,u?null:l.jsx(rt,{tone:"info",children:"You do not have permission to manage workspace members."})]}),l.jsx(AM,{open:R&&u,onClose:ue,availableRoles:U,memberIds:C,isSubmitting:x.isPending,onInvite:G}),l.jsx(RM,{open:!!H&&u,member:ae,availableRoles:U,onClose:ue,onSaveRoles:ie=>Y(H??"",ie),onRemove:()=>ae?we(ae):Promise.resolve(),isSaving:g.isPending,isRemoving:b.isPending})]})}function AM({open:e,onClose:n,availableRoles:r,memberIds:i,isSubmitting:c,onInvite:u}){const[d,m]=p.useState(""),[x,g]=p.useState([]),[b,v]=p.useState(""),[w,S]=p.useState(""),[N,j]=p.useState(null);p.useEffect(()=>{const U=window.setTimeout(()=>S(b.trim()),250);return()=>window.clearTimeout(U)},[b]),p.useEffect(()=>{e||(m(""),g([]),v(""),j(null))},[e]);const C=gw({enabled:e,search:w,pageSize:50}),k=p.useMemo(()=>{const U=new Intl.Collator("en",{sensitivity:"base"});return C.users.filter(ne=>!i.has(ne.id)).sort((ne,R)=>{const H=ne.display_name??ne.email,ae=R.display_name??R.email;return U.compare(H??"",ae??"")})},[i,C.users]),_=p.useMemo(()=>k.find(U=>U.id===d),[k,d]),A=!!d&&x.length>0&&!c,L=b.trim().length>0&&b.trim().length<2,O=C.isPending&&C.users.length===0,J=async U=>{U.preventDefault(),j(null);const ne=k.find(R=>R.id===d);if(!ne){j("Select a user to add.");return}if(x.length===0){j("Select at least one role for this member.");return}try{await u({user:ne,roleIds:x}),m(""),v(""),g([])}catch(R){const H=R instanceof Error?R.message:"Unable to add member.";j(H)}};return l.jsx(dm,{open:e,onClose:n,title:"Add member",description:"Invite an existing teammate and choose their workspace roles.",children:l.jsxs("form",{className:"space-y-4",onSubmit:J,children:[N?l.jsx(rt,{tone:"danger",children:N}):null,C.isError?l.jsx(rt,{tone:"warning",children:C.error instanceof Error?C.error.message:"Unable to load the user directory."}):null,l.jsxs(mt,{label:"Search directory",hint:"Enter at least two characters to search by name or email.",children:[l.jsx(vt,{value:b,onChange:U=>v(U.target.value),placeholder:"Search users",disabled:c||O}),L?l.jsx("p",{className:"text-xs text-slate-500",children:"Enter at least two characters to search the full directory."}):null]}),l.jsxs(mt,{label:"User",required:!0,children:[l.jsxs(Aa,{value:d,onChange:U=>{m(U.target.value),U.target.value&&v("")},disabled:c||O,required:!0,children:[l.jsx("option",{value:"",children:"Select a user"}),_&&!k.some(U=>U.id===_.id)?l.jsx("option",{value:_.id,children:_.display_name?`${_.display_name} (${_.email})`:_.email}):null,k.map(U=>l.jsx("option",{value:U.id,children:U.display_name?`${U.display_name} (${U.email})`:U.email},U.id))]}),k.length===0&&b?l.jsxs("p",{className:"text-xs text-slate-500",children:['No users matched "',b,'".']}):null]}),l.jsxs("fieldset",{className:"space-y-2",children:[l.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Roles"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Assign at least one role to grant access."}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No workspace roles available yet."}):r.map(U=>l.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:x.includes(U.id),onChange:ne=>g(R=>ne.target.checked?[...R,U.id]:R.filter(H=>H!==U.id)),disabled:c}),l.jsx("span",{children:U.name})]},U.id))}),x.length>0?l.jsxs("p",{className:"text-xs text-slate-500",children:[x.length," role(s) selected."]}):null]}),C.hasNextPage?l.jsx("div",{className:"pt-2",children:l.jsx(Ce,{type:"button",variant:"ghost",onClick:()=>C.fetchNextPage(),disabled:C.isFetchingNextPage,children:C.isFetchingNextPage?"Loading more users":"Load more users"})}):null,l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Ce,{type:"button",variant:"ghost",onClick:n,disabled:c,children:"Cancel"}),l.jsx(Ce,{type:"submit",isLoading:c,disabled:!A,children:"Add member"})]})]})})}function RM({open:e,member:n,availableRoles:r,onClose:i,onSaveRoles:c,onRemove:u,isSaving:d,isRemoving:m}){const[x,g]=p.useState([]),[b,v]=p.useState(null),[w,S]=p.useState(!1);p.useEffect(()=>{if(!e||!n){g([]),v(null),S(!1);return}g(n.role_ids),v(null),S(!1)},[n,e]);const N=async()=>{if(n){v(null);try{await c(x)}catch(k){const _=k instanceof Error?k.message:"Unable to save member roles.";v(_)}}},j=async()=>{if(n){v(null);try{await u()}catch(k){const _=k instanceof Error?k.message:"Unable to remove member.";v(_)}finally{S(!1)}}},C=n?n.user?.display_name??n.user?.email??n.user_id:"Member details";return l.jsxs(l.Fragment,{children:[l.jsxs(dm,{open:e,onClose:i,title:C,description:n?"Update roles or remove this member from the workspace.":void 0,children:[n?l.jsxs("div",{className:"space-y-4",children:[b?l.jsx(rt,{tone:"danger",children:b}):null,l.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[l.jsx(bw,{name:n.user?.display_name,email:n.user?.email,size:"md"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:n.user?.display_name??n.user?.email??n.user_id}),l.jsx("p",{className:"text-sm text-slate-500",children:n.user?.email??"No email available"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["User ID: ",n.user_id]})]})]}),l.jsxs("fieldset",{className:"space-y-3",children:[l.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Roles"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Select the roles this member should have inside the workspace."}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No workspace roles available."}):r.map(k=>l.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:x.includes(k.id),onChange:_=>g(A=>_.target.checked?Array.from(new Set([...A,k.id])):A.filter(L=>L!==k.id)),disabled:d}),l.jsx("span",{children:k.name})]},k.id))}),x.length>0?l.jsxs("p",{className:"text-xs text-slate-500",children:[x.length," role(s) selected."]}):null]})]}):l.jsx(rt,{tone:"warning",children:"This member could not be found."}),l.jsxs("div",{className:"mt-6 flex items-center justify-between gap-2",children:[l.jsx(Ce,{type:"button",variant:"ghost",onClick:i,disabled:d||m,children:"Close"}),l.jsxs("div",{className:"flex items-center gap-2",children:[n?l.jsx(Ce,{type:"button",variant:"danger",onClick:()=>S(!0),disabled:m,isLoading:m,children:"Remove"}):null,l.jsx(Ce,{type:"button",onClick:N,isLoading:d,disabled:!n||d,children:"Save changes"})]})]})]}),l.jsx(uu,{open:w,title:"Remove member?",description:n?`Remove ${n.user?.display_name??n.user?.email??n.user_id} from this workspace.`:"",confirmLabel:"Remove member",tone:"danger",onCancel:()=>S(!1),onConfirm:j,isConfirming:m})]})}function DM(){const{workspace:e,hasPermission:n}=xr(),{params:r}=Fy(),i=Vt(),c=Hn(),u=n("workspace.roles.manage"),d=xw(e.id),m=jM(),x=SM(e.id),g=EM(e.id),b=NM(e.id),[v,w]=p.useState(""),[S,N]=p.useState(null),j=p.useMemo(()=>(m.data?.items??[]).filter(M=>M.scope_type==="workspace"),[m.data]),C=p.useMemo(()=>{const M=new Intl.Collator("en",{sensitivity:"base"});return(d.data?.items??[]).slice().sort((G,Y)=>M.compare(G.name,Y.name))},[d.data]),k=d.data?.total??C.length,_=v.trim().toLowerCase(),A=p.useMemo(()=>_?C.filter(M=>`${M.name} ${M.slug??""}`.toLowerCase().includes(_)):C,[_,C]),L=r[0],O=L==="new",J=L&&L!=="new"?decodeURIComponent(L):null,U=C.find(M=>M.id===J),ne=`/workspaces/${e.id}/settings/access/roles`,R=`${c.search}${c.hash}`,H=()=>i(`${ne}${R}`,{replace:!0}),ae=()=>i(`${ne}/new${R}`),I=M=>i(`${ne}/${encodeURIComponent(M)}${R}`),F=async M=>{N(null),await x.mutateAsync({name:M.name.trim(),slug:M.slug.trim()||void 0,description:M.description.trim()||void 0,permissions:M.permissions}),N({tone:"success",message:"Role created."}),H()},ue=async(M,G)=>{N(null),await g.mutateAsync({roleId:M,payload:{name:G.name.trim(),description:G.description.trim()||void 0,permissions:G.permissions}}),N({tone:"success",message:"Role updated."}),H()},xe=async M=>{N(null),await b.mutateAsync(M.id),N({tone:"success",message:`Deleted role "${M.name}".`}),H()};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(du,{title:"Roles",description:"Workspace roles group permissions so you can safely delegate access.",actions:l.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:[k," role",k===1?"":"s"]})}),S?l.jsx(rt,{tone:S.tone,children:S.message}):null,d.isError?l.jsx(rt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace roles."}):null,m.isError?l.jsx(rt,{tone:"warning",children:m.error instanceof Error?m.error.message:"Unable to load permission catalog."}):null,l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Workspace roles"}),l.jsx("p",{className:"text-sm text-slate-500",children:d.isLoading?"Loading roles":`${k} role${k===1?"":"s"} total`})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx(mt,{label:"Search roles",className:"w-full max-w-xs",children:l.jsx(vt,{value:v,onChange:M=>w(M.target.value),placeholder:"Search by name or slug",disabled:d.isLoading})}),u?l.jsx(Ce,{type:"button",onClick:ae,children:"New role"}):null]})]}),d.isLoading?l.jsx("p",{className:"text-sm text-slate-600",children:"Loading roles"}):A.length===0?l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:v?`No roles match "${v}".`:"No workspace roles yet. Create one to tailor permissions."}):l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Role"}),l.jsx("th",{className:"px-4 py-3",children:"Slug"}),l.jsx("th",{className:"px-4 py-3",children:"Permissions"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:A.map(M=>l.jsxs("tr",{className:"text-sm text-slate-700",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-semibold text-slate-900",children:M.name}),M.is_system?l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-200 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"System"}):null,M.is_editable?null:l.jsx("span",{className:"inline-flex items-center rounded-full bg-warning-100 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-warning-700",children:"Locked"})]})}),l.jsx("td",{className:"px-4 py-3 text-slate-600",children:M.slug}),l.jsxs("td",{className:"px-4 py-3 text-slate-600",children:[M.permissions.length," permission",M.permissions.length===1?"":"s"]}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx(Ce,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(M.id),disabled:!u,children:"Manage"})})]},M.id))})]})}),u?null:l.jsx(rt,{tone:"info",children:"You do not have permission to manage workspace roles."})]}),l.jsx(Zb,{open:O&&u,mode:"create",permissions:j,onClose:H,onSave:M=>F(M),isSaving:x.isPending,isDeleting:!1}),l.jsx(Zb,{open:!!J&&u,mode:"edit",role:U,permissions:j,onClose:H,onSave:M=>J?ue(J,M):Promise.resolve(),onDelete:U?()=>xe(U):void 0,isSaving:g.isPending,isDeleting:b.isPending})]})}function Zb({open:e,mode:n,role:r,permissions:i,onClose:c,onSave:u,onDelete:d,isSaving:m,isDeleting:x}){const[g,b]=p.useState({name:"",slug:"",description:"",permissions:[]}),[v,w]=p.useState(""),[S,N]=p.useState(null),[j,C]=p.useState(!1),[k,_]=p.useState("");p.useEffect(()=>{if(!e){N(null),w(""),C(!1),_("");return}b(n==="edit"&&r?{name:r.name,slug:r.slug,description:r.description??"",permissions:r.permissions}:{name:"",slug:"",description:"",permissions:[]})},[n,e,r]);const A=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,L=n==="create"||(r?.is_editable??!1),O=n==="edit"&&r&&r.is_editable&&!r.is_system&&d,J=p.useMemo(()=>{const I=v.trim().toLowerCase();return I?i.filter(F=>`${F.label} ${F.key}`.toLowerCase().includes(I)):i},[v,i]),U=(I,F)=>{b(ue=>({...ue,permissions:F?Array.from(new Set([...ue.permissions??[],I])):(ue.permissions??[]).filter(xe=>xe!==I)}))},ne=async()=>{if(N(null),!g.name.trim()){N("Role name is required.");return}if(n==="create"&&g.slug&&!A.test(g.slug)){N("Use lowercase letters, numbers, and dashes for the role slug.");return}try{await u({...g,name:g.name.trim(),slug:n==="create"?g.slug.trim():r?.slug??"",description:g.description.trim(),permissions:g.permissions})}catch(I){const F=I instanceof Error?I.message:"Unable to save role.";N(F)}},R=async()=>{if(!(!d||!r)){N(null);try{await d()}catch(I){const F=I instanceof Error?I.message:"Unable to delete role.";N(F)}finally{C(!1),_("")}}},H=l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx(Ce,{type:"button",variant:"ghost",onClick:c,disabled:m||x,children:"Close"}),l.jsxs("div",{className:"flex items-center gap-2",children:[O?l.jsx(Ce,{type:"button",variant:"danger",onClick:()=>C(!0),disabled:x,isLoading:x,children:"Delete"}):null,l.jsx(Ce,{type:"button",onClick:ne,isLoading:m,disabled:!L||m,children:n==="create"?"Create role":"Save changes"})]})]}),ae=n==="create"?"New role":r?.name??"Role details";return l.jsxs(l.Fragment,{children:[l.jsxs(dm,{open:e,onClose:c,title:ae,description:n==="create"?"Create a workspace-scoped role.":"Edit workspace role details and permissions.",footer:H,children:[S?l.jsx(rt,{tone:"danger",children:S}):null,n==="edit"&&r&&!r.is_editable?l.jsx(rt,{tone:"warning",children:"This role is locked and cannot be modified."}):null,l.jsxs("div",{className:"space-y-4",children:[l.jsx(mt,{label:"Role name",required:!0,children:l.jsx(vt,{value:g.name,onChange:I=>b(F=>({...F,name:I.target.value})),placeholder:"Data reviewer",disabled:m||!L})}),n==="create"?l.jsx(mt,{label:"Role slug",hint:"Lowercase, URL-friendly identifier. Leave blank to auto-generate.",children:l.jsx(vt,{value:g.slug,onChange:I=>b(F=>({...F,slug:I.target.value})),placeholder:"data-reviewer",disabled:m||!L})}):l.jsx(mt,{label:"Role slug",children:l.jsx(vt,{value:r?.slug??"",disabled:!0})}),l.jsx(mt,{label:"Description",hint:"Optional context about what this role controls.",children:l.jsx(vt,{value:g.description,onChange:I=>b(F=>({...F,description:I.target.value})),placeholder:"What does this role control?",disabled:m||!L})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Permissions"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Select the permissions included with this role. ",g.permissions.length," selected."]})]}),l.jsx(vt,{value:v,onChange:I=>w(I.target.value),placeholder:"Filter permissions",disabled:m})]}),l.jsx("div",{className:"max-h-72 space-y-2 overflow-y-auto rounded-lg border border-slate-200 p-3",children:J.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No permissions match this filter."}):J.map(I=>l.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-300",checked:g.permissions.includes(I.key),onChange:F=>U(I.key,F.target.checked),disabled:m||!L}),l.jsxs("span",{children:[l.jsx("span",{className:"block font-semibold",children:I.label}),l.jsx("span",{className:"block text-xs text-slate-500",children:I.description})]})]},I.key))})]})]})]}),l.jsx(uu,{open:j&&!!r,title:"Delete this role?",description:"Deleting this role will remove it from any members assigned to it.",confirmLabel:"Delete role",tone:"danger",confirmDisabled:k.trim()!==(r?.slug??""),onCancel:()=>{C(!1),_("")},onConfirm:R,isConfirming:x,children:l.jsx(mt,{label:"Type the role slug to confirm",required:!0,children:l.jsx(vt,{value:k,onChange:I=>_(I.target.value),placeholder:r?.slug??"role-slug",disabled:x})})})]})}const MM={workspace:"Workspace",access:"Access",lifecycle:"Lifecycle"},Jl=[{id:"workspace.general",group:"workspace",label:"General",description:"Workspace name, slug, and defaults.",path:"general",element:l.jsx(fM,{})},{id:"access.members",group:"access",label:"Members",description:"Invite teammates and manage access.",path:"access/members",required:{view:["workspace.members.view"],edit:["workspace.members.manage"]},element:l.jsx(TM,{})},{id:"access.roles",group:"access",label:"Roles",description:"Workspace-scoped roles and permissions.",path:"access/roles",required:{view:["workspace.roles.view"],edit:["workspace.roles.manage"]},element:l.jsx(DM,{})},{id:"lifecycle.danger",group:"lifecycle",label:"Danger zone",description:"Deletion and operational safeguards.",path:"lifecycle/danger",tone:"danger",required:{view:["workspace.settings.manage","workspace.delete"],edit:["workspace.delete"]},element:l.jsx(BT,{})}],Oc=Jl[0];function zM(e){const n=e.join("/");return Jl.find(r=>n===r.path||n.startsWith(`${r.path}/`))}function OM(e,n){const r=Jl.map(i=>{const c=i.required?.view?i.required.view.some(d=>n(d)):!0,u=i.required?.edit?i.required.edit.some(d=>n(d)):!0;return{id:i.id,label:i.label,description:i.description,href:`/workspaces/${e}/settings/${i.path}`,disabled:!(c||u),tone:i.tone??"default"}});return Object.values(r.reduce((i,c)=>{const u=Jl.find(m=>m.id===c.id);if(!u)return i;const d=i[u.group]??{id:u.group,label:MM[u.group],items:[]};return d.items=[...d.items,c],i[u.group]=d,i},{}))}function LM({sectionSegments:e=[]}){const{workspace:n,hasPermission:r}=xr(),i=Vt(),c=Hn(),{effectiveSegments:u,redirectTo:d}=p.useMemo(()=>UM(e,n.id,c.search,c.hash),[e,n.id,c.search,c.hash]),m=zM(u)??Oc;p.useEffect(()=>{d&&i(d,{replace:!0})},[d,i]);const x=p.useMemo(()=>{const j=m.path.split("/");return u.slice(j.length)},[m.path,u]),g=p.useMemo(()=>OM(n.id,r),[n.id,r]),v=g.flatMap(j=>j.items).find(j=>j.id===m.id),w=g.find(j=>j.items.some(C=>C.id===m.id))?.label,N=v?.disabled?l.jsx(ut,{title:"You don't have access to this section",description:"You need additional permissions to manage this area of workspace settings.",variant:"error"}):m.element;return l.jsx(UT,{workspaceName:n.name,navGroups:g,activeSectionId:m.id,activeSectionLabel:m.label,activeSectionDescription:m.description,activeGroupLabel:w??"Settings",children:l.jsx($T,{value:{sectionId:m.id,params:x},children:N})})}function UM(e,n,r,i){const c={members:"access/members",roles:"access/roles",danger:"lifecycle/danger"},u=e.length>0?[...e]:Oc.path.split("/"),d=c[u[0]],m=d?[...d.split("/"),...u.slice(1)]:u,x=m.join("/"),g=d&&x?`/workspaces/${n}/settings/${x}${r}${i}`:void 0,b=e.length===0,v=Jl.some(S=>x===S.path||x.startsWith(`${S.path}/`))||d!==void 0,w=`/workspaces/${n}/settings/${Oc.path}${r}${i}`;return{effectiveSegments:v?m:Oc.path.split("/"),redirectTo:b||!v||d?g??w:null}}function $M(){return l.jsx(tu,{children:l.jsx(BM,{})})}function BM(){const e=Hn(),n=Vt(),r=dt(),i=su(),c=p.useMemo(()=>i.data?.items??[],[i.data?.items]),u=FM(e.pathname),d=p.useMemo(()=>VM(c,u),[c,u]);return p.useEffect(()=>{i.data&&r.setQueryData(Zt.list(Ev),i.data)},[r,i.data]),p.useEffect(()=>{!i.isLoading&&!i.isError&&c.length===0&&n("/workspaces",{replace:!0})},[i.isLoading,i.isError,c.length,n]),p.useEffect(()=>{d&&!u&&n(`/workspaces/${d.id}/${Di.path}${e.search}${e.hash}`,{replace:!0})},[d,u,e.search,e.hash,n]),p.useEffect(()=>{if(!(!d||!u)&&u!==d.id){const m=PM(e.pathname,e.search,d.id,u);m!==e.pathname+e.search&&n(m+e.hash,{replace:!0})}},[d,u,e.pathname,e.search,e.hash,n]),p.useEffect(()=>{d&&_v(d)},[d]),i.isLoading?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(ut,{title:"Loading workspace",variant:"loading"})}):i.isError?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-slate-50 px-6 text-center",children:[l.jsx(ut,{title:"Unable to load workspace",description:"We were unable to fetch workspace information. Refresh the page to try again.",variant:"error"}),l.jsx("button",{type:"button",className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-100",onClick:()=>i.refetch(),children:"Retry"})]}):d?l.jsx(mE,{workspace:d,workspaces:c,children:l.jsx(qM,{workspace:d})}):null}function qM({workspace:e}){return l.jsx(P2,{children:l.jsx(a5,{workspaceId:e.id,children:l.jsx(HM,{workspace:e})})})}function HM({workspace:e}){const n=Oi(),r=Vt(),i=Hn(),{session:c,windowState:u}=Ey(),d=ky(),m=d.data?.enabled??!1,x=d.data?.detail??Bi,g=zy(),b=p.useMemo(()=>Dy(e),[e]),[v,w]=p.useState(""),[S,N]=p.useState(!1),[j,C]=p.useState(!1),k=v.trim().toLowerCase(),_=!!(c&&u==="maximized"),A=p.useMemo(()=>b.map(B=>({id:B.id,label:B.label,description:`Jump to ${B.label}`,icon:l.jsx(B.icon,{className:"h-4 w-4 text-slate-400","aria-hidden":!0})})),[b]),L=p.useMemo(()=>Gs(`ade.ui.workspace.${e.id}.navCollapsed`),[e.id]),[O,J]=p.useState(()=>{const B=L.get();return typeof B=="boolean"?B:!1});p.useEffect(()=>{const B=L.get();J(typeof B=="boolean"?B:!1)},[L]),p.useEffect(()=>{L.set(O)},[O,L]),p.useEffect(()=>{w("")},[e.id]),p.useEffect(()=>{if(typeof window>"u")return;const B=()=>{window.innerWidth>=1024&&N(!1)};return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),p.useEffect(()=>{if(typeof document>"u")return;const B=document.body.style.overflow;return S?document.body.style.overflow="hidden":document.body.style.overflow=B||"",()=>{document.body.style.overflow=B}},[S]),p.useEffect(()=>{_&&N(!1)},[_]);const U=p.useCallback(()=>{if(!k)return;const B=b.find(P=>P.label.toLowerCase().includes(k))??b.find(P=>P.id.toLowerCase().includes(k));B&&r(B.href)},[k,b,r]),ne=p.useCallback(B=>{const P=b.find($=>$.id===B.id);P&&(r(P.href),w(""))},[b,r]),R=p.useCallback(()=>N(!0),[]),H=p.useCallback(()=>N(!1),[]),ae=l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("button",{type:"button",onClick:R,className:"focus-ring inline-flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-600 shadow-sm lg:hidden","aria-label":"Open workspace navigation",children:l.jsx(QM,{})})}),I=n.user.display_name||n.user.email||"Signed in",F=n.user.email??"",ue=l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(Cy,{displayName:I,email:F,actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>C(!0)}]})}),xe={value:v,onChange:w,onSubmit:U,placeholder:`Search ${e.name} or jump to a section`,shortcutHint:g,scopeLabel:e.name,suggestions:A,onSelectSuggestion:ne},M=ZM(i.pathname,e.id),G=WM(e.id,M,i.search,i.hash),Y=G?.kind==="content"&&G.key.startsWith("documents"),we=Y?new URLSearchParams(i.search).get("q")??"":"",ie=p.useCallback(B=>{if(!Y)return;const P=new URLSearchParams(i.search);B?P.set("q",B):P.delete("q");const $=P.toString();r(`${i.pathname}${$?`?${$}`:""}${i.hash}`,{replace:!0})},[Y,i.hash,i.pathname,i.search,r]),T=p.useCallback(B=>{ie(B)},[ie]),W=p.useCallback(()=>{ie("")},[ie]),Z=(Y?{value:we,onChange:ie,onSubmit:T,onClear:W,placeholder:"Search documents",shortcutHint:g,scopeLabel:"Documents",enableShortcut:!0}:void 0)??xe;if(p.useEffect(()=>{G?.kind==="redirect"&&r(G.to,{replace:!0})},[G,r]),!G||G.kind==="redirect")return null;const X=G.fullHeight??!1;return l.jsxs(l.Fragment,{children:[l.jsx(Ty,{open:j,onClose:()=>C(!1)}),l.jsxs("div",{className:he("flex min-w-0 bg-slate-50 text-slate-900",X?"h-screen overflow-hidden":"min-h-screen"),children:[_?null:l.jsx(M5,{workspace:e,items:b,collapsed:O,onToggleCollapse:()=>J(B=>!B),onGoToWorkspaces:()=>r("/workspaces")}),l.jsxs("div",{className:"flex flex-1 min-w-0 flex-col",children:[_?null:l.jsx(_y,{brand:ae,trailing:ue,search:Z}),!_&&S?l.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:H}),l.jsxs("div",{className:"absolute inset-y-0 left-0 flex h-full w-[min(20rem,85vw)] max-w-xs flex-col rounded-r-3xl border-r border-slate-100/70 bg-gradient-to-b from-white via-slate-50 to-white/95 shadow-[0_45px_90px_-50px_rgba(15,23,42,0.85)]",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.name}),l.jsx("span",{className:"text-xs text-slate-400",children:"Workspace navigation"})]}),l.jsx("button",{type:"button",onClick:H,className:"focus-ring inline-flex h-9 w-9 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-500","aria-label":"Close navigation",children:l.jsx(IM,{})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:l.jsx(My,{items:b,onNavigate:H,showHeading:!1})})]})]}):null,l.jsx("div",{className:"relative flex flex-1 min-w-0 overflow-hidden",children:l.jsx("main",{className:he("relative flex-1 min-w-0",X?"flex min-h-0 flex-col overflow-hidden":"overflow-y-auto"),children:l.jsxs("div",{className:he(X?"flex w-full flex-1 min-h-0 flex-col px-0 py-0":"mx-auto flex w-full max-w-7xl flex-col px-4 py-6"),children:[m?l.jsx("div",{className:he("mb-4",X?"px-6 pt-4":""),children:l.jsx(rt,{tone:"warning",heading:"Safe mode active",children:x})}):null,l.jsx("div",{className:he(X?"flex min-h-0 min-w-0 flex-1 flex-col":"flex min-w-0 flex-1 flex-col"),children:G.element})]})})},`section-${G.key}`)]})]})]})}function FM(e){return e.match(/^\/workspaces\/([^/]+)/)?.[1]??null}function ZM(e,n){const r=`/workspaces/${n}`;return e.startsWith(r)?e.slice(r.length).split("/").map(c=>c.trim()).filter(c=>c.length>0):[]}function VM(e,n){return n?e.find(r=>r.id===n)??e.find(r=>r.slug===n)??e[0]??null:e[0]??null}function PM(e,n,r,i){const c=`/workspaces/${i}`,u=e.startsWith(c)?e.slice(c.length):"",d=u&&u!=="/"?u:`/${Di.path}`;return`/workspaces/${r}${d}${n}`}function QM(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M4 6h12",strokeLinecap:"round"}),l.jsx("path",{d:"M4 10h12",strokeLinecap:"round"}),l.jsx("path",{d:"M4 14h8",strokeLinecap:"round"})]})}function IM(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function WM(e,n,r,i){const c=`${r}${i}`;if(n.length===0)return{kind:"redirect",to:`/workspaces/${e}/${Di.path}${c}`};const[u,d,m]=n;switch(u){case"overview":return{kind:"content",key:"overview",element:l.jsx(B5,{})};case Di.path:case"documents":return d?{kind:"content",key:`documents:${d}`,element:l.jsx(kT,{params:{documentId:decodeURIComponent(d)}})}:{kind:"content",key:"documents",element:l.jsx(K5,{})};case"runs":return{kind:"content",key:"runs",element:l.jsx(TT,{})};case"config-builder":return d?m==="editor"?{kind:"content",key:`config-builder:${d}:editor`,element:l.jsx(GM,{configId:decodeURIComponent(d)}),fullHeight:!0}:{kind:"content",key:`config-builder:${d}`,element:l.jsx(zT,{params:{configId:decodeURIComponent(d)}})}:{kind:"content",key:"config-builder",element:l.jsx(RT,{})};case"configs":return{kind:"redirect",to:`${`/workspaces/${e}/config-builder${d?`/${d}`:""}${m?`/${m}`:""}`}${c}`};case"settings":{const x=n.slice(1),g=x.length>0?x:[];return{kind:"content",key:`settings:${g.length>0?g.join(":"):"general"}`,element:l.jsx(LM,{sectionSegments:g})}}default:return{kind:"content",key:`not-found:${n.join("/")}`,element:l.jsx(ut,{title:"Section not found",description:"The requested workspace section could not be located.",variant:"error"})}}}function GM({configId:e}){return l.jsx(LT,{params:{configId:e}})}function KM(e){return`/workspaces/${e}/${Di.path}`}function YM(){return l.jsx(tu,{children:l.jsx(XM,{})})}function XM(){const e=Hn(),n=Vt(),r=Oi(),i=su(),c=i.data?.items??[],m=[hE(),r.user.preferred_workspace_id].filter(x=>!!x).map(x=>c.find(g=>g.id===x)).find(x=>!!x)??c[0]??null;return p.useEffect(()=>{if(i.isLoading||i.isError)return;if(!m){e.pathname!=="/workspaces"&&n("/workspaces",{replace:!0});return}const x=KM(m.id);e.pathname+e.search!==x&&n(x,{replace:!0})},[e.pathname,e.search,n,m,i.isError,i.isLoading]),i.isLoading?l.jsx(ut,{title:"Loading workspaces",variant:"loading"}):i.isError?l.jsx(ut,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error",action:l.jsx(Ce,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})}):null}function JM(){return _n({queryKey:Ms.providers(),queryFn:({signal:e})=>TS({signal:e}),staleTime:6e5,retry:!1,refetchOnWindowFocus:!1})}const e3=yu({email:Ds().trim().min(1,"Enter your email address.").email("Enter a valid email address."),password:Ds().min(1,"Enter your password.")});function t3(){const e=Hn(),n=Vt(),r=dt(),i=pv(),{session:c,isLoading:u,isError:d}=i,m=!c&&!u&&!d,x=Ah(m),g=JM(),b=g.data?.providers??[],v=g.data?.force_sso??!1,w=g.isError&&!g.isFetching?"We couldn't load the list of providers. Refresh the page or continue with email.":null,S=p.useMemo(()=>{const O=new URLSearchParams(e.search);return Il(O.get("redirectTo"))},[e.search]);p.useEffect(()=>{c&&n(Hc(c.return_to,S),{replace:!0})},[n,S,c]),p.useEffect(()=>{m&&(x.isPending||x.isError||x.data?.requires_setup&&n(xv(S),{replace:!0}))},[n,S,x.data?.requires_setup,x.isError,x.isPending,m]);const[N,j]=p.useState(null),[C,k]=p.useState(!1);if(p.useEffect(()=>{j(null)},[e.search]),u)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Checking your session"})});if(d)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to verify your session. Refresh the page to try again."}),l.jsx(Ce,{variant:"secondary",onClick:()=>i.refetch(),children:"Retry"})]});if(x.isPending&&m)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Preparing initial setup"})});if(x.isError&&m)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to check whether ADE is ready."}),l.jsx(Ce,{variant:"secondary",onClick:()=>x.refetch(),children:"Try again"})]});const _=async O=>{O.preventDefault(),j(null);const J=new FormData(O.currentTarget),U=Object.fromEntries(J.entries()),ne=e3.safeParse(U);if(!ne.success){const F=ne.error.issues[0]?.message??"Invalid input.";j(F);return}const{email:R,password:H}=ne.data,ae=typeof U.redirectTo=="string"?U.redirectTo:null,I=Il(ae);k(!0);try{const F=await RS({email:R,password:H});r.setQueryData(Ms.detail(),F),n(Hc(F.return_to,I),{replace:!0})}catch(F){if(F instanceof On){const ue=F.problem?.detail??F.message??"Unable to sign in.";j(ue)}else F instanceof Error?j(F.message):j("Unable to sign in.")}finally{k(!1)}},A=!!N&&!C,L=g.isLoading||g.isFetching;return l.jsx("div",{className:"mx-auto flex min-h-screen flex-col justify-center bg-slate-50 px-6 py-16",children:l.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[l.jsxs("header",{className:"space-y-2 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Welcome back"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Sign in to ADE"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email and password or continue with a connected provider."})]}),w?l.jsx(rt,{tone:"warning",className:"mt-6",children:w}):null,L?l.jsxs("div",{className:"mt-6 space-y-3",children:[l.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"}),l.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"})]}):b.length>0?l.jsx("div",{className:"mt-6 space-y-3",children:b.map(O=>l.jsxs("a",{href:O.start_url??"#",className:"flex w-full items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:["Continue with ",O.label]},O.id))}):null,v?l.jsx(rt,{tone:"info",className:"mt-8",children:"Password sign-in is disabled for this deployment. Use one of the configured providers above."}):l.jsxs("form",{method:"post",className:"mt-8 space-y-6",onSubmit:_,children:[l.jsx("input",{type:"hidden",name:"redirectTo",value:S}),l.jsx(mt,{label:"Email address",required:!0,children:l.jsx(vt,{id:"email",type:"email",autoComplete:"email",placeholder:"you@example.com",name:"email",disabled:C})}),l.jsx(mt,{label:"Password",required:!0,children:l.jsx(vt,{id:"password",type:"password",autoComplete:"current-password",placeholder:"",name:"password",disabled:C})}),A?l.jsx(rt,{tone:"danger",children:N}):null,l.jsx(Ce,{type:"submit",className:"w-full justify-center",isLoading:C,disabled:C,children:C?"Signing in":"Continue"})]})]})})}function n3(){const e=Vt(),n=Hn(),r=dt(),[i,c]=p.useState(null);return p.useEffect(()=>{let u=!1;const d=new URLSearchParams(n.search),m=d.get("code")??"",x=d.get("state")??"";if(!m||!x){c("Missing authorization details from the identity provider.");return}async function g(){try{const b=await MS({code:m,state:x});if(u)return;r.setQueryData(Ms.detail(),b);const v=Hc(b.return_to,d.get("next"));e(v,{replace:!0})}catch(b){if(u)return;b instanceof On?c(b.problem?.detail??b.message):b instanceof Error?c(b.message):c("Unexpected callback error.")}}return g(),()=>{u=!0}},[n.search,e,r]),i?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(ut,{title:"Unable to finish sign-in",description:i,variant:"error",action:l.jsx(Ce,{variant:"secondary",onClick:()=>e("/login",{replace:!0}),children:"Return to sign in"})})}):l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(ut,{title:"Finishing sign-in",variant:"loading"})})}const s3=yu({displayName:Ds().min(1,"Display name is required."),email:Ds().min(1,"Email is required.").email("Enter a valid email address."),password:Ds().min(12,"Use at least 12 characters."),confirmPassword:Ds().min(1,"Confirm your password.")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match."});function r3(){const e=Hn(),n=Vt(),r=dt(),i=Ah(!0),c=p.useMemo(()=>{const b=new URLSearchParams(e.search);return Il(b.get("redirectTo"))},[e.search]);p.useEffect(()=>{i.isPending||i.isError||i.data?.requires_setup||n(gv(c),{replace:!0})},[n,c,i.data?.requires_setup,i.isError,i.isPending]);const[u,d]=p.useState(null),[m,x]=p.useState(!1);if(i.isPending)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Loading setup status"})});if(i.isError)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We couldn't check whether ADE requires initial setup."}),l.jsx(Ce,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})]});if(!i.data?.requires_setup)return null;const g=async b=>{b.preventDefault(),d(null);const v=new FormData(b.currentTarget),w=Object.fromEntries(v.entries()),S=s3.safeParse(w);if(!S.success){const j=S.error.issues[0]?.message??"Invalid input.";d(j);return}x(!0);const N=Il(w.redirectTo);try{const j=await HS({display_name:S.data.displayName,email:S.data.email,password:S.data.password});r.setQueryData(Ms.detail(),j),n(Hc(j.return_to,N),{replace:!0})}catch(j){if(j instanceof On){const C=j.problem?.detail??j.message??"Setup failed. Try again.";d(C)}else j instanceof Error?d(j.message):d("Setup failed. Try again.")}finally{x(!1)}};return l.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col justify-center bg-slate-50 px-6 py-16",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[l.jsxs("header",{className:"space-y-3 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"First-run configuration"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Create the first administrator"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Provide credentials for the inaugural administrator account. We'll redirect after completion."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[l.jsx("input",{type:"hidden",name:"redirectTo",value:c}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsx(mt,{label:"Display name",required:!0,children:l.jsx(vt,{id:"displayName",name:"displayName",placeholder:"Casey Operator",required:!0,disabled:m})}),l.jsx(mt,{label:"Email",required:!0,children:l.jsx(vt,{id:"email",name:"email",type:"email",placeholder:"casey@example.com",required:!0,disabled:m})})]}),l.jsx(mt,{label:"Password",hint:"Use at least 12 characters.",required:!0,children:l.jsx(vt,{id:"password",name:"password",type:"password",minLength:12,placeholder:"",required:!0,disabled:m})}),l.jsx(mt,{label:"Confirm password",required:!0,children:l.jsx(vt,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:12,placeholder:"Re-enter your password",required:!0,disabled:m})}),u?l.jsx(rt,{tone:"danger",children:u}):null,l.jsx("div",{className:"flex justify-end",children:l.jsx(Ce,{type:"submit",isLoading:m,disabled:m,children:m?"Creating administrator":"Create administrator"})})]})]})})}function vw({children:e,sidePanel:n,actions:r,search:i}){const c=Oi(),u=Vt(),[d,m]=p.useState(!1),x=c.user.display_name||c.user.email||"Signed in",g=c.user.email??"";return l.jsxs(l.Fragment,{children:[l.jsx(Ty,{open:d,onClose:()=>m(!1)}),l.jsxs("div",{className:"flex min-h-screen flex-col bg-slate-50 text-slate-900",children:[l.jsx(_y,{brand:l.jsxs("button",{type:"button",onClick:()=>u("/workspaces"),className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-transparent bg-white px-3 py-2 text-left text-sm font-semibold text-slate-900 shadow-sm transition hover:border-slate-200",children:[l.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-sm",children:l.jsx(A5,{className:"h-5 w-5","aria-hidden":!0})}),l.jsxs("span",{className:"flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Workspace directory"}),l.jsx("span",{className:"text-xs text-slate-400",children:"Automatic Data Extractor"})]})]}),search:i,actions:r?l.jsx("div",{className:"flex items-center gap-2",children:r}):void 0,trailing:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(Cy,{displayName:x,email:g,actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>m(!0)}]})})}),l.jsx("main",{className:"flex flex-1 overflow-y-auto",children:l.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:l.jsxs("div",{className:`grid gap-6 ${n?"lg:grid-cols-[minmax(0,1fr)_280px]":""}`,children:[l.jsx("div",{children:e}),n?l.jsx("aside",{className:"space-y-6",children:n}):null]})})})]})]})}function a3(){return l.jsx(tu,{children:l.jsx(i3,{})})}function i3(){const e=Vt(),n=Oi(),r=su(),i=Nv(),[c,u]=p.useState(null),[d,m]=p.useState(null),x=p.useMemo(()=>(n.user.permissions??[]).map(F=>F.toLowerCase()),[n.user.permissions]),g=x.includes("workspaces.create")||x.includes("workspaces.manage_all"),[b,v]=p.useState(""),w=zy(),S=r.data,N=p.useMemo(()=>S?.items??[],[S?.items]),j=b.trim().toLowerCase(),C=p.useMemo(()=>j?N.filter(F=>{const ue=F.name.toLowerCase(),xe=F.slug?.toLowerCase()??"";return ue.includes(j)||xe.includes(j)}):N,[N,j]),k=p.useCallback(F=>e(`/workspaces/${F}/${Di.path}`),[e]),_=g?l.jsx(Ce,{variant:"primary",onClick:()=>e("/workspaces/new"),children:"Create workspace"}):void 0,A=p.useCallback(()=>{if(!j)return;const F=C[0];F&&k(F.id)},[C,j,k]),L=p.useCallback(()=>v(""),[]),J=(j?C:N).slice(0,5).map(F=>({id:F.id,label:F.name,description:F.slug?`Slug  ${F.slug}`:"Workspace"})),U=p.useCallback(F=>{v(""),k(F.id)},[k]),ne=p.useCallback(async F=>{m(null),u(F.id);try{await i.mutateAsync(F.id),_v(F)}catch(ue){console.warn("workspaces.set_default.failed",ue),m("Unable to set the default workspace. Please try again.")}finally{u(null)}},[i]),R=p.useCallback((F,ue)=>{(F.key==="Enter"||F.key===" ")&&(F.preventDefault(),k(ue))},[k]),H={value:b,onChange:v,onSubmit:A,placeholder:"Search workspaces or jump to one instantly",shortcutHint:w,scopeLabel:"Workspace directory",suggestions:J,onSelectSuggestion:U,onClear:L},ae={...H,shortcutHint:void 0,onClear:L,enableShortcut:!1,variant:"minimal"};if(r.isLoading)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(ut,{title:"Loading workspaces",variant:"loading"})});if(r.isError)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(ut,{title:"We couldn't load your workspaces",description:"Refresh the page or try again later.",variant:"error",action:l.jsx(Ce,{variant:"secondary",onClick:()=>r.refetch(),children:"Retry"})})});const I=N.length===0?g?l.jsx(o3,{onCreate:()=>e("/workspaces/new")}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("h1",{id:"page-title",className:"sr-only",children:"Workspaces"}),l.jsx(ut,{title:"No workspaces available",description:"You don't have access to any workspaces yet. Ask an administrator to add you or create one on your behalf.",variant:"empty"})]}):C.length===0?l.jsx("div",{className:"space-y-4",children:l.jsx(ut,{title:`No workspaces matching "${b}"`,description:"Try searching by another workspace name or slug.",action:l.jsx(Ce,{variant:"secondary",onClick:L,children:"Clear search"})})}):l.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{children:[l.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"Workspaces"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Select a workspace to jump straight into documents."})]}),d?l.jsx(rt,{tone:"danger",heading:"We couldn't update your default workspace",children:d}):null,l.jsx(Ny,{...ae,className:"w-full"}),l.jsx("section",{className:"grid gap-5 lg:grid-cols-2",children:C.map(F=>{const ue=i.isPending&&c===F.id;return l.jsxs("article",{role:"button",tabIndex:0,onClick:()=>k(F.id),onKeyDown:xe=>R(xe,F.id),className:"group rounded-xl border border-slate-200 bg-white p-5 text-left shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:F.name}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Slug: ",F.slug]})]}),F.is_default?l.jsx("span",{className:"rounded-full bg-brand-50 px-2 py-1 text-xs font-semibold text-brand-600",children:"Default"}):l.jsx(Ce,{variant:"secondary",size:"sm",isLoading:ue,disabled:ue,onClick:xe=>{xe.stopPropagation(),ne(F)},children:"Set as default"})]}),l.jsx("p",{className:"mt-4 text-xs font-medium uppercase tracking-wide text-slate-500",children:"Permissions"}),l.jsx("p",{className:"text-sm text-slate-600",children:F.permissions.length>0?F.permissions.join(", "):"None"})]},F.id)})})]});return l.jsx(vw,{actions:_,search:H,sidePanel:l.jsx(l3,{canCreate:g,onCreate:()=>e("/workspaces/new")}),children:I})}function l3({canCreate:e,onCreate:n}){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Workspace tips"}),l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Why multiple workspaces?"})]}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Segment teams by business unit or client, control access with roles, and tailor extraction settings per workspace. Everything stays organised and secure."}),e?l.jsx(Ce,{variant:"secondary",onClick:n,className:"w-full",children:"New workspace"}):null]}),l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Need a hand?"}),l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Workspace setup checklist"})]}),l.jsxs("ul",{className:"space-y-2 text-xs text-slate-600",children:[l.jsx("li",{children:"Invite at least one additional administrator."}),l.jsx("li",{children:"Review configurations before uploading production files."}),l.jsx("li",{children:"Review workspace permissions for external collaborators."})]})]})]})}function o3({onCreate:e}){return l.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-dashed border-slate-300 bg-white p-10 text-center shadow-soft",children:[l.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"No workspaces yet"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Create your first workspace to start uploading configuration sets and documents."}),l.jsx(Ce,{variant:"primary",onClick:e,className:"mt-6",children:"Create workspace"})]})}function c3(){const e=dt();return sn({mutationFn:IS,onSuccess(n){e.setQueryData(Zt.detail(n.id),n),e.getQueriesData({queryKey:Zt.all()}).forEach(([r,i])=>{if(!Array.isArray(r)||r[0]!=="workspaces"||r[1]!=="list"||!i)return;const c=i.items.findIndex(x=>x.id===n.id),d=[...c>=0?i.items.map(x=>x.id===n.id?n:x):[...i.items,n]].sort((x,g)=>x.name.localeCompare(g.name)),m=typeof i.total=="number"&&c===-1?i.total+1:i.total;e.setQueryData(r,{...i,items:d,total:m})}),e.invalidateQueries({queryKey:Zt.all()})}})}const u3=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,d3=yu({name:Ds().min(1,"Workspace name is required.").max(100,"Keep the name under 100 characters."),slug:Ds().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(u3,"Use lowercase letters, numbers, and dashes."),ownerUserId:Ds().optional()});function f3(){return l.jsx(tu,{children:l.jsx(h3,{})})}function h3(){const e=Vt(),n=Oi(),r=su(),i=c3(),u=p.useMemo(()=>(n.user.permissions??[]).map(R=>R.toLowerCase()),[n.user.permissions]).includes("users.read_all"),d=gw({enabled:u,pageSize:50}),m=p.useMemo(()=>d.users,[d.users]),x=p.useMemo(()=>n.user.id?m.filter(R=>R.id!==n.user.id):m,[m,n.user.id]),{register:g,handleSubmit:b,watch:v,setValue:w,setError:S,clearErrors:N,formState:{errors:j,dirtyFields:C}}=Ky({resolver:mw(d3),defaultValues:{name:"",slug:"",ownerUserId:n.user.id??""}}),k=v("name"),_=v("slug");p.useEffect(()=>{if(C.slug)return;const R=m3(k);R!==_&&w("slug",R,{shouldValidate:!!R})},[C.slug,k,w,_]),p.useEffect(()=>{!u&&n.user.id&&w("ownerUserId",n.user.id,{shouldDirty:!1})},[u,n.user.id,w]);const A=i.isPending,L=d.isPending&&d.users.length===0,O=A||L||!u,J=n.user.display_name?`${n.user.display_name} (you)`:`${n.user.email??"Current user"} (you)`,U=g("ownerUserId"),ne=b(R=>{if(N("root"),u&&!R.ownerUserId){S("ownerUserId",{type:"manual",message:"Select a workspace owner."});return}i.mutate({name:R.name.trim(),slug:R.slug.trim(),owner_user_id:u&&R.ownerUserId||void 0},{onSuccess(H){r.refetch(),e(`/workspaces/${H.id}`)},onError(H){if(H instanceof On){const ae=H.problem?.detail??H.message,I=H.problem?.errors??{};S("root",{type:"server",message:ae}),I.name?.[0]&&S("name",{type:"server",message:I.name[0]}),I.slug?.[0]&&S("slug",{type:"server",message:I.slug[0]}),I.owner_user_id?.[0]&&S("ownerUserId",{type:"server",message:I.owner_user_id[0]});return}S("root",{type:"server",message:H instanceof Error?H.message:"Workspace creation failed."})}})});return l.jsx(vw,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Create a workspace"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Name the workspace and choose who should own it. You can adjust settings and permissions after the workspace is created."})]}),l.jsxs("form",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",onSubmit:ne,children:[l.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[l.jsx(mt,{label:"Workspace name",required:!0,error:j.name?.message,children:l.jsx(vt,{id:"workspaceName",placeholder:"Finance Operations",...g("name"),invalid:!!j.name,disabled:A})}),l.jsx(mt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier",required:!0,error:j.slug?.message,children:l.jsx(vt,{id:"workspaceSlug",placeholder:"finance-ops",...g("slug"),invalid:!!j.slug,disabled:A})})]}),u?l.jsxs(mt,{label:"Workspace owner",hint:"Owner receives workspace-level permissions immediately.",error:j.ownerUserId?.message,children:[l.jsxs("select",{id:"workspaceOwner",...U,onChange:R=>{U.onChange(R),N("ownerUserId")},disabled:O,className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",children:[l.jsx("option",{value:n.user.id??"",children:J}),x.map(R=>l.jsx("option",{value:R.id,children:R.display_name?`${R.display_name} (${R.email})`:R.email},R.id))]}),d.hasNextPage?l.jsx("div",{className:"pt-2",children:l.jsx(Ce,{type:"button",variant:"ghost",onClick:()=>d.fetchNextPage(),disabled:d.isFetchingNextPage,children:d.isFetchingNextPage?"Loading more users":"Load more users"})}):null]}):null,j.root?l.jsx(rt,{tone:"danger",children:j.root.message}):null,u&&d.isError?l.jsx(rt,{tone:"warning",children:"Unable to load the user list. Continue with yourself as the workspace owner or try again later."}):null,l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[l.jsx(Ce,{type:"button",variant:"secondary",onClick:()=>e("/workspaces"),disabled:A,children:"Cancel"}),l.jsx(Ce,{type:"submit",isLoading:A,children:A?"Creating workspace":"Create workspace"})]})]})]})})}function m3(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}function p3(){const e=Vt(),n=dt();return p.useEffect(()=>{let r=!1;const i=new AbortController;return(async()=>{try{await zS({signal:i.signal})}finally{r||(n.removeQueries({queryKey:Ms.root,exact:!1}),e("/login",{replace:!0}))}})().catch(()=>{r||e("/login",{replace:!0})}),()=>{r=!0,i.abort()}},[e,n]),null}function g3(){return l.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col justify-center px-6 py-16 text-center",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-brand-600",children:"404"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Page not found"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["The resource you're looking for doesn't exist yet. Add a screen under ",l.jsx("code",{children:"src/screens/<ScreenName>/"})," and register it inside ",l.jsx("code",{children:"src/app/App.tsx"})," if this surface should exist in the routerless SPA."]}),l.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[l.jsx(fh,{to:"/",className:"focus-ring inline-flex items-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-white transition hover:bg-brand-700",children:"Return home"}),l.jsx(fh,{to:"/login",className:"focus-ring inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-50",children:"Go to sign in"})]})]})})}function x3(){return l.jsx(vj,{children:l.jsx(rS,{children:l.jsx(b3,{})})})}function b3(){const e=Hn(),r=v3(e.pathname).split("/").filter(Boolean);if(r.length===0)return l.jsx(YM,{});const[i,c]=r;switch(i){case"login":return l.jsx(t3,{});case"logout":return l.jsx(p3,{});case"auth":if(c==="callback")return l.jsx(n3,{});break;case"setup":return l.jsx(r3,{});case"workspaces":return c?c==="new"?l.jsx(f3,{}):l.jsx($M,{}):l.jsx(a3,{})}return l.jsx(g3,{})}function v3(e){return!e||e==="/"?"/":e.endsWith("/")&&e.length>1?e.slice(0,-1):e}bj.createRoot(document.getElementById("root")).render(l.jsx(bt.StrictMode,{children:l.jsx(x3,{})}));export{bt as W,he as c,l as j,p as r};
