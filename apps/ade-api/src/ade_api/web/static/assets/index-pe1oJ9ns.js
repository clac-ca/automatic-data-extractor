(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();function d0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dh={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function DS(){if(Hb)return ml;Hb=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:e,type:i,key:d,ref:l!==void 0?l:null,props:u}}return ml.Fragment=t,ml.jsx=s,ml.jsxs=s,ml}var Vb;function AS(){return Vb||(Vb=1,Dh.exports=DS()),Dh.exports}var a=AS(),Ah={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function RS(){if(Zb)return et;Zb=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function k(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function M(T,G,ue){this.props=T,this.context=G,this.refs=N,this.updater=ue||S}M.prototype.isReactComponent={},M.prototype.setState=function(T,G){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,G,"setState")},M.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=M.prototype;function R(T,G,ue){this.props=T,this.context=G,this.refs=N,this.updater=ue||S}var q=R.prototype=new _;q.constructor=R,j(q,M.prototype),q.isPureReactComponent=!0;var $=Array.isArray;function I(){}var D={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function L(T,G,ue){var Y=ue.ref;return{$$typeof:e,type:T,key:G,ref:Y!==void 0?Y:null,props:ue}}function V(T,G){return L(T.type,G,T.props)}function K(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function A(T){var G={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ue){return G[ue]})}var X=/\/+/g;function fe(T,G){return typeof T=="object"&&T!==null&&T.key!=null?A(""+T.key):G.toString(36)}function Se(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(I,I):(T.status="pending",T.then(function(G){T.status==="pending"&&(T.status="fulfilled",T.value=G)},function(G){T.status==="pending"&&(T.status="rejected",T.reason=G)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function z(T,G,ue,Y,ee){var Z=typeof T;(Z==="undefined"||Z==="boolean")&&(T=null);var te=!1;if(T===null)te=!0;else switch(Z){case"bigint":case"string":case"number":te=!0;break;case"object":switch(T.$$typeof){case e:case t:te=!0;break;case b:return te=T._init,z(te(T._payload),G,ue,Y,ee)}}if(te)return ee=ee(T),te=Y===""?"."+fe(T,0):Y,$(ee)?(ue="",te!=null&&(ue=te.replace(X,"$&/")+"/"),z(ee,G,ue,"",function(ke){return ke})):ee!=null&&(K(ee)&&(ee=V(ee,ue+(ee.key==null||T&&T.key===ee.key?"":(""+ee.key).replace(X,"$&/")+"/")+te)),G.push(ee)),1;te=0;var Q=Y===""?".":Y+":";if($(T))for(var se=0;se<T.length;se++)Y=T[se],Z=Q+fe(Y,se),te+=z(Y,G,ue,Z,ee);else if(se=k(T),typeof se=="function")for(T=se.call(T),se=0;!(Y=T.next()).done;)Y=Y.value,Z=Q+fe(Y,se++),te+=z(Y,G,ue,Z,ee);else if(Z==="object"){if(typeof T.then=="function")return z(Se(T),G,ue,Y,ee);throw G=String(T),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return te}function H(T,G,ue){if(T==null)return T;var Y=[],ee=0;return z(T,Y,"","",function(Z){return G.call(ue,Z,ee++)}),Y}function ae(T){if(T._status===-1){var G=T._result;G=G(),G.then(function(ue){(T._status===0||T._status===-1)&&(T._status=1,T._result=ue)},function(ue){(T._status===0||T._status===-1)&&(T._status=2,T._result=ue)}),T._status===-1&&(T._status=0,T._result=G)}if(T._status===1)return T._result.default;throw T._result}var ge=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ce={map:H,forEach:function(T,G,ue){H(T,function(){G.apply(this,arguments)},ue)},count:function(T){var G=0;return H(T,function(){G++}),G},toArray:function(T){return H(T,function(G){return G})||[]},only:function(T){if(!K(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return et.Activity=v,et.Children=ce,et.Component=M,et.Fragment=s,et.Profiler=l,et.PureComponent=R,et.StrictMode=i,et.Suspense=g,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,et.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},et.cache=function(T){return function(){return T.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(T,G,ue){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Y=j({},T.props),ee=T.key;if(G!=null)for(Z in G.key!==void 0&&(ee=""+G.key),G)!C.call(G,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&G.ref===void 0||(Y[Z]=G[Z]);var Z=arguments.length-2;if(Z===1)Y.children=ue;else if(1<Z){for(var te=Array(Z),Q=0;Q<Z;Q++)te[Q]=arguments[Q+2];Y.children=te}return L(T.type,ee,Y)},et.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},et.createElement=function(T,G,ue){var Y,ee={},Z=null;if(G!=null)for(Y in G.key!==void 0&&(Z=""+G.key),G)C.call(G,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ee[Y]=G[Y]);var te=arguments.length-2;if(te===1)ee.children=ue;else if(1<te){for(var Q=Array(te),se=0;se<te;se++)Q[se]=arguments[se+2];ee.children=Q}if(T&&T.defaultProps)for(Y in te=T.defaultProps,te)ee[Y]===void 0&&(ee[Y]=te[Y]);return L(T,Z,ee)},et.createRef=function(){return{current:null}},et.forwardRef=function(T){return{$$typeof:m,render:T}},et.isValidElement=K,et.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:ae}},et.memo=function(T,G){return{$$typeof:x,type:T,compare:G===void 0?null:G}},et.startTransition=function(T){var G=D.T,ue={};D.T=ue;try{var Y=T(),ee=D.S;ee!==null&&ee(ue,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(I,ge)}catch(Z){ge(Z)}finally{G!==null&&ue.types!==null&&(G.types=ue.types),D.T=G}},et.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},et.use=function(T){return D.H.use(T)},et.useActionState=function(T,G,ue){return D.H.useActionState(T,G,ue)},et.useCallback=function(T,G){return D.H.useCallback(T,G)},et.useContext=function(T){return D.H.useContext(T)},et.useDebugValue=function(){},et.useDeferredValue=function(T,G){return D.H.useDeferredValue(T,G)},et.useEffect=function(T,G){return D.H.useEffect(T,G)},et.useEffectEvent=function(T){return D.H.useEffectEvent(T)},et.useId=function(){return D.H.useId()},et.useImperativeHandle=function(T,G,ue){return D.H.useImperativeHandle(T,G,ue)},et.useInsertionEffect=function(T,G){return D.H.useInsertionEffect(T,G)},et.useLayoutEffect=function(T,G){return D.H.useLayoutEffect(T,G)},et.useMemo=function(T,G){return D.H.useMemo(T,G)},et.useOptimistic=function(T,G){return D.H.useOptimistic(T,G)},et.useReducer=function(T,G,ue){return D.H.useReducer(T,G,ue)},et.useRef=function(T){return D.H.useRef(T)},et.useState=function(T){return D.H.useState(T)},et.useSyncExternalStore=function(T,G,ue){return D.H.useSyncExternalStore(T,G,ue)},et.useTransition=function(){return D.H.useTransition()},et.version="19.2.0",et}var Wb;function _m(){return Wb||(Wb=1,Ah.exports=RS()),Ah.exports}var h=_m();const Ft=d0(h);var Rh={exports:{}},pl={},Oh={exports:{}},zh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function OS(){return Qb||(Qb=1,(function(e){function t(z,H){var ae=z.length;z.push(H);e:for(;0<ae;){var ge=ae-1>>>1,ce=z[ge];if(0<l(ce,H))z[ge]=H,z[ae]=ce,ae=ge;else break e}}function s(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var H=z[0],ae=z.pop();if(ae!==H){z[0]=ae;e:for(var ge=0,ce=z.length,T=ce>>>1;ge<T;){var G=2*(ge+1)-1,ue=z[G],Y=G+1,ee=z[Y];if(0>l(ue,ae))Y<ce&&0>l(ee,ue)?(z[ge]=ee,z[Y]=ae,ge=Y):(z[ge]=ue,z[G]=ae,ge=G);else if(Y<ce&&0>l(ee,ae))z[ge]=ee,z[Y]=ae,ge=Y;else break e}}return H}function l(z,H){var ae=z.sortIndex-H.sortIndex;return ae!==0?ae:z.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var g=[],x=[],b=1,v=null,y=3,k=!1,S=!1,j=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function q(z){for(var H=s(x);H!==null;){if(H.callback===null)i(x);else if(H.startTime<=z)i(x),H.sortIndex=H.expirationTime,t(g,H);else break;H=s(x)}}function $(z){if(j=!1,q(z),!S)if(s(g)!==null)S=!0,I||(I=!0,A());else{var H=s(x);H!==null&&Se($,H.startTime-z)}}var I=!1,D=-1,C=5,L=-1;function V(){return N?!0:!(e.unstable_now()-L<C)}function K(){if(N=!1,I){var z=e.unstable_now();L=z;var H=!0;try{e:{S=!1,j&&(j=!1,_(D),D=-1),k=!0;var ae=y;try{t:{for(q(z),v=s(g);v!==null&&!(v.expirationTime>z&&V());){var ge=v.callback;if(typeof ge=="function"){v.callback=null,y=v.priorityLevel;var ce=ge(v.expirationTime<=z);if(z=e.unstable_now(),typeof ce=="function"){v.callback=ce,q(z),H=!0;break t}v===s(g)&&i(g),q(z)}else i(g);v=s(g)}if(v!==null)H=!0;else{var T=s(x);T!==null&&Se($,T.startTime-z),H=!1}}break e}finally{v=null,y=ae,k=!1}H=void 0}}finally{H?A():I=!1}}}var A;if(typeof R=="function")A=function(){R(K)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,fe=X.port2;X.port1.onmessage=K,A=function(){fe.postMessage(null)}}else A=function(){M(K,0)};function Se(z,H){D=M(function(){z(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(z){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var ae=y;y=H;try{return z()}finally{y=ae}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ae=y;y=z;try{return H()}finally{y=ae}},e.unstable_scheduleCallback=function(z,H,ae){var ge=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ge+ae:ge):ae=ge,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ae+ce,z={id:b++,callback:H,priorityLevel:z,startTime:ae,expirationTime:ce,sortIndex:-1},ae>ge?(z.sortIndex=ae,t(x,z),s(g)===null&&z===s(x)&&(j?(_(D),D=-1):j=!0,Se($,ae-ge))):(z.sortIndex=ce,t(g,z),S||k||(S=!0,I||(I=!0,A()))),z},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(z){var H=y;return function(){var ae=y;y=H;try{return z.apply(this,arguments)}finally{y=ae}}}})(zh)),zh}var Kb;function zS(){return Kb||(Kb=1,Oh.exports=OS()),Oh.exports}var Lh={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function LS(){if(Gb)return er;Gb=1;var e=_m();function t(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,x,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:x,implementation:b}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,er.createPortal=function(g,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return u(g,x,null,b)},er.flushSync=function(g){var x=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=x,i.p=b,i.d.f()}},er.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},er.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},er.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var b=x.as,v=m(b,x.crossOrigin),y=typeof x.integrity=="string"?x.integrity:void 0,k=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:k}):b==="script"&&i.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:k,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},er.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=m(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},er.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,v=m(b,x.crossOrigin);i.d.L(g,b,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},er.preloadModule=function(g,x){if(typeof g=="string")if(x){var b=m(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},er.requestFormReset=function(g){i.d.r(g)},er.unstable_batchedUpdates=function(g,x){return g(x)},er.useFormState=function(g,x,b){return d.H.useFormState(g,x,b)},er.useFormStatus=function(){return d.H.useHostTransitionStatus()},er.version="19.2.0",er}var Yb;function f0(){if(Yb)return Lh.exports;Yb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lh.exports=LS(),Lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function US(){if(Xb)return pl;Xb=1;var e=zS(),t=_m(),s=f0();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function x(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return g(f),n;if(p===c)return g(f),r;p=p.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=p;else{for(var w=!1,E=f.child;E;){if(E===o){w=!0,o=f,c=p;break}if(E===c){w=!0,c=f,o=p;break}E=E.sibling}if(!w){for(E=p.child;E;){if(E===o){w=!0,o=p,c=f;break}if(E===c){w=!0,c=p,o=f;break}E=E.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),R=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function A(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var X=Symbol.for("react.client.reference");function fe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===X?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case M:return"Profiler";case N:return"StrictMode";case $:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case R:return n.displayName||"Context";case _:return(n._context.displayName||"Context")+".Consumer";case q:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return r=n.displayName||null,r!==null?r:fe(n.type)||"Memo";case C:r=n._payload,n=n._init;try{return fe(n(r))}catch{}}return null}var Se=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ge=[],ce=-1;function T(n){return{current:n}}function G(n){0>ce||(n.current=ge[ce],ge[ce]=null,ce--)}function ue(n,r){ce++,ge[ce]=n.current,n.current=r}var Y=T(null),ee=T(null),Z=T(null),te=T(null);function Q(n,r){switch(ue(Z,r),ue(ee,n),ue(Y,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?hb(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=hb(r),n=mb(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(Y),ue(Y,n)}function se(){G(Y),G(ee),G(Z)}function ke(n){n.memoizedState!==null&&ue(te,n);var r=Y.current,o=mb(r,n.type);r!==o&&(ue(ee,n),ue(Y,o))}function Me(n){ee.current===n&&(G(Y),G(ee)),te.current===n&&(G(te),ul._currentValue=ae)}var We,st;function Ve(n){if(We===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);We=r&&r[1]||"",st=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+n+st}var $e=!1;function gt(n,r){if(!n||$e)return"";$e=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(me){var le=me}Reflect.construct(n,[],je)}else{try{je.call()}catch(me){le=me}n.call(je.prototype)}}else{try{throw Error()}catch(me){le=me}(je=n())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(me){if(me&&le&&typeof me.stack=="string")return[me.stack,le.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],E=p[1];if(w&&E){var B=w.split(`
`),oe=E.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<oe.length&&!oe[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===oe.length)for(c=B.length-1,f=oe.length-1;1<=c&&0<=f&&B[c]!==oe[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==oe[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==oe[f]){var xe=`
`+B[c].replace(" at new "," at ");return n.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",n.displayName)),xe}while(1<=c&&0<=f);break}}}finally{$e=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ve(o):""}function xt(n,r){switch(n.tag){case 26:case 27:case 5:return Ve(n.type);case 16:return Ve("Lazy");case 13:return n.child!==r&&r!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return gt(n.type,!1);case 11:return gt(n.type.render,!1);case 1:return gt(n.type,!0);case 31:return Ve("Activity");default:return""}}function Oe(n){try{var r="",o=null;do r+=xt(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Qe=Object.prototype.hasOwnProperty,O=e.unstable_scheduleCallback,U=e.unstable_cancelCallback,ne=e.unstable_shouldYield,be=e.unstable_requestPaint,Ne=e.unstable_now,Ce=e.unstable_getCurrentPriorityLevel,ze=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,_e=e.unstable_NormalPriority,Be=e.unstable_LowPriority,ht=e.unstable_IdlePriority,it=e.log,bn=e.unstable_setDisableYieldValue,Dt=null,jt=null;function ut(n){if(typeof it=="function"&&bn(n),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(Dt,n)}catch{}}var Ut=Math.clz32?Math.clz32:Ae,In=Math.log,he=Math.LN2;function Ae(n){return n>>>=0,n===0?32:31-(In(n)/he|0)|0}var ot=256,_n=262144,at=4194304;function kt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function At(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~p,c!==0?f=kt(c):(w&=E,w!==0?f=kt(w):o||(o=E&~n,o!==0&&(f=kt(o))))):(E=c&~p,E!==0?f=kt(E):w!==0?f=kt(w):o||(o=c&~n,o!==0&&(f=kt(o)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:f}function on(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function hn(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var n=at;return at<<=1,(at&62914560)===0&&(at=4194304),n}function vn(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Mn(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function tn(n,r,o,c,f,p){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,B=n.expirationTimes,oe=n.hiddenUpdates;for(o=w&~o;0<o;){var xe=31-Ut(o),je=1<<xe;E[xe]=0,B[xe]=-1;var le=oe[xe];if(le!==null)for(oe[xe]=null,xe=0;xe<le.length;xe++){var me=le[xe];me!==null&&(me.lane&=-536870913)}o&=~je}c!==0&&Gn(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~r))}function Gn(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Ut(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Hn(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Ut(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function Un(n,r){var o=r&-r;return o=(o&42)!==0?1:br(o),(o&(n.suspendedLanes|r))!==0?0:o}function br(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function sr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Yn(){var n=H.p;return n!==0?n:(n=window.event,n===void 0?32:Ub(n.type))}function vr(n,r){var o=H.p;try{return H.p=n,r()}finally{H.p=o}}var Tn=Math.random().toString(36).slice(2),ln="__reactFiber$"+Tn,Dn="__reactProps$"+Tn,ps="__reactContainer$"+Tn,Ms="__reactEvents$"+Tn,qa="__reactListeners$"+Tn,Si="__reactHandles$"+Tn,St="__reactResources$"+Tn,Ur="__reactMarker$"+Tn;function ar(n){delete n[ln],delete n[Dn],delete n[Ms],delete n[qa],delete n[Si]}function Xr(n){var r=n[ln];if(r)return r;for(var o=n.parentNode;o;){if(r=o[ps]||o[ln]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=wb(n);n!==null;){if(o=n[ln])return o;n=wb(n)}return r}n=o,o=n.parentNode}return null}function ir(n){if(n=n[ln]||n[ps]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function or(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function gs(n){var r=n[St];return r||(r=n[St]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Yt(n){n[Ur]=!0}var ki=new Set,ta={};function lr(n,r){Jr(n,r),Jr(n+"Capture",r)}function Jr(n,r){for(ta[n]=r,n=0;n<r.length;n++)ki.add(r[n])}var F=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pe={},ve={};function Re(n){return Qe.call(ve,n)?!0:Qe.call(pe,n)?!1:F.test(n)?ve[n]=!0:(pe[n]=!0,!1)}function Xe(n,r,o){if(Re(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function bt(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Le(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function vt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qt(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Fa(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Pa(n){if(!n._valueTracker){var r=Qt(n)?"checked":"value";n._valueTracker=Fa(n,r,""+n[r])}}function Ql(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=Qt(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function na(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ia=/[\n"\\]/g;function cr(n){return n.replace(Ia,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function $r(n,r,o,c,f,p,w,E){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),r!=null?w==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+vt(r)):n.value!==""+vt(r)&&(n.value=""+vt(r)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),r!=null?Co(n,w,vt(r)):o!=null?Co(n,w,vt(o)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+vt(E):n.removeAttribute("name")}function Ts(n,r,o,c,f,p,w,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){Pa(n);return}o=o!=null?""+vt(o):"",r=r!=null?""+vt(r):o,E||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),Pa(n)}function Co(n,r,o){r==="number"&&na(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ds(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+vt(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Kl(n,r,o){if(r!=null&&(r=""+vt(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+vt(o):""}function Ke(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Se(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=vt(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Pa(n)}function yr(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Ni=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||Ni.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Yl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Gl(n,f,c)}else for(var p in r)r.hasOwnProperty(p)&&Gl(n,p,r[p])}function Vn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var As=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wr(n){return jd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Xn(){}var ra=null;function sa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var aa=null,xs=null;function Xl(n){var r=ir(n);if(r&&(n=r.stateNode)){var o=n[Dn]||null;e:switch(n=r.stateNode,r.type){case"input":if($r(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+cr(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[Dn]||null;if(!f)throw Error(i(90));$r(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&Ql(c)}break e;case"textarea":Kl(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Ds(n,!!o.multiple,r,!1)}}}var bs=!1;function yn(n,r,o){if(bs)return n(r,o);bs=!0;try{var c=n(r);return c}finally{if(bs=!1,(aa!==null||xs!==null)&&(Ic(),aa&&(r=aa,n=xs,xs=aa=null,Xl(r),n)))for(r=0;r<n.length;r++)Xl(n[r])}}function Ha(n,r){var o=n.stateNode;if(o===null)return null;var c=o[Dn]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vs=!1;if(Jn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){vs=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{vs=!1}var es=null,jr=null,Br=null;function Ci(){if(Br)return Br;var n,r=jr,o=r.length,c,f="value"in es?es.value:es.textContent,p=f.length;for(n=0;n<o&&r[n]===f[n];n++);var w=o-n;for(c=1;c<=w&&r[o-c]===f[p-c];c++);return Br=f.slice(n,1<c?1-c:void 0)}function Va(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Os(){return!0}function Sr(){return!1}function tr(n){function r(o,c,f,p,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Os:Sr,this.isPropagationStopped=Sr,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),r}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=tr(ia),zs=v({},ia,{view:0,detail:0}),Jl=tr(zs),_i,Eo,ys,Mi=v({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Do,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ys&&(ys&&n.type==="mousemove"?(_i=n.screenX-ys.screenX,Eo=n.screenY-ys.screenY):Eo=_i=0,ys=n),_i)},movementY:function(n){return"movementY"in n?n.movementY:Eo}}),ec=tr(Mi),tc=v({},Mi,{dataTransfer:0}),Ti=tr(tc),Sd=v({},zs,{relatedTarget:0}),_o=tr(Sd),kd=v({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Di=tr(kd),ts=v({},ia,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Mo=tr(ts),To=v({},ia,{data:0}),Ai=tr(To),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Za={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cd(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Nd[n])?!!r[n]:!1}function Do(){return Cd}var Ed=v({},zs,{key:function(n){if(n.key){var r=oa[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Va(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Za[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Do,charCode:function(n){return n.type==="keypress"?Va(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Va(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ns=tr(Ed),_d=v({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=tr(_d),Md=v({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Do}),Td=tr(Md),Dd=v({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ri=tr(Dd),Ad=v({},Mi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Rd=tr(Ad),Od=v({},ia,{newState:0,oldState:0}),zd=tr(Od),Ld=[9,13,27,32],Oi=Jn&&"CompositionEvent"in window,Wa=null;Jn&&"documentMode"in document&&(Wa=document.documentMode);var Ud=Jn&&"TextEvent"in window&&!Wa,rc=Jn&&(!Oi||Wa&&8<Wa&&11>=Wa),sc=" ",ac=!1;function ic(n,r){switch(n){case"keyup":return Ld.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var la=!1;function $d(n,r){switch(n){case"compositionend":return oc(r);case"keypress":return r.which!==32?null:(ac=!0,sc);case"textInput":return n=r.data,n===sc&&ac?null:n;default:return null}}function Ao(n,r){if(la)return n==="compositionend"||!Oi&&ic(n,r)?(n=Ci(),Br=jr=es=null,la=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rc&&r.locale!=="ko"?null:r.data;default:return null}}var P={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function de(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!P[n.type]:r==="textarea"}function Ue(n,r,o,c){aa?xs?xs.push(c):xs=[c]:aa=c,r=Gc(r,"onChange"),0<r.length&&(o=new Ei("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var De=null,He=null;function mt(n){ob(n,0)}function rt(n){var r=or(n);if(Ql(r))return n}function nn(n,r){if(n==="change")return r}var ca=!1;if(Jn){var An;if(Jn){var Pt="oninput"in document;if(!Pt){var It=document.createElement("div");It.setAttribute("oninput","return;"),Pt=typeof It.oninput=="function"}An=Pt}else An=!1;ca=An&&(!document.documentMode||9<document.documentMode)}function rs(){De&&(De.detachEvent("onpropertychange",ua),He=De=null)}function ua(n){if(n.propertyName==="value"&&rt(He)){var r=[];Ue(r,He,n,sa(n)),yn(mt,r)}}function lc(n,r,o){n==="focusin"?(rs(),De=r,He=o,De.attachEvent("onpropertychange",ua)):n==="focusout"&&rs()}function Ro(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rt(He)}function o1(n,r){if(n==="click")return rt(r)}function l1(n,r){if(n==="input"||n==="change")return rt(r)}function c1(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var kr=typeof Object.is=="function"?Object.is:c1;function Oo(n,r){if(kr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Qe.call(r,f)||!kr(n[f],r[f]))return!1}return!0}function Dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ap(n,r){var o=Dp(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Dp(o)}}function Rp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Rp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Op(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=na(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=na(n.document)}return r}function Bd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var u1=Jn&&"documentMode"in document&&11>=document.documentMode,zi=null,qd=null,zo=null,Fd=!1;function zp(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Fd||zi==null||zi!==na(c)||(c=zi,"selectionStart"in c&&Bd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zo&&Oo(zo,c)||(zo=c,c=Gc(qd,"onSelect"),0<c.length&&(r=new Ei("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=zi)))}function Qa(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Li={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Pd={},Lp={};Jn&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function Ka(n){if(Pd[n])return Pd[n];if(!Li[n])return n;var r=Li[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Lp)return Pd[n]=r[o];return n}var Up=Ka("animationend"),$p=Ka("animationiteration"),Bp=Ka("animationstart"),d1=Ka("transitionrun"),f1=Ka("transitionstart"),h1=Ka("transitioncancel"),qp=Ka("transitionend"),Fp=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function ss(n,r){Fp.set(n,r),lr(r,[n])}var cc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qr=[],Ui=0,Hd=0;function uc(){for(var n=Ui,r=Hd=Ui=0;r<n;){var o=qr[r];qr[r++]=null;var c=qr[r];qr[r++]=null;var f=qr[r];qr[r++]=null;var p=qr[r];if(qr[r++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}p!==0&&Pp(o,f,p)}}function dc(n,r,o,c){qr[Ui++]=n,qr[Ui++]=r,qr[Ui++]=o,qr[Ui++]=c,Hd|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Vd(n,r,o,c){return dc(n,r,o,c),fc(n)}function Ga(n,r){return dc(n,null,null,r),fc(n)}function Pp(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&r!==null&&(f=31-Ut(o),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),p):null}function fc(n){if(50<rl)throw rl=0,th=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var $i={};function m1(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(n,r,o,c){return new m1(n,r,o,c)}function Zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ls(n,r){var o=n.alternate;return o===null?(o=Nr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Ip(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function hc(n,r,o,c,f,p){var w=0;if(c=n,typeof n=="function")Zd(n)&&(w=1);else if(typeof n=="string")w=vS(n,o,Y.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case L:return n=Nr(31,o,r,f),n.elementType=L,n.lanes=p,n;case j:return Ya(o.children,f,p,r);case N:w=8,f|=24;break;case M:return n=Nr(12,o,r,f|2),n.elementType=M,n.lanes=p,n;case $:return n=Nr(13,o,r,f),n.elementType=$,n.lanes=p,n;case I:return n=Nr(19,o,r,f),n.elementType=I,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:w=10;break e;case _:w=9;break e;case q:w=11;break e;case D:w=14;break e;case C:w=16,c=null;break e}w=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=Nr(w,o,r,f),r.elementType=n,r.type=c,r.lanes=p,r}function Ya(n,r,o,c){return n=Nr(7,n,c,r),n.lanes=o,n}function Wd(n,r,o){return n=Nr(6,n,null,r),n.lanes=o,n}function Hp(n){var r=Nr(18,null,null,0);return r.stateNode=n,r}function Qd(n,r,o){return r=Nr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Vp=new WeakMap;function Fr(n,r){if(typeof n=="object"&&n!==null){var o=Vp.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Oe(r)},Vp.set(n,r),r)}return{value:n,source:r,stack:Oe(r)}}var Bi=[],qi=0,mc=null,Lo=0,Pr=[],Ir=0,da=null,ws=1,js="";function Us(n,r){Bi[qi++]=Lo,Bi[qi++]=mc,mc=n,Lo=r}function Zp(n,r,o){Pr[Ir++]=ws,Pr[Ir++]=js,Pr[Ir++]=da,da=n;var c=ws;n=js;var f=32-Ut(c)-1;c&=~(1<<f),o+=1;var p=32-Ut(r)+f;if(30<p){var w=f-f%5;p=(c&(1<<w)-1).toString(32),c>>=w,f-=w,ws=1<<32-Ut(r)+f|o<<f|c,js=p+n}else ws=1<<p|o<<f|c,js=n}function Kd(n){n.return!==null&&(Us(n,1),Zp(n,1,0))}function Gd(n){for(;n===mc;)mc=Bi[--qi],Bi[qi]=null,Lo=Bi[--qi],Bi[qi]=null;for(;n===da;)da=Pr[--Ir],Pr[Ir]=null,js=Pr[--Ir],Pr[Ir]=null,ws=Pr[--Ir],Pr[Ir]=null}function Wp(n,r){Pr[Ir++]=ws,Pr[Ir++]=js,Pr[Ir++]=da,ws=r.id,js=r.overflow,da=n}var Zn=null,Kt=null,pt=!1,fa=null,Hr=!1,Yd=Error(i(519));function ha(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uo(Fr(r,n)),Yd}function Qp(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[ln]=n,r[Dn]=c,o){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(o=0;o<al.length;o++)ct(al[o],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":ct("invalid",r),Ts(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ct("invalid",r);break;case"textarea":ct("invalid",r),Ke(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||db(r.textContent,o)?(c.popover!=null&&(ct("beforetoggle",r),ct("toggle",r)),c.onScroll!=null&&ct("scroll",r),c.onScrollEnd!=null&&ct("scrollend",r),c.onClick!=null&&(r.onclick=Xn),r=!0):r=!1,r||ha(n,!0)}function Kp(n){for(Zn=n.return;Zn;)switch(Zn.tag){case 5:case 31:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Zn=Zn.return}}function Fi(n){if(n!==Zn)return!1;if(!pt)return Kp(n),pt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||gh(n.type,n.memoizedProps)),o=!o),o&&Kt&&ha(n),Kp(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Kt=yb(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Kt=yb(n)}else r===27?(r=Kt,Ea(n.type)?(n=wh,wh=null,Kt=n):Kt=r):Kt=Zn?Zr(n.stateNode.nextSibling):null;return!0}function Xa(){Kt=Zn=null,pt=!1}function Xd(){var n=fa;return n!==null&&(hr===null?hr=n:hr.push.apply(hr,n),fa=null),n}function Uo(n){fa===null?fa=[n]:fa.push(n)}var Jd=T(null),Ja=null,$s=null;function ma(n,r,o){ue(Jd,r._currentValue),r._currentValue=o}function Bs(n){n._currentValue=Jd.current,G(Jd)}function ef(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function tf(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=f;for(var B=0;B<r.length;B++)if(E.context===r[B]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),ef(p.return,o,n),c||(w=null);break e}p=E.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(i(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),ef(w,o,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Pi(n,r,o,c){n=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var E=f.type;kr(f.pendingProps.value,w.value)||(n!==null?n.push(E):n=[E])}}else if(f===te.current){if(w=f.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ul):n=[ul])}f=f.return}n!==null&&tf(r,n,o,c),r.flags|=262144}function pc(n){for(n=n.firstContext;n!==null;){if(!kr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ei(n){Ja=n,$s=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wn(n){return Gp(Ja,n)}function gc(n,r){return Ja===null&&ei(n),Gp(n,r)}function Gp(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},$s===null){if(n===null)throw Error(i(308));$s=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else $s=$s.next=r;return o}var p1=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},g1=e.unstable_scheduleCallback,x1=e.unstable_NormalPriority,wn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nf(){return{controller:new p1,data:new Map,refCount:0}}function $o(n){n.refCount--,n.refCount===0&&g1(x1,function(){n.controller.abort()})}var Bo=null,rf=0,Ii=0,Hi=null;function b1(n,r){if(Bo===null){var o=Bo=[];rf=0,Ii=oh(),Hi={status:"pending",value:void 0,then:function(c){o.push(c)}}}return rf++,r.then(Yp,Yp),r}function Yp(){if(--rf===0&&Bo!==null){Hi!==null&&(Hi.status="fulfilled");var n=Bo;Bo=null,Ii=0,Hi=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function v1(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Xp=z.S;z.S=function(n,r){zx=Ne(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&b1(n,r),Xp!==null&&Xp(n,r)};var ti=T(null);function sf(){var n=ti.current;return n!==null?n:Ht.pooledCache}function xc(n,r){r===null?ue(ti,ti.current):ue(ti,r.pool)}function Jp(){var n=sf();return n===null?null:{parent:wn._currentValue,pool:n}}var Vi=Error(i(460)),af=Error(i(474)),bc=Error(i(542)),vc={then:function(){}};function eg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function tg(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Xn,Xn),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,rg(n),n;default:if(typeof r.status=="string")r.then(Xn,Xn);else{if(n=Ht,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,rg(n),n}throw ri=r,Vi}}function ni(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ri=o,Vi):o}}var ri=null;function ng(){if(ri===null)throw Error(i(459));var n=ri;return ri=null,n}function rg(n){if(n===Vi||n===bc)throw Error(i(483))}var Zi=null,qo=0;function yc(n){var r=qo;return qo+=1,Zi===null&&(Zi=[]),tg(Zi,n,r)}function Fo(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function wc(n,r){throw r.$$typeof===y?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function sg(n){function r(J,W){if(n){var ie=J.deletions;ie===null?(J.deletions=[W],J.flags|=16):ie.push(W)}}function o(J,W){if(!n)return null;for(;W!==null;)r(J,W),W=W.sibling;return null}function c(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function f(J,W){return J=Ls(J,W),J.index=0,J.sibling=null,J}function p(J,W,ie){return J.index=ie,n?(ie=J.alternate,ie!==null?(ie=ie.index,ie<W?(J.flags|=67108866,W):ie):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function w(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function E(J,W,ie,we){return W===null||W.tag!==6?(W=Wd(ie,J.mode,we),W.return=J,W):(W=f(W,ie),W.return=J,W)}function B(J,W,ie,we){var Ze=ie.type;return Ze===j?xe(J,W,ie.props.children,we,ie.key):W!==null&&(W.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===C&&ni(Ze)===W.type)?(W=f(W,ie.props),Fo(W,ie),W.return=J,W):(W=hc(ie.type,ie.key,ie.props,null,J.mode,we),Fo(W,ie),W.return=J,W)}function oe(J,W,ie,we){return W===null||W.tag!==4||W.stateNode.containerInfo!==ie.containerInfo||W.stateNode.implementation!==ie.implementation?(W=Qd(ie,J.mode,we),W.return=J,W):(W=f(W,ie.children||[]),W.return=J,W)}function xe(J,W,ie,we,Ze){return W===null||W.tag!==7?(W=Ya(ie,J.mode,we,Ze),W.return=J,W):(W=f(W,ie),W.return=J,W)}function je(J,W,ie){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Wd(""+W,J.mode,ie),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case k:return ie=hc(W.type,W.key,W.props,null,J.mode,ie),Fo(ie,W),ie.return=J,ie;case S:return W=Qd(W,J.mode,ie),W.return=J,W;case C:return W=ni(W),je(J,W,ie)}if(Se(W)||A(W))return W=Ya(W,J.mode,ie,null),W.return=J,W;if(typeof W.then=="function")return je(J,yc(W),ie);if(W.$$typeof===R)return je(J,gc(J,W),ie);wc(J,W)}return null}function le(J,W,ie,we){var Ze=W!==null?W.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ze!==null?null:E(J,W,""+ie,we);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case k:return ie.key===Ze?B(J,W,ie,we):null;case S:return ie.key===Ze?oe(J,W,ie,we):null;case C:return ie=ni(ie),le(J,W,ie,we)}if(Se(ie)||A(ie))return Ze!==null?null:xe(J,W,ie,we,null);if(typeof ie.then=="function")return le(J,W,yc(ie),we);if(ie.$$typeof===R)return le(J,W,gc(J,ie),we);wc(J,ie)}return null}function me(J,W,ie,we,Ze){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return J=J.get(ie)||null,E(W,J,""+we,Ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case k:return J=J.get(we.key===null?ie:we.key)||null,B(W,J,we,Ze);case S:return J=J.get(we.key===null?ie:we.key)||null,oe(W,J,we,Ze);case C:return we=ni(we),me(J,W,ie,we,Ze)}if(Se(we)||A(we))return J=J.get(ie)||null,xe(W,J,we,Ze,null);if(typeof we.then=="function")return me(J,W,ie,yc(we),Ze);if(we.$$typeof===R)return me(J,W,ie,gc(W,we),Ze);wc(W,we)}return null}function qe(J,W,ie,we){for(var Ze=null,Nt=null,Pe=W,nt=W=0,ft=null;Pe!==null&&nt<ie.length;nt++){Pe.index>nt?(ft=Pe,Pe=null):ft=Pe.sibling;var Ct=le(J,Pe,ie[nt],we);if(Ct===null){Pe===null&&(Pe=ft);break}n&&Pe&&Ct.alternate===null&&r(J,Pe),W=p(Ct,W,nt),Nt===null?Ze=Ct:Nt.sibling=Ct,Nt=Ct,Pe=ft}if(nt===ie.length)return o(J,Pe),pt&&Us(J,nt),Ze;if(Pe===null){for(;nt<ie.length;nt++)Pe=je(J,ie[nt],we),Pe!==null&&(W=p(Pe,W,nt),Nt===null?Ze=Pe:Nt.sibling=Pe,Nt=Pe);return pt&&Us(J,nt),Ze}for(Pe=c(Pe);nt<ie.length;nt++)ft=me(Pe,J,nt,ie[nt],we),ft!==null&&(n&&ft.alternate!==null&&Pe.delete(ft.key===null?nt:ft.key),W=p(ft,W,nt),Nt===null?Ze=ft:Nt.sibling=ft,Nt=ft);return n&&Pe.forEach(function(Aa){return r(J,Aa)}),pt&&Us(J,nt),Ze}function Ge(J,W,ie,we){if(ie==null)throw Error(i(151));for(var Ze=null,Nt=null,Pe=W,nt=W=0,ft=null,Ct=ie.next();Pe!==null&&!Ct.done;nt++,Ct=ie.next()){Pe.index>nt?(ft=Pe,Pe=null):ft=Pe.sibling;var Aa=le(J,Pe,Ct.value,we);if(Aa===null){Pe===null&&(Pe=ft);break}n&&Pe&&Aa.alternate===null&&r(J,Pe),W=p(Aa,W,nt),Nt===null?Ze=Aa:Nt.sibling=Aa,Nt=Aa,Pe=ft}if(Ct.done)return o(J,Pe),pt&&Us(J,nt),Ze;if(Pe===null){for(;!Ct.done;nt++,Ct=ie.next())Ct=je(J,Ct.value,we),Ct!==null&&(W=p(Ct,W,nt),Nt===null?Ze=Ct:Nt.sibling=Ct,Nt=Ct);return pt&&Us(J,nt),Ze}for(Pe=c(Pe);!Ct.done;nt++,Ct=ie.next())Ct=me(Pe,J,nt,Ct.value,we),Ct!==null&&(n&&Ct.alternate!==null&&Pe.delete(Ct.key===null?nt:Ct.key),W=p(Ct,W,nt),Nt===null?Ze=Ct:Nt.sibling=Ct,Nt=Ct);return n&&Pe.forEach(function(TS){return r(J,TS)}),pt&&Us(J,nt),Ze}function qt(J,W,ie,we){if(typeof ie=="object"&&ie!==null&&ie.type===j&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case k:e:{for(var Ze=ie.key;W!==null;){if(W.key===Ze){if(Ze=ie.type,Ze===j){if(W.tag===7){o(J,W.sibling),we=f(W,ie.props.children),we.return=J,J=we;break e}}else if(W.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===C&&ni(Ze)===W.type){o(J,W.sibling),we=f(W,ie.props),Fo(we,ie),we.return=J,J=we;break e}o(J,W);break}else r(J,W);W=W.sibling}ie.type===j?(we=Ya(ie.props.children,J.mode,we,ie.key),we.return=J,J=we):(we=hc(ie.type,ie.key,ie.props,null,J.mode,we),Fo(we,ie),we.return=J,J=we)}return w(J);case S:e:{for(Ze=ie.key;W!==null;){if(W.key===Ze)if(W.tag===4&&W.stateNode.containerInfo===ie.containerInfo&&W.stateNode.implementation===ie.implementation){o(J,W.sibling),we=f(W,ie.children||[]),we.return=J,J=we;break e}else{o(J,W);break}else r(J,W);W=W.sibling}we=Qd(ie,J.mode,we),we.return=J,J=we}return w(J);case C:return ie=ni(ie),qt(J,W,ie,we)}if(Se(ie))return qe(J,W,ie,we);if(A(ie)){if(Ze=A(ie),typeof Ze!="function")throw Error(i(150));return ie=Ze.call(ie),Ge(J,W,ie,we)}if(typeof ie.then=="function")return qt(J,W,yc(ie),we);if(ie.$$typeof===R)return qt(J,W,gc(J,ie),we);wc(J,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,W!==null&&W.tag===6?(o(J,W.sibling),we=f(W,ie),we.return=J,J=we):(o(J,W),we=Wd(ie,J.mode,we),we.return=J,J=we),w(J)):o(J,W)}return function(J,W,ie,we){try{qo=0;var Ze=qt(J,W,ie,we);return Zi=null,Ze}catch(Pe){if(Pe===Vi||Pe===bc)throw Pe;var Nt=Nr(29,Pe,null,J.mode);return Nt.lanes=we,Nt.return=J,Nt}finally{}}}var si=sg(!0),ag=sg(!1),pa=!1;function of(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ga(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function xa(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Et&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=fc(n),Pp(n,null,o),r}return dc(n,c,r,o),fc(n)}function Po(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Hn(n,o)}}function cf(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var uf=!1;function Io(){if(uf){var n=Hi;if(n!==null)throw n}}function Ho(n,r,o,c){uf=!1;var f=n.updateQueue;pa=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var B=E,oe=B.next;B.next=null,w===null?p=oe:w.next=oe,w=B;var xe=n.alternate;xe!==null&&(xe=xe.updateQueue,E=xe.lastBaseUpdate,E!==w&&(E===null?xe.firstBaseUpdate=oe:E.next=oe,xe.lastBaseUpdate=B))}if(p!==null){var je=f.baseState;w=0,xe=oe=B=null,E=p;do{var le=E.lane&-536870913,me=le!==E.lane;if(me?(dt&le)===le:(c&le)===le){le!==0&&le===Ii&&(uf=!0),xe!==null&&(xe=xe.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var qe=n,Ge=E;le=r;var qt=o;switch(Ge.tag){case 1:if(qe=Ge.payload,typeof qe=="function"){je=qe.call(qt,je,le);break e}je=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ge.payload,le=typeof qe=="function"?qe.call(qt,je,le):qe,le==null)break e;je=v({},je,le);break e;case 2:pa=!0}}le=E.callback,le!==null&&(n.flags|=64,me&&(n.flags|=8192),me=f.callbacks,me===null?f.callbacks=[le]:me.push(le))}else me={lane:le,tag:E.tag,payload:E.payload,callback:E.callback,next:null},xe===null?(oe=xe=me,B=je):xe=xe.next=me,w|=le;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;me=E,E=me.next,me.next=null,f.lastBaseUpdate=me,f.shared.pending=null}}while(!0);xe===null&&(B=je),f.baseState=B,f.firstBaseUpdate=oe,f.lastBaseUpdate=xe,p===null&&(f.shared.lanes=0),ja|=w,n.lanes=w,n.memoizedState=je}}function ig(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function og(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)ig(o[n],r)}var Wi=T(null),jc=T(0);function lg(n,r){n=Qs,ue(jc,n),ue(Wi,r),Qs=n|r.baseLanes}function df(){ue(jc,Qs),ue(Wi,Wi.current)}function ff(){Qs=jc.current,G(Wi),G(jc)}var Cr=T(null),Vr=null;function ba(n){var r=n.alternate;ue(pn,pn.current&1),ue(Cr,n),Vr===null&&(r===null||Wi.current!==null||r.memoizedState!==null)&&(Vr=n)}function hf(n){ue(pn,pn.current),ue(Cr,n),Vr===null&&(Vr=n)}function cg(n){n.tag===22?(ue(pn,pn.current),ue(Cr,n),Vr===null&&(Vr=n)):va()}function va(){ue(pn,pn.current),ue(Cr,Cr.current)}function Er(n){G(Cr),Vr===n&&(Vr=null),G(pn)}var pn=T(0);function Sc(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||vh(o)||yh(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qs=0,tt=null,$t=null,jn=null,kc=!1,Qi=!1,ai=!1,Nc=0,Vo=0,Ki=null,y1=0;function cn(){throw Error(i(321))}function mf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!kr(n[o],r[o]))return!1;return!0}function pf(n,r,o,c,f,p){return qs=p,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=n===null||n.memoizedState===null?Zg:Tf,ai=!1,p=o(c,f),ai=!1,Qi&&(p=dg(r,o,c,f)),ug(n),p}function ug(n){z.H=Qo;var r=$t!==null&&$t.next!==null;if(qs=0,jn=$t=tt=null,kc=!1,Vo=0,Ki=null,r)throw Error(i(300));n===null||Sn||(n=n.dependencies,n!==null&&pc(n)&&(Sn=!0))}function dg(n,r,o,c){tt=n;var f=0;do{if(Qi&&(Ki=null),Vo=0,Qi=!1,25<=f)throw Error(i(301));if(f+=1,jn=$t=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}z.H=Wg,p=r(o,c)}while(Qi);return p}function w1(){var n=z.H,r=n.useState()[0];return r=typeof r.then=="function"?Zo(r):r,n=n.useState()[0],($t!==null?$t.memoizedState:null)!==n&&(tt.flags|=1024),r}function gf(){var n=Nc!==0;return Nc=0,n}function xf(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function bf(n){if(kc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}kc=!1}qs=0,jn=$t=tt=null,Qi=!1,Vo=Nc=0,Ki=null}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?tt.memoizedState=jn=n:jn=jn.next=n,jn}function gn(){if($t===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var r=jn===null?tt.memoizedState:jn.next;if(r!==null)jn=r,$t=n;else{if(n===null)throw tt.alternate===null?Error(i(467)):Error(i(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},jn===null?tt.memoizedState=jn=n:jn=jn.next=n}return jn}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(n){var r=Vo;return Vo+=1,Ki===null&&(Ki=[]),n=tg(Ki,n,r),r=tt,(jn===null?r.memoizedState:jn.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?Zg:Tf),n}function Ec(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Zo(n);if(n.$$typeof===R)return Wn(n)}throw Error(i(438,String(n)))}function vf(n){var r=null,o=tt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Cc(),tt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=V;return r.index++,o}function Fs(n,r){return typeof r=="function"?r(n):r}function _c(n){var r=gn();return yf(r,$t,n)}function yf(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}r.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{r=f.next;var E=w=null,B=null,oe=r,xe=!1;do{var je=oe.lane&-536870913;if(je!==oe.lane?(dt&je)===je:(qs&je)===je){var le=oe.revertLane;if(le===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),je===Ii&&(xe=!0);else if((qs&le)===le){oe=oe.next,le===Ii&&(xe=!0);continue}else je={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},B===null?(E=B=je,w=p):B=B.next=je,tt.lanes|=le,ja|=le;je=oe.action,ai&&o(p,je),p=oe.hasEagerState?oe.eagerState:o(p,je)}else le={lane:je,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},B===null?(E=B=le,w=p):B=B.next=le,tt.lanes|=je,ja|=je;oe=oe.next}while(oe!==null&&oe!==r);if(B===null?w=p:B.next=E,!kr(p,n.memoizedState)&&(Sn=!0,xe&&(o=Hi,o!==null)))throw o;n.memoizedState=p,n.baseState=w,n.baseQueue=B,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function wf(n){var r=gn(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=n(p,w.action),w=w.next;while(w!==f);kr(p,r.memoizedState)||(Sn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,c]}function fg(n,r,o){var c=tt,f=gn(),p=pt;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=r();var w=!kr(($t||f).memoizedState,o);if(w&&(f.memoizedState=o,Sn=!0),f=f.queue,kf(pg.bind(null,c,f,n),[n]),f.getSnapshot!==r||w||jn!==null&&jn.memoizedState.tag&1){if(c.flags|=2048,Gi(9,{destroy:void 0},mg.bind(null,c,f,o,r),null),Ht===null)throw Error(i(349));p||(qs&127)!==0||hg(c,r,o)}return o}function hg(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=tt.updateQueue,r===null?(r=Cc(),tt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function mg(n,r,o,c){r.value=o,r.getSnapshot=c,gg(r)&&xg(n)}function pg(n,r,o){return o(function(){gg(r)&&xg(n)})}function gg(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!kr(n,o)}catch{return!0}}function xg(n){var r=Ga(n,2);r!==null&&mr(r,n,2)}function jf(n){var r=nr();if(typeof n=="function"){var o=n;if(n=o(),ai){ut(!0);try{o()}finally{ut(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:n},r}function bg(n,r,o,c){return n.baseState=o,yf(n,$t,typeof c=="function"?c:Fs)}function j1(n,r,o,c,f){if(Dc(n))throw Error(i(485));if(n=r.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};z.T!==null?o(!0):p.isTransition=!1,c(p),o=r.pending,o===null?(p.next=r.pending=p,vg(r,p)):(p.next=o.next,r.pending=o.next=p)}}function vg(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var p=z.T,w={};z.T=w;try{var E=o(f,c),B=z.S;B!==null&&B(w,E),yg(n,r,E)}catch(oe){Sf(n,r,oe)}finally{p!==null&&w.types!==null&&(p.types=w.types),z.T=p}}else try{p=o(f,c),yg(n,r,p)}catch(oe){Sf(n,r,oe)}}function yg(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){wg(n,r,c)},function(c){return Sf(n,r,c)}):wg(n,r,o)}function wg(n,r,o){r.status="fulfilled",r.value=o,jg(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,vg(n,o)))}function Sf(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,jg(r),r=r.next;while(r!==c)}n.action=null}function jg(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Sg(n,r){return r}function kg(n,r){if(pt){var o=Ht.formState;if(o!==null){e:{var c=tt;if(pt){if(Kt){t:{for(var f=Kt,p=Hr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Zr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Kt=Zr(f.nextSibling),c=f.data==="F!";break e}}ha(c)}c=!1}c&&(r=o[0])}}return o=nr(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:r},o.queue=c,o=Ig.bind(null,tt,c),c.dispatch=o,c=jf(!1),p=Mf.bind(null,tt,!1,c.queue),c=nr(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=j1.bind(null,tt,f,p,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function Ng(n){var r=gn();return Cg(r,$t,n)}function Cg(n,r,o){if(r=yf(n,r,Sg)[0],n=_c(Fs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Zo(r)}catch(w){throw w===Vi?bc:w}else c=r;r=gn();var f=r.queue,p=f.dispatch;return o!==r.memoizedState&&(tt.flags|=2048,Gi(9,{destroy:void 0},S1.bind(null,f,o),null)),[c,p,n]}function S1(n,r){n.action=r}function Eg(n){var r=gn(),o=$t;if(o!==null)return Cg(r,o,n);gn(),r=r.memoizedState,o=gn();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function Gi(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=tt.updateQueue,r===null&&(r=Cc(),tt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function _g(){return gn().memoizedState}function Mc(n,r,o,c){var f=nr();tt.flags|=n,f.memoizedState=Gi(1|r,{destroy:void 0},o,c===void 0?null:c)}function Tc(n,r,o,c){var f=gn();c=c===void 0?null:c;var p=f.memoizedState.inst;$t!==null&&c!==null&&mf(c,$t.memoizedState.deps)?f.memoizedState=Gi(r,p,o,c):(tt.flags|=n,f.memoizedState=Gi(1|r,p,o,c))}function Mg(n,r){Mc(8390656,8,n,r)}function kf(n,r){Tc(2048,8,n,r)}function k1(n){tt.flags|=4;var r=tt.updateQueue;if(r===null)r=Cc(),tt.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function Tg(n){var r=gn().memoizedState;return k1({ref:r,nextImpl:n}),function(){if((Et&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Dg(n,r){return Tc(4,2,n,r)}function Ag(n,r){return Tc(4,4,n,r)}function Rg(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Og(n,r,o){o=o!=null?o.concat([n]):null,Tc(4,4,Rg.bind(null,r,n),o)}function Nf(){}function zg(n,r){var o=gn();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&mf(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function Lg(n,r){var o=gn();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&mf(r,c[1]))return c[0];if(c=n(),ai){ut(!0);try{n()}finally{ut(!1)}}return o.memoizedState=[c,r],c}function Cf(n,r,o){return o===void 0||(qs&1073741824)!==0&&(dt&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=Ux(),tt.lanes|=n,ja|=n,o)}function Ug(n,r,o,c){return kr(o,r)?o:Wi.current!==null?(n=Cf(n,o,c),kr(n,r)||(Sn=!0),n):(qs&42)===0||(qs&1073741824)!==0&&(dt&261930)===0?(Sn=!0,n.memoizedState=o):(n=Ux(),tt.lanes|=n,ja|=n,r)}function $g(n,r,o,c,f){var p=H.p;H.p=p!==0&&8>p?p:8;var w=z.T,E={};z.T=E,Mf(n,!1,r,o);try{var B=f(),oe=z.S;if(oe!==null&&oe(E,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var xe=v1(B,c);Wo(n,r,xe,Tr(n))}else Wo(n,r,c,Tr(n))}catch(je){Wo(n,r,{then:function(){},status:"rejected",reason:je},Tr())}finally{H.p=p,w!==null&&E.types!==null&&(w.types=E.types),z.T=w}}function N1(){}function Ef(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=Bg(n).queue;$g(n,f,r,ae,o===null?N1:function(){return qg(n),o(c)})}function Bg(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:ae},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function qg(n){var r=Bg(n);r.next===null&&(r=n.alternate.memoizedState),Wo(n,r.next.queue,{},Tr())}function _f(){return Wn(ul)}function Fg(){return gn().memoizedState}function Pg(){return gn().memoizedState}function C1(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Tr();n=ga(o);var c=xa(r,n,o);c!==null&&(mr(c,r,o),Po(c,r,o)),r={cache:nf()},n.payload=r;return}r=r.return}}function E1(n,r,o){var c=Tr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Dc(n)?Hg(r,o):(o=Vd(n,r,o,c),o!==null&&(mr(o,n,c),Vg(o,r,c)))}function Ig(n,r,o){var c=Tr();Wo(n,r,o,c)}function Wo(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Dc(n))Hg(r,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var w=r.lastRenderedState,E=p(w,o);if(f.hasEagerState=!0,f.eagerState=E,kr(E,w))return dc(n,r,f,0),Ht===null&&uc(),!1}catch{}finally{}if(o=Vd(n,r,f,c),o!==null)return mr(o,n,c),Vg(o,r,c),!0}return!1}function Mf(n,r,o,c){if(c={lane:2,revertLane:oh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dc(n)){if(r)throw Error(i(479))}else r=Vd(n,o,c,2),r!==null&&mr(r,n,2)}function Dc(n){var r=n.alternate;return n===tt||r!==null&&r===tt}function Hg(n,r){Qi=kc=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Vg(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Hn(n,o)}}var Qo={readContext:Wn,use:Ec,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Qo.useEffectEvent=cn;var Zg={readContext:Wn,use:Ec,useCallback:function(n,r){return nr().memoizedState=[n,r===void 0?null:r],n},useContext:Wn,useEffect:Mg,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Mc(4194308,4,Rg.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Mc(4194308,4,n,r)},useInsertionEffect:function(n,r){Mc(4,2,n,r)},useMemo:function(n,r){var o=nr();r=r===void 0?null:r;var c=n();if(ai){ut(!0);try{n()}finally{ut(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=nr();if(o!==void 0){var f=o(r);if(ai){ut(!0);try{o(r)}finally{ut(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=E1.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var r=nr();return n={current:n},r.memoizedState=n},useState:function(n){n=jf(n);var r=n.queue,o=Ig.bind(null,tt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Nf,useDeferredValue:function(n,r){var o=nr();return Cf(o,n,r)},useTransition:function(){var n=jf(!1);return n=$g.bind(null,tt,n.queue,!0,!1),nr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=tt,f=nr();if(pt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Ht===null)throw Error(i(349));(dt&127)!==0||hg(c,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,Mg(pg.bind(null,c,p,n),[n]),c.flags|=2048,Gi(9,{destroy:void 0},mg.bind(null,c,p,o,r),null),o},useId:function(){var n=nr(),r=Ht.identifierPrefix;if(pt){var o=js,c=ws;o=(c&~(1<<32-Ut(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Nc++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=y1++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:_f,useFormState:kg,useActionState:kg,useOptimistic:function(n){var r=nr();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Mf.bind(null,tt,!0,o),o.dispatch=r,[n,r]},useMemoCache:vf,useCacheRefresh:function(){return nr().memoizedState=C1.bind(null,tt)},useEffectEvent:function(n){var r=nr(),o={impl:n};return r.memoizedState=o,function(){if((Et&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Tf={readContext:Wn,use:Ec,useCallback:zg,useContext:Wn,useEffect:kf,useImperativeHandle:Og,useInsertionEffect:Dg,useLayoutEffect:Ag,useMemo:Lg,useReducer:_c,useRef:_g,useState:function(){return _c(Fs)},useDebugValue:Nf,useDeferredValue:function(n,r){var o=gn();return Ug(o,$t.memoizedState,n,r)},useTransition:function(){var n=_c(Fs)[0],r=gn().memoizedState;return[typeof n=="boolean"?n:Zo(n),r]},useSyncExternalStore:fg,useId:Fg,useHostTransitionStatus:_f,useFormState:Ng,useActionState:Ng,useOptimistic:function(n,r){var o=gn();return bg(o,$t,n,r)},useMemoCache:vf,useCacheRefresh:Pg};Tf.useEffectEvent=Tg;var Wg={readContext:Wn,use:Ec,useCallback:zg,useContext:Wn,useEffect:kf,useImperativeHandle:Og,useInsertionEffect:Dg,useLayoutEffect:Ag,useMemo:Lg,useReducer:wf,useRef:_g,useState:function(){return wf(Fs)},useDebugValue:Nf,useDeferredValue:function(n,r){var o=gn();return $t===null?Cf(o,n,r):Ug(o,$t.memoizedState,n,r)},useTransition:function(){var n=wf(Fs)[0],r=gn().memoizedState;return[typeof n=="boolean"?n:Zo(n),r]},useSyncExternalStore:fg,useId:Fg,useHostTransitionStatus:_f,useFormState:Eg,useActionState:Eg,useOptimistic:function(n,r){var o=gn();return $t!==null?bg(o,$t,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:vf,useCacheRefresh:Pg};Wg.useEffectEvent=Tg;function Df(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:v({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Af={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Tr(),f=ga(c);f.payload=r,o!=null&&(f.callback=o),r=xa(n,f,c),r!==null&&(mr(r,n,c),Po(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Tr(),f=ga(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=xa(n,f,c),r!==null&&(mr(r,n,c),Po(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Tr(),c=ga(o);c.tag=2,r!=null&&(c.callback=r),r=xa(n,c,o),r!==null&&(mr(r,n,o),Po(r,n,o))}};function Qg(n,r,o,c,f,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):r.prototype&&r.prototype.isPureReactComponent?!Oo(o,c)||!Oo(f,p):!0}function Kg(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Af.enqueueReplaceState(r,r.state,null)}function ii(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=v({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Gg(n){cc(n)}function Yg(n){console.error(n)}function Xg(n){cc(n)}function Ac(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Jg(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rf(n,r,o){return o=ga(o),o.tag=3,o.payload={element:null},o.callback=function(){Ac(n,r)},o}function ex(n){return n=ga(n),n.tag=3,n}function tx(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){Jg(r,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Jg(r,o,c),typeof f!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function _1(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Pi(r,o,f,!0),o=Cr.current,o!==null){switch(o.tag){case 31:case 13:return Vr===null?Hc():o.alternate===null&&un===0&&(un=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===vc?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),sh(n,c,f)),!1;case 22:return o.flags|=65536,c===vc?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),sh(n,c,f)),!1}throw Error(i(435,o.tag))}return sh(n,c,f),Hc(),!1}if(pt)return r=Cr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Yd&&(n=Error(i(422),{cause:c}),Uo(Fr(n,o)))):(c!==Yd&&(r=Error(i(423),{cause:c}),Uo(Fr(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Fr(c,o),f=Rf(n.stateNode,c,f),cf(n,f),un!==4&&(un=2)),!1;var p=Error(i(520),{cause:c});if(p=Fr(p,o),nl===null?nl=[p]:nl.push(p),un!==4&&(un=2),r===null)return!0;c=Fr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Rf(o.stateNode,c,n),cf(o,n),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Sa===null||!Sa.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=ex(f),tx(f,n,o,c),cf(o,f),!1}o=o.return}while(o!==null);return!1}var Of=Error(i(461)),Sn=!1;function Qn(n,r,o,c){r.child=n===null?ag(r,null,o,c):si(r,n.child,o,c)}function nx(n,r,o,c,f){o=o.render;var p=r.ref;if("ref"in c){var w={};for(var E in c)E!=="ref"&&(w[E]=c[E])}else w=c;return ei(r),c=pf(n,r,o,w,p,f),E=gf(),n!==null&&!Sn?(xf(n,r,f),Ps(n,r,f)):(pt&&E&&Kd(r),r.flags|=1,Qn(n,r,c,f),r.child)}function rx(n,r,o,c,f){if(n===null){var p=o.type;return typeof p=="function"&&!Zd(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,sx(n,r,p,c,f)):(n=hc(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,!Pf(n,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Oo,o(w,c)&&n.ref===r.ref)return Ps(n,r,f)}return r.flags|=1,n=Ls(p,c),n.ref=r.ref,n.return=r,r.child=n}function sx(n,r,o,c,f){if(n!==null){var p=n.memoizedProps;if(Oo(p,c)&&n.ref===r.ref)if(Sn=!1,r.pendingProps=c=p,Pf(n,f))(n.flags&131072)!==0&&(Sn=!0);else return r.lanes=n.lanes,Ps(n,r,f)}return zf(n,r,o,c,f)}function ax(n,r,o,c){var f=c.children,p=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,r.child=null;return ix(n,r,p,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&xc(r,p!==null?p.cachePool:null),p!==null?lg(r,p):df(),cg(r);else return c=r.lanes=536870912,ix(n,r,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(xc(r,p.cachePool),lg(r,p),va(),r.memoizedState=null):(n!==null&&xc(r,null),df(),va());return Qn(n,r,f,o),r.child}function Ko(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ix(n,r,o,c,f){var p=sf();return p=p===null?null:{parent:wn._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},n!==null&&xc(r,null),df(),cg(r),n!==null&&Pi(n,r,c,!0),r.childLanes=f,null}function Rc(n,r){return r=zc({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function ox(n,r,o){return si(r,n.child,null,o),n=Rc(r,r.pendingProps),n.flags|=2,Er(r),r.memoizedState=null,n}function M1(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(pt){if(c.mode==="hidden")return n=Rc(r,c),r.lanes=536870912,Ko(null,n);if(hf(r),(n=Kt)?(n=vb(n,Hr),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:da!==null?{id:ws,overflow:js}:null,retryLane:536870912,hydrationErrors:null},o=Hp(n),o.return=r,r.child=o,Zn=r,Kt=null)):n=null,n===null)throw ha(r);return r.lanes=536870912,null}return Rc(r,c)}var p=n.memoizedState;if(p!==null){var w=p.dehydrated;if(hf(r),f)if(r.flags&256)r.flags&=-257,r=ox(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(Sn||Pi(n,r,o,!1),f=(o&n.childLanes)!==0,Sn||f){if(c=Ht,c!==null&&(w=Un(c,o),w!==0&&w!==p.retryLane))throw p.retryLane=w,Ga(n,w),mr(c,n,w),Of;Hc(),r=ox(n,r,o)}else n=p.treeContext,Kt=Zr(w.nextSibling),Zn=r,pt=!0,fa=null,Hr=!1,n!==null&&Wp(r,n),r=Rc(r,c),r.flags|=4096;return r}return n=Ls(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Oc(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function zf(n,r,o,c,f){return ei(r),o=pf(n,r,o,c,void 0,f),c=gf(),n!==null&&!Sn?(xf(n,r,f),Ps(n,r,f)):(pt&&c&&Kd(r),r.flags|=1,Qn(n,r,o,f),r.child)}function lx(n,r,o,c,f,p){return ei(r),r.updateQueue=null,o=dg(r,c,o,f),ug(n),c=gf(),n!==null&&!Sn?(xf(n,r,p),Ps(n,r,p)):(pt&&c&&Kd(r),r.flags|=1,Qn(n,r,o,p),r.child)}function cx(n,r,o,c,f){if(ei(r),r.stateNode===null){var p=$i,w=o.contextType;typeof w=="object"&&w!==null&&(p=Wn(w)),p=new o(c,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Af,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=c,p.state=r.memoizedState,p.refs={},of(r),w=o.contextType,p.context=typeof w=="object"&&w!==null?Wn(w):$i,p.state=r.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Df(r,o,w,c),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Af.enqueueReplaceState(p,p.state,null),Ho(r,c,p,f),Io(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){p=r.stateNode;var E=r.memoizedProps,B=ii(o,E);p.props=B;var oe=p.context,xe=o.contextType;w=$i,typeof xe=="object"&&xe!==null&&(w=Wn(xe));var je=o.getDerivedStateFromProps;xe=typeof je=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,xe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||oe!==w)&&Kg(r,p,c,w),pa=!1;var le=r.memoizedState;p.state=le,Ho(r,c,p,f),Io(),oe=r.memoizedState,E||le!==oe||pa?(typeof je=="function"&&(Df(r,o,je,c),oe=r.memoizedState),(B=pa||Qg(r,o,B,c,le,oe,w))?(xe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=oe),p.props=c,p.state=oe,p.context=w,c=B):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{p=r.stateNode,lf(n,r),w=r.memoizedProps,xe=ii(o,w),p.props=xe,je=r.pendingProps,le=p.context,oe=o.contextType,B=$i,typeof oe=="object"&&oe!==null&&(B=Wn(oe)),E=o.getDerivedStateFromProps,(oe=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==je||le!==B)&&Kg(r,p,c,B),pa=!1,le=r.memoizedState,p.state=le,Ho(r,c,p,f),Io();var me=r.memoizedState;w!==je||le!==me||pa||n!==null&&n.dependencies!==null&&pc(n.dependencies)?(typeof E=="function"&&(Df(r,o,E,c),me=r.memoizedState),(xe=pa||Qg(r,o,xe,c,le,me,B)||n!==null&&n.dependencies!==null&&pc(n.dependencies))?(oe||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,me,B),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,me,B)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&le===n.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&le===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=me),p.props=c,p.state=me,p.context=B,c=xe):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&le===n.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&le===n.memoizedState||(r.flags|=1024),c=!1)}return p=c,Oc(n,r),c=(r.flags&128)!==0,p||c?(p=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,n!==null&&c?(r.child=si(r,n.child,null,f),r.child=si(r,null,o,f)):Qn(n,r,o,f),r.memoizedState=p.state,n=r.child):n=Ps(n,r,f),n}function ux(n,r,o,c){return Xa(),r.flags|=256,Qn(n,r,o,c),r.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(n){return{baseLanes:n,cachePool:Jp()}}function $f(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Mr),n}function dx(n,r,o){var c=r.pendingProps,f=!1,p=(r.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:(pn.current&2)!==0),w&&(f=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,n===null){if(pt){if(f?ba(r):va(),(n=Kt)?(n=vb(n,Hr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:da!==null?{id:ws,overflow:js}:null,retryLane:536870912,hydrationErrors:null},o=Hp(n),o.return=r,r.child=o,Zn=r,Kt=null)):n=null,n===null)throw ha(r);return yh(n)?r.lanes=32:r.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(va(),f=r.mode,E=zc({mode:"hidden",children:E},f),c=Ya(c,f,o,null),E.return=r,c.return=r,E.sibling=c,r.child=E,c=r.child,c.memoizedState=Uf(o),c.childLanes=$f(n,w,o),r.memoizedState=Lf,Ko(null,c)):(ba(r),Bf(r,E))}var B=n.memoizedState;if(B!==null&&(E=B.dehydrated,E!==null)){if(p)r.flags&256?(ba(r),r.flags&=-257,r=qf(n,r,o)):r.memoizedState!==null?(va(),r.child=n.child,r.flags|=128,r=null):(va(),E=c.fallback,f=r.mode,c=zc({mode:"visible",children:c.children},f),E=Ya(E,f,o,null),E.flags|=2,c.return=r,E.return=r,c.sibling=E,r.child=c,si(r,n.child,null,o),c=r.child,c.memoizedState=Uf(o),c.childLanes=$f(n,w,o),r.memoizedState=Lf,r=Ko(null,c));else if(ba(r),yh(E)){if(w=E.nextSibling&&E.nextSibling.dataset,w)var oe=w.dgst;w=oe,c=Error(i(419)),c.stack="",c.digest=w,Uo({value:c,source:null,stack:null}),r=qf(n,r,o)}else if(Sn||Pi(n,r,o,!1),w=(o&n.childLanes)!==0,Sn||w){if(w=Ht,w!==null&&(c=Un(w,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,Ga(n,c),mr(w,n,c),Of;vh(E)||Hc(),r=qf(n,r,o)}else vh(E)?(r.flags|=192,r.child=n.child,r=null):(n=B.treeContext,Kt=Zr(E.nextSibling),Zn=r,pt=!0,fa=null,Hr=!1,n!==null&&Wp(r,n),r=Bf(r,c.children),r.flags|=4096);return r}return f?(va(),E=c.fallback,f=r.mode,B=n.child,oe=B.sibling,c=Ls(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,oe!==null?E=Ls(oe,E):(E=Ya(E,f,o,null),E.flags|=2),E.return=r,c.return=r,c.sibling=E,r.child=c,Ko(null,c),c=r.child,E=n.child.memoizedState,E===null?E=Uf(o):(f=E.cachePool,f!==null?(B=wn._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=Jp(),E={baseLanes:E.baseLanes|o,cachePool:f}),c.memoizedState=E,c.childLanes=$f(n,w,o),r.memoizedState=Lf,Ko(n.child,c)):(ba(r),o=n.child,n=o.sibling,o=Ls(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(w=r.deletions,w===null?(r.deletions=[n],r.flags|=16):w.push(n)),r.child=o,r.memoizedState=null,o)}function Bf(n,r){return r=zc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function zc(n,r){return n=Nr(22,n,null,r),n.lanes=0,n}function qf(n,r,o){return si(r,n.child,null,o),n=Bf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function fx(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),ef(n.return,r,o)}function Ff(n,r,o,c,f,p){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:p}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=o,w.tailMode=f,w.treeForkCount=p)}function hx(n,r,o){var c=r.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var w=pn.current,E=(w&2)!==0;if(E?(w=w&1|2,r.flags|=128):w&=1,ue(pn,w),Qn(n,r,c,o),c=pt?Lo:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fx(n,o,r);else if(n.tag===19)fx(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&Sc(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Ff(r,!1,f,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Sc(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Ff(r,!0,o,null,p,c);break;case"together":Ff(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ps(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),ja|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(Pi(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Ls(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Ls(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Pf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&pc(n)))}function T1(n,r,o){switch(r.tag){case 3:Q(r,r.stateNode.containerInfo),ma(r,wn,n.memoizedState.cache),Xa();break;case 27:case 5:ke(r);break;case 4:Q(r,r.stateNode.containerInfo);break;case 10:ma(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,hf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ba(r),r.flags|=128,null):(o&r.child.childLanes)!==0?dx(n,r,o):(ba(r),n=Ps(n,r,o),n!==null?n.sibling:null);ba(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Pi(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return hx(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(pn,pn.current),c)break;return null;case 22:return r.lanes=0,ax(n,r,o,r.pendingProps);case 24:ma(r,wn,n.memoizedState.cache)}return Ps(n,r,o)}function mx(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)Sn=!0;else{if(!Pf(n,o)&&(r.flags&128)===0)return Sn=!1,T1(n,r,o);Sn=(n.flags&131072)!==0}else Sn=!1,pt&&(r.flags&1048576)!==0&&Zp(r,Lo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=ni(r.elementType),r.type=n,typeof n=="function")Zd(n)?(c=ii(n,c),r.tag=1,r=cx(null,r,n,c,o)):(r.tag=0,r=zf(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===q){r.tag=11,r=nx(null,r,n,c,o);break e}else if(f===D){r.tag=14,r=rx(null,r,n,c,o);break e}}throw r=fe(n)||n,Error(i(306,r,""))}}return r;case 0:return zf(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=ii(c,r.pendingProps),cx(n,r,c,f,o);case 3:e:{if(Q(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var p=r.memoizedState;f=p.element,lf(n,r),Ho(r,c,null,o);var w=r.memoizedState;if(c=w.cache,ma(r,wn,c),c!==p.cache&&tf(r,[wn],o,!0),Io(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=ux(n,r,c,o);break e}else if(c!==f){f=Fr(Error(i(424)),r),Uo(f),r=ux(n,r,c,o);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Kt=Zr(n.firstChild),Zn=r,pt=!0,fa=null,Hr=!0,o=ag(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Xa(),c===f){r=Ps(n,r,o);break e}Qn(n,r,c,o)}r=r.child}return r;case 26:return Oc(n,r),n===null?(o=Nb(r.type,null,r.pendingProps,null))?r.memoizedState=o:pt||(o=r.type,n=r.pendingProps,c=Yc(Z.current).createElement(o),c[ln]=r,c[Dn]=n,Kn(c,o,n),Yt(c),r.stateNode=c):r.memoizedState=Nb(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ke(r),n===null&&pt&&(c=r.stateNode=jb(r.type,r.pendingProps,Z.current),Zn=r,Hr=!0,f=Kt,Ea(r.type)?(wh=f,Kt=Zr(c.firstChild)):Kt=f),Qn(n,r,r.pendingProps.children,o),Oc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&pt&&((f=c=Kt)&&(c=iS(c,r.type,r.pendingProps,Hr),c!==null?(r.stateNode=c,Zn=r,Kt=Zr(c.firstChild),Hr=!1,f=!0):f=!1),f||ha(r)),ke(r),f=r.type,p=r.pendingProps,w=n!==null?n.memoizedProps:null,c=p.children,gh(f,p)?c=null:w!==null&&gh(f,w)&&(r.flags|=32),r.memoizedState!==null&&(f=pf(n,r,w1,null,null,o),ul._currentValue=f),Oc(n,r),Qn(n,r,c,o),r.child;case 6:return n===null&&pt&&((n=o=Kt)&&(o=oS(o,r.pendingProps,Hr),o!==null?(r.stateNode=o,Zn=r,Kt=null,n=!0):n=!1),n||ha(r)),null;case 13:return dx(n,r,o);case 4:return Q(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=si(r,null,c,o):Qn(n,r,c,o),r.child;case 11:return nx(n,r,r.type,r.pendingProps,o);case 7:return Qn(n,r,r.pendingProps,o),r.child;case 8:return Qn(n,r,r.pendingProps.children,o),r.child;case 12:return Qn(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,ma(r,r.type,c.value),Qn(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,ei(r),f=Wn(f),c=c(f),r.flags|=1,Qn(n,r,c,o),r.child;case 14:return rx(n,r,r.type,r.pendingProps,o);case 15:return sx(n,r,r.type,r.pendingProps,o);case 19:return hx(n,r,o);case 31:return M1(n,r,o);case 22:return ax(n,r,o,r.pendingProps);case 24:return ei(r),c=Wn(wn),n===null?(f=sf(),f===null&&(f=Ht,p=nf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),r.memoizedState={parent:c,cache:f},of(r),ma(r,wn,f)):((n.lanes&o)!==0&&(lf(n,r),Ho(r,null,null,o),Io()),f=n.memoizedState,p=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ma(r,wn,c)):(c=p.cache,ma(r,wn,c),c!==f.cache&&tf(r,[wn],o,!0))),Qn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Is(n){n.flags|=4}function If(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Fx())n.flags|=8192;else throw ri=vc,af}else n.flags&=-16777217}function px(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Tb(r))if(Fx())n.flags|=8192;else throw ri=vc,af}function Lc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?mn():536870912,n.lanes|=r,eo|=r)}function Go(n,r){if(!pt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Gt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function D1(n,r,o){var c=r.pendingProps;switch(Gd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(r),null;case 1:return Gt(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Bs(wn),se(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Fi(r)?Is(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xd())),Gt(r),null;case 26:var f=r.type,p=r.memoizedState;return n===null?(Is(r),p!==null?(Gt(r),px(r,p)):(Gt(r),If(r,f,null,c,o))):p?p!==n.memoizedState?(Is(r),Gt(r),px(r,p)):(Gt(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&Is(r),Gt(r),If(r,f,n,c,o)),null;case 27:if(Me(r),o=Z.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Is(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Gt(r),null}n=Y.current,Fi(r)?Qp(r):(n=jb(f,c,o),r.stateNode=n,Is(r))}return Gt(r),null;case 5:if(Me(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Is(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Gt(r),null}if(p=Y.current,Fi(r))Qp(r);else{var w=Yc(Z.current);switch(p){case 1:p=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=w.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?w.createElement(f,{is:c.is}):w.createElement(f)}}p[ln]=r,p[Dn]=c;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=p;e:switch(Kn(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Is(r)}}return Gt(r),If(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Is(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=Z.current,Fi(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=Zn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[ln]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||db(n.nodeValue,o)),n||ha(r,!0)}else n=Yc(n).createTextNode(c),n[ln]=r,r.stateNode=n}return Gt(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=Fi(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[ln]=r}else Xa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Gt(r),n=!1}else o=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Er(r),r):(Er(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Gt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Fi(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[ln]=r}else Xa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Gt(r),f=!1}else f=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Er(r),r):(Er(r),null)}return Er(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),Lc(r,r.updateQueue),Gt(r),null);case 4:return se(),n===null&&dh(r.stateNode.containerInfo),Gt(r),null;case 10:return Bs(r.type),Gt(r),null;case 19:if(G(pn),c=r.memoizedState,c===null)return Gt(r),null;if(f=(r.flags&128)!==0,p=c.rendering,p===null)if(f)Go(c,!1);else{if(un!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(p=Sc(n),p!==null){for(r.flags|=128,Go(c,!1),n=p.updateQueue,r.updateQueue=n,Lc(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)Ip(o,n),o=o.sibling;return ue(pn,pn.current&1|2),pt&&Us(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&Ne()>Fc&&(r.flags|=128,f=!0,Go(c,!1),r.lanes=4194304)}else{if(!f)if(n=Sc(p),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Lc(r,n),Go(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!pt)return Gt(r),null}else 2*Ne()-c.renderingStartTime>Fc&&o!==536870912&&(r.flags|=128,f=!0,Go(c,!1),r.lanes=4194304);c.isBackwards?(p.sibling=r.child,r.child=p):(n=c.last,n!==null?n.sibling=p:r.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ne(),n.sibling=null,o=pn.current,ue(pn,f?o&1|2:o&1),pt&&Us(r,c.treeForkCount),n):(Gt(r),null);case 22:case 23:return Er(r),ff(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Gt(r),r.subtreeFlags&6&&(r.flags|=8192)):Gt(r),o=r.updateQueue,o!==null&&Lc(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&G(ti),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Bs(wn),Gt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function A1(n,r){switch(Gd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Bs(wn),se(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Me(r),null;case 31:if(r.memoizedState!==null){if(Er(r),r.alternate===null)throw Error(i(340));Xa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Er(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Xa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return G(pn),null;case 4:return se(),null;case 10:return Bs(r.type),null;case 22:case 23:return Er(r),ff(),n!==null&&G(ti),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Bs(wn),null;case 25:return null;default:return null}}function gx(n,r){switch(Gd(r),r.tag){case 3:Bs(wn),se();break;case 26:case 27:case 5:Me(r);break;case 4:se();break;case 31:r.memoizedState!==null&&Er(r);break;case 13:Er(r);break;case 19:G(pn);break;case 10:Bs(r.type);break;case 22:case 23:Er(r),ff(),n!==null&&G(ti);break;case 24:Bs(wn)}}function Yo(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==f)}}catch(E){zt(r,r.return,E)}}function ya(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var w=c.inst,E=w.destroy;if(E!==void 0){w.destroy=void 0,f=r;var B=o,oe=E;try{oe()}catch(xe){zt(f,B,xe)}}}c=c.next}while(c!==p)}}catch(xe){zt(r,r.return,xe)}}function xx(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{og(r,o)}catch(c){zt(n,n.return,c)}}}function bx(n,r,o){o.props=ii(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){zt(n,r,c)}}function Xo(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){zt(n,r,f)}}function Ss(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){zt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){zt(n,r,f)}else o.current=null}function vx(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){zt(n,n.return,f)}}function Hf(n,r,o){try{var c=n.stateNode;eS(c,n.type,o,r),c[Dn]=r}catch(f){zt(n,n.return,f)}}function yx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ea(n.type)||n.tag===4}function Vf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ea(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zf(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Xn));else if(c!==4&&(c===27&&Ea(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Zf(n,r,o),n=n.sibling;n!==null;)Zf(n,r,o),n=n.sibling}function Uc(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Ea(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Uc(n,r,o),n=n.sibling;n!==null;)Uc(n,r,o),n=n.sibling}function wx(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Kn(r,c,o),r[ln]=n,r[Dn]=o}catch(p){zt(n,n.return,p)}}var Hs=!1,kn=!1,Wf=!1,jx=typeof WeakSet=="function"?WeakSet:Set,$n=null;function R1(n,r){if(n=n.containerInfo,mh=su,n=Op(n),Bd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,E=-1,B=-1,oe=0,xe=0,je=n,le=null;t:for(;;){for(var me;je!==o||f!==0&&je.nodeType!==3||(E=w+f),je!==p||c!==0&&je.nodeType!==3||(B=w+c),je.nodeType===3&&(w+=je.nodeValue.length),(me=je.firstChild)!==null;)le=je,je=me;for(;;){if(je===n)break t;if(le===o&&++oe===f&&(E=w),le===p&&++xe===c&&(B=w),(me=je.nextSibling)!==null)break;je=le,le=je.parentNode}je=me}o=E===-1||B===-1?null:{start:E,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(ph={focusedElem:n,selectionRange:o},su=!1,$n=r;$n!==null;)if(r=$n,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,$n=n;else for(;$n!==null;){switch(r=$n,p=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=r,f=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var qe=ii(o.type,f);n=c.getSnapshotBeforeUpdate(qe,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ge){zt(o,o.return,Ge)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)bh(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":bh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,$n=n;break}$n=r.return}}function Sx(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Zs(n,o),c&4&&Yo(5,o);break;case 1:if(Zs(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(w){zt(o,o.return,w)}else{var f=ii(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(w){zt(o,o.return,w)}}c&64&&xx(o),c&512&&Xo(o,o.return);break;case 3:if(Zs(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{og(n,r)}catch(w){zt(o,o.return,w)}}break;case 27:r===null&&c&4&&wx(o);case 26:case 5:Zs(n,o),r===null&&c&4&&vx(o),c&512&&Xo(o,o.return);break;case 12:Zs(n,o);break;case 31:Zs(n,o),c&4&&Cx(n,o);break;case 13:Zs(n,o),c&4&&Ex(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=P1.bind(null,o),lS(n,o))));break;case 22:if(c=o.memoizedState!==null||Hs,!c){r=r!==null&&r.memoizedState!==null||kn,f=Hs;var p=kn;Hs=c,(kn=r)&&!p?Ws(n,o,(o.subtreeFlags&8772)!==0):Zs(n,o),Hs=f,kn=p}break;case 30:break;default:Zs(n,o)}}function kx(n){var r=n.alternate;r!==null&&(n.alternate=null,kx(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ar(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xt=null,ur=!1;function Vs(n,r,o){for(o=o.child;o!==null;)Nx(n,r,o),o=o.sibling}function Nx(n,r,o){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(Dt,o)}catch{}switch(o.tag){case 26:kn||Ss(o,r),Vs(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:kn||Ss(o,r);var c=Xt,f=ur;Ea(o.type)&&(Xt=o.stateNode,ur=!1),Vs(n,r,o),ol(o.stateNode),Xt=c,ur=f;break;case 5:kn||Ss(o,r);case 6:if(c=Xt,f=ur,Xt=null,Vs(n,r,o),Xt=c,ur=f,Xt!==null)if(ur)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(p){zt(o,r,p)}else try{Xt.removeChild(o.stateNode)}catch(p){zt(o,r,p)}break;case 18:Xt!==null&&(ur?(n=Xt,xb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),lo(n)):xb(Xt,o.stateNode));break;case 4:c=Xt,f=ur,Xt=o.stateNode.containerInfo,ur=!0,Vs(n,r,o),Xt=c,ur=f;break;case 0:case 11:case 14:case 15:ya(2,o,r),kn||ya(4,o,r),Vs(n,r,o);break;case 1:kn||(Ss(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&bx(o,r,c)),Vs(n,r,o);break;case 21:Vs(n,r,o);break;case 22:kn=(c=kn)||o.memoizedState!==null,Vs(n,r,o),kn=c;break;default:Vs(n,r,o)}}function Cx(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{lo(n)}catch(o){zt(r,r.return,o)}}}function Ex(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{lo(n)}catch(o){zt(r,r.return,o)}}function O1(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new jx),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new jx),r;default:throw Error(i(435,n.tag))}}function $c(n,r){var o=O1(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=I1.bind(null,n,c);c.then(f,f)}})}function dr(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],p=n,w=r,E=w;e:for(;E!==null;){switch(E.tag){case 27:if(Ea(E.type)){Xt=E.stateNode,ur=!1;break e}break;case 5:Xt=E.stateNode,ur=!1;break e;case 3:case 4:Xt=E.stateNode.containerInfo,ur=!0;break e}E=E.return}if(Xt===null)throw Error(i(160));Nx(p,w,f),Xt=null,ur=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)_x(r,n),r=r.sibling}var as=null;function _x(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:dr(r,n),fr(n),c&4&&(ya(3,n,n.return),Yo(3,n),ya(5,n,n.return));break;case 1:dr(r,n),fr(n),c&512&&(kn||o===null||Ss(o,o.return)),c&64&&Hs&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=as;if(dr(r,n),fr(n),c&512&&(kn||o===null||Ss(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ur]||p[ln]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),Kn(p,c,o),p[ln]=n,Yt(p),c=p;break e;case"link":var w=_b("link","href",f).get(c+(o.href||""));if(w){for(var E=0;E<w.length;E++)if(p=w[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(E,1);break t}}p=f.createElement(c),Kn(p,c,o),f.head.appendChild(p);break;case"meta":if(w=_b("meta","content",f).get(c+(o.content||""))){for(E=0;E<w.length;E++)if(p=w[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(E,1);break t}}p=f.createElement(c),Kn(p,c,o),f.head.appendChild(p);break;default:throw Error(i(468,c))}p[ln]=n,Yt(p),c=p}n.stateNode=c}else Mb(f,n.type,n.stateNode);else n.stateNode=Eb(f,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?Mb(f,n.type,n.stateNode):Eb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Hf(n,n.memoizedProps,o.memoizedProps)}break;case 27:dr(r,n),fr(n),c&512&&(kn||o===null||Ss(o,o.return)),o!==null&&c&4&&Hf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(dr(r,n),fr(n),c&512&&(kn||o===null||Ss(o,o.return)),n.flags&32){f=n.stateNode;try{yr(f,"")}catch(qe){zt(n,n.return,qe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Hf(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Wf=!0);break;case 6:if(dr(r,n),fr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(qe){zt(n,n.return,qe)}}break;case 3:if(eu=null,f=as,as=Xc(r.containerInfo),dr(r,n),as=f,fr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{lo(r.containerInfo)}catch(qe){zt(n,n.return,qe)}Wf&&(Wf=!1,Mx(n));break;case 4:c=as,as=Xc(n.stateNode.containerInfo),dr(r,n),fr(n),as=c;break;case 12:dr(r,n),fr(n);break;case 31:dr(r,n),fr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$c(n,c)));break;case 13:dr(r,n),fr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(qc=Ne()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$c(n,c)));break;case 22:f=n.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,oe=Hs,xe=kn;if(Hs=oe||f,kn=xe||B,dr(r,n),kn=xe,Hs=oe,fr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||Hs||kn||oi(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(p=B.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=B.stateNode;var je=B.memoizedProps.style,le=je!=null&&je.hasOwnProperty("display")?je.display:null;E.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(qe){zt(B,B.return,qe)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(qe){zt(B,B.return,qe)}}}else if(r.tag===18){if(o===null){B=r;try{var me=B.stateNode;f?bb(me,!0):bb(B.stateNode,!1)}catch(qe){zt(B,B.return,qe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,$c(n,o))));break;case 19:dr(r,n),fr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$c(n,c)));break;case 30:break;case 21:break;default:dr(r,n),fr(n)}}function fr(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(yx(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,p=Vf(n);Uc(n,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(yr(w,""),o.flags&=-33);var E=Vf(n);Uc(n,E,w);break;case 3:case 4:var B=o.stateNode.containerInfo,oe=Vf(n);Zf(n,oe,B);break;default:throw Error(i(161))}}catch(xe){zt(n,n.return,xe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Mx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Mx(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Zs(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Sx(n,r.alternate,r),r=r.sibling}function oi(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ya(4,r,r.return),oi(r);break;case 1:Ss(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&bx(r,r.return,o),oi(r);break;case 27:ol(r.stateNode);case 26:case 5:Ss(r,r.return),oi(r);break;case 22:r.memoizedState===null&&oi(r);break;case 30:oi(r);break;default:oi(r)}n=n.sibling}}function Ws(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,p=r,w=p.flags;switch(p.tag){case 0:case 11:case 15:Ws(f,p,o),Yo(4,p);break;case 1:if(Ws(f,p,o),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(oe){zt(c,c.return,oe)}if(c=p,f=c.updateQueue,f!==null){var E=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)ig(B[f],E)}catch(oe){zt(c,c.return,oe)}}o&&w&64&&xx(p),Xo(p,p.return);break;case 27:wx(p);case 26:case 5:Ws(f,p,o),o&&c===null&&w&4&&vx(p),Xo(p,p.return);break;case 12:Ws(f,p,o);break;case 31:Ws(f,p,o),o&&w&4&&Cx(f,p);break;case 13:Ws(f,p,o),o&&w&4&&Ex(f,p);break;case 22:p.memoizedState===null&&Ws(f,p,o),Xo(p,p.return);break;case 30:break;default:Ws(f,p,o)}r=r.sibling}}function Qf(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&$o(o))}function Kf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&$o(n))}function is(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Tx(n,r,o,c),r=r.sibling}function Tx(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:is(n,r,o,c),f&2048&&Yo(9,r);break;case 1:is(n,r,o,c);break;case 3:is(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&$o(n)));break;case 12:if(f&2048){is(n,r,o,c),n=r.stateNode;try{var p=r.memoizedProps,w=p.id,E=p.onPostCommit;typeof E=="function"&&E(w,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){zt(r,r.return,B)}}else is(n,r,o,c);break;case 31:is(n,r,o,c);break;case 13:is(n,r,o,c);break;case 23:break;case 22:p=r.stateNode,w=r.alternate,r.memoizedState!==null?p._visibility&2?is(n,r,o,c):Jo(n,r):p._visibility&2?is(n,r,o,c):(p._visibility|=2,Yi(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Qf(w,r);break;case 24:is(n,r,o,c),f&2048&&Kf(r.alternate,r);break;default:is(n,r,o,c)}}function Yi(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=n,w=r,E=o,B=c,oe=w.flags;switch(w.tag){case 0:case 11:case 15:Yi(p,w,E,B,f),Yo(8,w);break;case 23:break;case 22:var xe=w.stateNode;w.memoizedState!==null?xe._visibility&2?Yi(p,w,E,B,f):Jo(p,w):(xe._visibility|=2,Yi(p,w,E,B,f)),f&&oe&2048&&Qf(w.alternate,w);break;case 24:Yi(p,w,E,B,f),f&&oe&2048&&Kf(w.alternate,w);break;default:Yi(p,w,E,B,f)}r=r.sibling}}function Jo(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:Jo(o,c),f&2048&&Qf(c.alternate,c);break;case 24:Jo(o,c),f&2048&&Kf(c.alternate,c);break;default:Jo(o,c)}r=r.sibling}}var el=8192;function Xi(n,r,o){if(n.subtreeFlags&el)for(n=n.child;n!==null;)Dx(n,r,o),n=n.sibling}function Dx(n,r,o){switch(n.tag){case 26:Xi(n,r,o),n.flags&el&&n.memoizedState!==null&&yS(o,as,n.memoizedState,n.memoizedProps);break;case 5:Xi(n,r,o);break;case 3:case 4:var c=as;as=Xc(n.stateNode.containerInfo),Xi(n,r,o),as=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=el,el=16777216,Xi(n,r,o),el=c):Xi(n,r,o));break;default:Xi(n,r,o)}}function Ax(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function tl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];$n=c,Ox(c,n)}Ax(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rx(n),n=n.sibling}function Rx(n){switch(n.tag){case 0:case 11:case 15:tl(n),n.flags&2048&&ya(9,n,n.return);break;case 3:tl(n);break;case 12:tl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Bc(n)):tl(n);break;default:tl(n)}}function Bc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];$n=c,Ox(c,n)}Ax(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ya(8,r,r.return),Bc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Bc(r));break;default:Bc(r)}n=n.sibling}}function Ox(n,r){for(;$n!==null;){var o=$n;switch(o.tag){case 0:case 11:case 15:ya(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$o(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,$n=c;else e:for(o=n;$n!==null;){c=$n;var f=c.sibling,p=c.return;if(kx(c),c===o){$n=null;break e}if(f!==null){f.return=p,$n=f;break e}$n=p}}}var z1={getCacheForType:function(n){var r=Wn(wn),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Wn(wn).controller.signal}},L1=typeof WeakMap=="function"?WeakMap:Map,Et=0,Ht=null,lt=null,dt=0,Ot=0,_r=null,wa=!1,Ji=!1,Gf=!1,Qs=0,un=0,ja=0,li=0,Yf=0,Mr=0,eo=0,nl=null,hr=null,Xf=!1,qc=0,zx=0,Fc=1/0,Pc=null,Sa=null,Rn=0,ka=null,to=null,Ks=0,Jf=0,eh=null,Lx=null,rl=0,th=null;function Tr(){return(Et&2)!==0&&dt!==0?dt&-dt:z.T!==null?oh():Yn()}function Ux(){if(Mr===0)if((dt&536870912)===0||pt){var n=_n;_n<<=1,(_n&3932160)===0&&(_n=262144),Mr=n}else Mr=536870912;return n=Cr.current,n!==null&&(n.flags|=32),Mr}function mr(n,r,o){(n===Ht&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)&&(no(n,0),Na(n,dt,Mr,!1)),Mn(n,o),((Et&2)===0||n!==Ht)&&(n===Ht&&((Et&2)===0&&(li|=o),un===4&&Na(n,dt,Mr,!1)),ks(n))}function $x(n,r,o){if((Et&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||on(n,r),f=c?B1(n,r):rh(n,r,!0),p=c;do{if(f===0){Ji&&!c&&Na(n,r,0,!1);break}else{if(o=n.current.alternate,p&&!U1(o)){f=rh(n,r,!1),p=!1;continue}if(f===2){if(p=r,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var E=n;f=nl;var B=E.current.memoizedState.isDehydrated;if(B&&(no(E,w).flags|=256),w=rh(E,w,!1),w!==2){if(Gf&&!B){E.errorRecoveryDisabledLanes|=p,li|=p,f=4;break e}p=hr,hr=f,p!==null&&(hr===null?hr=p:hr.push.apply(hr,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){no(n,0),Na(n,r,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Na(c,r,Mr,!wa);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=qc+300-Ne(),10<f)){if(Na(c,r,Mr,!wa),At(c,0,!0)!==0)break e;Ks=r,c.timeoutHandle=pb(Bx.bind(null,c,o,hr,Pc,Xf,r,Mr,li,eo,wa,p,"Throttled",-0,0),f);break e}Bx(c,o,hr,Pc,Xf,r,Mr,li,eo,wa,p,null,-0,0)}}break}while(!0);ks(n)}function Bx(n,r,o,c,f,p,w,E,B,oe,xe,je,le,me){if(n.timeoutHandle=-1,je=r.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},Dx(r,p,je);var qe=(p&62914560)===p?qc-Ne():(p&4194048)===p?zx-Ne():0;if(qe=wS(je,qe),qe!==null){Ks=p,n.cancelPendingCommit=qe(Wx.bind(null,n,r,p,o,c,f,w,E,B,xe,je,null,le,me)),Na(n,p,w,!oe);return}}Wx(n,r,p,o,c,f,w,E,B)}function U1(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!kr(p(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Na(n,r,o,c){r&=~Yf,r&=~li,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var p=31-Ut(f),w=1<<p;c[p]=-1,f&=~w}o!==0&&Gn(n,o,r)}function Ic(){return(Et&6)===0?(sl(0),!1):!0}function nh(){if(lt!==null){if(Ot===0)var n=lt.return;else n=lt,$s=Ja=null,bf(n),Zi=null,qo=0,n=lt;for(;n!==null;)gx(n.alternate,n),n=n.return;lt=null}}function no(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,rS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ks=0,nh(),Ht=n,lt=o=Ls(n.current,null),dt=r,Ot=0,_r=null,wa=!1,Ji=on(n,r),Gf=!1,eo=Mr=Yf=li=ja=un=0,hr=nl=null,Xf=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Ut(c),p=1<<f;r|=n[f],c&=~p}return Qs=r,uc(),o}function qx(n,r){tt=null,z.H=Qo,r===Vi||r===bc?(r=ng(),Ot=3):r===af?(r=ng(),Ot=4):Ot=r===Of?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,_r=r,lt===null&&(un=1,Ac(n,Fr(r,n.current)))}function Fx(){var n=Cr.current;return n===null?!0:(dt&4194048)===dt?Vr===null:(dt&62914560)===dt||(dt&536870912)!==0?n===Vr:!1}function Px(){var n=z.H;return z.H=Qo,n===null?Qo:n}function Ix(){var n=z.A;return z.A=z1,n}function Hc(){un=4,wa||(dt&4194048)!==dt&&Cr.current!==null||(Ji=!0),(ja&134217727)===0&&(li&134217727)===0||Ht===null||Na(Ht,dt,Mr,!1)}function rh(n,r,o){var c=Et;Et|=2;var f=Px(),p=Ix();(Ht!==n||dt!==r)&&(Pc=null,no(n,r)),r=!1;var w=un;e:do try{if(Ot!==0&&lt!==null){var E=lt,B=_r;switch(Ot){case 8:nh(),w=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(r=!0);var oe=Ot;if(Ot=0,_r=null,ro(n,E,B,oe),o&&Ji){w=0;break e}break;default:oe=Ot,Ot=0,_r=null,ro(n,E,B,oe)}}$1(),w=un;break}catch(xe){qx(n,xe)}while(!0);return r&&n.shellSuspendCounter++,$s=Ja=null,Et=c,z.H=f,z.A=p,lt===null&&(Ht=null,dt=0,uc()),w}function $1(){for(;lt!==null;)Hx(lt)}function B1(n,r){var o=Et;Et|=2;var c=Px(),f=Ix();Ht!==n||dt!==r?(Pc=null,Fc=Ne()+500,no(n,r)):Ji=on(n,r);e:do try{if(Ot!==0&&lt!==null){r=lt;var p=_r;t:switch(Ot){case 1:Ot=0,_r=null,ro(n,r,p,1);break;case 2:case 9:if(eg(p)){Ot=0,_r=null,Vx(r);break}r=function(){Ot!==2&&Ot!==9||Ht!==n||(Ot=7),ks(n)},p.then(r,r);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:eg(p)?(Ot=0,_r=null,Vx(r)):(Ot=0,_r=null,ro(n,r,p,7));break;case 5:var w=null;switch(lt.tag){case 26:w=lt.memoizedState;case 5:case 27:var E=lt;if(w?Tb(w):E.stateNode.complete){Ot=0,_r=null;var B=E.sibling;if(B!==null)lt=B;else{var oe=E.return;oe!==null?(lt=oe,Vc(oe)):lt=null}break t}}Ot=0,_r=null,ro(n,r,p,5);break;case 6:Ot=0,_r=null,ro(n,r,p,6);break;case 8:nh(),un=6;break e;default:throw Error(i(462))}}q1();break}catch(xe){qx(n,xe)}while(!0);return $s=Ja=null,z.H=c,z.A=f,Et=o,lt!==null?0:(Ht=null,dt=0,uc(),un)}function q1(){for(;lt!==null&&!ne();)Hx(lt)}function Hx(n){var r=mx(n.alternate,n,Qs);n.memoizedProps=n.pendingProps,r===null?Vc(n):lt=r}function Vx(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=lx(o,r,r.pendingProps,r.type,void 0,dt);break;case 11:r=lx(o,r,r.pendingProps,r.type.render,r.ref,dt);break;case 5:bf(r);default:gx(o,r),r=lt=Ip(r,Qs),r=mx(o,r,Qs)}n.memoizedProps=n.pendingProps,r===null?Vc(n):lt=r}function ro(n,r,o,c){$s=Ja=null,bf(r),Zi=null,qo=0;var f=r.return;try{if(_1(n,f,r,o,dt)){un=1,Ac(n,Fr(o,n.current)),lt=null;return}}catch(p){if(f!==null)throw lt=f,p;un=1,Ac(n,Fr(o,n.current)),lt=null;return}r.flags&32768?(pt||c===1?n=!0:Ji||(dt&536870912)!==0?n=!1:(wa=n=!0,(c===2||c===9||c===3||c===6)&&(c=Cr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zx(r,n)):Vc(r)}function Vc(n){var r=n;do{if((r.flags&32768)!==0){Zx(r,wa);return}n=r.return;var o=D1(r.alternate,r,Qs);if(o!==null){lt=o;return}if(r=r.sibling,r!==null){lt=r;return}lt=r=n}while(r!==null);un===0&&(un=5)}function Zx(n,r){do{var o=A1(n.alternate,n);if(o!==null){o.flags&=32767,lt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){lt=n;return}lt=n=o}while(n!==null);un=6,lt=null}function Wx(n,r,o,c,f,p,w,E,B){n.cancelPendingCommit=null;do Zc();while(Rn!==0);if((Et&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Hd,tn(n,o,p,w,E,B),n===Ht&&(lt=Ht=null,dt=0),to=r,ka=n,Ks=o,Jf=p,eh=f,Lx=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,H1(_e,function(){return Xx(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,f=H.p,H.p=2,w=Et,Et|=4;try{R1(n,r,o)}finally{Et=w,H.p=f,z.T=c}}Rn=1,Qx(),Kx(),Gx()}}function Qx(){if(Rn===1){Rn=0;var n=ka,r=to,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var c=H.p;H.p=2;var f=Et;Et|=4;try{_x(r,n);var p=ph,w=Op(n.containerInfo),E=p.focusedElem,B=p.selectionRange;if(w!==E&&E&&E.ownerDocument&&Rp(E.ownerDocument.documentElement,E)){if(B!==null&&Bd(E)){var oe=B.start,xe=B.end;if(xe===void 0&&(xe=oe),"selectionStart"in E)E.selectionStart=oe,E.selectionEnd=Math.min(xe,E.value.length);else{var je=E.ownerDocument||document,le=je&&je.defaultView||window;if(le.getSelection){var me=le.getSelection(),qe=E.textContent.length,Ge=Math.min(B.start,qe),qt=B.end===void 0?Ge:Math.min(B.end,qe);!me.extend&&Ge>qt&&(w=qt,qt=Ge,Ge=w);var J=Ap(E,Ge),W=Ap(E,qt);if(J&&W&&(me.rangeCount!==1||me.anchorNode!==J.node||me.anchorOffset!==J.offset||me.focusNode!==W.node||me.focusOffset!==W.offset)){var ie=je.createRange();ie.setStart(J.node,J.offset),me.removeAllRanges(),Ge>qt?(me.addRange(ie),me.extend(W.node,W.offset)):(ie.setEnd(W.node,W.offset),me.addRange(ie))}}}}for(je=[],me=E;me=me.parentNode;)me.nodeType===1&&je.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<je.length;E++){var we=je[E];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}su=!!mh,ph=mh=null}finally{Et=f,H.p=c,z.T=o}}n.current=r,Rn=2}}function Kx(){if(Rn===2){Rn=0;var n=ka,r=to,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var c=H.p;H.p=2;var f=Et;Et|=4;try{Sx(n,r.alternate,r)}finally{Et=f,H.p=c,z.T=o}}Rn=3}}function Gx(){if(Rn===4||Rn===3){Rn=0,be();var n=ka,r=to,o=Ks,c=Lx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Rn=5:(Rn=0,to=ka=null,Yx(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Sa=null),sr(o),r=r.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(Dt,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=z.T,f=H.p,H.p=2,z.T=null;try{for(var p=n.onRecoverableError,w=0;w<c.length;w++){var E=c[w];p(E.value,{componentStack:E.stack})}}finally{z.T=r,H.p=f}}(Ks&3)!==0&&Zc(),ks(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===th?rl++:(rl=0,th=n):rl=0,sl(0)}}function Yx(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,$o(r)))}function Zc(){return Qx(),Kx(),Gx(),Xx()}function Xx(){if(Rn!==5)return!1;var n=ka,r=Jf;Jf=0;var o=sr(Ks),c=z.T,f=H.p;try{H.p=32>o?32:o,z.T=null,o=eh,eh=null;var p=ka,w=Ks;if(Rn=0,to=ka=null,Ks=0,(Et&6)!==0)throw Error(i(331));var E=Et;if(Et|=4,Rx(p.current),Tx(p,p.current,w,o),Et=E,sl(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(Dt,p)}catch{}return!0}finally{H.p=f,z.T=c,Yx(n,r)}}function Jx(n,r,o){r=Fr(o,r),r=Rf(n.stateNode,r,2),n=xa(n,r,2),n!==null&&(Mn(n,2),ks(n))}function zt(n,r,o){if(n.tag===3)Jx(n,n,o);else for(;r!==null;){if(r.tag===3){Jx(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Sa===null||!Sa.has(c))){n=Fr(o,n),o=ex(2),c=xa(r,o,2),c!==null&&(tx(o,c,r,n),Mn(c,2),ks(c));break}}r=r.return}}function sh(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new L1;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Gf=!0,f.add(o),n=F1.bind(null,n,r,o),r.then(n,n))}function F1(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ht===n&&(dt&o)===o&&(un===4||un===3&&(dt&62914560)===dt&&300>Ne()-qc?(Et&2)===0&&no(n,0):Yf|=o,eo===dt&&(eo=0)),ks(n)}function eb(n,r){r===0&&(r=mn()),n=Ga(n,r),n!==null&&(Mn(n,r),ks(n))}function P1(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),eb(n,o)}function I1(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),eb(n,o)}function H1(n,r){return O(n,r)}var Wc=null,so=null,ah=!1,Qc=!1,ih=!1,Ca=0;function ks(n){n!==so&&n.next===null&&(so===null?Wc=so=n:so=so.next=n),Qc=!0,ah||(ah=!0,Z1())}function sl(n,r){if(!ih&&Qc){ih=!0;do for(var o=!1,c=Wc;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var w=c.suspendedLanes,E=c.pingedLanes;p=(1<<31-Ut(42|n)+1)-1,p&=f&~(w&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,sb(c,p))}else p=dt,p=At(c,c===Ht?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||on(c,p)||(o=!0,sb(c,p));c=c.next}while(o);ih=!1}}function V1(){tb()}function tb(){Qc=ah=!1;var n=0;Ca!==0&&nS()&&(n=Ca);for(var r=Ne(),o=null,c=Wc;c!==null;){var f=c.next,p=nb(c,r);p===0?(c.next=null,o===null?Wc=f:o.next=f,f===null&&(so=o)):(o=c,(n!==0||(p&3)!==0)&&(Qc=!0)),c=f}Rn!==0&&Rn!==5||sl(n),Ca!==0&&(Ca=0)}function nb(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-Ut(p),E=1<<w,B=f[w];B===-1?((E&o)===0||(E&c)!==0)&&(f[w]=hn(E,r)):B<=r&&(n.expiredLanes|=E),p&=~E}if(r=Ht,o=dt,o=At(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&U(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||on(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&U(c),sr(o)){case 2:case 8:o=ye;break;case 32:o=_e;break;case 268435456:o=ht;break;default:o=_e}return c=rb.bind(null,n),o=O(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&U(c),n.callbackPriority=2,n.callbackNode=null,2}function rb(n,r){if(Rn!==0&&Rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Zc()&&n.callbackNode!==o)return null;var c=dt;return c=At(n,n===Ht?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:($x(n,c,r),nb(n,Ne()),n.callbackNode!=null&&n.callbackNode===o?rb.bind(null,n):null)}function sb(n,r){if(Zc())return null;$x(n,r,!0)}function Z1(){sS(function(){(Et&6)!==0?O(ze,V1):tb()})}function oh(){if(Ca===0){var n=Ii;n===0&&(n=ot,ot<<=1,(ot&261888)===0&&(ot=256)),Ca=n}return Ca}function ab(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:wr(""+n)}function ib(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function W1(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var p=ab((f[Dn]||null).action),w=c.submitter;w&&(r=(r=w[Dn]||null)?ab(r.formAction):w.getAttribute("formAction"),r!==null&&(p=r,w=null));var E=new Ei("action","action",null,c,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ca!==0){var B=w?ib(f,w):new FormData(f);Ef(o,{pending:!0,data:B,method:f.method,action:p},null,B)}}else typeof p=="function"&&(E.preventDefault(),B=w?ib(f,w):new FormData(f),Ef(o,{pending:!0,data:B,method:f.method,action:p},p,B))},currentTarget:f}]})}}for(var lh=0;lh<Id.length;lh++){var ch=Id[lh],Q1=ch.toLowerCase(),K1=ch[0].toUpperCase()+ch.slice(1);ss(Q1,"on"+K1)}ss(Up,"onAnimationEnd"),ss($p,"onAnimationIteration"),ss(Bp,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(d1,"onTransitionRun"),ss(f1,"onTransitionStart"),ss(h1,"onTransitionCancel"),ss(qp,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function ob(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var w=c.length-1;0<=w;w--){var E=c[w],B=E.instance,oe=E.currentTarget;if(E=E.listener,B!==p&&f.isPropagationStopped())break e;p=E,f.currentTarget=oe;try{p(f)}catch(xe){cc(xe)}f.currentTarget=null,p=B}else for(w=0;w<c.length;w++){if(E=c[w],B=E.instance,oe=E.currentTarget,E=E.listener,B!==p&&f.isPropagationStopped())break e;p=E,f.currentTarget=oe;try{p(f)}catch(xe){cc(xe)}f.currentTarget=null,p=B}}}}function ct(n,r){var o=r[Ms];o===void 0&&(o=r[Ms]=new Set);var c=n+"__bubble";o.has(c)||(lb(r,n,2,!1),o.add(c))}function uh(n,r,o){var c=0;r&&(c|=4),lb(o,n,c,r)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function dh(n){if(!n[Kc]){n[Kc]=!0,ki.forEach(function(o){o!=="selectionchange"&&(G1.has(o)||uh(o,!1,n),uh(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Kc]||(r[Kc]=!0,uh("selectionchange",!1,r))}}function lb(n,r,o,c){switch(Ub(r)){case 2:var f=kS;break;case 8:f=NS;break;default:f=Ch}o=f.bind(null,r,o,n),f=void 0,!vs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function fh(n,r,o,c,f){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var E=c.stateNode.containerInfo;if(E===f)break;if(w===4)for(w=c.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;E!==null;){if(w=Xr(E),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){c=p=w;continue e}E=E.parentNode}}c=c.return}yn(function(){var oe=p,xe=sa(o),je=[];e:{var le=Fp.get(n);if(le!==void 0){var me=Ei,qe=n;switch(n){case"keypress":if(Va(o)===0)break e;case"keydown":case"keyup":me=ns;break;case"focusin":qe="focus",me=_o;break;case"focusout":qe="blur",me=_o;break;case"beforeblur":case"afterblur":me=_o;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Td;break;case Up:case $p:case Bp:me=Di;break;case qp:me=Ri;break;case"scroll":case"scrollend":me=Jl;break;case"wheel":me=Rd;break;case"copy":case"cut":case"paste":me=Mo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=nc;break;case"toggle":case"beforetoggle":me=zd}var Ge=(r&4)!==0,qt=!Ge&&(n==="scroll"||n==="scrollend"),J=Ge?le!==null?le+"Capture":null:le;Ge=[];for(var W=oe,ie;W!==null;){var we=W;if(ie=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ie===null||J===null||(we=Ha(W,J),we!=null&&Ge.push(il(W,we,ie))),qt)break;W=W.return}0<Ge.length&&(le=new me(le,qe,null,o,xe),je.push({event:le,listeners:Ge}))}}if((r&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",me=n==="mouseout"||n==="pointerout",le&&o!==ra&&(qe=o.relatedTarget||o.fromElement)&&(Xr(qe)||qe[ps]))break e;if((me||le)&&(le=xe.window===xe?xe:(le=xe.ownerDocument)?le.defaultView||le.parentWindow:window,me?(qe=o.relatedTarget||o.toElement,me=oe,qe=qe?Xr(qe):null,qe!==null&&(qt=u(qe),Ge=qe.tag,qe!==qt||Ge!==5&&Ge!==27&&Ge!==6)&&(qe=null)):(me=null,qe=oe),me!==qe)){if(Ge=ec,we="onMouseLeave",J="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Ge=nc,we="onPointerLeave",J="onPointerEnter",W="pointer"),qt=me==null?le:or(me),ie=qe==null?le:or(qe),le=new Ge(we,W+"leave",me,o,xe),le.target=qt,le.relatedTarget=ie,we=null,Xr(xe)===oe&&(Ge=new Ge(J,W+"enter",qe,o,xe),Ge.target=ie,Ge.relatedTarget=qt,we=Ge),qt=we,me&&qe)t:{for(Ge=Y1,J=me,W=qe,ie=0,we=J;we;we=Ge(we))ie++;we=0;for(var Ze=W;Ze;Ze=Ge(Ze))we++;for(;0<ie-we;)J=Ge(J),ie--;for(;0<we-ie;)W=Ge(W),we--;for(;ie--;){if(J===W||W!==null&&J===W.alternate){Ge=J;break t}J=Ge(J),W=Ge(W)}Ge=null}else Ge=null;me!==null&&cb(je,le,me,Ge,!1),qe!==null&&qt!==null&&cb(je,qt,qe,Ge,!0)}}e:{if(le=oe?or(oe):window,me=le.nodeName&&le.nodeName.toLowerCase(),me==="select"||me==="input"&&le.type==="file")var Nt=nn;else if(de(le))if(ca)Nt=l1;else{Nt=Ro;var Pe=lc}else me=le.nodeName,!me||me.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&Vn(oe.elementType)&&(Nt=nn):Nt=o1;if(Nt&&(Nt=Nt(n,oe))){Ue(je,Nt,o,xe);break e}Pe&&Pe(n,le,oe),n==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&Co(le,"number",le.value)}switch(Pe=oe?or(oe):window,n){case"focusin":(de(Pe)||Pe.contentEditable==="true")&&(zi=Pe,qd=oe,zo=null);break;case"focusout":zo=qd=zi=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,zp(je,o,xe);break;case"selectionchange":if(u1)break;case"keydown":case"keyup":zp(je,o,xe)}var nt;if(Oi)e:{switch(n){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else la?ic(n,o)&&(ft="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(rc&&o.locale!=="ko"&&(la||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&la&&(nt=Ci()):(es=xe,jr="value"in es?es.value:es.textContent,la=!0)),Pe=Gc(oe,ft),0<Pe.length&&(ft=new Ai(ft,n,null,o,xe),je.push({event:ft,listeners:Pe}),nt?ft.data=nt:(nt=oc(o),nt!==null&&(ft.data=nt)))),(nt=Ud?$d(n,o):Ao(n,o))&&(ft=Gc(oe,"onBeforeInput"),0<ft.length&&(Pe=new Ai("onBeforeInput","beforeinput",null,o,xe),je.push({event:Pe,listeners:ft}),Pe.data=nt)),W1(je,n,oe,o,xe)}ob(je,r)})}function il(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Gc(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ha(n,o),f!=null&&c.unshift(il(n,f,p)),f=Ha(n,r),f!=null&&c.push(il(n,f,p))),n.tag===3)return c;n=n.return}return[]}function Y1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function cb(n,r,o,c,f){for(var p=r._reactName,w=[];o!==null&&o!==c;){var E=o,B=E.alternate,oe=E.stateNode;if(E=E.tag,B!==null&&B===c)break;E!==5&&E!==26&&E!==27||oe===null||(B=oe,f?(oe=Ha(o,p),oe!=null&&w.unshift(il(o,oe,B))):f||(oe=Ha(o,p),oe!=null&&w.push(il(o,oe,B)))),o=o.return}w.length!==0&&n.push({event:r,listeners:w})}var X1=/\r\n?/g,J1=/\u0000|\uFFFD/g;function ub(n){return(typeof n=="string"?n:""+n).replace(X1,`
`).replace(J1,"")}function db(n,r){return r=ub(r),ub(n)===r}function Bt(n,r,o,c,f,p){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||yr(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&yr(n,""+c);break;case"className":bt(n,"class",c);break;case"tabIndex":bt(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":bt(n,o,c);break;case"style":Yl(n,c,p);break;case"data":if(r!=="object"){bt(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=wr(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&Bt(n,r,"name",f.name,f,null),Bt(n,r,"formEncType",f.formEncType,f,null),Bt(n,r,"formMethod",f.formMethod,f,null),Bt(n,r,"formTarget",f.formTarget,f,null)):(Bt(n,r,"encType",f.encType,f,null),Bt(n,r,"method",f.method,f,null),Bt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=wr(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Xn);break;case"onScroll":c!=null&&ct("scroll",n);break;case"onScrollEnd":c!=null&&ct("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=wr(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":ct("beforetoggle",n),ct("toggle",n),Xe(n,"popover",c);break;case"xlinkActuate":Le(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Le(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Le(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Le(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Le(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Le(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Le(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Le(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Le(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Xe(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=As.get(o)||o,Xe(n,o,c))}}function hh(n,r,o,c,f,p){switch(o){case"style":Yl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?yr(n,c):(typeof c=="number"||typeof c=="bigint")&&yr(n,""+c);break;case"onScroll":c!=null&&ct("scroll",n);break;case"onScrollEnd":c!=null&&ct("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ta.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),p=n[Dn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(r,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Xe(n,o,c)}}}function Kn(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",n),ct("load",n);var c=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(n,r,p,w,o,null)}}f&&Bt(n,r,"srcSet",o.srcSet,o,null),c&&Bt(n,r,"src",o.src,o,null);return;case"input":ct("invalid",n);var E=p=w=f=null,B=null,oe=null;for(c in o)if(o.hasOwnProperty(c)){var xe=o[c];if(xe!=null)switch(c){case"name":f=xe;break;case"type":w=xe;break;case"checked":B=xe;break;case"defaultChecked":oe=xe;break;case"value":p=xe;break;case"defaultValue":E=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,r));break;default:Bt(n,r,c,xe,o,null)}}Ts(n,p,E,B,oe,w,f,!1);return;case"select":ct("invalid",n),c=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":p=E;break;case"defaultValue":w=E;break;case"multiple":c=E;default:Bt(n,r,f,E,o,null)}r=p,o=w,n.multiple=!!c,r!=null?Ds(n,!!c,r,!1):o!=null&&Ds(n,!!c,o,!0);return;case"textarea":ct("invalid",n),p=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(E=o[w],E!=null))switch(w){case"value":c=E;break;case"defaultValue":f=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Bt(n,r,w,E,o,null)}Ke(n,c,f,p);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(c=o[B],c!=null))switch(B){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Bt(n,r,B,c,o,null)}return;case"dialog":ct("beforetoggle",n),ct("toggle",n),ct("cancel",n),ct("close",n);break;case"iframe":case"object":ct("load",n);break;case"video":case"audio":for(c=0;c<al.length;c++)ct(al[c],n);break;case"image":ct("error",n),ct("load",n);break;case"details":ct("toggle",n);break;case"embed":case"source":case"link":ct("error",n),ct("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in o)if(o.hasOwnProperty(oe)&&(c=o[oe],c!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Bt(n,r,oe,c,o,null)}return;default:if(Vn(r)){for(xe in o)o.hasOwnProperty(xe)&&(c=o[xe],c!==void 0&&hh(n,r,xe,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&Bt(n,r,E,c,o,null))}function eS(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,E=null,B=null,oe=null,xe=null;for(me in o){var je=o[me];if(o.hasOwnProperty(me)&&je!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":B=je;default:c.hasOwnProperty(me)||Bt(n,r,me,null,c,je)}}for(var le in c){var me=c[le];if(je=o[le],c.hasOwnProperty(le)&&(me!=null||je!=null))switch(le){case"type":p=me;break;case"name":f=me;break;case"checked":oe=me;break;case"defaultChecked":xe=me;break;case"value":w=me;break;case"defaultValue":E=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,r));break;default:me!==je&&Bt(n,r,le,me,c,je)}}$r(n,w,E,B,oe,xe,p,f);return;case"select":me=w=E=le=null;for(p in o)if(B=o[p],o.hasOwnProperty(p)&&B!=null)switch(p){case"value":break;case"multiple":me=B;default:c.hasOwnProperty(p)||Bt(n,r,p,null,c,B)}for(f in c)if(p=c[f],B=o[f],c.hasOwnProperty(f)&&(p!=null||B!=null))switch(f){case"value":le=p;break;case"defaultValue":E=p;break;case"multiple":w=p;default:p!==B&&Bt(n,r,f,p,c,B)}r=E,o=w,c=me,le!=null?Ds(n,!!o,le,!1):!!c!=!!o&&(r!=null?Ds(n,!!o,r,!0):Ds(n,!!o,o?[]:"",!1));return;case"textarea":me=le=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Bt(n,r,E,null,c,f)}for(w in c)if(f=c[w],p=o[w],c.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":le=f;break;case"defaultValue":me=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&Bt(n,r,w,f,c,p)}Kl(n,le,me);return;case"option":for(var qe in o)if(le=o[qe],o.hasOwnProperty(qe)&&le!=null&&!c.hasOwnProperty(qe))switch(qe){case"selected":n.selected=!1;break;default:Bt(n,r,qe,null,c,le)}for(B in c)if(le=c[B],me=o[B],c.hasOwnProperty(B)&&le!==me&&(le!=null||me!=null))switch(B){case"selected":n.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Bt(n,r,B,le,c,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in o)le=o[Ge],o.hasOwnProperty(Ge)&&le!=null&&!c.hasOwnProperty(Ge)&&Bt(n,r,Ge,null,c,le);for(oe in c)if(le=c[oe],me=o[oe],c.hasOwnProperty(oe)&&le!==me&&(le!=null||me!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,r));break;default:Bt(n,r,oe,le,c,me)}return;default:if(Vn(r)){for(var qt in o)le=o[qt],o.hasOwnProperty(qt)&&le!==void 0&&!c.hasOwnProperty(qt)&&hh(n,r,qt,void 0,c,le);for(xe in c)le=c[xe],me=o[xe],!c.hasOwnProperty(xe)||le===me||le===void 0&&me===void 0||hh(n,r,xe,le,c,me);return}}for(var J in o)le=o[J],o.hasOwnProperty(J)&&le!=null&&!c.hasOwnProperty(J)&&Bt(n,r,J,null,c,le);for(je in c)le=c[je],me=o[je],!c.hasOwnProperty(je)||le===me||le==null&&me==null||Bt(n,r,je,le,c,me)}function fb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],p=f.transferSize,w=f.initiatorType,E=f.duration;if(p&&E&&fb(w)){for(w=0,E=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],oe=B.startTime;if(oe>E)break;var xe=B.transferSize,je=B.initiatorType;xe&&fb(je)&&(B=B.responseEnd,w+=xe*(B<E?1:(E-oe)/(B-oe)))}if(--c,r+=8*(p+w)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var mh=null,ph=null;function Yc(n){return n.nodeType===9?n:n.ownerDocument}function hb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mb(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function gh(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var xh=null;function nS(){var n=window.event;return n&&n.type==="popstate"?n===xh?!1:(xh=n,!0):(xh=null,!1)}var pb=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,gb=typeof Promise=="function"?Promise:void 0,sS=typeof queueMicrotask=="function"?queueMicrotask:typeof gb<"u"?function(n){return gb.resolve(null).then(n).catch(aS)}:pb;function aS(n){setTimeout(function(){throw n})}function Ea(n){return n==="head"}function xb(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),lo(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ol(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ol(o);for(var p=o.firstChild;p;){var w=p.nextSibling,E=p.nodeName;p[Ur]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=w}}else o==="body"&&ol(n.ownerDocument.body);o=f}while(o);lo(r)}function bb(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function bh(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":bh(o),ar(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function iS(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ur])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Zr(n.nextSibling),n===null)break}return null}function oS(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Zr(n.nextSibling),n===null))return null;return n}function vb(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Zr(n.nextSibling),n===null))return null;return n}function vh(n){return n.data==="$?"||n.data==="$~"}function yh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function lS(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Zr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var wh=null;function yb(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Zr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function wb(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function jb(n,r,o){switch(r=Yc(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function ol(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ar(n)}var Wr=new Map,Sb=new Set;function Xc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Gs=H.d;H.d={f:cS,r:uS,D:dS,C:fS,L:hS,m:mS,X:gS,S:pS,M:xS};function cS(){var n=Gs.f(),r=Ic();return n||r}function uS(n){var r=ir(n);r!==null&&r.tag===5&&r.type==="form"?qg(r):Gs.r(n)}var ao=typeof document>"u"?null:document;function kb(n,r,o){var c=ao;if(c&&typeof r=="string"&&r){var f=cr(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Sb.has(f)||(Sb.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Kn(r,"link",n),Yt(r),c.head.appendChild(r)))}}function dS(n){Gs.D(n),kb("dns-prefetch",n,null)}function fS(n,r){Gs.C(n,r),kb("preconnect",n,r)}function hS(n,r,o){Gs.L(n,r,o);var c=ao;if(c&&n&&r){var f='link[rel="preload"][as="'+cr(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+cr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+cr(o.imageSizes)+'"]')):f+='[href="'+cr(n)+'"]';var p=f;switch(r){case"style":p=io(n);break;case"script":p=oo(n)}Wr.has(p)||(n=v({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Wr.set(p,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(ll(p))||r==="script"&&c.querySelector(cl(p))||(r=c.createElement("link"),Kn(r,"link",n),Yt(r),c.head.appendChild(r)))}}function mS(n,r){Gs.m(n,r);var o=ao;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+cr(c)+'"][href="'+cr(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=oo(n)}if(!Wr.has(p)&&(n=v({rel:"modulepreload",href:n},r),Wr.set(p,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(cl(p)))return}c=o.createElement("link"),Kn(c,"link",n),Yt(c),o.head.appendChild(c)}}}function pS(n,r,o){Gs.S(n,r,o);var c=ao;if(c&&n){var f=gs(c).hoistableStyles,p=io(n);r=r||"default";var w=f.get(p);if(!w){var E={loading:0,preload:null};if(w=c.querySelector(ll(p)))E.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Wr.get(p))&&jh(n,o);var B=w=c.createElement("link");Yt(B),Kn(B,"link",n),B._p=new Promise(function(oe,xe){B.onload=oe,B.onerror=xe}),B.addEventListener("load",function(){E.loading|=1}),B.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Jc(w,r,c)}w={type:"stylesheet",instance:w,count:1,state:E},f.set(p,w)}}}function gS(n,r){Gs.X(n,r);var o=ao;if(o&&n){var c=gs(o).hoistableScripts,f=oo(n),p=c.get(f);p||(p=o.querySelector(cl(f)),p||(n=v({src:n,async:!0},r),(r=Wr.get(f))&&Sh(n,r),p=o.createElement("script"),Yt(p),Kn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function xS(n,r){Gs.M(n,r);var o=ao;if(o&&n){var c=gs(o).hoistableScripts,f=oo(n),p=c.get(f);p||(p=o.querySelector(cl(f)),p||(n=v({src:n,async:!0,type:"module"},r),(r=Wr.get(f))&&Sh(n,r),p=o.createElement("script"),Yt(p),Kn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function Nb(n,r,o,c){var f=(f=Z.current)?Xc(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=io(o.href),o=gs(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=io(o.href);var p=gs(f).hoistableStyles,w=p.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=f.querySelector(ll(n)))&&!p._p&&(w.instance=p,w.state.loading=5),Wr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wr.set(n,o),p||bS(f,n,o,w.state))),r&&c===null)throw Error(i(528,""));return w}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oo(o),o=gs(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function io(n){return'href="'+cr(n)+'"'}function ll(n){return'link[rel="stylesheet"]['+n+"]"}function Cb(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function bS(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Kn(r,"link",o),Yt(r),n.head.appendChild(r))}function oo(n){return'[src="'+cr(n)+'"]'}function cl(n){return"script[async]"+n}function Eb(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+cr(o.href)+'"]');if(c)return r.instance=c,Yt(c),c;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Yt(c),Kn(c,"style",f),Jc(c,o.precedence,n),r.instance=c;case"stylesheet":f=io(o.href);var p=n.querySelector(ll(f));if(p)return r.state.loading|=4,r.instance=p,Yt(p),p;c=Cb(o),(f=Wr.get(f))&&jh(c,f),p=(n.ownerDocument||n).createElement("link"),Yt(p);var w=p;return w._p=new Promise(function(E,B){w.onload=E,w.onerror=B}),Kn(p,"link",c),r.state.loading|=4,Jc(p,o.precedence,n),r.instance=p;case"script":return p=oo(o.src),(f=n.querySelector(cl(p)))?(r.instance=f,Yt(f),f):(c=o,(f=Wr.get(p))&&(c=v({},o),Sh(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Yt(f),Kn(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Jc(c,o.precedence,n));return r.instance}function Jc(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,w=0;w<c.length;w++){var E=c[w];if(E.dataset.precedence===r)p=E;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function jh(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Sh(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var eu=null;function _b(n,r,o){if(eu===null){var c=new Map,f=eu=new Map;f.set(o,c)}else f=eu,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[Ur]||p[ln]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(r)||"";w=n+w;var E=c.get(w);E?E.push(p):c.set(w,[p])}}return c}function Mb(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function vS(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Tb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function yS(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=io(c.href),p=r.querySelector(ll(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=tu.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=p,Yt(p);return}p=r.ownerDocument||r,c=Cb(c),(f=Wr.get(f))&&jh(c,f),p=p.createElement("link"),Yt(p);var w=p;w._p=new Promise(function(E,B){w.onload=E,w.onerror=B}),Kn(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=tu.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var kh=0;function wS(n,r){return n.stylesheets&&n.count===0&&ru(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&ru(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+r);0<n.imgBytes&&kh===0&&(kh=62500*tS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ru(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>kh?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function tu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ru(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var nu=null;function ru(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,nu=new Map,r.forEach(jS,n),nu=null,tu.call(n))}function jS(n,r){if(!(r.state.loading&4)){var o=nu.get(n);if(o)var c=o.get(null);else{o=new Map,nu.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=r.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,f),o.set(w,f),this.count++,c=tu.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var ul={$$typeof:R,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function SS(n,r,o,c,f,p,w,E,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.hiddenUpdates=vn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Db(n,r,o,c,f,p,w,E,B,oe,xe,je){return n=new SS(n,r,o,w,B,oe,xe,je,E),r=1,p===!0&&(r|=24),p=Nr(3,null,null,r),n.current=p,p.stateNode=n,r=nf(),r.refCount++,n.pooledCache=r,r.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:r},of(p),n}function Ab(n){return n?(n=$i,n):$i}function Rb(n,r,o,c,f,p){f=Ab(f),c.context===null?c.context=f:c.pendingContext=f,c=ga(r),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=xa(n,c,r),o!==null&&(mr(o,n,r),Po(o,n,r))}function Ob(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Nh(n,r){Ob(n,r),(n=n.alternate)&&Ob(n,r)}function zb(n){if(n.tag===13||n.tag===31){var r=Ga(n,67108864);r!==null&&mr(r,n,67108864),Nh(n,67108864)}}function Lb(n){if(n.tag===13||n.tag===31){var r=Tr();r=br(r);var o=Ga(n,r);o!==null&&mr(o,n,r),Nh(n,r)}}var su=!0;function kS(n,r,o,c){var f=z.T;z.T=null;var p=H.p;try{H.p=2,Ch(n,r,o,c)}finally{H.p=p,z.T=f}}function NS(n,r,o,c){var f=z.T;z.T=null;var p=H.p;try{H.p=8,Ch(n,r,o,c)}finally{H.p=p,z.T=f}}function Ch(n,r,o,c){if(su){var f=Eh(c);if(f===null)fh(n,r,c,au,o),$b(n,c);else if(ES(f,n,r,o,c))c.stopPropagation();else if($b(n,c),r&4&&-1<CS.indexOf(n)){for(;f!==null;){var p=ir(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=kt(p.pendingLanes);if(w!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;w;){var B=1<<31-Ut(w);E.entanglements[1]|=B,w&=~B}ks(p),(Et&6)===0&&(Fc=Ne()+500,sl(0))}}break;case 31:case 13:E=Ga(p,2),E!==null&&mr(E,p,2),Ic(),Nh(p,2)}if(p=Eh(c),p===null&&fh(n,r,c,au,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else fh(n,r,c,null,o)}}function Eh(n){return n=sa(n),_h(n)}var au=null;function _h(n){if(au=null,n=Xr(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=d(r),n!==null)return n;n=null}else if(o===31){if(n=m(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return au=n,null}function Ub(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case ze:return 2;case ye:return 8;case _e:case Be:return 32;case ht:return 268435456;default:return 32}default:return 32}}var Mh=!1,_a=null,Ma=null,Ta=null,dl=new Map,fl=new Map,Da=[],CS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $b(n,r){switch(n){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":dl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(r.pointerId)}}function hl(n,r,o,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},r!==null&&(r=ir(r),r!==null&&zb(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function ES(n,r,o,c,f){switch(r){case"focusin":return _a=hl(_a,n,r,o,c,f),!0;case"dragenter":return Ma=hl(Ma,n,r,o,c,f),!0;case"mouseover":return Ta=hl(Ta,n,r,o,c,f),!0;case"pointerover":var p=f.pointerId;return dl.set(p,hl(dl.get(p)||null,n,r,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,fl.set(p,hl(fl.get(p)||null,n,r,o,c,f)),!0}return!1}function Bb(n){var r=Xr(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){n.blockedOn=r,vr(n.priority,function(){Lb(o)});return}}else if(r===31){if(r=m(o),r!==null){n.blockedOn=r,vr(n.priority,function(){Lb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function iu(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Eh(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);ra=c,o.target.dispatchEvent(c),ra=null}else return r=ir(o),r!==null&&zb(r),n.blockedOn=o,!1;r.shift()}return!0}function qb(n,r,o){iu(n)&&o.delete(r)}function _S(){Mh=!1,_a!==null&&iu(_a)&&(_a=null),Ma!==null&&iu(Ma)&&(Ma=null),Ta!==null&&iu(Ta)&&(Ta=null),dl.forEach(qb),fl.forEach(qb)}function ou(n,r){n.blockedOn===r&&(n.blockedOn=null,Mh||(Mh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_S)))}var lu=null;function Fb(n){lu!==n&&(lu=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){lu===n&&(lu=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(_h(c||o)===null)continue;break}var p=ir(o);p!==null&&(n.splice(r,3),r-=3,Ef(p,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function lo(n){function r(B){return ou(B,n)}_a!==null&&ou(_a,n),Ma!==null&&ou(Ma,n),Ta!==null&&ou(Ta,n),dl.forEach(r),fl.forEach(r);for(var o=0;o<Da.length;o++){var c=Da[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Da.length&&(o=Da[0],o.blockedOn===null);)Bb(o),o.blockedOn===null&&Da.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],w=f[Dn]||null;if(typeof p=="function")w||Fb(o);else if(w){var E=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[Dn]||null)E=w.formAction;else if(_h(f)!==null)continue}else E=w.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),Fb(o)}}}function Pb(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Th(n){this._internalRoot=n}cu.prototype.render=Th.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Tr();Rb(o,c,n,r,null,null)},cu.prototype.unmount=Th.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Rb(n.current,2,null,n,null,null),Ic(),r[ps]=null}};function cu(n){this._internalRoot=n}cu.prototype.unstable_scheduleHydration=function(n){if(n){var r=Yn();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Da.length&&r!==0&&r<Da[o].priority;o++);Da.splice(o,0,n),o===0&&Bb(n)}};var Ib=t.version;if(Ib!=="19.2.0")throw Error(i(527,Ib,"19.2.0"));H.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=x(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var MS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{Dt=uu.inject(MS),jt=uu}catch{}}return pl.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=Gg,p=Yg,w=Xg;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Db(n,1,!1,null,null,o,c,null,f,p,w,Pb),n[ps]=r.current,dh(n),new Th(r)},pl.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",p=Gg,w=Yg,E=Xg,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=Db(n,1,!0,r,o??null,c,f,B,p,w,E,Pb),r.context=Ab(null),o=r.current,c=Tr(),c=br(c),f=ga(c),f.callback=null,xa(o,f,c),o=c,r.current.lanes=o,Mn(r,o),ks(r),n[ps]=r.current,dh(n),new cu(r)},pl.version="19.2.0",pl}var Jb;function $S(){if(Jb)return Rh.exports;Jb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Rh.exports=US(),Rh.exports}var BS=$S();const qS=d0(BS),Yu=h.createContext(null);function FS({children:e}){const[t,s]=h.useState(()=>({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash})),i=h.useRef(new Set),l=h.useRef(t);h.useEffect(()=>{l.current=t},[t]);const u=h.useCallback(x=>{for(const b of i.current)if(b(x)===!1)return!1;return!0},[]);h.useEffect(()=>{const x=()=>{const b={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},v=`${b.pathname}${b.search}${b.hash}`;if(!u({kind:"pop",to:v,location:b})){const k=l.current;window.history.pushState(null,"",`${k.pathname}${k.search}${k.hash}`);return}s(b)};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[u]);const d=h.useCallback(x=>(i.current.add(x),()=>{i.current.delete(x)}),[]),m=h.useCallback((x,b)=>{const v=new URL(x,window.location.origin),y={pathname:v.pathname,search:v.search,hash:v.hash},k=`${y.pathname}${y.search}${y.hash}`,S=b?.replace?"replace":"push";u({kind:S,to:k,location:y})&&(b?.replace?window.history.replaceState(null,"",k):window.history.pushState(null,"",k),window.dispatchEvent(new PopStateEvent("popstate")))},[u]),g=h.useMemo(()=>({location:t,navigate:m,registerBlocker:d}),[t,m,d]);return a.jsx(Yu.Provider,{value:g,children:e})}function Fn(){const e=h.useContext(Yu);if(!e)throw new Error("useLocation must be used within NavProvider");return e.location}function Zt(){const e=h.useContext(Yu);if(!e)throw new Error("useNavigate must be used within NavProvider");return e.navigate}function h0(e,t=!0){const s=h.useContext(Yu);if(!s)throw new Error("useNavigationBlocker must be used within NavProvider");h.useEffect(()=>{if(t)return s.registerBlocker(e)},[e,s,t])}var wo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},PS={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},IS=class{#e=PS;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},fi=new IS;function HS(e){setTimeout(e,0)}var pi=typeof window>"u"||"Deno"in globalThis;function rr(){}function VS(e,t){return typeof e=="function"?e(t):e}function nm(e){return typeof e=="number"&&e>=0&&e!==1/0}function m0(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ua(e,t){return typeof e=="function"?e(t):e}function Kr(e,t){return typeof e=="function"?e(t):e}function ev(e,t){const{type:s="all",exact:i,fetchStatus:l,predicate:u,queryKey:d,stale:m}=e;if(d){if(i){if(t.queryHash!==Mm(d,t.options))return!1}else if(!El(t.queryKey,d))return!1}if(s!=="all"){const g=t.isActive();if(s==="active"&&!g||s==="inactive"&&g)return!1}return!(typeof m=="boolean"&&t.isStale()!==m||l&&l!==t.state.fetchStatus||u&&!u(t))}function tv(e,t){const{exact:s,status:i,predicate:l,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(s){if(gi(t.options.mutationKey)!==gi(u))return!1}else if(!El(t.options.mutationKey,u))return!1}return!(i&&t.state.status!==i||l&&!l(t))}function Mm(e,t){return(t?.queryKeyHashFn||gi)(e)}function gi(e){return JSON.stringify(e,(t,s)=>rm(s)?Object.keys(s).sort().reduce((i,l)=>(i[l]=s[l],i),{}):s)}function El(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>El(e[s],t[s])):!1}var ZS=Object.prototype.hasOwnProperty;function p0(e,t){if(e===t)return e;const s=nv(e)&&nv(t);if(!s&&!(rm(e)&&rm(t)))return t;const l=(s?e:Object.keys(e)).length,u=s?t:Object.keys(t),d=u.length,m=s?new Array(d):{};let g=0;for(let x=0;x<d;x++){const b=s?x:u[x],v=e[b],y=t[b];if(v===y){m[b]=v,(s?x<l:ZS.call(e,b))&&g++;continue}if(v===null||y===null||typeof v!="object"||typeof y!="object"){m[b]=y;continue}const k=p0(v,y);m[b]=k,k===v&&g++}return l===d&&g===l?e:m}function Tu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function nv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function rm(e){if(!rv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!rv(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rv(e){return Object.prototype.toString.call(e)==="[object Object]"}function WS(e){return new Promise(t=>{fi.setTimeout(t,e)})}function sm(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?p0(e,t):t}function QS(e,t,s=0){const i=[...e,t];return s&&i.length>s?i.slice(1):i}function KS(e,t,s=0){const i=[t,...e];return s&&i.length>s?i.slice(0,-1):i}var Tm=Symbol();function g0(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Tm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function x0(e,t){return typeof e=="function"?e(...t):!!e}var GS=class extends wo{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!pi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Dm=new GS;function am(){let e,t;const s=new Promise((l,u)=>{e=l,t=u});s.status="pending",s.catch(()=>{});function i(l){Object.assign(s,l),delete s.resolve,delete s.reject}return s.resolve=l=>{i({status:"fulfilled",value:l}),e(l)},s.reject=l=>{i({status:"rejected",reason:l}),t(l)},s}var YS=HS;function XS(){let e=[],t=0,s=m=>{m()},i=m=>{m()},l=YS;const u=m=>{t?e.push(m):l(()=>{s(m)})},d=()=>{const m=e;e=[],m.length&&l(()=>{i(()=>{m.forEach(g=>{s(g)})})})};return{batch:m=>{let g;t++;try{g=m()}finally{t--,t||d()}return g},batchCalls:m=>(...g)=>{u(()=>{m(...g)})},schedule:u,setNotifyFunction:m=>{s=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{l=m}}}var zn=XS(),JS=class extends wo{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!pi&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},Du=new JS;function ek(e){return Math.min(1e3*2**e,3e4)}function b0(e){return(e??"online")==="online"?Du.isOnline():!0}var im=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function v0(e){let t=!1,s=0,i;const l=am(),u=()=>l.status!=="pending",d=j=>{if(!u()){const N=new im(j);y(N),e.onCancel?.(N)}},m=()=>{t=!0},g=()=>{t=!1},x=()=>Dm.isFocused()&&(e.networkMode==="always"||Du.isOnline())&&e.canRun(),b=()=>b0(e.networkMode)&&e.canRun(),v=j=>{u()||(i?.(),l.resolve(j))},y=j=>{u()||(i?.(),l.reject(j))},k=()=>new Promise(j=>{i=N=>{(u()||x())&&j(N)},e.onPause?.()}).then(()=>{i=void 0,u()||e.onContinue?.()}),S=()=>{if(u())return;let j;const N=s===0?e.initialPromise:void 0;try{j=N??e.fn()}catch(M){j=Promise.reject(M)}Promise.resolve(j).then(v).catch(M=>{if(u())return;const _=e.retry??(pi?0:3),R=e.retryDelay??ek,q=typeof R=="function"?R(s,M):R,$=_===!0||typeof _=="number"&&s<_||typeof _=="function"&&_(s,M);if(t||!$){y(M);return}s++,e.onFail?.(s,M),WS(q).then(()=>x()?void 0:k()).then(()=>{t?y(M):S()})})};return{promise:l,status:()=>l.status,cancel:d,continue:()=>(i?.(),l),cancelRetry:m,continueRetry:g,canStart:b,start:()=>(b()?S():k().then(S),l)}}var y0=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nm(this.gcTime)&&(this.#e=fi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(fi.clearTimeout(this.#e),this.#e=void 0)}},tk=class extends y0{#e;#t;#n;#s;#r;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=sv(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=sv(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const s=sm(this.state.data,e,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Kr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ua(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!m0(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},l=()=>{const m=g0(this.options,t),x=(()=>{const b={client:this.#s,queryKey:this.queryKey,meta:this.meta};return i(b),b})();return this.#o=!1,this.options.persister?this.options.persister(m,x,this):m(x)},d=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:l};return i(m),m})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#r=v0({initialPromise:t?.initialPromise,fn:d.fetchFn,onCancel:m=>{m instanceof im&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(m,g)=>{this.#a({type:"failed",failureCount:m,error:g})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const m=await this.#r.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#n.config.onSuccess?.(m,this),this.#n.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof im){if(m.silent)return this.#r.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#a({type:"error",error:m}),this.#n.config.onError?.(m,this),this.#n.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#a(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...w0(s.data,this.options),fetchMeta:e.meta??null};case"success":const i={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const l=e.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),zn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function w0(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:b0(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sv(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var j0=class extends wo{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=am(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#i;#o;#a;#p;#f;#h;#c;#u;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),av(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return om(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return om(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),t._defaulted&&!Tu(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&iv(this.#t,s,this.options,t)&&this.#d(),this.updateResult(),i&&(this.#t!==s||Kr(this.options.enabled,this.#t)!==Kr(t.enabled,this.#t)||Ua(this.options.staleTime,this.#t)!==Ua(t.staleTime,this.#t))&&this.#g();const l=this.#x();i&&(this.#t!==s||Kr(this.options.enabled,this.#t)!==Kr(t.enabled,this.#t)||l!==this.#l)&&this.#b(l)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return rk(this,s)&&(this.#s=s,this.#i=this.options,this.#r=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#j();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(rr)),t}#g(){this.#y();const e=Ua(this.options.staleTime,this.#t);if(pi||this.#s.isStale||!nm(e))return;const s=m0(this.#s.dataUpdatedAt,e)+1;this.#c=fi.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#l=e,!(pi||Kr(this.options.enabled,this.#t)===!1||!nm(this.#l)||this.#l===0)&&(this.#u=fi.setInterval(()=>{(this.options.refetchIntervalInBackground||Dm.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#b(this.#x())}#y(){this.#c&&(fi.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(fi.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const s=this.#t,i=this.options,l=this.#s,u=this.#r,d=this.#i,g=e!==s?e.state:this.#n,{state:x}=e;let b={...x},v=!1,y;if(t._optimisticResults){const C=this.hasListeners(),L=!C&&av(e,t),V=C&&iv(e,s,t,i);(L||V)&&(b={...b,...w0(x.data,e.options)}),t._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:k,errorUpdatedAt:S,status:j}=b;y=b.data;let N=!1;if(t.placeholderData!==void 0&&y===void 0&&j==="pending"){let C;l?.isPlaceholderData&&t.placeholderData===d?.placeholderData?(C=l.data,N=!0):C=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,C!==void 0&&(j="success",y=sm(l?.data,C,t),v=!0)}if(t.select&&y!==void 0&&!N)if(l&&y===u?.data&&t.select===this.#p)y=this.#f;else try{this.#p=t.select,y=t.select(y),y=sm(l?.data,y,t),this.#f=y,this.#a=null}catch(C){this.#a=C}this.#a&&(k=this.#a,y=this.#f,S=Date.now(),j="error");const M=b.fetchStatus==="fetching",_=j==="pending",R=j==="error",q=_&&M,$=y!==void 0,D={status:j,fetchStatus:b.fetchStatus,isPending:_,isSuccess:j==="success",isError:R,isInitialLoading:q,isLoading:q,data:y,dataUpdatedAt:b.dataUpdatedAt,error:k,errorUpdatedAt:S,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>g.dataUpdateCount||b.errorUpdateCount>g.errorUpdateCount,isFetching:M,isRefetching:M&&!_,isLoadingError:R&&!$,isPaused:b.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:R&&$,isStale:Am(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Kr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=K=>{D.status==="error"?K.reject(D.error):D.data!==void 0&&K.resolve(D.data)},L=()=>{const K=this.#o=D.promise=am();C(K)},V=this.#o;switch(V.status){case"pending":e.queryHash===s.queryHash&&C(V);break;case"fulfilled":(D.status==="error"||D.data!==V.value)&&L();break;case"rejected":(D.status!=="error"||D.error!==V.reason)&&L();break}}return D}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#h=this.#t),Tu(t,e))return;this.#s=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!this.#m.size)return!0;const u=new Set(l??this.#m);return this.options.throwOnError&&u.add("error"),Object.keys(this.#s).some(d=>{const m=d;return this.#s[m]!==e[m]&&u.has(m)})};this.#S({listeners:s()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){zn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function nk(e,t){return Kr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function av(e,t){return nk(e,t)||e.state.data!==void 0&&om(e,t,t.refetchOnMount)}function om(e,t,s){if(Kr(t.enabled,e)!==!1&&Ua(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&Am(e,t)}return!1}function iv(e,t,s,i){return(e!==t||Kr(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Am(e,s)}function Am(e,t){return Kr(t.enabled,e)!==!1&&e.isStaleByTime(Ua(t.staleTime,e))}function rk(e,t){return!Tu(e.getCurrentResult(),t)}function Au(e){return{onFetch:(t,s)=>{const i=t.options,l=t.fetchOptions?.meta?.fetchMore?.direction,u=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let m={pages:[],pageParams:[]},g=0;const x=async()=>{let b=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},y=g0(t.options,t.fetchOptions),k=async(S,j,N)=>{if(b)return Promise.reject();if(j==null&&S.pages.length)return Promise.resolve(S);const _=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:j,direction:N?"backward":"forward",meta:t.options.meta};return v(I),I})(),R=await y(_),{maxPages:q}=t.options,$=N?KS:QS;return{pages:$(S.pages,R,q),pageParams:$(S.pageParams,j,q)}};if(l&&u.length){const S=l==="backward",j=S?S0:lm,N={pages:u,pageParams:d},M=j(i,N);m=await k(N,M,S)}else{const S=e??u.length;do{const j=g===0?d[0]??i.initialPageParam:lm(i,m);if(g>0&&j==null)break;m=await k(m,j),g++}while(g<S)}return m};t.options.persister?t.fetchFn=()=>t.options.persister?.(x,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=x}}}function lm(e,{pages:t,pageParams:s}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,s[i],s):void 0}function S0(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}function sk(e,t){return t?lm(e,t)!=null:!1}function ak(e,t){return!t||!e.getPreviousPageParam?!1:S0(e,t)!=null}var ik=class extends j0{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Au()})}getOptimisticResult(e){return e.behavior=Au(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:s}=e,i=super.createResult(e,t),{isFetching:l,isRefetching:u,isError:d,isRefetchError:m}=i,g=s.fetchMeta?.fetchMore?.direction,x=d&&g==="forward",b=l&&g==="forward",v=d&&g==="backward",y=l&&g==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:sk(t,s.data),hasPreviousPage:ak(t,s.data),isFetchNextPageError:x,isFetchingNextPage:b,isFetchPreviousPageError:v,isFetchingPreviousPage:y,isRefetchError:m&&!x&&!v,isRefetching:u&&!b&&!y}}},ok=class extends y0{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||k0(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=v0({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(u,d)=>{this.#r({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",l=!this.#s.canStart();try{if(i)t();else{this.#r({type:"pending",variables:e,isPaused:l}),await this.#n.config.onMutate?.(e,this,s);const d=await this.options.onMutate?.(e,s);d!==this.state.context&&this.#r({type:"pending",context:d,variables:e,isPaused:l})}const u=await this.#s.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,s),await this.options.onSuccess?.(u,e,this.state.context,s),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(u,null,e,this.state.context,s),this.#r({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,s),await this.options.onError?.(u,e,this.state.context,s),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,u,e,this.state.context,s),u}finally{this.#r({type:"error",error:u})}}finally{this.#n.runNext(this)}}#r(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),zn.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function k0(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var lk=class extends wo{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,s){const i=new ok({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:s});return this.add(i),i}add(e){this.#e.add(e);const t=du(e);if(typeof t=="string"){const s=this.#t.get(t);s?s.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=du(e);if(typeof t=="string"){const s=this.#t.get(t);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=du(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(l=>l.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=du(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){zn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(s=>tv(t,s))}findAll(e={}){return this.getAll().filter(t=>tv(e,t))}notify(e){zn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return zn.batch(()=>Promise.all(e.map(t=>t.continue().catch(rr))))}};function du(e){return e.options.scope?.id}var ck=class extends wo{#e;#t=void 0;#n;#s;constructor(t,s){super(),this.#e=t,this.setOptions(s),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=this.#e.defaultMutationOptions(t),Tu(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),s?.mutationKey&&this.options.mutationKey&&gi(s.mutationKey)!==gi(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#i()}mutate(t,s){return this.#s=s,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#r(){const t=this.#n?.state??k0();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){zn.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#t.variables,i=this.#t.context,l={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#s.onSuccess?.(t.data,s,i,l),this.#s.onSettled?.(t.data,null,s,i,l)):t?.type==="error"&&(this.#s.onError?.(t.error,s,i,l),this.#s.onSettled?.(void 0,t.error,s,i,l))}this.listeners.forEach(s=>{s(this.#t)})})}},uk=class extends wo{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){const i=t.queryKey,l=t.queryHash??Mm(i,t);let u=this.get(l);return u||(u=new tk({client:e,queryKey:i,queryHash:l,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ev(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>ev(e,s)):t}notify(e){zn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},dk=class{#e;#t;#n;#s;#r;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new uk,this.#t=e.mutationCache||new lk,this.#n=e.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=Dm.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Du.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#e.build(this,t),i=s.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Ua(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:s})=>{const i=s.data;return[t,i]})}setQueryData(e,t,s){const i=this.defaultQueryOptions({queryKey:e}),u=this.#e.get(i.queryHash)?.state.data,d=VS(t,u);if(d!==void 0)return this.#e.build(this,i).setData(d,{...s,manual:!0})}setQueriesData(e,t,s){return zn.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;zn.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=this.#e;return zn.batch(()=>(s.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},i=zn.batch(()=>this.#e.findAll(e).map(l=>l.cancel(s)));return Promise.all(i).then(rr).catch(rr)}invalidateQueries(e,t={}){return zn.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},i=zn.batch(()=>this.#e.findAll(e).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let u=l.fetch(void 0,s);return s.throwOnError||(u=u.catch(rr)),l.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(rr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=this.#e.build(this,t);return s.isStaleByTime(Ua(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rr).catch(rr)}fetchInfiniteQuery(e){return e.behavior=Au(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rr).catch(rr)}ensureInfiniteQueryData(e){return e.behavior=Au(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Du.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#s.set(gi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],s={};return t.forEach(i=>{El(e,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(e,t){this.#r.set(gi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],s={};return t.forEach(i=>{El(e,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Mm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Tm&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},N0=h.createContext(void 0),Tt=e=>{const t=h.useContext(N0);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},fk=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(N0.Provider,{value:e,children:t})),C0=h.createContext(!1),hk=()=>h.useContext(C0);C0.Provider;function mk(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var pk=h.createContext(mk()),gk=()=>h.useContext(pk),xk=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},bk=e=>{h.useEffect(()=>{e.clearReset()},[e])},vk=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:l})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(l&&e.data===void 0||x0(s,[e.error,i])),yk=e=>{if(e.suspense){const s=l=>l==="static"?l:Math.max(l??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...l)=>s(i(...l)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wk=(e,t)=>e.isLoading&&e.isFetching&&!t,jk=(e,t)=>e?.suspense&&t.isPending,ov=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function E0(e,t,s){const i=hk(),l=gk(),u=Tt(),d=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=i?"isRestoring":"optimistic",yk(d),xk(d,l),bk(l);const m=!u.getQueryCache().get(d.queryHash),[g]=h.useState(()=>new t(u,d)),x=g.getOptimisticResult(d),b=!i&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(v=>{const y=b?g.subscribe(zn.batchCalls(v)):rr;return g.updateResult(),y},[g,b]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),h.useEffect(()=>{g.setOptions(d)},[d,g]),jk(d,x))throw ov(d,g,l);if(vk({result:x,errorResetBoundary:l,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw x.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(d,x),d.experimental_prefetchInRender&&!pi&&wk(x,i)&&(m?ov(d,g,l):u.getQueryCache().get(d.queryHash)?.promise)?.catch(rr).finally(()=>{g.updateResult()}),d.notifyOnChangeProps?x:g.trackResult(x)}function sn(e,t){return E0(e,j0)}function En(e,t){const s=Tt(),[i]=h.useState(()=>new ck(s,e));h.useEffect(()=>{i.setOptions(e)},[i,e]);const l=h.useSyncExternalStore(h.useCallback(d=>i.subscribe(zn.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=h.useCallback((d,m)=>{i.mutate(d,m).catch(rr)},[i]);if(l.error&&x0(i.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:u,mutateAsync:l.mutate}}function Rm(e,t){return E0(e,ik)}const Sk="modulepreload",kk=function(e){return"/"+e},lv={},_0=function(t,s,i){let l=Promise.resolve();if(s&&s.length>0){let g=function(x){return Promise.all(x.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");l=g(s.map(x=>{if(x=kk(x),x in lv)return;lv[x]=!0;const b=x.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const y=document.createElement("link");if(y.rel=b?"stylesheet":Sk,b||(y.as="script"),y.crossOrigin="",y.href=x,m&&y.setAttribute("nonce",m),document.head.appendChild(y),b)return new Promise((k,S)=>{y.addEventListener("load",k),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return l.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return t().catch(u)})},Nk=[{id:"default",label:"Default",description:"Slate neutrals + indigo accent.",kind:"accent"},{id:"ocean",label:"Ocean",description:"Cyan accent on slate neutrals.",kind:"accent"},{id:"forest",label:"Forest",description:"Emerald accent on slate neutrals.",kind:"accent"},{id:"sunset",label:"Sunset",description:"Orange accent on slate neutrals.",kind:"accent"},{id:"rose",label:"Rose",description:"Rose accent on slate neutrals.",kind:"accent"},{id:"grape",label:"Grape",description:"Violet accent on slate neutrals.",kind:"accent"},{id:"sand",label:"Sand",description:"Stone neutrals + teal accent.",kind:"full"},{id:"carbon",label:"Carbon",description:"Zinc neutrals + blue accent.",kind:"full"}],Om="ade.mode",zm="ade.theme";function M0(e){if(typeof window>"u")return null;try{return window.localStorage.getItem(e)}catch(t){return console.warn("Failed to read theme preference",t),null}}function Ck(){const e=M0(Om);return e==="light"||e==="dark"||e==="system"?e:null}function Ek(){const e=M0(zm);return typeof e=="string"&&e.length>0?e:null}function _k(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Om,e)}catch(t){console.warn("Failed to persist theme mode",t)}}function Mk(e){if(!(typeof window>"u"))try{window.localStorage.setItem(zm,e)}catch(t){console.warn("Failed to persist theme name",t)}}const T0=h.createContext(null),cv="(prefers-color-scheme: dark)";function Tk({children:e}){const t=h.useMemo(()=>Ck(),[]),s=h.useMemo(()=>Ek(),[]),[i,l]=h.useState(t??"system"),[u,d]=h.useState(s??uv),[m,g]=h.useState(null),[x,b]=h.useState(()=>typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia(cv).matches);h.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const M=window.matchMedia(cv),_=R=>{b(R.matches)};return typeof M.addEventListener=="function"?M.addEventListener("change",_):typeof M.addListener=="function"&&M.addListener(_),b(M.matches),()=>{typeof M.removeEventListener=="function"?M.removeEventListener("change",_):typeof M.removeListener=="function"&&M.removeListener(_)}},[]);const v=h.useMemo(()=>Ak(i,x),[i,x]),y=m??u;h.useEffect(()=>{Rk(y,v)},[y,v]),h.useEffect(()=>{Mk(u)},[u]),h.useEffect(()=>{_k(i)},[i]),h.useEffect(()=>{if(typeof window>"u")return;const M=_=>{if(_.key===Om){const R=_.newValue;R==="light"||R==="dark"||R==="system"?l(R):R===null&&l("system");return}if(_.key===zm){const R=_.newValue;typeof R=="string"&&R.length>0?(d(R),g(null)):R===null&&(d(uv),g(null))}};return window.addEventListener("storage",M),()=>window.removeEventListener("storage",M)},[]);const k=h.useCallback(M=>{d(M),g(null)},[]),S=h.useCallback(M=>{g(M)},[]),j=h.useCallback(M=>{l(M)},[]),N=h.useMemo(()=>({theme:u,modePreference:i,resolvedMode:v,systemPrefersDark:x,setTheme:k,setPreviewTheme:S,setModePreference:j}),[i,v,j,S,k,x,u]);return a.jsx(T0.Provider,{value:N,children:e})}function Xu(){const e=h.useContext(T0);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const uv="default",Dk=[{value:"system",label:"System",description:"Match your device"},{value:"light",label:"Light",description:"Bright and clear"},{value:"dark",label:"Dark",description:"Low-light friendly"}],cm=Nk;function D0(e){return e==="dark"}function Ak(e,t){return e==="system"?t?"dark":"light":e}function Rk(e,t){if(typeof document>"u")return;const s=document.documentElement;s.dataset.theme=e,s.dataset.mode=t,s.style.colorScheme=D0(t)?"dark":"light"}function Ok({children:e}){const[t]=h.useState(()=>new dk({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}}));return a.jsx(Tk,{children:a.jsxs(fk,{client:t,children:[e,null]})})}class Jt extends Error{status;problem;constructor(t,s,i){super(t),this.name="ApiError",this.status=s,this.problem=i}}const zk=/\{[^{}]+\}/g,Lk=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function Uk(){return Math.random().toString(36).slice(2,11)}function $k(e){let{baseUrl:t="",Request:s=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:l,bodySerializer:u,headers:d,requestInitExt:m=void 0,...g}={...e};m=Lk()?m:void 0,t=hv(t);const x=[];async function b(v,y){const{baseUrl:k,fetch:S=i,Request:j=s,headers:N,params:M={},parseAs:_="json",querySerializer:R,bodySerializer:q=u??qk,body:$,middleware:I=[],...D}=y||{};let C=t;k&&(C=hv(k)??t);let L=typeof l=="function"?l:dv(l);R&&(L=typeof R=="function"?R:dv({...typeof l=="object"?l:{},...R}));const V=$===void 0?void 0:q($,fv(d,N,M.header)),K=fv(V===void 0||V instanceof FormData?{}:{"Content-Type":"application/json"},d,N,M.header),A=[...x,...I],X={redirect:"follow",...g,...D,body:V,headers:K};let fe,Se,z=new j(Fk(v,{baseUrl:C,params:M,querySerializer:L}),X),H;for(const ge in D)ge in z||(z[ge]=D[ge]);if(A.length){fe=Uk(),Se=Object.freeze({baseUrl:C,fetch:S,parseAs:_,querySerializer:L,bodySerializer:q});for(const ge of A)if(ge&&typeof ge=="object"&&typeof ge.onRequest=="function"){const ce=await ge.onRequest({request:z,schemaPath:v,params:M,options:Se,id:fe});if(ce)if(ce instanceof j)z=ce;else if(ce instanceof Response){H=ce;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!H){try{H=await S(z,m)}catch(ge){let ce=ge;if(A.length)for(let T=A.length-1;T>=0;T--){const G=A[T];if(G&&typeof G=="object"&&typeof G.onError=="function"){const ue=await G.onError({request:z,error:ce,schemaPath:v,params:M,options:Se,id:fe});if(ue){if(ue instanceof Response){ce=void 0,H=ue;break}if(ue instanceof Error){ce=ue;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(ce)throw ce}if(A.length)for(let ge=A.length-1;ge>=0;ge--){const ce=A[ge];if(ce&&typeof ce=="object"&&typeof ce.onResponse=="function"){const T=await ce.onResponse({request:z,response:H,schemaPath:v,params:M,options:Se,id:fe});if(T){if(!(T instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");H=T}}}}if(H.status===204||z.method==="HEAD"||H.headers.get("Content-Length")==="0")return H.ok?{data:void 0,response:H}:{error:void 0,response:H};if(H.ok)return _==="stream"?{data:H.body,response:H}:{data:await H[_](),response:H};let ae=await H.text();try{ae=JSON.parse(ae)}catch{}return{error:ae,response:H}}return{request(v,y,k){return b(y,{...k,method:v.toUpperCase()})},GET(v,y){return b(v,{...y,method:"GET"})},PUT(v,y){return b(v,{...y,method:"PUT"})},POST(v,y){return b(v,{...y,method:"POST"})},DELETE(v,y){return b(v,{...y,method:"DELETE"})},OPTIONS(v,y){return b(v,{...y,method:"OPTIONS"})},HEAD(v,y){return b(v,{...y,method:"HEAD"})},PATCH(v,y){return b(v,{...y,method:"PATCH"})},TRACE(v,y){return b(v,{...y,method:"TRACE"})},use(...v){for(const y of v)if(y){if(typeof y!="object"||!("onRequest"in y||"onResponse"in y||"onError"in y))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");x.push(y)}},eject(...v){for(const y of v){const k=x.indexOf(y);k!==-1&&x.splice(k,1)}}}}function Ju(e,t,s){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${s?.allowReserved===!0?t:encodeURIComponent(t)}`}function A0(e,t,s){if(!t||typeof t!="object")return"";const i=[],l={simple:",",label:".",matrix:";"}[s.style]||"&";if(s.style!=="deepObject"&&s.explode===!1){for(const m in t)i.push(m,s.allowReserved===!0?t[m]:encodeURIComponent(t[m]));const d=i.join(",");switch(s.style){case"form":return`${e}=${d}`;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return d}}for(const d in t){const m=s.style==="deepObject"?`${e}[${d}]`:d;i.push(Ju(m,t[d],s))}const u=i.join(l);return s.style==="label"||s.style==="matrix"?`${l}${u}`:u}function R0(e,t,s){if(!Array.isArray(t))return"";if(s.explode===!1){const u={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[s.style]||",",d=(s.allowReserved===!0?t:t.map(m=>encodeURIComponent(m))).join(u);switch(s.style){case"simple":return d;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return`${e}=${d}`}}const i={simple:",",label:".",matrix:";"}[s.style]||"&",l=[];for(const u of t)s.style==="simple"||s.style==="label"?l.push(s.allowReserved===!0?u:encodeURIComponent(u)):l.push(Ju(e,u,s));return s.style==="label"||s.style==="matrix"?`${i}${l.join(i)}`:l.join(i)}function dv(e){return function(s){const i=[];if(s&&typeof s=="object")for(const l in s){const u=s[l];if(u!=null){if(Array.isArray(u)){if(u.length===0)continue;i.push(R0(l,u,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof u=="object"){i.push(A0(l,u,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}i.push(Ju(l,u,e))}}return i.join("&")}}function Bk(e,t){let s=e;for(const i of e.match(zk)??[]){let l=i.substring(1,i.length-1),u=!1,d="simple";if(l.endsWith("*")&&(u=!0,l=l.substring(0,l.length-1)),l.startsWith(".")?(d="label",l=l.substring(1)):l.startsWith(";")&&(d="matrix",l=l.substring(1)),!t||t[l]===void 0||t[l]===null)continue;const m=t[l];if(Array.isArray(m)){s=s.replace(i,R0(l,m,{style:d,explode:u}));continue}if(typeof m=="object"){s=s.replace(i,A0(l,m,{style:d,explode:u}));continue}if(d==="matrix"){s=s.replace(i,`;${Ju(l,m)}`);continue}s=s.replace(i,d==="label"?`.${encodeURIComponent(m)}`:encodeURIComponent(m))}return s}function qk(e,t){return e instanceof FormData?e:t&&(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function Fk(e,t){let s=`${t.baseUrl}${e}`;t.params?.path&&(s=Bk(s,t.params.path));let i=t.querySerializer(t.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(s+=`?${i}`),s}function fv(...e){const t=new Headers;for(const s of e){if(!s||typeof s!="object")continue;const i=s instanceof Headers?s.entries():Object.entries(s);for(const[l,u]of i)if(u===null)t.delete(l);else if(Array.isArray(u))for(const d of u)t.append(l,d);else u!==void 0&&t.set(l,u)}return t}function hv(e){return e.endsWith("/")?e.substring(0,e.length-1):e}const Pk=["ade_csrf","backend_app_csrf"];function Ik(){return Pk}function Hk(){if(typeof document>"u")return null;const e=document.cookie;if(!e)return null;const t=new Map,s=e.split(";");for(const i of s){const[l,...u]=i.trim().split("=");l&&t.set(l,decodeURIComponent(u.join("=")))}return t}function O0(){const e=Hk();if(!e)return null;for(const t of Ik()){const s=e.get(t);if(s)return s}return null}const z0=new Set(["GET","HEAD","OPTIONS","TRACE"]),Vk="ade.auth.tokens",Uh="",Ru=Uh.endsWith("/api/v1")?Uh.slice(0,-7):Uh;function jo(e){if(!e.startsWith("/"))throw new Error("API paths must begin with '/' relative to the server root");return Ru.length>0?`${Ru}${e}`:e}function L0(e,t){const s=new Headers(t??{});if(s.set("X-Requested-With","fetch"),!s.has("Authorization")){const l=U0();l&&s.set("Authorization",`${l.token_type} ${l.access_token}`)}const i=e.toUpperCase();if(!z0.has(i)){const l=O0();l&&!s.has("X-CSRF-Token")&&s.set("X-CSRF-Token",l)}return s}async function Zk(e,t={}){const s=jo(e),i=t.method??"GET",l=L0(i,t.headers);return await fetch(s,{credentials:"include",...t,headers:l})}const Ie=$k({baseUrl:Ru.length>0?Ru:void 0,credentials:"include",headers:{"X-Requested-With":"fetch"}}),Wk={onRequest({request:e}){const t=e.method?.toUpperCase()??"GET";if(!z0.has(t)){const s=O0();s&&!e.headers.has("X-CSRF-Token")&&e.headers.set("X-CSRF-Token",s)}return e}},Qk={onRequest({request:e}){if(!e.headers.has("Authorization")){const t=U0();t&&e.headers.set("Authorization",`${t.token_type} ${t.access_token}`)}return e}},Kk={async onResponse({response:e}){if(e.ok)return e;const t=await Gk(e),s=t?.title??`Request failed with status ${e.status}`;throw new Jt(s,e.status,t)}};Ie.use(Wk);Ie.use(Qk);Ie.use(Kk);function U0(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Vk);if(!e)return null;const t=JSON.parse(e);if(t&&typeof t.access_token=="string")return{access_token:t.access_token,token_type:t.token_type??"bearer"}}catch{}return null}async function Gk(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const fs={root:["auth"],detail:()=>[...fs.root,"session"],providers:()=>[...fs.root,"providers"],setupStatus:()=>[...fs.root,"setup-status"]},Lm="ade.auth.tokens";let $l=Yk();function Yk(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Lm);if(!e)return null;const t=JSON.parse(e);return!t||typeof t.access_token!="string"?null:{access_token:t.access_token,token_type:t.token_type??"bearer",expires_at:t.expires_at??null,refresh_expires_at:t.refresh_expires_at??null}}catch{return null}}function mv(e,t){if(e){const s=Date.parse(e);if(!Number.isNaN(s))return s}return typeof t=="number"?Date.now()+t*1e3:null}function Xk(e){const t={access_token:e.access_token,token_type:e.token_type??"bearer",expires_at:mv(e.expires_at,e.expires_in),refresh_expires_at:mv(e.refresh_expires_at,e.refresh_expires_in)};if($l=t,typeof window<"u")try{window.localStorage.setItem(Lm,JSON.stringify(t))}catch{}return t}function Um(){if($l=null,typeof window<"u")try{window.localStorage.removeItem(Lm)}catch{}}function Jk(){return $l}function eN(e=$l){return e?.access_token?{Authorization:`${e.token_type?.trim()||"bearer"} ${e.access_token}`}:{}}function pv(e){if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t.toISOString()}function tN(e){const t=e.items.find(s=>s.is_default);return t?t.id:null}function gv(e){return Array.isArray(e)?e.filter(t=>typeof t=="string"):[]}function nN(e){return e?{...e,items:e.items??[]}:{items:[],page:1,page_size:0,total:0,has_next:!1,has_previous:!1}}async function $0(e,t){const s="/api/v1/me/bootstrap";try{const{data:i}=await Ie.GET(s,{signal:t,headers:eN(e),params:{query:{page:1,page_size:200,include_total:!1}}});return i??null}catch(i){if(i instanceof Jt&&(i.status===401||i.status===403))return null;throw i}}function B0(e,t=$l,s=null,i=null){const l=gv(e.roles),u=gv(e.permissions),d=nN(e.workspaces);return{user:{...e.user,roles:l,permissions:u,preferred_workspace_id:tN(d)??null},workspaces:d,roles:l,permissions:u,expires_at:pv(t?.expires_at??null),refresh_expires_at:pv(t?.refresh_expires_at??null),return_to:s,state:i}}async function ed(e,t={}){const s=Xk(e.session),i=await $0(s,t.signal);if(!i)throw Um(),new Error("Unable to load session after authentication.");return B0(i,s,null,null)}async function rN(e={}){try{const{data:t}=await Ie.GET("/api/v1/auth/providers",{signal:e.signal});return t?cN(t):{providers:[],force_sso:!1}}catch(t){if(t instanceof Jt&&t.status===404)return{providers:[],force_sso:!1};throw t}}async function sN(e={}){const t=Jk(),s=await $0(t,e.signal);return s?B0(s,t):(t&&Um(),null)}async function aN(e,t={}){const{data:s}=await Ie.POST("/api/v1/auth/session",{body:e,signal:t.signal});if(!s)throw new Error("Expected session payload from login response.");return ed(s,t)}async function iN(e={}){const{data:t}=await Ie.POST("/api/v1/auth/session/refresh",{body:void 0,signal:e.signal});if(!t)throw new Error("Expected session payload from refresh response.");return ed(t,e)}async function oN(e){const{code:t,state:s,provider:i="sso",signal:l}=e,{data:u}=await Ie.GET("/api/v1/auth/sso/{provider}/callback",{signal:l,params:{path:{provider:i},query:{code:t,state:s}}});if(!u)throw new Error("Expected session payload from SSO callback.");return ed(u,{signal:l})}async function lN(e={}){try{await Ie.DELETE("/api/v1/auth/session",{signal:e.signal,body:void 0})}catch(t){!(t instanceof Jt)||t.status!==401&&t.status}finally{Um()}}function cN(e){return{providers:(e.providers??[]).map(uN),force_sso:!!e.force_sso}}function uN(e){return{...e,start_url:e.start_url??"",icon_url:e.icon_url??null}}const q0=h.createContext(void 0);function fu(e){return e instanceof Error?e:new Error(String(e))}function xv({session:e,refetch:t,children:s}){return hN(e,t),a.jsx(q0.Provider,{value:{session:e,refetch:t},children:s})}function dN(){const e=h.useContext(q0);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e}function yi(){return dN().session}const fN=6e4;function hN(e,t){h.useEffect(()=>{if(typeof window>"u")return;const s=typeof e.expires_at=="string"?Date.parse(e.expires_at):NaN,i=typeof e.refresh_expires_at=="string"?Date.parse(e.refresh_expires_at):NaN;if(Number.isNaN(s)||Number.isNaN(i))return;const l=Date.now();if(i<=l){t().catch(x=>{console.warn("Failed to refetch session after refresh expiry",fu(x))});return}const u=Math.min(s,i)-fN,d=Math.max(u-l,0);let m=!1;const g=window.setTimeout(async()=>{try{if(await iN(),m)return;await t().catch(x=>{console.warn("Failed to refetch session after refresh",fu(x))})}catch(x){if(m)return;console.warn("Failed to refresh session",fu(x)),await t().catch(b=>{console.warn("Failed to refetch session after refresh failure",fu(b))})}},d);return()=>{m=!0,window.clearTimeout(g)}},[t,e.expires_at,e.refresh_expires_at])}function F0(e={}){const t=Tt(),s=sn({queryKey:fs.detail(),queryFn:async({signal:l})=>{const u=await sN({signal:l});return u||null},enabled:e.enabled??!0,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnMount:!0}),i=s.data??null;return h.useEffect(()=>{i||t.removeQueries({queryKey:fs.providers(),exact:!1})},[t,i]),{...s,session:i}}async function mN(e={}){try{const{data:t}=await Ie.GET("/api/v1/auth/setup",{signal:e.signal});if(!t)throw new Error("Expected setup status payload.");return t}catch(t){if(t instanceof Jt&&t.status===404)return{requires_setup:!1,has_users:!0};throw t}}async function pN(e){const{data:t}=await Ie.POST("/api/v1/auth/setup",{body:e});if(!t)throw new Error("Expected session payload from setup response.");return ed(t)}function $m(e=!0){return sn({queryKey:fs.setupStatus(),queryFn:({signal:t})=>mN({signal:t}),enabled:e,staleTime:3e5,refetchOnWindowFocus:!1})}const Bl="/workspaces",gN=new Set(["/","/login","/setup","/logout"]);function xN(e){if(!e)return!0;const t=vN(e);return!!(gN.has(t)||t==="/auth"||t.startsWith("/auth/"))}function bN(e){return`${e.pathname}${e.search}${e.hash}`}function bv(e){const t=bN(e)||"/";return Ou(t)??Bl}function Ou(e){if(!e)return null;const t=e.trim();return!t.startsWith("/")||t.startsWith("//")?null:t==="/"?Bl:xN(t)?null:t}function _l(e){return Ou(e)??Bl}function P0(e){return H0("/login",e)}function I0(e){return H0("/setup",e)}function H0(e,t){const s=_l(t),i=new URLSearchParams;s!==Bl&&i.set("redirectTo",s);const l=i.toString();return l?`${e}?${l}`:e}function zu(e,t){const s=Ou(e);if(s)return s;const i=Ou(t);return i||Bl}function vN(e){let t=e;const s=t.indexOf("#");s>=0&&(t=t.slice(0,s));const i=t.indexOf("?");return i>=0&&(t=t.slice(0,i)),t?t.startsWith("/")?t:`/${t}`:"/"}function ql({children:e}){const t=Fn(),s=Zt(),i=F0(),{session:l,isLoading:u,isError:d,refetch:m}=i,g=!l&&!u&&!d,{data:x,isPending:b,isError:v,isSuccess:y,refetch:k}=$m(g);return h.useEffect(()=>{if(l||u||d)return;if(g){if(b||v)return;if(y&&x?.requires_setup){const j=bv(t);s(I0(j),{replace:!0});return}}const S=bv(t);s(P0(S),{replace:!0})},[d,u,v,b,y,t,s,l,x?.requires_setup,g]),u?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background text-sm text-muted-foreground",children:a.jsx("p",{children:"Loading your workspace"})}):d?a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"We were unable to confirm your session."}),a.jsx("button",{onClick:()=>m(),className:"focus-ring rounded-lg border border-border-strong bg-card px-4 py-2 font-semibold text-muted-foreground hover:bg-muted",children:"Try again"})]}):l?e?a.jsx(xv,{session:l,refetch:m,children:e}):a.jsx(xv,{session:l,refetch:m,children:e??null}):g&&b?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background text-sm text-muted-foreground",children:a.jsx("p",{children:"Preparing initial setup"})}):g&&v?a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"We were unable to check whether ADE is ready."}),a.jsx("button",{onClick:()=>k(),className:"focus-ring rounded-lg border border-border-strong bg-card px-4 py-2 font-semibold text-muted-foreground hover:bg-muted",children:"Try again"})]}):null}const Fl=100,Bm=50;function td(e){if(!(typeof e!="number"||Number.isNaN(e)||e<=0))return Math.min(e,Fl)}async function V0(e,t={}){const{maxPages:s=50}=t,i=[];let l=[],u;for(let g=1;g<=s;g+=1){const x=await e(g);if(i.push(x),l=l.concat(x.items??[]),u===void 0&&x.total!==void 0&&(u=x.total??null),!x.has_next)break}const d=i.at(-1),m=i.at(0);if(!d||!m)throw new Error("No pages were returned while collecting pagination results.");return{...d,items:l,page:1,page_size:m.page_size,has_next:!1,has_previous:!1,total:u??d.total}}function Z0(e,t){return h.useMemo(()=>{if(!e||e.length===0)return[];const s=[],i=new Map;for(const l of e){const u=Array.isArray(l.items)?l.items:[];for(const d of u){const m=t(d),g=i.get(m);if(g===void 0){i.set(m,s.length),s.push(d);continue}s[g]=d}}return s},[e,t])}const W0=Fl,Q0=Bm,K0=Bm,G0=Bm,yN="workspace",ju={page:1,pageSize:W0,includeTotal:!1},wN={page:1,pageSize:Q0,includeTotal:!1},jN={page:1,pageSize:K0,includeTotal:!1},SN={scope:yN,page:1,pageSize:G0,includeTotal:!1},dn={all:()=>["workspaces"],list:(e=ju)=>[...dn.all(),"list",{...e}],detail:e=>[...dn.all(),"detail",e],members:(e,t=wN)=>[...dn.detail(e),"members",{...t}],roles:(e,t=jN)=>[...dn.detail(e),"roles",{...t}],permissions:(e=SN)=>["permissions",{...e}]},Su={page:ju.page,pageSize:ju.pageSize,includeTotal:ju.includeTotal},Y0="workspace";async function kN(e={}){const{page:t,pageSize:s,includeTotal:i,signal:l}=e,u={};typeof t=="number"&&t>0&&(u.page=t);const d=td(s??W0);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:m}=await Ie.GET("/api/v1/workspaces",{params:{query:u},signal:l});if(!m)throw new Error("Expected workspace page payload.");const g=[...m.items].sort((x,b)=>x.name.localeCompare(b.name));return{...m,items:g}}async function NN(e){const{data:t}=await Ie.POST("/api/v1/workspaces",{body:e});if(!t)throw new Error("Expected workspace payload.");return t}async function CN(e,t){const{data:s}=await Ie.PATCH("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}},body:t});if(!s)throw new Error("Expected workspace payload.");return s}async function EN(e){await Ie.DELETE("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}}})}async function _N(e,t={}){const{page:s,pageSize:i,includeTotal:l,signal:u}=t,d={};typeof s=="number"&&s>0&&(d.page=s);const m=td(i??Q0);m&&(d.page_size=m),l&&(d.include_total=!0);const{data:g}=await Ie.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e},query:d},signal:u});if(!g)throw new Error("Expected workspace member page payload.");return g}async function MN(e,t){const{data:s}=await Ie.POST("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},body:t});if(!s)throw new Error("Expected workspace member payload.");return s}async function TN(e,t,s){const{data:i}=await Ie.PUT("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:t}},body:s});if(!i)throw new Error("Expected workspace member payload.");return i}async function DN(e,t){await Ie.DELETE("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:t}}})}async function AN(e={}){const{page:t,pageSize:s,includeTotal:i,signal:l}=e,u={scope:Y0};typeof t=="number"&&t>0&&(u.page=t);const d=td(s??K0);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:m}=await Ie.GET("/api/v1/rbac/roles",{params:{query:u},signal:l});if(!m)throw new Error("Expected workspace role page payload.");return m}async function RN(e,t){const{data:s}=await Ie.POST("/api/v1/rbac/roles",{body:t});if(!s)throw new Error("Expected role payload.");return s}async function ON(e,t,s){const{data:i}=await Ie.PATCH("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:t}},body:s});if(!i)throw new Error("Expected role payload.");return i}async function zN(e,t){await Ie.DELETE("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:t}}})}async function LN(e={}){const{scope:t=Y0,page:s,pageSize:i,includeTotal:l,signal:u}=e,d={scope:t};typeof s=="number"&&s>0&&(d.page=s);const m=td(i??G0);m&&(d.page_size=m),l&&(d.include_total=!0);const{data:g}=await Ie.GET("/api/v1/rbac/permissions",{params:{query:d},signal:u});if(!g)throw new Error("Expected permission page payload.");return g}const UN="/api/v1/workspaces/{workspace_id}/default";async function $N(e){await Ie.PUT(UN,{params:{path:{workspace_id:e}}})}function BN(){const e=Tt();return En({mutationFn:NN,onSuccess(t){e.setQueryData(dn.detail(t.id),t),e.getQueriesData({queryKey:dn.all()}).forEach(([s,i])=>{if(!Array.isArray(s)||s[0]!=="workspaces"||s[1]!=="list"||!i)return;const l=i.items.findIndex(g=>g.id===t.id),d=[...l>=0?i.items.map(g=>g.id===t.id?t:g):[...i.items,t]].sort((g,x)=>g.name.localeCompare(x.name)),m=typeof i.total=="number"&&l===-1?i.total+1:i.total;e.setQueryData(s,{...i,items:d,total:m})}),e.invalidateQueries({queryKey:dn.all()})}})}function qN(e,t){if(!e||typeof e!="object")return e;if("items"in e){const s=e;if(!Array.isArray(s.items))return e;const i=s.items.map(l=>({...l,is_default:l.id===t}));return{...s,items:i}}if("id"in e&&"is_default"in e){const s=e;return{...s,is_default:s.id===t}}return e}function X0(){const e=Tt();return En({mutationFn:t=>$N(t),onSuccess:(t,s)=>{e.setQueriesData({queryKey:dn.all()},i=>qN(i,s))}})}function FN(e){const t=Tt();return En({mutationFn:s=>CN(e,s),onSuccess:s=>{t.setQueryData(dn.detail(s.id),s),t.getQueriesData({queryKey:dn.all()}).forEach(([i,l])=>{if(!Array.isArray(i)||i[0]!=="workspaces"||i[1]!=="list"||!l)return;const d=[...l.items.map(m=>m.id===s.id?s:m)].sort((m,g)=>m.name.localeCompare(g.name));t.setQueryData(i,{...l,items:d})})}})}function PN(e={}){const t=e.page??Su.page,s=e.pageSize??Su.pageSize,i=e.includeTotal??Su.includeTotal;return{queryKey:dn.list({page:t,pageSize:s,includeTotal:i}),queryFn:({signal:l})=>kN({page:t,pageSize:s,includeTotal:i,signal:l}),staleTime:6e4,enabled:e.enabled??!0}}function nd(e={}){const t=Tt(),s=PN(e),i=t.getQueryData(s.queryKey);return sn({...s,initialData:i})}const IN="documents";function qm(e){return`/workspaces/${e}/${IN}`}function $h(e){return e instanceof Error?e:new Error(String(e))}function Xs(e){return{get(){if(typeof window>"u")return null;try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read from storage",$h(t)),null}},set(t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch(s){console.warn("Failed to write to storage",$h(s))}},clear(){if(!(typeof window>"u"))try{window.localStorage.removeItem(e)}catch(t){console.warn("Failed to clear storage",$h(t))}}}}const HN="backend.app.active_workspace",um=Xs(HN);function J0(){return um.get()}function ew(e){if(!e){um.clear();return}um.set(e)}function tw(e){var t,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(s=tw(e[t]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function re(){for(var e,t,s=0,i="",l=arguments.length;s<l;s++)(e=arguments[s])&&(t=tw(e))&&(i&&(i+=" "),i+=t);return i}const VN={primary:"bg-brand-600 text-on-brand hover:bg-brand-700 focus-visible:ring-brand-500 disabled:bg-brand-300",secondary:"bg-card text-muted-foreground border border-border hover:bg-muted focus-visible:ring-ring disabled:text-muted-foreground",ghost:"bg-transparent text-muted-foreground hover:bg-muted focus-visible:ring-ring",danger:"bg-danger-600 text-on-danger hover:bg-danger-700 focus-visible:ring-danger-500 disabled:bg-danger-300"},ZN={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},Te=h.forwardRef(({type:e="button",variant:t="primary",size:s="md",isLoading:i=!1,className:l,children:u,disabled:d,...m},g)=>{const x=d||i;return a.jsxs("button",{ref:g,type:e,disabled:x,"aria-busy":i||void 0,className:re("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed",VN[t],ZN[s],l),...m,children:[i?a.jsx("span",{"aria-hidden":"true",className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,a.jsx("span",{children:u})]})});Te.displayName="Button";const WN={loading:"animate-spin border-2 border-brand-500 border-t-transparent",empty:"bg-border",error:"bg-danger-500"};function wt({title:e,description:t,action:s,variant:i="empty",className:l}){return a.jsxs("div",{className:re("flex min-h-[240px] flex-col items-center justify-center rounded-xl border border-dashed border-border bg-card/70 px-6 py-12 text-center text-sm text-muted-foreground",l),children:[a.jsx("span",{"aria-hidden":"true",className:re("mb-4 h-8 w-8 rounded-full border-current",WN[i])}),a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e}),t?a.jsx("p",{className:"mt-2 max-w-md leading-relaxed",children:t}):null,s?a.jsx("div",{className:"mt-4",children:s}):null]})}function QN(){return a.jsx(ql,{children:a.jsx(KN,{})})}function KN(){const e=Fn(),t=Zt(),s=yi(),i=nd(),l=i.data?.items??[],m=[J0(),s.user.preferred_workspace_id].filter(g=>!!g).map(g=>l.find(x=>x.id===g)).find(g=>!!g)??l[0]??null;return h.useEffect(()=>{if(i.isLoading||i.isError)return;if(!m){e.pathname!=="/workspaces"&&t("/workspaces",{replace:!0});return}const g=qm(m.id);e.pathname+e.search!==g&&t(g,{replace:!0})},[e.pathname,e.search,t,m,i.isError,i.isLoading]),i.isLoading?a.jsx(wt,{title:"Loading workspaces",variant:"loading"}):i.isError?a.jsx(wt,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error",action:a.jsx(Te,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})}):null}function Ee(e,t,s){function i(m,g){var x;Object.defineProperty(m,"_zod",{value:m._zod??{},enumerable:!1}),(x=m._zod).traits??(x.traits=new Set),m._zod.traits.add(e),t(m,g);for(const b in d.prototype)b in m||Object.defineProperty(m,b,{value:d.prototype[b].bind(m)});m._zod.constr=d,m._zod.def=g}const l=s?.Parent??Object;class u extends l{}Object.defineProperty(u,"name",{value:e});function d(m){var g;const x=s?.Parent?new u:this;i(x,m),(g=x._zod).deferred??(g.deferred=[]);for(const b of x._zod.deferred)b();return x}return Object.defineProperty(d,"init",{value:i}),Object.defineProperty(d,Symbol.hasInstance,{value:m=>s?.Parent&&m instanceof s.Parent?!0:m?._zod?.traits?.has(e)}),Object.defineProperty(d,"name",{value:e}),d}class bo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class nw extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const rw={};function xi(e){return rw}function GN(e){const t=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,l])=>t.indexOf(+i)===-1).map(([i,l])=>l)}function dm(e,t){return typeof t=="bigint"?t.toString():t}function Fm(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Pm(e){return e==null}function Im(e){const t=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(t,s)}const vv=Symbol("evaluating");function Wt(e,t,s){let i;Object.defineProperty(e,t,{get(){if(i!==vv)return i===void 0&&(i=vv,i=s()),i},set(l){Object.defineProperty(e,t,{value:l})},configurable:!0})}function wi(e,t,s){Object.defineProperty(e,t,{value:s,writable:!0,enumerable:!0,configurable:!0})}function ji(...e){const t={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(t,i)}return Object.defineProperties({},t)}function yv(e){return JSON.stringify(e)}const sw="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Lu(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const YN=Fm(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ml(e){if(Lu(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(Lu(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function aw(e){return Ml(e)?{...e}:Array.isArray(e)?[...e]:e}const XN=new Set(["string","number","symbol"]);function rd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $a(e,t,s){const i=new e._zod.constr(t??e._zod.def);return(!t||s?.parent)&&(i._zod.parent=e),i}function Ye(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function JN(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function eC(e,t){const s=e._zod.def,i=ji(e._zod.def,{get shape(){const l={};for(const u in t){if(!(u in s.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&(l[u]=s.shape[u])}return wi(this,"shape",l),l},checks:[]});return $a(e,i)}function tC(e,t){const s=e._zod.def,i=ji(e._zod.def,{get shape(){const l={...e._zod.def.shape};for(const u in t){if(!(u in s.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&delete l[u]}return wi(this,"shape",l),l},checks:[]});return $a(e,i)}function nC(e,t){if(!Ml(t))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const l=ji(e._zod.def,{get shape(){const u={...e._zod.def.shape,...t};return wi(this,"shape",u),u},checks:[]});return $a(e,l)}function rC(e,t){if(!Ml(t))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const i={...e._zod.def.shape,...t};return wi(this,"shape",i),i},checks:e._zod.def.checks};return $a(e,s)}function sC(e,t){const s=ji(e._zod.def,{get shape(){const i={...e._zod.def.shape,...t._zod.def.shape};return wi(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return $a(e,s)}function aC(e,t,s){const i=ji(t._zod.def,{get shape(){const l=t._zod.def.shape,u={...l};if(s)for(const d in s){if(!(d in l))throw new Error(`Unrecognized key: "${d}"`);s[d]&&(u[d]=e?new e({type:"optional",innerType:l[d]}):l[d])}else for(const d in l)u[d]=e?new e({type:"optional",innerType:l[d]}):l[d];return wi(this,"shape",u),u},checks:[]});return $a(t,i)}function iC(e,t,s){const i=ji(t._zod.def,{get shape(){const l=t._zod.def.shape,u={...l};if(s)for(const d in s){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);s[d]&&(u[d]=new e({type:"nonoptional",innerType:l[d]}))}else for(const d in l)u[d]=new e({type:"nonoptional",innerType:l[d]});return wi(this,"shape",u),u},checks:[]});return $a(t,i)}function go(e,t=0){if(e.aborted===!0)return!0;for(let s=t;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function iw(e,t){return t.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function hu(e){return typeof e=="string"?e:e?.message}function bi(e,t,s){const i={...e,path:e.path??[]};if(!e.message){const l=hu(e.inst?._zod.def?.error?.(e))??hu(t?.error?.(e))??hu(s.customError?.(e))??hu(s.localeError?.(e))??"Invalid input";i.message=l}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function Hm(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tl(...e){const[t,s,i]=e;return typeof t=="string"?{message:t,code:"custom",input:s,inst:i}:{...t}}const ow=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,dm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Vm=Ee("$ZodError",ow),sd=Ee("$ZodError",ow,{Parent:Error});function oC(e,t=s=>s.message){const s={},i=[];for(const l of e.issues)l.path.length>0?(s[l.path[0]]=s[l.path[0]]||[],s[l.path[0]].push(t(l))):i.push(t(l));return{formErrors:i,fieldErrors:s}}function lC(e,t=s=>s.message){const s={_errors:[]},i=l=>{for(const u of l.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>i({issues:d}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)s._errors.push(t(u));else{let d=s,m=0;for(;m<u.path.length;){const g=u.path[m];m===u.path.length-1?(d[g]=d[g]||{_errors:[]},d[g]._errors.push(t(u))):d[g]=d[g]||{_errors:[]},d=d[g],m++}}};return i(e),s}const ad=e=>(t,s,i,l)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},d=t._zod.run({value:s,issues:[]},u);if(d instanceof Promise)throw new bo;if(d.issues.length){const m=new(l?.Err??e)(d.issues.map(g=>bi(g,u,xi())));throw sw(m,l?.callee),m}return d.value},cC=ad(sd),id=e=>async(t,s,i,l)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let d=t._zod.run({value:s,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const m=new(l?.Err??e)(d.issues.map(g=>bi(g,u,xi())));throw sw(m,l?.callee),m}return d.value},uC=id(sd),od=e=>(t,s,i)=>{const l=i?{...i,async:!1}:{async:!1},u=t._zod.run({value:s,issues:[]},l);if(u instanceof Promise)throw new bo;return u.issues.length?{success:!1,error:new(e??Vm)(u.issues.map(d=>bi(d,l,xi())))}:{success:!0,data:u.value}},dC=od(sd),ld=e=>async(t,s,i)=>{const l=i?Object.assign(i,{async:!0}):{async:!0};let u=t._zod.run({value:s,issues:[]},l);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>bi(d,l,xi())))}:{success:!0,data:u.value}},fC=ld(sd),hC=e=>(t,s,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ad(e)(t,s,l)},mC=e=>(t,s,i)=>ad(e)(t,s,i),pC=e=>async(t,s,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return id(e)(t,s,l)},gC=e=>async(t,s,i)=>id(e)(t,s,i),xC=e=>(t,s,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return od(e)(t,s,l)},bC=e=>(t,s,i)=>od(e)(t,s,i),vC=e=>async(t,s,i)=>{const l=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ld(e)(t,s,l)},yC=e=>async(t,s,i)=>ld(e)(t,s,i),wC=/^[cC][^\s-]{8,}$/,jC=/^[0-9a-z]+$/,SC=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,kC=/^[0-9a-vA-V]{20}$/,NC=/^[A-Za-z0-9]{27}$/,CC=/^[a-zA-Z0-9_-]{21}$/,EC=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_C=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,wv=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,MC=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,TC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function DC(){return new RegExp(TC,"u")}const AC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,OC=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,zC=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LC=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,lw=/^[A-Za-z0-9_-]*$/,UC=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,$C=/^\+(?:[0-9]){6,14}[0-9]$/,cw="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",BC=new RegExp(`^${cw}$`);function uw(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function qC(e){return new RegExp(`^${uw(e)}$`)}function FC(e){const t=uw({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${s.join("|")})`;return new RegExp(`^${cw}T(?:${i})$`)}const PC=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},IC=/^[^A-Z]*$/,HC=/^[^a-z]*$/,Es=Ee("$ZodCheck",(e,t)=>{var s;e._zod??(e._zod={}),e._zod.def=t,(s=e._zod).onattach??(s.onattach=[])}),VC=Ee("$ZodCheckMaxLength",(e,t)=>{var s;Es.init(e,t),(s=e._zod.def).when??(s.when=i=>{const l=i.value;return!Pm(l)&&l.length!==void 0}),e._zod.onattach.push(i=>{const l=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<l&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const l=i.value;if(l.length<=t.maximum)return;const d=Hm(l);i.issues.push({origin:d,code:"too_big",maximum:t.maximum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),ZC=Ee("$ZodCheckMinLength",(e,t)=>{var s;Es.init(e,t),(s=e._zod.def).when??(s.when=i=>{const l=i.value;return!Pm(l)&&l.length!==void 0}),e._zod.onattach.push(i=>{const l=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>l&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const l=i.value;if(l.length>=t.minimum)return;const d=Hm(l);i.issues.push({origin:d,code:"too_small",minimum:t.minimum,inclusive:!0,input:l,inst:e,continue:!t.abort})}}),WC=Ee("$ZodCheckLengthEquals",(e,t)=>{var s;Es.init(e,t),(s=e._zod.def).when??(s.when=i=>{const l=i.value;return!Pm(l)&&l.length!==void 0}),e._zod.onattach.push(i=>{const l=i._zod.bag;l.minimum=t.length,l.maximum=t.length,l.length=t.length}),e._zod.check=i=>{const l=i.value,u=l.length;if(u===t.length)return;const d=Hm(l),m=u>t.length;i.issues.push({origin:d,...m?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),cd=Ee("$ZodCheckStringFormat",(e,t)=>{var s,i;Es.init(e,t),e._zod.onattach.push(l=>{const u=l._zod.bag;u.format=t.format,t.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(t.pattern))}),t.pattern?(s=e._zod).check??(s.check=l=>{t.pattern.lastIndex=0,!t.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:t.format,input:l.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),QC=Ee("$ZodCheckRegex",(e,t)=>{cd.init(e,t),e._zod.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),KC=Ee("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=IC),cd.init(e,t)}),GC=Ee("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=HC),cd.init(e,t)}),YC=Ee("$ZodCheckIncludes",(e,t)=>{Es.init(e,t);const s=rd(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${s}`:s);t.pattern=i,e._zod.onattach.push(l=>{const u=l._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=l=>{l.value.includes(t.includes,t.position)||l.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:l.value,inst:e,continue:!t.abort})}}),XC=Ee("$ZodCheckStartsWith",(e,t)=>{Es.init(e,t);const s=new RegExp(`^${rd(t.prefix)}.*`);t.pattern??(t.pattern=s),e._zod.onattach.push(i=>{const l=i._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),JC=Ee("$ZodCheckEndsWith",(e,t)=>{Es.init(e,t);const s=new RegExp(`.*${rd(t.suffix)}$`);t.pattern??(t.pattern=s),e._zod.onattach.push(i=>{const l=i._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),eE=Ee("$ZodCheckOverwrite",(e,t)=>{Es.init(e,t),e._zod.check=s=>{s.value=t.tx(s.value)}});class tE{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(d=>d),l=Math.min(...i.map(d=>d.length-d.trimStart().length)),u=i.map(d=>d.slice(l)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const t=Function,s=this?.args,l=[...(this?.content??[""]).map(u=>`  ${u}`)];return new t(...s,l.join(`
`))}}const nE={major:4,minor:1,patch:12},Ln=Ee("$ZodType",(e,t)=>{var s;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=nE;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const l of i)for(const u of l._zod.onattach)u(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const l=(d,m,g)=>{let x=go(d),b;for(const v of m){if(v._zod.def.when){if(!v._zod.def.when(d))continue}else if(x)continue;const y=d.issues.length,k=v._zod.check(d);if(k instanceof Promise&&g?.async===!1)throw new bo;if(b||k instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await k,d.issues.length!==y&&(x||(x=go(d,y)))});else{if(d.issues.length===y)continue;x||(x=go(d,y))}}return b?b.then(()=>d):d},u=(d,m,g)=>{if(go(d))return d.aborted=!0,d;const x=l(m,i,g);if(x instanceof Promise){if(g.async===!1)throw new bo;return x.then(b=>e._zod.parse(b,g))}return e._zod.parse(x,g)};e._zod.run=(d,m)=>{if(m.skipChecks)return e._zod.parse(d,m);if(m.direction==="backward"){const x=e._zod.parse({value:d.value,issues:[]},{...m,skipChecks:!0});return x instanceof Promise?x.then(b=>u(b,d,m)):u(x,d,m)}const g=e._zod.parse(d,m);if(g instanceof Promise){if(m.async===!1)throw new bo;return g.then(x=>l(x,i,m))}return l(g,i,m)}}e["~standard"]={validate:l=>{try{const u=dC(e,l);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return fC(e,l).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),Zm=Ee("$ZodString",(e,t)=>{Ln.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??PC(e._zod.bag),e._zod.parse=(s,i)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),en=Ee("$ZodStringFormat",(e,t)=>{cd.init(e,t),Zm.init(e,t)}),rE=Ee("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=_C),en.init(e,t)}),sE=Ee("$ZodUUID",(e,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=wv(i))}else t.pattern??(t.pattern=wv());en.init(e,t)}),aE=Ee("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=MC),en.init(e,t)}),iE=Ee("$ZodURL",(e,t)=>{en.init(e,t),e._zod.check=s=>{try{const i=s.value.trim(),l=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(l.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:UC.source,input:s.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(l.protocol.endsWith(":")?l.protocol.slice(0,-1):l.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:s.value,inst:e,continue:!t.abort})),t.normalize?s.value=l.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!t.abort})}}}),oE=Ee("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=DC()),en.init(e,t)}),lE=Ee("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=CC),en.init(e,t)}),cE=Ee("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=wC),en.init(e,t)}),uE=Ee("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=jC),en.init(e,t)}),dE=Ee("$ZodULID",(e,t)=>{t.pattern??(t.pattern=SC),en.init(e,t)}),fE=Ee("$ZodXID",(e,t)=>{t.pattern??(t.pattern=kC),en.init(e,t)}),hE=Ee("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=NC),en.init(e,t)}),mE=Ee("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=FC(t)),en.init(e,t)}),pE=Ee("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=BC),en.init(e,t)}),gE=Ee("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=qC(t)),en.init(e,t)}),xE=Ee("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=EC),en.init(e,t)}),bE=Ee("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=AC),en.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv4"})}),vE=Ee("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=RC),en.init(e,t),e._zod.onattach.push(s=>{const i=s._zod.bag;i.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!t.abort})}}}),yE=Ee("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=OC),en.init(e,t)}),wE=Ee("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=zC),en.init(e,t),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[l,u]=i;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${l}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!t.abort})}}});function dw(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const jE=Ee("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=LC),en.init(e,t),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{dw(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!t.abort})}});function SE(e){if(!lw.test(e))return!1;const t=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=t.padEnd(Math.ceil(t.length/4)*4,"=");return dw(s)}const kE=Ee("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=lw),en.init(e,t),e._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{SE(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!t.abort})}}),NE=Ee("$ZodE164",(e,t)=>{t.pattern??(t.pattern=$C),en.init(e,t)});function CE(e,t=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const l=JSON.parse(atob(i));return!("typ"in l&&l?.typ!=="JWT"||!l.alg||t&&(!("alg"in l)||l.alg!==t))}catch{return!1}}const EE=Ee("$ZodJWT",(e,t)=>{en.init(e,t),e._zod.check=s=>{CE(s.value,t.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!t.abort})}}),_E=Ee("$ZodUnknown",(e,t)=>{Ln.init(e,t),e._zod.parse=s=>s}),ME=Ee("$ZodNever",(e,t)=>{Ln.init(e,t),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function jv(e,t,s){e.issues.length&&t.issues.push(...iw(s,e.issues)),t.value[s]=e.value}const TE=Ee("$ZodArray",(e,t)=>{Ln.init(e,t),e._zod.parse=(s,i)=>{const l=s.value;if(!Array.isArray(l))return s.issues.push({expected:"array",code:"invalid_type",input:l,inst:e}),s;s.value=Array(l.length);const u=[];for(let d=0;d<l.length;d++){const m=l[d],g=t.element._zod.run({value:m,issues:[]},i);g instanceof Promise?u.push(g.then(x=>jv(x,s,d))):jv(g,s,d)}return u.length?Promise.all(u).then(()=>s):s}});function Uu(e,t,s,i){e.issues.length&&t.issues.push(...iw(s,e.issues)),e.value===void 0?s in i&&(t.value[s]=void 0):t.value[s]=e.value}function fw(e){const t=Object.keys(e.shape);for(const i of t)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=JN(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(s)}}function hw(e,t,s,i,l,u){const d=[],m=l.keySet,g=l.catchall._zod,x=g.def.type;for(const b of Object.keys(t)){if(m.has(b))continue;if(x==="never"){d.push(b);continue}const v=g.run({value:t[b],issues:[]},i);v instanceof Promise?e.push(v.then(y=>Uu(y,s,b,t))):Uu(v,s,b,t)}return d.length&&s.issues.push({code:"unrecognized_keys",keys:d,input:t,inst:u}),e.length?Promise.all(e).then(()=>s):s}const DE=Ee("$ZodObject",(e,t)=>{if(Ln.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const m=t.shape;Object.defineProperty(t,"shape",{get:()=>{const g={...m};return Object.defineProperty(t,"shape",{value:g}),g}})}const i=Fm(()=>fw(t));Wt(e._zod,"propValues",()=>{const m=t.shape,g={};for(const x in m){const b=m[x]._zod;if(b.values){g[x]??(g[x]=new Set);for(const v of b.values)g[x].add(v)}}return g});const l=Lu,u=t.catchall;let d;e._zod.parse=(m,g)=>{d??(d=i.value);const x=m.value;if(!l(x))return m.issues.push({expected:"object",code:"invalid_type",input:x,inst:e}),m;m.value={};const b=[],v=d.shape;for(const y of d.keys){const S=v[y]._zod.run({value:x[y],issues:[]},g);S instanceof Promise?b.push(S.then(j=>Uu(j,m,y,x))):Uu(S,m,y,x)}return u?hw(b,x,m,g,i.value,e):b.length?Promise.all(b).then(()=>m):m}}),AE=Ee("$ZodObjectJIT",(e,t)=>{DE.init(e,t);const s=e._zod.parse,i=Fm(()=>fw(t)),l=y=>{const k=new tE(["shape","payload","ctx"]),S=i.value,j=R=>{const q=yv(R);return`shape[${q}]._zod.run({ value: input[${q}], issues: [] }, ctx)`};k.write("const input = payload.value;");const N=Object.create(null);let M=0;for(const R of S.keys)N[R]=`key_${M++}`;k.write("const newResult = {};");for(const R of S.keys){const q=N[R],$=yv(R);k.write(`const ${q} = ${j(R)};`),k.write(`
        if (${q}.issues.length) {
          payload.issues = payload.issues.concat(${q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        
        if (${q}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${q}.value;
        }
        
      `)}k.write("payload.value = newResult;"),k.write("return payload;");const _=k.compile();return(R,q)=>_(y,R,q)};let u;const d=Lu,m=!rw.jitless,x=m&&YN.value,b=t.catchall;let v;e._zod.parse=(y,k)=>{v??(v=i.value);const S=y.value;return d(S)?m&&x&&k?.async===!1&&k.jitless!==!0?(u||(u=l(t.shape)),y=u(y,k),b?hw([],S,y,k,v,e):y):s(y,k):(y.issues.push({expected:"object",code:"invalid_type",input:S,inst:e}),y)}});function Sv(e,t,s,i){for(const u of e)if(u.issues.length===0)return t.value=u.value,t;const l=e.filter(u=>!go(u));return l.length===1?(t.value=l[0].value,l[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:s,errors:e.map(u=>u.issues.map(d=>bi(d,i,xi())))}),t)}const RE=Ee("$ZodUnion",(e,t)=>{Ln.init(e,t),Wt(e._zod,"optin",()=>t.options.some(l=>l._zod.optin==="optional")?"optional":void 0),Wt(e._zod,"optout",()=>t.options.some(l=>l._zod.optout==="optional")?"optional":void 0),Wt(e._zod,"values",()=>{if(t.options.every(l=>l._zod.values))return new Set(t.options.flatMap(l=>Array.from(l._zod.values)))}),Wt(e._zod,"pattern",()=>{if(t.options.every(l=>l._zod.pattern)){const l=t.options.map(u=>u._zod.pattern);return new RegExp(`^(${l.map(u=>Im(u.source)).join("|")})$`)}});const s=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(l,u)=>{if(s)return i(l,u);let d=!1;const m=[];for(const g of t.options){const x=g._zod.run({value:l.value,issues:[]},u);if(x instanceof Promise)m.push(x),d=!0;else{if(x.issues.length===0)return x;m.push(x)}}return d?Promise.all(m).then(g=>Sv(g,l,e,u)):Sv(m,l,e,u)}}),OE=Ee("$ZodIntersection",(e,t)=>{Ln.init(e,t),e._zod.parse=(s,i)=>{const l=s.value,u=t.left._zod.run({value:l,issues:[]},i),d=t.right._zod.run({value:l,issues:[]},i);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([g,x])=>kv(s,g,x)):kv(s,u,d)}});function fm(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ml(e)&&Ml(t)){const s=Object.keys(t),i=Object.keys(e).filter(u=>s.indexOf(u)!==-1),l={...e,...t};for(const u of i){const d=fm(e[u],t[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};l[u]=d.data}return{valid:!0,data:l}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const l=e[i],u=t[i],d=fm(l,u);if(!d.valid)return{valid:!1,mergeErrorPath:[i,...d.mergeErrorPath]};s.push(d.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function kv(e,t,s){if(t.issues.length&&e.issues.push(...t.issues),s.issues.length&&e.issues.push(...s.issues),go(e))return e;const i=fm(t.value,s.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const zE=Ee("$ZodEnum",(e,t)=>{Ln.init(e,t);const s=GN(t.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(l=>XN.has(typeof l)).map(l=>typeof l=="string"?rd(l):l.toString()).join("|")})$`),e._zod.parse=(l,u)=>{const d=l.value;return i.has(d)||l.issues.push({code:"invalid_value",values:s,input:d,inst:e}),l}}),LE=Ee("$ZodTransform",(e,t)=>{Ln.init(e,t),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new nw(e.constructor.name);const l=t.transform(s.value,s);if(i.async)return(l instanceof Promise?l:Promise.resolve(l)).then(d=>(s.value=d,s));if(l instanceof Promise)throw new bo;return s.value=l,s}});function Nv(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const UE=Ee("$ZodOptional",(e,t)=>{Ln.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Wt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Wt(e._zod,"pattern",()=>{const s=t.innerType._zod.pattern;return s?new RegExp(`^(${Im(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(t.innerType._zod.optin==="optional"){const l=t.innerType._zod.run(s,i);return l instanceof Promise?l.then(u=>Nv(u,s.value)):Nv(l,s.value)}return s.value===void 0?s:t.innerType._zod.run(s,i)}}),$E=Ee("$ZodNullable",(e,t)=>{Ln.init(e,t),Wt(e._zod,"optin",()=>t.innerType._zod.optin),Wt(e._zod,"optout",()=>t.innerType._zod.optout),Wt(e._zod,"pattern",()=>{const s=t.innerType._zod.pattern;return s?new RegExp(`^(${Im(s.source)}|null)$`):void 0}),Wt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:t.innerType._zod.run(s,i)}),BE=Ee("$ZodDefault",(e,t)=>{Ln.init(e,t),e._zod.optin="optional",Wt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return t.innerType._zod.run(s,i);if(s.value===void 0)return s.value=t.defaultValue,s;const l=t.innerType._zod.run(s,i);return l instanceof Promise?l.then(u=>Cv(u,t)):Cv(l,t)}});function Cv(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const qE=Ee("$ZodPrefault",(e,t)=>{Ln.init(e,t),e._zod.optin="optional",Wt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=t.defaultValue),t.innerType._zod.run(s,i))}),FE=Ee("$ZodNonOptional",(e,t)=>{Ln.init(e,t),Wt(e._zod,"values",()=>{const s=t.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const l=t.innerType._zod.run(s,i);return l instanceof Promise?l.then(u=>Ev(u,e)):Ev(l,e)}});function Ev(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const PE=Ee("$ZodCatch",(e,t)=>{Ln.init(e,t),Wt(e._zod,"optin",()=>t.innerType._zod.optin),Wt(e._zod,"optout",()=>t.innerType._zod.optout),Wt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return t.innerType._zod.run(s,i);const l=t.innerType._zod.run(s,i);return l instanceof Promise?l.then(u=>(s.value=u.value,u.issues.length&&(s.value=t.catchValue({...s,error:{issues:u.issues.map(d=>bi(d,i,xi()))},input:s.value}),s.issues=[]),s)):(s.value=l.value,l.issues.length&&(s.value=t.catchValue({...s,error:{issues:l.issues.map(u=>bi(u,i,xi()))},input:s.value}),s.issues=[]),s)}}),IE=Ee("$ZodPipe",(e,t)=>{Ln.init(e,t),Wt(e._zod,"values",()=>t.in._zod.values),Wt(e._zod,"optin",()=>t.in._zod.optin),Wt(e._zod,"optout",()=>t.out._zod.optout),Wt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const u=t.out._zod.run(s,i);return u instanceof Promise?u.then(d=>mu(d,t.in,i)):mu(u,t.in,i)}const l=t.in._zod.run(s,i);return l instanceof Promise?l.then(u=>mu(u,t.out,i)):mu(l,t.out,i)}});function mu(e,t,s){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},s)}const HE=Ee("$ZodReadonly",(e,t)=>{Ln.init(e,t),Wt(e._zod,"propValues",()=>t.innerType._zod.propValues),Wt(e._zod,"values",()=>t.innerType._zod.values),Wt(e._zod,"optin",()=>t.innerType._zod.optin),Wt(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return t.innerType._zod.run(s,i);const l=t.innerType._zod.run(s,i);return l instanceof Promise?l.then(_v):_v(l)}});function _v(e){return e.value=Object.freeze(e.value),e}const VE=Ee("$ZodCustom",(e,t)=>{Es.init(e,t),Ln.init(e,t),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,l=t.fn(i);if(l instanceof Promise)return l.then(u=>Mv(u,s,i,e));Mv(l,s,i,e)}});function Mv(e,t,s,i){if(!e){const l={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(l.params=i._zod.def.params),t.issues.push(Tl(l))}}class ZE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...s){const i=s[0];if(this._map.set(t,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const s=this._map.get(t);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(t),this}get(t){const s=t._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const l={...i,...this._map.get(t)};return Object.keys(l).length?l:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function WE(){return new ZE}const pu=WE();function QE(e,t){return new e({type:"string",...Ye(t)})}function KE(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ye(t)})}function Tv(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ye(t)})}function GE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ye(t)})}function YE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ye(t)})}function XE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ye(t)})}function JE(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ye(t)})}function e_(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ye(t)})}function t_(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ye(t)})}function n_(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ye(t)})}function r_(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ye(t)})}function s_(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ye(t)})}function a_(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ye(t)})}function i_(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ye(t)})}function o_(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ye(t)})}function l_(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ye(t)})}function c_(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ye(t)})}function u_(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ye(t)})}function d_(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ye(t)})}function f_(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ye(t)})}function h_(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ye(t)})}function m_(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ye(t)})}function p_(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ye(t)})}function g_(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ye(t)})}function x_(e,t){return new e({type:"string",format:"date",check:"string_format",...Ye(t)})}function b_(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ye(t)})}function v_(e,t){return new e({type:"string",format:"duration",check:"string_format",...Ye(t)})}function y_(e){return new e({type:"unknown"})}function w_(e,t){return new e({type:"never",...Ye(t)})}function mw(e,t){return new VC({check:"max_length",...Ye(t),maximum:e})}function $u(e,t){return new ZC({check:"min_length",...Ye(t),minimum:e})}function pw(e,t){return new WC({check:"length_equals",...Ye(t),length:e})}function j_(e,t){return new QC({check:"string_format",format:"regex",...Ye(t),pattern:e})}function S_(e){return new KC({check:"string_format",format:"lowercase",...Ye(e)})}function k_(e){return new GC({check:"string_format",format:"uppercase",...Ye(e)})}function N_(e,t){return new YC({check:"string_format",format:"includes",...Ye(t),includes:e})}function C_(e,t){return new XC({check:"string_format",format:"starts_with",...Ye(t),prefix:e})}function E_(e,t){return new JC({check:"string_format",format:"ends_with",...Ye(t),suffix:e})}function Pl(e){return new eE({check:"overwrite",tx:e})}function __(e){return Pl(t=>t.normalize(e))}function M_(){return Pl(e=>e.trim())}function T_(){return Pl(e=>e.toLowerCase())}function D_(){return Pl(e=>e.toUpperCase())}function A_(e,t,s){return new e({type:"array",element:t,...Ye(s)})}function R_(e,t,s){return new e({type:"custom",check:"custom",fn:t,...Ye(s)})}function O_(e){const t=z_(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(Tl(i,s.value,t._zod.def));else{const l=i;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=s.value),l.inst??(l.inst=t),l.continue??(l.continue=!t._zod.def.abort),s.issues.push(Tl(l))}},e(s.value,s)));return t}function z_(e,t){const s=new Es({check:"custom",...Ye(t)});return s._zod.check=e,s}const L_=Ee("ZodISODateTime",(e,t)=>{mE.init(e,t),an.init(e,t)});function U_(e){return g_(L_,e)}const $_=Ee("ZodISODate",(e,t)=>{pE.init(e,t),an.init(e,t)});function B_(e){return x_($_,e)}const q_=Ee("ZodISOTime",(e,t)=>{gE.init(e,t),an.init(e,t)});function F_(e){return b_(q_,e)}const P_=Ee("ZodISODuration",(e,t)=>{xE.init(e,t),an.init(e,t)});function I_(e){return v_(P_,e)}const H_=(e,t)=>{Vm.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>lC(e,s)},flatten:{value:s=>oC(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,dm,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,dm,2)}},isEmpty:{get(){return e.issues.length===0}}})},Yr=Ee("ZodError",H_,{Parent:Error}),V_=ad(Yr),Z_=id(Yr),W_=od(Yr),Q_=ld(Yr),K_=hC(Yr),G_=mC(Yr),Y_=pC(Yr),X_=gC(Yr),J_=xC(Yr),e2=bC(Yr),t2=vC(Yr),n2=yC(Yr),Pn=Ee("ZodType",(e,t)=>(Ln.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...s)=>e.clone(ji(t,{checks:[...t.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(s,i)=>$a(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>V_(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>W_(e,s,i),e.parseAsync=async(s,i)=>Z_(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>Q_(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>K_(e,s,i),e.decode=(s,i)=>G_(e,s,i),e.encodeAsync=async(s,i)=>Y_(e,s,i),e.decodeAsync=async(s,i)=>X_(e,s,i),e.safeEncode=(s,i)=>J_(e,s,i),e.safeDecode=(s,i)=>e2(e,s,i),e.safeEncodeAsync=async(s,i)=>t2(e,s,i),e.safeDecodeAsync=async(s,i)=>n2(e,s,i),e.refine=(s,i)=>e.check(Z2(s,i)),e.superRefine=s=>e.check(W2(s)),e.overwrite=s=>e.check(Pl(s)),e.optional=()=>Rv(e),e.nullable=()=>Ov(e),e.nullish=()=>Rv(Ov(e)),e.nonoptional=s=>B2(e,s),e.array=()=>N2(e),e.or=s=>_2([e,s]),e.and=s=>T2(e,s),e.transform=s=>zv(e,R2(s)),e.default=s=>L2(e,s),e.prefault=s=>$2(e,s),e.catch=s=>F2(e,s),e.pipe=s=>zv(e,s),e.readonly=()=>H2(e),e.describe=s=>{const i=e.clone();return pu.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return pu.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return pu.get(e);const i=e.clone();return pu.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),gw=Ee("_ZodString",(e,t)=>{Zm.init(e,t),Pn.init(e,t);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(j_(...i)),e.includes=(...i)=>e.check(N_(...i)),e.startsWith=(...i)=>e.check(C_(...i)),e.endsWith=(...i)=>e.check(E_(...i)),e.min=(...i)=>e.check($u(...i)),e.max=(...i)=>e.check(mw(...i)),e.length=(...i)=>e.check(pw(...i)),e.nonempty=(...i)=>e.check($u(1,...i)),e.lowercase=i=>e.check(S_(i)),e.uppercase=i=>e.check(k_(i)),e.trim=()=>e.check(M_()),e.normalize=(...i)=>e.check(__(...i)),e.toLowerCase=()=>e.check(T_()),e.toUpperCase=()=>e.check(D_())}),r2=Ee("ZodString",(e,t)=>{Zm.init(e,t),gw.init(e,t),e.email=s=>e.check(KE(s2,s)),e.url=s=>e.check(e_(a2,s)),e.jwt=s=>e.check(p_(y2,s)),e.emoji=s=>e.check(t_(i2,s)),e.guid=s=>e.check(Tv(Dv,s)),e.uuid=s=>e.check(GE(gu,s)),e.uuidv4=s=>e.check(YE(gu,s)),e.uuidv6=s=>e.check(XE(gu,s)),e.uuidv7=s=>e.check(JE(gu,s)),e.nanoid=s=>e.check(n_(o2,s)),e.guid=s=>e.check(Tv(Dv,s)),e.cuid=s=>e.check(r_(l2,s)),e.cuid2=s=>e.check(s_(c2,s)),e.ulid=s=>e.check(a_(u2,s)),e.base64=s=>e.check(f_(x2,s)),e.base64url=s=>e.check(h_(b2,s)),e.xid=s=>e.check(i_(d2,s)),e.ksuid=s=>e.check(o_(f2,s)),e.ipv4=s=>e.check(l_(h2,s)),e.ipv6=s=>e.check(c_(m2,s)),e.cidrv4=s=>e.check(u_(p2,s)),e.cidrv6=s=>e.check(d_(g2,s)),e.e164=s=>e.check(m_(v2,s)),e.datetime=s=>e.check(U_(s)),e.date=s=>e.check(B_(s)),e.time=s=>e.check(F_(s)),e.duration=s=>e.check(I_(s))});function us(e){return QE(r2,e)}const an=Ee("ZodStringFormat",(e,t)=>{en.init(e,t),gw.init(e,t)}),s2=Ee("ZodEmail",(e,t)=>{aE.init(e,t),an.init(e,t)}),Dv=Ee("ZodGUID",(e,t)=>{rE.init(e,t),an.init(e,t)}),gu=Ee("ZodUUID",(e,t)=>{sE.init(e,t),an.init(e,t)}),a2=Ee("ZodURL",(e,t)=>{iE.init(e,t),an.init(e,t)}),i2=Ee("ZodEmoji",(e,t)=>{oE.init(e,t),an.init(e,t)}),o2=Ee("ZodNanoID",(e,t)=>{lE.init(e,t),an.init(e,t)}),l2=Ee("ZodCUID",(e,t)=>{cE.init(e,t),an.init(e,t)}),c2=Ee("ZodCUID2",(e,t)=>{uE.init(e,t),an.init(e,t)}),u2=Ee("ZodULID",(e,t)=>{dE.init(e,t),an.init(e,t)}),d2=Ee("ZodXID",(e,t)=>{fE.init(e,t),an.init(e,t)}),f2=Ee("ZodKSUID",(e,t)=>{hE.init(e,t),an.init(e,t)}),h2=Ee("ZodIPv4",(e,t)=>{bE.init(e,t),an.init(e,t)}),m2=Ee("ZodIPv6",(e,t)=>{vE.init(e,t),an.init(e,t)}),p2=Ee("ZodCIDRv4",(e,t)=>{yE.init(e,t),an.init(e,t)}),g2=Ee("ZodCIDRv6",(e,t)=>{wE.init(e,t),an.init(e,t)}),x2=Ee("ZodBase64",(e,t)=>{jE.init(e,t),an.init(e,t)}),b2=Ee("ZodBase64URL",(e,t)=>{kE.init(e,t),an.init(e,t)}),v2=Ee("ZodE164",(e,t)=>{NE.init(e,t),an.init(e,t)}),y2=Ee("ZodJWT",(e,t)=>{EE.init(e,t),an.init(e,t)}),w2=Ee("ZodUnknown",(e,t)=>{_E.init(e,t),Pn.init(e,t)});function Av(){return y_(w2)}const j2=Ee("ZodNever",(e,t)=>{ME.init(e,t),Pn.init(e,t)});function S2(e){return w_(j2,e)}const k2=Ee("ZodArray",(e,t)=>{TE.init(e,t),Pn.init(e,t),e.element=t.element,e.min=(s,i)=>e.check($u(s,i)),e.nonempty=s=>e.check($u(1,s)),e.max=(s,i)=>e.check(mw(s,i)),e.length=(s,i)=>e.check(pw(s,i)),e.unwrap=()=>e.element});function N2(e,t){return A_(k2,e,t)}const C2=Ee("ZodObject",(e,t)=>{AE.init(e,t),Pn.init(e,t),Wt(e,"shape",()=>t.shape),e.keyof=()=>D2(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Av()}),e.loose=()=>e.clone({...e._zod.def,catchall:Av()}),e.strict=()=>e.clone({...e._zod.def,catchall:S2()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>nC(e,s),e.safeExtend=s=>rC(e,s),e.merge=s=>sC(e,s),e.pick=s=>eC(e,s),e.omit=s=>tC(e,s),e.partial=(...s)=>aC(xw,e,s[0]),e.required=(...s)=>iC(bw,e,s[0])});function ud(e,t){const s={type:"object",shape:e??{},...Ye(t)};return new C2(s)}const E2=Ee("ZodUnion",(e,t)=>{RE.init(e,t),Pn.init(e,t),e.options=t.options});function _2(e,t){return new E2({type:"union",options:e,...Ye(t)})}const M2=Ee("ZodIntersection",(e,t)=>{OE.init(e,t),Pn.init(e,t)});function T2(e,t){return new M2({type:"intersection",left:e,right:t})}const hm=Ee("ZodEnum",(e,t)=>{zE.init(e,t),Pn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const s=new Set(Object.keys(t.entries));e.extract=(i,l)=>{const u={};for(const d of i)if(s.has(d))u[d]=t.entries[d];else throw new Error(`Key ${d} not found in enum`);return new hm({...t,checks:[],...Ye(l),entries:u})},e.exclude=(i,l)=>{const u={...t.entries};for(const d of i)if(s.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new hm({...t,checks:[],...Ye(l),entries:u})}});function D2(e,t){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new hm({type:"enum",entries:s,...Ye(t)})}const A2=Ee("ZodTransform",(e,t)=>{LE.init(e,t),Pn.init(e,t),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new nw(e.constructor.name);s.addIssue=u=>{if(typeof u=="string")s.issues.push(Tl(u,s.value,t));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=s.value),d.inst??(d.inst=e),s.issues.push(Tl(d))}};const l=t.transform(s.value,s);return l instanceof Promise?l.then(u=>(s.value=u,s)):(s.value=l,s)}});function R2(e){return new A2({type:"transform",transform:e})}const xw=Ee("ZodOptional",(e,t)=>{UE.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Rv(e){return new xw({type:"optional",innerType:e})}const O2=Ee("ZodNullable",(e,t)=>{$E.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ov(e){return new O2({type:"nullable",innerType:e})}const z2=Ee("ZodDefault",(e,t)=>{BE.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function L2(e,t){return new z2({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():aw(t)}})}const U2=Ee("ZodPrefault",(e,t)=>{qE.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $2(e,t){return new U2({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():aw(t)}})}const bw=Ee("ZodNonOptional",(e,t)=>{FE.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function B2(e,t){return new bw({type:"nonoptional",innerType:e,...Ye(t)})}const q2=Ee("ZodCatch",(e,t)=>{PE.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function F2(e,t){return new q2({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const P2=Ee("ZodPipe",(e,t)=>{IE.init(e,t),Pn.init(e,t),e.in=t.in,e.out=t.out});function zv(e,t){return new P2({type:"pipe",in:e,out:t})}const I2=Ee("ZodReadonly",(e,t)=>{HE.init(e,t),Pn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function H2(e){return new I2({type:"readonly",innerType:e})}const V2=Ee("ZodCustom",(e,t)=>{VE.init(e,t),Pn.init(e,t)});function Z2(e,t={}){return R_(V2,e,t)}function W2(e){return O_(e)}function Q2(){return sn({queryKey:fs.providers(),queryFn:({signal:e})=>rN({signal:e}),staleTime:6e5,retry:!1,refetchOnWindowFocus:!1})}const K2={info:"bg-brand-50 text-brand-700 ring-brand-100",success:"bg-success-50 text-success-700 ring-success-100",warning:"bg-warning-50 text-warning-700 ring-warning-100",danger:"bg-danger-50 text-danger-700 ring-danger-100"};function Lt({tone:e="info",heading:t,icon:s,className:i,children:l,...u}){return a.jsxs("div",{role:"status",className:re("flex w-full items-start gap-3 rounded-lg px-4 py-3 text-sm ring-1 ring-inset",K2[e],i),...u,children:[s?a.jsx("span",{"aria-hidden":"true",children:s}):null,a.jsxs("div",{className:"space-y-1",children:[t?a.jsx("p",{className:"font-semibold",children:t}):null,l?a.jsx("p",{className:"leading-relaxed",children:l}):null]})]})}function Mt({label:e,hint:t,error:s,required:i=!1,children:l,className:u}){const d=h.useId(),m=h.isValidElement(l)?l.props??{}:{},g=m.id??d,x=t?`${g}-hint`:void 0,b=s?`${g}-error`:void 0,v=[x,b,m["aria-describedby"]].filter(Boolean).join(" ")||void 0;return a.jsxs("div",{className:re("space-y-2",u),children:[e?a.jsxs("label",{htmlFor:g,className:"text-sm font-medium text-foreground","aria-required":i||void 0,children:[e,i?a.jsx("span",{className:"ml-1 text-danger-600","aria-hidden":"true",children:"*"}):null]}):null,h.isValidElement(l)?h.cloneElement(l,{id:g,required:i||m.required,"aria-describedby":v,"aria-invalid":s?!0:m["aria-invalid"]}):l,t?a.jsx("p",{id:x,className:"text-xs text-muted-foreground",children:t}):null,s?a.jsx("p",{id:b,className:"text-xs font-medium text-danger-600",children:s}):null]})}const vw="block w-full rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground shadow-sm transition placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground",yt=h.forwardRef(({className:e,invalid:t=!1,...s},i)=>a.jsx("input",{ref:i,className:re(vw,t&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":t||void 0,...s}));yt.displayName="Input";const G2=h.forwardRef(({className:e,invalid:t=!1,rows:s=4,...i},l)=>a.jsx("textarea",{ref:l,rows:s,className:re(vw,"resize-y",t&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":t||void 0,...i}));G2.displayName="TextArea";const Y2=ud({email:us().trim().min(1,"Enter your email address.").email("Enter a valid email address."),password:us().min(1,"Enter your password.")});function X2(){const e=Fn(),t=Zt(),s=Tt(),i=F0(),{session:l,isLoading:u,isError:d}=i,m=!l&&!u&&!d,g=$m(m),x=Q2(),b=x.data?.providers??[],v=x.data?.force_sso??!1,y=x.isError&&!x.isFetching?"We couldn't load the list of providers. Refresh the page or continue with email.":null,k=h.useMemo(()=>{const $=new URLSearchParams(e.search);return _l($.get("redirectTo"))},[e.search]);h.useEffect(()=>{l&&t(zu(l.return_to,k),{replace:!0})},[t,k,l]),h.useEffect(()=>{m&&(g.isPending||g.isError||g.data?.requires_setup&&t(I0(k),{replace:!0}))},[t,k,g.data?.requires_setup,g.isError,g.isPending,m]);const[S,j]=h.useState(null),[N,M]=h.useState(!1);if(h.useEffect(()=>{j(null)},[e.search]),u)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking your session"})});if(d)return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background px-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"We were unable to verify your session. Refresh the page to try again."}),a.jsx(Te,{variant:"secondary",onClick:()=>i.refetch(),children:"Retry"})]});if(g.isPending&&m)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Preparing initial setup"})});if(g.isError&&m)return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background px-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"We were unable to check whether ADE is ready."}),a.jsx(Te,{variant:"secondary",onClick:()=>g.refetch(),children:"Try again"})]});const _=async $=>{$.preventDefault(),j(null);const I=new FormData($.currentTarget),D=Object.fromEntries(I.entries()),C=Y2.safeParse(D);if(!C.success){const X=C.error.issues[0]?.message??"Invalid input.";j(X);return}const{email:L,password:V}=C.data,K=typeof D.redirectTo=="string"?D.redirectTo:null,A=_l(K);M(!0);try{const X=await aN({email:L,password:V});s.setQueryData(fs.detail(),X),t(zu(X.return_to,A),{replace:!0})}catch(X){if(X instanceof Jt){const fe=X.problem?.detail??X.message??"Unable to sign in.";j(fe)}else X instanceof Error?j(X.message):j("Unable to sign in.")}finally{M(!1)}},R=!!S&&!N,q=x.isLoading||x.isFetching;return a.jsx("div",{className:"mx-auto flex min-h-screen flex-col justify-center bg-background px-6 py-16",children:a.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-border bg-card p-10 shadow-soft",children:[a.jsxs("header",{className:"space-y-2 text-center",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Welcome back"}),a.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Sign in to ADE"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email and password or continue with a connected provider."})]}),y?a.jsx(Lt,{tone:"warning",className:"mt-6",children:y}):null,q?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-muted"}),a.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-muted"})]}):b.length>0?a.jsx("div",{className:"mt-6 space-y-3",children:b.map($=>a.jsxs("a",{href:$.start_url??"#",className:"flex w-full items-center justify-center rounded-lg border border-border-strong bg-card px-4 py-2 text-sm font-semibold text-foreground transition hover:bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:["Continue with ",$.label]},$.id))}):null,v?a.jsx(Lt,{tone:"info",className:"mt-8",children:"Password sign-in is disabled for this deployment. Use one of the configured providers above."}):a.jsxs("form",{method:"post",className:"mt-8 space-y-6",onSubmit:_,children:[a.jsx("input",{type:"hidden",name:"redirectTo",value:k}),a.jsx(Mt,{label:"Email address",required:!0,children:a.jsx(yt,{id:"email",type:"email",autoComplete:"email",placeholder:"you@example.com",name:"email",disabled:N})}),a.jsx(Mt,{label:"Password",required:!0,children:a.jsx(yt,{id:"password",type:"password",autoComplete:"current-password",placeholder:"",name:"password",disabled:N})}),R?a.jsx(Lt,{tone:"danger",children:S}):null,a.jsx(Te,{type:"submit",className:"w-full justify-center",isLoading:N,disabled:N,children:N?"Signing in":"Continue"})]})]})})}function J2(){const e=Zt(),t=Fn(),s=Tt(),[i,l]=h.useState(null);return h.useEffect(()=>{let u=!1;const d=new URLSearchParams(t.search),m=d.get("code")??"",g=d.get("state")??"";if(!m||!g){l("Missing authorization details from the identity provider.");return}async function x(){try{const b=await oN({code:m,state:g});if(u)return;s.setQueryData(fs.detail(),b);const v=zu(b.return_to,d.get("next"));e(v,{replace:!0})}catch(b){if(u)return;b instanceof Jt?l(b.problem?.detail??b.message):b instanceof Error?l(b.message):l("Unexpected callback error.")}}return x(),()=>{u=!0}},[t.search,e,s]),i?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(wt,{title:"Unable to finish sign-in",description:i,variant:"error",action:a.jsx(Te,{variant:"secondary",onClick:()=>e("/login",{replace:!0}),children:"Return to sign in"})})}):a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(wt,{title:"Finishing sign-in",variant:"loading"})})}const eM=ud({displayName:us().min(1,"Display name is required."),email:us().min(1,"Email is required.").email("Enter a valid email address."),password:us().min(12,"Use at least 12 characters."),confirmPassword:us().min(1,"Confirm your password.")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match."});function tM(){const e=Fn(),t=Zt(),s=Tt(),i=$m(!0),l=h.useMemo(()=>{const b=new URLSearchParams(e.search);return _l(b.get("redirectTo"))},[e.search]);h.useEffect(()=>{i.isPending||i.isError||i.data?.requires_setup||t(P0(l),{replace:!0})},[t,l,i.data?.requires_setup,i.isError,i.isPending]);const[u,d]=h.useState(null),[m,g]=h.useState(!1);if(i.isPending)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading setup status"})});if(i.isError)return a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-background px-6 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"We couldn't check whether ADE requires initial setup."}),a.jsx(Te,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})]});if(!i.data?.requires_setup)return null;const x=async b=>{b.preventDefault(),d(null);const v=new FormData(b.currentTarget),y=Object.fromEntries(v.entries()),k=eM.safeParse(y);if(!k.success){const j=k.error.issues[0]?.message??"Invalid input.";d(j);return}g(!0);const S=_l(y.redirectTo);try{const j=await pN({display_name:k.data.displayName,email:k.data.email,password:k.data.password});s.setQueryData(fs.detail(),j),t(zu(j.return_to,S),{replace:!0})}catch(j){if(j instanceof Jt){const N=j.problem?.detail??j.message??"Setup failed. Try again.";d(N)}else j instanceof Error?d(j.message):d("Setup failed. Try again.")}finally{g(!1)}};return a.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col justify-center bg-background px-6 py-16",children:a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-10 shadow-soft",children:[a.jsxs("header",{className:"space-y-3 text-center",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"First-run configuration"}),a.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Create the first administrator"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide credentials for the inaugural administrator account. We'll redirect after completion."})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[a.jsx("input",{type:"hidden",name:"redirectTo",value:l}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(Mt,{label:"Display name",required:!0,children:a.jsx(yt,{id:"displayName",name:"displayName",placeholder:"Casey Operator",required:!0,disabled:m})}),a.jsx(Mt,{label:"Email",required:!0,children:a.jsx(yt,{id:"email",name:"email",type:"email",placeholder:"casey@example.com",required:!0,disabled:m})})]}),a.jsx(Mt,{label:"Password",hint:"Use at least 12 characters.",required:!0,children:a.jsx(yt,{id:"password",name:"password",type:"password",minLength:12,placeholder:"",required:!0,disabled:m})}),a.jsx(Mt,{label:"Confirm password",required:!0,children:a.jsx(yt,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:12,placeholder:"Re-enter your password",required:!0,disabled:m})}),u?a.jsx(Lt,{tone:"danger",children:u}):null,a.jsx("div",{className:"flex justify-end",children:a.jsx(Te,{type:"submit",isLoading:m,disabled:m,children:m?"Creating administrator":"Create administrator"})})]})]})})}function yw({id:e,value:t,defaultValue:s="",placeholder:i="Search",ariaLabel:l,shortcutHint:u="K",shortcutKey:d="k",enableShortcut:m=!0,scopeLabel:g,leadingIcon:x,trailingIcon:b,className:v,variant:y="default",isLoading:k=!1,loadingLabel:S="Loading suggestions",filters:j,onSelectFilter:N,emptyState:M,onChange:_,onSubmit:R,onClear:q,onFocus:$,onBlur:I,suggestions:D=[],onSelectSuggestion:C,renderSuggestion:L}){const V=h.useId(),K=e??V,A=`${V}-suggestions`,X=h.useRef(null),fe=h.useRef(null),Se=t!==void 0,[z,H]=h.useState(s),[ae,ge]=h.useState(!1),ce=h.useRef(!1),[T,G]=h.useState(0),ue=Se?t??"":z,Y=D.length>0,ee=!!j?.length,Z=ae&&(Y||k||!!M||ee),te=ae&&!Y&&!k&&!!M,Q=!!(q||!Se),se=u||"K",ke=l??i,Me=()=>{ce.current&&(ce.current=!1,ge(!1),I?.())};h.useEffect(()=>{Se||H(s)},[s,Se]),h.useEffect(()=>{G(0)},[D.length,ue]),h.useEffect(()=>{if(!m||typeof window>"u")return;const Oe=Qe=>{if((Qe.metaKey||Qe.ctrlKey)&&Qe.key.toLowerCase()===d.toLowerCase()){const O=Qe.target;if(!!!(O&&O instanceof Node&&X.current?.contains(O))&&iM(O))return;Qe.preventDefault(),fe.current?.focus({preventScroll:!0})}};return window.addEventListener("keydown",Oe),()=>window.removeEventListener("keydown",Oe)},[m,d]);const We=Oe=>{Oe.preventDefault();const Qe=ue.trim();!Qe&&!R||R?.(Qe)},st=Oe=>{Se||H(Oe),_?.(Oe)},Ve=()=>{ue&&(Se||H(""),_?.(""),q?.(),fe.current?.focus({preventScroll:!0}))},$e=Oe=>{if(!Oe)return;C?.(Oe),Oe.action?.(),Me();const Qe=document.activeElement;Qe&&X.current?.contains(Qe)&&Qe.blur()},gt=Oe=>{if(Oe.key==="Escape"){Oe.preventDefault(),Me(),Oe.currentTarget.blur();return}if(!(!Z||!Y)){if(Oe.key==="ArrowDown"){Oe.preventDefault(),G(Qe=>(Qe+1)%D.length);return}if(Oe.key==="ArrowUp"){Oe.preventDefault(),G(Qe=>(Qe-1+D.length)%D.length);return}Oe.key==="Enter"&&(Oe.preventDefault(),$e(D[T]))}},xt=y==="minimal"?re("rounded-xl border border-border bg-card/90 shadow-sm ring-1 ring-inset ring-border/40","transition focus-within:border-brand-400 focus-within:shadow-[0_18px_45px_-35px_rgb(var(--sys-color-shadow)/0.4)]"):re("rounded-xl border border-border/70 bg-gradient-to-r from-card/95 via-muted/80 to-card/95","shadow-[0_20px_45px_-30px_rgb(var(--sys-color-shadow)/0.6)] ring-1 ring-inset ring-border/30 transition","focus-within:border-brand-400 focus-within:shadow-[0_25px_55px_-35px_rgb(var(--sys-color-shadow)/0.55)] sm:rounded-2xl");return a.jsxs("div",{ref:X,className:re("relative",v),onFocusCapture:()=>{ce.current||(ce.current=!0,ge(!0),$?.())},onBlurCapture:()=>{requestAnimationFrame(()=>{const Oe=X.current,Qe=document.activeElement;!!(Oe&&Qe&&Oe.contains(Qe))||Me()})},onKeyDownCapture:Oe=>{if(Oe.key==="Escape"){Oe.preventDefault(),Me();const Qe=document.activeElement;Qe&&X.current?.contains(Qe)&&Qe.blur()}},children:[a.jsx("div",{className:re("group/search overflow-hidden",xt,Z&&y==="default"&&"focus-within:shadow-[0_35px_80px_-40px_rgb(var(--sys-color-shadow)/0.55)]"),children:a.jsxs("form",{className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-muted-foreground sm:px-5 sm:py-2.5",role:"search","aria-label":ke,onSubmit:We,children:[a.jsx("label",{htmlFor:K,className:"sr-only",children:ke}),x??a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-card text-brand-600 shadow-inner shadow-white/10 ring-1 ring-inset ring-border/40 sm:h-10 sm:w-10",children:a.jsx(rM,{className:"h-4 w-4 flex-shrink-0 text-brand-600"})}),a.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[g?a.jsx("span",{className:"text-[0.6rem] font-semibold uppercase tracking-wide text-muted-foreground sm:text-[0.65rem]",children:g}):null,a.jsx("input",{ref:fe,id:K,type:"search",value:ue,onChange:Oe=>st(Oe.target.value),role:"combobox","aria-autocomplete":"list","aria-haspopup":"listbox",onKeyDown:gt,placeholder:i,className:"w-full border-0 bg-transparent text-base font-medium text-foreground placeholder:text-muted-foreground focus:outline-none","aria-expanded":Z,"aria-controls":Z?A:void 0,"aria-activedescendant":Z&&Y?`${A}-option-${T}`:void 0})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[Q&&ue?a.jsx("button",{type:"button",onClick:Ve,"aria-label":"Clear search",className:"focus-ring inline-flex h-7 w-7 items-center justify-center rounded-full border border-transparent text-muted-foreground hover:border-border hover:bg-card",children:a.jsx(sM,{className:"h-3.5 w-3.5"})}):null,k?a.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center","aria-live":"polite","aria-label":S,children:a.jsx(aM,{className:"h-4 w-4 text-brand-600"})}):null,b,a.jsx("span",{className:"hidden items-center gap-1 rounded-full border border-border/70 bg-card/80 px-2 py-1 text-xs font-semibold text-muted-foreground shadow-inner shadow-white/10 md:inline-flex",children:se})]})]})}),Z?a.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-2 overflow-hidden rounded-2xl border border-border/70 bg-popover shadow-[0_35px_80px_-40px_rgb(var(--sys-color-shadow)/0.55)] ring-1 ring-inset ring-border/30",children:[Y?a.jsx("ul",{id:A,role:"listbox","aria-label":"Search suggestions",className:"divide-y divide-border/60",children:D.map((Oe,Qe)=>{const O=Qe===T,U=L?.({suggestion:Oe,active:O})??a.jsx(nM,{suggestion:Oe,active:O});return a.jsx("li",{children:a.jsx("button",{id:`${A}-option-${Qe}`,type:"button",role:"option","aria-selected":O,onMouseEnter:()=>G(Qe),onClick:()=>$e(Oe),className:re("flex w-full px-5 py-3 text-left transition",O?"bg-brand-500/10":"hover:bg-muted"),children:U})},Oe.id)})}):null,te?a.jsx("div",{className:"px-5 py-4 text-sm text-muted-foreground",role:"status",children:M}):null,ee?a.jsx("div",{className:"border-t border-border/60 bg-muted/60 px-4 py-2.5",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-muted-foreground",children:[a.jsx("span",{className:"uppercase tracking-wide text-[0.6rem] text-muted-foreground",children:"Filters:"}),j?.map(Oe=>a.jsx("button",{type:"button",onClick:()=>N?.(Oe),className:re("focus-ring inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-semibold transition",Oe.active?"border-brand-400 bg-brand-500/10 text-brand-600":"border-border bg-card text-muted-foreground hover:border-border-strong"),children:Oe.label},Oe.id))]})}):null]}):null]})}function nM({suggestion:e,active:t}){return a.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.icon?a.jsx("span",{className:"mt-0.5 text-muted-foreground",children:e.icon}):a.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-border","aria-hidden":!0}),a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-foreground",children:e.label}),e.shortcutHint?a.jsx("span",{className:"rounded border border-border bg-card px-1.5 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-muted-foreground",children:e.shortcutHint}):null]}),e.description?a.jsx("span",{className:re("text-xs",t?"text-brand-600":"text-muted-foreground"),children:e.description}):null]})]})}function rM({className:e="h-4 w-4 flex-shrink-0 text-muted-foreground"}){return a.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[a.jsx("circle",{cx:"9",cy:"9",r:"5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"m13.5 13.5 3 3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function sM({className:e="h-3.5 w-3.5"}){return a.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[a.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),a.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function aM({className:e="h-4 w-4"}){return a.jsxs("svg",{className:re("animate-spin",e),viewBox:"0 0 24 24",fill:"none",children:[a.jsx("circle",{className:"opacity-20",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),a.jsx("path",{className:"opacity-70",d:"M22 12a10 10 0 0 0-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function iM(e){if(!e||!(e instanceof HTMLElement))return!1;const t=e.tagName.toLowerCase();return!!(t==="input"||t==="textarea"||t==="select"||e.isContentEditable||e.closest?.("[contenteditable='true']"))}function ww({brand:e,leading:t,actions:s,trailing:i,search:l,secondaryContent:u,scrollContainer:d}){const[m,g]=h.useState(!1);h.useEffect(()=>{if(typeof window>"u")return;let v=!1;const y=d??window,k=()=>y===window?window.scrollY:y.scrollTop,S=()=>{v=!1;const N=k()>0;g(M=>M===N?M:N)},j=()=>{v||(v=!0,window.requestAnimationFrame(S))};return S(),y.addEventListener("scroll",j,{passive:!0}),()=>y.removeEventListener("scroll",j)},[d]);const x=!!l,b=l?{...l,variant:l.variant??"minimal",className:re("order-last w-full lg:order-none",l.className)}:void 0;return a.jsxs("header",{className:re("sticky top-0 z-50","border-b border-header-border","bg-header text-header-foreground","transition-shadow duration-200 motion-reduce:transition-none",m?"shadow-[0_12px_40px_-30px_rgb(var(--sys-color-shadow)/0.45)]":"shadow-none"),style:{"--focus-ring-offset":"rgb(var(--sys-color-header-bg) / 1)"},role:"banner",children:[a.jsx("a",{href:"#main-content",className:re("sr-only","focus:not-sr-only focus:absolute focus:left-4 focus:top-3 focus:z-[60]","rounded-lg border border-header-border bg-card px-3 py-2 text-sm font-semibold text-foreground shadow","focus:outline-none focus:ring-2 focus:ring-header-ring focus:ring-offset-2 focus:ring-offset-header"),children:"Skip to content"}),a.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3 sm:px-6 lg:px-10",children:[a.jsxs("div",{className:re("flex min-h-[3.5rem] w-full flex-wrap items-center gap-3 sm:gap-4",x?"lg:grid lg:grid-cols-[minmax(0,1fr)_minmax(0,42rem)_minmax(0,1fr)] lg:items-center lg:gap-8":"justify-between"),children:[a.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3 lg:flex-none",children:[e,t]}),b?a.jsx(yw,{...b}):null,a.jsxs("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2 sm:flex-none",children:[s,i]})]}),u?a.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u}):null]})]})}var zr=f0();const oM=140,lM=288,cM=8,co=12;function jw({displayName:e,email:t,actions:s=[]}){const i=h.useId(),[l,u]=h.useState(!1),[d,m]=h.useState(!1),[g,x]=h.useState(!1),[b,v]=h.useState(null),[y,k]=h.useState(!1),S=h.useRef(null),j=h.useRef(null),N=Zt(),M=h.useMemo(()=>uM(e||t),[e,t]),_=h.useCallback(C=>{u(!1),C?.restoreFocus&&requestAnimationFrame(()=>S.current?.focus({preventScroll:!0}))},[]),R=h.useCallback(()=>{if(typeof window>"u"||!S.current)return;const C=S.current.getBoundingClientRect(),L=j.current?.offsetWidth??lM,V=j.current?.offsetHeight??0,K=Math.max(co,window.innerWidth-L-co),A=Math.max(co,window.innerHeight-V-co);let X=C.right-L,fe=C.bottom+cM;X=Math.min(Math.max(X,co),K),fe=Math.min(Math.max(fe,co),A),v({top:fe,left:X})},[]);h.useEffect(()=>{if(l){m(!0);const L=window.requestAnimationFrame(()=>{R(),x(!0)});return()=>window.cancelAnimationFrame(L)}x(!1),v(null);const C=window.setTimeout(()=>m(!1),oM);return()=>window.clearTimeout(C)},[l,R]),h.useEffect(()=>{if(!l)return;const C=()=>R();return window.addEventListener("resize",C),window.addEventListener("scroll",C,!0),()=>{window.removeEventListener("resize",C),window.removeEventListener("scroll",C,!0)}},[l,R]),h.useEffect(()=>{if(!l)return;const C=V=>{const K=V.target;K&&(j.current?.contains(K)||S.current?.contains(K)||_())},L=V=>{V.key==="Escape"&&_({restoreFocus:!0})};return window.addEventListener("pointerdown",C,{passive:!0}),window.addEventListener("keydown",L),()=>{window.removeEventListener("pointerdown",C),window.removeEventListener("keydown",L)}},[_,l]),h.useEffect(()=>{l&&requestAnimationFrame(()=>{j.current?.querySelector("button[data-menu-item]")?.focus({preventScroll:!0})})},[l]);const q=h.useCallback(C=>{_(),C()},[_]),$=h.useCallback(async()=>{y||(_(),k(!0),N("/logout",{replace:!0}))},[_,y,N]),I=C=>{const L=Array.from(j.current?.querySelectorAll("button[data-menu-item]")??[]);if(L.length===0)return;const V=(C%L.length+L.length)%L.length;L[V]?.focus({preventScroll:!0})},D=C=>{const L=Array.from(j.current?.querySelectorAll("button[data-menu-item]")??[]);if(L.length===0)return;const V=document.activeElement,K=V?L.indexOf(V):-1,A=K===-1?0:K+C;I(A)};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{ref:S,type:"button",className:re("focus-ring inline-flex items-center gap-3 rounded-xl border bg-card px-2.5 py-1.5 text-left text-sm font-semibold text-muted-foreground shadow-sm transition","hover:border-border-strong hover:text-foreground",l?"border-brand-400 ring-2 ring-brand-500/10":"border-border"),"aria-haspopup":"menu","aria-controls":i,"aria-expanded":l,onClick:()=>u(C=>!C),onKeyDown:C=>{(C.key==="ArrowDown"||C.key==="Enter"||C.key===" ")&&(C.preventDefault(),u(!0))},children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-sm font-semibold text-on-brand shadow-sm",children:M}),a.jsxs("span",{className:"hidden min-w-0 flex-col sm:flex",children:[a.jsx("span",{className:"truncate text-sm font-semibold text-foreground",children:e}),a.jsx("span",{className:"truncate text-xs text-muted-foreground",children:t})]}),a.jsx(fM,{className:re("text-muted-foreground transition-transform duration-150",l&&"rotate-180")})]}),d&&typeof document<"u"?zr.createPortal(a.jsxs("div",{ref:j,id:i,role:"menu",tabIndex:-1,className:re("fixed w-72 origin-top-right rounded-xl border border-border bg-popover p-2 text-sm shadow-2xl ring-1 ring-border/50","isolate","transition-[opacity,transform] duration-150 ease-out motion-reduce:transition-none",g?"opacity-100 translate-y-0 scale-100":"pointer-events-none opacity-0 -translate-y-1 scale-[0.98]"),style:b?{top:b.top,left:b.left,position:"fixed",zIndex:90,backgroundColor:"rgb(var(--sys-color-surface-elevated))"}:{top:0,left:0,visibility:"hidden"},onKeyDown:C=>{if(C.key==="ArrowDown"){C.preventDefault(),D(1);return}if(C.key==="ArrowUp"){C.preventDefault(),D(-1);return}if(C.key==="Home"){C.preventDefault(),I(0);return}if(C.key==="End"){C.preventDefault(),I(Number.MAX_SAFE_INTEGER);return}C.key==="Escape"&&(C.preventDefault(),_({restoreFocus:!0}))},children:[a.jsxs("div",{className:"px-2 pb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Signed in as"}),a.jsx("p",{className:"truncate text-xs text-muted-foreground",children:t})]}),a.jsx("ul",{className:"space-y-1",role:"none",children:s.map(C=>a.jsx("li",{role:"none",children:a.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm font-medium text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",onClick:()=>q(C.onSelect),children:[a.jsx("span",{className:"inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-muted text-xs font-semibold text-muted-foreground",children:C.icon??C.label.charAt(0).toUpperCase()}),a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate",children:C.label}),C.description?a.jsx("span",{className:"truncate text-xs font-normal text-muted-foreground",children:C.description}):null]})]})},C.id))}),a.jsx("div",{className:"mt-3 border-t border-border pt-3",children:a.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"focus-ring flex w-full items-center justify-between gap-2 rounded-lg border border-border bg-card px-3 py-2 text-sm font-semibold text-muted-foreground transition hover:border-brand-400 hover:text-brand-600 disabled:cursor-not-allowed disabled:opacity-60",onClick:$,disabled:y,children:[a.jsx("span",{children:"Sign out"}),y?a.jsx(dM,{}):null]})})]}),document.body):null]})}function uM(e){const t=e.split(" ").map(s=>s.trim()).filter(Boolean);return t.length===0?"":t.length===1?t[0].charAt(0).toUpperCase():`${t[0].charAt(0)}${t[t.length-1].charAt(0)}`.toUpperCase()}function dM(){return a.jsx("svg",{className:"h-4 w-4 animate-spin text-brand-600",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:a.jsx("path",{d:"M10 3a7 7 0 1 1-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}function fM({className:e}){return a.jsx("svg",{className:re("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}const hM="1.6.3",mM=hM.trim(),pM=mM||"unknown";async function gM(e={}){const{data:t}=await Ie.GET("/api/v1/system/safe-mode",{signal:e.signal}),s=t??{},i=!!s.enabled,l=typeof s.detail=="string"&&s.detail.trim().length>0?s.detail.trim():Sw;return{enabled:i,detail:l}}async function xM(e={}){const{data:t}=await Ie.GET("/api/v1/meta/versions",{signal:e.signal}),s=t??{};return{ade_api:Lv(s.ade_api),ade_engine:Lv(s.ade_engine)}}const Sw="ADE safe mode enabled; skipping engine execution until ADE_SAFE_MODE is disabled.";function Lv(e){return typeof e=="string"&&e.trim().length>0?e.trim():"unknown"}const Uv=["system","safe-mode"],$v=["system","versions"];function bM(){const t=Tt().getQueryData(Uv);return sn({queryKey:Uv,queryFn:({signal:s})=>gM({signal:s}),initialData:t,staleTime:3e4,refetchInterval:6e4})}function vM(e={}){const s=Tt().getQueryData($v);return sn({queryKey:$v,queryFn:({signal:i})=>xM({signal:i}),initialData:s,staleTime:300*1e3,enabled:e.enabled??!0})}function kw({open:e,onClose:t}){const s=h.useRef(null),i=h.useRef(null),l=vM({enabled:e}),u=l.isError,d=l.data?.ade_api??(l.isPending?"Loading...":"unknown"),m=l.data?.ade_engine??(l.isPending?"Loading...":"unknown");if(h.useEffect(()=>{if(!e)return;const x=b=>{b.key==="Escape"&&t()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,t]),h.useEffect(()=>{if(!e)return;const{body:x}=document,b=x.style.overflow;return x.style.overflow="hidden",()=>{x.style.overflow=b}},[e]),h.useEffect(()=>{e&&i.current?.focus({preventScroll:!0})},[e]),typeof document>"u"||!e)return null;const g=a.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-overlay/60 px-4",role:"presentation",onMouseDown:x=>{x.target===x.currentTarget&&t()},children:a.jsxs("div",{ref:s,role:"dialog","aria-modal":"true","aria-labelledby":"about-versions-heading",className:"w-full max-w-xl rounded-2xl border border-border/80 bg-card p-6 shadow-2xl",children:[a.jsxs("header",{className:"mb-6 flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"About"}),a.jsx("h2",{id:"about-versions-heading",className:"text-xl font-semibold text-foreground",children:"ADE versions"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Installed versions for this ADE deployment across the web UI and backend runtime."})]}),a.jsx(Te,{ref:i,variant:"ghost",size:"sm",onClick:t,children:"Close"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Bh,{label:"ade-web",value:pM,hint:"Frontend build"}),a.jsx(Bh,{label:"ade-api",value:d,hint:"Backend service"}),a.jsx(Bh,{label:"ade-engine",value:m,hint:"Engine runtime"})]}),u?a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx(Lt,{tone:"warning",heading:"Backend versions unavailable",children:"Could not load backend versions. Check connectivity and try again."}),a.jsx(Te,{size:"sm",variant:"secondary",onClick:()=>l.refetch(),children:"Retry"})]}):null]})});return zr.createPortal(g,document.body)}function Bh({label:e,value:t,hint:s}){return a.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl border border-border/70 bg-muted px-4 py-3",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("span",{className:"text-xs text-muted-foreground",children:s})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("code",{className:"rounded bg-foreground px-2.5 py-1 text-xs font-mono text-background shadow-sm",children:t})})]})}function yM({title:e,...t}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":e?void 0:!0,role:e?"img":"presentation",...t,children:[e?a.jsx("title",{children:e}):null,a.jsx("path",{d:"M4 10.5 12 4l8 6.5V19a1 1 0 0 1-1 1h-4v-5h-6v5H5a1 1 0 0 1-1-1v-8.5Z"})]})}const wM=[{value:"system",label:"System",icon:kM},{value:"light",label:"Light",icon:jM},{value:"dark",label:"Dark",icon:SM}];function Nw({className:e}){const{modePreference:t,setModePreference:s}=Xu();return a.jsx("div",{className:re("inline-flex items-center gap-1 rounded-xl border border-border/80 bg-card p-1 shadow-sm",e),role:"radiogroup","aria-label":"Color mode",children:wM.map(i=>{const l=t===i.value,u=i.icon;return a.jsx("button",{type:"button",role:"radio","aria-checked":l,"aria-label":i.label,title:i.label,onClick:()=>s(i.value),className:re("focus-ring inline-flex h-9 w-9 items-center justify-center rounded-lg text-muted-foreground transition","hover:bg-muted hover:text-foreground",l&&"bg-muted text-foreground shadow-sm"),children:a.jsx(u,{className:"h-4 w-4"})},i.value)})})}function jM({className:e}){return a.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.6",children:[a.jsx("circle",{cx:"10",cy:"10",r:"3.5"}),a.jsx("path",{d:"M10 2.5v2.2",strokeLinecap:"round"}),a.jsx("path",{d:"M10 15.3v2.2",strokeLinecap:"round"}),a.jsx("path",{d:"M2.5 10h2.2",strokeLinecap:"round"}),a.jsx("path",{d:"M15.3 10h2.2",strokeLinecap:"round"}),a.jsx("path",{d:"M4.3 4.3l1.6 1.6",strokeLinecap:"round"}),a.jsx("path",{d:"M14.1 14.1l1.6 1.6",strokeLinecap:"round"}),a.jsx("path",{d:"M15.7 4.3l-1.6 1.6",strokeLinecap:"round"}),a.jsx("path",{d:"M5.9 14.1l-1.6 1.6",strokeLinecap:"round"})]})}function SM({className:e}){return a.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.6",children:a.jsx("path",{d:"M13.8 12.7A5.8 5.8 0 1 1 7.3 3.2a6.7 6.7 0 0 0 6.5 9.5Z",strokeLinecap:"round",strokeLinejoin:"round"})})}function kM({className:e}){return a.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.6",children:[a.jsx("rect",{x:"3",y:"4",width:"14",height:"9",rx:"2"}),a.jsx("path",{d:"M7 16h6",strokeLinecap:"round"}),a.jsx("path",{d:"M10 13v3",strokeLinecap:"round"})]})}const NM=232,CM=30,ci=6;function hs({open:e,position:t,onClose:s,items:i,appearance:l="dark",onPointerLeave:u}){const d=h.useRef(null),m=h.useRef([]),[g,x]=h.useState(null),b=h.useMemo(()=>i.findIndex(S=>!S.disabled),[i]),[v,y]=h.useState(()=>b>=0?b:0);if(h.useEffect(()=>{if(!e||!t||typeof window>"u"){x(null);return}const S=i.length*CM+ci*2,j=Math.max(ci,(window.innerWidth||0)-NM-ci),N=Math.max(ci,(window.innerHeight||0)-S-ci),M=Math.min(Math.max(t.x,ci),j),_=Math.min(Math.max(t.y,ci),N);x({x:M,y:_})},[e,t,i.length]),h.useEffect(()=>{e&&y(b>=0?b:0)},[e,b]),h.useEffect(()=>{if(!e)return;m.current[v]?.focus()},[e,v]),h.useEffect(()=>{if(!e||typeof window>"u")return;const S=M=>{d.current&&(d.current.contains(M.target)||s())},j=M=>{if(d.current){if(d.current.contains(M.target)){M.preventDefault();return}s()}},N=M=>{if(M.key==="Escape"){M.preventDefault(),s();return}if(M.key==="ArrowDown"||M.key==="ArrowUp"){M.preventDefault();const _=M.key==="ArrowDown"?1:-1;y(R=>{if(i.length===0)return R;let q=R;for(let $=0;$<i.length;$+=1)if(q=(q+_+i.length)%i.length,!i[q]?.disabled)return q;return R});return}if(M.key==="Enter"||M.key===" "){M.preventDefault();const _=i[v];_&&!_.disabled&&(_.onSelect(),s())}};return window.addEventListener("mousedown",S),window.addEventListener("contextmenu",j),window.addEventListener("keydown",N),()=>{window.removeEventListener("mousedown",S),window.removeEventListener("contextmenu",j),window.removeEventListener("keydown",N)}},[e,s,i,v]),!e||!t||typeof window>"u"||!g)return null;const k=l==="dark"?{bg:"bg-popover text-foreground",border:"border-border/70",shadow:"shadow-[0_12px_28px_rgb(var(--sys-color-shadow)/0.5)]",item:"hover:bg-muted focus-visible:bg-muted",disabled:"text-muted-foreground",danger:"text-danger-300 hover:text-on-danger hover:bg-danger-600 focus-visible:bg-danger-600",shortcut:"text-muted-foreground",separator:"border-border/60"}:{bg:"bg-popover text-foreground",border:"border-border/80",shadow:"shadow-[0_12px_28px_rgb(var(--sys-color-shadow)/0.18)]",item:"hover:bg-muted focus-visible:bg-muted",disabled:"text-muted-foreground",danger:"text-danger-600 hover:text-on-danger hover:bg-danger-600 focus-visible:bg-danger-600",shortcut:"text-muted-foreground",separator:"border-border/70"};return zr.createPortal(a.jsx("div",{ref:d,role:"menu",className:re("z-[60] min-w-[200px] rounded-sm border",k.bg,k.border,k.shadow),style:{top:g.y,left:g.x,position:"fixed"},onPointerLeave:u,children:a.jsx("ul",{className:"py-1",role:"none",children:i.map((S,j)=>{const N=!!S.disabled,M=!!S.danger;return a.jsxs(h.Fragment,{children:[S.dividerAbove?a.jsx("li",{role:"separator",className:re("mx-2 my-1 border-t",k.separator)}):null,a.jsx("li",{role:"none",children:a.jsxs("button",{ref:_=>{m.current[j]=_},type:"button",role:"menuitem",className:re("flex w-full items-center justify-between gap-6 px-3 py-1.5 text-[13px] leading-5 outline-none transition",k.item,N&&k.disabled,M&&!N&&k.danger,N&&"cursor-default"),onClick:_=>{_.stopPropagation(),!N&&(S.onSelect(),s())},onMouseEnter:()=>{N||(y(j),S.onHover?.())},disabled:N,children:[a.jsxs("span",{className:"flex min-w-0 items-center gap-3",children:[S.icon?a.jsx("span",{className:"text-base opacity-80",children:S.icon}):a.jsx("span",{className:"inline-block h-4 w-4"}),a.jsx("span",{className:"truncate",children:S.label})]}),S.shortcut?a.jsx("span",{className:re("text-[11px] uppercase tracking-wide",k.shortcut),children:S.shortcut}):null]})})]},S.id)})})}),window.document.body)}const EM=6;function Cw({className:e}){const{theme:t,setTheme:s,resolvedMode:i,setPreviewTheme:l}=Xu(),u=h.useRef(null),[d,m]=h.useState(!1),[g,x]=h.useState(null),v=h.useMemo(()=>cm.find(S=>S.id===t),[t])?.label??t,y=h.useCallback(()=>{if(!u.current)return;const S=u.current.getBoundingClientRect();x({x:S.left,y:S.bottom+EM})},[]);h.useEffect(()=>{if(!d){l(null);return}y();const S=()=>y();return window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[d,l,y]);const k=h.useMemo(()=>cm.map(S=>({id:S.id,label:S.label,onSelect:()=>{s(S.id),l(null),m(!1)},onHover:()=>l(S.id),icon:S.id===t?a.jsx(_M,{}):void 0})),[l,s,t]);return a.jsxs("div",{className:re("relative",e),children:[a.jsxs("button",{ref:u,type:"button","aria-haspopup":"menu","aria-expanded":d,"aria-label":`Theme: ${v}`,title:`Theme: ${v}`,className:re("focus-ring inline-flex h-9 items-center gap-2 rounded-xl border border-border/80 bg-card px-2.5 text-xs","text-muted-foreground shadow-sm transition hover:border-border-strong hover:text-foreground"),onClick:()=>m(S=>!S),onKeyDown:S=>{(S.key==="ArrowDown"||S.key==="Enter"||S.key===" ")&&(S.preventDefault(),m(!0))},children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:"rgb(var(--sys-color-accent))"},"aria-hidden":!0}),a.jsx("span",{className:"hidden md:inline",children:"Theme"}),a.jsx(MM,{className:re("h-3.5 w-3.5 transition",d&&"rotate-180")})]}),a.jsx(hs,{open:d,position:g,onClose:()=>{m(!1),l(null)},items:k,appearance:i,onPointerLeave:()=>l(null)})]})}function _M(){return a.jsx("svg",{className:"h-3.5 w-3.5 text-brand-500",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M5 10.5l3 3 7-7",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function MM({className:e}){return a.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.6",children:a.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}function Ew({children:e,sidePanel:t,actions:s,search:i}){const l=yi(),u=Zt(),[d,m]=h.useState(!1),g=l.user.display_name||l.user.email||"Signed in",x=l.user.email??"";return a.jsxs(a.Fragment,{children:[a.jsx(kw,{open:d,onClose:()=>m(!1)}),a.jsxs("div",{className:"flex min-h-screen flex-col bg-background text-foreground",children:[a.jsx(ww,{brand:a.jsxs("button",{type:"button",onClick:()=>u("/workspaces"),className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-transparent bg-card px-3 py-2 text-left text-sm font-semibold text-foreground shadow-sm transition hover:border-border",children:[a.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-on-brand shadow-sm",children:a.jsx(yM,{className:"h-5 w-5","aria-hidden":!0})}),a.jsxs("span",{className:"flex flex-col leading-tight",children:[a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Workspace directory"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Automatic Data Extractor"})]})]}),search:i,actions:s?a.jsx("div",{className:"flex items-center gap-2",children:s}):void 0,trailing:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nw,{}),a.jsx(Cw,{}),a.jsx(jw,{displayName:g,email:x,actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>m(!0)}]})]})}),a.jsx("main",{id:"main-content",tabIndex:-1,className:"flex flex-1 overflow-y-auto",children:a.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:a.jsxs("div",{className:`grid gap-6 ${t?"lg:grid-cols-[minmax(0,1fr)_280px]":""}`,children:[a.jsx("div",{children:e}),t?a.jsx("aside",{className:"space-y-6",children:t}):null]})})})]})]})}const TM="K",DM="Ctrl+K";function _w({macLabel:e=TM,windowsLabel:t=DM}={}){const[s,i]=h.useState(e);return h.useEffect(()=>{if(typeof window>"u")return;const l=window.navigator.platform??"",u=/Mac|iPhone|iPad|Macintosh/.test(l);i(u?e:t)},[e,t]),s}function AM(){return a.jsx(ql,{children:a.jsx(RM,{})})}function RM(){const e=Zt(),t=yi(),s=nd(),i=X0(),[l,u]=h.useState(null),[d,m]=h.useState(null),g=h.useMemo(()=>(t.user.permissions??[]).map(A=>A.toLowerCase()),[t.user.permissions]),x=g.includes("workspaces.create")||g.includes("workspaces.manage_all"),[b,v]=h.useState(""),y=_w(),k=s.data,S=h.useMemo(()=>k?.items??[],[k?.items]),j=b.trim().toLowerCase(),N=h.useMemo(()=>j?S.filter(A=>{const X=A.name.toLowerCase(),fe=A.slug?.toLowerCase()??"";return X.includes(j)||fe.includes(j)}):S,[S,j]),M=h.useCallback(A=>e(qm(A)),[e]),_=x?a.jsx(Te,{variant:"primary",onClick:()=>e("/workspaces/new"),children:"Create workspace"}):void 0,R=h.useCallback(()=>{if(!j)return;const A=N[0];A&&M(A.id)},[N,j,M]),q=h.useCallback(()=>v(""),[]),I=(j?N:S).slice(0,5).map(A=>({id:A.id,label:A.name,description:A.slug?`Slug  ${A.slug}`:"Workspace"})),D=h.useCallback(A=>{v(""),M(A.id)},[M]),C=h.useCallback(async A=>{m(null),u(A.id);try{await i.mutateAsync(A.id),ew(A.id)}catch(X){console.warn("workspaces.set_default.failed",X),m("Unable to set the default workspace. Please try again.")}finally{u(null)}},[i]),L={value:b,onChange:v,onSubmit:R,placeholder:"Search workspaces or jump to one instantly",shortcutHint:y,scopeLabel:"Workspace directory",suggestions:I,onSelectSuggestion:D,onClear:q},V={...L,shortcutHint:void 0,onClear:q,enableShortcut:!1,variant:"minimal"};if(s.isLoading)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(wt,{title:"Loading workspaces",variant:"loading"})});if(s.isError)return a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(wt,{title:"We couldn't load your workspaces",description:"Refresh the page or try again later.",variant:"error",action:a.jsx(Te,{variant:"secondary",onClick:()=>s.refetch(),children:"Retry"})})});const K=S.length===0?x?a.jsx(zM,{onCreate:()=>e("/workspaces/new")}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{id:"page-title",className:"sr-only",children:"Workspaces"}),a.jsx(wt,{title:"No workspaces available",description:"You don't have access to any workspaces yet. Ask an administrator to add you or create one on your behalf.",variant:"empty"})]}):N.length===0?a.jsx("div",{className:"space-y-4",children:a.jsx(wt,{title:`No workspaces matching "${b}"`,description:"Try searching by another workspace name or slug.",action:a.jsx(Te,{variant:"secondary",onClick:q,children:"Clear search"})})}):a.jsxs("div",{className:"space-y-6 rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("header",{children:[a.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-foreground",children:"Workspaces"}),a.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Select a workspace to jump straight into documents."})]}),d?a.jsx(Lt,{tone:"danger",heading:"We couldn't update your default workspace",children:d}):null,a.jsx(yw,{...V,className:"w-full"}),a.jsx("section",{className:"grid gap-5 lg:grid-cols-2",children:N.map(A=>{const X=i.isPending&&l===A.id;return a.jsxs("div",{className:"group relative rounded-xl border border-border bg-card p-5 text-left shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-within:ring-2 focus-within:ring-brand-500 focus-within:ring-offset-2 focus-within:ring-offset-background",children:[a.jsxs("button",{type:"button",onClick:()=>M(A.id),className:"w-full text-left focus-visible:outline-none","aria-label":`Open workspace ${A.name}`,children:[a.jsx("div",{className:"flex items-start justify-between gap-3",children:a.jsxs("div",{className:"space-y-1 pr-24",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:A.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slug: ",A.slug]})]})}),a.jsx("p",{className:"mt-4 text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Permissions"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:A.permissions.length>0?A.permissions.join(", "):"None"})]}),a.jsx("div",{className:"absolute right-5 top-5",children:A.is_default?a.jsx("span",{className:"rounded-full bg-brand-50 px-2 py-1 text-xs font-semibold text-brand-600",children:"Default"}):a.jsx(Te,{variant:"secondary",size:"sm",isLoading:X,disabled:X,onClick:()=>void C(A),children:"Set as default"})})]},A.id)})})]});return a.jsx(Ew,{actions:_,search:L,sidePanel:a.jsx(OM,{canCreate:x,onCreate:()=>e("/workspaces/new")}),children:K})}function OM({canCreate:e,onCreate:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("section",{className:"space-y-3 rounded-2xl border border-border bg-card p-5 shadow-soft",children:[a.jsxs("header",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Workspace tips"}),a.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Why multiple workspaces?"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Segment teams by business unit or client, control access with roles, and tailor extraction settings per workspace. Everything stays organised and secure."}),e?a.jsx(Te,{variant:"secondary",onClick:t,className:"w-full",children:"New workspace"}):null]}),a.jsxs("section",{className:"space-y-3 rounded-2xl border border-border bg-card p-5 shadow-soft",children:[a.jsxs("header",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Need a hand?"}),a.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Workspace setup checklist"})]}),a.jsxs("ul",{className:"space-y-2 text-xs text-muted-foreground",children:[a.jsx("li",{children:"Add at least one additional administrator."}),a.jsx("li",{children:"Review configurations before uploading production files."}),a.jsx("li",{children:"Review workspace permissions for external collaborators."})]})]})]})}function zM({onCreate:e}){return a.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-dashed border-border-strong bg-card p-10 text-center shadow-soft",children:[a.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-foreground",children:"No workspaces yet"}),a.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Create your first workspace to start uploading configuration sets and documents."}),a.jsx(Te,{variant:"primary",onClick:e,className:"mt-6",children:"Create workspace"})]})}var Il=e=>e.type==="checkbox",hi=e=>e instanceof Date,gr=e=>e==null;const Mw=e=>typeof e=="object";var Cn=e=>!gr(e)&&!Array.isArray(e)&&Mw(e)&&!hi(e),LM=e=>Cn(e)&&e.target?Il(e.target)?e.target.checked:e.target.value:e,UM=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,$M=(e,t)=>e.has(UM(t)),BM=e=>{const t=e.constructor&&e.constructor.prototype;return Cn(t)&&t.hasOwnProperty("isPrototypeOf")},Wm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bn(e){let t;const s=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Wm&&(e instanceof Blob||i))&&(s||Cn(e)))if(t=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!BM(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=Bn(e[l]));else return e;return t}var dd=e=>/^\w*$/.test(e),xn=e=>e===void 0,Qm=e=>Array.isArray(e)?e.filter(Boolean):[],Km=e=>Qm(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Fe=(e,t,s)=>{if(!t||!Cn(e))return s;const i=(dd(t)?[t]:Km(t)).reduce((l,u)=>gr(l)?l:l[u],e);return xn(i)||i===e?xn(e[t])?s:e[t]:i},Ns=e=>typeof e=="boolean",Vt=(e,t,s)=>{let i=-1;const l=dd(t)?[t]:Km(t),u=l.length,d=u-1;for(;++i<u;){const m=l[i];let g=s;if(i!==d){const x=e[m];g=Cn(x)||Array.isArray(x)?x:isNaN(+l[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;e[m]=g,e=e[m]}};const Bv={BLUR:"blur",FOCUS_OUT:"focusout"},os={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ys={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qM=Ft.createContext(null);qM.displayName="HookFormContext";var FM=(e,t,s,i=!0)=>{const l={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(l,u,{get:()=>{const d=u;return t._proxyFormState[d]!==os.all&&(t._proxyFormState[d]=!i||os.all),e[d]}});return l};const PM=typeof window<"u"?Ft.useLayoutEffect:Ft.useEffect;var Or=e=>typeof e=="string",IM=(e,t,s,i,l)=>Or(e)?(i&&t.watch.add(e),Fe(s,e,l)):Array.isArray(e)?e.map(u=>(i&&t.watch.add(u),Fe(s,u))):(i&&(t.watchAll=!0),s),mm=e=>gr(e)||!Mw(e);function Oa(e,t,s=new WeakSet){if(mm(e)||mm(t))return e===t;if(hi(e)&&hi(t))return e.getTime()===t.getTime();const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const u of i){const d=e[u];if(!l.includes(u))return!1;if(u!=="ref"){const m=t[u];if(hi(d)&&hi(m)||Cn(d)&&Cn(m)||Array.isArray(d)&&Array.isArray(m)?!Oa(d,m,s):d!==m)return!1}}return!0}var Gm=(e,t,s,i,l)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[i]:l||!0}}:{},yl=e=>Array.isArray(e)?e:[e],qv=()=>{let e=[];return{get observers(){return e},next:l=>{for(const u of e)u.next&&u.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(u=>u!==l)}}),unsubscribe:()=>{e=[]}}};function Tw(e,t){const s={};for(const i in e)if(e.hasOwnProperty(i)){const l=e[i],u=t[i];if(l&&Cn(l)&&u){const d=Tw(l,u);Cn(d)&&(s[i]=d)}else e[i]&&(s[i]=u)}return s}var pr=e=>Cn(e)&&!Object.keys(e).length,Ym=e=>e.type==="file",ls=e=>typeof e=="function",Bu=e=>{if(!Wm)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Dw=e=>e.type==="select-multiple",Xm=e=>e.type==="radio",HM=e=>Xm(e)||Il(e),qh=e=>Bu(e)&&e.isConnected;function VM(e,t){const s=t.slice(0,-1).length;let i=0;for(;i<s;)e=xn(e)?i++:e[t[i++]];return e}function ZM(e){for(const t in e)if(e.hasOwnProperty(t)&&!xn(e[t]))return!1;return!0}function Nn(e,t){const s=Array.isArray(t)?t:dd(t)?[t]:Km(t),i=s.length===1?e:VM(e,s),l=s.length-1,u=s[l];return i&&delete i[u],l!==0&&(Cn(i)&&pr(i)||Array.isArray(i)&&ZM(i))&&Nn(e,s.slice(0,-1)),e}var WM=e=>{for(const t in e)if(ls(e[t]))return!0;return!1};function Aw(e){return Array.isArray(e)||Cn(e)&&!WM(e)}function pm(e,t={}){for(const s in e)Aw(e[s])?(t[s]=Array.isArray(e[s])?[]:{},pm(e[s],t[s])):xn(e[s])||(t[s]=!0);return t}function po(e,t,s){s||(s=pm(t));for(const i in e)Aw(e[i])?xn(t)||mm(s[i])?s[i]=pm(e[i],Array.isArray(e[i])?[]:{}):po(e[i],gr(t)?{}:t[i],s[i]):s[i]=!Oa(e[i],t[i]);return s}const Fv={value:!1,isValid:!1},Pv={value:!0,isValid:!0};var Rw=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!xn(e[0].attributes.value)?xn(e[0].value)||e[0].value===""?Pv:{value:e[0].value,isValid:!0}:Pv:Fv}return Fv},Ow=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:i})=>xn(e)?e:t?e===""?NaN:e&&+e:s&&Or(e)?new Date(e):i?i(e):e;const Iv={isValid:!1,value:null};var zw=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,Iv):Iv;function Hv(e){const t=e.ref;return Ym(t)?t.files:Xm(t)?zw(e.refs).value:Dw(t)?[...t.selectedOptions].map(({value:s})=>s):Il(t)?Rw(e.refs).value:Ow(xn(t.value)?e.ref.value:t.value,e)}var QM=(e,t,s,i)=>{const l={};for(const u of e){const d=Fe(t,u);d&&Vt(l,u,d._f)}return{criteriaMode:s,names:[...e],fields:l,shouldUseNativeValidation:i}},qu=e=>e instanceof RegExp,gl=e=>xn(e)?e:qu(e)?e.source:Cn(e)?qu(e.value)?e.value.source:e.value:e,Vv=e=>({isOnSubmit:!e||e===os.onSubmit,isOnBlur:e===os.onBlur,isOnChange:e===os.onChange,isOnAll:e===os.all,isOnTouch:e===os.onTouched});const Zv="AsyncFunction";var KM=e=>!!e&&!!e.validate&&!!(ls(e.validate)&&e.validate.constructor.name===Zv||Cn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Zv)),GM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Wv=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const wl=(e,t,s,i)=>{for(const l of s||Object.keys(e)){const u=Fe(e,l);if(u){const{_f:d,...m}=u;if(d){if(d.refs&&d.refs[0]&&t(d.refs[0],l)&&!i)return!0;if(d.ref&&t(d.ref,d.name)&&!i)return!0;if(wl(m,t))break}else if(Cn(m)&&wl(m,t))break}}};function Qv(e,t,s){const i=Fe(e,s);if(i||dd(s))return{error:i,name:s};const l=s.split(".");for(;l.length;){const u=l.join("."),d=Fe(t,u),m=Fe(e,u);if(d&&!Array.isArray(d)&&s!==u)return{name:s};if(m&&m.type)return{name:u,error:m};if(m&&m.root&&m.root.type)return{name:`${u}.root`,error:m.root};l.pop()}return{name:s}}var YM=(e,t,s,i)=>{s(e);const{name:l,...u}=e;return pr(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(d=>t[d]===(!i||os.all))},XM=(e,t,s)=>!e||!t||e===t||yl(e).some(i=>i&&(s?i===t:i.startsWith(t)||t.startsWith(i))),JM=(e,t,s,i,l)=>l.isOnAll?!1:!s&&l.isOnTouch?!(t||e):(s?i.isOnBlur:l.isOnBlur)?!e:(s?i.isOnChange:l.isOnChange)?e:!0,eT=(e,t)=>!Qm(Fe(e,t)).length&&Nn(e,t),tT=(e,t,s)=>{const i=yl(Fe(e,s));return Vt(i,"root",t[s]),Vt(e,s,i),e};function Kv(e,t,s="validate"){if(Or(e)||Array.isArray(e)&&e.every(Or)||Ns(e)&&!e)return{type:s,message:Or(e)?e:"",ref:t}}var uo=e=>Cn(e)&&!qu(e)?e:{value:e,message:""},Gv=async(e,t,s,i,l,u)=>{const{ref:d,refs:m,required:g,maxLength:x,minLength:b,min:v,max:y,pattern:k,validate:S,name:j,valueAsNumber:N,mount:M}=e._f,_=Fe(s,j);if(!M||t.has(j))return{};const R=m?m[0]:d,q=A=>{l&&R.reportValidity&&(R.setCustomValidity(Ns(A)?"":A||""),R.reportValidity())},$={},I=Xm(d),D=Il(d),C=I||D,L=(N||Ym(d))&&xn(d.value)&&xn(_)||Bu(d)&&d.value===""||_===""||Array.isArray(_)&&!_.length,V=Gm.bind(null,j,i,$),K=(A,X,fe,Se=Ys.maxLength,z=Ys.minLength)=>{const H=A?X:fe;$[j]={type:A?Se:z,message:H,ref:d,...V(A?Se:z,H)}};if(u?!Array.isArray(_)||!_.length:g&&(!C&&(L||gr(_))||Ns(_)&&!_||D&&!Rw(m).isValid||I&&!zw(m).isValid)){const{value:A,message:X}=Or(g)?{value:!!g,message:g}:uo(g);if(A&&($[j]={type:Ys.required,message:X,ref:R,...V(Ys.required,X)},!i))return q(X),$}if(!L&&(!gr(v)||!gr(y))){let A,X;const fe=uo(y),Se=uo(v);if(!gr(_)&&!isNaN(_)){const z=d.valueAsNumber||_&&+_;gr(fe.value)||(A=z>fe.value),gr(Se.value)||(X=z<Se.value)}else{const z=d.valueAsDate||new Date(_),H=ce=>new Date(new Date().toDateString()+" "+ce),ae=d.type=="time",ge=d.type=="week";Or(fe.value)&&_&&(A=ae?H(_)>H(fe.value):ge?_>fe.value:z>new Date(fe.value)),Or(Se.value)&&_&&(X=ae?H(_)<H(Se.value):ge?_<Se.value:z<new Date(Se.value))}if((A||X)&&(K(!!A,fe.message,Se.message,Ys.max,Ys.min),!i))return q($[j].message),$}if((x||b)&&!L&&(Or(_)||u&&Array.isArray(_))){const A=uo(x),X=uo(b),fe=!gr(A.value)&&_.length>+A.value,Se=!gr(X.value)&&_.length<+X.value;if((fe||Se)&&(K(fe,A.message,X.message),!i))return q($[j].message),$}if(k&&!L&&Or(_)){const{value:A,message:X}=uo(k);if(qu(A)&&!_.match(A)&&($[j]={type:Ys.pattern,message:X,ref:d,...V(Ys.pattern,X)},!i))return q(X),$}if(S){if(ls(S)){const A=await S(_,s),X=Kv(A,R);if(X&&($[j]={...X,...V(Ys.validate,X.message)},!i))return q(X.message),$}else if(Cn(S)){let A={};for(const X in S){if(!pr(A)&&!i)break;const fe=Kv(await S[X](_,s),R,X);fe&&(A={...fe,...V(X,fe.message)},q(fe.message),i&&($[j]=A))}if(!pr(A)&&($[j]={ref:R,...A},!i))return $}}return q(!0),$};const nT={mode:os.onSubmit,reValidateMode:os.onChange,shouldFocusError:!0};function rT(e={}){let t={...nT,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:ls(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},l=Cn(t.defaultValues)||Cn(t.values)?Bn(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:Bn(l),d={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,x=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...b};const y={array:qv(),state:qv()},k=t.criteriaMode===os.all,S=O=>U=>{clearTimeout(x),x=setTimeout(O,U)},j=async O=>{if(!t.disabled&&(b.isValid||v.isValid||O)){const U=t.resolver?pr((await D()).errors):await L(i,!0);U!==s.isValid&&y.state.next({isValid:U})}},N=(O,U)=>{!t.disabled&&(b.isValidating||b.validatingFields||v.isValidating||v.validatingFields)&&((O||Array.from(m.mount)).forEach(ne=>{ne&&(U?Vt(s.validatingFields,ne,U):Nn(s.validatingFields,ne))}),y.state.next({validatingFields:s.validatingFields,isValidating:!pr(s.validatingFields)}))},M=(O,U=[],ne,be,Ne=!0,Ce=!0)=>{if(be&&ne&&!t.disabled){if(d.action=!0,Ce&&Array.isArray(Fe(i,O))){const ze=ne(Fe(i,O),be.argA,be.argB);Ne&&Vt(i,O,ze)}if(Ce&&Array.isArray(Fe(s.errors,O))){const ze=ne(Fe(s.errors,O),be.argA,be.argB);Ne&&Vt(s.errors,O,ze),eT(s.errors,O)}if((b.touchedFields||v.touchedFields)&&Ce&&Array.isArray(Fe(s.touchedFields,O))){const ze=ne(Fe(s.touchedFields,O),be.argA,be.argB);Ne&&Vt(s.touchedFields,O,ze)}(b.dirtyFields||v.dirtyFields)&&(s.dirtyFields=po(l,u)),y.state.next({name:O,isDirty:K(O,U),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Vt(u,O,U)},_=(O,U)=>{Vt(s.errors,O,U),y.state.next({errors:s.errors})},R=O=>{s.errors=O,y.state.next({errors:s.errors,isValid:!1})},q=(O,U,ne,be)=>{const Ne=Fe(i,O);if(Ne){const Ce=Fe(u,O,xn(ne)?Fe(l,O):ne);xn(Ce)||be&&be.defaultChecked||U?Vt(u,O,U?Ce:Hv(Ne._f)):fe(O,Ce),d.mount&&j()}},$=(O,U,ne,be,Ne)=>{let Ce=!1,ze=!1;const ye={name:O};if(!t.disabled){if(!ne||be){(b.isDirty||v.isDirty)&&(ze=s.isDirty,s.isDirty=ye.isDirty=K(),Ce=ze!==ye.isDirty);const _e=Oa(Fe(l,O),U);ze=!!Fe(s.dirtyFields,O),_e?Nn(s.dirtyFields,O):Vt(s.dirtyFields,O,!0),ye.dirtyFields=s.dirtyFields,Ce=Ce||(b.dirtyFields||v.dirtyFields)&&ze!==!_e}if(ne){const _e=Fe(s.touchedFields,O);_e||(Vt(s.touchedFields,O,ne),ye.touchedFields=s.touchedFields,Ce=Ce||(b.touchedFields||v.touchedFields)&&_e!==ne)}Ce&&Ne&&y.state.next(ye)}return Ce?ye:{}},I=(O,U,ne,be)=>{const Ne=Fe(s.errors,O),Ce=(b.isValid||v.isValid)&&Ns(U)&&s.isValid!==U;if(t.delayError&&ne?(g=S(()=>_(O,ne)),g(t.delayError)):(clearTimeout(x),g=null,ne?Vt(s.errors,O,ne):Nn(s.errors,O)),(ne?!Oa(Ne,ne):Ne)||!pr(be)||Ce){const ze={...be,...Ce&&Ns(U)?{isValid:U}:{},errors:s.errors,name:O};s={...s,...ze},y.state.next(ze)}},D=async O=>{N(O,!0);const U=await t.resolver(u,t.context,QM(O||m.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return N(O),U},C=async O=>{const{errors:U}=await D(O);if(O)for(const ne of O){const be=Fe(U,ne);be?Vt(s.errors,ne,be):Nn(s.errors,ne)}else s.errors=U;return U},L=async(O,U,ne={valid:!0})=>{for(const be in O){const Ne=O[be];if(Ne){const{_f:Ce,...ze}=Ne;if(Ce){const ye=m.array.has(Ce.name),_e=Ne._f&&KM(Ne._f);_e&&b.validatingFields&&N([Ce.name],!0);const Be=await Gv(Ne,m.disabled,u,k,t.shouldUseNativeValidation&&!U,ye);if(_e&&b.validatingFields&&N([Ce.name]),Be[Ce.name]&&(ne.valid=!1,U))break;!U&&(Fe(Be,Ce.name)?ye?tT(s.errors,Be,Ce.name):Vt(s.errors,Ce.name,Be[Ce.name]):Nn(s.errors,Ce.name))}!pr(ze)&&await L(ze,U,ne)}}return ne.valid},V=()=>{for(const O of m.unMount){const U=Fe(i,O);U&&(U._f.refs?U._f.refs.every(ne=>!qh(ne)):!qh(U._f.ref))&&te(O)}m.unMount=new Set},K=(O,U)=>!t.disabled&&(O&&U&&Vt(u,O,U),!Oa(ce(),l)),A=(O,U,ne)=>IM(O,m,{...d.mount?u:xn(U)?l:Or(O)?{[O]:U}:U},ne,U),X=O=>Qm(Fe(d.mount?u:l,O,t.shouldUnregister?Fe(l,O,[]):[])),fe=(O,U,ne={})=>{const be=Fe(i,O);let Ne=U;if(be){const Ce=be._f;Ce&&(!Ce.disabled&&Vt(u,O,Ow(U,Ce)),Ne=Bu(Ce.ref)&&gr(U)?"":U,Dw(Ce.ref)?[...Ce.ref.options].forEach(ze=>ze.selected=Ne.includes(ze.value)):Ce.refs?Il(Ce.ref)?Ce.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Ne)?ze.checked=!!Ne.find(ye=>ye===ze.value):ze.checked=Ne===ze.value||!!Ne)}):Ce.refs.forEach(ze=>ze.checked=ze.value===Ne):Ym(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Ne,Ce.ref.type||y.state.next({name:O,values:Bn(u)})))}(ne.shouldDirty||ne.shouldTouch)&&$(O,Ne,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&ge(O)},Se=(O,U,ne)=>{for(const be in U){if(!U.hasOwnProperty(be))return;const Ne=U[be],Ce=O+"."+be,ze=Fe(i,Ce);(m.array.has(O)||Cn(Ne)||ze&&!ze._f)&&!hi(Ne)?Se(Ce,Ne,ne):fe(Ce,Ne,ne)}},z=(O,U,ne={})=>{const be=Fe(i,O),Ne=m.array.has(O),Ce=Bn(U);Vt(u,O,Ce),Ne?(y.array.next({name:O,values:Bn(u)}),(b.isDirty||b.dirtyFields||v.isDirty||v.dirtyFields)&&ne.shouldDirty&&y.state.next({name:O,dirtyFields:po(l,u),isDirty:K(O,Ce)})):be&&!be._f&&!gr(Ce)?Se(O,Ce,ne):fe(O,Ce,ne),Wv(O,m)&&y.state.next({...s,name:O}),y.state.next({name:d.mount?O:void 0,values:Bn(u)})},H=async O=>{d.mount=!0;const U=O.target;let ne=U.name,be=!0;const Ne=Fe(i,ne),Ce=_e=>{be=Number.isNaN(_e)||hi(_e)&&isNaN(_e.getTime())||Oa(_e,Fe(u,ne,_e))},ze=Vv(t.mode),ye=Vv(t.reValidateMode);if(Ne){let _e,Be;const ht=U.type?Hv(Ne._f):LM(O),it=O.type===Bv.BLUR||O.type===Bv.FOCUS_OUT,bn=!GM(Ne._f)&&!t.resolver&&!Fe(s.errors,ne)&&!Ne._f.deps||JM(it,Fe(s.touchedFields,ne),s.isSubmitted,ye,ze),Dt=Wv(ne,m,it);Vt(u,ne,ht),it?(!U||!U.readOnly)&&(Ne._f.onBlur&&Ne._f.onBlur(O),g&&g(0)):Ne._f.onChange&&Ne._f.onChange(O);const jt=$(ne,ht,it),ut=!pr(jt)||Dt;if(!it&&y.state.next({name:ne,type:O.type,values:Bn(u)}),bn)return(b.isValid||v.isValid)&&(t.mode==="onBlur"?it&&j():it||j()),ut&&y.state.next({name:ne,...Dt?{}:jt});if(!it&&Dt&&y.state.next({...s}),t.resolver){const{errors:Ut}=await D([ne]);if(Ce(ht),be){const In=Qv(s.errors,i,ne),he=Qv(Ut,i,In.name||ne);_e=he.error,ne=he.name,Be=pr(Ut)}}else N([ne],!0),_e=(await Gv(Ne,m.disabled,u,k,t.shouldUseNativeValidation))[ne],N([ne]),Ce(ht),be&&(_e?Be=!1:(b.isValid||v.isValid)&&(Be=await L(i,!0)));be&&(Ne._f.deps&&(!Array.isArray(Ne._f.deps)||Ne._f.deps.length>0)&&ge(Ne._f.deps),I(ne,Be,_e,jt))}},ae=(O,U)=>{if(Fe(s.errors,U)&&O.focus)return O.focus(),1},ge=async(O,U={})=>{let ne,be;const Ne=yl(O);if(t.resolver){const Ce=await C(xn(O)?O:Ne);ne=pr(Ce),be=O?!Ne.some(ze=>Fe(Ce,ze)):ne}else O?(be=(await Promise.all(Ne.map(async Ce=>{const ze=Fe(i,Ce);return await L(ze&&ze._f?{[Ce]:ze}:ze)}))).every(Boolean),!(!be&&!s.isValid)&&j()):be=ne=await L(i);return y.state.next({...!Or(O)||(b.isValid||v.isValid)&&ne!==s.isValid?{}:{name:O},...t.resolver||!O?{isValid:ne}:{},errors:s.errors}),U.shouldFocus&&!be&&wl(i,ae,O?Ne:m.mount),be},ce=(O,U)=>{let ne={...d.mount?u:l};return U&&(ne=Tw(U.dirtyFields?s.dirtyFields:s.touchedFields,ne)),xn(O)?ne:Or(O)?Fe(ne,O):O.map(be=>Fe(ne,be))},T=(O,U)=>({invalid:!!Fe((U||s).errors,O),isDirty:!!Fe((U||s).dirtyFields,O),error:Fe((U||s).errors,O),isValidating:!!Fe(s.validatingFields,O),isTouched:!!Fe((U||s).touchedFields,O)}),G=O=>{O&&yl(O).forEach(U=>Nn(s.errors,U)),y.state.next({errors:O?s.errors:{}})},ue=(O,U,ne)=>{const be=(Fe(i,O,{_f:{}})._f||{}).ref,Ne=Fe(s.errors,O)||{},{ref:Ce,message:ze,type:ye,..._e}=Ne;Vt(s.errors,O,{..._e,...U,ref:be}),y.state.next({name:O,errors:s.errors,isValid:!1}),ne&&ne.shouldFocus&&be&&be.focus&&be.focus()},Y=(O,U)=>ls(O)?y.state.subscribe({next:ne=>"values"in ne&&O(A(void 0,U),ne)}):A(O,U,!0),ee=O=>y.state.subscribe({next:U=>{XM(O.name,U.name,O.exact)&&YM(U,O.formState||b,xt,O.reRenderRoot)&&O.callback({values:{...u},...s,...U,defaultValues:l})}}).unsubscribe,Z=O=>(d.mount=!0,v={...v,...O.formState},ee({...O,formState:v})),te=(O,U={})=>{for(const ne of O?yl(O):m.mount)m.mount.delete(ne),m.array.delete(ne),U.keepValue||(Nn(i,ne),Nn(u,ne)),!U.keepError&&Nn(s.errors,ne),!U.keepDirty&&Nn(s.dirtyFields,ne),!U.keepTouched&&Nn(s.touchedFields,ne),!U.keepIsValidating&&Nn(s.validatingFields,ne),!t.shouldUnregister&&!U.keepDefaultValue&&Nn(l,ne);y.state.next({values:Bn(u)}),y.state.next({...s,...U.keepDirty?{isDirty:K()}:{}}),!U.keepIsValid&&j()},Q=({disabled:O,name:U})=>{(Ns(O)&&d.mount||O||m.disabled.has(U))&&(O?m.disabled.add(U):m.disabled.delete(U))},se=(O,U={})=>{let ne=Fe(i,O);const be=Ns(U.disabled)||Ns(t.disabled);return Vt(i,O,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:O}},name:O,mount:!0,...U}}),m.mount.add(O),ne?Q({disabled:Ns(U.disabled)?U.disabled:t.disabled,name:O}):q(O,!0,U.value),{...be?{disabled:U.disabled||t.disabled}:{},...t.progressive?{required:!!U.required,min:gl(U.min),max:gl(U.max),minLength:gl(U.minLength),maxLength:gl(U.maxLength),pattern:gl(U.pattern)}:{},name:O,onChange:H,onBlur:H,ref:Ne=>{if(Ne){se(O,U),ne=Fe(i,O);const Ce=xn(Ne.value)&&Ne.querySelectorAll&&Ne.querySelectorAll("input,select,textarea")[0]||Ne,ze=HM(Ce),ye=ne._f.refs||[];if(ze?ye.find(_e=>_e===Ce):Ce===ne._f.ref)return;Vt(i,O,{_f:{...ne._f,...ze?{refs:[...ye.filter(qh),Ce,...Array.isArray(Fe(l,O))?[{}]:[]],ref:{type:Ce.type,name:O}}:{ref:Ce}}}),q(O,!1,void 0,Ce)}else ne=Fe(i,O,{}),ne._f&&(ne._f.mount=!1),(t.shouldUnregister||U.shouldUnregister)&&!($M(m.array,O)&&d.action)&&m.unMount.add(O)}}},ke=()=>t.shouldFocusError&&wl(i,ae,m.mount),Me=O=>{Ns(O)&&(y.state.next({disabled:O}),wl(i,(U,ne)=>{const be=Fe(i,ne);be&&(U.disabled=be._f.disabled||O,Array.isArray(be._f.refs)&&be._f.refs.forEach(Ne=>{Ne.disabled=be._f.disabled||O}))},0,!1))},We=(O,U)=>async ne=>{let be;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let Ne=Bn(u);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:Ce,values:ze}=await D();s.errors=Ce,Ne=Bn(ze)}else await L(i);if(m.disabled.size)for(const Ce of m.disabled)Nn(Ne,Ce);if(Nn(s.errors,"root"),pr(s.errors)){y.state.next({errors:{}});try{await O(Ne,ne)}catch(Ce){be=Ce}}else U&&await U({...s.errors},ne),ke(),setTimeout(ke);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:pr(s.errors)&&!be,submitCount:s.submitCount+1,errors:s.errors}),be)throw be},st=(O,U={})=>{Fe(i,O)&&(xn(U.defaultValue)?z(O,Bn(Fe(l,O))):(z(O,U.defaultValue),Vt(l,O,Bn(U.defaultValue))),U.keepTouched||Nn(s.touchedFields,O),U.keepDirty||(Nn(s.dirtyFields,O),s.isDirty=U.defaultValue?K(O,Bn(Fe(l,O))):K()),U.keepError||(Nn(s.errors,O),b.isValid&&j()),y.state.next({...s}))},Ve=(O,U={})=>{const ne=O?Bn(O):l,be=Bn(ne),Ne=pr(O),Ce=Ne?l:be;if(U.keepDefaultValues||(l=ne),!U.keepValues){if(U.keepDirtyValues){const ze=new Set([...m.mount,...Object.keys(po(l,u))]);for(const ye of Array.from(ze))Fe(s.dirtyFields,ye)?Vt(Ce,ye,Fe(u,ye)):z(ye,Fe(Ce,ye))}else{if(Wm&&xn(O))for(const ze of m.mount){const ye=Fe(i,ze);if(ye&&ye._f){const _e=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(Bu(_e)){const Be=_e.closest("form");if(Be){Be.reset();break}}}}if(U.keepFieldsRef)for(const ze of m.mount)z(ze,Fe(Ce,ze));else i={}}u=t.shouldUnregister?U.keepDefaultValues?Bn(l):{}:Bn(Ce),y.array.next({values:{...Ce}}),y.state.next({values:{...Ce}})}m={mount:U.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!b.isValid||!!U.keepIsValid||!!U.keepDirtyValues,d.watch=!!t.shouldUnregister,y.state.next({submitCount:U.keepSubmitCount?s.submitCount:0,isDirty:Ne?!1:U.keepDirty?s.isDirty:!!(U.keepDefaultValues&&!Oa(O,l)),isSubmitted:U.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Ne?{}:U.keepDirtyValues?U.keepDefaultValues&&u?po(l,u):s.dirtyFields:U.keepDefaultValues&&O?po(l,O):U.keepDirty?s.dirtyFields:{},touchedFields:U.keepTouched?s.touchedFields:{},errors:U.keepErrors?s.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},$e=(O,U)=>Ve(ls(O)?O(u):O,U),gt=(O,U={})=>{const ne=Fe(i,O),be=ne&&ne._f;if(be){const Ne=be.refs?be.refs[0]:be.ref;Ne.focus&&(Ne.focus(),U.shouldSelect&&ls(Ne.select)&&Ne.select())}},xt=O=>{s={...s,...O}},Qe={control:{register:se,unregister:te,getFieldState:T,handleSubmit:We,setError:ue,_subscribe:ee,_runSchema:D,_focusError:ke,_getWatch:A,_getDirty:K,_setValid:j,_setFieldArray:M,_setDisabledField:Q,_setErrors:R,_getFieldArray:X,_reset:Ve,_resetDefaultValues:()=>ls(t.defaultValues)&&t.defaultValues().then(O=>{$e(O,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:Me,_subjects:y,_proxyFormState:b,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(O){d=O},get _defaultValues(){return l},get _names(){return m},set _names(O){m=O},get _formState(){return s},get _options(){return t},set _options(O){t={...t,...O}}},subscribe:Z,trigger:ge,register:se,handleSubmit:We,watch:Y,setValue:z,getValues:ce,reset:$e,resetField:st,clearErrors:G,unregister:te,setError:ue,setFocus:gt,getFieldState:T};return{...Qe,formControl:Qe}}function Lw(e={}){const t=Ft.useRef(void 0),s=Ft.useRef(void 0),[i,l]=Ft.useState({isDirty:!1,isValidating:!1,isLoading:ls(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ls(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:i},e.defaultValues&&!ls(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...m}=rT(e);t.current={...m,formState:i}}const u=t.current.control;return u._options=e,PM(()=>{const d=u._subscribe({formState:u._proxyFormState,callback:()=>l({...u._formState}),reRenderRoot:!0});return l(m=>({...m,isReady:!0})),u._formState.isReady=!0,d},[u]),Ft.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),Ft.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),Ft.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),Ft.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),Ft.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),Ft.useEffect(()=>{e.values&&!Oa(e.values,s.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),s.current=e.values,l(d=>({...d}))):u._resetDefaultValues()},[u,e.values]),Ft.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),t.current.formState=FM(i,u),t.current}const Yv=(e,t,s)=>{if(e&&"reportValidity"in e){const i=Fe(s,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},gm=(e,t)=>{for(const s in t.fields){const i=t.fields[s];i&&i.ref&&"reportValidity"in i.ref?Yv(i.ref,s,e):i&&i.refs&&i.refs.forEach(l=>Yv(l,s,e))}},Xv=(e,t)=>{t.shouldUseNativeValidation&&gm(e,t);const s={};for(const i in e){const l=Fe(t.fields,i),u=Object.assign(e[i]||{},{ref:l&&l.ref});if(sT(t.names||Object.keys(e),i)){const d=Object.assign({},Fe(s,i));Vt(d,"root",u),Vt(s,i,d)}else Vt(s,i,u)}return s},sT=(e,t)=>{const s=Jv(t);return e.some(i=>Jv(i).match(`^${s}\\.\\d+`))};function Jv(e){return e.replace(/\]|\[/g,"")}function ey(e,t){try{var s=e()}catch(i){return t(i)}return s&&s.then?s.then(void 0,t):s}function aT(e,t){for(var s={};e.length;){var i=e[0],l=i.code,u=i.message,d=i.path.join(".");if(!s[d])if("unionErrors"in i){var m=i.unionErrors[0].errors[0];s[d]={message:m.message,type:m.code}}else s[d]={message:u,type:l};if("unionErrors"in i&&i.unionErrors.forEach(function(b){return b.errors.forEach(function(v){return e.push(v)})}),t){var g=s[d].types,x=g&&g[i.code];s[d]=Gm(d,t,s,l,x?[].concat(x,i.message):i.message)}e.shift()}return s}function iT(e,t){for(var s={};e.length;){var i=e[0],l=i.code,u=i.message,d=i.path.join(".");if(!s[d])if(i.code==="invalid_union"&&i.errors.length>0){var m=i.errors[0][0];s[d]={message:m.message,type:m.code}}else s[d]={message:u,type:l};if(i.code==="invalid_union"&&i.errors.forEach(function(b){return b.forEach(function(v){return e.push(v)})}),t){var g=s[d].types,x=g&&g[i.code];s[d]=Gm(d,t,s,l,x?[].concat(x,i.message):i.message)}e.shift()}return s}function Uw(e,t,s){if(s===void 0&&(s={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,l,u){try{return Promise.resolve(ey(function(){return Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(d){return u.shouldUseNativeValidation&&gm({},u),{errors:{},values:s.raw?Object.assign({},i):d}})},function(d){if((function(m){return Array.isArray(m?.issues)})(d))return{values:{},errors:Xv(aT(d.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,l,u){try{return Promise.resolve(ey(function(){return Promise.resolve((s.mode==="sync"?cC:uC)(e,i,t)).then(function(d){return u.shouldUseNativeValidation&&gm({},u),{errors:{},values:s.raw?Object.assign({},i):d}})},function(d){if((function(m){return m instanceof Vm})(d))return{values:{},errors:Xv(iT(d.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};throw new Error("Invalid input: not a Zod schema")}async function oT(e={}){const{page:t,pageSize:s,search:i,includeTotal:l,signal:u}=e,d={};typeof t=="number"&&t>0&&(d.page=t),typeof s=="number"&&s>0&&(d.page_size=s),l&&(d.include_total=!0);const m=i?.trim();m&&(d.q=m);const{data:g}=await Ie.GET("/api/v1/users",{params:{query:d},signal:u});if(!g)throw new Error("Expected user page payload.");return g}function $w(e={}){const{enabled:t=!0,search:s="",pageSize:i}=e,l=s.trim(),u=l.length>=2?l:"",d=Rm({queryKey:["users","all",{search:l,pageSize:i}],initialPageParam:1,queryFn:({pageParam:x,signal:b})=>oT(lT({page:typeof x=="number"?x:1,pageSize:i,search:u||void 0,signal:b})),getNextPageParam:x=>x.has_next?x.page+1:void 0,enabled:t,staleTime:6e4}),m=h.useCallback(x=>x.id,[]),g=Z0(d.data?.pages,m);return{...d,users:g}}function lT(e){const t=!e.page||e.page<1?1:e.page;return{...e,page:t}}const cT=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,uT=ud({name:us().min(1,"Workspace name is required.").max(100,"Keep the name under 100 characters."),slug:us().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(cT,"Use lowercase letters, numbers, and dashes."),ownerUserId:us().optional()});function dT(){return a.jsx(ql,{children:a.jsx(fT,{})})}function fT(){const e=Zt(),t=yi(),s=BN(),l=h.useMemo(()=>(t.user.permissions??[]).map(C=>C.toLowerCase()),[t.user.permissions]).includes("users.read_all"),u=$w({enabled:l,pageSize:50}),d=h.useMemo(()=>u.users,[u.users]),m=h.useMemo(()=>t.user.id?d.filter(C=>C.id!==t.user.id):d,[d,t.user.id]),{register:g,handleSubmit:x,watch:b,setValue:v,setError:y,clearErrors:k,formState:{errors:S,dirtyFields:j}}=Lw({resolver:Uw(uT),defaultValues:{name:"",slug:"",ownerUserId:t.user.id??""}}),N=b("name"),M=b("slug");h.useEffect(()=>{if(j.slug)return;const C=hT(N);C!==M&&v("slug",C,{shouldValidate:!!C})},[j.slug,N,v,M]),h.useEffect(()=>{!l&&t.user.id&&v("ownerUserId",t.user.id,{shouldDirty:!1})},[l,t.user.id,v]);const _=s.isPending,R=u.isPending&&u.users.length===0,q=_||R||!l,$=t.user.display_name?`${t.user.display_name} (you)`:`${t.user.email??"Current user"} (you)`,I=g("ownerUserId"),D=x(C=>{if(k("root"),l&&!C.ownerUserId){y("ownerUserId",{type:"manual",message:"Select a workspace owner."});return}s.mutate({name:C.name.trim(),slug:C.slug.trim(),owner_user_id:l&&C.ownerUserId||void 0},{onSuccess(L){e(qm(L.id))},onError(L){if(L instanceof Jt){const V=L.problem?.detail??L.message,K=L.problem?.errors??{};y("root",{type:"server",message:V}),K.name?.[0]&&y("name",{type:"server",message:K.name[0]}),K.slug?.[0]&&y("slug",{type:"server",message:K.slug[0]}),K.owner_user_id?.[0]&&y("ownerUserId",{type:"server",message:K.owner_user_id[0]});return}y("root",{type:"server",message:L instanceof Error?L.message:"Workspace creation failed."})}})});return a.jsx(Ew,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("header",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Create a workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Name the workspace and choose who should own it. You can adjust settings and permissions after the workspace is created."})]}),a.jsxs("form",{className:"space-y-6 rounded-2xl border border-border bg-card p-6 shadow-soft",onSubmit:D,children:[a.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[a.jsx(Mt,{label:"Workspace name",required:!0,error:S.name?.message,children:a.jsx(yt,{id:"workspaceName",placeholder:"Finance Operations",...g("name"),invalid:!!S.name,disabled:_})}),a.jsx(Mt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier",required:!0,error:S.slug?.message,children:a.jsx(yt,{id:"workspaceSlug",placeholder:"finance-ops",...g("slug"),invalid:!!S.slug,disabled:_})})]}),l?a.jsxs(Mt,{label:"Workspace owner",hint:"Owner receives workspace-level permissions immediately.",error:S.ownerUserId?.message,children:[a.jsxs("select",{id:"workspaceOwner",...I,onChange:C=>{I.onChange(C),k("ownerUserId")},disabled:q,className:"rounded-lg border border-border-strong bg-card px-3 py-2 text-sm text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground",children:[a.jsx("option",{value:t.user.id??"",children:$}),m.map(C=>a.jsx("option",{value:C.id,children:C.display_name?`${C.display_name} (${C.email})`:C.email},C.id))]}),u.hasNextPage?a.jsx("div",{className:"pt-2",children:a.jsx(Te,{type:"button",variant:"ghost",onClick:()=>u.fetchNextPage(),disabled:u.isFetchingNextPage,children:u.isFetchingNextPage?"Loading more users":"Load more users"})}):null]}):null,S.root?a.jsx(Lt,{tone:"danger",children:S.root.message}):null,l&&u.isError?a.jsx(Lt,{tone:"warning",children:"Unable to load the user list. Continue with yourself as the workspace owner or try again later."}):null,a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[a.jsx(Te,{type:"button",variant:"secondary",onClick:()=>e("/workspaces"),disabled:_,children:"Cancel"}),a.jsx(Te,{type:"submit",isLoading:_,children:_?"Creating workspace":"Create workspace"})]})]})]})})}function hT(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}const Bw=h.createContext(void 0);function mT({workspace:e,workspaces:t,children:s}){const i=h.useMemo(()=>{const l=e.permissions;return{workspace:e,workspaces:t,permissions:l,hasPermission(u){const d=u.toLowerCase();return l.includes(u)||l.includes(d)}}},[e,t]);return a.jsx(Bw.Provider,{value:i,children:s})}function _s(){const e=h.useContext(Bw);if(!e)throw new Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}const pT=[{id:"explorer",label:"Explorer",icon:a.jsx(xT,{})},{id:"search",label:"Search",icon:a.jsx(bT,{})},{id:"scm",label:"Source Control",icon:a.jsx(vT,{})},{id:"extensions",label:"Extensions",icon:a.jsx(yT,{})}];function gT({activeView:e,onSelectView:t,onOpenSettings:s,appearance:i}){const l={bg:"bg-card",border:"border-border",iconIdle:"text-muted-foreground",iconActive:"text-brand-400",hover:"hover:text-foreground hover:bg-muted focus-visible:text-foreground",indicator:"bg-brand-500"};return a.jsxs("aside",{className:re("flex h-full w-14 flex-col items-center justify-between border-r",l.bg,l.border,l.iconIdle),"aria-label":"Workbench navigation",children:[a.jsx("div",{className:"flex flex-col items-center gap-1 py-3",children:pT.map(u=>{const d=e===u.id;return a.jsxs("button",{type:"button",onClick:()=>t(u.id),className:re("relative flex h-10 w-10 items-center justify-center rounded-lg text-base transition",d?l.iconActive:re(l.iconIdle,l.hover)),"aria-label":u.label,"aria-pressed":d,children:[d?a.jsx("span",{className:re("absolute left-0 top-1/2 h-6 w-1 -translate-y-1/2 rounded",l.indicator)}):null,u.icon]},u.id)})}),a.jsx("div",{className:"flex flex-col items-center gap-3 pb-3",children:a.jsx("button",{type:"button",onClick:s,className:re("flex h-10 w-10 items-center justify-center rounded-lg text-base transition",l.iconIdle,l.hover),"aria-label":"Open settings",children:a.jsx(wT,{})})})]})}function xT(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("rect",{x:"4",y:"4",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"}),a.jsx("path",{d:"M4 8.25h12",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M8.25 4v12",stroke:"currentColor",strokeWidth:"1.2"})]})}function bT(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"9",cy:"9",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),a.jsx("path",{d:"M12.7 12.7l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function vT(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M6.5 4a1.75 1.75 0 1 1-1.5 0v12m9-8a1.75 1.75 0 1 1-1.5 0v8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M5 9.5h10",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function yT(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M6 4.5h4l4 4v6.5a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.3"}),a.jsx("path",{d:"M10 4.5v4h4",stroke:"currentColor",strokeWidth:"1.3"})]})}function wT(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M10 6.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M3 10h2m10 0h2M10 3v2m0 10v2M5.2 5.2l1.4 1.4m7 7 1.4 1.4M14.8 5.2l-1.4 1.4m-7 7-1.4 1.4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}const Jm=h.createContext(null);function fd({value:e,onValueChange:t,children:s}){const i=h.useId(),l=h.useRef([]),u=h.useRef(new Map),d=h.useCallback((v,y)=>{l.current.includes(v)||l.current.push(v),u.current.set(v,y)},[]),m=h.useCallback(v=>{l.current=l.current.filter(y=>y!==v),u.current.delete(v)},[]),g=h.useCallback(v=>{v&&u.current.get(v)?.focus()},[]),x=h.useCallback(()=>l.current.slice(),[]),b=h.useMemo(()=>({value:e,setValue:t,baseId:i,registerValue:d,unregisterValue:m,focusValue:g,getValues:x}),[e,t,i,d,m,g,x]);return a.jsx(Jm.Provider,{value:b,children:s})}function hd({children:e,...t}){return a.jsx("div",{role:"tablist",...t,children:e})}function Dl({value:e,children:t,className:s,onClick:i,onKeyDown:l,disabled:u,...d}){const m=h.useContext(Jm);if(!m)throw new Error("TabsTrigger must be used within a TabsRoot");const{registerValue:g,unregisterValue:x,focusValue:b,getValues:v}=m,y=m.value===e,k=`${m.baseId}-tab-${e}`,S=`${m.baseId}-panel-${e}`,j=h.useCallback(M=>{g(e,M)},[g,e]);h.useLayoutEffect(()=>()=>x(e),[x,e]);const N=M=>{if(l?.(M),M.defaultPrevented)return;const _=v(),R=_.indexOf(e);if(R===-1||_.length===0)return;let q=R;M.key==="ArrowRight"?(M.preventDefault(),q=(R+1)%_.length):M.key==="ArrowLeft"?(M.preventDefault(),q=(R-1+_.length)%_.length):M.key==="Home"?(M.preventDefault(),q=0):M.key==="End"&&(M.preventDefault(),q=_.length-1);const $=_[q];$&&$!==m.value&&m.setValue($),b($)};return a.jsx("button",{...d,ref:j,type:"button",role:"tab",id:k,"aria-selected":y,"aria-controls":S,tabIndex:y?0:-1,className:s,disabled:u,onKeyDown:N,onClick:M=>{i?.(M),!M.defaultPrevented&&!u&&m.setValue(e)},children:t})}function za({value:e,children:t,className:s,...i}){const l=h.useContext(Jm);if(!l)throw new Error("TabsContent must be used within a TabsRoot");const u=l.value===e,d=`${l.baseId}-panel-${e}`,m=`${l.baseId}-tab-${e}`;return a.jsx("div",{...i,role:"tabpanel",id:d,"aria-labelledby":m,className:s,hidden:!u,tabIndex:0,children:t})}function fo(e,t,s){let i=s.initialDeps??[],l,u=!0;function d(){var m,g,x;let b;s.key&&((m=s.debug)!=null&&m.call(s))&&(b=Date.now());const v=e();if(!(v.length!==i.length||v.some((S,j)=>i[j]!==S)))return l;i=v;let k;if(s.key&&((g=s.debug)!=null&&g.call(s))&&(k=Date.now()),l=t(...v),s.key&&((x=s.debug)!=null&&x.call(s))){const S=Math.round((Date.now()-b)*100)/100,j=Math.round((Date.now()-k)*100)/100,N=j/16,M=(_,R)=>{for(_=String(_);_.length<R;)_=" "+_;return _};console.info(`%c ${M(j,5)} /${M(S,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*N,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(u&&s.skipInitialOnChange)&&s.onChange(l),u=!1,l}return d.updateDeps=m=>{i=m},d}function ty(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const jT=(e,t)=>Math.abs(e-t)<1.01,ST=(e,t,s)=>{let i;return function(...l){e.clearTimeout(i),i=e.setTimeout(()=>t.apply(this,l),s)}},ny=e=>{const{offsetWidth:t,offsetHeight:s}=e;return{width:t,height:s}},kT=e=>e,NT=e=>{const t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let l=t;l<=s;l++)i.push(l);return i},CT=(e,t)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const l=d=>{const{width:m,height:g}=d;t({width:Math.round(m),height:Math.round(g)})};if(l(ny(s)),!i.ResizeObserver)return()=>{};const u=new i.ResizeObserver(d=>{const m=()=>{const g=d[0];if(g?.borderBoxSize){const x=g.borderBoxSize[0];if(x){l({width:x.inlineSize,height:x.blockSize});return}}l(ny(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(m):m()});return u.observe(s,{box:"border-box"}),()=>{u.unobserve(s)}},ry={passive:!0},sy=typeof window>"u"?!0:"onscrollend"in window,ET=(e,t)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let l=0;const u=e.options.useScrollendEvent&&sy?()=>{}:ST(i,()=>{t(l,!1)},e.options.isScrollingResetDelay),d=b=>()=>{const{horizontal:v,isRtl:y}=e.options;l=v?s.scrollLeft*(y&&-1||1):s.scrollTop,u(),t(l,b)},m=d(!0),g=d(!1);g(),s.addEventListener("scroll",m,ry);const x=e.options.useScrollendEvent&&sy;return x&&s.addEventListener("scrollend",g,ry),()=>{s.removeEventListener("scroll",m),x&&s.removeEventListener("scrollend",g)}},_T=(e,t,s)=>{if(t?.borderBoxSize){const i=t.borderBoxSize[0];if(i)return Math.round(i[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},MT=(e,{adjustments:t=0,behavior:s},i)=>{var l,u;const d=e+t;(u=(l=i.scrollElement)==null?void 0:l.scrollTo)==null||u.call(l,{[i.options.horizontal?"left":"top"]:d,behavior:s})};class TT{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const i=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(l=>{l.forEach(u=>{const d=()=>{this._measureElement(u.target,u)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()})}));return{disconnect:()=>{var l;(l=i())==null||l.disconnect(),s=null},observe:l=>{var u;return(u=i())==null?void 0:u.observe(l,{box:"border-box"})},unobserve:l=>{var u;return(u=i())==null?void 0:u.unobserve(l)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([i,l])=>{typeof l>"u"&&delete s[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:kT,rangeExtractor:NT,onChange:()=>{},measureElement:_T,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var i,l;(l=(i=this.options).onChange)==null||l.call(i,this,s)},this.maybeNotify=fo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,u)=>{this.scrollAdjustments=0,this.scrollDirection=u?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=u,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,i)=>{const l=new Map,u=new Map;for(let d=i-1;d>=0;d--){const m=s[d];if(l.has(m.lane))continue;const g=u.get(m.lane);if(g==null||m.end>g.end?u.set(m.lane,m):m.end<g.end&&l.set(m.lane,!0),l.size===this.options.lanes)break}return u.size===this.options.lanes?Array.from(u.values()).sort((d,m)=>d.end===m.end?d.index-m.index:d.end-m.end)[0]:void 0},this.getMeasurementOptions=fo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,i,l,u,d,m)=>(this.prevLanes!==void 0&&this.prevLanes!==m&&(this.lanesChangedFlag=!0),this.prevLanes=m,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:i,scrollMargin:l,getItemKey:u,enabled:d,lanes:m}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=fo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:i,scrollMargin:l,getItemKey:u,enabled:d,lanes:m},g)=>{if(!d)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const y of this.laneAssignments.keys())y>=s&&this.laneAssignments.delete(y);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(y=>{this.itemSizeCache.set(y.key,y.size)}));const x=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const b=this.measurementsCache.slice(0,x),v=new Array(m).fill(void 0);for(let y=0;y<x;y++){const k=b[y];k&&(v[k.lane]=y)}for(let y=x;y<s;y++){const k=u(y),S=this.laneAssignments.get(y);let j,N;if(S!==void 0&&this.options.lanes>1){j=S;const q=v[j],$=q!==void 0?b[q]:void 0;N=$?$.end+this.options.gap:i+l}else{const q=this.options.lanes===1?b[y-1]:this.getFurthestMeasurement(b,y);N=q?q.end+this.options.gap:i+l,j=q?q.lane:y%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(y,j)}const M=g.get(k),_=typeof M=="number"?M:this.options.estimateSize(y),R=N+_;b[y]={index:y,start:N,size:_,end:R,key:k,lane:j},v[j]=y}return this.measurementsCache=b,b},{key:!1,debug:()=>this.options.debug}),this.calculateRange=fo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,i,l,u)=>this.range=s.length>0&&i>0?DT({measurements:s,outerSize:i,scrollOffset:l,lanes:u}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=fo(()=>{let s=null,i=null;const l=this.calculateRange();return l&&(s=l.startIndex,i=l.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,i]},(s,i,l,u,d)=>u===null||d===null?[]:s({startIndex:u,endIndex:d,overscan:i,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const i=this.options.indexAttribute,l=s.getAttribute(i);return l?parseInt(l,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(s,i)=>{const l=this.indexFromElement(s),u=this.measurementsCache[l];if(!u)return;const d=u.key,m=this.elementsCache.get(d);m!==s&&(m&&this.observer.unobserve(m),this.observer.observe(s),this.elementsCache.set(d,s)),s.isConnected&&this.resizeItem(l,this.options.measureElement(s,i,this))},this.resizeItem=(s,i)=>{const l=this.measurementsCache[s];if(!l)return;const u=this.itemSizeCache.get(l.key)??l.size,d=i-u;d!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,d,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=d,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,i)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((i,l)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(l))});return}this._measureElement(s,void 0)},this.getVirtualItems=fo(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,i)=>{const l=[];for(let u=0,d=s.length;u<d;u++){const m=s[u],g=i[m];l.push(g)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const i=this.getMeasurements();if(i.length!==0)return ty(i[qw(0,i.length-1,l=>ty(i[l]).start,s)])},this.getOffsetForAlignment=(s,i,l=0)=>{const u=this.getSize(),d=this.getScrollOffset();i==="auto"&&(i=s>=d+u?"end":"start"),i==="center"?s+=(l-u)/2:i==="end"&&(s-=u);const m=this.getTotalSize()+this.options.scrollMargin-u;return Math.max(Math.min(m,s),0)},this.getOffsetForIndex=(s,i="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const l=this.measurementsCache[s];if(!l)return;const u=this.getSize(),d=this.getScrollOffset();if(i==="auto")if(l.end>=d+u-this.options.scrollPaddingEnd)i="end";else if(l.start<=d+this.options.scrollPaddingStart)i="start";else return[d,i];const m=i==="end"?l.end+this.options.scrollPaddingEnd:l.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(m,i,l.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:i="start",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:l})},this.scrollToIndex=(s,{align:i="auto",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1));let u=0;const d=10,m=x=>{if(!this.targetWindow)return;const b=this.getOffsetForIndex(s,x);if(!b){console.warn("Failed to get offset for index:",s);return}const[v,y]=b;this._scrollToOffset(v,{adjustments:void 0,behavior:l}),this.targetWindow.requestAnimationFrame(()=>{const k=this.getScrollOffset(),S=this.getOffsetForIndex(s,y);if(!S){console.warn("Failed to get offset for index:",s);return}jT(S[0],k)||g(y)})},g=x=>{this.targetWindow&&(u++,u<d?this.targetWindow.requestAnimationFrame(()=>m(x)):console.warn(`Failed to scroll to index ${s} after ${d} attempts.`))};m(i)},this.scrollBy=(s,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var s;const i=this.getMeasurements();let l;if(i.length===0)l=this.options.paddingStart;else if(this.options.lanes===1)l=((s=i[i.length-1])==null?void 0:s.end)??0;else{const u=Array(this.options.lanes).fill(null);let d=i.length-1;for(;d>=0&&u.some(m=>m===null);){const m=i[d];u[m.lane]===null&&(u[m.lane]=m.end),d--}l=Math.max(...u.filter(m=>m!==null))}return Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:i,behavior:l})=>{this.options.scrollToFn(s,{behavior:l,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const qw=(e,t,s,i)=>{for(;e<=t;){const l=(e+t)/2|0,u=s(l);if(u<i)e=l+1;else if(u>i)t=l-1;else return l}return e>0?e-1:0};function DT({measurements:e,outerSize:t,scrollOffset:s,lanes:i}){const l=e.length-1,u=g=>e[g].start;if(e.length<=i)return{startIndex:0,endIndex:l};let d=qw(0,l,u,s),m=d;if(i===1)for(;m<l&&e[m].end<s+t;)m++;else if(i>1){const g=Array(i).fill(0);for(;m<l&&g.some(b=>b<s+t);){const b=e[m];g[b.lane]=b.end,m++}const x=Array(i).fill(s+t);for(;d>=0&&x.some(b=>b>=s);){const b=e[d];x[b.lane]=b.start,d--}d=Math.max(0,d-d%i),m=Math.min(l,m+(i-1-m%i))}return{startIndex:d,endIndex:m}}const ay=typeof document<"u"?h.useLayoutEffect:h.useEffect;function AT(e){const t=h.useReducer(()=>({}),{})[1],s={...e,onChange:(l,u)=>{var d;u?zr.flushSync(t):t(),(d=e.onChange)==null||d.call(e,l,u)}},[i]=h.useState(()=>new TT(s));return i.setOptions(s),ay(()=>i._didMount(),[]),ay(()=>i._willUpdate()),i}function RT(e){return AT({observeElementRect:CT,observeElementOffset:ET,scrollToFn:MT,...e})}function iy(e){return e==="debug"?0:e==="error"?3:e==="warning"?2:e==="success"||e==="info"?1:0}function OT(e){const t=e.raw;if(t&&typeof t=="object"){const s=$T(t);if(s)return s}return UT(e.message)}function Fw(e){const t=e.raw;if(!t||typeof t!="object")return null;try{return JSON.stringify(t)}catch{return null}}function zT(e){if(e==null)return a.jsx("span",{className:"text-muted-foreground",children:"null"});let t;try{t=JSON.stringify(e,null,2)}catch{t=String(e)}return a.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed text-foreground",children:Pw(t)})}function LT(e){try{const t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{return null}return null}function UT(e){if(e.includes(`
`)){const i=e.split(/\r?\n/),[l,...u]=i;return a.jsxs("div",{className:"flex flex-col gap-[2px]",children:[a.jsx("span",{className:"break-words",children:l||" "}),u.length>0?a.jsx("pre",{className:"whitespace-pre-wrap break-words border-l border-border pl-3 text-[12px] leading-snug text-muted-foreground",children:u.join(`
`)}):null]})}const t=LT(e);if(!t)return e;const s=JSON.stringify(t,null,2);return a.jsx("pre",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-foreground",children:Pw(s)})}function Pw(e){const t=/("(?:\\.|[^"])*"(?=:)|"(?:\\.|[^"])*")|(-?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b)|\b(true|false|null)\b/g,s=[];let i=0,l,u=0;for(;(l=t.exec(e))!==null;){l.index>i&&s.push(e.slice(i,l.index));const d=l[0],m=l[1]?"text-info-300":l[2]?"text-warning-300":"text-danger-300";s.push(a.jsx("span",{className:m,children:d},`json-${u++}`)),i=t.lastIndex}return i<e.length&&s.push(e.slice(i)),s}function $T(e){const t=typeof e.event=="string"?e.event:"";if(!t)return null;const s=typeof e.level=="string"?e.level.toLowerCase():"",i=typeof e.message=="string"?e.message:"",l=e.data&&typeof e.data=="object"?e.data:{};if(t==="console.line"){const u=typeof l.message=="string"?l.message:i;return a.jsx("span",{className:"break-words",children:u||" "})}if(t==="engine.log"){const u=PT(i);return a.jsx("span",{className:"break-words",children:u.text||" "})}if(t.startsWith("build.")||t.startsWith("run.")){const u=typeof l.status=="string"?l.status:void 0,d=typeof l.reason=="string"?l.reason:void 0,m=typeof l.phase=="string"?l.phase:void 0,g=typeof l.message=="string"?l.message:void 0,x=b=>{if(!b||b<0)return"";if(b<1e3)return`${Math.round(b)} ms`;if(b<6e4)return`${(b/1e3).toFixed(1)} s`;const v=Math.floor(b/6e4),y=Math.round(b%6e4/1e3);return`${v}m ${y}s`};if(t==="build.phase.start")return a.jsx("span",{className:"break-words",children:g||(m?`Build: ${m}`:"Build phase started")});if(t==="build.start")return a.jsx("span",{className:"break-words",children:`Build started${d?` (${d})`:""}`});if(t==="build.queued")return a.jsx("span",{className:"break-words",children:`Build queued${d?` (${d})`:""}`});if(t==="build.complete")return a.jsx("span",{className:"break-words",children:`Build ${u??"completed"}`});if(t==="run.queued"){const b=typeof l.mode=="string"?l.mode:void 0;return a.jsx("span",{className:"break-words",children:`Run queued${b?` (${b})`:""}`})}if(t==="run.start"){const b=typeof l.mode=="string"?l.mode:void 0;return a.jsx("span",{className:"break-words",children:`Run started${b?` (${b})`:""}`})}if(t==="run.complete"){const b=l.execution&&typeof l.execution=="object"?l.execution:{},v=typeof b.duration_ms=="number"?b.duration_ms:void 0,y=v?`  ${x(v)}`:"";return a.jsx("span",{className:"break-words",children:`Run ${u??"completed"}${y}`})}return i.trim()?a.jsx("span",{className:"break-words",children:i}):t.startsWith("build.")?a.jsx("span",{className:"break-words",children:g||m||u||t}):a.jsx("span",{className:"break-words",children:u||t})}if(t==="engine.config.loaded"){const u=Rt(l.config_package)??Rt(l.config_package_name),d=Rt(l.entrypoint),m=Array.isArray(l.fields)?l.fields.length:void 0,g=Qr(l.settings),x=Rt(g?.log_format),b=typeof g?.log_level=="number"?g.log_level:void 0,v=u?di(u):void 0,y=["Config loaded",d?`entry=${d}`:null,typeof m=="number"?`fields=${m}`:null,x?`log=${x}${typeof b=="number"?`(${b})`:""}`:null,v&&v!=="src"?v:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:y.join("  ")})}if(t==="engine.settings.effective"){const u=Qr(l.settings);if(!u)return a.jsx("span",{className:"break-words",children:"Settings (effective)"});const d=Rt(u.log_format),m=typeof u.log_level=="number"?u.log_level:void 0,g=typeof u.max_empty_rows_run=="number"?u.max_empty_rows_run:void 0,x=typeof u.max_empty_cols_run=="number"?u.max_empty_cols_run:void 0,b=Rt(u.unmapped_prefix),v=["Settings",d?`log=${d}${typeof m=="number"?`(${m})`:""}`:null,b?`unmapped=${b}`:null,typeof g=="number"?`maxEmptyRows=${g}`:null,typeof x=="number"?`maxEmptyCols=${x}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:v.join("  ")})}if(t==="engine.hook.start"||t==="engine.hook.end"){const u=Rt(l.hook_name)??Rt(l.hook),d=t.endsWith(".start")?"start":"end";return a.jsx("span",{className:"break-words",children:u?`Hook ${u}  ${d}`:`Hook  ${d}`})}if(t==="engine.run.started"){const u=Rt(l.input_file),d=Rt(l.config_package),m=["Run started",u?di(u):null,d?`config=${di(d)}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:m.join("  ")})}if(t==="engine.run.planned"){const u=Rt(l.output_file),d=Rt(l.logs_file),m=["Run planned",u?`output=${di(u)}`:null,d?`logs=${di(d)}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:m.join("  ")})}if(t==="engine.run.completed"){const u=Qr(l.execution)??{},d=Qr(l.evaluation)??{},m=Qr(l.counts)??{},g=Rt(u.status),x=Rt(d.outcome),b=typeof u.duration_ms=="number"?u.duration_ms:void 0,v=typeof m.tables=="number"?m.tables:void 0,y=["Run completed",g||null,x?`outcome=${x}`:null,typeof v=="number"?`tables=${v}`:null,typeof b=="number"?`${Math.round(b)}ms`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:y.join("  ")})}if(t==="engine.workbook.started"){const u=typeof l.sheet_count=="number"?l.sheet_count:void 0;return a.jsx("span",{className:"break-words",children:`Workbook start${typeof u=="number"?`  sheets=${u}`:""}`})}if(t==="engine.sheet.started"){const u=Rt(l.sheet_name),d=typeof l.sheet_index=="number"?l.sheet_index+1:void 0,m=["Sheet start",u||null,typeof d=="number"?`#${d}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:m.join("  ")})}if(t==="engine.sheet.tables_detected"){const u=Rt(l.sheet_name),d=typeof l.table_count=="number"?l.table_count:void 0,m=typeof l.row_count=="number"?l.row_count:void 0,g=[u||"Sheet",typeof d=="number"?`tables=${d}`:null,typeof m=="number"?`rows=${m}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:g.join("  ")})}if(t==="engine.table.detected"){const u=Rt(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,m=typeof l.row_count=="number"?l.row_count:void 0,g=typeof l.column_count=="number"?l.column_count:void 0,x=[u||null,typeof d=="number"?`Table ${d}`:"Table","detected",typeof m=="number"?`rows=${m}`:null,typeof g=="number"?`cols=${g}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:x.join("  ")})}if(t==="engine.table.extracted"){const u=Rt(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,m=typeof l.row_count=="number"?l.row_count:void 0,g=typeof l.col_count=="number"?l.col_count:void 0,x=[u||null,typeof d=="number"?`Table ${d}`:"Table","extracted",typeof m=="number"?`rows=${m}`:null,typeof g=="number"?`cols=${g}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:x.join("  ")})}if(t==="engine.table.mapped"){const u=Rt(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,m=typeof l.mapped_fields=="number"?l.mapped_fields:void 0,g=typeof l.total_fields=="number"?l.total_fields:void 0,x=typeof l.passthrough_fields=="number"?l.passthrough_fields:void 0,b=[u||null,typeof d=="number"?`Table ${d}`:"Table","mapped",typeof m=="number"&&typeof g=="number"?`mapped=${m}/${g}`:null,typeof x=="number"?`passthrough=${x}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:b.join("  ")})}if(t==="engine.table.mapping_patched"){const u=Rt(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,m=[u||null,typeof d=="number"?`Table ${d}`:"Table","mapping patched"].filter(Boolean);return a.jsx("span",{className:"break-words",children:m.join("  ")})}if(t==="engine.table.normalized"){const u=Rt(l.sheet_name),d=typeof l.table_index=="number"?l.table_index+1:void 0,m=typeof l.row_count=="number"?l.row_count:void 0,g=typeof l.issue_count=="number"?l.issue_count:void 0,x=Qr(l.issues_by_severity),b=x?qT(x,2):null,v=[u||null,typeof d=="number"?`Table ${d}`:"Table","normalized",typeof m=="number"?`rows=${m}`:null,typeof g=="number"?`issues=${g}`:null,b||null].filter(Boolean);return a.jsx("span",{className:"break-words",children:v.join("  ")})}if(t==="engine.table.written"){const u=Rt(l.sheet_name),d=typeof l.table_index=="number"?l.table_index:void 0,m=Rt(l.output_range),g=FT(i),x=[u||null,typeof d=="number"?`Table ${d+1}`:null,"written",m||null,g?`mapped=${g.mapped} unmapped=${g.unmapped}`:null].filter(Boolean).join("  ");return a.jsx("span",{className:"break-words",children:x||"Table written"})}if(t==="engine.validation.result"){const u=typeof l.validator=="string"?l.validator:void 0,d=typeof l.field=="string"?l.field:void 0,m=typeof l.issues_found=="number"?l.issues_found:void 0,g=typeof l.column_index=="number"?l.column_index:void 0,x=Array.isArray(l.results_sample)?l.results_sample:[],b=typeof m=="number"&&m>0&&x.length>0?`sample=${oy(JSON.stringify(x[0]),80)}`:null,v=["Validate",d??null,typeof g=="number"?`Col ${xu(g)}`:null,u?`via ${u}`:null,typeof m=="number"?`issues=${m}`:null,b].filter(Boolean);return a.jsx("span",{className:"break-words",children:v.join("  ")})}if(t==="engine.validation.summary"){const u=typeof l.issues_total=="number"?l.issues_total:void 0;return a.jsx("span",{className:"break-words",children:`Validation summary${typeof u=="number"?`  issues=${u}`:""}`})}if(t==="engine.transform.result"){const u=typeof l.transform=="string"?l.transform:void 0,d=typeof l.field=="string"?l.field:void 0,m=typeof l.input_len=="number"?l.input_len:void 0,g=typeof l.output_len=="number"?l.output_len:void 0,x=typeof l.row_count=="number"?l.row_count:void 0,b=[u?`Transform ${u}`:"Transform",d??null,typeof x=="number"?`rows=${x}`:null,typeof m=="number"&&typeof g=="number"?`${m}${g}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:b.join("  ")})}if(t==="engine.transform.derived_merge"){const u=Rt(l.field),d=Rt(l.mode),m=["Derived merge",u??null,d?`mode=${d}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:m.join("  ")})}if(t==="engine.column_detector.candidate"){const u=typeof l.column_index=="number"?l.column_index:void 0,d=typeof l.header=="string"?l.header:void 0,m=typeof l.best_field=="string"?l.best_field:void 0,g=typeof l.best_score=="number"?l.best_score:void 0,x=Qr(l.scores),b=x?xl(x,3):null,v=Qr(l.contributions),y=v?xl(v,2):null,k=[typeof u=="number"?`Col ${xu(u)}`:null,d?`"${oy(d,32)}"`:null,m?`suggested=${m}`:null,typeof g=="number"?`(${g.toFixed(3)})`:null,b?`why: ${b}`:null,y?`signals: ${y}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:k.join("  ")})}if(t==="engine.column_detector.summary"){const u=Array.isArray(l.mapped)?l.mapped:[],d=typeof l.total_columns=="number"?l.total_columns:void 0,m=Array.isArray(l.unmapped_indices)?l.unmapped_indices.length:void 0,g=["Columns",typeof d=="number"?`total=${d}`:null,`mapped=${u.length}`,typeof m=="number"?`unmapped=${m}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:g.join("  ")})}if(t==="engine.row_detector.summary"){const u=Rt(l.sheet_name),d=typeof l.header_row_index=="number"?l.header_row_index+1:void 0,m=typeof l.header_score=="number"?l.header_score:void 0,g=typeof l.data_start_index=="number"?l.data_start_index+1:void 0,x=typeof l.data_end_index=="number"?l.data_end_index+1:void 0,b=[u?`${u}`:"Rows",typeof d=="number"?`headerRow=${d}`:null,typeof m=="number"?`score=${m.toFixed(3)}`:null,typeof g=="number"&&typeof x=="number"?`dataRows=${g}..${x}`:null].filter(Boolean);return a.jsx("span",{className:"break-words",children:b.join("  ")})}if(t==="engine.detector.column_result"||t==="engine.detector.row_result"){const u=typeof l.sheet_name=="string"?l.sheet_name:void 0,d=typeof l.column_index=="number"?l.column_index:void 0,m=typeof l.row_index=="number"?l.row_index:void 0,g=l.detector&&typeof l.detector=="object"?l.detector:{},x=typeof g.name=="string"?g.name:void 0,b=typeof g.duration_ms=="number"?g.duration_ms:void 0,v=g.scores&&typeof g.scores=="object"?g.scores:null,y=v?xl(v,2):null;return a.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Col ${xu(d)}`:null,typeof m=="number"?`Row ${m+1}`:null,x?`ran ${x}`:"ran detector",typeof b=="number"?BT(b):null,y?`scores: ${y}`:null].filter(Boolean).join("  ")})}if(t==="engine.row_classification"){const u=Rt(l.sheet_name),d=typeof l.row_index=="number"?l.row_index+1:void 0,m=Qr(l.scores),g=m?xl(m,2):null,x=Qr(l.classification),b=Rt(x?.row_kind),v=typeof x?.score=="number"?x.score:void 0,y=Array.isArray(x?.considered_row_kinds)?x?.considered_row_kinds.length:void 0;return a.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Row ${d}`:"Row",b?`label=${b}`:null,typeof v=="number"?`(${v.toFixed(3)})`:null,typeof y=="number"?`considered=${y}`:null,g?`why: ${g}`:null].filter(Boolean).join("  ")})}if(t==="engine.column_classification"){const u=Rt(l.sheet_name),d=typeof l.column_index=="number"?l.column_index:void 0,m=Qr(l.scores),g=m?xl(m,2):null,x=Qr(l.classification),b=Rt(x?.field),v=typeof x?.score=="number"?x.score:void 0,y=Array.isArray(x?.considered_fields)?x?.considered_fields.length:void 0;return a.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Col ${xu(d)}`:"Col",b?`label=${b}`:null,typeof v=="number"?`(${v.toFixed(3)})`:null,typeof y=="number"?`considered=${y}`:null,g?`why: ${g}`:null].filter(Boolean).join("  ")})}return i&&i!==t?a.jsx("span",{className:"break-words",children:i}):Object.keys(l).length?s==="debug"&&t.startsWith("engine.")?a.jsx("span",{className:"break-words",children:t}):a.jsx("span",{className:"break-words",children:t}):null}function Rt(e){return typeof e=="string"&&e.trim().length?e:null}function Qr(e){return!e||typeof e!="object"?null:e}function di(e){const t=e.trim();if(!t)return"";const s=t.split(/[\\/]/).filter(Boolean);return s[s.length-1]??t}function oy(e,t){return e.length<=t?e:e.slice(0,Math.max(0,t-1))+""}function xu(e){let t=Math.floor(e);if(!Number.isFinite(t)||t<0)return String(e);let s="";for(;t>=0;)s=String.fromCharCode(t%26+65)+s,t=Math.floor(t/26)-1;return s}function BT(e){return!Number.isFinite(e)||e<0?`${e}ms`:e<1?`${e.toFixed(3)}ms`:e<10?`${e.toFixed(2)}ms`:e<100?`${e.toFixed(1)}ms`:e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`}function xl(e,t){const s=[];for(const[i,l]of Object.entries(e))typeof l=="number"&&Number.isFinite(l)&&s.push([i,l]);return s.length?(s.sort((i,l)=>l[1]-i[1]),s.slice(0,Math.max(1,t)).map(([i,l])=>`${i}=${l.toFixed(3)}`).join(" ")):null}function qT(e,t){const s=[];for(const[i,l]of Object.entries(e))typeof l=="number"&&Number.isFinite(l)&&s.push([i,l]);return s.length?(s.sort((i,l)=>l[1]-i[1]),s.slice(0,Math.max(1,t)).map(([i,l])=>`${i}=${Math.round(l)}`).join(" ")):null}function FT(e){const t=e.match(/Rendered table with\s+(\d+)\s+\w+\s+columns?\s+and\s+(\d+)\s+unmapped/i);if(!t)return null;const s=Number(t[1]),i=Number(t[2]);return!Number.isFinite(s)||!Number.isFinite(i)?null:{mapped:s,unmapped:i}}function PT(e){const t=(e||"").trim();if(!t)return{text:""};const s="Config hook:",i=t.startsWith(s)?t.slice(s.length).trim():t,l=i.match(/^workbook start\s*\((.+)\)\s*$/i);if(l){const b=l[1];return{text:`Workbook start  ${di(b)}`,title:b}}const u=i.match(/^workbook before save\s*\((.+)\)\s*$/i);if(u){const b=u[1];return{text:`Workbook save  ${di(b)}`,title:b}}const d=i.match(/^sheet start\s*\((.+)\)\s*$/i);if(d)return{text:`Sheet start  ${d[1]}`};const m=i.match(/^table detected\s*\((.+)\)\s*$/i);if(m)return{text:`Table detected  ${m[1].replace(/\s*,\s*/g,"  ")}`};const g=i.match(/^table mapped\s*\((.+)\)\s*$/i);if(g){const b=g[1],v=b.match(/fields=\[(.*)\]/i);return v?{text:`Table mapped  fields=${v[1].split(",").map(k=>k.trim()).filter(Boolean).length}`,title:b}:{text:`Table mapped  ${b}`}}const x=i.match(/^table written\s*\((.+)\)\s*$/i);return x?{text:`Table written  ${x[1].replace(/\s*,\s*/g,"  ")}`}:{text:t}}const ly="ade.ui.workbench.console.levelFilter.v1";function IT({console:e,latestRun:t,onClearConsole:s,runStatus:i}){const[l,u]=h.useState(()=>{const H={origin:"all",level:"info"};if(typeof window>"u")return H;try{const ae=window.localStorage.getItem(ly);if(ae==="all"||ae==="debug"||ae==="info"||ae==="warning"||ae==="error"||ae==="success")return{...H,level:ae}}catch{}return H}),[d,m]=h.useState(!0),[g,x]=h.useState(!1),[b,v]=h.useState(!1),[y,k]=h.useState("parsed"),[S,j]=h.useState(null),[N,M]=h.useState(!1),_=h.useRef(null),R=h.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot,e.getSnapshot),q=R.length,$=h.useMemo(()=>{const H=iy(l.level),ae=[];for(let ge=0;ge<R.length;ge+=1){const ce=e.getLine(ge);if(!ce)continue;const T=l.origin==="all"||(ce.origin??"run")===l.origin,G=iy(ce.level),ue=l.level==="all"||G>=H;T&&ue&&ae.push(ge)}return ae},[e,R,l]),I=$.length>0,D=q>0,C=i&&i!=="idle"?i:null,L=typeof navigator<"u"&&typeof navigator.clipboard?.writeText=="function",V=RT({count:$.length,getScrollElement:()=>_.current,estimateSize:()=>22,overscan:16});h.useEffect(()=>{d&&$.length!==0&&V.scrollToIndex($.length-1,{align:"end"})},[d,$.length,R,V]),h.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(ly,l.level)}catch{}},[l.level]);const K=H=>{const ae=H.currentTarget,ce=ae.scrollHeight-ae.scrollTop-ae.clientHeight<16;!ce&&d?m(!1):ce&&!d&&m(!0)},A=()=>{m(!0),V.scrollToIndex($.length-1,{align:"end"})},X=h.useCallback(async H=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(H),!0}catch{}if(typeof document>"u")return!1;try{const ae=document.createElement("textarea");ae.value=H,ae.setAttribute("readonly","true"),ae.style.position="fixed",ae.style.left="-9999px",document.body.appendChild(ae),ae.select();const ge=document.execCommand("copy");return document.body.removeChild(ae),ge}catch{return!1}},[]),fe=async()=>{if(!I)return;const H=[];for(const ge of $){const ce=e.getLine(ge);ce&&H.push(YT(ce,y))}const ae=await X(H.join(`
`));x(ae),ae&&window.setTimeout(()=>x(!1),1500)},Se=h.useCallback(H=>{!H.raw||typeof H.raw!="object"||(j(H),M(!0))},[]),z=()=>{M(!1)};return a.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-md border border-terminal-border bg-terminal font-mono text-[13px] leading-relaxed text-terminal-foreground shadow-[0_8px_24px_rgb(var(--sys-color-shadow)/0.25)]",children:[a.jsxs("div",{className:"flex flex-col border-b border-terminal-border bg-gradient-to-r from-terminal/95 via-terminal/80 to-terminal/95",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-4 py-2",children:[a.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase tracking-[0.22em] text-terminal-muted",children:[a.jsx("span",{className:"font-semibold tracking-[0.3em] text-terminal-foreground",children:"ADE"}),a.jsx("span",{className:"text-terminal-muted",children:"Terminal"}),C?a.jsx("span",{className:"rounded border border-terminal-border bg-terminal/70 px-2 py-1 text-[10px] font-semibold tracking-[0.2em] text-terminal-foreground/80",children:C}):null]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-terminal-muted",children:[a.jsxs("label",{className:"flex items-center gap-1 text-terminal-muted",title:"Filter logs by scope",children:["Origin",a.jsxs("select",{value:l.origin,onChange:H=>u(ae=>({...ae,origin:H.target.value})),className:"rounded border border-terminal-border bg-terminal/80 px-2 py-1 text-[11px] text-terminal-foreground shadow-sm focus:border-ring focus:outline-none",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"run",children:"Run"}),a.jsx("option",{value:"build",children:"Build"})]})]}),a.jsxs("label",{className:"flex items-center gap-1 text-terminal-muted",title:"Filter by severity",children:["Level",a.jsxs("select",{value:l.level,onChange:H=>u(ae=>({...ae,level:H.target.value})),className:"rounded border border-terminal-border bg-terminal/80 px-2 py-1 text-[11px] text-terminal-foreground shadow-sm focus:border-ring focus:outline-none",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"debug",children:"Debug"}),a.jsx("option",{value:"info",children:"Info"}),a.jsx("option",{value:"warning",children:"Warning"}),a.jsx("option",{value:"error",children:"Error"}),a.jsx("option",{value:"success",children:"Success"})]})]}),a.jsx("button",{type:"button",onClick:()=>d?m(!1):A(),className:re("rounded px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",d?"border border-success-500/60 bg-success-500/10 text-success-500":"border border-terminal-border bg-transparent text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),title:"Auto-scroll to newest logs",children:d?"Following":"Follow"}),a.jsxs("div",{className:"flex items-center gap-2",title:"Toggle between parsed view and raw NDJSON",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-terminal-muted",children:"View"}),a.jsxs("div",{role:"radiogroup","aria-label":"Console view mode",className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",role:"radio","aria-checked":y==="parsed",onClick:()=>k("parsed"),className:re("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition focus:outline-none focus:ring-1 focus:ring-ring",y==="parsed"?"border-success-500/70 bg-success-500/10 text-success-500":"border-terminal-border text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),children:"Parsed"}),a.jsx("button",{type:"button",role:"radio","aria-checked":y==="ndjson",onClick:()=>k("ndjson"),className:re("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition focus:outline-none focus:ring-1 focus:ring-ring",y==="ndjson"?"border-success-500/70 bg-success-500/10 text-success-500":"border-terminal-border text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),children:"NDJSON"})]})]}),a.jsx("button",{type:"button",onClick:fe,className:re("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",g?"border border-success-500/60 bg-success-500/10 text-success-500":"border border-terminal-border bg-transparent text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground"),disabled:!I,title:L?"Copy visible console output":"Copy may be blocked by browser permissions",children:g?"Copied":"Copy"}),a.jsx("button",{type:"button",onClick:()=>s?.(),className:"rounded border border-terminal-border bg-terminal/70 px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] text-terminal-muted transition hover:border-terminal-border/80 hover:text-terminal-foreground",title:"Clear console output",children:"Clear"})]})]}),t?a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-terminal-border bg-terminal/80 px-4 py-1.5 text-[11px] text-terminal-muted",children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[a.jsx(HT,{status:t.status}),a.jsxs("span",{className:"truncate",title:t.runId,children:["Run ",t.runId]}),a.jsxs("span",{className:"truncate text-terminal-muted",children:[t.documentName??"Document not recorded",uy(t.sheetNames)?`  ${uy(t.sheetNames)}`:""]}),t.durationMs!=null?a.jsxs("span",{className:"text-terminal-muted",children:[" ",XT(t.durationMs)]}):null]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-terminal-muted",children:"Downloads"}),a.jsx(Fh,{href:t.outputUrl,label:t.outputFilename?`Output (${t.outputFilename})`:"Output",disabledLabel:"Output (not ready)",disabledReason:"Output is not available for this run."}),a.jsx(Fh,{href:t.logsUrl,label:"Events (NDJSON)",disabledLabel:"Events",disabledReason:"Events log is not available."}),a.jsx(Fh,{href:t.inputUrl,label:"Input",disabledLabel:"Input",disabledReason:"Input file download is not available."})]})]}):null]}),a.jsx("div",{ref:_,onScroll:K,className:"flex-1 overflow-auto bg-terminal",children:I?a.jsx("div",{style:{height:V.getTotalSize(),position:"relative"},children:V.getVirtualItems().map(H=>{const ae=$[H.index],ge=typeof ae=="number"?e.getLine(ae):void 0;if(!ge)return null;const ce=ge.id??`${ge.timestamp??"tbd"}-${ge.origin??"run"}-${ae}`,T=!!(ge.raw&&typeof ge.raw=="object"),G=y==="ndjson"?a.jsx("span",{className:"whitespace-pre-wrap break-words",children:Fw(ge)??ge.message}):OT(ge);return a.jsx("div",{"data-index":H.index,ref:V.measureElement,className:"group flex items-start gap-3 border-b border-terminal-border/60 px-3 py-[2px] transition hover:bg-terminal/70 last:border-b-0",style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${H.start}px)`},children:a.jsxs("div",{className:"flex min-w-0 flex-1 items-baseline gap-2",children:[QT(ge.timestamp),a.jsx("span",{className:"shrink-0 w-12 text-right font-mono text-[11px] leading-snug text-terminal-muted/70",children:xm(ge.origin)}),a.jsx("span",{className:re("shrink-0 w-14 text-right font-mono text-[11px] leading-snug",GT(ge.level)),children:KT(ge.level)}),a.jsx("div",{className:re("min-w-0 whitespace-pre-wrap break-words text-[13px] leading-snug",VT(ge.level)),children:G}),T?a.jsx("button",{type:"button",onClick:()=>Se(ge),className:"ml-2 shrink-0 rounded border border-terminal-border bg-terminal/70 px-2 py-[2px] text-[10px] font-semibold uppercase tracking-[0.12em] text-terminal-muted opacity-0 transition hover:border-terminal-border/80 hover:text-terminal-foreground group-hover:opacity-100",title:"Inspect pretty JSON",children:"JSON"}):null]})},ce)})}):D?a.jsx(cy,{title:"No console output matches these filters.",description:"Adjust origin or level filters to see more."}):a.jsx(cy,{title:"Waiting for ADE output",description:"Run validation or a test to stream logs into this terminal."})}),N&&S?.raw&&typeof S.raw=="object"?a.jsxs("div",{className:"border-t border-terminal-border bg-terminal",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 text-[11px] text-terminal-muted",children:[a.jsxs("div",{className:"min-w-0 truncate",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-terminal-muted",children:"Inspector"}),S.timestamp?a.jsxs("span",{className:"ml-2 text-terminal-muted",children:["[",ep(S.timestamp),"]"]}):null,a.jsx("span",{className:"ml-2 text-terminal-muted",children:xm(S.origin)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:async()=>{const H=S.raw,ae=JSON.stringify(H,null,2),ge=await X(ae);v(ge),ge&&window.setTimeout(()=>v(!1),1500)},className:"rounded border border-terminal-border bg-terminal/70 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground",title:"Copy pretty JSON",children:b?"Copied":"Copy JSON"}),a.jsx("button",{type:"button",onClick:z,className:"rounded border border-terminal-border bg-terminal/70 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground",title:"Close inspector",children:"Close"})]})]}),a.jsx("div",{className:"max-h-[260px] overflow-auto bg-terminal/80 px-3 pb-3",children:zT(S.raw)})]}):null]})}function cy({title:e,description:t}){return a.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-terminal-muted",children:[a.jsx("p",{className:"tracking-wide text-terminal-muted",children:e}),a.jsx("p",{className:"text-[12px] leading-relaxed text-terminal-muted",children:t})]})}function HT({status:e}){const t=WT(e),s=e==="succeeded"?"bg-success-500":e==="running"||e==="queued"?"bg-warning-400":t?"bg-terminal-muted":"bg-danger-500";return a.jsx("span",{className:re("inline-block h-2.5 w-2.5 rounded-full",s),"aria-hidden":!0})}function VT(e){switch(e){case"warning":return"text-warning-500";case"error":return"text-danger-500";case"success":return"text-success-500";default:return"text-terminal-foreground"}}function ZT(e){switch(e){case"warning":return"WARN";case"error":return"ERROR";case"success":return"DONE";default:return"INFO"}}function WT(e){return e==="cancelled"}function xm(e){return e==="build"?"[build]":"[run]"}function QT(e){const t=ep(e);return t?a.jsxs("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-terminal-muted/80",children:["[",t,"]"]}):a.jsx("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-terminal-muted/70","aria-hidden":!0,children:""})}function KT(e){switch(e){case"warning":return" warn";case"error":return" error";case"success":return" done";default:return" info"}}function GT(e){switch(e){case"warning":return"text-warning-500";case"error":return"text-danger-500";case"success":return"text-success-500";default:return"text-terminal-muted/70"}}function ep(e){if(!e)return"";const t=new Date(e);if(!Number.isNaN(t.getTime()))return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});const s=e.trim();return s.length>0?s:""}function YT(e,t){const s=ep(e.timestamp),i=xm(e.origin),l=ZT(e.level).toLowerCase(),u=t==="ndjson"?Fw(e)??e.message??"":e.message??"";return`${s?`[${s}] `:""}${i} ${l} ${u}`.trim()}function uy(e){return e?e.length===0?"All worksheets":e.join(", "):null}function XT(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const t=Math.floor(e/6e4),s=Math.round(e%6e4/1e3);return`${t}m ${s}s`}function Fh({href:e,label:t,disabledLabel:s,disabledReason:i}){const l=typeof e=="string"&&e.trim().length>0,u="inline-flex items-center gap-1 rounded border px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] transition",d="border-terminal-border bg-terminal/70 text-terminal-muted hover:border-terminal-border/80 hover:text-terminal-foreground",m="border-terminal-border bg-terminal/60 text-terminal-muted/60 cursor-not-allowed";return l?a.jsxs("a",{className:re(u,d),href:e,title:t,children:[a.jsx(JT,{}),a.jsx("span",{className:"truncate",children:t})]}):a.jsx("span",{className:re(u,m),title:i,children:s})}function JT(){return a.jsxs("svg",{viewBox:"0 0 20 20",className:"h-3.5 w-3.5 text-terminal-muted",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M10 3v8m0 0 3-3m-3 3-3-3",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M4 13.5v2A1.5 1.5 0 0 0 5.5 17h9A1.5 1.5 0 0 0 16 15.5v-2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function eD({validation:e}){const t=nD(e),s=rD(e);return a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:t}),e.lastRunAt?a.jsxs("span",{children:["Last run ",sD(e.lastRunAt)]}):null]}),e.messages.length>0?a.jsx("ul",{className:"space-y-1.5",children:e.messages.map((i,l)=>a.jsxs("li",{className:tD(i.level),children:[i.path?a.jsx("span",{className:"block text-[11px] font-medium uppercase tracking-wide text-muted-foreground",children:i.path}):null,a.jsx("span",{className:"text-[13px]",children:i.message})]},`${i.level}-${i.path??l}-${l}`))}):a.jsx("p",{className:"text-xs leading-relaxed text-muted-foreground",children:s})]})}function tD(e){switch(e){case"error":return"text-danger-600";case"warning":return"text-warning-600";default:return"text-muted-foreground"}}function nD(e){switch(e.status){case"running":return"Running validation...";case"success":{if(e.messages.length===0)return"Validation completed with no issues.";const t=e.messages.length;return`Validation completed with ${t} ${t===1?"issue":"issues"}.`}case"error":return e.error??"Validation failed.";default:return"No validation run yet."}}function rD(e){return e.status==="running"?"Validation in progress...":e.status==="success"?"No validation issues detected.":e.status==="error"?e.error??"Validation failed.":"Trigger validation from the workbench header to see ADE parsing results and manifest issues."}function sD(e){const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function aD({height:e,console:t,validation:s,activePane:i,onPaneChange:l,latestRun:u,onClearConsole:d,runStatus:m,onToggleCollapse:g,appearance:x="light"}){const b=s.messages.length>0,v=x==="dark"?{surface:"border-border bg-card text-foreground",header:"border-border bg-card",hideButton:"border-border-strong bg-popover text-foreground hover:border-border-strong hover:bg-muted"}:{surface:"border-border bg-muted text-foreground",header:"border-border bg-muted",hideButton:"border-border-strong bg-card text-foreground hover:border-border-strong hover:bg-muted"};return a.jsx("section",{className:re("flex min-h-0 flex-col overflow-hidden border-t",v.surface),style:{height:e},children:a.jsxs(fd,{value:i,onValueChange:y=>l(y),children:[a.jsxs("div",{className:re("flex flex-none items-center justify-between border-b px-3 py-1.5",v.header),onDoubleClick:g,title:g?"Double-click to hide console":void 0,children:[a.jsxs(hd,{className:"flex items-center gap-3 text-[11px] font-medium",children:[a.jsx(Dl,{value:"terminal",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:"Terminal"}),a.jsxs(Dl,{value:"problems",className:"flex items-center gap-1 rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Problems",b?a.jsx("span",{className:"inline-flex h-4 min-w-[1.25rem] items-center justify-center rounded-full bg-danger-600 px-1 text-[10px] font-semibold text-on-danger",children:s.messages.length}):null]})]}),g?a.jsx("button",{type:"button",onClick:g,className:re("rounded px-2 py-1 text-[11px] font-semibold uppercase tracking-wide shadow-sm transition",v.hideButton),title:"Hide console",children:"Hide"}):null]}),a.jsx(za,{value:"terminal",className:"flex min-h-0 flex-1 flex-col",children:a.jsx(IT,{console:t,latestRun:u,onClearConsole:d,runStatus:m})}),a.jsx(za,{value:"problems",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:a.jsx(eD,{validation:s})})]})})}function iD({containerRef:e,tabs:t,activeTabId:s,onCloseTab:i,onSelectRecentTab:l,onSelectTab:u}){return h.useEffect(()=>{if(!t.length)return;const d=g=>{const x=e.current;if(!x)return!1;const b=g.target;if(b instanceof Node&&x.contains(b))return!0;const v=document.activeElement;return!!(v&&x.contains(v))},m=g=>{if(!(g.ctrlKey||g.metaKey)||!d(g))return;if(g.key.toLowerCase()==="w"){if(!s)return;g.preventDefault(),i(s);return}if(g.key==="Tab"){if(t.length<2)return;g.preventDefault(),l(g.shiftKey?"backward":"forward");return}const x=b=>{if(t.length<2)return;const v=t.findIndex(j=>j.id===s),k=((v>=0?v:0)+b+t.length)%t.length,S=t[k];S&&u(S.id)};if(g.key==="PageUp"){g.preventDefault(),x(-1);return}g.key==="PageDown"&&(g.preventDefault(),x(1))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[t,s,i,l,u,e]),null}const oD=h.lazy(()=>_0(()=>import("./MonacoCodeEditor-77K6a8Vd.js"),[])),lD=h.forwardRef(function(t,s){const{className:i,...l}=t;return a.jsx(h.Suspense,{fallback:a.jsx("div",{className:re("relative h-full w-full",i),children:a.jsx("div",{className:"flex h-full items-center justify-center text-xs text-muted-foreground",children:"Loading editor"})}),children:a.jsx(oD,{...l,ref:s,className:i})})});function cD({tabs:e,activeTabId:t,editorTheme:s,onContentChange:i,onSaveTab:l,canSaveFiles:u=!1,readOnly:d=!1,onRetryTabLoad:m,onSelectTab:g,isTabDragging:x=!1}){return h.useMemo(()=>e.find(v=>v.id===t)??null,[e,t])?a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1",children:e.map(v=>a.jsx(za,{value:v.id,className:"flex min-h-0 min-w-0 flex-1",children:v.status==="loading"?a.jsxs("div",{className:"flex flex-1 items-center justify-center text-sm text-muted-foreground",children:["Loading ",v.name,""]}):v.status==="error"?a.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:v.error??"Unable to load the file."}),a.jsx("button",{type:"button",className:"rounded bg-brand-600 px-3 py-1 text-xs font-medium text-on-brand hover:bg-brand-500",onClick:()=>m?m(v.id):g(v.id),children:"Retry loading"})]}):a.jsx("div",{className:re("flex min-h-0 min-w-0 flex-1",x&&"pointer-events-none select-none"),children:a.jsx(lD,{value:v.content,language:v.language??"plaintext",path:v.id,theme:s,readOnly:d,onChange:y=>i(v.id,y??""),onSaveShortcut:()=>{u&&l?.(v.id)}})})},v.id))}):a.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-muted-foreground",children:"Select a file from the explorer to begin editing."})}function uD(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return h.useMemo(()=>i=>{t.forEach(l=>l(i))},t)}const md=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function So(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function tp(e){return"nodeType"in e}function xr(e){var t,s;return e?So(e)?e:tp(e)&&(t=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function np(e){const{Document:t}=xr(e);return e instanceof t}function Hl(e){return So(e)?!1:e instanceof xr(e).HTMLElement}function Iw(e){return e instanceof xr(e).SVGElement}function ko(e){return e?So(e)?e.document:tp(e)?np(e)?e:Hl(e)||Iw(e)?e.ownerDocument:document:document:document}const Cs=md?h.useLayoutEffect:h.useEffect;function rp(e){const t=h.useRef(e);return Cs(()=>{t.current=e}),h.useCallback(function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return t.current==null?void 0:t.current(...i)},[])}function dD(){const e=h.useRef(null),t=h.useCallback((i,l)=>{e.current=setInterval(i,l)},[]),s=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,s]}function Al(e,t){t===void 0&&(t=[e]);const s=h.useRef(e);return Cs(()=>{s.current!==e&&(s.current=e)},t),s}function Vl(e,t){const s=h.useRef();return h.useMemo(()=>{const i=e(s.current);return s.current=i,i},[...t])}function Fu(e){const t=rp(e),s=h.useRef(null),i=h.useCallback(l=>{l!==s.current&&t?.(l,s.current),s.current=l},[]);return[s,i]}function bm(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let Ph={};function Zl(e,t){return h.useMemo(()=>{if(t)return t;const s=Ph[e]==null?0:Ph[e]+1;return Ph[e]=s,e+"-"+s},[e,t])}function Hw(e){return function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),l=1;l<s;l++)i[l-1]=arguments[l];return i.reduce((u,d)=>{const m=Object.entries(d);for(const[g,x]of m){const b=u[g];b!=null&&(u[g]=b+e*x)}return u},{...t})}}const vo=Hw(1),Pu=Hw(-1);function fD(e){return"clientX"in e&&"clientY"in e}function sp(e){if(!e)return!1;const{KeyboardEvent:t}=xr(e.target);return t&&e instanceof t}function hD(e){if(!e)return!1;const{TouchEvent:t}=xr(e.target);return t&&e instanceof t}function vm(e){if(hD(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:s}=e.touches[0];return{x:t,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:s}=e.changedTouches[0];return{x:t,y:s}}}return fD(e)?{x:e.clientX,y:e.clientY}:null}const Rl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:s}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:s}=e;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Rl.Translate.toString(e),Rl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:s,easing:i}=e;return t+" "+s+"ms "+i}}}),dy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mD(e){return e.matches(dy)?e:e.querySelector(dy)}const pD={display:"none"};function gD(e){let{id:t,value:s}=e;return Ft.createElement("div",{id:t,style:pD},s)}function xD(e){let{id:t,announcement:s,ariaLiveType:i="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ft.createElement("div",{id:t,style:l,role:"status","aria-live":i,"aria-atomic":!0},s)}function bD(){const[e,t]=h.useState("");return{announce:h.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const Vw=h.createContext(null);function vD(e){const t=h.useContext(Vw);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yD(){const[e]=h.useState(()=>new Set),t=h.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[h.useCallback(i=>{let{type:l,event:u}=i;e.forEach(d=>{var m;return(m=d[l])==null?void 0:m.call(d,u)})},[e]),t]}const wD={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},jD={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function SD(e){let{announcements:t=jD,container:s,hiddenTextDescribedById:i,screenReaderInstructions:l=wD}=e;const{announce:u,announcement:d}=bD(),m=Zl("DndLiveRegion"),[g,x]=h.useState(!1);if(h.useEffect(()=>{x(!0)},[]),vD(h.useMemo(()=>({onDragStart(v){let{active:y}=v;u(t.onDragStart({active:y}))},onDragMove(v){let{active:y,over:k}=v;t.onDragMove&&u(t.onDragMove({active:y,over:k}))},onDragOver(v){let{active:y,over:k}=v;u(t.onDragOver({active:y,over:k}))},onDragEnd(v){let{active:y,over:k}=v;u(t.onDragEnd({active:y,over:k}))},onDragCancel(v){let{active:y,over:k}=v;u(t.onDragCancel({active:y,over:k}))}}),[u,t])),!g)return null;const b=Ft.createElement(Ft.Fragment,null,Ft.createElement(gD,{id:i,value:l.draggable}),Ft.createElement(xD,{id:m,announcement:d}));return s?zr.createPortal(b,s):b}var On;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(On||(On={}));function Iu(){}function kD(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ND(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return h.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const ms=Object.freeze({x:0,y:0});function CD(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ED(e,t){let{data:{value:s}}=e,{data:{value:i}}=t;return s-i}function _D(e,t){let{data:{value:s}}=e,{data:{value:i}}=t;return i-s}function MD(e,t){if(!e||e.length===0)return null;const[s]=e;return s[t]}function fy(e,t,s){return t===void 0&&(t=e.left),s===void 0&&(s=e.top),{x:t+e.width*.5,y:s+e.height*.5}}const TD=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:i}=e;const l=fy(t,t.left,t.top),u=[];for(const d of i){const{id:m}=d,g=s.get(m);if(g){const x=CD(fy(g),l);u.push({id:m,data:{droppableContainer:d,value:x}})}}return u.sort(ED)};function DD(e,t){const s=Math.max(t.top,e.top),i=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),u=Math.min(t.top+t.height,e.top+e.height),d=l-i,m=u-s;if(i<l&&s<u){const g=t.width*t.height,x=e.width*e.height,b=d*m,v=b/(g+x-b);return Number(v.toFixed(4))}return 0}const AD=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:i}=e;const l=[];for(const u of i){const{id:d}=u,m=s.get(d);if(m){const g=DD(m,t);g>0&&l.push({id:d,data:{droppableContainer:u,value:g}})}}return l.sort(_D)};function RD(e,t,s){return{...e,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function Zw(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ms}function OD(e){return function(s){for(var i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];return l.reduce((d,m)=>({...d,top:d.top+e*m.y,bottom:d.bottom+e*m.y,left:d.left+e*m.x,right:d.right+e*m.x}),{...s})}}const zD=OD(1);function LD(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function UD(e,t,s){const i=LD(t);if(!i)return e;const{scaleX:l,scaleY:u,x:d,y:m}=i,g=e.left-d-(1-l)*parseFloat(s),x=e.top-m-(1-u)*parseFloat(s.slice(s.indexOf(" ")+1)),b=l?e.width/l:e.width,v=u?e.height/u:e.height;return{width:b,height:v,top:x,right:g+b,bottom:x+v,left:g}}const $D={ignoreTransform:!1};function No(e,t){t===void 0&&(t=$D);let s=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:x,transformOrigin:b}=xr(e).getComputedStyle(e);x&&(s=UD(s,x,b))}const{top:i,left:l,width:u,height:d,bottom:m,right:g}=s;return{top:i,left:l,width:u,height:d,bottom:m,right:g}}function hy(e){return No(e,{ignoreTransform:!0})}function BD(e){const t=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function qD(e,t){return t===void 0&&(t=xr(e).getComputedStyle(e)),t.position==="fixed"}function FD(e,t){t===void 0&&(t=xr(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const u=t[l];return typeof u=="string"?s.test(u):!1})}function ap(e,t){const s=[];function i(l){if(t!=null&&s.length>=t||!l)return s;if(np(l)&&l.scrollingElement!=null&&!s.includes(l.scrollingElement))return s.push(l.scrollingElement),s;if(!Hl(l)||Iw(l)||s.includes(l))return s;const u=xr(e).getComputedStyle(l);return l!==e&&FD(l,u)&&s.push(l),qD(l,u)?s:i(l.parentNode)}return e?i(e):s}function Ww(e){const[t]=ap(e,1);return t??null}function Ih(e){return!md||!e?null:So(e)?e:tp(e)?np(e)||e===ko(e).scrollingElement?window:Hl(e)?e:null:null}function Qw(e){return So(e)?e.scrollX:e.scrollLeft}function Kw(e){return So(e)?e.scrollY:e.scrollTop}function ym(e){return{x:Qw(e),y:Kw(e)}}var qn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(qn||(qn={}));function Gw(e){return!md||!e?!1:e===document.scrollingElement}function Yw(e){const t={x:0,y:0},s=Gw(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},l=e.scrollTop<=t.y,u=e.scrollLeft<=t.x,d=e.scrollTop>=i.y,m=e.scrollLeft>=i.x;return{isTop:l,isLeft:u,isBottom:d,isRight:m,maxScroll:i,minScroll:t}}const PD={x:.2,y:.2};function ID(e,t,s,i,l){let{top:u,left:d,right:m,bottom:g}=s;i===void 0&&(i=10),l===void 0&&(l=PD);const{isTop:x,isBottom:b,isLeft:v,isRight:y}=Yw(e),k={x:0,y:0},S={x:0,y:0},j={height:t.height*l.y,width:t.width*l.x};return!x&&u<=t.top+j.height?(k.y=qn.Backward,S.y=i*Math.abs((t.top+j.height-u)/j.height)):!b&&g>=t.bottom-j.height&&(k.y=qn.Forward,S.y=i*Math.abs((t.bottom-j.height-g)/j.height)),!y&&m>=t.right-j.width?(k.x=qn.Forward,S.x=i*Math.abs((t.right-j.width-m)/j.width)):!v&&d<=t.left+j.width&&(k.x=qn.Backward,S.x=i*Math.abs((t.left+j.width-d)/j.width)),{direction:k,speed:S}}function HD(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:t,left:s,right:i,bottom:l}=e.getBoundingClientRect();return{top:t,left:s,right:i,bottom:l,width:e.clientWidth,height:e.clientHeight}}function Xw(e){return e.reduce((t,s)=>vo(t,ym(s)),ms)}function VD(e){return e.reduce((t,s)=>t+Qw(s),0)}function ZD(e){return e.reduce((t,s)=>t+Kw(s),0)}function WD(e,t){if(t===void 0&&(t=No),!e)return;const{top:s,left:i,bottom:l,right:u}=t(e);Ww(e)&&(l<=0||u<=0||s>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const QD=[["x",["left","right"],VD],["y",["top","bottom"],ZD]];class ip{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=ap(s),l=Xw(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,d,m]of QD)for(const g of d)Object.defineProperty(this,g,{get:()=>{const x=m(i),b=l[u]-x;return this.rect[g]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...s)})},this.target=t}add(t,s,i){var l;(l=this.target)==null||l.addEventListener(t,s,i),this.listeners.push([t,s,i])}}function KD(e){const{EventTarget:t}=xr(e);return e instanceof t?e:ko(e)}function Hh(e,t){const s=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(s**2+i**2)>t:"x"in t&&"y"in t?s>t.x&&i>t.y:"x"in t?s>t.x:"y"in t?i>t.y:!1}var Gr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Gr||(Gr={}));function my(e){e.preventDefault()}function GD(e){e.stopPropagation()}var _t;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(_t||(_t={}));const Jw={start:[_t.Space,_t.Enter],cancel:[_t.Esc],end:[_t.Space,_t.Enter,_t.Tab]},YD=(e,t)=>{let{currentCoordinates:s}=t;switch(e.code){case _t.Right:return{...s,x:s.x+25};case _t.Left:return{...s,x:s.x-25};case _t.Down:return{...s,y:s.y+25};case _t.Up:return{...s,y:s.y-25}}};class ej{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new jl(ko(s)),this.windowListeners=new jl(xr(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gr.Resize,this.handleCancel),this.windowListeners.add(Gr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,i=t.node.current;i&&WD(i),s(ms)}handleKeyDown(t){if(sp(t)){const{active:s,context:i,options:l}=this.props,{keyboardCodes:u=Jw,coordinateGetter:d=YD,scrollBehavior:m="smooth"}=l,{code:g}=t;if(u.end.includes(g)){this.handleEnd(t);return}if(u.cancel.includes(g)){this.handleCancel(t);return}const{collisionRect:x}=i.current,b=x?{x:x.left,y:x.top}:ms;this.referenceCoordinates||(this.referenceCoordinates=b);const v=d(t,{active:s,context:i.current,currentCoordinates:b});if(v){const y=Pu(v,b),k={x:0,y:0},{scrollableAncestors:S}=i.current;for(const j of S){const N=t.code,{isTop:M,isRight:_,isLeft:R,isBottom:q,maxScroll:$,minScroll:I}=Yw(j),D=HD(j),C={x:Math.min(N===_t.Right?D.right-D.width/2:D.right,Math.max(N===_t.Right?D.left:D.left+D.width/2,v.x)),y:Math.min(N===_t.Down?D.bottom-D.height/2:D.bottom,Math.max(N===_t.Down?D.top:D.top+D.height/2,v.y))},L=N===_t.Right&&!_||N===_t.Left&&!R,V=N===_t.Down&&!q||N===_t.Up&&!M;if(L&&C.x!==v.x){const K=j.scrollLeft+y.x,A=N===_t.Right&&K<=$.x||N===_t.Left&&K>=I.x;if(A&&!y.y){j.scrollTo({left:K,behavior:m});return}A?k.x=j.scrollLeft-K:k.x=N===_t.Right?j.scrollLeft-$.x:j.scrollLeft-I.x,k.x&&j.scrollBy({left:-k.x,behavior:m});break}else if(V&&C.y!==v.y){const K=j.scrollTop+y.y,A=N===_t.Down&&K<=$.y||N===_t.Up&&K>=I.y;if(A&&!y.x){j.scrollTo({top:K,behavior:m});return}A?k.y=j.scrollTop-K:k.y=N===_t.Down?j.scrollTop-$.y:j.scrollTop-I.y,k.y&&j.scrollBy({top:-k.y,behavior:m});break}}this.handleMove(t,vo(Pu(v,this.referenceCoordinates),k))}}}handleMove(t,s){const{onMove:i}=this.props;t.preventDefault(),i(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ej.activators=[{eventName:"onKeyDown",handler:(e,t,s)=>{let{keyboardCodes:i=Jw,onActivation:l}=t,{active:u}=s;const{code:d}=e.nativeEvent;if(i.start.includes(d)){const m=u.activatorNode.current;return m&&e.target!==m?!1:(e.preventDefault(),l?.({event:e.nativeEvent}),!0)}return!1}}];function py(e){return!!(e&&"distance"in e)}function gy(e){return!!(e&&"delay"in e)}class op{constructor(t,s,i){var l;i===void 0&&(i=KD(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:u}=t,{target:d}=u;this.props=t,this.events=s,this.document=ko(d),this.documentListeners=new jl(this.document),this.listeners=new jl(i),this.windowListeners=new jl(xr(d)),this.initialCoordinates=(l=vm(u))!=null?l:ms,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Gr.Resize,this.handleCancel),this.windowListeners.add(Gr.DragStart,my),this.windowListeners.add(Gr.VisibilityChange,this.handleCancel),this.windowListeners.add(Gr.ContextMenu,my),this.documentListeners.add(Gr.Keydown,this.handleKeydown),s){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gy(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(py(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:i,onPending:l}=this.props;l(i,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(Gr.Click,GD,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gr.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:i,initialCoordinates:l,props:u}=this,{onMove:d,options:{activationConstraint:m}}=u;if(!l)return;const g=(s=vm(t))!=null?s:ms,x=Pu(l,g);if(!i&&m){if(py(m)){if(m.tolerance!=null&&Hh(x,m.tolerance))return this.handleCancel();if(Hh(x,m.distance))return this.handleStart()}if(gy(m)&&Hh(x,m.tolerance))return this.handleCancel();this.handlePending(m,x);return}t.cancelable&&t.preventDefault(),d(g)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===_t.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const XD={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lp extends op{constructor(t){const{event:s}=t,i=ko(s.target);super(t,XD,i)}}lp.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:i}=t;return!s.isPrimary||s.button!==0?!1:(i?.({event:s}),!0)}}];const JD={move:{name:"mousemove"},end:{name:"mouseup"}};var wm;(function(e){e[e.RightClick=2]="RightClick"})(wm||(wm={}));class eA extends op{constructor(t){super(t,JD,ko(t.event.target))}}eA.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:i}=t;return s.button===wm.RightClick?!1:(i?.({event:s}),!0)}}];const Vh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class tA extends op{constructor(t){super(t,Vh)}static setup(){return window.addEventListener(Vh.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Vh.move.name,t)};function t(){}}}tA.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:i}=t;const{touches:l}=s;return l.length>1?!1:(i?.({event:s}),!0)}}];var Sl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Sl||(Sl={}));var Hu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Hu||(Hu={}));function nA(e){let{acceleration:t,activator:s=Sl.Pointer,canScroll:i,draggingRect:l,enabled:u,interval:d=5,order:m=Hu.TreeOrder,pointerCoordinates:g,scrollableAncestors:x,scrollableAncestorRects:b,delta:v,threshold:y}=e;const k=sA({delta:v,disabled:!u}),[S,j]=dD(),N=h.useRef({x:0,y:0}),M=h.useRef({x:0,y:0}),_=h.useMemo(()=>{switch(s){case Sl.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Sl.DraggableRect:return l}},[s,l,g]),R=h.useRef(null),q=h.useCallback(()=>{const I=R.current;if(!I)return;const D=N.current.x*M.current.x,C=N.current.y*M.current.y;I.scrollBy(D,C)},[]),$=h.useMemo(()=>m===Hu.TreeOrder?[...x].reverse():x,[m,x]);h.useEffect(()=>{if(!u||!x.length||!_){j();return}for(const I of $){if(i?.(I)===!1)continue;const D=x.indexOf(I),C=b[D];if(!C)continue;const{direction:L,speed:V}=ID(I,C,_,t,y);for(const K of["x","y"])k[K][L[K]]||(V[K]=0,L[K]=0);if(V.x>0||V.y>0){j(),R.current=I,S(q,d),N.current=V,M.current=L;return}}N.current={x:0,y:0},M.current={x:0,y:0},j()},[t,q,i,j,u,d,JSON.stringify(_),JSON.stringify(k),S,x,$,b,JSON.stringify(y)])}const rA={x:{[qn.Backward]:!1,[qn.Forward]:!1},y:{[qn.Backward]:!1,[qn.Forward]:!1}};function sA(e){let{delta:t,disabled:s}=e;const i=bm(t);return Vl(l=>{if(s||!i||!l)return rA;const u={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[qn.Backward]:l.x[qn.Backward]||u.x===-1,[qn.Forward]:l.x[qn.Forward]||u.x===1},y:{[qn.Backward]:l.y[qn.Backward]||u.y===-1,[qn.Forward]:l.y[qn.Forward]||u.y===1}}},[s,t,i])}function aA(e,t){const s=t!=null?e.get(t):void 0,i=s?s.node.current:null;return Vl(l=>{var u;return t==null?null:(u=i??l)!=null?u:null},[i,t])}function iA(e,t){return h.useMemo(()=>e.reduce((s,i)=>{const{sensor:l}=i,u=l.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,i)}));return[...s,...u]},[]),[e,t])}var Ol;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ol||(Ol={}));var jm;(function(e){e.Optimized="optimized"})(jm||(jm={}));const xy=new Map;function oA(e,t){let{dragging:s,dependencies:i,config:l}=t;const[u,d]=h.useState(null),{frequency:m,measure:g,strategy:x}=l,b=h.useRef(e),v=N(),y=Al(v),k=h.useCallback(function(M){M===void 0&&(M=[]),!y.current&&d(_=>_===null?M:_.concat(M.filter(R=>!_.includes(R))))},[y]),S=h.useRef(null),j=Vl(M=>{if(v&&!s)return xy;if(!M||M===xy||b.current!==e||u!=null){const _=new Map;for(let R of e){if(!R)continue;if(u&&u.length>0&&!u.includes(R.id)&&R.rect.current){_.set(R.id,R.rect.current);continue}const q=R.node.current,$=q?new ip(g(q),q):null;R.rect.current=$,$&&_.set(R.id,$)}return _}return M},[e,u,s,v,g]);return h.useEffect(()=>{b.current=e},[e]),h.useEffect(()=>{v||k()},[s,v]),h.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),h.useEffect(()=>{v||typeof m!="number"||S.current!==null||(S.current=setTimeout(()=>{k(),S.current=null},m))},[m,v,k,...i]),{droppableRects:j,measureDroppableContainers:k,measuringScheduled:u!=null};function N(){switch(x){case Ol.Always:return!1;case Ol.BeforeDragging:return s;default:return!s}}}function tj(e,t){return Vl(s=>e?s||(typeof t=="function"?t(e):e):null,[t,e])}function lA(e,t){return tj(e,t)}function cA(e){let{callback:t,disabled:s}=e;const i=rp(t),l=h.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(i)},[i,s]);return h.useEffect(()=>()=>l?.disconnect(),[l]),l}function pd(e){let{callback:t,disabled:s}=e;const i=rp(t),l=h.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(i)},[s]);return h.useEffect(()=>()=>l?.disconnect(),[l]),l}function uA(e){return new ip(No(e),e)}function by(e,t,s){t===void 0&&(t=uA);const[i,l]=h.useState(null);function u(){l(g=>{if(!e)return null;if(e.isConnected===!1){var x;return(x=g??s)!=null?x:null}const b=t(e);return JSON.stringify(g)===JSON.stringify(b)?g:b})}const d=cA({callback(g){if(e)for(const x of g){const{type:b,target:v}=x;if(b==="childList"&&v instanceof HTMLElement&&v.contains(e)){u();break}}}}),m=pd({callback:u});return Cs(()=>{u(),e?(m?.observe(e),d?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),d?.disconnect())},[e]),i}function dA(e){const t=tj(e);return Zw(e,t)}const vy=[];function fA(e){const t=h.useRef(e),s=Vl(i=>e?i&&i!==vy&&e&&t.current&&e.parentNode===t.current.parentNode?i:ap(e):vy,[e]);return h.useEffect(()=>{t.current=e},[e]),s}function hA(e){const[t,s]=h.useState(null),i=h.useRef(e),l=h.useCallback(u=>{const d=Ih(u.target);d&&s(m=>m?(m.set(d,ym(d)),new Map(m)):null)},[]);return h.useEffect(()=>{const u=i.current;if(e!==u){d(u);const m=e.map(g=>{const x=Ih(g);return x?(x.addEventListener("scroll",l,{passive:!0}),[x,ym(x)]):null}).filter(g=>g!=null);s(m.length?new Map(m):null),i.current=e}return()=>{d(e),d(u)};function d(m){m.forEach(g=>{const x=Ih(g);x?.removeEventListener("scroll",l)})}},[l,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((u,d)=>vo(u,d),ms):Xw(e):ms,[e,t])}function yy(e,t){t===void 0&&(t=[]);const s=h.useRef(null);return h.useEffect(()=>{s.current=null},t),h.useEffect(()=>{const i=e!==ms;i&&!s.current&&(s.current=e),!i&&s.current&&(s.current=null)},[e]),s.current?Pu(e,s.current):ms}function mA(e){h.useEffect(()=>{if(!md)return;const t=e.map(s=>{let{sensor:i}=s;return i.setup==null?void 0:i.setup()});return()=>{for(const s of t)s?.()}},e.map(t=>{let{sensor:s}=t;return s}))}function pA(e,t){return h.useMemo(()=>e.reduce((s,i)=>{let{eventName:l,handler:u}=i;return s[l]=d=>{u(d,t)},s},{}),[e,t])}function nj(e){return h.useMemo(()=>e?BD(e):null,[e])}const wy=[];function gA(e,t){t===void 0&&(t=No);const[s]=e,i=nj(s?xr(s):null),[l,u]=h.useState(wy);function d(){u(()=>e.length?e.map(g=>Gw(g)?i:new ip(t(g),g)):wy)}const m=pd({callback:d});return Cs(()=>{m?.disconnect(),d(),e.forEach(g=>m?.observe(g))},[e]),l}function xA(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Hl(t)?t:e}function bA(e){let{measure:t}=e;const[s,i]=h.useState(null),l=h.useCallback(x=>{for(const{target:b}of x)if(Hl(b)){i(v=>{const y=t(b);return v?{...v,width:y.width,height:y.height}:y});break}},[t]),u=pd({callback:l}),d=h.useCallback(x=>{const b=xA(x);u?.disconnect(),b&&u?.observe(b),i(b?t(b):null)},[t,u]),[m,g]=Fu(d);return h.useMemo(()=>({nodeRef:m,rect:s,setRef:g}),[s,m,g])}const vA=[{sensor:lp,options:{}},{sensor:ej,options:{}}],yA={current:{}},ku={draggable:{measure:hy},droppable:{measure:hy,strategy:Ol.WhileDragging,frequency:jm.Optimized},dragOverlay:{measure:No}};class kl extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,i;return(s=(i=this.get(t))==null?void 0:i.node.current)!=null?s:void 0}}const wA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new kl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Iu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ku,measureDroppableContainers:Iu,windowRect:null,measuringScheduled:!1},jA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Iu,draggableNodes:new Map,over:null,measureDroppableContainers:Iu},gd=h.createContext(jA),rj=h.createContext(wA);function SA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new kl}}}function kA(e,t){switch(t.type){case On.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case On.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case On.DragEnd:case On.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case On.RegisterDroppable:{const{element:s}=t,{id:i}=s,l=new kl(e.droppable.containers);return l.set(i,s),{...e,droppable:{...e.droppable,containers:l}}}case On.SetDroppableDisabled:{const{id:s,key:i,disabled:l}=t,u=e.droppable.containers.get(s);if(!u||i!==u.key)return e;const d=new kl(e.droppable.containers);return d.set(s,{...u,disabled:l}),{...e,droppable:{...e.droppable,containers:d}}}case On.UnregisterDroppable:{const{id:s,key:i}=t,l=e.droppable.containers.get(s);if(!l||i!==l.key)return e;const u=new kl(e.droppable.containers);return u.delete(s),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function NA(e){let{disabled:t}=e;const{active:s,activatorEvent:i,draggableNodes:l}=h.useContext(gd),u=bm(i),d=bm(s?.id);return h.useEffect(()=>{if(!t&&!i&&u&&d!=null){if(!sp(u)||document.activeElement===u.target)return;const m=l.get(d);if(!m)return;const{activatorNode:g,node:x}=m;if(!g.current&&!x.current)return;requestAnimationFrame(()=>{for(const b of[g.current,x.current]){if(!b)continue;const v=mD(b);if(v){v.focus();break}}})}},[i,t,l,d,u]),null}function CA(e,t){let{transform:s,...i}=t;return e!=null&&e.length?e.reduce((l,u)=>u({transform:l,...i}),s):s}function EA(e){return h.useMemo(()=>({draggable:{...ku.draggable,...e?.draggable},droppable:{...ku.droppable,...e?.droppable},dragOverlay:{...ku.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function _A(e){let{activeNode:t,measure:s,initialRect:i,config:l=!0}=e;const u=h.useRef(!1),{x:d,y:m}=typeof l=="boolean"?{x:l,y:l}:l;Cs(()=>{if(!d&&!m||!t){u.current=!1;return}if(u.current||!i)return;const x=t?.node.current;if(!x||x.isConnected===!1)return;const b=s(x),v=Zw(b,i);if(d||(v.x=0),m||(v.y=0),u.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const y=Ww(x);y&&y.scrollBy({top:v.y,left:v.x})}},[t,d,m,i,s])}const sj=h.createContext({...ms,scaleX:1,scaleY:1});var Ra;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ra||(Ra={}));const MA=h.memo(function(t){var s,i,l,u;let{id:d,accessibility:m,autoScroll:g=!0,children:x,sensors:b=vA,collisionDetection:v=AD,measuring:y,modifiers:k,...S}=t;const j=h.useReducer(kA,void 0,SA),[N,M]=j,[_,R]=yD(),[q,$]=h.useState(Ra.Uninitialized),I=q===Ra.Initialized,{draggable:{active:D,nodes:C,translate:L},droppable:{containers:V}}=N,K=D!=null?C.get(D):null,A=h.useRef({initial:null,translated:null}),X=h.useMemo(()=>{var at;return D!=null?{id:D,data:(at=K?.data)!=null?at:yA,rect:A}:null},[D,K]),fe=h.useRef(null),[Se,z]=h.useState(null),[H,ae]=h.useState(null),ge=Al(S,Object.values(S)),ce=Zl("DndDescribedBy",d),T=h.useMemo(()=>V.getEnabled(),[V]),G=EA(y),{droppableRects:ue,measureDroppableContainers:Y,measuringScheduled:ee}=oA(T,{dragging:I,dependencies:[L.x,L.y],config:G.droppable}),Z=aA(C,D),te=h.useMemo(()=>H?vm(H):null,[H]),Q=_n(),se=lA(Z,G.draggable.measure);_A({activeNode:D!=null?C.get(D):null,config:Q.layoutShiftCompensation,initialRect:se,measure:G.draggable.measure});const ke=by(Z,G.draggable.measure,se),Me=by(Z?Z.parentElement:null),We=h.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=V.getNodeFor((s=We.current.over)==null?void 0:s.id),Ve=bA({measure:G.dragOverlay.measure}),$e=(i=Ve.nodeRef.current)!=null?i:Z,gt=I?(l=Ve.rect)!=null?l:ke:null,xt=!!(Ve.nodeRef.current&&Ve.rect),Oe=dA(xt?null:ke),Qe=nj($e?xr($e):null),O=fA(I?st??Z:null),U=gA(O),ne=CA(k,{transform:{x:L.x-Oe.x,y:L.y-Oe.y,scaleX:1,scaleY:1},activatorEvent:H,active:X,activeNodeRect:ke,containerNodeRect:Me,draggingNodeRect:gt,over:We.current.over,overlayNodeRect:Ve.rect,scrollableAncestors:O,scrollableAncestorRects:U,windowRect:Qe}),be=te?vo(te,L):null,Ne=hA(O),Ce=yy(Ne),ze=yy(Ne,[ke]),ye=vo(ne,Ce),_e=gt?zD(gt,ne):null,Be=X&&_e?v({active:X,collisionRect:_e,droppableRects:ue,droppableContainers:T,pointerCoordinates:be}):null,ht=MD(Be,"id"),[it,bn]=h.useState(null),Dt=xt?ne:vo(ne,ze),jt=RD(Dt,(u=it?.rect)!=null?u:null,ke),ut=h.useRef(null),Ut=h.useCallback((at,kt)=>{let{sensor:At,options:on}=kt;if(fe.current==null)return;const hn=C.get(fe.current);if(!hn)return;const mn=at.nativeEvent,vn=new At({active:fe.current,activeNode:hn,event:mn,options:on,context:We,onAbort(tn){if(!C.get(tn))return;const{onDragAbort:Hn}=ge.current,Un={id:tn};Hn?.(Un),_({type:"onDragAbort",event:Un})},onPending(tn,Gn,Hn,Un){if(!C.get(tn))return;const{onDragPending:sr}=ge.current,Yn={id:tn,constraint:Gn,initialCoordinates:Hn,offset:Un};sr?.(Yn),_({type:"onDragPending",event:Yn})},onStart(tn){const Gn=fe.current;if(Gn==null)return;const Hn=C.get(Gn);if(!Hn)return;const{onDragStart:Un}=ge.current,br={activatorEvent:mn,active:{id:Gn,data:Hn.data,rect:A}};zr.unstable_batchedUpdates(()=>{Un?.(br),$(Ra.Initializing),M({type:On.DragStart,initialCoordinates:tn,active:Gn}),_({type:"onDragStart",event:br}),z(ut.current),ae(mn)})},onMove(tn){M({type:On.DragMove,coordinates:tn})},onEnd:Mn(On.DragEnd),onCancel:Mn(On.DragCancel)});ut.current=vn;function Mn(tn){return async function(){const{active:Hn,collisions:Un,over:br,scrollAdjustedTranslate:sr}=We.current;let Yn=null;if(Hn&&sr){const{cancelDrop:vr}=ge.current;Yn={activatorEvent:mn,active:Hn,collisions:Un,delta:sr,over:br},tn===On.DragEnd&&typeof vr=="function"&&await Promise.resolve(vr(Yn))&&(tn=On.DragCancel)}fe.current=null,zr.unstable_batchedUpdates(()=>{M({type:tn}),$(Ra.Uninitialized),bn(null),z(null),ae(null),ut.current=null;const vr=tn===On.DragEnd?"onDragEnd":"onDragCancel";if(Yn){const Tn=ge.current[vr];Tn?.(Yn),_({type:vr,event:Yn})}})}}},[C]),In=h.useCallback((at,kt)=>(At,on)=>{const hn=At.nativeEvent,mn=C.get(on);if(fe.current!==null||!mn||hn.dndKit||hn.defaultPrevented)return;const vn={active:mn};at(At,kt.options,vn)===!0&&(hn.dndKit={capturedBy:kt.sensor},fe.current=on,Ut(At,kt))},[C,Ut]),he=iA(b,In);mA(b),Cs(()=>{ke&&q===Ra.Initializing&&$(Ra.Initialized)},[ke,q]),h.useEffect(()=>{const{onDragMove:at}=ge.current,{active:kt,activatorEvent:At,collisions:on,over:hn}=We.current;if(!kt||!At)return;const mn={active:kt,activatorEvent:At,collisions:on,delta:{x:ye.x,y:ye.y},over:hn};zr.unstable_batchedUpdates(()=>{at?.(mn),_({type:"onDragMove",event:mn})})},[ye.x,ye.y]),h.useEffect(()=>{const{active:at,activatorEvent:kt,collisions:At,droppableContainers:on,scrollAdjustedTranslate:hn}=We.current;if(!at||fe.current==null||!kt||!hn)return;const{onDragOver:mn}=ge.current,vn=on.get(ht),Mn=vn&&vn.rect.current?{id:vn.id,rect:vn.rect.current,data:vn.data,disabled:vn.disabled}:null,tn={active:at,activatorEvent:kt,collisions:At,delta:{x:hn.x,y:hn.y},over:Mn};zr.unstable_batchedUpdates(()=>{bn(Mn),mn?.(tn),_({type:"onDragOver",event:tn})})},[ht]),Cs(()=>{We.current={activatorEvent:H,active:X,activeNode:Z,collisionRect:_e,collisions:Be,droppableRects:ue,draggableNodes:C,draggingNode:$e,draggingNodeRect:gt,droppableContainers:V,over:it,scrollableAncestors:O,scrollAdjustedTranslate:ye},A.current={initial:gt,translated:_e}},[X,Z,Be,_e,C,$e,gt,ue,V,it,O,ye]),nA({...Q,delta:L,draggingRect:_e,pointerCoordinates:be,scrollableAncestors:O,scrollableAncestorRects:U});const Ae=h.useMemo(()=>({active:X,activeNode:Z,activeNodeRect:ke,activatorEvent:H,collisions:Be,containerNodeRect:Me,dragOverlay:Ve,draggableNodes:C,droppableContainers:V,droppableRects:ue,over:it,measureDroppableContainers:Y,scrollableAncestors:O,scrollableAncestorRects:U,measuringConfiguration:G,measuringScheduled:ee,windowRect:Qe}),[X,Z,ke,H,Be,Me,Ve,C,V,ue,it,Y,O,U,G,ee,Qe]),ot=h.useMemo(()=>({activatorEvent:H,activators:he,active:X,activeNodeRect:ke,ariaDescribedById:{draggable:ce},dispatch:M,draggableNodes:C,over:it,measureDroppableContainers:Y}),[H,he,X,ke,M,ce,C,it,Y]);return Ft.createElement(Vw.Provider,{value:R},Ft.createElement(gd.Provider,{value:ot},Ft.createElement(rj.Provider,{value:Ae},Ft.createElement(sj.Provider,{value:jt},x)),Ft.createElement(NA,{disabled:m?.restoreFocus===!1})),Ft.createElement(SD,{...m,hiddenTextDescribedById:ce}));function _n(){const at=Se?.autoScrollEnabled===!1,kt=typeof g=="object"?g.enabled===!1:g===!1,At=I&&!at&&!kt;return typeof g=="object"?{...g,enabled:At}:{enabled:At}}}),TA=h.createContext(null),jy="button",DA="Draggable";function AA(e){let{id:t,data:s,disabled:i=!1,attributes:l}=e;const u=Zl(DA),{activators:d,activatorEvent:m,active:g,activeNodeRect:x,ariaDescribedById:b,draggableNodes:v,over:y}=h.useContext(gd),{role:k=jy,roleDescription:S="draggable",tabIndex:j=0}=l??{},N=g?.id===t,M=h.useContext(N?sj:TA),[_,R]=Fu(),[q,$]=Fu(),I=pA(d,t),D=Al(s);Cs(()=>(v.set(t,{id:t,key:u,node:_,activatorNode:q,data:D}),()=>{const L=v.get(t);L&&L.key===u&&v.delete(t)}),[v,t]);const C=h.useMemo(()=>({role:k,tabIndex:j,"aria-disabled":i,"aria-pressed":N&&k===jy?!0:void 0,"aria-roledescription":S,"aria-describedby":b.draggable}),[i,k,j,N,S,b.draggable]);return{active:g,activatorEvent:m,activeNodeRect:x,attributes:C,isDragging:N,listeners:i?void 0:I,node:_,over:y,setNodeRef:R,setActivatorNodeRef:$,transform:M}}function RA(){return h.useContext(rj)}const OA="Droppable",zA={timeout:25};function LA(e){let{data:t,disabled:s=!1,id:i,resizeObserverConfig:l}=e;const u=Zl(OA),{active:d,dispatch:m,over:g,measureDroppableContainers:x}=h.useContext(gd),b=h.useRef({disabled:s}),v=h.useRef(!1),y=h.useRef(null),k=h.useRef(null),{disabled:S,updateMeasurementsFor:j,timeout:N}={...zA,...l},M=Al(j??i),_=h.useCallback(()=>{if(!v.current){v.current=!0;return}k.current!=null&&clearTimeout(k.current),k.current=setTimeout(()=>{x(Array.isArray(M.current)?M.current:[M.current]),k.current=null},N)},[N]),R=pd({callback:_,disabled:S||!d}),q=h.useCallback((C,L)=>{R&&(L&&(R.unobserve(L),v.current=!1),C&&R.observe(C))},[R]),[$,I]=Fu(q),D=Al(t);return h.useEffect(()=>{!R||!$.current||(R.disconnect(),v.current=!1,R.observe($.current))},[$,R]),h.useEffect(()=>(m({type:On.RegisterDroppable,element:{id:i,key:u,disabled:s,node:$,rect:y,data:D}}),()=>m({type:On.UnregisterDroppable,key:u,id:i})),[i]),h.useEffect(()=>{s!==b.current.disabled&&(m({type:On.SetDroppableDisabled,id:i,key:u,disabled:s}),b.current.disabled=s)},[i,u,s,m]),{active:d,rect:y,isOver:g?.id===i,node:$,over:g,setNodeRef:I}}function aj(e,t,s){const i=e.slice();return i.splice(s<0?i.length+s:s,0,i.splice(t,1)[0]),i}function UA(e,t){return e.reduce((s,i,l)=>{const u=t.get(i);return u&&(s[l]=u),s},Array(e.length))}function bu(e){return e!==null&&e>=0}function $A(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function BA(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const vu={scaleX:1,scaleY:1},qA=e=>{var t;let{rects:s,activeNodeRect:i,activeIndex:l,overIndex:u,index:d}=e;const m=(t=s[l])!=null?t:i;if(!m)return null;const g=FA(s,d,l);if(d===l){const x=s[u];return x?{x:l<u?x.left+x.width-(m.left+m.width):x.left-m.left,y:0,...vu}:null}return d>l&&d<=u?{x:-m.width-g,y:0,...vu}:d<l&&d>=u?{x:m.width+g,y:0,...vu}:{x:0,y:0,...vu}};function FA(e,t,s){const i=e[t],l=e[t-1],u=e[t+1];return!i||!l&&!u?0:s<t?l?i.left-(l.left+l.width):u.left-(i.left+i.width):u?u.left-(i.left+i.width):i.left-(l.left+l.width)}const ij=e=>{let{rects:t,activeIndex:s,overIndex:i,index:l}=e;const u=aj(t,i,s),d=t[l],m=u[l];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},oj="Sortable",lj=Ft.createContext({activeIndex:-1,containerId:oj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ij,disabled:{draggable:!1,droppable:!1}});function PA(e){let{children:t,id:s,items:i,strategy:l=ij,disabled:u=!1}=e;const{active:d,dragOverlay:m,droppableRects:g,over:x,measureDroppableContainers:b}=RA(),v=Zl(oj,s),y=m.rect!==null,k=h.useMemo(()=>i.map(I=>typeof I=="object"&&"id"in I?I.id:I),[i]),S=d!=null,j=d?k.indexOf(d.id):-1,N=x?k.indexOf(x.id):-1,M=h.useRef(k),_=!$A(k,M.current),R=N!==-1&&j===-1||_,q=BA(u);Cs(()=>{_&&S&&b(k)},[_,k,S,b]),h.useEffect(()=>{M.current=k},[k]);const $=h.useMemo(()=>({activeIndex:j,containerId:v,disabled:q,disableTransforms:R,items:k,overIndex:N,useDragOverlay:y,sortedRects:UA(k,g),strategy:l}),[j,v,q.draggable,q.droppable,R,k,N,g,y,l]);return Ft.createElement(lj.Provider,{value:$},t)}const IA=e=>{let{id:t,items:s,activeIndex:i,overIndex:l}=e;return aj(s,i,l).indexOf(t)},HA=e=>{let{containerId:t,isSorting:s,wasDragging:i,index:l,items:u,newIndex:d,previousItems:m,previousContainerId:g,transition:x}=e;return!x||!i||m!==u&&l===d?!1:s?!0:d!==l&&t===g},VA={duration:200,easing:"ease"},cj="transform",ZA=Rl.Transition.toString({property:cj,duration:0,easing:"linear"}),WA={roleDescription:"sortable"};function QA(e){let{disabled:t,index:s,node:i,rect:l}=e;const[u,d]=h.useState(null),m=h.useRef(s);return Cs(()=>{if(!t&&s!==m.current&&i.current){const g=l.current;if(g){const x=No(i.current,{ignoreTransform:!0}),b={x:g.left-x.left,y:g.top-x.top,scaleX:g.width/x.width,scaleY:g.height/x.height};(b.x||b.y)&&d(b)}}s!==m.current&&(m.current=s)},[t,s,i,l]),h.useEffect(()=>{u&&d(null)},[u]),u}function KA(e){let{animateLayoutChanges:t=HA,attributes:s,disabled:i,data:l,getNewIndex:u=IA,id:d,strategy:m,resizeObserverConfig:g,transition:x=VA}=e;const{items:b,containerId:v,activeIndex:y,disabled:k,disableTransforms:S,sortedRects:j,overIndex:N,useDragOverlay:M,strategy:_}=h.useContext(lj),R=GA(i,k),q=b.indexOf(d),$=h.useMemo(()=>({sortable:{containerId:v,index:q,items:b},...l}),[v,l,q,b]),I=h.useMemo(()=>b.slice(b.indexOf(d)),[b,d]),{rect:D,node:C,isOver:L,setNodeRef:V}=LA({id:d,data:$,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...g}}),{active:K,activatorEvent:A,activeNodeRect:X,attributes:fe,setNodeRef:Se,listeners:z,isDragging:H,over:ae,setActivatorNodeRef:ge,transform:ce}=AA({id:d,data:$,attributes:{...WA,...s},disabled:R.draggable}),T=uD(V,Se),G=!!K,ue=G&&!S&&bu(y)&&bu(N),Y=!M&&H,ee=Y&&ue?ce:null,te=ue?ee??(m??_)({rects:j,activeNodeRect:X,activeIndex:y,overIndex:N,index:q}):null,Q=bu(y)&&bu(N)?u({id:d,items:b,activeIndex:y,overIndex:N}):q,se=K?.id,ke=h.useRef({activeId:se,items:b,newIndex:Q,containerId:v}),Me=b!==ke.current.items,We=t({active:K,containerId:v,isDragging:H,isSorting:G,id:d,index:q,items:b,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:x,wasDragging:ke.current.activeId!=null}),st=QA({disabled:!We,index:q,node:C,rect:D});return h.useEffect(()=>{G&&ke.current.newIndex!==Q&&(ke.current.newIndex=Q),v!==ke.current.containerId&&(ke.current.containerId=v),b!==ke.current.items&&(ke.current.items=b)},[G,Q,v,b]),h.useEffect(()=>{if(se===ke.current.activeId)return;if(se!=null&&ke.current.activeId==null){ke.current.activeId=se;return}const $e=setTimeout(()=>{ke.current.activeId=se},50);return()=>clearTimeout($e)},[se]),{active:K,activeIndex:y,attributes:fe,data:$,rect:D,index:q,newIndex:Q,items:b,isOver:L,isSorting:G,isDragging:H,listeners:z,node:C,overIndex:N,over:ae,setNodeRef:T,setActivatorNodeRef:ge,setDroppableNodeRef:V,setDraggableNodeRef:Se,transform:st??te,transition:Ve()};function Ve(){if(st||Me&&ke.current.newIndex===q)return ZA;if(!(Y&&!sp(A)||!x)&&(G||We))return Rl.Transition.toString({...x,property:cj})}}function GA(e,t){var s,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(s=e?.draggable)!=null?s:t.draggable,droppable:(i=e?.droppable)!=null?i:t.droppable}}_t.Down,_t.Right,_t.Up,_t.Left;const ea="h-4 w-4 text-current opacity-80";function YA({filled:e}){return e?a.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"currentColor",className:"text-muted-foreground"})}):a.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"none",stroke:"currentColor",strokeWidth:"1.2",className:"text-muted-foreground"})})}function XA(){return a.jsxs("svg",{className:"h-3 w-3 animate-spin text-brand-500",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"1.2",opacity:"0.3"}),a.jsx("path",{d:"M14 8a6 6 0 0 0-6-6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function JA(){return a.jsxs("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M4 2.5h7.5L13.5 5v8.5H4z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function eR(){return a.jsxs("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M3.5 3.5h6l3 3v5.5h-9z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 3.5v3.5h3.5v-3.5",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M5 11h4",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),a.jsx("path",{d:"M6.5 6.5h6l1.5 1.5v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",opacity:"0.6"})]})}function tR(){return a.jsx("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M4 4l8 8m0-8l-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function nR(){return a.jsxs("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("rect",{x:"2.5",y:"3",width:"8",height:"10",rx:"1.2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),a.jsx("path",{d:"M7 7l5 5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function rR(){return a.jsxs("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M5 3v10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M7 5l5 3-5 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M12 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function sR(){return a.jsxs("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M3.5 4h3a1 1 0 0 1 1 1v7.5M12.5 12h-3a1 1 0 0 1-1-1V3.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M5 6l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function uj(){return a.jsx("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M5.5 2.5h5l.5 4h2v1.5h-4V13l-1-.5V8h-3V6.5h3z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function aR(){return a.jsx("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M3.5 3.5l9 9M5.5 2.5h5l.5 4h2v1.5H10M8 8v4.5L7 12.5V8H4V6.5h1",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function iR(){return a.jsx("svg",{className:ea,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M5 2.5h4l2.5 2.5V13.5H5z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"})})}function oR(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M10 3L5 8l5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function lR(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M6 3l5 5-5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function cR(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function uR({tab:e,isActive:t,isDirty:s,draggingId:i,onContextMenu:l,onCloseTab:u,setTabNode:d}){const{attributes:m,listeners:g,setNodeRef:x,transform:b,transition:v,isDragging:y}=KA({id:e.id}),k={transform:Rl.Transform.toString(b),transition:v},S=y||i===e.id,j=!!e.pinned;return a.jsxs("div",{ref:N=>{x(N),d(e.id,N)},style:k,className:re("group relative mr-1 flex min-w-0 items-stretch",S&&"opacity-60"),"data-editor-tab":"true",...m,...g,children:[a.jsxs(Dl,{value:e.id,"data-tab-id":e.id,title:e.id,onContextMenu:l,onMouseDown:N=>{N.button===1&&(N.preventDefault(),u(e.id))},className:re("relative flex min-w-[3rem] max-w-[16rem] items-center gap-2 overflow-hidden rounded-t-lg border px-2 py-1.5 pr-8 text-sm font-medium transition-[background-color,border-color,color] duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",t?"border-border border-b-card bg-card text-foreground shadow-[0_1px_0_rgb(var(--sys-color-shadow)/0.08)]":"border-transparent border-b-border text-muted-foreground hover:border-border hover:bg-card/70 hover:text-foreground",j?"min-w-[4rem] max-w-[8rem] justify-center":"min-w-[9rem] justify-start px-3"),children:[j?a.jsx("span",{className:"flex-none text-[12px]","aria-label":"Pinned",children:a.jsx(YA,{filled:t})}):null,a.jsx("span",{className:"block min-w-0 flex-1 truncate text-left",children:e.name}),e.status==="loading"?a.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-muted-foreground","aria-label":"Loading",children:""}):null,e.status==="error"?a.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Load failed",children:"!"}):null,e.saving?a.jsx("span",{className:"flex-none","aria-label":"Saving",title:"Saving changes",children:a.jsx(XA,{})}):null,e.saveError?a.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Save failed",title:e.saveError,children:"!"}):null,s?a.jsx("span",{className:"flex-none text-xs leading-none text-brand-600",children:""}):null]}),a.jsx("button",{type:"button",className:re("absolute right-1 top-1/2 -translate-y-1/2 rounded p-0.5 text-xs transition focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-1 focus-visible:ring-offset-background",t?"text-muted-foreground hover:bg-muted hover:text-foreground":"text-muted-foreground opacity-0 group-hover:opacity-100 hover:bg-muted hover:text-foreground"),onClick:N=>{N.stopPropagation(),u(e.id)},"aria-label":`Close ${e.name}`,children:""})]})}function dR({currentTab:e,tabs:t,canSaveFiles:s,hasDirtyTabs:i,onCloseTab:l,onCloseOtherTabs:u,onCloseTabsToRight:d,onCloseAllTabs:m,onPinTab:g,onUnpinTab:x,onSaveTab:b,onSaveAllTabs:v}){const y=t.findIndex(R=>R.id===e.id),k=y>=0&&y<t.length-1,S=t.length>1,j=e.status==="ready"&&e.content!==e.initialContent,N=!!b&&s&&j&&!e.saving,M=!!v&&s&&i,_={save:"Ctrl+S",saveAll:"Ctrl+Shift+S",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W"};return[{id:"save",label:e.saving?"Saving":"Save",icon:a.jsx(JA,{}),disabled:!N,shortcut:_.save,onSelect:()=>b?.(e.id)},{id:"save-all",label:"Save All",icon:a.jsx(eR,{}),disabled:!M,shortcut:_.saveAll,onSelect:()=>v?.()},{id:"pin",label:e.pinned?"Unpin":"Pin",icon:e.pinned?a.jsx(aR,{}):a.jsx(uj,{}),dividerAbove:!0,onSelect:()=>e.pinned?x(e.id):g(e.id)},{id:"close",label:"Close",icon:a.jsx(tR,{}),dividerAbove:!0,shortcut:_.close,onSelect:()=>l(e.id)},{id:"close-others",label:"Close Others",icon:a.jsx(nR,{}),disabled:!S,shortcut:_.closeOthers,onSelect:()=>u(e.id)},{id:"close-right",label:"Close Tabs to the Right",icon:a.jsx(rR,{}),disabled:!k,shortcut:_.closeRight,onSelect:()=>d(e.id)},{id:"close-all",label:"Close All",icon:a.jsx(sR,{}),dividerAbove:!0,disabled:t.length===0,shortcut:_.closeAll,onSelect:()=>m()}]}function fR({pinnedTabs:e,regularTabs:t,activeTabId:s,onSelectTab:i}){if(e.length===0&&t.length===0)return[{id:"empty",label:"No open editors",onSelect:()=>{},disabled:!0}];const l=[],u=(d,m)=>{const g=d.status==="ready"&&d.content!==d.initialContent,x=[];d.id===s&&x.push("Active"),d.saving?x.push("Saving"):g&&x.push("Unsaved"),l.push({id:`switch-${d.id}`,label:`${d.saving?" ":g?" ":""}${d.name}`,icon:d.pinned?a.jsx(uj,{}):a.jsx(iR,{}),shortcut:x.length>0?x.join("  "):void 0,dividerAbove:m,onSelect:()=>i(d.id)})};return e.forEach(d=>u(d,!1)),t.forEach((d,m)=>u(d,m===0&&e.length>0)),l}const Sy=220,ky=64,hR=14;function mR({tabs:e,activeTabId:t,menuAppearance:s,canSaveFiles:i=!1,onSelectTab:l,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:m,onCloseAllTabs:g,onMoveTab:x,onPinTab:b,onUnpinTab:v,onSaveTab:y,onSaveAllTabs:k,onTabDragStateChange:S}){const[j,N]=h.useState(null),[M,_]=h.useState(null),[R,q]=h.useState(null),[$,I]=h.useState({left:!1,right:!1}),[D,C]=h.useState(0),L=h.useRef(null),V=h.useRef(null),K=h.useRef(new Map),A=h.useMemo(()=>e.filter(Q=>Q.pinned),[e]),X=h.useMemo(()=>e.filter(Q=>!Q.pinned),[e]),Se=h.useMemo(()=>e.filter(Q=>Q.status==="ready"&&Q.content!==Q.initialContent),[e]).length>0,z=ND(kD(lp,{activationConstraint:{distance:5}})),H="border-border bg-card",ae="text-muted-foreground hover:bg-muted hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",ge=h.useCallback((Q,se)=>{const ke=K.current;se?ke.set(Q,se):ke.delete(Q)},[]);h.useEffect(()=>{j&&!e.some(Q=>Q.id===j.tabId)&&N(null),e.length||_(null)},[j,e]);const ce=h.useCallback(Q=>{q(String(Q.active.id)),S?.(!0)},[S]),T=h.useCallback(Q=>{const se=Q.active.id,ke=Q.over?.id;if(ke&&se!==ke){const Me=e.findIndex(st=>st.id===se),We=e.findIndex(st=>st.id===ke);if(Me!==-1&&We!==-1){const st=Me<We?We+1:We;x(String(se),st)}}q(null),S?.(!1)},[x,S,e]),G=h.useCallback(()=>{q(null),S?.(!1)},[S]),ue=h.useCallback(()=>{const Q=L.current;if(!Q){I({left:!1,right:!1});return}const{scrollLeft:se,scrollWidth:ke,clientWidth:Me}=Q;I({left:se>2,right:se+Me<ke-2})},[]);h.useEffect(()=>{const Q=L.current;if(!Q){I({left:!1,right:!1});return}ue();const se=()=>ue();Q.addEventListener("scroll",se),window.addEventListener("resize",ue);const ke=typeof ResizeObserver<"u"?new ResizeObserver(ue):null;return ke?.observe(Q),()=>{Q.removeEventListener("scroll",se),window.removeEventListener("resize",ue),ke?.disconnect()}},[e.length,ue]),h.useEffect(()=>{if(!R){C(0);return}const Q=se=>{const ke=L.current;if(!ke){C(0);return}const Me=ke.getBoundingClientRect();se.clientX<Me.left+ky?C(-1):se.clientX>Me.right-ky?C(1):C(0)};return window.addEventListener("pointermove",Q),()=>{window.removeEventListener("pointermove",Q),C(0)}},[R]),h.useEffect(()=>{if(!R||D===0)return;let Q;const se=()=>{const ke=L.current;ke&&(ke.scrollBy({left:D*hR}),Q=window.requestAnimationFrame(se))};return Q=window.requestAnimationFrame(se),()=>window.cancelAnimationFrame(Q)},[D,R]),h.useEffect(()=>{K.current.get(t)?.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},[t,e.length]);const Y=h.useMemo(()=>{if(!j)return[];const Q=e.find(se=>se.id===j.tabId);return Q?dR({currentTab:Q,tabs:e,canSaveFiles:i,hasDirtyTabs:Se,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:m,onCloseAllTabs:g,onPinTab:b,onUnpinTab:v,onSaveTab:y,onSaveAllTabs:k}):[]},[i,j,Se,g,d,u,m,b,k,y,v,e]),ee=h.useMemo(()=>fR({pinnedTabs:A,regularTabs:X,activeTabId:t,onSelectTab:l}),[A,X,t,l]),Z=h.useCallback(Q=>{L.current?.scrollBy({left:Q,behavior:"smooth"})},[]),te=h.useCallback(()=>{const Q=V.current?.getBoundingClientRect();Q&&_({x:Q.left,y:Q.bottom+6})},[]);return a.jsxs(a.Fragment,{children:[a.jsx(MA,{sensors:z,collisionDetection:TD,onDragStart:ce,onDragEnd:T,onDragCancel:G,children:a.jsx(PA,{items:e.map(Q=>Q.id),strategy:qA,children:a.jsxs("div",{className:re("flex items-center gap-1 px-1",H,"border-b"),children:[a.jsx(Ny,{appearance:s,direction:"left",disabled:!$.left,onClick:()=>Z(-Sy)}),a.jsxs("div",{className:"relative flex min-w-0 flex-1 items-stretch",children:[$.left?a.jsx(Cy,{position:"left",appearance:s}):null,$.right?a.jsx(Cy,{position:"right",appearance:s}):null,a.jsx("div",{ref:L,className:"flex min-w-0 flex-1 overflow-x-auto pb-1",onWheel:Q=>{Math.abs(Q.deltaY)>Math.abs(Q.deltaX)&&(Q.preventDefault(),L.current?.scrollBy({left:Q.deltaY}))},children:a.jsx(hd,{className:"flex min-h-[2.75rem] flex-1 items-end gap-0 px-1",children:e.map(Q=>{const se=Q.status==="ready"&&Q.content!==Q.initialContent,ke=Q.id===t;return a.jsx(uR,{tab:Q,isActive:ke,isDirty:se,draggingId:R,setTabNode:ge,onContextMenu:Me=>{Me.preventDefault(),N({tabId:Q.id,x:Me.clientX,y:Me.clientY})},onCloseTab:u},Q.id)})})})]}),a.jsx(Ny,{appearance:s,direction:"right",disabled:!$.right,onClick:()=>Z(Sy)}),a.jsx("button",{ref:V,type:"button",className:re("mx-1 flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2",ae),"aria-label":"Open editors list",onClick:te,children:a.jsx(cR,{})})]})})}),a.jsx(hs,{open:!!j,position:j&&{x:j.x,y:j.y},onClose:()=>N(null),items:Y,appearance:s}),a.jsx(hs,{open:!!M,position:M,onClose:()=>_(null),items:ee,appearance:s})]})}function Ny({appearance:e,direction:t,disabled:s,onClick:i}){return a.jsx("button",{type:"button",className:re("flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none","text-muted-foreground",s?"cursor-default opacity-30":"hover:bg-muted hover:text-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card"),onClick:i,disabled:s,"aria-label":t==="left"?"Scroll tabs left":"Scroll tabs right",children:t==="left"?a.jsx(oR,{}):a.jsx(lR,{})})}function Cy({position:e,appearance:t}){const s=e==="left"?"left-0 bg-gradient-to-r from-card via-card/80 to-transparent":"right-0 bg-gradient-to-l from-card via-card/80 to-transparent";return a.jsx("div",{className:re("pointer-events-none absolute top-0 bottom-0 w-8",s)})}function pR({tabs:e,activeTabId:t,onSelectTab:s,onCloseTab:i,onCloseOtherTabs:l,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:m,onPinTab:g,onUnpinTab:x,onContentChange:b,onSaveTab:v,onSaveAllTabs:y,onSelectRecentTab:k,editorTheme:S,menuAppearance:j,canSaveFiles:N=!1,readOnly:M=!1,minHeight:_,onRetryTabLoad:R}){const q=e.length>0,$=h.useRef(null),[I,D]=h.useState(!1),C=h.useMemo(()=>e.find(L=>L.id===t)??null,[e,t]);return!q||!C?a.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-muted-foreground",children:"Select a file from the explorer to begin editing."}):a.jsxs("div",{ref:$,className:"flex min-h-0 min-w-0 flex-1 flex-col",style:_?{minHeight:_}:void 0,"data-editor-area":!0,children:[a.jsx(iD,{containerRef:$,tabs:e,activeTabId:t,onCloseTab:i,onSelectTab:s,onSelectRecentTab:k}),a.jsxs(fd,{value:C.id,onValueChange:s,children:[a.jsx(mR,{tabs:e,activeTabId:C.id,menuAppearance:j,canSaveFiles:N,onSelectTab:s,onCloseTab:i,onCloseOtherTabs:l,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:m,onPinTab:g,onUnpinTab:x,onSaveTab:v,onSaveAllTabs:y,onTabDragStateChange:D}),a.jsx(cD,{tabs:e,activeTabId:C.id,editorTheme:S,onContentChange:b,onSaveTab:v,canSaveFiles:N,readOnly:M,onRetryTabLoad:R,onSelectTab:s,isTabDragging:I})]})]})}function vi(e){return(e||"").trim().replace(/\\/g,"/").replace(/\/+/g,"/").replace(/^\/+/,"").replace(/\/+$/,"")}function gR(e,t){const s=vi(e),i=vi(t);return s?i?`${s}/${i}`.replace(/\/+/g,"/"):s:i}function xR(e){const t=vi(e);return t?t.split("/").every(i=>i.length>0&&i!=="."&&i!==".."):!1}function bR(e){const t=vi(e);return t==="assets"||t.startsWith("assets/")}function Nl(e){return e?Array.from(e.types??[]).includes("Files"):!1}async function vR(e){const s=Array.from(e.items??[]).filter(i=>i.kind==="file").map(i=>i.webkitGetAsEntry?.()??null).filter(i=>!!i);return s.length>0?(await Promise.all(s.map(l=>dj(l)))).flat():Array.from(e.files??[]).filter(i=>!!i).map(i=>({file:i,relativePath:i.name}))}async function dj(e){if(e.isFile)try{const l=await new Promise((d,m)=>{if(!e.file){m(new Error("Dropped file entry is missing a file() reader."));return}e.file(d,m)}),u=wR(e.fullPath||l.name);return u?[{file:l,relativePath:u}]:[]}catch{return[]}if(!e.isDirectory||!e.createReader)return[];const t=e.createReader(),s=await yR(t);return(await Promise.all(s.map(l=>dj(l)))).flat()}async function yR(e){const t=[];for(;;){const s=await new Promise((i,l)=>e.readEntries(i,l));if(!s.length)break;t.push(...s)}return t}function wR(e){return vi(e)}const Ey={surface:"rgb(var(--sys-color-surface))",border:"rgb(var(--sys-color-border))",heading:"rgb(var(--sys-color-fg))",label:"rgb(var(--sys-color-fg-muted))",textPrimary:"rgb(var(--sys-color-fg))",textMuted:"rgb(var(--sys-color-fg-muted))",rowHover:"rgb(var(--sys-color-surface-muted))",folderActiveBg:"transparent",selectionBg:"rgb(var(--sys-color-surface-muted))",selectionText:"rgb(var(--sys-color-fg))",badgeActive:"rgb(var(--sys-color-ring))",badgeOpen:"rgb(var(--sys-color-fg-muted))",folderIcon:"rgb(var(--sys-color-ring))",folderIconActive:"rgb(var(--sys-color-ring))",chevronIdle:"rgb(var(--sys-color-fg-muted))",chevronActive:"rgb(var(--sys-color-fg))"},jR={dark:Ey,light:Ey},SR="focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card";function kR(e){const t=new Set,s=i=>{i.kind==="folder"&&(t.add(i.id),i.children?.forEach(s))};return s(e),t}function Zh(e,t,s){const i=new Set;for(const l of e)t.has(l)&&i.add(l);return i.add(s),i}function _y(e,t){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}function NR({width:e,tree:t,activeFileId:s="",openFileIds:i=[],onSelectFile:l,theme:u,canUploadFiles:d=!1,onUploadFiles:m,isUploadingFiles:g=!1,canCreateFile:x=!1,canCreateFolder:b=!1,isCreatingEntry:v=!1,onCreateFile:y,onCreateFolder:k,canDeleteFile:S=!1,deletingFilePath:j=null,canDeleteFolder:N=!1,deletingFolderPath:M=null,onDeleteFile:_,onDeleteFolder:R,expandedStorageKey:q,onHide:$}){const I=h.useMemo(()=>q?Xs(q):null,[q]),D=h.useMemo(()=>kR(t),[t]),C=h.useMemo(()=>{const ye=new Map,_e=Be=>{ye.set(Be.id,Be),Be.children?.forEach(_e)};return _e(t),ye},[t]),[L,V]=h.useState(()=>{const ye=I?.get()??null,_e=ye?new Set(ye):new Set([t.id]);return Zh(_e,D,t.id)}),[K,A]=h.useState(null),[X,fe]=h.useState(null),[Se,z]=h.useState(null),[H,ae]=h.useState(!1),[ge,ce]=h.useState(null),T=h.useRef(0),G=h.useRef(null),ue=h.useRef(null);h.useEffect(()=>{fe(null),z(null),ce(null),ae(!1),T.current=0,ue.current=null,G.current&&(clearTimeout(G.current),G.current=null)},[t.id]),h.useEffect(()=>{V(ye=>{const _e=Zh(ye,D,t.id);return _y(ye,_e)?ye:_e})},[D,t.id]),h.useEffect(()=>{if(!I)return;const ye=I.get();if(!ye)return;const _e=Zh(new Set(ye),D,t.id);V(Be=>_y(Be,_e)?Be:_e)},[I,D,t.id]),h.useEffect(()=>{if(!I)return;const ye=Array.from(L).filter(_e=>_e!==t.id&&D.has(_e));I.set(ye)},[L,I,D,t.id]);const Y=h.useCallback(ye=>{V(_e=>{const Be=new Set(_e);return Be.has(ye)?Be.delete(ye):Be.add(ye),Be.add(t.id),Be})},[t.id]),ee=h.useCallback((ye,_e)=>{V(Be=>{const ht=new Set(Be);return _e?ht.add(ye):ye!==t.id&&ht.delete(ye),ht.add(t.id),ht})},[t.id]),Z=h.useCallback(()=>{G.current&&(clearTimeout(G.current),G.current=null),ue.current=null},[]),te=h.useCallback(ye=>{const _e=ye?.closest?.("[data-explorer-drop-row]"),Be=_e?.dataset.explorerDropPath??"",ht=_e?.dataset.explorerDropRow??t.id;return{folderPath:Be===t.id?"":Be,rowId:ht}},[t.id]),Q=h.useCallback(ye=>{Nl(ye.dataTransfer)&&(T.current+=1,ae(!0))},[]),se=h.useCallback(ye=>{H&&(T.current=Math.max(0,T.current-1),T.current===0&&(ae(!1),ce(null),Z()))},[Z,H]),ke=h.useCallback(ye=>{if(!Nl(ye.dataTransfer))return;ye.preventDefault(),ye.dataTransfer.dropEffect=d&&m&&!g?"copy":"none",H||ae(!0);const _e=te(ye.target);ce(ht=>ht?.rowId===_e.rowId&&ht.folderPath===_e.folderPath?ht:_e);const Be=C.get(_e.rowId);if(!Be||Be.kind!=="folder"){Z();return}if(L.has(Be.id)){Z();return}ue.current===Be.id&&G.current||(Z(),ue.current=Be.id,G.current=setTimeout(()=>{ee(Be.id,!0),Z()},650))},[d,Z,H,L,g,C,m,te,ee]),Me=h.useCallback(async ye=>{if(!Nl(ye.dataTransfer))return;ye.preventDefault(),ye.stopPropagation(),ae(!1),ce(null),T.current=0,Z();const _e=await vR(ye.dataTransfer);if(!d||!m||g||_e.length===0)return;const Be=te(ye.target);m(Be.folderPath,_e)},[d,Z,g,m,te]),We=h.useCallback(()=>{V(new Set([t.id]))},[t.id]),st=h.useCallback((ye,_e)=>{z(null),V(Be=>{const ht=new Set(Be);return ht.add(t.id),ht.add(ye),ht}),fe({parentId:ye,kind:_e})},[t.id]),Ve=h.useCallback(async(ye,_e,Be)=>{const ht=_e.trim();if(!ht){z("Name cannot be empty.");return}const it=Be==="folder"?k:y;if(it)try{z(null),await it(ye===t.id?"":ye,ht),fe(null)}catch(bn){const Dt=bn instanceof Error?bn.message:"Unable to create entry.";z(Dt)}},[y,k,t.id]),$e=h.useCallback(()=>{fe(null),z(null)},[]),gt=h.useCallback((ye,_e)=>{ye.preventDefault(),A({node:_e,position:{x:ye.clientX,y:ye.clientY}})},[]),xt=h.useCallback(async ye=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(ye);return}catch{}if(typeof document>"u")return;const _e=document.createElement("textarea");_e.value=ye,_e.setAttribute("readonly","true"),_e.style.position="absolute",_e.style.left="-9999px",document.body.appendChild(_e),_e.select(),document.execCommand("copy"),document.body.removeChild(_e)},[]),Oe=h.useCallback(ye=>{_&&(_(ye),A(null))},[_]),Qe=h.useCallback(ye=>{R&&(R(ye),A(null))},[R]),O=h.useMemo(()=>{if(!K)return[];const{node:ye}=K,_e={open:"Enter",newFile:"Ctrl+N",newFolder:"Ctrl+Shift+N",copyPath:"Ctrl+K Ctrl+C",collapseAll:"Ctrl+K Ctrl+0",delete:"Delete"};if(ye.kind==="file")return[{id:"open-file",label:"Open",icon:a.jsx(AR,{}),shortcut:_e.open,onSelect:()=>l(ye.id)},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:a.jsx(Ty,{}),shortcut:_e.copyPath,onSelect:()=>{xt(ye.id)}},{id:"delete-file",label:"Delete",icon:a.jsx(Dy,{}),shortcut:_e.delete,disabled:!S||!_,onSelect:()=>Oe(ye.id)}];const Be=L.has(ye.id);return[{id:"new-file",label:"New File",icon:a.jsx(hj,{}),shortcut:_e.newFile,disabled:!x||!y,onSelect:()=>{!x||!y||(st(ye.id,"file"),A(null))}},{id:"new-folder",label:"New Folder",icon:a.jsx(Sm,{}),shortcut:_e.newFolder,disabled:!b||!k,onSelect:()=>{!b||!k||(st(ye.id,"folder"),A(null))}},{id:"toggle-folder",label:Be?"Collapse Folder":"Expand Folder",icon:Be?a.jsx(RR,{}):a.jsx(OR,{}),onSelect:()=>ee(ye.id,!Be)},{id:"collapse-all",label:"Collapse All",icon:a.jsx(zR,{}),shortcut:_e.collapseAll,dividerAbove:!0,onSelect:()=>We()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:a.jsx(Ty,{}),shortcut:_e.copyPath,onSelect:()=>{xt(ye.id)}},{id:"delete-folder",label:"Delete Folder",icon:a.jsx(Dy,{}),shortcut:_e.delete,disabled:!N||!R,onSelect:()=>Qe(ye.id)}]},[K,l,xt,S,_,L,ee,We,x,b,y,k,st,N,R,Qe,Oe]),U=jR[u],ne=SR,be=h.useMemo(()=>t.children??[],[t]),Ne=u==="dark"?"dark":"light",Ce=h.useMemo(()=>{if(!H)return null;const ye=ge?.folderPath??"";return ye||"root"},[H,ge?.folderPath]),ze=d&&!!m&&!g;return a.jsxs(a.Fragment,{children:[a.jsxs("aside",{className:"flex h-full min-h-0 flex-col border-r text-[13px]",style:{width:e,backgroundColor:U.surface,borderColor:U.border,color:U.textPrimary},"aria-label":"Config files explorer",children:[a.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",style:{borderColor:U.border,backgroundColor:U.rowHover},children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em]",style:{color:U.heading},children:"Explorer"}),g?a.jsxs("div",{className:"flex items-center gap-1 text-[11px]",style:{color:U.label},children:[a.jsx("span",{className:"inline-flex h-2.5 w-2.5 animate-spin rounded-full border border-current border-t-transparent","aria-hidden":!0}),a.jsx("span",{className:"font-medium",children:"Uploading"})]}):null]}),a.jsx("button",{type:"button",onClick:$,"aria-label":"Hide explorer",className:re("flex h-7 w-7 items-center justify-center rounded-md text-muted-foreground transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","hover:bg-muted hover:text-foreground"),children:a.jsx(TR,{})})]}),a.jsxs("nav",{className:"relative flex-1 overflow-auto px-2 py-2","aria-label":"Workspace files tree",onDragEnter:Q,onDragLeave:se,onDragOver:ke,onDrop:Me,children:[a.jsxs("ul",{className:"space-y-0.5",children:[be.map(ye=>a.jsx(fj,{node:ye,parentId:t.id,depth:0,expanded:L,activeFileId:s,openFileIds:i,onToggleFolder:Y,onSelectFile:l,tokens:U,theme:u,focusRingClass:ne,onContextMenu:gt,editing:X,onSubmitCreateEntry:Ve,onCancelCreateEntry:$e,createError:Se,isCreatingEntry:v,deletingFilePath:j,deletingFolderPath:M,onClearCreateError:()=>z(null),dropActive:H,dropTargetRowId:ge?.rowId??null},ye.id)),X?.parentId===t.id?a.jsx("li",{className:"pl-2",children:a.jsx(mj,{appearance:u,icon:X.kind==="folder"?a.jsx(Sm,{}):void 0,placeholder:X.kind==="folder"?"new_folder":"new_file.py",onSubmit:ye=>Ve(t.id,ye,X.kind),onCancel:$e,onChange:()=>z(null),isSubmitting:v,error:Se})}):null]}),H?a.jsx("div",{className:re("pointer-events-none absolute inset-2 rounded-xl border border-dashed p-3 transition",ze?"opacity-100":"opacity-90"),style:{borderColor:U.badgeActive,backgroundColor:"rgb(var(--sys-color-surface) / 0.85)"},"aria-hidden":!H,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:re("inline-flex h-9 w-9 items-center justify-center rounded-full border border-border/60 bg-card/80"),style:{color:U.badgeActive},children:a.jsx(DR,{})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-[13px] font-semibold",style:{color:U.textPrimary},children:ze?"Drop to upload":"Upload disabled"}),a.jsx("p",{className:"mt-0.5 text-[12px]",style:{color:U.textMuted},children:ze?a.jsxs(a.Fragment,{children:["Upload to ",a.jsx("span",{className:"font-semibold",children:Ce})]}):g?"Uploads are in progress.":"Uploads arent available right now."})]})]})}):null]})]}),a.jsx(hs,{open:!!K,position:K?K.position:null,onClose:()=>A(null),items:O,appearance:Ne})]})}function fj({node:e,parentId:t,depth:s,expanded:i,activeFileId:l,openFileIds:u,onToggleFolder:d,onSelectFile:m,tokens:g,theme:x,focusRingClass:b,onContextMenu:v,editing:y,onSubmitCreateEntry:k,onCancelCreateEntry:S,createError:j,isCreatingEntry:N,deletingFilePath:M,deletingFolderPath:_,onClearCreateError:R,dropActive:q,dropTargetRowId:$}){const D={paddingLeft:8+s*16,"--tree-hover-bg":g.rowHover},C=q&&$===e.id;if(e.kind==="folder"){const fe=i.has(e.id),Se=_===e.id,z=y?.parentId===e.id,H={...D,color:fe?g.textPrimary:g.textMuted};return fe&&g.folderActiveBg!=="transparent"&&(H.backgroundColor=g.folderActiveBg),C&&(H.outline=`1px dashed ${g.badgeActive}`,H.outlineOffset=-1,H.backgroundColor=g.rowHover),a.jsxs("li",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>d(e.id),onContextMenu:ae=>v(ae,e),"data-explorer-drop-row":e.id,"data-explorer-drop-path":e.id,className:re("group flex w-full items-center gap-2 rounded-md px-2 py-1 text-left font-medium transition hover:bg-[var(--tree-hover-bg)]",b,Se&&"opacity-60"),style:H,"aria-expanded":fe,disabled:Se,children:[a.jsx(ER,{open:fe,tokens:g}),a.jsx(_R,{open:fe,tokens:g}),a.jsx("span",{className:"truncate",children:e.name})]}),fe?a.jsxs("ul",{className:"mt-0.5 space-y-0.5",children:[e.children?.map(ae=>a.jsx(fj,{node:ae,parentId:e.id,depth:s+1,expanded:i,activeFileId:l,openFileIds:u,onToggleFolder:d,onSelectFile:m,tokens:g,theme:x,focusRingClass:b,onContextMenu:v,editing:y,onSubmitCreateEntry:k,onCancelCreateEntry:S,createError:j,isCreatingEntry:N,deletingFilePath:M,deletingFolderPath:_,onClearCreateError:R,dropActive:q,dropTargetRowId:$},ae.id)),z?a.jsx("li",{className:"pl-2",children:a.jsx(mj,{appearance:x,icon:y?.kind==="folder"?a.jsx(Sm,{}):void 0,placeholder:y?.kind==="folder"?"new_folder":"new_file.py",onSubmit:ae=>{y&&k(e.id,ae,y.kind)},onCancel:S,onChange:R,isSubmitting:N,error:j})}):null]}):null]})}const L=l===e.id,V=u.includes(e.id),K=M===e.id,A=CR(e.name,e.language),X={...D,color:g.textPrimary};return L&&(X.backgroundColor=g.selectionBg,X.color=g.selectionText),C&&(X.outline=`1px dashed ${g.badgeActive}`,X.outlineOffset=-1,L||(X.backgroundColor=g.rowHover)),a.jsx("li",{children:a.jsxs("button",{type:"button",onClick:()=>m(e.id),onContextMenu:fe=>v(fe,e),"data-explorer-drop-row":e.id,"data-explorer-drop-path":t,className:re("flex w-full items-center gap-2 rounded-md px-2 py-1 text-left transition hover:bg-[var(--tree-hover-bg)]",b,L&&"shadow-inner shadow-black/10",K&&"opacity-60"),style:X,disabled:K,children:[a.jsx("span",{className:"inline-flex w-4 justify-center",children:a.jsx(MR,{className:re(A,V&&!L&&"opacity-90",!V&&!L&&"opacity-75")})}),a.jsx("span",{className:re("flex-1 truncate",L&&"font-semibold"),children:e.name}),V&&!L?a.jsx("span",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:g.badgeOpen}}):null]})})}const My={json:"text-filetype-json",py:"text-filetype-py",ts:"text-filetype-ts",tsx:"text-filetype-tsx",js:"text-filetype-js",jsx:"text-filetype-jsx",md:"text-filetype-md",env:"text-filetype-env",txt:"text-filetype-txt",lock:"text-filetype-lock"};function CR(e,t){if(t==="python")return"text-filetype-py";const s=e.toLowerCase().split("."),i=s.length>1?s.pop()??"":"";return i&&My[i]?My[i]:"text-muted-foreground"}function ER({open:e,tokens:t}){return a.jsx("svg",{className:re("h-3 w-3 flex-shrink-0 transition-transform duration-150",e?"rotate-90":void 0),viewBox:"0 0 10 10","aria-hidden":!0,children:a.jsx("path",{d:"M3 1l4 4-4 4",stroke:e?t.chevronActive:t.chevronIdle,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}function _R({open:e,tokens:t}){return a.jsx("svg",{className:"h-4 w-4 flex-shrink-0 transition-colors",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M3.5 5.5h4l1.5 1.5H16a1 1 0 0 1 1 1V15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6.5a1 1 0 0 1 1-1Z",stroke:e?t.folderIconActive:t.folderIcon,strokeWidth:1.4,strokeLinejoin:"round",fill:e?t.folderIconActive:"none",opacity:e?.25:1})})}function MR({className:e}){return a.jsxs("svg",{className:re("h-4 w-4 flex-shrink-0",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M6 3h4l4 4v9a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M10 3v4h4",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})]})}function TR(){return a.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M3 3h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M3 13h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M3 8h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M11 5l2 3-2 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function DR(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M10 12V3",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M6.25 6.75 10 3l3.75 3.75",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M4 12.5v2A2.5 2.5 0 0 0 6.5 17h7A2.5 2.5 0 0 0 16 14.5v-2",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}const Ba="h-4 w-4 text-current opacity-80";function AR(){return a.jsx("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M3 4.5h3l1 1H13a1 1 0 0 1 1 1V12.5a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}function Ty(){return a.jsxs("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M6 4.5h5.5a1 1 0 0 1 1 1V13",stroke:"currentColor",strokeWidth:"1.1",strokeLinecap:"round"}),a.jsx("rect",{x:"3.5",y:"2.5",width:"6",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.1",fill:"none"})]})}function RR(){return a.jsx("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M5 6l3 3 3-3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function hj(){return a.jsxs("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M3.5 4.5h4.5l3 3V13a1 1 0 0 1-1 1h-6.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),a.jsx("path",{d:"M11 7.5h-2v-2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M8.5 7.5h2.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Sm(){return a.jsxs("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M3.5 5h3.5l1.2 1.4H12.5a1 1 0 0 1 1 1V12a1 1 0 0 1-1 1h-9a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none",strokeLinejoin:"round"}),a.jsx("path",{d:"M8 8v3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M6.5 9.5h3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function OR(){return a.jsx("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:a.jsx("path",{d:"M5 10l3-3 3 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function zR(){return a.jsxs("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M3 5h10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M3 8h6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M3 11h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Dy(){return a.jsxs("svg",{className:Ba,viewBox:"0 0 16 16","aria-hidden":!0,children:[a.jsx("path",{d:"M6 3.5h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M4 4.5h8",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M5.5 4.5v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M6.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M9.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function mj({appearance:e,onSubmit:t,onCancel:s,onChange:i,isSubmitting:l,error:u,placeholder:d="new_file.py",icon:m}){const[g,x]=h.useState(""),b=h.useRef(null);h.useEffect(()=>{b.current?.focus(),b.current?.select()},[]);const v=h.useCallback(()=>{t(g.trim())},[t,g]);return a.jsxs("div",{className:"rounded-md border border-border bg-muted px-2 py-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex w-4 justify-center text-brand-500",children:m??a.jsx(hj,{})}),a.jsx("input",{ref:b,value:g,onChange:k=>{x(k.target.value),i?.()},onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),v()),k.key==="Escape"&&(k.preventDefault(),s())},className:"flex-1 rounded-sm border border-transparent bg-card/80 px-2 py-1 text-[13px] text-foreground outline-none focus:border-ring",placeholder:d,disabled:l}),a.jsx("button",{type:"button",className:re("rounded-sm px-2 py-1 text-[12px] font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",l?"cursor-wait bg-muted text-muted-foreground":"bg-brand-600 text-on-brand hover:bg-brand-500"),onClick:v,disabled:l,children:l?"Creating":"Create"}),a.jsx("button",{type:"button",className:"rounded-sm px-2 py-1 text-[12px] font-semibold text-muted-foreground transition hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",onClick:s,disabled:l,children:"Cancel"})]}),a.jsx("div",{className:re("mt-1 text-[11px]","text-muted-foreground"),children:"Enter a name and press Enter. Escape to cancel."}),u?a.jsx("div",{className:"mt-1 text-[11px] font-semibold text-danger-500",children:u}):null]})}function Ay({orientation:e,onPointerDown:t,onDoubleClick:s,onToggle:i,collapsed:l}){const u=e==="vertical",d=u?"":l?"":"";return a.jsxs("div",{role:"separator","aria-orientation":e,className:re("relative select-none bg-transparent group",u?"w-4 cursor-col-resize":"h-3 cursor-row-resize"),style:{touchAction:"none"},onPointerDown:t,onDoubleClick:s,title:u?"Drag to resize":"Drag to resize  Double-click to hide/show console",children:[a.jsx("span",{className:"sr-only",children:"Resize panel"}),a.jsx("div",{className:re("absolute inset-0 flex items-center justify-center",u?"px-[6px]":"py-[6px]"),"aria-hidden":!0,children:a.jsx("div",{className:re(u?"h-full w-px":"h-px w-full","bg-muted-foreground/50")})}),i&&!u?a.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),i()},className:"absolute right-1/2 top-1/2 h-5 w-5 -translate-y-1/2 translate-x-[40%] rounded bg-foreground/70 text-[10px] text-background opacity-0 shadow-sm transition-opacity group-hover:opacity-100 focus:opacity-100 focus:outline-none","aria-label":l?"Show console":"Hide console",title:l?"Show console":"Hide console",children:d}):null]})}const LR={json:"json",py:"python",ts:"typescript",tsx:"typescriptreact",js:"javascript",jsx:"javascriptreact",env:"dotenv",md:"markdown",yml:"yaml",yaml:"yaml",toml:"toml"};function Ry(e){const t=e.root||e.prefix||e.entries[0]?.parent||"",s=e.entries.length>0;if(!t&&!s)return null;const i=Cl(t),l={id:t,name:Oy(t),kind:"folder",children:[]},u=new Map([[t,l]]),d=g=>{if(g.length===0)return l;const x=Cl(g),b=x===i?t:x,v=u.get(b);if(v)return v;const y={id:b,name:Oy(b),kind:"folder",children:[]};u.set(b,y);const k=b===t?"":BR(b)??t,S=d(k);return Wh(S,y),y},m=[...e.entries].sort((g,x)=>g.depth!==x.depth?g.depth-x.depth:g.path.localeCompare(x.path));for(const g of m){const x=g.parent&&g.parent.length>0?Cl(g.parent):t,b=d(x);if(g.kind==="dir"){const y=d(g.path);y.name=g.name,y.metadata={size:g.size??null,modifiedAt:g.mtime,contentType:g.content_type,etag:g.etag},y!==b&&Wh(b,y);continue}const v={id:g.path,name:g.name,kind:"file",language:$R(g.path),metadata:{size:g.size??null,modifiedAt:g.mtime,contentType:g.content_type,etag:g.etag}};u.set(g.path,v),Wh(b,v)}return l}function Wh(e,t){const s=e.children??[],i=s.some(l=>l.id===t.id)?s.map(l=>l.id===t.id?t:l):[...s,t];e.children=i.sort(UR)}function UR(e,t){return e.kind!==t.kind?e.kind==="folder"?-1:1:e.name.localeCompare(t.name)}function $R(e){const t=e.toLowerCase(),s=t.lastIndexOf(".");if(s===-1)return;const i=t.slice(s+1);return LR[i]}function Oy(e){const t=Cl(e);if(!t)return"";const s=t.lastIndexOf("/");return s>=0?t.slice(s+1):t}function BR(e){const t=Cl(e);if(!t)return;const s=t.lastIndexOf("/");return s===-1?"":t.slice(0,s)}function Cl(e){return e?e.replace(/\/+$/,""):""}function Rr(e,t){if(e.id===t)return e;if(!e.children)return null;for(const s of e.children){const i=Rr(s,t);if(i)return i}return null}function cp(e){if(e.kind==="file")return e;if(!e.children)return null;for(const t of e.children){const s=cp(t);if(s)return s}return null}function qR({tree:e,initialActiveFileId:t,loadFile:s,persistence:i}){const[l,u]=h.useState([]),[d,m]=h.useState(""),[g,x]=h.useState([]),[b,v]=h.useState(()=>!i),[y,k]=h.useState(!1),S=h.useRef(new Set),j=h.useRef([]),N=h.useRef(""),M=h.useRef([]),_=h.useCallback(Y=>{m(ee=>ee===Y?ee:Y),x(ee=>{const Z=ee.filter(Q=>j.current.some(se=>se.id===Q));if(!Y)return Z;const te=Z.filter(Q=>Q!==Y);return[Y,...te]})},[]);h.useEffect(()=>{N.current=d},[d]),h.useEffect(()=>{M.current=g},[g]),h.useEffect(()=>{if(!e){u([]),m(""),x([]);return}u(ee=>ee.filter(Z=>!!Rr(e,Z.id)).map(Z=>{const te=Rr(e,Z.id);return!te||te.kind!=="file"?Z:{...Z,name:te.name,language:te.language,metadata:te.metadata}}));const Y=N.current;(!Y||!Rr(e,Y))&&_("")},[e,_]);const R=h.useMemo(()=>l.find(Y=>Y.id===d)??l[0]??null,[d,l]),q=h.useCallback(async Y=>{if(!j.current.some(Z=>Z.id===Y))return;let ee=!1;if(u(Z=>Z.map(te=>te.id!==Y?te:te.status==="ready"?(ee=!0,te):{...te,status:"loading",error:null})),!ee)try{const Z=await s(Y);u(te=>te.map(Q=>Q.id===Y?{...Q,initialContent:Z.content,content:Z.content,status:"ready",error:null,etag:Z.etag??null,saving:!1,saveError:null}:Q))}catch(Z){const te=Z instanceof Error?Z.message:"Unable to load file.";u(Q=>Q.map(se=>se.id===Y?{...se,status:"error",error:te}:se))}},[s]),$=h.useCallback((Y,ee)=>{if(!e)return;const Z=Rr(e,Y);!Z||Z.kind!=="file"||(u(te=>{if(te.some(se=>se.id===Y))return te;const Q={id:Z.id,name:Z.name,language:Z.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:Z.metadata,pinned:!1,saving:!1,saveError:null,lastSavedAt:null};return[...te,Q]}),(ee?.activate??!0)&&_(Y))},[e,_]);h.useEffect(()=>{if(b||!i||!e){i||v(!0);return}const Y=i.get(),Z=(Y?.openTabs??[]).map(te=>typeof te=="string"?{id:te,pinned:!1}:te).filter(te=>!!(te&&te.id));if(Z.length>0){const te=[];for(const Q of Z){const se=Rr(e,Q.id);!se||se.kind!=="file"||te.push({id:se.id,name:se.name,language:se.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:se.metadata,pinned:!!Q.pinned,saving:!1,saveError:null,lastSavedAt:null})}if(te.length>0){u(te);const Q=(Y?.activeTabId&&te.some(Me=>Me.id===Y.activeTabId)?Y.activeTabId:te[0]?.id)??"";m(Q);const ke=(Y?.mru&&Y.mru.length>0?Y.mru:te.map(Me=>Me.id)).filter(Me=>te.some(We=>We.id===Me));x(ke),k(!0)}}v(!0)},[b,i,e]),h.useEffect(()=>{if(!e||!b)return;if(l.length>0){y||k(!0);return}if(y)return;const Y=t&&Rr(e,t)||cp(e);if(!Y){k(!0);return}$(Y.id),k(!0)},[e,t,$,b,l.length,y]);const I=h.useCallback(Y=>{$(Y)},[$]),D=h.useCallback(Y=>{_(Y),u(ee=>ee.map(Z=>Z.id===Y&&Z.status==="error"?{...Z,status:"loading",error:null}:Z))},[_]),C=h.useCallback(Y=>{u(ee=>{const Z=ee.filter(se=>se.id!==Y),te=N.current,Q=te===Y?Z[Z.length-1]?.id??"":Z.some(se=>se.id===te)?te:Z[Z.length-1]?.id??"";return _(Q),Z})},[_]),L=h.useCallback(Y=>{u(ee=>!ee.some(Z=>Z.id===Y)||ee.length<=1?ee:(_(Y),ee.filter(Z=>Z.id===Y)))},[_]),V=h.useCallback(Y=>{u(ee=>{const Z=ee.findIndex(se=>se.id===Y);if(Z===-1||Z===ee.length-1)return ee;const te=ee.slice(0,Z+1),Q=te.some(se=>se.id===N.current)?N.current:Y;return _(Q),te})},[_]),K=h.useCallback(()=>{u([]),m(""),x([])},[]),A=h.useCallback((Y,ee)=>{u(Z=>{if(Z.length<=1)return Z;const te=Z.findIndex(Ve=>Ve.id===Y);if(te===-1)return Z;const Q=Z.filter((Ve,$e)=>$e!==te),se=Math.max(0,Math.min(ee,Q.length)),ke=[],Me=[],We=Z[te];if(Q.forEach(Ve=>{Ve.pinned?ke.push(Ve):Me.push(Ve)}),(se<=ke.length?"pinned":"regular")==="pinned"){const Ve=Math.max(0,Math.min(se,ke.length));ke.splice(Ve,0,{...We,pinned:!0})}else{const Ve=Math.max(0,Math.min(se-ke.length,Me.length));Me.splice(Ve,0,{...We,pinned:!1})}return[...ke,...Me]})},[]),X=h.useCallback(Y=>{if(S.current.has(Y))return;let ee=!1;u(Z=>Z.map(te=>te.id!==Y?te:(ee=!0,{...te,status:"loading",error:null}))),ee&&(S.current.add(Y),q(Y).finally(()=>{S.current.delete(Y)}))},[q]),fe=h.useCallback(Y=>{u(ee=>{const Z=[],te=[];let Q=null;for(const ke of ee){if(ke.id===Y){Q=ke;continue}ke.pinned?Z.push(ke):te.push(ke)}if(!Q||Q.pinned)return ee;const se={...Q,pinned:!0};return[...Z,se,...te]})},[]),Se=h.useCallback(Y=>{u(ee=>{const Z=[],te=[];let Q=null;for(const ke of ee){if(ke.id===Y){Q=ke;continue}ke.pinned?Z.push(ke):te.push(ke)}if(!Q||!Q.pinned)return ee;const se={...Q,pinned:!1};return[...Z,se,...te]})},[]),z=h.useCallback((Y,ee)=>{ee?fe(Y):Se(Y)},[fe,Se]),H=h.useCallback(Y=>{const ee=M.current.filter(We=>j.current.some(st=>st.id===We));if(ee.length<=1)return;const Z=N.current||ee[0],te=ee.indexOf(Z),ke=((te>=0?te:0)+(Y==="forward"?1:-1)+ee.length)%ee.length,Me=ee[ke];Me&&Me!==Z&&_(Me)},[_]),ae=h.useCallback((Y,ee)=>{u(Z=>Z.map(te=>te.id===Y?{...te,content:ee,status:te.status==="ready"?te.status:"ready",error:null,saveError:null}:te))},[]),ge=h.useCallback(Y=>{u(ee=>ee.map(Z=>Z.id===Y?{...Z,saving:!0,saveError:null}:Z))},[]),ce=h.useCallback((Y,ee)=>{u(Z=>Z.map(te=>{if(te.id!==Y)return te;const Q=ee?.metadata??te.metadata??null,se=ee?.etag??te.etag??null,ke=ee?.savedContent??te.content;return{...te,saving:!1,saveError:null,initialContent:ke,etag:se,metadata:Q&&{...Q,etag:Q.etag??se??null},lastSavedAt:new Date().toISOString()}}))},[]),T=h.useCallback((Y,ee)=>{u(Z=>Z.map(te=>te.id===Y?{...te,saving:!1,saveError:ee}:te))},[]),G=h.useCallback((Y,ee)=>{u(Z=>Z.map(te=>te.id!==Y?te:{...te,content:ee.content,initialContent:ee.content,status:"ready",error:null,saving:!1,saveError:null,etag:ee.etag??te.etag??null,metadata:ee.metadata??te.metadata}))},[]),ue=h.useMemo(()=>l.some(Y=>Y.status==="ready"&&Y.content!==Y.initialContent),[l]);return h.useEffect(()=>{j.current=l},[l]),h.useEffect(()=>{x(Y=>{const ee=Y.filter(Z=>l.some(te=>te.id===Z));return ee.length===Y.length?Y:ee})},[l]),h.useEffect(()=>{const Y=new Set(l.map(ee=>ee.id));for(const ee of S.current)Y.has(ee)||S.current.delete(ee);for(const ee of l){if(ee.status!=="loading"||S.current.has(ee.id))continue;S.current.add(ee.id),q(ee.id).finally(()=>{S.current.delete(ee.id)})}},[l,q]),h.useEffect(()=>{if(!i||!b)return;const Y=[d,...g].filter(ee=>!!ee).filter((ee,Z,te)=>te.indexOf(ee)===Z).filter(ee=>l.some(Z=>Z.id===ee));i.set({openTabs:l.map(ee=>({id:ee.id,pinned:!!ee.pinned})),activeTabId:d||null,mru:Y})},[i,l,d,g,b]),{tree:e,tabs:l,activeTabId:d,activeTab:R,openFile:I,selectTab:D,closeTab:C,closeOtherTabs:L,closeTabsToRight:V,closeAllTabs:K,moveTab:A,reloadTab:X,pinTab:fe,unpinTab:Se,toggleTabPin:z,selectRecentTab:H,updateContent:ae,beginSavingTab:ge,completeSavingTab:ce,failSavingTab:T,replaceTabContent:G,isDirty:ue}}function pj(e){if(e instanceof URLSearchParams)return new URLSearchParams(e);if(typeof e=="string"||Array.isArray(e))return new URLSearchParams(e);const t=new URLSearchParams;for(const[s,i]of Object.entries(e)){if(i==null)continue;const l=Array.isArray(i)?i:[i];for(const u of l)u!=null&&t.append(s,String(u))}return t}const gj=h.createContext(null);function FR({value:e,children:t}){return h.createElement(gj.Provider,{value:e},t)}function PR(){const e=h.useContext(gj),t=Fn(),s=Zt(),i=h.useMemo(()=>new URLSearchParams(t.search),[t.search]),l=h.useCallback((u,d)=>{const m=typeof u=="function"?u(new URLSearchParams(i)):u,x=pj(m).toString(),b=`${t.pathname}${x?`?${x}`:""}${t.hash}`;s(b,{replace:d?.replace})},[t.hash,t.pathname,s,i]);return[e?.params??i,e?.setSearchParams??l]}const Nu={pane:"terminal",console:"closed"},IR=["pane","console","file"],HR=["tab","view","runId"];function VR(e){return e==="open"?"open":"closed"}function ZR(e){return e==="problems"?"problems":"terminal"}function xj(e){const t=e instanceof URLSearchParams?e:new URLSearchParams(e),s=t.get("pane"),i=t.get("console"),l=t.get("file");return{...{pane:ZR(s),console:VR(i),fileId:l??void 0},present:{pane:t.has("pane"),console:t.has("console"),fileId:t.has("file")}}}function Qh(e,t){const s=xj(e),i={...Nu,...s,...t},l=new URLSearchParams(e);for(const u of IR)l.delete(u);for(const u of HR)l.delete(u);return i.pane!==Nu.pane&&l.set("pane",i.pane),i.console!==Nu.console&&l.set("console",i.console),i.fileId&&i.fileId.length>0&&l.set("file",i.fileId),l}function WR(){const[e,t]=PR(),s=h.useMemo(()=>xj(e),[e]),i=h.useCallback(d=>{s.fileId===d||!d&&!s.present.fileId||t(m=>Qh(m,{fileId:d??void 0}),{replace:!0})},[t,s.fileId,s.present.fileId]),l=h.useCallback(d=>{s.pane!==d&&t(m=>Qh(m,{pane:d}),{replace:!0})},[t,s.pane]),u=h.useCallback(d=>{s.console!==d&&t(m=>Qh(m,{console:d}),{replace:!0})},[t,s.console]);return{fileId:s.fileId??Nu.fileId,pane:s.pane,console:s.console,consoleExplicit:s.present.console,setFileId:i,setPane:l,setConsole:u}}const QR="You have unsaved changes in the config editor. Are you sure you want to leave?";function KR({isDirty:e,confirm:t=window.confirm,message:s=QR,shouldBypassNavigation:i}){const l=Fn(),u=h.useCallback(d=>!e||i?.()||d.location.pathname===l.pathname?!0:t(s),[t,e,l.pathname,s,i]);h0(u,e),h.useEffect(()=>{if(!e)return;const d=m=>(m.preventDefault(),m.returnValue=s,s);return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[e,s])}function Dr(e,t,s){return Math.min(Math.max(e,t),s)}function zy(e,t){const{onMove:s,onEnd:i,cursor:l}=t;if(typeof window>"u")return;e.preventDefault();const u=e.pointerId,d=e.currentTarget,m=document.body.style.cursor,g=document.body.style.userSelect;let x=null,b=null,v=!0;const y=N=>{if(v){if(v=!1,x!==null&&(cancelAnimationFrame(x),x=null),document.body.style.cursor=m,document.body.style.userSelect=g,window.removeEventListener("pointermove",k),window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",S),d.removeEventListener("lostpointercapture",j),d.hasPointerCapture?.(u))try{d.releasePointerCapture(u)}catch{}i&&i(N)}},k=N=>{!v||N.pointerId!==u||(b=N,x===null&&(x=window.requestAnimationFrame(()=>{x=null,b&&s(b)})))},S=N=>{N.pointerId===u&&y(N)},j=N=>{N.pointerId===u&&y(N)};l&&(document.body.style.cursor=l),document.body.style.userSelect="none";try{d.setPointerCapture(u)}catch{}window.addEventListener("pointermove",k),window.addEventListener("pointerup",S),window.addEventListener("pointercancel",S),d.addEventListener("lostpointercapture",j)}function Lr({open:e,title:t,description:s,confirmLabel:i="Confirm",cancelLabel:l="Cancel",onConfirm:u,onCancel:d,isConfirming:m,children:g,confirmDisabled:x,tone:b="default"}){const v=h.useRef(null);if(h.useEffect(()=>{if(!e)return;const k=j=>{if(j.key==="Escape"&&d(),j.key==="Tab"){const N=v.current;if(!N)return;const M=Array.from(N.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(q=>!q.hasAttribute("disabled"));if(M.length===0)return;const _=M.indexOf(document.activeElement),R=j.shiftKey?_<=0?M.length-1:_-1:_===M.length-1?0:_+1;M[R]?.focus(),j.preventDefault()}};return window.addEventListener("keydown",k),v.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",k)},[d,e]),!e)return null;const y=b==="danger"?{badge:"bg-danger-500/15 text-danger-400",confirmVariant:"danger"}:{badge:"bg-brand-500/10 text-brand-500",confirmVariant:"primary"};return zr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50 px-4",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-overlay/50",onClick:d,"aria-label":"Close dialog"}),a.jsx("div",{className:"relative flex min-h-full items-center justify-center",children:a.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":t,className:"w-full max-w-lg rounded-2xl border border-border bg-card p-6 shadow-2xl",ref:v,children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:re("inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em]",y.badge),children:"Confirm"}),a.jsx("h3",{className:"text-xl font-semibold text-foreground",children:t}),s?a.jsx("p",{className:"text-sm text-muted-foreground",children:s}):null]}),g?a.jsx("div",{className:"mt-4 space-y-3",children:g}):null,a.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[a.jsx(Te,{type:"button",variant:"ghost",onClick:d,disabled:m,children:l}),a.jsx(Te,{type:"button",variant:y.confirmVariant,onClick:u,isLoading:m,disabled:x||m,className:b==="danger"?"hover:bg-danger-600":void 0,children:i})]})]})})]}),document.body)}const GR="inline-flex items-center gap-2 rounded-l-md px-3 py-1.5 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed",YR="inline-flex items-center justify-center rounded-r-md border-l px-2 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed";function XR({label:e,icon:t,disabled:s,isLoading:i,highlight:l,className:u,primaryClassName:d,menuClassName:m,title:g,menuAriaLabel:x="Open menu",menuIcon:b=a.jsx(JR,{}),onPrimaryClick:v,onOpenMenu:y,onContextMenu:k}){const S=h.useRef(null),j=!!(s||i),N=M=>{if(j)return;M.preventDefault();const _=S.current?.getBoundingClientRect();if(_){y?.({x:_.left,y:_.bottom});return}y?.({x:M.clientX,y:M.clientY})};return a.jsxs("div",{role:"group",className:re("inline-flex items-stretch rounded-md shadow-sm",l&&"ring-2 ring-brand-300/70 ring-offset-2 ring-offset-transparent",u),onContextMenu:k,children:[a.jsxs("button",{type:"button",title:g,disabled:j,className:re(GR,d),onClick:M=>{j||v?.(M)},children:[t,a.jsx("span",{className:"whitespace-nowrap",children:e})]}),a.jsx("button",{ref:S,type:"button","aria-label":x,"aria-haspopup":"menu","aria-expanded":"false",disabled:j,className:re(YR,m),onClick:N,children:b})]})}function JR(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:a.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}async function e4(e,t={}){const{signal:s,page:i,pageSize:l,includeTotal:u}=t,d={};typeof i=="number"&&i>0&&(d.page=i),typeof l=="number"&&l>0&&(d.page_size=l),u&&(d.include_total=!0);const{data:m}=await Ie.GET("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e},query:d},signal:s});if(!m)throw new Error("Expected configuration page payload.");return m}async function t4(e,t,s){const{data:i}=await Ie.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}",{params:{path:{workspace_id:e,configuration_id:t}},signal:s});return i??null}async function up(e,t){const{data:s}=await Ie.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/validate",{params:{path:{workspace_id:e,configuration_id:t}}});if(!s)throw new Error("Expected validation payload.");return s}async function n4(e,t){const{data:s}=await Ie.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/publish",{params:{path:{workspace_id:e,configuration_id:t}},body:null});if(!s)throw new Error("Expected configuration payload.");return s}async function r4(e,t){const{data:s}=await Ie.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/archive",{params:{path:{workspace_id:e,configuration_id:t}}});if(!s)throw new Error("Expected configuration payload.");return s}async function s4(e,t,s={}){const{prefix:i,depth:l,include:u,exclude:d,limit:m,pageToken:g,sort:x,order:b,signal:v}=s,{data:y}=await Ie.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files",{params:{path:{workspace_id:e,configuration_id:t},query:{prefix:i??"",depth:l??"infinity",include:u?.length?[...u]:void 0,exclude:d?.length?[...d]:void 0,limit:m,page_token:g??void 0,sort:x,order:b}},signal:v,requestInitExt:{cache:"no-store"}});if(!y)throw new Error("Expected file listing payload.");return y}async function Ly(e,t,s,i){const{data:l}=await Ie.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:t,file_path:s}},headers:{Accept:"application/json"},signal:i,requestInitExt:{cache:"no-store"}});if(!l)throw new Error("Expected file payload.");return l}async function dp(e,t){const{data:s,response:i}=await Ie.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/export",{params:{path:{workspace_id:e,configuration_id:t}},parseAs:"blob"});if(!s)throw new Error("Expected configuration archive payload.");const d=(i?.headers?.get("content-disposition")??"").match(/filename="?([^";]+)"?/i)?.[1];return{blob:s,filename:d??void 0}}async function a4(e,t,s){const i=f4(s.path),l=s.parents?{parents:!0}:{},u=new URLSearchParams;l.parents&&u.set("parents","true");const d=u.toString(),m=s.content,g=s.contentType??(typeof Blob<"u"&&s.content instanceof Blob&&s.content.type?s.content.type:"application/octet-stream"),x=await Zk(`/api/v1/workspaces/${e}/configurations/${t}/files/${i}${d?`?${d}`:""}`,{method:"PUT",body:m,headers:{"Content-Type":g,...s.create?{"If-None-Match":"*"}:s.etag?{"If-Match":s.etag}:{}}});if(!x.ok){const v=await h4(x),y=v?.title??`Request failed with status ${x.status}`;throw new Jt(y,x.status,v)}const b=await x.json().catch(()=>({}));if(!b||!b.path)throw new Error("Expected write response payload.");return b}async function i4(e,t,s,i={}){await Ie.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:t,file_path:s}},headers:i.etag?{"If-Match":i.etag}:void 0})}async function o4(e,t,s){const{data:i}=await Ie.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:t,directory_path:s}}});if(!i)throw new Error("Expected directory response payload.");return i}async function l4(e,t,s,i={}){const l={};i.recursive&&(l.recursive=!0),await Ie.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:t,directory_path:s},query:l}})}async function c4(e,t){const s=new FormData;s.append("display_name",t.displayName),s.append("file",t.file);const{data:i}=await Ie.POST("/api/v1/workspaces/{workspace_id}/configurations/import",{params:{path:{workspace_id:e}},body:s,bodySerializer:()=>s});if(!i)throw new Error("Expected configuration payload.");return i}async function u4(e,t,s){const i=new FormData;i.append("file",s.file);const{data:l}=await Ie.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/import",{params:{path:{workspace_id:e,configuration_id:t}},headers:s.ifMatch?{"If-Match":s.ifMatch}:void 0,body:i,bodySerializer:()=>i});if(!l)throw new Error("Expected configuration payload.");return l}function d4(e){return e.type==="template"?{type:"template"}:{type:"clone",configuration_id:e.configurationId.trim()}}async function bj(e,t){const{data:s}=await Ie.POST("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e}},body:{display_name:t.displayName.trim(),source:d4(t.source)}});if(!s)throw new Error("Expected configuration payload.");return s}function f4(e){return e.split("/").map(t=>encodeURIComponent(t)).join("/")}async function h4(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const fn={root:e=>["workspaces",e,"configurations"],list:(e,t={})=>[...fn.root(e),"list",{...t}],detail:(e,t)=>[...fn.root(e),"detail",t],files:(e,t)=>[...fn.detail(e,t),"files"],file:(e,t,s)=>[...fn.files(e,t),"file",s]};function m4({workspaceId:e,configId:t,enabled:s=!0,...i}){const{prefix:l="",depth:u="infinity",include:d,exclude:m,limit:g,pageToken:x,sort:b="path",order:v="asc"}=i;return sn({queryKey:[...fn.files(e,t),l,u,d?.join("|")??"",m?.join("|")??"",g??"",x??"",b,v],queryFn:({signal:y})=>s4(e,t,{prefix:l,depth:u,include:d,exclude:m,limit:g,pageToken:x,sort:b,order:v,signal:y}),enabled:s&&e.length>0&&t.length>0,staleTime:5e3})}function p4(e,t){const s=Tt();return En({mutationFn:i=>a4(e,t,i),async onSuccess(i,l){await Promise.all([s.invalidateQueries({queryKey:fn.files(e,t)}),s.invalidateQueries({queryKey:fn.file(e,t,l.path)})])}})}function g4(e,t){const s=Tt();return En({mutationFn:i=>i4(e,t,i.path,{etag:i.etag}),async onSuccess(i,l){await Promise.all([s.invalidateQueries({queryKey:fn.files(e,t)}),s.invalidateQueries({queryKey:fn.file(e,t,l.path)})])}})}function x4(e,t){const s=Tt();return En({mutationFn:i=>o4(e,t,i.path),async onSuccess(){await s.invalidateQueries({queryKey:fn.files(e,t)})}})}function b4(e,t){const s=Tt();return En({mutationFn:i=>l4(e,t,i.path,{recursive:i.recursive}),async onSuccess(i,l){await Promise.all([s.invalidateQueries({queryKey:fn.files(e,t)}),s.invalidateQueries({queryKey:fn.file(e,t,l.path)})])}})}const v4=100;function fp({workspaceId:e,enabled:t=!0,page:s=1,pageSize:i=v4}){return sn({queryKey:fn.list(e,{page:s,pageSize:i}),queryFn:({signal:l})=>e4(e,{page:s,pageSize:i,signal:l}),enabled:t&&e.length>0,staleTime:15e3,placeholderData:l=>l})}function vj({workspaceId:e,configurationId:t,enabled:s=!0}){return sn({queryKey:fn.detail(e,t??""),queryFn:({signal:i})=>t?t4(e,t,i):Promise.resolve(null),enabled:s&&e.length>0&&!!t,staleTime:1e4})}function hp(e){const t=Tt();return En({mutationFn:({configurationId:s})=>n4(e,s),async onSuccess(){await t.invalidateQueries({queryKey:fn.root(e)})}})}function yj(e){const t=Tt();return En({mutationFn:({configurationId:s})=>r4(e,s),async onSuccess(){await t.invalidateQueries({queryKey:fn.root(e)})}})}function mp(e){const t=Tt();return En({mutationFn:({sourceConfigurationId:s,displayName:i})=>bj(e,{displayName:i,source:{type:"clone",configurationId:s}}),async onSuccess(){await t.invalidateQueries({queryKey:fn.root(e)})}})}function y4(e){return En({mutationFn:t=>c4(e,t)})}function w4(e,t){return En({mutationFn:s=>u4(e,t,s)})}const j4=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"});function S4(e,t,s={}){const{method:i="POST",headers:l,onProgress:u,signal:d}=s,m=jo(e),g=new XMLHttpRequest,x=new Promise((v,y)=>{g.open(i,m),g.withCredentials=!0,L0(i,l).forEach((S,j)=>{g.setRequestHeader(j,S)}),g.upload.onprogress=S=>{const j=S.lengthComputable?S.total:null,N=j&&j>0?Math.round(S.loaded/j*100):null;u?.({loaded:S.loaded,total:j,percent:N})},g.onload=()=>{const S=g.status,j=g.getResponseHeader("Content-Type")??"",N=g.responseText??"",M=k4(N,j);if(S>=200&&S<300){v({data:M,status:S});return}const _=N4(N,j),R=_?.title??_?.detail??`Request failed with status ${S}`;y(new Jt(R,S,_))},g.onerror=()=>{y(new Jt("Upload failed due to a network error.",g.status||0))},g.onabort=()=>{y(j4)},g.send(t)}),b=()=>{g.abort()};return d&&(d.aborted?g.abort():(d.addEventListener("abort",b),x.finally(()=>d.removeEventListener("abort",b)))),{promise:x,abort:()=>g.abort()}}function k4(e,t){if(!e||!t.includes("application/json"))return null;try{return JSON.parse(e)}catch{return null}}function N4(e,t){if(!(!e||!t.includes("application/json")))try{return JSON.parse(e)}catch{return}}function C4(e,t,s={}){const i=new FormData;return i.append("file",t),S4(`/api/v1/workspaces/${e}/documents`,i,{onProgress:s.onProgress})}async function E4(e,t,s){const{data:i}=await Ie.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/sheets",{params:{path:{workspace_id:e,document_id:t}},signal:s});return i??[]}const wj=h.createContext(null),_4=6e3,M4=7e3,Uy=4;function T4({children:e}){const[t,s]=h.useState([]),[i,l]=h.useState([]),u=h.useCallback(b=>{s(v=>v.filter(y=>y.id!==b)),l(v=>v.filter(y=>y.id!==b))},[]),d=h.useCallback(b=>{const v={kind:"toast",id:b.id??$y(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?_4:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,createdAt:Date.now()};return s(y=>{const S=[...v.persistKey?y.filter(j=>j.persistKey!==v.persistKey):y,v];return S.length>Uy?S.slice(S.length-Uy):S}),typeof window<"u"&&v.duration&&v.duration>0&&window.setTimeout(()=>u(v.id),v.duration+50),v.id},[u]),m=h.useCallback(b=>{const v={kind:"banner",id:b.id??$y(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?b.sticky?null:M4:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,sticky:b.sticky??!1,createdAt:Date.now()};return l(y=>[...v.persistKey?y.filter(S=>S.persistKey!==v.persistKey):y,v]),typeof window<"u"&&v.duration&&v.duration>0&&window.setTimeout(()=>u(v.id),v.duration+50),v.id},[u]),g=h.useCallback((b,v)=>{b&&((!v||v==="toast")&&s(y=>y.filter(k=>k.scope!==b)),(!v||v==="banner")&&l(y=>y.filter(k=>k.scope!==b)))},[]),x=h.useMemo(()=>({toasts:t,banners:i,pushToast:d,pushBanner:m,dismiss:u,clearScope:g}),[t,i,d,m,u,g]);return a.jsxs(wj.Provider,{value:x,children:[e,a.jsx(D4,{})]})}function jj(){const e=h.useContext(wj);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e}function D4(){const{toasts:e,banners:t,dismiss:s}=jj(),[i,l]=h.useState(!1);return h.useEffect(()=>l(!0),[]),!i||typeof document>"u"?null:zr.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-0 z-[205] flex flex-col items-center gap-3 px-4 pt-3 sm:items-end sm:pr-6",children:t.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>a.jsx(R4,{banner:u,onDismiss:s},u.id))}),a.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-[210] flex flex-col items-center gap-3 px-4 sm:inset-x-auto sm:right-6 sm:bottom-6 sm:items-end sm:px-0",children:e.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>a.jsx(A4,{toast:u,onDismiss:s},u.id))})]}),document.body)}function A4({toast:e,onDismiss:t}){const s=e.duration!==null&&e.duration>0,[i,l]=h.useState(100);h.useEffect(()=>{if(!s||!e.duration)return;l(100);const d=requestAnimationFrame(()=>l(0)),m=window.setTimeout(()=>t(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(m)}},[s,e.duration,e.id,t]);const u=O4[e.intent];return a.jsxs("div",{className:re("pointer-events-auto w-full max-w-sm rounded-2xl border px-4 py-3 text-sm shadow-2xl",u.container,u.border),children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:re("mt-1 flex h-8 w-8 items-center justify-center rounded-full",u.icon),children:e.icon??kj(e.intent)}),a.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[a.jsx("p",{className:"text-sm font-semibold leading-snug text-foreground",children:e.title}),e.description?a.jsx("p",{className:"mt-1 text-xs leading-relaxed text-muted-foreground",children:e.description}):null,e.actions.length>0?a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(d=>a.jsx(Sj,{action:d,onPress:()=>{d.onSelect(),t(e.id)}},d.label))}):null]}),e.dismissible?a.jsx("button",{type:"button",className:"ml-2 inline-flex h-8 w-8 items-center justify-center rounded-full text-muted-foreground transition hover:bg-muted hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/40","aria-label":"Dismiss notification",onClick:()=>t(e.id),children:a.jsx(Nj,{})}):null]}),s&&e.duration?a.jsx("div",{className:"mt-4 h-1 overflow-hidden rounded-full bg-foreground/10",children:a.jsx("div",{className:re("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function R4({banner:e,onDismiss:t}){const s=!e.sticky&&e.duration!==null&&e.duration>0,[i,l]=h.useState(100);h.useEffect(()=>{if(!s||!e.duration)return;l(100);const d=requestAnimationFrame(()=>l(0)),m=window.setTimeout(()=>t(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(m)}},[s,e.duration,e.id,t]);const u=z4[e.intent];return a.jsxs("div",{className:re("pointer-events-auto w-full max-w-sm rounded-lg border px-3.5 py-2.5 shadow-[0_16px_32px_rgb(var(--sys-color-shadow)/0.35)] sm:min-w-[300px]",u.container,u.border),children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:re("flex h-7 w-7 items-center justify-center rounded-full text-base",u.icon),children:e.icon??kj(e.intent)}),a.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[a.jsx("p",{className:"text-[13px] font-semibold leading-tight",children:e.title}),e.description?a.jsx("p",{className:"text-[12px] leading-relaxed text-muted-foreground",children:e.description}):null,e.actions.length>0?a.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:e.actions.map(d=>a.jsx(Sj,{action:d,onPress:()=>{d.onSelect(),e.sticky||t(e.id)}},d.label))}):null]}),e.dismissible?a.jsx("button",{type:"button",className:re("ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full text-muted-foreground transition hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/40",u.dismiss),"aria-label":"Dismiss notification",onClick:()=>t(e.id),children:a.jsx(Nj,{})}):null]}),s&&e.duration?a.jsx("div",{className:"mt-2 h-0.5 overflow-hidden rounded-full bg-foreground/10",children:a.jsx("div",{className:re("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function Sj({action:e,onPress:t}){const s=e.variant??"secondary";return a.jsx("button",{type:"button",className:re("inline-flex items-center justify-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2",s==="primary"?"bg-foreground text-background hover:bg-foreground/90 focus-visible:ring-ring/50":"border-border/60 text-foreground hover:bg-muted focus-visible:ring-ring/40"),onClick:t,children:e.label})}function kj(e){switch(e){case"success":return a.jsx(U4,{});case"warning":return a.jsx($4,{});case"danger":return a.jsx(B4,{});default:return a.jsx(L4,{})}}const O4={info:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-info-500/15 text-info-500",progress:"bg-gradient-to-r from-info-500 to-info-400"},success:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-success-500/15 text-success-500",progress:"bg-gradient-to-r from-success-500 to-success-400"},warning:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-warning-400/20 text-warning-500",progress:"bg-gradient-to-r from-warning-400 to-warning-300"},danger:{container:"bg-popover text-foreground",border:"border-border/70",icon:"bg-danger-500/15 text-danger-500",progress:"bg-gradient-to-r from-danger-500 to-danger-400"}},z4={info:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-info-500/15 text-info-500",progress:"bg-gradient-to-r from-info-500 to-info-400",dismiss:"hover:bg-muted"},success:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-success-500/15 text-success-500",progress:"bg-gradient-to-r from-success-500 to-success-400",dismiss:"hover:bg-muted"},warning:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-warning-500/15 text-warning-500",progress:"bg-gradient-to-r from-warning-400 to-warning-300",dismiss:"hover:bg-muted"},danger:{container:"bg-popover text-foreground",border:"border-border/60",icon:"bg-danger-500/15 text-danger-500",progress:"bg-gradient-to-r from-danger-500 to-danger-400",dismiss:"hover:bg-muted"}};function $y(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}function L4(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),a.jsx("path",{d:"M10 7.5v.2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),a.jsx("path",{d:"M9.2 9.5h1.6V14",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function U4(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),a.jsx("path",{d:"M6.5 10.5l2.5 2.5 4.5-5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}function $4(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M9 4.6l-6 10.4a1 1 0 0 0 .87 1.5h12.26a1 1 0 0 0 .87-1.5L11 4.6a1 1 0 0 0-1.74 0Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M10 8v3.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),a.jsx("path",{d:"M10 14h.01",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}function B4(){return a.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),a.jsx("path",{d:"M7 7l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function Nj(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M4 4l8 8m0-8-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function xd(){const e=jj();return h.useMemo(()=>({notifyToast:t=>e.pushToast(t),notifyBanner:t=>e.pushBanner(t),dismissNotification:t=>e.dismiss(t),dismissScope:(t,s)=>e.clearScope(t,s)}),[e])}const q4="block w-full rounded-lg border border-border bg-card px-3 py-2 text-sm font-medium text-foreground shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:bg-muted disabled:text-muted-foreground",zl=h.forwardRef(({className:e,...t},s)=>a.jsx("select",{ref:s,className:re(q4,e),...t}));zl.displayName="Select";class F4{constructor(t){if(this.capacity=t,!Number.isFinite(t)||t<=0)throw new Error("RingBuffer capacity must be a positive number.");this.buffer=new Array(t)}buffer;start=0;_length=0;get length(){return this._length}clear(){this.buffer.fill(void 0),this.start=0,this._length=0}push(t){if(this._length<this.capacity){const s=(this.start+this._length)%this.capacity;this.buffer[s]=t,this._length+=1;return}this.buffer[this.start]=t,this.start=(this.start+1)%this.capacity}get(t){if(t<0||t>=this._length)return;const s=(this.start+t)%this.capacity;return this.buffer[s]}toArray(){const t=[];for(let s=0;s<this._length;s+=1){const i=this.get(s);i!==void 0&&t.push(i)}return t}}class P4{constructor(t,s){this.capacity=t,this.buffer=new F4(t),this.snapshot={version:this.version,length:this.buffer.length,capacity:this.capacity},s?.length&&this.appendMany(s)}listeners=new Set;buffer;version=0;snapshot;notifyScheduled=!1;nextId=1;subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}getSnapshot=()=>this.snapshot;get length(){return this.buffer.length}getLine(t){return this.buffer.get(t)}toArray(){return this.buffer.toArray()}clear(){this.buffer.clear(),this.bump()}append(t){this.buffer.push(By(t,this.nextId++)),this.scheduleNotify()}appendMany(t){for(const s of t)this.buffer.push(By(s,this.nextId++));this.scheduleNotify()}bump(){this.version+=1,this.snapshot={version:this.version,length:this.buffer.length,capacity:this.capacity};for(const t of this.listeners)t()}scheduleNotify(){if(this.notifyScheduled)return;this.notifyScheduled=!0;const t=()=>{this.notifyScheduled=!1,this.bump()};if(typeof requestAnimationFrame=="function"){requestAnimationFrame(t);return}setTimeout(t,0)}}function By(e,t){if(e.id)return e;const s=e.origin??"run",i=e.timestamp??"ts";return{...e,id:`console-${s}-${i}-${t}`}}const I4={dry_run:!1,validate_only:!1,force_rebuild:!1,log_level:"INFO"};async function Cj(e,t,s){const i={workspace_id:e},{input_document_id:l,configuration_id:u,...d}=t,m={...I4,...d};if(!l)throw new Error("input_document_id is required to start a run.");const g={input_document_id:l,configuration_id:u??void 0,options:m},{data:x}=await Ie.POST("/api/v1/workspaces/{workspace_id}/runs",{params:{path:i},body:g,signal:s});if(!x)throw new Error("Expected run creation response.");return x}async function*H4(e,t){yield*V4(e,t)}async function*V4(e,t){const s=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"}),i=new AbortController,l=()=>i.abort();let u=null;t?.aborted?i.abort():t&&t.addEventListener("abort",l);try{const d=await fetch(e,{method:"GET",credentials:"include",headers:{Accept:"text/event-stream"},signal:i.signal});if(!d.body||!d.ok)throw new Error("Run event stream unavailable.");u=d.body.getReader();const m=new TextDecoder;let g="",x=!1;for(;;){const{value:b,done:v}=await u.read();g+=m.decode(b??new Uint8Array,{stream:!v});const y=g.split(`

`);g=y.pop()??"";for(const k of y){const S=qy(k);if(S&&(yield S,S.event==="run.complete")){x=!0;break}}if(v||x){const k=qy(g);k&&(yield k);return}}}catch(d){throw i.signal.aborted?s:d}finally{if(t&&t.removeEventListener("abort",l),u)try{await u.cancel()}catch{}i.signal.aborted||i.abort()}}function qy(e){const t=[];for(const i of e.split(/\n/))if(i.startsWith("data:")){const l=i.slice(5);t.push(l.startsWith(" ")?l.slice(1):l);continue}if(!t.length)return null;const s=t.join(`
`);if(!s.trim())return null;try{const i=JSON.parse(s);return!i||typeof i!="object"||typeof i.event!="string"||i.event.trim().length===0||!("timestamp"in i)?null:(i._raw=s,i)}catch(i){return console.warn("Skipping malformed run event",i,s),null}}function Z4(e,t){const s=e.events_stream_url??e.links?.events_stream;if(!s)return null;const i=[];if(Number.isFinite(t.afterSequence)){const u=Math.max(0,Math.floor(t.afterSequence));i.push(`after_sequence=${u}`)}const l=i.length?i.join("&"):void 0;return Y4(s,{appendQuery:l})}async function*W4(e,t){const s=typeof e=="string"?await Ej(e,t?.signal):e,i=Z4(s,{afterSequence:t?.afterSequence});if(!i)throw new Error("Run events link unavailable.");for await(const l of H4(i,t?.signal))yield l}async function Ej(e,t){const{data:s}=await Ie.GET("/api/v1/runs/{run_id}",{params:{path:{run_id:e}},signal:t});if(!s)throw new Error("Run not found");return s}function Q4(e){const t=e.output,s=t?.ready,i=t?.download_url??e.links?.output_download??e.links?.output;return s===!1||!i?null:jo(i)}function K4(e){const t=e.events_download_url??e.links?.events_download;return t?jo(t):null}function G4(e){const t=e.links?.input_download??e.links?.input;return t?jo(t):null}function Y4(e,t){const s=e.includes("?"),i=t?.appendQuery?`${e}${s?"&":"?"}${t.appendQuery}`:e;return jo(i)}function X4(e){const t=new Date(e.timestamp);return Number.isNaN(t.getTime())?new Date().toISOString():t.toISOString()}function Fy(e){return e.event.toString()}function J4(e){const t=e.data;return t&&typeof t=="object"?t:{}}function e3({workspaceId:e,configId:t,onJobIdChange:s,seed:i,maxConsoleLines:l=2e3,onError:u}){const d=h.useRef(new P4(l,i?.console?[...i.console].slice(-l):void 0)),m=h.useRef(null),g=h.useRef(!1),[x,b]=h.useState(null),[v,y]=h.useState(null),[k,S]=h.useState("idle"),[j,N]=h.useState(null),M=k==="running",_=h.useCallback(()=>{const D=m.current;D&&(D.abort(),m.current=null)},[]);h.useEffect(()=>()=>{_()},[_]);const R=h.useCallback(()=>{d.current.clear()},[]),q=h.useCallback(D=>{u&&u(D)},[u]),$=h.useCallback(D=>{const C=Fy(D),L=J4(D),K=(C.startsWith("build.")?"build":C==="console.line"&&typeof L.scope=="string"?L.scope:"run")==="build"?"build":"run",A=typeof D.level=="string"?D.level.toLowerCase():"info",X=A==="debug"||A==="warning"||A==="error"||A==="success"?A:"info",fe=typeof D.message=="string"?D.message:"",Se=fe.trim()?fe:C,z={id:typeof D.event_id=="string"?D.event_id:void 0,level:X,message:Se,timestamp:X4(D),origin:K,raw:D};if(d.current.append(z),C==="run.complete"){N(L);const H=typeof L.status=="string"?L.status.toLowerCase():"";S(H==="succeeded"||H==="success"?"succeeded":H==="cancelled"||H==="canceled"?"cancelled":"failed")}},[]),I=h.useCallback(async(D,C,L)=>{if(g.current||M||L?.prepare&&L.prepare()===!1)return null;_(),R(),N(null),y(C.mode),S("running"),b(null),s?.(null);const V=new Date().toISOString(),K=new AbortController;m.current=K,g.current=!0;let A=null;try{const X=await Cj(e,{...D,configuration_id:t},K.signal);A=X.id,b(X.id),s?.(X.id);for await(const fe of W4(X,{afterSequence:0,signal:K.signal}))if($(fe),Fy(fe)==="run.complete")break;if(!A)throw new Error("Run creation response missing run id.");return{jobId:A,startedAt:V}}catch(X){return K.signal.aborted||(S("failed"),q(X)),null}finally{g.current=!1,m.current===K&&(m.current=null)}},[R,t,M,s,q,$,_,e]);return h.useMemo(()=>({console:d.current,jobId:x,jobMode:v,jobStatus:k,jobInProgress:M,completedDetails:j,clearConsole:R,startJob:I}),[x,v,k,M,j,R,I])}function t3(e){return e==="succeeded"||e==="failed"||e==="cancelled"}function n3(e){const t=(e??"").toLowerCase();return t==="succeeded"||t==="failed"||t==="cancelled"?t:t==="success"?"succeeded":"failed"}function r3({workspaceId:e,configId:t,runId:s,seed:i,maxConsoleLines:l,onRunIdChange:u,onRunComplete:d}){const m=h.useRef(null),{console:g,jobId:x,jobMode:b,jobStatus:v,jobInProgress:y,completedDetails:k,clearConsole:S,startJob:j}=e3({workspaceId:e,configId:t,onJobIdChange:u,seed:i?{console:i.console}:void 0,maxConsoleLines:l}),N=x??s,M=b??null,[_,R]=h.useState(null),q=h.useRef(null),$=h.useMemo(()=>({status:y&&M==="validation"?"running":"idle",messages:[],lastRunAt:void 0,error:null,digest:null}),[y,M]);h.useEffect(()=>{if(!N||!t3(v)||q.current===N)return;q.current=N;const C=n3(typeof k?.status=="string"?k.status:null),L=M??"extraction",V=k?.execution??{},K=typeof V.started_at=="string"?V.started_at:null,A=typeof V.completed_at=="string"?V.completed_at:new Date().toISOString(),X=typeof V.duration_ms=="number"?V.duration_ms:null;if(d?.({runId:N,status:C,mode:L,startedAt:K,completedAt:A,durationMs:X,payload:k}),L==="validation")return;const fe=m.current,Se=k?.artifacts??{},z=typeof Se.output_path=="string"?Se.output_path:null,H=typeof Se.processed_file=="string"?Se.processed_file:null;R({runId:N,status:C,outputUrl:void 0,inputUrl:void 0,outputReady:z?!0:void 0,outputFilename:z?s3(z):null,outputPath:z,logsUrl:void 0,processedFile:H,outputLoaded:!1,documentName:fe?.documentName,sheetNames:fe?.sheetNames??[],error:null,startedAt:K,completedAt:A,durationMs:X}),(async()=>{try{const ae=await Ej(N),ge=Q4(ae)??void 0,ce=K4(ae)??void 0,T=G4(ae)??void 0;R(G=>G&&G.runId===N?{...G,outputUrl:ge??G.outputUrl,outputReady:ge?!0:G.outputReady,logsUrl:ce??G.logsUrl,inputUrl:T??G.inputUrl,outputLoaded:!0}:G)}catch{R(ae=>ae&&ae.runId===N?{...ae,outputLoaded:!0}:ae)}})()},[N,v,k,d,M]);const I=h.useCallback(async(C,L,V)=>{m.current=L;const K=V?.forceRebuild?{...C,force_rebuild:!0}:C,A=await j(K,L,{prepare:V?.prepare});return A&&L.mode==="extraction"&&R(null),A?{runId:A.jobId,startedAt:A.startedAt}:null},[j]),D=v;return h.useMemo(()=>({runStatus:D,runMode:M??void 0,runInProgress:y,validation:$,console:g,latestRun:_,clearConsole:S,startRun:I}),[D,M,y,$,g,_,S,I])}function s3(e){const t=e.trim();if(!t)return"";const s=t.split("/");return s[s.length-1]||t}const _j=e=>`ade.ui.workspace.${e}.config-builder.last`;function pp(e){return Xs(_j(e))}function gp(e,t){if(t){const s={configId:t};return e.set(s),s}return e.clear(),null}function yo(e){return e?typeof e=="string"?e.toLowerCase():String(e).toLowerCase():""}function Py(e,t){const s=e?new Date(e).getTime():0;return(t?new Date(t).getTime():0)-s}function xp(e,t){const s=`Copy of ${e}`.trim();if(!t.has(s.toLowerCase()))return s;for(let i=2;i<100;i+=1){const l=`${s} (${i})`;if(!t.has(l.toLowerCase()))return l}return`${s} (${Date.now()})`}const a3={min:200,max:420},i3=320,o3=120,Kh=140,l3=220,c3=40,u3=2e3,Iy=10,d3=56,Hy="Panel closed to keep the editor readable on this screen size. Resize the window or collapse other panes to reopen it.",f3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.tabs`,h3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.console`,m3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.explorer.expanded`,p3=(e,t)=>`ade.ui.workspace.${e}.configuration.${t}.layout`,g3={explorer:"",search:"Search coming soon",scm:"Source Control coming soon",extensions:"Extensions coming soon"},x3=[{value:"DEBUG",label:"Debug"},{value:"INFO",label:"Info"},{value:"WARNING",label:"Warning"},{value:"ERROR",label:"Error"}];function Mj({workspaceId:e,configId:t,configName:s,configDisplayName:i,seed:l,windowState:u,onMinimizeWindow:d,onMaximizeWindow:m,onRestoreWindow:g,onCloseWorkbench:x,shouldBypassUnsavedGuard:b}){const v=Tt(),y=Zt(),{fileId:k,pane:S,console:j,consoleExplicit:N,setFileId:M,setPane:_,setConsole:R}=WR(),[q,$]=h.useState(null),I=!!l,D=m4({workspaceId:e,configId:t,depth:"infinity",sort:"path",order:"asc",enabled:!I}),C=D.data?.fileset_hash??null,L=D.data?.status==="draft",V=D.data?.capabilities,K=I||!!V?.editable,A=!K,X=h.useMemo(()=>pp(e),[e]),fe=fp({workspaceId:e,enabled:!I}),Se=h.useMemo(()=>{const P=fe.data?.items??[];return new Set(P.map(de=>de.display_name.trim().toLowerCase()))},[fe.data?.items]),z=h.useMemo(()=>{const P=fe.data?.items??[];for(const de of P)if(yo(de.status)==="active")return de;return null},[fe.data?.items]),H=mp(e),ae=hp(e),[ge,ce]=h.useState(!1),[T,G]=h.useState(""),[ue,Y]=h.useState(null),[ee,Z]=h.useState(!1),[te,Q]=h.useState(null),se=h.useMemo(()=>l?l.tree:D.data?Ry(D.data):null,[l,D.data]);h.useEffect(()=>{t&&(I||D.isSuccess)&&gp(X,t)},[t,I,D.isSuccess,X]);const ke=h.useCallback(()=>{H.reset(),Y(null),G(xp(i,Se)),ce(!0)},[i,H,Se]);h.useEffect(()=>{if(!ee||!L||I)return;let P=!1;return Q({stage:"checking"}),up(e,t).then(de=>{if(!P){if(Array.isArray(de.issues)&&de.issues.length>0){Q({stage:"issues",issues:de.issues});return}Q({stage:"confirm"})}}).catch(de=>{if(P)return;const Ue=de instanceof Error?de.message:"Unable to validate configuration.";Q({stage:"error",message:Ue})}),()=>{P=!0}},[t,L,ee,I,e]);const[Me,We]=h.useState(null),st=h.useCallback(P=>{We(P)},[]),Ve=w4(e,t),$e=h.useRef(null),[gt,xt]=h.useState(null),[Oe,Qe]=h.useState(!1),[O,U]=h.useState(!1),{runStatus:ne,runMode:be,runInProgress:Ne,validation:Ce,console:ze,latestRun:ye,clearConsole:_e,startRun:Be}=r3({workspaceId:e,configId:t,runId:q,seed:l,maxConsoleLines:u3,onRunIdChange:$,onRunComplete:st}),[ht,it]=h.useState(!1),[bn,Dt]=h.useState(!1),jt=h.useMemo(()=>l?null:Xs(f3(e,t)),[e,t,l]),ut=h.useMemo(()=>l?null:Xs(h3(e,t)),[e,t,l]),Ut=h.useMemo(()=>Xs(p3(e,t)),[e,t]),In=h.useRef(null),he=Xu(),Ae=D0(he.resolvedMode)?"dark":"light",ot=he.resolvedMode==="light"?"vs-light":"ade-dark",_n=Ce.lastRunAt?`Last run ${D3(Ce.lastRunAt)}`:void 0,[at,kt]=h.useState(()=>{const P=Ut.get();return P?.explorer?{collapsed:!!P.explorer.collapsed,fraction:P.explorer.fraction??280/1200}:{collapsed:!1,fraction:280/1200}}),[At,on]=h.useState(null),hn=h.useRef(null),[mn,vn]=h.useState(!1);h.useEffect(()=>{ut?In.current=ut.get()??null:In.current=null,hn.current=null,on(null),vn(!1)},[ut]);const[Mn,tn]=h.useState({width:0,height:0}),[Gn,Hn]=h.useState(null),[Un,br]=h.useState("explorer"),[sr,Yn]=h.useState(null),[vr,Tn]=h.useState(null),[ln,Dn]=h.useState(!1),[ps,Ms]=h.useState(!1),[qa,Si]=h.useState(!1),[St,Ur]=h.useState(null),[ar,Xr]=h.useState(!1),[ir,or]=h.useState(null),[gs,Yt]=h.useState(null),[ki,ta]=h.useState(null),{notifyBanner:lr,dismissScope:Jr,notifyToast:F}=xd(),pe=h.useMemo(()=>`workbench-console:${e}:${t}`,[e,t]),ve=h.useMemo(()=>`workbench-upload:${e}:${t}`,[e,t]),Re=g4(e,t),Xe=x4(e,t),bt=b4(e,t),Le=h.useCallback((P,de)=>{lr({title:P,intent:de?.intent??"info",duration:de?.duration??6e3,dismissible:!0,scope:pe,persistKey:pe})},[lr,pe]),vt=h.useCallback(()=>{Jr(pe,"banner")},[Jr,pe]),Qt=h.useCallback(P=>{const de=Yh(P);Le(de,{intent:"danger",duration:null})},[Le]),Fa=h.useCallback(async()=>{Qe(!0);try{const P=await dp(e,t),de=P.filename??`${t}.zip`,Ue=URL.createObjectURL(P.blob),De=document.createElement("a");De.href=Ue,De.download=de,De.click(),URL.revokeObjectURL(Ue),Le(`Exported ${de}`,{intent:"success",duration:4e3})}catch(P){Qt(P),Le("Export failed. Try again in a moment.",{intent:"danger",duration:6e3})}finally{Qe(!1)}},[e,t,Le,Qt]),Pa=h.useCallback(()=>{ce(!1),Y(null)},[]),Ql=h.useCallback(()=>{const P=T.trim();if(!P){Y("Enter a name for the new draft configuration.");return}Y(null),H.mutate({sourceConfigurationId:t,displayName:P},{onSuccess(de){F({title:"Draft created.",intent:"success",duration:3500}),Pa(),y(`/workspaces/${e}/config-builder/${encodeURIComponent(de.id)}/editor`)},onError(de){Y(de instanceof Error?de.message:"Unable to duplicate configuration.")}})},[Pa,t,T,H,y,F,e]),na=h.useCallback(()=>{ae.reset(),Q({stage:"checking"}),Z(!0)},[ae]),Ia=h.useCallback(()=>{Z(!1),Q(null)},[]),cr=h.useCallback(()=>{ae.mutate({configurationId:t},{async onSuccess(){F({title:"Configuration is now active and locked.",description:"Duplicate it to make further edits.",intent:"success",duration:5e3}),Ia(),await Promise.all([v.invalidateQueries({queryKey:fn.files(e,t)}),v.invalidateQueries({queryKey:fn.root(e)})])},onError(P){const de=P instanceof Error?P.message:"Unable to make configuration active.";Q({stage:"error",message:de})}})},[Ia,t,ae,F,v,e]);h.useEffect(()=>{if(!Me)return;const{runId:P,status:de,payload:Ue}=Me,De=Ue?.failure??void 0,mt=(typeof De?.message=="string"?De.message.trim():null)||"ADE run failed.",rt=de==="cancelled";Le(de==="succeeded"?"ADE run completed successfully.":rt?"ADE run cancelled.":mt,{intent:de==="succeeded"?"success":rt?"info":"danger"}),We(An=>An&&An.runId===P?null:An)},[Me,Le,We]);const $r=u==="maximized",Ts=typeof navigator<"u"?/mac/i.test(navigator.platform):!1,Co=h.useCallback(()=>{x()},[x]),Ds=!at.collapsed,Kl=h.useCallback(async P=>{if(l)return{content:l.content[P]??"",etag:null};const de=await v.fetchQuery({queryKey:fn.file(e,t,P),queryFn:({signal:Ue})=>Ly(e,t,P,Ue)});if(!de)throw new Error("File could not be loaded.");return{content:Wy(de),etag:de.etag??null}},[l,v,e,t]),Ke=qR({tree:se,initialActiveFileId:k,loadFile:Kl,persistence:jt??void 0}),yr=p4(e,t),Ni=h.useCallback(async P=>{if(I)return null;const de=await v.fetchQuery({queryKey:fn.file(e,t,P),queryFn:({signal:De})=>Ly(e,t,P,De)}),Ue=Wy(de);return Ke.replaceTabContent(P,{content:Ue,etag:de.etag??null,metadata:{size:de.size??null,modifiedAt:de.mtime??null,contentType:de.content_type??Ke.tabs.find(De=>De.id===P)?.metadata?.contentType??null,etag:de.etag??null}}),de},[I,v,e,t,Ke]);KR({isDirty:Ke.isDirty,shouldBypassNavigation:b});const Gl=h.useCallback(()=>{d()},[d]),Yl=h.useCallback(()=>{$r?g():m()},[$r,m,g]),Vn=j!=="open",As=h.useMemo(()=>Ke.tabs.filter(P=>P.status==="ready"&&P.content!==P.initialContent),[Ke.tabs]),jd=Ke.tabs.some(P=>P.saving),wr=!I&&K&&As.length>0;h.useEffect(()=>{typeof window>"u"||requestAnimationFrame(()=>{window.dispatchEvent(new Event("ade:workbench-layout"))})},[at.collapsed,at.fraction,Vn,At,$r,S]);const Xn=h.useCallback(async P=>{if(I)return!1;const de=Ke.tabs.find(He=>He.id===P);if(!de||de.status!=="ready"||de.content===de.initialContent||de.saving)return!1;const Ue=de.content,De=de.etag??void 0;Ke.beginSavingTab(P);try{const He=await yr.mutateAsync({path:de.id,content:Ue,etag:De,create:!De,parents:!0}),mt={size:He.size??de.metadata?.size??null,modifiedAt:He.mtime??de.metadata?.modifiedAt??null,contentType:de.metadata?.contentType??null,etag:He.etag??de.metadata?.etag??null};return Ke.completeSavingTab(P,{etag:He.etag??de.etag??null,metadata:mt,savedContent:Ue}),Le(`Saved ${de.name}`,{intent:"success",duration:4e3}),!0}catch(He){const mt=He instanceof Jt&&He.status===412,rt=mt?new Error("Save blocked because this file changed on the server. Reloading latest version."):He;if(Ke.failSavingTab(P,rt instanceof Error?rt.message:String(rt)),mt)try{await Ni(P),Le("File reloaded with the latest version from the server. Review before saving again.",{intent:"warning",duration:6e3})}catch(nn){Qt(nn)}return Qt(rt),!1}},[I,Ke,yr,Le,Ni,Qt]),ra=h.useCallback(async P=>{const de=[];for(const Ue of P)await Xn(Ue)&&de.push(Ue);return de},[Xn]),sa=h.useCallback(async()=>{if(!wr||As.length===0)return!0;const de=(await ra(As.map(Ue=>Ue.id))).length===As.length;return de||Le("Save failed. Fix errors before running again.",{intent:"danger",duration:7e3}),de},[wr,As,ra,Le]),aa=h.useCallback(P=>{Xn(P)},[Xn]),xs=h.useCallback(()=>{Ke.activeTab&&Xn(Ke.activeTab.id)},[Ke.activeTab,Xn]),Xl=h.useCallback(()=>{if(!wr)return;const P=As.map(de=>de.id);(async()=>{const de=await ra(P);de.length>1&&Le(`Saved ${de.length} files`,{intent:"success",duration:5e3})})()},[wr,As,ra,Le]);h.useEffect(()=>{const P=Gn;if(!P||typeof window>"u")return;const de=()=>{const De=P.getBoundingClientRect(),He=De.width,mt=De.height;tn({width:He,height:mt}),window.dispatchEvent(new Event("ade:workbench-layout"))};if(de(),typeof window.ResizeObserver>"u")return window.addEventListener("resize",de),()=>window.removeEventListener("resize",de);const Ue=new window.ResizeObserver(()=>de());return Ue.observe(P),()=>Ue.disconnect()},[Gn]);const bs=Vn?i3:o3,yn=h.useMemo(()=>{const P=Math.max(0,Mn.height),Ue=Math.max(0,P-bs-Iy),De=Math.min(Kh,Ue);return{container:P,minPx:De,maxPx:Ue}},[Mn.height,bs]),Ha=h.useCallback((P,de=yn)=>Dr(P,de.minPx,de.maxPx),[yn]),Jn=h.useCallback(()=>{const P=In.current;return P&&"version"in P&&P.version===2&&typeof P.fraction=="number"?Dr(P.fraction,0,1):P&&"height"in P&&typeof P.height=="number"&&yn.container>0?Dr(P.height/yn.container,0,1):.25},[yn.container]);h.useEffect(()=>{At===null&&yn.container>0&&on(Jn())},[At,yn.container,Jn]);const vs=h.useCallback(()=>yn.container>0&&yn.maxPx<Kh?(R("closed"),Le(Hy,{intent:"warning",duration:1e4}),!1):(vt(),R("open"),on(P=>P!==null?Dr(P,0,1):hn.current!==null?Dr(hn.current,0,1):Jn()),!0),[yn,R,Le,vt,Jn]),Rs=h.useCallback(()=>{hn.current=At,R("closed"),vt()},[At,R,vt]);h.useEffect(()=>{if(mn)return;const P=In.current?.state;if(N||!P){vn(!0);return}(P==="open"||P==="closed")&&P!==j&&R(P),vn(!0)},[N,j,R,mn]),h.useEffect(()=>{!ut||ln||At===null||ut.set({version:2,fraction:Dr(At,0,1),state:j})},[ut,At,j,ln]),h.useEffect(()=>{if(!(j!=="open"||!yn.container)){if(yn.maxPx<Kh){R("closed"),Le(Hy,{intent:"warning",duration:1e4});return}on(P=>P===null?Jn():Dr(P,0,1))}},[j,yn,R,Le,Jn]);const es=h.useCallback((P,de)=>{if(P<=0)return{minPx:de.min,maxPx:de.max,minFrac:0,maxFrac:1};const Ue=Math.min(de.min,P),De=Math.min(de.max,P);return{minPx:Ue,maxPx:De,minFrac:Ue/P,maxFrac:De/P}},[]),jr=Math.max(0,Mn.width-d3),Br=h.useMemo(()=>es(jr,a3),[jr,es]),Ci=h.useCallback((P,de)=>Dr(P,de.minFrac,de.maxFrac),[]);h.useEffect(()=>{jr<=0||kt(P=>{if(P.collapsed)return P;const de=Ci(P.fraction,Br);return de===P.fraction?P:{...P,fraction:de}})},[jr,Br,Ci]),h.useEffect(()=>{Ut.set({version:2,explorer:{collapsed:at.collapsed,fraction:at.fraction}})},[Ut,at]);const Va=at.collapsed?0:Dr(at.fraction,Br.minFrac,Br.maxFrac)*jr,Os=jr>0?Math.min(Va,jr):Va,Sr=Math.max(0,yn.container),Ei=(At??(Sr>0?Dr(l3/Sr,0,1):.25))*Sr,zs=Sr>0?Ha(Ei):0,Jl=Iy,_i=Vn?c3:zs,Eo=Sr>0?Math.max(bs,Sr-Jl-_i):bs;h.useEffect(()=>{const P=Ke.activeTabId;if(!P){M(void 0);return}M(P)},[Ke.activeTabId,M]),h.useEffect(()=>{!ir||!se||Rr(se,ir)&&(Ke.openFile(ir),M(ir),or(null))},[ir,se,Ke,M]);const ys=h.useCallback(()=>vs()?(_("terminal"),!0):!1,[vs,_]),Mi=h.useCallback(async()=>{if(I||!se||D.isLoading||D.isError||!await sa())return;let de=null;try{de=(await Tj(e))[0]??null}catch(Ue){F({title:"Unable to load documents for validation.",message:Yh(Ue),intent:"warning",duration:5e3});return}if(!de){F({title:"Upload a document to run validation.",intent:"warning",duration:5e3});return}await Be({validate_only:!0,input_document_id:de.id},{mode:"validation",documentId:de.id,documentName:de.name},{prepare:ys})},[I,se,D.isLoading,D.isError,sa,Be,ys,e,F]),ec=h.useCallback(async P=>{if(it(!1),Dt(!1),I||!se||D.isLoading||D.isError||!await sa())return;const Ue=Array.from(new Set((P.sheetNames??[]).filter(Boolean)));Be({input_document_id:P.documentId,input_sheet_names:Ue.length?Ue:void 0,log_level:P.logLevel},{mode:"extraction",documentId:P.documentId,documentName:P.documentName,sheetNames:Ue},{forceRebuild:bn,prepare:ys})},[I,se,D.isLoading,D.isError,Be,bn,ys,sa]);h.useEffect(()=>{if(typeof window>"u")return;const P=de=>{if(!(Ts?de.metaKey:de.ctrlKey)||de.altKey||de.key.toLowerCase()!=="s")return;const De=de.target;if(De){const He=De.tagName;if(He==="INPUT"||He==="TEXTAREA"||De.isContentEditable)return}wr&&(de.preventDefault(),xs())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[Ts,wr,xs]);const tc=be??(Ne?"extraction":void 0),Ti=Ne,Sd=Ce.status==="running"||Ti&&tc==="validation",_o=!I&&!!se&&!D.isLoading&&!D.isError&&!Ti&&Ce.status!=="running",kd=Ti&&tc!=="validation",Di=!I&&!!se&&!D.isLoading&&!D.isError&&!Ti,ts=!I&&!D.isLoading&&!D.isError&&!!V?.can_create,Mo=ts&&!Re.isPending&&!!V?.can_delete,To=ts&&!Xe.isPending,Ai=ts&&!bt.isPending&&!!V?.can_delete,oa=L&&!I&&!Ve.isPending&&!!C,Za=L&&!I&&!Ke.isDirty&&!ae.isPending,Nd=h.useCallback(P=>{br(P),P==="explorer"&&kt(de=>({...de,collapsed:!1}))},[]),Cd=h.useCallback(P=>{P.preventDefault();const de=P.currentTarget.getBoundingClientRect();Yn({x:de.right+8,y:de.top})},[]),Do=h.useCallback(P=>{xt(P)},[]),Ed=h.useCallback(()=>Yn(null),[]),ns=h.useCallback(()=>{Vn?vs():Rs()},[Vn,vs,Rs]);h.useEffect(()=>{if(typeof window>"u")return;const P=de=>{if(!(Ts?de.metaKey:de.ctrlKey)||de.altKey||de.key?.toLowerCase()!=="`"&&de.code!=="Backquote")return;const He=de.target;if(He&&!(typeof He.closest=="function"?He.closest("[data-editor-area]"):null)){const rt=He.tagName,nn=He.getAttribute("role");if(rt==="INPUT"||rt==="TEXTAREA"||nn==="textbox"||He.isContentEditable)return}de.preventDefault(),ns()};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[Ts,ns]);const _d=h.useCallback(()=>{_e()},[_e]),nc=h.useCallback(()=>{kt(P=>({...P,collapsed:!P.collapsed}))},[]),Md=h.useCallback(()=>{kt(P=>({...P,collapsed:!0}))},[]),Td=h.useCallback(P=>{Nl(P.dataTransfer)&&P.preventDefault()},[]),Dd=h.useCallback(P=>{P.defaultPrevented||!Nl(P.dataTransfer)||(P.preventDefault(),F({title:"Drop files into the Explorer to upload.",description:"Open the Explorer pane, then drop into a folder in the file tree.",intent:"info",duration:7e3,persistKey:ve,actions:[{label:"Show Explorer",variant:"secondary",onSelect:()=>kt(de=>({...de,collapsed:!1}))}]}))},[F,ve,kt]),Ri=h.useCallback(async(P,de)=>{if(I){F({title:"Uploads arent available in demo mode.",intent:"warning",duration:6e3,persistKey:ve});return}if(A){F({title:"This configuration is read-only.",description:"Duplicate it to upload files.",intent:"warning",duration:7e3,persistKey:ve});return}if(!ts){F({title:"Files are still loading.",description:"Wait for the explorer to finish syncing and try again.",intent:"info",duration:6e3,persistKey:ve});return}if(ar){F({title:"Upload already in progress.",description:"Wait for the current upload to finish before starting another.",intent:"info",duration:6e3,persistKey:ve});return}const Ue=P.items.length;if(Ue===0){F({title:"No files to upload.",intent:"warning",duration:5e3,persistKey:ve});return}Xr(!0),F({title:`Uploading ${Ue} file${Ue===1?"":"s"}`,description:P.folderPath?`Destination: ${P.folderPath}`:"Destination: root",intent:"info",duration:null,dismissible:!1,persistKey:ve});const De=[],He=[];try{for(const Pt of P.items)if(!(Pt.exists&&!de.overwriteExisting))try{await yr.mutateAsync({path:Pt.targetPath,content:Pt.file,parents:!0,create:!Pt.exists,etag:Pt.exists?Pt.etag??void 0:void 0,contentType:Pt.file.type||void 0}),De.push(Pt.targetPath)}catch(It){const rs=It instanceof Jt&&It.status===412?"Upload blocked because the file changed on the server. Refresh and try again.":It instanceof Jt&&It.status===428?"Upload blocked: refresh the file list and try again.":It instanceof Jt&&It.status===413?It.problem?.detail||"File is larger than the allowed limit.":Yh(It);He.push({path:Pt.targetPath,message:rs})}try{await D.refetch()}catch{}for(const Pt of De){const It=Ke.tabs.find(ua=>ua.id===Pt);if(!(!It||It.status!=="ready"||It.content!==It.initialContent))try{await Ni(Pt)}catch{}}}finally{Xr(!1)}const mt=P.skipped.length,rt=De.length,nn=He.length,ca=nn>0?rt>0?"warning":"danger":mt>0?"warning":"success",An=[];rt>0&&An.push(`${rt} uploaded`),mt>0&&An.push(`${mt} skipped`),nn>0&&An.push(`${nn} failed`),F({title:nn>0?"Upload finished with issues.":mt>0?"Upload finished.":"Upload complete.",description:An.join("  "),intent:ca,duration:8e3,dismissible:!0,persistKey:ve,actions:He.length>0?[{label:"Show errors",variant:"secondary",onSelect:()=>{const Pt=He.slice(0,6).map(It=>`${It.path}: ${It.message}`).join("  ");lr({title:"Upload errors",description:Pt||"Upload errors occurred.",intent:"danger",duration:null,dismissible:!0,scope:ve,persistKey:`${ve}:errors`})}}]:void 0})},[ts,D,A,ar,lr,F,Ni,yr,ve,I,Ke.tabs]),Ad=h.useCallback(async(P,de)=>{if(ar){F({title:"Upload already in progress.",description:"Wait for the current upload to finish before dropping more files.",intent:"info",duration:6e3,persistKey:ve});return}if(St){F({title:"Resolve the overwrite prompt first.",description:"Choose whether to overwrite existing files, then try again.",intent:"info",duration:6e3,persistKey:ve});return}if(!se)return;const Ue=vi(P),De=D.data?.limits??null,He=[],mt=[],rt=new Set;for(const An of de){const Pt=vi(An.relativePath);if(!Pt){mt.push({relativePath:An.relativePath,reason:"Missing file name."});continue}const It=gR(Ue,Pt);if(!It||!xR(It)){mt.push({relativePath:Pt,reason:"Invalid path."});continue}if(rt.has(It)){mt.push({relativePath:Pt,reason:"Duplicate path in drop payload."});continue}rt.add(It);const rs=Rr(se,It);if(rs&&rs.kind==="folder"){mt.push({relativePath:Pt,reason:"A folder with this name already exists."});continue}const ua=!!(rs&&rs.kind==="file"),lc=ua?rs?.metadata?.etag??null:null;if(ua&&!lc){mt.push({relativePath:Pt,reason:"Missing file version. Refresh and try again."});continue}const Ro=De&&typeof De.code_max_bytes=="number"&&typeof De.asset_max_bytes=="number"?bR(It)?De.asset_max_bytes:De.code_max_bytes:null;if(typeof Ro=="number"&&An.file.size>Ro){mt.push({relativePath:Pt,reason:`File exceeds ${Ro} bytes.`});continue}He.push({file:An.file,relativePath:Pt,targetPath:It,exists:ua,etag:lc})}if(He.length===0){F({title:"No uploadable files.",description:mt.length?`${mt.length} item${mt.length===1?"":"s"} skipped.`:void 0,intent:"warning",duration:7e3,persistKey:ve});return}const nn=He.filter(An=>An.exists),ca={folderPath:Ue,items:He,conflicts:nn,skipped:mt};if(nn.length>0){Ur(ca);return}await Ri(ca,{overwriteExisting:!1})},[D.data?.limits,ar,F,Ri,se,St,ve]),Rd=h.useCallback(async(P,de)=>{const Ue=de.trim();if(!Ue)throw new Error("Enter a file name.");if(Ue.includes(".."))throw new Error("File name cannot include '..'.");if(A)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!ts)throw new Error("Files are still loading.");const De=P.replace(/\/+$/,""),He=Ue.replace(/^\/+/,"").replace(/\/+/g,"/"),rt=(De?`${De}/${He}`:He).replace(/\/+/g,"/");if(!rt||rt.endsWith("/"))throw new Error("Enter a valid file name.");if(se&&Rr(se,rt))throw new Error("A file or folder with that name already exists.");Ms(!0);try{await yr.mutateAsync({path:rt,content:"",parents:!0,create:!0}),or(rt),await D.refetch(),Le(`Created ${rt}`,{intent:"success",duration:4e3})}catch(nn){throw Qt(nn),nn instanceof Error?nn:new Error("Unable to create file.")}finally{Ms(!1)}},[ts,A,se,yr,D,Le,Qt]),Od=h.useCallback(async(P,de)=>{const Ue=de.trim();if(!Ue)throw new Error("Enter a folder name.");if(Ue.includes(".."))throw new Error("Folder name cannot include '..'.");if(A)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!To)throw new Error("Files are still loading.");const De=P.replace(/\/+$/,""),He=Ue.replace(/^\/+/,"").replace(/\/+/g,"/"),rt=(De?`${De}/${He}`:He).replace(/\/+/g,"/").replace(/\/$/,"");if(!rt)throw new Error("Enter a valid folder name.");if(se&&Rr(se,rt))throw new Error("A file or folder with that name already exists.");Si(!0);try{await Xe.mutateAsync({path:rt}),await D.refetch(),Le(`Folder ready: ${rt}`,{intent:"success",duration:4e3})}catch(nn){throw Qt(nn),nn instanceof Error?nn:new Error("Unable to create folder.")}finally{Si(!1)}},[To,A,se,Xe,D,Le,Qt]),zd=h.useCallback(async P=>{if(A)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Mo)throw new Error("Files are still loading.");const de=se?Rr(se,P):null;if(!se||!de)throw new Error("File not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete ${P}? This cannot be undone.`)){Ms(!1),Yt(P);try{await Re.mutateAsync({path:P,etag:de.metadata?.etag}),Ke.closeTab(P),or(De=>De===P?null:De),await D.refetch(),Le(`Deleted ${P}`,{intent:"info",duration:4e3})}catch(De){const He=De instanceof Jt&&De.status===428?"Delete blocked: missing latest file version. Reload the explorer and try again.":De instanceof Error?De.message:"Unable to delete file.";throw Qt(He),new Error(He)}finally{Yt(De=>De===P?null:De)}}},[Mo,A,se,Re,Ke,D,Le,Qt,Yt]),Ld=h.useCallback(async P=>{if(A)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Ai)throw new Error("Files are still loading.");const de=se?Rr(se,P):null;if(!se||!de||de.kind!=="folder")throw new Error("Folder not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete folder ${P} and all contents? This cannot be undone.`)){ta(P);try{await bt.mutateAsync({path:P,recursive:!0}),or(De=>De===P?null:De),Ke.closeTab(P),await D.refetch(),Le(`Deleted folder ${P}`,{intent:"info",duration:4e3})}catch(De){const He=De instanceof Error?De.message:"Unable to delete folder.";throw Qt(He),new Error(He)}finally{ta(De=>De===P?null:De)}}},[Ai,A,se,bt,Ke,D,Le,Qt,ta]),Oi=h.useCallback(()=>{if(!oa){Le("Replace is only available for draft configurations.",{intent:"warning",duration:6e3}),xt(null);return}xt(null),U(!0)},[oa,Le]),Wa=h.useCallback(async P=>{const de=P.target.files?.[0]??null;if(P.target.value="",!!de)try{await Ve.mutateAsync({file:de,ifMatch:C}),jt?.clear?.(),Ke.closeAllTabs(),M(void 0);const De=(await D.refetch()).data??D.data??null,He=De?Ry(De):null,mt=He?cp(He):null;or(mt?.id??null),Le("Configuration replaced from archive.",{intent:"success",duration:6e3})}catch(Ue){const De=Ue instanceof Jt&&Ue.status===412?"Replace blocked: the configuration changed on the server. Reload and try again.":Ue instanceof Jt&&Ue.status===428?"Replace blocked: refresh the file list and try again.":Ue instanceof Error?Ue.message:"Unable to replace configuration.";Qt(De),Le(De,{intent:"danger",duration:6e3})}},[Ve,C,jt,Ke,D,M,or,Le,Qt]),Ud=h.useMemo(()=>{const P=a.jsx("span",{className:"inline-block h-4 w-4 opacity-0"});return[{id:"toggle-explorer",label:at.collapsed?"Show Explorer":"Hide Explorer",icon:at.collapsed?P:a.jsx(Vy,{}),onSelect:()=>kt(de=>({...de,collapsed:!de.collapsed}))},{id:"toggle-console",label:Vn?"Show Console":"Hide Console",icon:Vn?P:a.jsx(Vy,{}),onSelect:ns}]},[at.collapsed,Vn,ns]),rc=h.useMemo(()=>{const P=[];return L&&P.push({id:"make-active",label:"Make active",disabled:!Za,onSelect:()=>{xt(null),na()}}),P.push({id:"duplicate",label:"Duplicate to edit",onSelect:()=>{xt(null),ke()}}),P.push({id:"export",label:Oe?"Exporting":"Export (.zip)",disabled:Oe,dividerAbove:!0,onSelect:()=>{xt(null),Fa()}},{id:"replace",label:"Import from zip",disabled:!oa,onSelect:Oi}),P},[Za,oa,Fa,Oi,L,Oe,ke,na]);h.useEffect(()=>{if(typeof document>"u"||!$r)return;const P=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=P||""}},[$r]);const sc=A3(e),ac=Ts?"S":"Ctrl+S",ic=Ts?"`":"Ctrl+`",oc=h.useMemo(()=>[{id:"test-force",label:"Force build and test",disabled:!Di,onSelect:()=>{Dt(!0),it(!0),Tn(null)}}],[Di,Dt,it,Tn]);if(!l&&D.isLoading)return a.jsx(wt,{variant:"loading",title:"Loading configuration files",description:"Fetching workspace configuration files for the workbench."});if(!l&&D.isError)return a.jsx(wt,{variant:"error",title:"Unable to load configuration files",description:"Try reloading the page or check your connection."});if(!se)return a.jsx(wt,{variant:"empty",title:"No configuration files found",description:"Create files in the ADE configuration package to begin editing."});const la=$r?"bg-background text-foreground":"bg-transparent text-foreground",$d=$r?"fixed inset-0 z-[90] flex flex-col bg-background text-foreground":"flex w-full min-h-0 min-w-0 flex-1 flex-col overflow-hidden bg-card text-foreground",Ao={bar:"border-border bg-card text-foreground",hint:"text-muted-foreground",button:"border-border-strong bg-popover text-foreground hover:border-border-strong hover:bg-muted"};return a.jsxs("div",{className:re("flex h-full min-h-0 w-full min-w-0 flex-1 flex-col overflow-hidden",la),onDragOver:Td,onDrop:Dd,children:[$r?a.jsx("div",{className:"fixed inset-0 z-40 bg-overlay/60"}):null,a.jsxs("div",{className:$d,children:[a.jsx(v3,{configName:s,workspaceLabel:sc,validationLabel:_n,canSaveFiles:wr,isSavingFiles:jd,onSaveFile:xs,saveShortcutLabel:ac,onOpenTestMenu:P=>Tn(P),onOpenActionsMenu:Do,canRunValidation:_o,isRunningValidation:Sd,onRunValidation:Mi,canRunExtraction:Di,isRunningExtraction:kd,onRunExtraction:P=>{Di&&(Dt(P),it(!0))},explorerVisible:Ds,onToggleExplorer:nc,consoleOpen:!Vn,onToggleConsole:ns,appearance:Ae,windowState:u,onMinimizeWindow:Gl,onToggleMaximize:Yl,onCloseWindow:Co,actionsBusy:Oe||Ve.isPending}),I?null:a.jsx("div",{className:"border-b border-border bg-card px-4 py-3 text-foreground",role:"status","aria-live":"polite",children:A?a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Read-only configuration"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:D.data?.status==="active"?"Active configurations cant be edited. Duplicate this configuration to create a draft you can change.":"Archived configurations cant be edited. Duplicate this configuration to create a draft you can change."})]}),a.jsx(Te,{size:"sm",onClick:ke,children:"Duplicate to edit"})]}):a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Draft configuration"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Make this draft active to use it for extraction runs.",z?` The current active configuration ${z.display_name} will be archived.`:""]}),!Za&&Ke.isDirty?a.jsx("p",{className:"text-xs font-medium text-warning-500",children:"Save changes before making active."}):null]}),a.jsx(Te,{size:"sm",variant:"secondary",onClick:na,disabled:!Za,title:!Za&&Ke.isDirty?"Save changes before making active.":void 0,children:"Make active"})]})}),a.jsxs("div",{ref:Hn,className:"flex min-h-0 min-w-0 flex-1 overflow-hidden",children:[a.jsx(gT,{activeView:Un,onSelectView:Nd,onOpenSettings:Cd,appearance:Ae}),Ds?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex min-h-0",style:{width:Os},children:Un==="explorer"&&Ke.tree?a.jsx(NR,{width:Os,tree:Ke.tree,activeFileId:Ke.activeTab?.id??"",openFileIds:Ke.tabs.map(P=>P.id),onSelectFile:P=>{Ke.openFile(P),M(P)},theme:Ae,canUploadFiles:ts,onUploadFiles:Ad,isUploadingFiles:ar,canCreateFile:ts,canCreateFolder:To,isCreatingEntry:ps||qa,onCreateFile:Rd,onCreateFolder:Od,canDeleteFile:Mo,canDeleteFolder:Ai,deletingFilePath:gs,deletingFolderPath:ki,onDeleteFile:zd,onDeleteFolder:Ld,expandedStorageKey:m3(e,t),onHide:Md}):a.jsx(b3,{width:Os,view:Un,appearance:Ae})}),a.jsx(Ay,{orientation:"vertical",onPointerDown:P=>{const de=P.clientX,Ue=Os;zy(P,{cursor:"col-resize",onMove:De=>{const He=De.clientX-de,mt=Dr(Ue+He,Br.minPx,Br.maxPx);kt(rt=>rt.collapsed||jr<=0?rt:{...rt,fraction:Ci(mt/jr,Br)})}})}})]}):null,a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-card text-card-foreground",children:a.jsxs("div",{className:"grid min-h-0 min-w-0 flex-1",style:{height:Sr>0?`${Sr}px`:void 0,gridTemplateRows:`${Math.max(bs,Eo)}px ${Jl}px ${Math.max(0,_i)}px`},children:[a.jsx(pR,{tabs:Ke.tabs,activeTabId:Ke.activeTab?.id??"",onSelectTab:P=>{Ke.selectTab(P),M(P)},onCloseTab:Ke.closeTab,onCloseOtherTabs:Ke.closeOtherTabs,onCloseTabsToRight:Ke.closeTabsToRight,onCloseAllTabs:Ke.closeAllTabs,onContentChange:Ke.updateContent,onSaveTab:aa,onSaveAllTabs:Xl,onMoveTab:Ke.moveTab,onRetryTabLoad:Ke.reloadTab,onPinTab:Ke.pinTab,onUnpinTab:Ke.unpinTab,onSelectRecentTab:Ke.selectRecentTab,editorTheme:ot,menuAppearance:Ae,canSaveFiles:wr,readOnly:A,minHeight:bs}),a.jsx(Ay,{orientation:"horizontal",onPointerDown:P=>{Dn(!0);const de=P.clientY,Ue=zs;let De=!1;zy(P,{cursor:"row-resize",onMove:He=>{if(Vn&&!De&&(vs(),De=!0),yn.maxPx<=0||Sr<=0)return;const mt=de-He.clientY,rt=Dr(Ue+mt,yn.minPx,yn.maxPx);on(Dr(rt/Sr,0,1))},onEnd:()=>{Dn(!1)}})},onDoubleClick:()=>{Vn?vs():Rs()},onToggle:ns,collapsed:Vn}),Vn?a.jsxs("div",{className:re("flex cursor-pointer items-center justify-between border-t px-4 py-2 text-[12px] shadow-inner",Ao.bar),onDoubleClick:ns,title:"Double-click to show console",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Console hidden"}),a.jsxs("span",{className:re("text-[11px]",Ao.hint),children:["(double-click gutter or ",ic,")"]})]}),a.jsx("button",{type:"button",onClick:ns,className:re("rounded px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition",Ao.button),title:"Show console",children:"Show console"})]}):a.jsx(aD,{height:Math.max(0,zs),console:ze,validation:Ce,activePane:S,onPaneChange:_,latestRun:ye,onClearConsole:_d,runStatus:ne,onToggleCollapse:ns,appearance:Ae})]})})]})]}),ht?a.jsx(y3,{open:ht,workspaceId:e,onClose:()=>{it(!1),Dt(!1)},onRun:ec}):null,a.jsx("input",{ref:$e,type:"file",accept:".zip",onChange:Wa,className:"hidden"}),O?a.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-overlay/60 px-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-border bg-card p-6 shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"replace-config-title",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{id:"replace-config-title",className:"text-lg font-semibold text-foreground",children:"Import from zip"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Importing will replace this configurations current code with the uploaded archive. Unsaved editor changes will be discarded."}),oa?null:a.jsx("p",{className:"text-sm font-medium text-danger-600",children:"Only draft configurations can be replaced."}),Ke.isDirty?a.jsx("p",{className:"text-sm font-medium text-warning-700",children:"You have unsaved changes that will be lost."}):null]}),a.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[a.jsx(Te,{variant:"secondary",onClick:()=>U(!1),disabled:Ve.isPending,children:"Cancel"}),a.jsx(Te,{onClick:()=>{U(!1),$e.current?.click()},disabled:!oa||Ve.isPending,isLoading:Ve.isPending,children:"Continue"})]})]})}):null,a.jsxs(Lr,{open:ge,title:"Duplicate configuration",description:`Create a new draft based on ${i}.`,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:Pa,onConfirm:Ql,isConfirming:H.isPending,confirmDisabled:H.isPending||T.trim().length===0,children:[a.jsx(Mt,{label:"New configuration name",required:!0,children:a.jsx(yt,{value:T,onChange:P=>G(P.target.value),placeholder:"Copy of My Config",disabled:H.isPending})}),ue?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:ue}):null]}),a.jsx(Lr,{open:ee,title:te?.stage==="checking"?"Checking configuration":te?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:te?.stage==="checking"?"Running validation before activation.":te?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":z?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${z.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:te?.stage==="issues"?"Continue editing":te?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:Ia,onConfirm:()=>{if(te?.stage==="issues"){Ia();return}if(te?.stage==="error"){Ia();return}cr()},isConfirming:ae.isPending,confirmDisabled:te?.stage==="checking"||ae.isPending,children:te?.stage==="checking"?a.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-border border-t-brand-600","aria-hidden":"true"}),a.jsx("span",{children:"Validating"})]}):te?.stage==="issues"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Issues:"}),a.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-border bg-muted p-3 text-xs text-foreground",children:te.issues.map(P=>a.jsxs("li",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:P.path}),a.jsx("p",{className:"text-muted-foreground",children:P.message})]},`${P.path}:${P.message}`))})]}):te?.stage==="error"?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:te.message}):null}),a.jsx(Lr,{open:!!St,title:St&&St.conflicts.length===1?"Overwrite existing file?":"Overwrite existing files?",description:St?`${St.conflicts.length} file${St.conflicts.length===1?"":"s"} already exist${St.folderPath?` in ${St.folderPath}.`:" in the configuration root."} Overwrite to replace them.`:void 0,confirmLabel:St?`Overwrite ${St.conflicts.length} file${St.conflicts.length===1?"":"s"}`:"Overwrite",cancelLabel:"Cancel",onCancel:()=>Ur(null),onConfirm:()=>{const P=St;Ur(null),P&&Ri(P,{overwriteExisting:!0})},isConfirming:ar,confirmDisabled:!St||St.conflicts.length===0||ar,tone:"danger",children:St?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"max-h-56 overflow-auto rounded-lg border border-border bg-muted p-3 text-xs text-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:"Will overwrite:"}),a.jsx("ul",{className:"mt-2 space-y-1",children:St.conflicts.slice(0,20).map(P=>a.jsx("li",{className:"break-all",children:P.targetPath},P.targetPath))}),St.conflicts.length>20?a.jsxs("p",{className:"mt-2 text-[11px] text-muted-foreground",children:["And ",St.conflicts.length-20," more"]}):null]}),St.skipped.length>0?a.jsxs("p",{className:"text-xs text-muted-foreground",children:[St.skipped.length," item",St.skipped.length===1?"":"s"," will be skipped due to invalid paths or size limits."]}):null,St.items.length>St.conflicts.length?a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-border bg-card px-3 py-2 text-xs text-foreground",children:[a.jsx("p",{className:"font-medium",children:"Prefer not to overwrite?"}),a.jsxs(Te,{size:"sm",variant:"secondary",disabled:ar,onClick:()=>{const P=St;Ur(null),Ri(P,{overwriteExisting:!1})},children:["Upload new only (",St.items.length-St.conflicts.length,")"]})]}):null]}):null}),a.jsx(hs,{open:!!gt,position:gt,onClose:()=>xt(null),items:rc,appearance:Ae}),a.jsx(hs,{open:!!vr,position:vr,onClose:()=>Tn(null),items:oc,appearance:Ae}),a.jsx(hs,{open:!!sr,position:sr,onClose:Ed,items:Ud,appearance:Ae})]})}function b3({width:e,view:t,appearance:s}){const i=g3[t]||"Coming soon";return a.jsx("div",{className:re("flex h-full min-h-0 flex-col items-center justify-center border-r px-4 text-center text-[11px] uppercase tracking-wide","border-border bg-muted text-muted-foreground"),style:{width:e},"aria-live":"polite",children:i})}function Vy(){return a.jsx("svg",{className:"h-4 w-4 text-brand-400",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M4 8l3 3 5-6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function v3({configName:e,workspaceLabel:t,validationLabel:s,canSaveFiles:i,isSavingFiles:l,onSaveFile:u,saveShortcutLabel:d,onOpenTestMenu:m,onOpenActionsMenu:g,canRunValidation:x,isRunningValidation:b,onRunValidation:v,canRunExtraction:y,isRunningExtraction:k,onRunExtraction:S,explorerVisible:j,onToggleExplorer:N,consoleOpen:M,onToggleConsole:_,appearance:R,windowState:q,onMinimizeWindow:$,onToggleMaximize:I,onCloseWindow:D,actionsBusy:C=!1}){const L="border-border bg-card text-foreground",V="text-muted-foreground",K="bg-success-600 text-on-success hover:bg-success-500 disabled:bg-muted disabled:text-muted-foreground",A="bg-brand-600 text-on-brand hover:bg-brand-500 disabled:bg-muted disabled:text-muted-foreground",X=q==="maximized";return a.jsxs("div",{className:re("flex items-center justify-between border-b px-4 py-2",L),children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx(j3,{}),a.jsxs("div",{className:"min-w-0 leading-tight",children:[a.jsx("div",{className:re("text-[10px] font-semibold uppercase tracking-[0.35em]",V),children:"Config Workbench"}),a.jsx("div",{className:"truncate text-sm font-semibold",title:e,children:e}),a.jsxs("div",{className:re("text-[11px]",V),title:t,children:["Workspace  ",t]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[s?a.jsx("span",{className:re("text-xs",V),children:s}):null,a.jsxs("button",{type:"button",onClick:u,disabled:!i,className:re("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",K),title:`Save (${d})`,children:[l?a.jsx(Gh,{}):a.jsx(T3,{}),l?"Saving":"Save"]}),a.jsxs("button",{type:"button",onClick:v,disabled:!x,className:re("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",A),children:[b?a.jsx(Gh,{}):a.jsx(Zy,{}),b?"Running":"Run validation"]}),a.jsx(XR,{label:k?"Running":"Test run",icon:k?a.jsx(Gh,{}):a.jsx(Zy,{}),disabled:!y,isLoading:k,title:"Run test run",primaryClassName:re(A,"rounded-r-none focus-visible:ring-offset-0"),menuClassName:re(A,"rounded-l-none px-2","border-border-strong"),menuAriaLabel:"Open test options",onPrimaryClick:()=>S(!1),onOpenMenu:fe=>m(fe),onContextMenu:fe=>{fe.preventDefault(),m({x:fe.clientX,y:fe.clientY})}}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ho,{ariaLabel:j?"Hide explorer":"Show explorer",onClick:N,appearance:R,active:j,icon:a.jsx(S3,{active:j})}),a.jsx(ho,{ariaLabel:M?"Hide console":"Show console",onClick:_,appearance:R,active:M,icon:a.jsx(k3,{})})]}),a.jsx(ho,{ariaLabel:"Configuration actions",onClick:fe=>{const Se=fe.currentTarget.getBoundingClientRect();g({x:Se.right+8,y:Se.bottom})},appearance:R,disabled:C,icon:a.jsx(M3,{})}),a.jsxs("div",{className:re("flex items-center gap-2 border-l pl-3","border-border/70"),children:[a.jsx(ho,{ariaLabel:"Minimize workbench",onClick:$,appearance:R,icon:a.jsx(E3,{})}),a.jsx(ho,{ariaLabel:X?"Restore workbench":"Maximize workbench",onClick:I,appearance:R,active:X,icon:X?a.jsx(C3,{}):a.jsx(N3,{})}),a.jsx(ho,{ariaLabel:"Close workbench",onClick:D,appearance:R,icon:a.jsx(_3,{})})]})]})]})}function y3({open:e,workspaceId:t,onClose:s,onRun:i}){const l=h.useRef(null),u=sn({queryKey:["builder-documents",t],queryFn:({signal:$})=>Tj(t,$),staleTime:6e4,enabled:e}),d=h.useMemo(()=>u.data??[],[u.data]),[m,g]=h.useState("");h.useEffect(()=>{if(e){if(!d.length){g("");return}g($=>$&&d.some(I=>I.id===$)?$:d[0]?.id??"")}},[d,e]);const x=d.find($=>$.id===m)??null,b=sn({queryKey:["builder-document-sheets",t,m],queryFn:({signal:$})=>E4(t,m,$),enabled:e&&!!m,staleTime:6e4}),v=h.useMemo(()=>b.data??[],[b.data]),[y,k]=h.useState([]),[S,j]=h.useState("INFO");h.useEffect(()=>{if(e){if(!v.length){k([]);return}k($=>$.filter(I=>v.some(D=>D.name===I)))}},[e,v]);const N=h.useMemo(()=>Array.from(new Set(y.filter($=>v.some(I=>I.name===$)))),[y,v]),M=h.useCallback($=>{k(I=>I.includes($)?I.filter(D=>D!==$):[...I,$])},[]);if(!e)return null;const _=!x||u.isLoading||u.isError,R=v.length>0,q=a.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-overlay/60 px-4",children:a.jsxs("div",{ref:l,role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl border border-border bg-card p-6 shadow-2xl",children:[a.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Select a document"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a workspace document and optional worksheet before running a test."})]}),a.jsx(Te,{variant:"ghost",size:"sm",onClick:s,children:"Close"})]}),u.isError?a.jsx(Lt,{tone:"danger",children:"Unable to load documents. Try again later."}):u.isLoading?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading documents"}):d.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a document in the workspace to run the extractor."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",htmlFor:"builder-run-document-select",children:"Document"}),a.jsx(zl,{id:"builder-run-document-select",value:m,onChange:$=>g($.target.value),className:"w-full",children:d.map($=>a.jsx("option",{value:$.id,children:$.name},$.id))}),x?a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded ",w3(x.created_at)," "," ",(x.byte_size??0).toLocaleString()," bytes"]}):null]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",htmlFor:"builder-run-log-level-select",children:"Log level"}),a.jsx(zl,{id:"builder-run-log-level-select",value:S,onChange:$=>j($.target.value),className:"w-full",children:x3.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls the engine runtime verbosity for this run."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Worksheet"}),b.isLoading?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading worksheets"}):b.isError?a.jsx(Lt,{tone:"warning",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Te,{variant:"secondary",size:"sm",onClick:()=>b.refetch(),disabled:b.isFetching,children:"Retry loading"}),a.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>k([]),children:"Use all worksheets"})]})]})}):R?a.jsxs("div",{className:"space-y-3 rounded-lg border border-border p-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Worksheets"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:N.length===0?"All worksheets will be processed by default. Select specific sheets to narrow the run.":`${N.length.toLocaleString()} worksheet${N.length===1?"":"s"} selected.`})]}),a.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>k([]),children:"Use all worksheets"})]}),a.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-border p-2",children:v.map($=>{const I=N.includes($.name);return a.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-foreground hover:bg-muted",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border text-success-600 focus:ring-success-500",checked:I,onChange:()=>M($.name)}),a.jsxs("span",{className:"flex-1 truncate",children:[$.name,$.is_active?" (active)":""]})]},`${$.index}-${$.name}`)})})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"This file will be ingested directly."})]})]}),a.jsxs("footer",{className:"mt-6 flex items-center justify-end gap-2",children:[a.jsx(Te,{variant:"ghost",onClick:s,children:"Cancel"}),a.jsx(Te,{onClick:()=>{x&&i({documentId:x.id,documentName:x.name,sheetNames:N.length>0?N:void 0,logLevel:S})},disabled:_,children:"Start test run"})]})]})});return typeof document>"u"?null:zr.createPortal(q,document.body)}async function Tj(e,t){const{data:s}=await Ie.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:{sort:"-created_at",page_size:50}},signal:t});return s?.items??[]}function w3(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function ho({ariaLabel:e,onClick:t,icon:s,appearance:i,active:l=!1,disabled:u=!1}){return a.jsx("button",{type:"button","aria-label":e,onClick:t,disabled:u,className:re("flex h-7 w-7 items-center justify-center rounded-[4px] border border-transparent text-sm transition focus-visible:outline-none focus-visible:ring-2","text-muted-foreground hover:text-foreground hover:bg-muted hover:border-border-strong focus-visible:ring-ring/40",l&&"text-foreground border-border-strong bg-muted",u&&"cursor-not-allowed opacity-50"),title:e,children:s})}function j3(){return a.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-brand-400 via-brand-500 to-brand-600 text-on-brand shadow-[0_12px_24px_rgb(var(--sys-color-shadow)/0.35)]",children:a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none",children:[a.jsx("rect",{x:"2",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("rect",{x:"9",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("rect",{x:"2",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("rect",{x:"9",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"})]})})}function S3({active:e}){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[a.jsx("rect",{x:"3",y:"4",width:"14",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6}),a.jsx("path",{d:"M7 4v12",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6})]})}function k3(){return a.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M3 10.5h10",stroke:"currentColor",strokeWidth:"1.2"})]})}function N3(){return a.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1.5",stroke:"currentColor",strokeWidth:"1.2"})})}function C3(){return a.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M6 4h6v6",stroke:"currentColor",strokeWidth:"1.2"})]})}function E3(){return a.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M4 11h8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function _3(){return a.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M5 5l6 6M11 5l-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function Gh(){return a.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"currentColor",strokeWidth:"2",opacity:"0.35"}),a.jsx("path",{d:"M20 12a8 8 0 0 0-8-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function Zy(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M4.5 3.5v9l7-4.5-7-4.5Z",fill:"currentColor"})})}function M3(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("circle",{cx:"3",cy:"8",r:"1.3",fill:"currentColor"}),a.jsx("circle",{cx:"8",cy:"8",r:"1.3",fill:"currentColor"}),a.jsx("circle",{cx:"13",cy:"8",r:"1.3",fill:"currentColor"})]})}function T3(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M4 2.5h7.25L13.5 4.8v8.7H4z",stroke:"currentColor",strokeWidth:"1.3",strokeLinejoin:"round",fill:"none"}),a.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function Yh(e){return e instanceof Jt?e.message:e instanceof DOMException&&e.name==="AbortError"?"Operation cancelled.":e instanceof Error?e.message:String(e)}function D3(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function A3(e){return e.length<=12?e:`${e.slice(0,6)}${e.slice(-4)}`}function Wy(e){if(e.encoding==="base64"){const t=globalThis.Buffer;if(t)return t.from(e.content,"base64").toString("utf-8");if(typeof atob=="function")try{const s=atob(e.content),i=new Uint8Array(s.length);for(let u=0;u<s.length;u+=1)i[u]=s.charCodeAt(u);if(typeof TextDecoder<"u")return new TextDecoder("utf-8",{fatal:!1}).decode(i);let l="";for(let u=0;u<i.length;u+=1)l+=String.fromCharCode(i[u]);return l}catch{}}return e.content}function R3(e){return`ade.ui.workspace.${e}.workbench.returnPath`}const Dj=h.createContext(null);function Aj(){const e=h.useContext(Dj);if(!e)throw new Error("useWorkbenchWindow must be used within a WorkbenchWindowProvider");return e}function O3({workspaceId:e,children:t}){const s=Zt(),i=Fn(),[l,u]=h.useState(null),[d,m]=h.useState("restored"),g=h.useRef(0),x=h.useRef(null),b=h.useRef(!1),v=h.useMemo(()=>Xs(R3(e)),[e]),y=h.useMemo(()=>`/workspaces/${e}/config-builder`,[e]),k=h.useMemo(()=>q3(i.pathname,e),[i.pathname,e]),S=!!k;h.useEffect(()=>{v.get()||v.set(y)},[v,y]),h.useEffect(()=>{S||v.set(`${i.pathname}${i.search}${i.hash}`)},[S,i.pathname,i.search,i.hash,v]),h.useEffect(()=>{if(!l){x.current=null;return}const V=x.current;if(S&&k===l.configId){if(V==="dock"){x.current=null,m("minimized");return}V&&(x.current=null);return}if(V==="dock"){x.current=null;return}if(V==="close"){x.current=null;return}u(null),m("restored"),x.current=null},[l,S,k,d]),h.useEffect(()=>{if(!l||!S||k!==l.configId)return;const V=Ky(i.search);V!==l.editorSearch&&u(K=>!K||K.instanceId!==l.instanceId?K:{...K,editorSearch:V})},[l,S,k,i.search]);const j=h.useCallback(()=>v.get()??y,[v,y]),N=h.useCallback(V=>{u(K=>{if(!K)return K;const A=new URLSearchParams(K.editorSearch),X=typeof V=="function"?V(new URLSearchParams(A)):V,Se=pj(X).toString();return Se===K.editorSearch?K:{...K,editorSearch:Se}})},[]),M=h.useCallback(V=>{const K=Ky(V.editorSearch??i.search);let A=d==="minimized";u(X=>{if(X&&X.workspaceId===V.workspaceId&&X.configId===V.configId){const fe=V.seed??X.seed,Se=V.editorSearch!==void 0?K:X.editorSearch;return X.configName===V.configName&&X.configDisplayName===V.configDisplayName&&X.seed===fe&&X.editorSearch===Se?X:{...X,configName:V.configName,configDisplayName:V.configDisplayName,seed:fe,editorSearch:Se}}return A=!0,g.current+=1,{...V,editorSearch:K,instanceId:`${V.workspaceId}:${V.configId}:${g.current}`}}),A&&m("restored")},[i.search,d]),_=h.useCallback(()=>{l&&(u(null),m("restored"),x.current="close",s(j()))},[l,s,j]),R=h.useCallback(()=>{l&&(b.current=!0,m("minimized"),x.current="dock",s(j()))},[l,s,j]),q=h.useCallback(()=>{if(!l)return;m("restored");const V=F3(l.workspaceId,l.configId,l.editorSearch);`${i.pathname}${i.search}`!==V&&s(V)},[l,s,i.pathname,i.search]),$=h.useCallback(()=>{l&&m("maximized")},[l]),I=h.useCallback(()=>{const V=b.current;return b.current=!1,V},[]),D=h.useMemo(()=>({session:l,windowState:d,openSession:M,closeSession:_,minimizeWindow:R,maximizeWindow:$,restoreWindow:q,shouldBypassUnsavedGuard:I}),[l,d,M,_,R,$,q,I]),C=!!l&&(!S||k!==l?.configId),L=h.useMemo(()=>C&&l?{params:new URLSearchParams(l.editorSearch),setSearchParams:N}:null,[C,l,N]);return a.jsxs(Dj.Provider,{value:D,children:[t,a.jsx(FR,{value:L,children:a.jsx(z3,{session:l,windowState:d,onClose:_,onMinimize:R,onMaximize:$,onRestore:q,shouldBypassUnsavedGuard:I})}),l&&d==="minimized"?a.jsx(L3,{configName:l.configName,onRestore:q,onDismiss:_}):null]})}function z3({session:e,windowState:t,onClose:s,onMinimize:i,onMaximize:l,onRestore:u,shouldBypassUnsavedGuard:d}){return!e||t!=="maximized"?null:a.jsx("div",{className:"fixed inset-0 z-40 flex flex-col bg-background",children:a.jsx(Mj,{workspaceId:e.workspaceId,configId:e.configId,configName:e.configName,configDisplayName:e.configDisplayName,seed:e.seed,windowState:"maximized",onCloseWorkbench:s,onMinimizeWindow:i,onMaximizeWindow:l,onRestoreWindow:u,shouldBypassUnsavedGuard:d},e.instanceId)})}function L3({configName:e,onRestore:t,onDismiss:s}){return a.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40",children:a.jsx("div",{className:"pointer-events-auto border-t border-border bg-card/95 shadow-[0_-12px_40px_rgb(var(--sys-color-shadow)/0.15)] backdrop-blur",children:a.jsxs("div",{className:"relative mx-auto flex h-14 max-w-6xl items-center px-4 text-foreground",children:[a.jsxs("button",{type:"button",onClick:t,className:"group flex min-w-0 flex-1 items-center gap-4 rounded-md px-3 py-1.5 text-left transition hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-border bg-background text-brand-600 shadow-inner",children:a.jsx(U3,{})}),a.jsxs("span",{className:"flex min-w-0 flex-col leading-tight",children:[a.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-muted-foreground",children:"Config workbench"}),a.jsx("span",{className:"truncate text-sm font-semibold text-foreground",title:e,children:e})]}),a.jsx("span",{className:"ml-auto inline-flex items-center rounded border border-border bg-card px-2 py-0.5 text-[11px] font-medium text-muted-foreground transition group-hover:border-border-strong group-hover:bg-background",children:"Restore"})]}),a.jsxs("div",{className:"ml-3 flex h-10 overflow-hidden rounded-md border border-border bg-card text-muted-foreground",children:[a.jsx(Qy,{ariaLabel:"Restore minimized workbench",onClick:t,destructive:!1,children:a.jsx($3,{})}),a.jsx(Qy,{ariaLabel:"Close minimized workbench",onClick:s,destructive:!0,children:a.jsx(B3,{})})]})]})})})}function Qy({ariaLabel:e,onClick:t,children:s,destructive:i=!1}){return a.jsx("button",{type:"button","aria-label":e,onClick:t,className:re("flex h-full w-12 items-center justify-center transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",i?"text-danger-600 hover:bg-danger-50":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:s})}function U3(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"})]})}function $3(){return a.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"})})}function B3(){return a.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M4.5 11.5 11.5 4.5",stroke:"currentColor",strokeWidth:"1.2"}),a.jsx("path",{d:"M11.5 11.5 4.5 4.5",stroke:"currentColor",strokeWidth:"1.2"})]})}function q3(e,t){const s=`/workspaces/${t}/config-builder/`;if(!e.startsWith(s))return null;const i=e.slice(s.length).split("/").filter(Boolean);if(i.length>=2&&i[1]==="editor")try{return decodeURIComponent(i[0])}catch{return i[0]}return null}function F3(e,t,s){const i=`/workspaces/${e}/config-builder/${encodeURIComponent(t)}/editor`;return s.length>0?`${i}?${s}`:i}function Ky(e){return e?e.startsWith("?")?e.slice(1):e:""}function km({to:e,replace:t,className:s,title:i,children:l,onClick:u,ariaCurrent:d}){const m=Zt();return a.jsx("a",{href:e,className:s,title:i,"aria-current":d,onClick:g=>{u?.(g),!(g.defaultPrevented||g.metaKey||g.ctrlKey||g.shiftKey||g.altKey)&&(g.preventDefault(),m(e,{replace:t}))},children:l})}function bp({to:e,end:t,className:s,children:i,title:l,onClick:u}){const{pathname:d}=Fn(),m=t?d===e:d===e||d.startsWith(`${e}/`),g=typeof s=="function"?s({isActive:m}):s,x=typeof i=="function"?i({isActive:m}):i,b=m?"page":void 0;return a.jsx(km,{to:e,className:g,title:l,onClick:u,ariaCurrent:b,children:x})}function bd(e){return function({title:s,...i}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":s?void 0:!0,role:s?"img":"presentation",...i,children:[s?a.jsx("title",{children:s}):null,a.jsx("path",{d:e})]})}}const P3=bd("M7 3h7l7 7v11a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2ZM14 3v5a1 1 0 0 0 1 1h5"),I3=bd("M5 6h14M5 12h14M5 18h8M7 4v4M12 10v4M15 16v4"),H3=bd("M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM16.5 12a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5ZM10 7.5h4M7.5 10v4M15.5 10.5 12 14"),V3=bd("M5 7h14M5 17h14M9 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm10 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-7-5h7m-9 0H5"),Rj=[{id:"documents",path:"documents",label:"Documents",icon:P3},{id:"runs",path:"runs",label:"Runs",icon:I3},{id:"config-builder",path:"config-builder",label:"Config Builder",icon:H3},{id:"settings",path:"settings",label:"Workspace Settings",icon:V3,matchPrefix:!0}],Vu=Rj[0];function Oj(e){return Rj.map(t=>({id:t.id,label:t.label,href:`/workspaces/${e.id}/${t.path}`,icon:t.icon,matchPrefix:t.matchPrefix}))}const Gy="4.5rem",Yy="16rem",Z3=70,W3=140;function Q3({workspace:e,isPinned:t,onTogglePinned:s,items:i}){const l=i??Oj(e),u=J3(l),d=u?l.filter(D=>D.id!==u.id):l,[m,g]=h.useState("pointer"),[x,b]=h.useState(!1),[v,y]=h.useState(!1),[k,S]=h.useState(!1),j=h.useRef(null),N=h.useRef(null),M=h.useCallback(()=>{j.current&&(window.clearTimeout(j.current),j.current=null),N.current&&(window.clearTimeout(N.current),N.current=null)},[]),_=!t&&(x||v&&m==="keyboard");h.useEffect(()=>{if(t){M(),S(!1);return}if(!(_&&k)&&!(!_&&!k))if(M(),_){if(v&&m==="keyboard"){S(!0);return}j.current=window.setTimeout(()=>S(!0),Z3)}else N.current=window.setTimeout(()=>S(!1),W3)},[M,m,v,x,k,t,_]),h.useEffect(()=>M,[M]),h.useEffect(()=>{const D=C=>{const L=C.key.toLowerCase();if((L==="tab"||L.startsWith("arrow"))&&g("keyboard"),(C.metaKey||C.ctrlKey)&&L==="b"){const V=C.target;if(X3(V))return;C.preventDefault(),s()}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[s]);const R=t||k,q=t?Yy:Gy,$=R?Yy:Gy;return a.jsx("aside",{className:re("relative hidden min-h-0 flex-shrink-0 bg-sidebar text-sidebar-foreground lg:flex","border-r border-sidebar-border","transition-[width] duration-200 ease-out motion-reduce:transition-none"),style:{width:q,height:"calc(100vh - var(--workspace-topbar-height, 0px))",willChange:"width"},"aria-label":"Primary workspace navigation","data-pinned":t?"true":"false","data-expanded":R?"true":"false",children:a.jsx("div",{className:re("absolute inset-y-0 left-0 z-40 flex min-h-0 flex-col bg-sidebar text-sidebar-foreground","border-r border-sidebar-border","transition-[width,box-shadow] duration-200 ease-out motion-reduce:transition-none",!t&&R&&"shadow-xl"),style:{width:$,willChange:"width"},onMouseEnter:()=>{t||b(!0)},onMouseLeave:()=>{t||b(!1)},onPointerDownCapture:()=>g("pointer"),onKeyDownCapture:D=>{const C=D.key.toLowerCase();(C==="tab"||C.startsWith("arrow"))&&g("keyboard")},onFocusCapture:()=>y(!0),onBlurCapture:()=>{requestAnimationFrame(()=>{const D=document.activeElement,C=document.querySelector("[data-workspace-nav-panel='true']");C&&D&&C.contains(D)||y(!1)})},"data-workspace-nav-panel":"true",children:a.jsx(K3,{items:d,settingsItem:u,expanded:R,isPinned:t,onTogglePinned:s})})})}function K3({items:e,settingsItem:t,expanded:s,isPinned:i,onTogglePinned:l}){const u=s?"drawer":"rail";return a.jsxs(a.Fragment,{children:[a.jsx("nav",{className:re("flex-1 overflow-y-auto","overflow-x-visible",s?"px-3 py-4":"px-2 py-3"),"aria-label":"Workspace sections",children:a.jsx(zj,{items:e,variant:u})}),a.jsx("div",{className:re("border-t border-sidebar-border",s?"px-3 py-3":"px-2 py-2"),children:a.jsxs("div",{className:re("flex flex-col",s?"gap-1.5":"gap-2"),children:[t?a.jsx(G3,{item:t,expanded:s}):null,a.jsx(Y3,{isPinned:i,expanded:s,onToggle:l})]})})]})}function zj({items:e,variant:t="drawer",onNavigate:s,className:i,showHeading:l=!0}){const u=t==="drawer";return a.jsxs(a.Fragment,{children:[l&&u?a.jsx("p",{className:"mb-3 px-2 text-[0.63rem] font-semibold uppercase tracking-[0.4em] text-sidebar-foreground",children:"Workspace"}):null,a.jsx("ul",{className:re("flex flex-col",u?"gap-1.5":"gap-2",i),children:e.map(d=>a.jsx("li",{className:"w-full",children:a.jsx(bp,{to:d.href,end:!(d.matchPrefix??!1),title:u?void 0:d.label,"aria-label":u?void 0:d.label,onClick:m=>{if(Lj(m)&&m.currentTarget.getAttribute("aria-current")==="page"){m.preventDefault();return}s?.()},className:({isActive:m})=>re("group relative flex w-full items-center rounded-lg","transition-colors duration-150 motion-reduce:transition-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-2 focus-visible:ring-offset-sidebar",u?"px-3 py-2":"justify-center px-2 py-2",m?"bg-sidebar-item-active text-sidebar-foreground":"text-sidebar-foreground hover:bg-sidebar-item-hover hover:text-sidebar-foreground"),children:({isActive:m})=>a.jsxs(a.Fragment,{children:[a.jsx("span",{className:re("flex h-10 w-10 items-center justify-center rounded-xl","transition-colors duration-150 motion-reduce:transition-none",m?"bg-sidebar-item-active text-sidebar-foreground":"bg-sidebar-item-hover/70 text-sidebar-foreground group-hover:bg-sidebar-item-hover group-hover:text-sidebar-foreground"),children:a.jsx(d.icon,{className:re("h-5 w-5 transition-colors duration-150","text-sidebar-foreground"),"aria-hidden":!0})}),a.jsx("span",{className:re("min-w-0 overflow-hidden truncate","transition-[max-width,opacity,transform,margin-left] duration-200 motion-reduce:transition-none",u?"ml-3 max-w-[14rem] opacity-100 translate-x-0":"ml-0 max-w-0 opacity-0 translate-x-1","text-sm font-semibold text-sidebar-foreground"),"aria-hidden":!u,children:d.label}),u?null:a.jsx(vp,{label:d.label})]})})},d.id))})]})}function G3({item:e,expanded:t}){const s=e.label||"Workspace settings";return a.jsx(bp,{to:e.href,end:!(e.matchPrefix??!1),title:t?void 0:s,onClick:i=>{Lj(i)&&i.currentTarget.getAttribute("aria-current")==="page"&&i.preventDefault()},className:({isActive:i})=>re("group relative flex w-full items-center rounded-lg","transition-colors duration-150 motion-reduce:transition-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-2 focus-visible:ring-offset-sidebar",t?"px-2 py-2":"justify-center px-2 py-2",i?"bg-sidebar-item-active text-sidebar-foreground":"text-sidebar-foreground hover:bg-sidebar-item-hover hover:text-sidebar-foreground"),children:({isActive:i})=>a.jsxs(a.Fragment,{children:[a.jsx("span",{className:re("flex h-10 w-10 items-center justify-center rounded-xl","transition-colors duration-150 motion-reduce:transition-none",i?"bg-sidebar-item-active text-sidebar-foreground":"bg-sidebar-item-hover/70 text-sidebar-foreground group-hover:bg-sidebar-item-hover group-hover:text-sidebar-foreground"),"aria-hidden":!0,children:a.jsx(eO,{})}),a.jsx("span",{className:re("min-w-0 overflow-hidden truncate","transition-[max-width,opacity,transform,margin-left] duration-200 motion-reduce:transition-none",t?"ml-3 max-w-[14rem] opacity-100 translate-x-0":"ml-0 max-w-0 opacity-0 translate-x-1","text-xs font-semibold text-sidebar-foreground"),"aria-hidden":!t,children:"Settings"}),t?null:a.jsx(vp,{label:s})]})})}function Y3({isPinned:e,expanded:t,onToggle:s}){const i=e?"Unpin sidebar":"Pin sidebar",l="Ctrl/B";return a.jsxs("button",{type:"button",onClick:s,"aria-label":i,"aria-pressed":e,title:t?`${i} (${l})`:`${i} (${l})`,className:re("group relative flex w-full items-center rounded-lg","transition-colors duration-150 motion-reduce:transition-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sidebar-ring focus-visible:ring-offset-2 focus-visible:ring-offset-sidebar",t?"px-2 py-2":"justify-center px-2 py-2","text-sidebar-foreground hover:bg-sidebar-item-hover hover:text-sidebar-foreground"),children:[a.jsx("span",{className:re("flex h-10 w-10 items-center justify-center rounded-xl bg-sidebar-item-hover/70 text-sidebar-foreground transition-colors duration-150 group-hover:bg-sidebar-item-hover group-hover:text-sidebar-foreground"),"aria-hidden":!0,children:e?a.jsx(nO,{}):a.jsx(tO,{})}),a.jsxs("span",{className:re("min-w-0 overflow-hidden truncate","transition-[max-width,opacity,transform,margin-left] duration-200 motion-reduce:transition-none",t?"ml-3 max-w-[14rem] opacity-100 translate-x-0":"ml-0 max-w-0 opacity-0 translate-x-1","text-xs font-semibold text-sidebar-foreground"),"aria-hidden":!t,children:[e?"Pinned":"Pin sidebar",a.jsx("span",{className:"ml-2 text-[0.7rem] font-semibold text-sidebar-foreground",children:l})]}),t?null:a.jsx(vp,{label:i})]})}function vp({label:e}){return a.jsx("span",{className:re("pointer-events-none absolute left-full top-1/2 z-50 ml-2 -translate-y-1/2 whitespace-nowrap","rounded-md bg-sidebar-foreground px-2 py-1 text-xs font-medium text-sidebar shadow-lg","opacity-0 transition-opacity duration-150 motion-reduce:transition-none","group-hover:opacity-100 group-focus-visible:opacity-100"),"aria-hidden":!0,children:e})}function Lj(e){return e.button===0&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey}function X3(e){if(!e||!(e instanceof HTMLElement))return!1;const t=e.tagName.toLowerCase();return!!(t==="input"||t==="textarea"||t==="select"||e.isContentEditable||e.closest?.("[contenteditable='true']"))}function J3(e){const t=new Set(["settings","workspace-settings","workspacesettings","preferences"]),s=e.find(d=>t.has(d.id.toLowerCase()));if(s)return s;const i=e.find(d=>d.id.toLowerCase().includes("settings"));if(i)return i;const l=e.find(d=>/settings|preferences/i.test(d.href));return l||e.find(d=>/settings|preferences/i.test(d.label))}function eO(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:[a.jsx("path",{d:"M10 12.6a2.6 2.6 0 1 0 0-5.2 2.6 2.6 0 0 0 0 5.2Z",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M16.6 10.3a7 7 0 0 0 0-.6l1.4-1.1a.8.8 0 0 0 .2-1l-1.3-2.2a.8.8 0 0 0-1-.3l-1.6.6c-.2-.2-.6-.4-.9-.5l-.2-1.7a.8.8 0 0 0-.8-.7H8.7a.8.8 0 0 0-.8.7l-.2 1.7c-.3.1-.6.3-.9.5l-1.6-.6a.8.8 0 0 0-1 .3L2.9 7.6a.8.8 0 0 0 .2 1L4.5 9.7a7 7 0 0 0 0 .6l-1.4 1.1a.8.8 0 0 0-.2 1l1.3 2.2a.8.8 0 0 0 1 .3l1.6-.6c.3.2.6.4.9.5l.2 1.7a.8.8 0 0 0 .8.7h2.6a.8.8 0 0 0 .8-.7l.2-1.7c.3-.1.6-.3.9-.5l1.6.6a.8.8 0 0 0 1-.3l1.3-2.2a.8.8 0 0 0-.2-1l-1.4-1.1Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}function tO(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:[a.jsx("path",{d:"M7 3h6l-1 6 3 3H5l3-3-1-6Z",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M10 12v5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function nO(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:[a.jsx("path",{d:"M7 3h6l-1 6 3 3H5l3-3-1-6Z",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M6 16 14 8",strokeLinecap:"round",strokeLinejoin:"round"})]})}function rO(){return a.jsxs("section",{children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Workspace Overview"}),a.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"TODO: add workspace summary widgets."})]})}function Ll(e,t){const s=Math.max(0,e-t),i=Math.floor(s/6e4);if(i<1)return"just now";if(i<60)return`${i}m ago`;const l=Math.floor(i/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function Zu(e){const t=e?Date.parse(e):NaN;return Number.isNaN(t)?Date.now():t}function Uj(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],i=Math.min(Math.floor(Math.log(e)/Math.log(t)),s.length-1),l=e/Math.pow(t,i);return`${l.toFixed(l>=10||i===0?0:1)} ${s[i]}`}function $j(e){return`${e.replace(/\.[^.]+$/,"")}_normalized.xlsx`}function yp(e){if(!e)return null;const t=e.match(/filename\*=UTF-8''([^;]+)/i);return t?.[1]?decodeURIComponent(t[1]):e.match(/filename="?([^";]+)"?/i)?.[1]??null}function wp(e,t){if(typeof window>"u")return;const s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=t,i.click(),window.setTimeout(()=>window.URL.revokeObjectURL(s),0)}function sO(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):e instanceof Date?e.toLocaleDateString():String(e)}function Bj(e,t){return Array.from({length:t},(s,i)=>e[i]??"")}function aO(e,t){const s=e.map(d=>d.trim()),i=s.some(Boolean),l=Math.max(s.length,t),u=i?s:Array.from({length:l},(d,m)=>qj(m));return Bj(u,l)}function qj(e){let t="",s=e+1;for(;s>0;){const i=(s-1)%26;t=String.fromCharCode(65+i)+t,s=Math.floor((s-1)/26)}return`Column ${t}`}function Cu(e,t=8){return e?e.slice(0,Math.max(4,t)):""}async function iO(e){if(typeof navigator<"u"&&navigator.clipboard?.writeText){await navigator.clipboard.writeText(e);return}const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="-1000px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function Fj(e){const t=e.toLowerCase();return t.endsWith(".xlsx")?"xlsx":t.endsWith(".xls")?"xls":t.endsWith(".csv")?"csv":t.endsWith(".pdf")?"pdf":"unknown"}function Pj(e){switch(e){case"xlsx":return"XLSX";case"xls":return"XLS";case"csv":return"CSV";case"pdf":return"PDF";default:return"File"}}function mi({title:e,description:t,action:s}){return a.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-border bg-card px-8 py-12 text-center",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t}),s?a.jsx(Te,{type:"button",onClick:s.onClick,size:"sm",children:s.label}):null]})}function oO({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M12 9v4"}),a.jsx("path",{d:"M12 17h.01"}),a.jsx("path",{d:"M10.3 3.6 2.5 18a1 1 0 0 0 .9 1.5h17.2a1 1 0 0 0 .9-1.5l-7.8-14.4a1 1 0 0 0-1.4 0Z"})]})}function lO({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("circle",{cx:"12",cy:"12",r:"9"}),a.jsx("path",{d:"M12 7v6l4 2"})]})}function Ij({mapping:e,showPending:t=!1}){const s=!!(e.pending&&e.attention===0&&e.unmapped===0);return s&&!t?null:s?a.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",children:[a.jsx(lO,{className:"h-3 w-3"}),"Mapping pending"]}):e.attention===0&&e.unmapped===0?null:a.jsxs("span",{className:re("inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold","border-warning-200 bg-warning-50 text-warning-700"),children:[a.jsx(oO,{className:"h-3 w-3"}),e.attention>0?`${e.attention} need attention`:`${e.unmapped} unmapped`]})}const Wu="__unassigned__";function vd({people:e,value:t,onChange:s,placeholder:i,multiple:l=!1,includeUnassigned:u=!1,disabled:d=!1,buttonClassName:m}){const g=h.useRef(null),[x,b]=h.useState(!1),[v,y]=h.useState("");h.useEffect(()=>{function _(R){if(!x)return;const q=R.target;g.current&&q&&!g.current.contains(q)&&(b(!1),y(""))}return window.addEventListener("mousedown",_),()=>window.removeEventListener("mousedown",_)},[x]);const k=h.useMemo(()=>{const _=e.slice().sort((R,q)=>R.label.localeCompare(q.label));return u?[{key:Wu,label:"Unassigned",kind:"label"},..._]:_},[u,e]),S=h.useMemo(()=>{const _=v.trim().toLowerCase();return _?k.filter(R=>R.label.toLowerCase().includes(_)):k},[k,v]),j=h.useMemo(()=>{const _=new Map(k.map(q=>[q.key,q.label]));return t.map(q=>_.get(q)??(q===Wu?"Unassigned":q)).filter(Boolean)},[k,t]);function N(_){if(d)return;if(!l){s([_]),b(!1),y("");return}const R=new Set(t);R.has(_)?R.delete(_):R.add(_),s(Array.from(R))}const M=j.length===0?i:l?j.length===1?j[0]:`${j[0]} +${j.length-1}`:j[0];return a.jsxs("div",{ref:g,className:"relative",children:[a.jsxs("button",{type:"button",disabled:d,onClick:()=>b(_=>!_),className:re("inline-flex min-w-0 items-center gap-2 rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground shadow-sm transition",d?"opacity-60":"hover:border-brand-300",m),children:[a.jsx("span",{className:re("min-w-0 truncate",j.length===0?"text-muted-foreground":"text-foreground"),children:M}),a.jsx("span",{className:"text-muted-foreground","aria-hidden":!0,children:"v"})]}),x?a.jsxs("div",{className:"absolute left-0 z-30 mt-2 w-72 rounded-2xl border border-border bg-card shadow-lg",children:[a.jsx("div",{className:"border-b border-border p-2",children:a.jsx("input",{value:v,onChange:_=>y(_.target.value),placeholder:"Search people...",className:"w-full rounded-xl border border-border bg-background px-3 py-2 text-sm outline-none focus:border-brand-300"})}),a.jsx("div",{className:"max-h-72 overflow-auto p-2",children:S.length===0?a.jsx("div",{className:"px-3 py-3 text-xs text-muted-foreground",children:"No matches."}):S.map(_=>{const R=t.includes(_.key);return a.jsxs("button",{type:"button",onClick:()=>N(_.key),className:re("flex w-full items-center justify-between gap-3 rounded-xl px-3 py-2 text-left text-sm transition",R?"bg-brand-50 dark:bg-brand-500/20":"hover:bg-background dark:hover:bg-muted/40"),children:[a.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground",children:_.label}),l?a.jsx("span",{className:re("text-xs font-semibold",R?"text-brand-700 dark:text-brand-200":"text-muted-foreground"),children:R?"Selected":"Select"}):null]},_.key)})}),l&&t.length>0?a.jsxs("div",{className:"flex items-center justify-between border-t border-border px-3 py-2",children:[a.jsx("button",{type:"button",onClick:()=>s([]),className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Clear"}),a.jsx("button",{type:"button",onClick:()=>{b(!1),y("")},className:"text-xs font-semibold text-brand-600",children:"Done"})]}):null]}):null]})}function jp(e){return e.length===0||e[0]===Wu?null:e[0]}function Sp(){return Wu}const cO={queued:"bg-muted-foreground",processing:"bg-warning-500",ready:"bg-success-500",failed:"bg-danger-500",archived:"bg-muted"};function uO({columns:e,groupBy:t,onGroupByChange:s,activeId:i,onActivate:l,now:u,isLoading:d,isError:m,hasNextPage:g,isFetchingNextPage:x,onLoadMore:b,onRefresh:v,onUploadClick:y,onClearFilters:k,showNoDocuments:S,showNoResults:j,people:N,onAssign:M,onPickUp:_}){const R=e.reduce((I,D)=>I+D.items.length,0),q=d&&R===0,$=m&&R===0;return a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-background",children:[a.jsxs("div",{className:"flex shrink-0 flex-wrap items-center justify-between gap-3 border-b border-border bg-card px-6 py-3 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2 font-semibold text-muted-foreground",children:[a.jsx("span",{children:"Group by"}),a.jsx("div",{className:"flex items-center rounded-full border border-border bg-background px-1 py-1",children:["status","tag","uploader"].map(I=>a.jsx("button",{type:"button",onClick:()=>s(I),className:re("rounded-full px-3 py-1 text-xs font-semibold transition",t===I?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),"aria-pressed":t===I,children:I==="status"?"Status":I==="tag"?"Tag":"Uploader"},I))})]}),a.jsx("span",{className:"text-muted-foreground",children:"Select a card to open the preview."})]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-6 py-4",children:q?a.jsx("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-border bg-card text-sm text-muted-foreground",children:"Loading board..."}):$?a.jsx(mi,{title:"Unable to load documents",description:"We could not refresh this board. Try again.",action:{label:"Try again",onClick:v}}):S?a.jsx(mi,{title:"No documents yet",description:"Upload your first batch to start the processing loop.",action:{label:"Upload files",onClick:y}}):j?a.jsx(mi,{title:"No results",description:"Try clearing filters or adjusting the search.",action:{label:"Clear filters",onClick:k}}):a.jsx("div",{className:"flex min-h-full gap-4",children:e.map(I=>a.jsxs("div",{className:"flex w-72 min-w-[18rem] flex-col",children:[a.jsx("div",{className:"mb-3 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:I.label}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.items.length," items"]})]})}),a.jsx("div",{className:"flex min-h-[12rem] flex-1 flex-col gap-3 rounded-2xl border border-dashed border-border bg-card px-3 py-3",children:I.items.length===0?a.jsx("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 text-center text-xs text-muted-foreground",children:a.jsx("p",{children:"No items yet"})}):I.items.map(D=>a.jsxs("div",{onClick:()=>l(D.id),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),l(D.id))},className:re("flex cursor-pointer flex-col gap-3 rounded-2xl border bg-card px-3 py-3 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",i===D.id?"border-brand-400":"border-border hover:border-brand-300"),role:"button",tabIndex:0,"aria-label":`Open ${D.name}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:D.name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Updated ",Ll(u,D.updatedAt)]})]}),a.jsx("span",{className:re("h-2.5 w-2.5 rounded-full",cO[D.status]),"aria-hidden":!0})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[a.jsxs("span",{className:"font-semibold",children:["Assignee: ",D.assigneeLabel??"Unassigned"]}),D.assigneeKey?null:a.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),_(D.id)},className:"shrink-0 whitespace-nowrap rounded-full border border-brand-200 bg-brand-50 px-2 py-0.5 font-semibold text-brand-700 dark:border-brand-500/40 dark:bg-brand-500/20 dark:text-brand-200",children:"Pick up"}),a.jsx("div",{onPointerDown:C=>C.stopPropagation(),className:"min-w-0 rounded-full border border-border bg-background px-1 py-0.5",children:a.jsx(vd,{people:N,value:[D.assigneeKey??Sp()],onChange:C=>M(D.id,jp(C)),placeholder:"Assign...",includeUnassigned:!0,buttonClassName:"min-w-0 max-w-[11rem] border-0 bg-transparent px-2 py-0 text-[11px] shadow-none"})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-muted-foreground",children:[a.jsx("span",{className:"font-semibold",children:D.uploader??"Unassigned"}),D.tags.length>0?a.jsxs("span",{className:"rounded-full border border-border bg-background px-2 py-0.5",children:[D.tags[0],D.tags.length>1?` +${D.tags.length-1}`:""]}):a.jsx("span",{className:"text-muted-foreground",children:"No tags"}),a.jsx(Ij,{mapping:D.mapping})]})]},D.id))})]},I.id))})}),g?a.jsx("div",{className:"flex shrink-0 justify-center border-t border-border bg-card px-6 py-3",children:a.jsx("button",{type:"button",onClick:b,className:"text-xs font-semibold text-brand-600",disabled:x,children:x?"Loading more...":"Load more"})}):null]})}function dO({count:e,outputReadyCount:t,onClear:s,onAddTag:i,onDownloadOriginals:l,onDownloadOutputs:u}){return e<=0?null:a.jsx("div",{className:"sticky bottom-0 z-10 shrink-0 border-t border-border bg-card px-6 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"text-sm text-foreground",children:[a.jsx("span",{className:"font-semibold",children:e})," selected"]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Te,{size:"sm",type:"button",variant:"secondary",onClick:i,children:"Add tags"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Te,{size:"sm",type:"button",variant:"secondary",onClick:u,children:"Download outputs"}),a.jsxs("span",{className:"text-[11px] font-semibold text-muted-foreground",children:[t,"/",e," ready"]})]}),a.jsx(Te,{size:"sm",type:"button",variant:"secondary",onClick:l,children:"Download originals"}),a.jsx(Te,{size:"sm",type:"button",variant:"ghost",onClick:s,children:"Clear"})]})]})})}function Qu({workspaceId:e,selected:t,onToggle:s,placeholder:i,disabled:l}){const[u,d]=h.useState(!1),[m,g]=h.useState(""),x=h.useRef(null),b=m.trim(),v=b.length>=2,y=sn({queryKey:["documents",e,"tags",{q:v?b:""}],queryFn:async({signal:j})=>{const{data:N}=await Ie.GET("/api/v1/workspaces/{workspace_id}/tags",{params:{path:{workspace_id:e},query:{q:v?b:null,sort:"-count",page:1,page_size:20,include_total:!1}},signal:j});if(!N)throw new Error("Expected tag catalog page.");return N},enabled:u&&e.length>0,staleTime:3e4}),k=h.useMemo(()=>y.data?.items??[],[y.data?.items]),S=h.useMemo(()=>{const j=b;return!j||k.some(M=>M.tag.toLowerCase()===j.toLowerCase())?null:j},[b,k]);return h.useEffect(()=>{if(!u)return;const j=M=>{const _=M.target;_&&x.current&&!x.current.contains(_)&&d(!1)},N=M=>{M.key==="Escape"&&d(!1)};return window.addEventListener("mousedown",j),window.addEventListener("keydown",N),()=>{window.removeEventListener("mousedown",j),window.removeEventListener("keydown",N)}},[u]),a.jsxs("div",{className:"relative",ref:x,children:[a.jsx("button",{type:"button",onClick:()=>d(j=>!j),disabled:l,className:re("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-60",l?"border-border bg-background text-muted-foreground":"border-border bg-card text-foreground hover:bg-background dark:hover:bg-muted/40"),"aria-expanded":u,"aria-haspopup":"dialog",children:t.length===0?a.jsx("span",{className:"text-muted-foreground",children:i}):a.jsxs("span",{children:[t.slice(0,2).join(", "),t.length>2?` +${t.length-2}`:""]})}),u?a.jsxs("div",{className:"absolute left-0 top-[calc(100%+0.5rem)] z-20 w-[18rem] rounded-2xl border border-border bg-card p-3 shadow-lg","data-ignore-row-click":"true",children:[a.jsxs("div",{className:"mb-2",children:[a.jsx(yt,{value:m,onChange:j=>g(j.target.value),placeholder:"Search or create tag",className:"h-9"}),a.jsx("div",{className:"mt-1 text-[11px] text-muted-foreground",children:"Type 2+ characters to search existing tags."})]}),t.length?a.jsx("div",{className:"mb-2 flex flex-wrap gap-1",children:t.map(j=>a.jsxs("button",{type:"button",onClick:()=>s(j),className:"rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-foreground hover:text-danger-700",title:"Remove tag",children:[j," "]},j))}):null,a.jsxs("div",{className:"max-h-56 overflow-y-auto rounded-xl border border-border",children:[S?a.jsxs("button",{type:"button",onClick:()=>s(S),className:"flex w-full items-center justify-between px-3 py-2 text-left text-xs font-semibold text-foreground hover:bg-background dark:hover:bg-muted/40",children:[a.jsxs("span",{children:["Create ",S,""]}),a.jsx("span",{className:"text-[11px] text-muted-foreground",children:"new"})]}):null,y.isLoading?a.jsx("div",{className:"px-3 py-3 text-xs text-muted-foreground",children:"Loading tags"}):k.length===0?a.jsx("div",{className:"px-3 py-3 text-xs text-muted-foreground",children:v?"No matches.":"No tags yet."}):k.map(j=>{const N=t.includes(j.tag);return a.jsxs("button",{type:"button",onClick:()=>s(j.tag),className:re("flex w-full items-center justify-between px-3 py-2 text-left text-xs font-semibold transition",N?"bg-brand-50 text-foreground dark:bg-brand-500/20 dark:text-brand-200":"text-foreground hover:bg-background dark:hover:bg-muted/40"),children:[a.jsx("span",{className:"truncate",children:j.tag}),a.jsx("span",{className:"ml-3 text-[11px] text-muted-foreground",children:j.document_count})]},j.tag)})]}),a.jsx("div",{className:"mt-2 text-[11px] text-muted-foreground",children:"Click a tag to toggle it."})]}):null]})}function fO({open:e,workspaceId:t,selectedCount:s,onClose:i,onApply:l}){const[u,d]=h.useState([]),[m,g]=h.useState([]);return h.useEffect(()=>{e&&(d([]),g([]))},[e]),e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-overlay/30 px-4",children:a.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-border bg-card p-5 shadow-xl",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Bulk tag update"}),a.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Adding to ",s," documents."]}),a.jsxs("div",{className:"mt-4 grid gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"Add tags"}),a.jsx("div",{className:"mt-2",children:a.jsx(Qu,{workspaceId:t,selected:u,onToggle:x=>{d(b=>b.includes(x)?b.filter(v=>v!==x):[...b,x])},placeholder:u.length?"Edit add tags":"Add tags"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"Remove tags"}),a.jsx("div",{className:"mt-2",children:a.jsx(Qu,{workspaceId:t,selected:m,onToggle:x=>{g(b=>b.includes(x)?b.filter(v=>v!==x):[...b,x])},placeholder:m.length?"Edit remove tags":"Remove tags"})})]})]}),a.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[a.jsx(Te,{type:"button",variant:"ghost",onClick:i,children:"Cancel"}),a.jsx(Te,{type:"button",onClick:()=>{const x=u.filter(v=>!m.includes(v)),b=m.filter(v=>!u.includes(v));x.length===0&&b.length===0||(l({add:x,remove:b}),i())},disabled:u.length===0&&m.length===0,children:"Apply"})]})]})}):null}const hO=[{value:"queued",label:"Queued"},{value:"processing",label:"Processing"},{value:"ready",label:"Ready"},{value:"failed",label:"Failed"},{value:"archived",label:"Archived"}],mO=[{value:"xlsx",label:"XLSX"},{value:"xls",label:"XLS"},{value:"csv",label:"CSV"},{value:"pdf",label:"PDF"}];function pO({workspaceId:e,filters:t,onChange:s,people:i}){const l=h.useRef(null),[u,d]=h.useState(!1);h.useEffect(()=>{function g(x){if(!u)return;const b=x.target;l.current&&b&&!l.current.contains(b)&&d(!1)}return window.addEventListener("mousedown",g),()=>window.removeEventListener("mousedown",g)},[u]);const m=t.statuses.length+t.fileTypes.length+t.tags.length+t.assignees.length;return a.jsxs("div",{ref:l,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>d(g=>!g),className:"inline-flex items-center gap-2 rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground shadow-sm hover:border-brand-300","aria-expanded":u,"aria-haspopup":"dialog",children:["Filters",m>0?a.jsx("span",{className:"rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",children:m}):null,a.jsx("span",{className:"text-muted-foreground","aria-hidden":!0,children:"v"})]}),u?a.jsx("div",{className:"absolute left-0 z-30 mt-2 w-[22rem] rounded-2xl border border-border bg-card p-4 shadow-lg",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(yu,{label:"Status",children:a.jsx(Xy,{options:hO,value:t.statuses,onToggle:g=>{const x=new Set(t.statuses);x.has(g)?x.delete(g):x.add(g),s({...t,statuses:Array.from(x)})}})}),a.jsx(yu,{label:"File type",children:a.jsx(Xy,{options:mO,value:t.fileTypes,onToggle:g=>{const x=new Set(t.fileTypes);x.has(g)?x.delete(g):x.add(g),s({...t,fileTypes:Array.from(x)})},renderLabel:g=>Pj(g)})}),a.jsx(yu,{label:"Tags",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("div",{className:"flex items-center gap-1 rounded-full border border-border bg-background px-2 py-1",children:["any","all"].map(g=>a.jsx("button",{type:"button",className:re("rounded-full px-2 py-0.5 text-[11px] font-semibold transition",t.tagMode===g?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),onClick:()=>s({...t,tagMode:g}),children:g==="any"?"Any":"All"},g))}),a.jsx(Qu,{workspaceId:e,selected:t.tags,onToggle:g=>{const x=t.tags.includes(g)?t.tags.filter(b=>b!==g):[...t.tags,g];s({...t,tags:x})},placeholder:t.tags.length?"Edit tags":"Filter tags"})]})}),a.jsx(yu,{label:"Assignee",children:a.jsx(vd,{people:i,value:t.assignees,onChange:g=>s({...t,assignees:g}),placeholder:"Assignee...",multiple:!0,includeUnassigned:!0})}),a.jsxs("div",{className:"flex items-center justify-between border-t border-border pt-3",children:[a.jsx("button",{type:"button",onClick:()=>s({statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]}),className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Clear filters"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-xs font-semibold text-brand-600",children:"Done"})]})]})}):null]})}function yu({label:e,children:t}){return a.jsxs("div",{children:[a.jsx("div",{className:"mb-2 text-xs font-semibold text-muted-foreground",children:e}),t]})}function Xy({options:e,value:t,onToggle:s,renderLabel:i}){return a.jsx("div",{className:"flex flex-wrap items-center gap-1",children:e.map(l=>{const u=t.includes(l.value),d=i?i(l.value):l.label;return a.jsx("button",{type:"button",onClick:()=>s(l.value),className:re("rounded-full border px-2 py-0.5 text-[11px] font-semibold transition",u?"border-brand-200 bg-brand-50 text-brand-700 dark:border-brand-500/40 dark:bg-brand-500/20 dark:text-brand-200":"border-transparent text-muted-foreground hover:bg-background dark:hover:bg-muted/40 hover:text-foreground"),children:d},l.value)})})}function gO({activeViewId:e,onSetBuiltInView:t,savedViews:s,onSelectSavedView:i,onDeleteSavedView:l,onOpenSaveDialog:u,counts:d}){const m=h.useRef(null),[g,x]=h.useState(!1);h.useEffect(()=>{function y(k){if(!g)return;const S=k.target;m.current&&S&&!m.current.contains(S)&&x(!1)}return window.addEventListener("mousedown",y),()=>window.removeEventListener("mousedown",y)},[g]);const b=h.useMemo(()=>[{id:"all",label:"All documents",count:d.total},{id:"mine",label:"Mine",count:d.mine},{id:"unassigned",label:"Unassigned",count:d.unassigned},{id:"ready",label:"Ready",count:d.ready},{id:"processing",label:"Processing",count:d.processing},{id:"failed",label:"Failed",count:d.failed}],[d.failed,d.mine,d.processing,d.ready,d.total,d.unassigned]),v=h.useMemo(()=>{if(e==="custom")return"Custom view";const y=b.find(S=>S.id===e);return y?y.label:s.find(S=>S.id===e)?.name??"Views"},[e,b,s]);return a.jsxs("div",{ref:m,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>x(y=>!y),className:"inline-flex items-center gap-2 rounded-full border border-border bg-card px-3 py-1.5 text-xs font-semibold text-foreground shadow-sm hover:border-brand-300","aria-expanded":g,"aria-haspopup":"dialog",children:[a.jsx("span",{children:"Views"}),a.jsx("span",{className:"max-w-[10rem] truncate text-[11px] font-medium text-muted-foreground",children:v}),a.jsx("span",{className:"text-muted-foreground","aria-hidden":!0,children:"v"})]}),g?a.jsxs("div",{className:"absolute left-0 z-30 mt-2 w-[22rem] rounded-2xl border border-border bg-card p-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Views"}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Switch between built-in and saved views."})]}),a.jsx("button",{type:"button",onClick:()=>{x(!1),u()},className:"rounded-xl border border-border bg-background px-3 py-1.5 text-xs font-semibold text-foreground hover:border-brand-300",children:"Save current view"})]}),e==="custom"?a.jsx("div",{className:"mt-3 rounded-xl border border-dashed border-border bg-background px-3 py-2 text-xs text-muted-foreground",children:"You are on a custom view. Save it to reuse later."}):null,a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Built-in"}),a.jsx("div",{className:"flex flex-col gap-1",children:b.map(y=>a.jsxs("button",{type:"button",onClick:()=>{t(y.id),x(!1)},className:re("flex items-center justify-between rounded-xl px-3 py-2 text-left text-sm transition",e===y.id?"bg-brand-50 text-brand-800 dark:bg-brand-500/20 dark:text-brand-200":"hover:bg-background dark:hover:bg-muted/40 text-foreground"),children:[a.jsx("span",{className:"font-semibold",children:y.label}),a.jsx("span",{className:"rounded-full border border-border bg-card px-2 py-0.5 text-[11px] font-semibold text-muted-foreground",children:y.count})]},y.id))})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"px-2 pb-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-muted-foreground",children:"Saved"}),s.length===0?a.jsx("div",{className:"px-3 py-2 text-xs text-muted-foreground",children:"No saved views yet."}):a.jsx("div",{className:"flex flex-col gap-1",children:s.slice().sort((y,k)=>k.updatedAt-y.updatedAt).map(y=>a.jsxs("div",{className:"group flex items-center justify-between rounded-xl px-3 py-2 hover:bg-background",children:[a.jsx("button",{type:"button",onClick:()=>{i(y.id),x(!1)},className:re("min-w-0 flex-1 truncate text-left text-sm font-semibold",e===y.id?"text-brand-800 dark:text-brand-200":"text-foreground"),title:y.name,children:y.name}),a.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),l(y.id)},className:"ml-2 hidden text-xs font-semibold text-muted-foreground hover:text-danger-600 group-hover:inline","aria-label":`Delete view ${y.name}`,children:"Delete"})]},y.id))})]})]}):null]})}function xO({workspaceId:e,filters:t,onChange:s,people:i,showingCount:l,totalCount:u,activeViewId:d,onSetBuiltInView:m,savedViews:g,onSelectSavedView:x,onDeleteSavedView:b,onOpenSaveDialog:v,counts:y}){const k=t.statuses.length+t.fileTypes.length+t.tags.length+t.assignees.length;return a.jsxs("div",{className:"flex shrink-0 flex-wrap items-center justify-between gap-3 border-b border-border bg-card px-4 py-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(gO,{activeViewId:d,onSetBuiltInView:m,savedViews:g,onSelectSavedView:x,onDeleteSavedView:b,onOpenSaveDialog:v,counts:y}),a.jsx(pO,{workspaceId:e,filters:t,onChange:s,people:i}),k>0?a.jsx("button",{type:"button",onClick:()=>s({statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]}),className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Clear filters"}):a.jsx("span",{className:"text-xs text-muted-foreground",children:"No filters applied"})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Showing ",a.jsx("span",{className:"font-semibold text-foreground",children:l})," of"," ",a.jsx("span",{className:"font-semibold text-foreground",children:u})]})]})}const Hj=50,Nm=200,rn={root:()=>["documents"],workspace:e=>[...rn.root(),e],list:(e,t)=>[...rn.workspace(e),"list",{sort:t}],members:e=>[...rn.workspace(e),"members"],document:(e,t)=>[...rn.workspace(e),"document",t],runsForDocument:(e,t)=>[...rn.workspace(e),"runs",{input_document_id:t}],run:e=>[...rn.root(),"run",e],runMetrics:e=>[...rn.run(e),"metrics"],workbook:e=>[...rn.root(),"workbook",e]};async function bO(e,t,s){const i={sort:t.sort??void 0,page:t.page>0?t.page:1,page_size:t.pageSize>0?t.pageSize:Hj,include_total:!1},{data:l}=await Ie.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:i},signal:s});if(!l)throw new Error("Expected document page payload.");return l}async function vO(e,t,s){const{data:i}=await Ie.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:t}},signal:s});if(!i)throw new Error("Expected document payload.");return i}async function yO(e,t){const{data:s}=await Ie.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},signal:t});if(!s)throw new Error("Expected workspace member page payload.");return s}async function wO(e,t,s){const{data:i}=await Ie.GET("/api/v1/workspaces/{workspace_id}/runs",{params:{path:{workspace_id:e},query:{page:1,page_size:25,include_total:!1,input_document_id:t}},signal:s});if(!i)throw new Error("Expected run page payload.");return i.items??[]}async function jO(e,t){try{const{data:s}=await Ie.GET("/api/v1/runs/{run_id}/metrics",{params:{path:{run_id:e}},signal:t});return s??null}catch(s){if(s instanceof Jt&&s.status===404)return null;throw s}}async function SO(e,t){const s=await fetch(e,{credentials:"include",signal:t});if(!s.ok)throw new Error("Unable to fetch processed workbook.");const i=await s.arrayBuffer(),l=await _0(()=>import("./xlsx-DGuHH-KN.js"),[]),u=l.read(i,{type:"array"});return{sheets:u.SheetNames.map(m=>{const g=u.Sheets[m],x=l.utils.sheet_to_json(g,{header:1,raw:!1,blankrows:!1}),b=x.length,v=x.reduce((M,_)=>Math.max(M,_.length),0),y=b>Nm,k=x.slice(0,Nm).map(M=>M.map(_=>sO(_))),S=Math.max(k[0]?.length??0,v,1),j=aO(k[0]??[],S),N=k.slice(1).map(M=>Bj(M,j.length));return{name:m,headers:j,rows:N,totalRows:b,totalColumns:v,truncatedRows:y,truncatedColumns:!1}})}}function Xh(e){const t=MO(e.status),s=TO(e),i=Zu(e.created_at),l=Zu(e.updated_at),u=OO(t,e.last_run),d=AO(e),m=Fj(e.name);return{id:e.id,name:e.name,status:t,fileType:m,uploader:s,tags:e.tags??[],createdAt:i,updatedAt:l,size:Uj(e.byte_size),stage:u,error:t==="failed"?zO(e):void 0,mapping:d,assigneeKey:null,assigneeLabel:null,commentCount:0,record:e}}async function Jy(e,t,s){const i=await fetch(`/api/v1/workspaces/${e}/documents/${t}/download`,{credentials:"include"});if(!i.ok)throw new Error("Unable to download original file.");const l=await i.blob(),u=yp(i.headers.get("content-disposition"))??s;return wp(l,u),u}async function kO(e,t){const s=await fetch(e,{credentials:"include"});if(!s.ok)throw new Error("Unable to download processed output.");const i=await s.blob(),l=yp(s.headers.get("content-disposition"))??$j(t);return wp(i,l),l}async function e0(e,t){const s=await fetch(`/api/v1/runs/${e}/output/download`,{credentials:"include"});if(!s.ok)throw new Error("Unable to download processed output.");const i=await s.blob(),l=yp(s.headers.get("content-disposition"))??$j(t);return wp(i,l),l}async function NO(e,t){const{data:s}=await Ie.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:{configuration_id:e}},body:{options:{dry_run:!1,validate_only:!1,force_rebuild:!1,debug:!1,input_document_id:t}}});if(!s)throw new Error("Unable to create run.");return s}async function CO(e,t,s){const{data:i}=await Ie.PATCH("/api/v1/workspaces/{workspace_id}/documents/{document_id}/tags",{params:{path:{workspace_id:e,document_id:t}},body:s});if(!i)throw new Error("Expected updated document record.");return i}async function EO(e,t,s){const{data:i}=await Ie.POST("/api/v1/workspaces/{workspace_id}/documents/batch/tags",{params:{path:{workspace_id:e}},body:{document_ids:t,...s}});if(!i)throw new Error("Expected updated document records.");return i.documents}function Vj(e){return e.output?.download_url?e.output.download_url:e.links?.output_download?e.links.output_download:null}function _O(e){return!e||e.status!=="succeeded"?!1:!!Vj(e)}function Ku(e){return e?e.last_successful_run?e.last_successful_run:e.last_run?.status==="succeeded"?e.last_run:null:null}function MO(e){switch(e){case"processed":return"ready";case"processing":return"processing";case"failed":return"failed";case"archived":return"archived";case"uploaded":return"queued";default:return"queued"}}function TO(e){const t=e.metadata??{},s=DO(t);if(s)return s;const i=e.uploader;return i?.name||i?.email?i.name??i.email??"Unassigned":null}function DO(e){const t=typeof e.owner=="string"?e.owner:void 0,s=typeof e.owner_email=="string"?e.owner_email:void 0;return t||s?t??s??null:null}function AO(e){const t=e.metadata??{},s=RO(t);return s||(e.status==="uploaded"||e.status==="processing"?{attention:0,unmapped:0,pending:!0}:{attention:0,unmapped:0})}function RO(e){const t=e.mapping??e.mapping_health??e.mapping_quality;if(t&&typeof t=="object"){const l=t,u=typeof l.issues=="number"?l.issues:typeof l.attention=="number"?l.attention:0,d=typeof l.unmapped=="number"?l.unmapped:0,m=typeof l.status=="string"&&l.status==="pending";return{attention:u,unmapped:d,pending:m||void 0}}const s=typeof e.mapping_issues=="number"?e.mapping_issues:null,i=typeof e.unmapped_columns=="number"?e.unmapped_columns:null;return s!==null||i!==null?{attention:s??0,unmapped:i??0}:null}function OO(e,t){if(e==="queued")return"Queued for processing";if(e==="processing")return t?.status==="queued"?"Queued for processing":"Processing output"}function zO(e){const t=e.last_run?.message?.trim();return{summary:t??"Processing failed",detail:t??"We could not complete normalization for this file.",nextStep:"Retry now or fix mapping later."}}function Zj({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M7 3h7l7 7v11a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"}),a.jsx("path",{d:"M14 3v5a1 1 0 0 0 1 1h5"})]})}function LO({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M12 16V4"}),a.jsx("path",{d:"m6 10 6-6 6 6"}),a.jsx("path",{d:"M4 20h16"})]})}function UO({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("rect",{x:"4",y:"4",width:"7",height:"7",rx:"1.5"}),a.jsx("rect",{x:"13",y:"4",width:"7",height:"7",rx:"1.5"}),a.jsx("rect",{x:"4",y:"13",width:"7",height:"7",rx:"1.5"}),a.jsx("rect",{x:"13",y:"13",width:"7",height:"7",rx:"1.5"})]})}function $O({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("rect",{x:"4",y:"4",width:"7",height:"16",rx:"1.5"}),a.jsx("rect",{x:"13",y:"4",width:"7",height:"9",rx:"1.5"}),a.jsx("rect",{x:"13",y:"15",width:"7",height:"5",rx:"1.5"})]})}function kp({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})}function Gu({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M12 4v12"}),a.jsx("path",{d:"m6 10 6 6 6-6"}),a.jsx("path",{d:"M4 20h16"})]})}function Np({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M10 13a5 5 0 0 1 0-7l1-1a5 5 0 0 1 7 7l-1 1"}),a.jsx("path",{d:"M14 11a5 5 0 0 1 0 7l-1 1a5 5 0 0 1-7-7l1-1"})]})}function BO({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M14 3h7v7"}),a.jsx("path",{d:"M10 14L21 3"}),a.jsx("path",{d:"M21 14v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6"})]})}function Wj({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("circle",{cx:"5",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"19",cy:"12",r:"1.5"})]})}function Qj({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M21 12a9 9 0 0 1-9 9a9 9 0 0 1-8.5-6"}),a.jsx("path",{d:"M3 12a9 9 0 0 1 9-9a9 9 0 0 1 8.5 6"}),a.jsx("path",{d:"M21 7v5h-5"}),a.jsx("path",{d:"M3 17v-5h5"})]})}function Kj({className:e}){return a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:a.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4Z"})})}function Cp({className:e}){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",className:e,"aria-hidden":!0,children:[a.jsx("path",{d:"M20 21a8 8 0 0 0-16 0"}),a.jsx("path",{d:"M12 13a4 4 0 1 0-4-4a4 4 0 0 0 4 4Z"})]})}function qO({onOpenDetails:e,onReprocess:t,reprocessDisabled:s,showClosePreview:i,onClosePreview:l,onDownloadOriginal:u,onCopyLink:d,originalDisabled:m,copyDisabled:g}){const[x,b]=h.useState(!1),[v,y]=h.useState(null);return a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-transparent bg-transparent text-muted-foreground transition hover:border-border hover:bg-background hover:text-muted-foreground",onClick:k=>{k.stopPropagation(),y({x:k.clientX,y:k.clientY}),b(!0)},"aria-label":"Row actions",children:a.jsx(Wj,{className:"h-4 w-4"})}),a.jsx(hs,{open:x,position:v,onClose:()=>b(!1),appearance:"light",items:[{id:"details",label:"Open details",onSelect:e},...t?[{id:"reprocess",label:"Reprocess",onSelect:t,disabled:s,icon:a.jsx(Qj,{className:"h-4 w-4"})}]:[],{id:"download-original",label:"Download original",onSelect:u,disabled:m,icon:a.jsx(Gu,{className:"h-4 w-4"}),dividerAbove:!0},{id:"copy-link",label:"Copy link",onSelect:d,disabled:g,icon:a.jsx(Np,{className:"h-4 w-4"})},...i&&l?[{id:"close-preview",label:"Close preview",onSelect:l,icon:a.jsx(kp,{className:"h-4 w-4"}),dividerAbove:!0}]:[]]})]})}const FO={ready:{label:"Ready",pill:"border-success-200 bg-success-50 text-success-700",dot:"bg-success-500"},processing:{label:"Processing",pill:"border-warning-200 bg-warning-50 text-warning-700",dot:"bg-warning-500"},failed:{label:"Failed",pill:"border-danger-200 bg-danger-50 text-danger-700",dot:"bg-danger-500"},queued:{label:"Queued",pill:"border-border bg-background text-muted-foreground",dot:"bg-muted-foreground"},archived:{label:"Archived",pill:"border-border bg-muted text-muted-foreground",dot:"bg-muted-foreground"}};function PO({status:e}){const t=FO[e];return a.jsxs("span",{className:re("inline-flex items-center gap-2 rounded-full border px-2.5 py-1 text-[11px] font-semibold",t.pill),children:[a.jsx("span",{className:re("h-2 w-2 rounded-full",t.dot)}),t.label]})}const IO="button, a, input, select, textarea, [role='button'], [role='menuitem'], [data-ignore-row-click='true']";function HO(e){return e instanceof Element?!!e.closest(IO):!1}function VO({documents:e,activeId:t,selectedIds:s,onSelect:i,onSelectAll:l,onClearSelection:u,allVisibleSelected:d,onActivate:m,onUploadClick:g,onClearFilters:x,showNoDocuments:b,showNoResults:v,isLoading:y,isError:k,hasNextPage:S,isFetchingNextPage:j,onLoadMore:N,onRefresh:M,now:_,onKeyNavigate:R,people:q,onAssign:$,onPickUp:I,onDownloadOriginal:D,onDownloadOutput:C,onCopyLink:L,onReprocess:V,onOpenDetails:K,onOpenNotes:A,onClosePreview:X,expandedId:fe,expandedContent:Se}){const z=e.some(T=>T.record),H=y&&e.length===0,ae=k&&e.length===0,ge=h.useRef(null),ce=h.useRef(new Map);return h.useEffect(()=>{if(!t)return;const T=ge.current,G=ce.current.get(t);if(!T||!G)return;const ue=G.offsetTop-T.offsetTop;T.scrollTo({top:Math.max(0,ue)})},[t]),a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-card",children:[a.jsx("div",{className:"shrink-0 border-b border-border bg-background/40 px-6 py-2 text-[11px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:a.jsxs("div",{className:"grid grid-cols-[auto_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.6fr)_auto] items-center gap-3",children:[a.jsx("div",{children:a.jsx("input",{type:"checkbox",checked:d,onChange:T=>T.target.checked?l():u(),"aria-label":"Select all visible documents",disabled:!z})}),a.jsx("div",{children:"Document"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Assignee"}),a.jsx("div",{children:"Tags"}),a.jsx("div",{className:"text-right",children:"Updated"}),a.jsx("div",{className:"text-right",children:"Actions"})]})}),a.jsx("div",{ref:ge,className:"flex-1 min-h-0 overflow-y-auto px-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onKeyDown:R,tabIndex:0,role:"listbox","aria-label":"Documents",children:H?a.jsx("div",{className:"py-8",children:a.jsx(mi,{title:"Loading documents",description:"Fetching the latest processing activity."})}):ae?a.jsx("div",{className:"py-8",children:a.jsx(mi,{title:"Unable to load documents",description:"We could not refresh this view. Try again.",action:{label:"Try again",onClick:M}})}):b?a.jsx("div",{className:"py-8",children:a.jsx(mi,{title:"No documents yet",description:"Upload your first batch to start processing.",action:{label:"Upload files",onClick:g}})}):v?a.jsx("div",{className:"py-8",children:a.jsx(mi,{title:"No results",description:"Try clearing filters or adjusting the search.",action:{label:"Clear filters",onClick:x}})}):a.jsxs("div",{className:"flex flex-col",children:[e.map(T=>{const G=!!T.record,Y=!!Ku(T.record)?.run_id,ee=!T.assigneeKey,Z=!!(Se&&fe===T.id),te=!!(Z&&t===T.id),Q=`documents-preview-${T.id}`,se=T.commentCount>0,ke=Y?"Download output":"Output not ready";return a.jsxs("div",{ref:Me=>{Me?ce.current.set(T.id,Me):ce.current.delete(T.id)},className:"border-b border-border/70",children:[a.jsxs("div",{role:"button",onClick:Me=>{HO(Me.target)||m(T.id)},onKeyDown:Me=>{Me.key!=="Enter"&&Me.key!==" "||Me.currentTarget===Me.target&&(Me.preventDefault(),m(T.id))},className:re("group grid cursor-pointer grid-cols-[auto_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.6fr)_auto] items-center gap-3 py-3 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",te?"bg-brand-50 dark:bg-brand-500/20":"hover:bg-background dark:hover:bg-muted/40"),tabIndex:0,"aria-expanded":Z,"aria-controls":Z?Q:void 0,children:[a.jsx("div",{children:a.jsx("input",{type:"checkbox",checked:s.has(T.id),onChange:()=>{G&&i(T.id)},onClick:Me=>Me.stopPropagation(),"aria-label":`Select ${T.name}`,disabled:!G})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl border border-border bg-background",children:a.jsx(Zj,{className:"h-4 w-4 text-muted-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:T.name}),a.jsxs("p",{className:"flex items-center gap-2 text-[11px] text-muted-foreground",children:[a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground",children:Pj(T.fileType)}),a.jsx("span",{"aria-hidden":!0,className:"text-muted-foreground",children:""}),a.jsxs("span",{children:["Uploaded ",Ll(_,T.createdAt)]}),a.jsx("span",{"aria-hidden":!0,className:"text-muted-foreground",children:""}),a.jsxs("button",{type:"button",onClick:Me=>{Me.stopPropagation(),A(T.id)},className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[10px] font-semibold text-muted-foreground transition hover:text-foreground",title:se?`${T.commentCount} notes`:"No notes yet",children:[a.jsx(Kj,{className:"h-3 w-3"}),a.jsx("span",{className:"tabular-nums",children:T.commentCount})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[a.jsx(PO,{status:T.status}),a.jsx(Ij,{mapping:T.mapping})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-full border border-border bg-background",children:a.jsx(Cp,{className:"h-3.5 w-3.5 text-muted-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate text-xs font-semibold text-foreground",children:T.assigneeLabel??"Unassigned"}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[ee?a.jsx("button",{type:"button",onClick:Me=>{Me.stopPropagation(),I(T.id)},className:"shrink-0 whitespace-nowrap text-[11px] font-semibold text-brand-600 hover:text-brand-700",children:"Pick up"}):null,a.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-muted-foreground",children:[a.jsx("span",{className:"font-semibold",children:"Assign"}),a.jsx("div",{"data-ignore-row-click":!0,className:"min-w-0",children:a.jsx(vd,{people:q,value:[T.assigneeKey??Sp()],onChange:Me=>$(T.id,jp(Me)),placeholder:"Assignee...",includeUnassigned:!0,buttonClassName:"min-w-0 max-w-[11rem] px-2 py-1 text-[11px]"})})]})]})]})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:T.tags.length>0?a.jsxs("span",{className:"rounded-full border border-border bg-background px-2 py-0.5",children:[T.tags[0],T.tags.length>1?` +${T.tags.length-1}`:""]}):a.jsx("span",{className:"text-muted-foreground",children:""})}),a.jsx("div",{className:"text-right text-xs text-muted-foreground",children:Ll(_,T.updatedAt)}),a.jsx("div",{className:"flex justify-end","data-ignore-row-click":!0,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Me=>{Me.stopPropagation(),Y&&C(T)},disabled:!Y,"aria-label":ke,title:ke,className:re("inline-flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-card text-muted-foreground transition","hover:bg-background hover:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:text-muted-foreground disabled:hover:bg-card disabled:hover:text-muted-foreground"),children:a.jsx(Gu,{className:"h-4 w-4"})}),a.jsx(qO,{onOpenDetails:()=>K(T.id),onReprocess:Z?()=>V(T):void 0,reprocessDisabled:!T.record||!Z,showClosePreview:Z,onClosePreview:X,onDownloadOriginal:()=>D(T),onCopyLink:()=>L(T),originalDisabled:!T.record,copyDisabled:!T.record})]})})]}),Z?a.jsx("div",{id:Q,role:"region","aria-label":`Preview details for ${T.name}`,className:"bg-background/60 px-6 pb-4 pt-2",children:a.jsx("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:Se})}):null]},T.id)}),S?a.jsx("div",{className:"flex justify-center py-4",children:a.jsx("button",{type:"button",onClick:N,className:"rounded-md text-xs font-semibold text-brand-600 transition hover:text-brand-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:text-muted-foreground",disabled:j,children:j?"Loading more...":"Load more"})}):null]})})]})}function ZO({viewMode:e,onViewModeChange:t,onUploadClick:s,fileInputRef:i,onFileInputChange:l}){return a.jsx("header",{className:"shrink-0 border-b border-border bg-card",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-4 px-6 py-4",children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-border bg-muted text-foreground",children:a.jsx(Zj,{className:"h-5 w-5"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Documents"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Shared team workspace for processing and collaboration"})]})]}),a.jsxs("div",{className:"ml-auto flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"flex items-center rounded-lg border border-border bg-background p-1 text-xs shadow-sm",children:[a.jsxs(Te,{type:"button",size:"sm",variant:e==="grid"?"secondary":"ghost",onClick:()=>t("grid"),className:re("h-8 rounded-md px-3 text-xs",e==="grid"?"shadow-sm":"text-muted-foreground"),"aria-pressed":e==="grid","aria-label":"Grid view",children:[a.jsx(UO,{className:"h-4 w-4"}),"Grid"]}),a.jsxs(Te,{type:"button",size:"sm",variant:e==="board"?"secondary":"ghost",onClick:()=>t("board"),className:re("h-8 rounded-md px-3 text-xs",e==="board"?"shadow-sm":"text-muted-foreground"),"aria-pressed":e==="board","aria-label":"Board view",children:[a.jsx($O,{className:"h-4 w-4"}),"Board"]})]}),a.jsxs(Te,{type:"button",onClick:s,size:"md",className:"gap-2",children:[a.jsx(LO,{className:"h-4 w-4"}),"Upload"]}),a.jsx("input",{ref:i,type:"file",multiple:!0,className:"hidden",onChange:l})]})]})})}function WO(e){const t=[],s=/@{([^}]+)}/g;let i=0,l;for(;l=s.exec(e);)l.index>i&&t.push(e.slice(i,l.index)),t.push({mention:l[1]}),i=s.lastIndex;return i<e.length&&t.push(e.slice(i)),t}function t0(e,t){const s=e.slice(0,t),i=s.lastIndexOf("@");if(i<0)return null;const l=i===0?" ":s[i-1];if(l!==" "&&l!==`
`&&l!=="	")return null;const u=s.slice(i+1);return u.includes("{")||u.includes("}")||u.length>40||u.includes(" ")?null:{start:i,query:u}}function QO({now:e,comments:t,people:s,currentUserKey:i,currentUserLabel:l,onAdd:u,onEdit:d,onDelete:m}){const g=h.useRef(null),[x,b]=h.useState(""),[v,y]=h.useState(null),[k,S]=h.useState(""),[j,N]=h.useState(null),[M,_]=h.useState(0),R=h.useMemo(()=>{const C=j?.query.trim().toLowerCase()??"",L=s.filter(V=>V.kind==="user");return C?L.filter(V=>V.label.toLowerCase().includes(C)).slice(0,10):L.slice(0,10)},[s,j?.query]);function q(C){const V=Array.from(C.matchAll(/@{([^}]+)}/g)).map(A=>A[1]).filter(Boolean),K=new Map;return s.forEach(A=>K.set(A.label,A)),V.map(A=>({key:K.get(A)?.key??`label:${A}`,label:A}))}function $(C){const L=g.current;if(!L)return;const V=L.selectionStart??x.length,K=t0(x,V);if(!K)return;const A=x.slice(0,K.start),X=x.slice(V),fe=`@{${C}} `,Se=`${A}${fe}${X}`;b(Se),N(null),requestAnimationFrame(()=>{const z=(A+fe).length;L.focus(),L.setSelectionRange(z,z)})}function I(C){b(C);const V=g.current?.selectionStart??C.length,K=t0(C,V);N(K),_(0)}function D(){const C=x.trim();C&&(u(C,q(C)),b(""),N(null))}return a.jsxs("div",{className:"flex min-h-0 flex-col gap-4",children:[a.jsxs("div",{className:"rounded-2xl border border-border bg-background px-4 py-3 text-xs text-muted-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:"Notes and comments"}),a.jsxs("p",{className:"mt-1",children:["Use ",a.jsx("span",{className:"font-semibold",children:"@"})," to mention teammates (e.g. ",a.jsxs("span",{className:"font-semibold",children:["@","{Jane Doe}"]}),"). Mentions are styled now and can power notifications later."]}),a.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"(For now, notes are stored locally per browser until backend syncing is added.)"})]}),a.jsx("div",{className:"flex-1 overflow-auto rounded-2xl border border-border bg-card",children:t.length===0?a.jsx("div",{className:"px-4 py-6 text-sm text-muted-foreground",children:"No notes yet. Add the first note to capture context for the team."}):a.jsx("div",{className:"divide-y divide-border",children:t.slice().sort((C,L)=>C.createdAt-L.createdAt).map(C=>{const L=C.authorKey===i,V=v===C.id;return a.jsxs("div",{className:"px-4 py-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:C.authorLabel}),a.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[Ll(e,C.createdAt),C.updatedAt!==C.createdAt?" - edited":""]})]}),L?a.jsx("div",{className:"flex items-center gap-2",children:V?null:a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{y(C.id),S(C.body)},className:"text-xs font-semibold text-muted-foreground hover:text-foreground",children:"Edit"}),a.jsx("button",{type:"button",onClick:()=>m(C.id),className:"text-xs font-semibold text-danger-600 hover:text-danger-700",children:"Delete"})]})}):null]}),V?a.jsxs("div",{className:"mt-3",children:[a.jsx("textarea",{value:k,onChange:K=>S(K.target.value),className:"w-full rounded-xl border border-border bg-card px-3 py-2 text-sm outline-none focus:border-brand-300",rows:3}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx(Te,{type:"button",size:"sm",onClick:()=>{const K=k.trim();K&&(d(C.id,K,q(K)),y(null),S(""))},children:"Save"}),a.jsx(Te,{type:"button",size:"sm",variant:"ghost",onClick:()=>{y(null),S("")},children:"Cancel"})]})]}):a.jsx("div",{className:"mt-3 whitespace-pre-wrap text-sm text-foreground",children:WO(C.body).map((K,A)=>typeof K=="string"?a.jsx("span",{children:K},A):a.jsxs("span",{className:"rounded-md bg-brand-50 px-1.5 py-0.5 font-semibold text-brand-700 dark:bg-brand-500/20 dark:text-brand-200",title:"Mention (notifications coming soon)",children:["@",K.mention]},A))})]},C.id)})})}),a.jsxs("div",{className:"relative rounded-2xl border border-border bg-card px-4 py-4",children:[a.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"Add a note"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("textarea",{ref:g,value:x,onChange:C=>I(C.target.value),onKeyDown:C=>{if(j&&R.length>0){if(C.key==="ArrowDown"&&(C.preventDefault(),_(L=>Math.min(R.length-1,L+1))),C.key==="ArrowUp"&&(C.preventDefault(),_(L=>Math.max(0,L-1))),C.key==="Enter"&&!C.shiftKey){C.preventDefault();const L=R[M];L&&$(L.label);return}C.key==="Escape"&&N(null)}(C.metaKey||C.ctrlKey)&&C.key==="Enter"&&(C.preventDefault(),D())},placeholder:`Write a note... (author: ${l})`,className:"w-full rounded-xl border border-border bg-card px-3 py-2 text-sm outline-none focus:border-brand-300",rows:3}),j&&R.length>0?a.jsxs("div",{className:"absolute bottom-[5.5rem] left-4 right-4 z-20 rounded-2xl border border-border bg-card shadow-lg",children:[a.jsx("div",{className:"border-b border-border px-3 py-2 text-[11px] text-muted-foreground",children:"Mention someone (Enter to select, Esc to close)"}),a.jsx("div",{className:"max-h-56 overflow-auto p-2",children:R.map((C,L)=>a.jsxs("button",{type:"button",onMouseDown:V=>{V.preventDefault(),$(C.label)},className:re("flex w-full items-center justify-between rounded-xl px-3 py-2 text-left text-sm transition",L===M?"bg-brand-50 dark:bg-brand-500/20":"hover:bg-background dark:hover:bg-muted/40"),children:[a.jsx("span",{className:"font-semibold text-foreground",children:C.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:C.kind==="user"?"Member":""})]},C.key))})]}):null,a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Tip: Ctrl/Cmd+Enter to submit"}),a.jsx(Te,{type:"button",size:"sm",onClick:D,disabled:!x.trim(),children:"Post note"})]})]})]})]})}function n0({workspaceId:e,document:t,now:s,activeSheetId:i,onSheetChange:l,runs:u,runsLoading:d,selectedRunId:m,onSelectRun:g,activeRun:x,runLoading:b,runMetrics:v,outputUrl:y,onDownloadOutput:k,onDownloadOriginal:S,onReprocess:j,people:N,currentUserKey:M,currentUserLabel:_,onAssign:R,onPickUp:q,onCopyLink:$,comments:I,onAddComment:D,onEditComment:C,onDeleteComment:L,onTagsChange:V,workbook:K,workbookLoading:A,workbookError:X,onClose:fe,detailsRequestId:Se,detailsRequestTab:z,onDetailsRequestHandled:H}){const[ae,ge]=h.useState(!1),[ce,T]=h.useState("details"),G=Zt();h.useEffect(()=>{ge(!1),T("details")},[t?.id]),h.useEffect(()=>{const $e=gt=>{if(gt.key!=="Escape")return;const xt=gt.target;xt&&(xt.tagName==="INPUT"||xt.tagName==="TEXTAREA"||xt.isContentEditable)||(gt.stopPropagation(),fe())};return window.addEventListener("keydown",$e),()=>window.removeEventListener("keydown",$e)},[fe]);const ue=K?.sheets??[],Y=i??ue[0]?.name??"",ee=ue.find($e=>$e.name===Y)??ue[0],Z=h.useMemo(()=>u.slice().sort(($e,gt)=>Date.parse(gt.created_at)-Date.parse($e.created_at)),[u]),te=x??(m?Z.find($e=>$e.id===m)??null:null)??Z[0]??null,Q=te?.status==="succeeded"&&!!y,se=te?`/workspaces/${e}/runs?run=${te.id}`:null,ke=ez(te),Me=!!(t?.record&&y),We=!!t?.record,st=!!(t?.record&&x?.configuration_id),Ve=$e=>{T($e),ge(!0)};return h.useEffect(()=>{!Se||Se!==t?.id||(T(z??"details"),ge(!0),H?.())},[Se,z,t?.id,H]),a.jsxs("div",{className:"relative flex min-h-0 w-full flex-col",children:[a.jsx("div",{className:"px-6 py-2",children:t?a.jsx("div",{className:"relative overflow-hidden rounded-2xl border border-border bg-card shadow-sm",children:a.jsxs("div",{className:"relative bg-background/40",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-border bg-card/90 px-4 py-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Te,{type:"button",size:"sm",onClick:()=>k(t),disabled:!Me,title:Me?"Download output":"Output not ready",children:"Download output"}),a.jsx(Te,{type:"button",size:"sm",variant:"secondary",onClick:()=>S(t),disabled:!We,title:We?"Download original":"Original unavailable",children:"Download original"}),a.jsx(Gj,{ariaLabel:"Copy link",title:"Copy link",onClick:()=>$(t),disabled:!t.record,children:a.jsx(Np,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[v||ke?a.jsx(tz,{metrics:v,runtime:ke}):null,Z.length>1?a.jsx(zl,{value:m??Z[0]?.id??"",onChange:$e=>g($e.target.value),className:"h-7 min-w-[9rem] text-[11px] shadow-sm","aria-label":"Select run",children:Z.map($e=>a.jsxs("option",{value:$e.id,children:[Cu($e.id),"  ",rz($e.status)]},$e.id))}):null,a.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-full border border-border bg-background px-2 py-0.5 text-[11px] font-semibold text-muted-foreground transition hover:text-foreground disabled:cursor-not-allowed disabled:opacity-60",onClick:()=>{se&&G(se)},disabled:!se,"aria-label":"Open run details",title:"Open run details",children:["Run details",a.jsx(BO,{className:"h-3 w-3"})]}),a.jsx(az,{document:t,canDownloadOutput:Me,canDownloadOriginal:We,canReprocess:st,onDownloadOutput:k,onDownloadOriginal:S,onCopyLink:$,onReprocess:j,onOpenDetails:()=>Ve("details"),onOpenNotes:()=>Ve("notes"),onClosePreview:fe})]})]}),Q?y?A?a.jsx(ui,{title:"Loading preview",children:"Fetching the processed workbook for review."}):X?a.jsx(ui,{title:"Preview unavailable",children:"The XLSX is ready to download, but we could not render the preview."}):ee?a.jsxs("div",{children:[a.jsxs(fd,{value:Y,onValueChange:l,children:[ue.map($e=>a.jsx(za,{value:$e.name,className:"max-h-[30rem] overflow-auto",children:a.jsx(sz,{sheet:$e})},$e.name)),a.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2 border-t border-border bg-card px-3 py-1",children:a.jsx(hd,{className:"flex flex-wrap items-center gap-1 overflow-x-auto text-[11px] text-muted-foreground",children:ue.map($e=>a.jsx(Dl,{value:$e.name,className:re("rounded-t-md border border-transparent px-3 py-1 font-semibold transition",Y===$e.name?"-mt-px border-border bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:$e.name},$e.name))})})]}),ee.truncatedRows||ee.truncatedColumns?a.jsxs("div",{className:"border-t border-border bg-card px-4 py-2 text-[11px] text-muted-foreground",children:["Showing first ",Math.min(ee.totalRows,Nm)," rows",ee.truncatedColumns?` and ${ee.headers.length} columns`:"","."]}):null]}):a.jsx(ui,{title:"Preview unavailable",children:"The processed XLSX is ready to download, but we cannot render a preview here."}):a.jsx(ui,{title:"Output link unavailable",children:"We could not load the processed output link yet. Try again in a moment."}):te?.status==="failed"?a.jsx(ui,{title:te.failure_message??"Run failed",children:te.failure_stage??"We could not complete normalization for this file."}):b?a.jsx(ui,{title:"Loading run output",children:"Fetching the latest run status."}):a.jsx(ui,{title:"Processing output",children:t.stage??"Preparing normalized output"})]})}):a.jsxs("div",{className:"flex min-h-[14rem] flex-col items-center justify-center rounded-2xl border border-dashed border-border bg-background px-6 text-center text-sm text-muted-foreground",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Preview is ready when you are."}),a.jsx("p",{children:"Select a document from the list to see its processed output."})]})}),ae&&t?a.jsx(iz,{tab:ce,onTabChange:T,document:t,workspaceId:e,now:s,people:N,currentUserKey:M,currentUserLabel:_,onAssign:R,onPickUp:q,onTagsChange:V,comments:I,onAddComment:D,onEditComment:C,onDeleteComment:L,onClose:()=>ge(!1)}):null]})}function ui({title:e,children:t}){return a.jsxs("div",{className:"flex flex-col gap-2 px-4 py-4 text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:e}),a.jsx("p",{children:t})]})}const KO=new Intl.NumberFormat;function Eu(e){return typeof e!="number"||Number.isNaN(e)?null:KO.format(e)}function GO(e,t){return t===1?e:`${e}s`}function YO(e){const t=e.validation_issues_total;if(typeof t!="number")return null;const s=Eu(t);if(!s)return null;const i=e.validation_max_severity,l=i==="error"||i==="warning"||i==="info"?i:"issue";return t===0?s:`${s} ${GO(l,t)}`}function XO(e){const t=e.column_count_mapped,s=e.column_count_unmapped;if(typeof t=="number"||typeof s=="number"){const u=typeof t=="number"?Eu(t):null,d=typeof s=="number"?Eu(s):null,m=[];if(u&&m.push(`${u} mapped`),d&&m.push(`${d} unmapped`),m.length>0)return`Columns ${m.join(" / ")}`}const i=e.column_count_total;if(typeof i!="number")return null;const l=Eu(i);return l?`Columns ${l}`:null}function JO(e){const t=Math.floor(e/60),s=Math.round(e%60);return t<=0?`${s}s`:`${t}m ${s}s`}function ez(e){if(!e)return null;const t=e.duration_seconds;return typeof t!="number"||Number.isNaN(t)?null:`Runtime ${JO(t)}`}function tz({metrics:e,runtime:t}){const s=e?YO(e):null,i=e?XO(e):null,l=[s?`Validation ${s}`:null,i,t].filter(Boolean);return l.length===0?null:a.jsx("span",{className:"hidden lg:inline-flex items-center text-[11px] text-muted-foreground",children:l.join(" | ")})}const nz={queued:{label:"Queued"},running:{label:"Running"},succeeded:{label:"Succeeded"},failed:{label:"Failed"},cancelled:{label:"Cancelled"}};function rz(e){return nz[e]?.label??e}function sz({sheet:e}){const t=e.headers.length;return a.jsxs("table",{className:"min-w-full w-max text-left text-xs",children:[a.jsx("thead",{className:"sticky top-0 z-10 border-b border-border bg-background/95 text-muted-foreground backdrop-blur",children:a.jsx("tr",{children:Array.from({length:t}).map((s,i)=>{const u=(e.headers[i]??"")||qj(i);return a.jsx("th",{className:"max-w-[22rem] truncate px-3 py-2 text-[11px] font-semibold",title:u,children:u},`${e.name}-h-${i}`)})})}),a.jsx("tbody",{className:"bg-card",children:e.rows.map((s,i)=>a.jsx("tr",{className:re("border-t border-border",i%2===1&&"bg-background/40"),children:Array.from({length:t}).map((l,u)=>{const d=s[u]??"";return a.jsx("td",{className:"max-w-[22rem] truncate px-3 py-2 text-foreground",title:d,children:d},`${e.name}-${i}-${u}`)})},`${e.name}-${i}`))})]})}function Gj({children:e,onClick:t,disabled:s,ariaLabel:i,title:l}){return a.jsx("button",{type:"button",onClick:t,disabled:s,"aria-label":i,title:l??i,className:re("inline-flex h-9 w-9 items-center justify-center rounded-md border border-transparent bg-transparent text-muted-foreground transition","hover:border-border hover:bg-background hover:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-60 disabled:hover:bg-card disabled:hover:text-muted-foreground"),children:e})}function az({document:e,canDownloadOutput:t,canDownloadOriginal:s,canReprocess:i,onDownloadOutput:l,onDownloadOriginal:u,onCopyLink:d,onReprocess:m,onOpenDetails:g,onOpenNotes:x,onClosePreview:b}){const[v,y]=h.useState(!1),[k,S]=h.useState(null);return a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-border bg-card/90 text-muted-foreground shadow-sm backdrop-blur transition hover:bg-background",onClick:j=>{j.stopPropagation(),S({x:j.clientX,y:j.clientY}),y(!0)},"aria-label":"Preview actions",children:a.jsx(Wj,{className:"h-4 w-4"})}),a.jsx(hs,{open:v,position:k,onClose:()=>y(!1),appearance:"light",items:[{id:"open-details",label:"Open details",onSelect:g,icon:a.jsx(Cp,{className:"h-4 w-4"})},{id:"open-notes",label:"Open notes",onSelect:x,icon:a.jsx(Kj,{className:"h-4 w-4"})},{id:"download-output",label:"Download output",onSelect:()=>l(e),disabled:!t,icon:a.jsx(Gu,{className:"h-4 w-4"}),dividerAbove:!0},{id:"download-original",label:"Download original",onSelect:()=>u(e),disabled:!s,icon:a.jsx(Gu,{className:"h-4 w-4"})},{id:"copy-link",label:"Copy link",onSelect:()=>d(e),disabled:!e.record,icon:a.jsx(Np,{className:"h-4 w-4"})},{id:"reprocess",label:"Reprocess",onSelect:()=>m(e),disabled:!i,icon:a.jsx(Qj,{className:"h-4 w-4"})},{id:"close-preview",label:"Close preview",onSelect:b,icon:a.jsx(kp,{className:"h-4 w-4"}),dividerAbove:!0}]})]})}function iz({tab:e,onTabChange:t,document:s,workspaceId:i,now:l,people:u,currentUserKey:d,currentUserLabel:m,onAssign:g,onPickUp:x,onTagsChange:b,comments:v,onAddComment:y,onEditComment:k,onDeleteComment:S,onClose:j}){return a.jsxs("div",{className:"absolute inset-0 z-20",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 bg-overlay/10",onClick:j,role:"presentation","aria-hidden":"true"}),a.jsxs("div",{className:"absolute inset-y-0 right-0 flex w-full max-w-[26rem] flex-col border-l border-border bg-card shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Document details",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Details"}),a.jsx("p",{className:"truncate text-[11px] text-muted-foreground",title:s.name,children:s.name})]}),a.jsx(Gj,{ariaLabel:"Close details",title:"Close",onClick:j,children:a.jsx(kp,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"border-b border-border bg-background px-3 py-2",children:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:["details","notes"].map(N=>a.jsx("button",{type:"button",onClick:()=>t(N),className:re("rounded-full px-3 py-1 font-semibold transition",e===N?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),"aria-pressed":e===N,children:N==="details"?"Details":`Notes${s.commentCount?` (${s.commentCount})`:""}`},N))})}),a.jsx("div",{className:"flex-1 overflow-auto px-4 py-4",children:e==="details"?a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-border bg-background",children:a.jsx(Cp,{className:"h-4 w-4 text-muted-foreground"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Assignee"}),a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:s.assigneeLabel??"Unassigned"})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.assigneeKey?s.assigneeKey!==d?a.jsx(Te,{type:"button",size:"sm",variant:"secondary",onClick:()=>x(s.id),className:"text-xs",children:"Assign to me"}):null:a.jsx(Te,{type:"button",size:"sm",onClick:()=>x(s.id),className:"text-xs",children:"Pick up"}),a.jsx(vd,{people:u,value:[s.assigneeKey??Sp()],onChange:N=>g(s.id,jp(N)),placeholder:"Assign",includeUnassigned:!0,buttonClassName:"min-w-0 max-w-[16rem] text-xs"})]})]}),a.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground",children:"Metadata"}),a.jsxs("span",{className:"text-[11px] text-muted-foreground",children:["Updated ",Ll(l,s.updatedAt)]})]}),a.jsxs("dl",{className:"mt-4 grid gap-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Uploader"}),a.jsx("dd",{className:"font-semibold text-foreground",children:s.uploader??"Unassigned"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("dt",{className:"text-muted-foreground",children:"Size"}),a.jsx("dd",{className:"font-semibold text-foreground",children:s.size})]})]})]}),a.jsxs("section",{className:"rounded-2xl border border-border bg-card px-4 py-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-muted-foreground",children:"Tags"}),a.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Shared"})]}),a.jsx("div",{className:"mt-3",children:a.jsx(Qu,{workspaceId:i,selected:s.tags,onToggle:N=>{const M=s.tags.includes(N)?s.tags.filter(_=>_!==N):[...s.tags,N];b(s.id,M)},placeholder:s.tags.length?"Edit tags":"Add tags",disabled:!s.record})})]}),a.jsxs("section",{className:"rounded-2xl border border-border bg-background px-4 py-3 text-xs text-muted-foreground",children:[a.jsx("p",{className:"font-semibold text-foreground",children:"Tip"}),a.jsxs("p",{className:"mt-1",children:["Keep the preview clean: use ",a.jsx("span",{className:"font-semibold",children:"Notes"})," for context, and ",a.jsx("span",{className:"font-semibold",children:"Tags"})," for retrieval."]})]})]}):a.jsx(QO,{now:l,comments:v,people:u,currentUserKey:d,currentUserLabel:m,onAdd:(N,M)=>y(s.id,N,M),onEdit:(N,M,_)=>k(s.id,N,M,_),onDelete:N=>S(s.id,N)})})]})]})}function oz({open:e,onClose:t,onSave:s}){const[i,l]=h.useState(""),u=h.useId();return h.useEffect(()=>{e&&l("")},[e]),e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-overlay/30 px-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-border bg-card p-5 shadow-xl",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Save view"}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Save your current filters as a reusable view."}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:u,className:"text-xs font-semibold text-muted-foreground",children:"View name"}),a.jsx(yt,{id:u,value:i,onChange:d=>l(d.target.value),placeholder:"e.g. My triage queue",className:"mt-2"})]}),a.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[a.jsx(Te,{type:"button",variant:"ghost",onClick:t,children:"Cancel"}),a.jsx(Te,{type:"button",onClick:()=>{const d=i.trim();d&&(s(d),l(""),t())},disabled:!i.trim(),children:"Save"})]})]})}):null}function lz({concurrency:e=3,startUpload:t}){const[s,i]=h.useState([]),l=h.useRef(new Set),u=h.useRef(new Map),d=h.useCallback(y=>{if(!y.length)return[];const k=Date.now(),S=y.map((j,N)=>({id:fz(k,N),file:j,status:"queued",progress:{loaded:0,total:Math.max(j.size,0),percent:0}}));return i(j=>[...j,...S]),S},[]),m=h.useCallback(y=>{const k=u.current.get(y);k&&k(),i(S=>S.map(j=>j.id===y&&j.status!=="succeeded"?{...j,status:"cancelled"}:j))},[]),g=h.useCallback(y=>{i(k=>k.map(S=>S.id===y?{...S,status:"queued",progress:{loaded:0,total:Math.max(S.file.size,0),percent:0},response:void 0,error:void 0}:S))},[]),x=h.useCallback(y=>{m(y),i(k=>k.filter(S=>S.id!==y))},[m]),b=h.useCallback(()=>{i(y=>y.filter(k=>!dz(k.status)))},[]);h.useEffect(()=>{const y=s.filter(j=>j.status==="uploading").length;if(y>=e)return;const k=e-y,S=s.filter(j=>j.status==="queued").slice(0,k);for(const j of S){if(l.current.has(j.id))continue;l.current.add(j.id),i(M=>M.map(_=>_.id===j.id?{..._,status:"uploading"}:_));const N=t(j.file,{onProgress:M=>{i(_=>_.map(R=>R.id===j.id?{...R,progress:cz(R.file,M)}:R))}});u.current.set(j.id,N.abort),N.promise.then(M=>{i(_=>_.map(R=>R.id===j.id?{...R,status:"succeeded",progress:uz(R.file),response:M.data??void 0,error:void 0}:R))}).catch(M=>{const R=(M instanceof Error?M.name:"")==="AbortError",q=R?void 0:M instanceof Error?M.message:"Upload failed.";i($=>$.map(I=>I.id===j.id?{...I,status:R?"cancelled":"failed",error:q}:I))}).finally(()=>{l.current.delete(j.id),u.current.delete(j.id)})}},[e,s,t]);const v=h.useMemo(()=>{let y=0,k=0,S=0,j=0,N=0,M=0,_=0;for(const I of s)switch(y+=Math.max(I.file.size,0),k+=I.progress.loaded,I.status){case"queued":S+=1;break;case"uploading":j+=1;break;case"succeeded":N+=1;break;case"failed":M+=1;break;case"cancelled":_+=1;break}const R=N+M+_,q=S+j,$=y>0?Math.min(100,Math.round(k/y*100)):0;return{totalCount:s.length,queuedCount:S,uploadingCount:j,succeededCount:N,failedCount:M,cancelledCount:_,completedCount:R,totalBytes:y,uploadedBytes:k,percent:$,inFlightCount:q}},[s]);return{items:s,summary:v,enqueue:d,cancel:m,retry:g,remove:x,clearCompleted:b}}function cz(e,t){const s=t.total??Math.max(e.size,0),i=Math.max(t.loaded,0),l=s>0?Math.min(100,Math.round(i/s*100)):0;return{loaded:i,total:s,percent:l}}function uz(e){const t=Math.max(e.size,0);return{loaded:t,total:t,percent:t>0?100:0}}function dz(e){return e==="succeeded"||e==="failed"||e==="cancelled"}function fz(e,t){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`upload-${e}-${t}-${Math.random().toString(36).slice(2,9)}`}const hz=["queued","processing","ready","failed","archived"],Yj={statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]},r0="__unassigned__",Js={views:e=>`ade.documents.views.${e}`,viewsLegacy:e=>`ade.documents.v10.views.${e}`,assignments:e=>`ade.documents.assignments.${e}`,assignmentsLegacy:e=>`ade.documents.v10.assignments.${e}`,comments:e=>`ade.documents.comments.${e}`,commentsLegacy:e=>`ade.documents.v10.comments.${e}`};function Ep(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function s0(e){if(typeof window>"u")return[];const t=window.localStorage.getItem(Js.views(e))??window.localStorage.getItem(Js.viewsLegacy(e)),s=Ep(t);return s?s.map(i=>({...i,filters:{...Yj,...i.filters??{},tagMode:i.filters?.tagMode??"any",assignees:i.filters?.assignees??[]}})):[]}function a0(e,t){typeof window>"u"||window.localStorage.setItem(Js.views(e),JSON.stringify(t))}function i0(e){if(typeof window>"u")return{};const t=window.localStorage.getItem(Js.assignments(e))??window.localStorage.getItem(Js.assignmentsLegacy(e));return Ep(t)??{}}function mz(e,t){typeof window>"u"||window.localStorage.setItem(Js.assignments(e),JSON.stringify(t))}function o0(e){if(typeof window>"u")return{};const t=window.localStorage.getItem(Js.comments(e))??window.localStorage.getItem(Js.commentsLegacy(e));return Ep(t)??{}}function Jh(e,t){typeof window>"u"||window.localStorage.setItem(Js.comments(e),JSON.stringify(t))}function pz({workspaceId:e,currentUserLabel:t,currentUserId:s}){const{notifyToast:i}=xd(),l=Tt(),u=`user:${s}`,[d,m]=h.useState("grid"),[g,x]=h.useState("status"),[b,v]=h.useState(""),[y,k]=h.useState(new Set),[S,j]=h.useState(null),[N,M]=h.useState(!1),[_,R]=h.useState(null),[q,$]=h.useState(null),[I,D]=h.useState(Yj),[C,L]=h.useState("all"),[V,K]=h.useState(!1),[A,X]=h.useState(()=>s0(e)),[fe,Se]=h.useState(()=>i0(e)),[z,H]=h.useState(()=>o0(e)),[ae,ge]=h.useState(()=>Date.now()),ce=h.useRef(null),T=h.useRef(new Map),G=h.useRef(new Set),ue=h.useRef(new Set);h.useEffect(()=>{const F=window.setInterval(()=>ge(Date.now()),3e4);return()=>window.clearInterval(F)},[]),h.useEffect(()=>{const F=pe=>{pe.key==="Escape"&&M(!1)};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[]),h.useEffect(()=>{X(s0(e)),Se(i0(e)),H(o0(e))},[e]);const Y=h.useCallback((F,pe)=>C4(e,F,{onProgress:pe.onProgress}),[e]),ee=lz({startUpload:Y}),Z="-created_at",te=h.useMemo(()=>rn.list(e,Z),[Z,e]),Q=Rm({queryKey:te,initialPageParam:1,queryFn:({pageParam:F,signal:pe})=>bO(e,{sort:Z,page:typeof F=="number"?F:1,pageSize:Hj},pe),getNextPageParam:F=>F.has_next?F.page+1:void 0,enabled:e.length>0,placeholderData:F=>F,staleTime:15e3,refetchInterval:15e3}),se=h.useMemo(()=>Q.data?.pages.flatMap(F=>F.items??[])??[],[Q.data?.pages]),ke=h.useMemo(()=>new Map(se.map(F=>[F.id,F])),[se]);h.useEffect(()=>{ee.items.forEach(F=>{F.status==="succeeded"&&F.response&&!G.current.has(F.id)&&(G.current.add(F.id),l.invalidateQueries({queryKey:rn.workspace(e)})),F.status==="failed"&&F.error&&!G.current.has(`fail-${F.id}`)&&(G.current.add(`fail-${F.id}`),i({title:"Upload failed",description:F.error,intent:"danger"}))})},[i,l,ee.items,e]),h.useEffect(()=>{ee.items.forEach(F=>{F.status!=="succeeded"||!F.response?.id||F.response.status&&F.response.status!=="uploaded"||ue.current.has(F.id)||(ue.current.add(F.id),Cj(e,{input_document_id:F.response.id}).then(()=>{l.invalidateQueries({queryKey:rn.workspace(e)})}).catch(pe=>{const ve=pe instanceof Error?pe.message:"Unable to start a run for this upload.";i({title:"Run not started",description:ve,intent:"warning"})}))})},[i,l,ee.items,e]);const Me=h.useMemo(()=>{const F=[];return ee.items.forEach(pe=>{const ve=T.current.get(pe.id)??Date.now(),Re=pe.file.name;if(pe.status==="succeeded"&&pe.response){if(ke.has(pe.response.id))return;F.push(Xh(pe.response));return}const Xe=pe.status==="failed"?"failed":pe.status==="uploading"?"processing":"queued";F.push({id:pe.id,name:Re,status:Xe,fileType:Fj(Re),uploader:t,tags:[],createdAt:ve,updatedAt:ve,size:Uj(pe.file.size),stage:pe.status==="failed"?"Upload failed":pe.status==="uploading"?"Uploading":"Queued for upload",progress:pe.status==="uploading"?pe.progress.percent:void 0,error:pe.status==="failed"?{summary:pe.error??"Upload failed",detail:"We could not upload this file. Check the connection and retry.",nextStep:"Retry now or remove the upload."}:void 0,mapping:{attention:0,unmapped:0,pending:!0},assigneeKey:fe[pe.id]??null,assigneeLabel:null,commentCount:(z[pe.id]??[]).length,record:pe.response,upload:pe})}),F},[fe,z,t,ke,ee.items]),We=h.useMemo(()=>se.map(F=>Xh(F)),[se]),st=sn({queryKey:rn.members(e),queryFn:({signal:F})=>yO(e,F),enabled:!!e,staleTime:6e4}),Ve=h.useMemo(()=>{const F=new Map;return F.set(u,{key:u,label:t,kind:"user",userId:s}),(st.data?.items??[]).forEach(ve=>{const Re=`user:${ve.user_id}`,Xe=ve.user_id===s?t:`Member ${Cu(ve.user_id)}`;F.has(Re)||F.set(Re,{key:Re,label:Xe,kind:"user",userId:ve.user_id})}),We.forEach(ve=>{if(ve.uploader){const Re=`label:${ve.uploader}`;F.has(Re)||F.set(Re,{key:Re,label:ve.uploader,kind:"label"})}}),Array.from(F.values()).sort((ve,Re)=>ve.label.localeCompare(Re.label))},[We,s,u,t,st.data?.items]),$e=h.useMemo(()=>new Map(Ve.map(F=>[F.key,F])),[Ve]),gt=h.useCallback(F=>{if(!F)return null;const pe=$e.get(F);return pe?pe.label:F.startsWith("user:")?`Member ${Cu(F.slice(5))}`:F.startsWith("label:")?F.slice(6):F},[$e]),xt=sn({queryKey:S&&e?rn.document(e,S):[...rn.root(),"document","none"],queryFn:({signal:F})=>S?vO(e,S,F):Promise.reject(),enabled:!!(S&&e)&&!ke.has(S??""),staleTime:3e4}),Oe=h.useMemo(()=>xt.data?Xh(xt.data):null,[xt.data]),Qe=h.useMemo(()=>{const F=[...Me,...We];return Oe&&!F.some(pe=>pe.id===Oe.id)?[Oe,...F]:F},[We,Oe,Me]),O=h.useMemo(()=>Qe.map(F=>{const ve=fe[F.id]??null??F.assigneeKey??null,Re=(z[F.id]??[]).length;return{...F,assigneeKey:ve,assigneeLabel:gt(ve),commentCount:Re}}),[fe,gt,Qe,z]),U=h.useMemo(()=>new Map(O.map(F=>[F.id,F])),[O]);h.useEffect(()=>{k(F=>{const pe=new Set;return F.forEach(ve=>{U.has(ve)&&pe.add(ve)}),pe})},[U]),h.useEffect(()=>{if(O.length===0){j(null);return}(!S||!U.has(S))&&j(O[0].id)},[S,O,U]);const ne=h.useMemo(()=>S?U.get(S)??null:null,[S,U]),be=h.useMemo(()=>{const F=b.trim().toLowerCase(),pe=F.length>=2;return O.filter(ve=>{if(pe&&![ve.name,ve.uploader??"",ve.tags.join(" "),ve.assigneeLabel??"",ve.assigneeKey??"",ve.fileType].join(" ").toLowerCase().includes(F)||I.statuses.length>0&&!I.statuses.includes(ve.status)||I.fileTypes.length>0&&!I.fileTypes.includes(ve.fileType))return!1;if(I.tags.length>0){if(I.tagMode==="all"){if(!I.tags.every(Re=>ve.tags.includes(Re)))return!1}else if(!I.tags.some(Re=>ve.tags.includes(Re)))return!1}if(I.assignees.length>0){const Re=I.assignees.includes(r0),Xe=ve.assigneeKey?I.assignees.includes(ve.assigneeKey):!1,bt=!ve.assigneeKey&&Re;if(!Xe&&!bt)return!1}return!0})},[O,I,b]),Ne=h.useMemo(()=>{if(g==="status")return hz.map(Re=>({id:Re,label:gz(Re),items:be.filter(Xe=>Xe.status===Re)}));if(g==="tag"){const Re=new Set;be.forEach(Le=>Le.tags.forEach(vt=>Re.add(vt)));const bt=Array.from(Re).sort((Le,vt)=>Le.localeCompare(vt)).map(Le=>({id:Le,label:Le,items:be.filter(vt=>vt.tags.includes(Le))}));return bt.push({id:"__untagged__",label:"Untagged",items:be.filter(Le=>Le.tags.length===0)}),bt}const F=new Set;be.forEach(Re=>{Re.uploader&&F.add(Re.uploader)});const ve=Array.from(F).sort((Re,Xe)=>Re.localeCompare(Xe)).map(Re=>({id:Re,label:Re,items:be.filter(Xe=>Xe.uploader===Re)}));return ve.push({id:"__unassigned_uploader__",label:"Unassigned",items:be.filter(Re=>!Re.uploader)}),ve},[g,be]),Ce=h.useMemo(()=>be.filter(F=>F.record).map(F=>F.id),[be]),ze=Ce.length>0&&Ce.every(F=>y.has(F)),ye=O.length===0,_e=O.length>0&&be.length===0,Be=h.useMemo(()=>{const F=O.filter(bt=>bt.assigneeKey===u).length,pe=O.filter(bt=>!bt.assigneeKey).length,ve=O.filter(bt=>bt.status==="ready").length,Re=O.filter(bt=>bt.status==="processing"||bt.status==="queued").length,Xe=O.filter(bt=>bt.status==="failed").length;return{total:O.length,mine:F,unassigned:pe,ready:ve,processing:Re,failed:Xe}},[u,O]),ht=h.useMemo(()=>ne?z[ne.id]??[]:[],[ne,z]),it=ne?.record?.id??null,bn=sn({queryKey:it?rn.runsForDocument(e,it):[...rn.workspace(e),"runs","none"],queryFn:({signal:F})=>it?wO(e,it,F):Promise.resolve([]),enabled:!!it&&N,staleTime:5e3,refetchInterval:N?7500:!1}),Dt=h.useMemo(()=>(bn.data??[]).slice().sort((pe,ve)=>Zu(ve.created_at)-Zu(pe.created_at)),[bn.data]),jt=ne?.record?.last_run?.run_id??null;h.useEffect(()=>{N&&$(F=>{const pe=F&&Dt.some(ve=>ve.id===F)?F:null;return pe||(jt&&Dt.some(ve=>ve.id===jt)?jt:Dt[0]?.id??null)})},[ne?.id,jt,N,Dt]);const ut=h.useMemo(()=>q?Dt.find(F=>F.id===q)??null:null,[Dt,q]),Ut=N&&ut?ut.status==="running"||ut.status==="queued":!1,In=sn({queryKey:q?rn.runMetrics(q):[...rn.root(),"runMetrics","none"],queryFn:({signal:F})=>q?jO(q,F):Promise.resolve(null),enabled:!!q&&N,staleTime:3e4,refetchInterval:Ut?1e4:!1}),he=h.useMemo(()=>!ut||!_O(ut)?null:Vj(ut),[ut]),Ae=sn({queryKey:he?rn.workbook(he):[...rn.root(),"workbook","none"],queryFn:({signal:F})=>he?SO(he,F):Promise.reject(new Error("No output URL")),enabled:!!he&&N,staleTime:3e4});h.useEffect(()=>{R(null)},[ne?.id,q]),h.useEffect(()=>{Ae.data?.sheets.length&&R(Ae.data.sheets[0].name)},[Ae.data?.sheets]);const ot=h.useCallback(F=>v(F),[]),_n=h.useCallback(F=>m(F),[]),at=h.useCallback(F=>x(F),[]),kt=h.useCallback(F=>{k(pe=>{const ve=new Set(pe);return ve.has(F)?ve.delete(F):ve.add(F),ve})},[]),At=h.useCallback(()=>k(new Set(Ce)),[Ce]),on=h.useCallback(()=>k(new Set),[]),hn=h.useCallback(F=>{j(F),M(!0)},[]),mn=h.useCallback(()=>M(!1),[]),vn=h.useCallback(F=>R(F),[]),Mn=h.useCallback(F=>{if(!F||F.length===0)return;const pe=ee.enqueue(Array.from(F)),ve=Date.now();pe.forEach((Re,Xe)=>{T.current.set(Re.id,ve+Xe*1e3)}),i({title:`${pe.length} file${pe.length===1?"":"s"} added`,description:"Processing will begin automatically.",intent:"success"})},[i,ee]),tn=h.useCallback(()=>ce.current?.click(),[]),Gn=h.useCallback(F=>{Mn(F.target.files),F.target.value=""},[Mn]),Hn=h.useCallback(()=>void Q.refetch(),[Q]),Un=h.useCallback(()=>{Q.hasNextPage&&Q.fetchNextPage()},[Q]),br=h.useCallback(F=>{if(F.target?.closest("input, textarea, select, button, a, [role='button'], [role='menuitem']")||be.length===0||F.key!=="ArrowDown"&&F.key!=="ArrowUp")return;F.preventDefault();const ve=be.findIndex(Xe=>Xe.id===S);if(ve<0){j(be[0].id);return}const Re=F.key==="ArrowDown"?Math.min(be.length-1,ve+1):Math.max(0,ve-1);j(be[Re].id)},[S,be]),sr=h.useCallback(F=>{D(F);const pe=b.trim().length>=2,ve=F.statuses.length===0&&F.fileTypes.length===0&&F.tags.length===0&&F.assignees.length===0;L(!pe&&ve?"all":"custom")},[b]),Yn=h.useCallback(F=>{L(F),D(pe=>{const ve={...pe,statuses:[],fileTypes:[],tags:[],tagMode:"any",assignees:[]};switch(F){case"mine":return{...ve,assignees:[u]};case"unassigned":return{...ve,assignees:[r0]};case"ready":return{...ve,statuses:["ready"]};case"processing":return{...ve,statuses:["queued","processing"]};case"failed":return{...ve,statuses:["failed"]};case"all":default:return ve}})},[u]),vr=h.useCallback(F=>{const pe=A.find(ve=>ve.id===F);pe&&(D(pe.filters),L(F))},[A]),Tn=h.useCallback(()=>K(!0),[]),ln=h.useCallback(()=>K(!1),[]),Dn=h.useCallback(F=>{const pe=Date.now(),ve={id:`view_${pe}`,name:F,createdAt:pe,updatedAt:pe,filters:I},Re=[ve,...A];X(Re),a0(e,Re),L(ve.id),i({title:"View saved",description:F,intent:"success"})},[I,i,A,e]),ps=h.useCallback(F=>{const pe=A.filter(ve=>ve.id!==F);X(pe),a0(e,pe),C===F&&L("all"),i({title:"View deleted",description:F,intent:"success"})},[C,i,A,e]),Ms=h.useCallback((F,pe)=>{const ve=U.get(F);if(!ve?.record)return;const Re=ve.tags,Xe=pe.filter(Le=>!Re.includes(Le)),bt=Re.filter(Le=>!pe.includes(Le));Xe.length===0&&bt.length===0||CO(e,ve.record.id,{add:Xe,remove:bt}).then(Le=>{l.setQueryData(te,vt=>vt?.pages?{...vt,pages:vt.pages.map(Qt=>({...Qt,items:(Qt.items??[]).map(Fa=>Fa.id===Le.id?Le:Fa)}))}:vt),l.invalidateQueries({queryKey:rn.document(e,Le.id)})}).catch(Le=>{i({title:"Tag update failed",description:Le instanceof Error?Le.message:"Unable to update tags.",intent:"danger"})})},[U,te,i,l,e]),qa=h.useCallback((F,pe)=>{Se(ve=>{const Re={...ve,[F]:pe};return mz(e,Re),Re}),i({title:"Assignment updated",description:pe?$e.get(pe)?.label??pe:"Unassigned",intent:"success"})},[i,$e,e]),Si=h.useCallback(F=>qa(F,u),[qa,u]),St=h.useCallback((F,pe,ve)=>{const Re=Date.now(),Xe={id:`c_${Re}_${Math.random().toString(16).slice(2)}`,documentId:F,authorKey:u,authorLabel:t,body:pe,createdAt:Re,updatedAt:Re,mentions:ve};H(bt=>{const Le=[...bt[F]??[],Xe],vt={...bt,[F]:Le};return Jh(e,vt),vt}),i({title:"Note added",description:"Saved locally for now.",intent:"success"})},[u,t,i,e]),Ur=h.useCallback((F,pe,ve,Re)=>{H(Xe=>{const Le=(Xe[F]??[]).map(Qt=>Qt.id===pe?{...Qt,body:ve,mentions:Re,updatedAt:Date.now()}:Qt),vt={...Xe,[F]:Le};return Jh(e,vt),vt}),i({title:"Note updated",description:"Saved locally for now.",intent:"success"})},[i,e]),ar=h.useCallback((F,pe)=>{H(ve=>{const Xe=(ve[F]??[]).filter(Le=>Le.id!==pe),bt={...ve,[F]:Xe};return Jh(e,bt),bt}),i({title:"Note deleted",description:"Removed locally for now.",intent:"success"})},[i,e]),Xr=h.useCallback(F=>$(F),[]),ir=h.useCallback(F=>{if(F?.record){if(!he){i({title:"No output link",description:"We could not find the output download link yet.",intent:"warning"});return}kO(he,F.name).then(pe=>i({title:"Download started",description:pe,intent:"success"})).catch(pe=>i({title:"Download failed",description:pe instanceof Error?pe.message:"Unable to download the processed XLSX.",intent:"danger"}))}},[i,he]),or=h.useCallback(F=>{const pe=Ku(F.record)?.run_id??null;if(!F.record||!pe){i({title:"Output not ready",description:"Open the document to see run history and download output.",intent:"warning"});return}e0(pe,F.name).then(ve=>i({title:"Download started",description:ve,intent:"success"})).catch(ve=>i({title:"Download failed",description:ve instanceof Error?ve.message:"Unable to download the processed XLSX.",intent:"danger"}))},[i]),gs=h.useCallback(F=>{F?.record&&Jy(e,F.record.id,F.name).then(pe=>i({title:"Download started",description:pe,intent:"success"})).catch(pe=>i({title:"Download failed",description:pe instanceof Error?pe.message:"Unable to download the original file.",intent:"danger"}))},[i,e]),Yt=h.useCallback(F=>{if(F?.record){if(!ut?.configuration_id){i({title:"Cannot reprocess yet",description:"No configuration is available for this document's runs yet.",intent:"warning"});return}NO(ut.configuration_id,F.record.id).then(pe=>{i({title:"Reprocess queued",description:`Run ${Cu(pe.id)}`,intent:"success"}),l.invalidateQueries({queryKey:rn.workspace(e)})}).catch(pe=>i({title:"Reprocess failed",description:pe instanceof Error?pe.message:"Unable to reprocess.",intent:"danger"}))}},[ut?.configuration_id,i,l,e]),ki=h.useCallback(F=>{if(!F?.record)return;const pe=new URL(window.location.href);pe.searchParams.set("doc",F.record.id),iO(pe.toString()).then(()=>i({title:"Link copied",description:"Share it with your team.",intent:"success"})).catch(()=>i({title:"Copy failed",description:"Unable to copy link to clipboard.",intent:"danger"}))},[i]),ta=h.useCallback(F=>{const pe=F.add.filter(Boolean),ve=F.remove.filter(Boolean);if(pe.length===0&&ve.length===0)return;const Re=be.filter(Xe=>y.has(Xe.id)&&Xe.record);Re.length!==0&&EO(e,Re.map(Xe=>Xe.record.id),{add:pe,remove:ve}).then(()=>{i({title:"Tags applied",description:`${pe.length} added  ${ve.length} removed`,intent:"success"}),l.invalidateQueries({queryKey:rn.workspace(e)})}).catch(Xe=>{i({title:"Bulk tag failed",description:Xe instanceof Error?Xe.message:"Unable to apply tags.",intent:"danger"})})},[i,l,y,be,e]),lr=h.useCallback(()=>{const F=be.filter(pe=>y.has(pe.id)&&pe.record);F.length!==0&&(F.forEach(pe=>{Jy(e,pe.record.id,pe.name).catch(()=>{})}),i({title:"Downloads started",description:`${F.length} originals`,intent:"success"}))},[i,y,be,e]),Jr=h.useCallback(()=>{const F=be.filter(ve=>y.has(ve.id)&&ve.record);if(F.length===0)return;let pe=0;F.forEach(ve=>{const Re=Ku(ve.record)?.run_id??null;Re&&(pe+=1,e0(Re,ve.name).catch(()=>{}))}),pe>0?i({title:"Downloads started",description:`${pe} outputs`,intent:"success"}):i({title:"No outputs ready",description:"Select documents with successful runs to download outputs.",intent:"warning"})},[i,y,be]);return{state:{viewMode:d,groupBy:g,search:b,selectedIds:y,activeId:S,previewOpen:N,activeSheetId:_,filters:I,activeViewId:C,saveViewOpen:V,selectedRunId:q},derived:{now:ae,documents:O,visibleDocuments:be,activeDocument:ne,boardColumns:Ne,isLoading:Q.isLoading,isError:Q.isError,hasNextPage:!!Q.hasNextPage,isFetchingNextPage:Q.isFetchingNextPage,people:Ve,currentUserKey:u,runs:Dt,runsLoading:bn.isLoading,selectedRunId:q,activeRun:ut,runLoading:bn.isFetching,runMetrics:In.data??null,runMetricsLoading:In.isLoading,runMetricsError:In.isError,outputUrl:he,workbook:Ae.data??null,workbookLoading:Ae.isLoading,workbookError:Ae.isError,showNoDocuments:ye,showNoResults:_e,allVisibleSelected:ze,savedViews:A,activeComments:ht,counts:Be},refs:{fileInputRef:ce},actions:{setSearch:ot,setViewMode:_n,setGroupBy:at,toggleSelect:kt,selectAllVisible:At,clearSelection:on,openPreview:hn,closePreview:mn,setActiveSheetId:vn,handleUploadClick:tn,handleFileInputChange:Gn,refreshDocuments:Hn,loadMore:Un,handleKeyNavigate:br,setFilters:sr,setBuiltInView:Yn,selectSavedView:vr,openSaveView:Tn,closeSaveView:ln,saveView:Dn,deleteView:ps,updateTagsOptimistic:Ms,assignDocument:qa,pickUpDocument:Si,addComment:St,editComment:Ur,deleteComment:ar,selectRun:Xr,downloadOutput:ir,downloadOutputFromRow:or,downloadOriginal:gs,reprocess:Yt,copyLink:ki,bulkUpdateTags:ta,bulkDownloadOriginals:lr,bulkDownloadOutputs:Jr}}}function gz(e){switch(e){case"ready":return"Ready";case"processing":return"Processing";case"failed":return"Failed";case"archived":return"Archived";case"queued":return"Queued";default:return e}}function xz(){return a.jsx(ql,{children:a.jsx(bz,{})})}function bz(){const e=Fn(),t=Zt(),s=yi(),i=nd(),l=i.data?.items??[],m=[J0(),s.user.preferred_workspace_id].filter(g=>!!g).map(g=>l.find(x=>x.id===g)).find(g=>!!g)??l[0]??null;return h.useEffect(()=>{if(i.isLoading||i.isError)return;if(!m){t("/workspaces",{replace:!0});return}const g=`/workspaces/${m.id}/documents${e.search}${e.hash}`;t(g,{replace:!0})},[e.hash,e.search,t,m,i.isError,i.isLoading]),i.isLoading?a.jsx(wt,{title:"Loading Documents",variant:"loading"}):i.isError?a.jsx(wt,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error"}):null}function vz(){const e=yi(),{workspace:t}=_s(),s=Fn(),i=Zt(),l=e.user.display_name||e.user.email||"You",u=e.user.id,d=pz({currentUserLabel:l,currentUserId:u,workspaceId:t.id}),{actions:m,state:g}=d,[x,b]=h.useState(null),[v,y]=h.useState(!1),k=()=>{M(""),m.setSearch(""),m.setBuiltInView("all")},S=h.useMemo(()=>new URLSearchParams(s.search).get("q")??"",[s.search]),j=h.useMemo(()=>new URLSearchParams(s.search).get("doc"),[s.search]);h.useEffect(()=>{S!==g.search&&m.setSearch(S)},[m,g.search,S]),h.useEffect(()=>{j&&m.openPreview(j)},[m,j]);const N=h.useCallback((C,L=!1)=>{const V=new URLSearchParams(s.search);C?V.set("doc",C):V.delete("doc");const K=V.toString(),A=`${s.pathname}${K?`?${K}`:""}${s.hash??""}`;i(A,{replace:L})},[s.hash,s.pathname,s.search,i]);h.useEffect(()=>{g.previewOpen&&g.activeId&&j!==g.activeId&&N(g.activeId,!0)},[N,g.activeId,g.previewOpen,j]);const M=h.useCallback((C,L=!0)=>{const V=new URLSearchParams(s.search);C?V.set("q",C):V.delete("q");const K=V.toString(),A=`${s.pathname}${K?`?${K}`:""}${s.hash??""}`;i(A,{replace:L})},[s.hash,s.pathname,s.search,i]),_=C=>{if(d.state.activeId===C&&d.state.previewOpen){R();return}N(C,!!j),d.actions.openPreview(C)},R=()=>{N(null,!1),d.actions.closePreview(),b(null)},q=h.useCallback(C=>{N(C,!!j),d.actions.openPreview(C),b({id:C,tab:"details"})},[d.actions,N,j]),$=h.useCallback(C=>{N(C,!!j),d.actions.openPreview(C),b({id:C,tab:"notes"})},[d.actions,N,j]),I=h.useMemo(()=>d.derived.visibleDocuments.filter(C=>d.state.selectedIds.has(C.id)&&C.record),[d.derived.visibleDocuments,d.state.selectedIds]),D=h.useMemo(()=>I.filter(C=>!!Ku(C.record)).length,[I]);return a.jsxs("div",{className:"documents flex min-h-0 flex-1 flex-col bg-background text-foreground",children:[a.jsx(ZO,{viewMode:d.state.viewMode,onViewModeChange:d.actions.setViewMode,onUploadClick:d.actions.handleUploadClick,fileInputRef:d.refs.fileInputRef,onFileInputChange:d.actions.handleFileInputChange}),a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:a.jsxs("section",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:[a.jsx(xO,{workspaceId:t.id,filters:d.state.filters,onChange:d.actions.setFilters,people:d.derived.people,showingCount:d.derived.visibleDocuments.length,totalCount:d.derived.documents.length,activeViewId:d.state.activeViewId,onSetBuiltInView:C=>d.actions.setBuiltInView(C),savedViews:d.derived.savedViews,onSelectSavedView:C=>d.actions.selectSavedView(C),onDeleteSavedView:C=>d.actions.deleteView(C),onOpenSaveDialog:d.actions.openSaveView,counts:d.derived.counts}),d.state.viewMode==="grid"?a.jsxs(a.Fragment,{children:[a.jsx(VO,{documents:d.derived.visibleDocuments,activeId:d.state.activeId,selectedIds:d.state.selectedIds,onSelect:d.actions.toggleSelect,onSelectAll:d.actions.selectAllVisible,onClearSelection:d.actions.clearSelection,allVisibleSelected:d.derived.allVisibleSelected,onActivate:_,onUploadClick:d.actions.handleUploadClick,onClearFilters:k,showNoDocuments:d.derived.showNoDocuments,showNoResults:d.derived.showNoResults,isLoading:d.derived.isLoading,isError:d.derived.isError,hasNextPage:d.derived.hasNextPage,isFetchingNextPage:d.derived.isFetchingNextPage,onLoadMore:d.actions.loadMore,onRefresh:d.actions.refreshDocuments,now:d.derived.now,onKeyNavigate:d.actions.handleKeyNavigate,people:d.derived.people,onAssign:d.actions.assignDocument,onPickUp:d.actions.pickUpDocument,onDownloadOriginal:d.actions.downloadOriginal,onDownloadOutput:d.actions.downloadOutputFromRow,onCopyLink:d.actions.copyLink,onReprocess:C=>d.actions.reprocess(C),onOpenDetails:q,onOpenNotes:$,onClosePreview:R,expandedId:d.state.previewOpen?d.state.activeId:null,expandedContent:d.state.previewOpen?a.jsx(n0,{workspaceId:t.id,document:d.derived.activeDocument,now:d.derived.now,activeSheetId:d.state.activeSheetId,onSheetChange:d.actions.setActiveSheetId,runs:d.derived.runs,runsLoading:d.derived.runsLoading,selectedRunId:d.derived.selectedRunId,onSelectRun:d.actions.selectRun,activeRun:d.derived.activeRun,runLoading:d.derived.runLoading,runMetrics:d.derived.runMetrics,outputUrl:d.derived.outputUrl,onDownloadOutput:d.actions.downloadOutput,onDownloadOriginal:d.actions.downloadOriginal,onReprocess:d.actions.reprocess,people:d.derived.people,currentUserKey:d.derived.currentUserKey,currentUserLabel:l,onAssign:d.actions.assignDocument,onPickUp:d.actions.pickUpDocument,onCopyLink:d.actions.copyLink,comments:d.derived.activeComments,onAddComment:d.actions.addComment,onEditComment:d.actions.editComment,onDeleteComment:d.actions.deleteComment,onTagsChange:d.actions.updateTagsOptimistic,workbook:d.derived.workbook,workbookLoading:d.derived.workbookLoading,workbookError:d.derived.workbookError,onClose:R,detailsRequestId:x?.id??null,detailsRequestTab:x?.tab??null,onDetailsRequestHandled:()=>b(null)}):null}),a.jsx(dO,{count:d.state.selectedIds.size,outputReadyCount:D,onClear:d.actions.clearSelection,onAddTag:()=>y(!0),onDownloadOriginals:d.actions.bulkDownloadOriginals,onDownloadOutputs:d.actions.bulkDownloadOutputs})]}):a.jsxs(a.Fragment,{children:[a.jsx(uO,{columns:d.derived.boardColumns,groupBy:d.state.groupBy,onGroupByChange:d.actions.setGroupBy,activeId:d.state.previewOpen?d.state.activeId:null,onActivate:_,now:d.derived.now,isLoading:d.derived.isLoading,isError:d.derived.isError,hasNextPage:d.derived.hasNextPage,isFetchingNextPage:d.derived.isFetchingNextPage,onLoadMore:d.actions.loadMore,onRefresh:d.actions.refreshDocuments,onUploadClick:d.actions.handleUploadClick,onClearFilters:k,showNoDocuments:d.derived.showNoDocuments,showNoResults:d.derived.showNoResults,people:d.derived.people,onAssign:d.actions.assignDocument,onPickUp:d.actions.pickUpDocument}),d.state.previewOpen?a.jsx("div",{className:"border-t border-border bg-background px-6 pb-6 pt-4",children:a.jsx("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:a.jsx(n0,{workspaceId:t.id,document:d.derived.activeDocument,now:d.derived.now,activeSheetId:d.state.activeSheetId,onSheetChange:d.actions.setActiveSheetId,runs:d.derived.runs,runsLoading:d.derived.runsLoading,selectedRunId:d.derived.selectedRunId,onSelectRun:d.actions.selectRun,activeRun:d.derived.activeRun,runLoading:d.derived.runLoading,runMetrics:d.derived.runMetrics,outputUrl:d.derived.outputUrl,onDownloadOutput:d.actions.downloadOutput,onDownloadOriginal:d.actions.downloadOriginal,onReprocess:d.actions.reprocess,people:d.derived.people,currentUserKey:d.derived.currentUserKey,currentUserLabel:l,onAssign:d.actions.assignDocument,onPickUp:d.actions.pickUpDocument,onCopyLink:d.actions.copyLink,comments:d.derived.activeComments,onAddComment:d.actions.addComment,onEditComment:d.actions.editComment,onDeleteComment:d.actions.deleteComment,onTagsChange:d.actions.updateTagsOptimistic,workbook:d.derived.workbook,workbookLoading:d.derived.workbookLoading,workbookError:d.derived.workbookError,onClose:R,detailsRequestId:x?.id??null,detailsRequestTab:x?.tab??null,onDetailsRequestHandled:()=>b(null)})})}):null]})]})}),a.jsx(oz,{open:d.state.saveViewOpen,onClose:d.actions.closeSaveView,onSave:d.actions.saveView}),a.jsx(fO,{open:v,workspaceId:t.id,selectedCount:d.state.selectedIds.size,onClose:()=>y(!1),onApply:C=>d.actions.bulkUpdateTags(C)})]})}function yz(){return a.jsx(vz,{})}const cs={search:"",status:"all",result:"all",dateRange:"14d",config:"any",owner:"all"},Xj=[{value:"14d",label:"Last 14 days"},{value:"7d",label:"Last 7 days"},{value:"24h",label:"Last 24 hours"},{value:"30d",label:"Last 30 days"},{value:"custom",label:"Custom range"}],Cm={queued:{label:"Queued",badgeClass:"bg-muted text-muted-foreground",dotClass:"bg-muted-foreground",ringClass:"ring-border",textClass:"text-muted-foreground",surfaceClass:"bg-muted"},running:{label:"Running",badgeClass:"bg-info-100 text-info-700",dotClass:"bg-info-500",ringClass:"ring-info-200",textClass:"text-info-700",surfaceClass:"bg-info-50"},succeeded:{label:"Success",badgeClass:"bg-success-100 text-success-700",dotClass:"bg-success-500",ringClass:"ring-success-200",textClass:"text-success-700",surfaceClass:"bg-success-50"},failed:{label:"Failed",badgeClass:"bg-danger-100 text-danger-700",dotClass:"bg-danger-500",ringClass:"ring-danger-200",textClass:"text-danger-700",surfaceClass:"bg-danger-50"},cancelled:{label:"Cancelled",badgeClass:"bg-muted text-muted-foreground",dotClass:"bg-muted-foreground",ringClass:"ring-border",textClass:"text-muted-foreground",surfaceClass:"bg-muted"}};function wz({filters:e,configOptions:t,ownerOptions:s,resultEnabled:i,showingCount:l,totalCount:u,onChange:d,onReset:m}){return a.jsx("div",{className:"shrink-0 border-b border-border bg-card px-4 py-3",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-[1fr_1fr_1fr_1fr_1fr]",children:[a.jsx("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.dateRange,onChange:g=>d({dateRange:g.target.value}),children:Xj.map(g=>a.jsx("option",{value:g.value,children:g.label},g.value))}),a.jsxs("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.status,onChange:g=>d({status:g.target.value}),children:[a.jsx("option",{value:"all",children:"Status: all"}),a.jsx("option",{value:"succeeded",children:"Success"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"running",children:"Running"}),a.jsx("option",{value:"queued",children:"Queued"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.jsxs("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.result,onChange:g=>d({result:g.target.value}),disabled:!i,children:[a.jsx("option",{value:"all",children:"Result: all"}),a.jsx("option",{value:"clean",children:"Clean"}),a.jsx("option",{value:"warnings",children:"Warnings"}),a.jsx("option",{value:"errors",children:"Errors"})]}),a.jsxs("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.config,onChange:g=>d({config:g.target.value}),children:[a.jsx("option",{value:"any",children:"Config: any"}),t.map(g=>a.jsx("option",{value:g,children:g},g))]}),a.jsxs("select",{className:"rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",value:e.owner,onChange:g=>d({owner:g.target.value}),disabled:s.length===0,children:[a.jsx("option",{value:"all",children:"Owner: all"}),s.map(g=>a.jsx("option",{value:g,children:g},g))]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Showing ",a.jsx("span",{className:"font-semibold text-foreground",children:l})," of"," ",a.jsx("span",{className:"font-semibold text-foreground",children:u})]}),a.jsx(Te,{size:"sm",variant:"ghost",onClick:m,children:"Reset"})]})]})})}function jz({onExport:e}){return a.jsx("header",{className:"shrink-0 border-b border-border bg-card",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-4 px-6 py-4",children:[a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl border border-border bg-muted text-foreground",children:a.jsx(Sz,{})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Runs"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Monitor execution health, output quality, and mapping coverage."})]})]}),a.jsx("div",{className:"ml-auto flex flex-wrap items-center gap-3",children:a.jsx(Te,{variant:"secondary",onClick:e,children:"Export"})})]})})}function Sz(){return a.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M6 4.5v11l8.5-5.5L6 4.5Z",fill:"currentColor"})})}const kz=new Intl.NumberFormat("en-US");function Je(e){return e==null?"":kz.format(e)}function _p(e){return e==null?"":`${e}%`}function Jj(e){return e==null||Number.isNaN(e)?"":e.toFixed(2)}function e1(e){if(!e)return null;const t=e.field_count_expected??null,s=e.field_count_mapped??null;return!t||t<=0||s===null?null:Math.round(s/t*100)}function Nz(e,t){if(typeof e=="number"&&Number.isFinite(e)){const s=Math.floor(e/60),i=Math.round(e%60);return s<=0?`${i}s`:`${s}m ${i}s`}return t==="queued"?"Queued":t==="running"?"Running":t==="cancelled"?"Cancelled":""}function Cz(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function Ez(e){return e.warnings===0&&e.errors===0?"Clean":typeof e.errors=="number"&&e.errors>0?`${e.errors} errors`:typeof e.warnings=="number"?`${e.warnings} warnings`:""}function _z(e){return!e||e==="all"?"all":["queued","running","succeeded","failed","cancelled"].includes(e)?e:"all"}function Mz(e){return!e||e==="all"?"all":["clean","warnings","errors"].includes(e)?e:"all"}function Tz(e){return e&&["14d","7d","24h","30d","custom"].includes(e)?e:"14d"}function Dz(e){let t=!1;const s={total:0,success:0,warning:null,failed:0,running:0,queued:0,cancelled:0,active:0};return e.forEach(i=>{s.total+=1,i.status==="succeeded"&&(s.success+=1),i.status==="failed"&&(s.failed+=1),i.status==="cancelled"&&(s.cancelled+=1),i.status==="running"&&(s.running+=1),i.status==="queued"&&(s.queued+=1),typeof i.warnings=="number"&&(t=!0,s.warning=(s.warning??0)+i.warnings)}),s.active=s.running+s.queued,t||(s.warning=null),s}function Az(e,t){const s=t.search.trim().toLowerCase();return e.filter(i=>t.status!=="all"&&i.status!==t.status||t.result==="clean"&&(i.warnings===null||i.errors===null||i.warnings>0||i.errors>0)||t.result==="warnings"&&(i.warnings===null||i.warnings===0)||t.result==="errors"&&(i.errors===null||i.errors===0)||t.config!=="any"&&i.configLabel!==t.config||t.owner!=="all"&&i.ownerLabel!==t.owner?!1:s?[i.inputName,i.outputName??"",i.id,i.configLabel,i.ownerLabel,i.triggerLabel].filter(u=>!!u).join(" ").toLowerCase().includes(s):!0)}function Rz(e,t=new Date){if(e==="custom")return{};const s=new Date(t),i=new Date(t);return e==="24h"?i.setHours(i.getHours()-24):e==="7d"?i.setDate(i.getDate()-7):e==="30d"?i.setDate(i.getDate()-30):i.setDate(i.getDate()-14),{created_after:i.toISOString(),created_before:s.toISOString()}}function Oz({counts:e,rangeLabel:t}){const s=e.success+e.failed+e.cancelled,i=e.failed+e.cancelled,l=s>0?Math.round(e.success/s*100):0,u=e.warning===null?"":Je(e.warning);return a.jsx("div",{className:"shrink-0 border-b border-border bg-card px-6 py-4",children:a.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-[1.1fr_1fr_1fr_1fr_1fr]",children:[a.jsx(bl,{label:"Total runs",value:Je(e.total),meta:t}),a.jsx(bl,{label:"Active queue",value:Je(e.active),meta:`${Je(e.running)} running  ${Je(e.queued)} queued`,tone:"info"}),a.jsx(bl,{label:"Success rate",value:`${l}%`,meta:`${Je(e.success)} of ${Je(s)} completed`,tone:"success"}),a.jsx(bl,{label:"Failed",value:Je(i),meta:"Failed or cancelled runs",tone:"danger"}),a.jsx(bl,{label:"Warnings",value:u,meta:"Validation warnings",tone:"warning"})]})})}function bl({label:e,value:t,meta:s,tone:i="default"}){const l=i==="success"?"text-success-700":i==="warning"?"text-warning-700":i==="danger"?"text-danger-700":i==="info"?"text-info-700":"text-foreground";return a.jsxs("div",{className:"rounded-xl border border-border bg-background px-4 py-3",children:[a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:e}),a.jsx("p",{className:re("mt-1 text-2xl font-semibold",l),children:t}),a.jsx("p",{className:"text-xs text-muted-foreground",children:s})]})}function zz({run:e,onClose:t,metrics:s,metricsLoading:i,metricsError:l,fields:u,fieldsLoading:d,fieldsError:m,columns:g,columnsLoading:x,columnsError:b}){const[v,y]=h.useState("summary"),k=h.useMemo(()=>{const N=s?.validation_issues_warning??s?.evaluation_findings_warning??e.warnings??null,M=s?.validation_issues_error??s?.evaluation_findings_error??e.errors??null,_=s?.row_count_total??e.rows??null,R=e1(s)??e.quality??null;return{warnings:N,errors:M,rows:_,quality:R}},[s,e.errors,e.quality,e.rows,e.warnings]),S=k.warnings===null?"Warnings data unavailable":`${Je(k.warnings)} warnings detected`,j=k.errors===null?"Errors data unavailable":`${Je(k.errors)} errors detected`;return a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:re("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",Cm[e.status].badgeClass),children:Cm[e.status].label}),a.jsx("h3",{className:"mt-2 text-base font-semibold text-foreground",children:e.inputName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.id})]}),a.jsxs("div",{className:"flex items-start gap-3 text-xs text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("p",{children:e.startedAtLabel}),a.jsx("p",{children:e.durationLabel})]}),t?a.jsx(Te,{size:"sm",variant:"ghost",onClick:t,children:"Close preview"}):null]})]}),a.jsxs(fd,{value:v,onValueChange:N=>y(N),children:[a.jsxs(hd,{className:"mt-4 flex flex-wrap gap-2 border-b border-border pb-2",children:[a.jsx(wu,{value:"summary",label:"Summary",active:v==="summary"}),a.jsx(wu,{value:"metrics",label:"Metrics",active:v==="metrics"}),a.jsx(wu,{value:"fields",label:"Fields",active:v==="fields"}),a.jsx(wu,{value:"columns",label:"Columns",active:v==="columns"})]}),a.jsx(za,{value:"summary",className:"mt-4",children:a.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1.4fr_1fr]",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"grid gap-2 sm:grid-cols-4",children:[a.jsx(La,{label:"Rows",value:Je(k.rows)}),a.jsx(La,{label:"Quality",value:_p(k.quality)}),a.jsx(La,{label:"Warnings",value:Je(k.warnings)}),a.jsx(La,{label:"Errors",value:Je(k.errors)})]}),a.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-muted-foreground sm:grid-cols-2",children:[a.jsx(mo,{label:"Output",value:e.outputName??"Output not available"}),a.jsx(mo,{label:"Config",value:e.configLabel}),a.jsx(mo,{label:"Trigger",value:e.triggerLabel}),a.jsx(mo,{label:"Engine",value:e.engineLabel}),a.jsx(mo,{label:"Region",value:e.regionLabel}),a.jsx(mo,{label:"Owner",value:e.ownerLabel})]})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-background p-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Quick issues"}),a.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-muted-foreground",children:[a.jsx("li",{className:"rounded-lg border border-border bg-card px-2 py-2",children:S}),a.jsx("li",{className:"rounded-lg border border-border bg-card px-2 py-2",children:j}),a.jsxs("li",{className:"rounded-lg border border-border bg-card px-2 py-2",children:["Notes: ",e.notes??"No notes captured"]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[a.jsx(Te,{size:"sm",variant:"secondary",children:"View logs"}),a.jsx(Te,{size:"sm",variant:"ghost",children:"Open output"})]})]})]})}),a.jsx(za,{value:"metrics",className:"mt-4",children:a.jsx(Lz,{metrics:s,loading:i,error:l})}),a.jsx(za,{value:"fields",className:"mt-4",children:a.jsx(Uz,{fields:u,loading:d,error:m})}),a.jsx(za,{value:"columns",className:"mt-4",children:a.jsx($z,{columns:g,loading:x,error:b})})]})]})}function Lz({metrics:e,loading:t,error:s}){if(t)return a.jsx(ds,{title:"Loading metrics",description:"Fetching run metrics and validation summary."});if(s)return a.jsx(ds,{title:"Unable to load metrics",description:"Refresh the page or try again later."});if(!e)return a.jsx(ds,{title:"Metrics not available yet",description:"Metrics appear after the run completes and the engine summary is captured."});const i=e1(e),l=[{label:"Outcome",value:e.evaluation_outcome??""},{label:"Findings total",value:Je(e.evaluation_findings_total)},{label:"Findings info",value:Je(e.evaluation_findings_info)},{label:"Findings warning",value:Je(e.evaluation_findings_warning)},{label:"Findings error",value:Je(e.evaluation_findings_error)}],u=[{label:"Issues total",value:Je(e.validation_issues_total)},{label:"Info",value:Je(e.validation_issues_info)},{label:"Warnings",value:Je(e.validation_issues_warning)},{label:"Errors",value:Je(e.validation_issues_error)},{label:"Max severity",value:e.validation_max_severity??""}],d=[{label:"Workbooks",value:Je(e.workbook_count)},{label:"Sheets",value:Je(e.sheet_count)},{label:"Tables",value:Je(e.table_count)},{label:"Rows",value:Je(e.row_count_total)},{label:"Empty rows",value:Je(e.row_count_empty)},{label:"Columns",value:Je(e.column_count_total)},{label:"Mapped columns",value:Je(e.column_count_mapped)},{label:"Ambiguous columns",value:Je(e.column_count_ambiguous)},{label:"Unmapped columns",value:Je(e.column_count_unmapped)},{label:"Passthrough columns",value:Je(e.column_count_passthrough)},{label:"Fields mapped",value:`${Je(e.field_count_mapped)} / ${Je(e.field_count_expected)}`},{label:"Cells non-empty",value:Je(e.cell_count_non_empty)},{label:"Cells total",value:Je(e.cell_count_total)}];return a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx(La,{label:"Evaluation",value:e.evaluation_outcome??""}),a.jsx(La,{label:"Validation",value:e.validation_max_severity??""}),a.jsx(La,{label:"Rows",value:Je(e.row_count_total)}),a.jsx(La,{label:"Field coverage",value:_p(i)})]}),a.jsxs("div",{className:"grid gap-3 lg:grid-cols-[1.2fr_1fr]",children:[a.jsx(em,{title:"Validation issues",items:u}),a.jsx(em,{title:"Evaluation findings",items:l})]}),a.jsx(em,{title:"Structure and volume",items:d})]})}function Uz({fields:e,loading:t,error:s}){if(t)return a.jsx(ds,{title:"Loading field mappings",description:"Fetching per-field mapping coverage."});if(s)return a.jsx(ds,{title:"Unable to load field mappings",description:"Refresh the page or try again later."});if(!e)return a.jsx(ds,{title:"Field mappings not available",description:"Field summaries appear once the run metrics are computed."});if(e.length===0)return a.jsx(ds,{title:"No field mappings",description:"No fields were detected for this run."});const i=e.filter(d=>d.mapped).length,l=e.length-i,u=e.length>0?Math.round(i/e.length*100):null;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[a.jsx(xo,{label:"Total fields",value:Je(e.length)}),a.jsx(xo,{label:"Mapped",value:Je(i)}),a.jsx(xo,{label:"Unmapped",value:Je(l)}),a.jsx(xo,{label:"Coverage",value:_p(u)})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("div",{className:"min-w-[720px]",children:[a.jsxs("div",{className:"grid grid-cols-[1.6fr_120px_140px_120px_120px] border-b border-border bg-muted/40 px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("span",{children:"Field"}),a.jsx("span",{children:"Status"}),a.jsx("span",{children:"Best score"}),a.jsx("span",{children:"Tables"}),a.jsx("span",{children:"Columns"})]}),e.map(d=>a.jsx("div",{className:"border-b border-border/70 px-4 py-3",children:a.jsxs("div",{className:"grid grid-cols-[1.6fr_120px_140px_120px_120px] items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:d.label??d.field}),a.jsx("p",{className:"text-xs text-muted-foreground",children:d.field})]}),a.jsx(Bz,{mapped:d.mapped}),a.jsx("span",{className:"text-xs text-foreground",children:Jj(d.best_mapping_score)}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Je(d.occurrences_tables)}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Je(d.occurrences_columns)})]})},d.field))]})})]})}function $z({columns:e,loading:t,error:s}){if(t)return a.jsx(ds,{title:"Loading columns",description:"Fetching detected column headers."});if(s)return a.jsx(ds,{title:"Unable to load columns",description:"Refresh the page or try again later."});if(!e)return a.jsx(ds,{title:"Column mappings not available",description:"Column details appear once the run metrics are computed."});if(e.length===0)return a.jsx(ds,{title:"No columns",description:"No columns were detected for this run."});const i=e.reduce((l,u)=>{const d=(u.mapping_status||"unknown").toLowerCase();return l.total+=1,l[d]=(l[d]??0)+1,l},{total:0});return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[a.jsx(xo,{label:"Total columns",value:Je(i.total)}),Object.entries(t1).filter(([l])=>i[l]).map(([l,u])=>a.jsx(xo,{label:u.label,value:Je(i[l])},l))]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("div",{className:"min-w-[860px]",children:[a.jsxs("div",{className:"grid grid-cols-[1.5fr_1.4fr_140px_140px_120px_120px] border-b border-border bg-muted/40 px-4 py-3 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("span",{children:"Location"}),a.jsx("span",{children:"Header"}),a.jsx("span",{children:"Status"}),a.jsx("span",{children:"Mapped field"}),a.jsx("span",{children:"Score"}),a.jsx("span",{children:"Non-empty"})]}),e.map((l,u)=>{const d=l.sheet_name??`Sheet ${l.sheet_index+1}`,m=`Table ${l.table_index+1}`,g=l.workbook_name??`Workbook ${l.workbook_index+1}`,x=l.header_raw??l.header_normalized??"",b=l.header_normalized,v=l.mapped_field??"";return a.jsx("div",{className:"border-b border-border/70 px-4 py-3",children:a.jsxs("div",{className:"grid grid-cols-[1.5fr_1.4fr_140px_140px_120px_120px] items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:d}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[g," / ",m]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:x}),b&&b!==x?a.jsx("p",{className:"text-xs text-muted-foreground",children:b}):null]}),a.jsx(qz,{status:l.mapping_status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:v}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Jj(l.mapping_score)}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Je(l.non_empty_cells)})]})},`${l.workbook_index}-${l.sheet_index}-${l.table_index}-${l.column_index}-${u}`)})]})})]})}function La({label:e,value:t}){return a.jsxs("div",{className:"rounded-xl border border-border bg-background px-3 py-2",children:[a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:e}),a.jsx("p",{className:"mt-1 text-sm font-semibold text-foreground",children:t})]})}function mo({label:e,value:t}){return a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border bg-background px-3 py-2",children:[a.jsx("span",{children:e}),a.jsx("span",{className:"text-foreground",children:t})]})}function em({title:e,items:t}){return a.jsxs("div",{className:"rounded-xl border border-border bg-background p-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:t.map(s=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/70 bg-card px-3 py-2 text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:s.label}),a.jsx("span",{className:"text-foreground",children:s.value})]},s.label))})]})}function xo({label:e,value:t}){return a.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-border bg-background px-3 py-1",children:[a.jsx("span",{children:e}),a.jsx("span",{className:"font-semibold text-foreground",children:t})]})}function Bz({mapped:e}){return a.jsx("span",{className:re("inline-flex items-center justify-center rounded-full px-2 py-1 text-[11px] font-semibold",e?"bg-success-100 text-success-700":"bg-muted text-muted-foreground"),children:e?"Mapped":"Unmapped"})}const t1={mapped:{label:"Mapped",className:"bg-success-100 text-success-700"},ambiguous:{label:"Ambiguous",className:"bg-warning-100 text-warning-700"},unmapped:{label:"Unmapped",className:"bg-muted text-muted-foreground"},passthrough:{label:"Passthrough",className:"bg-info-100 text-info-700"}};function qz({status:e}){const t=e?.toLowerCase?.()??"unknown",s=t1[t];return a.jsx("span",{className:re("inline-flex items-center justify-center rounded-full px-2 py-1 text-[11px] font-semibold",s?s.className:"bg-muted text-muted-foreground"),children:s?s.label:e||"Unknown"})}function wu({value:e,label:t,active:s}){return a.jsx(Dl,{value:e,className:re("rounded-full border px-3 py-1 text-xs font-semibold transition",s?"border-transparent bg-brand-600 text-on-brand":"border-border bg-background text-muted-foreground"),children:t})}function ds({title:e,description:t}){return a.jsxs("div",{className:"rounded-xl border border-dashed border-border bg-background px-4 py-4",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:e}),a.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:t})]})}const Fz="button, a, input, select, textarea, [role='button'], [role='menuitem'], [data-ignore-row-click='true']";function Pz(e){return e instanceof Element?!!e.closest(Fz):!1}function Iz({runs:e,activeId:t,onSelect:s,onNavigate:i,expandedId:l,expandedContent:u}){const d=h.useRef(null),m=h.useRef(new Map);h.useEffect(()=>{if(!t)return;const x=d.current,b=m.current.get(t);if(!x||!b)return;const v=b.offsetTop-x.offsetTop;x.scrollTo({top:Math.max(0,v)})},[t]);const g=x=>{if(!i||x.target?.closest("input, textarea, select, button, a, [role='button'], [role='menuitem']")||e.length===0||x.key!=="ArrowDown"&&x.key!=="ArrowUp")return;x.preventDefault();const v=e.findIndex(k=>k.id===t);if(v<0){i(e[0].id);return}const y=x.key==="ArrowDown"?Math.min(e.length-1,v+1):Math.max(0,v-1);i(e[y].id)};return a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col bg-card",children:[a.jsx("div",{className:"shrink-0 border-b border-border bg-background/40 px-6 py-2 text-[11px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:a.jsxs("div",{className:"grid grid-cols-[120px_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.8fr)_minmax(0,0.8fr)_minmax(0,0.6fr)_minmax(0,0.8fr)_minmax(0,0.6fr)] items-center gap-3",children:[a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Input"}),a.jsx("div",{children:"Config"}),a.jsx("div",{children:"Started"}),a.jsx("div",{className:"text-right",children:"Duration"}),a.jsx("div",{className:"text-right",children:"Result"}),a.jsx("div",{className:"text-right",children:"Rows"}),a.jsx("div",{children:"Owner"}),a.jsx("div",{className:"text-right",children:"Actions"})]})}),a.jsx("div",{ref:d,className:"flex-1 min-h-0 overflow-y-auto px-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",tabIndex:0,role:"listbox","aria-label":"Runs",onKeyDown:g,children:a.jsx("div",{className:"flex flex-col",children:e.map(x=>{const b=Cm[x.status],v=t===x.id,y=!!(u&&l===x.id),k=`runs-preview-${x.id}`,S=j=>{j.key!=="Enter"&&j.key!==" "||j.currentTarget===j.target&&(j.preventDefault(),s(x.id))};return a.jsxs("div",{ref:j=>{j?m.current.set(x.id,j):m.current.delete(x.id)},className:"border-b border-border/70",children:[a.jsxs("div",{role:"option",tabIndex:0,onKeyDown:S,onClick:j=>{Pz(j.target)||s(x.id)},className:re("grid cursor-pointer grid-cols-[120px_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,0.8fr)_minmax(0,0.8fr)_minmax(0,0.6fr)_minmax(0,0.8fr)_minmax(0,0.6fr)] items-center gap-3 py-3 text-left text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",v?"bg-brand-50 dark:bg-brand-500/20":"hover:bg-background dark:hover:bg-muted/40"),"aria-selected":v,"aria-expanded":y,"aria-controls":y?k:void 0,children:[a.jsxs("div",{className:"inline-flex items-center gap-2 text-xs font-semibold text-foreground",children:[a.jsx("span",{className:re("h-2.5 w-2.5 rounded-full",b.dotClass)}),b.label]}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate font-semibold text-foreground",children:x.inputName}),a.jsx("p",{className:"truncate text-[11px] text-muted-foreground",children:x.id})]}),a.jsx("span",{className:"truncate text-xs text-foreground",children:x.configLabel}),a.jsx("span",{className:"text-xs text-muted-foreground",children:x.startedAtLabel}),a.jsx("span",{className:"text-right text-sm text-muted-foreground",children:x.durationLabel}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Hz,{run:x})}),a.jsx("span",{className:"text-right text-sm text-foreground",children:Je(x.rows)}),a.jsx("span",{className:"truncate text-sm text-foreground",children:x.ownerLabel}),a.jsxs("div",{className:"flex items-center justify-end gap-2","data-ignore-row-click":!0,children:[a.jsx(l0,{label:"View logs",href:x.raw.links?.logs??null,icon:a.jsx(Vz,{})}),a.jsx(l0,{label:x.raw.output?.ready?"Open output":"Output not ready",href:x.raw.output?.ready?x.raw.links?.output_download??x.raw.links?.output??null:null,icon:a.jsx(Zz,{})})]})]}),y?a.jsx("div",{id:k,role:"region","aria-label":`Run details for ${x.inputName}`,className:"bg-background/60 px-6 pb-4 pt-2",children:a.jsx("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:u})}):null]},x.id)})})})]})}function Hz({run:e}){const t=Ez(e),s=t==="",i=t==="Clean",l=typeof e.errors=="number"&&e.errors>0?"bg-danger-100 text-danger-700":typeof e.warnings=="number"&&e.warnings>0?"bg-warning-100 text-warning-700":i?"bg-success-100 text-success-700":"bg-muted text-muted-foreground";return a.jsx("span",{className:re("inline-flex items-center justify-center rounded-full px-2 py-1 text-[11px] font-semibold",l,s?"opacity-70":""),children:t})}function l0({label:e,href:t,icon:s}){return t?a.jsx("a",{href:t,onClick:i=>i.stopPropagation(),target:"_blank",rel:"noreferrer","aria-label":e,title:e,className:re("inline-flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-card text-muted-foreground transition","hover:bg-background hover:text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background"),children:s}):a.jsx("button",{type:"button",onClick:i=>i.stopPropagation(),disabled:!0,"aria-label":e,title:e,className:re("inline-flex h-8 w-8 items-center justify-center rounded-lg border border-border bg-card text-muted-foreground/60","cursor-not-allowed"),children:s})}function Vz(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M3 3.5h10v9H3z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"}),a.jsx("path",{d:"M5 6h6M5 8.5h6M5 11h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Zz(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[a.jsx("path",{d:"M8 3v7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M5.5 7.5 8 10l2.5-2.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),a.jsx("path",{d:"M3 12.5h10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}const Wz=50,Ar={root:()=>["runs"],workspace:e=>[...Ar.root(),e],list:(e,t)=>[...Ar.workspace(e),"list",t],run:e=>[...Ar.root(),"run",e],metrics:e=>[...Ar.run(e),"metrics"],fields:e=>[...Ar.run(e),"fields"],columns:(e,t)=>[...Ar.run(e),"columns",t??{}]};async function Qz(e,t,s){const{data:i}=await Ie.GET("/api/v1/workspaces/{workspace_id}/runs",{params:{path:{workspace_id:e},query:t},signal:s});if(!i)throw new Error("Expected run page payload.");return i}async function Kz(e,t){try{const{data:s}=await Ie.GET("/api/v1/runs/{run_id}/metrics",{params:{path:{run_id:e}},signal:t});if(!s)throw new Error("Expected run metrics payload.");return s}catch(s){if(s instanceof Jt&&s.status===404)return null;throw s}}async function Gz(e,t){try{const{data:s}=await Ie.GET("/api/v1/runs/{run_id}/fields",{params:{path:{run_id:e}},signal:t});if(!s)throw new Error("Expected run fields payload.");return s}catch(s){if(s instanceof Jt&&s.status===404)return null;throw s}}async function Yz(e,t,s){try{const{data:i}=await Ie.GET("/api/v1/runs/{run_id}/columns",{params:{path:{run_id:e},query:t??void 0},signal:s});if(!i)throw new Error("Expected run columns payload.");return i}catch(i){if(i instanceof Jt&&i.status===404)return null;throw i}}function Xz(e){const t=e.input?.filename??e.input?.document_id??`Run ${e.id}`,s=e.output?.filename??null,i=Cz(e.started_at??e.created_at),l=Nz(e.duration_seconds??null,e.status),u=e.config_version??e.configuration_id??"";return{id:e.id,status:e.status,inputName:t,outputName:s,configLabel:u,startedAtLabel:i,durationLabel:l,rows:null,warnings:null,errors:null,quality:null,ownerLabel:"",triggerLabel:"",engineLabel:e.engine_version??"",regionLabel:"",notes:e.failure_message??null,raw:e}}function Jz({workspaceId:e,initialFilters:t}){const[s,i]=h.useState(t??cs),[l,u]=h.useState(null),[d,m]=h.useState(!1),g=h.useMemo(()=>{const A=Rz(s.dateRange);return{page:1,page_size:Wz,include_total:!0,q:s.search||void 0,sort:"-created_at",...A}},[s.dateRange,s.search]),x=sn({queryKey:Ar.list(e,g),queryFn:({signal:A})=>Qz(e,g,A),enabled:!!e,staleTime:15e3}),b=h.useMemo(()=>(x.data?.items??[]).map(A=>Xz(A)),[x.data?.items]),v=h.useMemo(()=>Az(b,s),[s,b]),y=h.useMemo(()=>Dz(b),[b]),k=h.useMemo(()=>Array.from(new Set(b.map(A=>A.configLabel).filter(A=>A&&A!==""))).sort(),[b]),S=h.useMemo(()=>Array.from(new Set(b.map(A=>A.ownerLabel).filter(A=>A&&A!==""))).sort(),[b]),j=h.useMemo(()=>b.some(A=>A.warnings!==null||A.errors!==null),[b]),N=h.useMemo(()=>l?b.find(A=>A.id===l)??null:null,[l,b]),M=!!(l&&d),_=d&&N?N.status==="running"||N.status==="queued":!1,R=sn({queryKey:l?Ar.metrics(l):[...Ar.root(),"metrics","none"],queryFn:({signal:A})=>l?Kz(l,A):Promise.resolve(null),enabled:M,staleTime:3e4,refetchInterval:_?1e4:!1}),q=sn({queryKey:l?Ar.fields(l):[...Ar.root(),"fields","none"],queryFn:({signal:A})=>l?Gz(l,A):Promise.resolve(null),enabled:M,staleTime:3e4,refetchInterval:_?1e4:!1}),$=sn({queryKey:l?Ar.columns(l,null):[...Ar.root(),"columns","none"],queryFn:({signal:A})=>l?Yz(l,null,A):Promise.resolve(null),enabled:M,staleTime:3e4,refetchInterval:_?1e4:!1}),I=h.useCallback(A=>{i(X=>({...X,...A}))},[]),D=h.useCallback(A=>{i(A)},[]),C=h.useCallback(()=>{i(cs)},[]),L=h.useCallback(A=>{u(A),m(!0)},[]),V=h.useCallback(()=>{m(!1)},[]),K=h.useCallback(A=>{if(d&&l===A){m(!1);return}u(A),m(!0)},[l,d]);return{state:{filters:s,activeId:l,previewOpen:d},derived:{runs:b,visibleRuns:v,counts:y,configOptions:k,ownerOptions:S,activeRun:N,supportsResultFilters:j,isLoading:x.isLoading,isError:x.isError,totalCount:x.data?.total??x.data?.items?.length??0,metrics:R.data??null,metricsLoading:R.isLoading,metricsError:R.isError,fields:q.data??null,fieldsLoading:q.isLoading,fieldsError:q.isError,columns:$.data??null,columnsLoading:$.isLoading,columnsError:$.isError},actions:{updateFilters:I,setFilters:D,resetFilters:C,openPreview:L,closePreview:V,togglePreview:K,setActiveId:u,refetch:x.refetch}}}function e5(){const{workspace:e}=_s(),t=Fn(),s=Zt(),i=h.useMemo(()=>t5(t.search),[t.search]),l=h.useMemo(()=>new URLSearchParams(t.search).get("run"),[t.search]),u=Jz({workspaceId:e.id,initialFilters:i}),d=u.state.previewOpen?u.state.activeId:null;h.useEffect(()=>{r5(u.state.filters,i)||u.actions.setFilters(i)},[u.actions,u.state.filters,i]),h.useEffect(()=>{if(!l){u.state.previewOpen&&u.actions.closePreview();return}(u.state.activeId!==l||!u.state.previewOpen)&&u.actions.openPreview(l)},[u.actions,u.state.activeId,u.state.previewOpen,l]);const m=h.useCallback((y,k)=>{const S=n5(y,k),j=`${t.pathname}${S?`?${S}`:""}${t.hash??""}`,N=`${t.pathname}${t.search}${t.hash??""}`;j!==N&&s(j,{replace:!0})},[t.hash,t.pathname,t.search,s]),g=h.useCallback(()=>{u.actions.closePreview(),m(u.state.filters,null)},[u.actions,u.state.filters,m]);h.useEffect(()=>{const y=k=>{if(k.key!=="Escape"||!u.state.previewOpen)return;const S=k.target;S&&(S.tagName==="INPUT"||S.tagName==="TEXTAREA"||S.isContentEditable)||g()};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[g,u.state.previewOpen]);const x=y=>{if(u.state.previewOpen&&u.state.activeId===y){g();return}u.actions.openPreview(y),m(u.state.filters,y)},b=y=>{const k={...u.state.filters,...y};u.actions.setFilters(k),m(k,u.state.previewOpen?u.state.activeId:null)},v=()=>{u.actions.resetFilters(),m(cs,u.state.previewOpen?u.state.activeId:null)};return a.jsxs("div",{className:"runs flex min-h-0 flex-1 flex-col bg-background text-foreground",children:[a.jsx(jz,{onExport:()=>{}}),a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:a.jsxs("section",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:[a.jsx(Oz,{counts:u.derived.counts,rangeLabel:s5(u.state.filters.dateRange)}),a.jsx(wz,{filters:u.state.filters,configOptions:u.derived.configOptions,ownerOptions:u.derived.ownerOptions,resultEnabled:u.derived.supportsResultFilters,showingCount:u.derived.visibleRuns.length,totalCount:u.derived.totalCount,onChange:b,onReset:v}),u.derived.isLoading?a.jsx("div",{className:"flex-1 bg-card px-6 py-10",children:a.jsx(wt,{title:"Loading runs",variant:"loading"})}):u.derived.isError?a.jsx("div",{className:"flex-1 bg-card px-6 py-10",children:a.jsx(wt,{title:"Unable to load runs",description:"Refresh the page or try again later.",variant:"error"})}):u.derived.visibleRuns.length===0?a.jsx("div",{className:"flex-1 bg-card px-6 py-10",children:a.jsx(wt,{title:"No runs found",description:"Try adjusting filters or clearing the search.",variant:"empty"})}):a.jsx(Iz,{runs:u.derived.visibleRuns,activeId:d,onSelect:x,onNavigate:u.actions.setActiveId,expandedId:d,expandedContent:u.state.previewOpen&&u.derived.activeRun?a.jsx(zz,{run:u.derived.activeRun,metrics:u.derived.metrics,metricsLoading:u.derived.metricsLoading,metricsError:u.derived.metricsError,fields:u.derived.fields,fieldsLoading:u.derived.fieldsLoading,fieldsError:u.derived.fieldsError,columns:u.derived.columns,columnsLoading:u.derived.columnsLoading,columnsError:u.derived.columnsError,onClose:g}):null})]})})]})}function t5(e){const t=new URLSearchParams(e),s=t.get("q")??cs.search,i=_z(t.get("status")),l=Mz(t.get("result")),u=Tz(t.get("range")),d=t.get("config")??cs.config,m=t.get("owner")??cs.owner;return{search:s,status:i,result:l,dateRange:u,config:d,owner:m}}function n5(e,t){const s=new URLSearchParams;return e.search&&s.set("q",e.search),e.status!==cs.status&&s.set("status",e.status),e.result!==cs.result&&s.set("result",e.result),e.dateRange!==cs.dateRange&&s.set("range",e.dateRange),e.config!==cs.config&&s.set("config",e.config),e.owner!==cs.owner&&s.set("owner",e.owner),t&&s.set("run",t),s.toString()}function r5(e,t){return e.search===t.search&&e.status===t.status&&e.result===t.result&&e.dateRange===t.dateRange&&e.config===t.config&&e.owner===t.owner}function s5(e){return Xj.find(t=>t.value===e)?.label??"Selected range"}function a5(e){const t=Tt();return En({mutationFn:s=>bj(e,s),async onSuccess(){await t.invalidateQueries({queryKey:fn.root(e)})}})}function _u({status:e}){const t=e.toLowerCase(),s=t==="active"?"Active":t==="draft"?"Draft":t==="archived"?"Archived":e,i=t==="active"?"bg-success-100 text-success-700":t==="draft"?"bg-warning-100 text-warning-700":"bg-muted text-foreground";return a.jsx("span",{className:re("rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide",i),title:s,children:s})}const i5="Default template",vl=(e,t)=>`/workspaces/${e}/config-builder/${encodeURIComponent(t)}`;function o5(){const{workspace:e}=_s(),t=Zt(),{notifyToast:s}=xd(),i=h.useMemo(()=>_j(e.id),[e.id]),l=h.useMemo(()=>pp(e.id),[e.id]),u=fp({workspaceId:e.id}),d=a5(e.id),m=y4(e.id),g=hp(e.id),x=yj(e.id),b=mp(e.id),[v,y]=h.useState(()=>`${e.name} Config`),[k,S]=h.useState(null),[j,N]=h.useState(()=>`${e.name} Import`),[M,_]=h.useState(null),[R,q]=h.useState(null),[$,I]=h.useState(()=>l.get()),D=h.useRef(null),C=h.useRef(null),L=h.useMemo(()=>(u.data?.items??[]).filter(he=>!("deleted_at"in he&&he.deleted_at)),[u.data]),V=h.useMemo(()=>{const he=new Map;for(const Ae of L)he.set(Ae.id,yo(Ae.status));return he},[L]),K=h.useMemo(()=>{for(const he of L)if(V.get(he.id)==="active")return he;return null},[L,V]),A=h.useMemo(()=>L.filter(he=>V.get(he.id)==="draft").sort((he,Ae)=>Py(he.updated_at,Ae.updated_at)),[L,V]),X=h.useMemo(()=>L.filter(he=>V.get(he.id)==="archived").sort((he,Ae)=>Py(he.updated_at,Ae.updated_at)),[L,V]),fe=h.useMemo(()=>L.find(he=>he.id===$?.configId)??null,[L,$]),Se=h.useCallback(he=>{I(gp(l,he))},[l]);h.useEffect(()=>{I(l.get())},[l]),h.useEffect(()=>{const he=C.current,Ae=he?.id!==e.id,ot=he?.name!==e.name;if(!(!Ae&&!ot)){if(C.current={id:e.id,name:e.name},Ae){y(`${e.name} Config`),S(null),N(`${e.name} Import`),_(null),q(null),D.current&&(D.current.value="");return}ot&&(y(_n=>_n===`${he?.name??""} Config`?`${e.name} Config`:_n),N(_n=>_n===`${he?.name??""} Import`?`${e.name} Import`:_n))}},[e.id,e.name]),h.useEffect(()=>{if(typeof window>"u")return;const he=Ae=>{if(!(Ae.storageArea!==window.localStorage||Ae.key!==i))try{I(Ae.newValue?JSON.parse(Ae.newValue):null)}catch{I(null)}};return window.addEventListener("storage",he),()=>window.removeEventListener("storage",he)},[i]),h.useEffect(()=>{$?.configId&&(L.some(he=>he.id===$.configId)||Se(null))},[L,$?.configId,Se]);const z=h.useCallback(he=>{Se(he),t(vl(e.id,he))},[t,Se,e.id]),H=h.useCallback(he=>{Se(he),t(`${vl(e.id,he)}/editor`)},[t,Se,e.id]),[ae,ge]=h.useState(null),ce=h.useMemo(()=>ae?L.find(he=>he.id===ae.configId)??null:null,[L,ae]),[T,G]=h.useState(null),ue=h.useCallback(async he=>{G(he.id);try{const Ae=await dp(e.id,he.id),ot=Ae.filename??`${he.id}.zip`,_n=URL.createObjectURL(Ae.blob),at=document.createElement("a");at.href=_n,at.download=ot,at.click(),URL.revokeObjectURL(_n),s({title:`Exported ${ot}`,intent:"success",duration:4e3})}catch(Ae){const ot=Ae instanceof Error?Ae.message:"Unable to export configuration.";s({title:ot,intent:"danger",duration:6e3})}finally{G(Ae=>Ae===he.id?null:Ae)}},[s,e.id]),[Y,ee]=h.useState(null),Z=h.useMemo(()=>Y?L.find(he=>he.id===Y)??null:null,[L,Y]),te=h.useMemo(()=>new Set(L.map(he=>he.display_name.trim().toLowerCase())),[L]),[Q,se]=h.useState(""),[ke,Me]=h.useState(null),We=h.useCallback(he=>{b.reset(),Me(null),se(xp(he.display_name,te)),ee(he.id)},[b,te]),[st,Ve]=h.useState(null),$e=h.useMemo(()=>st?L.find(he=>he.id===st)??null:null,[st,L]),[gt,xt]=h.useState(null),Oe=h.useMemo(()=>gt?L.find(he=>he.id===gt)??null:null,[L,gt]),Qe=Oe?.id??null,[O,U]=h.useState(null);h.useEffect(()=>{if(!Qe){U(null);return}let he=!1;return U({stage:"checking"}),up(e.id,Qe).then(Ae=>{if(!he){if(Array.isArray(Ae.issues)&&Ae.issues.length>0){U({stage:"issues",issues:Ae.issues});return}U({stage:"confirm"})}}).catch(Ae=>{if(he)return;const ot=Ae instanceof Error?Ae.message:"Unable to validate configuration.";U({stage:"error",message:ot})}),()=>{he=!0}},[Qe,e.id]);const ne=h.useCallback(he=>{g.reset(),U({stage:"checking"}),xt(he.id)},[g]),be=h.useCallback(()=>{xt(null),U(null)},[]),Ne=h.useCallback(()=>{ee(null),Me(null)},[]),Ce=h.useCallback(()=>{Ve(null)},[]),ze=h.useCallback(()=>{Oe&&g.mutate({configurationId:Oe.id},{onSuccess(){s({title:"Configuration is now active.",intent:"success",duration:4e3}),be()},onError(he){s({title:he instanceof Error?he.message:"Unable to make configuration active.",intent:"danger",duration:6e3})}})},[be,g,Oe,s]),ye=h.useCallback(()=>{$e&&x.mutate({configurationId:$e.id},{onSuccess(){s({title:"Active configuration archived.",intent:"success",duration:4e3}),Ce()},onError(he){s({title:he instanceof Error?he.message:"Unable to archive configuration.",intent:"danger",duration:6e3})}})},[x,$e,Ce,s]),_e=h.useCallback(()=>{if(!Z)return;const he=Q.trim();if(!he){Me("Enter a name for the new draft configuration.");return}Me(null),b.mutate({sourceConfigurationId:Z.id,displayName:he},{onSuccess(Ae){Se(Ae.id),s({title:"Draft created.",intent:"success",duration:3500}),Ne(),t(`${vl(e.id,Ae.id)}/editor`)},onError(Ae){const ot=Ae instanceof Error?Ae.message:"Unable to duplicate configuration.";Me(ot)}})},[Ne,b,Q,Z,t,s,Se,e.id]),Be=h.useCallback((he,Ae)=>{he.preventDefault(),he.stopPropagation();const ot=he.currentTarget.getBoundingClientRect();ge({configId:Ae,x:ot.right+8,y:ot.bottom})},[]),ht=h.useMemo(()=>{if(!ce)return[];const he=V.get(ce.id)??yo(ce.status),Ae=T===ce.id,ot=[{id:"open-editor",label:"Open editor",onSelect:()=>H(ce.id)},{id:"export",label:Ae?"Exporting":"Export",onSelect:()=>{ue(ce)},disabled:Ae},{id:"duplicate",label:"Duplicate to edit",onSelect:()=>We(ce),dividerAbove:!0}];return he==="active"&&ot.push({id:"archive",label:"Archive",onSelect:()=>Ve(ce.id),danger:!0,dividerAbove:!0}),ot},[ce,T,ue,H,V,We]),it=h.useCallback(he=>{q(null),_(he.target.files?.[0]??null),he.target.value=""},[]),bn=he=>{he.preventDefault();const Ae=v.trim();if(!Ae){S("Enter a display name for the configuration.");return}S(null),d.mutate({displayName:Ae,source:{type:"template"}},{onSuccess(ot){Se(ot.id),t(vl(e.id,ot.id))}})},Dt=he=>{he.preventDefault();const Ae=j.trim();if(!Ae){q("Enter a display name for the imported configuration.");return}if(!M){q("Select a .zip file to import.");return}q(null),m.mutate({displayName:Ae,file:M},{onSuccess(ot){Se(ot.id),_(null),u.refetch(),t(vl(e.id,ot.id))},onError(ot){q(ot instanceof Error?ot.message:"Unable to import configuration.")}})},jt=k??(d.error instanceof Error?d.error.message:null),ut=v.trim().length>0&&!d.isPending,Ut=j.trim().length>0&&!!M&&!m.isPending,In=he=>a.jsx(Mt,{label:"Template",children:a.jsx(yt,{value:i5,readOnly:!0,disabled:he})});return u.isLoading?a.jsx(wt,{variant:"loading",title:"Loading configurations",description:"Fetching workspace configurations"}):u.isError?a.jsx(wt,{variant:"error",title:"Unable to load configurations",description:"Try refreshing the page."}):L.length===0?a.jsx(wt,{className:"mx-auto w-full max-w-xl",title:"Create your first configuration",description:"Copy a starter template into this workspace to begin editing detectors, hooks, and manifests.",action:a.jsxs("div",{className:"space-y-6 text-left",children:[a.jsxs("form",{onSubmit:bn,className:"space-y-4 rounded-xl border border-border bg-card p-4 shadow-sm",children:[a.jsx(Mt,{label:"Configuration name",required:!0,children:a.jsx(yt,{value:v,onChange:he=>y(he.target.value),placeholder:"Membership normalization",disabled:d.isPending})}),In(d.isPending),jt?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:jt}):null,a.jsx(Te,{type:"submit",className:"w-full",disabled:!ut,isLoading:d.isPending,children:"Create from template"})]}),a.jsxs("div",{className:"rounded-xl border border-border bg-card p-4 shadow-sm",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-base font-semibold text-foreground",children:"Import configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),a.jsxs("form",{onSubmit:Dt,className:"mt-3 space-y-4",children:[a.jsx(Mt,{label:"Configuration name",required:!0,children:a.jsx(yt,{value:j,onChange:he=>N(he.target.value),placeholder:"Imported configuration",disabled:m.isPending})}),a.jsxs(Mt,{label:"Archive (.zip)",required:!0,children:[a.jsx(yt,{type:"file",ref:D,accept:".zip",onChange:it,disabled:m.isPending}),M?a.jsx("p",{className:"mt-1 text-xs text-muted-foreground","aria-live":"polite",children:M.name}):null]}),R?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:R}):null,a.jsx(Te,{type:"submit",className:"w-full",disabled:!Ut,isLoading:m.isPending,children:"Import archive"})]})]})]})}):a.jsxs("div",{className:"grid gap-6 p-4 lg:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",children:[a.jsxs("section",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Configurations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage draft, active, and archived configurations for this workspace."})]}),fe?a.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>z(fe.id),children:"Resume last opened"}):null]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-xl border border-border",children:[a.jsx("div",{className:"border-b border-border px-4 py-3",children:a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Active configuration"})}),K?a.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-background",children:[a.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onClick:()=>z(K.id),children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:K.display_name}),a.jsx(_u,{status:K.status}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Used for extraction runs"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Updated ",tm(K.updated_at)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[a.jsx(Te,{size:"sm",onClick:he=>{he.stopPropagation(),We(K)},children:"Duplicate to edit"}),a.jsx(Te,{size:"sm",variant:"ghost",onClick:he=>Be(he,K.id),children:""})]})]}):a.jsxs("div",{className:"space-y-2 p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"No active configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Extraction runs will be blocked until you make a draft configuration active."})]})]}),a.jsxs("div",{className:"rounded-xl border border-border",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[a.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:["Drafts (",A.length,")"]}),A.length===0&&K?a.jsx("p",{className:"text-xs text-muted-foreground",children:"Duplicate Active to start editing."}):null]}),A.length?a.jsx("div",{className:"divide-y divide-border",children:A.map(he=>a.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-background",children:[a.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onClick:()=>z(he.id),children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:he.display_name}),a.jsx(_u,{status:he.status}),fe?.id===he.id?a.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-brand-600",children:"Last opened"}):null]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Updated ",tm(he.updated_at)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[a.jsx(Te,{size:"sm",variant:"secondary",onClick:Ae=>{Ae.stopPropagation(),ne(he)},children:"Make active"}),a.jsx(Te,{size:"sm",variant:"ghost",onClick:Ae=>Be(Ae,he.id),children:""})]})]},he.id))}):a.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No draft configurations."})]}),a.jsxs("div",{className:"rounded-xl border border-border",children:[a.jsx("div",{className:"border-b border-border px-4 py-3",children:a.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:["Archived (",X.length,")"]})}),X.length?a.jsx("div",{className:"divide-y divide-border",children:X.map(he=>a.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-background",children:[a.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background",onClick:()=>z(he.id),children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:he.display_name}),a.jsx(_u,{status:he.status})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Updated ",tm(he.updated_at)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[a.jsx(Te,{size:"sm",onClick:Ae=>{Ae.stopPropagation(),We(he)},children:"Duplicate to edit"}),a.jsx(Te,{size:"sm",variant:"ghost",onClick:Ae=>Be(Ae,he.id),children:""})]})]},he.id))}):a.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No archived configurations."})]})]})]}),a.jsxs("aside",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-sm",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"New configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Copy the starter template to begin editing detectors, hooks, and manifests."})]}),a.jsxs("form",{onSubmit:bn,className:"space-y-4",children:[a.jsx(Mt,{label:"Configuration name",required:!0,children:a.jsx(yt,{value:v,onChange:he=>y(he.target.value),placeholder:"Membership normalization",disabled:d.isPending})}),In(d.isPending),jt?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:jt}):null,a.jsx(Te,{type:"submit",className:"w-full",disabled:!ut,isLoading:d.isPending,children:"Create from template"})]}),a.jsxs("div",{className:"border-t border-border pt-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Import configuration"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),a.jsxs("form",{onSubmit:Dt,className:"mt-3 space-y-4",children:[a.jsx(Mt,{label:"Configuration name",required:!0,children:a.jsx(yt,{value:j,onChange:he=>N(he.target.value),placeholder:"Imported configuration",disabled:m.isPending})}),a.jsxs(Mt,{label:"Archive (.zip)",required:!0,children:[a.jsx(yt,{type:"file",ref:D,accept:".zip",onChange:it,disabled:m.isPending}),M?a.jsx("p",{className:"mt-1 text-xs text-muted-foreground","aria-live":"polite",children:M.name}):null]}),R?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:R}):null,a.jsx(Te,{type:"submit",className:"w-full",disabled:!Ut,isLoading:m.isPending,children:"Import archive"})]})]})]}),a.jsx(hs,{open:!!ae,position:ae?{x:ae.x,y:ae.y}:null,onClose:()=>ge(null),items:ht,appearance:"light"}),a.jsx(Lr,{open:!!Oe,title:O?.stage==="checking"?"Checking configuration":O?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:O?.stage==="checking"?"Running validation before activation.":O?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":K&&Oe?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${K.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:O?.stage==="issues"?"Open editor":O?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:be,onConfirm:()=>{if(!Oe){be();return}if(O?.stage==="issues"){be(),H(Oe.id);return}if(O?.stage==="error"){be();return}ze()},isConfirming:g.isPending,confirmDisabled:O?.stage==="checking"||g.isPending,children:O?.stage==="checking"?a.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-border border-t-brand-600","aria-hidden":"true"}),a.jsx("span",{children:"Validating"})]}):O?.stage==="issues"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Issues:"}),a.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-border bg-background p-3 text-xs text-foreground",children:O.issues.map(he=>a.jsxs("li",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:he.path}),a.jsx("p",{className:"text-muted-foreground",children:he.message})]},`${he.path}:${he.message}`))})]}):O?.stage==="error"?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:O.message}):null}),a.jsx(Lr,{open:!!$e,title:"Archive active configuration?",description:"This will leave the workspace with no active configuration. Extraction runs will be blocked until you make a draft active.",confirmLabel:"Archive",cancelLabel:"Cancel",tone:"danger",onCancel:Ce,onConfirm:ye,isConfirming:x.isPending,confirmDisabled:x.isPending,children:x.error?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:x.error instanceof Error?x.error.message:"Unable to archive configuration."}):null}),a.jsxs(Lr,{open:!!Z,title:"Duplicate configuration",description:Z?`Create a new draft based on ${Z.display_name}.`:void 0,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:Ne,onConfirm:_e,isConfirming:b.isPending,confirmDisabled:b.isPending||Q.trim().length===0,children:[a.jsx(Mt,{label:"New configuration name",required:!0,children:a.jsx(yt,{value:Q,onChange:he=>se(he.target.value),placeholder:"Copy of My Config",disabled:b.isPending})}),ke?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:ke}):null]})]})}function tm(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function l5({params:e}={}){const{workspace:t}=_s(),s=Zt(),{notifyToast:i}=xd(),l=e?.configId,u=h.useMemo(()=>pp(t.id),[t.id]),d=vj({workspaceId:t.id,configurationId:l}),m=fp({workspaceId:t.id}),g=d.data,x=g?.id??l??"",b=yo(g?.status),v=b==="draft";h.useEffect(()=>{!l||!g||gp(u,l)},[l,g,u]);const y=x?`/workspaces/${t.id}/config-builder/${encodeURIComponent(x)}`:"",k=h.useCallback(()=>{y&&s(`${y}/editor`)},[y,s]),S=h.useMemo(()=>{const Q=m.data?.items??[];for(const se of Q)if(yo(se.status)==="active")return se;return null},[m.data?.items]),j=h.useMemo(()=>{const Q=m.data?.items??[];return new Set(Q.map(se=>se.display_name.trim().toLowerCase()))},[m.data?.items]),[N,M]=h.useState(null),_=h.useCallback(Q=>{Q.preventDefault();const se=Q.currentTarget.getBoundingClientRect();M({x:se.right+8,y:se.bottom})},[]),[R,q]=h.useState(!1),$=h.useCallback(async()=>{if(g){q(!0);try{const Q=await dp(t.id,g.id),se=Q.filename??`${g.id}.zip`,ke=URL.createObjectURL(Q.blob),Me=document.createElement("a");Me.href=ke,Me.download=se,Me.click(),URL.revokeObjectURL(ke),i({title:`Exported ${se}`,intent:"success",duration:4e3})}catch(Q){const se=Q instanceof Error?Q.message:"Unable to export configuration.";i({title:se,intent:"danger",duration:6e3})}finally{q(!1)}}},[g,i,t.id]),I=hp(t.id),D=yj(t.id),C=mp(t.id),[L,V]=h.useState(!1),[K,A]=h.useState(null);h.useEffect(()=>{if(!L||!g||!v)return;let Q=!1;return A({stage:"checking"}),up(t.id,g.id).then(se=>{if(!Q){if(Array.isArray(se.issues)&&se.issues.length>0){A({stage:"issues",issues:se.issues});return}A({stage:"confirm"})}}).catch(se=>{if(Q)return;const ke=se instanceof Error?se.message:"Unable to validate configuration.";A({stage:"error",message:ke})}),()=>{Q=!0}},[g,v,L,t.id]);const X=h.useCallback(()=>{I.reset(),A({stage:"checking"}),V(!0)},[I]),[fe,Se]=h.useState(!1),[z,H]=h.useState(""),[ae,ge]=h.useState(null),ce=h.useCallback(()=>{g&&(C.reset(),ge(null),H(xp(g.display_name,j)),Se(!0))},[g,C,j]),[T,G]=h.useState(!1),ue=h.useCallback(()=>{D.reset(),G(!0)},[D]),Y=h.useMemo(()=>{const Q=[{id:"export",label:R?"Exporting":"Export",onSelect:()=>void $(),disabled:R},{id:"duplicate",label:"Duplicate to edit",onSelect:ce,dividerAbove:!0}];return b==="active"&&Q.push({id:"archive",label:"Archive",onSelect:ue,danger:!0,dividerAbove:!0}),Q},[R,$,ue,ce,b]),ee=h.useCallback(()=>{if(!g)return;const Q=z.trim();if(!Q){ge("Enter a name for the new draft configuration.");return}ge(null),C.mutate({sourceConfigurationId:g.id,displayName:Q},{onSuccess(se){i({title:"Draft created.",intent:"success",duration:3500}),Se(!1),s(`/workspaces/${t.id}/config-builder/${encodeURIComponent(se.id)}/editor`)},onError(se){ge(se instanceof Error?se.message:"Unable to duplicate configuration.")}})},[g,C,z,s,i,t.id]),Z=h.useCallback(()=>{g&&I.mutate({configurationId:g.id},{onSuccess(){i({title:"Configuration is now active.",intent:"success",duration:4e3}),V(!1),A(null)},onError(Q){i({title:Q instanceof Error?Q.message:"Unable to make configuration active.",intent:"danger",duration:6e3})}})},[g,I,i]),te=h.useCallback(()=>{g&&D.mutate({configurationId:g.id},{onSuccess(){i({title:"Active configuration archived.",intent:"success",duration:4e3}),G(!1)},onError(Q){i({title:Q instanceof Error?Q.message:"Unable to archive configuration.",intent:"danger",duration:6e3})}})},[D,g,i]);return l?d.isLoading?a.jsx(wt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details."}):d.isError?a.jsx(wt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page."}):g?a.jsxs("div",{className:"flex h-full flex-col gap-4 p-4",children:[a.jsxs("section",{className:"space-y-3 rounded-2xl border border-border bg-card p-6 shadow-sm",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Configuration"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("h1",{className:"text-xl font-semibold text-foreground",children:g.display_name}),a.jsx(_u,{status:g.status})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[v?a.jsx(Te,{variant:"secondary",onClick:X,children:"Make active"}):a.jsx(Te,{onClick:ce,children:"Duplicate to edit"}),a.jsx(Te,{variant:"ghost",onClick:k,children:"Open editor"}),a.jsx(Te,{variant:"ghost",size:"sm",onClick:_,"aria-label":"More actions",children:""})]})]}),v?null:a.jsxs("div",{className:"rounded-lg border border-border bg-background p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Read-only configuration"}),a.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Active and archived configurations cant be edited. Duplicate this configuration to create a draft you can change."}),a.jsx("div",{className:"mt-3",children:a.jsx(Te,{size:"sm",onClick:ce,children:"Duplicate to edit"})})]}),a.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Config ID"}),a.jsx("dd",{className:"text-sm text-foreground",children:g.id})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Status"}),a.jsx("dd",{className:"text-sm text-foreground",children:yo(g.status)})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Updated"}),a.jsx("dd",{className:"text-sm text-foreground",children:c0(g.updated_at)})]}),g.activated_at?a.jsxs("div",{children:[a.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Activated"}),a.jsx("dd",{className:"text-sm text-foreground",children:c0(g.activated_at)})]}):null]})]}),a.jsxs("section",{className:"flex-1 rounded-2xl border border-dashed border-border-strong bg-background p-6",children:[a.jsx("h2",{className:"text-base font-semibold text-foreground",children:"Overview"}),a.jsx("p",{className:"mt-2 max-w-2xl text-sm text-muted-foreground",children:"The refreshed config workbench will eventually surface manifest summaries, validation history, and deployment metrics here. For now this page offers a quick launch point into the editor while we rebuild the experience."})]}),a.jsx(hs,{open:!!N,position:N,onClose:()=>M(null),items:Y,appearance:"light"}),a.jsx(Lr,{open:L,title:K?.stage==="checking"?"Checking configuration":K?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:K?.stage==="checking"?"Running validation before activation.":K?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":S?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${S.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:K?.stage==="issues"?"Open editor":K?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:()=>{V(!1),A(null)},onConfirm:()=>{if(K?.stage==="issues"){V(!1),k();return}if(K?.stage==="error"){V(!1),A(null);return}Z()},isConfirming:I.isPending,confirmDisabled:K?.stage==="checking"||I.isPending,children:K?.stage==="checking"?a.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[a.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-border border-t-brand-600","aria-hidden":"true"}),a.jsx("span",{children:"Validating"})]}):K?.stage==="issues"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-foreground",children:"Issues:"}),a.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-border bg-background p-3 text-xs text-foreground",children:K.issues.map(Q=>a.jsxs("li",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:Q.path}),a.jsx("p",{className:"text-muted-foreground",children:Q.message})]},`${Q.path}:${Q.message}`))})]}):K?.stage==="error"?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:K.message}):null}),a.jsx(Lr,{open:T,title:"Archive active configuration?",description:"This will leave the workspace with no active configuration. Extraction runs will be blocked until you make a draft active.",confirmLabel:"Archive",cancelLabel:"Cancel",tone:"danger",onCancel:()=>G(!1),onConfirm:te,isConfirming:D.isPending,confirmDisabled:D.isPending,children:D.error?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:D.error instanceof Error?D.error.message:"Unable to archive configuration."}):null}),a.jsxs(Lr,{open:fe,title:"Duplicate configuration",description:`Create a new draft based on ${g.display_name}.`,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:()=>Se(!1),onConfirm:ee,isConfirming:C.isPending,confirmDisabled:C.isPending||z.trim().length===0,children:[a.jsx(Mt,{label:"New configuration name",required:!0,children:a.jsx(yt,{value:z,onChange:Q=>H(Q.target.value),placeholder:"Copy of My Config",disabled:C.isPending})}),ae?a.jsx("p",{className:"text-sm font-medium text-danger-600",children:ae}):null]})]}):a.jsx(wt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."}):a.jsx(wt,{variant:"error",title:"Configuration not found",description:"Pick a configuration from the list to view its details."})}function c0(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function c5({params:e}={}){const{workspace:t}=_s(),{session:s,windowState:i,openSession:l,closeSession:u,minimizeWindow:d,maximizeWindow:m,restoreWindow:g,shouldBypassUnsavedGuard:x}=Aj(),b=e?.configId,v=vj({workspaceId:t.id,configurationId:b});if(h.useEffect(()=>{b||u()},[b,u]),h.useEffect(()=>{if(!b||v.isError)return;const N=v.data?.display_name??b;l({workspaceId:t.id,configId:b,configName:`${t.name}  ${N}`,configDisplayName:N})},[b,v.data?.display_name,v.isError,t.id,t.name,l]),h.useEffect(()=>{b&&(v.isError||v.isSuccess&&!v.data)&&u()},[u,b,v.data,v.isError,v.isSuccess]),!b)return a.jsx(wt,{variant:"error",title:"Select a configuration",description:"Choose a configuration from the list to open the workbench."});if(v.isLoading)return a.jsx(wt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details before opening the workbench."});if(v.isError)return a.jsx(wt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page or pick a different configuration."});if(!v.data)return a.jsx(wt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."});const y=s&&s.configId===b?s:null,k=!!(y&&i==="minimized"),S=!!(y&&i==="restored"),j=!!(y&&i==="maximized");return S&&y?a.jsx("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:a.jsx(Mj,{workspaceId:t.id,configId:y.configId,configName:y.configName,configDisplayName:v.data.display_name??y.configId,windowState:"restored",onMinimizeWindow:d,onMaximizeWindow:m,onRestoreWindow:g,onCloseWorkbench:u,shouldBypassUnsavedGuard:x})}):j?a.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:a.jsx(wt,{variant:"empty",title:"Immersive focus active",description:"Exit immersive mode from the workbench focus menu to return here."})}):k?a.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:a.jsx(wt,{variant:"empty",title:"Workbench docked",description:"Use the dock at the bottom of the screen to resume editing."})}):a.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:a.jsx(wt,{variant:"loading",title:"Launching config workbench",description:"If the editor does not appear, refresh the page."})})}function u5({workspaceName:e,navGroups:t,activeSectionId:s,activeSectionLabel:i,activeSectionDescription:l,activeGroupLabel:u,children:d}){const g=t.flatMap(S=>S.items).find(S=>S.id===s)?.tone??"default",[x,b]=h.useState(""),v=x.trim().toLowerCase(),y=h.useMemo(()=>v?t.map(S=>({...S,items:S.items.filter(j=>`${j.label} ${j.description}`.toLowerCase().includes(v))})).filter(S=>S.items.length>0):t,[t,v]),k=h.useMemo(()=>["Settings",u,i].filter(Boolean),[u,i]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("header",{className:"rounded-3xl border border-border bg-card p-6 shadow-soft",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold uppercase tracking-[0.28em] text-muted-foreground",children:[a.jsx("span",{children:"Workspace"}),a.jsx("span",{"aria-hidden":!0,children:""}),a.jsx("span",{children:"Settings"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e}),a.jsx("span",{className:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:"Settings"})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground",children:k.map((S,j)=>a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx("span",{className:j===k.length-1?"font-semibold text-foreground":"text-muted-foreground",children:S}),j<k.length-1?a.jsx("span",{"aria-hidden":!0,className:"text-muted-foreground",children:"/"}):null]},S))}),l?a.jsx("p",{className:"max-w-3xl text-sm text-muted-foreground",children:l}):null]}),a.jsxs("div",{className:"w-full max-w-xs",children:[a.jsx(yt,{value:x,onChange:S=>b(S.target.value),placeholder:"Search settings","aria-label":"Search workspace settings"}),a.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"Filter sections by name or description."})]})]})}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-[280px,1fr]",children:[a.jsx("nav",{className:"rounded-2xl border border-border bg-card p-4 shadow-soft","aria-label":"Workspace settings sections",children:a.jsx("div",{className:"space-y-4",children:y.length===0?a.jsxs("p",{className:"rounded-lg border border-dashed border-border bg-background p-3 text-xs text-muted-foreground",children:['No sections match "',x,'".']}):y.map(S=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"px-1 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:S.label}),a.jsx("ul",{className:"space-y-1",children:S.items.map(j=>{const N=j.id===s,M=j.tone==="danger"?{active:"bg-danger-50 text-danger-700 ring-danger-100",idle:"hover:bg-danger-50/60 text-danger-700",badgeActive:"bg-danger-500 text-on-danger",badgeIdle:"bg-danger-100 text-danger-700 group-hover:bg-danger-200"}:{active:"bg-brand-50 text-brand-700 ring-brand-100",idle:"hover:bg-background text-foreground",badgeActive:"bg-brand-500 text-on-brand",badgeIdle:"bg-muted text-muted-foreground group-hover:bg-muted"},_=re("group flex w-full items-start gap-3 rounded-xl px-3 py-2.5 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2",N?M.active:M.idle,j.disabled&&"cursor-not-allowed opacity-50 ring-0 hover:bg-card");return j.disabled?a.jsx("li",{className:"w-full",children:a.jsx("div",{className:_,"aria-disabled":!0,children:a.jsxs("div",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"text-sm font-semibold",children:j.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:j.description})]})})},j.id):a.jsx("li",{className:"w-full",children:a.jsxs(bp,{to:j.href,className:_,children:[a.jsxs("div",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"text-sm font-semibold",children:j.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:j.description})]}),a.jsx("span",{"aria-hidden":!0,className:re("ml-auto inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] font-bold transition",N?M.badgeActive:M.badgeIdle),children:j.label.slice(0,1).toUpperCase()})]})},j.id)})})]},S.id))})}),a.jsx("div",{className:re("space-y-6 rounded-3xl border border-border bg-card p-6 shadow-soft",g==="danger"&&"border-danger-100 bg-danger-50/40"),children:d})]})]})}const n1=h.createContext(null);function d5({value:e,children:t}){return a.jsx(n1.Provider,{value:e,children:t})}function r1(){const e=h.useContext(n1);if(!e)throw new Error("useSettingsSection must be used within a SettingsSectionProvider");return e}function Wl({title:e,description:t,actions:s}){return a.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-semibold text-foreground",children:e}),t?a.jsx("p",{className:"text-sm text-muted-foreground",children:t}):null]}),s?a.jsx("div",{className:"flex items-center gap-2",children:s}):null]})}function f5(){const{workspace:e,hasPermission:t}=_s(),s=Zt(),i=Tt(),[l,u]=h.useState(!1),[d,m]=h.useState(""),[g,x]=h.useState(null),b=En({mutationFn:()=>EN(e.id),onSuccess:()=>{i.invalidateQueries({queryKey:dn.all()}),s("/workspaces",{replace:!0})},onError:k=>{x(k instanceof Error?k.message:"Unable to delete workspace.")}}),v=t("workspace.delete")||t("workspace.settings.manage"),y=h.useMemo(()=>{const k=d.trim().toLowerCase();return k.length>0&&(k===e.slug.toLowerCase()||k===e.name.toLowerCase())},[d,e.name,e.slug]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Wl,{title:"Danger zone",description:"Delete this workspace when it is no longer needed."}),a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Delete workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently remove this workspace and all associated data. This action cannot be undone."})]}),a.jsx(Te,{type:"button",variant:"danger",onClick:()=>u(!0),disabled:!v||b.isPending,isLoading:b.isPending,children:"Delete workspace"})]}),v?null:a.jsx(Lt,{tone:"warning",className:"mt-3",children:"You need additional permissions to delete this workspace."}),g?a.jsx(Lt,{tone:"danger",className:"mt-3",children:g}):null,a.jsx("p",{className:"mt-3 text-sm text-warning-700",children:"All workspace configurations, documents, runs, and history will be removed."})]}),a.jsxs("div",{className:"rounded-2xl border border-warning-100 bg-warning-50 p-4 text-sm text-warning-800",children:[a.jsx("p",{className:"font-semibold",children:"Looking for ADE safe mode?"}),a.jsx("p",{className:"mt-1",children:"Safe mode is a system-wide control. Manage it from the system settings area instead of workspace settings."})]}),a.jsxs(Lr,{open:l,title:"Delete this workspace?",description:"Type the workspace slug to confirm. This cannot be undone.",confirmLabel:"Delete workspace",tone:"danger",onCancel:()=>{u(!1),m(""),x(null)},onConfirm:()=>{y&&(x(null),b.mutate())},isConfirming:b.isPending,confirmDisabled:!y,children:[a.jsx(Mt,{label:"Workspace slug",required:!0,children:a.jsx(yt,{value:d,onChange:k=>m(k.target.value),placeholder:e.slug,disabled:b.isPending})}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Enter ",a.jsx("strong",{children:e.slug})," to confirm deletion."]})]})]})}function h5({theme:e,onThemeChange:t,themes:s=cm,className:i,label:l="Theme"}){return a.jsxs("div",{className:re("space-y-2",i),children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:l}),a.jsx("div",{role:"radiogroup","aria-label":l,className:"grid gap-2",children:s.map(u=>{const d=u.id===e;return a.jsxs("button",{type:"button",role:"radio","aria-checked":d,"data-menu-item":!0,onClick:()=>t(u.id),className:re("flex w-full items-center justify-between gap-3 rounded-lg border px-3 py-2 text-left text-sm font-medium transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",d?"border-brand-400 bg-muted text-foreground shadow-sm":"border-border bg-card text-foreground hover:border-border-strong hover:bg-muted"),children:[a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate text-sm font-semibold",children:u.label}),a.jsx("span",{className:"truncate text-xs text-muted-foreground",children:u.description})]}),d?a.jsx(m5,{className:"h-4 w-4 text-brand-500"}):null]},u.id)})})]})}function m5({className:e}){return a.jsx("svg",{className:re("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M5 10.5l3 3 7-7",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function p5(){const{modePreference:e,setModePreference:t,theme:s,setTheme:i}=Xu();return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Wl,{title:"Appearance",description:"Choose your color mode and theme. These preferences follow your account."}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs("section",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Color mode"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the system setting or set a fixed light or dark mode."})]}),a.jsx("div",{role:"radiogroup","aria-label":"Color mode",className:"mt-4 grid gap-2",children:Dk.map(l=>{const u=l.value===e;return a.jsxs("button",{type:"button",role:"radio","aria-checked":u,onClick:()=>t(l.value),className:re("flex w-full items-center justify-between gap-3 rounded-lg border px-3 py-2 text-left text-sm font-medium transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-card",u?"border-brand-400 bg-muted text-foreground shadow-sm":"border-border bg-card text-foreground hover:border-border-strong hover:bg-muted"),children:[a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate text-sm font-semibold",children:l.label}),a.jsx("span",{className:"truncate text-xs text-muted-foreground",children:l.description})]}),u?a.jsx(g5,{className:"h-4 w-4 text-brand-500"}):null]},l.value)})})]}),a.jsx("section",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:a.jsx(h5,{theme:s,onThemeChange:i,label:"Theme"})})]})]})}function g5({className:e}){return a.jsx("svg",{className:re("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M5 10.5l3 3 7-7",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function s1({when:e,title:t="Discard unsaved changes?",description:s="You have unsaved changes. If you leave now, your edits will be lost.",confirmLabel:i="Leave without saving",cancelLabel:l="Stay on page"}){const u=Zt(),[d,m]=h.useState(null),[g,x]=h.useState(!1),b=h.useRef(!1);h.useEffect(()=>{if(!e){x(!1),m(null);return}const k=S=>{S.preventDefault(),S.returnValue=""};return window.addEventListener("beforeunload",k),()=>window.removeEventListener("beforeunload",k)},[e]),h0(k=>e?b.current?(b.current=!1,!0):(m(k),x(!0),!1):!0,e);const v=()=>{if(!d)return;b.current=!0;const k=d.kind==="replace"||d.kind==="pop";u(d.to,{replace:k}),x(!1),m(null),setTimeout(()=>{b.current=!1},0)},y=()=>{x(!1),m(null)};return a.jsx(Lr,{open:g&&e,title:t,description:s,confirmLabel:i,cancelLabel:l,tone:"danger",onConfirm:v,onCancel:y})}s1.displayName="UnsavedChangesPrompt";function x5({isDirty:e,isSaving:t,onCancel:s,onSave:i,saveLabel:l="Save changes",cancelLabel:u="Discard",children:d}){return!e&&!d?null:a.jsx("div",{className:"sticky bottom-0 left-0 right-0 mt-4 rounded-b-2xl border border-t bg-card/95 p-4 shadow-[0_-8px_20px_-12px_rgb(var(--sys-color-shadow)/0.25)] backdrop-blur",children:a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:d}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s?a.jsx(Te,{type:"button",variant:"ghost",onClick:s,disabled:t||!e,children:u}):null,a.jsx(Te,{type:"button",onClick:i,isLoading:t,disabled:!e||t,children:l})]})]})})}const b5=ud({name:us().min(1,"Workspace name is required.").max(255,"Keep the name under 255 characters."),slug:us().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.")});function v5(){const{workspace:e}=_s(),t=FN(e.id),s=X0(),[i,l]=h.useState(null),{register:u,handleSubmit:d,formState:{errors:m,isDirty:g},reset:x}=Lw({resolver:Uw(b5),defaultValues:{name:e.name,slug:e.slug}});h.useEffect(()=>{x({name:e.name,slug:e.slug})},[x,e.name,e.slug]);const b=d(k=>{l(null),t.mutate({name:k.name.trim(),slug:k.slug.trim()},{onSuccess:()=>{l({tone:"success",message:"Workspace details saved."})},onError:S=>{const j=S instanceof Error?S.message:"Unable to save workspace details.";l({tone:"danger",message:j})}})}),v=e.is_default,y=s.isPending;return a.jsxs("div",{className:"space-y-6",children:[a.jsx(s1,{when:g&&!t.isPending}),a.jsx(Wl,{title:"General",description:"Manage the workspace identity and your default workspace preference."}),i?a.jsx(Lt,{tone:i.tone,children:i.message}):null,a.jsxs("form",{className:"overflow-hidden rounded-2xl border border-border bg-card shadow-soft",onSubmit:b,noValidate:!0,children:[a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Workspace identity"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Update the name and slug. Changes apply immediately across navigation and shared links."})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsx(Mt,{label:"Workspace name",required:!0,error:m.name?.message,children:a.jsx(yt,{...u("name"),placeholder:"Finance Operations",invalid:!!m.name,disabled:t.isPending})}),a.jsx(Mt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier.",required:!0,error:m.slug?.message,children:a.jsx(yt,{...u("slug"),placeholder:"finance-ops",invalid:!!m.slug,disabled:t.isPending})})]}),t.isError?a.jsx(Lt,{tone:"danger",children:t.error instanceof Error?t.error.message:"Unable to save workspace details."}):null]}),a.jsx(x5,{isDirty:g,isSaving:t.isPending,onCancel:()=>{x(),l(null)},onSave:b,children:"Changes apply to everyone who can access this workspace."})]}),a.jsxs("div",{className:"rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Default workspace"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the workspace you land on first after signing in. This only affects your account."})]}),a.jsx(Te,{type:"button",variant:v?"secondary":"primary",onClick:()=>{l(null),s.mutate(e.id,{onSuccess:()=>l({tone:"success",message:"Workspace set as your default."}),onError:k=>{const S=k instanceof Error?k.message:"Unable to set the default workspace right now.";l({tone:"danger",message:S})}})},disabled:v||y,isLoading:y,children:v?"Default workspace":"Make default"})]}),a.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:v?"This workspace is already your default.":"You can switch the default workspace at any time."})]})]})}function Mp({open:e,title:t,description:s,onClose:i,children:l,footer:u,widthClassName:d="w-full max-w-xl"}){const m=h.useRef(null);return h.useEffect(()=>{if(!e)return;const g=b=>{if(b.key==="Escape"&&i(),b.key==="Tab"){const v=m.current;if(!v)return;const y=Array.from(v.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(j=>!j.hasAttribute("disabled"));if(y.length===0)return;const k=y.indexOf(document.activeElement),S=b.shiftKey?k<=0?y.length-1:k-1:k===y.length-1?0:k+1;y[S]?.focus(),b.preventDefault()}};return window.addEventListener("keydown",g),m.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",g)},[i,e]),e?zr.createPortal(a.jsxs("div",{className:"fixed inset-0 z-40",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-overlay/50",onClick:i,"aria-label":"Close drawer"}),a.jsxs("div",{ref:m,role:"dialog","aria-modal":"true","aria-label":t,className:re("absolute inset-y-0 right-0 flex h-full flex-col bg-card shadow-2xl transition",d),children:[a.jsxs("div",{className:"flex items-start justify-between gap-4 border-b border-border px-5 py-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-muted-foreground",children:"Details"}),a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:t}),s?a.jsx("p",{className:"text-sm text-muted-foreground",children:s}):null]}),a.jsx("button",{type:"button",onClick:i,className:"rounded-full border border-border bg-card p-2 text-muted-foreground transition hover:bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2","aria-label":"Close drawer",children:a.jsx(y5,{})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:l}),u?a.jsx("div",{className:"border-t border-border bg-background px-5 py-4",children:u}):null]})]}),document.body):null}function y5(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[a.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),a.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}const Em=Fl,yd={page:1,pageSize:Em,includeTotal:!0};function w5(e){const t=Rm({queryKey:dn.members(e,yd),initialPageParam:1,queryFn:({pageParam:u,signal:d})=>_N(e,{page:typeof u=="number"?u:1,pageSize:Em,includeTotal:u===1,signal:d}),getNextPageParam:u=>u.has_next?u.page+1:void 0,enabled:e.length>0,staleTime:15e3,placeholderData:u=>u}),s=t.data?.pages??[],i=Z0(s,u=>u.user_id),l=s[0]?.total??s[s.length-1]?.total??void 0;return{...t,members:i,total:l,pageSize:Em}}function j5(e){const t=Tt(),s=dn.members(e,yd);return En({mutationFn:async({user:i,roleIds:l})=>{const u={user_id:i.id,role_ids:Array.from(l)};return MN(e,u)},onSuccess:()=>{t.invalidateQueries({queryKey:s})}})}function S5(e){const t=Tt(),s=dn.members(e,yd);return En({mutationFn:({userId:i,roleIds:l})=>TN(e,i,{role_ids:Array.from(l)}),onSuccess:()=>{t.invalidateQueries({queryKey:s})}})}function k5(e){const t=Tt(),s=dn.members(e,yd);return En({mutationFn:i=>DN(e,i),onSuccess:()=>{t.invalidateQueries({queryKey:s})}})}const Tp=Fl,N5=Fl,wd={page:1,pageSize:Tp,includeTotal:!0},C5={scope:"workspace",page:1,pageSize:N5,includeTotal:!1};function a1(e){return sn({queryKey:dn.roles(e,wd),queryFn:({signal:t})=>V0(s=>AN({page:s,pageSize:Tp,includeTotal:s===1,signal:t})),enabled:e.length>0,staleTime:15e3,placeholderData:t=>t})}function E5(e="workspace"){const t={...C5,scope:e};return sn({queryKey:dn.permissions(t),queryFn:({signal:s})=>V0(i=>LN({scope:e,page:i,pageSize:t.pageSize,includeTotal:i===1,signal:s})),staleTime:6e4,placeholderData:s=>s})}function _5(e){const t=Tt(),s=dn.roles(e,wd);return En({mutationFn:i=>RN(e,i),onSuccess:i=>{t.setQueryData(s,l=>D5(l,i))},onSettled:()=>{t.invalidateQueries({queryKey:s})}})}function M5(e){const t=Tt(),s=dn.roles(e,wd);return En({mutationFn:({roleId:i,payload:l})=>ON(e,i,l),onSuccess:i=>{t.setQueryData(s,l=>l&&{...l,items:l.items.map(u=>u.id===i.id?i:u)})},onSettled:()=>{t.invalidateQueries({queryKey:s})}})}function T5(e){const t=Tt(),s=dn.roles(e,wd);return En({mutationFn:i=>zN(e,i),onSuccess:(i,l)=>{t.setQueryData(s,u=>{if(!u)return u;const d=u.items.filter(m=>m.id!==l);return{...u,items:d,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}})},onSettled:()=>{t.invalidateQueries({queryKey:s})}})}function D5(e,t){return e?{...e,items:[t,...e.items],total:typeof e.total=="number"?e.total+1:e.total,has_next:!1,has_previous:!1}:{items:[t],page:1,page_size:Tp,has_next:!1,has_previous:!1,total:1}}const A5={sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function R5(e,t){if(e&&e.trim().length>0){const s=e.trim().split(/\s+/u),i=s[0]?.[0],l=s[s.length-1]?.[0];if(i)return`${i}${l??""}`.toUpperCase()}return t&&t.trim().length>0?t.trim()[0]?.toUpperCase():"?"}function i1({name:e,email:t,size:s="md",className:i}){const l=h.useMemo(()=>R5(e,t),[e,t]);return a.jsx("span",{"aria-hidden":"true",className:re("inline-flex select-none items-center justify-center rounded-full bg-gradient-to-br from-brand-100 via-brand-200 to-brand-300 font-semibold text-brand-900 shadow-sm",A5[s],i),children:l})}function O5(){const{workspace:e,hasPermission:t}=_s(),{params:s}=r1(),i=Zt(),l=Fn(),u=t("workspace.members.manage"),d=w5(e.id),m=a1(e.id),g=j5(e.id),x=S5(e.id),b=k5(e.id),[v,y]=h.useState(""),[k,S]=h.useState(null),j=h.useMemo(()=>{const ce=d.members,T=new Intl.Collator("en",{sensitivity:"base"});return[...ce].sort((G,ue)=>{const Y=G.user?.display_name??G.user?.email??G.user_id,ee=ue.user?.display_name??ue.user?.email??ue.user_id;return T.compare(Y??"",ee??"")})},[d.members]),N=h.useMemo(()=>new Set(j.map(ce=>ce.user_id)),[j]),M=d.total??j.length,_=v.trim().toLowerCase(),R=h.useMemo(()=>_?j.filter(ce=>{const T=ce.user?.display_name??"",G=ce.user?.email??"";return T.toLowerCase().includes(_)||G.toLowerCase().includes(_)||ce.user_id.toLowerCase().includes(_)}):j,[j,_]),q=!!d.hasNextPage,$=d.isLoading,I=d.isFetchingNextPage,D=h.useMemo(()=>{const ce=new Intl.Collator("en",{sensitivity:"base"});return(m.data?.items??[]).slice().sort((T,G)=>ce.compare(T.name,G.name))},[m.data]),C=s[0],L=C==="new",V=C&&C!=="new"?decodeURIComponent(C):null,K=j.find(ce=>ce.user_id===V),A=`/workspaces/${e.id}/settings/access/members`,X=`${l.search}${l.hash}`,fe=()=>i(`${A}${X}`,{replace:!0}),Se=()=>i(`${A}/new${X}`),z=ce=>i(`${A}/${encodeURIComponent(ce)}${X}`),H=async({user:ce,roleIds:T})=>{S(null),await g.mutateAsync({user:ce,roleIds:T}),S({tone:"success",message:`${ce.display_name??ce.email} added to the workspace.`}),fe()},ae=async(ce,T)=>{S(null),await x.mutateAsync({userId:ce,roleIds:T}),S({tone:"success",message:"Member roles updated."}),fe()},ge=async ce=>{S(null),await b.mutateAsync(ce.user_id),S({tone:"success",message:"Member removed."}),fe()};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Wl,{title:"Members",description:"Add members, adjust workspace roles, or remove access.",actions:a.jsxs("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:[M," member",M===1?"":"s"]})}),k?a.jsx(Lt,{tone:k.tone,children:k.message}):null,d.isError?a.jsx(Lt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace members."}):null,m.isError?a.jsx(Lt,{tone:"warning",children:m.error instanceof Error?m.error.message:"Unable to load workspace roles."}):null,a.jsxs("section",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Workspace members"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:$?"Loading members":`${M} member${M===1?"":"s"} total`})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(Mt,{label:"Search members",className:"w-full max-w-xs",children:a.jsx(yt,{value:v,onChange:ce=>y(ce.target.value),placeholder:"Search by name, email, or ID",disabled:$})}),u?a.jsx(Te,{type:"button",onClick:Se,children:"Add member"}):null]})]}),$?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading members"}):R.length===0?a.jsx("p",{className:"rounded-lg border border-dashed border-border bg-background p-4 text-sm text-muted-foreground",children:v?`No members match "${v}".`:"No members yet. Add teammates to collaborate."}):a.jsx("div",{className:"overflow-hidden rounded-xl border border-border",children:a.jsxs("table",{className:"min-w-full divide-y divide-border",children:[a.jsx("thead",{className:"bg-background",children:a.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("th",{className:"px-4 py-3",children:"Member"}),a.jsx("th",{className:"px-4 py-3",children:"Roles"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border bg-card",children:R.map(ce=>{const T=ce.role_ids.map(ue=>D.find(Y=>Y.id===ue)?.name??ue).sort((ue,Y)=>ue.localeCompare(Y)),G=ce.user?.display_name??ce.user?.email??ce.user_id;return a.jsxs("tr",{className:"text-sm text-foreground",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(i1,{name:ce.user?.display_name,email:ce.user?.email,size:"sm"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"truncate font-semibold text-foreground",children:G}),a.jsx("p",{className:"truncate text-xs text-muted-foreground",children:ce.user?.email??ce.user_id})]})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:T.length===0?a.jsx("span",{className:"text-xs text-muted-foreground",children:"No roles assigned."}):T.map(ue=>a.jsx("span",{className:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:ue},`${ce.user_id}-${ue}`))})}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsx(Te,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(ce.user_id),disabled:!u,children:"Manage"})})]},ce.user_id)})})]})}),q?a.jsx("div",{className:"pt-4",children:a.jsx(Te,{type:"button",variant:"ghost",onClick:()=>d.fetchNextPage(),disabled:I,children:I?"Loading more members":"Load more members"})}):null,u?null:a.jsx(Lt,{tone:"info",children:"You do not have permission to manage workspace members."})]}),a.jsx(z5,{open:L&&u,onClose:fe,availableRoles:D,memberIds:N,isSubmitting:g.isPending,onAdd:H}),a.jsx(L5,{open:!!V&&u,member:K,availableRoles:D,onClose:fe,onSaveRoles:ce=>ae(V??"",ce),onRemove:()=>K?ge(K):Promise.resolve(),isSaving:x.isPending,isRemoving:b.isPending})]})}function z5({open:e,onClose:t,availableRoles:s,memberIds:i,isSubmitting:l,onAdd:u}){const[d,m]=h.useState(""),[g,x]=h.useState([]),[b,v]=h.useState(""),[y,k]=h.useState(""),[S,j]=h.useState(null);h.useEffect(()=>{const D=window.setTimeout(()=>k(b.trim()),250);return()=>window.clearTimeout(D)},[b]),h.useEffect(()=>{e||(m(""),x([]),v(""),j(null))},[e]);const N=$w({enabled:e,search:y,pageSize:50}),M=h.useMemo(()=>{const D=new Intl.Collator("en",{sensitivity:"base"});return N.users.filter(C=>!i.has(C.id)).sort((C,L)=>{const V=C.display_name??C.email,K=L.display_name??L.email;return D.compare(V??"",K??"")})},[i,N.users]),_=h.useMemo(()=>M.find(D=>D.id===d),[M,d]),R=!!d&&g.length>0&&!l,q=b.trim().length>0&&b.trim().length<2,$=N.isPending&&N.users.length===0,I=async D=>{D.preventDefault(),j(null);const C=M.find(L=>L.id===d);if(!C){j("Select a user to add.");return}if(g.length===0){j("Select at least one role for this member.");return}try{await u({user:C,roleIds:g}),m(""),v(""),x([])}catch(L){const V=L instanceof Error?L.message:"Unable to add member.";j(V)}};return a.jsx(Mp,{open:e,onClose:t,title:"Add member",description:"Add an existing user and choose their workspace roles.",children:a.jsxs("form",{className:"space-y-4",onSubmit:I,children:[S?a.jsx(Lt,{tone:"danger",children:S}):null,N.isError?a.jsx(Lt,{tone:"warning",children:N.error instanceof Error?N.error.message:"Unable to load the user directory."}):null,a.jsxs(Mt,{label:"Search directory",hint:"Enter at least two characters to search by name or email.",children:[a.jsx(yt,{value:b,onChange:D=>v(D.target.value),placeholder:"Search users",disabled:l||$}),q?a.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter at least two characters to search the full directory."}):null]}),a.jsxs(Mt,{label:"User",required:!0,children:[a.jsxs(zl,{value:d,onChange:D=>{m(D.target.value),D.target.value&&v("")},disabled:l||$,required:!0,children:[a.jsx("option",{value:"",children:"Select a user"}),_&&!M.some(D=>D.id===_.id)?a.jsx("option",{value:_.id,children:_.display_name?`${_.display_name} (${_.email})`:_.email}):null,M.map(D=>a.jsx("option",{value:D.id,children:D.display_name?`${D.display_name} (${D.email})`:D.email},D.id))]}),M.length===0&&b?a.jsxs("p",{className:"text-xs text-muted-foreground",children:['No users matched "',b,'".']}):null]}),a.jsxs("fieldset",{className:"space-y-2",children:[a.jsx("legend",{className:"text-sm font-semibold text-foreground",children:"Roles"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign at least one role to grant access."}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.length===0?a.jsx("p",{className:"text-xs text-muted-foreground",children:"No workspace roles available yet."}):s.map(D=>a.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border-strong",checked:g.includes(D.id),onChange:C=>x(L=>C.target.checked?[...L,D.id]:L.filter(V=>V!==D.id)),disabled:l}),a.jsx("span",{children:D.name})]},D.id))}),g.length>0?a.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.length," role(s) selected."]}):null]}),N.hasNextPage?a.jsx("div",{className:"pt-2",children:a.jsx(Te,{type:"button",variant:"ghost",onClick:()=>N.fetchNextPage(),disabled:N.isFetchingNextPage,children:N.isFetchingNextPage?"Loading more users":"Load more users"})}):null,a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(Te,{type:"button",variant:"ghost",onClick:t,disabled:l,children:"Cancel"}),a.jsx(Te,{type:"submit",isLoading:l,disabled:!R,children:"Add member"})]})]})})}function L5({open:e,member:t,availableRoles:s,onClose:i,onSaveRoles:l,onRemove:u,isSaving:d,isRemoving:m}){const[g,x]=h.useState([]),[b,v]=h.useState(null),[y,k]=h.useState(!1);h.useEffect(()=>{if(!e||!t){x([]),v(null),k(!1);return}x(t.role_ids),v(null),k(!1)},[t,e]);const S=async()=>{if(t){v(null);try{await l(g)}catch(M){const _=M instanceof Error?M.message:"Unable to save member roles.";v(_)}}},j=async()=>{if(t){v(null);try{await u()}catch(M){const _=M instanceof Error?M.message:"Unable to remove member.";v(_)}finally{k(!1)}}},N=t?t.user?.display_name??t.user?.email??t.user_id:"Member details";return a.jsxs(a.Fragment,{children:[a.jsxs(Mp,{open:e,onClose:i,title:N,description:t?"Update roles or remove this member from the workspace.":void 0,children:[t?a.jsxs("div",{className:"space-y-4",children:[b?a.jsx(Lt,{tone:"danger",children:b}):null,a.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-border bg-background p-3",children:[a.jsx(i1,{name:t.user?.display_name,email:t.user?.email,size:"md"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-base font-semibold text-foreground",children:t.user?.display_name??t.user?.email??t.user_id}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.user?.email??"No email available"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["User ID: ",t.user_id]})]})]}),a.jsxs("fieldset",{className:"space-y-3",children:[a.jsx("legend",{className:"text-sm font-semibold text-foreground",children:"Roles"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the roles this member should have inside the workspace."}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.length===0?a.jsx("p",{className:"text-xs text-muted-foreground",children:"No workspace roles available."}):s.map(M=>a.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",children:[a.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border-strong",checked:g.includes(M.id),onChange:_=>x(R=>_.target.checked?Array.from(new Set([...R,M.id])):R.filter(q=>q!==M.id)),disabled:d}),a.jsx("span",{children:M.name})]},M.id))}),g.length>0?a.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.length," role(s) selected."]}):null]})]}):a.jsx(Lt,{tone:"warning",children:"This member could not be found."}),a.jsxs("div",{className:"mt-6 flex items-center justify-between gap-2",children:[a.jsx(Te,{type:"button",variant:"ghost",onClick:i,disabled:d||m,children:"Close"}),a.jsxs("div",{className:"flex items-center gap-2",children:[t?a.jsx(Te,{type:"button",variant:"danger",onClick:()=>k(!0),disabled:m,isLoading:m,children:"Remove"}):null,a.jsx(Te,{type:"button",onClick:S,isLoading:d,disabled:!t||d,children:"Save changes"})]})]})]}),a.jsx(Lr,{open:y,title:"Remove member?",description:t?`Remove ${t.user?.display_name??t.user?.email??t.user_id} from this workspace.`:"",confirmLabel:"Remove member",tone:"danger",onCancel:()=>k(!1),onConfirm:j,isConfirming:m})]})}function U5(){const{workspace:e,hasPermission:t}=_s(),{params:s}=r1(),i=Zt(),l=Fn(),u=t("workspace.roles.manage"),d=a1(e.id),m=E5(),g=_5(e.id),x=M5(e.id),b=T5(e.id),[v,y]=h.useState(""),[k,S]=h.useState(null),j=h.useMemo(()=>(m.data?.items??[]).filter(z=>z.scope_type==="workspace"),[m.data]),N=h.useMemo(()=>{const z=new Intl.Collator("en",{sensitivity:"base"});return(d.data?.items??[]).slice().sort((H,ae)=>z.compare(H.name,ae.name))},[d.data]),M=d.data?.total??N.length,_=v.trim().toLowerCase(),R=h.useMemo(()=>_?N.filter(z=>`${z.name} ${z.slug??""}`.toLowerCase().includes(_)):N,[_,N]),q=s[0],$=q==="new",I=q&&q!=="new"?decodeURIComponent(q):null,D=N.find(z=>z.id===I),C=`/workspaces/${e.id}/settings/access/roles`,L=`${l.search}${l.hash}`,V=()=>i(`${C}${L}`,{replace:!0}),K=()=>i(`${C}/new${L}`),A=z=>i(`${C}/${encodeURIComponent(z)}${L}`),X=async z=>{S(null),await g.mutateAsync({name:z.name.trim(),slug:z.slug.trim()||void 0,description:z.description.trim()||void 0,permissions:z.permissions}),S({tone:"success",message:"Role created."}),V()},fe=async(z,H)=>{S(null),await x.mutateAsync({roleId:z,payload:{name:H.name.trim(),description:H.description.trim()||void 0,permissions:H.permissions}}),S({tone:"success",message:"Role updated."}),V()},Se=async z=>{S(null),await b.mutateAsync(z.id),S({tone:"success",message:`Deleted role "${z.name}".`}),V()};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(Wl,{title:"Roles",description:"Workspace roles group permissions so you can safely delegate access.",actions:a.jsxs("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-semibold text-foreground",children:[M," role",M===1?"":"s"]})}),k?a.jsx(Lt,{tone:k.tone,children:k.message}):null,d.isError?a.jsx(Lt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace roles."}):null,m.isError?a.jsx(Lt,{tone:"warning",children:m.error instanceof Error?m.error.message:"Unable to load permission catalog."}):null,a.jsxs("section",{className:"space-y-4 rounded-2xl border border-border bg-card p-6 shadow-soft",children:[a.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Workspace roles"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d.isLoading?"Loading roles":`${M} role${M===1?"":"s"} total`})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(Mt,{label:"Search roles",className:"w-full max-w-xs",children:a.jsx(yt,{value:v,onChange:z=>y(z.target.value),placeholder:"Search by name or slug",disabled:d.isLoading})}),u?a.jsx(Te,{type:"button",onClick:K,children:"New role"}):null]})]}),d.isLoading?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading roles"}):R.length===0?a.jsx("p",{className:"rounded-lg border border-dashed border-border bg-background p-4 text-sm text-muted-foreground",children:v?`No roles match "${v}".`:"No workspace roles yet. Create one to tailor permissions."}):a.jsx("div",{className:"overflow-hidden rounded-xl border border-border",children:a.jsxs("table",{className:"min-w-full divide-y divide-border",children:[a.jsx("thead",{className:"bg-background",children:a.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:[a.jsx("th",{className:"px-4 py-3",children:"Role"}),a.jsx("th",{className:"px-4 py-3",children:"Slug"}),a.jsx("th",{className:"px-4 py-3",children:"Permissions"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border bg-card",children:R.map(z=>a.jsxs("tr",{className:"text-sm text-foreground",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-semibold text-foreground",children:z.name}),z.is_system?a.jsx("span",{className:"inline-flex items-center rounded-full bg-muted px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-muted-foreground",children:"System"}):null,z.is_editable?null:a.jsx("span",{className:"inline-flex items-center rounded-full bg-warning-100 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-warning-700",children:"Locked"})]})}),a.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:z.slug}),a.jsxs("td",{className:"px-4 py-3 text-muted-foreground",children:[z.permissions.length," permission",z.permissions.length===1?"":"s"]}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsx(Te,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(z.id),disabled:!u,children:"Manage"})})]},z.id))})]})}),u?null:a.jsx(Lt,{tone:"info",children:"You do not have permission to manage workspace roles."})]}),a.jsx(u0,{open:$&&u,mode:"create",permissions:j,onClose:V,onSave:z=>X(z),isSaving:g.isPending,isDeleting:!1}),a.jsx(u0,{open:!!I&&u,mode:"edit",role:D,permissions:j,onClose:V,onSave:z=>I?fe(I,z):Promise.resolve(),onDelete:D?()=>Se(D):void 0,isSaving:x.isPending,isDeleting:b.isPending})]})}function u0({open:e,mode:t,role:s,permissions:i,onClose:l,onSave:u,onDelete:d,isSaving:m,isDeleting:g}){const[x,b]=h.useState({name:"",slug:"",description:"",permissions:[]}),[v,y]=h.useState(""),[k,S]=h.useState(null),[j,N]=h.useState(!1),[M,_]=h.useState("");h.useEffect(()=>{if(!e){S(null),y(""),N(!1),_("");return}b(t==="edit"&&s?{name:s.name,slug:s.slug,description:s.description??"",permissions:s.permissions}:{name:"",slug:"",description:"",permissions:[]})},[t,e,s]);const R=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,q=t==="create"||(s?.is_editable??!1),$=t==="edit"&&s&&s.is_editable&&!s.is_system&&d,I=h.useMemo(()=>{const A=v.trim().toLowerCase();return A?i.filter(X=>`${X.label} ${X.key}`.toLowerCase().includes(A)):i},[v,i]),D=(A,X)=>{b(fe=>({...fe,permissions:X?Array.from(new Set([...fe.permissions??[],A])):(fe.permissions??[]).filter(Se=>Se!==A)}))},C=async()=>{if(S(null),!x.name.trim()){S("Role name is required.");return}if(t==="create"&&x.slug&&!R.test(x.slug)){S("Use lowercase letters, numbers, and dashes for the role slug.");return}try{await u({...x,name:x.name.trim(),slug:t==="create"?x.slug.trim():s?.slug??"",description:x.description.trim(),permissions:x.permissions})}catch(A){const X=A instanceof Error?A.message:"Unable to save role.";S(X)}},L=async()=>{if(!(!d||!s)){S(null);try{await d()}catch(A){const X=A instanceof Error?A.message:"Unable to delete role.";S(X)}finally{N(!1),_("")}}},V=a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(Te,{type:"button",variant:"ghost",onClick:l,disabled:m||g,children:"Close"}),a.jsxs("div",{className:"flex items-center gap-2",children:[$?a.jsx(Te,{type:"button",variant:"danger",onClick:()=>N(!0),disabled:g,isLoading:g,children:"Delete"}):null,a.jsx(Te,{type:"button",onClick:C,isLoading:m,disabled:!q||m,children:t==="create"?"Create role":"Save changes"})]})]}),K=t==="create"?"New role":s?.name??"Role details";return a.jsxs(a.Fragment,{children:[a.jsxs(Mp,{open:e,onClose:l,title:K,description:t==="create"?"Create a workspace-scoped role.":"Edit workspace role details and permissions.",footer:V,children:[k?a.jsx(Lt,{tone:"danger",children:k}):null,t==="edit"&&s&&!s.is_editable?a.jsx(Lt,{tone:"warning",children:"This role is locked and cannot be modified."}):null,a.jsxs("div",{className:"space-y-4",children:[a.jsx(Mt,{label:"Role name",required:!0,children:a.jsx(yt,{value:x.name,onChange:A=>b(X=>({...X,name:A.target.value})),placeholder:"Data reviewer",disabled:m||!q})}),t==="create"?a.jsx(Mt,{label:"Role slug",hint:"Lowercase, URL-friendly identifier. Leave blank to auto-generate.",children:a.jsx(yt,{value:x.slug,onChange:A=>b(X=>({...X,slug:A.target.value})),placeholder:"data-reviewer",disabled:m||!q})}):a.jsx(Mt,{label:"Role slug",children:a.jsx(yt,{value:s?.slug??"",disabled:!0})}),a.jsx(Mt,{label:"Description",hint:"Optional context about what this role controls.",children:a.jsx(yt,{value:x.description,onChange:A=>b(X=>({...X,description:A.target.value})),placeholder:"What does this role control?",disabled:m||!q})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Permissions"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Select the permissions included with this role. ",x.permissions.length," selected."]})]}),a.jsx(yt,{value:v,onChange:A=>y(A.target.value),placeholder:"Filter permissions",disabled:m})]}),a.jsx("div",{className:"max-h-72 space-y-2 overflow-y-auto rounded-lg border border-border p-3",children:I.length===0?a.jsx("p",{className:"text-xs text-muted-foreground",children:"No permissions match this filter."}):I.map(A=>{const X=`permission-${A.key.replaceAll(".","-")}`;return a.jsxs("label",{htmlFor:X,"aria-label":A.label,className:"flex items-start gap-3 rounded-lg border border-border bg-background px-3 py-2 text-sm text-foreground",children:[a.jsx("input",{id:X,type:"checkbox",className:"mt-1 h-4 w-4 rounded border-border-strong",checked:x.permissions.includes(A.key),onChange:fe=>D(A.key,fe.target.checked),disabled:m||!q}),a.jsxs("span",{children:[a.jsx("span",{className:"block font-semibold",children:A.label}),a.jsx("span",{className:"block text-xs text-muted-foreground",children:A.description})]})]},A.key)})})]})]})]}),a.jsx(Lr,{open:j&&!!s,title:"Delete this role?",description:"Deleting this role will remove it from any members assigned to it.",confirmLabel:"Delete role",tone:"danger",confirmDisabled:M.trim()!==(s?.slug??""),onCancel:()=>{N(!1),_("")},onConfirm:L,isConfirming:g,children:a.jsx(Mt,{label:"Type the role slug to confirm",required:!0,children:a.jsx(yt,{value:M,onChange:A=>_(A.target.value),placeholder:s?.slug??"role-slug",disabled:g})})})]})}const $5={workspace:"Workspace",preferences:"Preferences",access:"Access",lifecycle:"Lifecycle"},Ul=[{id:"workspace.general",group:"workspace",label:"General",description:"Workspace name, slug, and defaults.",path:"general",element:a.jsx(v5,{})},{id:"preferences.appearance",group:"preferences",label:"Appearance",description:"Theme and color mode preferences.",path:"preferences/appearance",element:a.jsx(p5,{})},{id:"access.members",group:"access",label:"Members",description:"Manage members and access.",path:"access/members",required:{view:["workspace.members.view"],edit:["workspace.members.manage"]},element:a.jsx(O5,{})},{id:"access.roles",group:"access",label:"Roles",description:"Workspace-scoped roles and permissions.",path:"access/roles",required:{view:["workspace.roles.view"],edit:["workspace.roles.manage"]},element:a.jsx(U5,{})},{id:"lifecycle.danger",group:"lifecycle",label:"Danger zone",description:"Deletion and operational safeguards.",path:"lifecycle/danger",tone:"danger",required:{view:["workspace.settings.manage","workspace.delete"],edit:["workspace.delete"]},element:a.jsx(f5,{})}],Mu=Ul[0];function B5(e){const t=e.join("/");return Ul.find(s=>t===s.path||t.startsWith(`${s.path}/`))}function q5(e,t){const s=Ul.map(i=>{const l=i.required?.view?i.required.view.some(d=>t(d)):!0,u=i.required?.edit?i.required.edit.some(d=>t(d)):!0;return{id:i.id,label:i.label,description:i.description,href:`/workspaces/${e}/settings/${i.path}`,disabled:!(l||u),tone:i.tone??"default"}});return Object.values(s.reduce((i,l)=>{const u=Ul.find(g=>g.id===l.id);if(!u)return i;const d=i[u.group],m=d?{...d,items:[...d.items,l]}:{id:u.group,label:$5[u.group],items:[l]};return i[u.group]=m,i},{}))}function F5({sectionSegments:e=[]}){const{workspace:t,hasPermission:s}=_s(),i=Zt(),l=Fn(),{effectiveSegments:u,redirectTo:d}=h.useMemo(()=>P5(e,t.id,l.search,l.hash),[e,t.id,l.search,l.hash]),m=B5(u)??Mu;h.useEffect(()=>{d&&i(d,{replace:!0})},[d,i]);const g=h.useMemo(()=>{const j=m.path.split("/");return u.slice(j.length)},[m.path,u]),x=h.useMemo(()=>q5(t.id,s),[t.id,s]),v=x.flatMap(j=>j.items).find(j=>j.id===m.id),y=x.find(j=>j.items.some(N=>N.id===m.id))?.label,S=v?.disabled?a.jsx(wt,{title:"You don't have access to this section",description:"You need additional permissions to manage this area of workspace settings.",variant:"error"}):m.element;return a.jsx(u5,{workspaceName:t.name,navGroups:x,activeSectionId:m.id,activeSectionLabel:m.label,activeSectionDescription:m.description,activeGroupLabel:y??"Settings",children:a.jsx(d5,{value:{sectionId:m.id,params:g},children:S})})}function P5(e,t,s,i){const l={members:"access/members",roles:"access/roles",danger:"lifecycle/danger"},u=e.length>0?[...e]:Mu.path.split("/"),d=l[u[0]],m=d?[...d.split("/"),...u.slice(1)]:u,g=m.join("/"),x=d&&g?`/workspaces/${t}/settings/${g}${s}${i}`:void 0,b=e.length===0,v=Ul.some(k=>g===k.path||g.startsWith(`${k.path}/`))||d!==void 0,y=`/workspaces/${t}/settings/${Mu.path}${s}${i}`;return{effectiveSegments:v?m:Mu.path.split("/"),redirectTo:b||!v||d?x??y:null}}function I5(){return a.jsx(ql,{children:a.jsx(H5,{})})}function H5(){const e=Fn(),t=Zt(),s=Tt(),i=nd(),l=h.useMemo(()=>i.data?.items??[],[i.data?.items]),u=W5(e.pathname),d=h.useMemo(()=>K5(l,u),[l,u]);return h.useEffect(()=>{i.data&&s.setQueryData(dn.list(Su),i.data)},[s,i.data]),h.useEffect(()=>{!i.isLoading&&!i.isError&&l.length===0&&t("/workspaces",{replace:!0})},[i.isLoading,i.isError,l.length,t]),h.useEffect(()=>{d&&!u&&t(`/workspaces/${d.id}/${Vu.path}${e.search}${e.hash}`,{replace:!0})},[d,u,e.search,e.hash,t]),h.useEffect(()=>{if(!(!d||!u)&&u!==d.id){const m=G5(e.pathname,e.search,d.id,u);m!==e.pathname+e.search&&t(m+e.hash,{replace:!0})}},[d,u,e.pathname,e.search,e.hash,t]),h.useEffect(()=>{d&&ew(d.id)},[d]),i.isLoading?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background px-6",children:a.jsx(wt,{title:"Loading workspace",variant:"loading"})}):i.isError?a.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-background px-6 text-center",children:[a.jsx(wt,{title:"Unable to load workspace",description:"We were unable to fetch workspace information. Refresh the page to try again.",variant:"error"}),a.jsx("button",{type:"button",className:"focus-ring rounded-lg border border-border-strong bg-card px-4 py-2 text-sm font-semibold text-muted-foreground hover:bg-muted",onClick:()=>i.refetch(),children:"Retry"})]}):d?a.jsx(mT,{workspace:d,workspaces:l,children:a.jsx(V5,{workspace:d})}):null}function V5({workspace:e}){return a.jsx(T4,{children:a.jsx(O3,{workspaceId:e.id,children:a.jsx(Z5,{workspace:e})})})}function Z5({workspace:e}){const t=yi(),s=Zt(),i=Fn(),{session:l,windowState:u}=Aj(),d=bM(),m=d.data?.enabled??!1,g=d.data?.detail??Sw,x=_w(),[b,v]=h.useState(0),[y,k]=h.useState(null),S=h.useRef(null),j=h.useCallback(U=>{k(U)},[]),N=h.useMemo(()=>Oj(e),[e]),[M,_]=h.useState(""),[R,q]=h.useState(!1),[$,I]=h.useState(!1),D=M.trim().toLowerCase(),C=!!(l&&u==="maximized"),L=h.useMemo(()=>N.map(U=>({id:U.id,label:U.label,description:`Jump to ${U.label}`,icon:a.jsx(U.icon,{className:"h-4 w-4 text-muted-foreground","aria-hidden":!0})})),[N]),V=h.useMemo(()=>Xs(`ade.ui.workspace.${e.id}.navPinned`),[e.id]),K=h.useMemo(()=>Xs(`ade.ui.workspace.${e.id}.navCollapsed`),[e.id]),[A,X]=h.useState(()=>{const U=V.get();if(typeof U=="boolean")return U;const ne=K.get();return typeof ne=="boolean"?!ne:!1});h.useEffect(()=>{const U=V.get();if(typeof U=="boolean"){X(U);return}const ne=K.get();X(typeof ne=="boolean"?!ne:!1)},[V,K]),h.useEffect(()=>{V.set(A)},[A,V]),h.useEffect(()=>{_("")},[e.id]),h.useEffect(()=>{if(typeof window>"u")return;const U=()=>{window.innerWidth>=1024&&q(!1)};return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),h.useEffect(()=>{if(typeof document>"u")return;const U=document.body.style.overflow;return R?document.body.style.overflow="hidden":document.body.style.overflow=U||"",()=>{document.body.style.overflow=U}},[R]),h.useEffect(()=>{C&&q(!1)},[C]),h.useLayoutEffect(()=>{if(C){v(0);return}const U=S.current;if(!U)return;const ne=()=>{const Ne=Math.round(U.getBoundingClientRect().height);v(Ce=>Ce===Ne?Ce:Ne)};if(ne(),typeof ResizeObserver>"u")return;const be=new ResizeObserver(()=>ne());return be.observe(U),()=>be.disconnect()},[C]);const fe=h.useCallback(()=>{if(!D)return;const U=N.find(ne=>ne.label.toLowerCase().includes(D))??N.find(ne=>ne.id.toLowerCase().includes(D));U&&s(U.href)},[D,N,s]),Se=h.useCallback(U=>{const ne=N.find(be=>be.id===U.id);ne&&(s(ne.href),_(""))},[N,s]),z=h.useCallback(()=>q(!0),[]),H=h.useCallback(()=>q(!1),[]),ae=`Switch workspace: ${e.name}`,ge=Y5(e.name),ce=a.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[a.jsx("button",{type:"button",onClick:z,className:"focus-ring inline-flex h-11 w-11 items-center justify-center rounded-xl border border-border/80 bg-card text-muted-foreground shadow-sm lg:hidden","aria-label":"Open workspace navigation",children:a.jsx(J5,{})}),a.jsxs("button",{type:"button",onClick:()=>s("/workspaces"),"aria-label":ae,title:ae,className:re("group inline-flex min-w-0 items-center gap-3 rounded-xl border border-border/80 bg-card px-3 py-2 text-left shadow-sm transition","hover:border-border-strong hover:bg-background","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background"),children:[a.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-brand-500 text-xs font-semibold uppercase text-on-brand shadow-sm transition-colors group-hover:bg-brand-600",children:ge}),a.jsxs("span",{className:"flex min-w-0 flex-col",children:[a.jsx("span",{className:"truncate text-sm font-semibold text-foreground",children:e.name}),a.jsx("span",{className:"hidden text-xs text-muted-foreground sm:block",children:"Switch workspace"})]}),a.jsx("span",{className:"hidden text-muted-foreground sm:inline-flex","aria-hidden":!0,children:a.jsx(X5,{})})]})]}),T=t.user.display_name||t.user.email||"Signed in",G=t.user.email??"",ue=a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nw,{}),a.jsx(Cw,{}),a.jsx(jw,{displayName:T,email:G,actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>I(!0)}]})]}),Y={value:M,onChange:_,onSubmit:fe,placeholder:`Search ${e.name} or jump to a section`,shortcutHint:x,scopeLabel:e.name,suggestions:L,onSelectSuggestion:Se},ee=Q5(i.pathname,e.id),Z=tL(e.id,ee,i.search,i.hash),te=Z?.kind==="content"&&Z.key==="documents",Q=Z?.kind==="content"&&Z.key==="runs",se=te?new URLSearchParams(i.search).get("q")??"":"",ke=Q?new URLSearchParams(i.search).get("q")??"":"",Me=h.useCallback(U=>{if(!te)return;const ne=new URLSearchParams(i.search);U?ne.set("q",U):ne.delete("q");const be=ne.toString();s(`${i.pathname}${be?`?${be}`:""}${i.hash}`,{replace:!0})},[te,i.hash,i.pathname,i.search,s]),We=h.useCallback(U=>{Me(U)},[Me]),st=h.useCallback(()=>{Me("")},[Me]),Ve=te?{value:se,onChange:Me,onSubmit:We,onClear:st,placeholder:"Search documents",shortcutHint:x,scopeLabel:"Documents",enableShortcut:!0}:void 0,$e=h.useCallback(U=>{if(!Q)return;const ne=new URLSearchParams(i.search);U?ne.set("q",U):ne.delete("q");const be=ne.toString();s(`${i.pathname}${be?`?${be}`:""}${i.hash}`,{replace:!0})},[Q,i.hash,i.pathname,i.search,s]),gt=h.useCallback(U=>{$e(U)},[$e]),xt=h.useCallback(()=>{$e("")},[$e]),Qe=Ve??(Q?{value:ke,onChange:$e,onSubmit:gt,onClear:xt,placeholder:"Search runs",shortcutHint:x,scopeLabel:"Runs",enableShortcut:!0}:void 0)??Y;if(h.useEffect(()=>{Z?.kind==="redirect"&&s(Z.to,{replace:!0})},[Z,s]),!Z||Z.kind==="redirect")return null;const O=Z.fullHeight??!1;return a.jsxs(a.Fragment,{children:[a.jsx(kw,{open:$,onClose:()=>I(!1)}),a.jsxs("div",{className:re("flex min-w-0 flex-col bg-background text-foreground h-screen overflow-hidden"),style:{"--workspace-topbar-height":`${b}px`},children:[C?null:a.jsx("div",{ref:S,children:a.jsx(ww,{brand:ce,trailing:ue,search:Qe,scrollContainer:y})}),a.jsxs("div",{className:"relative flex min-h-0 min-w-0 flex-1",children:[C?null:a.jsx(Q3,{workspace:e,items:N,isPinned:A,onTogglePinned:()=>X(U=>!U)}),a.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:[!C&&R?a.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-overlay/40 backdrop-blur-sm",onClick:H,"aria-label":"Close navigation"}),a.jsxs("div",{className:"absolute inset-y-0 left-0 flex h-full w-[min(20rem,85vw)] max-w-xs flex-col rounded-r-3xl border-r border-sidebar-border bg-sidebar text-sidebar-foreground shadow-[0_45px_90px_-50px_rgb(var(--sys-color-shadow)/0.85)]",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-sidebar-border px-4 py-3",children:[a.jsxs("div",{className:"flex flex-col leading-tight",children:[a.jsx("span",{className:"text-sm font-semibold text-sidebar-foreground",children:e.name}),a.jsx("span",{className:"text-xs text-sidebar-foreground",children:"Workspace navigation"})]}),a.jsx("button",{type:"button",onClick:H,className:"focus-ring inline-flex h-9 w-9 items-center justify-center rounded-xl border border-sidebar-border bg-sidebar-item-hover text-sidebar-foreground/80 hover:bg-sidebar-item-active hover:text-sidebar-foreground","aria-label":"Close navigation",children:a.jsx(eL,{})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:a.jsx(zj,{items:N,onNavigate:H,showHeading:!1})})]})]}):null,a.jsx("div",{className:"relative flex min-h-0 min-w-0 flex-1 overflow-hidden",children:a.jsx("main",{id:"main-content",tabIndex:-1,className:re("relative flex-1 min-h-0 min-w-0",O?"flex flex-col overflow-hidden":"overflow-y-auto"),ref:j,children:a.jsxs("div",{className:re(O?"flex w-full flex-1 min-h-0 flex-col px-0 py-0":"mx-auto flex w-full max-w-7xl flex-col px-4 py-6"),children:[m?a.jsx("div",{className:re("mb-4",O?"px-6 pt-4":""),children:a.jsx(Lt,{tone:"warning",heading:"Safe mode active",children:g})}):null,a.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",children:Z.element})]})})},`section-${Z.key}`)]})]})]})]})}function W5(e){return e.match(/^\/workspaces\/([^/]+)/)?.[1]??null}function Q5(e,t){const s=`/workspaces/${t}`;return e.startsWith(s)?e.slice(s.length).split("/").map(l=>l.trim()).filter(l=>l.length>0):[]}function K5(e,t){return t?e.find(s=>s.id===t)??e.find(s=>s.slug===t)??e[0]??null:e[0]??null}function G5(e,t,s,i){const l=`/workspaces/${i}`,u=e.startsWith(l)?e.slice(l.length):"",d=u&&u!=="/"?u:`/${Vu.path}`;return`/workspaces/${s}${d}${t}`}function Y5(e){const t=e.trim().split(/\s+/);return t.length===0?"WS":t.slice(0,2).map(i=>i[0]??"").join("").toUpperCase()}function X5(){return a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:a.jsx("path",{d:"m6 8 4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}function J5(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[a.jsx("path",{d:"M4 6h12",strokeLinecap:"round"}),a.jsx("path",{d:"M4 10h12",strokeLinecap:"round"}),a.jsx("path",{d:"M4 14h8",strokeLinecap:"round"})]})}function eL(){return a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[a.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),a.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function tL(e,t,s,i){const l=`${s}${i}`;if(t.length===0)return{kind:"redirect",to:`/workspaces/${e}/${Vu.path}${l}`};const[u,d,m]=t;switch(u){case"overview":return{kind:"content",key:"overview",element:a.jsx(rO,{})};case Vu.path:case"documents":{if(d){const g=new URLSearchParams(s);g.set("doc",decodeURIComponent(d));const x=g.toString();return{kind:"redirect",to:`/workspaces/${e}/documents${x?`?${x}`:""}${i}`}}return{kind:"content",key:"documents",element:a.jsx(yz,{}),fullHeight:!0}}case"runs":return{kind:"content",key:"runs",element:a.jsx(e5,{}),fullHeight:!0};case"config-builder":return d?m==="editor"?{kind:"content",key:`config-builder:${d}:editor`,element:a.jsx(nL,{configId:decodeURIComponent(d)}),fullHeight:!0}:{kind:"content",key:`config-builder:${d}`,element:a.jsx(l5,{params:{configId:decodeURIComponent(d)}})}:{kind:"content",key:"config-builder",element:a.jsx(o5,{})};case"settings":{const g=t.slice(1),x=g.length>0?g:[];return{kind:"content",key:`settings:${x.length>0?x.join(":"):"general"}`,element:a.jsx(F5,{sectionSegments:x})}}default:return{kind:"content",key:`not-found:${t.join("/")}`,element:a.jsx(wt,{title:"Section not found",description:"The requested workspace section could not be located.",variant:"error"})}}}function nL({configId:e}){return a.jsx(c5,{params:{configId:e}})}function rL(){const e=Zt(),t=Tt();return h.useEffect(()=>{let s=!1;const i=new AbortController;return(async()=>{try{await lN({signal:i.signal})}finally{s||(t.removeQueries({queryKey:fs.root,exact:!1}),e("/login",{replace:!0}))}})().catch(()=>{s||e("/login",{replace:!0})}),()=>{s=!0,i.abort()}},[e,t]),null}function sL(){return a.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col justify-center px-6 py-16 text-center",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-brand-600",children:"404"}),a.jsx("h1",{className:"text-3xl font-semibold text-foreground",children:"Page not found"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["The resource you're looking for doesn't exist yet. Add a screen under ",a.jsx("code",{children:"src/screens/<ScreenName>/"})," and register it inside ",a.jsx("code",{children:"src/app/App.tsx"})," if this surface should exist in the routerless SPA."]}),a.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[a.jsx(km,{to:"/",className:"focus-ring inline-flex items-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-on-brand transition hover:bg-brand-700",children:"Return home"}),a.jsx(km,{to:"/login",className:"focus-ring inline-flex items-center rounded-lg border border-border-strong bg-card px-4 py-2 font-semibold text-muted-foreground hover:bg-background",children:"Go to sign in"})]})]})})}function aL(){return a.jsx(FS,{children:a.jsx(Ok,{children:a.jsx(iL,{})})})}function iL(){const e=Fn(),s=oL(e.pathname).split("/").filter(Boolean);if(s.length===0)return a.jsx(QN,{});const[i,l]=s;switch(i){case"login":return a.jsx(X2,{});case"logout":return a.jsx(rL,{});case"auth":if(l==="callback")return a.jsx(J2,{});break;case"setup":return a.jsx(tM,{});case"workspaces":return l?l==="new"?a.jsx(dT,{}):a.jsx(I5,{}):a.jsx(AM,{});case"documents":return a.jsx(xz,{})}return a.jsx(sL,{})}function oL(e){return!e||e==="/"?"/":e.endsWith("/")&&e.length>1?e.slice(0,-1):e}qS.createRoot(document.getElementById("root")).render(a.jsx(Ft.StrictMode,{children:a.jsx(aL,{})}));export{Ft as W,re as c,a as j,h as r};
