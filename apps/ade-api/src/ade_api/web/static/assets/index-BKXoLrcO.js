(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gf={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function fj(){if(n0)return Kl;n0=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(i,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var h in o)h!=="key"&&(u[h]=o[h])}else u=o;return o=u.ref,{$$typeof:e,type:i,key:d,ref:o!==void 0?o:null,props:u}}return Kl.Fragment=n,Kl.jsx=a,Kl.jsxs=a,Kl}var s0;function hj(){return s0||(s0=1,Gf.exports=fj()),Gf.exports}var l=hj(),Yf={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function mj(){if(a0)return Ke;a0=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function C(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,k={};function T(_,P,le){this.props=_,this.context=P,this.refs=k,this.updater=le||N}T.prototype.isReactComponent={},T.prototype.setState=function(_,P){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,P,"setState")},T.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function E(){}E.prototype=T.prototype;function B(_,P,le){this.props=_,this.context=P,this.refs=k,this.updater=le||N}var Q=B.prototype=new E;Q.constructor=B,j(Q,T.prototype),Q.isPureReactComponent=!0;var O=Array.isArray;function I(){}var A={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function W(_,P,le){var q=le.ref;return{$$typeof:e,type:_,key:P,ref:q!==void 0?q:null,props:le}}function X(_,P){return W(_.type,P,_.props)}function J(_){return typeof _=="object"&&_!==null&&_.$$typeof===e}function L(_){var P={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(le){return P[le]})}var ae=/\/+/g;function de(_,P){return typeof _=="object"&&_!==null&&_.key!=null?L(""+_.key):P.toString(36)}function be(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(I,I):(_.status="pending",_.then(function(P){_.status==="pending"&&(_.status="fulfilled",_.value=P)},function(P){_.status==="pending"&&(_.status="rejected",_.reason=P)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function D(_,P,le,q,ee){var H=typeof _;(H==="undefined"||H==="boolean")&&(_=null);var K=!1;if(_===null)K=!0;else switch(H){case"bigint":case"string":case"number":K=!0;break;case"object":switch(_.$$typeof){case e:case n:K=!0;break;case b:return K=_._init,D(K(_._payload),P,le,q,ee)}}if(K)return ee=ee(_),K=q===""?"."+de(_,0):q,O(ee)?(le="",K!=null&&(le=K.replace(ae,"$&/")+"/"),D(ee,P,le,"",function(ge){return ge})):ee!=null&&(J(ee)&&(ee=X(ee,le+(ee.key==null||_&&_.key===ee.key?"":(""+ee.key).replace(ae,"$&/")+"/")+K)),P.push(ee)),1;K=0;var R=q===""?".":q+":";if(O(_))for(var Z=0;Z<_.length;Z++)q=_[Z],H=R+de(q,Z),K+=D(q,P,le,H,ee);else if(Z=C(_),typeof Z=="function")for(_=Z.call(_),Z=0;!(q=_.next()).done;)q=q.value,H=R+de(q,Z++),K+=D(q,P,le,H,ee);else if(H==="object"){if(typeof _.then=="function")return D(be(_),P,le,q,ee);throw P=String(_),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return K}function U(_,P,le){if(_==null)return _;var q=[],ee=0;return D(_,q,"","",function(H){return P.call(le,H,ee++)}),q}function ie(_){if(_._status===-1){var P=_._result;P=P(),P.then(function(le){(_._status===0||_._status===-1)&&(_._status=1,_._result=le)},function(le){(_._status===0||_._status===-1)&&(_._status=2,_._result=le)}),_._status===-1&&(_._status=0,_._result=P)}if(_._status===1)return _._result.default;throw _._result}var me=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},se={map:U,forEach:function(_,P,le){U(_,function(){P.apply(this,arguments)},le)},count:function(_){var P=0;return U(_,function(){P++}),P},toArray:function(_){return U(_,function(P){return P})||[]},only:function(_){if(!J(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Ke.Activity=v,Ke.Children=se,Ke.Component=T,Ke.Fragment=a,Ke.Profiler=o,Ke.PureComponent=B,Ke.StrictMode=i,Ke.Suspense=g,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(_){return A.H.useMemoCache(_)}},Ke.cache=function(_){return function(){return _.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(_,P,le){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var q=j({},_.props),ee=_.key;if(P!=null)for(H in P.key!==void 0&&(ee=""+P.key),P)!V.call(P,H)||H==="key"||H==="__self"||H==="__source"||H==="ref"&&P.ref===void 0||(q[H]=P[H]);var H=arguments.length-2;if(H===1)q.children=le;else if(1<H){for(var K=Array(H),R=0;R<H;R++)K[R]=arguments[R+2];q.children=K}return W(_.type,ee,q)},Ke.createContext=function(_){return _={$$typeof:d,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:u,_context:_},_},Ke.createElement=function(_,P,le){var q,ee={},H=null;if(P!=null)for(q in P.key!==void 0&&(H=""+P.key),P)V.call(P,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(ee[q]=P[q]);var K=arguments.length-2;if(K===1)ee.children=le;else if(1<K){for(var R=Array(K),Z=0;Z<K;Z++)R[Z]=arguments[Z+2];ee.children=R}if(_&&_.defaultProps)for(q in K=_.defaultProps,K)ee[q]===void 0&&(ee[q]=K[q]);return W(_,H,ee)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(_){return{$$typeof:h,render:_}},Ke.isValidElement=J,Ke.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:ie}},Ke.memo=function(_,P){return{$$typeof:x,type:_,compare:P===void 0?null:P}},Ke.startTransition=function(_){var P=A.T,le={};A.T=le;try{var q=_(),ee=A.S;ee!==null&&ee(le,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(I,me)}catch(H){me(H)}finally{P!==null&&le.types!==null&&(P.types=le.types),A.T=P}},Ke.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ke.use=function(_){return A.H.use(_)},Ke.useActionState=function(_,P,le){return A.H.useActionState(_,P,le)},Ke.useCallback=function(_,P){return A.H.useCallback(_,P)},Ke.useContext=function(_){return A.H.useContext(_)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(_,P){return A.H.useDeferredValue(_,P)},Ke.useEffect=function(_,P){return A.H.useEffect(_,P)},Ke.useEffectEvent=function(_){return A.H.useEffectEvent(_)},Ke.useId=function(){return A.H.useId()},Ke.useImperativeHandle=function(_,P,le){return A.H.useImperativeHandle(_,P,le)},Ke.useInsertionEffect=function(_,P){return A.H.useInsertionEffect(_,P)},Ke.useLayoutEffect=function(_,P){return A.H.useLayoutEffect(_,P)},Ke.useMemo=function(_,P){return A.H.useMemo(_,P)},Ke.useOptimistic=function(_,P){return A.H.useOptimistic(_,P)},Ke.useReducer=function(_,P,le){return A.H.useReducer(_,P,le)},Ke.useRef=function(_){return A.H.useRef(_)},Ke.useState=function(_){return A.H.useState(_)},Ke.useSyncExternalStore=function(_,P,le){return A.H.useSyncExternalStore(_,P,le)},Ke.useTransition=function(){return A.H.useTransition()},Ke.version="19.2.0",Ke}var r0;function Vh(){return r0||(r0=1,Yf.exports=mj()),Yf.exports}var p=Vh();const _t=dv(p);var Xf={exports:{}},Gl={},Jf={exports:{}},eh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function pj(){return i0||(i0=1,(function(e){function n(D,U){var ie=D.length;D.push(U);e:for(;0<ie;){var me=ie-1>>>1,se=D[me];if(0<o(se,U))D[me]=U,D[ie]=se,ie=me;else break e}}function a(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var U=D[0],ie=D.pop();if(ie!==U){D[0]=ie;e:for(var me=0,se=D.length,_=se>>>1;me<_;){var P=2*(me+1)-1,le=D[P],q=P+1,ee=D[q];if(0>o(le,ie))q<se&&0>o(ee,le)?(D[me]=ee,D[q]=ie,me=q):(D[me]=le,D[P]=ie,me=P);else if(q<se&&0>o(ee,ie))D[me]=ee,D[q]=ie,me=q;else break e}}return U}function o(D,U){var ie=D.sortIndex-U.sortIndex;return ie!==0?ie:D.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var g=[],x=[],b=1,v=null,w=3,C=!1,N=!1,j=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Q(D){for(var U=a(x);U!==null;){if(U.callback===null)i(x);else if(U.startTime<=D)i(x),U.sortIndex=U.expirationTime,n(g,U);else break;U=a(x)}}function O(D){if(j=!1,Q(D),!N)if(a(g)!==null)N=!0,I||(I=!0,L());else{var U=a(x);U!==null&&be(O,U.startTime-D)}}var I=!1,A=-1,V=5,W=-1;function X(){return k?!0:!(e.unstable_now()-W<V)}function J(){if(k=!1,I){var D=e.unstable_now();W=D;var U=!0;try{e:{N=!1,j&&(j=!1,E(A),A=-1),C=!0;var ie=w;try{t:{for(Q(D),v=a(g);v!==null&&!(v.expirationTime>D&&X());){var me=v.callback;if(typeof me=="function"){v.callback=null,w=v.priorityLevel;var se=me(v.expirationTime<=D);if(D=e.unstable_now(),typeof se=="function"){v.callback=se,Q(D),U=!0;break t}v===a(g)&&i(g),Q(D)}else i(g);v=a(g)}if(v!==null)U=!0;else{var _=a(x);_!==null&&be(O,_.startTime-D),U=!1}}break e}finally{v=null,w=ie,C=!1}U=void 0}}finally{U?L():I=!1}}}var L;if(typeof B=="function")L=function(){B(J)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,de=ae.port2;ae.port1.onmessage=J,L=function(){de.postMessage(null)}}else L=function(){T(J,0)};function be(D,U){A=T(function(){D(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(D){switch(w){case 1:case 2:case 3:var U=3;break;default:U=w}var ie=w;w=U;try{return D()}finally{w=ie}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ie=w;w=D;try{return U()}finally{w=ie}},e.unstable_scheduleCallback=function(D,U,ie){var me=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?me+ie:me):ie=me,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ie+se,D={id:b++,callback:U,priorityLevel:D,startTime:ie,expirationTime:se,sortIndex:-1},ie>me?(D.sortIndex=ie,n(x,D),a(g)===null&&D===a(x)&&(j?(E(A),A=-1):j=!0,be(O,ie-me))):(D.sortIndex=se,n(g,D),N||C||(N=!0,I||(I=!0,L()))),D},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(D){var U=w;return function(){var ie=w;w=U;try{return D.apply(this,arguments)}finally{w=ie}}}})(eh)),eh}var l0;function gj(){return l0||(l0=1,Jf.exports=pj()),Jf.exports}var th={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function xj(){if(o0)return zn;o0=1;var e=Vh();function n(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:x,implementation:b}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,zn.createPortal=function(g,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(n(299));return u(g,x,null,b)},zn.flushSync=function(g){var x=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=x,i.p=b,i.d.f()}},zn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},zn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},zn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var b=x.as,v=h(b,x.crossOrigin),w=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:C}):b==="script"&&i.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},zn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=h(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},zn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,v=h(b,x.crossOrigin);i.d.L(g,b,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},zn.preloadModule=function(g,x){if(typeof g=="string")if(x){var b=h(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},zn.requestFormReset=function(g){i.d.r(g)},zn.unstable_batchedUpdates=function(g,x){return g(x)},zn.useFormState=function(g,x,b){return d.H.useFormState(g,x,b)},zn.useFormStatus=function(){return d.H.useHostTransitionStatus()},zn.version="19.2.0",zn}var c0;function fv(){if(c0)return th.exports;c0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),th.exports=xj(),th.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function bj(){if(u0)return Gl;u0=1;var e=gj(),n=Vh(),a=fv();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function x(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var r=t,c=s;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),t;if(m===c)return g(f),s;m=m.sibling}throw Error(i(188))}if(r.return!==c.return)r=f,c=m;else{for(var y=!1,S=f.child;S;){if(S===r){y=!0,r=f,c=m;break}if(S===c){y=!0,c=f,r=m;break}S=S.sibling}if(!y){for(S=m.child;S;){if(S===r){y=!0,r=m,c=f;break}if(S===c){y=!0,c=m,r=f;break}S=S.sibling}if(!y)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ae?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList";case W:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case B:return t.displayName||"Context";case E:return(t._context.displayName||"Context")+".Consumer";case Q:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return s=t.displayName||null,s!==null?s:de(t.type)||"Memo";case V:s=t._payload,t=t._init;try{return de(t(s))}catch{}}return null}var be=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},me=[],se=-1;function _(t){return{current:t}}function P(t){0>se||(t.current=me[se],me[se]=null,se--)}function le(t,s){se++,me[se]=t.current,t.current=s}var q=_(null),ee=_(null),H=_(null),K=_(null);function R(t,s){switch(le(H,s),le(ee,t),le(q,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Nx(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Nx(s),t=Ex(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(q),le(q,t)}function Z(){P(q),P(ee),P(H)}function ge(t){t.memoizedState!==null&&le(K,t);var s=q.current,r=Ex(s,t.type);s!==r&&(le(ee,t),le(q,r))}function De(t){ee.current===t&&(P(q),P(ee)),K.current===t&&(P(K),Il._currentValue=ie)}var Ze,st;function ye(t){if(Ze===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ze=s&&s[1]||"",st=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ze+t+st}var Ce=!1;function $e(t,s){if(!t||Ce)return"";Ce=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(oe){var re=oe}Reflect.construct(t,[],ve)}else{try{ve.call()}catch(oe){re=oe}t.call(ve.prototype)}}else{try{throw Error()}catch(oe){re=oe}(ve=t())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),y=m[0],S=m[1];if(y&&S){var z=y.split(`
`),ne=S.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===ne.length)for(c=z.length-1,f=ne.length-1;1<=c&&0<=f&&z[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==ne[f]){var he=`
`+z[c].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=c&&0<=f);break}}}finally{Ce=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ye(r):""}function We(t,s){switch(t.tag){case 26:case 27:case 5:return ye(t.type);case 16:return ye("Lazy");case 13:return t.child!==s&&s!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return $e(t.type,!1);case 11:return $e(t.type.render,!1);case 1:return $e(t.type,!0);case 31:return ye("Activity");default:return""}}function at(t){try{var s="",r=null;do s+=We(t,r),r=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ot=Object.prototype.hasOwnProperty,M=e.unstable_scheduleCallback,Y=e.unstable_cancelCallback,ce=e.unstable_shouldYield,Ee=e.unstable_requestPaint,we=e.unstable_now,Se=e.unstable_getCurrentPriorityLevel,Re=e.unstable_ImmediatePriority,Qe=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,mt=e.unstable_LowPriority,Ne=e.unstable_IdlePriority,Ae=e.log,Fe=e.unstable_setDisableYieldValue,vt=null,Xe=null;function At(t){if(typeof Ae=="function"&&Fe(t),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(vt,t)}catch{}}var Rt=Math.clz32?Math.clz32:_e,Xn=Math.log,ue=Math.LN2;function _e(t){return t>>>=0,t===0?32:31-(Xn(t)/ue|0)|0}var rt=256,Dt=262144,ut=4194304;function pt(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Bt(t,s,r){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=pt(c):(y&=S,y!==0?f=pt(y):r||(r=S&~t,r!==0&&(f=pt(r))))):(S=c&~m,S!==0?f=pt(S):y!==0?f=pt(y):r||(r=c&~t,r!==0&&(f=pt(r)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,r=s&-s,m>=r||m===32&&(r&4194048)!==0)?s:f}function un(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Sn(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tn(){var t=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),t}function gn(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Fn(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Qt(t,s,r,c,f,m){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,z=t.expirationTimes,ne=t.hiddenUpdates;for(r=y&~r;0<r;){var he=31-Rt(r),ve=1<<he;S[he]=0,z[he]=-1;var re=ne[he];if(re!==null)for(ne[he]=null,he=0;he<re.length;he++){var oe=re[he];oe!==null&&(oe.lane&=-536870913)}r&=~ve}c!==0&&Jn(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(y&~s))}function Jn(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-Rt(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function Cn(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var c=31-Rt(r),f=1<<c;f&s|t[c]&s&&(t[c]|=s),r&=~f}}function Hn(t,s){var r=s&-s;return r=(r&42)!==0?1:gs(r),(r&(t.suspendedLanes|s))!==0?0:r}function gs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Zn(){var t=U.p;return t!==0?t:(t=window.event,t===void 0?32:Kx(t.type))}function es(t,s){var r=U.p;try{return U.p=t,s()}finally{U.p=r}}var Ln=Math.random().toString(36).slice(2),nn="__reactFiber$"+Ln,An="__reactProps$"+Ln,Vs="__reactContainer$"+Ln,Ji="__reactEvents$"+Ln,Co="__reactListeners$"+Ln,hr="__reactHandles$"+Ln,ia="__reactResources$"+Ln,mr="__reactMarker$"+Ln;function pr(t){delete t[nn],delete t[An],delete t[Ji],delete t[Co],delete t[hr]}function ka(t){var s=t[nn];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Vs]||r[nn]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Rx(t);t!==null;){if(r=t[nn])return r;t=Rx(t)}return s}t=r,r=t.parentNode}return null}function Is(t){if(t=t[nn]||t[Vs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function _a(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function la(t){var s=t[ia];return s||(s=t[ia]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Zt(t){t[mr]=!0}var Aa=new Set,Xr={};function zs(t,s){Qs(t,s),Qs(t+"Capture",s)}function Qs(t,s){for(Xr[t]=s,t=0;t<s.length;t++)Aa.add(s[t])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gr={},xn={};function No(t){return Ot.call(xn,t)?!0:Ot.call(gr,t)?!1:ot.test(t)?xn[t]=!0:(gr[t]=!0,!1)}function Da(t,s,r){if(No(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Jr(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function ts(t,s,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+c)}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eo(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ps(t,s,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){r=""+y,m.call(this,y)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ws(t){if(!t._valueTracker){var s=Eo(t)?"checked":"value";t._valueTracker=Ps(t,s,""+t[s])}}function ko(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return t&&(c=Eo(t)?t.checked?"true":"false":t.value),t=c,t!==r?(s.setValue(t),!0):!1}function xr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ou=/[\n"\\]/g;function Ue(t){return t.replace(Ou,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ta(t,s,r,c,f,m,y,S){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),s!=null?y==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+bn(s)):t.value!==""+bn(s)&&(t.value=""+bn(s)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),s!=null?tl(t,y,bn(s)):r!=null?tl(t,y,bn(r)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+bn(S):t.removeAttribute("name")}function el(t,s,r,c,f,m,y,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ws(t);return}r=r!=null?""+bn(r):"",s=s!=null?""+bn(s):r,S||s===t.value||(t.value=s),t.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),Ws(t)}function tl(t,s,r){s==="number"&&xr(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ma(t,s,r,c){if(t=t.options,s){s={};for(var f=0;f<r.length;f++)s["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=s.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&c&&(t[r].defaultSelected=!0)}else{for(r=""+bn(r),s=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function Dn(t,s,r){if(s!=null&&(s=""+bn(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+bn(r):""}function Ks(t,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(i(92));if(be(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=bn(s),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),Ws(t)}function Ra(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oa(t,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,r):typeof r!="number"||r===0||Gs.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function br(t,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&r[f]!==c&&oa(t,f,c)}else for(var m in s)s.hasOwnProperty(m)&&oa(t,m,s[m])}function za(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(t){return nl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Tn(){}var Yt=null;function sl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ns=null,ss=null;function ti(t){var s=Is(t);if(s&&(t=s.stateNode)){var r=t[An]||null;e:switch(t=s.stateNode,s.type){case"input":if(Ta(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ue(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==t&&c.form===t.form){var f=c[An]||null;if(!f)throw Error(i(90));Ta(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===t.form&&ko(c)}break e;case"textarea":Dn(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Ma(t,!!r.multiple,s,!1)}}}var ni=!1;function bs(t,s,r){if(ni)return t(s,r);ni=!0;try{var c=t(s);return c}finally{if(ni=!1,(ns!==null||ss!==null)&&(hc(),ns&&(s=ns,t=ss,ss=ns=null,ti(s),t)))for(s=0;s<t.length;s++)ti(t[s])}}function as(t,s){var r=t.stateNode;if(r===null)return null;var c=r[An]||null;if(c===null)return null;r=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),si=!1;if(rs)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){si=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{si=!1}var dn=null,_o=null,al=null;function Ao(){if(al)return al;var t,s=_o,r=s.length,c,f="value"in dn?dn.value:dn.textContent,m=f.length;for(t=0;t<r&&s[t]===f[t];t++);var y=r-t;for(c=1;c<=y&&s[r-c]===f[m-c];c++);return al=f.slice(t,1<c?1-c:void 0)}function Oa(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function vr(){return!0}function rl(){return!1}function Mn(t){function s(r,c,f,m,y){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?vr:rl,this.isPropagationStopped=rl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),s}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=Mn(vs),yr=v({},vs,{view:0,detail:0}),Do=Mn(yr),La,il,wr,ri=v({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wr&&(wr&&t.type==="mousemove"?(La=t.screenX-wr.screenX,il=t.screenY-wr.screenY):il=La=0,wr=t),La)},movementY:function(t){return"movementY"in t?t.movementY:il}}),jr=Mn(ri),Ua=v({},ri,{dataTransfer:0}),ll=Mn(Ua),ol=v({},yr,{relatedTarget:0}),Sr=Mn(ol),Ba=v({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Cr=Mn(Ba),Uu=v({},vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bu=Mn(Uu),$u=v({},vs,{data:0}),To=Mn($u),Os={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Fu[t])?!!s[t]:!1}function cl(){return Hu}var Zu=v({},yr,{key:function(t){if(t.key){var s=Os[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vu=Mn(Zu),Iu=v({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Mn(Iu),Qu=v({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),Pu=Mn(Qu),Wu=v({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ku=Mn(Wu),Gu=v({},ri,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yu=Mn(Gu),Xu=v({},vs,{newState:0,oldState:0}),Ju=Mn(Xu),ed=[9,13,27,32],dl=rs&&"CompositionEvent"in window,Nr=null;rs&&"documentMode"in document&&(Nr=document.documentMode);var fl=rs&&"TextEvent"in window&&!Nr,F=rs&&(!dl||Nr&&8<Nr&&11>=Nr),fe=" ",Te=!1;function Me(t,s){switch(t){case"keyup":return ed.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ve(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $t=!1;function jt(t,s){switch(t){case"compositionend":return Ve(s);case"keypress":return s.which!==32?null:(Te=!0,fe);case"textInput":return t=s.data,t===fe&&Te?null:t;default:return null}}function Rn(t,s){if($t)return t==="compositionend"||!dl&&Me(t,s)?(t=Ao(),al=_o=dn=null,$t=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return F&&s.locale!=="ko"?null:s.data;default:return null}}var Um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Um[t.type]:s==="textarea"}function ii(t,s,r,c){ns?ss?ss.push(c):ss=[c]:ns=c,s=yc(s,"onChange"),0<s.length&&(r=new ai("onChange","change",null,r,c),t.push({event:r,listeners:s}))}var hl=null,ml=null;function $w(t){vx(t,0)}function Mo(t){var s=_a(t);if(ko(s))return t}function Bm(t,s){if(t==="change")return s}var $m=!1;if(rs){var nd;if(rs){var sd="oninput"in document;if(!sd){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),sd=typeof qm.oninput=="function"}nd=sd}else nd=!1;$m=nd&&(!document.documentMode||9<document.documentMode)}function Fm(){hl&&(hl.detachEvent("onpropertychange",Hm),ml=hl=null)}function Hm(t){if(t.propertyName==="value"&&Mo(ml)){var s=[];ii(s,ml,t,sl(t)),bs($w,s)}}function qw(t,s,r){t==="focusin"?(Fm(),hl=s,ml=r,hl.attachEvent("onpropertychange",Hm)):t==="focusout"&&Fm()}function Fw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mo(ml)}function Hw(t,s){if(t==="click")return Mo(s)}function Zw(t,s){if(t==="input"||t==="change")return Mo(s)}function Vw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var is=typeof Object.is=="function"?Object.is:Vw;function pl(t,s){if(is(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!Ot.call(s,f)||!is(t[f],s[f]))return!1}return!0}function Zm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vm(t,s){var r=Zm(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=s&&c>=s)return{node:r,offset:s-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zm(r)}}function Im(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Im(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Qm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=xr(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=xr(t.document)}return s}function ad(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Iw=rs&&"documentMode"in document&&11>=document.documentMode,li=null,rd=null,gl=null,id=!1;function Pm(t,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;id||li==null||li!==xr(c)||(c=li,"selectionStart"in c&&ad(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),gl&&pl(gl,c)||(gl=c,c=yc(rd,"onSelect"),0<c.length&&(s=new ai("onSelect","select",null,s,r),t.push({event:s,listeners:c}),s.target=li)))}function Er(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var oi={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionrun:Er("Transition","TransitionRun"),transitionstart:Er("Transition","TransitionStart"),transitioncancel:Er("Transition","TransitionCancel"),transitionend:Er("Transition","TransitionEnd")},ld={},Wm={};rs&&(Wm=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function kr(t){if(ld[t])return ld[t];if(!oi[t])return t;var s=oi[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Wm)return ld[t]=s[r];return t}var Km=kr("animationend"),Gm=kr("animationiteration"),Ym=kr("animationstart"),Qw=kr("transitionrun"),Pw=kr("transitionstart"),Ww=kr("transitioncancel"),Xm=kr("transitionend"),Jm=new Map,od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");od.push("scrollEnd");function Ls(t,s){Jm.set(t,s),zs(s,[t])}var Ro=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ys=[],ci=0,cd=0;function zo(){for(var t=ci,s=cd=ci=0;s<t;){var r=ys[s];ys[s++]=null;var c=ys[s];ys[s++]=null;var f=ys[s];ys[s++]=null;var m=ys[s];if(ys[s++]=null,c!==null&&f!==null){var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}m!==0&&ep(r,f,m)}}function Oo(t,s,r,c){ys[ci++]=t,ys[ci++]=s,ys[ci++]=r,ys[ci++]=c,cd|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function ud(t,s,r,c){return Oo(t,s,r,c),Lo(t)}function _r(t,s){return Oo(t,null,null,s),Lo(t)}function ep(t,s,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-Rt(r),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[s]:c.push(s),s.lane=r|536870912),m):null}function Lo(t){if(50<Bl)throw Bl=0,yf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ui={};function Kw(t,s,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(t,s,r,c){return new Kw(t,s,r,c)}function dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ca(t,s){var r=t.alternate;return r===null?(r=ls(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function tp(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Uo(t,s,r,c,f,m){var y=0;if(c=t,typeof t=="function")dd(t)&&(y=1);else if(typeof t=="string")y=ej(t,r,q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case W:return t=ls(31,r,s,f),t.elementType=W,t.lanes=m,t;case j:return Ar(r.children,f,m,s);case k:y=8,f|=24;break;case T:return t=ls(12,r,s,f|2),t.elementType=T,t.lanes=m,t;case O:return t=ls(13,r,s,f),t.elementType=O,t.lanes=m,t;case I:return t=ls(19,r,s,f),t.elementType=I,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:y=10;break e;case E:y=9;break e;case Q:y=11;break e;case A:y=14;break e;case V:y=16,c=null;break e}y=29,r=Error(i(130,t===null?"null":typeof t,"")),c=null}return s=ls(y,r,s,f),s.elementType=t,s.type=c,s.lanes=m,s}function Ar(t,s,r,c){return t=ls(7,t,c,s),t.lanes=r,t}function fd(t,s,r){return t=ls(6,t,null,s),t.lanes=r,t}function np(t){var s=ls(18,null,null,0);return s.stateNode=t,s}function hd(t,s,r){return s=ls(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var sp=new WeakMap;function ws(t,s){if(typeof t=="object"&&t!==null){var r=sp.get(t);return r!==void 0?r:(s={value:t,source:s,stack:at(s)},sp.set(t,s),s)}return{value:t,source:s,stack:at(s)}}var di=[],fi=0,Bo=null,xl=0,js=[],Ss=0,$a=null,Xs=1,Js="";function ua(t,s){di[fi++]=xl,di[fi++]=Bo,Bo=t,xl=s}function ap(t,s,r){js[Ss++]=Xs,js[Ss++]=Js,js[Ss++]=$a,$a=t;var c=Xs;t=Js;var f=32-Rt(c)-1;c&=~(1<<f),r+=1;var m=32-Rt(s)+f;if(30<m){var y=f-f%5;m=(c&(1<<y)-1).toString(32),c>>=y,f-=y,Xs=1<<32-Rt(s)+f|r<<f|c,Js=m+t}else Xs=1<<m|r<<f|c,Js=t}function md(t){t.return!==null&&(ua(t,1),ap(t,1,0))}function pd(t){for(;t===Bo;)Bo=di[--fi],di[fi]=null,xl=di[--fi],di[fi]=null;for(;t===$a;)$a=js[--Ss],js[Ss]=null,Js=js[--Ss],js[Ss]=null,Xs=js[--Ss],js[Ss]=null}function rp(t,s){js[Ss++]=Xs,js[Ss++]=Js,js[Ss++]=$a,Xs=s.id,Js=s.overflow,$a=t}var Nn=null,Lt=null,it=!1,qa=null,Cs=!1,gd=Error(i(519));function Fa(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(ws(s,t)),gd}function ip(t){var s=t.stateNode,r=t.type,c=t.memoizedProps;switch(s[nn]=t,s[An]=c,r){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(r=0;r<ql.length;r++)et(ql[r],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),el(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),Ks(s,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||Sx(s.textContent,r)?(c.popover!=null&&(et("beforetoggle",s),et("toggle",s)),c.onScroll!=null&&et("scroll",s),c.onScrollEnd!=null&&et("scrollend",s),c.onClick!=null&&(s.onclick=Tn),s=!0):s=!1,s||Fa(t,!0)}function lp(t){for(Nn=t.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:Nn=Nn.return}}function hi(t){if(t!==Nn)return!1;if(!it)return lp(t),it=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Of(t.type,t.memoizedProps)),r=!r),r&&Lt&&Fa(t),lp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Lt=Mx(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Lt=Mx(t)}else s===27?(s=Lt,tr(t.type)?(t=qf,qf=null,Lt=t):Lt=s):Lt=Nn?Es(t.stateNode.nextSibling):null;return!0}function Dr(){Lt=Nn=null,it=!1}function xd(){var t=qa;return t!==null&&(Pn===null?Pn=t:Pn.push.apply(Pn,t),qa=null),t}function bl(t){qa===null?qa=[t]:qa.push(t)}var bd=_(null),Tr=null,da=null;function Ha(t,s,r){le(bd,s._currentValue),s._currentValue=r}function fa(t){t._currentValue=bd.current,P(bd)}function vd(t,s,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===r)break;t=t.return}}function yd(t,s,r,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var y=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var z=0;z<s.length;z++)if(S.context===s[z]){m.lanes|=r,S=m.alternate,S!==null&&(S.lanes|=r),vd(m.return,r,t),c||(y=null);break e}m=S.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(i(341));y.lanes|=r,m=y.alternate,m!==null&&(m.lanes|=r),vd(y,r,t),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function mi(t,s,r,c){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var S=f.type;is(f.pendingProps.value,y.value)||(t!==null?t.push(S):t=[S])}}else if(f===K.current){if(y=f.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Il):t=[Il])}f=f.return}t!==null&&yd(s,t,r,c),s.flags|=262144}function $o(t){for(t=t.firstContext;t!==null;){if(!is(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mr(t){Tr=t,da=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function En(t){return op(Tr,t)}function qo(t,s){return Tr===null&&Mr(t),op(t,s)}function op(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},da===null){if(t===null)throw Error(i(308));da=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else da=da.next=s;return r}var Gw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},Yw=e.unstable_scheduleCallback,Xw=e.unstable_NormalPriority,sn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wd(){return{controller:new Gw,data:new Map,refCount:0}}function vl(t){t.refCount--,t.refCount===0&&Yw(Xw,function(){t.controller.abort()})}var yl=null,jd=0,pi=0,gi=null;function Jw(t,s){if(yl===null){var r=yl=[];jd=0,pi=Ef(),gi={status:"pending",value:void 0,then:function(c){r.push(c)}}}return jd++,s.then(cp,cp),s}function cp(){if(--jd===0&&yl!==null){gi!==null&&(gi.status="fulfilled");var t=yl;yl=null,pi=0,gi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function e1(t,s){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<r.length;f++)(0,r[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var up=D.S;D.S=function(t,s){Pg=we(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Jw(t,s),up!==null&&up(t,s)};var Rr=_(null);function Sd(){var t=Rr.current;return t!==null?t:Tt.pooledCache}function Fo(t,s){s===null?le(Rr,Rr.current):le(Rr,s.pool)}function dp(){var t=Sd();return t===null?null:{parent:sn._currentValue,pool:t}}var xi=Error(i(460)),Cd=Error(i(474)),Ho=Error(i(542)),Zo={then:function(){}};function fp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hp(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(Tn,Tn),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,pp(t),t;default:if(typeof s.status=="string")s.then(Tn,Tn);else{if(t=Tt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,pp(t),t}throw Or=s,xi}}function zr(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Or=r,xi):r}}var Or=null;function mp(){if(Or===null)throw Error(i(459));var t=Or;return Or=null,t}function pp(t){if(t===xi||t===Ho)throw Error(i(483))}var bi=null,wl=0;function Vo(t){var s=wl;return wl+=1,bi===null&&(bi=[]),hp(bi,t,s)}function jl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Io(t,s){throw s.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function gp(t){function s(G,$){if(t){var te=G.deletions;te===null?(G.deletions=[$],G.flags|=16):te.push($)}}function r(G,$){if(!t)return null;for(;$!==null;)s(G,$),$=$.sibling;return null}function c(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function f(G,$){return G=ca(G,$),G.index=0,G.sibling=null,G}function m(G,$,te){return G.index=te,t?(te=G.alternate,te!==null?(te=te.index,te<$?(G.flags|=67108866,$):te):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function y(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function S(G,$,te,xe){return $===null||$.tag!==6?($=fd(te,G.mode,xe),$.return=G,$):($=f($,te),$.return=G,$)}function z(G,$,te,xe){var Be=te.type;return Be===j?he(G,$,te.props.children,xe,te.key):$!==null&&($.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===V&&zr(Be)===$.type)?($=f($,te.props),jl($,te),$.return=G,$):($=Uo(te.type,te.key,te.props,null,G.mode,xe),jl($,te),$.return=G,$)}function ne(G,$,te,xe){return $===null||$.tag!==4||$.stateNode.containerInfo!==te.containerInfo||$.stateNode.implementation!==te.implementation?($=hd(te,G.mode,xe),$.return=G,$):($=f($,te.children||[]),$.return=G,$)}function he(G,$,te,xe,Be){return $===null||$.tag!==7?($=Ar(te,G.mode,xe,Be),$.return=G,$):($=f($,te),$.return=G,$)}function ve(G,$,te){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=fd(""+$,G.mode,te),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return te=Uo($.type,$.key,$.props,null,G.mode,te),jl(te,$),te.return=G,te;case N:return $=hd($,G.mode,te),$.return=G,$;case V:return $=zr($),ve(G,$,te)}if(be($)||L($))return $=Ar($,G.mode,te,null),$.return=G,$;if(typeof $.then=="function")return ve(G,Vo($),te);if($.$$typeof===B)return ve(G,qo(G,$),te);Io(G,$)}return null}function re(G,$,te,xe){var Be=$!==null?$.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Be!==null?null:S(G,$,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case C:return te.key===Be?z(G,$,te,xe):null;case N:return te.key===Be?ne(G,$,te,xe):null;case V:return te=zr(te),re(G,$,te,xe)}if(be(te)||L(te))return Be!==null?null:he(G,$,te,xe,null);if(typeof te.then=="function")return re(G,$,Vo(te),xe);if(te.$$typeof===B)return re(G,$,qo(G,te),xe);Io(G,te)}return null}function oe(G,$,te,xe,Be){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return G=G.get(te)||null,S($,G,""+xe,Be);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case C:return G=G.get(xe.key===null?te:xe.key)||null,z($,G,xe,Be);case N:return G=G.get(xe.key===null?te:xe.key)||null,ne($,G,xe,Be);case V:return xe=zr(xe),oe(G,$,te,xe,Be)}if(be(xe)||L(xe))return G=G.get(te)||null,he($,G,xe,Be,null);if(typeof xe.then=="function")return oe(G,$,te,Vo(xe),Be);if(xe.$$typeof===B)return oe(G,$,te,qo($,xe),Be);Io($,xe)}return null}function ze(G,$,te,xe){for(var Be=null,dt=null,Le=$,Ye=$=0,nt=null;Le!==null&&Ye<te.length;Ye++){Le.index>Ye?(nt=Le,Le=null):nt=Le.sibling;var ft=re(G,Le,te[Ye],xe);if(ft===null){Le===null&&(Le=nt);break}t&&Le&&ft.alternate===null&&s(G,Le),$=m(ft,$,Ye),dt===null?Be=ft:dt.sibling=ft,dt=ft,Le=nt}if(Ye===te.length)return r(G,Le),it&&ua(G,Ye),Be;if(Le===null){for(;Ye<te.length;Ye++)Le=ve(G,te[Ye],xe),Le!==null&&($=m(Le,$,Ye),dt===null?Be=Le:dt.sibling=Le,dt=Le);return it&&ua(G,Ye),Be}for(Le=c(Le);Ye<te.length;Ye++)nt=oe(Le,G,Ye,te[Ye],xe),nt!==null&&(t&&nt.alternate!==null&&Le.delete(nt.key===null?Ye:nt.key),$=m(nt,$,Ye),dt===null?Be=nt:dt.sibling=nt,dt=nt);return t&&Le.forEach(function(ir){return s(G,ir)}),it&&ua(G,Ye),Be}function qe(G,$,te,xe){if(te==null)throw Error(i(151));for(var Be=null,dt=null,Le=$,Ye=$=0,nt=null,ft=te.next();Le!==null&&!ft.done;Ye++,ft=te.next()){Le.index>Ye?(nt=Le,Le=null):nt=Le.sibling;var ir=re(G,Le,ft.value,xe);if(ir===null){Le===null&&(Le=nt);break}t&&Le&&ir.alternate===null&&s(G,Le),$=m(ir,$,Ye),dt===null?Be=ir:dt.sibling=ir,dt=ir,Le=nt}if(ft.done)return r(G,Le),it&&ua(G,Ye),Be;if(Le===null){for(;!ft.done;Ye++,ft=te.next())ft=ve(G,ft.value,xe),ft!==null&&($=m(ft,$,Ye),dt===null?Be=ft:dt.sibling=ft,dt=ft);return it&&ua(G,Ye),Be}for(Le=c(Le);!ft.done;Ye++,ft=te.next())ft=oe(Le,G,Ye,ft.value,xe),ft!==null&&(t&&ft.alternate!==null&&Le.delete(ft.key===null?Ye:ft.key),$=m(ft,$,Ye),dt===null?Be=ft:dt.sibling=ft,dt=ft);return t&&Le.forEach(function(dj){return s(G,dj)}),it&&ua(G,Ye),Be}function kt(G,$,te,xe){if(typeof te=="object"&&te!==null&&te.type===j&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case C:e:{for(var Be=te.key;$!==null;){if($.key===Be){if(Be=te.type,Be===j){if($.tag===7){r(G,$.sibling),xe=f($,te.props.children),xe.return=G,G=xe;break e}}else if($.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===V&&zr(Be)===$.type){r(G,$.sibling),xe=f($,te.props),jl(xe,te),xe.return=G,G=xe;break e}r(G,$);break}else s(G,$);$=$.sibling}te.type===j?(xe=Ar(te.props.children,G.mode,xe,te.key),xe.return=G,G=xe):(xe=Uo(te.type,te.key,te.props,null,G.mode,xe),jl(xe,te),xe.return=G,G=xe)}return y(G);case N:e:{for(Be=te.key;$!==null;){if($.key===Be)if($.tag===4&&$.stateNode.containerInfo===te.containerInfo&&$.stateNode.implementation===te.implementation){r(G,$.sibling),xe=f($,te.children||[]),xe.return=G,G=xe;break e}else{r(G,$);break}else s(G,$);$=$.sibling}xe=hd(te,G.mode,xe),xe.return=G,G=xe}return y(G);case V:return te=zr(te),kt(G,$,te,xe)}if(be(te))return ze(G,$,te,xe);if(L(te)){if(Be=L(te),typeof Be!="function")throw Error(i(150));return te=Be.call(te),qe(G,$,te,xe)}if(typeof te.then=="function")return kt(G,$,Vo(te),xe);if(te.$$typeof===B)return kt(G,$,qo(G,te),xe);Io(G,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,$!==null&&$.tag===6?(r(G,$.sibling),xe=f($,te),xe.return=G,G=xe):(r(G,$),xe=fd(te,G.mode,xe),xe.return=G,G=xe),y(G)):r(G,$)}return function(G,$,te,xe){try{wl=0;var Be=kt(G,$,te,xe);return bi=null,Be}catch(Le){if(Le===xi||Le===Ho)throw Le;var dt=ls(29,Le,null,G.mode);return dt.lanes=xe,dt.return=G,dt}finally{}}}var Lr=gp(!0),xp=gp(!1),Za=!1;function Nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Va(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(t,s,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(gt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Lo(t),ep(t,null,r),s}return Oo(t,c,s,r),Lo(t)}function Sl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,r|=c,s.lanes=r,Cn(t,r)}}function kd(t,s){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=y:m=m.next=y,r=r.next}while(r!==null);m===null?f=m=s:m=m.next=s}else f=m=s;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var _d=!1;function Cl(){if(_d){var t=gi;if(t!==null)throw t}}function Nl(t,s,r,c){_d=!1;var f=t.updateQueue;Za=!1;var m=f.firstBaseUpdate,y=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var z=S,ne=z.next;z.next=null,y===null?m=ne:y.next=ne,y=z;var he=t.alternate;he!==null&&(he=he.updateQueue,S=he.lastBaseUpdate,S!==y&&(S===null?he.firstBaseUpdate=ne:S.next=ne,he.lastBaseUpdate=z))}if(m!==null){var ve=f.baseState;y=0,he=ne=z=null,S=m;do{var re=S.lane&-536870913,oe=re!==S.lane;if(oe?(tt&re)===re:(c&re)===re){re!==0&&re===pi&&(_d=!0),he!==null&&(he=he.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ze=t,qe=S;re=s;var kt=r;switch(qe.tag){case 1:if(ze=qe.payload,typeof ze=="function"){ve=ze.call(kt,ve,re);break e}ve=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=qe.payload,re=typeof ze=="function"?ze.call(kt,ve,re):ze,re==null)break e;ve=v({},ve,re);break e;case 2:Za=!0}}re=S.callback,re!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:S.tag,payload:S.payload,callback:S.callback,next:null},he===null?(ne=he=oe,z=ve):he=he.next=oe,y|=re;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;oe=S,S=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);he===null&&(z=ve),f.baseState=z,f.firstBaseUpdate=ne,f.lastBaseUpdate=he,m===null&&(f.shared.lanes=0),Ga|=y,t.lanes=y,t.memoizedState=ve}}function bp(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function vp(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)bp(r[t],s)}var vi=_(null),Qo=_(0);function yp(t,s){t=wa,le(Qo,t),le(vi,s),wa=t|s.baseLanes}function Ad(){le(Qo,wa),le(vi,vi.current)}function Dd(){wa=Qo.current,P(vi),P(Qo)}var os=_(null),Ns=null;function Qa(t){var s=t.alternate;le(Xt,Xt.current&1),le(os,t),Ns===null&&(s===null||vi.current!==null||s.memoizedState!==null)&&(Ns=t)}function Td(t){le(Xt,Xt.current),le(os,t),Ns===null&&(Ns=t)}function wp(t){t.tag===22?(le(Xt,Xt.current),le(os,t),Ns===null&&(Ns=t)):Pa()}function Pa(){le(Xt,Xt.current),le(os,os.current)}function cs(t){P(os),Ns===t&&(Ns=null),P(Xt)}var Xt=_(0);function Po(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Bf(r)||$f(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ha=0,Ge=null,Nt=null,an=null,Wo=!1,yi=!1,Ur=!1,Ko=0,El=0,wi=null,t1=0;function Pt(){throw Error(i(321))}function Md(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!is(t[r],s[r]))return!1;return!0}function Rd(t,s,r,c,f,m){return ha=m,Ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=t===null||t.memoizedState===null?ag:Wd,Ur=!1,m=r(c,f),Ur=!1,yi&&(m=Sp(s,r,c,f)),jp(t),m}function jp(t){D.H=Al;var s=Nt!==null&&Nt.next!==null;if(ha=0,an=Nt=Ge=null,Wo=!1,El=0,wi=null,s)throw Error(i(300));t===null||rn||(t=t.dependencies,t!==null&&$o(t)&&(rn=!0))}function Sp(t,s,r,c){Ge=t;var f=0;do{if(yi&&(wi=null),El=0,yi=!1,25<=f)throw Error(i(301));if(f+=1,an=Nt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=rg,m=s(r,c)}while(yi);return m}function n1(){var t=D.H,s=t.useState()[0];return s=typeof s.then=="function"?kl(s):s,t=t.useState()[0],(Nt!==null?Nt.memoizedState:null)!==t&&(Ge.flags|=1024),s}function zd(){var t=Ko!==0;return Ko=0,t}function Od(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Ld(t){if(Wo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Wo=!1}ha=0,an=Nt=Ge=null,yi=!1,El=Ko=0,wi=null}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Ge.memoizedState=an=t:an=an.next=t,an}function Jt(){if(Nt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var s=an===null?Ge.memoizedState:an.next;if(s!==null)an=s,Nt=t;else{if(t===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},an===null?Ge.memoizedState=an=t:an=an.next=t}return an}function Go(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(t){var s=El;return El+=1,wi===null&&(wi=[]),t=hp(wi,t,s),s=Ge,(an===null?s.memoizedState:an.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?ag:Wd),t}function Yo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return kl(t);if(t.$$typeof===B)return En(t)}throw Error(i(438,String(t)))}function Ud(t){var s=null,r=Ge.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=Ge.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Go(),Ge.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),c=0;c<t;c++)r[c]=X;return s.index++,r}function ma(t,s){return typeof s=="function"?s(t):s}function Xo(t){var s=Jt();return Bd(s,Nt,t)}function Bd(t,s,r){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var y=f.next;f.next=m.next,m.next=y}s.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var S=y=null,z=null,ne=s,he=!1;do{var ve=ne.lane&-536870913;if(ve!==ne.lane?(tt&ve)===ve:(ha&ve)===ve){var re=ne.revertLane;if(re===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),ve===pi&&(he=!0);else if((ha&re)===re){ne=ne.next,re===pi&&(he=!0);continue}else ve={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},z===null?(S=z=ve,y=m):z=z.next=ve,Ge.lanes|=re,Ga|=re;ve=ne.action,Ur&&r(m,ve),m=ne.hasEagerState?ne.eagerState:r(m,ve)}else re={lane:ve,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},z===null?(S=z=re,y=m):z=z.next=re,Ge.lanes|=ve,Ga|=ve;ne=ne.next}while(ne!==null&&ne!==s);if(z===null?y=m:z.next=S,!is(m,t.memoizedState)&&(rn=!0,he&&(r=gi,r!==null)))throw r;t.memoizedState=m,t.baseState=y,t.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function $d(t){var s=Jt(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var c=r.dispatch,f=r.pending,m=s.memoizedState;if(f!==null){r.pending=null;var y=f=f.next;do m=t(m,y.action),y=y.next;while(y!==f);is(m,s.memoizedState)||(rn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),r.lastRenderedState=m}return[m,c]}function Cp(t,s,r){var c=Ge,f=Jt(),m=it;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=s();var y=!is((Nt||f).memoizedState,r);if(y&&(f.memoizedState=r,rn=!0),f=f.queue,Hd(kp.bind(null,c,f,t),[t]),f.getSnapshot!==s||y||an!==null&&an.memoizedState.tag&1){if(c.flags|=2048,ji(9,{destroy:void 0},Ep.bind(null,c,f,r,s),null),Tt===null)throw Error(i(349));m||(ha&127)!==0||Np(c,s,r)}return r}function Np(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ge.updateQueue,s===null?(s=Go(),Ge.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Ep(t,s,r,c){s.value=r,s.getSnapshot=c,_p(s)&&Ap(t)}function kp(t,s,r){return r(function(){_p(s)&&Ap(t)})}function _p(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!is(t,r)}catch{return!0}}function Ap(t){var s=_r(t,2);s!==null&&Wn(s,t,2)}function qd(t){var s=Un();if(typeof t=="function"){var r=t;if(t=r(),Ur){At(!0);try{r()}finally{At(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},s}function Dp(t,s,r,c){return t.baseState=r,Bd(t,Nt,typeof c=="function"?c:ma)}function s1(t,s,r,c,f){if(tc(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){m.listeners.push(y)}};D.T!==null?r(!0):m.isTransition=!1,c(m),r=s.pending,r===null?(m.next=s.pending=m,Tp(s,m)):(m.next=r.next,s.pending=r.next=m)}}function Tp(t,s){var r=s.action,c=s.payload,f=t.state;if(s.isTransition){var m=D.T,y={};D.T=y;try{var S=r(f,c),z=D.S;z!==null&&z(y,S),Mp(t,s,S)}catch(ne){Fd(t,s,ne)}finally{m!==null&&y.types!==null&&(m.types=y.types),D.T=m}}else try{m=r(f,c),Mp(t,s,m)}catch(ne){Fd(t,s,ne)}}function Mp(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Rp(t,s,c)},function(c){return Fd(t,s,c)}):Rp(t,s,r)}function Rp(t,s,r){s.status="fulfilled",s.value=r,zp(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,Tp(t,r)))}function Fd(t,s,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,zp(s),s=s.next;while(s!==c)}t.action=null}function zp(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Op(t,s){return s}function Lp(t,s){if(it){var r=Tt.formState;if(r!==null){e:{var c=Ge;if(it){if(Lt){t:{for(var f=Lt,m=Cs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Es(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Lt=Es(f.nextSibling),c=f.data==="F!";break e}}Fa(c)}c=!1}c&&(s=r[0])}}return r=Un(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:s},r.queue=c,r=tg.bind(null,Ge,c),c.dispatch=r,c=qd(!1),m=Pd.bind(null,Ge,!1,c.queue),c=Un(),f={state:s,dispatch:null,action:t,pending:null},c.queue=f,r=s1.bind(null,Ge,f,m,r),f.dispatch=r,c.memoizedState=t,[s,r,!1]}function Up(t){var s=Jt();return Bp(s,Nt,t)}function Bp(t,s,r){if(s=Bd(t,s,Op)[0],t=Xo(ma)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=kl(s)}catch(y){throw y===xi?Ho:y}else c=s;s=Jt();var f=s.queue,m=f.dispatch;return r!==s.memoizedState&&(Ge.flags|=2048,ji(9,{destroy:void 0},a1.bind(null,f,r),null)),[c,m,t]}function a1(t,s){t.action=s}function $p(t){var s=Jt(),r=Nt;if(r!==null)return Bp(s,r,t);Jt(),s=s.memoizedState,r=Jt();var c=r.queue.dispatch;return r.memoizedState=t,[s,c,!1]}function ji(t,s,r,c){return t={tag:t,create:r,deps:c,inst:s,next:null},s=Ge.updateQueue,s===null&&(s=Go(),Ge.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,s.lastEffect=t),t}function qp(){return Jt().memoizedState}function Jo(t,s,r,c){var f=Un();Ge.flags|=t,f.memoizedState=ji(1|s,{destroy:void 0},r,c===void 0?null:c)}function ec(t,s,r,c){var f=Jt();c=c===void 0?null:c;var m=f.memoizedState.inst;Nt!==null&&c!==null&&Md(c,Nt.memoizedState.deps)?f.memoizedState=ji(s,m,r,c):(Ge.flags|=t,f.memoizedState=ji(1|s,m,r,c))}function Fp(t,s){Jo(8390656,8,t,s)}function Hd(t,s){ec(2048,8,t,s)}function r1(t){Ge.flags|=4;var s=Ge.updateQueue;if(s===null)s=Go(),Ge.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function Hp(t){var s=Jt().memoizedState;return r1({ref:s,nextImpl:t}),function(){if((gt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Zp(t,s){return ec(4,2,t,s)}function Vp(t,s){return ec(4,4,t,s)}function Ip(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Qp(t,s,r){r=r!=null?r.concat([t]):null,ec(4,4,Ip.bind(null,s,t),r)}function Zd(){}function Pp(t,s){var r=Jt();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&Md(s,c[1])?c[0]:(r.memoizedState=[t,s],t)}function Wp(t,s){var r=Jt();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&Md(s,c[1]))return c[0];if(c=t(),Ur){At(!0);try{t()}finally{At(!1)}}return r.memoizedState=[c,s],c}function Vd(t,s,r){return r===void 0||(ha&1073741824)!==0&&(tt&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=Kg(),Ge.lanes|=t,Ga|=t,r)}function Kp(t,s,r,c){return is(r,s)?r:vi.current!==null?(t=Vd(t,r,c),is(t,s)||(rn=!0),t):(ha&42)===0||(ha&1073741824)!==0&&(tt&261930)===0?(rn=!0,t.memoizedState=r):(t=Kg(),Ge.lanes|=t,Ga|=t,s)}function Gp(t,s,r,c,f){var m=U.p;U.p=m!==0&&8>m?m:8;var y=D.T,S={};D.T=S,Pd(t,!1,s,r);try{var z=f(),ne=D.S;if(ne!==null&&ne(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var he=e1(z,c);_l(t,s,he,fs(t))}else _l(t,s,c,fs(t))}catch(ve){_l(t,s,{then:function(){},status:"rejected",reason:ve},fs())}finally{U.p=m,y!==null&&S.types!==null&&(y.types=S.types),D.T=y}}function i1(){}function Id(t,s,r,c){if(t.tag!==5)throw Error(i(476));var f=Yp(t).queue;Gp(t,f,s,ie,r===null?i1:function(){return Xp(t),r(c)})}function Yp(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:ie},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Xp(t){var s=Yp(t);s.next===null&&(s=t.alternate.memoizedState),_l(t,s.next.queue,{},fs())}function Qd(){return En(Il)}function Jp(){return Jt().memoizedState}function eg(){return Jt().memoizedState}function l1(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=fs();t=Va(r);var c=Ia(s,t,r);c!==null&&(Wn(c,s,r),Sl(c,s,r)),s={cache:wd()},t.payload=s;return}s=s.return}}function o1(t,s,r){var c=fs();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},tc(t)?ng(s,r):(r=ud(t,s,r,c),r!==null&&(Wn(r,t,c),sg(r,s,c)))}function tg(t,s,r){var c=fs();_l(t,s,r,c)}function _l(t,s,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(tc(t))ng(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var y=s.lastRenderedState,S=m(y,r);if(f.hasEagerState=!0,f.eagerState=S,is(S,y))return Oo(t,s,f,0),Tt===null&&zo(),!1}catch{}finally{}if(r=ud(t,s,f,c),r!==null)return Wn(r,t,c),sg(r,s,c),!0}return!1}function Pd(t,s,r,c){if(c={lane:2,revertLane:Ef(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},tc(t)){if(s)throw Error(i(479))}else s=ud(t,r,c,2),s!==null&&Wn(s,t,2)}function tc(t){var s=t.alternate;return t===Ge||s!==null&&s===Ge}function ng(t,s){yi=Wo=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function sg(t,s,r){if((r&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,r|=c,s.lanes=r,Cn(t,r)}}var Al={readContext:En,use:Yo,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Al.useEffectEvent=Pt;var ag={readContext:En,use:Yo,useCallback:function(t,s){return Un().memoizedState=[t,s===void 0?null:s],t},useContext:En,useEffect:Fp,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Jo(4194308,4,Ip.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Jo(4194308,4,t,s)},useInsertionEffect:function(t,s){Jo(4,2,t,s)},useMemo:function(t,s){var r=Un();s=s===void 0?null:s;var c=t();if(Ur){At(!0);try{t()}finally{At(!1)}}return r.memoizedState=[c,s],c},useReducer:function(t,s,r){var c=Un();if(r!==void 0){var f=r(s);if(Ur){At(!0);try{r(s)}finally{At(!1)}}}else f=s;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=o1.bind(null,Ge,t),[c.memoizedState,t]},useRef:function(t){var s=Un();return t={current:t},s.memoizedState=t},useState:function(t){t=qd(t);var s=t.queue,r=tg.bind(null,Ge,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:Zd,useDeferredValue:function(t,s){var r=Un();return Vd(r,t,s)},useTransition:function(){var t=qd(!1);return t=Gp.bind(null,Ge,t.queue,!0,!1),Un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var c=Ge,f=Un();if(it){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Tt===null)throw Error(i(349));(tt&127)!==0||Np(c,s,r)}f.memoizedState=r;var m={value:r,getSnapshot:s};return f.queue=m,Fp(kp.bind(null,c,m,t),[t]),c.flags|=2048,ji(9,{destroy:void 0},Ep.bind(null,c,m,r,s),null),r},useId:function(){var t=Un(),s=Tt.identifierPrefix;if(it){var r=Js,c=Xs;r=(c&~(1<<32-Rt(c)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Ko++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=t1++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Qd,useFormState:Lp,useActionState:Lp,useOptimistic:function(t){var s=Un();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Pd.bind(null,Ge,!0,r),r.dispatch=s,[t,s]},useMemoCache:Ud,useCacheRefresh:function(){return Un().memoizedState=l1.bind(null,Ge)},useEffectEvent:function(t){var s=Un(),r={impl:t};return s.memoizedState=r,function(){if((gt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Wd={readContext:En,use:Yo,useCallback:Pp,useContext:En,useEffect:Hd,useImperativeHandle:Qp,useInsertionEffect:Zp,useLayoutEffect:Vp,useMemo:Wp,useReducer:Xo,useRef:qp,useState:function(){return Xo(ma)},useDebugValue:Zd,useDeferredValue:function(t,s){var r=Jt();return Kp(r,Nt.memoizedState,t,s)},useTransition:function(){var t=Xo(ma)[0],s=Jt().memoizedState;return[typeof t=="boolean"?t:kl(t),s]},useSyncExternalStore:Cp,useId:Jp,useHostTransitionStatus:Qd,useFormState:Up,useActionState:Up,useOptimistic:function(t,s){var r=Jt();return Dp(r,Nt,t,s)},useMemoCache:Ud,useCacheRefresh:eg};Wd.useEffectEvent=Hp;var rg={readContext:En,use:Yo,useCallback:Pp,useContext:En,useEffect:Hd,useImperativeHandle:Qp,useInsertionEffect:Zp,useLayoutEffect:Vp,useMemo:Wp,useReducer:$d,useRef:qp,useState:function(){return $d(ma)},useDebugValue:Zd,useDeferredValue:function(t,s){var r=Jt();return Nt===null?Vd(r,t,s):Kp(r,Nt.memoizedState,t,s)},useTransition:function(){var t=$d(ma)[0],s=Jt().memoizedState;return[typeof t=="boolean"?t:kl(t),s]},useSyncExternalStore:Cp,useId:Jp,useHostTransitionStatus:Qd,useFormState:$p,useActionState:$p,useOptimistic:function(t,s){var r=Jt();return Nt!==null?Dp(r,Nt,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:eg};rg.useEffectEvent=Hp;function Kd(t,s,r,c){s=t.memoizedState,r=r(c,s),r=r==null?s:v({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gd={enqueueSetState:function(t,s,r){t=t._reactInternals;var c=fs(),f=Va(c);f.payload=s,r!=null&&(f.callback=r),s=Ia(t,f,c),s!==null&&(Wn(s,t,c),Sl(s,t,c))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var c=fs(),f=Va(c);f.tag=1,f.payload=s,r!=null&&(f.callback=r),s=Ia(t,f,c),s!==null&&(Wn(s,t,c),Sl(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=fs(),c=Va(r);c.tag=2,s!=null&&(c.callback=s),s=Ia(t,c,r),s!==null&&(Wn(s,t,r),Sl(s,t,r))}};function ig(t,s,r,c,f,m,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,y):s.prototype&&s.prototype.isPureReactComponent?!pl(r,c)||!pl(f,m):!0}function lg(t,s,r,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==t&&Gd.enqueueReplaceState(s,s.state,null)}function Br(t,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(t=t.defaultProps){r===s&&(r=v({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function og(t){Ro(t)}function cg(t){console.error(t)}function ug(t){Ro(t)}function nc(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function dg(t,s,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Yd(t,s,r){return r=Va(r),r.tag=3,r.payload={element:null},r.callback=function(){nc(t,s)},r}function fg(t){return t=Va(t),t.tag=3,t}function hg(t,s,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){dg(s,r,c)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){dg(s,r,c),typeof f!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function c1(t,s,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&mi(s,r,f,!0),r=os.current,r!==null){switch(r.tag){case 31:case 13:return Ns===null?mc():r.alternate===null&&Wt===0&&(Wt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Zo?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),Sf(t,c,f)),!1;case 22:return r.flags|=65536,c===Zo?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),Sf(t,c,f)),!1}throw Error(i(435,r.tag))}return Sf(t,c,f),mc(),!1}if(it)return s=os.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==gd&&(t=Error(i(422),{cause:c}),bl(ws(t,r)))):(c!==gd&&(s=Error(i(423),{cause:c}),bl(ws(s,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=ws(c,r),f=Yd(t.stateNode,c,f),kd(t,f),Wt!==4&&(Wt=2)),!1;var m=Error(i(520),{cause:c});if(m=ws(m,r),Ul===null?Ul=[m]:Ul.push(m),Wt!==4&&(Wt=2),s===null)return!0;c=ws(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Yd(r.stateNode,c,t),kd(r,t),!1;case 1:if(s=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ya===null||!Ya.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=fg(f),hg(f,t,r,c),kd(r,f),!1}r=r.return}while(r!==null);return!1}var Xd=Error(i(461)),rn=!1;function kn(t,s,r,c){s.child=t===null?xp(s,null,r,c):Lr(s,t.child,r,c)}function mg(t,s,r,c,f){r=r.render;var m=s.ref;if("ref"in c){var y={};for(var S in c)S!=="ref"&&(y[S]=c[S])}else y=c;return Mr(s),c=Rd(t,s,r,y,m,f),S=zd(),t!==null&&!rn?(Od(t,s,f),pa(t,s,f)):(it&&S&&md(s),s.flags|=1,kn(t,s,c,f),s.child)}function pg(t,s,r,c,f){if(t===null){var m=r.type;return typeof m=="function"&&!dd(m)&&m.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=m,gg(t,s,m,c,f)):(t=Uo(r.type,null,c,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!lf(t,f)){var y=m.memoizedProps;if(r=r.compare,r=r!==null?r:pl,r(y,c)&&t.ref===s.ref)return pa(t,s,f)}return s.flags|=1,t=ca(m,c),t.ref=s.ref,t.return=s,s.child=t}function gg(t,s,r,c,f){if(t!==null){var m=t.memoizedProps;if(pl(m,c)&&t.ref===s.ref)if(rn=!1,s.pendingProps=c=m,lf(t,f))(t.flags&131072)!==0&&(rn=!0);else return s.lanes=t.lanes,pa(t,s,f)}return Jd(t,s,r,c,f)}function xg(t,s,r,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(c=s.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,s.child=null;return bg(t,s,m,r,c)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fo(s,m!==null?m.cachePool:null),m!==null?yp(s,m):Ad(),wp(s);else return c=s.lanes=536870912,bg(t,s,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(Fo(s,m.cachePool),yp(s,m),Pa(),s.memoizedState=null):(t!==null&&Fo(s,null),Ad(),Pa());return kn(t,s,f,r),s.child}function Dl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function bg(t,s,r,c,f){var m=Sd();return m=m===null?null:{parent:sn._currentValue,pool:m},s.memoizedState={baseLanes:r,cachePool:m},t!==null&&Fo(s,null),Ad(),wp(s),t!==null&&mi(t,s,c,!0),s.childLanes=f,null}function sc(t,s){return s=rc({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function vg(t,s,r){return Lr(s,t.child,null,r),t=sc(s,s.pendingProps),t.flags|=2,cs(s),s.memoizedState=null,t}function u1(t,s,r){var c=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(it){if(c.mode==="hidden")return t=sc(s,c),s.lanes=536870912,Dl(null,t);if(Td(s),(t=Lt)?(t=Tx(t,Cs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:$a!==null?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},r=np(t),r.return=s,s.child=r,Nn=s,Lt=null)):t=null,t===null)throw Fa(s);return s.lanes=536870912,null}return sc(s,c)}var m=t.memoizedState;if(m!==null){var y=m.dehydrated;if(Td(s),f)if(s.flags&256)s.flags&=-257,s=vg(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(rn||mi(t,s,r,!1),f=(r&t.childLanes)!==0,rn||f){if(c=Tt,c!==null&&(y=Hn(c,r),y!==0&&y!==m.retryLane))throw m.retryLane=y,_r(t,y),Wn(c,t,y),Xd;mc(),s=vg(t,s,r)}else t=m.treeContext,Lt=Es(y.nextSibling),Nn=s,it=!0,qa=null,Cs=!1,t!==null&&rp(s,t),s=sc(s,c),s.flags|=4096;return s}return t=ca(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function ac(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function Jd(t,s,r,c,f){return Mr(s),r=Rd(t,s,r,c,void 0,f),c=zd(),t!==null&&!rn?(Od(t,s,f),pa(t,s,f)):(it&&c&&md(s),s.flags|=1,kn(t,s,r,f),s.child)}function yg(t,s,r,c,f,m){return Mr(s),s.updateQueue=null,r=Sp(s,c,r,f),jp(t),c=zd(),t!==null&&!rn?(Od(t,s,m),pa(t,s,m)):(it&&c&&md(s),s.flags|=1,kn(t,s,r,m),s.child)}function wg(t,s,r,c,f){if(Mr(s),s.stateNode===null){var m=ui,y=r.contextType;typeof y=="object"&&y!==null&&(m=En(y)),m=new r(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Gd,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},Nd(s),y=r.contextType,m.context=typeof y=="object"&&y!==null?En(y):ui,m.state=s.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(Kd(s,r,y,c),m.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(y=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),y!==m.state&&Gd.enqueueReplaceState(m,m.state,null),Nl(s,c,m,f),Cl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){m=s.stateNode;var S=s.memoizedProps,z=Br(r,S);m.props=z;var ne=m.context,he=r.contextType;y=ui,typeof he=="object"&&he!==null&&(y=En(he));var ve=r.getDerivedStateFromProps;he=typeof ve=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ne!==y)&&lg(s,m,c,y),Za=!1;var re=s.memoizedState;m.state=re,Nl(s,c,m,f),Cl(),ne=s.memoizedState,S||re!==ne||Za?(typeof ve=="function"&&(Kd(s,r,ve,c),ne=s.memoizedState),(z=Za||ig(s,r,z,c,re,ne,y))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ne),m.props=c,m.state=ne,m.context=y,c=z):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,Ed(t,s),y=s.memoizedProps,he=Br(r,y),m.props=he,ve=s.pendingProps,re=m.context,ne=r.contextType,z=ui,typeof ne=="object"&&ne!==null&&(z=En(ne)),S=r.getDerivedStateFromProps,(ne=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y!==ve||re!==z)&&lg(s,m,c,z),Za=!1,re=s.memoizedState,m.state=re,Nl(s,c,m,f),Cl();var oe=s.memoizedState;y!==ve||re!==oe||Za||t!==null&&t.dependencies!==null&&$o(t.dependencies)?(typeof S=="function"&&(Kd(s,r,S,c),oe=s.memoizedState),(he=Za||ig(s,r,he,c,re,oe,z)||t!==null&&t.dependencies!==null&&$o(t.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,oe,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,oe,z)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||y===t.memoizedProps&&re===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&re===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=oe),m.props=c,m.state=oe,m.context=z,c=he):(typeof m.componentDidUpdate!="function"||y===t.memoizedProps&&re===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&re===t.memoizedState||(s.flags|=1024),c=!1)}return m=c,ac(t,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&c?(s.child=Lr(s,t.child,null,f),s.child=Lr(s,null,r,f)):kn(t,s,r,f),s.memoizedState=m.state,t=s.child):t=pa(t,s,f),t}function jg(t,s,r,c){return Dr(),s.flags|=256,kn(t,s,r,c),s.child}var ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tf(t){return{baseLanes:t,cachePool:dp()}}function nf(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=ds),t}function Sg(t,s,r){var c=s.pendingProps,f=!1,m=(s.flags&128)!==0,y;if((y=m)||(y=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),y&&(f=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,t===null){if(it){if(f?Qa(s):Pa(),(t=Lt)?(t=Tx(t,Cs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:$a!==null?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},r=np(t),r.return=s,s.child=r,Nn=s,Lt=null)):t=null,t===null)throw Fa(s);return $f(t)?s.lanes=32:s.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Pa(),f=s.mode,S=rc({mode:"hidden",children:S},f),c=Ar(c,f,r,null),S.return=s,c.return=s,S.sibling=c,s.child=S,c=s.child,c.memoizedState=tf(r),c.childLanes=nf(t,y,r),s.memoizedState=ef,Dl(null,c)):(Qa(s),sf(s,S))}var z=t.memoizedState;if(z!==null&&(S=z.dehydrated,S!==null)){if(m)s.flags&256?(Qa(s),s.flags&=-257,s=af(t,s,r)):s.memoizedState!==null?(Pa(),s.child=t.child,s.flags|=128,s=null):(Pa(),S=c.fallback,f=s.mode,c=rc({mode:"visible",children:c.children},f),S=Ar(S,f,r,null),S.flags|=2,c.return=s,S.return=s,c.sibling=S,s.child=c,Lr(s,t.child,null,r),c=s.child,c.memoizedState=tf(r),c.childLanes=nf(t,y,r),s.memoizedState=ef,s=Dl(null,c));else if(Qa(s),$f(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var ne=y.dgst;y=ne,c=Error(i(419)),c.stack="",c.digest=y,bl({value:c,source:null,stack:null}),s=af(t,s,r)}else if(rn||mi(t,s,r,!1),y=(r&t.childLanes)!==0,rn||y){if(y=Tt,y!==null&&(c=Hn(y,r),c!==0&&c!==z.retryLane))throw z.retryLane=c,_r(t,c),Wn(y,t,c),Xd;Bf(S)||mc(),s=af(t,s,r)}else Bf(S)?(s.flags|=192,s.child=t.child,s=null):(t=z.treeContext,Lt=Es(S.nextSibling),Nn=s,it=!0,qa=null,Cs=!1,t!==null&&rp(s,t),s=sf(s,c.children),s.flags|=4096);return s}return f?(Pa(),S=c.fallback,f=s.mode,z=t.child,ne=z.sibling,c=ca(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,ne!==null?S=ca(ne,S):(S=Ar(S,f,r,null),S.flags|=2),S.return=s,c.return=s,c.sibling=S,s.child=c,Dl(null,c),c=s.child,S=t.child.memoizedState,S===null?S=tf(r):(f=S.cachePool,f!==null?(z=sn._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=dp(),S={baseLanes:S.baseLanes|r,cachePool:f}),c.memoizedState=S,c.childLanes=nf(t,y,r),s.memoizedState=ef,Dl(t.child,c)):(Qa(s),r=t.child,t=r.sibling,r=ca(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,t!==null&&(y=s.deletions,y===null?(s.deletions=[t],s.flags|=16):y.push(t)),s.child=r,s.memoizedState=null,r)}function sf(t,s){return s=rc({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function rc(t,s){return t=ls(22,t,null,s),t.lanes=0,t}function af(t,s,r){return Lr(s,t.child,null,r),t=sf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Cg(t,s,r){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),vd(t.return,s,r)}function rf(t,s,r,c,f,m){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=r,y.tailMode=f,y.treeForkCount=m)}function Ng(t,s,r){var c=s.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var y=Xt.current,S=(y&2)!==0;if(S?(y=y&1|2,s.flags|=128):y&=1,le(Xt,y),kn(t,s,c,r),c=it?xl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cg(t,r,s);else if(t.tag===19)Cg(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=s.child,f=null;r!==null;)t=r.alternate,t!==null&&Po(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=s.child,s.child=null):(f=r.sibling,r.sibling=null),rf(s,!1,f,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Po(t)===null){s.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}rf(s,!0,r,null,m,c);break;case"together":rf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function pa(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Ga|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(mi(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,r=ca(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=ca(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function lf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&$o(t)))}function d1(t,s,r){switch(s.tag){case 3:R(s,s.stateNode.containerInfo),Ha(s,sn,t.memoizedState.cache),Dr();break;case 27:case 5:ge(s);break;case 4:R(s,s.stateNode.containerInfo);break;case 10:Ha(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Td(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Qa(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Sg(t,s,r):(Qa(s),t=pa(t,s,r),t!==null?t.sibling:null);Qa(s);break;case 19:var f=(t.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(mi(t,s,r,!1),c=(r&s.childLanes)!==0),f){if(c)return Ng(t,s,r);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Xt,Xt.current),c)break;return null;case 22:return s.lanes=0,xg(t,s,r,s.pendingProps);case 24:Ha(s,sn,t.memoizedState.cache)}return pa(t,s,r)}function Eg(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)rn=!0;else{if(!lf(t,r)&&(s.flags&128)===0)return rn=!1,d1(t,s,r);rn=(t.flags&131072)!==0}else rn=!1,it&&(s.flags&1048576)!==0&&ap(s,xl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=zr(s.elementType),s.type=t,typeof t=="function")dd(t)?(c=Br(t,c),s.tag=1,s=wg(null,s,t,c,r)):(s.tag=0,s=Jd(null,s,t,c,r));else{if(t!=null){var f=t.$$typeof;if(f===Q){s.tag=11,s=mg(null,s,t,c,r);break e}else if(f===A){s.tag=14,s=pg(null,s,t,c,r);break e}}throw s=de(t)||t,Error(i(306,s,""))}}return s;case 0:return Jd(t,s,s.type,s.pendingProps,r);case 1:return c=s.type,f=Br(c,s.pendingProps),wg(t,s,c,f,r);case 3:e:{if(R(s,s.stateNode.containerInfo),t===null)throw Error(i(387));c=s.pendingProps;var m=s.memoizedState;f=m.element,Ed(t,s),Nl(s,c,null,r);var y=s.memoizedState;if(c=y.cache,Ha(s,sn,c),c!==m.cache&&yd(s,[sn],r,!0),Cl(),c=y.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=jg(t,s,c,r);break e}else if(c!==f){f=ws(Error(i(424)),s),bl(f),s=jg(t,s,c,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Lt=Es(t.firstChild),Nn=s,it=!0,qa=null,Cs=!0,r=xp(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Dr(),c===f){s=pa(t,s,r);break e}kn(t,s,c,r)}s=s.child}return s;case 26:return ac(t,s),t===null?(r=Ux(s.type,null,s.pendingProps,null))?s.memoizedState=r:it||(r=s.type,t=s.pendingProps,c=wc(H.current).createElement(r),c[nn]=s,c[An]=t,_n(c,r,t),Zt(c),s.stateNode=c):s.memoizedState=Ux(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ge(s),t===null&&it&&(c=s.stateNode=zx(s.type,s.pendingProps,H.current),Nn=s,Cs=!0,f=Lt,tr(s.type)?(qf=f,Lt=Es(c.firstChild)):Lt=f),kn(t,s,s.pendingProps.children,r),ac(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&it&&((f=c=Lt)&&(c=F1(c,s.type,s.pendingProps,Cs),c!==null?(s.stateNode=c,Nn=s,Lt=Es(c.firstChild),Cs=!1,f=!0):f=!1),f||Fa(s)),ge(s),f=s.type,m=s.pendingProps,y=t!==null?t.memoizedProps:null,c=m.children,Of(f,m)?c=null:y!==null&&Of(f,y)&&(s.flags|=32),s.memoizedState!==null&&(f=Rd(t,s,n1,null,null,r),Il._currentValue=f),ac(t,s),kn(t,s,c,r),s.child;case 6:return t===null&&it&&((t=r=Lt)&&(r=H1(r,s.pendingProps,Cs),r!==null?(s.stateNode=r,Nn=s,Lt=null,t=!0):t=!1),t||Fa(s)),null;case 13:return Sg(t,s,r);case 4:return R(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=Lr(s,null,c,r):kn(t,s,c,r),s.child;case 11:return mg(t,s,s.type,s.pendingProps,r);case 7:return kn(t,s,s.pendingProps,r),s.child;case 8:return kn(t,s,s.pendingProps.children,r),s.child;case 12:return kn(t,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,Ha(s,s.type,c.value),kn(t,s,c.children,r),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,Mr(s),f=En(f),c=c(f),s.flags|=1,kn(t,s,c,r),s.child;case 14:return pg(t,s,s.type,s.pendingProps,r);case 15:return gg(t,s,s.type,s.pendingProps,r);case 19:return Ng(t,s,r);case 31:return u1(t,s,r);case 22:return xg(t,s,r,s.pendingProps);case 24:return Mr(s),c=En(sn),t===null?(f=Sd(),f===null&&(f=Tt,m=wd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),s.memoizedState={parent:c,cache:f},Nd(s),Ha(s,sn,f)):((t.lanes&r)!==0&&(Ed(t,s),Nl(s,null,null,r),Cl()),f=t.memoizedState,m=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ha(s,sn,c)):(c=m.cache,Ha(s,sn,c),c!==f.cache&&yd(s,[sn],r,!0))),kn(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ga(t){t.flags|=4}function of(t,s,r,c,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Jg())t.flags|=8192;else throw Or=Zo,Cd}else t.flags&=-16777217}function kg(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hx(s))if(Jg())t.flags|=8192;else throw Or=Zo,Cd}function ic(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?tn():536870912,t.lanes|=s,Ei|=s)}function Tl(t,s){if(!it)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Ut(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(s)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=r,s}function f1(t,s,r){var c=s.pendingProps;switch(pd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return Ut(s),null;case 3:return r=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),fa(sn),Z(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hi(s)?ga(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xd())),Ut(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(ga(s),m!==null?(Ut(s),kg(s,m)):(Ut(s),of(s,f,null,c,r))):m?m!==t.memoizedState?(ga(s),Ut(s),kg(s,m)):(Ut(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&ga(s),Ut(s),of(s,f,t,c,r)),null;case 27:if(De(s),r=H.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&ga(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ut(s),null}t=q.current,hi(s)?ip(s):(t=zx(f,c,r),s.stateNode=t,ga(s))}return Ut(s),null;case 5:if(De(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&ga(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ut(s),null}if(m=q.current,hi(s))ip(s);else{var y=wc(H.current);switch(m){case 1:m=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=y.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?y.createElement("select",{is:c.is}):y.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?y.createElement(f,{is:c.is}):y.createElement(f)}}m[nn]=s,m[An]=c;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)m.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=m;e:switch(_n(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ga(s)}}return Ut(s),of(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&ga(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(t=H.current,hi(s)){if(t=s.stateNode,r=s.memoizedProps,c=null,f=Nn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[nn]=s,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Sx(t.nodeValue,r)),t||Fa(s,!0)}else t=wc(t).createTextNode(c),t[nn]=s,s.stateNode=t}return Ut(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(c=hi(s),r!==null){if(t===null){if(!c)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[nn]=s}else Dr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),t=!1}else r=xd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(cs(s),s):(cs(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ut(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=hi(s),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[nn]=s}else Dr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),f=!1}else f=xd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(cs(s),s):(cs(s),null)}return cs(s),(s.flags&128)!==0?(s.lanes=r,s):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),ic(s,s.updateQueue),Ut(s),null);case 4:return Z(),t===null&&Df(s.stateNode.containerInfo),Ut(s),null;case 10:return fa(s.type),Ut(s),null;case 19:if(P(Xt),c=s.memoizedState,c===null)return Ut(s),null;if(f=(s.flags&128)!==0,m=c.rendering,m===null)if(f)Tl(c,!1);else{if(Wt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Po(t),m!==null){for(s.flags|=128,Tl(c,!1),t=m.updateQueue,s.updateQueue=t,ic(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)tp(r,t),r=r.sibling;return le(Xt,Xt.current&1|2),it&&ua(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&we()>dc&&(s.flags|=128,f=!0,Tl(c,!1),s.lanes=4194304)}else{if(!f)if(t=Po(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,ic(s,t),Tl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!it)return Ut(s),null}else 2*we()-c.renderingStartTime>dc&&r!==536870912&&(s.flags|=128,f=!0,Tl(c,!1),s.lanes=4194304);c.isBackwards?(m.sibling=s.child,s.child=m):(t=c.last,t!==null?t.sibling=m:s.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=we(),t.sibling=null,r=Xt.current,le(Xt,f?r&1|2:r&1),it&&ua(s,c.treeForkCount),t):(Ut(s),null);case 22:case 23:return cs(s),Dd(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),r=s.updateQueue,r!==null&&ic(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),t!==null&&P(Rr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),fa(sn),Ut(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function h1(t,s){switch(pd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return fa(sn),Z(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return De(s),null;case 31:if(s.memoizedState!==null){if(cs(s),s.alternate===null)throw Error(i(340));Dr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(cs(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Dr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return P(Xt),null;case 4:return Z(),null;case 10:return fa(s.type),null;case 22:case 23:return cs(s),Dd(),t!==null&&P(Rr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return fa(sn),null;case 25:return null;default:return null}}function _g(t,s){switch(pd(s),s.tag){case 3:fa(sn),Z();break;case 26:case 27:case 5:De(s);break;case 4:Z();break;case 31:s.memoizedState!==null&&cs(s);break;case 13:cs(s);break;case 19:P(Xt);break;case 10:fa(s.type);break;case 22:case 23:cs(s),Dd(),t!==null&&P(Rr);break;case 24:fa(sn)}}function Ml(t,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&t)===t){c=void 0;var m=r.create,y=r.inst;c=m(),y.destroy=c}r=r.next}while(r!==f)}}catch(S){Ct(s,s.return,S)}}function Wa(t,s,r){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var y=c.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,f=s;var z=r,ne=S;try{ne()}catch(he){Ct(f,z,he)}}}c=c.next}while(c!==m)}}catch(he){Ct(s,s.return,he)}}function Ag(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{vp(s,r)}catch(c){Ct(t,t.return,c)}}}function Dg(t,s,r){r.props=Br(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){Ct(t,s,c)}}function Rl(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(f){Ct(t,s,f)}}function ea(t,s){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){Ct(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ct(t,s,f)}else r.current=null}function Tg(t){var s=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){Ct(t,t.return,f)}}function cf(t,s,r){try{var c=t.stateNode;O1(c,t.type,r,s),c[An]=s}catch(f){Ct(t,t.return,f)}}function Mg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&tr(t.type)||t.tag===4}function uf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&tr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,s,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Tn));else if(c!==4&&(c===27&&tr(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(df(t,s,r),t=t.sibling;t!==null;)df(t,s,r),t=t.sibling}function lc(t,s,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(c!==4&&(c===27&&tr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(lc(t,s,r),t=t.sibling;t!==null;)lc(t,s,r),t=t.sibling}function Rg(t){var s=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);_n(s,c,r),s[nn]=t,s[An]=r}catch(m){Ct(t,t.return,m)}}var xa=!1,ln=!1,ff=!1,zg=typeof WeakSet=="function"?WeakSet:Set,vn=null;function m1(t,s){if(t=t.containerInfo,Rf=_c,t=Qm(t),ad(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var y=0,S=-1,z=-1,ne=0,he=0,ve=t,re=null;t:for(;;){for(var oe;ve!==r||f!==0&&ve.nodeType!==3||(S=y+f),ve!==m||c!==0&&ve.nodeType!==3||(z=y+c),ve.nodeType===3&&(y+=ve.nodeValue.length),(oe=ve.firstChild)!==null;)re=ve,ve=oe;for(;;){if(ve===t)break t;if(re===r&&++ne===f&&(S=y),re===m&&++he===c&&(z=y),(oe=ve.nextSibling)!==null)break;ve=re,re=ve.parentNode}ve=oe}r=S===-1||z===-1?null:{start:S,end:z}}else r=null}r=r||{start:0,end:0}}else r=null;for(zf={focusedElem:t,selectionRange:r},_c=!1,vn=s;vn!==null;)if(s=vn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,vn=t;else for(;vn!==null;){switch(s=vn,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=s,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var ze=Br(r.type,f);t=c.getSnapshotBeforeUpdate(ze,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(qe){Ct(r,r.return,qe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Uf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,vn=t;break}vn=s.return}}function Og(t,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:va(t,r),c&4&&Ml(5,r);break;case 1:if(va(t,r),c&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(y){Ct(r,r.return,y)}else{var f=Br(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(y){Ct(r,r.return,y)}}c&64&&Ag(r),c&512&&Rl(r,r.return);break;case 3:if(va(t,r),c&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{vp(t,s)}catch(y){Ct(r,r.return,y)}}break;case 27:s===null&&c&4&&Rg(r);case 26:case 5:va(t,r),s===null&&c&4&&Tg(r),c&512&&Rl(r,r.return);break;case 12:va(t,r);break;case 31:va(t,r),c&4&&Bg(t,r);break;case 13:va(t,r),c&4&&$g(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=S1.bind(null,r),Z1(t,r))));break;case 22:if(c=r.memoizedState!==null||xa,!c){s=s!==null&&s.memoizedState!==null||ln,f=xa;var m=ln;xa=c,(ln=s)&&!m?ya(t,r,(r.subtreeFlags&8772)!==0):va(t,r),xa=f,ln=m}break;case 30:break;default:va(t,r)}}function Lg(t){var s=t.alternate;s!==null&&(t.alternate=null,Lg(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&pr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qt=null,Vn=!1;function ba(t,s,r){for(r=r.child;r!==null;)Ug(t,s,r),r=r.sibling}function Ug(t,s,r){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(vt,r)}catch{}switch(r.tag){case 26:ln||ea(r,s),ba(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ln||ea(r,s);var c=qt,f=Vn;tr(r.type)&&(qt=r.stateNode,Vn=!1),ba(t,s,r),Hl(r.stateNode),qt=c,Vn=f;break;case 5:ln||ea(r,s);case 6:if(c=qt,f=Vn,qt=null,ba(t,s,r),qt=c,Vn=f,qt!==null)if(Vn)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(r.stateNode)}catch(m){Ct(r,s,m)}else try{qt.removeChild(r.stateNode)}catch(m){Ct(r,s,m)}break;case 18:qt!==null&&(Vn?(t=qt,Ax(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),zi(t)):Ax(qt,r.stateNode));break;case 4:c=qt,f=Vn,qt=r.stateNode.containerInfo,Vn=!0,ba(t,s,r),qt=c,Vn=f;break;case 0:case 11:case 14:case 15:Wa(2,r,s),ln||Wa(4,r,s),ba(t,s,r);break;case 1:ln||(ea(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Dg(r,s,c)),ba(t,s,r);break;case 21:ba(t,s,r);break;case 22:ln=(c=ln)||r.memoizedState!==null,ba(t,s,r),ln=c;break;default:ba(t,s,r)}}function Bg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zi(t)}catch(r){Ct(s,s.return,r)}}}function $g(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zi(t)}catch(r){Ct(s,s.return,r)}}function p1(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new zg),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new zg),s;default:throw Error(i(435,t.tag))}}function oc(t,s){var r=p1(t);s.forEach(function(c){if(!r.has(c)){r.add(c);var f=C1.bind(null,t,c);c.then(f,f)}})}function In(t,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=t,y=s,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(tr(S.type)){qt=S.stateNode,Vn=!1;break e}break;case 5:qt=S.stateNode,Vn=!1;break e;case 3:case 4:qt=S.stateNode.containerInfo,Vn=!0;break e}S=S.return}if(qt===null)throw Error(i(160));Ug(m,y,f),qt=null,Vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)qg(s,t),s=s.sibling}var Us=null;function qg(t,s){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:In(s,t),Qn(t),c&4&&(Wa(3,t,t.return),Ml(3,t),Wa(5,t,t.return));break;case 1:In(s,t),Qn(t),c&512&&(ln||r===null||ea(r,r.return)),c&64&&xa&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=Us;if(In(s,t),Qn(t),c&512&&(ln||r===null||ea(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[mr]||m[nn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),_n(m,c,r),m[nn]=t,Zt(m),c=m;break e;case"link":var y=qx("link","href",f).get(c+(r.href||""));if(y){for(var S=0;S<y.length;S++)if(m=y[S],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(S,1);break t}}m=f.createElement(c),_n(m,c,r),f.head.appendChild(m);break;case"meta":if(y=qx("meta","content",f).get(c+(r.content||""))){for(S=0;S<y.length;S++)if(m=y[S],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(S,1);break t}}m=f.createElement(c),_n(m,c,r),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[nn]=t,Zt(m),c=m}t.stateNode=c}else Fx(f,t.type,t.stateNode);else t.stateNode=$x(f,c,t.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?Fx(f,t.type,t.stateNode):$x(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&cf(t,t.memoizedProps,r.memoizedProps)}break;case 27:In(s,t),Qn(t),c&512&&(ln||r===null||ea(r,r.return)),r!==null&&c&4&&cf(t,t.memoizedProps,r.memoizedProps);break;case 5:if(In(s,t),Qn(t),c&512&&(ln||r===null||ea(r,r.return)),t.flags&32){f=t.stateNode;try{Ra(f,"")}catch(ze){Ct(t,t.return,ze)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,cf(t,f,r!==null?r.memoizedProps:f)),c&1024&&(ff=!0);break;case 6:if(In(s,t),Qn(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(ze){Ct(t,t.return,ze)}}break;case 3:if(Cc=null,f=Us,Us=jc(s.containerInfo),In(s,t),Us=f,Qn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{zi(s.containerInfo)}catch(ze){Ct(t,t.return,ze)}ff&&(ff=!1,Fg(t));break;case 4:c=Us,Us=jc(t.stateNode.containerInfo),In(s,t),Qn(t),Us=c;break;case 12:In(s,t),Qn(t);break;case 31:In(s,t),Qn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,oc(t,c)));break;case 13:In(s,t),Qn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(uc=we()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,oc(t,c)));break;case 22:f=t.memoizedState!==null;var z=r!==null&&r.memoizedState!==null,ne=xa,he=ln;if(xa=ne||f,ln=he||z,In(s,t),ln=he,xa=ne,Qn(t),c&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(r===null||z||xa||ln||$r(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){z=r=s;try{if(m=z.stateNode,f)y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=z.stateNode;var ve=z.memoizedProps.style,re=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;S.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ze){Ct(z,z.return,ze)}}}else if(s.tag===6){if(r===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(ze){Ct(z,z.return,ze)}}}else if(s.tag===18){if(r===null){z=s;try{var oe=z.stateNode;f?Dx(oe,!0):Dx(z.stateNode,!1)}catch(ze){Ct(z,z.return,ze)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,oc(t,r))));break;case 19:In(s,t),Qn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,oc(t,c)));break;case 30:break;case 21:break;default:In(s,t),Qn(t)}}function Qn(t){var s=t.flags;if(s&2){try{for(var r,c=t.return;c!==null;){if(Mg(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,m=uf(t);lc(t,m,f);break;case 5:var y=r.stateNode;r.flags&32&&(Ra(y,""),r.flags&=-33);var S=uf(t);lc(t,S,y);break;case 3:case 4:var z=r.stateNode.containerInfo,ne=uf(t);df(t,ne,z);break;default:throw Error(i(161))}}catch(he){Ct(t,t.return,he)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Fg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Fg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function va(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Og(t,s.alternate,s),s=s.sibling}function $r(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Wa(4,s,s.return),$r(s);break;case 1:ea(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Dg(s,s.return,r),$r(s);break;case 27:Hl(s.stateNode);case 26:case 5:ea(s,s.return),$r(s);break;case 22:s.memoizedState===null&&$r(s);break;case 30:$r(s);break;default:$r(s)}t=t.sibling}}function ya(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=t,m=s,y=m.flags;switch(m.tag){case 0:case 11:case 15:ya(f,m,r),Ml(4,m);break;case 1:if(ya(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){Ct(c,c.return,ne)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)bp(z[f],S)}catch(ne){Ct(c,c.return,ne)}}r&&y&64&&Ag(m),Rl(m,m.return);break;case 27:Rg(m);case 26:case 5:ya(f,m,r),r&&c===null&&y&4&&Tg(m),Rl(m,m.return);break;case 12:ya(f,m,r);break;case 31:ya(f,m,r),r&&y&4&&Bg(f,m);break;case 13:ya(f,m,r),r&&y&4&&$g(f,m);break;case 22:m.memoizedState===null&&ya(f,m,r),Rl(m,m.return);break;case 30:break;default:ya(f,m,r)}s=s.sibling}}function hf(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&vl(r))}function mf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&vl(t))}function Bs(t,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hg(t,s,r,c),s=s.sibling}function Hg(t,s,r,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Bs(t,s,r,c),f&2048&&Ml(9,s);break;case 1:Bs(t,s,r,c);break;case 3:Bs(t,s,r,c),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&vl(t)));break;case 12:if(f&2048){Bs(t,s,r,c),t=s.stateNode;try{var m=s.memoizedProps,y=m.id,S=m.onPostCommit;typeof S=="function"&&S(y,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){Ct(s,s.return,z)}}else Bs(t,s,r,c);break;case 31:Bs(t,s,r,c);break;case 13:Bs(t,s,r,c);break;case 23:break;case 22:m=s.stateNode,y=s.alternate,s.memoizedState!==null?m._visibility&2?Bs(t,s,r,c):zl(t,s):m._visibility&2?Bs(t,s,r,c):(m._visibility|=2,Si(t,s,r,c,(s.subtreeFlags&10256)!==0||!1)),f&2048&&hf(y,s);break;case 24:Bs(t,s,r,c),f&2048&&mf(s.alternate,s);break;default:Bs(t,s,r,c)}}function Si(t,s,r,c,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,y=s,S=r,z=c,ne=y.flags;switch(y.tag){case 0:case 11:case 15:Si(m,y,S,z,f),Ml(8,y);break;case 23:break;case 22:var he=y.stateNode;y.memoizedState!==null?he._visibility&2?Si(m,y,S,z,f):zl(m,y):(he._visibility|=2,Si(m,y,S,z,f)),f&&ne&2048&&hf(y.alternate,y);break;case 24:Si(m,y,S,z,f),f&&ne&2048&&mf(y.alternate,y);break;default:Si(m,y,S,z,f)}s=s.sibling}}function zl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,c=s,f=c.flags;switch(c.tag){case 22:zl(r,c),f&2048&&hf(c.alternate,c);break;case 24:zl(r,c),f&2048&&mf(c.alternate,c);break;default:zl(r,c)}s=s.sibling}}var Ol=8192;function Ci(t,s,r){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)Zg(t,s,r),t=t.sibling}function Zg(t,s,r){switch(t.tag){case 26:Ci(t,s,r),t.flags&Ol&&t.memoizedState!==null&&tj(r,Us,t.memoizedState,t.memoizedProps);break;case 5:Ci(t,s,r);break;case 3:case 4:var c=Us;Us=jc(t.stateNode.containerInfo),Ci(t,s,r),Us=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Ol,Ol=16777216,Ci(t,s,r),Ol=c):Ci(t,s,r));break;default:Ci(t,s,r)}}function Vg(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ll(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];vn=c,Qg(c,t)}Vg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ig(t),t=t.sibling}function Ig(t){switch(t.tag){case 0:case 11:case 15:Ll(t),t.flags&2048&&Wa(9,t,t.return);break;case 3:Ll(t);break;case 12:Ll(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,cc(t)):Ll(t);break;default:Ll(t)}}function cc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];vn=c,Qg(c,t)}Vg(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Wa(8,s,s.return),cc(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,cc(s));break;default:cc(s)}t=t.sibling}}function Qg(t,s){for(;vn!==null;){var r=vn;switch(r.tag){case 0:case 11:case 15:Wa(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:vl(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,vn=c;else e:for(r=t;vn!==null;){c=vn;var f=c.sibling,m=c.return;if(Lg(c),c===r){vn=null;break e}if(f!==null){f.return=m,vn=f;break e}vn=m}}}var g1={getCacheForType:function(t){var s=En(sn),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return En(sn).controller.signal}},x1=typeof WeakMap=="function"?WeakMap:Map,gt=0,Tt=null,Je=null,tt=0,St=0,us=null,Ka=!1,Ni=!1,pf=!1,wa=0,Wt=0,Ga=0,qr=0,gf=0,ds=0,Ei=0,Ul=null,Pn=null,xf=!1,uc=0,Pg=0,dc=1/0,fc=null,Ya=null,fn=0,Xa=null,ki=null,ja=0,bf=0,vf=null,Wg=null,Bl=0,yf=null;function fs(){return(gt&2)!==0&&tt!==0?tt&-tt:D.T!==null?Ef():Zn()}function Kg(){if(ds===0)if((tt&536870912)===0||it){var t=Dt;Dt<<=1,(Dt&3932160)===0&&(Dt=262144),ds=t}else ds=536870912;return t=os.current,t!==null&&(t.flags|=32),ds}function Wn(t,s,r){(t===Tt&&(St===2||St===9)||t.cancelPendingCommit!==null)&&(_i(t,0),Ja(t,tt,ds,!1)),Fn(t,r),((gt&2)===0||t!==Tt)&&(t===Tt&&((gt&2)===0&&(qr|=r),Wt===4&&Ja(t,tt,ds,!1)),ta(t))}function Gg(t,s,r){if((gt&6)!==0)throw Error(i(327));var c=!r&&(s&127)===0&&(s&t.expiredLanes)===0||un(t,s),f=c?y1(t,s):jf(t,s,!0),m=c;do{if(f===0){Ni&&!c&&Ja(t,s,0,!1);break}else{if(r=t.current.alternate,m&&!b1(r)){f=jf(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;e:{var S=t;f=Ul;var z=S.current.memoizedState.isDehydrated;if(z&&(_i(S,y).flags|=256),y=jf(S,y,!1),y!==2){if(pf&&!z){S.errorRecoveryDisabledLanes|=m,qr|=m,f=4;break e}m=Pn,Pn=f,m!==null&&(Pn===null?Pn=m:Pn.push.apply(Pn,m))}f=y}if(m=!1,f!==2)continue}}if(f===1){_i(t,0),Ja(t,s,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ja(c,s,ds,!Ka);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=uc+300-we(),10<f)){if(Ja(c,s,ds,!Ka),Bt(c,0,!0)!==0)break e;ja=s,c.timeoutHandle=kx(Yg.bind(null,c,r,Pn,fc,xf,s,ds,qr,Ei,Ka,m,"Throttled",-0,0),f);break e}Yg(c,r,Pn,fc,xf,s,ds,qr,Ei,Ka,m,null,-0,0)}}break}while(!0);ta(t)}function Yg(t,s,r,c,f,m,y,S,z,ne,he,ve,re,oe){if(t.timeoutHandle=-1,ve=s.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tn},Zg(s,m,ve);var ze=(m&62914560)===m?uc-we():(m&4194048)===m?Pg-we():0;if(ze=nj(ve,ze),ze!==null){ja=m,t.cancelPendingCommit=ze(rx.bind(null,t,s,m,r,c,f,y,S,z,he,ve,null,re,oe)),Ja(t,m,y,!ne);return}}rx(t,s,m,r,c,f,y,S,z)}function b1(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!is(m(),f))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ja(t,s,r,c){s&=~gf,s&=~qr,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var f=s;0<f;){var m=31-Rt(f),y=1<<m;c[m]=-1,f&=~y}r!==0&&Jn(t,r,s)}function hc(){return(gt&6)===0?($l(0),!1):!0}function wf(){if(Je!==null){if(St===0)var t=Je.return;else t=Je,da=Tr=null,Ld(t),bi=null,wl=0,t=Je;for(;t!==null;)_g(t.alternate,t),t=t.return;Je=null}}function _i(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,B1(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ja=0,wf(),Tt=t,Je=r=ca(t.current,null),tt=s,St=0,us=null,Ka=!1,Ni=un(t,s),pf=!1,Ei=ds=gf=qr=Ga=Wt=0,Pn=Ul=null,xf=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var f=31-Rt(c),m=1<<f;s|=t[f],c&=~m}return wa=s,zo(),r}function Xg(t,s){Ge=null,D.H=Al,s===xi||s===Ho?(s=mp(),St=3):s===Cd?(s=mp(),St=4):St=s===Xd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,us=s,Je===null&&(Wt=1,nc(t,ws(s,t.current)))}function Jg(){var t=os.current;return t===null?!0:(tt&4194048)===tt?Ns===null:(tt&62914560)===tt||(tt&536870912)!==0?t===Ns:!1}function ex(){var t=D.H;return D.H=Al,t===null?Al:t}function tx(){var t=D.A;return D.A=g1,t}function mc(){Wt=4,Ka||(tt&4194048)!==tt&&os.current!==null||(Ni=!0),(Ga&134217727)===0&&(qr&134217727)===0||Tt===null||Ja(Tt,tt,ds,!1)}function jf(t,s,r){var c=gt;gt|=2;var f=ex(),m=tx();(Tt!==t||tt!==s)&&(fc=null,_i(t,s)),s=!1;var y=Wt;e:do try{if(St!==0&&Je!==null){var S=Je,z=us;switch(St){case 8:wf(),y=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(s=!0);var ne=St;if(St=0,us=null,Ai(t,S,z,ne),r&&Ni){y=0;break e}break;default:ne=St,St=0,us=null,Ai(t,S,z,ne)}}v1(),y=Wt;break}catch(he){Xg(t,he)}while(!0);return s&&t.shellSuspendCounter++,da=Tr=null,gt=c,D.H=f,D.A=m,Je===null&&(Tt=null,tt=0,zo()),y}function v1(){for(;Je!==null;)nx(Je)}function y1(t,s){var r=gt;gt|=2;var c=ex(),f=tx();Tt!==t||tt!==s?(fc=null,dc=we()+500,_i(t,s)):Ni=un(t,s);e:do try{if(St!==0&&Je!==null){s=Je;var m=us;t:switch(St){case 1:St=0,us=null,Ai(t,s,m,1);break;case 2:case 9:if(fp(m)){St=0,us=null,sx(s);break}s=function(){St!==2&&St!==9||Tt!==t||(St=7),ta(t)},m.then(s,s);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:fp(m)?(St=0,us=null,sx(s)):(St=0,us=null,Ai(t,s,m,7));break;case 5:var y=null;switch(Je.tag){case 26:y=Je.memoizedState;case 5:case 27:var S=Je;if(y?Hx(y):S.stateNode.complete){St=0,us=null;var z=S.sibling;if(z!==null)Je=z;else{var ne=S.return;ne!==null?(Je=ne,pc(ne)):Je=null}break t}}St=0,us=null,Ai(t,s,m,5);break;case 6:St=0,us=null,Ai(t,s,m,6);break;case 8:wf(),Wt=6;break e;default:throw Error(i(462))}}w1();break}catch(he){Xg(t,he)}while(!0);return da=Tr=null,D.H=c,D.A=f,gt=r,Je!==null?0:(Tt=null,tt=0,zo(),Wt)}function w1(){for(;Je!==null&&!ce();)nx(Je)}function nx(t){var s=Eg(t.alternate,t,wa);t.memoizedProps=t.pendingProps,s===null?pc(t):Je=s}function sx(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=yg(r,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=yg(r,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:Ld(s);default:_g(r,s),s=Je=tp(s,wa),s=Eg(r,s,wa)}t.memoizedProps=t.pendingProps,s===null?pc(t):Je=s}function Ai(t,s,r,c){da=Tr=null,Ld(s),bi=null,wl=0;var f=s.return;try{if(c1(t,f,s,r,tt)){Wt=1,nc(t,ws(r,t.current)),Je=null;return}}catch(m){if(f!==null)throw Je=f,m;Wt=1,nc(t,ws(r,t.current)),Je=null;return}s.flags&32768?(it||c===1?t=!0:Ni||(tt&536870912)!==0?t=!1:(Ka=t=!0,(c===2||c===9||c===3||c===6)&&(c=os.current,c!==null&&c.tag===13&&(c.flags|=16384))),ax(s,t)):pc(s)}function pc(t){var s=t;do{if((s.flags&32768)!==0){ax(s,Ka);return}t=s.return;var r=f1(s.alternate,s,wa);if(r!==null){Je=r;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=t}while(s!==null);Wt===0&&(Wt=5)}function ax(t,s){do{var r=h1(t.alternate,t);if(r!==null){r.flags&=32767,Je=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Je=t;return}Je=t=r}while(t!==null);Wt=6,Je=null}function rx(t,s,r,c,f,m,y,S,z){t.cancelPendingCommit=null;do gc();while(fn!==0);if((gt&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=cd,Qt(t,r,m,y,S,z),t===Tt&&(Je=Tt=null,tt=0),ki=s,Xa=t,ja=r,bf=m,vf=f,Wg=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,N1(Pe,function(){return ux(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=D.T,D.T=null,f=U.p,U.p=2,y=gt,gt|=4;try{m1(t,s,r)}finally{gt=y,U.p=f,D.T=c}}fn=1,ix(),lx(),ox()}}function ix(){if(fn===1){fn=0;var t=Xa,s=ki,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=D.T,D.T=null;var c=U.p;U.p=2;var f=gt;gt|=4;try{qg(s,t);var m=zf,y=Qm(t.containerInfo),S=m.focusedElem,z=m.selectionRange;if(y!==S&&S&&S.ownerDocument&&Im(S.ownerDocument.documentElement,S)){if(z!==null&&ad(S)){var ne=z.start,he=z.end;if(he===void 0&&(he=ne),"selectionStart"in S)S.selectionStart=ne,S.selectionEnd=Math.min(he,S.value.length);else{var ve=S.ownerDocument||document,re=ve&&ve.defaultView||window;if(re.getSelection){var oe=re.getSelection(),ze=S.textContent.length,qe=Math.min(z.start,ze),kt=z.end===void 0?qe:Math.min(z.end,ze);!oe.extend&&qe>kt&&(y=kt,kt=qe,qe=y);var G=Vm(S,qe),$=Vm(S,kt);if(G&&$&&(oe.rangeCount!==1||oe.anchorNode!==G.node||oe.anchorOffset!==G.offset||oe.focusNode!==$.node||oe.focusOffset!==$.offset)){var te=ve.createRange();te.setStart(G.node,G.offset),oe.removeAllRanges(),qe>kt?(oe.addRange(te),oe.extend($.node,$.offset)):(te.setEnd($.node,$.offset),oe.addRange(te))}}}}for(ve=[],oe=S;oe=oe.parentNode;)oe.nodeType===1&&ve.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ve.length;S++){var xe=ve[S];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}_c=!!Rf,zf=Rf=null}finally{gt=f,U.p=c,D.T=r}}t.current=s,fn=2}}function lx(){if(fn===2){fn=0;var t=Xa,s=ki,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=D.T,D.T=null;var c=U.p;U.p=2;var f=gt;gt|=4;try{Og(t,s.alternate,s)}finally{gt=f,U.p=c,D.T=r}}fn=3}}function ox(){if(fn===4||fn===3){fn=0,Ee();var t=Xa,s=ki,r=ja,c=Wg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,ki=Xa=null,cx(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ya=null),xs(r),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(vt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=D.T,f=U.p,U.p=2,D.T=null;try{for(var m=t.onRecoverableError,y=0;y<c.length;y++){var S=c[y];m(S.value,{componentStack:S.stack})}}finally{D.T=s,U.p=f}}(ja&3)!==0&&gc(),ta(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===yf?Bl++:(Bl=0,yf=t):Bl=0,$l(0)}}function cx(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,vl(s)))}function gc(){return ix(),lx(),ox(),ux()}function ux(){if(fn!==5)return!1;var t=Xa,s=bf;bf=0;var r=xs(ja),c=D.T,f=U.p;try{U.p=32>r?32:r,D.T=null,r=vf,vf=null;var m=Xa,y=ja;if(fn=0,ki=Xa=null,ja=0,(gt&6)!==0)throw Error(i(331));var S=gt;if(gt|=4,Ig(m.current),Hg(m,m.current,y,r),gt=S,$l(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(vt,m)}catch{}return!0}finally{U.p=f,D.T=c,cx(t,s)}}function dx(t,s,r){s=ws(r,s),s=Yd(t.stateNode,s,2),t=Ia(t,s,2),t!==null&&(Fn(t,2),ta(t))}function Ct(t,s,r){if(t.tag===3)dx(t,t,r);else for(;s!==null;){if(s.tag===3){dx(s,t,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ya===null||!Ya.has(c))){t=ws(r,t),r=fg(2),c=Ia(s,r,2),c!==null&&(hg(r,c,s,t),Fn(c,2),ta(c));break}}s=s.return}}function Sf(t,s,r){var c=t.pingCache;if(c===null){c=t.pingCache=new x1;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(r)||(pf=!0,f.add(r),t=j1.bind(null,t,s,r),s.then(t,t))}function j1(t,s,r){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Tt===t&&(tt&r)===r&&(Wt===4||Wt===3&&(tt&62914560)===tt&&300>we()-uc?(gt&2)===0&&_i(t,0):gf|=r,Ei===tt&&(Ei=0)),ta(t)}function fx(t,s){s===0&&(s=tn()),t=_r(t,s),t!==null&&(Fn(t,s),ta(t))}function S1(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),fx(t,r)}function C1(t,s){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),fx(t,r)}function N1(t,s){return M(t,s)}var xc=null,Di=null,Cf=!1,bc=!1,Nf=!1,er=0;function ta(t){t!==Di&&t.next===null&&(Di===null?xc=Di=t:Di=Di.next=t),bc=!0,Cf||(Cf=!0,k1())}function $l(t,s){if(!Nf&&bc){Nf=!0;do for(var r=!1,c=xc;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var y=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Rt(42|t)+1)-1,m&=f&~(y&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,gx(c,m))}else m=tt,m=Bt(c,c===Tt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||un(c,m)||(r=!0,gx(c,m));c=c.next}while(r);Nf=!1}}function E1(){hx()}function hx(){bc=Cf=!1;var t=0;er!==0&&U1()&&(t=er);for(var s=we(),r=null,c=xc;c!==null;){var f=c.next,m=mx(c,s);m===0?(c.next=null,r===null?xc=f:r.next=f,f===null&&(Di=r)):(r=c,(t!==0||(m&3)!==0)&&(bc=!0)),c=f}fn!==0&&fn!==5||$l(t),er!==0&&(er=0)}function mx(t,s){for(var r=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var y=31-Rt(m),S=1<<y,z=f[y];z===-1?((S&r)===0||(S&c)!==0)&&(f[y]=Sn(S,s)):z<=s&&(t.expiredLanes|=S),m&=~S}if(s=Tt,r=tt,r=Bt(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===s&&(St===2||St===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Y(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||un(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(c!==null&&Y(c),xs(r)){case 2:case 8:r=Qe;break;case 32:r=Pe;break;case 268435456:r=Ne;break;default:r=Pe}return c=px.bind(null,t),r=M(r,c),t.callbackPriority=s,t.callbackNode=r,s}return c!==null&&c!==null&&Y(c),t.callbackPriority=2,t.callbackNode=null,2}function px(t,s){if(fn!==0&&fn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(gc()&&t.callbackNode!==r)return null;var c=tt;return c=Bt(t,t===Tt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Gg(t,c,s),mx(t,we()),t.callbackNode!=null&&t.callbackNode===r?px.bind(null,t):null)}function gx(t,s){if(gc())return null;Gg(t,s,!0)}function k1(){$1(function(){(gt&6)!==0?M(Re,E1):hx()})}function Ef(){if(er===0){var t=pi;t===0&&(t=rt,rt<<=1,(rt&261888)===0&&(rt=256)),er=t}return er}function xx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ei(""+t)}function bx(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function _1(t,s,r,c,f){if(s==="submit"&&r&&r.stateNode===f){var m=xx((f[An]||null).action),y=c.submitter;y&&(s=(s=y[An]||null)?xx(s.formAction):y.getAttribute("formAction"),s!==null&&(m=s,y=null));var S=new ai("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(er!==0){var z=y?bx(f,y):new FormData(f);Id(r,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(S.preventDefault(),z=y?bx(f,y):new FormData(f),Id(r,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var kf=0;kf<od.length;kf++){var _f=od[kf],A1=_f.toLowerCase(),D1=_f[0].toUpperCase()+_f.slice(1);Ls(A1,"on"+D1)}Ls(Km,"onAnimationEnd"),Ls(Gm,"onAnimationIteration"),Ls(Ym,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(Qw,"onTransitionRun"),Ls(Pw,"onTransitionStart"),Ls(Ww,"onTransitionCancel"),Ls(Xm,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function vx(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],f=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var y=c.length-1;0<=y;y--){var S=c[y],z=S.instance,ne=S.currentTarget;if(S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ne;try{m(f)}catch(he){Ro(he)}f.currentTarget=null,m=z}else for(y=0;y<c.length;y++){if(S=c[y],z=S.instance,ne=S.currentTarget,S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ne;try{m(f)}catch(he){Ro(he)}f.currentTarget=null,m=z}}}}function et(t,s){var r=s[Ji];r===void 0&&(r=s[Ji]=new Set);var c=t+"__bubble";r.has(c)||(yx(s,t,2,!1),r.add(c))}function Af(t,s,r){var c=0;s&&(c|=4),yx(r,t,c,s)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[vc]){t[vc]=!0,Aa.forEach(function(r){r!=="selectionchange"&&(T1.has(r)||Af(r,!1,t),Af(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[vc]||(s[vc]=!0,Af("selectionchange",!1,s))}}function yx(t,s,r,c){switch(Kx(s)){case 2:var f=rj;break;case 8:f=ij;break;default:f=If}r=f.bind(null,s,r,t),f=void 0,!si||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(s,r,{capture:!0,passive:f}):t.addEventListener(s,r,!0):f!==void 0?t.addEventListener(s,r,{passive:f}):t.addEventListener(s,r,!1)}function Tf(t,s,r,c,f){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var S=c.stateNode.containerInfo;if(S===f)break;if(y===4)for(y=c.return;y!==null;){var z=y.tag;if((z===3||z===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;S!==null;){if(y=ka(S),y===null)return;if(z=y.tag,z===5||z===6||z===26||z===27){c=m=y;continue e}S=S.parentNode}}c=c.return}bs(function(){var ne=m,he=sl(r),ve=[];e:{var re=Jm.get(t);if(re!==void 0){var oe=ai,ze=t;switch(t){case"keypress":if(Oa(r)===0)break e;case"keydown":case"keyup":oe=Vu;break;case"focusin":ze="focus",oe=Sr;break;case"focusout":ze="blur",oe=Sr;break;case"beforeblur":case"afterblur":oe=Sr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=ll;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Pu;break;case Km:case Gm:case Ym:oe=Cr;break;case Xm:oe=Ku;break;case"scroll":case"scrollend":oe=Do;break;case"wheel":oe=Yu;break;case"copy":case"cut":case"paste":oe=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ul;break;case"toggle":case"beforetoggle":oe=Ju}var qe=(s&4)!==0,kt=!qe&&(t==="scroll"||t==="scrollend"),G=qe?re!==null?re+"Capture":null:re;qe=[];for(var $=ne,te;$!==null;){var xe=$;if(te=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||te===null||G===null||(xe=as($,G),xe!=null&&qe.push(Fl($,xe,te))),kt)break;$=$.return}0<qe.length&&(re=new oe(re,ze,null,r,he),ve.push({event:re,listeners:qe}))}}if((s&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",re&&r!==Yt&&(ze=r.relatedTarget||r.fromElement)&&(ka(ze)||ze[Vs]))break e;if((oe||re)&&(re=he.window===he?he:(re=he.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(ze=r.relatedTarget||r.toElement,oe=ne,ze=ze?ka(ze):null,ze!==null&&(kt=u(ze),qe=ze.tag,ze!==kt||qe!==5&&qe!==27&&qe!==6)&&(ze=null)):(oe=null,ze=ne),oe!==ze)){if(qe=jr,xe="onMouseLeave",G="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(qe=ul,xe="onPointerLeave",G="onPointerEnter",$="pointer"),kt=oe==null?re:_a(oe),te=ze==null?re:_a(ze),re=new qe(xe,$+"leave",oe,r,he),re.target=kt,re.relatedTarget=te,xe=null,ka(he)===ne&&(qe=new qe(G,$+"enter",ze,r,he),qe.target=te,qe.relatedTarget=kt,xe=qe),kt=xe,oe&&ze)t:{for(qe=M1,G=oe,$=ze,te=0,xe=G;xe;xe=qe(xe))te++;xe=0;for(var Be=$;Be;Be=qe(Be))xe++;for(;0<te-xe;)G=qe(G),te--;for(;0<xe-te;)$=qe($),xe--;for(;te--;){if(G===$||$!==null&&G===$.alternate){qe=G;break t}G=qe(G),$=qe($)}qe=null}else qe=null;oe!==null&&wx(ve,re,oe,qe,!1),ze!==null&&kt!==null&&wx(ve,kt,ze,qe,!0)}}e:{if(re=ne?_a(ne):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var dt=Bm;else if(td(re))if($m)dt=Zw;else{dt=Fw;var Le=qw}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&za(ne.elementType)&&(dt=Bm):dt=Hw;if(dt&&(dt=dt(t,ne))){ii(ve,dt,r,he);break e}Le&&Le(t,re,ne),t==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&tl(re,"number",re.value)}switch(Le=ne?_a(ne):window,t){case"focusin":(td(Le)||Le.contentEditable==="true")&&(li=Le,rd=ne,gl=null);break;case"focusout":gl=rd=li=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Pm(ve,r,he);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":Pm(ve,r,he)}var Ye;if(dl)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else $t?Me(t,r)&&(nt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(nt="onCompositionStart");nt&&(F&&r.locale!=="ko"&&($t||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&$t&&(Ye=Ao()):(dn=he,_o="value"in dn?dn.value:dn.textContent,$t=!0)),Le=yc(ne,nt),0<Le.length&&(nt=new To(nt,t,null,r,he),ve.push({event:nt,listeners:Le}),Ye?nt.data=Ye:(Ye=Ve(r),Ye!==null&&(nt.data=Ye)))),(Ye=fl?jt(t,r):Rn(t,r))&&(nt=yc(ne,"onBeforeInput"),0<nt.length&&(Le=new To("onBeforeInput","beforeinput",null,r,he),ve.push({event:Le,listeners:nt}),Le.data=Ye)),_1(ve,t,ne,r,he)}vx(ve,s)})}function Fl(t,s,r){return{instance:t,listener:s,currentTarget:r}}function yc(t,s){for(var r=s+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=as(t,r),f!=null&&c.unshift(Fl(t,f,m)),f=as(t,s),f!=null&&c.push(Fl(t,f,m))),t.tag===3)return c;t=t.return}return[]}function M1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wx(t,s,r,c,f){for(var m=s._reactName,y=[];r!==null&&r!==c;){var S=r,z=S.alternate,ne=S.stateNode;if(S=S.tag,z!==null&&z===c)break;S!==5&&S!==26&&S!==27||ne===null||(z=ne,f?(ne=as(r,m),ne!=null&&y.unshift(Fl(r,ne,z))):f||(ne=as(r,m),ne!=null&&y.push(Fl(r,ne,z)))),r=r.return}y.length!==0&&t.push({event:s,listeners:y})}var R1=/\r\n?/g,z1=/\u0000|\uFFFD/g;function jx(t){return(typeof t=="string"?t:""+t).replace(R1,`
`).replace(z1,"")}function Sx(t,s){return s=jx(s),jx(t)===s}function Et(t,s,r,c,f,m){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Ra(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Ra(t,""+c);break;case"className":Jr(t,"class",c);break;case"tabIndex":Jr(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Jr(t,r,c);break;case"style":br(t,c,m);break;case"data":if(s!=="object"){Jr(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=ei(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(s!=="input"&&Et(t,s,"name",f.name,f,null),Et(t,s,"formEncType",f.formEncType,f,null),Et(t,s,"formMethod",f.formMethod,f,null),Et(t,s,"formTarget",f.formTarget,f,null)):(Et(t,s,"encType",f.encType,f,null),Et(t,s,"method",f.method,f,null),Et(t,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=ei(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Tn);break;case"onScroll":c!=null&&et("scroll",t);break;case"onScrollEnd":c!=null&&et("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=ei(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":et("beforetoggle",t),et("toggle",t),Da(t,"popover",c);break;case"xlinkActuate":ts(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ts(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ts(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ts(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ts(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ts(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ts(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ts(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ts(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Da(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Lu.get(r)||r,Da(t,r,c))}}function Mf(t,s,r,c,f,m){switch(r){case"style":br(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Ra(t,c):(typeof c=="number"||typeof c=="bigint")&&Ra(t,""+c);break;case"onScroll":c!=null&&et("scroll",t);break;case"onScrollEnd":c!=null&&et("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xr.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),s=r.slice(2,f?r.length-7:void 0),m=t[An]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,c,f);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):Da(t,r,c)}}}function _n(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",t),et("load",t);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var y=r[m];if(y!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Et(t,s,m,y,r,null)}}f&&Et(t,s,"srcSet",r.srcSet,r,null),c&&Et(t,s,"src",r.src,r,null);return;case"input":et("invalid",t);var S=m=y=f=null,z=null,ne=null;for(c in r)if(r.hasOwnProperty(c)){var he=r[c];if(he!=null)switch(c){case"name":f=he;break;case"type":y=he;break;case"checked":z=he;break;case"defaultChecked":ne=he;break;case"value":m=he;break;case"defaultValue":S=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,s));break;default:Et(t,s,c,he,r,null)}}el(t,m,S,z,ne,y,f,!1);return;case"select":et("invalid",t),c=y=m=null;for(f in r)if(r.hasOwnProperty(f)&&(S=r[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":y=S;break;case"multiple":c=S;default:Et(t,s,f,S,r,null)}s=m,r=y,t.multiple=!!c,s!=null?Ma(t,!!c,s,!1):r!=null&&Ma(t,!!c,r,!0);return;case"textarea":et("invalid",t),m=f=c=null;for(y in r)if(r.hasOwnProperty(y)&&(S=r[y],S!=null))switch(y){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Et(t,s,y,S,r,null)}Ks(t,c,f,m);return;case"option":for(z in r)if(r.hasOwnProperty(z)&&(c=r[z],c!=null))switch(z){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Et(t,s,z,c,r,null)}return;case"dialog":et("beforetoggle",t),et("toggle",t),et("cancel",t),et("close",t);break;case"iframe":case"object":et("load",t);break;case"video":case"audio":for(c=0;c<ql.length;c++)et(ql[c],t);break;case"image":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"embed":case"source":case"link":et("error",t),et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in r)if(r.hasOwnProperty(ne)&&(c=r[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Et(t,s,ne,c,r,null)}return;default:if(za(s)){for(he in r)r.hasOwnProperty(he)&&(c=r[he],c!==void 0&&Mf(t,s,he,c,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(c=r[S],c!=null&&Et(t,s,S,c,r,null))}function O1(t,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,y=null,S=null,z=null,ne=null,he=null;for(oe in r){var ve=r[oe];if(r.hasOwnProperty(oe)&&ve!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":z=ve;default:c.hasOwnProperty(oe)||Et(t,s,oe,null,c,ve)}}for(var re in c){var oe=c[re];if(ve=r[re],c.hasOwnProperty(re)&&(oe!=null||ve!=null))switch(re){case"type":m=oe;break;case"name":f=oe;break;case"checked":ne=oe;break;case"defaultChecked":he=oe;break;case"value":y=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:oe!==ve&&Et(t,s,re,oe,c,ve)}}Ta(t,y,S,z,ne,he,m,f);return;case"select":oe=y=S=re=null;for(m in r)if(z=r[m],r.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":oe=z;default:c.hasOwnProperty(m)||Et(t,s,m,null,c,z)}for(f in c)if(m=c[f],z=r[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":re=m;break;case"defaultValue":S=m;break;case"multiple":y=m;default:m!==z&&Et(t,s,f,m,c,z)}s=S,r=y,c=oe,re!=null?Ma(t,!!r,re,!1):!!c!=!!r&&(s!=null?Ma(t,!!r,s,!0):Ma(t,!!r,r?[]:"",!1));return;case"textarea":oe=re=null;for(S in r)if(f=r[S],r.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Et(t,s,S,null,c,f)}for(y in c)if(f=c[y],m=r[y],c.hasOwnProperty(y)&&(f!=null||m!=null))switch(y){case"value":re=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Et(t,s,y,f,c,m)}Dn(t,re,oe);return;case"option":for(var ze in r)if(re=r[ze],r.hasOwnProperty(ze)&&re!=null&&!c.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:Et(t,s,ze,null,c,re)}for(z in c)if(re=c[z],oe=r[z],c.hasOwnProperty(z)&&re!==oe&&(re!=null||oe!=null))switch(z){case"selected":t.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Et(t,s,z,re,c,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in r)re=r[qe],r.hasOwnProperty(qe)&&re!=null&&!c.hasOwnProperty(qe)&&Et(t,s,qe,null,c,re);for(ne in c)if(re=c[ne],oe=r[ne],c.hasOwnProperty(ne)&&re!==oe&&(re!=null||oe!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:Et(t,s,ne,re,c,oe)}return;default:if(za(s)){for(var kt in r)re=r[kt],r.hasOwnProperty(kt)&&re!==void 0&&!c.hasOwnProperty(kt)&&Mf(t,s,kt,void 0,c,re);for(he in c)re=c[he],oe=r[he],!c.hasOwnProperty(he)||re===oe||re===void 0&&oe===void 0||Mf(t,s,he,re,c,oe);return}}for(var G in r)re=r[G],r.hasOwnProperty(G)&&re!=null&&!c.hasOwnProperty(G)&&Et(t,s,G,null,c,re);for(ve in c)re=c[ve],oe=r[ve],!c.hasOwnProperty(ve)||re===oe||re==null&&oe==null||Et(t,s,ve,re,c,oe)}function Cx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],m=f.transferSize,y=f.initiatorType,S=f.duration;if(m&&S&&Cx(y)){for(y=0,S=f.responseEnd,c+=1;c<r.length;c++){var z=r[c],ne=z.startTime;if(ne>S)break;var he=z.transferSize,ve=z.initiatorType;he&&Cx(ve)&&(z=z.responseEnd,y+=he*(z<S?1:(S-ne)/(z-ne)))}if(--c,s+=8*(m+y)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Rf=null,zf=null;function wc(t){return t.nodeType===9?t:t.ownerDocument}function Nx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ex(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Of(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lf=null;function U1(){var t=window.event;return t&&t.type==="popstate"?t===Lf?!1:(Lf=t,!0):(Lf=null,!1)}var kx=typeof setTimeout=="function"?setTimeout:void 0,B1=typeof clearTimeout=="function"?clearTimeout:void 0,_x=typeof Promise=="function"?Promise:void 0,$1=typeof queueMicrotask=="function"?queueMicrotask:typeof _x<"u"?function(t){return _x.resolve(null).then(t).catch(q1)}:kx;function q1(t){setTimeout(function(){throw t})}function tr(t){return t==="head"}function Ax(t,s){var r=s,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(f),zi(s);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Hl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Hl(r);for(var m=r.firstChild;m;){var y=m.nextSibling,S=m.nodeName;m[mr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=y}}else r==="body"&&Hl(t.ownerDocument.body);r=f}while(r);zi(s)}function Dx(t,s){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function Uf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Uf(r),pr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function F1(t,s,r,c){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[mr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Es(t.nextSibling),t===null)break}return null}function H1(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Es(t.nextSibling),t===null))return null;return t}function Tx(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Es(t.nextSibling),t===null))return null;return t}function Bf(t){return t.data==="$?"||t.data==="$~"}function $f(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Z1(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Es(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var qf=null;function Mx(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return Es(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function Rx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function zx(t,s,r){switch(s=wc(r),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Hl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);pr(t)}var ks=new Map,Ox=new Set;function jc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sa=U.d;U.d={f:V1,r:I1,D:Q1,C:P1,L:W1,m:K1,X:Y1,S:G1,M:X1};function V1(){var t=Sa.f(),s=hc();return t||s}function I1(t){var s=Is(t);s!==null&&s.tag===5&&s.type==="form"?Xp(s):Sa.r(t)}var Ti=typeof document>"u"?null:document;function Lx(t,s,r){var c=Ti;if(c&&typeof s=="string"&&s){var f=Ue(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),Ox.has(f)||(Ox.add(f),t={rel:t,crossOrigin:r,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),_n(s,"link",t),Zt(s),c.head.appendChild(s)))}}function Q1(t){Sa.D(t),Lx("dns-prefetch",t,null)}function P1(t,s){Sa.C(t,s),Lx("preconnect",t,s)}function W1(t,s,r){Sa.L(t,s,r);var c=Ti;if(c&&t&&s){var f='link[rel="preload"][as="'+Ue(s)+'"]';s==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Ue(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Ue(r.imageSizes)+'"]')):f+='[href="'+Ue(t)+'"]';var m=f;switch(s){case"style":m=Mi(t);break;case"script":m=Ri(t)}ks.has(m)||(t=v({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),ks.set(m,t),c.querySelector(f)!==null||s==="style"&&c.querySelector(Zl(m))||s==="script"&&c.querySelector(Vl(m))||(s=c.createElement("link"),_n(s,"link",t),Zt(s),c.head.appendChild(s)))}}function K1(t,s){Sa.m(t,s);var r=Ti;if(r&&t){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ue(c)+'"][href="'+Ue(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ri(t)}if(!ks.has(m)&&(t=v({rel:"modulepreload",href:t},s),ks.set(m,t),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Vl(m)))return}c=r.createElement("link"),_n(c,"link",t),Zt(c),r.head.appendChild(c)}}}function G1(t,s,r){Sa.S(t,s,r);var c=Ti;if(c&&t){var f=la(c).hoistableStyles,m=Mi(t);s=s||"default";var y=f.get(m);if(!y){var S={loading:0,preload:null};if(y=c.querySelector(Zl(m)))S.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":s},r),(r=ks.get(m))&&Ff(t,r);var z=y=c.createElement("link");Zt(z),_n(z,"link",t),z._p=new Promise(function(ne,he){z.onload=ne,z.onerror=he}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Sc(y,s,c)}y={type:"stylesheet",instance:y,count:1,state:S},f.set(m,y)}}}function Y1(t,s){Sa.X(t,s);var r=Ti;if(r&&t){var c=la(r).hoistableScripts,f=Ri(t),m=c.get(f);m||(m=r.querySelector(Vl(f)),m||(t=v({src:t,async:!0},s),(s=ks.get(f))&&Hf(t,s),m=r.createElement("script"),Zt(m),_n(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function X1(t,s){Sa.M(t,s);var r=Ti;if(r&&t){var c=la(r).hoistableScripts,f=Ri(t),m=c.get(f);m||(m=r.querySelector(Vl(f)),m||(t=v({src:t,async:!0,type:"module"},s),(s=ks.get(f))&&Hf(t,s),m=r.createElement("script"),Zt(m),_n(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Ux(t,s,r,c){var f=(f=H.current)?jc(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Mi(r.href),r=la(f).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Mi(r.href);var m=la(f).hoistableStyles,y=m.get(t);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,y),(m=f.querySelector(Zl(t)))&&!m._p&&(y.instance=m,y.state.loading=5),ks.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ks.set(t,r),m||J1(f,t,r,y.state))),s&&c===null)throw Error(i(528,""));return y}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ri(r),r=la(f).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Mi(t){return'href="'+Ue(t)+'"'}function Zl(t){return'link[rel="stylesheet"]['+t+"]"}function Bx(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function J1(t,s,r,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),_n(s,"link",r),Zt(s),t.head.appendChild(s))}function Ri(t){return'[src="'+Ue(t)+'"]'}function Vl(t){return"script[async]"+t}function $x(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+Ue(r.href)+'"]');if(c)return s.instance=c,Zt(c),c;var f=v({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Zt(c),_n(c,"style",f),Sc(c,r.precedence,t),s.instance=c;case"stylesheet":f=Mi(r.href);var m=t.querySelector(Zl(f));if(m)return s.state.loading|=4,s.instance=m,Zt(m),m;c=Bx(r),(f=ks.get(f))&&Ff(c,f),m=(t.ownerDocument||t).createElement("link"),Zt(m);var y=m;return y._p=new Promise(function(S,z){y.onload=S,y.onerror=z}),_n(m,"link",c),s.state.loading|=4,Sc(m,r.precedence,t),s.instance=m;case"script":return m=Ri(r.src),(f=t.querySelector(Vl(m)))?(s.instance=f,Zt(f),f):(c=r,(f=ks.get(m))&&(c=v({},r),Hf(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),Zt(f),_n(f,"link",c),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Sc(c,r.precedence,t));return s.instance}function Sc(t,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,y=0;y<c.length;y++){var S=c[y];if(S.dataset.precedence===s)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Ff(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Hf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Cc=null;function qx(t,s,r){if(Cc===null){var c=new Map,f=Cc=new Map;f.set(r,c)}else f=Cc,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[mr]||m[nn]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var y=m.getAttribute(s)||"";y=t+y;var S=c.get(y);S?S.push(m):c.set(y,[m])}}return c}function Fx(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function ej(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Hx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tj(t,s,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Mi(c.href),m=s.querySelector(Zl(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Nc.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=m,Zt(m);return}m=s.ownerDocument||s,c=Bx(c),(f=ks.get(f))&&Ff(c,f),m=m.createElement("link"),Zt(m);var y=m;y._p=new Promise(function(S,z){y.onload=S,y.onerror=z}),_n(m,"link",c),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Nc.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var Zf=0;function nj(t,s){return t.stylesheets&&t.count===0&&kc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&kc(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Zf===0&&(Zf=62500*L1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&kc(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Zf?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ec=null;function kc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ec=new Map,s.forEach(sj,t),Ec=null,Nc.call(t))}function sj(t,s){if(!(s.state.loading&4)){var r=Ec.get(t);if(r)var c=r.get(null);else{r=new Map,Ec.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var y=f[m];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),c=y)}c&&r.set(null,c)}f=s.instance,y=f.getAttribute("data-precedence"),m=r.get(y)||c,m===c&&r.set(null,f),r.set(y,f),this.count++,c=Nc.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Il={$$typeof:B,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function aj(t,s,r,c,f,m,y,S,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Zx(t,s,r,c,f,m,y,S,z,ne,he,ve){return t=new aj(t,s,r,y,z,ne,he,ve,S),s=1,m===!0&&(s|=24),m=ls(3,null,null,s),t.current=m,m.stateNode=t,s=wd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:s},Nd(m),t}function Vx(t){return t?(t=ui,t):ui}function Ix(t,s,r,c,f,m){f=Vx(f),c.context===null?c.context=f:c.pendingContext=f,c=Va(s),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ia(t,c,s),r!==null&&(Wn(r,t,s),Sl(r,t,s))}function Qx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Vf(t,s){Qx(t,s),(t=t.alternate)&&Qx(t,s)}function Px(t){if(t.tag===13||t.tag===31){var s=_r(t,67108864);s!==null&&Wn(s,t,67108864),Vf(t,67108864)}}function Wx(t){if(t.tag===13||t.tag===31){var s=fs();s=gs(s);var r=_r(t,s);r!==null&&Wn(r,t,s),Vf(t,s)}}var _c=!0;function rj(t,s,r,c){var f=D.T;D.T=null;var m=U.p;try{U.p=2,If(t,s,r,c)}finally{U.p=m,D.T=f}}function ij(t,s,r,c){var f=D.T;D.T=null;var m=U.p;try{U.p=8,If(t,s,r,c)}finally{U.p=m,D.T=f}}function If(t,s,r,c){if(_c){var f=Qf(c);if(f===null)Tf(t,s,c,Ac,r),Gx(t,c);else if(oj(f,t,s,r,c))c.stopPropagation();else if(Gx(t,c),s&4&&-1<lj.indexOf(t)){for(;f!==null;){var m=Is(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var y=pt(m.pendingLanes);if(y!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var z=1<<31-Rt(y);S.entanglements[1]|=z,y&=~z}ta(m),(gt&6)===0&&(dc=we()+500,$l(0))}}break;case 31:case 13:S=_r(m,2),S!==null&&Wn(S,m,2),hc(),Vf(m,2)}if(m=Qf(c),m===null&&Tf(t,s,c,Ac,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else Tf(t,s,c,null,r)}}function Qf(t){return t=sl(t),Pf(t)}var Ac=null;function Pf(t){if(Ac=null,t=ka(t),t!==null){var s=u(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=d(s),t!==null)return t;t=null}else if(r===31){if(t=h(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Ac=t,null}function Kx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Re:return 2;case Qe:return 8;case Pe:case mt:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var Wf=!1,nr=null,sr=null,ar=null,Ql=new Map,Pl=new Map,rr=[],lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gx(t,s){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Ql.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(s.pointerId)}}function Wl(t,s,r,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Is(s),s!==null&&Px(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function oj(t,s,r,c,f){switch(s){case"focusin":return nr=Wl(nr,t,s,r,c,f),!0;case"dragenter":return sr=Wl(sr,t,s,r,c,f),!0;case"mouseover":return ar=Wl(ar,t,s,r,c,f),!0;case"pointerover":var m=f.pointerId;return Ql.set(m,Wl(Ql.get(m)||null,t,s,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Pl.set(m,Wl(Pl.get(m)||null,t,s,r,c,f)),!0}return!1}function Yx(t){var s=ka(t.target);if(s!==null){var r=u(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){t.blockedOn=s,es(t.priority,function(){Wx(r)});return}}else if(s===31){if(s=h(r),s!==null){t.blockedOn=s,es(t.priority,function(){Wx(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Qf(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);Yt=c,r.target.dispatchEvent(c),Yt=null}else return s=Is(r),s!==null&&Px(s),t.blockedOn=r,!1;s.shift()}return!0}function Xx(t,s,r){Dc(t)&&r.delete(s)}function cj(){Wf=!1,nr!==null&&Dc(nr)&&(nr=null),sr!==null&&Dc(sr)&&(sr=null),ar!==null&&Dc(ar)&&(ar=null),Ql.forEach(Xx),Pl.forEach(Xx)}function Tc(t,s){t.blockedOn===s&&(t.blockedOn=null,Wf||(Wf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cj)))}var Mc=null;function Jx(t){Mc!==t&&(Mc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Mc===t&&(Mc=null);for(var s=0;s<t.length;s+=3){var r=t[s],c=t[s+1],f=t[s+2];if(typeof c!="function"){if(Pf(c||r)===null)continue;break}var m=Is(r);m!==null&&(t.splice(s,3),s-=3,Id(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function zi(t){function s(z){return Tc(z,t)}nr!==null&&Tc(nr,t),sr!==null&&Tc(sr,t),ar!==null&&Tc(ar,t),Ql.forEach(s),Pl.forEach(s);for(var r=0;r<rr.length;r++){var c=rr[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<rr.length&&(r=rr[0],r.blockedOn===null);)Yx(r),r.blockedOn===null&&rr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],y=f[An]||null;if(typeof m=="function")y||Jx(r);else if(y){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,y=m[An]||null)S=y.formAction;else if(Pf(f)!==null)continue}else S=y.action;typeof S=="function"?r[c+1]=S:(r.splice(c,3),c-=3),Jx(r)}}}function e0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Kf(t){this._internalRoot=t}Rc.prototype.render=Kf.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,c=fs();Ix(r,c,t,s,null,null)},Rc.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ix(t.current,2,null,t,null,null),hc(),s[Vs]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var s=Zn();t={blockedOn:null,target:t,priority:s};for(var r=0;r<rr.length&&s!==0&&s<rr[r].priority;r++);rr.splice(r,0,t),r===0&&Yx(t)}};var t0=n.version;if(t0!=="19.2.0")throw Error(i(527,t0,"19.2.0"));U.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=x(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var uj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{vt=zc.inject(uj),Xe=zc}catch{}}return Gl.createRoot=function(t,s){if(!o(t))throw Error(i(299));var r=!1,c="",f=og,m=cg,y=ug;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=Zx(t,1,!1,null,null,r,c,null,f,m,y,e0),t[Vs]=s.current,Df(t),new Kf(s)},Gl.hydrateRoot=function(t,s,r){if(!o(t))throw Error(i(299));var c=!1,f="",m=og,y=cg,S=ug,z=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(z=r.formState)),s=Zx(t,1,!0,s,r??null,c,f,z,m,y,S,e0),s.context=Vx(null),r=s.current,c=fs(),c=gs(c),f=Va(c),f.callback=null,Ia(r,f,c),r=c,s.current.lanes=r,Fn(s,r),ta(s),t[Vs]=s.current,Df(t),new Rc(s)},Gl.version="19.2.0",Gl}var d0;function vj(){if(d0)return Xf.exports;d0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Xf.exports=bj(),Xf.exports}var yj=vj();const wj=dv(yj),hu=p.createContext(null);function jj({children:e}){const[n,a]=p.useState(()=>({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash})),i=p.useRef(new Set),o=p.useRef(n);p.useEffect(()=>{o.current=n},[n]);const u=p.useCallback(x=>{for(const b of i.current)if(b(x)===!1)return!1;return!0},[]);p.useEffect(()=>{const x=()=>{const b={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},v=`${b.pathname}${b.search}${b.hash}`;if(!u({kind:"pop",to:v,location:b})){const C=o.current;window.history.pushState(null,"",`${C.pathname}${C.search}${C.hash}`);return}a(b)};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[u]);const d=p.useCallback(x=>(i.current.add(x),()=>{i.current.delete(x)}),[]),h=p.useCallback((x,b)=>{const v=new URL(x,window.location.origin),w={pathname:v.pathname,search:v.search,hash:v.hash},C=`${w.pathname}${w.search}${w.hash}`,N=b?.replace?"replace":"push";u({kind:N,to:C,location:w})&&(b?.replace?window.history.replaceState(null,"",C):window.history.pushState(null,"",C),window.dispatchEvent(new PopStateEvent("popstate")))},[u]),g=p.useMemo(()=>({location:n,navigate:h,registerBlocker:d}),[n,h,d]);return l.jsx(hu.Provider,{value:g,children:e})}function qn(){const e=p.useContext(hu);if(!e)throw new Error("useLocation must be used within NavProvider");return e.location}function Ft(){const e=p.useContext(hu);if(!e)throw new Error("useNavigate must be used within NavProvider");return e.navigate}function hv(e,n=!0){const a=p.useContext(hu);if(!a)throw new Error("useNavigationBlocker must be used within NavProvider");p.useEffect(()=>{if(n)return a.registerBlocker(e)},[e,a,n])}var Qi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sj={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},Cj=class{#e=Sj;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},Zr=new Cj;function Nj(e){setTimeout(e,0)}var Qr=typeof window>"u"||"Deno"in globalThis;function Bn(){}function Ej(e,n){return typeof e=="function"?e(n):e}function vh(e){return typeof e=="number"&&e>=0&&e!==1/0}function mv(e,n){return Math.max(e+(n||0)-Date.now(),0)}function cr(e,n){return typeof e=="function"?e(n):e}function As(e,n){return typeof e=="function"?e(n):e}function f0(e,n){const{type:a="all",exact:i,fetchStatus:o,predicate:u,queryKey:d,stale:h}=e;if(d){if(i){if(n.queryHash!==Ih(d,n.options))return!1}else if(!lo(n.queryKey,d))return!1}if(a!=="all"){const g=n.isActive();if(a==="active"&&!g||a==="inactive"&&g)return!1}return!(typeof h=="boolean"&&n.isStale()!==h||o&&o!==n.state.fetchStatus||u&&!u(n))}function h0(e,n){const{exact:a,status:i,predicate:o,mutationKey:u}=e;if(u){if(!n.options.mutationKey)return!1;if(a){if(Pr(n.options.mutationKey)!==Pr(u))return!1}else if(!lo(n.options.mutationKey,u))return!1}return!(i&&n.state.status!==i||o&&!o(n))}function Ih(e,n){return(n?.queryKeyHashFn||Pr)(e)}function Pr(e){return JSON.stringify(e,(n,a)=>yh(a)?Object.keys(a).sort().reduce((i,o)=>(i[o]=a[o],i),{}):a)}function lo(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(a=>lo(e[a],n[a])):!1}var kj=Object.prototype.hasOwnProperty;function pv(e,n){if(e===n)return e;const a=m0(e)&&m0(n);if(!a&&!(yh(e)&&yh(n)))return n;const o=(a?e:Object.keys(e)).length,u=a?n:Object.keys(n),d=u.length,h=a?new Array(d):{};let g=0;for(let x=0;x<d;x++){const b=a?x:u[x],v=e[b],w=n[b];if(v===w){h[b]=v,(a?x<o:kj.call(e,b))&&g++;continue}if(v===null||w===null||typeof v!="object"||typeof w!="object"){h[b]=w;continue}const C=pv(v,w);h[b]=C,C===v&&g++}return o===d&&g===o?e:h}function Yc(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(e[a]!==n[a])return!1;return!0}function m0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yh(e){if(!p0(e))return!1;const n=e.constructor;if(n===void 0)return!0;const a=n.prototype;return!(!p0(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function p0(e){return Object.prototype.toString.call(e)==="[object Object]"}function _j(e){return new Promise(n=>{Zr.setTimeout(n,e)})}function wh(e,n,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,n):a.structuralSharing!==!1?pv(e,n):n}function Aj(e,n,a=0){const i=[...e,n];return a&&i.length>a?i.slice(1):i}function Dj(e,n,a=0){const i=[n,...e];return a&&i.length>a?i.slice(0,-1):i}var Qh=Symbol();function gv(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===Qh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function xv(e,n){return typeof e=="function"?e(...n):!!e}var Tj=class extends Qi{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Qr&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ph=new Tj;function jh(){let e,n;const a=new Promise((o,u)=>{e=o,n=u});a.status="pending",a.catch(()=>{});function i(o){Object.assign(a,o),delete a.resolve,delete a.reject}return a.resolve=o=>{i({status:"fulfilled",value:o}),e(o)},a.reject=o=>{i({status:"rejected",reason:o}),n(o)},a}var Mj=Nj;function Rj(){let e=[],n=0,a=h=>{h()},i=h=>{h()},o=Mj;const u=h=>{n?e.push(h):o(()=>{a(h)})},d=()=>{const h=e;e=[],h.length&&o(()=>{i(()=>{h.forEach(g=>{a(g)})})})};return{batch:h=>{let g;n++;try{g=h()}finally{n--,n||d()}return g},batchCalls:h=>(...g)=>{u(()=>{h(...g)})},schedule:u,setNotifyFunction:h=>{a=h},setBatchNotifyFunction:h=>{i=h},setScheduler:h=>{o=h}}}var mn=Rj(),zj=class extends Qi{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Qr&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(a=>{a(e)}))}isOnline(){return this.#e}},Xc=new zj;function Oj(e){return Math.min(1e3*2**e,3e4)}function bv(e){return(e??"online")==="online"?Xc.isOnline():!0}var Sh=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function vv(e){let n=!1,a=0,i;const o=jh(),u=()=>o.status!=="pending",d=j=>{if(!u()){const k=new Sh(j);w(k),e.onCancel?.(k)}},h=()=>{n=!0},g=()=>{n=!1},x=()=>Ph.isFocused()&&(e.networkMode==="always"||Xc.isOnline())&&e.canRun(),b=()=>bv(e.networkMode)&&e.canRun(),v=j=>{u()||(i?.(),o.resolve(j))},w=j=>{u()||(i?.(),o.reject(j))},C=()=>new Promise(j=>{i=k=>{(u()||x())&&j(k)},e.onPause?.()}).then(()=>{i=void 0,u()||e.onContinue?.()}),N=()=>{if(u())return;let j;const k=a===0?e.initialPromise:void 0;try{j=k??e.fn()}catch(T){j=Promise.reject(T)}Promise.resolve(j).then(v).catch(T=>{if(u())return;const E=e.retry??(Qr?0:3),B=e.retryDelay??Oj,Q=typeof B=="function"?B(a,T):B,O=E===!0||typeof E=="number"&&a<E||typeof E=="function"&&E(a,T);if(n||!O){w(T);return}a++,e.onFail?.(a,T),_j(Q).then(()=>x()?void 0:C()).then(()=>{n?w(T):N()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(i?.(),o),cancelRetry:h,continueRetry:g,canStart:b,start:()=>(b()?N():C().then(N),o)}}var yv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vh(this.gcTime)&&(this.#e=Zr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qr?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Zr.clearTimeout(this.#e),this.#e=void 0)}},Lj=class extends yv{#e;#t;#n;#a;#s;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#n=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=g0(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=g0(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const a=wh(this.state.data,e,this.options);return this.#r({data:a,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),a}setState(e,n){this.#r({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(Bn).catch(Bn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>As(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!mv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const a=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#l=!0,a.signal)})},o=()=>{const h=gv(this.options,n),x=(()=>{const b={client:this.#a,queryKey:this.queryKey,meta:this.meta};return i(b),b})();return this.#l=!1,this.options.persister?this.options.persister(h,x,this):h(x)},d=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:o};return i(h),h})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#r({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=vv({initialPromise:n?.initialPromise,fn:d.fetchFn,onCancel:h=>{h instanceof Sh&&h.revert&&this.setState({...this.#t,fetchStatus:"idle"}),a.abort()},onFail:(h,g)=>{this.#r({type:"failed",failureCount:h,error:g})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const h=await this.#s.start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),this.#n.config.onSuccess?.(h,this),this.#n.config.onSettled?.(h,this.state.error,this),h}catch(h){if(h instanceof Sh){if(h.silent)return this.#s.promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw this.#r({type:"error",error:h}),this.#n.config.onError?.(h,this),this.#n.config.onSettled?.(this.state.data,h,this),h}finally{this.scheduleGc()}}#r(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...wv(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const o=e.error;return{...a,error:o,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),mn.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function wv(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bv(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function g0(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,a=n!==void 0,i=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:a?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var jv=class extends Qi{constructor(e,n){super(),this.options=n,this.#e=e,this.#r=null,this.#l=jh(),this.bindMethods(),this.setOptions(n)}#e;#t=void 0;#n=void 0;#a=void 0;#s;#i;#l;#r;#p;#f;#h;#c;#u;#o;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),x0(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ch(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ch(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const n=this.options,a=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof As(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),n._defaulted&&!Yc(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&b0(this.#t,a,this.options,n)&&this.#d(),this.updateResult(),i&&(this.#t!==a||As(this.options.enabled,this.#t)!==As(n.enabled,this.#t)||cr(this.options.staleTime,this.#t)!==cr(n.staleTime,this.#t))&&this.#g();const o=this.#x();i&&(this.#t!==a||As(this.options.enabled,this.#t)!==As(n.enabled,this.#t)||o!==this.#o)&&this.#b(o)}getOptimisticResult(e){const n=this.#e.getQueryCache().build(this.#e,e),a=this.createResult(n,e);return Bj(this,a)&&(this.#a=a,this.#i=this.options,this.#s=this.#t.state),a}getCurrentResult(){return this.#a}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#e.defaultQueryOptions(e),a=this.#e.getQueryCache().build(this.#e,n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#d(e){this.#j();let n=this.#t.fetch(this.options,e);return e?.throwOnError||(n=n.catch(Bn)),n}#g(){this.#y();const e=cr(this.options.staleTime,this.#t);if(Qr||this.#a.isStale||!vh(e))return;const a=mv(this.#a.dataUpdatedAt,e)+1;this.#c=Zr.setTimeout(()=>{this.#a.isStale||this.updateResult()},a)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#o=e,!(Qr||As(this.options.enabled,this.#t)===!1||!vh(this.#o)||this.#o===0)&&(this.#u=Zr.setInterval(()=>{(this.options.refetchIntervalInBackground||Ph.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#b(this.#x())}#y(){this.#c&&(Zr.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Zr.clearInterval(this.#u),this.#u=void 0)}createResult(e,n){const a=this.#t,i=this.options,o=this.#a,u=this.#s,d=this.#i,g=e!==a?e.state:this.#n,{state:x}=e;let b={...x},v=!1,w;if(n._optimisticResults){const V=this.hasListeners(),W=!V&&x0(e,n),X=V&&b0(e,a,n,i);(W||X)&&(b={...b,...wv(x.data,e.options)}),n._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:C,errorUpdatedAt:N,status:j}=b;w=b.data;let k=!1;if(n.placeholderData!==void 0&&w===void 0&&j==="pending"){let V;o?.isPlaceholderData&&n.placeholderData===d?.placeholderData?(V=o.data,k=!0):V=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,V!==void 0&&(j="success",w=wh(o?.data,V,n),v=!0)}if(n.select&&w!==void 0&&!k)if(o&&w===u?.data&&n.select===this.#p)w=this.#f;else try{this.#p=n.select,w=n.select(w),w=wh(o?.data,w,n),this.#f=w,this.#r=null}catch(V){this.#r=V}this.#r&&(C=this.#r,w=this.#f,N=Date.now(),j="error");const T=b.fetchStatus==="fetching",E=j==="pending",B=j==="error",Q=E&&T,O=w!==void 0,A={status:j,fetchStatus:b.fetchStatus,isPending:E,isSuccess:j==="success",isError:B,isInitialLoading:Q,isLoading:Q,data:w,dataUpdatedAt:b.dataUpdatedAt,error:C,errorUpdatedAt:N,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>g.dataUpdateCount||b.errorUpdateCount>g.errorUpdateCount,isFetching:T,isRefetching:T&&!E,isLoadingError:B&&!O,isPaused:b.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:B&&O,isStale:Wh(e,n),refetch:this.refetch,promise:this.#l,isEnabled:As(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const V=J=>{A.status==="error"?J.reject(A.error):A.data!==void 0&&J.resolve(A.data)},W=()=>{const J=this.#l=A.promise=jh();V(J)},X=this.#l;switch(X.status){case"pending":e.queryHash===a.queryHash&&V(X);break;case"fulfilled":(A.status==="error"||A.data!==X.value)&&W();break;case"rejected":(A.status!=="error"||A.error!==X.reason)&&W();break}}return A}updateResult(){const e=this.#a,n=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Yc(n,e))return;this.#a=n;const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!this.#m.size)return!0;const u=new Set(o??this.#m);return this.options.throwOnError&&u.add("error"),Object.keys(this.#a).some(d=>{const h=d;return this.#a[h]!==e[h]&&u.has(h)})};this.#S({listeners:a()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const n=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){mn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Uj(e,n){return As(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function x0(e,n){return Uj(e,n)||e.state.data!==void 0&&Ch(e,n,n.refetchOnMount)}function Ch(e,n,a){if(As(n.enabled,e)!==!1&&cr(n.staleTime,e)!=="static"){const i=typeof a=="function"?a(e):a;return i==="always"||i!==!1&&Wh(e,n)}return!1}function b0(e,n,a,i){return(e!==n||As(i.enabled,e)===!1)&&(!a.suspense||e.state.status!=="error")&&Wh(e,a)}function Wh(e,n){return As(n.enabled,e)!==!1&&e.isStaleByTime(cr(n.staleTime,e))}function Bj(e,n){return!Yc(e.getCurrentResult(),n)}function Jc(e){return{onFetch:(n,a)=>{const i=n.options,o=n.fetchOptions?.meta?.fetchMore?.direction,u=n.state.data?.pages||[],d=n.state.data?.pageParams||[];let h={pages:[],pageParams:[]},g=0;const x=async()=>{let b=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(n.signal.aborted?b=!0:n.signal.addEventListener("abort",()=>{b=!0}),n.signal)})},w=gv(n.options,n.fetchOptions),C=async(N,j,k)=>{if(b)return Promise.reject();if(j==null&&N.pages.length)return Promise.resolve(N);const E=(()=>{const I={client:n.client,queryKey:n.queryKey,pageParam:j,direction:k?"backward":"forward",meta:n.options.meta};return v(I),I})(),B=await w(E),{maxPages:Q}=n.options,O=k?Dj:Aj;return{pages:O(N.pages,B,Q),pageParams:O(N.pageParams,j,Q)}};if(o&&u.length){const N=o==="backward",j=N?Sv:Nh,k={pages:u,pageParams:d},T=j(i,k);h=await C(k,T,N)}else{const N=e??u.length;do{const j=g===0?d[0]??i.initialPageParam:Nh(i,h);if(g>0&&j==null)break;h=await C(h,j),g++}while(g<N)}return h};n.options.persister?n.fetchFn=()=>n.options.persister?.(x,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},a):n.fetchFn=x}}}function Nh(e,{pages:n,pageParams:a}){const i=n.length-1;return n.length>0?e.getNextPageParam(n[i],n,a[i],a):void 0}function Sv(e,{pages:n,pageParams:a}){return n.length>0?e.getPreviousPageParam?.(n[0],n,a[0],a):void 0}function $j(e,n){return n?Nh(e,n)!=null:!1}function qj(e,n){return!n||!e.getPreviousPageParam?!1:Sv(e,n)!=null}var Fj=class extends jv{constructor(e,n){super(e,n)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Jc()})}getOptimisticResult(e){return e.behavior=Jc(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,n){const{state:a}=e,i=super.createResult(e,n),{isFetching:o,isRefetching:u,isError:d,isRefetchError:h}=i,g=a.fetchMeta?.fetchMore?.direction,x=d&&g==="forward",b=o&&g==="forward",v=d&&g==="backward",w=o&&g==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:$j(n,a.data),hasPreviousPage:qj(n,a.data),isFetchNextPageError:x,isFetchingNextPage:b,isFetchPreviousPageError:v,isFetchingPreviousPage:w,isRefetchError:h&&!x&&!v,isRefetching:u&&!b&&!w}}},Hj=class extends yv{#e;#t;#n;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Cv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#s({type:"continue"})},a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=vv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",o=!this.#a.canStart();try{if(i)n();else{this.#s({type:"pending",variables:e,isPaused:o}),await this.#n.config.onMutate?.(e,this,a);const d=await this.options.onMutate?.(e,a);d!==this.state.context&&this.#s({type:"pending",context:d,variables:e,isPaused:o})}const u=await this.#a.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,a),await this.options.onSuccess?.(u,e,this.state.context,a),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(u,null,e,this.state.context,a),this.#s({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,a),await this.options.onError?.(u,e,this.state.context,a),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(void 0,u,e,this.state.context,a),u}finally{this.#s({type:"error",error:u})}}finally{this.#n.runNext(this)}}#s(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),mn.batch(()=>{this.#t.forEach(a=>{a.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Cv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zj=class extends Qi{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,a){const i=new Hj({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){this.#e.add(e);const n=Oc(e);if(typeof n=="string"){const a=this.#t.get(n);a?a.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=Oc(e);if(typeof n=="string"){const a=this.#t.get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Oc(e);if(typeof n=="string"){const i=this.#t.get(n)?.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){const n=Oc(e);return typeof n=="string"?this.#t.get(n)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){mn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(a=>h0(n,a))}findAll(e={}){return this.getAll().filter(n=>h0(e,n))}notify(e){mn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return mn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Bn))))}};function Oc(e){return e.options.scope?.id}var Vj=class extends Qi{#e;#t=void 0;#n;#a;constructor(n,a){super(),this.#e=n,this.setOptions(a),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const a=this.options;this.options=this.#e.defaultMutationOptions(n),Yc(this.options,a)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),a?.mutationKey&&this.options.mutationKey&&Pr(a.mutationKey)!==Pr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,a){return this.#a=a,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??Cv();this.#t={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){mn.batch(()=>{if(this.#a&&this.hasListeners()){const a=this.#t.variables,i=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};n?.type==="success"?(this.#a.onSuccess?.(n.data,a,i,o),this.#a.onSettled?.(n.data,null,a,i,o)):n?.type==="error"&&(this.#a.onError?.(n.error,a,i,o),this.#a.onSettled?.(void 0,n.error,a,i,o))}this.listeners.forEach(a=>{a(this.#t)})})}},Ij=class extends Qi{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,a){const i=n.queryKey,o=n.queryHash??Ih(i,n);let u=this.get(o);return u||(u=new Lj({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>f0(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>f0(e,a)):n}notify(e){mn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){mn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Qj=class{#e;#t;#n;#a;#s;#i;#l;#r;constructor(e={}){this.#e=e.queryCache||new Ij,this.#t=e.mutationCache||new Zj,this.#n=e.defaultOptions||{},this.#a=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=Ph.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Xc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),a=this.#e.build(this,n),i=a.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(cr(n.staleTime,a))&&this.prefetchQuery(n),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:a})=>{const i=a.data;return[n,i]})}setQueryData(e,n,a){const i=this.defaultQueryOptions({queryKey:e}),u=this.#e.get(i.queryHash)?.state.data,d=Ej(n,u);if(d!==void 0)return this.#e.build(this,i).setData(d,{...a,manual:!0})}setQueriesData(e,n,a){return mn.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,a)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;mn.batch(()=>{n.findAll(e).forEach(a=>{n.remove(a)})})}resetQueries(e,n){const a=this.#e;return mn.batch(()=>(a.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const a={revert:!0,...n},i=mn.batch(()=>this.#e.findAll(e).map(o=>o.cancel(a)));return Promise.all(i).then(Bn).catch(Bn)}invalidateQueries(e,n={}){return mn.batch(()=>(this.#e.findAll(e).forEach(a=>{a.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const a={...n,cancelRefetch:n.cancelRefetch??!0},i=mn.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let u=o.fetch(void 0,a);return a.throwOnError||(u=u.catch(Bn)),o.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(Bn)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const a=this.#e.build(this,n);return a.isStaleByTime(cr(n.staleTime,a))?a.fetch(n):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Bn).catch(Bn)}fetchInfiniteQuery(e){return e.behavior=Jc(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Bn).catch(Bn)}ensureInfiniteQueryData(e){return e.behavior=Jc(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Xc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#a.set(Pr(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#a.values()],a={};return n.forEach(i=>{lo(e,i.queryKey)&&Object.assign(a,i.defaultOptions)}),a}setMutationDefaults(e,n){this.#s.set(Pr(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],a={};return n.forEach(i=>{lo(e,i.mutationKey)&&Object.assign(a,i.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=Ih(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Qh&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Nv=p.createContext(void 0),ct=e=>{const n=p.useContext(Nv);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},Pj=({client:e,children:n})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(Nv.Provider,{value:e,children:n})),Ev=p.createContext(!1),Wj=()=>p.useContext(Ev);Ev.Provider;function Kj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Gj=p.createContext(Kj()),Yj=()=>p.useContext(Gj),Xj=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},Jj=e=>{p.useEffect(()=>{e.clearReset()},[e])},eS=({result:e,errorResetBoundary:n,throwOnError:a,query:i,suspense:o})=>e.isError&&!n.isReset()&&!e.isFetching&&i&&(o&&e.data===void 0||xv(a,[e.error,i])),tS=e=>{if(e.suspense){const a=o=>o==="static"?o:Math.max(o??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...o)=>a(i(...o)):a(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},nS=(e,n)=>e.isLoading&&e.isFetching&&!n,sS=(e,n)=>e?.suspense&&n.isPending,v0=(e,n,a)=>n.fetchOptimistic(e).catch(()=>{a.clearReset()});function kv(e,n,a){const i=Wj(),o=Yj(),u=ct(),d=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=i?"isRestoring":"optimistic",tS(d),Xj(d,o),Jj(o);const h=!u.getQueryCache().get(d.queryHash),[g]=p.useState(()=>new n(u,d)),x=g.getOptimisticResult(d),b=!i&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(v=>{const w=b?g.subscribe(mn.batchCalls(v)):Bn;return g.updateResult(),w},[g,b]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),p.useEffect(()=>{g.setOptions(d)},[d,g]),sS(d,x))throw v0(d,g,o);if(eS({result:x,errorResetBoundary:o,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw x.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(d,x),d.experimental_prefetchInRender&&!Qr&&nS(x,i)&&(h?v0(d,g,o):u.getQueryCache().get(d.queryHash)?.promise)?.catch(Bn).finally(()=>{g.updateResult()}),d.notifyOnChangeProps?x:g.trackResult(x)}function On(e,n){return kv(e,jv)}function Vt(e,n){const a=ct(),[i]=p.useState(()=>new Vj(a,e));p.useEffect(()=>{i.setOptions(e)},[i,e]);const o=p.useSyncExternalStore(p.useCallback(d=>i.subscribe(mn.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=p.useCallback((d,h)=>{i.mutate(d,h).catch(Bn)},[i]);if(o.error&&xv(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:u,mutateAsync:o.mutate}}function Kh(e,n){return kv(e,Fj)}const aS="modulepreload",rS=function(e){return"/"+e},y0={},iS=function(n,a,i){let o=Promise.resolve();if(a&&a.length>0){let g=function(x){return Promise.all(x.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");o=g(a.map(x=>{if(x=rS(x),x in y0)return;y0[x]=!0;const b=x.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":aS,b||(w.as="script"),w.crossOrigin="",w.href=x,h&&w.setAttribute("nonce",h),document.head.appendChild(w),b)return new Promise((C,N)=>{w.addEventListener("load",C),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return o.then(d=>{for(const h of d||[])h.status==="rejected"&&u(h.reason);return n().catch(u)})};function lS({children:e}){const[n]=p.useState(()=>new Qj({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}}));return l.jsxs(Pj,{client:n,children:[e,null]})}class $n extends Error{status;problem;constructor(n,a,i){super(n),this.name="ApiError",this.status=a,this.problem=i}}const oS=/\{[^{}]+\}/g,cS=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function uS(){return Math.random().toString(36).slice(2,11)}function dS(e){let{baseUrl:n="",Request:a=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:o,bodySerializer:u,headers:d,requestInitExt:h=void 0,...g}={...e};h=cS()?h:void 0,n=S0(n);const x=[];async function b(v,w){const{baseUrl:C,fetch:N=i,Request:j=a,headers:k,params:T={},parseAs:E="json",querySerializer:B,bodySerializer:Q=u??hS,body:O,middleware:I=[],...A}=w||{};let V=n;C&&(V=S0(C)??n);let W=typeof o=="function"?o:w0(o);B&&(W=typeof B=="function"?B:w0({...typeof o=="object"?o:{},...B}));const X=O===void 0?void 0:Q(O,j0(d,k,T.header)),J=j0(X===void 0||X instanceof FormData?{}:{"Content-Type":"application/json"},d,k,T.header),L=[...x,...I],ae={redirect:"follow",...g,...A,body:X,headers:J};let de,be,D=new j(mS(v,{baseUrl:V,params:T,querySerializer:W}),ae),U;for(const me in A)me in D||(D[me]=A[me]);if(L.length){de=uS(),be=Object.freeze({baseUrl:V,fetch:N,parseAs:E,querySerializer:W,bodySerializer:Q});for(const me of L)if(me&&typeof me=="object"&&typeof me.onRequest=="function"){const se=await me.onRequest({request:D,schemaPath:v,params:T,options:be,id:de});if(se)if(se instanceof j)D=se;else if(se instanceof Response){U=se;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!U){try{U=await N(D,h)}catch(me){let se=me;if(L.length)for(let _=L.length-1;_>=0;_--){const P=L[_];if(P&&typeof P=="object"&&typeof P.onError=="function"){const le=await P.onError({request:D,error:se,schemaPath:v,params:T,options:be,id:de});if(le){if(le instanceof Response){se=void 0,U=le;break}if(le instanceof Error){se=le;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(se)throw se}if(L.length)for(let me=L.length-1;me>=0;me--){const se=L[me];if(se&&typeof se=="object"&&typeof se.onResponse=="function"){const _=await se.onResponse({request:D,response:U,schemaPath:v,params:T,options:be,id:de});if(_){if(!(_ instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");U=_}}}}if(U.status===204||D.method==="HEAD"||U.headers.get("Content-Length")==="0")return U.ok?{data:void 0,response:U}:{error:void 0,response:U};if(U.ok)return E==="stream"?{data:U.body,response:U}:{data:await U[E](),response:U};let ie=await U.text();try{ie=JSON.parse(ie)}catch{}return{error:ie,response:U}}return{request(v,w,C){return b(w,{...C,method:v.toUpperCase()})},GET(v,w){return b(v,{...w,method:"GET"})},PUT(v,w){return b(v,{...w,method:"PUT"})},POST(v,w){return b(v,{...w,method:"POST"})},DELETE(v,w){return b(v,{...w,method:"DELETE"})},OPTIONS(v,w){return b(v,{...w,method:"OPTIONS"})},HEAD(v,w){return b(v,{...w,method:"HEAD"})},PATCH(v,w){return b(v,{...w,method:"PATCH"})},TRACE(v,w){return b(v,{...w,method:"TRACE"})},use(...v){for(const w of v)if(w){if(typeof w!="object"||!("onRequest"in w||"onResponse"in w||"onError"in w))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");x.push(w)}},eject(...v){for(const w of v){const C=x.indexOf(w);C!==-1&&x.splice(C,1)}}}}function mu(e,n,a){if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${a?.allowReserved===!0?n:encodeURIComponent(n)}`}function _v(e,n,a){if(!n||typeof n!="object")return"";const i=[],o={simple:",",label:".",matrix:";"}[a.style]||"&";if(a.style!=="deepObject"&&a.explode===!1){for(const h in n)i.push(h,a.allowReserved===!0?n[h]:encodeURIComponent(n[h]));const d=i.join(",");switch(a.style){case"form":return`${e}=${d}`;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return d}}for(const d in n){const h=a.style==="deepObject"?`${e}[${d}]`:d;i.push(mu(h,n[d],a))}const u=i.join(o);return a.style==="label"||a.style==="matrix"?`${o}${u}`:u}function Av(e,n,a){if(!Array.isArray(n))return"";if(a.explode===!1){const u={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[a.style]||",",d=(a.allowReserved===!0?n:n.map(h=>encodeURIComponent(h))).join(u);switch(a.style){case"simple":return d;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return`${e}=${d}`}}const i={simple:",",label:".",matrix:";"}[a.style]||"&",o=[];for(const u of n)a.style==="simple"||a.style==="label"?o.push(a.allowReserved===!0?u:encodeURIComponent(u)):o.push(mu(e,u,a));return a.style==="label"||a.style==="matrix"?`${i}${o.join(i)}`:o.join(i)}function w0(e){return function(a){const i=[];if(a&&typeof a=="object")for(const o in a){const u=a[o];if(u!=null){if(Array.isArray(u)){if(u.length===0)continue;i.push(Av(o,u,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof u=="object"){i.push(_v(o,u,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}i.push(mu(o,u,e))}}return i.join("&")}}function fS(e,n){let a=e;for(const i of e.match(oS)??[]){let o=i.substring(1,i.length-1),u=!1,d="simple";if(o.endsWith("*")&&(u=!0,o=o.substring(0,o.length-1)),o.startsWith(".")?(d="label",o=o.substring(1)):o.startsWith(";")&&(d="matrix",o=o.substring(1)),!n||n[o]===void 0||n[o]===null)continue;const h=n[o];if(Array.isArray(h)){a=a.replace(i,Av(o,h,{style:d,explode:u}));continue}if(typeof h=="object"){a=a.replace(i,_v(o,h,{style:d,explode:u}));continue}if(d==="matrix"){a=a.replace(i,`;${mu(o,h)}`);continue}a=a.replace(i,d==="label"?`.${encodeURIComponent(h)}`:encodeURIComponent(h))}return a}function hS(e,n){return e instanceof FormData?e:n&&(n.get instanceof Function?n.get("Content-Type")??n.get("content-type"):n["Content-Type"]??n["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function mS(e,n){let a=`${n.baseUrl}${e}`;n.params?.path&&(a=fS(a,n.params.path));let i=n.querySerializer(n.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(a+=`?${i}`),a}function j0(...e){const n=new Headers;for(const a of e){if(!a||typeof a!="object")continue;const i=a instanceof Headers?a.entries():Object.entries(a);for(const[o,u]of i)if(u===null)n.delete(o);else if(Array.isArray(u))for(const d of u)n.append(o,d);else u!==void 0&&n.set(o,u)}return n}function S0(e){return e.endsWith("/")?e.substring(0,e.length-1):e}const pS=["ade_csrf","backend_app_csrf"];function gS(){return pS}function xS(){if(typeof document>"u")return null;const e=document.cookie;if(!e)return null;const n=new Map,a=e.split(";");for(const i of a){const[o,...u]=i.trim().split("=");o&&n.set(o,decodeURIComponent(u.join("=")))}return n}function Dv(){const e=xS();if(!e)return null;for(const n of gS()){const a=e.get(n);if(a)return a}return null}const Tv=new Set(["GET","HEAD","OPTIONS","TRACE"]),bS="ade.auth.tokens",nh="",eu=nh.endsWith("/api/v1")?nh.slice(0,-7):nh;function Pi(e){if(!e.startsWith("/"))throw new Error("API paths must begin with '/' relative to the server root");return eu.length>0?`${eu}${e}`:e}async function vS(e,n={}){const a=Pi(e),i=new Headers(n.headers??{});if(i.set("X-Requested-With","fetch"),!i.has("Authorization")){const d=Mv();d&&i.set("Authorization",`${d.token_type} ${d.access_token}`)}const o=n.method?.toUpperCase()??"GET";if(!Tv.has(o)){const d=Dv();d&&!i.has("X-CSRF-Token")&&i.set("X-CSRF-Token",d)}return await fetch(a,{credentials:"include",...n,headers:i})}const He=dS({baseUrl:eu.length>0?eu:void 0,credentials:"include",headers:{"X-Requested-With":"fetch"}}),yS={onRequest({request:e}){const n=e.method?.toUpperCase()??"GET";if(!Tv.has(n)){const a=Dv();a&&!e.headers.has("X-CSRF-Token")&&e.headers.set("X-CSRF-Token",a)}return e}},wS={onRequest({request:e}){if(!e.headers.has("Authorization")){const n=Mv();n&&e.headers.set("Authorization",`${n.token_type} ${n.access_token}`)}return e}},jS={async onResponse({response:e}){if(e.ok)return e;const n=await SS(e),a=n?.title??`Request failed with status ${e.status}`;throw new $n(a,e.status,n)}};He.use(yS);He.use(wS);He.use(jS);function Mv(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(bS);if(!e)return null;const n=JSON.parse(e);if(n&&typeof n.access_token=="string")return{access_token:n.access_token,token_type:n.token_type??"bearer"}}catch{}return null}async function SS(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Hs={root:["auth"],detail:()=>[...Hs.root,"session"],providers:()=>[...Hs.root,"providers"],setupStatus:()=>[...Hs.root,"setup-status"]},Gh="ade.auth.tokens";let go=CS();function CS(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Gh);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.access_token!="string"?null:{access_token:n.access_token,token_type:n.token_type??"bearer",expires_at:n.expires_at??null,refresh_expires_at:n.refresh_expires_at??null}}catch{return null}}function C0(e,n){if(e){const a=Date.parse(e);if(!Number.isNaN(a))return a}return typeof n=="number"?Date.now()+n*1e3:null}function NS(e){const n={access_token:e.access_token,token_type:e.token_type??"bearer",expires_at:C0(e.expires_at,e.expires_in),refresh_expires_at:C0(e.refresh_expires_at,e.refresh_expires_in)};if(go=n,typeof window<"u")try{window.localStorage.setItem(Gh,JSON.stringify(n))}catch{}return n}function Yh(){if(go=null,typeof window<"u")try{window.localStorage.removeItem(Gh)}catch{}}function ES(){return go}function kS(e=go){return e?.access_token?{Authorization:`${e.token_type?.trim()||"bearer"} ${e.access_token}`}:{}}function N0(e){if(!e)return null;const n=new Date(e);return Number.isNaN(n.getTime())?null:n.toISOString()}function _S(e){const n=e.items.find(a=>a.is_default);return n?n.id:null}function E0(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function AS(e){return e?{...e,items:e.items??[]}:{items:[],page:1,page_size:0,total:0,has_next:!1,has_previous:!1}}async function Rv(e,n){const a="/api/v1/me/bootstrap";try{const{data:i}=await He.GET(a,{signal:n,headers:kS(e),params:{query:{page:1,page_size:200,include_total:!1}}});return i??null}catch(i){if(i instanceof $n&&(i.status===401||i.status===403))return null;throw i}}function zv(e,n=go,a=null,i=null){const o=E0(e.roles),u=E0(e.permissions),d=AS(e.workspaces);return{user:{...e.user,roles:o,permissions:u,preferred_workspace_id:_S(d)??null},workspaces:d,roles:o,permissions:u,expires_at:N0(n?.expires_at??null),refresh_expires_at:N0(n?.refresh_expires_at??null),return_to:a,state:i}}async function pu(e,n={}){const a=NS(e.session),i=await Rv(a,n.signal);if(!i)throw Yh(),new Error("Unable to load session after authentication.");return zv(i,a,null,null)}async function DS(e={}){try{const{data:n}=await He.GET("/api/v1/auth/providers",{signal:e.signal});return n?LS(n):{providers:[],force_sso:!1}}catch(n){if(n instanceof $n&&n.status===404)return{providers:[],force_sso:!1};throw n}}async function TS(e={}){const n=ES(),a=await Rv(n,e.signal);return a?zv(a,n):(n&&Yh(),null)}async function MS(e,n={}){const{data:a}=await He.POST("/api/v1/auth/session",{body:e,signal:n.signal});if(!a)throw new Error("Expected session payload from login response.");return pu(a,n)}async function RS(e={}){const{data:n}=await He.POST("/api/v1/auth/session/refresh",{body:void 0,signal:e.signal});if(!n)throw new Error("Expected session payload from refresh response.");return pu(n,e)}async function zS(e){const{code:n,state:a,provider:i="sso",signal:o}=e,{data:u}=await He.GET("/api/v1/auth/sso/{provider}/callback",{signal:o,params:{path:{provider:i},query:{code:n,state:a}}});if(!u)throw new Error("Expected session payload from SSO callback.");return pu(u,{signal:o})}async function OS(e={}){try{await He.DELETE("/api/v1/auth/session",{signal:e.signal,body:void 0})}catch(n){!(n instanceof $n)||n.status!==401&&n.status}finally{Yh()}}function LS(e){return{providers:(e.providers??[]).map(US),force_sso:!!e.force_sso}}function US(e){return{...e,start_url:e.start_url??"",icon_url:e.icon_url??null}}const Ov=p.createContext(void 0);function Lc(e){return e instanceof Error?e:new Error(String(e))}function k0({session:e,refetch:n,children:a}){return qS(e,n),l.jsx(Ov.Provider,{value:{session:e,refetch:n},children:a})}function BS(){const e=p.useContext(Ov);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e}function Wi(){return BS().session}const $S=6e4;function qS(e,n){p.useEffect(()=>{if(typeof window>"u")return;const a=typeof e.expires_at=="string"?Date.parse(e.expires_at):NaN,i=typeof e.refresh_expires_at=="string"?Date.parse(e.refresh_expires_at):NaN;if(Number.isNaN(a)||Number.isNaN(i))return;const o=Date.now();if(i<=o){n().catch(x=>{console.warn("Failed to refetch session after refresh expiry",Lc(x))});return}const u=Math.min(a,i)-$S,d=Math.max(u-o,0);let h=!1;const g=window.setTimeout(async()=>{try{if(await RS(),h)return;await n().catch(x=>{console.warn("Failed to refetch session after refresh",Lc(x))})}catch(x){if(h)return;console.warn("Failed to refresh session",Lc(x)),await n().catch(b=>{console.warn("Failed to refetch session after refresh failure",Lc(b))})}},d);return()=>{h=!0,window.clearTimeout(g)}},[n,e.expires_at,e.refresh_expires_at])}function Lv(e={}){const n=ct(),a=On({queryKey:Hs.detail(),queryFn:async({signal:o})=>{const u=await TS({signal:o});return u||null},enabled:e.enabled??!0,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnMount:!0}),i=a.data??null;return p.useEffect(()=>{i||n.removeQueries({queryKey:Hs.providers(),exact:!1})},[n,i]),{...a,session:i}}async function FS(e={}){try{const{data:n}=await He.GET("/api/v1/auth/setup",{signal:e.signal});if(!n)throw new Error("Expected setup status payload.");return n}catch(n){if(n instanceof $n&&n.status===404)return{requires_setup:!1,has_users:!0};throw n}}async function HS(e){const{data:n}=await He.POST("/api/v1/auth/setup",{body:e});if(!n)throw new Error("Expected session payload from setup response.");return pu(n)}function Xh(e=!0){return On({queryKey:Hs.setupStatus(),queryFn:({signal:n})=>FS({signal:n}),enabled:e,staleTime:3e5,refetchOnWindowFocus:!1})}const xo="/workspaces",ZS=new Set(["/","/login","/setup","/logout"]);function VS(e){if(!e)return!0;const n=QS(e);return!!(ZS.has(n)||n==="/auth"||n.startsWith("/auth/"))}function IS(e){return`${e.pathname}${e.search}${e.hash}`}function _0(e){const n=IS(e)||"/";return tu(n)??xo}function tu(e){if(!e)return null;const n=e.trim();return!n.startsWith("/")||n.startsWith("//")?null:n==="/"?xo:VS(n)?null:n}function oo(e){return tu(e)??xo}function Uv(e){return $v("/login",e)}function Bv(e){return $v("/setup",e)}function $v(e,n){const a=oo(n),i=new URLSearchParams;a!==xo&&i.set("redirectTo",a);const o=i.toString();return o?`${e}?${o}`:e}function nu(e,n){const a=tu(e);if(a)return a;const i=tu(n);return i||xo}function QS(e){let n=e;const a=n.indexOf("#");a>=0&&(n=n.slice(0,a));const i=n.indexOf("?");return i>=0&&(n=n.slice(0,i)),n?n.startsWith("/")?n:`/${n}`:"/"}function gu({children:e}){const n=qn(),a=Ft(),i=Lv(),{session:o,isLoading:u,isError:d,refetch:h}=i,g=!o&&!u&&!d,{data:x,isPending:b,isError:v,isSuccess:w,refetch:C}=Xh(g);return p.useEffect(()=>{if(o||u||d)return;if(g){if(b||v)return;if(w&&x?.requires_setup){const j=_0(n);a(Bv(j),{replace:!0});return}}const N=_0(n);a(Uv(N),{replace:!0})},[d,u,v,b,w,n,a,o,x?.requires_setup,g]),u?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:l.jsx("p",{children:"Loading your workspace"})}):d?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[l.jsx("p",{children:"We were unable to confirm your session."}),l.jsx("button",{onClick:()=>h(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):o?e?l.jsx(k0,{session:o,refetch:h,children:e}):l.jsx(k0,{session:o,refetch:h,children:e??null}):g&&b?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:l.jsx("p",{children:"Preparing initial setup"})}):g&&v?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[l.jsx("p",{children:"We were unable to check whether ADE is ready."}),l.jsx("button",{onClick:()=>C(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):null}const bo=100,Jh=50;function xu(e){if(!(typeof e!="number"||Number.isNaN(e)||e<=0))return Math.min(e,bo)}async function qv(e,n={}){const{maxPages:a=50}=n,i=[];let o=[],u;for(let g=1;g<=a;g+=1){const x=await e(g);if(i.push(x),o=o.concat(x.items??[]),u===void 0&&x.total!==void 0&&(u=x.total??null),!x.has_next)break}const d=i.at(-1),h=i.at(0);if(!d||!h)throw new Error("No pages were returned while collecting pagination results.");return{...d,items:o,page:1,page_size:h.page_size,has_next:!1,has_previous:!1,total:u??d.total}}function em(e,n){return p.useMemo(()=>{if(!e||e.length===0)return[];const a=[],i=new Map;for(const o of e){const u=Array.isArray(o.items)?o.items:[];for(const d of u){const h=n(d),g=i.get(h);if(g===void 0){i.set(h,a.length),a.push(d);continue}a[g]=d}}return a},[e,n])}const Fv=bo,Hv=Jh,Zv=Jh,Vv=Jh,PS="workspace",Ic={page:1,pageSize:Fv,includeTotal:!1},WS={page:1,pageSize:Hv,includeTotal:!1},KS={page:1,pageSize:Zv,includeTotal:!1},GS={scope:PS,page:1,pageSize:Vv,includeTotal:!1},Kt={all:()=>["workspaces"],list:(e=Ic)=>[...Kt.all(),"list",{...e}],detail:e=>[...Kt.all(),"detail",e],members:(e,n=WS)=>[...Kt.detail(e),"members",{...n}],roles:(e,n=KS)=>[...Kt.detail(e),"roles",{...n}],permissions:(e=GS)=>["permissions",{...e}]},Qc={page:Ic.page,pageSize:Ic.pageSize,includeTotal:Ic.includeTotal},Iv="workspace";async function YS(e={}){const{page:n,pageSize:a,includeTotal:i,signal:o}=e,u={};typeof n=="number"&&n>0&&(u.page=n);const d=xu(a??Fv);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:h}=await He.GET("/api/v1/workspaces",{params:{query:u},signal:o});if(!h)throw new Error("Expected workspace page payload.");const g=[...h.items].sort((x,b)=>x.name.localeCompare(b.name));return{...h,items:g}}async function XS(e){const{data:n}=await He.POST("/api/v1/workspaces",{body:e});if(!n)throw new Error("Expected workspace payload.");return n}async function JS(e,n){const{data:a}=await He.PATCH("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}},body:n});if(!a)throw new Error("Expected workspace payload.");return a}async function eC(e){await He.DELETE("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}}})}async function tC(e,n={}){const{page:a,pageSize:i,includeTotal:o,signal:u}=n,d={};typeof a=="number"&&a>0&&(d.page=a);const h=xu(i??Hv);h&&(d.page_size=h),o&&(d.include_total=!0);const{data:g}=await He.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e},query:d},signal:u});if(!g)throw new Error("Expected workspace member page payload.");return g}async function nC(e,n){const{data:a}=await He.POST("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},body:n});if(!a)throw new Error("Expected workspace member payload.");return a}async function sC(e,n,a){const{data:i}=await He.PUT("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}},body:a});if(!i)throw new Error("Expected workspace member payload.");return i}async function aC(e,n){await He.DELETE("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}}})}async function rC(e={}){const{page:n,pageSize:a,includeTotal:i,signal:o}=e,u={scope:Iv};typeof n=="number"&&n>0&&(u.page=n);const d=xu(a??Zv);d&&(u.page_size=d),i&&(u.include_total=!0);const{data:h}=await He.GET("/api/v1/rbac/roles",{params:{query:u},signal:o});if(!h)throw new Error("Expected workspace role page payload.");return h}async function iC(e,n){const{data:a}=await He.POST("/api/v1/rbac/roles",{body:n});if(!a)throw new Error("Expected role payload.");return a}async function lC(e,n,a){const{data:i}=await He.PATCH("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}},body:a});if(!i)throw new Error("Expected role payload.");return i}async function oC(e,n){await He.DELETE("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}}})}async function cC(e={}){const{scope:n=Iv,page:a,pageSize:i,includeTotal:o,signal:u}=e,d={scope:n};typeof a=="number"&&a>0&&(d.page=a);const h=xu(i??Vv);h&&(d.page_size=h),o&&(d.include_total=!0);const{data:g}=await He.GET("/api/v1/rbac/permissions",{params:{query:d},signal:u});if(!g)throw new Error("Expected permission page payload.");return g}const uC="/api/v1/workspaces/{workspace_id}/default";async function dC(e){await He.PUT(uC,{params:{path:{workspace_id:e}}})}function fC(){const e=ct();return Vt({mutationFn:XS,onSuccess(n){e.setQueryData(Kt.detail(n.id),n),e.getQueriesData({queryKey:Kt.all()}).forEach(([a,i])=>{if(!Array.isArray(a)||a[0]!=="workspaces"||a[1]!=="list"||!i)return;const o=i.items.findIndex(g=>g.id===n.id),d=[...o>=0?i.items.map(g=>g.id===n.id?n:g):[...i.items,n]].sort((g,x)=>g.name.localeCompare(x.name)),h=typeof i.total=="number"&&o===-1?i.total+1:i.total;e.setQueryData(a,{...i,items:d,total:h})}),e.invalidateQueries({queryKey:Kt.all()})}})}function hC(e,n){if(!e||typeof e!="object")return e;if("items"in e){const a=e;if(!Array.isArray(a.items))return e;const i=a.items.map(o=>({...o,is_default:o.id===n}));return{...a,items:i}}if("id"in e&&"is_default"in e){const a=e;return{...a,is_default:a.id===n}}return e}function Qv(){const e=ct();return Vt({mutationFn:n=>dC(n),onSuccess:(n,a)=>{e.setQueriesData({queryKey:Kt.all()},i=>hC(i,a))}})}function mC(e){const n=ct();return Vt({mutationFn:a=>JS(e,a),onSuccess:a=>{n.setQueryData(Kt.detail(a.id),a),n.getQueriesData({queryKey:Kt.all()}).forEach(([i,o])=>{if(!Array.isArray(i)||i[0]!=="workspaces"||i[1]!=="list"||!o)return;const d=[...o.items.map(h=>h.id===a.id?a:h)].sort((h,g)=>h.name.localeCompare(g.name));n.setQueryData(i,{...o,items:d})})}})}function pC(e={}){const n=e.page??Qc.page,a=e.pageSize??Qc.pageSize,i=e.includeTotal??Qc.includeTotal;return{queryKey:Kt.list({page:n,pageSize:a,includeTotal:i}),queryFn:({signal:o})=>YS({page:n,pageSize:a,includeTotal:i,signal:o}),staleTime:6e4,enabled:e.enabled??!0}}function tm(e={}){const n=ct(),a=pC(e),i=n.getQueryData(a.queryKey);return On({...a,initialData:i})}const gC="documents";function nm(e){return`/workspaces/${e}/${gC}`}function sh(e){return e instanceof Error?e:new Error(String(e))}function sa(e){return{get(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):null}catch(n){return console.warn("Failed to read from storage",sh(n)),null}},set(n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.warn("Failed to write to storage",sh(a))}},clear(){if(!(typeof window>"u"))try{window.localStorage.removeItem(e)}catch(n){console.warn("Failed to clear storage",sh(n))}}}}const xC="backend.app.active_workspace",Eh=sa(xC);function bC(){return Eh.get()}function Pv(e){if(!e){Eh.clear();return}Eh.set(e)}function Wv(e){var n,a,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(a=Wv(e[n]))&&(i&&(i+=" "),i+=a)}else for(a in e)e[a]&&(i&&(i+=" "),i+=a);return i}function pe(){for(var e,n,a=0,i="",o=arguments.length;a<o;a++)(e=arguments[a])&&(n=Wv(e))&&(i&&(i+=" "),i+=n);return i}const vC={primary:"bg-brand-600 text-white hover:bg-brand-700 focus-visible:ring-brand-500 disabled:bg-brand-300",secondary:"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 focus-visible:ring-slate-400 disabled:text-slate-400",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus-visible:ring-slate-300",danger:"bg-rose-600 text-white hover:bg-rose-700 focus-visible:ring-rose-500 disabled:bg-rose-300"},yC={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},ke=p.forwardRef(({type:e="button",variant:n="primary",size:a="md",isLoading:i=!1,className:o,children:u,disabled:d,...h},g)=>{const x=d||i;return l.jsxs("button",{ref:g,type:e,disabled:x,"aria-busy":i||void 0,className:pe("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed",vC[n],yC[a],o),...h,children:[i?l.jsx("span",{"aria-hidden":"true",className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,l.jsx("span",{children:u})]})});ke.displayName="Button";const wC={loading:"animate-spin border-2 border-brand-500 border-t-transparent",empty:"bg-slate-200",error:"bg-danger-500"};function wt({title:e,description:n,action:a,variant:i="empty",className:o}){return l.jsxs("div",{className:pe("flex min-h-[240px] flex-col items-center justify-center rounded-xl border border-dashed border-slate-300 bg-white/70 px-6 py-12 text-center text-sm text-slate-600",o),children:[l.jsx("span",{"aria-hidden":"true",className:pe("mb-4 h-8 w-8 rounded-full border-current",wC[i])}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:e}),n?l.jsx("p",{className:"mt-2 max-w-md leading-relaxed",children:n}):null,a?l.jsx("div",{className:"mt-4",children:a}):null]})}function jC(){return l.jsx(gu,{children:l.jsx(SC,{})})}function SC(){const e=qn(),n=Ft(),a=Wi(),i=tm(),o=i.data?.items??[],h=[bC(),a.user.preferred_workspace_id].filter(g=>!!g).map(g=>o.find(x=>x.id===g)).find(g=>!!g)??o[0]??null;return p.useEffect(()=>{if(i.isLoading||i.isError)return;if(!h){e.pathname!=="/workspaces"&&n("/workspaces",{replace:!0});return}const g=nm(h.id);e.pathname+e.search!==g&&n(g,{replace:!0})},[e.pathname,e.search,n,h,i.isError,i.isLoading]),i.isLoading?l.jsx(wt,{title:"Loading workspaces",variant:"loading"}):i.isError?l.jsx(wt,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error",action:l.jsx(ke,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})}):null}function je(e,n,a){function i(h,g){var x;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(x=h._zod).traits??(x.traits=new Set),h._zod.traits.add(e),n(h,g);for(const b in d.prototype)b in h||Object.defineProperty(h,b,{value:d.prototype[b].bind(h)});h._zod.constr=d,h._zod.def=g}const o=a?.Parent??Object;class u extends o{}Object.defineProperty(u,"name",{value:e});function d(h){var g;const x=a?.Parent?new u:this;i(x,h),(g=x._zod).deferred??(g.deferred=[]);for(const b of x._zod.deferred)b();return x}return Object.defineProperty(d,"init",{value:i}),Object.defineProperty(d,Symbol.hasInstance,{value:h=>a?.Parent&&h instanceof a.Parent?!0:h?._zod?.traits?.has(e)}),Object.defineProperty(d,"name",{value:e}),d}class Fi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Kv extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const Gv={};function Wr(e){return Gv}function CC(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,o])=>n.indexOf(+i)===-1).map(([i,o])=>o)}function kh(e,n){return typeof n=="bigint"?n.toString():n}function sm(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function am(e){return e==null}function rm(e){const n=e.startsWith("^")?1:0,a=e.endsWith("$")?e.length-1:e.length;return e.slice(n,a)}const A0=Symbol("evaluating");function zt(e,n,a){let i;Object.defineProperty(e,n,{get(){if(i!==A0)return i===void 0&&(i=A0,i=a()),i},set(o){Object.defineProperty(e,n,{value:o})},configurable:!0})}function Gr(e,n,a){Object.defineProperty(e,n,{value:a,writable:!0,enumerable:!0,configurable:!0})}function Yr(...e){const n={};for(const a of e){const i=Object.getOwnPropertyDescriptors(a);Object.assign(n,i)}return Object.defineProperties({},n)}function D0(e){return JSON.stringify(e)}const Yv="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function su(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const NC=sm(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function co(e){if(su(e)===!1)return!1;const n=e.constructor;if(n===void 0)return!0;const a=n.prototype;return!(su(a)===!1||Object.prototype.hasOwnProperty.call(a,"isPrototypeOf")===!1)}function Xv(e){return co(e)?{...e}:Array.isArray(e)?[...e]:e}const EC=new Set(["string","number","symbol"]);function bu(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dr(e,n,a){const i=new e._zod.constr(n??e._zod.def);return(!n||a?.parent)&&(i._zod.parent=e),i}function Ie(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function kC(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}function _C(e,n){const a=e._zod.def,i=Yr(e._zod.def,{get shape(){const o={};for(const u in n){if(!(u in a.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(o[u]=a.shape[u])}return Gr(this,"shape",o),o},checks:[]});return dr(e,i)}function AC(e,n){const a=e._zod.def,i=Yr(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const u in n){if(!(u in a.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&delete o[u]}return Gr(this,"shape",o),o},checks:[]});return dr(e,i)}function DC(e,n){if(!co(n))throw new Error("Invalid input to extend: expected a plain object");const a=e._zod.def.checks;if(a&&a.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const o=Yr(e._zod.def,{get shape(){const u={...e._zod.def.shape,...n};return Gr(this,"shape",u),u},checks:[]});return dr(e,o)}function TC(e,n){if(!co(n))throw new Error("Invalid input to safeExtend: expected a plain object");const a={...e._zod.def,get shape(){const i={...e._zod.def.shape,...n};return Gr(this,"shape",i),i},checks:e._zod.def.checks};return dr(e,a)}function MC(e,n){const a=Yr(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return Gr(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return dr(e,a)}function RC(e,n,a){const i=Yr(n._zod.def,{get shape(){const o=n._zod.def.shape,u={...o};if(a)for(const d in a){if(!(d in o))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(u[d]=e?new e({type:"optional",innerType:o[d]}):o[d])}else for(const d in o)u[d]=e?new e({type:"optional",innerType:o[d]}):o[d];return Gr(this,"shape",u),u},checks:[]});return dr(n,i)}function zC(e,n,a){const i=Yr(n._zod.def,{get shape(){const o=n._zod.def.shape,u={...o};if(a)for(const d in a){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(u[d]=new e({type:"nonoptional",innerType:o[d]}))}else for(const d in o)u[d]=new e({type:"nonoptional",innerType:o[d]});return Gr(this,"shape",u),u},checks:[]});return dr(n,i)}function qi(e,n=0){if(e.aborted===!0)return!0;for(let a=n;a<e.issues.length;a++)if(e.issues[a]?.continue!==!0)return!0;return!1}function Jv(e,n){return n.map(a=>{var i;return(i=a).path??(i.path=[]),a.path.unshift(e),a})}function Uc(e){return typeof e=="string"?e:e?.message}function Kr(e,n,a){const i={...e,path:e.path??[]};if(!e.message){const o=Uc(e.inst?._zod.def?.error?.(e))??Uc(n?.error?.(e))??Uc(a.customError?.(e))??Uc(a.localeError?.(e))??"Invalid input";i.message=o}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function im(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function uo(...e){const[n,a,i]=e;return typeof n=="string"?{message:n,code:"custom",input:a,inst:i}:{...n}}const ey=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,kh,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},lm=je("$ZodError",ey),vu=je("$ZodError",ey,{Parent:Error});function OC(e,n=a=>a.message){const a={},i=[];for(const o of e.issues)o.path.length>0?(a[o.path[0]]=a[o.path[0]]||[],a[o.path[0]].push(n(o))):i.push(n(o));return{formErrors:i,fieldErrors:a}}function LC(e,n=a=>a.message){const a={_errors:[]},i=o=>{for(const u of o.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>i({issues:d}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)a._errors.push(n(u));else{let d=a,h=0;for(;h<u.path.length;){const g=u.path[h];h===u.path.length-1?(d[g]=d[g]||{_errors:[]},d[g]._errors.push(n(u))):d[g]=d[g]||{_errors:[]},d=d[g],h++}}};return i(e),a}const yu=e=>(n,a,i,o)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},d=n._zod.run({value:a,issues:[]},u);if(d instanceof Promise)throw new Fi;if(d.issues.length){const h=new(o?.Err??e)(d.issues.map(g=>Kr(g,u,Wr())));throw Yv(h,o?.callee),h}return d.value},UC=yu(vu),wu=e=>async(n,a,i,o)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let d=n._zod.run({value:a,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const h=new(o?.Err??e)(d.issues.map(g=>Kr(g,u,Wr())));throw Yv(h,o?.callee),h}return d.value},BC=wu(vu),ju=e=>(n,a,i)=>{const o=i?{...i,async:!1}:{async:!1},u=n._zod.run({value:a,issues:[]},o);if(u instanceof Promise)throw new Fi;return u.issues.length?{success:!1,error:new(e??lm)(u.issues.map(d=>Kr(d,o,Wr())))}:{success:!0,data:u.value}},$C=ju(vu),Su=e=>async(n,a,i)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:a,issues:[]},o);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>Kr(d,o,Wr())))}:{success:!0,data:u.value}},qC=Su(vu),FC=e=>(n,a,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return yu(e)(n,a,o)},HC=e=>(n,a,i)=>yu(e)(n,a,i),ZC=e=>async(n,a,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return wu(e)(n,a,o)},VC=e=>async(n,a,i)=>wu(e)(n,a,i),IC=e=>(n,a,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ju(e)(n,a,o)},QC=e=>(n,a,i)=>ju(e)(n,a,i),PC=e=>async(n,a,i)=>{const o=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Su(e)(n,a,o)},WC=e=>async(n,a,i)=>Su(e)(n,a,i),KC=/^[cC][^\s-]{8,}$/,GC=/^[0-9a-z]+$/,YC=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,XC=/^[0-9a-vA-V]{20}$/,JC=/^[A-Za-z0-9]{27}$/,eN=/^[a-zA-Z0-9_-]{21}$/,tN=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nN=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,T0=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,sN=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,aN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function rN(){return new RegExp(aN,"u")}const iN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,oN=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uN=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ty=/^[A-Za-z0-9_-]*$/,dN=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,fN=/^\+(?:[0-9]){6,14}[0-9]$/,ny="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hN=new RegExp(`^${ny}$`);function sy(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function mN(e){return new RegExp(`^${sy(e)}$`)}function pN(e){const n=sy({precision:e.precision}),a=["Z"];e.local&&a.push(""),e.offset&&a.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${a.join("|")})`;return new RegExp(`^${ny}T(?:${i})$`)}const gN=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},xN=/^[^A-Z]*$/,bN=/^[^a-z]*$/,ra=je("$ZodCheck",(e,n)=>{var a;e._zod??(e._zod={}),e._zod.def=n,(a=e._zod).onattach??(a.onattach=[])}),vN=je("$ZodCheckMaxLength",(e,n)=>{var a;ra.init(e,n),(a=e._zod.def).when??(a.when=i=>{const o=i.value;return!am(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<o&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const o=i.value;if(o.length<=n.maximum)return;const d=im(o);i.issues.push({origin:d,code:"too_big",maximum:n.maximum,inclusive:!0,input:o,inst:e,continue:!n.abort})}}),yN=je("$ZodCheckMinLength",(e,n)=>{var a;ra.init(e,n),(a=e._zod.def).when??(a.when=i=>{const o=i.value;return!am(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>o&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const o=i.value;if(o.length>=n.minimum)return;const d=im(o);i.issues.push({origin:d,code:"too_small",minimum:n.minimum,inclusive:!0,input:o,inst:e,continue:!n.abort})}}),wN=je("$ZodCheckLengthEquals",(e,n)=>{var a;ra.init(e,n),(a=e._zod.def).when??(a.when=i=>{const o=i.value;return!am(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag;o.minimum=n.length,o.maximum=n.length,o.length=n.length}),e._zod.check=i=>{const o=i.value,u=o.length;if(u===n.length)return;const d=im(o),h=u>n.length;i.issues.push({origin:d,...h?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),Cu=je("$ZodCheckStringFormat",(e,n)=>{var a,i;ra.init(e,n),e._zod.onattach.push(o=>{const u=o._zod.bag;u.format=n.format,n.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(n.pattern))}),n.pattern?(a=e._zod).check??(a.check=o=>{n.pattern.lastIndex=0,!n.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:n.format,input:o.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),jN=je("$ZodCheckRegex",(e,n)=>{Cu.init(e,n),e._zod.check=a=>{n.pattern.lastIndex=0,!n.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:"regex",input:a.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),SN=je("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=xN),Cu.init(e,n)}),CN=je("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=bN),Cu.init(e,n)}),NN=je("$ZodCheckIncludes",(e,n)=>{ra.init(e,n);const a=bu(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${a}`:a);n.pattern=i,e._zod.onattach.push(o=>{const u=o._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=o=>{o.value.includes(n.includes,n.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:o.value,inst:e,continue:!n.abort})}}),EN=je("$ZodCheckStartsWith",(e,n)=>{ra.init(e,n);const a=new RegExp(`^${bu(n.prefix)}.*`);n.pattern??(n.pattern=a),e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(a)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),kN=je("$ZodCheckEndsWith",(e,n)=>{ra.init(e,n);const a=new RegExp(`.*${bu(n.suffix)}$`);n.pattern??(n.pattern=a),e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(a)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),_N=je("$ZodCheckOverwrite",(e,n)=>{ra.init(e,n),e._zod.check=a=>{a.value=n.tx(a.value)}});class AN{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(d=>d),o=Math.min(...i.map(d=>d.length-d.trimStart().length)),u=i.map(d=>d.slice(o)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const n=Function,a=this?.args,o=[...(this?.content??[""]).map(u=>`  ${u}`)];return new n(...a,o.join(`
`))}}const DN={major:4,minor:1,patch:12},pn=je("$ZodType",(e,n)=>{var a;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=DN;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const o of i)for(const u of o._zod.onattach)u(e);if(i.length===0)(a=e._zod).deferred??(a.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(d,h,g)=>{let x=qi(d),b;for(const v of h){if(v._zod.def.when){if(!v._zod.def.when(d))continue}else if(x)continue;const w=d.issues.length,C=v._zod.check(d);if(C instanceof Promise&&g?.async===!1)throw new Fi;if(b||C instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await C,d.issues.length!==w&&(x||(x=qi(d,w)))});else{if(d.issues.length===w)continue;x||(x=qi(d,w))}}return b?b.then(()=>d):d},u=(d,h,g)=>{if(qi(d))return d.aborted=!0,d;const x=o(h,i,g);if(x instanceof Promise){if(g.async===!1)throw new Fi;return x.then(b=>e._zod.parse(b,g))}return e._zod.parse(x,g)};e._zod.run=(d,h)=>{if(h.skipChecks)return e._zod.parse(d,h);if(h.direction==="backward"){const x=e._zod.parse({value:d.value,issues:[]},{...h,skipChecks:!0});return x instanceof Promise?x.then(b=>u(b,d,h)):u(x,d,h)}const g=e._zod.parse(d,h);if(g instanceof Promise){if(h.async===!1)throw new Fi;return g.then(x=>o(x,i,h))}return o(g,i,h)}}e["~standard"]={validate:o=>{try{const u=$C(e,o);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return qC(e,o).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),om=je("$ZodString",(e,n)=>{pn.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??gN(e._zod.bag),e._zod.parse=(a,i)=>{if(n.coerce)try{a.value=String(a.value)}catch{}return typeof a.value=="string"||a.issues.push({expected:"string",code:"invalid_type",input:a.value,inst:e}),a}}),Ht=je("$ZodStringFormat",(e,n)=>{Cu.init(e,n),om.init(e,n)}),TN=je("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=nN),Ht.init(e,n)}),MN=je("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=T0(i))}else n.pattern??(n.pattern=T0());Ht.init(e,n)}),RN=je("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=sN),Ht.init(e,n)}),zN=je("$ZodURL",(e,n)=>{Ht.init(e,n),e._zod.check=a=>{try{const i=a.value.trim(),o=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(o.hostname)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:dN.source,input:a.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:a.value,inst:e,continue:!n.abort})),n.normalize?a.value=o.href:a.value=i;return}catch{a.issues.push({code:"invalid_format",format:"url",input:a.value,inst:e,continue:!n.abort})}}}),ON=je("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=rN()),Ht.init(e,n)}),LN=je("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=eN),Ht.init(e,n)}),UN=je("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=KC),Ht.init(e,n)}),BN=je("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=GC),Ht.init(e,n)}),$N=je("$ZodULID",(e,n)=>{n.pattern??(n.pattern=YC),Ht.init(e,n)}),qN=je("$ZodXID",(e,n)=>{n.pattern??(n.pattern=XC),Ht.init(e,n)}),FN=je("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=JC),Ht.init(e,n)}),HN=je("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=pN(n)),Ht.init(e,n)}),ZN=je("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=hN),Ht.init(e,n)}),VN=je("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=mN(n)),Ht.init(e,n)}),IN=je("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=tN),Ht.init(e,n)}),QN=je("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=iN),Ht.init(e,n),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format="ipv4"})}),PN=je("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=lN),Ht.init(e,n),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format="ipv6"}),e._zod.check=a=>{try{new URL(`http://[${a.value}]`)}catch{a.issues.push({code:"invalid_format",format:"ipv6",input:a.value,inst:e,continue:!n.abort})}}}),WN=je("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=oN),Ht.init(e,n)}),KN=je("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=cN),Ht.init(e,n),e._zod.check=a=>{const i=a.value.split("/");try{if(i.length!==2)throw new Error;const[o,u]=i;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${o}]`)}catch{a.issues.push({code:"invalid_format",format:"cidrv6",input:a.value,inst:e,continue:!n.abort})}}});function ay(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const GN=je("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=uN),Ht.init(e,n),e._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),e._zod.check=a=>{ay(a.value)||a.issues.push({code:"invalid_format",format:"base64",input:a.value,inst:e,continue:!n.abort})}});function YN(e){if(!ty.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),a=n.padEnd(Math.ceil(n.length/4)*4,"=");return ay(a)}const XN=je("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=ty),Ht.init(e,n),e._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),e._zod.check=a=>{YN(a.value)||a.issues.push({code:"invalid_format",format:"base64url",input:a.value,inst:e,continue:!n.abort})}}),JN=je("$ZodE164",(e,n)=>{n.pattern??(n.pattern=fN),Ht.init(e,n)});function eE(e,n=null){try{const a=e.split(".");if(a.length!==3)return!1;const[i]=a;if(!i)return!1;const o=JSON.parse(atob(i));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||n&&(!("alg"in o)||o.alg!==n))}catch{return!1}}const tE=je("$ZodJWT",(e,n)=>{Ht.init(e,n),e._zod.check=a=>{eE(a.value,n.alg)||a.issues.push({code:"invalid_format",format:"jwt",input:a.value,inst:e,continue:!n.abort})}}),nE=je("$ZodUnknown",(e,n)=>{pn.init(e,n),e._zod.parse=a=>a}),sE=je("$ZodNever",(e,n)=>{pn.init(e,n),e._zod.parse=(a,i)=>(a.issues.push({expected:"never",code:"invalid_type",input:a.value,inst:e}),a)});function M0(e,n,a){e.issues.length&&n.issues.push(...Jv(a,e.issues)),n.value[a]=e.value}const aE=je("$ZodArray",(e,n)=>{pn.init(e,n),e._zod.parse=(a,i)=>{const o=a.value;if(!Array.isArray(o))return a.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),a;a.value=Array(o.length);const u=[];for(let d=0;d<o.length;d++){const h=o[d],g=n.element._zod.run({value:h,issues:[]},i);g instanceof Promise?u.push(g.then(x=>M0(x,a,d))):M0(g,a,d)}return u.length?Promise.all(u).then(()=>a):a}});function au(e,n,a,i){e.issues.length&&n.issues.push(...Jv(a,e.issues)),e.value===void 0?a in i&&(n.value[a]=void 0):n.value[a]=e.value}function ry(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const a=kC(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(a)}}function iy(e,n,a,i,o,u){const d=[],h=o.keySet,g=o.catchall._zod,x=g.def.type;for(const b of Object.keys(n)){if(h.has(b))continue;if(x==="never"){d.push(b);continue}const v=g.run({value:n[b],issues:[]},i);v instanceof Promise?e.push(v.then(w=>au(w,a,b,n))):au(v,a,b,n)}return d.length&&a.issues.push({code:"unrecognized_keys",keys:d,input:n,inst:u}),e.length?Promise.all(e).then(()=>a):a}const rE=je("$ZodObject",(e,n)=>{if(pn.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const h=n.shape;Object.defineProperty(n,"shape",{get:()=>{const g={...h};return Object.defineProperty(n,"shape",{value:g}),g}})}const i=sm(()=>ry(n));zt(e._zod,"propValues",()=>{const h=n.shape,g={};for(const x in h){const b=h[x]._zod;if(b.values){g[x]??(g[x]=new Set);for(const v of b.values)g[x].add(v)}}return g});const o=su,u=n.catchall;let d;e._zod.parse=(h,g)=>{d??(d=i.value);const x=h.value;if(!o(x))return h.issues.push({expected:"object",code:"invalid_type",input:x,inst:e}),h;h.value={};const b=[],v=d.shape;for(const w of d.keys){const N=v[w]._zod.run({value:x[w],issues:[]},g);N instanceof Promise?b.push(N.then(j=>au(j,h,w,x))):au(N,h,w,x)}return u?iy(b,x,h,g,i.value,e):b.length?Promise.all(b).then(()=>h):h}}),iE=je("$ZodObjectJIT",(e,n)=>{rE.init(e,n);const a=e._zod.parse,i=sm(()=>ry(n)),o=w=>{const C=new AN(["shape","payload","ctx"]),N=i.value,j=B=>{const Q=D0(B);return`shape[${Q}]._zod.run({ value: input[${Q}], issues: [] }, ctx)`};C.write("const input = payload.value;");const k=Object.create(null);let T=0;for(const B of N.keys)k[B]=`key_${T++}`;C.write("const newResult = {};");for(const B of N.keys){const Q=k[B],O=D0(B);C.write(`const ${Q} = ${j(B)};`),C.write(`
        if (${Q}.issues.length) {
          payload.issues = payload.issues.concat(${Q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        
        if (${Q}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${Q}.value;
        }
        
      `)}C.write("payload.value = newResult;"),C.write("return payload;");const E=C.compile();return(B,Q)=>E(w,B,Q)};let u;const d=su,h=!Gv.jitless,x=h&&NC.value,b=n.catchall;let v;e._zod.parse=(w,C)=>{v??(v=i.value);const N=w.value;return d(N)?h&&x&&C?.async===!1&&C.jitless!==!0?(u||(u=o(n.shape)),w=u(w,C),b?iy([],N,w,C,v,e):w):a(w,C):(w.issues.push({expected:"object",code:"invalid_type",input:N,inst:e}),w)}});function R0(e,n,a,i){for(const u of e)if(u.issues.length===0)return n.value=u.value,n;const o=e.filter(u=>!qi(u));return o.length===1?(n.value=o[0].value,o[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:a,errors:e.map(u=>u.issues.map(d=>Kr(d,i,Wr())))}),n)}const lE=je("$ZodUnion",(e,n)=>{pn.init(e,n),zt(e._zod,"optin",()=>n.options.some(o=>o._zod.optin==="optional")?"optional":void 0),zt(e._zod,"optout",()=>n.options.some(o=>o._zod.optout==="optional")?"optional":void 0),zt(e._zod,"values",()=>{if(n.options.every(o=>o._zod.values))return new Set(n.options.flatMap(o=>Array.from(o._zod.values)))}),zt(e._zod,"pattern",()=>{if(n.options.every(o=>o._zod.pattern)){const o=n.options.map(u=>u._zod.pattern);return new RegExp(`^(${o.map(u=>rm(u.source)).join("|")})$`)}});const a=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(o,u)=>{if(a)return i(o,u);let d=!1;const h=[];for(const g of n.options){const x=g._zod.run({value:o.value,issues:[]},u);if(x instanceof Promise)h.push(x),d=!0;else{if(x.issues.length===0)return x;h.push(x)}}return d?Promise.all(h).then(g=>R0(g,o,e,u)):R0(h,o,e,u)}}),oE=je("$ZodIntersection",(e,n)=>{pn.init(e,n),e._zod.parse=(a,i)=>{const o=a.value,u=n.left._zod.run({value:o,issues:[]},i),d=n.right._zod.run({value:o,issues:[]},i);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([g,x])=>z0(a,g,x)):z0(a,u,d)}});function _h(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(co(e)&&co(n)){const a=Object.keys(n),i=Object.keys(e).filter(u=>a.indexOf(u)!==-1),o={...e,...n};for(const u of i){const d=_h(e[u],n[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};o[u]=d.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const a=[];for(let i=0;i<e.length;i++){const o=e[i],u=n[i],d=_h(o,u);if(!d.valid)return{valid:!1,mergeErrorPath:[i,...d.mergeErrorPath]};a.push(d.data)}return{valid:!0,data:a}}return{valid:!1,mergeErrorPath:[]}}function z0(e,n,a){if(n.issues.length&&e.issues.push(...n.issues),a.issues.length&&e.issues.push(...a.issues),qi(e))return e;const i=_h(n.value,a.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const cE=je("$ZodEnum",(e,n)=>{pn.init(e,n);const a=CC(n.entries),i=new Set(a);e._zod.values=i,e._zod.pattern=new RegExp(`^(${a.filter(o=>EC.has(typeof o)).map(o=>typeof o=="string"?bu(o):o.toString()).join("|")})$`),e._zod.parse=(o,u)=>{const d=o.value;return i.has(d)||o.issues.push({code:"invalid_value",values:a,input:d,inst:e}),o}}),uE=je("$ZodTransform",(e,n)=>{pn.init(e,n),e._zod.parse=(a,i)=>{if(i.direction==="backward")throw new Kv(e.constructor.name);const o=n.transform(a.value,a);if(i.async)return(o instanceof Promise?o:Promise.resolve(o)).then(d=>(a.value=d,a));if(o instanceof Promise)throw new Fi;return a.value=o,a}});function O0(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const dE=je("$ZodOptional",(e,n)=>{pn.init(e,n),e._zod.optin="optional",e._zod.optout="optional",zt(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),zt(e._zod,"pattern",()=>{const a=n.innerType._zod.pattern;return a?new RegExp(`^(${rm(a.source)})?$`):void 0}),e._zod.parse=(a,i)=>{if(n.innerType._zod.optin==="optional"){const o=n.innerType._zod.run(a,i);return o instanceof Promise?o.then(u=>O0(u,a.value)):O0(o,a.value)}return a.value===void 0?a:n.innerType._zod.run(a,i)}}),fE=je("$ZodNullable",(e,n)=>{pn.init(e,n),zt(e._zod,"optin",()=>n.innerType._zod.optin),zt(e._zod,"optout",()=>n.innerType._zod.optout),zt(e._zod,"pattern",()=>{const a=n.innerType._zod.pattern;return a?new RegExp(`^(${rm(a.source)}|null)$`):void 0}),zt(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(a,i)=>a.value===null?a:n.innerType._zod.run(a,i)}),hE=je("$ZodDefault",(e,n)=>{pn.init(e,n),e._zod.optin="optional",zt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(a,i)=>{if(i.direction==="backward")return n.innerType._zod.run(a,i);if(a.value===void 0)return a.value=n.defaultValue,a;const o=n.innerType._zod.run(a,i);return o instanceof Promise?o.then(u=>L0(u,n)):L0(o,n)}});function L0(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const mE=je("$ZodPrefault",(e,n)=>{pn.init(e,n),e._zod.optin="optional",zt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(a,i)=>(i.direction==="backward"||a.value===void 0&&(a.value=n.defaultValue),n.innerType._zod.run(a,i))}),pE=je("$ZodNonOptional",(e,n)=>{pn.init(e,n),zt(e._zod,"values",()=>{const a=n.innerType._zod.values;return a?new Set([...a].filter(i=>i!==void 0)):void 0}),e._zod.parse=(a,i)=>{const o=n.innerType._zod.run(a,i);return o instanceof Promise?o.then(u=>U0(u,e)):U0(o,e)}});function U0(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const gE=je("$ZodCatch",(e,n)=>{pn.init(e,n),zt(e._zod,"optin",()=>n.innerType._zod.optin),zt(e._zod,"optout",()=>n.innerType._zod.optout),zt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(a,i)=>{if(i.direction==="backward")return n.innerType._zod.run(a,i);const o=n.innerType._zod.run(a,i);return o instanceof Promise?o.then(u=>(a.value=u.value,u.issues.length&&(a.value=n.catchValue({...a,error:{issues:u.issues.map(d=>Kr(d,i,Wr()))},input:a.value}),a.issues=[]),a)):(a.value=o.value,o.issues.length&&(a.value=n.catchValue({...a,error:{issues:o.issues.map(u=>Kr(u,i,Wr()))},input:a.value}),a.issues=[]),a)}}),xE=je("$ZodPipe",(e,n)=>{pn.init(e,n),zt(e._zod,"values",()=>n.in._zod.values),zt(e._zod,"optin",()=>n.in._zod.optin),zt(e._zod,"optout",()=>n.out._zod.optout),zt(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(a,i)=>{if(i.direction==="backward"){const u=n.out._zod.run(a,i);return u instanceof Promise?u.then(d=>Bc(d,n.in,i)):Bc(u,n.in,i)}const o=n.in._zod.run(a,i);return o instanceof Promise?o.then(u=>Bc(u,n.out,i)):Bc(o,n.out,i)}});function Bc(e,n,a){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},a)}const bE=je("$ZodReadonly",(e,n)=>{pn.init(e,n),zt(e._zod,"propValues",()=>n.innerType._zod.propValues),zt(e._zod,"values",()=>n.innerType._zod.values),zt(e._zod,"optin",()=>n.innerType._zod.optin),zt(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(a,i)=>{if(i.direction==="backward")return n.innerType._zod.run(a,i);const o=n.innerType._zod.run(a,i);return o instanceof Promise?o.then(B0):B0(o)}});function B0(e){return e.value=Object.freeze(e.value),e}const vE=je("$ZodCustom",(e,n)=>{ra.init(e,n),pn.init(e,n),e._zod.parse=(a,i)=>a,e._zod.check=a=>{const i=a.value,o=n.fn(i);if(o instanceof Promise)return o.then(u=>$0(u,a,i,e));$0(o,a,i,e)}});function $0(e,n,a,i){if(!e){const o={code:"custom",input:a,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(o.params=i._zod.def.params),n.issues.push(uo(o))}}class yE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...a){const i=a[0];if(this._map.set(n,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,n)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const a=this._map.get(n);return a&&typeof a=="object"&&"id"in a&&this._idmap.delete(a.id),this._map.delete(n),this}get(n){const a=n._zod.parent;if(a){const i={...this.get(a)??{}};delete i.id;const o={...i,...this._map.get(n)};return Object.keys(o).length?o:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function wE(){return new yE}const $c=wE();function jE(e,n){return new e({type:"string",...Ie(n)})}function SE(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ie(n)})}function q0(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ie(n)})}function CE(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ie(n)})}function NE(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ie(n)})}function EE(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ie(n)})}function kE(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ie(n)})}function _E(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ie(n)})}function AE(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ie(n)})}function DE(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ie(n)})}function TE(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ie(n)})}function ME(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ie(n)})}function RE(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ie(n)})}function zE(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ie(n)})}function OE(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ie(n)})}function LE(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ie(n)})}function UE(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ie(n)})}function BE(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ie(n)})}function $E(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ie(n)})}function qE(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ie(n)})}function FE(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ie(n)})}function HE(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ie(n)})}function ZE(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ie(n)})}function VE(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ie(n)})}function IE(e,n){return new e({type:"string",format:"date",check:"string_format",...Ie(n)})}function QE(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ie(n)})}function PE(e,n){return new e({type:"string",format:"duration",check:"string_format",...Ie(n)})}function WE(e){return new e({type:"unknown"})}function KE(e,n){return new e({type:"never",...Ie(n)})}function ly(e,n){return new vN({check:"max_length",...Ie(n),maximum:e})}function ru(e,n){return new yN({check:"min_length",...Ie(n),minimum:e})}function oy(e,n){return new wN({check:"length_equals",...Ie(n),length:e})}function GE(e,n){return new jN({check:"string_format",format:"regex",...Ie(n),pattern:e})}function YE(e){return new SN({check:"string_format",format:"lowercase",...Ie(e)})}function XE(e){return new CN({check:"string_format",format:"uppercase",...Ie(e)})}function JE(e,n){return new NN({check:"string_format",format:"includes",...Ie(n),includes:e})}function ek(e,n){return new EN({check:"string_format",format:"starts_with",...Ie(n),prefix:e})}function tk(e,n){return new kN({check:"string_format",format:"ends_with",...Ie(n),suffix:e})}function vo(e){return new _N({check:"overwrite",tx:e})}function nk(e){return vo(n=>n.normalize(e))}function sk(){return vo(e=>e.trim())}function ak(){return vo(e=>e.toLowerCase())}function rk(){return vo(e=>e.toUpperCase())}function ik(e,n,a){return new e({type:"array",element:n,...Ie(a)})}function lk(e,n,a){return new e({type:"custom",check:"custom",fn:n,...Ie(a)})}function ok(e){const n=ck(a=>(a.addIssue=i=>{if(typeof i=="string")a.issues.push(uo(i,a.value,n._zod.def));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=a.value),o.inst??(o.inst=n),o.continue??(o.continue=!n._zod.def.abort),a.issues.push(uo(o))}},e(a.value,a)));return n}function ck(e,n){const a=new ra({check:"custom",...Ie(n)});return a._zod.check=e,a}const uk=je("ZodISODateTime",(e,n)=>{HN.init(e,n),It.init(e,n)});function dk(e){return VE(uk,e)}const fk=je("ZodISODate",(e,n)=>{ZN.init(e,n),It.init(e,n)});function hk(e){return IE(fk,e)}const mk=je("ZodISOTime",(e,n)=>{VN.init(e,n),It.init(e,n)});function pk(e){return QE(mk,e)}const gk=je("ZodISODuration",(e,n)=>{IN.init(e,n),It.init(e,n)});function xk(e){return PE(gk,e)}const bk=(e,n)=>{lm.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:a=>LC(e,a)},flatten:{value:a=>OC(e,a)},addIssue:{value:a=>{e.issues.push(a),e.message=JSON.stringify(e.issues,kh,2)}},addIssues:{value:a=>{e.issues.push(...a),e.message=JSON.stringify(e.issues,kh,2)}},isEmpty:{get(){return e.issues.length===0}}})},Rs=je("ZodError",bk,{Parent:Error}),vk=yu(Rs),yk=wu(Rs),wk=ju(Rs),jk=Su(Rs),Sk=FC(Rs),Ck=HC(Rs),Nk=ZC(Rs),Ek=VC(Rs),kk=IC(Rs),_k=QC(Rs),Ak=PC(Rs),Dk=WC(Rs),jn=je("ZodType",(e,n)=>(pn.init(e,n),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...a)=>e.clone(Yr(n,{checks:[...n.checks??[],...a.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(a,i)=>dr(e,a,i),e.brand=()=>e,e.register=((a,i)=>(a.add(e,i),e)),e.parse=(a,i)=>vk(e,a,i,{callee:e.parse}),e.safeParse=(a,i)=>wk(e,a,i),e.parseAsync=async(a,i)=>yk(e,a,i,{callee:e.parseAsync}),e.safeParseAsync=async(a,i)=>jk(e,a,i),e.spa=e.safeParseAsync,e.encode=(a,i)=>Sk(e,a,i),e.decode=(a,i)=>Ck(e,a,i),e.encodeAsync=async(a,i)=>Nk(e,a,i),e.decodeAsync=async(a,i)=>Ek(e,a,i),e.safeEncode=(a,i)=>kk(e,a,i),e.safeDecode=(a,i)=>_k(e,a,i),e.safeEncodeAsync=async(a,i)=>Ak(e,a,i),e.safeDecodeAsync=async(a,i)=>Dk(e,a,i),e.refine=(a,i)=>e.check(y_(a,i)),e.superRefine=a=>e.check(w_(a)),e.overwrite=a=>e.check(vo(a)),e.optional=()=>Z0(e),e.nullable=()=>V0(e),e.nullish=()=>Z0(V0(e)),e.nonoptional=a=>h_(e,a),e.array=()=>Jk(e),e.or=a=>n_([e,a]),e.and=a=>a_(e,a),e.transform=a=>I0(e,l_(a)),e.default=a=>u_(e,a),e.prefault=a=>f_(e,a),e.catch=a=>p_(e,a),e.pipe=a=>I0(e,a),e.readonly=()=>b_(e),e.describe=a=>{const i=e.clone();return $c.add(i,{description:a}),i},Object.defineProperty(e,"description",{get(){return $c.get(e)?.description},configurable:!0}),e.meta=(...a)=>{if(a.length===0)return $c.get(e);const i=e.clone();return $c.add(i,a[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),cy=je("_ZodString",(e,n)=>{om.init(e,n),jn.init(e,n);const a=e._zod.bag;e.format=a.format??null,e.minLength=a.minimum??null,e.maxLength=a.maximum??null,e.regex=(...i)=>e.check(GE(...i)),e.includes=(...i)=>e.check(JE(...i)),e.startsWith=(...i)=>e.check(ek(...i)),e.endsWith=(...i)=>e.check(tk(...i)),e.min=(...i)=>e.check(ru(...i)),e.max=(...i)=>e.check(ly(...i)),e.length=(...i)=>e.check(oy(...i)),e.nonempty=(...i)=>e.check(ru(1,...i)),e.lowercase=i=>e.check(YE(i)),e.uppercase=i=>e.check(XE(i)),e.trim=()=>e.check(sk()),e.normalize=(...i)=>e.check(nk(...i)),e.toLowerCase=()=>e.check(ak()),e.toUpperCase=()=>e.check(rk())}),Tk=je("ZodString",(e,n)=>{om.init(e,n),cy.init(e,n),e.email=a=>e.check(SE(Mk,a)),e.url=a=>e.check(_E(Rk,a)),e.jwt=a=>e.check(ZE(Wk,a)),e.emoji=a=>e.check(AE(zk,a)),e.guid=a=>e.check(q0(F0,a)),e.uuid=a=>e.check(CE(qc,a)),e.uuidv4=a=>e.check(NE(qc,a)),e.uuidv6=a=>e.check(EE(qc,a)),e.uuidv7=a=>e.check(kE(qc,a)),e.nanoid=a=>e.check(DE(Ok,a)),e.guid=a=>e.check(q0(F0,a)),e.cuid=a=>e.check(TE(Lk,a)),e.cuid2=a=>e.check(ME(Uk,a)),e.ulid=a=>e.check(RE(Bk,a)),e.base64=a=>e.check(qE(Ik,a)),e.base64url=a=>e.check(FE(Qk,a)),e.xid=a=>e.check(zE($k,a)),e.ksuid=a=>e.check(OE(qk,a)),e.ipv4=a=>e.check(LE(Fk,a)),e.ipv6=a=>e.check(UE(Hk,a)),e.cidrv4=a=>e.check(BE(Zk,a)),e.cidrv6=a=>e.check($E(Vk,a)),e.e164=a=>e.check(HE(Pk,a)),e.datetime=a=>e.check(dk(a)),e.date=a=>e.check(hk(a)),e.time=a=>e.check(pk(a)),e.duration=a=>e.check(xk(a))});function Fs(e){return jE(Tk,e)}const It=je("ZodStringFormat",(e,n)=>{Ht.init(e,n),cy.init(e,n)}),Mk=je("ZodEmail",(e,n)=>{RN.init(e,n),It.init(e,n)}),F0=je("ZodGUID",(e,n)=>{TN.init(e,n),It.init(e,n)}),qc=je("ZodUUID",(e,n)=>{MN.init(e,n),It.init(e,n)}),Rk=je("ZodURL",(e,n)=>{zN.init(e,n),It.init(e,n)}),zk=je("ZodEmoji",(e,n)=>{ON.init(e,n),It.init(e,n)}),Ok=je("ZodNanoID",(e,n)=>{LN.init(e,n),It.init(e,n)}),Lk=je("ZodCUID",(e,n)=>{UN.init(e,n),It.init(e,n)}),Uk=je("ZodCUID2",(e,n)=>{BN.init(e,n),It.init(e,n)}),Bk=je("ZodULID",(e,n)=>{$N.init(e,n),It.init(e,n)}),$k=je("ZodXID",(e,n)=>{qN.init(e,n),It.init(e,n)}),qk=je("ZodKSUID",(e,n)=>{FN.init(e,n),It.init(e,n)}),Fk=je("ZodIPv4",(e,n)=>{QN.init(e,n),It.init(e,n)}),Hk=je("ZodIPv6",(e,n)=>{PN.init(e,n),It.init(e,n)}),Zk=je("ZodCIDRv4",(e,n)=>{WN.init(e,n),It.init(e,n)}),Vk=je("ZodCIDRv6",(e,n)=>{KN.init(e,n),It.init(e,n)}),Ik=je("ZodBase64",(e,n)=>{GN.init(e,n),It.init(e,n)}),Qk=je("ZodBase64URL",(e,n)=>{XN.init(e,n),It.init(e,n)}),Pk=je("ZodE164",(e,n)=>{JN.init(e,n),It.init(e,n)}),Wk=je("ZodJWT",(e,n)=>{tE.init(e,n),It.init(e,n)}),Kk=je("ZodUnknown",(e,n)=>{nE.init(e,n),jn.init(e,n)});function H0(){return WE(Kk)}const Gk=je("ZodNever",(e,n)=>{sE.init(e,n),jn.init(e,n)});function Yk(e){return KE(Gk,e)}const Xk=je("ZodArray",(e,n)=>{aE.init(e,n),jn.init(e,n),e.element=n.element,e.min=(a,i)=>e.check(ru(a,i)),e.nonempty=a=>e.check(ru(1,a)),e.max=(a,i)=>e.check(ly(a,i)),e.length=(a,i)=>e.check(oy(a,i)),e.unwrap=()=>e.element});function Jk(e,n){return ik(Xk,e,n)}const e_=je("ZodObject",(e,n)=>{iE.init(e,n),jn.init(e,n),zt(e,"shape",()=>n.shape),e.keyof=()=>r_(Object.keys(e._zod.def.shape)),e.catchall=a=>e.clone({...e._zod.def,catchall:a}),e.passthrough=()=>e.clone({...e._zod.def,catchall:H0()}),e.loose=()=>e.clone({...e._zod.def,catchall:H0()}),e.strict=()=>e.clone({...e._zod.def,catchall:Yk()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=a=>DC(e,a),e.safeExtend=a=>TC(e,a),e.merge=a=>MC(e,a),e.pick=a=>_C(e,a),e.omit=a=>AC(e,a),e.partial=(...a)=>RC(uy,e,a[0]),e.required=(...a)=>zC(dy,e,a[0])});function Nu(e,n){const a={type:"object",shape:e??{},...Ie(n)};return new e_(a)}const t_=je("ZodUnion",(e,n)=>{lE.init(e,n),jn.init(e,n),e.options=n.options});function n_(e,n){return new t_({type:"union",options:e,...Ie(n)})}const s_=je("ZodIntersection",(e,n)=>{oE.init(e,n),jn.init(e,n)});function a_(e,n){return new s_({type:"intersection",left:e,right:n})}const Ah=je("ZodEnum",(e,n)=>{cE.init(e,n),jn.init(e,n),e.enum=n.entries,e.options=Object.values(n.entries);const a=new Set(Object.keys(n.entries));e.extract=(i,o)=>{const u={};for(const d of i)if(a.has(d))u[d]=n.entries[d];else throw new Error(`Key ${d} not found in enum`);return new Ah({...n,checks:[],...Ie(o),entries:u})},e.exclude=(i,o)=>{const u={...n.entries};for(const d of i)if(a.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new Ah({...n,checks:[],...Ie(o),entries:u})}});function r_(e,n){const a=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Ah({type:"enum",entries:a,...Ie(n)})}const i_=je("ZodTransform",(e,n)=>{uE.init(e,n),jn.init(e,n),e._zod.parse=(a,i)=>{if(i.direction==="backward")throw new Kv(e.constructor.name);a.addIssue=u=>{if(typeof u=="string")a.issues.push(uo(u,a.value,n));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=a.value),d.inst??(d.inst=e),a.issues.push(uo(d))}};const o=n.transform(a.value,a);return o instanceof Promise?o.then(u=>(a.value=u,a)):(a.value=o,a)}});function l_(e){return new i_({type:"transform",transform:e})}const uy=je("ZodOptional",(e,n)=>{dE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function Z0(e){return new uy({type:"optional",innerType:e})}const o_=je("ZodNullable",(e,n)=>{fE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function V0(e){return new o_({type:"nullable",innerType:e})}const c_=je("ZodDefault",(e,n)=>{hE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function u_(e,n){return new c_({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Xv(n)}})}const d_=je("ZodPrefault",(e,n)=>{mE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function f_(e,n){return new d_({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Xv(n)}})}const dy=je("ZodNonOptional",(e,n)=>{pE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function h_(e,n){return new dy({type:"nonoptional",innerType:e,...Ie(n)})}const m_=je("ZodCatch",(e,n)=>{gE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function p_(e,n){return new m_({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const g_=je("ZodPipe",(e,n)=>{xE.init(e,n),jn.init(e,n),e.in=n.in,e.out=n.out});function I0(e,n){return new g_({type:"pipe",in:e,out:n})}const x_=je("ZodReadonly",(e,n)=>{bE.init(e,n),jn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function b_(e){return new x_({type:"readonly",innerType:e})}const v_=je("ZodCustom",(e,n)=>{vE.init(e,n),jn.init(e,n)});function y_(e,n={}){return lk(v_,e,n)}function w_(e){return ok(e)}function j_(){return On({queryKey:Hs.providers(),queryFn:({signal:e})=>DS({signal:e}),staleTime:6e5,retry:!1,refetchOnWindowFocus:!1})}const S_={info:"bg-brand-50 text-brand-700 ring-brand-100",success:"bg-success-50 text-success-700 ring-success-100",warning:"bg-warning-50 text-warning-700 ring-warning-100",danger:"bg-danger-50 text-danger-700 ring-danger-100"};function lt({tone:e="info",heading:n,icon:a,className:i,children:o,...u}){return l.jsxs("div",{role:"status",className:pe("flex w-full items-start gap-3 rounded-lg px-4 py-3 text-sm ring-1 ring-inset",S_[e],i),...u,children:[a?l.jsx("span",{"aria-hidden":"true",children:a}):null,l.jsxs("div",{className:"space-y-1",children:[n?l.jsx("p",{className:"font-semibold",children:n}):null,o?l.jsx("p",{className:"leading-relaxed",children:o}):null]})]})}function bt({label:e,hint:n,error:a,required:i=!1,children:o,className:u}){const d=p.useId(),h=p.isValidElement(o)?o.props??{}:{},g=h.id??d,x=n?`${g}-hint`:void 0,b=a?`${g}-error`:void 0,v=[x,b,h["aria-describedby"]].filter(Boolean).join(" ")||void 0;return l.jsxs("div",{className:pe("space-y-2",u),children:[e?l.jsxs("label",{htmlFor:g,className:"text-sm font-medium text-slate-700","aria-required":i||void 0,children:[e,i?l.jsx("span",{className:"ml-1 text-danger-600","aria-hidden":"true",children:"*"}):null]}):null,p.isValidElement(o)?p.cloneElement(o,{id:g,required:i||h.required,"aria-describedby":v,"aria-invalid":a?!0:h["aria-invalid"]}):o,n?l.jsx("p",{id:x,className:"text-xs text-slate-500",children:n}):null,a?l.jsx("p",{id:b,className:"text-xs font-medium text-danger-600",children:a}):null]})}const fy="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",ht=p.forwardRef(({className:e,invalid:n=!1,...a},i)=>l.jsx("input",{ref:i,className:pe(fy,n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...a}));ht.displayName="Input";const C_=p.forwardRef(({className:e,invalid:n=!1,rows:a=4,...i},o)=>l.jsx("textarea",{ref:o,rows:a,className:pe(fy,"resize-y",n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...i}));C_.displayName="TextArea";const N_=Nu({email:Fs().trim().min(1,"Enter your email address.").email("Enter a valid email address."),password:Fs().min(1,"Enter your password.")});function E_(){const e=qn(),n=Ft(),a=ct(),i=Lv(),{session:o,isLoading:u,isError:d}=i,h=!o&&!u&&!d,g=Xh(h),x=j_(),b=x.data?.providers??[],v=x.data?.force_sso??!1,w=x.isError&&!x.isFetching?"We couldn't load the list of providers. Refresh the page or continue with email.":null,C=p.useMemo(()=>{const O=new URLSearchParams(e.search);return oo(O.get("redirectTo"))},[e.search]);p.useEffect(()=>{o&&n(nu(o.return_to,C),{replace:!0})},[n,C,o]),p.useEffect(()=>{h&&(g.isPending||g.isError||g.data?.requires_setup&&n(Bv(C),{replace:!0}))},[n,C,g.data?.requires_setup,g.isError,g.isPending,h]);const[N,j]=p.useState(null),[k,T]=p.useState(!1);if(p.useEffect(()=>{j(null)},[e.search]),u)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Checking your session"})});if(d)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to verify your session. Refresh the page to try again."}),l.jsx(ke,{variant:"secondary",onClick:()=>i.refetch(),children:"Retry"})]});if(g.isPending&&h)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Preparing initial setup"})});if(g.isError&&h)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to check whether ADE is ready."}),l.jsx(ke,{variant:"secondary",onClick:()=>g.refetch(),children:"Try again"})]});const E=async O=>{O.preventDefault(),j(null);const I=new FormData(O.currentTarget),A=Object.fromEntries(I.entries()),V=N_.safeParse(A);if(!V.success){const ae=V.error.issues[0]?.message??"Invalid input.";j(ae);return}const{email:W,password:X}=V.data,J=typeof A.redirectTo=="string"?A.redirectTo:null,L=oo(J);T(!0);try{const ae=await MS({email:W,password:X});a.setQueryData(Hs.detail(),ae),n(nu(ae.return_to,L),{replace:!0})}catch(ae){if(ae instanceof $n){const de=ae.problem?.detail??ae.message??"Unable to sign in.";j(de)}else ae instanceof Error?j(ae.message):j("Unable to sign in.")}finally{T(!1)}},B=!!N&&!k,Q=x.isLoading||x.isFetching;return l.jsx("div",{className:"mx-auto flex min-h-screen flex-col justify-center bg-slate-50 px-6 py-16",children:l.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[l.jsxs("header",{className:"space-y-2 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Welcome back"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Sign in to ADE"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email and password or continue with a connected provider."})]}),w?l.jsx(lt,{tone:"warning",className:"mt-6",children:w}):null,Q?l.jsxs("div",{className:"mt-6 space-y-3",children:[l.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"}),l.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"})]}):b.length>0?l.jsx("div",{className:"mt-6 space-y-3",children:b.map(O=>l.jsxs("a",{href:O.start_url??"#",className:"flex w-full items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:["Continue with ",O.label]},O.id))}):null,v?l.jsx(lt,{tone:"info",className:"mt-8",children:"Password sign-in is disabled for this deployment. Use one of the configured providers above."}):l.jsxs("form",{method:"post",className:"mt-8 space-y-6",onSubmit:E,children:[l.jsx("input",{type:"hidden",name:"redirectTo",value:C}),l.jsx(bt,{label:"Email address",required:!0,children:l.jsx(ht,{id:"email",type:"email",autoComplete:"email",placeholder:"you@example.com",name:"email",disabled:k})}),l.jsx(bt,{label:"Password",required:!0,children:l.jsx(ht,{id:"password",type:"password",autoComplete:"current-password",placeholder:"",name:"password",disabled:k})}),B?l.jsx(lt,{tone:"danger",children:N}):null,l.jsx(ke,{type:"submit",className:"w-full justify-center",isLoading:k,disabled:k,children:k?"Signing in":"Continue"})]})]})})}function k_(){const e=Ft(),n=qn(),a=ct(),[i,o]=p.useState(null);return p.useEffect(()=>{let u=!1;const d=new URLSearchParams(n.search),h=d.get("code")??"",g=d.get("state")??"";if(!h||!g){o("Missing authorization details from the identity provider.");return}async function x(){try{const b=await zS({code:h,state:g});if(u)return;a.setQueryData(Hs.detail(),b);const v=nu(b.return_to,d.get("next"));e(v,{replace:!0})}catch(b){if(u)return;b instanceof $n?o(b.problem?.detail??b.message):b instanceof Error?o(b.message):o("Unexpected callback error.")}}return x(),()=>{u=!0}},[n.search,e,a]),i?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(wt,{title:"Unable to finish sign-in",description:i,variant:"error",action:l.jsx(ke,{variant:"secondary",onClick:()=>e("/login",{replace:!0}),children:"Return to sign in"})})}):l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(wt,{title:"Finishing sign-in",variant:"loading"})})}const __=Nu({displayName:Fs().min(1,"Display name is required."),email:Fs().min(1,"Email is required.").email("Enter a valid email address."),password:Fs().min(12,"Use at least 12 characters."),confirmPassword:Fs().min(1,"Confirm your password.")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match."});function A_(){const e=qn(),n=Ft(),a=ct(),i=Xh(!0),o=p.useMemo(()=>{const b=new URLSearchParams(e.search);return oo(b.get("redirectTo"))},[e.search]);p.useEffect(()=>{i.isPending||i.isError||i.data?.requires_setup||n(Uv(o),{replace:!0})},[n,o,i.data?.requires_setup,i.isError,i.isPending]);const[u,d]=p.useState(null),[h,g]=p.useState(!1);if(i.isPending)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Loading setup status"})});if(i.isError)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We couldn't check whether ADE requires initial setup."}),l.jsx(ke,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})]});if(!i.data?.requires_setup)return null;const x=async b=>{b.preventDefault(),d(null);const v=new FormData(b.currentTarget),w=Object.fromEntries(v.entries()),C=__.safeParse(w);if(!C.success){const j=C.error.issues[0]?.message??"Invalid input.";d(j);return}g(!0);const N=oo(w.redirectTo);try{const j=await HS({display_name:C.data.displayName,email:C.data.email,password:C.data.password});a.setQueryData(Hs.detail(),j),n(nu(j.return_to,N),{replace:!0})}catch(j){if(j instanceof $n){const k=j.problem?.detail??j.message??"Setup failed. Try again.";d(k)}else j instanceof Error?d(j.message):d("Setup failed. Try again.")}finally{g(!1)}};return l.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col justify-center bg-slate-50 px-6 py-16",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[l.jsxs("header",{className:"space-y-3 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"First-run configuration"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Create the first administrator"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Provide credentials for the inaugural administrator account. We'll redirect after completion."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[l.jsx("input",{type:"hidden",name:"redirectTo",value:o}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsx(bt,{label:"Display name",required:!0,children:l.jsx(ht,{id:"displayName",name:"displayName",placeholder:"Casey Operator",required:!0,disabled:h})}),l.jsx(bt,{label:"Email",required:!0,children:l.jsx(ht,{id:"email",name:"email",type:"email",placeholder:"casey@example.com",required:!0,disabled:h})})]}),l.jsx(bt,{label:"Password",hint:"Use at least 12 characters.",required:!0,children:l.jsx(ht,{id:"password",name:"password",type:"password",minLength:12,placeholder:"",required:!0,disabled:h})}),l.jsx(bt,{label:"Confirm password",required:!0,children:l.jsx(ht,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:12,placeholder:"Re-enter your password",required:!0,disabled:h})}),u?l.jsx(lt,{tone:"danger",children:u}):null,l.jsx("div",{className:"flex justify-end",children:l.jsx(ke,{type:"submit",isLoading:h,disabled:h,children:h?"Creating administrator":"Create administrator"})})]})]})})}function hy({id:e,value:n,defaultValue:a="",placeholder:i="Search",ariaLabel:o,shortcutHint:u="K",shortcutKey:d="k",enableShortcut:h=!0,scopeLabel:g,leadingIcon:x,trailingIcon:b,className:v,variant:w="default",isLoading:C=!1,loadingLabel:N="Loading suggestions",filters:j,onSelectFilter:k,emptyState:T,onChange:E,onSubmit:B,onClear:Q,onFocus:O,onBlur:I,suggestions:A=[],onSelectSuggestion:V,renderSuggestion:W}){const X=p.useId(),J=e??X,L=`${X}-suggestions`,ae=p.useRef(null),de=n!==void 0,[be,D]=p.useState(a),[U,ie]=p.useState(!1),[me,se]=p.useState(0),_=de?n??"":be,P=A.length>0,le=!!j?.length,q=U&&(P||C||!!T||le),ee=U&&!P&&!C&&!!T,H=!!(Q||!de),K=u||"K",R=o??i;p.useEffect(()=>{de||D(a)},[a,de]),p.useEffect(()=>{se(0)},[A.length,_]),p.useEffect(()=>{if(!h||typeof window>"u")return;const Ce=$e=>{($e.metaKey||$e.ctrlKey)&&$e.key.toLowerCase()===d.toLowerCase()&&($e.preventDefault(),ae.current?.focus())};return window.addEventListener("keydown",Ce),()=>window.removeEventListener("keydown",Ce)},[h,d]);const Z=Ce=>{Ce.preventDefault();const $e=_.trim();!$e&&!B||B?.($e)},ge=Ce=>{de||D(Ce),E?.(Ce)},De=()=>{_&&(de||D(""),E?.(""),Q?.(),ae.current?.focus())},Ze=Ce=>{Ce&&(V?.(Ce),Ce.action?.(),ie(!1),ae.current?.blur())},st=Ce=>{if(!q||!P){Ce.key==="Escape"&&(ie(!1),Ce.currentTarget.blur());return}if(Ce.key==="ArrowDown"){Ce.preventDefault(),se($e=>($e+1)%A.length);return}if(Ce.key==="ArrowUp"){Ce.preventDefault(),se($e=>($e-1+A.length)%A.length);return}if(Ce.key==="Enter"){Ce.preventDefault(),Ze(A[me]);return}Ce.key==="Escape"&&(Ce.preventDefault(),ie(!1),Ce.currentTarget.blur())},ye=w==="minimal"?"rounded-lg border border-slate-200 bg-white shadow-sm focus-within:border-brand-200":"rounded-xl border border-slate-200/70 bg-gradient-to-r from-white/95 via-slate-50/80 to-white/95 shadow-[0_20px_45px_-30px_rgba(15,23,42,0.65)] ring-1 ring-inset ring-white/80 transition focus-within:border-brand-200 focus-within:shadow-[0_25px_55px_-35px_rgba(79,70,229,0.55)] sm:rounded-2xl";return l.jsxs("div",{className:pe("relative",v),children:[l.jsx("div",{className:pe("group/search overflow-hidden",ye,q&&w==="default"&&"focus-within:shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)]"),children:l.jsxs("form",{className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-slate-600 sm:px-5 sm:py-2.5",role:"search","aria-label":R,onSubmit:Z,children:[l.jsx("label",{htmlFor:J,className:"sr-only",children:R}),x??l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/90 text-brand-600 shadow-inner shadow-white/60 ring-1 ring-inset ring-white/70 sm:h-10 sm:w-10 sm:rounded-xl",children:l.jsx(T_,{className:"h-4 w-4 flex-shrink-0 text-brand-600"})}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[g?l.jsx("span",{className:"text-[0.6rem] font-semibold uppercase tracking-wide text-slate-400 sm:text-[0.65rem]",children:g}):null,l.jsx("input",{ref:ae,id:J,type:"search",value:_,onChange:Ce=>ge(Ce.target.value),role:"combobox","aria-autocomplete":"list","aria-haspopup":"listbox",onFocus:()=>{ie(!0),O?.(),P||se(0)},onBlur:()=>{ie(!1),I?.()},onKeyDown:st,placeholder:i,className:"w-full border-0 bg-transparent text-base font-medium text-slate-900 placeholder:text-slate-400 focus:outline-none","aria-expanded":q,"aria-controls":q?L:void 0,"aria-activedescendant":q&&P?`${L}-option-${me}`:void 0})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[H&&_?l.jsx("button",{type:"button",onClick:De,"aria-label":"Clear search",className:"focus-ring inline-flex h-7 w-7 items-center justify-center rounded-full border border-transparent text-slate-400 hover:border-slate-200 hover:bg-white",children:l.jsx(M_,{className:"h-3.5 w-3.5"})}):null,C?l.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center","aria-live":"polite","aria-label":N,children:l.jsx(R_,{className:"h-4 w-4 text-brand-600"})}):null,b,l.jsx("span",{className:"hidden items-center gap-1 rounded-full border border-slate-200/80 bg-white/80 px-2 py-1 text-xs font-semibold text-slate-500 shadow-inner shadow-white/60 md:inline-flex",children:K})]})]})}),q?l.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-2 overflow-hidden rounded-2xl border border-slate-200/70 bg-white/95 shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)] ring-1 ring-inset ring-white/80",children:[P?l.jsx("ul",{id:L,role:"listbox","aria-label":"Search suggestions",className:"divide-y divide-slate-100/80",children:A.map((Ce,$e)=>{const We=$e===me,at=W?.({suggestion:Ce,active:We})??l.jsx(D_,{suggestion:Ce,active:We});return l.jsx("li",{children:l.jsx("button",{id:`${L}-option-${$e}`,type:"button",role:"option","aria-selected":We,onMouseEnter:()=>se($e),onMouseDown:Ot=>Ot.preventDefault(),onClick:()=>Ze(Ce),className:pe("flex w-full px-5 py-3 text-left transition",We?"bg-brand-50/60":"hover:bg-slate-50/80"),children:at})},Ce.id)})}):null,ee?l.jsx("div",{className:"px-5 py-4 text-sm text-slate-500",role:"status",children:T}):null,le?l.jsx("div",{className:"border-t border-slate-100/80 bg-slate-50/60 px-4 py-2.5",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-slate-500",children:[l.jsx("span",{className:"uppercase tracking-wide text-[0.6rem] text-slate-400",children:"Filters:"}),j?.map(Ce=>l.jsx("button",{type:"button",onMouseDown:$e=>$e.preventDefault(),onClick:()=>k?.(Ce),className:pe("focus-ring inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-semibold transition",Ce.active?"border-brand-300 bg-brand-50 text-brand-700":"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:Ce.label},Ce.id))]})}):null]}):null]})}function D_({suggestion:e,active:n}){return l.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.icon?l.jsx("span",{className:"mt-0.5 text-slate-400",children:e.icon}):l.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-slate-200","aria-hidden":!0}),l.jsxs("span",{className:"flex min-w-0 flex-col",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.label}),e.shortcutHint?l.jsx("span",{className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-slate-400",children:e.shortcutHint}):null]}),e.description?l.jsx("span",{className:pe("text-xs",n?"text-brand-700":"text-slate-500"),children:e.description}):null]})]})}function T_({className:e="h-4 w-4 flex-shrink-0 text-slate-400"}){return l.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("circle",{cx:"9",cy:"9",r:"5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"m13.5 13.5 3 3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function M_({className:e="h-3.5 w-3.5"}){return l.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function R_({className:e="h-4 w-4"}){return l.jsxs("svg",{className:pe("animate-spin",e),viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-20",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),l.jsx("path",{className:"opacity-70",d:"M22 12a10 10 0 0 0-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function my({brand:e,leading:n,actions:a,trailing:i,search:o,secondaryContent:u}){const d=!!o,h=o?{...o,className:pe("order-last w-full lg:order-none lg:max-w-2xl lg:justify-self-center",o.className)}:void 0;return l.jsx("header",{className:"sticky top-0 z-40 border-b border-slate-200/70 bg-gradient-to-b from-white/95 via-slate-50/70 to-white/90 shadow-[0_12px_40px_-30px_rgba(15,23,42,0.8)] backdrop-blur supports-[backdrop-filter]:backdrop-blur-xl",children:l.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3 sm:px-6 lg:px-10",children:[l.jsxs("div",{className:pe("flex min-h-[3.5rem] w-full flex-wrap items-center gap-3 sm:gap-4",d?"lg:grid lg:grid-cols-[auto_minmax(0,1fr)_auto] lg:items-center lg:gap-8":"justify-between"),children:[l.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3 lg:flex-none",children:[e,n]}),h?l.jsx(hy,{...h}):null,l.jsxs("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2 sm:flex-none",children:[a,i]})]}),u?l.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u}):null]})})}function py({displayName:e,email:n,actions:a=[]}){const[i,o]=p.useState(!1),[u,d]=p.useState(!1),h=p.useRef(null),g=p.useRef(null),x=Ft(),b=p.useMemo(()=>z_(e||n),[e,n]),v=p.useCallback(()=>o(!1),[]);p.useEffect(()=>{if(!i)return;const N=k=>{const T=k.target;T&&(g.current?.contains(T)||h.current?.contains(T)||v())},j=k=>{k.key==="Escape"&&v()};return window.addEventListener("mousedown",N),window.addEventListener("touchstart",N,{passive:!0}),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",N),window.removeEventListener("touchstart",N),window.removeEventListener("keydown",j)}},[v,i]),p.useEffect(()=>{if(!i)return;g.current?.querySelector("button[data-menu-item]")?.focus({preventScroll:!0})},[i]);const w=p.useCallback(N=>{v(),N()},[v]),C=p.useCallback(async()=>{u||(v(),d(!0),x("/logout",{replace:!0}))},[v,u,x]);return l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:h,type:"button",className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-2.5 py-1.5 text-left text-sm font-semibold text-slate-700 shadow-sm transition hover:border-slate-300 hover:text-slate-900","aria-haspopup":"menu","aria-expanded":i,onClick:()=>o(N=>!N),children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-sm font-semibold text-white shadow-sm",children:b}),l.jsxs("span",{className:"hidden min-w-0 flex-col sm:flex",children:[l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:e}),l.jsx("span",{className:"truncate text-xs text-slate-400",children:n})]}),l.jsx(L_,{className:pe("text-slate-400 transition-transform",i&&"rotate-180")})]}),i?l.jsxs("div",{ref:g,role:"menu",className:"absolute right-0 z-50 mt-2 w-72 origin-top-right rounded-xl border border-slate-200 bg-white p-2 text-sm shadow-xl",children:[l.jsxs("div",{className:"px-2 pb-2",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Signed in as"}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:n})]}),l.jsx("ul",{className:"space-y-1",role:"none",children:a.map(N=>l.jsx("li",{role:"none",children:l.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>w(N.onSelect),children:[l.jsx("span",{className:"inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100 text-xs font-semibold text-slate-500",children:N.icon??N.label.charAt(0).toUpperCase()}),l.jsxs("span",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"truncate",children:N.label}),N.description?l.jsx("span",{className:"truncate text-xs font-normal text-slate-400",children:N.description}):null]})]})},N.id))}),l.jsx("div",{className:"mt-2 border-t border-slate-200 pt-2",children:l.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"focus-ring flex w-full items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 transition hover:border-brand-200 hover:text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",onClick:C,disabled:u,children:[l.jsx("span",{children:"Sign out"}),u?l.jsx(O_,{}):null]})})]}):null]})}function z_(e){const n=e.split(" ").map(a=>a.trim()).filter(Boolean);return n.length===0?"":n.length===1?n[0].charAt(0).toUpperCase():`${n[0].charAt(0)}${n[n.length-1].charAt(0)}`.toUpperCase()}function O_(){return l.jsx("svg",{className:"h-4 w-4 animate-spin text-brand-600",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:l.jsx("path",{d:"M10 3a7 7 0 1 1-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}function L_({className:e}){return l.jsx("svg",{className:pe("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:l.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}var ps=fv();const U_="1.6.2",B_=U_.trim(),$_=B_||"unknown";async function q_(e={}){const{data:n}=await He.GET("/api/v1/system/safe-mode",{signal:e.signal}),a=n??{},i=!!a.enabled,o=typeof a.detail=="string"&&a.detail.trim().length>0?a.detail.trim():Ki;return{enabled:i,detail:o}}async function F_(e={}){const{data:n}=await He.GET("/api/v1/meta/versions",{signal:e.signal}),a=n??{};return{ade_api:Q0(a.ade_api),ade_engine:Q0(a.ade_engine)}}const Ki="ADE safe mode enabled; skipping engine execution until ADE_SAFE_MODE is disabled.";function Q0(e){return typeof e=="string"&&e.trim().length>0?e.trim():"unknown"}const P0=["system","safe-mode"],W0=["system","versions"];function gy(){const n=ct().getQueryData(P0);return On({queryKey:P0,queryFn:({signal:a})=>q_({signal:a}),initialData:n,staleTime:3e4,refetchInterval:6e4})}function H_(e={}){const a=ct().getQueryData(W0);return On({queryKey:W0,queryFn:({signal:i})=>F_({signal:i}),initialData:a,staleTime:300*1e3,enabled:e.enabled??!0})}function xy({open:e,onClose:n}){const a=p.useRef(null),i=p.useRef(null),o=H_({enabled:e}),u=o.isError,d=o.data?.ade_api??(o.isPending?"Loading...":"unknown"),h=o.data?.ade_engine??(o.isPending?"Loading...":"unknown");if(p.useEffect(()=>{if(!e)return;const x=b=>{b.key==="Escape"&&n()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,n]),p.useEffect(()=>{if(!e)return;const{body:x}=document,b=x.style.overflow;return x.style.overflow="hidden",()=>{x.style.overflow=b}},[e]),p.useEffect(()=>{e&&i.current?.focus({preventScroll:!0})},[e]),typeof document>"u"||!e)return null;const g=l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",role:"presentation",onMouseDown:x=>{x.target===x.currentTarget&&n()},children:l.jsxs("div",{ref:a,role:"dialog","aria-modal":"true","aria-labelledby":"about-versions-heading",className:"w-full max-w-xl rounded-2xl border border-slate-200/80 bg-white p-6 shadow-2xl",children:[l.jsxs("header",{className:"mb-6 flex items-start justify-between gap-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"About"}),l.jsx("h2",{id:"about-versions-heading",className:"text-xl font-semibold text-slate-900",children:"ADE versions"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Installed versions for this ADE deployment across the web UI and backend runtime."})]}),l.jsx(ke,{ref:i,variant:"ghost",size:"sm",onClick:n,children:"Close"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(ah,{label:"ade-web",value:$_,hint:"Frontend build"}),l.jsx(ah,{label:"ade-api",value:d,hint:"Backend service"}),l.jsx(ah,{label:"ade-engine",value:h,hint:"Engine runtime"})]}),u?l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsx(lt,{tone:"warning",heading:"Backend versions unavailable",children:"Could not load backend versions. Check connectivity and try again."}),l.jsx(ke,{size:"sm",variant:"secondary",onClick:()=>o.refetch(),children:"Retry"})]}):null]})});return ps.createPortal(g,document.body)}function ah({label:e,value:n,hint:a}){return l.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-xl border border-slate-100 bg-slate-50 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e}),l.jsx("span",{className:"text-xs text-slate-500",children:a})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("code",{className:"rounded bg-slate-900/90 px-2.5 py-1 text-xs font-mono text-white shadow-sm",children:n})})]})}function Z_({title:e,...n}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":e?void 0:!0,role:e?"img":"presentation",...n,children:[e?l.jsx("title",{children:e}):null,l.jsx("path",{d:"M4 10.5 12 4l8 6.5V19a1 1 0 0 1-1 1h-4v-5h-6v5H5a1 1 0 0 1-1-1v-8.5Z"})]})}function by({children:e,sidePanel:n,actions:a,search:i}){const o=Wi(),u=Ft(),[d,h]=p.useState(!1),g=o.user.display_name||o.user.email||"Signed in",x=o.user.email??"";return l.jsxs(l.Fragment,{children:[l.jsx(xy,{open:d,onClose:()=>h(!1)}),l.jsxs("div",{className:"flex min-h-screen flex-col bg-slate-50 text-slate-900",children:[l.jsx(my,{brand:l.jsxs("button",{type:"button",onClick:()=>u("/workspaces"),className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-transparent bg-white px-3 py-2 text-left text-sm font-semibold text-slate-900 shadow-sm transition hover:border-slate-200",children:[l.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-sm",children:l.jsx(Z_,{className:"h-5 w-5","aria-hidden":!0})}),l.jsxs("span",{className:"flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Workspace directory"}),l.jsx("span",{className:"text-xs text-slate-400",children:"Automatic Data Extractor"})]})]}),search:i,actions:a?l.jsx("div",{className:"flex items-center gap-2",children:a}):void 0,trailing:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(py,{displayName:g,email:x,actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>h(!0)}]})})}),l.jsx("main",{className:"flex flex-1 overflow-y-auto",children:l.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:l.jsxs("div",{className:`grid gap-6 ${n?"lg:grid-cols-[minmax(0,1fr)_280px]":""}`,children:[l.jsx("div",{children:e}),n?l.jsx("aside",{className:"space-y-6",children:n}):null]})})})]})]})}const V_="K",I_="Ctrl+K";function vy({macLabel:e=V_,windowsLabel:n=I_}={}){const[a,i]=p.useState(e);return p.useEffect(()=>{if(typeof window>"u")return;const o=window.navigator.platform??"",u=/Mac|iPhone|iPad|Macintosh/.test(o);i(u?e:n)},[e,n]),a}function Q_(){return l.jsx(gu,{children:l.jsx(P_,{})})}function P_(){const e=Ft(),n=Wi(),a=tm(),i=Qv(),[o,u]=p.useState(null),[d,h]=p.useState(null),g=p.useMemo(()=>(n.user.permissions??[]).map(L=>L.toLowerCase()),[n.user.permissions]),x=g.includes("workspaces.create")||g.includes("workspaces.manage_all"),[b,v]=p.useState(""),w=vy(),C=a.data,N=p.useMemo(()=>C?.items??[],[C?.items]),j=b.trim().toLowerCase(),k=p.useMemo(()=>j?N.filter(L=>{const ae=L.name.toLowerCase(),de=L.slug?.toLowerCase()??"";return ae.includes(j)||de.includes(j)}):N,[N,j]),T=p.useCallback(L=>e(nm(L)),[e]),E=x?l.jsx(ke,{variant:"primary",onClick:()=>e("/workspaces/new"),children:"Create workspace"}):void 0,B=p.useCallback(()=>{if(!j)return;const L=k[0];L&&T(L.id)},[k,j,T]),Q=p.useCallback(()=>v(""),[]),I=(j?k:N).slice(0,5).map(L=>({id:L.id,label:L.name,description:L.slug?`Slug  ${L.slug}`:"Workspace"})),A=p.useCallback(L=>{v(""),T(L.id)},[T]),V=p.useCallback(async L=>{h(null),u(L.id);try{await i.mutateAsync(L.id),Pv(L.id)}catch(ae){console.warn("workspaces.set_default.failed",ae),h("Unable to set the default workspace. Please try again.")}finally{u(null)}},[i]),W={value:b,onChange:v,onSubmit:B,placeholder:"Search workspaces or jump to one instantly",shortcutHint:w,scopeLabel:"Workspace directory",suggestions:I,onSelectSuggestion:A,onClear:Q},X={...W,shortcutHint:void 0,onClear:Q,enableShortcut:!1,variant:"minimal"};if(a.isLoading)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(wt,{title:"Loading workspaces",variant:"loading"})});if(a.isError)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(wt,{title:"We couldn't load your workspaces",description:"Refresh the page or try again later.",variant:"error",action:l.jsx(ke,{variant:"secondary",onClick:()=>a.refetch(),children:"Retry"})})});const J=N.length===0?x?l.jsx(K_,{onCreate:()=>e("/workspaces/new")}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("h1",{id:"page-title",className:"sr-only",children:"Workspaces"}),l.jsx(wt,{title:"No workspaces available",description:"You don't have access to any workspaces yet. Ask an administrator to add you or create one on your behalf.",variant:"empty"})]}):k.length===0?l.jsx("div",{className:"space-y-4",children:l.jsx(wt,{title:`No workspaces matching "${b}"`,description:"Try searching by another workspace name or slug.",action:l.jsx(ke,{variant:"secondary",onClick:Q,children:"Clear search"})})}):l.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{children:[l.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"Workspaces"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Select a workspace to jump straight into documents."})]}),d?l.jsx(lt,{tone:"danger",heading:"We couldn't update your default workspace",children:d}):null,l.jsx(hy,{...X,className:"w-full"}),l.jsx("section",{className:"grid gap-5 lg:grid-cols-2",children:k.map(L=>{const ae=i.isPending&&o===L.id;return l.jsxs("div",{className:"group relative rounded-xl border border-slate-200 bg-white p-5 text-left shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-within:ring-2 focus-within:ring-brand-500 focus-within:ring-offset-2 focus-within:ring-offset-white",children:[l.jsxs("button",{type:"button",onClick:()=>T(L.id),className:"w-full text-left focus-visible:outline-none","aria-label":`Open workspace ${L.name}`,children:[l.jsx("div",{className:"flex items-start justify-between gap-3",children:l.jsxs("div",{className:"space-y-1 pr-24",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:L.name}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Slug: ",L.slug]})]})}),l.jsx("p",{className:"mt-4 text-xs font-medium uppercase tracking-wide text-slate-500",children:"Permissions"}),l.jsx("p",{className:"text-sm text-slate-600",children:L.permissions.length>0?L.permissions.join(", "):"None"})]}),l.jsx("div",{className:"absolute right-5 top-5",children:L.is_default?l.jsx("span",{className:"rounded-full bg-brand-50 px-2 py-1 text-xs font-semibold text-brand-600",children:"Default"}):l.jsx(ke,{variant:"secondary",size:"sm",isLoading:ae,disabled:ae,onClick:()=>void V(L),children:"Set as default"})})]},L.id)})})]});return l.jsx(by,{actions:E,search:W,sidePanel:l.jsx(W_,{canCreate:x,onCreate:()=>e("/workspaces/new")}),children:J})}function W_({canCreate:e,onCreate:n}){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Workspace tips"}),l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Why multiple workspaces?"})]}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Segment teams by business unit or client, control access with roles, and tailor extraction settings per workspace. Everything stays organised and secure."}),e?l.jsx(ke,{variant:"secondary",onClick:n,className:"w-full",children:"New workspace"}):null]}),l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Need a hand?"}),l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Workspace setup checklist"})]}),l.jsxs("ul",{className:"space-y-2 text-xs text-slate-600",children:[l.jsx("li",{children:"Add at least one additional administrator."}),l.jsx("li",{children:"Review configurations before uploading production files."}),l.jsx("li",{children:"Review workspace permissions for external collaborators."})]})]})]})}function K_({onCreate:e}){return l.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-dashed border-slate-300 bg-white p-10 text-center shadow-soft",children:[l.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"No workspaces yet"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Create your first workspace to start uploading configuration sets and documents."}),l.jsx(ke,{variant:"primary",onClick:e,className:"mt-6",children:"Create workspace"})]})}var yo=e=>e.type==="checkbox",Vr=e=>e instanceof Date,Gn=e=>e==null;const yy=e=>typeof e=="object";var cn=e=>!Gn(e)&&!Array.isArray(e)&&yy(e)&&!Vr(e),G_=e=>cn(e)&&e.target?yo(e.target)?e.target.checked:e.target.value:e,Y_=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,X_=(e,n)=>e.has(Y_(n)),J_=e=>{const n=e.constructor&&e.constructor.prototype;return cn(n)&&n.hasOwnProperty("isPrototypeOf")},cm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function yn(e){let n;const a=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(!(cm&&(e instanceof Blob||i))&&(a||cn(e)))if(n=a?[]:Object.create(Object.getPrototypeOf(e)),!a&&!J_(e))n=e;else for(const o in e)e.hasOwnProperty(o)&&(n[o]=yn(e[o]));else return e;return n}var Eu=e=>/^\w*$/.test(e),en=e=>e===void 0,um=e=>Array.isArray(e)?e.filter(Boolean):[],dm=e=>um(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Oe=(e,n,a)=>{if(!n||!cn(e))return a;const i=(Eu(n)?[n]:dm(n)).reduce((o,u)=>Gn(o)?o:o[u],e);return en(i)||i===e?en(e[n])?a:e[n]:i},na=e=>typeof e=="boolean",Mt=(e,n,a)=>{let i=-1;const o=Eu(n)?[n]:dm(n),u=o.length,d=u-1;for(;++i<u;){const h=o[i];let g=a;if(i!==d){const x=e[h];g=cn(x)||Array.isArray(x)?x:isNaN(+o[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=g,e=e[h]}};const K0={BLUR:"blur",FOCUS_OUT:"focusout"},$s={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ca={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},e2=_t.createContext(null);e2.displayName="HookFormContext";var t2=(e,n,a,i=!0)=>{const o={defaultValues:n._defaultValues};for(const u in e)Object.defineProperty(o,u,{get:()=>{const d=u;return n._proxyFormState[d]!==$s.all&&(n._proxyFormState[d]=!i||$s.all),e[d]}});return o};const n2=typeof window<"u"?_t.useLayoutEffect:_t.useEffect;var ms=e=>typeof e=="string",s2=(e,n,a,i,o)=>ms(e)?(i&&n.watch.add(e),Oe(a,e,o)):Array.isArray(e)?e.map(u=>(i&&n.watch.add(u),Oe(a,u))):(i&&(n.watchAll=!0),a),Dh=e=>Gn(e)||!yy(e);function or(e,n,a=new WeakSet){if(Dh(e)||Dh(n))return e===n;if(Vr(e)&&Vr(n))return e.getTime()===n.getTime();const i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;if(a.has(e)||a.has(n))return!0;a.add(e),a.add(n);for(const u of i){const d=e[u];if(!o.includes(u))return!1;if(u!=="ref"){const h=n[u];if(Vr(d)&&Vr(h)||cn(d)&&cn(h)||Array.isArray(d)&&Array.isArray(h)?!or(d,h,a):d!==h)return!1}}return!0}var fm=(e,n,a,i,o)=>n?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[i]:o||!0}}:{},eo=e=>Array.isArray(e)?e:[e],G0=()=>{let e=[];return{get observers(){return e},next:o=>{for(const u of e)u.next&&u.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(u=>u!==o)}}),unsubscribe:()=>{e=[]}}};function wy(e,n){const a={};for(const i in e)if(e.hasOwnProperty(i)){const o=e[i],u=n[i];if(o&&cn(o)&&u){const d=wy(o,u);cn(d)&&(a[i]=d)}else e[i]&&(a[i]=u)}return a}var Kn=e=>cn(e)&&!Object.keys(e).length,hm=e=>e.type==="file",qs=e=>typeof e=="function",iu=e=>{if(!cm)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},jy=e=>e.type==="select-multiple",mm=e=>e.type==="radio",a2=e=>mm(e)||yo(e),rh=e=>iu(e)&&e.isConnected;function r2(e,n){const a=n.slice(0,-1).length;let i=0;for(;i<a;)e=en(e)?i++:e[n[i++]];return e}function i2(e){for(const n in e)if(e.hasOwnProperty(n)&&!en(e[n]))return!1;return!0}function on(e,n){const a=Array.isArray(n)?n:Eu(n)?[n]:dm(n),i=a.length===1?e:r2(e,a),o=a.length-1,u=a[o];return i&&delete i[u],o!==0&&(cn(i)&&Kn(i)||Array.isArray(i)&&i2(i))&&on(e,a.slice(0,-1)),e}var l2=e=>{for(const n in e)if(qs(e[n]))return!0;return!1};function Sy(e){return Array.isArray(e)||cn(e)&&!l2(e)}function Th(e,n={}){for(const a in e)Sy(e[a])?(n[a]=Array.isArray(e[a])?[]:{},Th(e[a],n[a])):en(e[a])||(n[a]=!0);return n}function $i(e,n,a){a||(a=Th(n));for(const i in e)Sy(e[i])?en(n)||Dh(a[i])?a[i]=Th(e[i],Array.isArray(e[i])?[]:{}):$i(e[i],Gn(n)?{}:n[i],a[i]):a[i]=!or(e[i],n[i]);return a}const Y0={value:!1,isValid:!1},X0={value:!0,isValid:!0};var Cy=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!en(e[0].attributes.value)?en(e[0].value)||e[0].value===""?X0:{value:e[0].value,isValid:!0}:X0:Y0}return Y0},Ny=(e,{valueAsNumber:n,valueAsDate:a,setValueAs:i})=>en(e)?e:n?e===""?NaN:e&&+e:a&&ms(e)?new Date(e):i?i(e):e;const J0={isValid:!1,value:null};var Ey=e=>Array.isArray(e)?e.reduce((n,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:n,J0):J0;function eb(e){const n=e.ref;return hm(n)?n.files:mm(n)?Ey(e.refs).value:jy(n)?[...n.selectedOptions].map(({value:a})=>a):yo(n)?Cy(e.refs).value:Ny(en(n.value)?e.ref.value:n.value,e)}var o2=(e,n,a,i)=>{const o={};for(const u of e){const d=Oe(n,u);d&&Mt(o,u,d._f)}return{criteriaMode:a,names:[...e],fields:o,shouldUseNativeValidation:i}},lu=e=>e instanceof RegExp,Yl=e=>en(e)?e:lu(e)?e.source:cn(e)?lu(e.value)?e.value.source:e.value:e,tb=e=>({isOnSubmit:!e||e===$s.onSubmit,isOnBlur:e===$s.onBlur,isOnChange:e===$s.onChange,isOnAll:e===$s.all,isOnTouch:e===$s.onTouched});const nb="AsyncFunction";var c2=e=>!!e&&!!e.validate&&!!(qs(e.validate)&&e.validate.constructor.name===nb||cn(e.validate)&&Object.values(e.validate).find(n=>n.constructor.name===nb)),u2=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),sb=(e,n,a)=>!a&&(n.watchAll||n.watch.has(e)||[...n.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const to=(e,n,a,i)=>{for(const o of a||Object.keys(e)){const u=Oe(e,o);if(u){const{_f:d,...h}=u;if(d){if(d.refs&&d.refs[0]&&n(d.refs[0],o)&&!i)return!0;if(d.ref&&n(d.ref,d.name)&&!i)return!0;if(to(h,n))break}else if(cn(h)&&to(h,n))break}}};function ab(e,n,a){const i=Oe(e,a);if(i||Eu(a))return{error:i,name:a};const o=a.split(".");for(;o.length;){const u=o.join("."),d=Oe(n,u),h=Oe(e,u);if(d&&!Array.isArray(d)&&a!==u)return{name:a};if(h&&h.type)return{name:u,error:h};if(h&&h.root&&h.root.type)return{name:`${u}.root`,error:h.root};o.pop()}return{name:a}}var d2=(e,n,a,i)=>{a(e);const{name:o,...u}=e;return Kn(u)||Object.keys(u).length>=Object.keys(n).length||Object.keys(u).find(d=>n[d]===(!i||$s.all))},f2=(e,n,a)=>!e||!n||e===n||eo(e).some(i=>i&&(a?i===n:i.startsWith(n)||n.startsWith(i))),h2=(e,n,a,i,o)=>o.isOnAll?!1:!a&&o.isOnTouch?!(n||e):(a?i.isOnBlur:o.isOnBlur)?!e:(a?i.isOnChange:o.isOnChange)?e:!0,m2=(e,n)=>!um(Oe(e,n)).length&&on(e,n),p2=(e,n,a)=>{const i=eo(Oe(e,a));return Mt(i,"root",n[a]),Mt(e,a,i),e};function rb(e,n,a="validate"){if(ms(e)||Array.isArray(e)&&e.every(ms)||na(e)&&!e)return{type:a,message:ms(e)?e:"",ref:n}}var Oi=e=>cn(e)&&!lu(e)?e:{value:e,message:""},ib=async(e,n,a,i,o,u)=>{const{ref:d,refs:h,required:g,maxLength:x,minLength:b,min:v,max:w,pattern:C,validate:N,name:j,valueAsNumber:k,mount:T}=e._f,E=Oe(a,j);if(!T||n.has(j))return{};const B=h?h[0]:d,Q=L=>{o&&B.reportValidity&&(B.setCustomValidity(na(L)?"":L||""),B.reportValidity())},O={},I=mm(d),A=yo(d),V=I||A,W=(k||hm(d))&&en(d.value)&&en(E)||iu(d)&&d.value===""||E===""||Array.isArray(E)&&!E.length,X=fm.bind(null,j,i,O),J=(L,ae,de,be=Ca.maxLength,D=Ca.minLength)=>{const U=L?ae:de;O[j]={type:L?be:D,message:U,ref:d,...X(L?be:D,U)}};if(u?!Array.isArray(E)||!E.length:g&&(!V&&(W||Gn(E))||na(E)&&!E||A&&!Cy(h).isValid||I&&!Ey(h).isValid)){const{value:L,message:ae}=ms(g)?{value:!!g,message:g}:Oi(g);if(L&&(O[j]={type:Ca.required,message:ae,ref:B,...X(Ca.required,ae)},!i))return Q(ae),O}if(!W&&(!Gn(v)||!Gn(w))){let L,ae;const de=Oi(w),be=Oi(v);if(!Gn(E)&&!isNaN(E)){const D=d.valueAsNumber||E&&+E;Gn(de.value)||(L=D>de.value),Gn(be.value)||(ae=D<be.value)}else{const D=d.valueAsDate||new Date(E),U=se=>new Date(new Date().toDateString()+" "+se),ie=d.type=="time",me=d.type=="week";ms(de.value)&&E&&(L=ie?U(E)>U(de.value):me?E>de.value:D>new Date(de.value)),ms(be.value)&&E&&(ae=ie?U(E)<U(be.value):me?E<be.value:D<new Date(be.value))}if((L||ae)&&(J(!!L,de.message,be.message,Ca.max,Ca.min),!i))return Q(O[j].message),O}if((x||b)&&!W&&(ms(E)||u&&Array.isArray(E))){const L=Oi(x),ae=Oi(b),de=!Gn(L.value)&&E.length>+L.value,be=!Gn(ae.value)&&E.length<+ae.value;if((de||be)&&(J(de,L.message,ae.message),!i))return Q(O[j].message),O}if(C&&!W&&ms(E)){const{value:L,message:ae}=Oi(C);if(lu(L)&&!E.match(L)&&(O[j]={type:Ca.pattern,message:ae,ref:d,...X(Ca.pattern,ae)},!i))return Q(ae),O}if(N){if(qs(N)){const L=await N(E,a),ae=rb(L,B);if(ae&&(O[j]={...ae,...X(Ca.validate,ae.message)},!i))return Q(ae.message),O}else if(cn(N)){let L={};for(const ae in N){if(!Kn(L)&&!i)break;const de=rb(await N[ae](E,a),B,ae);de&&(L={...de,...X(ae,de.message)},Q(de.message),i&&(O[j]=L))}if(!Kn(L)&&(O[j]={ref:B,...L},!i))return O}}return Q(!0),O};const g2={mode:$s.onSubmit,reValidateMode:$s.onChange,shouldFocusError:!0};function x2(e={}){let n={...g2,...e},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:qs(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},o=cn(n.defaultValues)||cn(n.values)?yn(n.defaultValues||n.values)||{}:{},u=n.shouldUnregister?{}:yn(o),d={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,x=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...b};const w={array:G0(),state:G0()},C=n.criteriaMode===$s.all,N=M=>Y=>{clearTimeout(x),x=setTimeout(M,Y)},j=async M=>{if(!n.disabled&&(b.isValid||v.isValid||M)){const Y=n.resolver?Kn((await A()).errors):await W(i,!0);Y!==a.isValid&&w.state.next({isValid:Y})}},k=(M,Y)=>{!n.disabled&&(b.isValidating||b.validatingFields||v.isValidating||v.validatingFields)&&((M||Array.from(h.mount)).forEach(ce=>{ce&&(Y?Mt(a.validatingFields,ce,Y):on(a.validatingFields,ce))}),w.state.next({validatingFields:a.validatingFields,isValidating:!Kn(a.validatingFields)}))},T=(M,Y=[],ce,Ee,we=!0,Se=!0)=>{if(Ee&&ce&&!n.disabled){if(d.action=!0,Se&&Array.isArray(Oe(i,M))){const Re=ce(Oe(i,M),Ee.argA,Ee.argB);we&&Mt(i,M,Re)}if(Se&&Array.isArray(Oe(a.errors,M))){const Re=ce(Oe(a.errors,M),Ee.argA,Ee.argB);we&&Mt(a.errors,M,Re),m2(a.errors,M)}if((b.touchedFields||v.touchedFields)&&Se&&Array.isArray(Oe(a.touchedFields,M))){const Re=ce(Oe(a.touchedFields,M),Ee.argA,Ee.argB);we&&Mt(a.touchedFields,M,Re)}(b.dirtyFields||v.dirtyFields)&&(a.dirtyFields=$i(o,u)),w.state.next({name:M,isDirty:J(M,Y),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else Mt(u,M,Y)},E=(M,Y)=>{Mt(a.errors,M,Y),w.state.next({errors:a.errors})},B=M=>{a.errors=M,w.state.next({errors:a.errors,isValid:!1})},Q=(M,Y,ce,Ee)=>{const we=Oe(i,M);if(we){const Se=Oe(u,M,en(ce)?Oe(o,M):ce);en(Se)||Ee&&Ee.defaultChecked||Y?Mt(u,M,Y?Se:eb(we._f)):de(M,Se),d.mount&&j()}},O=(M,Y,ce,Ee,we)=>{let Se=!1,Re=!1;const Qe={name:M};if(!n.disabled){if(!ce||Ee){(b.isDirty||v.isDirty)&&(Re=a.isDirty,a.isDirty=Qe.isDirty=J(),Se=Re!==Qe.isDirty);const Pe=or(Oe(o,M),Y);Re=!!Oe(a.dirtyFields,M),Pe?on(a.dirtyFields,M):Mt(a.dirtyFields,M,!0),Qe.dirtyFields=a.dirtyFields,Se=Se||(b.dirtyFields||v.dirtyFields)&&Re!==!Pe}if(ce){const Pe=Oe(a.touchedFields,M);Pe||(Mt(a.touchedFields,M,ce),Qe.touchedFields=a.touchedFields,Se=Se||(b.touchedFields||v.touchedFields)&&Pe!==ce)}Se&&we&&w.state.next(Qe)}return Se?Qe:{}},I=(M,Y,ce,Ee)=>{const we=Oe(a.errors,M),Se=(b.isValid||v.isValid)&&na(Y)&&a.isValid!==Y;if(n.delayError&&ce?(g=N(()=>E(M,ce)),g(n.delayError)):(clearTimeout(x),g=null,ce?Mt(a.errors,M,ce):on(a.errors,M)),(ce?!or(we,ce):we)||!Kn(Ee)||Se){const Re={...Ee,...Se&&na(Y)?{isValid:Y}:{},errors:a.errors,name:M};a={...a,...Re},w.state.next(Re)}},A=async M=>{k(M,!0);const Y=await n.resolver(u,n.context,o2(M||h.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return k(M),Y},V=async M=>{const{errors:Y}=await A(M);if(M)for(const ce of M){const Ee=Oe(Y,ce);Ee?Mt(a.errors,ce,Ee):on(a.errors,ce)}else a.errors=Y;return Y},W=async(M,Y,ce={valid:!0})=>{for(const Ee in M){const we=M[Ee];if(we){const{_f:Se,...Re}=we;if(Se){const Qe=h.array.has(Se.name),Pe=we._f&&c2(we._f);Pe&&b.validatingFields&&k([Se.name],!0);const mt=await ib(we,h.disabled,u,C,n.shouldUseNativeValidation&&!Y,Qe);if(Pe&&b.validatingFields&&k([Se.name]),mt[Se.name]&&(ce.valid=!1,Y))break;!Y&&(Oe(mt,Se.name)?Qe?p2(a.errors,mt,Se.name):Mt(a.errors,Se.name,mt[Se.name]):on(a.errors,Se.name))}!Kn(Re)&&await W(Re,Y,ce)}}return ce.valid},X=()=>{for(const M of h.unMount){const Y=Oe(i,M);Y&&(Y._f.refs?Y._f.refs.every(ce=>!rh(ce)):!rh(Y._f.ref))&&K(M)}h.unMount=new Set},J=(M,Y)=>!n.disabled&&(M&&Y&&Mt(u,M,Y),!or(se(),o)),L=(M,Y,ce)=>s2(M,h,{...d.mount?u:en(Y)?o:ms(M)?{[M]:Y}:Y},ce,Y),ae=M=>um(Oe(d.mount?u:o,M,n.shouldUnregister?Oe(o,M,[]):[])),de=(M,Y,ce={})=>{const Ee=Oe(i,M);let we=Y;if(Ee){const Se=Ee._f;Se&&(!Se.disabled&&Mt(u,M,Ny(Y,Se)),we=iu(Se.ref)&&Gn(Y)?"":Y,jy(Se.ref)?[...Se.ref.options].forEach(Re=>Re.selected=we.includes(Re.value)):Se.refs?yo(Se.ref)?Se.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(we)?Re.checked=!!we.find(Qe=>Qe===Re.value):Re.checked=we===Re.value||!!we)}):Se.refs.forEach(Re=>Re.checked=Re.value===we):hm(Se.ref)?Se.ref.value="":(Se.ref.value=we,Se.ref.type||w.state.next({name:M,values:yn(u)})))}(ce.shouldDirty||ce.shouldTouch)&&O(M,we,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&me(M)},be=(M,Y,ce)=>{for(const Ee in Y){if(!Y.hasOwnProperty(Ee))return;const we=Y[Ee],Se=M+"."+Ee,Re=Oe(i,Se);(h.array.has(M)||cn(we)||Re&&!Re._f)&&!Vr(we)?be(Se,we,ce):de(Se,we,ce)}},D=(M,Y,ce={})=>{const Ee=Oe(i,M),we=h.array.has(M),Se=yn(Y);Mt(u,M,Se),we?(w.array.next({name:M,values:yn(u)}),(b.isDirty||b.dirtyFields||v.isDirty||v.dirtyFields)&&ce.shouldDirty&&w.state.next({name:M,dirtyFields:$i(o,u),isDirty:J(M,Se)})):Ee&&!Ee._f&&!Gn(Se)?be(M,Se,ce):de(M,Se,ce),sb(M,h)&&w.state.next({...a,name:M}),w.state.next({name:d.mount?M:void 0,values:yn(u)})},U=async M=>{d.mount=!0;const Y=M.target;let ce=Y.name,Ee=!0;const we=Oe(i,ce),Se=Pe=>{Ee=Number.isNaN(Pe)||Vr(Pe)&&isNaN(Pe.getTime())||or(Pe,Oe(u,ce,Pe))},Re=tb(n.mode),Qe=tb(n.reValidateMode);if(we){let Pe,mt;const Ne=Y.type?eb(we._f):G_(M),Ae=M.type===K0.BLUR||M.type===K0.FOCUS_OUT,Fe=!u2(we._f)&&!n.resolver&&!Oe(a.errors,ce)&&!we._f.deps||h2(Ae,Oe(a.touchedFields,ce),a.isSubmitted,Qe,Re),vt=sb(ce,h,Ae);Mt(u,ce,Ne),Ae?(!Y||!Y.readOnly)&&(we._f.onBlur&&we._f.onBlur(M),g&&g(0)):we._f.onChange&&we._f.onChange(M);const Xe=O(ce,Ne,Ae),At=!Kn(Xe)||vt;if(!Ae&&w.state.next({name:ce,type:M.type,values:yn(u)}),Fe)return(b.isValid||v.isValid)&&(n.mode==="onBlur"?Ae&&j():Ae||j()),At&&w.state.next({name:ce,...vt?{}:Xe});if(!Ae&&vt&&w.state.next({...a}),n.resolver){const{errors:Rt}=await A([ce]);if(Se(Ne),Ee){const Xn=ab(a.errors,i,ce),ue=ab(Rt,i,Xn.name||ce);Pe=ue.error,ce=ue.name,mt=Kn(Rt)}}else k([ce],!0),Pe=(await ib(we,h.disabled,u,C,n.shouldUseNativeValidation))[ce],k([ce]),Se(Ne),Ee&&(Pe?mt=!1:(b.isValid||v.isValid)&&(mt=await W(i,!0)));Ee&&(we._f.deps&&(!Array.isArray(we._f.deps)||we._f.deps.length>0)&&me(we._f.deps),I(ce,mt,Pe,Xe))}},ie=(M,Y)=>{if(Oe(a.errors,Y)&&M.focus)return M.focus(),1},me=async(M,Y={})=>{let ce,Ee;const we=eo(M);if(n.resolver){const Se=await V(en(M)?M:we);ce=Kn(Se),Ee=M?!we.some(Re=>Oe(Se,Re)):ce}else M?(Ee=(await Promise.all(we.map(async Se=>{const Re=Oe(i,Se);return await W(Re&&Re._f?{[Se]:Re}:Re)}))).every(Boolean),!(!Ee&&!a.isValid)&&j()):Ee=ce=await W(i);return w.state.next({...!ms(M)||(b.isValid||v.isValid)&&ce!==a.isValid?{}:{name:M},...n.resolver||!M?{isValid:ce}:{},errors:a.errors}),Y.shouldFocus&&!Ee&&to(i,ie,M?we:h.mount),Ee},se=(M,Y)=>{let ce={...d.mount?u:o};return Y&&(ce=wy(Y.dirtyFields?a.dirtyFields:a.touchedFields,ce)),en(M)?ce:ms(M)?Oe(ce,M):M.map(Ee=>Oe(ce,Ee))},_=(M,Y)=>({invalid:!!Oe((Y||a).errors,M),isDirty:!!Oe((Y||a).dirtyFields,M),error:Oe((Y||a).errors,M),isValidating:!!Oe(a.validatingFields,M),isTouched:!!Oe((Y||a).touchedFields,M)}),P=M=>{M&&eo(M).forEach(Y=>on(a.errors,Y)),w.state.next({errors:M?a.errors:{}})},le=(M,Y,ce)=>{const Ee=(Oe(i,M,{_f:{}})._f||{}).ref,we=Oe(a.errors,M)||{},{ref:Se,message:Re,type:Qe,...Pe}=we;Mt(a.errors,M,{...Pe,...Y,ref:Ee}),w.state.next({name:M,errors:a.errors,isValid:!1}),ce&&ce.shouldFocus&&Ee&&Ee.focus&&Ee.focus()},q=(M,Y)=>qs(M)?w.state.subscribe({next:ce=>"values"in ce&&M(L(void 0,Y),ce)}):L(M,Y,!0),ee=M=>w.state.subscribe({next:Y=>{f2(M.name,Y.name,M.exact)&&d2(Y,M.formState||b,We,M.reRenderRoot)&&M.callback({values:{...u},...a,...Y,defaultValues:o})}}).unsubscribe,H=M=>(d.mount=!0,v={...v,...M.formState},ee({...M,formState:v})),K=(M,Y={})=>{for(const ce of M?eo(M):h.mount)h.mount.delete(ce),h.array.delete(ce),Y.keepValue||(on(i,ce),on(u,ce)),!Y.keepError&&on(a.errors,ce),!Y.keepDirty&&on(a.dirtyFields,ce),!Y.keepTouched&&on(a.touchedFields,ce),!Y.keepIsValidating&&on(a.validatingFields,ce),!n.shouldUnregister&&!Y.keepDefaultValue&&on(o,ce);w.state.next({values:yn(u)}),w.state.next({...a,...Y.keepDirty?{isDirty:J()}:{}}),!Y.keepIsValid&&j()},R=({disabled:M,name:Y})=>{(na(M)&&d.mount||M||h.disabled.has(Y))&&(M?h.disabled.add(Y):h.disabled.delete(Y))},Z=(M,Y={})=>{let ce=Oe(i,M);const Ee=na(Y.disabled)||na(n.disabled);return Mt(i,M,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:M}},name:M,mount:!0,...Y}}),h.mount.add(M),ce?R({disabled:na(Y.disabled)?Y.disabled:n.disabled,name:M}):Q(M,!0,Y.value),{...Ee?{disabled:Y.disabled||n.disabled}:{},...n.progressive?{required:!!Y.required,min:Yl(Y.min),max:Yl(Y.max),minLength:Yl(Y.minLength),maxLength:Yl(Y.maxLength),pattern:Yl(Y.pattern)}:{},name:M,onChange:U,onBlur:U,ref:we=>{if(we){Z(M,Y),ce=Oe(i,M);const Se=en(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Re=a2(Se),Qe=ce._f.refs||[];if(Re?Qe.find(Pe=>Pe===Se):Se===ce._f.ref)return;Mt(i,M,{_f:{...ce._f,...Re?{refs:[...Qe.filter(rh),Se,...Array.isArray(Oe(o,M))?[{}]:[]],ref:{type:Se.type,name:M}}:{ref:Se}}}),Q(M,!1,void 0,Se)}else ce=Oe(i,M,{}),ce._f&&(ce._f.mount=!1),(n.shouldUnregister||Y.shouldUnregister)&&!(X_(h.array,M)&&d.action)&&h.unMount.add(M)}}},ge=()=>n.shouldFocusError&&to(i,ie,h.mount),De=M=>{na(M)&&(w.state.next({disabled:M}),to(i,(Y,ce)=>{const Ee=Oe(i,ce);Ee&&(Y.disabled=Ee._f.disabled||M,Array.isArray(Ee._f.refs)&&Ee._f.refs.forEach(we=>{we.disabled=Ee._f.disabled||M}))},0,!1))},Ze=(M,Y)=>async ce=>{let Ee;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let we=yn(u);if(w.state.next({isSubmitting:!0}),n.resolver){const{errors:Se,values:Re}=await A();a.errors=Se,we=yn(Re)}else await W(i);if(h.disabled.size)for(const Se of h.disabled)on(we,Se);if(on(a.errors,"root"),Kn(a.errors)){w.state.next({errors:{}});try{await M(we,ce)}catch(Se){Ee=Se}}else Y&&await Y({...a.errors},ce),ge(),setTimeout(ge);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kn(a.errors)&&!Ee,submitCount:a.submitCount+1,errors:a.errors}),Ee)throw Ee},st=(M,Y={})=>{Oe(i,M)&&(en(Y.defaultValue)?D(M,yn(Oe(o,M))):(D(M,Y.defaultValue),Mt(o,M,yn(Y.defaultValue))),Y.keepTouched||on(a.touchedFields,M),Y.keepDirty||(on(a.dirtyFields,M),a.isDirty=Y.defaultValue?J(M,yn(Oe(o,M))):J()),Y.keepError||(on(a.errors,M),b.isValid&&j()),w.state.next({...a}))},ye=(M,Y={})=>{const ce=M?yn(M):o,Ee=yn(ce),we=Kn(M),Se=we?o:Ee;if(Y.keepDefaultValues||(o=ce),!Y.keepValues){if(Y.keepDirtyValues){const Re=new Set([...h.mount,...Object.keys($i(o,u))]);for(const Qe of Array.from(Re))Oe(a.dirtyFields,Qe)?Mt(Se,Qe,Oe(u,Qe)):D(Qe,Oe(Se,Qe))}else{if(cm&&en(M))for(const Re of h.mount){const Qe=Oe(i,Re);if(Qe&&Qe._f){const Pe=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(iu(Pe)){const mt=Pe.closest("form");if(mt){mt.reset();break}}}}if(Y.keepFieldsRef)for(const Re of h.mount)D(Re,Oe(Se,Re));else i={}}u=n.shouldUnregister?Y.keepDefaultValues?yn(o):{}:yn(Se),w.array.next({values:{...Se}}),w.state.next({values:{...Se}})}h={mount:Y.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!b.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,d.watch=!!n.shouldUnregister,w.state.next({submitCount:Y.keepSubmitCount?a.submitCount:0,isDirty:we?!1:Y.keepDirty?a.isDirty:!!(Y.keepDefaultValues&&!or(M,o)),isSubmitted:Y.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:we?{}:Y.keepDirtyValues?Y.keepDefaultValues&&u?$i(o,u):a.dirtyFields:Y.keepDefaultValues&&M?$i(o,M):Y.keepDirty?a.dirtyFields:{},touchedFields:Y.keepTouched?a.touchedFields:{},errors:Y.keepErrors?a.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Ce=(M,Y)=>ye(qs(M)?M(u):M,Y),$e=(M,Y={})=>{const ce=Oe(i,M),Ee=ce&&ce._f;if(Ee){const we=Ee.refs?Ee.refs[0]:Ee.ref;we.focus&&(we.focus(),Y.shouldSelect&&qs(we.select)&&we.select())}},We=M=>{a={...a,...M}},Ot={control:{register:Z,unregister:K,getFieldState:_,handleSubmit:Ze,setError:le,_subscribe:ee,_runSchema:A,_focusError:ge,_getWatch:L,_getDirty:J,_setValid:j,_setFieldArray:T,_setDisabledField:R,_setErrors:B,_getFieldArray:ae,_reset:ye,_resetDefaultValues:()=>qs(n.defaultValues)&&n.defaultValues().then(M=>{Ce(M,n.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:X,_disableForm:De,_subjects:w,_proxyFormState:b,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(M){d=M},get _defaultValues(){return o},get _names(){return h},set _names(M){h=M},get _formState(){return a},get _options(){return n},set _options(M){n={...n,...M}}},subscribe:H,trigger:me,register:Z,handleSubmit:Ze,watch:q,setValue:D,getValues:se,reset:Ce,resetField:st,clearErrors:P,unregister:K,setError:le,setFocus:$e,getFieldState:_};return{...Ot,formControl:Ot}}function ky(e={}){const n=_t.useRef(void 0),a=_t.useRef(void 0),[i,o]=_t.useState({isDirty:!1,isValidating:!1,isLoading:qs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:qs(e.defaultValues)?void 0:e.defaultValues});if(!n.current)if(e.formControl)n.current={...e.formControl,formState:i},e.defaultValues&&!qs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...h}=x2(e);n.current={...h,formState:i}}const u=n.current.control;return u._options=e,n2(()=>{const d=u._subscribe({formState:u._proxyFormState,callback:()=>o({...u._formState}),reRenderRoot:!0});return o(h=>({...h,isReady:!0})),u._formState.isReady=!0,d},[u]),_t.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),_t.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),_t.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),_t.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),_t.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),_t.useEffect(()=>{e.values&&!or(e.values,a.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),a.current=e.values,o(d=>({...d}))):u._resetDefaultValues()},[u,e.values]),_t.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),n.current.formState=t2(i,u),n.current}const lb=(e,n,a)=>{if(e&&"reportValidity"in e){const i=Oe(a,n);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Mh=(e,n)=>{for(const a in n.fields){const i=n.fields[a];i&&i.ref&&"reportValidity"in i.ref?lb(i.ref,a,e):i&&i.refs&&i.refs.forEach(o=>lb(o,a,e))}},ob=(e,n)=>{n.shouldUseNativeValidation&&Mh(e,n);const a={};for(const i in e){const o=Oe(n.fields,i),u=Object.assign(e[i]||{},{ref:o&&o.ref});if(b2(n.names||Object.keys(e),i)){const d=Object.assign({},Oe(a,i));Mt(d,"root",u),Mt(a,i,d)}else Mt(a,i,u)}return a},b2=(e,n)=>{const a=cb(n);return e.some(i=>cb(i).match(`^${a}\\.\\d+`))};function cb(e){return e.replace(/\]|\[/g,"")}function ub(e,n){try{var a=e()}catch(i){return n(i)}return a&&a.then?a.then(void 0,n):a}function v2(e,n){for(var a={};e.length;){var i=e[0],o=i.code,u=i.message,d=i.path.join(".");if(!a[d])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];a[d]={message:h.message,type:h.code}}else a[d]={message:u,type:o};if("unionErrors"in i&&i.unionErrors.forEach(function(b){return b.errors.forEach(function(v){return e.push(v)})}),n){var g=a[d].types,x=g&&g[i.code];a[d]=fm(d,n,a,o,x?[].concat(x,i.message):i.message)}e.shift()}return a}function y2(e,n){for(var a={};e.length;){var i=e[0],o=i.code,u=i.message,d=i.path.join(".");if(!a[d])if(i.code==="invalid_union"&&i.errors.length>0){var h=i.errors[0][0];a[d]={message:h.message,type:h.code}}else a[d]={message:u,type:o};if(i.code==="invalid_union"&&i.errors.forEach(function(b){return b.forEach(function(v){return e.push(v)})}),n){var g=a[d].types,x=g&&g[i.code];a[d]=fm(d,n,a,o,x?[].concat(x,i.message):i.message)}e.shift()}return a}function _y(e,n,a){if(a===void 0&&(a={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,o,u){try{return Promise.resolve(ub(function(){return Promise.resolve(e[a.mode==="sync"?"parse":"parseAsync"](i,n)).then(function(d){return u.shouldUseNativeValidation&&Mh({},u),{errors:{},values:a.raw?Object.assign({},i):d}})},function(d){if((function(h){return Array.isArray(h?.issues)})(d))return{values:{},errors:ob(v2(d.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,o,u){try{return Promise.resolve(ub(function(){return Promise.resolve((a.mode==="sync"?UC:BC)(e,i,n)).then(function(d){return u.shouldUseNativeValidation&&Mh({},u),{errors:{},values:a.raw?Object.assign({},i):d}})},function(d){if((function(h){return h instanceof lm})(d))return{values:{},errors:ob(y2(d.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};throw new Error("Invalid input: not a Zod schema")}async function w2(e={}){const{page:n,pageSize:a,search:i,includeTotal:o,signal:u}=e,d={};typeof n=="number"&&n>0&&(d.page=n),typeof a=="number"&&a>0&&(d.page_size=a),o&&(d.include_total=!0);const h=i?.trim();h&&(d.q=h);const{data:g}=await He.GET("/api/v1/users",{params:{query:d},signal:u});if(!g)throw new Error("Expected user page payload.");return g}function Ay(e={}){const{enabled:n=!0,search:a="",pageSize:i}=e,o=a.trim(),u=o.length>=2?o:"",d=Kh({queryKey:["users","all",{search:o,pageSize:i}],initialPageParam:1,queryFn:({pageParam:x,signal:b})=>w2(j2({page:typeof x=="number"?x:1,pageSize:i,search:u||void 0,signal:b})),getNextPageParam:x=>x.has_next?x.page+1:void 0,enabled:n,staleTime:6e4}),h=p.useCallback(x=>x.id,[]),g=em(d.data?.pages,h);return{...d,users:g}}function j2(e){const n=!e.page||e.page<1?1:e.page;return{...e,page:n}}const S2=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,C2=Nu({name:Fs().min(1,"Workspace name is required.").max(100,"Keep the name under 100 characters."),slug:Fs().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(S2,"Use lowercase letters, numbers, and dashes."),ownerUserId:Fs().optional()});function N2(){return l.jsx(gu,{children:l.jsx(E2,{})})}function E2(){const e=Ft(),n=Wi(),a=fC(),o=p.useMemo(()=>(n.user.permissions??[]).map(V=>V.toLowerCase()),[n.user.permissions]).includes("users.read_all"),u=Ay({enabled:o,pageSize:50}),d=p.useMemo(()=>u.users,[u.users]),h=p.useMemo(()=>n.user.id?d.filter(V=>V.id!==n.user.id):d,[d,n.user.id]),{register:g,handleSubmit:x,watch:b,setValue:v,setError:w,clearErrors:C,formState:{errors:N,dirtyFields:j}}=ky({resolver:_y(C2),defaultValues:{name:"",slug:"",ownerUserId:n.user.id??""}}),k=b("name"),T=b("slug");p.useEffect(()=>{if(j.slug)return;const V=k2(k);V!==T&&v("slug",V,{shouldValidate:!!V})},[j.slug,k,v,T]),p.useEffect(()=>{!o&&n.user.id&&v("ownerUserId",n.user.id,{shouldDirty:!1})},[o,n.user.id,v]);const E=a.isPending,B=u.isPending&&u.users.length===0,Q=E||B||!o,O=n.user.display_name?`${n.user.display_name} (you)`:`${n.user.email??"Current user"} (you)`,I=g("ownerUserId"),A=x(V=>{if(C("root"),o&&!V.ownerUserId){w("ownerUserId",{type:"manual",message:"Select a workspace owner."});return}a.mutate({name:V.name.trim(),slug:V.slug.trim(),owner_user_id:o&&V.ownerUserId||void 0},{onSuccess(W){e(nm(W.id))},onError(W){if(W instanceof $n){const X=W.problem?.detail??W.message,J=W.problem?.errors??{};w("root",{type:"server",message:X}),J.name?.[0]&&w("name",{type:"server",message:J.name[0]}),J.slug?.[0]&&w("slug",{type:"server",message:J.slug[0]}),J.owner_user_id?.[0]&&w("ownerUserId",{type:"server",message:J.owner_user_id[0]});return}w("root",{type:"server",message:W instanceof Error?W.message:"Workspace creation failed."})}})});return l.jsx(by,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Create a workspace"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Name the workspace and choose who should own it. You can adjust settings and permissions after the workspace is created."})]}),l.jsxs("form",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",onSubmit:A,children:[l.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[l.jsx(bt,{label:"Workspace name",required:!0,error:N.name?.message,children:l.jsx(ht,{id:"workspaceName",placeholder:"Finance Operations",...g("name"),invalid:!!N.name,disabled:E})}),l.jsx(bt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier",required:!0,error:N.slug?.message,children:l.jsx(ht,{id:"workspaceSlug",placeholder:"finance-ops",...g("slug"),invalid:!!N.slug,disabled:E})})]}),o?l.jsxs(bt,{label:"Workspace owner",hint:"Owner receives workspace-level permissions immediately.",error:N.ownerUserId?.message,children:[l.jsxs("select",{id:"workspaceOwner",...I,onChange:V=>{I.onChange(V),C("ownerUserId")},disabled:Q,className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",children:[l.jsx("option",{value:n.user.id??"",children:O}),h.map(V=>l.jsx("option",{value:V.id,children:V.display_name?`${V.display_name} (${V.email})`:V.email},V.id))]}),u.hasNextPage?l.jsx("div",{className:"pt-2",children:l.jsx(ke,{type:"button",variant:"ghost",onClick:()=>u.fetchNextPage(),disabled:u.isFetchingNextPage,children:u.isFetchingNextPage?"Loading more users":"Load more users"})}):null]}):null,N.root?l.jsx(lt,{tone:"danger",children:N.root.message}):null,o&&u.isError?l.jsx(lt,{tone:"warning",children:"Unable to load the user list. Continue with yourself as the workspace owner or try again later."}):null,l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[l.jsx(ke,{type:"button",variant:"secondary",onClick:()=>e("/workspaces"),disabled:E,children:"Cancel"}),l.jsx(ke,{type:"submit",isLoading:E,children:E?"Creating workspace":"Create workspace"})]})]})]})})}function k2(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}const Dy=p.createContext(void 0);function _2({workspace:e,workspaces:n,children:a}){const i=p.useMemo(()=>{const o=e.permissions;return{workspace:e,workspaces:n,permissions:o,hasPermission(u){const d=u.toLowerCase();return o.includes(u)||o.includes(d)}}},[e,n]);return l.jsx(Dy.Provider,{value:i,children:a})}function Na(){const e=p.useContext(Dy);if(!e)throw new Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}const A2=[{id:"explorer",label:"Explorer",icon:l.jsx(T2,{})},{id:"search",label:"Search",icon:l.jsx(M2,{})},{id:"scm",label:"Source Control",icon:l.jsx(R2,{})},{id:"extensions",label:"Extensions",icon:l.jsx(z2,{})}];function D2({activeView:e,onSelectView:n,onOpenSettings:a,appearance:i}){const o=i==="dark"?{bg:"bg-[#1b1b1f]",border:"border-[#111111]",iconIdle:"text-slate-400",iconActive:"text-[#4fc1ff]",hover:"hover:text-white hover:bg-white/5 focus-visible:text-white",indicator:"bg-[#4fc1ff]"}:{bg:"bg-[#f3f3f3]",border:"border-[#d0d0d0]",iconIdle:"text-slate-500",iconActive:"text-[#005fb8]",hover:"hover:text-[#0f172a] hover:bg-black/5 focus-visible:text-[#0f172a]",indicator:"bg-[#005fb8]"};return l.jsxs("aside",{className:pe("flex h-full w-14 flex-col items-center justify-between border-r",o.bg,o.border,o.iconIdle),"aria-label":"Workbench navigation",children:[l.jsx("div",{className:"flex flex-col items-center gap-1 py-3",children:A2.map(u=>{const d=e===u.id;return l.jsxs("button",{type:"button",onClick:()=>n(u.id),className:pe("relative flex h-10 w-10 items-center justify-center rounded-lg text-base transition",d?o.iconActive:pe(o.iconIdle,o.hover)),"aria-label":u.label,"aria-pressed":d,children:[d?l.jsx("span",{className:pe("absolute left-0 top-1/2 h-6 w-1 -translate-y-1/2 rounded",o.indicator)}):null,u.icon]},u.id)})}),l.jsx("div",{className:"flex flex-col items-center gap-3 pb-3",children:l.jsx("button",{type:"button",onClick:a,className:pe("flex h-10 w-10 items-center justify-center rounded-lg text-base transition",o.iconIdle,o.hover),"aria-label":"Open settings",children:l.jsx(O2,{})})})]})}function T2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"4",y:"4",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"}),l.jsx("path",{d:"M4 8.25h12",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M8.25 4v12",stroke:"currentColor",strokeWidth:"1.2"})]})}function M2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"9",cy:"9",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M12.7 12.7l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function R2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6.5 4a1.75 1.75 0 1 1-1.5 0v12m9-8a1.75 1.75 0 1 1-1.5 0v8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),l.jsx("path",{d:"M5 9.5h10",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function z2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6 4.5h4l4 4v6.5a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.3"}),l.jsx("path",{d:"M10 4.5v4h4",stroke:"currentColor",strokeWidth:"1.3"})]})}function O2(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M10 6.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M3 10h2m10 0h2M10 3v2m0 10v2M5.2 5.2l1.4 1.4m7 7 1.4 1.4M14.8 5.2l-1.4 1.4m-7 7-1.4 1.4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}const pm=p.createContext(null);function Ty({value:e,onValueChange:n,children:a}){const i=p.useId(),o=p.useRef([]),u=p.useRef(new Map),d=p.useCallback((v,w)=>{o.current.includes(v)||o.current.push(v),u.current.set(v,w)},[]),h=p.useCallback(v=>{o.current=o.current.filter(w=>w!==v),u.current.delete(v)},[]),g=p.useCallback(v=>{v&&u.current.get(v)?.focus()},[]),x=p.useCallback(()=>o.current.slice(),[]),b=p.useMemo(()=>({value:e,setValue:n,baseId:i,registerValue:d,unregisterValue:h,focusValue:g,getValues:x}),[e,n,i,d,h,g,x]);return l.jsx(pm.Provider,{value:b,children:a})}function My({children:e,...n}){return l.jsx("div",{role:"tablist",...n,children:e})}function Rh({value:e,children:n,className:a,onClick:i,onKeyDown:o,disabled:u,...d}){const h=p.useContext(pm);if(!h)throw new Error("TabsTrigger must be used within a TabsRoot");const{registerValue:g,unregisterValue:x,focusValue:b,getValues:v}=h,w=h.value===e,C=`${h.baseId}-tab-${e}`,N=`${h.baseId}-panel-${e}`,j=p.useCallback(T=>{g(e,T)},[g,e]);p.useLayoutEffect(()=>()=>x(e),[x,e]);const k=T=>{if(o?.(T),T.defaultPrevented)return;const E=v(),B=E.indexOf(e);if(B===-1||E.length===0)return;let Q=B;T.key==="ArrowRight"?(T.preventDefault(),Q=(B+1)%E.length):T.key==="ArrowLeft"?(T.preventDefault(),Q=(B-1+E.length)%E.length):T.key==="Home"?(T.preventDefault(),Q=0):T.key==="End"&&(T.preventDefault(),Q=E.length-1);const O=E[Q];O&&O!==h.value&&h.setValue(O),b(O)};return l.jsx("button",{...d,ref:j,type:"button",role:"tab",id:C,"aria-selected":w,"aria-controls":N,tabIndex:w?0:-1,className:a,disabled:u,onKeyDown:k,onClick:T=>{i?.(T),!T.defaultPrevented&&!u&&h.setValue(e)},children:n})}function zh({value:e,children:n,className:a,...i}){const o=p.useContext(pm);if(!o)throw new Error("TabsContent must be used within a TabsRoot");const u=o.value===e,d=`${o.baseId}-panel-${e}`,h=`${o.baseId}-tab-${e}`;return l.jsx("div",{...i,role:"tabpanel",id:d,"aria-labelledby":h,className:a,hidden:!u,tabIndex:0,children:n})}function Li(e,n,a){let i=a.initialDeps??[],o,u=!0;function d(){var h,g,x;let b;a.key&&((h=a.debug)!=null&&h.call(a))&&(b=Date.now());const v=e();if(!(v.length!==i.length||v.some((N,j)=>i[j]!==N)))return o;i=v;let C;if(a.key&&((g=a.debug)!=null&&g.call(a))&&(C=Date.now()),o=n(...v),a.key&&((x=a.debug)!=null&&x.call(a))){const N=Math.round((Date.now()-b)*100)/100,j=Math.round((Date.now()-C)*100)/100,k=j/16,T=(E,B)=>{for(E=String(E);E.length<B;)E=" "+E;return E};console.info(`%c ${T(j,5)} /${T(N,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*k,120))}deg 100% 31%);`,a?.key)}return a?.onChange&&!(u&&a.skipInitialOnChange)&&a.onChange(o),u=!1,o}return d.updateDeps=h=>{i=h},d}function db(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const L2=(e,n)=>Math.abs(e-n)<1.01,U2=(e,n,a)=>{let i;return function(...o){e.clearTimeout(i),i=e.setTimeout(()=>n.apply(this,o),a)}},fb=e=>{const{offsetWidth:n,offsetHeight:a}=e;return{width:n,height:a}},B2=e=>e,$2=e=>{const n=Math.max(e.startIndex-e.overscan,0),a=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let o=n;o<=a;o++)i.push(o);return i},q2=(e,n)=>{const a=e.scrollElement;if(!a)return;const i=e.targetWindow;if(!i)return;const o=d=>{const{width:h,height:g}=d;n({width:Math.round(h),height:Math.round(g)})};if(o(fb(a)),!i.ResizeObserver)return()=>{};const u=new i.ResizeObserver(d=>{const h=()=>{const g=d[0];if(g?.borderBoxSize){const x=g.borderBoxSize[0];if(x){o({width:x.inlineSize,height:x.blockSize});return}}o(fb(a))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(h):h()});return u.observe(a,{box:"border-box"}),()=>{u.unobserve(a)}},hb={passive:!0},mb=typeof window>"u"?!0:"onscrollend"in window,F2=(e,n)=>{const a=e.scrollElement;if(!a)return;const i=e.targetWindow;if(!i)return;let o=0;const u=e.options.useScrollendEvent&&mb?()=>{}:U2(i,()=>{n(o,!1)},e.options.isScrollingResetDelay),d=b=>()=>{const{horizontal:v,isRtl:w}=e.options;o=v?a.scrollLeft*(w&&-1||1):a.scrollTop,u(),n(o,b)},h=d(!0),g=d(!1);g(),a.addEventListener("scroll",h,hb);const x=e.options.useScrollendEvent&&mb;return x&&a.addEventListener("scrollend",g,hb),()=>{a.removeEventListener("scroll",h),x&&a.removeEventListener("scrollend",g)}},H2=(e,n,a)=>{if(n?.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[a.options.horizontal?"inlineSize":"blockSize"])}return e[a.options.horizontal?"offsetWidth":"offsetHeight"]},Z2=(e,{adjustments:n=0,behavior:a},i)=>{var o,u;const d=e+n;(u=(o=i.scrollElement)==null?void 0:o.scrollTo)==null||u.call(o,{[i.options.horizontal?"left":"top"]:d,behavior:a})};class V2{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let a=null;const i=()=>a||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:a=new this.targetWindow.ResizeObserver(o=>{o.forEach(u=>{const d=()=>{this._measureElement(u.target,u)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()})}));return{disconnect:()=>{var o;(o=i())==null||o.disconnect(),a=null},observe:o=>{var u;return(u=i())==null?void 0:u.observe(o,{box:"border-box"})},unobserve:o=>{var u;return(u=i())==null?void 0:u.unobserve(o)}}})(),this.range=null,this.setOptions=a=>{Object.entries(a).forEach(([i,o])=>{typeof o>"u"&&delete a[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:B2,rangeExtractor:$2,onChange:()=>{},measureElement:H2,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...a}},this.notify=a=>{var i,o;(o=(i=this.options).onChange)==null||o.call(i,this,a)},this.maybeNotify=Li(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),a=>{this.notify(a)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(a=>a()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var a;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((a=this.scrollElement)==null?void 0:a.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,u)=>{this.scrollAdjustments=0,this.scrollDirection=u?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=u,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(a,i)=>{const o=new Map,u=new Map;for(let d=i-1;d>=0;d--){const h=a[d];if(o.has(h.lane))continue;const g=u.get(h.lane);if(g==null||h.end>g.end?u.set(h.lane,h):h.end<g.end&&o.set(h.lane,!0),o.size===this.options.lanes)break}return u.size===this.options.lanes?Array.from(u.values()).sort((d,h)=>d.end===h.end?d.index-h.index:d.end-h.end)[0]:void 0},this.getMeasurementOptions=Li(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(a,i,o,u,d,h)=>(this.prevLanes!==void 0&&this.prevLanes!==h&&(this.lanesChangedFlag=!0),this.prevLanes=h,this.pendingMeasuredCacheIndexes=[],{count:a,paddingStart:i,scrollMargin:o,getItemKey:u,enabled:d,lanes:h}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Li(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:a,paddingStart:i,scrollMargin:o,getItemKey:u,enabled:d,lanes:h},g)=>{if(!d)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>a)for(const w of this.laneAssignments.keys())w>=a&&this.laneAssignments.delete(w);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(w=>{this.itemSizeCache.set(w.key,w.size)}));const x=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===a&&(this.lanesSettling=!1);const b=this.measurementsCache.slice(0,x),v=new Array(h).fill(void 0);for(let w=0;w<x;w++){const C=b[w];C&&(v[C.lane]=w)}for(let w=x;w<a;w++){const C=u(w),N=this.laneAssignments.get(w);let j,k;if(N!==void 0&&this.options.lanes>1){j=N;const Q=v[j],O=Q!==void 0?b[Q]:void 0;k=O?O.end+this.options.gap:i+o}else{const Q=this.options.lanes===1?b[w-1]:this.getFurthestMeasurement(b,w);k=Q?Q.end+this.options.gap:i+o,j=Q?Q.lane:w%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(w,j)}const T=g.get(C),E=typeof T=="number"?T:this.options.estimateSize(w),B=k+E;b[w]={index:w,start:k,size:E,end:B,key:C,lane:j},v[j]=w}return this.measurementsCache=b,b},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Li(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(a,i,o,u)=>this.range=a.length>0&&i>0?I2({measurements:a,outerSize:i,scrollOffset:o,lanes:u}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Li(()=>{let a=null,i=null;const o=this.calculateRange();return o&&(a=o.startIndex,i=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,a,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,a,i]},(a,i,o,u,d)=>u===null||d===null?[]:a({startIndex:u,endIndex:d,overscan:i,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=a=>{const i=this.options.indexAttribute,o=a.getAttribute(i);return o?parseInt(o,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(a,i)=>{const o=this.indexFromElement(a),u=this.measurementsCache[o];if(!u)return;const d=u.key,h=this.elementsCache.get(d);h!==a&&(h&&this.observer.unobserve(h),this.observer.observe(a),this.elementsCache.set(d,a)),a.isConnected&&this.resizeItem(o,this.options.measureElement(a,i,this))},this.resizeItem=(a,i)=>{const o=this.measurementsCache[a];if(!o)return;const u=this.itemSizeCache.get(o.key)??o.size,d=i-u;d!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,d,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=d,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,i)),this.notify(!1))},this.measureElement=a=>{if(!a){this.elementsCache.forEach((i,o)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(o))});return}this._measureElement(a,void 0)},this.getVirtualItems=Li(()=>[this.getVirtualIndexes(),this.getMeasurements()],(a,i)=>{const o=[];for(let u=0,d=a.length;u<d;u++){const h=a[u],g=i[h];o.push(g)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=a=>{const i=this.getMeasurements();if(i.length!==0)return db(i[Ry(0,i.length-1,o=>db(i[o]).start,a)])},this.getOffsetForAlignment=(a,i,o=0)=>{const u=this.getSize(),d=this.getScrollOffset();i==="auto"&&(i=a>=d+u?"end":"start"),i==="center"?a+=(o-u)/2:i==="end"&&(a-=u);const h=this.getTotalSize()+this.options.scrollMargin-u;return Math.max(Math.min(h,a),0)},this.getOffsetForIndex=(a,i="auto")=>{a=Math.max(0,Math.min(a,this.options.count-1));const o=this.measurementsCache[a];if(!o)return;const u=this.getSize(),d=this.getScrollOffset();if(i==="auto")if(o.end>=d+u-this.options.scrollPaddingEnd)i="end";else if(o.start<=d+this.options.scrollPaddingStart)i="start";else return[d,i];const h=i==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(h,i,o.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(a,{align:i="start",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(a,i),{adjustments:void 0,behavior:o})},this.scrollToIndex=(a,{align:i="auto",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),a=Math.max(0,Math.min(a,this.options.count-1));let u=0;const d=10,h=x=>{if(!this.targetWindow)return;const b=this.getOffsetForIndex(a,x);if(!b){console.warn("Failed to get offset for index:",a);return}const[v,w]=b;this._scrollToOffset(v,{adjustments:void 0,behavior:o}),this.targetWindow.requestAnimationFrame(()=>{const C=this.getScrollOffset(),N=this.getOffsetForIndex(a,w);if(!N){console.warn("Failed to get offset for index:",a);return}L2(N[0],C)||g(w)})},g=x=>{this.targetWindow&&(u++,u<d?this.targetWindow.requestAnimationFrame(()=>h(x)):console.warn(`Failed to scroll to index ${a} after ${d} attempts.`))};h(i)},this.scrollBy=(a,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+a,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var a;const i=this.getMeasurements();let o;if(i.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((a=i[i.length-1])==null?void 0:a.end)??0;else{const u=Array(this.options.lanes).fill(null);let d=i.length-1;for(;d>=0&&u.some(h=>h===null);){const h=i[d];u[h.lane]===null&&(u[h.lane]=h.end),d--}o=Math.max(...u.filter(h=>h!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(a,{adjustments:i,behavior:o})=>{this.options.scrollToFn(a,{behavior:o,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const Ry=(e,n,a,i)=>{for(;e<=n;){const o=(e+n)/2|0,u=a(o);if(u<i)e=o+1;else if(u>i)n=o-1;else return o}return e>0?e-1:0};function I2({measurements:e,outerSize:n,scrollOffset:a,lanes:i}){const o=e.length-1,u=g=>e[g].start;if(e.length<=i)return{startIndex:0,endIndex:o};let d=Ry(0,o,u,a),h=d;if(i===1)for(;h<o&&e[h].end<a+n;)h++;else if(i>1){const g=Array(i).fill(0);for(;h<o&&g.some(b=>b<a+n);){const b=e[h];g[b.lane]=b.end,h++}const x=Array(i).fill(a+n);for(;d>=0&&x.some(b=>b>=a);){const b=e[d];x[b.lane]=b.start,d--}d=Math.max(0,d-d%i),h=Math.min(o,h+(i-1-h%i))}return{startIndex:d,endIndex:h}}const pb=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Q2(e){const n=p.useReducer(()=>({}),{})[1],a={...e,onChange:(o,u)=>{var d;u?ps.flushSync(n):n(),(d=e.onChange)==null||d.call(e,o,u)}},[i]=p.useState(()=>new V2(a));return i.setOptions(a),pb(()=>i._didMount(),[]),pb(()=>i._willUpdate()),i}function P2(e){return Q2({observeElementRect:q2,observeElementOffset:F2,scrollToFn:Z2,...e})}function gb(e){return e==="debug"?0:e==="error"?3:e==="warning"?2:e==="success"||e==="info"?1:0}function W2(e){const n=e.raw;if(n&&typeof n=="object"){const a=X2(n);if(a)return a}return Y2(e.message)}function zy(e){const n=e.raw;if(!n||typeof n!="object")return null;try{return JSON.stringify(n)}catch{return null}}function K2(e){if(e==null)return l.jsx("span",{className:"text-slate-500",children:"null"});let n;try{n=JSON.stringify(e,null,2)}catch{n=String(e)}return l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-relaxed text-[#d4d4d4]",children:Oy(n)})}function G2(e){try{const n=JSON.parse(e);if(n&&typeof n=="object")return n}catch{return null}return null}function Y2(e){if(e.includes(`
`)){const i=e.split(/\r?\n/),[o,...u]=i;return l.jsxs("div",{className:"flex flex-col gap-[2px]",children:[l.jsx("span",{className:"break-words",children:o||" "}),u.length>0?l.jsx("pre",{className:"whitespace-pre-wrap break-words border-l border-[#2f2f2f] pl-3 text-[12px] leading-snug text-[#9da5b4]",children:u.join(`
`)}):null]})}const n=G2(e);if(!n)return e;const a=JSON.stringify(n,null,2);return l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-[#d4d4d4]",children:Oy(a)})}function Oy(e){const n=/("(?:\\.|[^"])*"(?=:)|"(?:\\.|[^"])*")|(-?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b)|\b(true|false|null)\b/g,a=[];let i=0,o,u=0;for(;(o=n.exec(e))!==null;){o.index>i&&a.push(e.slice(i,o.index));const d=o[0],h=o[1]?"text-sky-300":o[2]?"text-amber-300":"text-rose-300";a.push(l.jsx("span",{className:h,children:d},`json-${u++}`)),i=n.lastIndex}return i<e.length&&a.push(e.slice(i)),a}function X2(e){const n=typeof e.event=="string"?e.event:typeof e.type=="string"?e.type:"";if(!n)return null;const a=typeof e.level=="string"?e.level.toLowerCase():"",i=typeof e.message=="string"?e.message:"",o=e.data&&typeof e.data=="object"?e.data:{};if(n==="console.line"){const u=typeof o.message=="string"?o.message:i;return l.jsx("span",{className:"break-words",children:u||" "})}if(n==="engine.log"){const u=n5(i);return l.jsx("span",{className:"break-words",children:u.text||" "})}if(n.startsWith("build.")||n.startsWith("run.")){const u=typeof o.status=="string"?o.status:void 0,d=typeof o.reason=="string"?o.reason:void 0,h=typeof o.phase=="string"?o.phase:void 0,g=typeof o.message=="string"?o.message:void 0,x=b=>{if(!b||b<0)return"";if(b<1e3)return`${Math.round(b)} ms`;if(b<6e4)return`${(b/1e3).toFixed(1)} s`;const v=Math.floor(b/6e4),w=Math.round(b%6e4/1e3);return`${v}m ${w}s`};if(n==="build.phase.start")return l.jsx("span",{className:"break-words",children:g||(h?`Build: ${h}`:"Build phase started")});if(n==="build.start")return l.jsx("span",{className:"break-words",children:`Build started${d?` (${d})`:""}`});if(n==="build.queued")return l.jsx("span",{className:"break-words",children:`Build queued${d?` (${d})`:""}`});if(n==="build.complete")return l.jsx("span",{className:"break-words",children:`Build ${u??"completed"}`});if(n==="run.queued"){const b=typeof o.mode=="string"?o.mode:void 0;return l.jsx("span",{className:"break-words",children:`Run queued${b?` (${b})`:""}`})}if(n==="run.waiting_for_build")return l.jsx("span",{className:"break-words",children:`Waiting for build${d?` (${d})`:""}`});if(n==="run.start"){const b=typeof o.mode=="string"?o.mode:void 0;return l.jsx("span",{className:"break-words",children:`Run started${b?` (${b})`:""}`})}if(n==="run.complete"){const b=o.execution&&typeof o.execution=="object"?o.execution:{},v=typeof b.duration_ms=="number"?b.duration_ms:void 0,w=v?`  ${x(v)}`:"";return l.jsx("span",{className:"break-words",children:`Run ${u??"completed"}${w}`})}return i.trim()?l.jsx("span",{className:"break-words",children:i}):n.startsWith("build.")?l.jsx("span",{className:"break-words",children:g||h||u||n}):l.jsx("span",{className:"break-words",children:u||n})}if(n==="engine.config.loaded"){const u=yt(o.config_package)??yt(o.config_package_name),d=yt(o.entrypoint),h=Array.isArray(o.fields)?o.fields.length:void 0,g=_s(o.settings),x=yt(g?.log_format),b=typeof g?.log_level=="number"?g.log_level:void 0,v=u?Hr(u):void 0,w=["Config loaded",d?`entry=${d}`:null,typeof h=="number"?`fields=${h}`:null,x?`log=${x}${typeof b=="number"?`(${b})`:""}`:null,v&&v!=="src"?v:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:w.join("  ")})}if(n==="engine.settings.effective"){const u=_s(o.settings);if(!u)return l.jsx("span",{className:"break-words",children:"Settings (effective)"});const d=yt(u.log_format),h=typeof u.log_level=="number"?u.log_level:void 0,g=typeof u.max_empty_rows_run=="number"?u.max_empty_rows_run:void 0,x=typeof u.max_empty_cols_run=="number"?u.max_empty_cols_run:void 0,b=yt(u.unmapped_prefix),v=["Settings",d?`log=${d}${typeof h=="number"?`(${h})`:""}`:null,b?`unmapped=${b}`:null,typeof g=="number"?`maxEmptyRows=${g}`:null,typeof x=="number"?`maxEmptyCols=${x}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:v.join("  ")})}if(n==="engine.hook.start"||n==="engine.hook.end"){const u=yt(o.hook_name)??yt(o.hook),d=n.endsWith(".start")?"start":"end";return l.jsx("span",{className:"break-words",children:u?`Hook ${u}  ${d}`:`Hook  ${d}`})}if(n==="engine.run.started"){const u=yt(o.input_file),d=yt(o.config_package),h=["Run started",u?Hr(u):null,d?`config=${Hr(d)}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:h.join("  ")})}if(n==="engine.run.planned"){const u=yt(o.output_file),d=yt(o.logs_file),h=["Run planned",u?`output=${Hr(u)}`:null,d?`logs=${Hr(d)}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:h.join("  ")})}if(n==="engine.run.completed"){const u=_s(o.execution)??{},d=_s(o.evaluation)??{},h=_s(o.counts)??{},g=yt(u.status),x=yt(d.outcome),b=typeof u.duration_ms=="number"?u.duration_ms:void 0,v=typeof h.tables=="number"?h.tables:void 0,w=["Run completed",g||null,x?`outcome=${x}`:null,typeof v=="number"?`tables=${v}`:null,typeof b=="number"?`${Math.round(b)}ms`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:w.join("  ")})}if(n==="engine.workbook.started"){const u=typeof o.sheet_count=="number"?o.sheet_count:void 0;return l.jsx("span",{className:"break-words",children:`Workbook start${typeof u=="number"?`  sheets=${u}`:""}`})}if(n==="engine.sheet.started"){const u=yt(o.sheet_name),d=typeof o.sheet_index=="number"?o.sheet_index+1:void 0,h=["Sheet start",u||null,typeof d=="number"?`#${d}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:h.join("  ")})}if(n==="engine.sheet.tables_detected"){const u=yt(o.sheet_name),d=typeof o.table_count=="number"?o.table_count:void 0,h=typeof o.row_count=="number"?o.row_count:void 0,g=[u||"Sheet",typeof d=="number"?`tables=${d}`:null,typeof h=="number"?`rows=${h}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:g.join("  ")})}if(n==="engine.table.detected"){const u=yt(o.sheet_name),d=typeof o.table_index=="number"?o.table_index+1:void 0,h=typeof o.row_count=="number"?o.row_count:void 0,g=typeof o.column_count=="number"?o.column_count:void 0,x=[u||null,typeof d=="number"?`Table ${d}`:"Table","detected",typeof h=="number"?`rows=${h}`:null,typeof g=="number"?`cols=${g}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:x.join("  ")})}if(n==="engine.table.extracted"){const u=yt(o.sheet_name),d=typeof o.table_index=="number"?o.table_index+1:void 0,h=typeof o.row_count=="number"?o.row_count:void 0,g=typeof o.col_count=="number"?o.col_count:void 0,x=[u||null,typeof d=="number"?`Table ${d}`:"Table","extracted",typeof h=="number"?`rows=${h}`:null,typeof g=="number"?`cols=${g}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:x.join("  ")})}if(n==="engine.table.mapped"){const u=yt(o.sheet_name),d=typeof o.table_index=="number"?o.table_index+1:void 0,h=typeof o.mapped_fields=="number"?o.mapped_fields:void 0,g=typeof o.total_fields=="number"?o.total_fields:void 0,x=typeof o.passthrough_fields=="number"?o.passthrough_fields:void 0,b=[u||null,typeof d=="number"?`Table ${d}`:"Table","mapped",typeof h=="number"&&typeof g=="number"?`mapped=${h}/${g}`:null,typeof x=="number"?`passthrough=${x}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:b.join("  ")})}if(n==="engine.table.mapping_patched"){const u=yt(o.sheet_name),d=typeof o.table_index=="number"?o.table_index+1:void 0,h=[u||null,typeof d=="number"?`Table ${d}`:"Table","mapping patched"].filter(Boolean);return l.jsx("span",{className:"break-words",children:h.join("  ")})}if(n==="engine.table.normalized"){const u=yt(o.sheet_name),d=typeof o.table_index=="number"?o.table_index+1:void 0,h=typeof o.row_count=="number"?o.row_count:void 0,g=typeof o.issue_count=="number"?o.issue_count:void 0,x=_s(o.issues_by_severity),b=x?e5(x,2):null,v=[u||null,typeof d=="number"?`Table ${d}`:"Table","normalized",typeof h=="number"?`rows=${h}`:null,typeof g=="number"?`issues=${g}`:null,b||null].filter(Boolean);return l.jsx("span",{className:"break-words",children:v.join("  ")})}if(n==="engine.table.written"){const u=yt(o.sheet_name),d=typeof o.table_index=="number"?o.table_index:void 0,h=yt(o.output_range),g=t5(i),x=[u||null,typeof d=="number"?`Table ${d+1}`:null,"written",h||null,g?`mapped=${g.mapped} unmapped=${g.unmapped}`:null].filter(Boolean).join("  ");return l.jsx("span",{className:"break-words",children:x||"Table written"})}if(n==="engine.validation.result"){const u=typeof o.validator=="string"?o.validator:void 0,d=typeof o.field=="string"?o.field:void 0,h=typeof o.issues_found=="number"?o.issues_found:void 0,g=typeof o.column_index=="number"?o.column_index:void 0,x=Array.isArray(o.results_sample)?o.results_sample:[],b=typeof h=="number"&&h>0&&x.length>0?`sample=${xb(JSON.stringify(x[0]),80)}`:null,v=["Validate",d??null,typeof g=="number"?`Col ${Fc(g)}`:null,u?`via ${u}`:null,typeof h=="number"?`issues=${h}`:null,b].filter(Boolean);return l.jsx("span",{className:"break-words",children:v.join("  ")})}if(n==="engine.validation.summary"){const u=typeof o.issues_total=="number"?o.issues_total:void 0;return l.jsx("span",{className:"break-words",children:`Validation summary${typeof u=="number"?`  issues=${u}`:""}`})}if(n==="engine.transform.result"){const u=typeof o.transform=="string"?o.transform:void 0,d=typeof o.field=="string"?o.field:void 0,h=typeof o.input_len=="number"?o.input_len:void 0,g=typeof o.output_len=="number"?o.output_len:void 0,x=typeof o.row_count=="number"?o.row_count:void 0,b=[u?`Transform ${u}`:"Transform",d??null,typeof x=="number"?`rows=${x}`:null,typeof h=="number"&&typeof g=="number"?`${h}${g}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:b.join("  ")})}if(n==="engine.transform.derived_merge"){const u=yt(o.field),d=yt(o.mode),h=["Derived merge",u??null,d?`mode=${d}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:h.join("  ")})}if(n==="engine.column_detector.candidate"){const u=typeof o.column_index=="number"?o.column_index:void 0,d=typeof o.header=="string"?o.header:void 0,h=typeof o.best_field=="string"?o.best_field:void 0,g=typeof o.best_score=="number"?o.best_score:void 0,x=_s(o.scores),b=x?Xl(x,3):null,v=_s(o.contributions),w=v?Xl(v,2):null,C=[typeof u=="number"?`Col ${Fc(u)}`:null,d?`"${xb(d,32)}"`:null,h?`suggested=${h}`:null,typeof g=="number"?`(${g.toFixed(3)})`:null,b?`why: ${b}`:null,w?`signals: ${w}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:C.join("  ")})}if(n==="engine.column_detector.summary"){const u=Array.isArray(o.mapped)?o.mapped:[],d=typeof o.total_columns=="number"?o.total_columns:void 0,h=Array.isArray(o.unmapped_indices)?o.unmapped_indices.length:void 0,g=["Columns",typeof d=="number"?`total=${d}`:null,`mapped=${u.length}`,typeof h=="number"?`unmapped=${h}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:g.join("  ")})}if(n==="engine.row_detector.summary"){const u=yt(o.sheet_name),d=typeof o.header_row_index=="number"?o.header_row_index+1:void 0,h=typeof o.header_score=="number"?o.header_score:void 0,g=typeof o.data_start_index=="number"?o.data_start_index+1:void 0,x=typeof o.data_end_index=="number"?o.data_end_index+1:void 0,b=[u?`${u}`:"Rows",typeof d=="number"?`headerRow=${d}`:null,typeof h=="number"?`score=${h.toFixed(3)}`:null,typeof g=="number"&&typeof x=="number"?`dataRows=${g}..${x}`:null].filter(Boolean);return l.jsx("span",{className:"break-words",children:b.join("  ")})}if(n==="engine.detector.column_result"||n==="engine.detector.row_result"){const u=typeof o.sheet_name=="string"?o.sheet_name:void 0,d=typeof o.column_index=="number"?o.column_index:void 0,h=typeof o.row_index=="number"?o.row_index:void 0,g=o.detector&&typeof o.detector=="object"?o.detector:{},x=typeof g.name=="string"?g.name:void 0,b=typeof g.duration_ms=="number"?g.duration_ms:void 0,v=g.scores&&typeof g.scores=="object"?g.scores:null,w=v?Xl(v,2):null;return l.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Col ${Fc(d)}`:null,typeof h=="number"?`Row ${h+1}`:null,x?`ran ${x}`:"ran detector",typeof b=="number"?J2(b):null,w?`scores: ${w}`:null].filter(Boolean).join("  ")})}if(n==="engine.row_classification"){const u=yt(o.sheet_name),d=typeof o.row_index=="number"?o.row_index+1:void 0,h=_s(o.scores),g=h?Xl(h,2):null,x=_s(o.classification),b=yt(x?.row_kind),v=typeof x?.score=="number"?x.score:void 0,w=Array.isArray(x?.considered_row_kinds)?x?.considered_row_kinds.length:void 0;return l.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Row ${d}`:"Row",b?`label=${b}`:null,typeof v=="number"?`(${v.toFixed(3)})`:null,typeof w=="number"?`considered=${w}`:null,g?`why: ${g}`:null].filter(Boolean).join("  ")})}if(n==="engine.column_classification"){const u=yt(o.sheet_name),d=typeof o.column_index=="number"?o.column_index:void 0,h=_s(o.scores),g=h?Xl(h,2):null,x=_s(o.classification),b=yt(x?.field),v=typeof x?.score=="number"?x.score:void 0,w=Array.isArray(x?.considered_fields)?x?.considered_fields.length:void 0;return l.jsx("span",{className:"break-words",children:[u||null,typeof d=="number"?`Col ${Fc(d)}`:"Col",b?`label=${b}`:null,typeof v=="number"?`(${v.toFixed(3)})`:null,typeof w=="number"?`considered=${w}`:null,g?`why: ${g}`:null].filter(Boolean).join("  ")})}return i&&i!==n?l.jsx("span",{className:"break-words",children:i}):Object.keys(o).length?a==="debug"&&n.startsWith("engine.")?l.jsx("span",{className:"break-words",children:n}):l.jsx("span",{className:"break-words",children:n}):null}function yt(e){return typeof e=="string"&&e.trim().length?e:null}function _s(e){return!e||typeof e!="object"?null:e}function Hr(e){const n=e.trim();if(!n)return"";const a=n.split(/[\\/]/).filter(Boolean);return a[a.length-1]??n}function xb(e,n){return e.length<=n?e:e.slice(0,Math.max(0,n-1))+""}function Fc(e){let n=Math.floor(e);if(!Number.isFinite(n)||n<0)return String(e);let a="";for(;n>=0;)a=String.fromCharCode(n%26+65)+a,n=Math.floor(n/26)-1;return a}function J2(e){return!Number.isFinite(e)||e<0?`${e}ms`:e<1?`${e.toFixed(3)}ms`:e<10?`${e.toFixed(2)}ms`:e<100?`${e.toFixed(1)}ms`:e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`}function Xl(e,n){const a=[];for(const[i,o]of Object.entries(e))typeof o=="number"&&Number.isFinite(o)&&a.push([i,o]);return a.length?(a.sort((i,o)=>o[1]-i[1]),a.slice(0,Math.max(1,n)).map(([i,o])=>`${i}=${o.toFixed(3)}`).join(" ")):null}function e5(e,n){const a=[];for(const[i,o]of Object.entries(e))typeof o=="number"&&Number.isFinite(o)&&a.push([i,o]);return a.length?(a.sort((i,o)=>o[1]-i[1]),a.slice(0,Math.max(1,n)).map(([i,o])=>`${i}=${Math.round(o)}`).join(" ")):null}function t5(e){const n=e.match(/Rendered table with\s+(\d+)\s+\w+\s+columns?\s+and\s+(\d+)\s+unmapped/i);if(!n)return null;const a=Number(n[1]),i=Number(n[2]);return!Number.isFinite(a)||!Number.isFinite(i)?null:{mapped:a,unmapped:i}}function n5(e){const n=(e||"").trim();if(!n)return{text:""};const a="Config hook:",i=n.startsWith(a)?n.slice(a.length).trim():n,o=i.match(/^workbook start\s*\((.+)\)\s*$/i);if(o){const b=o[1];return{text:`Workbook start  ${Hr(b)}`,title:b}}const u=i.match(/^workbook before save\s*\((.+)\)\s*$/i);if(u){const b=u[1];return{text:`Workbook save  ${Hr(b)}`,title:b}}const d=i.match(/^sheet start\s*\((.+)\)\s*$/i);if(d)return{text:`Sheet start  ${d[1]}`};const h=i.match(/^table detected\s*\((.+)\)\s*$/i);if(h)return{text:`Table detected  ${h[1].replace(/\s*,\s*/g,"  ")}`};const g=i.match(/^table mapped\s*\((.+)\)\s*$/i);if(g){const b=g[1],v=b.match(/fields=\[(.*)\]/i);return v?{text:`Table mapped  fields=${v[1].split(",").map(C=>C.trim()).filter(Boolean).length}`,title:b}:{text:`Table mapped  ${b}`}}const x=i.match(/^table written\s*\((.+)\)\s*$/i);return x?{text:`Table written  ${x[1].replace(/\s*,\s*/g,"  ")}`}:{text:n}}const bb="ade.ui.workbench.console.levelFilter.v1";function s5({console:e,latestRun:n,onClearConsole:a,runStatus:i}){const[o,u]=p.useState(()=>{const U={origin:"all",level:"info"};if(typeof window>"u")return U;try{const ie=window.localStorage.getItem(bb);if(ie==="all"||ie==="debug"||ie==="info"||ie==="warning"||ie==="error"||ie==="success")return{...U,level:ie}}catch{}return U}),[d,h]=p.useState(!0),[g,x]=p.useState(!1),[b,v]=p.useState(!1),[w,C]=p.useState("parsed"),[N,j]=p.useState(null),[k,T]=p.useState(!1),E=p.useRef(null),B=p.useSyncExternalStore(e.subscribe.bind(e),e.getSnapshot,e.getSnapshot),Q=B.length,O=p.useMemo(()=>{const U=gb(o.level),ie=[];for(let me=0;me<B.length;me+=1){const se=e.getLine(me);if(!se)continue;const _=o.origin==="all"||(se.origin??"run")===o.origin,P=gb(se.level),le=o.level==="all"||P>=U;_&&le&&ie.push(me)}return ie},[e,B,o]),I=O.length>0,A=Q>0,V=i&&i!=="idle"?i:null,W=typeof navigator<"u"&&typeof navigator.clipboard?.writeText=="function",X=P2({count:O.length,getScrollElement:()=>E.current,estimateSize:()=>22,overscan:16});p.useEffect(()=>{d&&O.length!==0&&X.scrollToIndex(O.length-1,{align:"end"})},[d,O.length,B,X]),p.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(bb,o.level)}catch{}},[o.level]);const J=U=>{const ie=U.currentTarget,se=ie.scrollHeight-ie.scrollTop-ie.clientHeight<16;!se&&d?h(!1):se&&!d&&h(!0)},L=()=>{h(!0),X.scrollToIndex(O.length-1,{align:"end"})},ae=p.useCallback(async U=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(U),!0}catch{}if(typeof document>"u")return!1;try{const ie=document.createElement("textarea");ie.value=U,ie.setAttribute("readonly","true"),ie.style.position="fixed",ie.style.left="-9999px",document.body.appendChild(ie),ie.select();const me=document.execCommand("copy");return document.body.removeChild(ie),me}catch{return!1}},[]),de=async()=>{if(!I)return;const U=[];for(const me of O){const se=e.getLine(me);se&&U.push(d5(se,w))}const ie=await ae(U.join(`
`));x(ie),ie&&window.setTimeout(()=>x(!1),1500)},be=p.useCallback(U=>{!U.raw||typeof U.raw!="object"||(j(U),T(!0))},[]),D=()=>{T(!1)};return l.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-md border border-[#2a2a2a] bg-[#1e1e1e] font-mono text-[13px] leading-relaxed text-[#d4d4d4] shadow-[0_8px_24px_rgba(0,0,0,0.45)]",children:[l.jsxs("div",{className:"flex flex-col border-b border-[#2a2a2a] bg-gradient-to-r from-[#1f1f1f] to-[#232323]",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-4 py-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase tracking-[0.22em] text-[#9da5b4]",children:[l.jsx("span",{className:"font-semibold tracking-[0.3em] text-slate-200",children:"ADE"}),l.jsx("span",{className:"text-slate-400",children:"Terminal"}),V?l.jsx("span",{className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[10px] font-semibold tracking-[0.2em] text-slate-200",children:V}):null]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-500",children:[l.jsxs("label",{className:"flex items-center gap-1 text-slate-400",title:"Filter logs by scope",children:["Origin",l.jsxs("select",{value:o.origin,onChange:U=>u(ie=>({...ie,origin:U.target.value})),className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[11px] text-slate-100 shadow-sm focus:border-emerald-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"run",children:"Run"}),l.jsx("option",{value:"build",children:"Build"})]})]}),l.jsxs("label",{className:"flex items-center gap-1 text-slate-400",title:"Filter by severity",children:["Level",l.jsxs("select",{value:o.level,onChange:U=>u(ie=>({...ie,level:U.target.value})),className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[11px] text-slate-100 shadow-sm focus:border-emerald-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"debug",children:"Debug"}),l.jsx("option",{value:"info",children:"Info"}),l.jsx("option",{value:"warning",children:"Warning"}),l.jsx("option",{value:"error",children:"Error"}),l.jsx("option",{value:"success",children:"Success"})]})]}),l.jsx("button",{type:"button",onClick:()=>d?h(!1):L(),className:pe("rounded px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",d?"border border-emerald-600/60 bg-transparent text-emerald-200":"border border-slate-600 bg-transparent text-slate-200 hover:border-slate-400"),title:"Auto-scroll to newest logs",children:d?"Following":"Follow"}),l.jsxs("div",{className:"flex items-center gap-2",title:"Toggle between parsed view and raw NDJSON",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-500",children:"View"}),l.jsxs("div",{role:"radiogroup","aria-label":"Console view mode",className:"flex items-center gap-1",children:[l.jsx("button",{type:"button",role:"radio","aria-checked":w==="parsed",onClick:()=>C("parsed"),className:pe("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition focus:outline-none focus:ring-1 focus:ring-emerald-500",w==="parsed"?"border-emerald-600/70 text-emerald-200":"border-slate-600 text-slate-200 hover:border-slate-400"),children:"Parsed"}),l.jsx("button",{type:"button",role:"radio","aria-checked":w==="ndjson",onClick:()=>C("ndjson"),className:pe("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition focus:outline-none focus:ring-1 focus:ring-emerald-500",w==="ndjson"?"border-emerald-600/70 text-emerald-200":"border-slate-600 text-slate-200 hover:border-slate-400"),children:"NDJSON"})]})]}),l.jsx("button",{type:"button",onClick:de,className:pe("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",g?"border-emerald-600/60 bg-transparent text-emerald-200":"border border-slate-600 bg-transparent text-slate-200 hover:border-slate-400"),disabled:!I,title:W?"Copy visible console output":"Copy may be blocked by browser permissions",children:g?"Copied":"Copy"}),l.jsx("button",{type:"button",onClick:()=>a?.(),className:"rounded border border-slate-600 bg-[#0f0f0f] px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] text-slate-200 transition hover:border-slate-400",title:"Clear console output",children:"Clear"})]})]}),n?l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-[#2a2a2a] bg-[#181818] px-4 py-1.5 text-[11px] text-[#7f8794]",children:[l.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[l.jsx(a5,{status:n.status}),l.jsxs("span",{className:"truncate",title:n.runId,children:["Run ",n.runId]}),l.jsxs("span",{className:"truncate text-slate-500",children:[n.documentName??"Document not recorded",yb(n.sheetNames)?`  ${yb(n.sheetNames)}`:""]}),n.durationMs!=null?l.jsxs("span",{className:"text-slate-600",children:[" ",f5(n.durationMs)]}):null]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-600",children:"Downloads"}),l.jsx(ih,{href:n.outputUrl,label:n.outputFilename?`Output (${n.outputFilename})`:"Output",disabledLabel:"Output (not ready)",disabledReason:"Output is not available for this run."}),l.jsx(ih,{href:n.logsUrl,label:"Events (NDJSON)",disabledLabel:"Events",disabledReason:"Events log is not available."}),l.jsx(ih,{href:n.inputUrl,label:"Input",disabledLabel:"Input",disabledReason:"Input file download is not available."})]})]}):null]}),l.jsx("div",{ref:E,onScroll:J,className:"flex-1 overflow-auto bg-[#1e1e1e] [color-scheme:dark]",style:{scrollbarColor:"#2f2f2f #111111"},children:I?l.jsx("div",{style:{height:X.getTotalSize(),position:"relative"},children:X.getVirtualItems().map(U=>{const ie=O[U.index],me=typeof ie=="number"?e.getLine(ie):void 0;if(!me)return null;const se=me.id??`${me.timestamp??"tbd"}-${me.origin??"run"}-${ie}`,_=!!(me.raw&&typeof me.raw=="object"),P=w==="ndjson"?l.jsx("span",{className:"whitespace-pre-wrap break-words",children:zy(me)??me.message}):W2(me);return l.jsx("div",{"data-index":U.index,ref:X.measureElement,className:"group flex items-start gap-3 border-b border-[#1a1a1a] px-3 py-[2px] transition hover:bg-[#232323] last:border-b-0",style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${U.start}px)`},children:l.jsxs("div",{className:"flex min-w-0 flex-1 items-baseline gap-2",children:[o5(me.timestamp),l.jsx("span",{className:"shrink-0 w-12 text-right font-mono text-[11px] leading-snug text-[#606674]",children:Oh(me.origin)}),l.jsx("span",{className:pe("shrink-0 w-14 text-right font-mono text-[11px] leading-snug",u5(me.level)),children:c5(me.level)}),l.jsx("div",{className:pe("min-w-0 whitespace-pre-wrap break-words text-[13px] leading-snug",r5(me.level)),children:P}),_?l.jsx("button",{type:"button",onClick:()=>be(me),className:"ml-2 shrink-0 rounded border border-slate-700 bg-[#101010] px-2 py-[2px] text-[10px] font-semibold uppercase tracking-[0.12em] text-slate-300 opacity-0 transition hover:border-slate-500 hover:text-slate-100 group-hover:opacity-100",title:"Inspect pretty JSON",children:"JSON"}):null]})},se)})}):A?l.jsx(vb,{title:"No console output matches these filters.",description:"Adjust origin or level filters to see more."}):l.jsx(vb,{title:"Waiting for ADE output",description:"Run validation or a test to stream logs into this terminal."})}),k&&N?.raw&&typeof N.raw=="object"?l.jsxs("div",{className:"border-t border-[#2a2a2a] bg-[#151515]",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 text-[11px] text-slate-400",children:[l.jsxs("div",{className:"min-w-0 truncate",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-500",children:"Inspector"}),N.timestamp?l.jsxs("span",{className:"ml-2 text-slate-500",children:["[",gm(N.timestamp),"]"]}):null,l.jsx("span",{className:"ml-2 text-slate-300",children:Oh(N.origin)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:async()=>{const U=N.raw,ie=JSON.stringify(U,null,2),me=await ae(ie);v(me),me&&window.setTimeout(()=>v(!1),1500)},className:"rounded border border-slate-700 bg-[#101010] px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] text-slate-200 hover:border-slate-500",title:"Copy pretty JSON",children:b?"Copied":"Copy JSON"}),l.jsx("button",{type:"button",onClick:D,className:"rounded border border-slate-700 bg-[#101010] px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] text-slate-200 hover:border-slate-500",title:"Close inspector",children:"Close"})]})]}),l.jsx("div",{className:"max-h-[260px] overflow-auto px-3 pb-3 [color-scheme:dark]",style:{scrollbarColor:"#2f2f2f #111111"},children:K2(N.raw)})]}):null]})}function vb({title:e,description:n}){return l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-slate-500",children:[l.jsx("p",{className:"tracking-wide text-slate-300",children:e}),l.jsx("p",{className:"text-[12px] leading-relaxed text-slate-500",children:n})]})}function a5({status:e}){const n=l5(e),a=e==="succeeded"?"bg-emerald-500":e==="running"||e==="queued"?"bg-amber-400":n?"bg-slate-400":"bg-rose-500";return l.jsx("span",{className:pe("inline-block h-2.5 w-2.5 rounded-full",a),"aria-hidden":!0})}function r5(e){switch(e){case"warning":return"text-amber-100";case"error":return"text-rose-100";case"success":return"text-emerald-100";default:return"text-[#d4d4d4]"}}function i5(e){switch(e){case"warning":return"WARN";case"error":return"ERROR";case"success":return"DONE";default:return"INFO"}}function l5(e){return e==="cancelled"}function Oh(e){return e==="build"?"[build]":"[run]"}function o5(e){const n=gm(e);return n?l.jsxs("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-[#7a8090]",children:["[",n,"]"]}):l.jsx("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-[#4f5665]","aria-hidden":!0,children:""})}function c5(e){switch(e){case"warning":return" warn";case"error":return" error";case"success":return" done";default:return" info"}}function u5(e){switch(e){case"warning":return"text-amber-300";case"error":return"text-rose-300";case"success":return"text-emerald-300";default:return"text-[#6f7683]"}}function gm(e){if(!e)return"";const n=new Date(e);if(!Number.isNaN(n.getTime()))return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});const a=e.trim();return a.length>0?a:""}function d5(e,n){const a=gm(e.timestamp),i=Oh(e.origin),o=i5(e.level).toLowerCase(),u=n==="ndjson"?zy(e)??e.message??"":e.message??"";return`${a?`[${a}] `:""}${i} ${o} ${u}`.trim()}function yb(e){return e?e.length===0?"All worksheets":e.join(", "):null}function f5(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),a=Math.round(e%6e4/1e3);return`${n}m ${a}s`}function ih({href:e,label:n,disabledLabel:a,disabledReason:i}){const o=typeof e=="string"&&e.trim().length>0,u="inline-flex items-center gap-1 rounded border px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.14em] transition",d="border-slate-700 bg-[#101010] text-slate-200 hover:border-slate-500",h="border-slate-800 bg-[#0f0f0f] text-slate-600 cursor-not-allowed";return o?l.jsxs("a",{className:pe(u,d),href:e,title:n,children:[l.jsx(h5,{}),l.jsx("span",{className:"truncate",children:n})]}):l.jsx("span",{className:pe(u,h),title:i,children:a})}function h5(){return l.jsxs("svg",{viewBox:"0 0 20 20",className:"h-3.5 w-3.5 text-slate-300",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M10 3v8m0 0 3-3m-3 3-3-3",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 13.5v2A1.5 1.5 0 0 0 5.5 17h9A1.5 1.5 0 0 0 16 15.5v-2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function m5({validation:e}){const n=g5(e),a=x5(e);return l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[l.jsx("span",{children:n}),e.lastRunAt?l.jsxs("span",{children:["Last run ",b5(e.lastRunAt)]}):null]}),e.messages.length>0?l.jsx("ul",{className:"space-y-1.5",children:e.messages.map((i,o)=>l.jsxs("li",{className:p5(i.level),children:[i.path?l.jsx("span",{className:"block text-[11px] font-medium uppercase tracking-wide text-slate-500",children:i.path}):null,l.jsx("span",{className:"text-[13px]",children:i.message})]},`${i.level}-${i.path??o}-${o}`))}):l.jsx("p",{className:"text-xs leading-relaxed text-slate-500",children:a})]})}function p5(e){switch(e){case"error":return"text-danger-600";case"warning":return"text-amber-600";default:return"text-slate-600"}}function g5(e){switch(e.status){case"running":return"Running validation...";case"success":{if(e.messages.length===0)return"Validation completed with no issues.";const n=e.messages.length;return`Validation completed with ${n} ${n===1?"issue":"issues"}.`}case"error":return e.error??"Validation failed.";default:return"No validation run yet."}}function x5(e){return e.status==="running"?"Validation in progress...":e.status==="success"?"No validation issues detected.":e.status==="error"?e.error??"Validation failed.":"Trigger validation from the workbench header to see ADE parsing results and manifest issues."}function b5(e){const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function v5({height:e,console:n,validation:a,activePane:i,onPaneChange:o,latestRun:u,onClearConsole:d,runStatus:h,onToggleCollapse:g,appearance:x="light"}){const b=a.messages.length>0,v=x==="dark"?{surface:"border-[#1f2431] bg-[#0f111a] text-slate-100",header:"border-[#1f2431] bg-[#0f111a]",hideButton:"border-[#2b3040] bg-[#161926] text-slate-100 hover:border-[#3b4153] hover:bg-[#1e2333]"}:{surface:"border-slate-200 bg-slate-50 text-slate-800",header:"border-slate-200 bg-slate-50",hideButton:"border-slate-300 bg-white text-slate-700 hover:border-slate-400"};return l.jsx("section",{className:pe("flex min-h-0 flex-col overflow-hidden border-t",v.surface),style:{height:e},children:l.jsxs(Ty,{value:i,onValueChange:w=>o(w),children:[l.jsxs("div",{className:pe("flex flex-none items-center justify-between border-b px-3 py-1.5",v.header),onDoubleClick:g,title:g?"Double-click to hide console":void 0,children:[l.jsxs(My,{className:"flex items-center gap-3 text-[11px] font-medium",children:[l.jsx(Rh,{value:"terminal",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:"Terminal"}),l.jsxs(Rh,{value:"problems",className:"flex items-center gap-1 rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Problems",b?l.jsx("span",{className:"inline-flex h-4 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-600 px-1 text-[10px] font-semibold text-white",children:a.messages.length}):null]})]}),g?l.jsx("button",{type:"button",onClick:g,className:pe("rounded px-2 py-1 text-[11px] font-semibold uppercase tracking-wide shadow-sm transition",v.hideButton),title:"Hide console",children:"Hide"}):null]}),l.jsx(zh,{value:"terminal",className:"flex min-h-0 flex-1 flex-col",children:l.jsx(s5,{console:n,latestRun:u,onClearConsole:d,runStatus:h})}),l.jsx(zh,{value:"problems",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:l.jsx(m5,{validation:a})})]})})}function y5({containerRef:e,tabs:n,activeTabId:a,onCloseTab:i,onSelectRecentTab:o,onSelectTab:u}){return p.useEffect(()=>{if(!n.length)return;const d=g=>{const x=e.current;if(!x)return!1;const b=g.target;if(b instanceof Node&&x.contains(b))return!0;const v=document.activeElement;return!!(v&&x.contains(v))},h=g=>{if(!(g.ctrlKey||g.metaKey)||!d(g))return;if(g.key.toLowerCase()==="w"){if(!a)return;g.preventDefault(),i(a);return}if(g.key==="Tab"){if(n.length<2)return;g.preventDefault(),o(g.shiftKey?"backward":"forward");return}const x=b=>{if(n.length<2)return;const v=n.findIndex(j=>j.id===a),C=((v>=0?v:0)+b+n.length)%n.length,N=n[C];N&&u(N.id)};if(g.key==="PageUp"){g.preventDefault(),x(-1);return}g.key==="PageDown"&&(g.preventDefault(),x(1))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n,a,i,o,u,e]),null}const w5=p.lazy(()=>iS(()=>import("./MonacoCodeEditor-DmzmB1h9.js"),[])),j5=p.forwardRef(function(n,a){const{className:i,...o}=n;return l.jsx(p.Suspense,{fallback:l.jsx("div",{className:pe("relative h-full w-full",i),children:l.jsx("div",{className:"flex h-full items-center justify-center text-xs text-slate-400",children:"Loading editor"})}),children:l.jsx(w5,{...o,ref:a,className:i})})});function S5({tabs:e,activeTabId:n,editorTheme:a,onContentChange:i,onSaveTab:o,canSaveFiles:u=!1,readOnly:d=!1,onRetryTabLoad:h,onSelectTab:g,isTabDragging:x=!1}){return p.useMemo(()=>e.find(v=>v.id===n)??null,[e,n])?l.jsx("div",{className:"flex min-h-0 min-w-0 flex-1",children:e.map(v=>l.jsx(zh,{value:v.id,className:"flex min-h-0 min-w-0 flex-1",children:v.status==="loading"?l.jsxs("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:["Loading ",v.name,""]}):v.status==="error"?l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 text-center text-sm text-slate-500",children:[l.jsx("p",{children:v.error??"Unable to load the file."}),l.jsx("button",{type:"button",className:"rounded bg-brand-600 px-3 py-1 text-xs font-medium text-white hover:bg-brand-500",onClick:()=>h?h(v.id):g(v.id),children:"Retry loading"})]}):l.jsx("div",{className:pe("flex min-h-0 min-w-0 flex-1",x&&"pointer-events-none select-none"),children:l.jsx(j5,{value:v.content,language:v.language??"plaintext",path:v.id,theme:a,readOnly:d,onChange:w=>i(v.id,w??""),onSaveShortcut:()=>{u&&o?.(v.id)}})})},v.id))}):l.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."})}function C5(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return p.useMemo(()=>i=>{n.forEach(o=>o(i))},n)}const ku=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gi(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function xm(e){return"nodeType"in e}function Yn(e){var n,a;return e?Gi(e)?e:xm(e)&&(n=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?n:window:window}function bm(e){const{Document:n}=Yn(e);return e instanceof n}function wo(e){return Gi(e)?!1:e instanceof Yn(e).HTMLElement}function Ly(e){return e instanceof Yn(e).SVGElement}function Yi(e){return e?Gi(e)?e.document:xm(e)?bm(e)?e:wo(e)||Ly(e)?e.ownerDocument:document:document:document}const aa=ku?p.useLayoutEffect:p.useEffect;function vm(e){const n=p.useRef(e);return aa(()=>{n.current=e}),p.useCallback(function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n.current==null?void 0:n.current(...i)},[])}function N5(){const e=p.useRef(null),n=p.useCallback((i,o)=>{e.current=setInterval(i,o)},[]),a=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,a]}function fo(e,n){n===void 0&&(n=[e]);const a=p.useRef(e);return aa(()=>{a.current!==e&&(a.current=e)},n),a}function jo(e,n){const a=p.useRef();return p.useMemo(()=>{const i=e(a.current);return a.current=i,i},[...n])}function ou(e){const n=vm(e),a=p.useRef(null),i=p.useCallback(o=>{o!==a.current&&n?.(o,a.current),a.current=o},[]);return[a,i]}function Lh(e){const n=p.useRef();return p.useEffect(()=>{n.current=e},[e]),n.current}let lh={};function So(e,n){return p.useMemo(()=>{if(n)return n;const a=lh[e]==null?0:lh[e]+1;return lh[e]=a,e+"-"+a},[e,n])}function Uy(e){return function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return i.reduce((u,d)=>{const h=Object.entries(d);for(const[g,x]of h){const b=u[g];b!=null&&(u[g]=b+e*x)}return u},{...n})}}const Hi=Uy(1),cu=Uy(-1);function E5(e){return"clientX"in e&&"clientY"in e}function ym(e){if(!e)return!1;const{KeyboardEvent:n}=Yn(e.target);return n&&e instanceof n}function k5(e){if(!e)return!1;const{TouchEvent:n}=Yn(e.target);return n&&e instanceof n}function Uh(e){if(k5(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:a}=e.touches[0];return{x:n,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:a}=e.changedTouches[0];return{x:n,y:a}}}return E5(e)?{x:e.clientX,y:e.clientY}:null}const ho=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:a}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:a}=e;return"scaleX("+n+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[ho.Translate.toString(e),ho.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:a,easing:i}=e;return n+" "+a+"ms "+i}}}),wb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function _5(e){return e.matches(wb)?e:e.querySelector(wb)}const A5={display:"none"};function D5(e){let{id:n,value:a}=e;return _t.createElement("div",{id:n,style:A5},a)}function T5(e){let{id:n,announcement:a,ariaLiveType:i="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _t.createElement("div",{id:n,style:o,role:"status","aria-live":i,"aria-atomic":!0},a)}function M5(){const[e,n]=p.useState("");return{announce:p.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const By=p.createContext(null);function R5(e){const n=p.useContext(By);p.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function z5(){const[e]=p.useState(()=>new Set),n=p.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[p.useCallback(i=>{let{type:o,event:u}=i;e.forEach(d=>{var h;return(h=d[o])==null?void 0:h.call(d,u)})},[e]),n]}const O5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},L5={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:a}=e;return a?"Draggable item "+n.id+" was moved over droppable area "+a.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:a}=e;return a?"Draggable item "+n.id+" was dropped over droppable area "+a.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function U5(e){let{announcements:n=L5,container:a,hiddenTextDescribedById:i,screenReaderInstructions:o=O5}=e;const{announce:u,announcement:d}=M5(),h=So("DndLiveRegion"),[g,x]=p.useState(!1);if(p.useEffect(()=>{x(!0)},[]),R5(p.useMemo(()=>({onDragStart(v){let{active:w}=v;u(n.onDragStart({active:w}))},onDragMove(v){let{active:w,over:C}=v;n.onDragMove&&u(n.onDragMove({active:w,over:C}))},onDragOver(v){let{active:w,over:C}=v;u(n.onDragOver({active:w,over:C}))},onDragEnd(v){let{active:w,over:C}=v;u(n.onDragEnd({active:w,over:C}))},onDragCancel(v){let{active:w,over:C}=v;u(n.onDragCancel({active:w,over:C}))}}),[u,n])),!g)return null;const b=_t.createElement(_t.Fragment,null,_t.createElement(D5,{id:i,value:o.draggable}),_t.createElement(T5,{id:h,announcement:d}));return a?ps.createPortal(b,a):b}var hn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(hn||(hn={}));function uu(){}function B5(e,n){return p.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function $5(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return p.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const Zs=Object.freeze({x:0,y:0});function q5(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function F5(e,n){let{data:{value:a}}=e,{data:{value:i}}=n;return a-i}function H5(e,n){let{data:{value:a}}=e,{data:{value:i}}=n;return i-a}function Z5(e,n){if(!e||e.length===0)return null;const[a]=e;return a[n]}function jb(e,n,a){return n===void 0&&(n=e.left),a===void 0&&(a=e.top),{x:n+e.width*.5,y:a+e.height*.5}}const V5=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:i}=e;const o=jb(n,n.left,n.top),u=[];for(const d of i){const{id:h}=d,g=a.get(h);if(g){const x=q5(jb(g),o);u.push({id:h,data:{droppableContainer:d,value:x}})}}return u.sort(F5)};function I5(e,n){const a=Math.max(n.top,e.top),i=Math.max(n.left,e.left),o=Math.min(n.left+n.width,e.left+e.width),u=Math.min(n.top+n.height,e.top+e.height),d=o-i,h=u-a;if(i<o&&a<u){const g=n.width*n.height,x=e.width*e.height,b=d*h,v=b/(g+x-b);return Number(v.toFixed(4))}return 0}const Q5=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:i}=e;const o=[];for(const u of i){const{id:d}=u,h=a.get(d);if(h){const g=I5(h,n);g>0&&o.push({id:d,data:{droppableContainer:u,value:g}})}}return o.sort(H5)};function P5(e,n,a){return{...e,scaleX:n&&a?n.width/a.width:1,scaleY:n&&a?n.height/a.height:1}}function $y(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Zs}function W5(e){return function(a){for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return o.reduce((d,h)=>({...d,top:d.top+e*h.y,bottom:d.bottom+e*h.y,left:d.left+e*h.x,right:d.right+e*h.x}),{...a})}}const K5=W5(1);function G5(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Y5(e,n,a){const i=G5(n);if(!i)return e;const{scaleX:o,scaleY:u,x:d,y:h}=i,g=e.left-d-(1-o)*parseFloat(a),x=e.top-h-(1-u)*parseFloat(a.slice(a.indexOf(" ")+1)),b=o?e.width/o:e.width,v=u?e.height/u:e.height;return{width:b,height:v,top:x,right:g+b,bottom:x+v,left:g}}const X5={ignoreTransform:!1};function Xi(e,n){n===void 0&&(n=X5);let a=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:x,transformOrigin:b}=Yn(e).getComputedStyle(e);x&&(a=Y5(a,x,b))}const{top:i,left:o,width:u,height:d,bottom:h,right:g}=a;return{top:i,left:o,width:u,height:d,bottom:h,right:g}}function Sb(e){return Xi(e,{ignoreTransform:!0})}function J5(e){const n=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:n,bottom:a,width:n,height:a}}function eA(e,n){return n===void 0&&(n=Yn(e).getComputedStyle(e)),n.position==="fixed"}function tA(e,n){n===void 0&&(n=Yn(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=n[o];return typeof u=="string"?a.test(u):!1})}function wm(e,n){const a=[];function i(o){if(n!=null&&a.length>=n||!o)return a;if(bm(o)&&o.scrollingElement!=null&&!a.includes(o.scrollingElement))return a.push(o.scrollingElement),a;if(!wo(o)||Ly(o)||a.includes(o))return a;const u=Yn(e).getComputedStyle(o);return o!==e&&tA(o,u)&&a.push(o),eA(o,u)?a:i(o.parentNode)}return e?i(e):a}function qy(e){const[n]=wm(e,1);return n??null}function oh(e){return!ku||!e?null:Gi(e)?e:xm(e)?bm(e)||e===Yi(e).scrollingElement?window:wo(e)?e:null:null}function Fy(e){return Gi(e)?e.scrollX:e.scrollLeft}function Hy(e){return Gi(e)?e.scrollY:e.scrollTop}function Bh(e){return{x:Fy(e),y:Hy(e)}}var wn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(wn||(wn={}));function Zy(e){return!ku||!e?!1:e===document.scrollingElement}function Vy(e){const n={x:0,y:0},a=Zy(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},o=e.scrollTop<=n.y,u=e.scrollLeft<=n.x,d=e.scrollTop>=i.y,h=e.scrollLeft>=i.x;return{isTop:o,isLeft:u,isBottom:d,isRight:h,maxScroll:i,minScroll:n}}const nA={x:.2,y:.2};function sA(e,n,a,i,o){let{top:u,left:d,right:h,bottom:g}=a;i===void 0&&(i=10),o===void 0&&(o=nA);const{isTop:x,isBottom:b,isLeft:v,isRight:w}=Vy(e),C={x:0,y:0},N={x:0,y:0},j={height:n.height*o.y,width:n.width*o.x};return!x&&u<=n.top+j.height?(C.y=wn.Backward,N.y=i*Math.abs((n.top+j.height-u)/j.height)):!b&&g>=n.bottom-j.height&&(C.y=wn.Forward,N.y=i*Math.abs((n.bottom-j.height-g)/j.height)),!w&&h>=n.right-j.width?(C.x=wn.Forward,N.x=i*Math.abs((n.right-j.width-h)/j.width)):!v&&d<=n.left+j.width&&(C.x=wn.Backward,N.x=i*Math.abs((n.left+j.width-d)/j.width)),{direction:C,speed:N}}function aA(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:n,left:a,right:i,bottom:o}=e.getBoundingClientRect();return{top:n,left:a,right:i,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Iy(e){return e.reduce((n,a)=>Hi(n,Bh(a)),Zs)}function rA(e){return e.reduce((n,a)=>n+Fy(a),0)}function iA(e){return e.reduce((n,a)=>n+Hy(a),0)}function lA(e,n){if(n===void 0&&(n=Xi),!e)return;const{top:a,left:i,bottom:o,right:u}=n(e);qy(e)&&(o<=0||u<=0||a>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const oA=[["x",["left","right"],rA],["y",["top","bottom"],iA]];class jm{constructor(n,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=wm(a),o=Iy(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[u,d,h]of oA)for(const g of d)Object.defineProperty(this,g,{get:()=>{const x=h(i),b=o[u]-x;return this.rect[g]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class no{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...a)})},this.target=n}add(n,a,i){var o;(o=this.target)==null||o.addEventListener(n,a,i),this.listeners.push([n,a,i])}}function cA(e){const{EventTarget:n}=Yn(e);return e instanceof n?e:Yi(e)}function ch(e,n){const a=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(a**2+i**2)>n:"x"in n&&"y"in n?a>n.x&&i>n.y:"x"in n?a>n.x:"y"in n?i>n.y:!1}var Ds;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ds||(Ds={}));function Cb(e){e.preventDefault()}function uA(e){e.stopPropagation()}var xt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(xt||(xt={}));const Qy={start:[xt.Space,xt.Enter],cancel:[xt.Esc],end:[xt.Space,xt.Enter,xt.Tab]},dA=(e,n)=>{let{currentCoordinates:a}=n;switch(e.code){case xt.Right:return{...a,x:a.x+25};case xt.Left:return{...a,x:a.x-25};case xt.Down:return{...a,y:a.y+25};case xt.Up:return{...a,y:a.y-25}}};class Py{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:a}}=n;this.props=n,this.listeners=new no(Yi(a)),this.windowListeners=new no(Yn(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ds.Resize,this.handleCancel),this.windowListeners.add(Ds.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ds.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:a}=this.props,i=n.node.current;i&&lA(i),a(Zs)}handleKeyDown(n){if(ym(n)){const{active:a,context:i,options:o}=this.props,{keyboardCodes:u=Qy,coordinateGetter:d=dA,scrollBehavior:h="smooth"}=o,{code:g}=n;if(u.end.includes(g)){this.handleEnd(n);return}if(u.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:x}=i.current,b=x?{x:x.left,y:x.top}:Zs;this.referenceCoordinates||(this.referenceCoordinates=b);const v=d(n,{active:a,context:i.current,currentCoordinates:b});if(v){const w=cu(v,b),C={x:0,y:0},{scrollableAncestors:N}=i.current;for(const j of N){const k=n.code,{isTop:T,isRight:E,isLeft:B,isBottom:Q,maxScroll:O,minScroll:I}=Vy(j),A=aA(j),V={x:Math.min(k===xt.Right?A.right-A.width/2:A.right,Math.max(k===xt.Right?A.left:A.left+A.width/2,v.x)),y:Math.min(k===xt.Down?A.bottom-A.height/2:A.bottom,Math.max(k===xt.Down?A.top:A.top+A.height/2,v.y))},W=k===xt.Right&&!E||k===xt.Left&&!B,X=k===xt.Down&&!Q||k===xt.Up&&!T;if(W&&V.x!==v.x){const J=j.scrollLeft+w.x,L=k===xt.Right&&J<=O.x||k===xt.Left&&J>=I.x;if(L&&!w.y){j.scrollTo({left:J,behavior:h});return}L?C.x=j.scrollLeft-J:C.x=k===xt.Right?j.scrollLeft-O.x:j.scrollLeft-I.x,C.x&&j.scrollBy({left:-C.x,behavior:h});break}else if(X&&V.y!==v.y){const J=j.scrollTop+w.y,L=k===xt.Down&&J<=O.y||k===xt.Up&&J>=I.y;if(L&&!w.x){j.scrollTo({top:J,behavior:h});return}L?C.y=j.scrollTop-J:C.y=k===xt.Down?j.scrollTop-O.y:j.scrollTop-I.y,C.y&&j.scrollBy({top:-C.y,behavior:h});break}}this.handleMove(n,Hi(cu(v,this.referenceCoordinates),C))}}}handleMove(n,a){const{onMove:i}=this.props;n.preventDefault(),i(a)}handleEnd(n){const{onEnd:a}=this.props;n.preventDefault(),this.detach(),a()}handleCancel(n){const{onCancel:a}=this.props;n.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Py.activators=[{eventName:"onKeyDown",handler:(e,n,a)=>{let{keyboardCodes:i=Qy,onActivation:o}=n,{active:u}=a;const{code:d}=e.nativeEvent;if(i.start.includes(d)){const h=u.activatorNode.current;return h&&e.target!==h?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Nb(e){return!!(e&&"distance"in e)}function Eb(e){return!!(e&&"delay"in e)}class Sm{constructor(n,a,i){var o;i===void 0&&(i=cA(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=a;const{event:u}=n,{target:d}=u;this.props=n,this.events=a,this.document=Yi(d),this.documentListeners=new no(this.document),this.listeners=new no(i),this.windowListeners=new no(Yn(d)),this.initialCoordinates=(o=Uh(u))!=null?o:Zs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:a,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Ds.Resize,this.handleCancel),this.windowListeners.add(Ds.DragStart,Cb),this.windowListeners.add(Ds.VisibilityChange,this.handleCancel),this.windowListeners.add(Ds.ContextMenu,Cb),this.documentListeners.add(Ds.Keydown,this.handleKeydown),a){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Eb(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(Nb(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,a){const{active:i,onPending:o}=this.props;o(i,n,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:n}=this,{onStart:a}=this.props;n&&(this.activated=!0,this.documentListeners.add(Ds.Click,uA,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ds.SelectionChange,this.removeTextSelection),a(n))}handleMove(n){var a;const{activated:i,initialCoordinates:o,props:u}=this,{onMove:d,options:{activationConstraint:h}}=u;if(!o)return;const g=(a=Uh(n))!=null?a:Zs,x=cu(o,g);if(!i&&h){if(Nb(h)){if(h.tolerance!=null&&ch(x,h.tolerance))return this.handleCancel();if(ch(x,h.distance))return this.handleStart()}if(Eb(h)&&ch(x,h.tolerance))return this.handleCancel();this.handlePending(h,x);return}n.cancelable&&n.preventDefault(),d(g)}handleEnd(){const{onAbort:n,onEnd:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleCancel(){const{onAbort:n,onCancel:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleKeydown(n){n.code===xt.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const fA={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Cm extends Sm{constructor(n){const{event:a}=n,i=Yi(a.target);super(n,fA,i)}}Cm.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:i}=n;return!a.isPrimary||a.button!==0?!1:(i?.({event:a}),!0)}}];const hA={move:{name:"mousemove"},end:{name:"mouseup"}};var $h;(function(e){e[e.RightClick=2]="RightClick"})($h||($h={}));class mA extends Sm{constructor(n){super(n,hA,Yi(n.event.target))}}mA.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:i}=n;return a.button===$h.RightClick?!1:(i?.({event:a}),!0)}}];const uh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class pA extends Sm{constructor(n){super(n,uh)}static setup(){return window.addEventListener(uh.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(uh.move.name,n)};function n(){}}}pA.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:i}=n;const{touches:o}=a;return o.length>1?!1:(i?.({event:a}),!0)}}];var so;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(so||(so={}));var du;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(du||(du={}));function gA(e){let{acceleration:n,activator:a=so.Pointer,canScroll:i,draggingRect:o,enabled:u,interval:d=5,order:h=du.TreeOrder,pointerCoordinates:g,scrollableAncestors:x,scrollableAncestorRects:b,delta:v,threshold:w}=e;const C=bA({delta:v,disabled:!u}),[N,j]=N5(),k=p.useRef({x:0,y:0}),T=p.useRef({x:0,y:0}),E=p.useMemo(()=>{switch(a){case so.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case so.DraggableRect:return o}},[a,o,g]),B=p.useRef(null),Q=p.useCallback(()=>{const I=B.current;if(!I)return;const A=k.current.x*T.current.x,V=k.current.y*T.current.y;I.scrollBy(A,V)},[]),O=p.useMemo(()=>h===du.TreeOrder?[...x].reverse():x,[h,x]);p.useEffect(()=>{if(!u||!x.length||!E){j();return}for(const I of O){if(i?.(I)===!1)continue;const A=x.indexOf(I),V=b[A];if(!V)continue;const{direction:W,speed:X}=sA(I,V,E,n,w);for(const J of["x","y"])C[J][W[J]]||(X[J]=0,W[J]=0);if(X.x>0||X.y>0){j(),B.current=I,N(Q,d),k.current=X,T.current=W;return}}k.current={x:0,y:0},T.current={x:0,y:0},j()},[n,Q,i,j,u,d,JSON.stringify(E),JSON.stringify(C),N,x,O,b,JSON.stringify(w)])}const xA={x:{[wn.Backward]:!1,[wn.Forward]:!1},y:{[wn.Backward]:!1,[wn.Forward]:!1}};function bA(e){let{delta:n,disabled:a}=e;const i=Lh(n);return jo(o=>{if(a||!i||!o)return xA;const u={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[wn.Backward]:o.x[wn.Backward]||u.x===-1,[wn.Forward]:o.x[wn.Forward]||u.x===1},y:{[wn.Backward]:o.y[wn.Backward]||u.y===-1,[wn.Forward]:o.y[wn.Forward]||u.y===1}}},[a,n,i])}function vA(e,n){const a=n!=null?e.get(n):void 0,i=a?a.node.current:null;return jo(o=>{var u;return n==null?null:(u=i??o)!=null?u:null},[i,n])}function yA(e,n){return p.useMemo(()=>e.reduce((a,i)=>{const{sensor:o}=i,u=o.activators.map(d=>({eventName:d.eventName,handler:n(d.handler,i)}));return[...a,...u]},[]),[e,n])}var mo;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mo||(mo={}));var qh;(function(e){e.Optimized="optimized"})(qh||(qh={}));const kb=new Map;function wA(e,n){let{dragging:a,dependencies:i,config:o}=n;const[u,d]=p.useState(null),{frequency:h,measure:g,strategy:x}=o,b=p.useRef(e),v=k(),w=fo(v),C=p.useCallback(function(T){T===void 0&&(T=[]),!w.current&&d(E=>E===null?T:E.concat(T.filter(B=>!E.includes(B))))},[w]),N=p.useRef(null),j=jo(T=>{if(v&&!a)return kb;if(!T||T===kb||b.current!==e||u!=null){const E=new Map;for(let B of e){if(!B)continue;if(u&&u.length>0&&!u.includes(B.id)&&B.rect.current){E.set(B.id,B.rect.current);continue}const Q=B.node.current,O=Q?new jm(g(Q),Q):null;B.rect.current=O,O&&E.set(B.id,O)}return E}return T},[e,u,a,v,g]);return p.useEffect(()=>{b.current=e},[e]),p.useEffect(()=>{v||C()},[a,v]),p.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),p.useEffect(()=>{v||typeof h!="number"||N.current!==null||(N.current=setTimeout(()=>{C(),N.current=null},h))},[h,v,C,...i]),{droppableRects:j,measureDroppableContainers:C,measuringScheduled:u!=null};function k(){switch(x){case mo.Always:return!1;case mo.BeforeDragging:return a;default:return!a}}}function Wy(e,n){return jo(a=>e?a||(typeof n=="function"?n(e):e):null,[n,e])}function jA(e,n){return Wy(e,n)}function SA(e){let{callback:n,disabled:a}=e;const i=vm(n),o=p.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(i)},[i,a]);return p.useEffect(()=>()=>o?.disconnect(),[o]),o}function _u(e){let{callback:n,disabled:a}=e;const i=vm(n),o=p.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(i)},[a]);return p.useEffect(()=>()=>o?.disconnect(),[o]),o}function CA(e){return new jm(Xi(e),e)}function _b(e,n,a){n===void 0&&(n=CA);const[i,o]=p.useState(null);function u(){o(g=>{if(!e)return null;if(e.isConnected===!1){var x;return(x=g??a)!=null?x:null}const b=n(e);return JSON.stringify(g)===JSON.stringify(b)?g:b})}const d=SA({callback(g){if(e)for(const x of g){const{type:b,target:v}=x;if(b==="childList"&&v instanceof HTMLElement&&v.contains(e)){u();break}}}}),h=_u({callback:u});return aa(()=>{u(),e?(h?.observe(e),d?.observe(document.body,{childList:!0,subtree:!0})):(h?.disconnect(),d?.disconnect())},[e]),i}function NA(e){const n=Wy(e);return $y(e,n)}const Ab=[];function EA(e){const n=p.useRef(e),a=jo(i=>e?i&&i!==Ab&&e&&n.current&&e.parentNode===n.current.parentNode?i:wm(e):Ab,[e]);return p.useEffect(()=>{n.current=e},[e]),a}function kA(e){const[n,a]=p.useState(null),i=p.useRef(e),o=p.useCallback(u=>{const d=oh(u.target);d&&a(h=>h?(h.set(d,Bh(d)),new Map(h)):null)},[]);return p.useEffect(()=>{const u=i.current;if(e!==u){d(u);const h=e.map(g=>{const x=oh(g);return x?(x.addEventListener("scroll",o,{passive:!0}),[x,Bh(x)]):null}).filter(g=>g!=null);a(h.length?new Map(h):null),i.current=e}return()=>{d(e),d(u)};function d(h){h.forEach(g=>{const x=oh(g);x?.removeEventListener("scroll",o)})}},[o,e]),p.useMemo(()=>e.length?n?Array.from(n.values()).reduce((u,d)=>Hi(u,d),Zs):Iy(e):Zs,[e,n])}function Db(e,n){n===void 0&&(n=[]);const a=p.useRef(null);return p.useEffect(()=>{a.current=null},n),p.useEffect(()=>{const i=e!==Zs;i&&!a.current&&(a.current=e),!i&&a.current&&(a.current=null)},[e]),a.current?cu(e,a.current):Zs}function _A(e){p.useEffect(()=>{if(!ku)return;const n=e.map(a=>{let{sensor:i}=a;return i.setup==null?void 0:i.setup()});return()=>{for(const a of n)a?.()}},e.map(n=>{let{sensor:a}=n;return a}))}function AA(e,n){return p.useMemo(()=>e.reduce((a,i)=>{let{eventName:o,handler:u}=i;return a[o]=d=>{u(d,n)},a},{}),[e,n])}function Ky(e){return p.useMemo(()=>e?J5(e):null,[e])}const Tb=[];function DA(e,n){n===void 0&&(n=Xi);const[a]=e,i=Ky(a?Yn(a):null),[o,u]=p.useState(Tb);function d(){u(()=>e.length?e.map(g=>Zy(g)?i:new jm(n(g),g)):Tb)}const h=_u({callback:d});return aa(()=>{h?.disconnect(),d(),e.forEach(g=>h?.observe(g))},[e]),o}function TA(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return wo(n)?n:e}function MA(e){let{measure:n}=e;const[a,i]=p.useState(null),o=p.useCallback(x=>{for(const{target:b}of x)if(wo(b)){i(v=>{const w=n(b);return v?{...v,width:w.width,height:w.height}:w});break}},[n]),u=_u({callback:o}),d=p.useCallback(x=>{const b=TA(x);u?.disconnect(),b&&u?.observe(b),i(b?n(b):null)},[n,u]),[h,g]=ou(d);return p.useMemo(()=>({nodeRef:h,rect:a,setRef:g}),[a,h,g])}const RA=[{sensor:Cm,options:{}},{sensor:Py,options:{}}],zA={current:{}},Pc={draggable:{measure:Sb},droppable:{measure:Sb,strategy:mo.WhileDragging,frequency:qh.Optimized},dragOverlay:{measure:Xi}};class ao extends Map{get(n){var a;return n!=null&&(a=super.get(n))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:a}=n;return!a})}getNodeFor(n){var a,i;return(a=(i=this.get(n))==null?void 0:i.node.current)!=null?a:void 0}}const OA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ao,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:uu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Pc,measureDroppableContainers:uu,windowRect:null,measuringScheduled:!1},LA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:uu,draggableNodes:new Map,over:null,measureDroppableContainers:uu},Au=p.createContext(LA),Gy=p.createContext(OA);function UA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ao}}}function BA(e,n){switch(n.type){case hn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case hn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case hn.DragEnd:case hn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case hn.RegisterDroppable:{const{element:a}=n,{id:i}=a,o=new ao(e.droppable.containers);return o.set(i,a),{...e,droppable:{...e.droppable,containers:o}}}case hn.SetDroppableDisabled:{const{id:a,key:i,disabled:o}=n,u=e.droppable.containers.get(a);if(!u||i!==u.key)return e;const d=new ao(e.droppable.containers);return d.set(a,{...u,disabled:o}),{...e,droppable:{...e.droppable,containers:d}}}case hn.UnregisterDroppable:{const{id:a,key:i}=n,o=e.droppable.containers.get(a);if(!o||i!==o.key)return e;const u=new ao(e.droppable.containers);return u.delete(a),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function $A(e){let{disabled:n}=e;const{active:a,activatorEvent:i,draggableNodes:o}=p.useContext(Au),u=Lh(i),d=Lh(a?.id);return p.useEffect(()=>{if(!n&&!i&&u&&d!=null){if(!ym(u)||document.activeElement===u.target)return;const h=o.get(d);if(!h)return;const{activatorNode:g,node:x}=h;if(!g.current&&!x.current)return;requestAnimationFrame(()=>{for(const b of[g.current,x.current]){if(!b)continue;const v=_5(b);if(v){v.focus();break}}})}},[i,n,o,d,u]),null}function qA(e,n){let{transform:a,...i}=n;return e!=null&&e.length?e.reduce((o,u)=>u({transform:o,...i}),a):a}function FA(e){return p.useMemo(()=>({draggable:{...Pc.draggable,...e?.draggable},droppable:{...Pc.droppable,...e?.droppable},dragOverlay:{...Pc.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function HA(e){let{activeNode:n,measure:a,initialRect:i,config:o=!0}=e;const u=p.useRef(!1),{x:d,y:h}=typeof o=="boolean"?{x:o,y:o}:o;aa(()=>{if(!d&&!h||!n){u.current=!1;return}if(u.current||!i)return;const x=n?.node.current;if(!x||x.isConnected===!1)return;const b=a(x),v=$y(b,i);if(d||(v.x=0),h||(v.y=0),u.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const w=qy(x);w&&w.scrollBy({top:v.y,left:v.x})}},[n,d,h,i,a])}const Yy=p.createContext({...Zs,scaleX:1,scaleY:1});var lr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(lr||(lr={}));const ZA=p.memo(function(n){var a,i,o,u;let{id:d,accessibility:h,autoScroll:g=!0,children:x,sensors:b=RA,collisionDetection:v=Q5,measuring:w,modifiers:C,...N}=n;const j=p.useReducer(BA,void 0,UA),[k,T]=j,[E,B]=z5(),[Q,O]=p.useState(lr.Uninitialized),I=Q===lr.Initialized,{draggable:{active:A,nodes:V,translate:W},droppable:{containers:X}}=k,J=A!=null?V.get(A):null,L=p.useRef({initial:null,translated:null}),ae=p.useMemo(()=>{var ut;return A!=null?{id:A,data:(ut=J?.data)!=null?ut:zA,rect:L}:null},[A,J]),de=p.useRef(null),[be,D]=p.useState(null),[U,ie]=p.useState(null),me=fo(N,Object.values(N)),se=So("DndDescribedBy",d),_=p.useMemo(()=>X.getEnabled(),[X]),P=FA(w),{droppableRects:le,measureDroppableContainers:q,measuringScheduled:ee}=wA(_,{dragging:I,dependencies:[W.x,W.y],config:P.droppable}),H=vA(V,A),K=p.useMemo(()=>U?Uh(U):null,[U]),R=Dt(),Z=jA(H,P.draggable.measure);HA({activeNode:A!=null?V.get(A):null,config:R.layoutShiftCompensation,initialRect:Z,measure:P.draggable.measure});const ge=_b(H,P.draggable.measure,Z),De=_b(H?H.parentElement:null),Ze=p.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:V,draggingNode:null,draggingNodeRect:null,droppableContainers:X,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=X.getNodeFor((a=Ze.current.over)==null?void 0:a.id),ye=MA({measure:P.dragOverlay.measure}),Ce=(i=ye.nodeRef.current)!=null?i:H,$e=I?(o=ye.rect)!=null?o:ge:null,We=!!(ye.nodeRef.current&&ye.rect),at=NA(We?null:ge),Ot=Ky(Ce?Yn(Ce):null),M=EA(I?st??H:null),Y=DA(M),ce=qA(C,{transform:{x:W.x-at.x,y:W.y-at.y,scaleX:1,scaleY:1},activatorEvent:U,active:ae,activeNodeRect:ge,containerNodeRect:De,draggingNodeRect:$e,over:Ze.current.over,overlayNodeRect:ye.rect,scrollableAncestors:M,scrollableAncestorRects:Y,windowRect:Ot}),Ee=K?Hi(K,W):null,we=kA(M),Se=Db(we),Re=Db(we,[ge]),Qe=Hi(ce,Se),Pe=$e?K5($e,ce):null,mt=ae&&Pe?v({active:ae,collisionRect:Pe,droppableRects:le,droppableContainers:_,pointerCoordinates:Ee}):null,Ne=Z5(mt,"id"),[Ae,Fe]=p.useState(null),vt=We?ce:Hi(ce,Re),Xe=P5(vt,(u=Ae?.rect)!=null?u:null,ge),At=p.useRef(null),Rt=p.useCallback((ut,pt)=>{let{sensor:Bt,options:un}=pt;if(de.current==null)return;const Sn=V.get(de.current);if(!Sn)return;const tn=ut.nativeEvent,gn=new Bt({active:de.current,activeNode:Sn,event:tn,options:un,context:Ze,onAbort(Qt){if(!V.get(Qt))return;const{onDragAbort:Cn}=me.current,Hn={id:Qt};Cn?.(Hn),E({type:"onDragAbort",event:Hn})},onPending(Qt,Jn,Cn,Hn){if(!V.get(Qt))return;const{onDragPending:xs}=me.current,Zn={id:Qt,constraint:Jn,initialCoordinates:Cn,offset:Hn};xs?.(Zn),E({type:"onDragPending",event:Zn})},onStart(Qt){const Jn=de.current;if(Jn==null)return;const Cn=V.get(Jn);if(!Cn)return;const{onDragStart:Hn}=me.current,gs={activatorEvent:tn,active:{id:Jn,data:Cn.data,rect:L}};ps.unstable_batchedUpdates(()=>{Hn?.(gs),O(lr.Initializing),T({type:hn.DragStart,initialCoordinates:Qt,active:Jn}),E({type:"onDragStart",event:gs}),D(At.current),ie(tn)})},onMove(Qt){T({type:hn.DragMove,coordinates:Qt})},onEnd:Fn(hn.DragEnd),onCancel:Fn(hn.DragCancel)});At.current=gn;function Fn(Qt){return async function(){const{active:Cn,collisions:Hn,over:gs,scrollAdjustedTranslate:xs}=Ze.current;let Zn=null;if(Cn&&xs){const{cancelDrop:es}=me.current;Zn={activatorEvent:tn,active:Cn,collisions:Hn,delta:xs,over:gs},Qt===hn.DragEnd&&typeof es=="function"&&await Promise.resolve(es(Zn))&&(Qt=hn.DragCancel)}de.current=null,ps.unstable_batchedUpdates(()=>{T({type:Qt}),O(lr.Uninitialized),Fe(null),D(null),ie(null),At.current=null;const es=Qt===hn.DragEnd?"onDragEnd":"onDragCancel";if(Zn){const Ln=me.current[es];Ln?.(Zn),E({type:es,event:Zn})}})}}},[V]),Xn=p.useCallback((ut,pt)=>(Bt,un)=>{const Sn=Bt.nativeEvent,tn=V.get(un);if(de.current!==null||!tn||Sn.dndKit||Sn.defaultPrevented)return;const gn={active:tn};ut(Bt,pt.options,gn)===!0&&(Sn.dndKit={capturedBy:pt.sensor},de.current=un,Rt(Bt,pt))},[V,Rt]),ue=yA(b,Xn);_A(b),aa(()=>{ge&&Q===lr.Initializing&&O(lr.Initialized)},[ge,Q]),p.useEffect(()=>{const{onDragMove:ut}=me.current,{active:pt,activatorEvent:Bt,collisions:un,over:Sn}=Ze.current;if(!pt||!Bt)return;const tn={active:pt,activatorEvent:Bt,collisions:un,delta:{x:Qe.x,y:Qe.y},over:Sn};ps.unstable_batchedUpdates(()=>{ut?.(tn),E({type:"onDragMove",event:tn})})},[Qe.x,Qe.y]),p.useEffect(()=>{const{active:ut,activatorEvent:pt,collisions:Bt,droppableContainers:un,scrollAdjustedTranslate:Sn}=Ze.current;if(!ut||de.current==null||!pt||!Sn)return;const{onDragOver:tn}=me.current,gn=un.get(Ne),Fn=gn&&gn.rect.current?{id:gn.id,rect:gn.rect.current,data:gn.data,disabled:gn.disabled}:null,Qt={active:ut,activatorEvent:pt,collisions:Bt,delta:{x:Sn.x,y:Sn.y},over:Fn};ps.unstable_batchedUpdates(()=>{Fe(Fn),tn?.(Qt),E({type:"onDragOver",event:Qt})})},[Ne]),aa(()=>{Ze.current={activatorEvent:U,active:ae,activeNode:H,collisionRect:Pe,collisions:mt,droppableRects:le,draggableNodes:V,draggingNode:Ce,draggingNodeRect:$e,droppableContainers:X,over:Ae,scrollableAncestors:M,scrollAdjustedTranslate:Qe},L.current={initial:$e,translated:Pe}},[ae,H,mt,Pe,V,Ce,$e,le,X,Ae,M,Qe]),gA({...R,delta:W,draggingRect:Pe,pointerCoordinates:Ee,scrollableAncestors:M,scrollableAncestorRects:Y});const _e=p.useMemo(()=>({active:ae,activeNode:H,activeNodeRect:ge,activatorEvent:U,collisions:mt,containerNodeRect:De,dragOverlay:ye,draggableNodes:V,droppableContainers:X,droppableRects:le,over:Ae,measureDroppableContainers:q,scrollableAncestors:M,scrollableAncestorRects:Y,measuringConfiguration:P,measuringScheduled:ee,windowRect:Ot}),[ae,H,ge,U,mt,De,ye,V,X,le,Ae,q,M,Y,P,ee,Ot]),rt=p.useMemo(()=>({activatorEvent:U,activators:ue,active:ae,activeNodeRect:ge,ariaDescribedById:{draggable:se},dispatch:T,draggableNodes:V,over:Ae,measureDroppableContainers:q}),[U,ue,ae,ge,T,se,V,Ae,q]);return _t.createElement(By.Provider,{value:B},_t.createElement(Au.Provider,{value:rt},_t.createElement(Gy.Provider,{value:_e},_t.createElement(Yy.Provider,{value:Xe},x)),_t.createElement($A,{disabled:h?.restoreFocus===!1})),_t.createElement(U5,{...h,hiddenTextDescribedById:se}));function Dt(){const ut=be?.autoScrollEnabled===!1,pt=typeof g=="object"?g.enabled===!1:g===!1,Bt=I&&!ut&&!pt;return typeof g=="object"?{...g,enabled:Bt}:{enabled:Bt}}}),VA=p.createContext(null),Mb="button",IA="Draggable";function QA(e){let{id:n,data:a,disabled:i=!1,attributes:o}=e;const u=So(IA),{activators:d,activatorEvent:h,active:g,activeNodeRect:x,ariaDescribedById:b,draggableNodes:v,over:w}=p.useContext(Au),{role:C=Mb,roleDescription:N="draggable",tabIndex:j=0}=o??{},k=g?.id===n,T=p.useContext(k?Yy:VA),[E,B]=ou(),[Q,O]=ou(),I=AA(d,n),A=fo(a);aa(()=>(v.set(n,{id:n,key:u,node:E,activatorNode:Q,data:A}),()=>{const W=v.get(n);W&&W.key===u&&v.delete(n)}),[v,n]);const V=p.useMemo(()=>({role:C,tabIndex:j,"aria-disabled":i,"aria-pressed":k&&C===Mb?!0:void 0,"aria-roledescription":N,"aria-describedby":b.draggable}),[i,C,j,k,N,b.draggable]);return{active:g,activatorEvent:h,activeNodeRect:x,attributes:V,isDragging:k,listeners:i?void 0:I,node:E,over:w,setNodeRef:B,setActivatorNodeRef:O,transform:T}}function PA(){return p.useContext(Gy)}const WA="Droppable",KA={timeout:25};function GA(e){let{data:n,disabled:a=!1,id:i,resizeObserverConfig:o}=e;const u=So(WA),{active:d,dispatch:h,over:g,measureDroppableContainers:x}=p.useContext(Au),b=p.useRef({disabled:a}),v=p.useRef(!1),w=p.useRef(null),C=p.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:k}={...KA,...o},T=fo(j??i),E=p.useCallback(()=>{if(!v.current){v.current=!0;return}C.current!=null&&clearTimeout(C.current),C.current=setTimeout(()=>{x(Array.isArray(T.current)?T.current:[T.current]),C.current=null},k)},[k]),B=_u({callback:E,disabled:N||!d}),Q=p.useCallback((V,W)=>{B&&(W&&(B.unobserve(W),v.current=!1),V&&B.observe(V))},[B]),[O,I]=ou(Q),A=fo(n);return p.useEffect(()=>{!B||!O.current||(B.disconnect(),v.current=!1,B.observe(O.current))},[O,B]),p.useEffect(()=>(h({type:hn.RegisterDroppable,element:{id:i,key:u,disabled:a,node:O,rect:w,data:A}}),()=>h({type:hn.UnregisterDroppable,key:u,id:i})),[i]),p.useEffect(()=>{a!==b.current.disabled&&(h({type:hn.SetDroppableDisabled,id:i,key:u,disabled:a}),b.current.disabled=a)},[i,u,a,h]),{active:d,rect:w,isOver:g?.id===i,node:O,over:g,setNodeRef:I}}function Xy(e,n,a){const i=e.slice();return i.splice(a<0?i.length+a:a,0,i.splice(n,1)[0]),i}function YA(e,n){return e.reduce((a,i,o)=>{const u=n.get(i);return u&&(a[o]=u),a},Array(e.length))}function Hc(e){return e!==null&&e>=0}function XA(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==n[a])return!1;return!0}function JA(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Zc={scaleX:1,scaleY:1},eD=e=>{var n;let{rects:a,activeNodeRect:i,activeIndex:o,overIndex:u,index:d}=e;const h=(n=a[o])!=null?n:i;if(!h)return null;const g=tD(a,d,o);if(d===o){const x=a[u];return x?{x:o<u?x.left+x.width-(h.left+h.width):x.left-h.left,y:0,...Zc}:null}return d>o&&d<=u?{x:-h.width-g,y:0,...Zc}:d<o&&d>=u?{x:h.width+g,y:0,...Zc}:{x:0,y:0,...Zc}};function tD(e,n,a){const i=e[n],o=e[n-1],u=e[n+1];return!i||!o&&!u?0:a<n?o?i.left-(o.left+o.width):u.left-(i.left+i.width):u?u.left-(i.left+i.width):i.left-(o.left+o.width)}const Jy=e=>{let{rects:n,activeIndex:a,overIndex:i,index:o}=e;const u=Xy(n,i,a),d=n[o],h=u[o];return!h||!d?null:{x:h.left-d.left,y:h.top-d.top,scaleX:h.width/d.width,scaleY:h.height/d.height}},ew="Sortable",tw=_t.createContext({activeIndex:-1,containerId:ew,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jy,disabled:{draggable:!1,droppable:!1}});function nD(e){let{children:n,id:a,items:i,strategy:o=Jy,disabled:u=!1}=e;const{active:d,dragOverlay:h,droppableRects:g,over:x,measureDroppableContainers:b}=PA(),v=So(ew,a),w=h.rect!==null,C=p.useMemo(()=>i.map(I=>typeof I=="object"&&"id"in I?I.id:I),[i]),N=d!=null,j=d?C.indexOf(d.id):-1,k=x?C.indexOf(x.id):-1,T=p.useRef(C),E=!XA(C,T.current),B=k!==-1&&j===-1||E,Q=JA(u);aa(()=>{E&&N&&b(C)},[E,C,N,b]),p.useEffect(()=>{T.current=C},[C]);const O=p.useMemo(()=>({activeIndex:j,containerId:v,disabled:Q,disableTransforms:B,items:C,overIndex:k,useDragOverlay:w,sortedRects:YA(C,g),strategy:o}),[j,v,Q.draggable,Q.droppable,B,C,k,g,w,o]);return _t.createElement(tw.Provider,{value:O},n)}const sD=e=>{let{id:n,items:a,activeIndex:i,overIndex:o}=e;return Xy(a,i,o).indexOf(n)},aD=e=>{let{containerId:n,isSorting:a,wasDragging:i,index:o,items:u,newIndex:d,previousItems:h,previousContainerId:g,transition:x}=e;return!x||!i||h!==u&&o===d?!1:a?!0:d!==o&&n===g},rD={duration:200,easing:"ease"},nw="transform",iD=ho.Transition.toString({property:nw,duration:0,easing:"linear"}),lD={roleDescription:"sortable"};function oD(e){let{disabled:n,index:a,node:i,rect:o}=e;const[u,d]=p.useState(null),h=p.useRef(a);return aa(()=>{if(!n&&a!==h.current&&i.current){const g=o.current;if(g){const x=Xi(i.current,{ignoreTransform:!0}),b={x:g.left-x.left,y:g.top-x.top,scaleX:g.width/x.width,scaleY:g.height/x.height};(b.x||b.y)&&d(b)}}a!==h.current&&(h.current=a)},[n,a,i,o]),p.useEffect(()=>{u&&d(null)},[u]),u}function cD(e){let{animateLayoutChanges:n=aD,attributes:a,disabled:i,data:o,getNewIndex:u=sD,id:d,strategy:h,resizeObserverConfig:g,transition:x=rD}=e;const{items:b,containerId:v,activeIndex:w,disabled:C,disableTransforms:N,sortedRects:j,overIndex:k,useDragOverlay:T,strategy:E}=p.useContext(tw),B=uD(i,C),Q=b.indexOf(d),O=p.useMemo(()=>({sortable:{containerId:v,index:Q,items:b},...o}),[v,o,Q,b]),I=p.useMemo(()=>b.slice(b.indexOf(d)),[b,d]),{rect:A,node:V,isOver:W,setNodeRef:X}=GA({id:d,data:O,disabled:B.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...g}}),{active:J,activatorEvent:L,activeNodeRect:ae,attributes:de,setNodeRef:be,listeners:D,isDragging:U,over:ie,setActivatorNodeRef:me,transform:se}=QA({id:d,data:O,attributes:{...lD,...a},disabled:B.draggable}),_=C5(X,be),P=!!J,le=P&&!N&&Hc(w)&&Hc(k),q=!T&&U,ee=q&&le?se:null,K=le?ee??(h??E)({rects:j,activeNodeRect:ae,activeIndex:w,overIndex:k,index:Q}):null,R=Hc(w)&&Hc(k)?u({id:d,items:b,activeIndex:w,overIndex:k}):Q,Z=J?.id,ge=p.useRef({activeId:Z,items:b,newIndex:R,containerId:v}),De=b!==ge.current.items,Ze=n({active:J,containerId:v,isDragging:U,isSorting:P,id:d,index:Q,items:b,newIndex:ge.current.newIndex,previousItems:ge.current.items,previousContainerId:ge.current.containerId,transition:x,wasDragging:ge.current.activeId!=null}),st=oD({disabled:!Ze,index:Q,node:V,rect:A});return p.useEffect(()=>{P&&ge.current.newIndex!==R&&(ge.current.newIndex=R),v!==ge.current.containerId&&(ge.current.containerId=v),b!==ge.current.items&&(ge.current.items=b)},[P,R,v,b]),p.useEffect(()=>{if(Z===ge.current.activeId)return;if(Z!=null&&ge.current.activeId==null){ge.current.activeId=Z;return}const Ce=setTimeout(()=>{ge.current.activeId=Z},50);return()=>clearTimeout(Ce)},[Z]),{active:J,activeIndex:w,attributes:de,data:O,rect:A,index:Q,newIndex:R,items:b,isOver:W,isSorting:P,isDragging:U,listeners:D,node:V,overIndex:k,over:ie,setNodeRef:_,setActivatorNodeRef:me,setDroppableNodeRef:X,setDraggableNodeRef:be,transform:st??K,transition:ye()};function ye(){if(st||De&&ge.current.newIndex===Q)return iD;if(!(q&&!ym(L)||!x)&&(P||Ze))return ho.Transition.toString({...x,property:nw})}}function uD(e,n){var a,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:n.draggable,droppable:(i=e?.droppable)!=null?i:n.droppable}}xt.Down,xt.Right,xt.Up,xt.Left;const dD=232,fD=30,Fr=6;function ur({open:e,position:n,onClose:a,items:i,appearance:o="dark"}){const u=p.useRef(null),d=p.useRef([]),[h,g]=p.useState(null),x=p.useMemo(()=>i.findIndex(C=>!C.disabled),[i]),[b,v]=p.useState(()=>x>=0?x:0);if(p.useEffect(()=>{if(!e||!n||typeof window>"u"){g(null);return}const C=i.length*fD+Fr*2,N=Math.max(Fr,(window.innerWidth||0)-dD-Fr),j=Math.max(Fr,(window.innerHeight||0)-C-Fr),k=Math.min(Math.max(n.x,Fr),N),T=Math.min(Math.max(n.y,Fr),j);g({x:k,y:T})},[e,n,i.length]),p.useEffect(()=>{e&&v(x>=0?x:0)},[e,x]),p.useEffect(()=>{if(!e)return;d.current[b]?.focus()},[e,b]),p.useEffect(()=>{if(!e||typeof window>"u")return;const C=k=>{u.current&&(u.current.contains(k.target)||a())},N=k=>{if(u.current){if(u.current.contains(k.target)){k.preventDefault();return}a()}},j=k=>{if(k.key==="Escape"){k.preventDefault(),a();return}if(k.key==="ArrowDown"||k.key==="ArrowUp"){k.preventDefault();const T=k.key==="ArrowDown"?1:-1;v(E=>{if(i.length===0)return E;let B=E;for(let Q=0;Q<i.length;Q+=1)if(B=(B+T+i.length)%i.length,!i[B]?.disabled)return B;return E});return}if(k.key==="Enter"||k.key===" "){k.preventDefault();const T=i[b];T&&!T.disabled&&(T.onSelect(),a())}};return window.addEventListener("mousedown",C),window.addEventListener("contextmenu",N),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",C),window.removeEventListener("contextmenu",N),window.removeEventListener("keydown",j)}},[e,a,i,b]),!e||!n||typeof window>"u"||!h)return null;const w=o==="dark"?{bg:"bg-[#1f1f1f] text-[#f3f3f3]",border:"border-[#3c3c3c]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.55)]",item:"hover:bg-[#094771] focus-visible:bg-[#094771]",disabled:"text-[#7a7a7a]",danger:"text-[#f48771] hover:text-white hover:bg-[#be1a1a] focus-visible:bg-[#be1a1a]",shortcut:"text-[#9f9f9f]",separator:"border-[#3f3f3f]"}:{bg:"bg-[#fdfdfd] text-[#1f1f1f]",border:"border-[#cfcfcf]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.15)]",item:"hover:bg-[#dfe9f6] focus-visible:bg-[#dfe9f6]",disabled:"text-[#9c9c9c]",danger:"text-[#b02020] hover:bg-[#fde7e7] focus-visible:bg-[#fde7e7]",shortcut:"text-[#6d6d6d]",separator:"border-[#e0e0e0]"};return ps.createPortal(l.jsx("div",{ref:u,role:"menu",className:pe("z-[60] min-w-[200px] rounded-sm border backdrop-blur-sm",w.bg,w.border,w.shadow),style:{top:h.y,left:h.x,position:"fixed"},children:l.jsx("ul",{className:"py-1",role:"none",children:i.map((C,N)=>{const j=!!C.disabled,k=!!C.danger;return l.jsxs(p.Fragment,{children:[C.dividerAbove?l.jsx("li",{role:"separator",className:pe("mx-2 my-1 border-t",w.separator)}):null,l.jsx("li",{role:"none",children:l.jsxs("button",{ref:T=>{d.current[N]=T},type:"button",role:"menuitem",className:pe("flex w-full items-center justify-between gap-6 px-3 py-1.5 text-[13px] leading-5 outline-none transition",w.item,j&&w.disabled,k&&!j&&w.danger,j&&"cursor-default"),onClick:T=>{T.stopPropagation(),!j&&(C.onSelect(),a())},onMouseEnter:()=>{j||v(N)},disabled:j,children:[l.jsxs("span",{className:"flex min-w-0 items-center gap-3",children:[C.icon?l.jsx("span",{className:"text-base opacity-80",children:C.icon}):l.jsx("span",{className:"inline-block h-4 w-4"}),l.jsx("span",{className:"truncate",children:C.label})]}),C.shortcut?l.jsx("span",{className:pe("text-[11px] uppercase tracking-wide",w.shortcut),children:C.shortcut}):null]})})]},C.id)})})}),window.document.body)}const Ea="h-4 w-4 text-current opacity-80";function hD({filled:e}){return e?l.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"currentColor",className:"text-slate-500"})}):l.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"none",stroke:"currentColor",strokeWidth:"1.2",className:"text-slate-400"})})}function mD(){return l.jsxs("svg",{className:"h-3 w-3 animate-spin text-brand-500",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"1.2",opacity:"0.3"}),l.jsx("path",{d:"M14 8a6 6 0 0 0-6-6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function pD(){return l.jsxs("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M4 2.5h7.5L13.5 5v8.5H4z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function gD(){return l.jsxs("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 3.5h6l3 3v5.5h-9z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 3.5v3.5h3.5v-3.5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M5 11h4",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),l.jsx("path",{d:"M6.5 6.5h6l1.5 1.5v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",opacity:"0.6"})]})}function xD(){return l.jsx("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M4 4l8 8m0-8l-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function bD(){return l.jsxs("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("rect",{x:"2.5",y:"3",width:"8",height:"10",rx:"1.2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),l.jsx("path",{d:"M7 7l5 5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function vD(){return l.jsxs("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M5 3v10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M7 5l5 3-5 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M12 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function yD(){return l.jsxs("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 4h3a1 1 0 0 1 1 1v7.5M12.5 12h-3a1 1 0 0 1-1-1V3.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M5 6l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function sw(){return l.jsx("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5.5 2.5h5l.5 4h2v1.5h-4V13l-1-.5V8h-3V6.5h3z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function wD(){return l.jsx("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M3.5 3.5l9 9M5.5 2.5h5l.5 4h2v1.5H10M8 8v4.5L7 12.5V8H4V6.5h1",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function jD(){return l.jsx("svg",{className:Ea,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 2.5h4l2.5 2.5V13.5H5z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"})})}function SD(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M10 3L5 8l5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function CD(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6 3l5 5-5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function ND(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function ED({tab:e,isActive:n,isDirty:a,draggingId:i,onContextMenu:o,onCloseTab:u,setTabNode:d}){const{attributes:h,listeners:g,setNodeRef:x,transform:b,transition:v,isDragging:w}=cD({id:e.id}),C={transform:ho.Transform.toString(b),transition:v},N=w||i===e.id,j=!!e.pinned;return l.jsxs("div",{ref:k=>{x(k),d(e.id,k)},style:C,className:pe("group relative mr-1 flex min-w-0 items-stretch",N&&"opacity-60"),"data-editor-tab":"true",...h,...g,children:[l.jsxs(Rh,{value:e.id,"data-tab-id":e.id,title:e.id,onContextMenu:o,onMouseDown:k=>{k.button===1&&(k.preventDefault(),u(e.id))},className:pe("relative flex min-w-[3rem] max-w-[16rem] items-center gap-2 overflow-hidden rounded-t-lg border px-2 py-1.5 pr-8 text-sm font-medium transition-[background-color,border-color,color] duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50",n?"border-slate-200 border-b-white bg-white text-slate-900 shadow-[0_1px_0_rgba(15,23,42,0.08)]":"border-transparent border-b-slate-200 text-slate-500 hover:border-slate-200 hover:bg-white/70 hover:text-slate-900",j?"min-w-[4rem] max-w-[8rem] justify-center":"min-w-[9rem] justify-start px-3"),children:[j?l.jsx("span",{className:"flex-none text-[12px]","aria-label":"Pinned",children:l.jsx(hD,{filled:n})}):null,l.jsx("span",{className:"block min-w-0 flex-1 truncate text-left",children:e.name}),e.status==="loading"?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-slate-400","aria-label":"Loading",children:""}):null,e.status==="error"?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Load failed",children:"!"}):null,e.saving?l.jsx("span",{className:"flex-none","aria-label":"Saving",title:"Saving changes",children:l.jsx(mD,{})}):null,e.saveError?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Save failed",title:e.saveError,children:"!"}):null,a?l.jsx("span",{className:"flex-none text-xs leading-none text-brand-600",children:""}):null]}),l.jsx("button",{type:"button",className:pe("absolute right-1 top-1/2 -translate-y-1/2 rounded p-0.5 text-xs transition focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-1 focus-visible:ring-offset-white",n?"text-slate-500 hover:bg-slate-200 hover:text-slate-900":"text-slate-400 opacity-0 group-hover:opacity-100 hover:bg-slate-200 hover:text-slate-700"),onClick:k=>{k.stopPropagation(),u(e.id)},"aria-label":`Close ${e.name}`,children:""})]})}function kD({currentTab:e,tabs:n,canSaveFiles:a,hasDirtyTabs:i,onCloseTab:o,onCloseOtherTabs:u,onCloseTabsToRight:d,onCloseAllTabs:h,onPinTab:g,onUnpinTab:x,onSaveTab:b,onSaveAllTabs:v}){const w=n.findIndex(B=>B.id===e.id),C=w>=0&&w<n.length-1,N=n.length>1,j=e.status==="ready"&&e.content!==e.initialContent,k=!!b&&a&&j&&!e.saving,T=!!v&&a&&i,E={save:"Ctrl+S",saveAll:"Ctrl+Shift+S",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W"};return[{id:"save",label:e.saving?"Saving":"Save",icon:l.jsx(pD,{}),disabled:!k,shortcut:E.save,onSelect:()=>b?.(e.id)},{id:"save-all",label:"Save All",icon:l.jsx(gD,{}),disabled:!T,shortcut:E.saveAll,onSelect:()=>v?.()},{id:"pin",label:e.pinned?"Unpin":"Pin",icon:e.pinned?l.jsx(wD,{}):l.jsx(sw,{}),dividerAbove:!0,onSelect:()=>e.pinned?x(e.id):g(e.id)},{id:"close",label:"Close",icon:l.jsx(xD,{}),dividerAbove:!0,shortcut:E.close,onSelect:()=>o(e.id)},{id:"close-others",label:"Close Others",icon:l.jsx(bD,{}),disabled:!N,shortcut:E.closeOthers,onSelect:()=>u(e.id)},{id:"close-right",label:"Close Tabs to the Right",icon:l.jsx(vD,{}),disabled:!C,shortcut:E.closeRight,onSelect:()=>d(e.id)},{id:"close-all",label:"Close All",icon:l.jsx(yD,{}),dividerAbove:!0,disabled:n.length===0,shortcut:E.closeAll,onSelect:()=>h()}]}function _D({pinnedTabs:e,regularTabs:n,activeTabId:a,onSelectTab:i}){if(e.length===0&&n.length===0)return[{id:"empty",label:"No open editors",onSelect:()=>{},disabled:!0}];const o=[],u=(d,h)=>{const g=d.status==="ready"&&d.content!==d.initialContent,x=[];d.id===a&&x.push("Active"),d.saving?x.push("Saving"):g&&x.push("Unsaved"),o.push({id:`switch-${d.id}`,label:`${d.saving?" ":g?" ":""}${d.name}`,icon:d.pinned?l.jsx(sw,{}):l.jsx(jD,{}),shortcut:x.length>0?x.join("  "):void 0,dividerAbove:h,onSelect:()=>i(d.id)})};return e.forEach(d=>u(d,!1)),n.forEach((d,h)=>u(d,h===0&&e.length>0)),o}const Rb=220,zb=64,AD=14;function DD({tabs:e,activeTabId:n,menuAppearance:a,canSaveFiles:i=!1,onSelectTab:o,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:h,onCloseAllTabs:g,onMoveTab:x,onPinTab:b,onUnpinTab:v,onSaveTab:w,onSaveAllTabs:C,onTabDragStateChange:N}){const[j,k]=p.useState(null),[T,E]=p.useState(null),[B,Q]=p.useState(null),[O,I]=p.useState({left:!1,right:!1}),[A,V]=p.useState(0),W=p.useRef(null),X=p.useRef(null),J=p.useRef(new Map),L=p.useMemo(()=>e.filter(R=>R.pinned),[e]),ae=p.useMemo(()=>e.filter(R=>!R.pinned),[e]),be=p.useMemo(()=>e.filter(R=>R.status==="ready"&&R.content!==R.initialContent),[e]).length>0,D=$5(B5(Cm,{activationConstraint:{distance:5}})),U=a==="dark"?"border-[#1f2937] bg-[#0f172a]":"border-slate-200 bg-slate-900/5",ie=a==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white focus-visible:ring-white/30 focus-visible:ring-offset-0":"text-slate-500 hover:bg-white hover:text-slate-900 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5",me=p.useCallback((R,Z)=>{const ge=J.current;Z?ge.set(R,Z):ge.delete(R)},[]);p.useEffect(()=>{j&&!e.some(R=>R.id===j.tabId)&&k(null),e.length||E(null)},[j,e]);const se=p.useCallback(R=>{Q(String(R.active.id)),N?.(!0)},[N]),_=p.useCallback(R=>{const Z=R.active.id,ge=R.over?.id;if(ge&&Z!==ge){const De=e.findIndex(st=>st.id===Z),Ze=e.findIndex(st=>st.id===ge);if(De!==-1&&Ze!==-1){const st=De<Ze?Ze+1:Ze;x(String(Z),st)}}Q(null),N?.(!1)},[x,N,e]),P=p.useCallback(()=>{Q(null),N?.(!1)},[N]),le=p.useCallback(()=>{const R=W.current;if(!R){I({left:!1,right:!1});return}const{scrollLeft:Z,scrollWidth:ge,clientWidth:De}=R;I({left:Z>2,right:Z+De<ge-2})},[]);p.useEffect(()=>{const R=W.current;if(!R){I({left:!1,right:!1});return}le();const Z=()=>le();R.addEventListener("scroll",Z),window.addEventListener("resize",le);const ge=typeof ResizeObserver<"u"?new ResizeObserver(le):null;return ge?.observe(R),()=>{R.removeEventListener("scroll",Z),window.removeEventListener("resize",le),ge?.disconnect()}},[e.length,le]),p.useEffect(()=>{if(!B){V(0);return}const R=Z=>{const ge=W.current;if(!ge){V(0);return}const De=ge.getBoundingClientRect();Z.clientX<De.left+zb?V(-1):Z.clientX>De.right-zb?V(1):V(0)};return window.addEventListener("pointermove",R),()=>{window.removeEventListener("pointermove",R),V(0)}},[B]),p.useEffect(()=>{if(!B||A===0)return;let R;const Z=()=>{const ge=W.current;ge&&(ge.scrollBy({left:A*AD}),R=window.requestAnimationFrame(Z))};return R=window.requestAnimationFrame(Z),()=>window.cancelAnimationFrame(R)},[A,B]),p.useEffect(()=>{J.current.get(n)?.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},[n,e.length]);const q=p.useMemo(()=>{if(!j)return[];const R=e.find(Z=>Z.id===j.tabId);return R?kD({currentTab:R,tabs:e,canSaveFiles:i,hasDirtyTabs:be,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:h,onCloseAllTabs:g,onPinTab:b,onUnpinTab:v,onSaveTab:w,onSaveAllTabs:C}):[]},[i,j,be,g,d,u,h,b,C,w,v,e]),ee=p.useMemo(()=>_D({pinnedTabs:L,regularTabs:ae,activeTabId:n,onSelectTab:o}),[L,ae,n,o]),H=p.useCallback(R=>{W.current?.scrollBy({left:R,behavior:"smooth"})},[]),K=p.useCallback(()=>{const R=X.current?.getBoundingClientRect();R&&E({x:R.left,y:R.bottom+6})},[]);return l.jsxs(l.Fragment,{children:[l.jsx(ZA,{sensors:D,collisionDetection:V5,onDragStart:se,onDragEnd:_,onDragCancel:P,children:l.jsx(nD,{items:e.map(R=>R.id),strategy:eD,children:l.jsxs("div",{className:pe("flex items-center gap-1 px-1",U,"border-b"),children:[l.jsx(Ob,{appearance:a,direction:"left",disabled:!O.left,onClick:()=>H(-Rb)}),l.jsxs("div",{className:"relative flex min-w-0 flex-1 items-stretch",children:[O.left?l.jsx(Lb,{position:"left",appearance:a}):null,O.right?l.jsx(Lb,{position:"right",appearance:a}):null,l.jsx("div",{ref:W,className:"flex min-w-0 flex-1 overflow-x-auto pb-1",onWheel:R=>{Math.abs(R.deltaY)>Math.abs(R.deltaX)&&(R.preventDefault(),W.current?.scrollBy({left:R.deltaY}))},children:l.jsx(My,{className:"flex min-h-[2.75rem] flex-1 items-end gap-0 px-1",children:e.map(R=>{const Z=R.status==="ready"&&R.content!==R.initialContent,ge=R.id===n;return l.jsx(ED,{tab:R,isActive:ge,isDirty:Z,draggingId:B,setTabNode:me,onContextMenu:De=>{De.preventDefault(),k({tabId:R.id,x:De.clientX,y:De.clientY})},onCloseTab:u},R.id)})})})]}),l.jsx(Ob,{appearance:a,direction:"right",disabled:!O.right,onClick:()=>H(Rb)}),l.jsx("button",{ref:X,type:"button",className:pe("mx-1 flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2",ie),"aria-label":"Open editors list",onClick:K,children:l.jsx(ND,{})})]})})}),l.jsx(ur,{open:!!j,position:j&&{x:j.x,y:j.y},onClose:()=>k(null),items:q,appearance:a}),l.jsx(ur,{open:!!T,position:T,onClose:()=>E(null),items:ee,appearance:a})]})}function Ob({appearance:e,direction:n,disabled:a,onClick:i}){const o=e==="dark"?"hover:bg-white/10 hover:text-white focus-visible:ring-2 focus-visible:ring-white/30":"hover:bg-white hover:text-slate-900 focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5";return l.jsx("button",{type:"button",className:pe("flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none",e==="dark"?"text-slate-300":"text-slate-500",a?"cursor-default opacity-30":o),onClick:i,disabled:a,"aria-label":n==="left"?"Scroll tabs left":"Scroll tabs right",children:n==="left"?l.jsx(SD,{}):l.jsx(CD,{})})}function Lb({position:e,appearance:n}){const a=n==="dark"?e==="left"?"left-0 bg-gradient-to-r from-[#0f172a] via-[#0f172a]/80 to-transparent":"right-0 bg-gradient-to-l from-[#0f172a] via-[#0f172a]/80 to-transparent":e==="left"?"left-0 bg-gradient-to-r from-slate-100 via-slate-100/70 to-transparent":"right-0 bg-gradient-to-l from-slate-100 via-slate-100/70 to-transparent";return l.jsx("div",{className:pe("pointer-events-none absolute top-0 bottom-0 w-8",a)})}function TD({tabs:e,activeTabId:n,onSelectTab:a,onCloseTab:i,onCloseOtherTabs:o,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:h,onPinTab:g,onUnpinTab:x,onContentChange:b,onSaveTab:v,onSaveAllTabs:w,onSelectRecentTab:C,editorTheme:N,menuAppearance:j,canSaveFiles:k=!1,readOnly:T=!1,minHeight:E,onRetryTabLoad:B}){const Q=e.length>0,O=p.useRef(null),[I,A]=p.useState(!1),V=p.useMemo(()=>e.find(W=>W.id===n)??null,[e,n]);return!Q||!V?l.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."}):l.jsxs("div",{ref:O,className:"flex min-h-0 min-w-0 flex-1 flex-col",style:E?{minHeight:E}:void 0,"data-editor-area":!0,children:[l.jsx(y5,{containerRef:O,tabs:e,activeTabId:n,onCloseTab:i,onSelectTab:a,onSelectRecentTab:C}),l.jsxs(Ty,{value:V.id,onValueChange:a,children:[l.jsx(DD,{tabs:e,activeTabId:V.id,menuAppearance:j,canSaveFiles:k,onSelectTab:a,onCloseTab:i,onCloseOtherTabs:o,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:h,onPinTab:g,onUnpinTab:x,onSaveTab:v,onSaveAllTabs:w,onTabDragStateChange:A}),l.jsx(S5,{tabs:e,activeTabId:V.id,editorTheme:N,onContentChange:b,onSaveTab:v,canSaveFiles:k,readOnly:T,onRetryTabLoad:B,onSelectTab:a,isTabDragging:I})]})]})}const MD={dark:{surface:"#1e1e1e",border:"#252526",heading:"#cccccc",label:"#999999",textPrimary:"#f3f3f3",textMuted:"#c5c5c5",rowHover:"#2a2d2e",folderActiveBg:"transparent",selectionBg:"#2f3136",selectionText:"#f8f8f8",badgeActive:"#4fc1ff",badgeOpen:"#858585",folderIcon:"#c8ae7d",folderIconActive:"#e0c08e",chevronIdle:"#7a7a7a",chevronActive:"#d4d4d4"},light:{surface:"#f3f3f3",border:"#d4d4d4",heading:"#616161",label:"#8a8a8a",textPrimary:"#1e1e1e",textMuted:"#555555",rowHover:"#e8e8e8",folderActiveBg:"transparent",selectionBg:"#dcdcdc",selectionText:"#0f172a",badgeActive:"#0e639c",badgeOpen:"#6b6b6b",folderIcon:"#c0933a",folderIconActive:"#a67c32",chevronIdle:"#7a7a7a",chevronActive:"#3c3c3c"}},RD={dark:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-[#252526]",light:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-white"};function zD(e){const n=new Set,a=i=>{i.kind==="folder"&&(n.add(i.id),i.children?.forEach(a))};return a(e),n}function dh(e,n,a){const i=new Set;for(const o of e)n.has(o)&&i.add(o);return i.add(a),i}function Ub(e,n){if(e.size!==n.size)return!1;for(const a of e)if(!n.has(a))return!1;return!0}function OD({width:e,tree:n,activeFileId:a="",openFileIds:i=[],onSelectFile:o,theme:u,canCreateFile:d=!1,canCreateFolder:h=!1,isCreatingEntry:g=!1,onCreateFile:x,onCreateFolder:b,canDeleteFile:v=!1,deletingFilePath:w=null,canDeleteFolder:C=!1,deletingFolderPath:N=null,onDeleteFile:j,onDeleteFolder:k,expandedStorageKey:T,onHide:E}){const B=p.useMemo(()=>T?sa(T):null,[T]),Q=p.useMemo(()=>zD(n),[n]),[O,I]=p.useState(()=>{const R=B?.get()??null,Z=R?new Set(R):new Set([n.id]);return dh(Z,Q,n.id)}),[A,V]=p.useState(null),[W,X]=p.useState(null),[J,L]=p.useState(null);p.useEffect(()=>{X(null),L(null)},[n.id]),p.useEffect(()=>{I(R=>{const Z=dh(R,Q,n.id);return Ub(R,Z)?R:Z})},[Q,n.id]),p.useEffect(()=>{if(!B)return;const R=B.get();if(!R)return;const Z=dh(new Set(R),Q,n.id);I(ge=>Ub(ge,Z)?ge:Z)},[B,Q,n.id]),p.useEffect(()=>{if(!B)return;const R=Array.from(O).filter(Z=>Z!==n.id&&Q.has(Z));B.set(R)},[O,B,Q,n.id]);const ae=p.useCallback(R=>{I(Z=>{const ge=new Set(Z);return ge.has(R)?ge.delete(R):ge.add(R),ge.add(n.id),ge})},[n.id]),de=p.useCallback((R,Z)=>{I(ge=>{const De=new Set(ge);return Z?De.add(R):R!==n.id&&De.delete(R),De.add(n.id),De})},[n.id]),be=p.useCallback(()=>{I(new Set([n.id]))},[n.id]),D=p.useCallback((R,Z)=>{L(null),I(ge=>{const De=new Set(ge);return De.add(n.id),De.add(R),De}),X({parentId:R,kind:Z})},[n.id]),U=p.useCallback(async(R,Z,ge)=>{const De=Z.trim();if(!De){L("Name cannot be empty.");return}const Ze=ge==="folder"?b:x;if(Ze)try{L(null),await Ze(R===n.id?"":R,De),X(null)}catch(st){const ye=st instanceof Error?st.message:"Unable to create entry.";L(ye)}},[x,b,n.id]),ie=p.useCallback(()=>{X(null),L(null)},[]),me=p.useCallback((R,Z)=>{R.preventDefault(),V({node:Z,position:{x:R.clientX,y:R.clientY}})},[]),se=p.useCallback(async R=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(R);return}catch{}if(typeof document>"u")return;const Z=document.createElement("textarea");Z.value=R,Z.setAttribute("readonly","true"),Z.style.position="absolute",Z.style.left="-9999px",document.body.appendChild(Z),Z.select(),document.execCommand("copy"),document.body.removeChild(Z)},[]),_=p.useCallback(R=>{j&&(j(R),V(null))},[j]),P=p.useCallback(R=>{k&&(k(R),V(null))},[k]),le=p.useMemo(()=>{if(!A)return[];const{node:R}=A,Z={open:"Enter",newFile:"Ctrl+N",newFolder:"Ctrl+Shift+N",copyPath:"Ctrl+K Ctrl+C",collapseAll:"Ctrl+K Ctrl+0",delete:"Delete"};if(R.kind==="file")return[{id:"open-file",label:"Open",icon:l.jsx(FD,{}),shortcut:Z.open,onSelect:()=>o(R.id)},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:l.jsx($b,{}),shortcut:Z.copyPath,onSelect:()=>{se(R.id)}},{id:"delete-file",label:"Delete",icon:l.jsx(qb,{}),shortcut:Z.delete,disabled:!v||!j,onSelect:()=>_(R.id)}];const ge=O.has(R.id);return[{id:"new-file",label:"New File",icon:l.jsx(rw,{}),shortcut:Z.newFile,disabled:!d||!x,onSelect:()=>{!d||!x||(D(R.id,"file"),V(null))}},{id:"new-folder",label:"New Folder",icon:l.jsx(Fh,{}),shortcut:Z.newFolder,disabled:!h||!b,onSelect:()=>{!h||!b||(D(R.id,"folder"),V(null))}},{id:"toggle-folder",label:ge?"Collapse Folder":"Expand Folder",icon:ge?l.jsx(HD,{}):l.jsx(ZD,{}),onSelect:()=>de(R.id,!ge)},{id:"collapse-all",label:"Collapse All",icon:l.jsx(VD,{}),shortcut:Z.collapseAll,dividerAbove:!0,onSelect:()=>be()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:l.jsx($b,{}),shortcut:Z.copyPath,onSelect:()=>{se(R.id)}},{id:"delete-folder",label:"Delete Folder",icon:l.jsx(qb,{}),shortcut:Z.delete,disabled:!C||!k,onSelect:()=>P(R.id)}]},[A,o,se,v,j,O,de,be,d,h,x,b,D,C,k,P,_]),q=MD[u],ee=RD[u],H=p.useMemo(()=>n.children??[],[n]),K=u==="dark"?"dark":"light";return l.jsxs(l.Fragment,{children:[l.jsxs("aside",{className:"flex h-full min-h-0 flex-col border-r text-[13px]",style:{width:e,backgroundColor:q.surface,borderColor:q.border,color:q.textPrimary},"aria-label":"Config files explorer",children:[l.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",style:{borderColor:q.border,backgroundColor:u==="dark"?"#181818":"#ececec"},children:[l.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em]",style:{color:q.heading},children:"Explorer"}),l.jsx("button",{type:"button",onClick:E,"aria-label":"Hide explorer",className:pe("flex h-7 w-7 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",u==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white":"text-slate-600 hover:bg-black/10 hover:text-slate-900"),children:l.jsx(qD,{})})]}),l.jsx("nav",{className:"flex-1 overflow-auto px-2 py-2","aria-label":"Workspace files tree",children:l.jsxs("ul",{className:"space-y-0.5",children:[H.map(R=>l.jsx(aw,{node:R,depth:0,expanded:O,activeFileId:a,openFileIds:i,onToggleFolder:ae,onSelectFile:o,tokens:q,theme:u,focusRingClass:ee,onContextMenu:me,editing:W,onSubmitCreateEntry:U,onCancelCreateEntry:ie,createError:J,isCreatingEntry:g,deletingFilePath:w,deletingFolderPath:N,onClearCreateError:()=>L(null)},R.id)),W?.parentId===n.id?l.jsx("li",{className:"pl-2",children:l.jsx(iw,{appearance:u,icon:W.kind==="folder"?l.jsx(Fh,{}):void 0,placeholder:W.kind==="folder"?"new_folder":"new_file.py",onSubmit:R=>U(n.id,R,W.kind),onCancel:ie,onChange:()=>L(null),isSubmitting:g,error:J})}):null]})})]}),l.jsx(ur,{open:!!A,position:A?A.position:null,onClose:()=>V(null),items:le,appearance:K})]})}function aw({node:e,depth:n,expanded:a,activeFileId:i,openFileIds:o,onToggleFolder:u,onSelectFile:d,tokens:h,theme:g,focusRingClass:x,onContextMenu:b,editing:v,onSubmitCreateEntry:w,onCancelCreateEntry:C,createError:N,isCreatingEntry:j,deletingFilePath:k,deletingFolderPath:T,onClearCreateError:E}){const Q={paddingLeft:8+n*16,"--tree-hover-bg":h.rowHover};if(e.kind==="folder"){const X=a.has(e.id),J=T===e.id,L=v?.parentId===e.id,ae={...Q,color:X?h.textPrimary:h.textMuted};return X&&h.folderActiveBg!=="transparent"&&(ae.backgroundColor=h.folderActiveBg),l.jsxs("li",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>u(e.id),onContextMenu:de=>b(de,e),className:pe("group flex w-full items-center gap-2 rounded-md px-2 py-1 text-left font-medium transition hover:bg-[var(--tree-hover-bg)]",x,J&&"opacity-60"),style:ae,"aria-expanded":X,disabled:J,children:[l.jsx(UD,{open:X,tokens:h}),l.jsx(BD,{open:X,tokens:h}),l.jsx("span",{className:"truncate",children:e.name})]}),X?l.jsxs("ul",{className:"mt-0.5 space-y-0.5",children:[e.children?.map(de=>l.jsx(aw,{node:de,depth:n+1,expanded:a,activeFileId:i,openFileIds:o,onToggleFolder:u,onSelectFile:d,tokens:h,theme:g,focusRingClass:x,onContextMenu:b,editing:v,onSubmitCreateEntry:w,onCancelCreateEntry:C,createError:N,isCreatingEntry:j,deletingFilePath:k,deletingFolderPath:T,onClearCreateError:E},de.id)),L?l.jsx("li",{className:"pl-2",children:l.jsx(iw,{appearance:g,icon:v?.kind==="folder"?l.jsx(Fh,{}):void 0,placeholder:v?.kind==="folder"?"new_folder":"new_file.py",onSubmit:de=>{v&&w(e.id,de,v.kind)},onCancel:C,onChange:E,isSubmitting:j,error:N})}):null]}):null]})}const O=i===e.id,I=o.includes(e.id),A=k===e.id,V=LD(e.name,e.language),W={...Q,color:h.textPrimary};return O&&(W.backgroundColor=h.selectionBg,W.color=h.selectionText),l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>d(e.id),onContextMenu:X=>b(X,e),className:pe("flex w-full items-center gap-2 rounded-md px-2 py-1 text-left transition hover:bg-[var(--tree-hover-bg)]",x,O&&"shadow-inner shadow-[#00000033]",A&&"opacity-60"),style:W,disabled:A,children:[l.jsx("span",{className:"inline-flex w-4 justify-center",children:l.jsx($D,{className:pe(V,I&&!O&&"opacity-90",!I&&!O&&"opacity-75")})}),l.jsx("span",{className:pe("flex-1 truncate",O&&"font-semibold"),children:e.name}),I&&!O?l.jsx("span",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:h.badgeOpen}}):null]})})}const Bb={json:"text-[#f1d06b]",py:"text-[#519aba]",ts:"text-[#519aba]",tsx:"text-[#519aba]",js:"text-[#f4d13d]",jsx:"text-[#519aba]",md:"text-[#4ec9b0]",env:"text-[#b5cea8]",txt:"text-[#9cdcfe]",lock:"text-[#c586c0]"};function LD(e,n){if(n==="python")return"text-sky-300";const a=e.toLowerCase().split("."),i=a.length>1?a.pop()??"":"";return i&&Bb[i]?Bb[i]:"text-slate-400"}function UD({open:e,tokens:n}){return l.jsx("svg",{className:pe("h-3 w-3 flex-shrink-0 transition-transform duration-150",e?"rotate-90":void 0),viewBox:"0 0 10 10","aria-hidden":!0,children:l.jsx("path",{d:"M3 1l4 4-4 4",stroke:e?n.chevronActive:n.chevronIdle,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}function BD({open:e,tokens:n}){return l.jsx("svg",{className:"h-4 w-4 flex-shrink-0 transition-colors",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M3.5 5.5h4l1.5 1.5H16a1 1 0 0 1 1 1V15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6.5a1 1 0 0 1 1-1Z",stroke:e?n.folderIconActive:n.folderIcon,strokeWidth:1.4,strokeLinejoin:"round",fill:e?n.folderIconActive:"none",opacity:e?.25:1})})}function $D({className:e}){return l.jsxs("svg",{className:pe("h-4 w-4 flex-shrink-0",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6 3h4l4 4v9a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 3v4h4",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})]})}function qD(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M3 3h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 13h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 8h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M11 5l2 3-2 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}const fr="h-4 w-4 text-current opacity-80";function FD(){return l.jsx("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M3 4.5h3l1 1H13a1 1 0 0 1 1 1V12.5a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}function $b(){return l.jsxs("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M6 4.5h5.5a1 1 0 0 1 1 1V13",stroke:"currentColor",strokeWidth:"1.1",strokeLinecap:"round"}),l.jsx("rect",{x:"3.5",y:"2.5",width:"6",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.1",fill:"none"})]})}function HD(){return l.jsx("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 6l3 3 3-3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function rw(){return l.jsxs("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 4.5h4.5l3 3V13a1 1 0 0 1-1 1h-6.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),l.jsx("path",{d:"M11 7.5h-2v-2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M8.5 7.5h2.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Fh(){return l.jsxs("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 5h3.5l1.2 1.4H12.5a1 1 0 0 1 1 1V12a1 1 0 0 1-1 1h-9a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none",strokeLinejoin:"round"}),l.jsx("path",{d:"M8 8v3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M6.5 9.5h3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function ZD(){return l.jsx("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 10l3-3 3 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function VD(){return l.jsxs("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3 5h10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 8h6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 11h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function qb(){return l.jsxs("svg",{className:fr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M6 3.5h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M4 4.5h8",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M5.5 4.5v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M9.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function iw({appearance:e,onSubmit:n,onCancel:a,onChange:i,isSubmitting:o,error:u,placeholder:d="new_file.py",icon:h}){const[g,x]=p.useState(""),b=p.useRef(null);p.useEffect(()=>{b.current?.focus(),b.current?.select()},[]);const v=p.useCallback(()=>{n(g.trim())},[n,g]),w=e==="dark"?"text-slate-300":"text-slate-600",C=e==="dark"?"#232323":"#e8e8e8",N=e==="dark"?"#2f2f2f":"#d4d4d4";return l.jsxs("div",{className:"rounded-md border px-2 py-1",style:{backgroundColor:C,borderColor:N},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex w-4 justify-center text-[#4fc1ff]",children:h??l.jsx(rw,{})}),l.jsx("input",{ref:b,value:g,onChange:j=>{x(j.target.value),i?.()},onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),v()),j.key==="Escape"&&(j.preventDefault(),a())},className:"flex-1 rounded-sm border border-transparent bg-white/80 px-2 py-1 text-[13px] text-slate-900 outline-none focus:border-[#007acc]",placeholder:d,disabled:o}),l.jsx("button",{type:"button",className:pe("rounded-sm px-2 py-1 text-[12px] font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",o?"cursor-wait bg-slate-300 text-slate-500":"bg-[#007acc] text-white hover:bg-[#0e78c6]"),onClick:v,disabled:o,children:o?"Creating":"Create"}),l.jsx("button",{type:"button",className:"rounded-sm px-2 py-1 text-[12px] font-semibold text-slate-500 transition hover:text-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",onClick:a,disabled:o,children:"Cancel"})]}),l.jsx("div",{className:pe("mt-1 text-[11px]",w),children:"Enter a name and press Enter. Escape to cancel."}),u?l.jsx("div",{className:"mt-1 text-[11px] font-semibold text-danger-500",children:u}):null]})}function Fb({orientation:e,onPointerDown:n,onDoubleClick:a,onToggle:i,collapsed:o}){const u=e==="vertical",d=u?"":o?"":"";return l.jsxs("div",{role:"separator","aria-orientation":e,className:pe("relative select-none bg-transparent group",u?"w-4 cursor-col-resize":"h-3 cursor-row-resize"),style:{touchAction:"none"},onPointerDown:n,onDoubleClick:a,title:u?"Drag to resize":"Drag to resize  Double-click to hide/show console",children:[l.jsx("span",{className:"sr-only",children:"Resize panel"}),l.jsx("div",{className:pe("absolute inset-0 flex items-center justify-center",u?"px-[6px]":"py-[6px]"),"aria-hidden":!0,children:l.jsx("div",{className:pe(u?"h-full w-px":"h-px w-full","bg-slate-400/50")})}),i&&!u?l.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),i()},className:"absolute right-1/2 top-1/2 h-5 w-5 -translate-y-1/2 translate-x-[40%] rounded bg-slate-800/70 text-[10px] text-slate-100 opacity-0 shadow-sm transition-opacity group-hover:opacity-100 focus:opacity-100 focus:outline-none","aria-label":o?"Show console":"Hide console",title:o?"Show console":"Hide console",children:d}):null]})}const ID={json:"json",py:"python",ts:"typescript",tsx:"typescriptreact",js:"javascript",jsx:"javascriptreact",env:"dotenv",md:"markdown",yml:"yaml",yaml:"yaml",toml:"toml"};function Hb(e){const n=e.root||e.prefix||e.entries[0]?.parent||"",a=e.entries.length>0;if(!n&&!a)return null;const i=ro(n),o={id:n,name:Zb(n),kind:"folder",children:[]},u=new Map([[n,o]]),d=g=>{if(g.length===0)return o;const x=ro(g),b=x===i?n:x,v=u.get(b);if(v)return v;const w={id:b,name:Zb(b),kind:"folder",children:[]};u.set(b,w);const C=b===n?"":WD(b)??n,N=d(C);return fh(N,w),w},h=[...e.entries].sort((g,x)=>g.depth!==x.depth?g.depth-x.depth:g.path.localeCompare(x.path));for(const g of h){const x=g.parent&&g.parent.length>0?ro(g.parent):n,b=d(x);if(g.kind==="dir"){const w=d(g.path);w.name=g.name,w.metadata={size:g.size??null,modifiedAt:g.mtime,contentType:g.content_type,etag:g.etag},w!==b&&fh(b,w);continue}const v={id:g.path,name:g.name,kind:"file",language:PD(g.path),metadata:{size:g.size??null,modifiedAt:g.mtime,contentType:g.content_type,etag:g.etag}};u.set(g.path,v),fh(b,v)}return o}function fh(e,n){const a=e.children??[],i=a.some(o=>o.id===n.id)?a.map(o=>o.id===n.id?n:o):[...a,n];e.children=i.sort(QD)}function QD(e,n){return e.kind!==n.kind?e.kind==="folder"?-1:1:e.name.localeCompare(n.name)}function PD(e){const n=e.toLowerCase(),a=n.lastIndexOf(".");if(a===-1)return;const i=n.slice(a+1);return ID[i]}function Zb(e){const n=ro(e);if(!n)return"";const a=n.lastIndexOf("/");return a>=0?n.slice(a+1):n}function WD(e){const n=ro(e);if(!n)return;const a=n.lastIndexOf("/");return a===-1?"":n.slice(0,a)}function ro(e){return e?e.replace(/\/+$/,""):""}function Ts(e,n){if(e.id===n)return e;if(!e.children)return null;for(const a of e.children){const i=Ts(a,n);if(i)return i}return null}function Nm(e){if(e.kind==="file")return e;if(!e.children)return null;for(const n of e.children){const a=Nm(n);if(a)return a}return null}function KD({tree:e,initialActiveFileId:n,loadFile:a,persistence:i}){const[o,u]=p.useState([]),[d,h]=p.useState(""),[g,x]=p.useState([]),[b,v]=p.useState(()=>!i),[w,C]=p.useState(!1),N=p.useRef(new Set),j=p.useRef([]),k=p.useRef(""),T=p.useRef([]),E=p.useCallback(q=>{h(ee=>ee===q?ee:q),x(ee=>{const H=ee.filter(R=>j.current.some(Z=>Z.id===R));if(!q)return H;const K=H.filter(R=>R!==q);return[q,...K]})},[]);p.useEffect(()=>{k.current=d},[d]),p.useEffect(()=>{T.current=g},[g]),p.useEffect(()=>{if(!e){u([]),h(""),x([]);return}u(ee=>ee.filter(H=>!!Ts(e,H.id)).map(H=>{const K=Ts(e,H.id);return!K||K.kind!=="file"?H:{...H,name:K.name,language:K.language,metadata:K.metadata}}));const q=k.current;(!q||!Ts(e,q))&&E("")},[e,E]);const B=p.useMemo(()=>o.find(q=>q.id===d)??o[0]??null,[d,o]),Q=p.useCallback(async q=>{if(!j.current.some(H=>H.id===q))return;let ee=!1;if(u(H=>H.map(K=>K.id!==q?K:K.status==="ready"?(ee=!0,K):{...K,status:"loading",error:null})),!ee)try{const H=await a(q);u(K=>K.map(R=>R.id===q?{...R,initialContent:H.content,content:H.content,status:"ready",error:null,etag:H.etag??null,saving:!1,saveError:null}:R))}catch(H){const K=H instanceof Error?H.message:"Unable to load file.";u(R=>R.map(Z=>Z.id===q?{...Z,status:"error",error:K}:Z))}},[a]),O=p.useCallback((q,ee)=>{if(!e)return;const H=Ts(e,q);!H||H.kind!=="file"||(u(K=>{if(K.some(Z=>Z.id===q))return K;const R={id:H.id,name:H.name,language:H.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:H.metadata,pinned:!1,saving:!1,saveError:null,lastSavedAt:null};return[...K,R]}),(ee?.activate??!0)&&E(q))},[e,E]);p.useEffect(()=>{if(b||!i||!e){i||v(!0);return}const q=i.get(),H=(q?.openTabs??[]).map(K=>typeof K=="string"?{id:K,pinned:!1}:K).filter(K=>!!(K&&K.id));if(H.length>0){const K=[];for(const R of H){const Z=Ts(e,R.id);!Z||Z.kind!=="file"||K.push({id:Z.id,name:Z.name,language:Z.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:Z.metadata,pinned:!!R.pinned,saving:!1,saveError:null,lastSavedAt:null})}if(K.length>0){u(K);const R=(q?.activeTabId&&K.some(De=>De.id===q.activeTabId)?q.activeTabId:K[0]?.id)??"";h(R);const ge=(q?.mru&&q.mru.length>0?q.mru:K.map(De=>De.id)).filter(De=>K.some(Ze=>Ze.id===De));x(ge),C(!0)}}v(!0)},[b,i,e]),p.useEffect(()=>{if(!e||!b)return;if(o.length>0){w||C(!0);return}if(w)return;const q=n&&Ts(e,n)||Nm(e);if(!q){C(!0);return}O(q.id),C(!0)},[e,n,O,b,o.length,w]);const I=p.useCallback(q=>{O(q)},[O]),A=p.useCallback(q=>{E(q),u(ee=>ee.map(H=>H.id===q&&H.status==="error"?{...H,status:"loading",error:null}:H))},[E]),V=p.useCallback(q=>{u(ee=>{const H=ee.filter(Z=>Z.id!==q),K=k.current,R=K===q?H[H.length-1]?.id??"":H.some(Z=>Z.id===K)?K:H[H.length-1]?.id??"";return E(R),H})},[E]),W=p.useCallback(q=>{u(ee=>!ee.some(H=>H.id===q)||ee.length<=1?ee:(E(q),ee.filter(H=>H.id===q)))},[E]),X=p.useCallback(q=>{u(ee=>{const H=ee.findIndex(Z=>Z.id===q);if(H===-1||H===ee.length-1)return ee;const K=ee.slice(0,H+1),R=K.some(Z=>Z.id===k.current)?k.current:q;return E(R),K})},[E]),J=p.useCallback(()=>{u([]),h(""),x([])},[]),L=p.useCallback((q,ee)=>{u(H=>{if(H.length<=1)return H;const K=H.findIndex(ye=>ye.id===q);if(K===-1)return H;const R=H.filter((ye,Ce)=>Ce!==K),Z=Math.max(0,Math.min(ee,R.length)),ge=[],De=[],Ze=H[K];if(R.forEach(ye=>{ye.pinned?ge.push(ye):De.push(ye)}),(Z<=ge.length?"pinned":"regular")==="pinned"){const ye=Math.max(0,Math.min(Z,ge.length));ge.splice(ye,0,{...Ze,pinned:!0})}else{const ye=Math.max(0,Math.min(Z-ge.length,De.length));De.splice(ye,0,{...Ze,pinned:!1})}return[...ge,...De]})},[]),ae=p.useCallback(q=>{if(N.current.has(q))return;let ee=!1;u(H=>H.map(K=>K.id!==q?K:(ee=!0,{...K,status:"loading",error:null}))),ee&&(N.current.add(q),Q(q).finally(()=>{N.current.delete(q)}))},[Q]),de=p.useCallback(q=>{u(ee=>{const H=[],K=[];let R=null;for(const ge of ee){if(ge.id===q){R=ge;continue}ge.pinned?H.push(ge):K.push(ge)}if(!R||R.pinned)return ee;const Z={...R,pinned:!0};return[...H,Z,...K]})},[]),be=p.useCallback(q=>{u(ee=>{const H=[],K=[];let R=null;for(const ge of ee){if(ge.id===q){R=ge;continue}ge.pinned?H.push(ge):K.push(ge)}if(!R||!R.pinned)return ee;const Z={...R,pinned:!1};return[...H,Z,...K]})},[]),D=p.useCallback((q,ee)=>{ee?de(q):be(q)},[de,be]),U=p.useCallback(q=>{const ee=T.current.filter(Ze=>j.current.some(st=>st.id===Ze));if(ee.length<=1)return;const H=k.current||ee[0],K=ee.indexOf(H),ge=((K>=0?K:0)+(q==="forward"?1:-1)+ee.length)%ee.length,De=ee[ge];De&&De!==H&&E(De)},[E]),ie=p.useCallback((q,ee)=>{u(H=>H.map(K=>K.id===q?{...K,content:ee,status:K.status==="ready"?K.status:"ready",error:null,saveError:null}:K))},[]),me=p.useCallback(q=>{u(ee=>ee.map(H=>H.id===q?{...H,saving:!0,saveError:null}:H))},[]),se=p.useCallback((q,ee)=>{u(H=>H.map(K=>{if(K.id!==q)return K;const R=ee?.metadata??K.metadata??null,Z=ee?.etag??K.etag??null,ge=ee?.savedContent??K.content;return{...K,saving:!1,saveError:null,initialContent:ge,etag:Z,metadata:R&&{...R,etag:R.etag??Z??null},lastSavedAt:new Date().toISOString()}}))},[]),_=p.useCallback((q,ee)=>{u(H=>H.map(K=>K.id===q?{...K,saving:!1,saveError:ee}:K))},[]),P=p.useCallback((q,ee)=>{u(H=>H.map(K=>K.id!==q?K:{...K,content:ee.content,initialContent:ee.content,status:"ready",error:null,saving:!1,saveError:null,etag:ee.etag??K.etag??null,metadata:ee.metadata??K.metadata}))},[]),le=p.useMemo(()=>o.some(q=>q.status==="ready"&&q.content!==q.initialContent),[o]);return p.useEffect(()=>{j.current=o},[o]),p.useEffect(()=>{x(q=>{const ee=q.filter(H=>o.some(K=>K.id===H));return ee.length===q.length?q:ee})},[o]),p.useEffect(()=>{const q=new Set(o.map(ee=>ee.id));for(const ee of N.current)q.has(ee)||N.current.delete(ee);for(const ee of o){if(ee.status!=="loading"||N.current.has(ee.id))continue;N.current.add(ee.id),Q(ee.id).finally(()=>{N.current.delete(ee.id)})}},[o,Q]),p.useEffect(()=>{if(!i||!b)return;const q=[d,...g].filter(ee=>!!ee).filter((ee,H,K)=>K.indexOf(ee)===H).filter(ee=>o.some(H=>H.id===ee));i.set({openTabs:o.map(ee=>({id:ee.id,pinned:!!ee.pinned})),activeTabId:d||null,mru:q})},[i,o,d,g,b]),{tree:e,tabs:o,activeTabId:d,activeTab:B,openFile:I,selectTab:A,closeTab:V,closeOtherTabs:W,closeTabsToRight:X,closeAllTabs:J,moveTab:L,reloadTab:ae,pinTab:de,unpinTab:be,toggleTabPin:D,selectRecentTab:U,updateContent:ie,beginSavingTab:me,completeSavingTab:se,failSavingTab:_,replaceTabContent:P,isDirty:le}}function lw(e){if(e instanceof URLSearchParams)return new URLSearchParams(e);if(typeof e=="string"||Array.isArray(e))return new URLSearchParams(e);const n=new URLSearchParams;for(const[a,i]of Object.entries(e)){if(i==null)continue;const o=Array.isArray(i)?i:[i];for(const u of o)u!=null&&n.append(a,String(u))}return n}const ow=p.createContext(null);function GD({value:e,children:n}){return p.createElement(ow.Provider,{value:e},n)}function cw(){const e=p.useContext(ow),n=qn(),a=Ft(),i=p.useMemo(()=>new URLSearchParams(n.search),[n.search]),o=p.useCallback((u,d)=>{const h=typeof u=="function"?u(new URLSearchParams(i)):u,x=lw(h).toString(),b=`${n.pathname}${x?`?${x}`:""}${n.hash}`;a(b,{replace:d?.replace})},[n.hash,n.pathname,a,i]);return[e?.params??i,e?.setSearchParams??o]}const Wc={pane:"terminal",console:"closed"},YD=["pane","console","file"],XD=["tab","view","runId"];function JD(e){return e==="open"?"open":"closed"}function eT(e){return e==="problems"?"problems":"terminal"}function uw(e){const n=e instanceof URLSearchParams?e:new URLSearchParams(e),a=n.get("pane"),i=n.get("console"),o=n.get("file");return{...{pane:eT(a),console:JD(i),fileId:o??void 0},present:{pane:n.has("pane"),console:n.has("console"),fileId:n.has("file")}}}function hh(e,n){const a=uw(e),i={...Wc,...a,...n},o=new URLSearchParams(e);for(const u of YD)o.delete(u);for(const u of XD)o.delete(u);return i.pane!==Wc.pane&&o.set("pane",i.pane),i.console!==Wc.console&&o.set("console",i.console),i.fileId&&i.fileId.length>0&&o.set("file",i.fileId),o}function tT(){const[e,n]=cw(),a=p.useMemo(()=>uw(e),[e]),i=p.useCallback(d=>{a.fileId===d||!d&&!a.present.fileId||n(h=>hh(h,{fileId:d??void 0}),{replace:!0})},[n,a.fileId,a.present.fileId]),o=p.useCallback(d=>{a.pane!==d&&n(h=>hh(h,{pane:d}),{replace:!0})},[n,a.pane]),u=p.useCallback(d=>{a.console!==d&&n(h=>hh(h,{console:d}),{replace:!0})},[n,a.console]);return{fileId:a.fileId??Wc.fileId,pane:a.pane,console:a.console,consoleExplicit:a.present.console,setFileId:i,setPane:o,setConsole:u}}const nT="You have unsaved changes in the config editor. Are you sure you want to leave?";function sT({isDirty:e,confirm:n=window.confirm,message:a=nT,shouldBypassNavigation:i}){const o=qn(),u=p.useCallback(d=>!e||i?.()||d.location.pathname===o.pathname?!0:n(a),[n,e,o.pathname,a,i]);hv(u,e),p.useEffect(()=>{if(!e)return;const d=h=>(h.preventDefault(),h.returnValue=a,a);return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[e,a])}const Vb="(prefers-color-scheme: dark)";function Ib(e){return e==="light"||e==="dark"||e==="system"?e:"system"}function aT(e,n){return e==="dark"||e==="system"&&n?"ade-dark":"vs-light"}function rT(e){const n=p.useMemo(()=>sa(e),[e]),[a,i]=p.useState(()=>{const g=n.get();return Ib(g)}),[o,u]=p.useState(()=>typeof window>"u"?!1:window.matchMedia(Vb).matches);p.useEffect(()=>{const g=Ib(n.get());i(x=>x===g?x:g)},[n]),p.useEffect(()=>{if(typeof window>"u")return;const g=window.matchMedia(Vb),x=b=>{u(b.matches)};return typeof g.addEventListener=="function"?g.addEventListener("change",x):typeof g.addListener=="function"&&g.addListener(x),u(g.matches),()=>{typeof g.removeEventListener=="function"?g.removeEventListener("change",x):typeof g.removeListener=="function"&&g.removeListener(x)}},[]),p.useEffect(()=>{n.set(a)},[a,n]);const d=p.useMemo(()=>aT(a,o),[a,o]),h=p.useCallback(g=>{i(g)},[]);return{preference:a,resolvedTheme:d,setPreference:h}}function hs(e,n,a){return Math.min(Math.max(e,n),a)}function Qb(e,n){const{onMove:a,onEnd:i,cursor:o}=n;if(typeof window>"u")return;e.preventDefault();const u=e.pointerId,d=e.currentTarget,h=document.body.style.cursor,g=document.body.style.userSelect;let x=null,b=null,v=!0;const w=k=>{if(v){if(v=!1,x!==null&&(cancelAnimationFrame(x),x=null),document.body.style.cursor=h,document.body.style.userSelect=g,window.removeEventListener("pointermove",C),window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",N),d.removeEventListener("lostpointercapture",j),d.hasPointerCapture?.(u))try{d.releasePointerCapture(u)}catch{}i&&i(k)}},C=k=>{!v||k.pointerId!==u||(b=k,x===null&&(x=window.requestAnimationFrame(()=>{x=null,b&&a(b)})))},N=k=>{k.pointerId===u&&w(k)},j=k=>{k.pointerId===u&&w(k)};o&&(document.body.style.cursor=o),document.body.style.userSelect="none";try{d.setPointerCapture(u)}catch{}window.addEventListener("pointermove",C),window.addEventListener("pointerup",N),window.addEventListener("pointercancel",N),d.addEventListener("lostpointercapture",j)}function Ms({open:e,title:n,description:a,confirmLabel:i="Confirm",cancelLabel:o="Cancel",onConfirm:u,onCancel:d,isConfirming:h,children:g,confirmDisabled:x,tone:b="default"}){const v=p.useRef(null);if(p.useEffect(()=>{if(!e)return;const C=j=>{if(j.key==="Escape"&&d(),j.key==="Tab"){const k=v.current;if(!k)return;const T=Array.from(k.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(Q=>!Q.hasAttribute("disabled"));if(T.length===0)return;const E=T.indexOf(document.activeElement),B=j.shiftKey?E<=0?T.length-1:E-1:E===T.length-1?0:E+1;T[B]?.focus(),j.preventDefault()}};return window.addEventListener("keydown",C),v.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",C)},[d,e]),!e)return null;const w=b==="danger"?{badge:"bg-danger-100 text-danger-700",confirmVariant:"danger"}:{badge:"bg-brand-50 text-brand-700",confirmVariant:"primary"};return ps.createPortal(l.jsxs("div",{className:"fixed inset-0 z-50 px-4",children:[l.jsx("button",{type:"button",className:"absolute inset-0 bg-slate-900/50",onClick:d,"aria-label":"Close dialog"}),l.jsx("div",{className:"relative flex min-h-full items-center justify-center",children:l.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":n,className:"w-full max-w-lg rounded-2xl border border-slate-200 bg-white p-6 shadow-2xl",ref:v,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:pe("inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em]",w.badge),children:"Confirm"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:n}),a?l.jsx("p",{className:"text-sm text-slate-600",children:a}):null]}),g?l.jsx("div",{className:"mt-4 space-y-3",children:g}):null,l.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[l.jsx(ke,{type:"button",variant:"ghost",onClick:d,disabled:h,children:o}),l.jsx(ke,{type:"button",variant:w.confirmVariant,onClick:u,isLoading:h,disabled:x||h,className:b==="danger"?"hover:bg-danger-600":void 0,children:i})]})]})})]}),document.body)}const iT="inline-flex items-center gap-2 rounded-l-md px-3 py-1.5 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed",lT="inline-flex items-center justify-center rounded-r-md border-l px-2 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed";function oT({label:e,icon:n,disabled:a,isLoading:i,highlight:o,className:u,primaryClassName:d,menuClassName:h,title:g,menuAriaLabel:x="Open menu",menuIcon:b=l.jsx(cT,{}),onPrimaryClick:v,onOpenMenu:w,onContextMenu:C}){const N=p.useRef(null),j=!!(a||i),k=T=>{if(j)return;T.preventDefault();const E=N.current?.getBoundingClientRect();if(E){w?.({x:E.left,y:E.bottom});return}w?.({x:T.clientX,y:T.clientY})};return l.jsxs("div",{role:"group",className:pe("inline-flex items-stretch rounded-md shadow-sm",o&&"ring-2 ring-amber-300/70 ring-offset-2 ring-offset-transparent",u),onContextMenu:C,children:[l.jsxs("button",{type:"button",title:g,disabled:j,className:pe(iT,d),onClick:T=>{j||v?.(T)},children:[n,l.jsx("span",{className:"whitespace-nowrap",children:e})]}),l.jsx("button",{ref:N,type:"button","aria-label":x,"aria-haspopup":"menu","aria-expanded":"false",disabled:j,className:pe(lT,h),onClick:k,children:b})]})}function cT(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:l.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}const uT=new TextEncoder;async function dT(e,n={}){const{signal:a,page:i,pageSize:o,includeTotal:u}=n,d={};typeof i=="number"&&i>0&&(d.page=i),typeof o=="number"&&o>0&&(d.page_size=o),u&&(d.include_total=!0);const{data:h}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e},query:d},signal:a});if(!h)throw new Error("Expected configuration page payload.");return h}async function fT(e,n,a){const{data:i}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}",{params:{path:{workspace_id:e,configuration_id:n}},signal:a});return i??null}async function Em(e,n){const{data:a}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/validate",{params:{path:{workspace_id:e,configuration_id:n}}});if(!a)throw new Error("Expected validation payload.");return a}async function hT(e,n){const{data:a}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/publish",{params:{path:{workspace_id:e,configuration_id:n}},body:null});if(!a)throw new Error("Expected configuration payload.");return a}async function mT(e,n){const{data:a}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/archive",{params:{path:{workspace_id:e,configuration_id:n}}});if(!a)throw new Error("Expected configuration payload.");return a}async function pT(e,n,a={}){const{prefix:i,depth:o,include:u,exclude:d,limit:h,pageToken:g,sort:x,order:b,signal:v}=a,{data:w}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files",{params:{path:{workspace_id:e,configuration_id:n},query:{prefix:i??"",depth:o??"infinity",include:u?.length?[...u]:void 0,exclude:d?.length?[...d]:void 0,limit:h,page_token:g??void 0,sort:x,order:b}},signal:v,requestInitExt:{cache:"no-store"}});if(!w)throw new Error("Expected file listing payload.");return w}async function Pb(e,n,a,i){const{data:o}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:a}},headers:{Accept:"application/json"},signal:i,requestInitExt:{cache:"no-store"}});if(!o)throw new Error("Expected file payload.");return o}async function km(e,n){const{data:a,response:i}=await He.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/export",{params:{path:{workspace_id:e,configuration_id:n}},parseAs:"blob"});if(!a)throw new Error("Expected configuration archive payload.");const d=(i?.headers?.get("content-disposition")??"").match(/filename="?([^";]+)"?/i)?.[1];return{blob:a,filename:d??void 0}}async function gT(e,n,a){const i=ST(a.path),o=a.parents?"?parents=1":"",u=await vS(`/api/v1/workspaces/${e}/configurations/${n}/files/${i}${o}`,{method:"PUT",body:uT.encode(a.content),headers:{"Content-Type":"application/octet-stream",...a.create?{"If-None-Match":"*"}:a.etag?{"If-Match":a.etag}:{}}});if(!u.ok){const h=await CT(u),g=h?.title??`Request failed with status ${u.status}`;throw new $n(g,u.status,h)}const d=await u.json().catch(()=>({}));if(!d||!d.path)throw new Error("Expected write response payload.");return d}async function xT(e,n,a,i={}){await He.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:a}},headers:i.etag?{"If-Match":i.etag}:void 0})}async function bT(e,n,a){const{data:i}=await He.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:a}}});if(!i)throw new Error("Expected directory response payload.");return i}async function vT(e,n,a,i={}){const o={};i.recursive&&(o.recursive=!0),await He.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:a},query:o}})}async function yT(e,n){const a=new FormData;a.append("display_name",n.displayName),a.append("file",n.file);const{data:i}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations/import",{params:{path:{workspace_id:e}},body:a,bodySerializer:()=>a});if(!i)throw new Error("Expected configuration payload.");return i}async function wT(e,n,a){const i=new FormData;i.append("file",a.file);const{data:o}=await He.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/import",{params:{path:{workspace_id:e,configuration_id:n}},headers:a.ifMatch?{"If-Match":a.ifMatch}:void 0,body:i,bodySerializer:()=>i});if(!o)throw new Error("Expected configuration payload.");return o}function jT(e){return e.type==="template"?{type:"template"}:{type:"clone",configuration_id:e.configurationId.trim()}}async function dw(e,n){const{data:a}=await He.POST("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e}},body:{display_name:n.displayName.trim(),source:jT(n.source)}});if(!a)throw new Error("Expected configuration payload.");return a}function ST(e){return e.split("/").map(n=>encodeURIComponent(n)).join("/")}async function CT(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Gt={root:e=>["workspaces",e,"configurations"],list:(e,n={})=>[...Gt.root(e),"list",{...n}],detail:(e,n)=>[...Gt.root(e),"detail",n],files:(e,n)=>[...Gt.detail(e,n),"files"],file:(e,n,a)=>[...Gt.files(e,n),"file",a]};function NT({workspaceId:e,configId:n,enabled:a=!0,...i}){const{prefix:o="",depth:u="infinity",include:d,exclude:h,limit:g,pageToken:x,sort:b="path",order:v="asc"}=i;return On({queryKey:[...Gt.files(e,n),o,u,d?.join("|")??"",h?.join("|")??"",g??"",x??"",b,v],queryFn:({signal:w})=>pT(e,n,{prefix:o,depth:u,include:d,exclude:h,limit:g,pageToken:x,sort:b,order:v,signal:w}),enabled:a&&e.length>0&&n.length>0,staleTime:5e3})}function ET(e,n){const a=ct();return Vt({mutationFn:i=>gT(e,n,i),async onSuccess(i,o){await Promise.all([a.invalidateQueries({queryKey:Gt.files(e,n)}),a.invalidateQueries({queryKey:Gt.file(e,n,o.path)})])}})}function kT(e,n){const a=ct();return Vt({mutationFn:i=>xT(e,n,i.path,{etag:i.etag}),async onSuccess(i,o){await Promise.all([a.invalidateQueries({queryKey:Gt.files(e,n)}),a.invalidateQueries({queryKey:Gt.file(e,n,o.path)})])}})}function _T(e,n){const a=ct();return Vt({mutationFn:i=>bT(e,n,i.path),async onSuccess(){await a.invalidateQueries({queryKey:Gt.files(e,n)})}})}function AT(e,n){const a=ct();return Vt({mutationFn:i=>vT(e,n,i.path,{recursive:i.recursive}),async onSuccess(i,o){await Promise.all([a.invalidateQueries({queryKey:Gt.files(e,n)}),a.invalidateQueries({queryKey:Gt.file(e,n,o.path)})])}})}const DT=100;function Du({workspaceId:e,enabled:n=!0,page:a=1,pageSize:i=DT}){return On({queryKey:Gt.list(e,{page:a,pageSize:i}),queryFn:({signal:o})=>dT(e,{page:a,pageSize:i,signal:o}),enabled:n&&e.length>0,staleTime:15e3,placeholderData:o=>o})}function fw({workspaceId:e,configurationId:n,enabled:a=!0}){return On({queryKey:Gt.detail(e,n??""),queryFn:({signal:i})=>n?fT(e,n,i):Promise.resolve(null),enabled:a&&e.length>0&&!!n,staleTime:1e4})}function _m(e){const n=ct();return Vt({mutationFn:({configurationId:a})=>hT(e,a),async onSuccess(){await n.invalidateQueries({queryKey:Gt.root(e)})}})}function hw(e){const n=ct();return Vt({mutationFn:({configurationId:a})=>mT(e,a),async onSuccess(){await n.invalidateQueries({queryKey:Gt.root(e)})}})}function Am(e){const n=ct();return Vt({mutationFn:({sourceConfigurationId:a,displayName:i})=>dw(e,{displayName:i,source:{type:"clone",configurationId:a}}),async onSuccess(){await n.invalidateQueries({queryKey:Gt.root(e)})}})}function TT(e){return Vt({mutationFn:n=>yT(e,n)})}function MT(e,n){return Vt({mutationFn:a=>wT(e,n,a)})}async function mw(e,n,a){const{data:i}=await He.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/sheets",{params:{path:{workspace_id:e,document_id:n}},signal:a});return i??[]}const pw=p.createContext(null),RT=6e3,zT=7e3,Wb=4;function OT({children:e}){const[n,a]=p.useState([]),[i,o]=p.useState([]),u=p.useCallback(b=>{a(v=>v.filter(w=>w.id!==b)),o(v=>v.filter(w=>w.id!==b))},[]),d=p.useCallback(b=>{const v={kind:"toast",id:b.id??Kb(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?RT:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,createdAt:Date.now()};return a(w=>{const N=[...v.persistKey?w.filter(j=>j.persistKey!==v.persistKey):w,v];return N.length>Wb?N.slice(N.length-Wb):N}),typeof window<"u"&&v.duration&&v.duration>0&&window.setTimeout(()=>u(v.id),v.duration+50),v.id},[u]),h=p.useCallback(b=>{const v={kind:"banner",id:b.id??Kb(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?b.sticky?null:zT:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,sticky:b.sticky??!1,createdAt:Date.now()};return o(w=>[...v.persistKey?w.filter(N=>N.persistKey!==v.persistKey):w,v]),typeof window<"u"&&v.duration&&v.duration>0&&window.setTimeout(()=>u(v.id),v.duration+50),v.id},[u]),g=p.useCallback((b,v)=>{b&&((!v||v==="toast")&&a(w=>w.filter(C=>C.scope!==b)),(!v||v==="banner")&&o(w=>w.filter(C=>C.scope!==b)))},[]),x=p.useMemo(()=>({toasts:n,banners:i,pushToast:d,pushBanner:h,dismiss:u,clearScope:g}),[n,i,d,h,u,g]);return l.jsxs(pw.Provider,{value:x,children:[e,l.jsx(LT,{})]})}function gw(){const e=p.useContext(pw);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e}function LT(){const{toasts:e,banners:n,dismiss:a}=gw(),[i,o]=p.useState(!1);return p.useEffect(()=>o(!0),[]),!i||typeof document>"u"?null:ps.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-0 z-[205] flex flex-col items-center gap-3 px-4 pt-3 sm:items-end sm:pr-6",children:n.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>l.jsx(BT,{banner:u,onDismiss:a},u.id))}),l.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-[210] flex flex-col items-center gap-3 px-4 sm:inset-x-auto sm:right-6 sm:bottom-6 sm:items-end sm:px-0",children:e.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>l.jsx(UT,{toast:u,onDismiss:a},u.id))})]}),document.body)}function UT({toast:e,onDismiss:n}){const a=e.duration!==null&&e.duration>0,[i,o]=p.useState(100);p.useEffect(()=>{if(!a||!e.duration)return;o(100);const d=requestAnimationFrame(()=>o(0)),h=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(h)}},[a,e.duration,e.id,n]);const u=$T[e.intent];return l.jsxs("div",{className:pe("pointer-events-auto w-full max-w-sm rounded-2xl border px-4 py-3 text-sm shadow-2xl backdrop-blur",u.container,u.border),children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:pe("mt-1 flex h-8 w-8 items-center justify-center rounded-full",u.icon),children:e.icon??bw(e.intent)}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l.jsx("p",{className:"text-sm font-semibold leading-snug text-white",children:e.title}),e.description?l.jsx("p",{className:"mt-1 text-xs leading-relaxed text-white/70",children:e.description}):null,e.actions.length>0?l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(d=>l.jsx(xw,{action:d,onPress:()=>{d.onSelect(),n(e.id)},appearance:"dark"},d.label))}):null]}),e.dismissible?l.jsx("button",{type:"button",className:"ml-2 inline-flex h-8 w-8 items-center justify-center rounded-full text-white/60 transition hover:bg-white/10 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30","aria-label":"Dismiss notification",onClick:()=>n(e.id),children:l.jsx(vw,{})}):null]}),a&&e.duration?l.jsx("div",{className:"mt-4 h-1 overflow-hidden rounded-full bg-white/10",children:l.jsx("div",{className:pe("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function BT({banner:e,onDismiss:n}){const a=!e.sticky&&e.duration!==null&&e.duration>0,[i,o]=p.useState(100);p.useEffect(()=>{if(!a||!e.duration)return;o(100);const d=requestAnimationFrame(()=>o(0)),h=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(h)}},[a,e.duration,e.id,n]);const u=qT[e.intent];return l.jsxs("div",{className:pe("pointer-events-auto w-full max-w-sm rounded-lg border px-3.5 py-2.5 shadow-lg shadow-black/30 backdrop-blur-sm sm:min-w-[300px]",u.container,u.border),children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:pe("flex h-7 w-7 items-center justify-center rounded-full text-base",u.icon),children:e.icon??bw(e.intent)}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[l.jsx("p",{className:"text-[13px] font-semibold leading-tight",children:e.title}),e.description?l.jsx("p",{className:"text-[12px] leading-relaxed text-white/75",children:e.description}):null,e.actions.length>0?l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:e.actions.map(d=>l.jsx(xw,{action:d,onPress:()=>{d.onSelect(),e.sticky||n(e.id)},appearance:"light"},d.label))}):null]}),e.dismissible?l.jsx("button",{type:"button",className:pe("ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full text-white/70 transition hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30",u.dismiss),"aria-label":"Dismiss notification",onClick:()=>n(e.id),children:l.jsx(vw,{})}):null]}),a&&e.duration?l.jsx("div",{className:"mt-2 h-0.5 overflow-hidden rounded-full bg-white/10",children:l.jsx("div",{className:pe("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function xw({action:e,onPress:n,appearance:a}){const i=e.variant??"secondary",o=a==="dark"?"border-white/15 text-white/90 hover:bg-white/10 focus-visible:ring-white/30":"border-white/20 text-white hover:bg-white/10 focus-visible:ring-white/30";return l.jsx("button",{type:"button",className:pe("inline-flex items-center justify-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2",i==="primary"?"bg-white text-slate-900 hover:bg-slate-100 focus-visible:ring-white/40":o),onClick:n,children:e.label})}function bw(e){switch(e){case"success":return l.jsx(HT,{});case"warning":return l.jsx(ZT,{});case"danger":return l.jsx(VT,{});default:return l.jsx(FT,{})}}const $T={info:{container:"bg-[#0b1220]/95 text-white",border:"border-white/5",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400"},success:{container:"bg-[#031b16]/95 text-emerald-50",border:"border-emerald-500/20",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400"},warning:{container:"bg-[#211604]/95 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-400/20 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400"},danger:{container:"bg-[#22060b]/95 text-rose-50",border:"border-rose-500/30",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400"}},qT={info:{container:"bg-[#101828]/85 text-white",border:"border-white/10",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400",dismiss:"hover:bg-white/10"},success:{container:"bg-[#0d1c17]/85 text-emerald-50",border:"border-emerald-500/15",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400",dismiss:"hover:bg-white/10"},warning:{container:"bg-[#1b1507]/85 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-500/15 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400",dismiss:"hover:bg-white/10"},danger:{container:"bg-[#200912]/85 text-rose-50",border:"border-rose-500/25",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400",dismiss:"hover:bg-white/10"}};function Kb(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}function FT(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M10 7.5v.2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),l.jsx("path",{d:"M9.2 9.5h1.6V14",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function HT(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M6.5 10.5l2.5 2.5 4.5-5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}function ZT(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M9 4.6l-6 10.4a1 1 0 0 0 .87 1.5h12.26a1 1 0 0 0 .87-1.5L11 4.6a1 1 0 0 0-1.74 0Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 8v3.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),l.jsx("path",{d:"M10 14h.01",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}function VT(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M7 7l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function vw(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 4l8 8m0-8-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function Dm(){const e=gw();return p.useMemo(()=>({notifyToast:n=>e.pushToast(n),notifyBanner:n=>e.pushBanner(n),dismissNotification:n=>e.dismiss(n),dismissScope:(n,a)=>e.clearScope(n,a)}),[e])}const IT="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",Vi=p.forwardRef(({className:e,...n},a)=>l.jsx("select",{ref:a,className:pe(IT,e),...n}));Vi.displayName="Select";class QT{constructor(n){if(this.capacity=n,!Number.isFinite(n)||n<=0)throw new Error("RingBuffer capacity must be a positive number.");this.buffer=new Array(n)}buffer;start=0;_length=0;get length(){return this._length}clear(){this.buffer.fill(void 0),this.start=0,this._length=0}push(n){if(this._length<this.capacity){const a=(this.start+this._length)%this.capacity;this.buffer[a]=n,this._length+=1;return}this.buffer[this.start]=n,this.start=(this.start+1)%this.capacity}get(n){if(n<0||n>=this._length)return;const a=(this.start+n)%this.capacity;return this.buffer[a]}toArray(){const n=[];for(let a=0;a<this._length;a+=1){const i=this.get(a);i!==void 0&&n.push(i)}return n}}class PT{constructor(n,a){this.capacity=n,this.buffer=new QT(n),this.snapshot={version:this.version,length:this.buffer.length,capacity:this.capacity},a?.length&&this.appendMany(a)}listeners=new Set;buffer;version=0;snapshot;notifyScheduled=!1;nextId=1;subscribe(n){return this.listeners.add(n),()=>{this.listeners.delete(n)}}getSnapshot=()=>this.snapshot;get length(){return this.buffer.length}getLine(n){return this.buffer.get(n)}toArray(){return this.buffer.toArray()}clear(){this.buffer.clear(),this.bump()}append(n){this.buffer.push(Gb(n,this.nextId++)),this.scheduleNotify()}appendMany(n){for(const a of n)this.buffer.push(Gb(a,this.nextId++));this.scheduleNotify()}bump(){this.version+=1,this.snapshot={version:this.version,length:this.buffer.length,capacity:this.capacity};for(const n of this.listeners)n()}scheduleNotify(){if(this.notifyScheduled)return;this.notifyScheduled=!0;const n=()=>{this.notifyScheduled=!1,this.bump()};if(typeof requestAnimationFrame=="function"){requestAnimationFrame(n);return}setTimeout(n,0)}}function Gb(e,n){if(e.id)return e;const a=e.origin??"run",i=e.timestamp??"ts";return{...e,id:`console-${a}-${i}-${n}`}}function WT(e,n){const a=new URLSearchParams;n.dry_run&&a.set("dry_run","true"),n.validate_only&&a.set("validate_only","true"),n.force_rebuild&&a.set("force_rebuild","true"),n.debug&&a.set("debug","true"),n.log_level&&a.set("log_level",n.log_level),n.input_document_id&&a.set("input_document_id",n.input_document_id);const i=n.input_sheet_names??[];for(const d of i)a.append("input_sheet_names",d);const o=Pi(`/api/v1/configurations/${e}/jobs/stream`),u=a.toString();return u?`${o}?${u}`:o}async function*KT(e,n,a){const i=WT(e,n);yield*GT(i,a)}async function*GT(e,n){const a=typeof DOMException<"u"?new DOMException("Aborted","AbortError"):Object.assign(new Error("Aborted"),{name:"AbortError"}),i=new AbortController,o=()=>i.abort();let u=null;n?.aborted?i.abort():n&&n.addEventListener("abort",o);try{const d=await fetch(e,{method:"GET",credentials:"include",headers:{Accept:"text/event-stream"},signal:i.signal});if(!d.body||!d.ok)throw new Error("Job event stream unavailable.");u=d.body.getReader();const h=new TextDecoder;let g="";for(;;){const{value:x,done:b}=await u.read();g+=h.decode(x??new Uint8Array,{stream:!b});const v=g.split(`

`);g=v.pop()??"";for(const w of v){const C=Yb(w);C&&(yield C)}if(b){const w=Yb(g);w&&(yield w);return}}}catch(d){throw i.signal.aborted?a:d}finally{if(n&&n.removeEventListener("abort",o),u)try{await u.cancel()}catch{}i.signal.aborted||i.abort()}}function Yb(e){const n=[];let a=null,i=null;for(const u of e.split(/\n/)){if(u.startsWith("data:")){const d=u.slice(5);n.push(d.startsWith(" ")?d.slice(1):d);continue}if(u.startsWith("id:")){a=u.slice(3).trim();continue}if(u.startsWith("event:")){i=u.slice(6).trim();continue}}if(!n.length)return null;const o=n.join(`
`);if(!o.trim())return null;try{const u=JSON.parse(o);if(u._raw=o,i&&!u.event&&!u.type&&(u.event=i),a&&u.sequence===void 0){const d=Number(a);Number.isFinite(d)?u.sequence=d:u.sse_id=a}return u}catch{return null}}function YT(e){const n=e.timestamp??e.created_at,a=new Date(n);return Number.isNaN(a.getTime())?new Date().toISOString():a.toISOString()}function Xb(e){return(e.event??e.type??"").toString()}function mh(e){const n=e.data??e.payload;return n&&typeof n=="object"?n:{}}function XT({configId:e,onJobIdChange:n,seed:a,maxConsoleLines:i=2e3,onError:o}){const u=p.useRef(new PT(i,a?.console?[...a.console].slice(-i):void 0)),d=p.useRef(null),h=p.useRef(!1),[g,x]=p.useState(null),[b,v]=p.useState(null),[w,C]=p.useState("idle"),[N,j]=p.useState(null),k=w==="running",T=p.useCallback(()=>{const I=d.current;I&&(I.abort(),d.current=null)},[]);p.useEffect(()=>()=>{T()},[T]);const E=p.useCallback(()=>{u.current.clear()},[]),B=p.useCallback(I=>{o&&o(I)},[o]),Q=p.useCallback(I=>{const A=Xb(I);if(A==="job.meta"){const D=mh(I),U=typeof D.jobId=="string"?D.jobId:null;U&&(x(ie=>ie??U),n?.(U));return}const V=mh(I),X=(A.startsWith("build.")?"build":A==="console.line"&&typeof V.scope=="string"?V.scope:"run")==="build"?"build":"run",J=typeof I.level=="string"?I.level.toLowerCase():"info",L=J==="debug"||J==="warning"||J==="error"||J==="success"?J:"info",ae=typeof I.message=="string"?I.message:"",de=ae.trim()?ae:A,be={id:typeof I.event_id=="string"?I.event_id:void 0,level:L,message:de,timestamp:YT(I),origin:X,raw:I};if(u.current.append(be),A==="run.complete"){j(V);const D=typeof V.status=="string"?V.status.toLowerCase():"";C(D==="succeeded"||D==="success"?"succeeded":D==="cancelled"||D==="canceled"?"cancelled":"failed")}},[n]),O=p.useCallback(async(I,A,V)=>{if(h.current||k||V?.prepare&&V.prepare()===!1)return null;T(),E(),j(null),v(A.mode),C("running"),x(null),n?.(null);const W=new Date().toISOString(),X=new AbortController;d.current=X,h.current=!0;let J=null;try{for await(const L of KT(e,I,X.signal)){Q(L);const ae=Xb(L);if(ae==="job.meta"){const de=mh(L),be=typeof de.jobId=="string"?de.jobId:null;be&&!J&&(J=be,x(be),n?.(be))}if(ae==="run.complete")break}if(!J)throw new Error("Job stream ended before returning a job id.");return{jobId:J,startedAt:W}}catch(L){return X.signal.aborted||(C("failed"),B(L)),null}finally{h.current=!1,d.current===X&&(d.current=null)}},[E,e,k,n,B,Q,T]);return p.useMemo(()=>({console:u.current,jobId:g,jobMode:b,jobStatus:w,jobInProgress:k,completedDetails:N,clearConsole:E,startJob:O}),[g,b,w,k,N,E,O])}async function JT(e,n){const a=typeof e=="string"?await Tm(e,n):e,i=a.events_download_url??a.links?.events_download??a.links?.logs;if(!i)throw new Error("Run logs link unavailable.");const o=await fetch(Pi(i),{method:"GET",credentials:"include",headers:{Accept:"application/x-ndjson"},signal:n});if(!o.ok)throw new Error(`Run telemetry unavailable (${o.status}).`);return(await o.text()??"").split(/\r?\n/).filter(Boolean).map(h=>{try{return JSON.parse(h)}catch(g){return console.warn("Skipping invalid telemetry line",{error:g,line:h}),null}}).filter(h=>!!h)}async function Tm(e,n){const{data:a}=await He.GET("/api/v1/runs/{run_id}",{params:{path:{run_id:e}},signal:n});if(!a)throw new Error("Run not found");return a}function yw(e){const n=e.output,a=n?.ready,i=n?.download_url??e.links?.output_download??e.links?.output;return a===!1||!i?null:Pi(i)}function ww(e){const n=e.events_download_url??e.links?.events_download??e.links?.logs;return n?Pi(n):null}function eM(e){const n=e.links?.input_download??e.links?.input;return n?Pi(n):null}const Jb={detail:e=>["run",e],telemetry:e=>["run-telemetry",e]};function tM(e){return e==="succeeded"||e==="failed"||e==="cancelled"}function nM(e){const n=(e??"").toLowerCase();return n==="succeeded"||n==="failed"||n==="cancelled"?n:n==="success"?"succeeded":"failed"}function sM({configId:e,runId:n,seed:a,maxConsoleLines:i,onRunIdChange:o,onRunComplete:u}){const d=p.useRef(null),{console:h,jobId:g,jobMode:x,jobStatus:b,jobInProgress:v,completedDetails:w,clearConsole:C,startJob:N}=XT({configId:e,onJobIdChange:o,seed:a?{console:a.console}:void 0,maxConsoleLines:i}),j=g??n,k=x??null,[T,E]=p.useState(null),B=p.useRef(null),Q=p.useMemo(()=>({status:v&&k==="validation"?"running":"idle",messages:[],lastRunAt:void 0,error:null,digest:null}),[v,k]);p.useEffect(()=>{if(!j||!tM(b)||B.current===j)return;B.current=j;const A=nM(typeof w?.status=="string"?w.status:null),V=k??"extraction",W=w?.execution??{},X=typeof W.started_at=="string"?W.started_at:null,J=typeof W.completed_at=="string"?W.completed_at:new Date().toISOString(),L=typeof W.duration_ms=="number"?W.duration_ms:null;if(u?.({runId:j,status:A,mode:V,startedAt:X,completedAt:J,durationMs:L,payload:w}),V==="validation")return;const ae=d.current,de=w?.artifacts??{},be=typeof de.output_path=="string"?de.output_path:null,D=typeof de.processed_file=="string"?de.processed_file:null;E({runId:j,status:A,outputUrl:void 0,inputUrl:void 0,outputReady:be?!0:void 0,outputFilename:be?aM(be):null,outputPath:be,logsUrl:void 0,processedFile:D,outputLoaded:!1,summary:null,summaryLoaded:!0,summaryError:null,telemetry:null,telemetryLoaded:!0,telemetryError:null,documentName:ae?.documentName,sheetNames:ae?.sheetNames??[],error:null,startedAt:X,completedAt:J,durationMs:L}),(async()=>{try{const U=await Tm(j),ie=yw(U)??void 0,me=ww(U)??void 0,se=eM(U)??void 0;E(_=>_&&_.runId===j?{..._,outputUrl:ie??_.outputUrl,outputReady:ie?!0:_.outputReady,logsUrl:me??_.logsUrl,inputUrl:se??_.inputUrl,outputLoaded:!0}:_)}catch{E(U=>U&&U.runId===j?{...U,outputLoaded:!0}:U)}})()},[j,b,w,u,k]);const O=p.useCallback(async(A,V,W)=>{d.current=V;const X=W?.forceRebuild?{...A,force_rebuild:!0}:A,J=await N(X,V,{prepare:W?.prepare});return J&&V.mode==="extraction"&&E(null),J?{runId:J.jobId,startedAt:J.startedAt}:null},[N]),I=b==="running"?"running":b;return p.useMemo(()=>({runStatus:I,runMode:k??void 0,runInProgress:v,validation:Q,console:h,latestRun:T,clearConsole:C,startRun:O}),[I,k,v,Q,h,T,C,O])}function aM(e){const n=e.trim();if(!n)return"";const a=n.split("/");return a[a.length-1]||n}const jw=e=>`ade.ui.workspace.${e}.config-builder.last`;function Mm(e){return sa(jw(e))}function Rm(e,n){if(n){const a={configId:n};return e.set(a),a}return e.clear(),null}function Zi(e){return e?typeof e=="string"?e.toLowerCase():String(e).toLowerCase():""}function ev(e,n){const a=e?new Date(e).getTime():0;return(n?new Date(n).getTime():0)-a}function zm(e,n){const a=`Copy of ${e}`.trim();if(!n.has(a.toLowerCase()))return a;for(let i=2;i<100;i+=1){const o=`${a} (${i})`;if(!n.has(o.toLowerCase()))return o}return`${a} (${Date.now()})`}const rM={min:200,max:420},iM=320,lM=120,ph=140,oM=220,cM=40,uM=2e3,tv=10,dM=56,nv="Panel closed to keep the editor readable on this screen size. Resize the window or collapse other panes to reopen it.",fM=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.tabs`,hM=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.console`,mM=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.editor-theme`,pM=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.explorer.expanded`,gM=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.layout`,xM=[{value:"system",label:"System"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}],bM={explorer:"",search:"Search coming soon",scm:"Source Control coming soon",extensions:"Extensions coming soon"},vM=[{value:"DEBUG",label:"Debug"},{value:"INFO",label:"Info"},{value:"WARNING",label:"Warning"},{value:"ERROR",label:"Error"}];function Sw({workspaceId:e,configId:n,configName:a,configDisplayName:i,seed:o,windowState:u,onMinimizeWindow:d,onMaximizeWindow:h,onRestoreWindow:g,onCloseWorkbench:x,shouldBypassUnsavedGuard:b}){const v=ct(),w=Ft(),{fileId:C,pane:N,console:j,consoleExplicit:k,setFileId:T,setPane:E,setConsole:B}=tT(),[Q,O]=p.useState(null),I=!!o,A=NT({workspaceId:e,configId:n,depth:"infinity",sort:"path",order:"asc",enabled:!I}),V=A.data?.fileset_hash??null,W=A.data?.status==="draft",X=A.data?.capabilities,J=I||!!X?.editable,L=!J,ae=p.useMemo(()=>Mm(e),[e]),de=Du({workspaceId:e,enabled:!I}),be=p.useMemo(()=>{const F=de.data?.items??[];return new Set(F.map(fe=>fe.display_name.trim().toLowerCase()))},[de.data?.items]),D=p.useMemo(()=>{const F=de.data?.items??[];for(const fe of F)if(Zi(fe.status)==="active")return fe;return null},[de.data?.items]),U=Am(e),ie=_m(e),[me,se]=p.useState(!1),[_,P]=p.useState(""),[le,q]=p.useState(null),[ee,H]=p.useState(!1),[K,R]=p.useState(null),Z=p.useMemo(()=>o?o.tree:A.data?Hb(A.data):null,[o,A.data]);p.useEffect(()=>{n&&(I||A.isSuccess)&&Rm(ae,n)},[n,I,A.isSuccess,ae]);const ge=p.useCallback(()=>{U.reset(),q(null),P(zm(i,be)),se(!0)},[i,U,be]);p.useEffect(()=>{if(!ee||!W||I)return;let F=!1;return R({stage:"checking"}),Em(e,n).then(fe=>{if(!F){if(Array.isArray(fe.issues)&&fe.issues.length>0){R({stage:"issues",issues:fe.issues});return}R({stage:"confirm"})}}).catch(fe=>{if(F)return;const Te=fe instanceof Error?fe.message:"Unable to validate configuration.";R({stage:"error",message:Te})}),()=>{F=!0}},[n,W,ee,I,e]);const[De,Ze]=p.useState(null),st=p.useCallback(F=>{Ze(F)},[]),ye=MT(e,n),Ce=p.useRef(null),[$e,We]=p.useState(null),[at,Ot]=p.useState(!1),[M,Y]=p.useState(!1),{runStatus:ce,runMode:Ee,runInProgress:we,validation:Se,console:Re,latestRun:Qe,clearConsole:Pe,startRun:mt}=sM({configId:n,runId:Q,seed:o,maxConsoleLines:uM,onRunIdChange:O,onRunComplete:st}),[Ne,Ae]=p.useState(!1),[Fe,vt]=p.useState(!1),Xe=p.useMemo(()=>o?null:sa(fM(e,n)),[e,n,o]),At=p.useMemo(()=>o?null:sa(hM(e,n)),[e,n,o]),Rt=p.useMemo(()=>sa(gM(e,n)),[e,n]),Xn=p.useRef(null),ue=rT(mM(e,n)),_e=ue.resolvedTheme==="vs-light"?"light":"dark",rt=Se.lastRunAt?`Last run ${OM(Se.lastRunAt)}`:void 0,[Dt,ut]=p.useState(()=>{const F=Rt.get();return F?.explorer?{collapsed:!!F.explorer.collapsed,fraction:F.explorer.fraction??280/1200}:{collapsed:!1,fraction:280/1200}}),[pt,Bt]=p.useState(null),un=p.useRef(null),[Sn,tn]=p.useState(!1);p.useEffect(()=>{At?Xn.current=At.get()??null:Xn.current=null,un.current=null,Bt(null),tn(!1)},[At]);const[gn,Fn]=p.useState({width:0,height:0}),[Qt,Jn]=p.useState(null),[Cn,Hn]=p.useState("explorer"),[gs,xs]=p.useState(null),[Zn,es]=p.useState(null),[Ln,nn]=p.useState(!1),[An,Vs]=p.useState(!1),[Ji,Co]=p.useState(!1),[hr,ia]=p.useState(null),[mr,pr]=p.useState(null),[ka,Is]=p.useState(null),{notifyBanner:_a,dismissScope:la,notifyToast:Zt}=Dm(),Aa=p.useMemo(()=>`workbench-console:${e}:${n}`,[e,n]),Xr=kT(e,n),zs=_T(e,n),Qs=AT(e,n),ot=p.useCallback((F,fe)=>{_a({title:F,intent:fe?.intent??"info",duration:fe?.duration??6e3,dismissible:!0,scope:Aa,persistKey:Aa})},[_a,Aa]),gr=p.useCallback(()=>{la(Aa,"banner")},[la,Aa]),xn=p.useCallback(F=>{const fe=zM(F);ot(fe,{intent:"danger",duration:null})},[ot]),No=p.useCallback(async()=>{Ot(!0);try{const F=await km(e,n),fe=F.filename??`${n}.zip`,Te=URL.createObjectURL(F.blob),Me=document.createElement("a");Me.href=Te,Me.download=fe,Me.click(),URL.revokeObjectURL(Te),ot(`Exported ${fe}`,{intent:"success",duration:4e3})}catch(F){xn(F),ot("Export failed. Try again in a moment.",{intent:"danger",duration:6e3})}finally{Ot(!1)}},[e,n,ot,xn]),Da=p.useCallback(()=>{se(!1),q(null)},[]),Jr=p.useCallback(()=>{const F=_.trim();if(!F){q("Enter a name for the new draft configuration.");return}q(null),U.mutate({sourceConfigurationId:n,displayName:F},{onSuccess(fe){Zt({title:"Draft created.",intent:"success",duration:3500}),Da(),w(`/workspaces/${e}/config-builder/${encodeURIComponent(fe.id)}/editor`)},onError(fe){q(fe instanceof Error?fe.message:"Unable to duplicate configuration.")}})},[Da,n,_,U,w,Zt,e]),ts=p.useCallback(()=>{ie.reset(),R({stage:"checking"}),H(!0)},[ie]),bn=p.useCallback(()=>{H(!1),R(null)},[]),Eo=p.useCallback(()=>{ie.mutate({configurationId:n},{async onSuccess(){Zt({title:"Configuration is now active and locked.",description:"Duplicate it to make further edits.",intent:"success",duration:5e3}),bn(),await Promise.all([v.invalidateQueries({queryKey:Gt.files(e,n)}),v.invalidateQueries({queryKey:Gt.root(e)})])},onError(F){const fe=F instanceof Error?F.message:"Unable to make configuration active.";R({stage:"error",message:fe})}})},[bn,n,ie,Zt,v,e]);p.useEffect(()=>{if(!De)return;const{runId:F,status:fe,payload:Te}=De,Me=Te?.failure??void 0,Ve=typeof Me?.message=="string"?Me.message.trim():null,$t=typeof Te?.summary=="string"?Te.summary.trim():null,jt=Ve||$t||"ADE run failed.",Rn=fe==="cancelled";ot(fe==="succeeded"?"ADE run completed successfully.":Rn?"ADE run cancelled.":jt,{intent:fe==="succeeded"?"success":Rn?"info":"danger"}),Ze(ii=>ii&&ii.runId===F?null:ii)},[De,ot,Ze]);const Ps=u==="maximized",Ws=typeof navigator<"u"?/mac/i.test(navigator.platform):!1,ko=p.useCallback(()=>{x()},[x]),xr=!Dt.collapsed,Ou=p.useCallback(async F=>{if(o)return{content:o.content[F]??"",etag:null};const fe=await v.fetchQuery({queryKey:Gt.file(e,n,F),queryFn:({signal:Te})=>Pb(e,n,F,Te)});if(!fe)throw new Error("File could not be loaded.");return{content:av(fe),etag:fe.etag??null}},[o,v,e,n]),Ue=KD({tree:Z,initialActiveFileId:C,loadFile:Ou,persistence:Xe??void 0}),Ta=ET(e,n),el=p.useCallback(async F=>{if(I)return null;const fe=await v.fetchQuery({queryKey:Gt.file(e,n,F),queryFn:({signal:Me})=>Pb(e,n,F,Me)}),Te=av(fe);return Ue.replaceTabContent(F,{content:Te,etag:fe.etag??null,metadata:{size:fe.size??null,modifiedAt:fe.mtime??null,contentType:fe.content_type??Ue.tabs.find(Me=>Me.id===F)?.metadata?.contentType??null,etag:fe.etag??null}}),fe},[I,v,e,n,Ue]);sT({isDirty:Ue.isDirty,shouldBypassNavigation:b});const tl=p.useCallback(()=>{d()},[d]),Ma=p.useCallback(()=>{Ps?g():h()},[Ps,h,g]),Dn=j!=="open",Ks=p.useMemo(()=>Ue.tabs.filter(F=>F.status==="ready"&&F.content!==F.initialContent),[Ue.tabs]),Ra=Ue.tabs.some(F=>F.saving),Gs=!I&&J&&Ks.length>0;p.useEffect(()=>{typeof window>"u"||requestAnimationFrame(()=>{window.dispatchEvent(new Event("ade:workbench-layout"))})},[Dt.collapsed,Dt.fraction,Dn,pt,Ps,N]);const oa=p.useCallback(async F=>{if(I)return!1;const fe=Ue.tabs.find(Ve=>Ve.id===F);if(!fe||fe.status!=="ready"||fe.content===fe.initialContent||fe.saving)return!1;const Te=fe.content,Me=fe.etag??void 0;Ue.beginSavingTab(F);try{const Ve=await Ta.mutateAsync({path:fe.id,content:Te,etag:Me,create:!Me,parents:!0}),$t={size:Ve.size??fe.metadata?.size??null,modifiedAt:Ve.mtime??fe.metadata?.modifiedAt??null,contentType:fe.metadata?.contentType??null,etag:Ve.etag??fe.metadata?.etag??null};return Ue.completeSavingTab(F,{etag:Ve.etag??fe.etag??null,metadata:$t,savedContent:Te}),ot(`Saved ${fe.name}`,{intent:"success",duration:4e3}),!0}catch(Ve){const $t=Ve instanceof $n&&Ve.status===412,jt=$t?new Error("Save blocked because this file changed on the server. Reloading latest version."):Ve;if(Ue.failSavingTab(F,jt instanceof Error?jt.message:String(jt)),$t)try{await el(F),ot("File reloaded with the latest version from the server. Review before saving again.",{intent:"warning",duration:6e3})}catch(Rn){xn(Rn)}return xn(jt),!1}},[I,Ue,Ta,ot,el,xn]),br=p.useCallback(async F=>{const fe=[];for(const Te of F)await oa(Te)&&fe.push(Te);return fe},[oa]),za=p.useCallback(async()=>{if(!Gs||Ks.length===0)return!0;const fe=(await br(Ks.map(Te=>Te.id))).length===Ks.length;return fe||ot("Save failed. Fix errors before running again.",{intent:"danger",duration:7e3}),fe},[Gs,Ks,br,ot]),Lu=p.useCallback(F=>{oa(F)},[oa]),nl=p.useCallback(()=>{Ue.activeTab&&oa(Ue.activeTab.id)},[Ue.activeTab,oa]),ei=p.useCallback(()=>{if(!Gs)return;const F=Ks.map(fe=>fe.id);(async()=>{const fe=await br(F);fe.length>1&&ot(`Saved ${fe.length} files`,{intent:"success",duration:5e3})})()},[Gs,Ks,br,ot]);p.useEffect(()=>{const F=Qt;if(!F||typeof window>"u")return;const fe=()=>{const Me=F.getBoundingClientRect(),Ve=Me.width,$t=Me.height;Fn({width:Ve,height:$t}),window.dispatchEvent(new Event("ade:workbench-layout"))};if(fe(),typeof window.ResizeObserver>"u")return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe);const Te=new window.ResizeObserver(()=>fe());return Te.observe(F),()=>Te.disconnect()},[Qt]);const Tn=Dn?iM:lM,Yt=p.useMemo(()=>{const F=Math.max(0,gn.height),Te=Math.max(0,F-Tn-tv),Me=Math.min(ph,Te);return{container:F,minPx:Me,maxPx:Te}},[gn.height,Tn]),sl=p.useCallback((F,fe=Yt)=>hs(F,fe.minPx,fe.maxPx),[Yt]),ns=p.useCallback(()=>{const F=Xn.current;return F&&"version"in F&&F.version===2&&typeof F.fraction=="number"?hs(F.fraction,0,1):F&&"height"in F&&typeof F.height=="number"&&Yt.container>0?hs(F.height/Yt.container,0,1):.25},[Yt.container]);p.useEffect(()=>{pt===null&&Yt.container>0&&Bt(ns())},[pt,Yt.container,ns]);const ss=p.useCallback(()=>Yt.container>0&&Yt.maxPx<ph?(B("closed"),ot(nv,{intent:"warning",duration:1e4}),!1):(gr(),B("open"),Bt(F=>F!==null?hs(F,0,1):un.current!==null?hs(un.current,0,1):ns()),!0),[Yt,B,ot,gr,ns]),ti=p.useCallback(()=>{un.current=pt,B("closed"),gr()},[pt,B,gr]);p.useEffect(()=>{if(Sn)return;const F=Xn.current?.state;if(k||!F){tn(!0);return}(F==="open"||F==="closed")&&F!==j&&B(F),tn(!0)},[k,j,B,Sn]),p.useEffect(()=>{!At||Ln||pt===null||At.set({version:2,fraction:hs(pt,0,1),state:j})},[At,pt,j,Ln]),p.useEffect(()=>{if(!(j!=="open"||!Yt.container)){if(Yt.maxPx<ph){B("closed"),ot(nv,{intent:"warning",duration:1e4});return}Bt(F=>F===null?ns():hs(F,0,1))}},[j,Yt,B,ot,ns]);const ni=p.useCallback((F,fe)=>{if(F<=0)return{minPx:fe.min,maxPx:fe.max,minFrac:0,maxFrac:1};const Te=Math.min(fe.min,F),Me=Math.min(fe.max,F);return{minPx:Te,maxPx:Me,minFrac:Te/F,maxFrac:Me/F}},[]),bs=Math.max(0,gn.width-dM),as=p.useMemo(()=>ni(bs,rM),[bs,ni]),rs=p.useCallback((F,fe)=>hs(F,fe.minFrac,fe.maxFrac),[]);p.useEffect(()=>{bs<=0||ut(F=>{if(F.collapsed)return F;const fe=rs(F.fraction,as);return fe===F.fraction?F:{...F,fraction:fe}})},[bs,as,rs]),p.useEffect(()=>{Rt.set({version:2,explorer:{collapsed:Dt.collapsed,fraction:Dt.fraction}})},[Rt,Dt]);const si=Dt.collapsed?0:hs(Dt.fraction,as.minFrac,as.maxFrac)*bs,Ys=bs>0?Math.min(si,bs):si,dn=Math.max(0,Yt.container),Ao=(pt??(dn>0?hs(oM/dn,0,1):.25))*dn,Oa=dn>0?sl(Ao):0,vr=tv,rl=Dn?cM:Oa,Mn=dn>0?Math.max(Tn,dn-vr-rl):Tn;p.useEffect(()=>{const F=Ue.activeTabId;if(!F){T(void 0);return}T(F)},[Ue.activeTabId,T]),p.useEffect(()=>{!hr||!Z||Ts(Z,hr)&&(Ue.openFile(hr),T(hr),ia(null))},[hr,Z,Ue,T]);const vs=p.useCallback(()=>ss()?(E("terminal"),!0):!1,[ss,E]),ai=p.useCallback(async()=>{I||!Z||A.isLoading||A.isError||!await za()||await mt({validate_only:!0},{mode:"validation"},{prepare:vs})},[I,Z,A.isLoading,A.isError,za,mt,vs]),yr=p.useCallback(async F=>{if(Ae(!1),vt(!1),I||!Z||A.isLoading||A.isError||!await za())return;const Te=Array.from(new Set((F.sheetNames??[]).filter(Boolean)));mt({input_document_id:F.documentId,input_sheet_names:Te.length?Te:void 0,log_level:F.logLevel},{mode:"extraction",documentId:F.documentId,documentName:F.documentName,sheetNames:Te},{forceRebuild:Fe,prepare:vs})},[I,Z,A.isLoading,A.isError,mt,Fe,vs,za]);p.useEffect(()=>{if(typeof window>"u")return;const F=fe=>{if(!(Ws?fe.metaKey:fe.ctrlKey)||fe.altKey||fe.key.toLowerCase()!=="s")return;const Me=fe.target;if(Me){const Ve=Me.tagName;if(Ve==="INPUT"||Ve==="TEXTAREA"||Me.isContentEditable)return}Gs&&(fe.preventDefault(),nl())};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[Ws,Gs,nl]);const Do=Ee??(we?"extraction":void 0),La=we,il=Se.status==="running"||La&&Do==="validation",wr=!I&&!!Z&&!A.isLoading&&!A.isError&&!La&&Se.status!=="running",ri=La&&Do!=="validation",jr=!I&&!!Z&&!A.isLoading&&!A.isError&&!La,Ua=!I&&!A.isLoading&&!A.isError&&!!X?.can_create,ll=Ua&&!Xr.isPending&&!!X?.can_delete,ol=Ua&&!zs.isPending,Sr=Ua&&!Qs.isPending&&!!X?.can_delete,Ba=W&&!I&&!ye.isPending&&!!V,Cr=W&&!I&&!Ue.isDirty&&!ie.isPending,Uu=p.useCallback(F=>{Hn(F),F==="explorer"&&ut(fe=>({...fe,collapsed:!1}))},[]),Bu=p.useCallback(F=>{F.preventDefault();const fe=F.currentTarget.getBoundingClientRect();xs({x:fe.right+8,y:fe.top})},[]),$u=p.useCallback(F=>{We(F)},[]),To=p.useCallback(()=>xs(null),[]),Os=p.useCallback(()=>{Dn?ss():ti()},[Dn,ss,ti]);p.useEffect(()=>{if(typeof window>"u")return;const F=fe=>{if(!(Ws?fe.metaKey:fe.ctrlKey)||fe.altKey||fe.key?.toLowerCase()!=="`"&&fe.code!=="Backquote")return;const Ve=fe.target;if(Ve&&!(typeof Ve.closest=="function"?Ve.closest("[data-editor-area]"):null)){const jt=Ve.tagName,Rn=Ve.getAttribute("role");if(jt==="INPUT"||jt==="TEXTAREA"||Rn==="textbox"||Ve.isContentEditable)return}fe.preventDefault(),Os()};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[Ws,Os]);const qu=p.useCallback(()=>{Pe()},[Pe]),Fu=p.useCallback(()=>{ut(F=>({...F,collapsed:!F.collapsed}))},[]),Hu=p.useCallback(()=>{ut(F=>({...F,collapsed:!0}))},[]),cl=p.useCallback(async(F,fe)=>{const Te=fe.trim();if(!Te)throw new Error("Enter a file name.");if(Te.includes(".."))throw new Error("File name cannot include '..'.");if(L)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Ua)throw new Error("Files are still loading.");const Me=F.replace(/\/+$/,""),Ve=Te.replace(/^\/+/,"").replace(/\/+/g,"/"),jt=(Me?`${Me}/${Ve}`:Ve).replace(/\/+/g,"/");if(!jt||jt.endsWith("/"))throw new Error("Enter a valid file name.");if(Z&&Ts(Z,jt))throw new Error("A file or folder with that name already exists.");Vs(!0);try{await Ta.mutateAsync({path:jt,content:"",parents:!0,create:!0}),ia(jt),await A.refetch(),ot(`Created ${jt}`,{intent:"success",duration:4e3})}catch(Rn){throw xn(Rn),Rn instanceof Error?Rn:new Error("Unable to create file.")}finally{Vs(!1)}},[Ua,L,Z,Ta,A,ot,xn]),Zu=p.useCallback(async(F,fe)=>{const Te=fe.trim();if(!Te)throw new Error("Enter a folder name.");if(Te.includes(".."))throw new Error("Folder name cannot include '..'.");if(L)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!ol)throw new Error("Files are still loading.");const Me=F.replace(/\/+$/,""),Ve=Te.replace(/^\/+/,"").replace(/\/+/g,"/"),jt=(Me?`${Me}/${Ve}`:Ve).replace(/\/+/g,"/").replace(/\/$/,"");if(!jt)throw new Error("Enter a valid folder name.");if(Z&&Ts(Z,jt))throw new Error("A file or folder with that name already exists.");Co(!0);try{await zs.mutateAsync({path:jt}),await A.refetch(),ot(`Folder ready: ${jt}`,{intent:"success",duration:4e3})}catch(Rn){throw xn(Rn),Rn instanceof Error?Rn:new Error("Unable to create folder.")}finally{Co(!1)}},[ol,L,Z,zs,A,ot,xn]),Vu=p.useCallback(async F=>{if(L)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!ll)throw new Error("Files are still loading.");const fe=Z?Ts(Z,F):null;if(!Z||!fe)throw new Error("File not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete ${F}? This cannot be undone.`)){Vs(!1),pr(F);try{await Xr.mutateAsync({path:F,etag:fe.metadata?.etag}),Ue.closeTab(F),ia(Me=>Me===F?null:Me),await A.refetch(),ot(`Deleted ${F}`,{intent:"info",duration:4e3})}catch(Me){const Ve=Me instanceof $n&&Me.status===428?"Delete blocked: missing latest file version. Reload the explorer and try again.":Me instanceof Error?Me.message:"Unable to delete file.";throw xn(Ve),new Error(Ve)}finally{pr(Me=>Me===F?null:Me)}}},[ll,L,Z,Xr,Ue,A,ot,xn,pr]),Iu=p.useCallback(async F=>{if(L)throw new Error("This configuration is read-only. Duplicate it to edit.");if(!Sr)throw new Error("Files are still loading.");const fe=Z?Ts(Z,F):null;if(!Z||!fe||fe.kind!=="folder")throw new Error("Folder not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete folder ${F} and all contents? This cannot be undone.`)){Is(F);try{await Qs.mutateAsync({path:F,recursive:!0}),ia(Me=>Me===F?null:Me),Ue.closeTab(F),await A.refetch(),ot(`Deleted folder ${F}`,{intent:"info",duration:4e3})}catch(Me){const Ve=Me instanceof Error?Me.message:"Unable to delete folder.";throw xn(Ve),new Error(Ve)}finally{Is(Me=>Me===F?null:Me)}}},[Sr,L,Z,Qs,Ue,A,ot,xn,Is]),ul=p.useCallback(()=>{if(!Ba){ot("Replace is only available for draft configurations.",{intent:"warning",duration:6e3}),We(null);return}We(null),Y(!0)},[Ba,ot]),Qu=p.useCallback(async F=>{const fe=F.target.files?.[0]??null;if(F.target.value="",!!fe)try{await ye.mutateAsync({file:fe,ifMatch:V}),Xe?.clear?.(),Ue.closeAllTabs(),T(void 0);const Me=(await A.refetch()).data??A.data??null,Ve=Me?Hb(Me):null,$t=Ve?Nm(Ve):null;ia($t?.id??null),ot("Configuration replaced from archive.",{intent:"success",duration:6e3})}catch(Te){const Me=Te instanceof $n&&Te.status===412?"Replace blocked: the configuration changed on the server. Reload and try again.":Te instanceof $n&&Te.status===428?"Replace blocked: refresh the file list and try again.":Te instanceof Error?Te.message:"Unable to replace configuration.";xn(Me),ot(Me,{intent:"danger",duration:6e3})}},[ye,V,Xe,Ue,A,T,ia,ot,xn]),Pu=p.useMemo(()=>{const F=l.jsx("span",{className:"inline-block h-4 w-4 opacity-0"}),fe=xM.map(Te=>({id:`theme-${Te.value}`,label:`${Te.label} theme`,icon:ue.preference===Te.value?l.jsx(gh,{}):F,onSelect:()=>ue.setPreference(Te.value)}));return fe.push({id:"toggle-explorer",label:Dt.collapsed?"Show Explorer":"Hide Explorer",dividerAbove:!0,icon:Dt.collapsed?F:l.jsx(gh,{}),onSelect:()=>ut(Te=>({...Te,collapsed:!Te.collapsed}))},{id:"toggle-console",label:Dn?"Show Console":"Hide Console",icon:Dn?F:l.jsx(gh,{}),onSelect:Os}),fe},[ue,Dt.collapsed,Dn,Os]),Wu=p.useMemo(()=>{const F=[];return W&&F.push({id:"make-active",label:"Make active",disabled:!Cr,onSelect:()=>{We(null),ts()}}),F.push({id:"duplicate",label:"Duplicate to edit",onSelect:()=>{We(null),ge()}}),F.push({id:"export",label:at?"Exporting":"Export (.zip)",disabled:at,dividerAbove:!0,onSelect:()=>{We(null),No()}},{id:"replace",label:"Import from zip",disabled:!Ba,onSelect:ul}),F},[Cr,Ba,No,ul,W,at,ge,ts]);p.useEffect(()=>{if(typeof document>"u"||!Ps)return;const F=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=F||""}},[Ps]);const Ku=LM(e),Gu=Ws?"S":"Ctrl+S",Yu=Ws?"`":"Ctrl+`",Xu=p.useMemo(()=>[{id:"test-force",label:"Force build and test",disabled:!jr,onSelect:()=>{vt(!0),Ae(!0),es(null)}}],[jr,vt,Ae,es]);if(!o&&A.isLoading)return l.jsx(wt,{variant:"loading",title:"Loading configuration files",description:"Fetching workspace configuration files for the workbench."});if(!o&&A.isError)return l.jsx(wt,{variant:"error",title:"Unable to load configuration files",description:"Try reloading the page or check your connection."});if(!Z)return l.jsx(wt,{variant:"empty",title:"No configuration files found",description:"Create files in the ADE configuration package to begin editing."});const Ju=Ps?_e==="dark"?"bg-[#0f111a] text-white":"bg-slate-50 text-slate-900":_e==="dark"?"bg-transparent text-white":"bg-transparent text-slate-900",ed=_e==="dark"?"#1b1f27":"#ffffff",dl=_e==="dark"?"#f5f6fb":"#0f172a",Nr=Ps?pe("fixed inset-0 z-[90] flex flex-col",_e==="dark"?"bg-[#0f111a] text-white":"bg-white text-slate-900"):pe("flex w-full min-h-0 min-w-0 flex-1 flex-col overflow-hidden",_e==="dark"?"bg-[#101322] text-white":"bg-white text-slate-900"),fl=_e==="dark"?{bar:"border-[#1f2431] bg-[#0f111a] text-slate-200",hint:"text-slate-400",button:"border-[#2b3040] bg-[#161926] text-slate-100 hover:border-[#3b4153] hover:bg-[#1e2333]"}:{bar:"border-slate-300 bg-white text-slate-700",hint:"text-slate-500",button:"border-slate-300 bg-slate-50 text-slate-700 hover:border-slate-400"};return l.jsxs("div",{className:pe("flex h-full min-h-0 w-full min-w-0 flex-1 flex-col overflow-hidden",Ju),children:[Ps?l.jsx("div",{className:"fixed inset-0 z-40 bg-slate-900/60"}):null,l.jsxs("div",{className:Nr,children:[l.jsx(wM,{configName:a,workspaceLabel:Ku,validationLabel:rt,canSaveFiles:Gs,isSavingFiles:Ra,onSaveFile:nl,saveShortcutLabel:Gu,onOpenTestMenu:F=>es(F),onOpenActionsMenu:$u,canRunValidation:wr,isRunningValidation:il,onRunValidation:ai,canRunExtraction:jr,isRunningExtraction:ri,onRunExtraction:F=>{jr&&(vt(F),Ae(!0))},explorerVisible:xr,onToggleExplorer:Fu,consoleOpen:!Dn,onToggleConsole:Os,appearance:_e,windowState:u,onMinimizeWindow:tl,onToggleMaximize:Ma,onCloseWindow:ko,actionsBusy:at||ye.isPending}),I?null:l.jsx("div",{className:pe("border-b px-4 py-3",_e==="dark"?"border-white/10 bg-[#0f111a] text-slate-200":"border-slate-200 bg-slate-50 text-slate-700"),role:"status","aria-live":"polite",children:L?l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("p",{className:"text-sm font-semibold",children:"Read-only configuration"}),l.jsx("p",{className:pe("text-xs",_e==="dark"?"text-slate-300":"text-slate-600"),children:A.data?.status==="active"?"Active configurations cant be edited. Duplicate this configuration to create a draft you can change.":"Archived configurations cant be edited. Duplicate this configuration to create a draft you can change."})]}),l.jsx(ke,{size:"sm",onClick:ge,children:"Duplicate to edit"})]}):l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("p",{className:"text-sm font-semibold",children:"Draft configuration"}),l.jsxs("p",{className:pe("text-xs",_e==="dark"?"text-slate-300":"text-slate-600"),children:["Make this draft active to use it for extraction runs.",D?` The current active configuration ${D.display_name} will be archived.`:""]}),!Cr&&Ue.isDirty?l.jsx("p",{className:"text-xs font-medium text-amber-500",children:"Save changes before making active."}):null]}),l.jsx(ke,{size:"sm",variant:"secondary",onClick:ts,disabled:!Cr,title:!Cr&&Ue.isDirty?"Save changes before making active.":void 0,children:"Make active"})]})}),l.jsxs("div",{ref:Jn,className:"flex min-h-0 min-w-0 flex-1 overflow-hidden",children:[l.jsx(D2,{activeView:Cn,onSelectView:Uu,onOpenSettings:Bu,appearance:_e}),xr?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex min-h-0",style:{width:Ys},children:Cn==="explorer"&&Ue.tree?l.jsx(OD,{width:Ys,tree:Ue.tree,activeFileId:Ue.activeTab?.id??"",openFileIds:Ue.tabs.map(F=>F.id),onSelectFile:F=>{Ue.openFile(F),T(F)},theme:_e,canCreateFile:Ua,canCreateFolder:ol,isCreatingEntry:An||Ji,onCreateFile:cl,onCreateFolder:Zu,canDeleteFile:ll,canDeleteFolder:Sr,deletingFilePath:mr,deletingFolderPath:ka,onDeleteFile:Vu,onDeleteFolder:Iu,expandedStorageKey:pM(e,n),onHide:Hu}):l.jsx(yM,{width:Ys,view:Cn,appearance:_e})}),l.jsx(Fb,{orientation:"vertical",onPointerDown:F=>{const fe=F.clientX,Te=Ys;Qb(F,{cursor:"col-resize",onMove:Me=>{const Ve=Me.clientX-fe,$t=hs(Te+Ve,as.minPx,as.maxPx);ut(jt=>jt.collapsed||bs<=0?jt:{...jt,fraction:rs($t/bs,as)})}})}})]}):null,l.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",style:{backgroundColor:ed,color:dl},children:l.jsxs("div",{className:"grid min-h-0 min-w-0 flex-1",style:{height:dn>0?`${dn}px`:void 0,gridTemplateRows:`${Math.max(Tn,Mn)}px ${vr}px ${Math.max(0,rl)}px`},children:[l.jsx(TD,{tabs:Ue.tabs,activeTabId:Ue.activeTab?.id??"",onSelectTab:F=>{Ue.selectTab(F),T(F)},onCloseTab:Ue.closeTab,onCloseOtherTabs:Ue.closeOtherTabs,onCloseTabsToRight:Ue.closeTabsToRight,onCloseAllTabs:Ue.closeAllTabs,onContentChange:Ue.updateContent,onSaveTab:Lu,onSaveAllTabs:ei,onMoveTab:Ue.moveTab,onRetryTabLoad:Ue.reloadTab,onPinTab:Ue.pinTab,onUnpinTab:Ue.unpinTab,onSelectRecentTab:Ue.selectRecentTab,editorTheme:ue.resolvedTheme,menuAppearance:_e,canSaveFiles:Gs,readOnly:L,minHeight:Tn}),l.jsx(Fb,{orientation:"horizontal",onPointerDown:F=>{nn(!0);const fe=F.clientY,Te=Oa;let Me=!1;Qb(F,{cursor:"row-resize",onMove:Ve=>{if(Dn&&!Me&&(ss(),Me=!0),Yt.maxPx<=0||dn<=0)return;const $t=fe-Ve.clientY,jt=hs(Te+$t,Yt.minPx,Yt.maxPx);Bt(hs(jt/dn,0,1))},onEnd:()=>{nn(!1)}})},onDoubleClick:()=>{Dn?ss():ti()},onToggle:Os,collapsed:Dn}),Dn?l.jsxs("div",{className:pe("flex cursor-pointer items-center justify-between border-t px-4 py-2 text-[12px] shadow-inner",fl.bar),onDoubleClick:Os,title:"Double-click to show console",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:"Console hidden"}),l.jsxs("span",{className:pe("text-[11px]",fl.hint),children:["(double-click gutter or ",Yu,")"]})]}),l.jsx("button",{type:"button",onClick:Os,className:pe("rounded px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition",fl.button),title:"Show console",children:"Show console"})]}):l.jsx(v5,{height:Math.max(0,Oa),console:Re,validation:Se,activePane:N,onPaneChange:E,latestRun:Qe,onClearConsole:qu,runStatus:ce,onToggleCollapse:Os})]})})]})]}),Ne?l.jsx(jM,{open:Ne,workspaceId:e,onClose:()=>{Ae(!1),vt(!1)},onRun:yr}):null,l.jsx("input",{ref:Ce,type:"file",accept:".zip",onChange:Qu,className:"hidden"}),M?l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"replace-config-title",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h2",{id:"replace-config-title",className:"text-lg font-semibold text-slate-900",children:"Import from zip"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Importing will replace this configurations current code with the uploaded archive. Unsaved editor changes will be discarded."}),Ba?null:l.jsx("p",{className:"text-sm font-medium text-danger-600",children:"Only draft configurations can be replaced."}),Ue.isDirty?l.jsx("p",{className:"text-sm font-medium text-amber-700",children:"You have unsaved changes that will be lost."}):null]}),l.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[l.jsx(ke,{variant:"secondary",onClick:()=>Y(!1),disabled:ye.isPending,children:"Cancel"}),l.jsx(ke,{onClick:()=>{Y(!1),Ce.current?.click()},disabled:!Ba||ye.isPending,isLoading:ye.isPending,children:"Continue"})]})]})}):null,l.jsxs(Ms,{open:me,title:"Duplicate configuration",description:`Create a new draft based on ${i}.`,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:Da,onConfirm:Jr,isConfirming:U.isPending,confirmDisabled:U.isPending||_.trim().length===0,children:[l.jsx(bt,{label:"New configuration name",required:!0,children:l.jsx(ht,{value:_,onChange:F=>P(F.target.value),placeholder:"Copy of My Config",disabled:U.isPending})}),le?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:le}):null]}),l.jsx(Ms,{open:ee,title:K?.stage==="checking"?"Checking configuration":K?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:K?.stage==="checking"?"Running validation before activation.":K?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":D?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${D.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:K?.stage==="issues"?"Continue editing":K?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:bn,onConfirm:()=>{if(K?.stage==="issues"){bn();return}if(K?.stage==="error"){bn();return}Eo()},isConfirming:ie.isPending,confirmDisabled:K?.stage==="checking"||ie.isPending,children:K?.stage==="checking"?l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[l.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-slate-200 border-t-brand-600","aria-hidden":"true"}),l.jsx("span",{children:"Validating"})]}):K?.stage==="issues"?l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-slate-700",children:"Issues:"}),l.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:K.issues.map(F=>l.jsxs("li",{className:"space-y-1",children:[l.jsx("p",{className:"font-semibold",children:F.path}),l.jsx("p",{className:"text-slate-600",children:F.message})]},`${F.path}:${F.message}`))})]}):K?.stage==="error"?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:K.message}):null}),l.jsx(ur,{open:!!$e,position:$e,onClose:()=>We(null),items:Wu,appearance:_e}),l.jsx(ur,{open:!!Zn,position:Zn,onClose:()=>es(null),items:Xu,appearance:_e}),l.jsx(ur,{open:!!gs,position:gs,onClose:To,items:Pu,appearance:_e})]})}function yM({width:e,view:n,appearance:a}){const i=bM[n]||"Coming soon",o=a==="dark"?"border-[#111111] bg-[#1e1e1e] text-slate-300":"border-slate-200 bg-slate-50 text-slate-600";return l.jsx("div",{className:pe("flex h-full min-h-0 flex-col items-center justify-center border-r px-4 text-center text-[11px] uppercase tracking-wide",o),style:{width:e},"aria-live":"polite",children:i})}function gh(){return l.jsx("svg",{className:"h-4 w-4 text-[#4fc1ff]",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 8l3 3 5-6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function wM({configName:e,workspaceLabel:n,validationLabel:a,canSaveFiles:i,isSavingFiles:o,onSaveFile:u,saveShortcutLabel:d,onOpenTestMenu:h,onOpenActionsMenu:g,canRunValidation:x,isRunningValidation:b,onRunValidation:v,canRunExtraction:w,isRunningExtraction:C,onRunExtraction:N,explorerVisible:j,onToggleExplorer:k,consoleOpen:T,onToggleConsole:E,appearance:B,windowState:Q,onMinimizeWindow:O,onToggleMaximize:I,onCloseWindow:A,actionsBusy:V=!1}){const W=B==="dark",X=W?"border-white/10 bg-[#151821] text-white":"border-slate-200 bg-white text-slate-900",J=W?"text-white/60":"text-slate-500",L=W?"bg-emerald-400/20 text-emerald-50 hover:bg-emerald-400/30 disabled:bg-white/10 disabled:text-white/30":"bg-emerald-500 text-white hover:bg-emerald-400 disabled:bg-slate-200 disabled:text-slate-500",ae=W?"bg-brand-500 text-white hover:bg-brand-400 disabled:bg-white/20 disabled:text-white/40":"bg-brand-600 text-white hover:bg-brand-500 disabled:bg-slate-200 disabled:text-slate-500",de=Q==="maximized";return l.jsxs("div",{className:pe("flex items-center justify-between border-b px-4 py-2",X),children:[l.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[l.jsx(NM,{}),l.jsxs("div",{className:"min-w-0 leading-tight",children:[l.jsx("div",{className:pe("text-[10px] font-semibold uppercase tracking-[0.35em]",J),children:"Config Workbench"}),l.jsx("div",{className:"truncate text-sm font-semibold",title:e,children:e}),l.jsxs("div",{className:pe("text-[11px]",J),title:n,children:["Workspace  ",n]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[a?l.jsx("span",{className:pe("text-xs",J),children:a}):null,l.jsxs("button",{type:"button",onClick:u,disabled:!i,className:pe("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",L),title:`Save (${d})`,children:[o?l.jsx(xh,{}):l.jsx(RM,{}),o?"Saving":"Save"]}),l.jsxs("button",{type:"button",onClick:v,disabled:!x,className:pe("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",ae),children:[b?l.jsx(xh,{}):l.jsx(sv,{}),b?"Running":"Run validation"]}),l.jsx(oT,{label:C?"Running":"Test run",icon:C?l.jsx(xh,{}):l.jsx(sv,{}),disabled:!w,isLoading:C,title:"Run test run",primaryClassName:pe(ae,"rounded-r-none focus-visible:ring-offset-0"),menuClassName:pe(ae,"rounded-l-none px-2",W?"border-white/20":"border-slate-300"),menuAriaLabel:"Open test options",onPrimaryClick:()=>N(!1),onOpenMenu:be=>h(be),onContextMenu:be=>{be.preventDefault(),h({x:be.clientX,y:be.clientY})}}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ui,{ariaLabel:j?"Hide explorer":"Show explorer",onClick:k,appearance:B,active:j,icon:l.jsx(EM,{active:j})}),l.jsx(Ui,{ariaLabel:T?"Hide console":"Show console",onClick:E,appearance:B,active:T,icon:l.jsx(kM,{})})]}),l.jsx(Ui,{ariaLabel:"Configuration actions",onClick:be=>{const D=be.currentTarget.getBoundingClientRect();g({x:D.right+8,y:D.bottom})},appearance:B,disabled:V,icon:l.jsx(MM,{})}),l.jsxs("div",{className:pe("flex items-center gap-2 border-l pl-3",B==="dark"?"border-white/20":"border-slate-200/70"),children:[l.jsx(Ui,{ariaLabel:"Minimize workbench",onClick:O,appearance:B,icon:l.jsx(DM,{})}),l.jsx(Ui,{ariaLabel:de?"Restore workbench":"Maximize workbench",onClick:I,appearance:B,active:de,icon:de?l.jsx(AM,{}):l.jsx(_M,{})}),l.jsx(Ui,{ariaLabel:"Close workbench",onClick:A,appearance:B,icon:l.jsx(TM,{})})]})]})]})}function jM({open:e,workspaceId:n,onClose:a,onRun:i}){const o=p.useRef(null),u=On({queryKey:["builder-documents",n],queryFn:({signal:O})=>SM(n,O),staleTime:6e4,enabled:e}),d=p.useMemo(()=>u.data??[],[u.data]),[h,g]=p.useState("");p.useEffect(()=>{if(e){if(!d.length){g("");return}g(O=>O&&d.some(I=>I.id===O)?O:d[0]?.id??"")}},[d,e]);const x=d.find(O=>O.id===h)??null,b=On({queryKey:["builder-document-sheets",n,h],queryFn:({signal:O})=>mw(n,h,O),enabled:e&&!!h,staleTime:6e4}),v=p.useMemo(()=>b.data??[],[b.data]),[w,C]=p.useState([]),[N,j]=p.useState("INFO");p.useEffect(()=>{if(e){if(!v.length){C([]);return}C(O=>O.filter(I=>v.some(A=>A.name===I)))}},[e,v]);const k=p.useMemo(()=>Array.from(new Set(w.filter(O=>v.some(I=>I.name===O)))),[w,v]),T=p.useCallback(O=>{C(I=>I.includes(O)?I.filter(A=>A!==O):[...I,O])},[]);if(!e)return null;const E=!x||u.isLoading||u.isError,B=v.length>0,Q=l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:l.jsxs("div",{ref:o,role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-2xl",children:[l.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Select a document"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Choose a workspace document and optional worksheet before running a test."})]}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:a,children:"Close"})]}),u.isError?l.jsx(lt,{tone:"danger",children:"Unable to load documents. Try again later."}):u.isLoading?l.jsx("p",{className:"text-sm text-slate-500",children:"Loading documents"}):d.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Upload a document in the workspace to run the extractor."}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"builder-run-document-select",children:"Document"}),l.jsx(Vi,{id:"builder-run-document-select",value:h,onChange:O=>g(O.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm",children:d.map(O=>l.jsx("option",{value:O.id,children:O.name},O.id))}),x?l.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",CM(x.created_at)," "," ",(x.byte_size??0).toLocaleString()," bytes"]}):null]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"builder-run-log-level-select",children:"Log level"}),l.jsx(Vi,{id:"builder-run-log-level-select",value:N,onChange:O=>j(O.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm",children:vM.map(O=>l.jsx("option",{value:O.value,children:O.label},O.value))}),l.jsx("p",{className:"text-xs text-slate-500",children:"Controls the engine runtime verbosity for this run."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheet"}),b.isLoading?l.jsx("p",{className:"text-sm text-slate-500",children:"Loading worksheets"}):b.isError?l.jsx(lt,{tone:"warning",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ke,{variant:"secondary",size:"sm",onClick:()=>b.refetch(),disabled:b.isFetching,children:"Retry loading"}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>C([]),children:"Use all worksheets"})]})]})}):B?l.jsxs("div",{className:"space-y-3 rounded-lg border border-slate-200 p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheets"}),l.jsx("p",{className:"text-xs text-slate-500",children:k.length===0?"All worksheets will be processed by default. Select specific sheets to narrow the run.":`${k.length.toLocaleString()} worksheet${k.length===1?"":"s"} selected.`})]}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>C([]),children:"Use all worksheets"})]}),l.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:v.map(O=>{const I=k.includes(O.name);return l.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:I,onChange:()=>T(O.name)}),l.jsxs("span",{className:"flex-1 truncate",children:[O.name,O.is_active?" (active)":""]})]},`${O.index}-${O.name}`)})})]}):l.jsx("p",{className:"text-sm text-slate-500",children:"This file will be ingested directly."})]})]}),l.jsxs("footer",{className:"mt-6 flex items-center justify-end gap-2",children:[l.jsx(ke,{variant:"ghost",onClick:a,children:"Cancel"}),l.jsx(ke,{onClick:()=>{x&&i({documentId:x.id,documentName:x.name,sheetNames:k.length>0?k:void 0,logLevel:N})},disabled:E,children:"Start test run"})]})]})});return typeof document>"u"?null:ps.createPortal(Q,document.body)}async function SM(e,n){const{data:a}=await He.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:{sort:"-created_at",page_size:50}},signal:n});return a?.items??[]}function CM(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function Ui({ariaLabel:e,onClick:n,icon:a,appearance:i,active:o=!1,disabled:u=!1}){const d=i==="dark",h=d?"text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20 focus-visible:ring-white/40":"text-slate-500 hover:text-slate-900 hover:bg-slate-100 hover:border-slate-300 focus-visible:ring-slate-400/40",g=d?"text-white border-white/30 bg-white/10":"text-slate-900 border-slate-300 bg-slate-200/70";return l.jsx("button",{type:"button","aria-label":e,onClick:n,disabled:u,className:pe("flex h-7 w-7 items-center justify-center rounded-[4px] border border-transparent text-sm transition focus-visible:outline-none focus-visible:ring-2",h,o&&g,u&&"cursor-not-allowed opacity-50"),title:e,children:a})}function NM(){return l.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#4fc1ff] via-[#2d7dff] to-[#7c4dff] text-white shadow-lg shadow-[#10121f]",children:l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none",children:[l.jsx("rect",{x:"2",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"2",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"})]})})}function EM({active:e}){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"3",y:"4",width:"14",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6}),l.jsx("path",{d:"M7 4v12",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6})]})}function kM(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M3 10.5h10",stroke:"currentColor",strokeWidth:"1.2"})]})}function _M(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1.5",stroke:"currentColor",strokeWidth:"1.2"})})}function AM(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 4h6v6",stroke:"currentColor",strokeWidth:"1.2"})]})}function DM(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 11h8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function TM(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M5 5l6 6M11 5l-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function xh(){return l.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"currentColor",strokeWidth:"2",opacity:"0.35"}),l.jsx("path",{d:"M20 12a8 8 0 0 0-8-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function sv(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4.5 3.5v9l7-4.5-7-4.5Z",fill:"currentColor"})})}function MM(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"3",cy:"8",r:"1.3",fill:"currentColor"}),l.jsx("circle",{cx:"8",cy:"8",r:"1.3",fill:"currentColor"}),l.jsx("circle",{cx:"13",cy:"8",r:"1.3",fill:"currentColor"})]})}function RM(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4 2.5h7.25L13.5 4.8v8.7H4z",stroke:"currentColor",strokeWidth:"1.3",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function zM(e){return e instanceof $n?e.message:e instanceof DOMException&&e.name==="AbortError"?"Operation cancelled.":e instanceof Error?e.message:String(e)}function OM(e){if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function LM(e){return e.length<=12?e:`${e.slice(0,6)}${e.slice(-4)}`}function av(e){if(e.encoding==="base64"){const n=globalThis.Buffer;if(n)return n.from(e.content,"base64").toString("utf-8");if(typeof atob=="function")try{const a=atob(e.content),i=new Uint8Array(a.length);for(let u=0;u<a.length;u+=1)i[u]=a.charCodeAt(u);if(typeof TextDecoder<"u")return new TextDecoder("utf-8",{fatal:!1}).decode(i);let o="";for(let u=0;u<i.length;u+=1)o+=String.fromCharCode(i[u]);return o}catch{}}return e.content}function UM(e){return`ade.ui.workspace.${e}.workbench.returnPath`}const Cw=p.createContext(null);function Nw(){const e=p.useContext(Cw);if(!e)throw new Error("useWorkbenchWindow must be used within a WorkbenchWindowProvider");return e}function BM({workspaceId:e,children:n}){const a=Ft(),i=qn(),[o,u]=p.useState(null),[d,h]=p.useState("restored"),g=p.useRef(0),x=p.useRef(null),b=p.useRef(!1),v=p.useMemo(()=>sa(UM(e)),[e]),w=p.useMemo(()=>`/workspaces/${e}/config-builder`,[e]),C=p.useMemo(()=>VM(i.pathname,e),[i.pathname,e]),N=!!C;p.useEffect(()=>{v.get()||v.set(w)},[v,w]),p.useEffect(()=>{N||v.set(`${i.pathname}${i.search}${i.hash}`)},[N,i.pathname,i.search,i.hash,v]),p.useEffect(()=>{if(!o){x.current=null;return}const X=x.current;if(N&&C===o.configId){if(X==="dock"){x.current=null,h("minimized");return}X&&(x.current=null);return}if(X==="dock"){x.current=null;return}if(X==="close"){x.current=null;return}u(null),h("restored"),x.current=null},[o,N,C,d]),p.useEffect(()=>{if(!o||!N||C!==o.configId)return;const X=iv(i.search);X!==o.editorSearch&&u(J=>!J||J.instanceId!==o.instanceId?J:{...J,editorSearch:X})},[o,N,C,i.search]);const j=p.useCallback(()=>v.get()??w,[v,w]),k=p.useCallback(X=>{u(J=>{if(!J)return J;const L=new URLSearchParams(J.editorSearch),ae=typeof X=="function"?X(new URLSearchParams(L)):X,be=lw(ae).toString();return be===J.editorSearch?J:{...J,editorSearch:be}})},[]),T=p.useCallback(X=>{const J=iv(X.editorSearch??i.search);let L=d==="minimized";u(ae=>{if(ae&&ae.workspaceId===X.workspaceId&&ae.configId===X.configId){const de=X.seed??ae.seed,be=X.editorSearch!==void 0?J:ae.editorSearch;return ae.configName===X.configName&&ae.seed===de&&ae.editorSearch===be?ae:{...ae,configName:X.configName,seed:de,editorSearch:be}}return L=!0,g.current+=1,{...X,editorSearch:J,instanceId:`${X.workspaceId}:${X.configId}:${g.current}`}}),L&&h("restored")},[i.search,d]),E=p.useCallback(()=>{o&&(u(null),h("restored"),x.current="close",a(j()))},[o,a,j]),B=p.useCallback(()=>{o&&(b.current=!0,h("minimized"),x.current="dock",a(j()))},[o,a,j]),Q=p.useCallback(()=>{if(!o)return;h("restored");const X=IM(o.workspaceId,o.configId,o.editorSearch);`${i.pathname}${i.search}`!==X&&a(X)},[o,a,i.pathname,i.search]),O=p.useCallback(()=>{o&&h("maximized")},[o]),I=p.useCallback(()=>{const X=b.current;return b.current=!1,X},[]),A=p.useMemo(()=>({session:o,windowState:d,openSession:T,closeSession:E,minimizeWindow:B,maximizeWindow:O,restoreWindow:Q,shouldBypassUnsavedGuard:I}),[o,d,T,E,B,O,Q,I]),V=!!o&&(!N||C!==o?.configId),W=p.useMemo(()=>V&&o?{params:new URLSearchParams(o.editorSearch),setSearchParams:k}:null,[V,o,k]);return l.jsxs(Cw.Provider,{value:A,children:[n,l.jsx(GD,{value:W,children:l.jsx($M,{session:o,windowState:d,onClose:E,onMinimize:B,onMaximize:O,onRestore:Q,shouldBypassUnsavedGuard:I})}),o&&d==="minimized"?l.jsx(qM,{configName:o.configName,onRestore:Q,onDismiss:E}):null]})}function $M({session:e,windowState:n,onClose:a,onMinimize:i,onMaximize:o,onRestore:u,shouldBypassUnsavedGuard:d}){return!e||n!=="maximized"?null:l.jsx("div",{className:"fixed inset-0 z-40 flex flex-col bg-slate-50",children:l.jsx(Sw,{workspaceId:e.workspaceId,configId:e.configId,configName:e.configName,seed:e.seed,windowState:"maximized",onCloseWorkbench:a,onMinimizeWindow:i,onMaximizeWindow:o,onRestoreWindow:u,shouldBypassUnsavedGuard:d},e.instanceId)})}function qM({configName:e,onRestore:n,onDismiss:a}){return l.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40",children:l.jsx("div",{className:"pointer-events-auto border-t border-slate-200 bg-white/95 shadow-[0_-12px_40px_rgba(15,23,42,0.15)] backdrop-blur",children:l.jsxs("div",{className:"relative mx-auto flex h-14 max-w-6xl items-center px-4 text-slate-900",children:[l.jsxs("button",{type:"button",onClick:n,className:"group flex min-w-0 flex-1 items-center gap-4 rounded-md px-3 py-1.5 text-left transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-slate-200 bg-slate-50 text-brand-600 shadow-inner",children:l.jsx(FM,{})}),l.jsxs("span",{className:"flex min-w-0 flex-col leading-tight",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-slate-400",children:"Config workbench"}),l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",title:e,children:e})]}),l.jsx("span",{className:"ml-auto inline-flex items-center rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-600 transition group-hover:border-slate-300 group-hover:bg-slate-50",children:"Restore"})]}),l.jsxs("div",{className:"ml-3 flex h-10 overflow-hidden rounded-md border border-slate-200 bg-white text-slate-500",children:[l.jsx(rv,{ariaLabel:"Restore minimized workbench",onClick:n,destructive:!1,children:l.jsx(HM,{})}),l.jsx(rv,{ariaLabel:"Close minimized workbench",onClick:a,destructive:!0,children:l.jsx(ZM,{})})]})]})})})}function rv({ariaLabel:e,onClick:n,children:a,destructive:i=!1}){return l.jsx("button",{type:"button","aria-label":e,onClick:n,className:pe("flex h-full w-12 items-center justify-center transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",i?"text-rose-600 hover:bg-rose-50":"text-slate-500 hover:bg-slate-100 hover:text-slate-900"),children:a})}function FM(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"})]})}function HM(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"})})}function ZM(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4.5 11.5 11.5 4.5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M11.5 11.5 4.5 4.5",stroke:"currentColor",strokeWidth:"1.2"})]})}function VM(e,n){const a=`/workspaces/${n}/config-builder/`;if(!e.startsWith(a))return null;const i=e.slice(a.length).split("/").filter(Boolean);if(i.length>=2&&i[1]==="editor")try{return decodeURIComponent(i[0])}catch{return i[0]}return null}function IM(e,n,a){const i=`/workspaces/${e}/config-builder/${encodeURIComponent(n)}/editor`;return a.length>0?`${i}?${a}`:i}function iv(e){return e?e.startsWith("?")?e.slice(1):e:""}function Hh({to:e,replace:n,className:a,title:i,children:o,onClick:u}){const d=Ft();return l.jsx("a",{href:e,className:a,title:i,onClick:h=>{u?.(h),!(h.defaultPrevented||h.metaKey||h.ctrlKey||h.shiftKey||h.altKey)&&(h.preventDefault(),d(e,{replace:n}))},children:o})}function Ew({to:e,end:n,className:a,children:i,title:o,onClick:u}){const{pathname:d}=qn(),h=n?d===e:d===e||d.startsWith(`${e}/`),g=typeof a=="function"?a({isActive:h}):a,x=typeof i=="function"?i({isActive:h}):i;return l.jsx(Hh,{to:e,className:g,title:o,onClick:u,children:x})}function Tu(e){return function({title:a,...i}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":a?void 0:!0,role:a?"img":"presentation",...i,children:[a?l.jsx("title",{children:a}):null,l.jsx("path",{d:e})]})}}const QM=Tu("M7 3h7l7 7v11a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2ZM14 3v5a1 1 0 0 0 1 1h5"),PM=Tu("M5 6h14M5 12h14M5 18h8M7 4v4M12 10v4M15 16v4"),WM=Tu("M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM16.5 12a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5ZM10 7.5h4M7.5 10v4M15.5 10.5 12 14"),KM=Tu("M5 7h14M5 17h14M9 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm10 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-7-5h7m-9 0H5"),kw=[{id:"documents",path:"documents",label:"Documents",icon:QM},{id:"runs",path:"runs",label:"Runs",icon:PM},{id:"config-builder",path:"config-builder",label:"Config Builder",icon:WM},{id:"settings",path:"settings",label:"Workspace Settings",icon:KM,matchPrefix:!0}],fu=kw[0];function _w(e){return kw.map(n=>({id:n.id,label:n.label,href:`/workspaces/${e.id}/${n.path}`,icon:n.icon,matchPrefix:n.matchPrefix}))}const GM="4.25rem",YM="18.75rem";function XM({workspace:e,collapsed:n,onToggleCollapse:a,items:i,onGoToWorkspaces:o}){const u=i??_w(e),d=tR(e.name);return l.jsx("aside",{className:"hidden h-screen flex-shrink-0 bg-gradient-to-b from-slate-50/80 via-white to-slate-50/60 px-3 py-4 transition-[width] duration-200 ease-out lg:flex",style:{width:n?GM:YM},"aria-label":"Primary workspace navigation",children:l.jsxs("div",{className:pe("flex h-full w-full flex-col rounded-[1.7rem] border border-white/70 bg-white/90 shadow-[0_25px_60px_-40px_rgba(15,23,42,0.7)] ring-1 ring-slate-100/60 backdrop-blur-sm",n?"items-center gap-4 px-2 py-5":"gap-5 px-4 py-6"),children:[l.jsxs("div",{className:pe("flex w-full items-center gap-3 rounded-2xl border border-white/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-3 py-4 text-sm font-semibold text-slate-700 shadow-inner shadow-white/60",n?"flex-col text-center text-xs":""),children:[l.jsxs("button",{type:"button",onClick:o,className:"flex flex-1 items-center gap-3 text-left",children:[l.jsx("span",{className:pe("inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 text-sm font-bold uppercase text-white shadow-[0_10px_25px_-10px_rgba(79,70,229,0.7)]",n&&"h-9 w-9 text-xs"),children:d}),n?l.jsx("span",{className:"sr-only",children:e.name}):l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate",children:e.name}),l.jsx("p",{className:"text-xs font-normal text-slate-500",children:"Switch workspace"})]})]}),l.jsx("button",{type:"button",onClick:a,className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-transparent text-slate-500 hover:border-brand-200 hover:text-brand-600","aria-label":n?"Expand navigation":"Collapse navigation","aria-expanded":!n,children:n?l.jsx(eR,{}):l.jsx(JM,{})})]}),l.jsx("nav",{className:"mt-4 flex-1 overflow-y-auto pr-1","aria-label":"Workspace sections",children:l.jsx(Aw,{items:u,collapsed:n})})]})})}function Aw({items:e,collapsed:n=!1,onNavigate:a,className:i,showHeading:o=!0}){return l.jsxs(l.Fragment,{children:[o&&!n?l.jsx("p",{className:"mb-3 px-1 text-[0.63rem] font-semibold uppercase tracking-[0.4em] text-slate-400/90",children:"Workspace"}):null,l.jsx("ul",{className:pe("flex flex-col gap-1.5",n?"items-center":void 0,i),children:e.map(u=>l.jsx("li",{className:"w-full",children:l.jsx(Ew,{to:u.href,end:!(u.matchPrefix??!1),title:n?u.label:void 0,onClick:a,className:({isActive:d})=>pe("group relative flex w-full items-center rounded-2xl border border-transparent text-sm font-medium text-slate-600 transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white/80",n?"h-11 justify-center px-0":"gap-3 px-3 py-2.5",d?"border-brand-100 bg-white/90 text-slate-900 shadow-[0_12px_30px_-20px_rgba(79,70,229,0.55)]":"border-transparent hover:border-slate-200 hover:bg-white/70"),children:({isActive:d})=>l.jsxs(l.Fragment,{children:[l.jsx("span",{"aria-hidden":!0,className:pe("absolute left-1.5 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-brand-400 to-brand-500 opacity-0 transition-opacity duration-150",n&&"hidden",d?"opacity-100":"group-hover:opacity-60")}),l.jsx("span",{"aria-hidden":!0,className:pe("flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-slate-100 text-slate-500 transition",n&&"h-9 w-9 rounded-lg",d?"bg-brand-50 text-brand-600":"group-hover:bg-slate-100/80"),children:l.jsx(u.icon,{className:pe("h-5 w-5 flex-shrink-0 transition-colors duration-150",d?"text-brand-600":"text-slate-500")})}),l.jsx("div",{className:pe("flex min-w-0 flex-col text-left",n&&"sr-only"),children:l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:u.label})})]})})},u.id))})]})}function JM(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:l.jsx("path",{d:"M12.5 6 9 10l3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function eR(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:l.jsx("path",{d:"m7.5 6 3.5 4-3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function tR(e){const n=e.trim().split(/\s+/);return n.length===0?"WS":n.slice(0,2).map(i=>i[0]??"").join("").toUpperCase()}function nR(){return l.jsxs("section",{children:[l.jsx("h1",{className:"text-xl font-semibold",children:"Workspace Overview"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: add workspace summary widgets."})]})}function sR(e){const n=ct();return Vt({mutationFn:a=>dw(e,a),async onSuccess(){await n.invalidateQueries({queryKey:Gt.root(e)})}})}function aR({summary:e}){const n=e.counts,a=e.validation?.issues_total,i=e.fields??[],o=e.columns??[],u=i.slice(0,6),d=o.slice(0,5),h=typeof a=="number"?a>0?"warn":"ok":"default";return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:[l.jsx(Vc,{label:"Tables",value:n?.tables?.total??""}),l.jsx(Vc,{label:"Rows",value:n?.rows?.total??""}),l.jsx(Vc,{label:"Mapped fields",value:n?.fields?.mapped??""}),l.jsx(Vc,{label:"Issues",value:a??"",intent:h})]}),l.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[l.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Fields"}),i.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No field mappings recorded."}):l.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[u.map(g=>l.jsxs("li",{className:"flex items-center justify-between gap-3",children:[l.jsxs("span",{className:"truncate font-semibold text-slate-800",children:[g.label||g.field," ",g.required?" required":""]}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[g.mapped?"mapped":"unmapped",typeof g.tables_mapped=="number"?`  ${g.tables_mapped} tables`:""]})]},g.field)),i.length>u.length?l.jsxs("li",{className:"text-[11px] text-slate-500",children:["+",i.length-u.length," more fields"]}):null]})]}),l.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Columns"}),o.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No column details recorded."}):l.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[d.map(g=>l.jsxs("li",{className:"flex items-center justify-between gap-3",children:[l.jsx("span",{className:"truncate font-semibold text-slate-800",children:g.header}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[g.mapped?"mapped":"unmapped","  ",g.occurrences?.tables_seen??""," tables"]})]},g.header_normalized)),o.length>d.length?l.jsxs("li",{className:"text-[11px] text-slate-500",children:["+",o.length-d.length," more headers"]}):null]}),l.jsxs("div",{className:"mt-2 text-[11px] text-slate-600",children:["Distinct headers mapped: ",n?.columns?.distinct_headers_mapped??""," /"," ",n?.columns?.distinct_headers??""]})]})]})]})}function rR({events:e}){if(!e.length)return l.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."});const n=e.reduce((i,o)=>{const u=Dw(o),d=u.stream==="stderr"?"warning":void 0,h=u.level??d??"info";return i[h]=(i[h]??0)+1,i},{}),a=e.slice(-6).reverse();return l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex flex-wrap gap-2 text-[11px] text-slate-600",children:Object.entries(n).map(([i,o])=>l.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 font-semibold text-slate-700",children:[i,": ",o]},i))}),l.jsx("ul",{className:"space-y-1",children:a.map(i=>l.jsx("li",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-800",children:(()=>{const o=typeof i.message=="string"?i.message.trim():void 0;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[l.jsx("span",{className:"font-semibold",children:i.event}),l.jsx("span",{className:"text-[11px] text-slate-500",children:iR(i.timestamp??i.created_at??"unknown")})]}),l.jsx("p",{className:"text-[11px] text-slate-600",children:o||`Level: ${lR(i)}`})]})})()},`${i.timestamp}-${i.event}`))})]})}function iR(e){const n=e instanceof Date?e:new Date(e);return Number.isNaN(n.getTime())?String(e):n.toLocaleString()}function lR(e){const n=Dw(e),a=n.stream==="stderr"?"warning":void 0;return n.level??a??"info"}function Dw(e){const n=e.data;return n&&typeof n=="object"?n:{}}function Vc({label:e,value:n,intent:a="default"}){const i=a==="warn"?"text-amber-700":a==="ok"?"text-emerald-700":"text-slate-700";return l.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:e}),l.jsx("p",{className:`text-sm font-semibold ${i}`,children:n})]})}const Tw={uploaded:"Uploaded",processing:"Processing",processed:"Processed",failed:"Failed",archived:"Archived"},oR=["-created_at","created_at","-last_run_at","last_run_at","-byte_size","byte_size","name","-name","status","-status","source","-source"],io="mine",Ir={mine:{label:"My uploads",description:"Documents you uploaded",uploader:"me"},team:{label:"All documents",description:"Everything in this workspace"},attention:{label:"Needs attention",description:"Failed or processing files",presetStatuses:["failed","processing"]},recent:{label:"Recently run",description:"Latest run activity",presetSort:"-last_run_at"}};function cR(e){return e&&Object.keys(Ir).includes(e)?e:io}function uR(e){if(!e)return new Set;const a=e.split(",").map(i=>i.trim()).filter(Boolean).filter(i=>["uploaded","processing","processed","failed","archived"].includes(i));return new Set(a)}function dR(e){return new Set(oR).has(e??"")?e:"-created_at"}const Mw=new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),Ii={all:()=>["documents"],workspace:e=>[...Ii.all(),e],list:(e,n,a)=>[...Ii.workspace(e),"list",{sort:n,uploader:a}]},Rw=50;function fR(){const{workspace:e}=Na(),n=Wi(),[a,i]=cw(),o=p.useRef(i);p.useEffect(()=>{o.current=i},[i]);const u=cR(a.get("view")),[d,h]=p.useState(u),[g,x]=p.useState(()=>{const Ne=a.get("status");if(Ne)return uR(Ne);const Ae=Ir[u].presetStatuses??[];return new Set(Ae)}),[b,v]=p.useState(()=>{const Ne=a.get("sort");return Ne?dR(Ne):Ir[u].presetSort??"-created_at"}),[w,C]=p.useState(a.get("q")??""),[N,j]=p.useState(w.trim()),k=p.useMemo(()=>Array.from(g),[g]),E=Ir[d].uploader??null,B=p.useRef(null),[Q,O]=p.useState(new Set),I=p.useMemo(()=>new Set(Q),[Q]),A=p.useMemo(()=>Array.from(I),[I]),V=I.size,W=mR(e.id),X=pR(e.id),J=gy(),L=J.data?.enabled??!1,ae=J.data?.detail??Ki,de=J.isPending,[be,D]=p.useState(null),[U,ie]=p.useState(null),[me,se]=p.useState(null),_=W.isPending,P=X.isPending,le=hR(e.id,{sort:b,uploader:E}),{refetch:q}=le,ee=p.useCallback(Ne=>Ne.id,[]),H=em(le.data?.pages,ee),K=p.useMemo(()=>{const Ne=N.toLowerCase(),Ae=E==="me"?n.user.id:null,Fe=E==="me"?n.user.email??null:null;return H.filter(vt=>{if(k.length>0&&!k.includes(vt.status))return!1;if(E==="me"){const Xe=vt.uploader_id??vt.uploader?.id??null,At=vt.uploader?.email??null;if(Ae&&Xe&&Xe!==Ae||!Xe&&Fe&&At&&At!==Fe)return!1}return!(Ne&&!`${vt.name??""} ${vt.source??""}`.toLowerCase().includes(Ne))})},[N,H,n.user.email,n.user.id,k,E]),R=le.isFetchingNextPage,Z=le.isFetching&&!R,ge=K.length;p.useEffect(()=>{const Ne=a.get("q")??"";C(Fe=>Fe===Ne?Fe:Ne);const Ae=Ne.trim();j(Fe=>Fe===Ae?Fe:Ae)},[a]),p.useEffect(()=>{const Ne=new URLSearchParams;g.size>0&&Ne.set("status",Array.from(g).join(",")),b!=="-created_at"&&Ne.set("sort",b),N&&Ne.set("q",N),d!==io&&Ne.set("view",d),o.current(Ne,{replace:!0})},[g,b,N,d]),p.useEffect(()=>{const Ne=window.setTimeout(()=>j(w.trim()),250);return()=>window.clearTimeout(Ne)},[w]),p.useEffect(()=>{O(Ne=>{if(Ne.size===0)return Ne;const Ae=new Set,Fe=new Set(K.map(Xe=>Xe.id));let vt=!1;for(const Xe of Ne)Fe.has(Xe)?Ae.add(Xe):vt=!0;return vt?Ae:Ne})},[K]);const De=p.useMemo(()=>{for(const Ne of K)if(I.has(Ne.id))return Ne;return null},[K,I]),Ze=p.useCallback(Ne=>{const Ae=Ir[Ne];h(Ne),x(new Set(Ae.presetStatuses??[])),v(Ae.presetSort??"-created_at"),C(""),j("")},[]),st=p.useCallback(Ne=>{x(Ae=>{const Fe=new Set(Ae);return Fe.has(Ne)?Fe.delete(Ne):Fe.add(Ne),Fe})},[]),ye=p.useCallback(()=>{x(new Set)},[]);p.useEffect(()=>{const Ne=Ae=>{if((Ae.metaKey||Ae.ctrlKey)&&Ae.key.toLowerCase()==="u"){Ae.preventDefault(),B.current?.click();return}(Ae.key==="Delete"||Ae.key==="Backspace")&&V>0&&(Ae.preventDefault(),ce())};return window.addEventListener("keydown",Ne),()=>window.removeEventListener("keydown",Ne)},[V]);const Ce=p.useCallback(Ne=>Tw[Ne]??Ne,[]),$e=p.useCallback(Ne=>l.jsx(qR,{document:Ne}),[]),We=p.useCallback(()=>{B.current?.click()},[]),at=p.useCallback(async Ne=>{if(Ne.length){D(null);try{await W.mutateAsync({files:Ne})}catch(Ae){const Fe=Ae instanceof Error?Ae.message:"Failed to upload documents.";D({tone:"error",message:Fe})}}},[W]),Ot=async Ne=>{const Ae=Array.from(Ne.target.files??[]);await at(Ae),Ne.target.value=""},M=Ne=>{O(Ae=>{const Fe=new Set(Ae);return Fe.has(Ne)?Fe.delete(Ne):Fe.add(Ne),Fe})},Y=()=>{O(Ne=>{if(K.length===0)return new Set;const Ae=K.map(Fe=>Fe.id);return Ne.size===K.length&&Ae.every(Fe=>Ne.has(Fe))?new Set:new Set(Ae)})},ce=p.useCallback(async()=>{const Ne=A;if(Ne.length){D(null);try{await X.mutateAsync({documentIds:Ne}),O(new Set)}catch(Ae){const Fe=Ae instanceof Error?Ae.message:"Failed to delete documents.";D({tone:"error",message:Fe})}}},[X,A]),Ee=p.useCallback(async Ne=>{D(null);try{await X.mutateAsync({documentIds:[Ne.id]}),O(Ae=>{const Fe=new Set(Ae);return Fe.delete(Ne.id),Fe})}catch(Ae){const Fe=Ae instanceof Error?Ae.message:"Failed to delete document.";D({tone:"error",message:Fe})}},[X]),we=p.useCallback(async Ne=>{try{ie(Ne.id);const{blob:Ae,filename:Fe}=await vR(e.id,Ne.id);VR(Ae,Fe??Ne.name)}catch(Ae){const Fe=Ae instanceof Error?Ae.message:"Failed to download document.";D({tone:"error",message:Fe})}finally{ie(null)}},[e.id]),Se=p.useCallback(Ne=>{se(Ne)},[]),Re=p.useCallback(()=>{q()},[q]),Qe=p.useCallback(Ne=>{D({tone:"error",message:Ne})},[]),Pe=()=>{h(io),C(""),j(""),x(new Set),v("-created_at")},mt=d===io&&g.size===0&&b==="-created_at"&&!N;return l.jsxs(l.Fragment,{children:[l.jsx(OR,{workspaceName:e.name??void 0,disabled:_,onFiles:async Ne=>{await at(Ne)}}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{ref:B,type:"file",accept:".csv,.pdf,.tsv,.xls,.xlsx,.xlsm,.xlsb",multiple:!0,className:"hidden",onChange:Ot}),l.jsx(wR,{workspaceName:e.name,totalDocuments:ge,view:d,onChangeView:Ze,sort:b,onSort:v,onReset:Pe,isFetching:le.isFetching,isDefault:mt,onUploadClick:We,uploadDisabled:_,selectedStatuses:g,onToggleStatus:st,onClearStatuses:ye}),be?l.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",role:"alert",children:be.message}):null,l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white text-sm text-slate-700",children:le.isLoading?l.jsx("div",{className:"p-4",children:l.jsx(LR,{})}):le.isError?l.jsx("p",{className:"p-4 text-rose-600",children:"Failed to load documents."}):K.length===0?l.jsx("div",{className:"p-6",children:l.jsx(BR,{onUploadClick:We})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto p-2 sm:p-3",children:l.jsx(CR,{documents:K,selectedIds:I,onToggleDocument:M,onToggleAll:Y,disableSelection:Z||P||W.isPending,disableRowActions:X.isPending,formatStatusLabel:Ce,onDeleteDocument:Ee,onDownloadDocument:we,onRunDocument:Se,downloadingId:U,renderRunStatus:$e,safeModeEnabled:L,safeModeMessage:ae,safeModeLoading:de})}),le.hasNextPage?l.jsx("div",{className:"flex justify-center border-t border-slate-200 bg-slate-50/60 px-3 py-2",children:l.jsx(ke,{type:"button",variant:"ghost",onClick:()=>le.fetchNextPage(),disabled:R,children:R?"Loading more documents":"Load more documents"})}):null]})})]}),l.jsx(UR,{count:V,onClear:()=>O(new Set),onRun:()=>{De&&!L&&!de&&Se(De)},onDelete:ce,busy:P,safeModeEnabled:L,safeModeMessage:ae,safeModeLoading:de}),l.jsx(RR,{open:!!me,workspaceId:e.id,documentRecord:me,onClose:()=>se(null),onRunSuccess:Re,onRunError:Qe,safeModeEnabled:L,safeModeMessage:ae,safeModeLoading:de})]})}function hR(e,n){const a=n.sort.trim()||null;return Kh({queryKey:Ii.list(e,a,n.uploader??null),initialPageParam:1,queryFn:({pageParam:i,signal:o})=>bR(e,{sort:a,page:typeof i=="number"?i:1,pageSize:Rw},o),getNextPageParam:i=>i.has_next?i.page+1:void 0,enabled:e.length>0,placeholderData:i=>i,staleTime:15e3})}function mR(e){const n=ct();return Vt({mutationFn:async({files:a})=>{const i=Array.from(a);for(const o of i)await He.POST("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e}},body:{file:""},bodySerializer:()=>{const u=new FormData;return u.append("file",o),u}})},onSuccess:()=>{n.invalidateQueries({queryKey:Ii.workspace(e)})}})}function pR(e){const n=ct();return Vt({mutationFn:async({documentIds:a})=>{await Promise.all(a.map(i=>He.DELETE("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:i}}})))},onSuccess:()=>{n.invalidateQueries({queryKey:Ii.workspace(e)})}})}function gR(e){const n=ct();return Vt({mutationFn:async({configId:a,options:i})=>{const{data:o}=await He.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:{configuration_id:a}},body:{options:i}});if(!o)throw new Error("Expected run payload.");return o},onSuccess:()=>{n.invalidateQueries({queryKey:Ii.workspace(e)})}})}function xR(e,n){const a=p.useMemo(()=>sa(`ade.workspace.${e}.document_runs`),[e]),[i,o]=p.useState(()=>lv(a,n));p.useEffect(()=>{o(lv(a,n))},[a,n]);const u=p.useCallback(d=>{o(d);const h=a.get()??{};a.set({...h,[n]:{configId:d.configId,sheetNames:d.sheetNames&&d.sheetNames.length>0?[...d.sheetNames]:null}})},[a,n]);return{preferences:i,setPreferences:u}}async function bR(e,n,a){const i={sort:n.sort??void 0,page:n.page>0?n.page:1,page_size:n.pageSize>0?n.pageSize:Rw,include_total:!1},{data:o}=await He.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:i},signal:a});if(!o)throw new Error("Expected document page payload.");return o}async function vR(e,n){const{data:a,response:i}=await He.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/download",{params:{path:{workspace_id:e,document_id:n}},parseAs:"blob"});if(!a)throw new Error("Expected document download payload.");const o=yR(i.headers.get("content-disposition"))??`document-${n}`;return{blob:a,filename:o}}function yR(e){if(!e)return null;const n=e.match(/filename\*=UTF-8''([^;]+)/i);if(n?.[1])try{return decodeURIComponent(n[1])}catch{return n[1]}return e.match(/filename="?([^";]+)"?/i)?.[1]??null}function lv(e,n){const a=e.get();if(a&&typeof a=="object"&&n in a){const i=a[n];if(i&&typeof i=="object"){const o=[];if("sheetName"in i){const h=i.sheetName;typeof h=="string"&&o.push(h)}const d=(Array.isArray(i.sheetNames)?i.sheetNames.filter(h=>typeof h=="string"&&h.length>0):null)??(o.length>0?o:null);return{configId:i.configId??null,sheetNames:d}}}return{configId:null,sheetNames:null}}function wR({workspaceName:e,totalDocuments:n,view:a,onChangeView:i,sort:o,onSort:u,onReset:d,isFetching:h,isDefault:g,onUploadClick:x,uploadDisabled:b,selectedStatuses:v,onToggleStatus:w,onClearStatuses:C}){const N=typeof n=="number"?`${n.toLocaleString()} files`:e?`Uploads and runs for ${e}`:"Manage workspace uploads and runs";return l.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/95 p-3 sm:p-4","aria-label":"Documents header and filters",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("h1",{className:"truncate text-lg font-semibold text-slate-900 sm:text-xl",children:e?`${e} documents`:"Documents"}),l.jsx("p",{className:"text-xs text-slate-500",children:N})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("button",{type:"button",onClick:d,disabled:g,className:pe("rounded border border-transparent px-3 py-1 text-sm font-medium",g?"cursor-default text-slate-300":"text-slate-600 hover:border-slate-200 hover:bg-slate-50 hover:text-slate-900"),children:"Reset"}),l.jsx(ke,{className:"shrink-0",onClick:x,disabled:b,isLoading:b,"aria-label":"Upload documents",children:"Upload"})]})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[l.jsx(jR,{view:a,onChange:i}),l.jsx(SR,{selectedStatuses:v,onToggleStatus:w,onClearStatuses:C}),l.jsxs(Vi,{value:o,onChange:j=>u(j.target.value),className:"w-40","aria-label":"Sort documents",children:[l.jsx("option",{value:"-created_at",children:"Newest first"}),l.jsx("option",{value:"created_at",children:"Oldest first"}),l.jsx("option",{value:"-last_run_at",children:"Recent runs"}),l.jsx("option",{value:"last_run_at",children:"Least recently run"}),l.jsx("option",{value:"-byte_size",children:"Largest files"}),l.jsx("option",{value:"byte_size",children:"Smallest files"}),l.jsx("option",{value:"name",children:"Name AZ"}),l.jsx("option",{value:"-name",children:"Name ZA"})]}),l.jsxs("span",{className:pe("ml-auto inline-flex items-center gap-1 text-[11px] text-slate-500",h?"opacity-100":"opacity-0"),role:"status","aria-live":"polite",children:[l.jsx("span",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-slate-400"}),"Updating"]})]})]})}function jR({view:e,onChange:n}){return l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(Ir).map(a=>{const i=Ir[a],o=a===e;return l.jsx("button",{type:"button",onClick:()=>n(a),className:pe("rounded-full px-3 py-1 text-xs font-medium transition",o?"bg-brand-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-900"),title:i.description,children:i.label},a)})})}function SR({selectedStatuses:e,onToggleStatus:n,onClearStatuses:a}){const[i,o]=p.useState(!1),u=p.useRef(null),d=Object.entries(Tw),h=e.size>0,g=h?`${e.size} ${e.size===1?"status":"statuses"}`:"All statuses";return p.useEffect(()=>{if(!i)return;const x=b=>{u.current&&!u.current.contains(b.target)&&o(!1)};return window.addEventListener("mousedown",x),()=>window.removeEventListener("mousedown",x)},[i]),l.jsxs("div",{className:"relative",ref:u,children:[l.jsxs("button",{type:"button",onClick:()=>o(x=>!x),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 shadow-sm hover:border-slate-300","aria-haspopup":"true","aria-expanded":i,children:["Status: ",g,l.jsx(TR,{className:"h-3 w-3"})]}),i?l.jsxs("div",{className:"absolute z-30 mt-2 w-60 rounded-xl border border-slate-200 bg-white p-3 text-sm shadow-xl",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("span",{children:"Status filters"}),l.jsx("button",{type:"button",onClick:()=>{a(),o(!1)},className:pe("text-[11px]",h?"text-slate-500 underline underline-offset-4":"text-slate-300"),children:"Clear"})]}),l.jsx("ul",{className:"space-y-1 text-xs text-slate-600",children:d.map(([x,b])=>{const v=e.has(x);return l.jsx("li",{children:l.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1 hover:bg-slate-50",children:[l.jsx("input",{type:"checkbox",checked:v,onChange:()=>n(x),className:"h-3.5 w-3.5 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),l.jsx("span",{className:"truncate",children:b})]})},x)})}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsx(ke,{size:"sm",variant:"ghost",onClick:()=>o(!1),children:"Done"})})]}):null]})}function CR({documents:e,selectedIds:n,onToggleDocument:a,onToggleAll:i,disableSelection:o=!1,disableRowActions:u=!1,formatStatusLabel:d,onDeleteDocument:h,onDownloadDocument:g,onRunDocument:x,downloadingId:b=null,renderRunStatus:v,safeModeEnabled:w=!1,safeModeMessage:C,safeModeLoading:N=!1}){const j=p.useRef(null),{allSelected:k,someSelected:T}=p.useMemo(()=>{if(e.length===0)return{allSelected:!1,someSelected:!1};const E=e.reduce((B,Q)=>n.has(Q.id)?B+1:B,0);return{allSelected:E===e.length,someSelected:E>0&&E<e.length}},[e,n]);return p.useEffect(()=>{j.current&&(j.current.indeterminate=T)},[T]),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full table-fixed border-separate border-spacing-0 text-sm text-slate-700",children:[l.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/80 backdrop-blur-sm text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{scope:"col",className:"w-10 px-2 py-2",children:l.jsx("input",{ref:j,type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:k,onChange:i,disabled:o||e.length===0})}),l.jsx("th",{scope:"col",className:"w-20 px-2 py-2 text-left",children:"ID"}),l.jsx("th",{scope:"col",className:"px-2 py-2 text-left",children:"Document"}),l.jsx("th",{scope:"col",className:"w-40 px-2 py-2 text-left",children:"Uploaded"}),l.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Uploader"}),l.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Latest run"}),l.jsx("th",{scope:"col",className:"w-32 px-2 py-2 text-left",children:"Status"}),l.jsx("th",{scope:"col",className:"w-36 px-2 py-2 text-right",children:"Actions"})]})}),l.jsx("tbody",{children:e.map(E=>{const B=n.has(E.id);return l.jsxs("tr",{className:pe("border-b border-slate-200 last:border-b-0 transition-colors hover:bg-slate-50",B?"bg-brand-50/50":"bg-white"),children:[l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:B,onChange:()=>a(E.id),disabled:o})}),l.jsx("td",{className:"px-2 py-2 align-middle font-mono text-xs text-slate-500",children:E.id.slice(-6)}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"truncate font-semibold text-slate-900",title:E.name,children:E.name}),l.jsx("div",{className:"text-xs text-slate-500",children:ER(E)})]})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("time",{dateTime:E.created_at,className:"block text-xs text-slate-600",title:Mw.format(new Date(E.created_at)),children:DR(E)})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("span",{className:"block truncate text-xs text-slate-600",children:E.uploader?.name??E.uploader?.email??""})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:v?v(E):null}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("span",{className:pe("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",AR(E.status)),children:d?d(E.status):E.status})}),l.jsx("td",{className:"px-2 py-2 align-middle text-right",children:l.jsx(NR,{document:E,onDownload:g,onDelete:h,onRun:x,disabled:u,downloading:b===E.id,safeModeEnabled:w,safeModeMessage:C,safeModeLoading:N})})]},E.id)})})]})})}function NR({document:e,onDownload:n,onDelete:a,onRun:i,disabled:o=!1,downloading:u=!1,safeModeEnabled:d=!1,safeModeMessage:h,safeModeLoading:g=!1}){const x=o||!i||d||g,b=d?h??Ki:g?"Checking ADE safe mode status...":void 0;return l.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[l.jsx(ke,{type:"button",size:"sm",variant:"primary",onClick:()=>{x||i?.(e)},disabled:x,title:b,children:"Run"}),l.jsx("button",{type:"button",onClick:()=>n?.(e),className:pe("px-2 py-1 text-xs font-medium text-slate-600 underline underline-offset-4 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",u&&"opacity-60"),disabled:o||u,children:u?"Downloading":"Download"}),l.jsx("button",{type:"button",onClick:()=>a?.(e),className:"px-2 py-1 text-xs font-semibold text-danger-600 hover:text-danger-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-danger-500",disabled:o,children:"Delete"})]})}function ER(e){const n=[];return e.content_type&&n.push(kR(e.content_type)),typeof e.byte_size=="number"&&e.byte_size>=0&&n.push(_R(e.byte_size)),n.join("  ")||"Unknown type"}function kR(e){return{"application/pdf":"PDF document","text/csv":"CSV file","text/tab-separated-values":"TSV file","application/vnd.ms-excel":"Excel spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel spreadsheet","application/vnd.ms-excel.sheet.macroEnabled.12":"Excel macro spreadsheet"}[e]??e}function _R(e){if(e<1024)return`${e} B`;const n=["KB","MB","GB","TB"];let a=e/1024,i=0;for(;a>=1024&&i<n.length-1;)a/=1024,i+=1;return`${a>=10?Math.round(a):Math.round(a*10)/10} ${n[i]}`}function AR(e){switch(e){case"processed":return"bg-success-100 text-success-700";case"processing":return"bg-warning-100 text-warning-700";case"failed":return"bg-danger-100 text-danger-700";case"archived":return"bg-slate-200 text-slate-700";default:return"bg-slate-100 text-slate-700"}}function DR(e){return Mw.format(new Date(e.created_at))}function TR({className:e}){return l.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.8,className:e,children:l.jsx("path",{d:"M5 8l5 5 5-5",strokeLinecap:"round",strokeLinejoin:"round"})})}function MR({className:e}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:pe("animate-spin text-slate-500",e),role:"presentation",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),l.jsx("path",{className:"opacity-75",d:"M22 12c0-5.523-4.477-10-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function RR({open:e,workspaceId:n,documentRecord:a,onClose:i,onRunSuccess:o,onRunError:u,safeModeEnabled:d=!1,safeModeMessage:h,safeModeLoading:g=!1}){const x=p.useRef(null);return p.useEffect(()=>{typeof window>"u"||(e?x.current=window.document.activeElement instanceof HTMLElement?window.document.activeElement:null:(x.current?.focus(),x.current=null))},[e]),p.useEffect(()=>{if(!e||typeof window>"u")return;const b=window.document.body.style.overflow;return window.document.body.style.overflow="hidden",()=>{window.document.body.style.overflow=b}},[e]),typeof window>"u"||!e||!a?null:ps.createPortal(l.jsx(zR,{workspaceId:n,documentRecord:a,onClose:i,onRunSuccess:o,onRunError:u,safeModeEnabled:d,safeModeMessage:h,safeModeLoading:g}),window.document.body)}function zR({workspaceId:e,documentRecord:n,onClose:a,onRunSuccess:i,onRunError:o,safeModeEnabled:u=!1,safeModeMessage:d,safeModeLoading:h=!1}){const g=p.useRef(null),x=p.useId(),b=p.useId(),v=Ft(),w=Du({workspaceId:e}),[C,N]=p.useState(""),j=gR(e),{preferences:k,setPreferences:T}=xR(e,n.id),[E,B]=p.useState(n.last_run?.run_id??null);p.useEffect(()=>{B(n.last_run?.run_id??null)},[n.id,n.last_run?.run_id]);const Q=p.useMemo(()=>w.data?.items??[],[w.data]),O=p.useMemo(()=>Q.filter(ye=>!("deleted_at"in ye&&ye.deleted_at)).filter(ye=>(typeof ye.status=="string"?ye.status.toLowerCase():"draft")!=="archived").sort((ye,Ce)=>{const $e=typeof ye.status=="string"?ye.status.toLowerCase():"draft",We=typeof Ce.status=="string"?Ce.status.toLowerCase():"draft";if($e==="active"&&We!=="active")return-1;if(We==="active"&&$e!=="active")return 1;const at=new Date(ye.updated_at??0).getTime();return new Date(Ce.updated_at??0).getTime()-at}),[Q]),I=p.useMemo(()=>O.find(ye=>(typeof ye.status=="string"?ye.status.toLowerCase():"")==="active")??null,[O]),A=!!I,V=p.useMemo(()=>{if(k.configId){const ye=O.find(Ce=>Ce.id===k.configId);if(ye)return ye.id}return I?.id??""},[I?.id,k.configId,O]);p.useEffect(()=>{N(V)},[V]);const W=p.useMemo(()=>O.find(ye=>ye.id===C)??null,[O,C]),X=p.useCallback(ye=>{const Ce=typeof ye.status=="string"?ye.status:"draft";return`${ye.title??ye.display_name??"Untitled configuration"} (${Ce.charAt(0).toUpperCase()}${Ce.slice(1)})`},[]),[J,L]=p.useState(null),ae=d??Ki,de=On({queryKey:E?Jb.detail(E):["run","none"],queryFn:({signal:ye})=>E?Tm(E,ye):Promise.reject(new Error("No run selected")),enabled:!!E,refetchInterval:ye=>{const Ce=ye.state.data?.status;return Ce==="running"||Ce==="queued"?2e3:!1}}),be=On({queryKey:E?Jb.telemetry(E):["run-telemetry","none"],queryFn:({signal:ye})=>{if(!E)return Promise.reject(new Error("No run selected"));const Ce=de.data??E;return JT(Ce,ye)},enabled:!!E&&(de.data?.status==="succeeded"||de.data?.status==="failed"),staleTime:5e3}),D=On({queryKey:["document-sheets",e,n.id],queryFn:({signal:ye})=>mw(e,n.id,ye),staleTime:6e4}),U=p.useMemo(()=>D.data??[],[D.data]),[ie,me]=p.useState([]);p.useEffect(()=>{if(!U.length){me([]);return}const ye=(k.sheetNames??[]).filter($e=>U.some(We=>We.name===$e)),Ce=Array.from(new Set(ye));me(Ce)},[U,k.sheetNames]);const se=p.useMemo(()=>Array.from(new Set(ie.filter(ye=>U.some(Ce=>Ce.name===ye)))),[ie,U]);p.useEffect(()=>{W&&T({configId:W.id,sheetNames:se.length?se:null})},[se,W,T]);const _=p.useCallback(ye=>{me(Ce=>Ce.includes(ye)?Ce.filter($e=>$e!==ye):[...Ce,ye])},[]),P=de.data??null,le=P?.status??null,q=le==="running"||le==="queued",ee=P?yw(P):null,H=P?.output?.output_path??null,K=P?ww(P):null,R=be.data??[],Z=p.useMemo(()=>$R(be.data??[]),[be.data]);p.useEffect(()=>{const ye=g.current;if(!ye)return;(ov(ye)[0]??ye).focus();const $e=We=>{if(We.key==="Escape"){We.preventDefault(),a();return}if(We.key!=="Tab")return;const at=ov(ye);if(at.length===0){We.preventDefault();return}const Ot=at[0],M=at[at.length-1],Y=window.document.activeElement;if(We.shiftKey){(!ye.contains(Y)||Y===Ot)&&(We.preventDefault(),M.focus());return}Y===M&&(We.preventDefault(),Ot.focus())};return ye.addEventListener("keydown",$e),()=>ye.removeEventListener("keydown",$e)},[a]);const ge=O.length>0,De=j.isPending||q||h||u||!A||!ge||!W,Ze=u?ae:A?h?"Checking ADE safe mode status...":void 0:"No active configuration. Make a draft active to run extraction.",st=()=>{if(u||h)return;if(!A){L("No active configuration. Make a draft active before running extraction.");return}if(!W){L("Select a configuration before running the extractor.");return}L(null),B(null);const ye=se,Ce={dry_run:!1,validate_only:!1,force_rebuild:!1,debug:!1,log_level:"INFO"},$e=ye.length>0?{...Ce,input_sheet_names:ye}:Ce;j.mutate({configId:W.id,options:{...$e,input_document_id:n.id}},{onSuccess:We=>{T({configId:W.id,sheetNames:ye.length?ye:null}),i?.(We),B(We.id)},onError:We=>{const at=We instanceof Error?We.message:"Unable to submit extraction run.";L(at),o?.(at)}})};return l.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[l.jsx("button",{type:"button",tabIndex:-1,"aria-hidden":"true",className:"flex-1 bg-slate-900/30 backdrop-blur-sm",onClick:a}),l.jsxs("aside",{ref:g,role:"dialog","aria-modal":"true","aria-labelledby":x,"aria-describedby":b,tabIndex:-1,className:"relative flex h-full w-[min(28rem,92vw)] flex-col border-l border-slate-200 bg-white shadow-2xl",children:[l.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[l.jsxs("div",{children:[l.jsx("h2",{id:x,className:"text-lg font-semibold text-slate-900",children:"Run extraction"}),l.jsx("p",{id:b,className:"text-xs text-slate-500",children:"Prepare and submit a processing run."})]}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:a,disabled:j.isPending,children:"Close"})]}),l.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-sm text-slate-600",children:[l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Document"}),l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[l.jsx("p",{className:"font-semibold text-slate-800",title:n.name,children:n.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",new Date(n.created_at).toLocaleString()]}),n.last_run_at?l.jsxs("p",{className:"text-xs text-slate-500",children:["Last run ",new Date(n.last_run_at).toLocaleString()]}):null]})]}),l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Configuration"}),w.isLoading?l.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"Loading configurations"}):w.isError?l.jsxs(lt,{tone:"danger",children:["Unable to load configurations."," ",w.error instanceof Error?w.error.message:"Try again later."]}):ge&&!A?l.jsxs("div",{className:"space-y-2",children:[l.jsx(lt,{tone:"warning",children:"No active configuration. Make a draft active to run extraction."}),l.jsx(ke,{variant:"secondary",size:"sm",onClick:()=>{a(),v(`/workspaces/${e}/config-builder`)},disabled:j.isPending,children:"Go to Configuration Builder"})]}):ge?l.jsx("div",{className:"space-y-2",children:l.jsxs(Vi,{value:C,onChange:ye=>{const Ce=ye.target.value;N(Ce)},disabled:j.isPending,children:[l.jsx("option",{value:"",children:"Select configuration"}),O.map(ye=>l.jsx("option",{value:ye.id,children:X(ye)},ye.id))]})}):l.jsx(lt,{tone:"info",children:"No configurations available. Create one before running extraction."})]}),l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Advanced options"}),D.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading worksheets"}):D.isError?l.jsx(lt,{tone:"warning",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ke,{variant:"secondary",size:"sm",onClick:()=>D.refetch(),disabled:D.isFetching,children:"Retry loading"}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>me([]),disabled:j.isPending,children:"Use all worksheets"})]})]})}):U.length>0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Worksheets"}),l.jsx("p",{className:"text-[11px] text-slate-500",children:se.length===0?"All worksheets will be processed by default. Select any subset to narrow the run.":`${se.length.toLocaleString()} worksheet${se.length===1?"":"s"} selected. Clear selections to process every sheet.`})]}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>me([]),disabled:j.isPending,children:"Use all worksheets"})]}),l.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:U.map(ye=>{const Ce=se.includes(ye.name);return l.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:Ce,onChange:()=>_(ye.name)}),l.jsxs("span",{className:"flex-1 truncate",children:[ye.name,ye.is_active?" (active)":""]})]},`${ye.index}-${ye.name}`)})})]}):l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"This document does not expose multiple worksheets, so ADE will ingest the uploaded file directly."})]}),E?l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Latest run"}),l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-slate-800",title:E,children:["Run ",E]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",le??"loading"]})]}),q?l.jsx(MR,{className:"h-4 w-4 text-slate-500"}):null]}),K?l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.jsx("a",{href:K,className:"inline-flex items-center rounded border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:bg-slate-100",children:"Download logs"})}):null,l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Output"}),de.isFetching&&!ee?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading output"}):ee?l.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 break-all rounded border border-slate-100 px-2 py-1 text-xs text-slate-700",children:[l.jsx("a",{href:ee,className:"text-emerald-700 hover:underline",children:H?.split("/").pop()??"Download output"}),H?l.jsx("span",{className:"text-[11px] text-slate-500",children:H}):null]}):l.jsx("p",{className:"text-xs text-slate-500",children:"Output will appear here after the run completes."})]}),l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Run summary"}),be.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading summary"}):be.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load run summary."}):Z?l.jsx(aR,{summary:Z}):l.jsx("p",{className:"text-xs text-slate-500",children:"Summary not available."})]}),l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Telemetry summary"}),be.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading telemetry"}):be.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load telemetry events."}):R.length>0?l.jsx(rR,{events:R}):l.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."})]})]})]}):null,u?l.jsx(lt,{tone:"warning",children:ae}):null,J?l.jsx(lt,{tone:"danger",children:J}):null]}),l.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t border-slate-200 px-5 py-4",children:[l.jsx(ke,{type:"button",variant:"ghost",onClick:a,disabled:j.isPending,children:"Cancel"}),l.jsx(ke,{type:"button",onClick:st,isLoading:j.isPending,disabled:De,title:Ze,children:"Run extraction"})]})]})]})}function OR({onFiles:e,disabled:n,workspaceName:a}){const[i,o]=p.useState(!1),u=p.useRef(0);return p.useEffect(()=>{if(n)return;const d=b=>{!b.dataTransfer||![...b.dataTransfer.types].includes("Files")||(u.current+=1,o(!0))},h=b=>{i&&b.preventDefault()},g=()=>{u.current=Math.max(0,u.current-1),u.current===0&&o(!1)},x=b=>{b.preventDefault(),o(!1),u.current=0;const v=Array.from(b.dataTransfer?.files??[]);v.length&&e(v)};return window.addEventListener("dragenter",d),window.addEventListener("dragover",h),window.addEventListener("dragleave",g),window.addEventListener("drop",x),()=>{window.removeEventListener("dragenter",d),window.removeEventListener("dragover",h),window.removeEventListener("dragleave",g),window.removeEventListener("drop",x)}},[i,n,e]),l.jsxs("div",{"aria-hidden":!i,className:pe("pointer-events-none fixed inset-0 z-[60] transition",i?"opacity-100":"opacity-0"),children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/25 backdrop-blur-[2px]"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:l.jsx("div",{className:"pointer-events-none rounded-2xl border border-white/70 bg-white/90 px-6 py-5 shadow-2xl",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow",children:l.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 text-slate-700",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[l.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsxs("div",{className:"text-center sm:text-left",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Drop to upload"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Files will upload to ",l.jsx("span",{className:"font-medium",children:a??"this workspace"})]})]})]})})})]})}function LR(){return l.jsx("div",{className:"space-y-3","aria-hidden":!0,children:Array.from({length:6}).map((e,n)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-4 w-4 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 flex-1 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 w-24 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 w-40 rounded bg-slate-100"}),l.jsx("div",{className:"h-8 w-40 rounded bg-slate-100"})]},n))})}function UR({count:e,onClear:n,onRun:a,onDelete:i,busy:o,safeModeEnabled:u=!1,safeModeMessage:d,safeModeLoading:h=!1}){if(e===0)return null;const g=o||u||h,x=u?d??Ki:h?"Checking ADE safe mode status...":void 0;return l.jsx("div",{className:"fixed inset-x-0 bottom-0 z-40 mx-auto max-w-7xl px-2 pb-2 sm:px-4 sm:pb-4",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white/95 p-3 text-sm text-slate-700 shadow-lg backdrop-blur",children:[l.jsxs("span",{className:"mr-2",children:[l.jsx("strong",{children:e})," selected"]}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:n,children:"Clear"}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsx(ke,{size:"sm",onClick:()=>!g&&a(),disabled:g,title:x,children:"Run extraction"}),l.jsx(ke,{size:"sm",variant:"danger",onClick:i,disabled:o,isLoading:o,children:"Delete selected"})]})]})})}function BR({onUploadClick:e}){return l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-center",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-50",children:l.jsxs("svg",{className:"h-6 w-6 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[l.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No documents yet"}),l.jsx("p",{className:"max-w-md text-sm text-slate-600",children:"Tap Upload or drag files anywhere in the window."}),l.jsx(ke,{onClick:e,className:"w-full sm:w-auto",children:"Upload"})]})}function $R(e){for(let n=e.length-1;n>=0;n-=1){const a=e[n];if((typeof a.event=="string"?a.event:typeof a.type=="string"?a.type:null)!=="engine.run.summary")continue;const o=a.data;if(o&&typeof o=="object")return o}return null}function qR({document:e}){const n=e.last_run;return n?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("span",{className:pe("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",FR(n.status)),children:[HR(n.status),n.run_at?l.jsx("span",{className:"ml-1 font-normal text-slate-500",children:ZR(n.run_at)}):null]}),n.message?l.jsx("span",{className:"text-[11px] text-slate-500",children:n.message}):null]}):l.jsx("span",{className:"text-xs text-slate-400",children:"No runs yet"})}function FR(e){switch(e){case"succeeded":return"bg-success-100 text-success-700";case"failed":return"bg-danger-100 text-danger-700";case"running":return"bg-brand-100 text-brand-700";default:return"bg-slate-200 text-slate-700"}}function HR(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Bi=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});function ZR(e){if(!e)return"unknown";const n=new Date(e);if(Number.isNaN(n.getTime()))return"unknown";const a=n.getTime()-Date.now(),i=Math.round(a/1e3);if(Math.abs(i)<60)return Bi.format(i,"second");const u=Math.round(i/60);if(Math.abs(u)<60)return Bi.format(u,"minute");const h=Math.round(u/60);if(Math.abs(h)<24)return Bi.format(h,"hour");const x=Math.round(h/24);if(Math.abs(x)<30)return Bi.format(x,"day");const b=Math.round(x/30);if(Math.abs(b)<12)return Bi.format(b,"month");const v=Math.round(x/365);return Bi.format(v,"year")}function VR(e,n){const a=URL.createObjectURL(e),i=document.createElement("a");i.href=a,i.download=n,i.click(),window.setTimeout(()=>URL.revokeObjectURL(a),1e3)}function ov(e){const n=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(e.querySelectorAll(n.join(","))).filter(a=>!a.hasAttribute("disabled")&&a.getAttribute("aria-hidden")!=="true")}function IR({params:e}){return l.jsxs("section",{children:[l.jsxs("h1",{className:"text-lg font-semibold",children:["Document ",e.documentId]}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: render document details or drawer."})]})}function QR(){return l.jsx(wt,{title:"Runs",description:"Run history will appear here once runs APIs expose listing endpoints.",variant:"empty"})}function Kc({status:e}){const n=e.toLowerCase(),a=n==="active"?"Active":n==="draft"?"Draft":n==="archived"?"Archived":e,i=n==="active"?"bg-emerald-100 text-emerald-700":n==="draft"?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-700";return l.jsx("span",{className:pe("rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide",i),title:a,children:a})}const PR="Default template",Jl=(e,n)=>`/workspaces/${e}/config-builder/${encodeURIComponent(n)}`;function WR(){const{workspace:e}=Na(),n=Ft(),{notifyToast:a}=Dm(),i=p.useMemo(()=>jw(e.id),[e.id]),o=p.useMemo(()=>Mm(e.id),[e.id]),u=Du({workspaceId:e.id}),d=sR(e.id),h=TT(e.id),g=_m(e.id),x=hw(e.id),b=Am(e.id),[v,w]=p.useState(()=>`${e.name} Config`),[C,N]=p.useState(null),[j,k]=p.useState(()=>`${e.name} Import`),[T,E]=p.useState(null),[B,Q]=p.useState(null),[O,I]=p.useState(()=>o.get()),A=p.useRef(null),V=p.useRef(null),W=p.useMemo(()=>(u.data?.items??[]).filter(ue=>!("deleted_at"in ue&&ue.deleted_at)),[u.data]),X=p.useMemo(()=>{const ue=new Map;for(const _e of W)ue.set(_e.id,Zi(_e.status));return ue},[W]),J=p.useMemo(()=>{for(const ue of W)if(X.get(ue.id)==="active")return ue;return null},[W,X]),L=p.useMemo(()=>W.filter(ue=>X.get(ue.id)==="draft").sort((ue,_e)=>ev(ue.updated_at,_e.updated_at)),[W,X]),ae=p.useMemo(()=>W.filter(ue=>X.get(ue.id)==="archived").sort((ue,_e)=>ev(ue.updated_at,_e.updated_at)),[W,X]),de=p.useMemo(()=>W.find(ue=>ue.id===O?.configId)??null,[W,O]),be=p.useCallback(ue=>{I(Rm(o,ue))},[o]);p.useEffect(()=>{I(o.get())},[o]),p.useEffect(()=>{const ue=V.current,_e=ue?.id!==e.id,rt=ue?.name!==e.name;if(!(!_e&&!rt)){if(V.current={id:e.id,name:e.name},_e){w(`${e.name} Config`),N(null),k(`${e.name} Import`),E(null),Q(null),A.current&&(A.current.value="");return}rt&&(w(Dt=>Dt===`${ue?.name??""} Config`?`${e.name} Config`:Dt),k(Dt=>Dt===`${ue?.name??""} Import`?`${e.name} Import`:Dt))}},[e.id,e.name]),p.useEffect(()=>{if(typeof window>"u")return;const ue=_e=>{if(!(_e.storageArea!==window.localStorage||_e.key!==i))try{I(_e.newValue?JSON.parse(_e.newValue):null)}catch{I(null)}};return window.addEventListener("storage",ue),()=>window.removeEventListener("storage",ue)},[i]),p.useEffect(()=>{O?.configId&&(W.some(ue=>ue.id===O.configId)||be(null))},[W,O?.configId,be]);const D=p.useCallback(ue=>{be(ue),n(Jl(e.id,ue))},[n,be,e.id]),U=p.useCallback(ue=>{be(ue),n(`${Jl(e.id,ue)}/editor`)},[n,be,e.id]),[ie,me]=p.useState(null),se=p.useMemo(()=>ie?W.find(ue=>ue.id===ie.configId)??null:null,[W,ie]),[_,P]=p.useState(null),le=p.useCallback(async ue=>{P(ue.id);try{const _e=await km(e.id,ue.id),rt=_e.filename??`${ue.id}.zip`,Dt=URL.createObjectURL(_e.blob),ut=document.createElement("a");ut.href=Dt,ut.download=rt,ut.click(),URL.revokeObjectURL(Dt),a({title:`Exported ${rt}`,intent:"success",duration:4e3})}catch(_e){const rt=_e instanceof Error?_e.message:"Unable to export configuration.";a({title:rt,intent:"danger",duration:6e3})}finally{P(_e=>_e===ue.id?null:_e)}},[a,e.id]),[q,ee]=p.useState(null),H=p.useMemo(()=>q?W.find(ue=>ue.id===q)??null:null,[W,q]),K=p.useMemo(()=>new Set(W.map(ue=>ue.display_name.trim().toLowerCase())),[W]),[R,Z]=p.useState(""),[ge,De]=p.useState(null),Ze=p.useCallback(ue=>{b.reset(),De(null),Z(zm(ue.display_name,K)),ee(ue.id)},[b,K]),[st,ye]=p.useState(null),Ce=p.useMemo(()=>st?W.find(ue=>ue.id===st)??null:null,[st,W]),[$e,We]=p.useState(null),at=p.useMemo(()=>$e?W.find(ue=>ue.id===$e)??null:null,[W,$e]),Ot=at?.id??null,[M,Y]=p.useState(null);p.useEffect(()=>{if(!Ot){Y(null);return}let ue=!1;return Y({stage:"checking"}),Em(e.id,Ot).then(_e=>{if(!ue){if(Array.isArray(_e.issues)&&_e.issues.length>0){Y({stage:"issues",issues:_e.issues});return}Y({stage:"confirm"})}}).catch(_e=>{if(ue)return;const rt=_e instanceof Error?_e.message:"Unable to validate configuration.";Y({stage:"error",message:rt})}),()=>{ue=!0}},[Ot,e.id]);const ce=p.useCallback(ue=>{g.reset(),Y({stage:"checking"}),We(ue.id)},[g]),Ee=p.useCallback(()=>{We(null),Y(null)},[]),we=p.useCallback(()=>{ee(null),De(null)},[]),Se=p.useCallback(()=>{ye(null)},[]),Re=p.useCallback(()=>{at&&g.mutate({configurationId:at.id},{onSuccess(){a({title:"Configuration is now active.",intent:"success",duration:4e3}),Ee()},onError(ue){a({title:ue instanceof Error?ue.message:"Unable to make configuration active.",intent:"danger",duration:6e3})}})},[Ee,g,at,a]),Qe=p.useCallback(()=>{Ce&&x.mutate({configurationId:Ce.id},{onSuccess(){a({title:"Active configuration archived.",intent:"success",duration:4e3}),Se()},onError(ue){a({title:ue instanceof Error?ue.message:"Unable to archive configuration.",intent:"danger",duration:6e3})}})},[x,Ce,Se,a]),Pe=p.useCallback(()=>{if(!H)return;const ue=R.trim();if(!ue){De("Enter a name for the new draft configuration.");return}De(null),b.mutate({sourceConfigurationId:H.id,displayName:ue},{onSuccess(_e){be(_e.id),a({title:"Draft created.",intent:"success",duration:3500}),we(),n(`${Jl(e.id,_e.id)}/editor`)},onError(_e){const rt=_e instanceof Error?_e.message:"Unable to duplicate configuration.";De(rt)}})},[we,b,R,H,n,a,be,e.id]),mt=p.useCallback((ue,_e)=>{ue.preventDefault(),ue.stopPropagation();const rt=ue.currentTarget.getBoundingClientRect();me({configId:_e,x:rt.right+8,y:rt.bottom})},[]),Ne=p.useMemo(()=>{if(!se)return[];const ue=X.get(se.id)??Zi(se.status),_e=_===se.id,rt=[{id:"open-editor",label:"Open editor",onSelect:()=>U(se.id)},{id:"export",label:_e?"Exporting":"Export",onSelect:()=>{le(se)},disabled:_e},{id:"duplicate",label:"Duplicate to edit",onSelect:()=>Ze(se),dividerAbove:!0}];return ue==="active"&&rt.push({id:"archive",label:"Archive",onSelect:()=>ye(se.id),danger:!0,dividerAbove:!0}),rt},[se,_,le,U,X,Ze]),Ae=p.useCallback(ue=>{Q(null),E(ue.target.files?.[0]??null),ue.target.value=""},[]),Fe=ue=>{ue.preventDefault();const _e=v.trim();if(!_e){N("Enter a display name for the configuration.");return}N(null),d.mutate({displayName:_e,source:{type:"template"}},{onSuccess(rt){be(rt.id),n(Jl(e.id,rt.id))}})},vt=ue=>{ue.preventDefault();const _e=j.trim();if(!_e){Q("Enter a display name for the imported configuration.");return}if(!T){Q("Select a .zip file to import.");return}Q(null),h.mutate({displayName:_e,file:T},{onSuccess(rt){be(rt.id),E(null),u.refetch(),n(Jl(e.id,rt.id))},onError(rt){Q(rt instanceof Error?rt.message:"Unable to import configuration.")}})},Xe=C??(d.error instanceof Error?d.error.message:null),At=v.trim().length>0&&!d.isPending,Rt=j.trim().length>0&&!!T&&!h.isPending,Xn=ue=>l.jsx(bt,{label:"Template",children:l.jsx(ht,{value:PR,readOnly:!0,disabled:ue})});return u.isLoading?l.jsx(wt,{variant:"loading",title:"Loading configurations",description:"Fetching workspace configurations"}):u.isError?l.jsx(wt,{variant:"error",title:"Unable to load configurations",description:"Try refreshing the page."}):W.length===0?l.jsx(wt,{className:"mx-auto w-full max-w-xl",title:"Create your first configuration",description:"Copy a starter template into this workspace to begin editing detectors, hooks, and manifests.",action:l.jsxs("div",{className:"space-y-6 text-left",children:[l.jsxs("form",{onSubmit:Fe,className:"space-y-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsx(bt,{label:"Configuration name",required:!0,children:l.jsx(ht,{value:v,onChange:ue=>w(ue.target.value),placeholder:"Membership normalization",disabled:d.isPending})}),Xn(d.isPending),Xe?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:Xe}):null,l.jsx(ke,{type:"submit",className:"w-full",disabled:!At,isLoading:d.isPending,children:"Create from template"})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Import configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),l.jsxs("form",{onSubmit:vt,className:"mt-3 space-y-4",children:[l.jsx(bt,{label:"Configuration name",required:!0,children:l.jsx(ht,{value:j,onChange:ue=>k(ue.target.value),placeholder:"Imported configuration",disabled:h.isPending})}),l.jsxs(bt,{label:"Archive (.zip)",required:!0,children:[l.jsx(ht,{type:"file",ref:A,accept:".zip",onChange:Ae,disabled:h.isPending}),T?l.jsx("p",{className:"mt-1 text-xs text-slate-500","aria-live":"polite",children:T.name}):null]}),B?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:B}):null,l.jsx(ke,{type:"submit",className:"w-full",disabled:!Rt,isLoading:h.isPending,children:"Import archive"})]})]})]})}):l.jsxs("div",{className:"grid gap-6 p-4 lg:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",children:[l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Configurations"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Manage draft, active, and archived configurations for this workspace."})]}),de?l.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>D(de.id),children:"Resume last opened"}):null]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"rounded-xl border border-slate-200",children:[l.jsx("div",{className:"border-b border-slate-200 px-4 py-3",children:l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Active configuration"})}),J?l.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-slate-50",children:[l.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>D(J.id),children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:J.display_name}),l.jsx(Kc,{status:J.status}),l.jsx("span",{className:"text-xs text-slate-500",children:"Used for extraction runs"})]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Updated ",bh(J.updated_at)]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[l.jsx(ke,{size:"sm",onClick:ue=>{ue.stopPropagation(),Ze(J)},children:"Duplicate to edit"}),l.jsx(ke,{size:"sm",variant:"ghost",onClick:ue=>mt(ue,J.id),children:""})]})]}):l.jsxs("div",{className:"space-y-2 p-4",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"No active configuration"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Extraction runs will be blocked until you make a draft configuration active."})]})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Drafts (",L.length,")"]}),L.length===0&&J?l.jsx("p",{className:"text-xs text-slate-500",children:"Duplicate Active to start editing."}):null]}),L.length?l.jsx("div",{className:"divide-y divide-slate-200",children:L.map(ue=>l.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-slate-50",children:[l.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>D(ue.id),children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:ue.display_name}),l.jsx(Kc,{status:ue.status}),de?.id===ue.id?l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-brand-600",children:"Last opened"}):null]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Updated ",bh(ue.updated_at)]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[l.jsx(ke,{size:"sm",variant:"secondary",onClick:_e=>{_e.stopPropagation(),ce(ue)},children:"Make active"}),l.jsx(ke,{size:"sm",variant:"ghost",onClick:_e=>mt(_e,ue.id),children:""})]})]},ue.id))}):l.jsx("div",{className:"p-4 text-sm text-slate-600",children:"No draft configurations."})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200",children:[l.jsx("div",{className:"border-b border-slate-200 px-4 py-3",children:l.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Archived (",ae.length,")"]})}),ae.length?l.jsx("div",{className:"divide-y divide-slate-200",children:ae.map(ue=>l.jsxs("div",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center hover:bg-slate-50",children:[l.jsxs("button",{type:"button",className:"cursor-pointer space-y-1 rounded-md text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>D(ue.id),children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:ue.display_name}),l.jsx(Kc,{status:ue.status})]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Updated ",bh(ue.updated_at)]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[l.jsx(ke,{size:"sm",onClick:_e=>{_e.stopPropagation(),Ze(ue)},children:"Duplicate to edit"}),l.jsx(ke,{size:"sm",variant:"ghost",onClick:_e=>mt(_e,ue.id),children:""})]})]},ue.id))}):l.jsx("div",{className:"p-4 text-sm text-slate-600",children:"No archived configurations."})]})]})]}),l.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"New configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Copy the starter template to begin editing detectors, hooks, and manifests."})]}),l.jsxs("form",{onSubmit:Fe,className:"space-y-4",children:[l.jsx(bt,{label:"Configuration name",required:!0,children:l.jsx(ht,{value:v,onChange:ue=>w(ue.target.value),placeholder:"Membership normalization",disabled:d.isPending})}),Xn(d.isPending),Xe?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:Xe}):null,l.jsx(ke,{type:"submit",className:"w-full",disabled:!At,isLoading:d.isPending,children:"Create from template"})]}),l.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Import configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),l.jsxs("form",{onSubmit:vt,className:"mt-3 space-y-4",children:[l.jsx(bt,{label:"Configuration name",required:!0,children:l.jsx(ht,{value:j,onChange:ue=>k(ue.target.value),placeholder:"Imported configuration",disabled:h.isPending})}),l.jsxs(bt,{label:"Archive (.zip)",required:!0,children:[l.jsx(ht,{type:"file",ref:A,accept:".zip",onChange:Ae,disabled:h.isPending}),T?l.jsx("p",{className:"mt-1 text-xs text-slate-500","aria-live":"polite",children:T.name}):null]}),B?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:B}):null,l.jsx(ke,{type:"submit",className:"w-full",disabled:!Rt,isLoading:h.isPending,children:"Import archive"})]})]})]}),l.jsx(ur,{open:!!ie,position:ie?{x:ie.x,y:ie.y}:null,onClose:()=>me(null),items:Ne,appearance:"light"}),l.jsx(Ms,{open:!!at,title:M?.stage==="checking"?"Checking configuration":M?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:M?.stage==="checking"?"Running validation before activation.":M?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":J&&at?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${J.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:M?.stage==="issues"?"Open editor":M?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:Ee,onConfirm:()=>{if(!at){Ee();return}if(M?.stage==="issues"){Ee(),U(at.id);return}if(M?.stage==="error"){Ee();return}Re()},isConfirming:g.isPending,confirmDisabled:M?.stage==="checking"||g.isPending,children:M?.stage==="checking"?l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[l.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-slate-200 border-t-brand-600","aria-hidden":"true"}),l.jsx("span",{children:"Validating"})]}):M?.stage==="issues"?l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-slate-700",children:"Issues:"}),l.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:M.issues.map(ue=>l.jsxs("li",{className:"space-y-1",children:[l.jsx("p",{className:"font-semibold",children:ue.path}),l.jsx("p",{className:"text-slate-600",children:ue.message})]},`${ue.path}:${ue.message}`))})]}):M?.stage==="error"?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:M.message}):null}),l.jsx(Ms,{open:!!Ce,title:"Archive active configuration?",description:"This will leave the workspace with no active configuration. Extraction runs will be blocked until you make a draft active.",confirmLabel:"Archive",cancelLabel:"Cancel",tone:"danger",onCancel:Se,onConfirm:Qe,isConfirming:x.isPending,confirmDisabled:x.isPending,children:x.error?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:x.error instanceof Error?x.error.message:"Unable to archive configuration."}):null}),l.jsxs(Ms,{open:!!H,title:"Duplicate configuration",description:H?`Create a new draft based on ${H.display_name}.`:void 0,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:we,onConfirm:Pe,isConfirming:b.isPending,confirmDisabled:b.isPending||R.trim().length===0,children:[l.jsx(bt,{label:"New configuration name",required:!0,children:l.jsx(ht,{value:R,onChange:ue=>Z(ue.target.value),placeholder:"Copy of My Config",disabled:b.isPending})}),ge?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:ge}):null]})]})}function bh(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function KR({params:e}={}){const{workspace:n}=Na(),a=Ft(),{notifyToast:i}=Dm(),o=e?.configId,u=p.useMemo(()=>Mm(n.id),[n.id]),d=fw({workspaceId:n.id,configurationId:o}),h=Du({workspaceId:n.id}),g=d.data,x=g?.id??o??"",b=Zi(g?.status),v=b==="draft";p.useEffect(()=>{!o||!g||Rm(u,o)},[o,g,u]);const w=x?`/workspaces/${n.id}/config-builder/${encodeURIComponent(x)}`:"",C=p.useCallback(()=>{w&&a(`${w}/editor`)},[w,a]),N=p.useMemo(()=>{const R=h.data?.items??[];for(const Z of R)if(Zi(Z.status)==="active")return Z;return null},[h.data?.items]),j=p.useMemo(()=>{const R=h.data?.items??[];return new Set(R.map(Z=>Z.display_name.trim().toLowerCase()))},[h.data?.items]),[k,T]=p.useState(null),E=p.useCallback(R=>{R.preventDefault();const Z=R.currentTarget.getBoundingClientRect();T({x:Z.right+8,y:Z.bottom})},[]),[B,Q]=p.useState(!1),O=p.useCallback(async()=>{if(g){Q(!0);try{const R=await km(n.id,g.id),Z=R.filename??`${g.id}.zip`,ge=URL.createObjectURL(R.blob),De=document.createElement("a");De.href=ge,De.download=Z,De.click(),URL.revokeObjectURL(ge),i({title:`Exported ${Z}`,intent:"success",duration:4e3})}catch(R){const Z=R instanceof Error?R.message:"Unable to export configuration.";i({title:Z,intent:"danger",duration:6e3})}finally{Q(!1)}}},[g,i,n.id]),I=_m(n.id),A=hw(n.id),V=Am(n.id),[W,X]=p.useState(!1),[J,L]=p.useState(null);p.useEffect(()=>{if(!W||!g||!v)return;let R=!1;return L({stage:"checking"}),Em(n.id,g.id).then(Z=>{if(!R){if(Array.isArray(Z.issues)&&Z.issues.length>0){L({stage:"issues",issues:Z.issues});return}L({stage:"confirm"})}}).catch(Z=>{if(R)return;const ge=Z instanceof Error?Z.message:"Unable to validate configuration.";L({stage:"error",message:ge})}),()=>{R=!0}},[g,v,W,n.id]);const ae=p.useCallback(()=>{I.reset(),L({stage:"checking"}),X(!0)},[I]),[de,be]=p.useState(!1),[D,U]=p.useState(""),[ie,me]=p.useState(null),se=p.useCallback(()=>{g&&(V.reset(),me(null),U(zm(g.display_name,j)),be(!0))},[g,V,j]),[_,P]=p.useState(!1),le=p.useCallback(()=>{A.reset(),P(!0)},[A]),q=p.useMemo(()=>{const R=[{id:"export",label:B?"Exporting":"Export",onSelect:()=>void O(),disabled:B},{id:"duplicate",label:"Duplicate to edit",onSelect:se,dividerAbove:!0}];return b==="active"&&R.push({id:"archive",label:"Archive",onSelect:le,danger:!0,dividerAbove:!0}),R},[B,O,le,se,b]),ee=p.useCallback(()=>{if(!g)return;const R=D.trim();if(!R){me("Enter a name for the new draft configuration.");return}me(null),V.mutate({sourceConfigurationId:g.id,displayName:R},{onSuccess(Z){i({title:"Draft created.",intent:"success",duration:3500}),be(!1),a(`/workspaces/${n.id}/config-builder/${encodeURIComponent(Z.id)}/editor`)},onError(Z){me(Z instanceof Error?Z.message:"Unable to duplicate configuration.")}})},[g,V,D,a,i,n.id]),H=p.useCallback(()=>{g&&I.mutate({configurationId:g.id},{onSuccess(){i({title:"Configuration is now active.",intent:"success",duration:4e3}),X(!1),L(null)},onError(R){i({title:R instanceof Error?R.message:"Unable to make configuration active.",intent:"danger",duration:6e3})}})},[g,I,i]),K=p.useCallback(()=>{g&&A.mutate({configurationId:g.id},{onSuccess(){i({title:"Active configuration archived.",intent:"success",duration:4e3}),P(!1)},onError(R){i({title:R instanceof Error?R.message:"Unable to archive configuration.",intent:"danger",duration:6e3})}})},[A,g,i]);return o?d.isLoading?l.jsx(wt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details."}):d.isError?l.jsx(wt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page."}):g?l.jsxs("div",{className:"flex h-full flex-col gap-4 p-4",children:[l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Configuration"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:g.display_name}),l.jsx(Kc,{status:g.status})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[v?l.jsx(ke,{variant:"secondary",onClick:ae,children:"Make active"}):l.jsx(ke,{onClick:se,children:"Duplicate to edit"}),l.jsx(ke,{variant:"ghost",onClick:C,children:"Open editor"}),l.jsx(ke,{variant:"ghost",size:"sm",onClick:E,"aria-label":"More actions",children:""})]})]}),v?null:l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Read-only configuration"}),l.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Active and archived configurations cant be edited. Duplicate this configuration to create a draft you can change."}),l.jsx("div",{className:"mt-3",children:l.jsx(ke,{size:"sm",onClick:se,children:"Duplicate to edit"})})]}),l.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Config ID"}),l.jsx("dd",{className:"text-sm text-slate-700",children:g.id})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Status"}),l.jsx("dd",{className:"text-sm text-slate-700",children:Zi(g.status)})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Updated"}),l.jsx("dd",{className:"text-sm text-slate-700",children:cv(g.updated_at)})]}),g.activated_at?l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Activated"}),l.jsx("dd",{className:"text-sm text-slate-700",children:cv(g.activated_at)})]}):null]})]}),l.jsxs("section",{className:"flex-1 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-800",children:"Overview"}),l.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:"The refreshed config workbench will eventually surface manifest summaries, validation history, and deployment metrics here. For now this page offers a quick launch point into the editor while we rebuild the experience."})]}),l.jsx(ur,{open:!!k,position:k,onClose:()=>T(null),items:q,appearance:"light"}),l.jsx(Ms,{open:W,title:J?.stage==="checking"?"Checking configuration":J?.stage==="issues"?"Fix validation issues first":"Make configuration active?",description:J?.stage==="checking"?"Running validation before activation.":J?.stage==="issues"?"This configuration has validation issues and cant be activated yet.":N?`This becomes the workspaces live configuration for extraction runs. The current active configuration ${N.display_name} will be archived.`:"This becomes the workspaces live configuration for extraction runs.",confirmLabel:J?.stage==="issues"?"Open editor":J?.stage==="error"?"Close":"Make active",cancelLabel:"Cancel",onCancel:()=>{X(!1),L(null)},onConfirm:()=>{if(J?.stage==="issues"){X(!1),C();return}if(J?.stage==="error"){X(!1),L(null);return}H()},isConfirming:I.isPending,confirmDisabled:J?.stage==="checking"||I.isPending,children:J?.stage==="checking"?l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600",children:[l.jsx("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-slate-200 border-t-brand-600","aria-hidden":"true"}),l.jsx("span",{children:"Validating"})]}):J?.stage==="issues"?l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-slate-700",children:"Issues:"}),l.jsx("ul",{className:"max-h-56 space-y-2 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:J.issues.map(R=>l.jsxs("li",{className:"space-y-1",children:[l.jsx("p",{className:"font-semibold",children:R.path}),l.jsx("p",{className:"text-slate-600",children:R.message})]},`${R.path}:${R.message}`))})]}):J?.stage==="error"?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:J.message}):null}),l.jsx(Ms,{open:_,title:"Archive active configuration?",description:"This will leave the workspace with no active configuration. Extraction runs will be blocked until you make a draft active.",confirmLabel:"Archive",cancelLabel:"Cancel",tone:"danger",onCancel:()=>P(!1),onConfirm:K,isConfirming:A.isPending,confirmDisabled:A.isPending,children:A.error?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:A.error instanceof Error?A.error.message:"Unable to archive configuration."}):null}),l.jsxs(Ms,{open:de,title:"Duplicate configuration",description:`Create a new draft based on ${g.display_name}.`,confirmLabel:"Create draft",cancelLabel:"Cancel",onCancel:()=>be(!1),onConfirm:ee,isConfirming:V.isPending,confirmDisabled:V.isPending||D.trim().length===0,children:[l.jsx(bt,{label:"New configuration name",required:!0,children:l.jsx(ht,{value:D,onChange:R=>U(R.target.value),placeholder:"Copy of My Config",disabled:V.isPending})}),ie?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:ie}):null]})]}):l.jsx(wt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."}):l.jsx(wt,{variant:"error",title:"Configuration not found",description:"Pick a configuration from the list to view its details."})}function cv(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function GR({params:e}={}){const{workspace:n}=Na(),{session:a,windowState:i,openSession:o,closeSession:u,minimizeWindow:d,maximizeWindow:h,restoreWindow:g,shouldBypassUnsavedGuard:x}=Nw(),b=e?.configId,v=fw({workspaceId:n.id,configurationId:b});if(p.useEffect(()=>{b||u()},[b,u]),p.useEffect(()=>{if(!b||v.isError)return;const k=v.data?.display_name??b;o({workspaceId:n.id,configId:b,configName:`${n.name}  ${k}`})},[b,v.data?.display_name,v.isError,n.id,n.name,o]),p.useEffect(()=>{b&&(v.isError||v.isSuccess&&!v.data)&&u()},[u,b,v.data,v.isError,v.isSuccess]),!b)return l.jsx(wt,{variant:"error",title:"Select a configuration",description:"Choose a configuration from the list to open the workbench."});if(v.isLoading)return l.jsx(wt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details before opening the workbench."});if(v.isError)return l.jsx(wt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page or pick a different configuration."});if(!v.data)return l.jsx(wt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."});const w=a&&a.configId===b?a:null,C=!!(w&&i==="minimized"),N=!!(w&&i==="restored"),j=!!(w&&i==="maximized");return N&&w?l.jsx("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:l.jsx(Sw,{workspaceId:n.id,configId:w.configId,configName:w.configName,configDisplayName:v.data.display_name??w.configId,windowState:"restored",onMinimizeWindow:d,onMaximizeWindow:h,onRestoreWindow:g,onCloseWorkbench:u,shouldBypassUnsavedGuard:x})}):j?l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(wt,{variant:"empty",title:"Immersive focus active",description:"Exit immersive mode from the workbench focus menu to return here."})}):C?l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(wt,{variant:"empty",title:"Workbench docked",description:"Use the dock at the bottom of the screen to resume editing."})}):l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(wt,{variant:"loading",title:"Launching config workbench",description:"If the editor does not appear, refresh the page."})})}function YR({workspaceName:e,navGroups:n,activeSectionId:a,activeSectionLabel:i,activeSectionDescription:o,activeGroupLabel:u,children:d}){const g=n.flatMap(N=>N.items).find(N=>N.id===a)?.tone??"default",[x,b]=p.useState(""),v=x.trim().toLowerCase(),w=p.useMemo(()=>v?n.map(N=>({...N,items:N.items.filter(j=>`${j.label} ${j.description}`.toLowerCase().includes(v))})).filter(N=>N.items.length>0):n,[n,v]),C=p.useMemo(()=>["Settings",u,i].filter(Boolean),[u,i]);return l.jsxs("div",{className:"space-y-6",children:[l.jsx("header",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-soft",children:l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold uppercase tracking-[0.28em] text-slate-400",children:[l.jsx("span",{children:"Workspace"}),l.jsx("span",{"aria-hidden":!0,children:""}),l.jsx("span",{children:"Settings"})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:e}),l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:"Settings"})]}),l.jsx("div",{className:"flex flex-wrap items-center gap-2 text-sm text-slate-600",children:C.map((N,j)=>l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx("span",{className:j===C.length-1?"font-semibold text-slate-900":"text-slate-600",children:N}),j<C.length-1?l.jsx("span",{"aria-hidden":!0,className:"text-slate-400",children:"/"}):null]},N))}),o?l.jsx("p",{className:"max-w-3xl text-sm text-slate-600",children:o}):null]}),l.jsxs("div",{className:"w-full max-w-xs",children:[l.jsx(ht,{value:x,onChange:N=>b(N.target.value),placeholder:"Search settings","aria-label":"Search workspace settings"}),l.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:"Filter sections by name or description."})]})]})}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[280px,1fr]",children:[l.jsx("nav",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-soft","aria-label":"Workspace settings sections",children:l.jsx("div",{className:"space-y-4",children:w.length===0?l.jsxs("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:['No sections match "',x,'".']}):w.map(N=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"px-1 text-[0.65rem] font-semibold uppercase tracking-[0.3em] text-slate-400",children:N.label}),l.jsx("ul",{className:"space-y-1",children:N.items.map(j=>{const k=j.id===a,T=j.tone==="danger"?{active:"bg-danger-50 text-danger-700 ring-danger-100",idle:"hover:bg-danger-50/60 text-danger-700",badgeActive:"bg-danger-500 text-white",badgeIdle:"bg-danger-100 text-danger-700 group-hover:bg-danger-200"}:{active:"bg-brand-50 text-brand-700 ring-brand-100",idle:"hover:bg-slate-50 text-slate-700",badgeActive:"bg-brand-500 text-white",badgeIdle:"bg-slate-100 text-slate-500 group-hover:bg-slate-200"},E=pe("group flex w-full items-start gap-3 rounded-xl px-3 py-2.5 text-left transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2",k?T.active:T.idle,j.disabled&&"cursor-not-allowed opacity-50 ring-0 hover:bg-white");return j.disabled?l.jsx("li",{className:"w-full",children:l.jsx("div",{className:E,"aria-disabled":!0,children:l.jsxs("div",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"text-sm font-semibold",children:j.label}),l.jsx("span",{className:"text-xs text-slate-500",children:j.description})]})})},j.id):l.jsx("li",{className:"w-full",children:l.jsxs(Ew,{to:j.href,className:E,children:[l.jsxs("div",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"text-sm font-semibold",children:j.label}),l.jsx("span",{className:"text-xs text-slate-500",children:j.description})]}),l.jsx("span",{"aria-hidden":!0,className:pe("ml-auto inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] font-bold transition",k?T.badgeActive:T.badgeIdle),children:j.label.slice(0,1).toUpperCase()})]})},j.id)})})]},N.id))})}),l.jsx("div",{className:pe("space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-soft",g==="danger"&&"border-danger-100 bg-danger-50/40"),children:d})]})]})}const zw=p.createContext(null);function XR({value:e,children:n}){return l.jsx(zw.Provider,{value:e,children:n})}function Ow(){const e=p.useContext(zw);if(!e)throw new Error("useSettingsSection must be used within a SettingsSectionProvider");return e}function Mu({title:e,description:n,actions:a}){return l.jsxs("header",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:e}),n?l.jsx("p",{className:"text-sm text-slate-600",children:n}):null]}),a?l.jsx("div",{className:"flex items-center gap-2",children:a}):null]})}function JR(){const{workspace:e,hasPermission:n}=Na(),a=Ft(),i=ct(),[o,u]=p.useState(!1),[d,h]=p.useState(""),[g,x]=p.useState(null),b=Vt({mutationFn:()=>eC(e.id),onSuccess:()=>{i.invalidateQueries({queryKey:Kt.all()}),a("/workspaces",{replace:!0})},onError:C=>{x(C instanceof Error?C.message:"Unable to delete workspace.")}}),v=n("workspace.delete")||n("workspace.settings.manage"),w=p.useMemo(()=>{const C=d.trim().toLowerCase();return C.length>0&&(C===e.slug.toLowerCase()||C===e.name.toLowerCase())},[d,e.name,e.slug]);return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Mu,{title:"Danger zone",description:"Delete this workspace when it is no longer needed."}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Delete workspace"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Permanently remove this workspace and all associated data. This action cannot be undone."})]}),l.jsx(ke,{type:"button",variant:"danger",onClick:()=>u(!0),disabled:!v||b.isPending,isLoading:b.isPending,children:"Delete workspace"})]}),v?null:l.jsx(lt,{tone:"warning",className:"mt-3",children:"You need additional permissions to delete this workspace."}),g?l.jsx(lt,{tone:"danger",className:"mt-3",children:g}):null,l.jsx("p",{className:"mt-3 text-sm text-amber-700",children:"All workspace configurations, documents, runs, and history will be removed."})]}),l.jsxs("div",{className:"rounded-2xl border border-amber-100 bg-amber-50 p-4 text-sm text-amber-800",children:[l.jsx("p",{className:"font-semibold",children:"Looking for ADE safe mode?"}),l.jsx("p",{className:"mt-1",children:"Safe mode is a system-wide control. Manage it from the system settings area instead of workspace settings."})]}),l.jsxs(Ms,{open:o,title:"Delete this workspace?",description:"Type the workspace slug to confirm. This cannot be undone.",confirmLabel:"Delete workspace",tone:"danger",onCancel:()=>{u(!1),h(""),x(null)},onConfirm:()=>{w&&(x(null),b.mutate())},isConfirming:b.isPending,confirmDisabled:!w,children:[l.jsx(bt,{label:"Workspace slug",required:!0,children:l.jsx(ht,{value:d,onChange:C=>h(C.target.value),placeholder:e.slug,disabled:b.isPending})}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Enter ",l.jsx("strong",{children:e.slug})," to confirm deletion."]})]})]})}function Lw({when:e,title:n="Discard unsaved changes?",description:a="You have unsaved changes. If you leave now, your edits will be lost.",confirmLabel:i="Leave without saving",cancelLabel:o="Stay on page"}){const u=Ft(),[d,h]=p.useState(null),[g,x]=p.useState(!1),b=p.useRef(!1);p.useEffect(()=>{if(!e){x(!1),h(null);return}const C=N=>{N.preventDefault(),N.returnValue=""};return window.addEventListener("beforeunload",C),()=>window.removeEventListener("beforeunload",C)},[e]),hv(C=>e?b.current?(b.current=!1,!0):(h(C),x(!0),!1):!0,e);const v=()=>{if(!d)return;b.current=!0;const C=d.kind==="replace"||d.kind==="pop";u(d.to,{replace:C}),x(!1),h(null),setTimeout(()=>{b.current=!1},0)},w=()=>{x(!1),h(null)};return l.jsx(Ms,{open:g&&e,title:n,description:a,confirmLabel:i,cancelLabel:o,tone:"danger",onConfirm:v,onCancel:w})}Lw.displayName="UnsavedChangesPrompt";function e4({isDirty:e,isSaving:n,onCancel:a,onSave:i,saveLabel:o="Save changes",cancelLabel:u="Discard",children:d}){return!e&&!d?null:l.jsx("div",{className:"sticky bottom-0 left-0 right-0 mt-4 rounded-b-2xl border border-t bg-white/95 p-4 shadow-[0_-8px_20px_-12px_rgba(15,23,42,0.25)] backdrop-blur",children:l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsx("div",{className:"text-sm text-slate-600",children:d}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a?l.jsx(ke,{type:"button",variant:"ghost",onClick:a,disabled:n||!e,children:u}):null,l.jsx(ke,{type:"button",onClick:i,isLoading:n,disabled:!e||n,children:o})]})]})})}const t4=Nu({name:Fs().min(1,"Workspace name is required.").max(255,"Keep the name under 255 characters."),slug:Fs().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.")});function n4(){const{workspace:e}=Na(),n=mC(e.id),a=Qv(),[i,o]=p.useState(null),{register:u,handleSubmit:d,formState:{errors:h,isDirty:g},reset:x}=ky({resolver:_y(t4),defaultValues:{name:e.name,slug:e.slug}});p.useEffect(()=>{x({name:e.name,slug:e.slug})},[x,e.name,e.slug]);const b=d(C=>{o(null),n.mutate({name:C.name.trim(),slug:C.slug.trim()},{onSuccess:()=>{o({tone:"success",message:"Workspace details saved."})},onError:N=>{const j=N instanceof Error?N.message:"Unable to save workspace details.";o({tone:"danger",message:j})}})}),v=e.is_default,w=a.isPending;return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Lw,{when:g&&!n.isPending}),l.jsx(Mu,{title:"General",description:"Manage the workspace identity and your default workspace preference."}),i?l.jsx(lt,{tone:i.tone,children:i.message}):null,l.jsxs("form",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-soft",onSubmit:b,noValidate:!0,children:[l.jsxs("div",{className:"space-y-6 p-6",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Workspace identity"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Update the name and slug. Changes apply immediately across navigation and shared links."})]}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsx(bt,{label:"Workspace name",required:!0,error:h.name?.message,children:l.jsx(ht,{...u("name"),placeholder:"Finance Operations",invalid:!!h.name,disabled:n.isPending})}),l.jsx(bt,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier.",required:!0,error:h.slug?.message,children:l.jsx(ht,{...u("slug"),placeholder:"finance-ops",invalid:!!h.slug,disabled:n.isPending})})]}),n.isError?l.jsx(lt,{tone:"danger",children:n.error instanceof Error?n.error.message:"Unable to save workspace details."}):null]}),l.jsx(e4,{isDirty:g,isSaving:n.isPending,onCancel:()=>{x(),o(null)},onSave:b,children:"Changes apply to everyone who can access this workspace."})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Default workspace"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Choose the workspace you land on first after signing in. This only affects your account."})]}),l.jsx(ke,{type:"button",variant:v?"secondary":"primary",onClick:()=>{o(null),a.mutate(e.id,{onSuccess:()=>o({tone:"success",message:"Workspace set as your default."}),onError:C=>{const N=C instanceof Error?C.message:"Unable to set the default workspace right now.";o({tone:"danger",message:N})}})},disabled:v||w,isLoading:w,children:v?"Default workspace":"Make default"})]}),l.jsx("p",{className:"mt-3 text-sm text-slate-600",children:v?"This workspace is already your default.":"You can switch the default workspace at any time."})]})]})}function Om({open:e,title:n,description:a,onClose:i,children:o,footer:u,widthClassName:d="w-full max-w-xl"}){const h=p.useRef(null);return p.useEffect(()=>{if(!e)return;const g=b=>{if(b.key==="Escape"&&i(),b.key==="Tab"){const v=h.current;if(!v)return;const w=Array.from(v.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(j=>!j.hasAttribute("disabled"));if(w.length===0)return;const C=w.indexOf(document.activeElement),N=b.shiftKey?C<=0?w.length-1:C-1:C===w.length-1?0:C+1;w[N]?.focus(),b.preventDefault()}};return window.addEventListener("keydown",g),h.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus(),()=>window.removeEventListener("keydown",g)},[i,e]),e?ps.createPortal(l.jsxs("div",{className:"fixed inset-0 z-40",children:[l.jsx("button",{type:"button",className:"absolute inset-0 bg-slate-900/50",onClick:i,"aria-label":"Close drawer"}),l.jsxs("div",{ref:h,role:"dialog","aria-modal":"true","aria-label":n,className:pe("absolute inset-y-0 right-0 flex h-full flex-col bg-white shadow-2xl transition",d),children:[l.jsxs("div",{className:"flex items-start justify-between gap-4 border-b border-slate-200 px-5 py-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Details"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:n}),a?l.jsx("p",{className:"text-sm text-slate-600",children:a}):null]}),l.jsx("button",{type:"button",onClick:i,className:"rounded-full border border-slate-200 bg-white p-2 text-slate-500 transition hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2","aria-label":"Close drawer",children:l.jsx(s4,{})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:o}),u?l.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:u}):null]})]}),document.body):null}function s4(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}const Zh=bo,Ru={page:1,pageSize:Zh,includeTotal:!0};function a4(e){const n=Kh({queryKey:Kt.members(e,Ru),initialPageParam:1,queryFn:({pageParam:u,signal:d})=>tC(e,{page:typeof u=="number"?u:1,pageSize:Zh,includeTotal:u===1,signal:d}),getNextPageParam:u=>u.has_next?u.page+1:void 0,enabled:e.length>0,staleTime:15e3,placeholderData:u=>u}),a=n.data?.pages??[],i=em(a,u=>u.user_id),o=a[0]?.total??a[a.length-1]?.total??void 0;return{...n,members:i,total:o,pageSize:Zh}}function r4(e){const n=ct(),a=Kt.members(e,Ru);return Vt({mutationFn:async({user:i,roleIds:o})=>{const u={user_id:i.id,role_ids:Array.from(o)};return nC(e,u)},onSuccess:()=>{n.invalidateQueries({queryKey:a})}})}function i4(e){const n=ct(),a=Kt.members(e,Ru);return Vt({mutationFn:({userId:i,roleIds:o})=>sC(e,i,{role_ids:Array.from(o)}),onSuccess:()=>{n.invalidateQueries({queryKey:a})}})}function l4(e){const n=ct(),a=Kt.members(e,Ru);return Vt({mutationFn:i=>aC(e,i),onSuccess:()=>{n.invalidateQueries({queryKey:a})}})}const Lm=bo,o4=bo,zu={page:1,pageSize:Lm,includeTotal:!0},c4={scope:"workspace",page:1,pageSize:o4,includeTotal:!1};function Uw(e){return On({queryKey:Kt.roles(e,zu),queryFn:({signal:n})=>qv(a=>rC({page:a,pageSize:Lm,includeTotal:a===1,signal:n})),enabled:e.length>0,staleTime:15e3,placeholderData:n=>n})}function u4(e="workspace"){const n={...c4,scope:e};return On({queryKey:Kt.permissions(n),queryFn:({signal:a})=>qv(i=>cC({scope:e,page:i,pageSize:n.pageSize,includeTotal:i===1,signal:a})),staleTime:6e4,placeholderData:a=>a})}function d4(e){const n=ct(),a=Kt.roles(e,zu);return Vt({mutationFn:i=>iC(e,i),onSuccess:i=>{n.setQueryData(a,o=>m4(o,i))},onSettled:()=>{n.invalidateQueries({queryKey:a})}})}function f4(e){const n=ct(),a=Kt.roles(e,zu);return Vt({mutationFn:({roleId:i,payload:o})=>lC(e,i,o),onSuccess:i=>{n.setQueryData(a,o=>o&&{...o,items:o.items.map(u=>u.id===i.id?i:u)})},onSettled:()=>{n.invalidateQueries({queryKey:a})}})}function h4(e){const n=ct(),a=Kt.roles(e,zu);return Vt({mutationFn:i=>oC(e,i),onSuccess:(i,o)=>{n.setQueryData(a,u=>{if(!u)return u;const d=u.items.filter(h=>h.id!==o);return{...u,items:d,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}})},onSettled:()=>{n.invalidateQueries({queryKey:a})}})}function m4(e,n){return e?{...e,items:[n,...e.items],total:typeof e.total=="number"?e.total+1:e.total,has_next:!1,has_previous:!1}:{items:[n],page:1,page_size:Lm,has_next:!1,has_previous:!1,total:1}}const p4={sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function g4(e,n){if(e&&e.trim().length>0){const a=e.trim().split(/\s+/u),i=a[0]?.[0],o=a[a.length-1]?.[0];if(i)return`${i}${o??""}`.toUpperCase()}return n&&n.trim().length>0?n.trim()[0]?.toUpperCase():"?"}function Bw({name:e,email:n,size:a="md",className:i}){const o=p.useMemo(()=>g4(e,n),[e,n]);return l.jsx("span",{"aria-hidden":"true",className:pe("inline-flex select-none items-center justify-center rounded-full bg-gradient-to-br from-brand-100 via-brand-200 to-brand-300 font-semibold text-brand-900 shadow-sm",p4[a],i),children:o})}function x4(){const{workspace:e,hasPermission:n}=Na(),{params:a}=Ow(),i=Ft(),o=qn(),u=n("workspace.members.manage"),d=a4(e.id),h=Uw(e.id),g=r4(e.id),x=i4(e.id),b=l4(e.id),[v,w]=p.useState(""),[C,N]=p.useState(null),j=p.useMemo(()=>{const se=d.members,_=new Intl.Collator("en",{sensitivity:"base"});return[...se].sort((P,le)=>{const q=P.user?.display_name??P.user?.email??P.user_id,ee=le.user?.display_name??le.user?.email??le.user_id;return _.compare(q??"",ee??"")})},[d.members]),k=p.useMemo(()=>new Set(j.map(se=>se.user_id)),[j]),T=d.total??j.length,E=v.trim().toLowerCase(),B=p.useMemo(()=>E?j.filter(se=>{const _=se.user?.display_name??"",P=se.user?.email??"";return _.toLowerCase().includes(E)||P.toLowerCase().includes(E)||se.user_id.toLowerCase().includes(E)}):j,[j,E]),Q=!!d.hasNextPage,O=d.isLoading,I=d.isFetchingNextPage,A=p.useMemo(()=>{const se=new Intl.Collator("en",{sensitivity:"base"});return(h.data?.items??[]).slice().sort((_,P)=>se.compare(_.name,P.name))},[h.data]),V=a[0],W=V==="new",X=V&&V!=="new"?decodeURIComponent(V):null,J=j.find(se=>se.user_id===X),L=`/workspaces/${e.id}/settings/access/members`,ae=`${o.search}${o.hash}`,de=()=>i(`${L}${ae}`,{replace:!0}),be=()=>i(`${L}/new${ae}`),D=se=>i(`${L}/${encodeURIComponent(se)}${ae}`),U=async({user:se,roleIds:_})=>{N(null),await g.mutateAsync({user:se,roleIds:_}),N({tone:"success",message:`${se.display_name??se.email} added to the workspace.`}),de()},ie=async(se,_)=>{N(null),await x.mutateAsync({userId:se,roleIds:_}),N({tone:"success",message:"Member roles updated."}),de()},me=async se=>{N(null),await b.mutateAsync(se.user_id),N({tone:"success",message:"Member removed."}),de()};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Mu,{title:"Members",description:"Add members, adjust workspace roles, or remove access.",actions:l.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:[T," member",T===1?"":"s"]})}),C?l.jsx(lt,{tone:C.tone,children:C.message}):null,d.isError?l.jsx(lt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace members."}):null,h.isError?l.jsx(lt,{tone:"warning",children:h.error instanceof Error?h.error.message:"Unable to load workspace roles."}):null,l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Workspace members"}),l.jsx("p",{className:"text-sm text-slate-500",children:O?"Loading members":`${T} member${T===1?"":"s"} total`})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx(bt,{label:"Search members",className:"w-full max-w-xs",children:l.jsx(ht,{value:v,onChange:se=>w(se.target.value),placeholder:"Search by name, email, or ID",disabled:O})}),u?l.jsx(ke,{type:"button",onClick:be,children:"Add member"}):null]})]}),O?l.jsx("p",{className:"text-sm text-slate-600",children:"Loading members"}):B.length===0?l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:v?`No members match "${v}".`:"No members yet. Add teammates to collaborate."}):l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Member"}),l.jsx("th",{className:"px-4 py-3",children:"Roles"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:B.map(se=>{const _=se.role_ids.map(le=>A.find(q=>q.id===le)?.name??le).sort((le,q)=>le.localeCompare(q)),P=se.user?.display_name??se.user?.email??se.user_id;return l.jsxs("tr",{className:"text-sm text-slate-700",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Bw,{name:se.user?.display_name,email:se.user?.email,size:"sm"}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate font-semibold text-slate-900",children:P}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:se.user?.email??se.user_id})]})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:_.length===0?l.jsx("span",{className:"text-xs text-slate-500",children:"No roles assigned."}):_.map(le=>l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:le},`${se.user_id}-${le}`))})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx(ke,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(se.user_id),disabled:!u,children:"Manage"})})]},se.user_id)})})]})}),Q?l.jsx("div",{className:"pt-4",children:l.jsx(ke,{type:"button",variant:"ghost",onClick:()=>d.fetchNextPage(),disabled:I,children:I?"Loading more members":"Load more members"})}):null,u?null:l.jsx(lt,{tone:"info",children:"You do not have permission to manage workspace members."})]}),l.jsx(b4,{open:W&&u,onClose:de,availableRoles:A,memberIds:k,isSubmitting:g.isPending,onAdd:U}),l.jsx(v4,{open:!!X&&u,member:J,availableRoles:A,onClose:de,onSaveRoles:se=>ie(X??"",se),onRemove:()=>J?me(J):Promise.resolve(),isSaving:x.isPending,isRemoving:b.isPending})]})}function b4({open:e,onClose:n,availableRoles:a,memberIds:i,isSubmitting:o,onAdd:u}){const[d,h]=p.useState(""),[g,x]=p.useState([]),[b,v]=p.useState(""),[w,C]=p.useState(""),[N,j]=p.useState(null);p.useEffect(()=>{const A=window.setTimeout(()=>C(b.trim()),250);return()=>window.clearTimeout(A)},[b]),p.useEffect(()=>{e||(h(""),x([]),v(""),j(null))},[e]);const k=Ay({enabled:e,search:w,pageSize:50}),T=p.useMemo(()=>{const A=new Intl.Collator("en",{sensitivity:"base"});return k.users.filter(V=>!i.has(V.id)).sort((V,W)=>{const X=V.display_name??V.email,J=W.display_name??W.email;return A.compare(X??"",J??"")})},[i,k.users]),E=p.useMemo(()=>T.find(A=>A.id===d),[T,d]),B=!!d&&g.length>0&&!o,Q=b.trim().length>0&&b.trim().length<2,O=k.isPending&&k.users.length===0,I=async A=>{A.preventDefault(),j(null);const V=T.find(W=>W.id===d);if(!V){j("Select a user to add.");return}if(g.length===0){j("Select at least one role for this member.");return}try{await u({user:V,roleIds:g}),h(""),v(""),x([])}catch(W){const X=W instanceof Error?W.message:"Unable to add member.";j(X)}};return l.jsx(Om,{open:e,onClose:n,title:"Add member",description:"Add an existing user and choose their workspace roles.",children:l.jsxs("form",{className:"space-y-4",onSubmit:I,children:[N?l.jsx(lt,{tone:"danger",children:N}):null,k.isError?l.jsx(lt,{tone:"warning",children:k.error instanceof Error?k.error.message:"Unable to load the user directory."}):null,l.jsxs(bt,{label:"Search directory",hint:"Enter at least two characters to search by name or email.",children:[l.jsx(ht,{value:b,onChange:A=>v(A.target.value),placeholder:"Search users",disabled:o||O}),Q?l.jsx("p",{className:"text-xs text-slate-500",children:"Enter at least two characters to search the full directory."}):null]}),l.jsxs(bt,{label:"User",required:!0,children:[l.jsxs(Vi,{value:d,onChange:A=>{h(A.target.value),A.target.value&&v("")},disabled:o||O,required:!0,children:[l.jsx("option",{value:"",children:"Select a user"}),E&&!T.some(A=>A.id===E.id)?l.jsx("option",{value:E.id,children:E.display_name?`${E.display_name} (${E.email})`:E.email}):null,T.map(A=>l.jsx("option",{value:A.id,children:A.display_name?`${A.display_name} (${A.email})`:A.email},A.id))]}),T.length===0&&b?l.jsxs("p",{className:"text-xs text-slate-500",children:['No users matched "',b,'".']}):null]}),l.jsxs("fieldset",{className:"space-y-2",children:[l.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Roles"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Assign at least one role to grant access."}),l.jsx("div",{className:"flex flex-wrap gap-2",children:a.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No workspace roles available yet."}):a.map(A=>l.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:g.includes(A.id),onChange:V=>x(W=>V.target.checked?[...W,A.id]:W.filter(X=>X!==A.id)),disabled:o}),l.jsx("span",{children:A.name})]},A.id))}),g.length>0?l.jsxs("p",{className:"text-xs text-slate-500",children:[g.length," role(s) selected."]}):null]}),k.hasNextPage?l.jsx("div",{className:"pt-2",children:l.jsx(ke,{type:"button",variant:"ghost",onClick:()=>k.fetchNextPage(),disabled:k.isFetchingNextPage,children:k.isFetchingNextPage?"Loading more users":"Load more users"})}):null,l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(ke,{type:"button",variant:"ghost",onClick:n,disabled:o,children:"Cancel"}),l.jsx(ke,{type:"submit",isLoading:o,disabled:!B,children:"Add member"})]})]})})}function v4({open:e,member:n,availableRoles:a,onClose:i,onSaveRoles:o,onRemove:u,isSaving:d,isRemoving:h}){const[g,x]=p.useState([]),[b,v]=p.useState(null),[w,C]=p.useState(!1);p.useEffect(()=>{if(!e||!n){x([]),v(null),C(!1);return}x(n.role_ids),v(null),C(!1)},[n,e]);const N=async()=>{if(n){v(null);try{await o(g)}catch(T){const E=T instanceof Error?T.message:"Unable to save member roles.";v(E)}}},j=async()=>{if(n){v(null);try{await u()}catch(T){const E=T instanceof Error?T.message:"Unable to remove member.";v(E)}finally{C(!1)}}},k=n?n.user?.display_name??n.user?.email??n.user_id:"Member details";return l.jsxs(l.Fragment,{children:[l.jsxs(Om,{open:e,onClose:i,title:k,description:n?"Update roles or remove this member from the workspace.":void 0,children:[n?l.jsxs("div",{className:"space-y-4",children:[b?l.jsx(lt,{tone:"danger",children:b}):null,l.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[l.jsx(Bw,{name:n.user?.display_name,email:n.user?.email,size:"md"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:n.user?.display_name??n.user?.email??n.user_id}),l.jsx("p",{className:"text-sm text-slate-500",children:n.user?.email??"No email available"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["User ID: ",n.user_id]})]})]}),l.jsxs("fieldset",{className:"space-y-3",children:[l.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Roles"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Select the roles this member should have inside the workspace."}),l.jsx("div",{className:"flex flex-wrap gap-2",children:a.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No workspace roles available."}):a.map(T=>l.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:g.includes(T.id),onChange:E=>x(B=>E.target.checked?Array.from(new Set([...B,T.id])):B.filter(Q=>Q!==T.id)),disabled:d}),l.jsx("span",{children:T.name})]},T.id))}),g.length>0?l.jsxs("p",{className:"text-xs text-slate-500",children:[g.length," role(s) selected."]}):null]})]}):l.jsx(lt,{tone:"warning",children:"This member could not be found."}),l.jsxs("div",{className:"mt-6 flex items-center justify-between gap-2",children:[l.jsx(ke,{type:"button",variant:"ghost",onClick:i,disabled:d||h,children:"Close"}),l.jsxs("div",{className:"flex items-center gap-2",children:[n?l.jsx(ke,{type:"button",variant:"danger",onClick:()=>C(!0),disabled:h,isLoading:h,children:"Remove"}):null,l.jsx(ke,{type:"button",onClick:N,isLoading:d,disabled:!n||d,children:"Save changes"})]})]})]}),l.jsx(Ms,{open:w,title:"Remove member?",description:n?`Remove ${n.user?.display_name??n.user?.email??n.user_id} from this workspace.`:"",confirmLabel:"Remove member",tone:"danger",onCancel:()=>C(!1),onConfirm:j,isConfirming:h})]})}function y4(){const{workspace:e,hasPermission:n}=Na(),{params:a}=Ow(),i=Ft(),o=qn(),u=n("workspace.roles.manage"),d=Uw(e.id),h=u4(),g=d4(e.id),x=f4(e.id),b=h4(e.id),[v,w]=p.useState(""),[C,N]=p.useState(null),j=p.useMemo(()=>(h.data?.items??[]).filter(D=>D.scope_type==="workspace"),[h.data]),k=p.useMemo(()=>{const D=new Intl.Collator("en",{sensitivity:"base"});return(d.data?.items??[]).slice().sort((U,ie)=>D.compare(U.name,ie.name))},[d.data]),T=d.data?.total??k.length,E=v.trim().toLowerCase(),B=p.useMemo(()=>E?k.filter(D=>`${D.name} ${D.slug??""}`.toLowerCase().includes(E)):k,[E,k]),Q=a[0],O=Q==="new",I=Q&&Q!=="new"?decodeURIComponent(Q):null,A=k.find(D=>D.id===I),V=`/workspaces/${e.id}/settings/access/roles`,W=`${o.search}${o.hash}`,X=()=>i(`${V}${W}`,{replace:!0}),J=()=>i(`${V}/new${W}`),L=D=>i(`${V}/${encodeURIComponent(D)}${W}`),ae=async D=>{N(null),await g.mutateAsync({name:D.name.trim(),slug:D.slug.trim()||void 0,description:D.description.trim()||void 0,permissions:D.permissions}),N({tone:"success",message:"Role created."}),X()},de=async(D,U)=>{N(null),await x.mutateAsync({roleId:D,payload:{name:U.name.trim(),description:U.description.trim()||void 0,permissions:U.permissions}}),N({tone:"success",message:"Role updated."}),X()},be=async D=>{N(null),await b.mutateAsync(D.id),N({tone:"success",message:`Deleted role "${D.name}".`}),X()};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Mu,{title:"Roles",description:"Workspace roles group permissions so you can safely delegate access.",actions:l.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:[T," role",T===1?"":"s"]})}),C?l.jsx(lt,{tone:C.tone,children:C.message}):null,d.isError?l.jsx(lt,{tone:"danger",children:d.error instanceof Error?d.error.message:"Unable to load workspace roles."}):null,h.isError?l.jsx(lt,{tone:"warning",children:h.error instanceof Error?h.error.message:"Unable to load permission catalog."}):null,l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Workspace roles"}),l.jsx("p",{className:"text-sm text-slate-500",children:d.isLoading?"Loading roles":`${T} role${T===1?"":"s"} total`})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[l.jsx(bt,{label:"Search roles",className:"w-full max-w-xs",children:l.jsx(ht,{value:v,onChange:D=>w(D.target.value),placeholder:"Search by name or slug",disabled:d.isLoading})}),u?l.jsx(ke,{type:"button",onClick:J,children:"New role"}):null]})]}),d.isLoading?l.jsx("p",{className:"text-sm text-slate-600",children:"Loading roles"}):B.length===0?l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:v?`No roles match "${v}".`:"No workspace roles yet. Create one to tailor permissions."}):l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[l.jsx("thead",{className:"bg-slate-50",children:l.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("th",{className:"px-4 py-3",children:"Role"}),l.jsx("th",{className:"px-4 py-3",children:"Slug"}),l.jsx("th",{className:"px-4 py-3",children:"Permissions"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:B.map(D=>l.jsxs("tr",{className:"text-sm text-slate-700",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-semibold text-slate-900",children:D.name}),D.is_system?l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-200 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"System"}):null,D.is_editable?null:l.jsx("span",{className:"inline-flex items-center rounded-full bg-warning-100 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-warning-700",children:"Locked"})]})}),l.jsx("td",{className:"px-4 py-3 text-slate-600",children:D.slug}),l.jsxs("td",{className:"px-4 py-3 text-slate-600",children:[D.permissions.length," permission",D.permissions.length===1?"":"s"]}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsx(ke,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(D.id),disabled:!u,children:"Manage"})})]},D.id))})]})}),u?null:l.jsx(lt,{tone:"info",children:"You do not have permission to manage workspace roles."})]}),l.jsx(uv,{open:O&&u,mode:"create",permissions:j,onClose:X,onSave:D=>ae(D),isSaving:g.isPending,isDeleting:!1}),l.jsx(uv,{open:!!I&&u,mode:"edit",role:A,permissions:j,onClose:X,onSave:D=>I?de(I,D):Promise.resolve(),onDelete:A?()=>be(A):void 0,isSaving:x.isPending,isDeleting:b.isPending})]})}function uv({open:e,mode:n,role:a,permissions:i,onClose:o,onSave:u,onDelete:d,isSaving:h,isDeleting:g}){const[x,b]=p.useState({name:"",slug:"",description:"",permissions:[]}),[v,w]=p.useState(""),[C,N]=p.useState(null),[j,k]=p.useState(!1),[T,E]=p.useState("");p.useEffect(()=>{if(!e){N(null),w(""),k(!1),E("");return}b(n==="edit"&&a?{name:a.name,slug:a.slug,description:a.description??"",permissions:a.permissions}:{name:"",slug:"",description:"",permissions:[]})},[n,e,a]);const B=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,Q=n==="create"||(a?.is_editable??!1),O=n==="edit"&&a&&a.is_editable&&!a.is_system&&d,I=p.useMemo(()=>{const L=v.trim().toLowerCase();return L?i.filter(ae=>`${ae.label} ${ae.key}`.toLowerCase().includes(L)):i},[v,i]),A=(L,ae)=>{b(de=>({...de,permissions:ae?Array.from(new Set([...de.permissions??[],L])):(de.permissions??[]).filter(be=>be!==L)}))},V=async()=>{if(N(null),!x.name.trim()){N("Role name is required.");return}if(n==="create"&&x.slug&&!B.test(x.slug)){N("Use lowercase letters, numbers, and dashes for the role slug.");return}try{await u({...x,name:x.name.trim(),slug:n==="create"?x.slug.trim():a?.slug??"",description:x.description.trim(),permissions:x.permissions})}catch(L){const ae=L instanceof Error?L.message:"Unable to save role.";N(ae)}},W=async()=>{if(!(!d||!a)){N(null);try{await d()}catch(L){const ae=L instanceof Error?L.message:"Unable to delete role.";N(ae)}finally{k(!1),E("")}}},X=l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx(ke,{type:"button",variant:"ghost",onClick:o,disabled:h||g,children:"Close"}),l.jsxs("div",{className:"flex items-center gap-2",children:[O?l.jsx(ke,{type:"button",variant:"danger",onClick:()=>k(!0),disabled:g,isLoading:g,children:"Delete"}):null,l.jsx(ke,{type:"button",onClick:V,isLoading:h,disabled:!Q||h,children:n==="create"?"Create role":"Save changes"})]})]}),J=n==="create"?"New role":a?.name??"Role details";return l.jsxs(l.Fragment,{children:[l.jsxs(Om,{open:e,onClose:o,title:J,description:n==="create"?"Create a workspace-scoped role.":"Edit workspace role details and permissions.",footer:X,children:[C?l.jsx(lt,{tone:"danger",children:C}):null,n==="edit"&&a&&!a.is_editable?l.jsx(lt,{tone:"warning",children:"This role is locked and cannot be modified."}):null,l.jsxs("div",{className:"space-y-4",children:[l.jsx(bt,{label:"Role name",required:!0,children:l.jsx(ht,{value:x.name,onChange:L=>b(ae=>({...ae,name:L.target.value})),placeholder:"Data reviewer",disabled:h||!Q})}),n==="create"?l.jsx(bt,{label:"Role slug",hint:"Lowercase, URL-friendly identifier. Leave blank to auto-generate.",children:l.jsx(ht,{value:x.slug,onChange:L=>b(ae=>({...ae,slug:L.target.value})),placeholder:"data-reviewer",disabled:h||!Q})}):l.jsx(bt,{label:"Role slug",children:l.jsx(ht,{value:a?.slug??"",disabled:!0})}),l.jsx(bt,{label:"Description",hint:"Optional context about what this role controls.",children:l.jsx(ht,{value:x.description,onChange:L=>b(ae=>({...ae,description:L.target.value})),placeholder:"What does this role control?",disabled:h||!Q})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Permissions"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Select the permissions included with this role. ",x.permissions.length," selected."]})]}),l.jsx(ht,{value:v,onChange:L=>w(L.target.value),placeholder:"Filter permissions",disabled:h})]}),l.jsx("div",{className:"max-h-72 space-y-2 overflow-y-auto rounded-lg border border-slate-200 p-3",children:I.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No permissions match this filter."}):I.map(L=>{const ae=`permission-${L.key.replaceAll(".","-")}`;return l.jsxs("label",{htmlFor:ae,"aria-label":L.label,className:"flex items-start gap-3 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{id:ae,type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-300",checked:x.permissions.includes(L.key),onChange:de=>A(L.key,de.target.checked),disabled:h||!Q}),l.jsxs("span",{children:[l.jsx("span",{className:"block font-semibold",children:L.label}),l.jsx("span",{className:"block text-xs text-slate-500",children:L.description})]})]},L.key)})})]})]})]}),l.jsx(Ms,{open:j&&!!a,title:"Delete this role?",description:"Deleting this role will remove it from any members assigned to it.",confirmLabel:"Delete role",tone:"danger",confirmDisabled:T.trim()!==(a?.slug??""),onCancel:()=>{k(!1),E("")},onConfirm:W,isConfirming:g,children:l.jsx(bt,{label:"Type the role slug to confirm",required:!0,children:l.jsx(ht,{value:T,onChange:L=>E(L.target.value),placeholder:a?.slug??"role-slug",disabled:g})})})]})}const w4={workspace:"Workspace",access:"Access",lifecycle:"Lifecycle"},po=[{id:"workspace.general",group:"workspace",label:"General",description:"Workspace name, slug, and defaults.",path:"general",element:l.jsx(n4,{})},{id:"access.members",group:"access",label:"Members",description:"Manage members and access.",path:"access/members",required:{view:["workspace.members.view"],edit:["workspace.members.manage"]},element:l.jsx(x4,{})},{id:"access.roles",group:"access",label:"Roles",description:"Workspace-scoped roles and permissions.",path:"access/roles",required:{view:["workspace.roles.view"],edit:["workspace.roles.manage"]},element:l.jsx(y4,{})},{id:"lifecycle.danger",group:"lifecycle",label:"Danger zone",description:"Deletion and operational safeguards.",path:"lifecycle/danger",tone:"danger",required:{view:["workspace.settings.manage","workspace.delete"],edit:["workspace.delete"]},element:l.jsx(JR,{})}],Gc=po[0];function j4(e){const n=e.join("/");return po.find(a=>n===a.path||n.startsWith(`${a.path}/`))}function S4(e,n){const a=po.map(i=>{const o=i.required?.view?i.required.view.some(d=>n(d)):!0,u=i.required?.edit?i.required.edit.some(d=>n(d)):!0;return{id:i.id,label:i.label,description:i.description,href:`/workspaces/${e}/settings/${i.path}`,disabled:!(o||u),tone:i.tone??"default"}});return Object.values(a.reduce((i,o)=>{const u=po.find(g=>g.id===o.id);if(!u)return i;const d=i[u.group],h=d?{...d,items:[...d.items,o]}:{id:u.group,label:w4[u.group],items:[o]};return i[u.group]=h,i},{}))}function C4({sectionSegments:e=[]}){const{workspace:n,hasPermission:a}=Na(),i=Ft(),o=qn(),{effectiveSegments:u,redirectTo:d}=p.useMemo(()=>N4(e,n.id,o.search,o.hash),[e,n.id,o.search,o.hash]),h=j4(u)??Gc;p.useEffect(()=>{d&&i(d,{replace:!0})},[d,i]);const g=p.useMemo(()=>{const j=h.path.split("/");return u.slice(j.length)},[h.path,u]),x=p.useMemo(()=>S4(n.id,a),[n.id,a]),v=x.flatMap(j=>j.items).find(j=>j.id===h.id),w=x.find(j=>j.items.some(k=>k.id===h.id))?.label,N=v?.disabled?l.jsx(wt,{title:"You don't have access to this section",description:"You need additional permissions to manage this area of workspace settings.",variant:"error"}):h.element;return l.jsx(YR,{workspaceName:n.name,navGroups:x,activeSectionId:h.id,activeSectionLabel:h.label,activeSectionDescription:h.description,activeGroupLabel:w??"Settings",children:l.jsx(XR,{value:{sectionId:h.id,params:g},children:N})})}function N4(e,n,a,i){const o={members:"access/members",roles:"access/roles",danger:"lifecycle/danger"},u=e.length>0?[...e]:Gc.path.split("/"),d=o[u[0]],h=d?[...d.split("/"),...u.slice(1)]:u,g=h.join("/"),x=d&&g?`/workspaces/${n}/settings/${g}${a}${i}`:void 0,b=e.length===0,v=po.some(C=>g===C.path||g.startsWith(`${C.path}/`))||d!==void 0,w=`/workspaces/${n}/settings/${Gc.path}${a}${i}`;return{effectiveSegments:v?h:Gc.path.split("/"),redirectTo:b||!v||d?x??w:null}}function E4(){return l.jsx(gu,{children:l.jsx(k4,{})})}function k4(){const e=qn(),n=Ft(),a=ct(),i=tm(),o=p.useMemo(()=>i.data?.items??[],[i.data?.items]),u=D4(e.pathname),d=p.useMemo(()=>M4(o,u),[o,u]);return p.useEffect(()=>{i.data&&a.setQueryData(Kt.list(Qc),i.data)},[a,i.data]),p.useEffect(()=>{!i.isLoading&&!i.isError&&o.length===0&&n("/workspaces",{replace:!0})},[i.isLoading,i.isError,o.length,n]),p.useEffect(()=>{d&&!u&&n(`/workspaces/${d.id}/${fu.path}${e.search}${e.hash}`,{replace:!0})},[d,u,e.search,e.hash,n]),p.useEffect(()=>{if(!(!d||!u)&&u!==d.id){const h=R4(e.pathname,e.search,d.id,u);h!==e.pathname+e.search&&n(h+e.hash,{replace:!0})}},[d,u,e.pathname,e.search,e.hash,n]),p.useEffect(()=>{d&&Pv(d.id)},[d]),i.isLoading?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(wt,{title:"Loading workspace",variant:"loading"})}):i.isError?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-slate-50 px-6 text-center",children:[l.jsx(wt,{title:"Unable to load workspace",description:"We were unable to fetch workspace information. Refresh the page to try again.",variant:"error"}),l.jsx("button",{type:"button",className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-100",onClick:()=>i.refetch(),children:"Retry"})]}):d?l.jsx(_2,{workspace:d,workspaces:o,children:l.jsx(_4,{workspace:d})}):null}function _4({workspace:e}){return l.jsx(OT,{children:l.jsx(BM,{workspaceId:e.id,children:l.jsx(A4,{workspace:e})})})}function A4({workspace:e}){const n=Wi(),a=Ft(),i=qn(),{session:o,windowState:u}=Nw(),d=gy(),h=d.data?.enabled??!1,g=d.data?.detail??Ki,x=vy(),b=p.useMemo(()=>_w(e),[e]),[v,w]=p.useState(""),[C,N]=p.useState(!1),[j,k]=p.useState(!1),T=v.trim().toLowerCase(),E=!!(o&&u==="maximized"),B=p.useMemo(()=>b.map(H=>({id:H.id,label:H.label,description:`Jump to ${H.label}`,icon:l.jsx(H.icon,{className:"h-4 w-4 text-slate-400","aria-hidden":!0})})),[b]),Q=p.useMemo(()=>sa(`ade.ui.workspace.${e.id}.navCollapsed`),[e.id]),[O,I]=p.useState(()=>{const H=Q.get();return typeof H=="boolean"?H:!1});p.useEffect(()=>{const H=Q.get();I(typeof H=="boolean"?H:!1)},[Q]),p.useEffect(()=>{Q.set(O)},[O,Q]),p.useEffect(()=>{w("")},[e.id]),p.useEffect(()=>{if(typeof window>"u")return;const H=()=>{window.innerWidth>=1024&&N(!1)};return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),p.useEffect(()=>{if(typeof document>"u")return;const H=document.body.style.overflow;return C?document.body.style.overflow="hidden":document.body.style.overflow=H||"",()=>{document.body.style.overflow=H}},[C]),p.useEffect(()=>{E&&N(!1)},[E]);const A=p.useCallback(()=>{if(!T)return;const H=b.find(K=>K.label.toLowerCase().includes(T))??b.find(K=>K.id.toLowerCase().includes(T));H&&a(H.href)},[T,b,a]),V=p.useCallback(H=>{const K=b.find(R=>R.id===H.id);K&&(a(K.href),w(""))},[b,a]),W=p.useCallback(()=>N(!0),[]),X=p.useCallback(()=>N(!1),[]),J=l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("button",{type:"button",onClick:W,className:"focus-ring inline-flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-600 shadow-sm lg:hidden","aria-label":"Open workspace navigation",children:l.jsx(z4,{})})}),L=n.user.display_name||n.user.email||"Signed in",ae=n.user.email??"",de=l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(py,{displayName:L,email:ae,actions:[{id:"about-versions",label:"About / Versions",description:"ade-web, ade-api, ade-engine",onSelect:()=>k(!0)}]})}),be={value:v,onChange:w,onSubmit:A,placeholder:`Search ${e.name} or jump to a section`,shortcutHint:x,scopeLabel:e.name,suggestions:B,onSelectSuggestion:V},D=T4(i.pathname,e.id),U=L4(e.id,D,i.search,i.hash),ie=U?.kind==="content"&&U.key.startsWith("documents"),me=ie?new URLSearchParams(i.search).get("q")??"":"",se=p.useCallback(H=>{if(!ie)return;const K=new URLSearchParams(i.search);H?K.set("q",H):K.delete("q");const R=K.toString();a(`${i.pathname}${R?`?${R}`:""}${i.hash}`,{replace:!0})},[ie,i.hash,i.pathname,i.search,a]),_=p.useCallback(H=>{se(H)},[se]),P=p.useCallback(()=>{se("")},[se]),q=(ie?{value:me,onChange:se,onSubmit:_,onClear:P,placeholder:"Search documents",shortcutHint:x,scopeLabel:"Documents",enableShortcut:!0}:void 0)??be;if(p.useEffect(()=>{U?.kind==="redirect"&&a(U.to,{replace:!0})},[U,a]),!U||U.kind==="redirect")return null;const ee=U.fullHeight??!1;return l.jsxs(l.Fragment,{children:[l.jsx(xy,{open:j,onClose:()=>k(!1)}),l.jsxs("div",{className:pe("flex min-w-0 bg-slate-50 text-slate-900",ee?"h-screen overflow-hidden":"min-h-screen"),children:[E?null:l.jsx(XM,{workspace:e,items:b,collapsed:O,onToggleCollapse:()=>I(H=>!H),onGoToWorkspaces:()=>a("/workspaces")}),l.jsxs("div",{className:"flex flex-1 min-w-0 flex-col",children:[E?null:l.jsx(my,{brand:J,trailing:de,search:q}),!E&&C?l.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true",children:[l.jsx("button",{type:"button",className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:X,"aria-label":"Close navigation"}),l.jsxs("div",{className:"absolute inset-y-0 left-0 flex h-full w-[min(20rem,85vw)] max-w-xs flex-col rounded-r-3xl border-r border-slate-100/70 bg-gradient-to-b from-white via-slate-50 to-white/95 shadow-[0_45px_90px_-50px_rgba(15,23,42,0.85)]",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.name}),l.jsx("span",{className:"text-xs text-slate-400",children:"Workspace navigation"})]}),l.jsx("button",{type:"button",onClick:X,className:"focus-ring inline-flex h-9 w-9 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-500","aria-label":"Close navigation",children:l.jsx(O4,{})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:l.jsx(Aw,{items:b,onNavigate:X,showHeading:!1})})]})]}):null,l.jsx("div",{className:"relative flex flex-1 min-w-0 overflow-hidden",children:l.jsx("main",{className:pe("relative flex-1 min-w-0",ee?"flex min-h-0 flex-col overflow-hidden":"overflow-y-auto"),children:l.jsxs("div",{className:pe(ee?"flex w-full flex-1 min-h-0 flex-col px-0 py-0":"mx-auto flex w-full max-w-7xl flex-col px-4 py-6"),children:[h?l.jsx("div",{className:pe("mb-4",ee?"px-6 pt-4":""),children:l.jsx(lt,{tone:"warning",heading:"Safe mode active",children:g})}):null,l.jsx("div",{className:pe(ee?"flex min-h-0 min-w-0 flex-1 flex-col":"flex min-w-0 flex-1 flex-col"),children:U.element})]})})},`section-${U.key}`)]})]})]})}function D4(e){return e.match(/^\/workspaces\/([^/]+)/)?.[1]??null}function T4(e,n){const a=`/workspaces/${n}`;return e.startsWith(a)?e.slice(a.length).split("/").map(o=>o.trim()).filter(o=>o.length>0):[]}function M4(e,n){return n?e.find(a=>a.id===n)??e.find(a=>a.slug===n)??e[0]??null:e[0]??null}function R4(e,n,a,i){const o=`/workspaces/${i}`,u=e.startsWith(o)?e.slice(o.length):"",d=u&&u!=="/"?u:`/${fu.path}`;return`/workspaces/${a}${d}${n}`}function z4(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M4 6h12",strokeLinecap:"round"}),l.jsx("path",{d:"M4 10h12",strokeLinecap:"round"}),l.jsx("path",{d:"M4 14h8",strokeLinecap:"round"})]})}function O4(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function L4(e,n,a,i){const o=`${a}${i}`;if(n.length===0)return{kind:"redirect",to:`/workspaces/${e}/${fu.path}${o}`};const[u,d,h]=n;switch(u){case"overview":return{kind:"content",key:"overview",element:l.jsx(nR,{})};case fu.path:case"documents":return d?{kind:"content",key:`documents:${d}`,element:l.jsx(IR,{params:{documentId:decodeURIComponent(d)}})}:{kind:"content",key:"documents",element:l.jsx(fR,{})};case"runs":return{kind:"content",key:"runs",element:l.jsx(QR,{})};case"config-builder":return d?h==="editor"?{kind:"content",key:`config-builder:${d}:editor`,element:l.jsx(U4,{configId:decodeURIComponent(d)}),fullHeight:!0}:{kind:"content",key:`config-builder:${d}`,element:l.jsx(KR,{params:{configId:decodeURIComponent(d)}})}:{kind:"content",key:"config-builder",element:l.jsx(WR,{})};case"settings":{const g=n.slice(1),x=g.length>0?g:[];return{kind:"content",key:`settings:${x.length>0?x.join(":"):"general"}`,element:l.jsx(C4,{sectionSegments:x})}}default:return{kind:"content",key:`not-found:${n.join("/")}`,element:l.jsx(wt,{title:"Section not found",description:"The requested workspace section could not be located.",variant:"error"})}}}function U4({configId:e}){return l.jsx(GR,{params:{configId:e}})}function B4(){const e=Ft(),n=ct();return p.useEffect(()=>{let a=!1;const i=new AbortController;return(async()=>{try{await OS({signal:i.signal})}finally{a||(n.removeQueries({queryKey:Hs.root,exact:!1}),e("/login",{replace:!0}))}})().catch(()=>{a||e("/login",{replace:!0})}),()=>{a=!0,i.abort()}},[e,n]),null}function $4(){return l.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col justify-center px-6 py-16 text-center",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-brand-600",children:"404"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Page not found"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["The resource you're looking for doesn't exist yet. Add a screen under ",l.jsx("code",{children:"src/screens/<ScreenName>/"})," and register it inside ",l.jsx("code",{children:"src/app/App.tsx"})," if this surface should exist in the routerless SPA."]}),l.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[l.jsx(Hh,{to:"/",className:"focus-ring inline-flex items-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-white transition hover:bg-brand-700",children:"Return home"}),l.jsx(Hh,{to:"/login",className:"focus-ring inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-50",children:"Go to sign in"})]})]})})}function q4(){return l.jsx(jj,{children:l.jsx(lS,{children:l.jsx(F4,{})})})}function F4(){const e=qn(),a=H4(e.pathname).split("/").filter(Boolean);if(a.length===0)return l.jsx(jC,{});const[i,o]=a;switch(i){case"login":return l.jsx(E_,{});case"logout":return l.jsx(B4,{});case"auth":if(o==="callback")return l.jsx(k_,{});break;case"setup":return l.jsx(A_,{});case"workspaces":return o?o==="new"?l.jsx(N2,{}):l.jsx(E4,{}):l.jsx(Q_,{})}return l.jsx($4,{})}function H4(e){return!e||e==="/"?"/":e.endsWith("/")&&e.length>1?e.slice(0,-1):e}wj.createRoot(document.getElementById("root")).render(l.jsx(_t.StrictMode,{children:l.jsx(q4,{})}));export{_t as W,pe as c,l as j,p as r};
