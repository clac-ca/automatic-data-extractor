(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function kb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ef={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function $1(){if(Dx)return Ll;Dx=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:e,type:i,key:d,ref:c!==void 0?c:null,props:u}}return Ll.Fragment=n,Ll.jsx=r,Ll.jsxs=r,Ll}var Ax;function H1(){return Ax||(Ax=1,Ef.exports=$1()),Ef.exports}var l=H1(),Nf={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function Z1(){if(Rx)return We;Rx=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function E(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,_={};function A(C,I,ae){this.props=C,this.context=I,this.refs=_,this.updater=ae||N}A.prototype.isReactComponent={},A.prototype.setState=function(C,I){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,I,"setState")},A.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function D(){}D.prototype=A.prototype;function R(C,I,ae){this.props=C,this.context=I,this.refs=_,this.updater=ae||N}var q=R.prototype=new D;q.constructor=R,j(q,A.prototype),q.isPureReactComponent=!0;var U=Array.isArray;function V(){}var $={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function B(C,I,ae){var M=ae.ref;return{$$typeof:e,type:C,key:I,ref:M!==void 0?M:null,props:ae}}function H(C,I){return B(C.type,I,C.props)}function J(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function ce(C){var I={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ae){return I[ae]})}var Q=/\/+/g;function de(C,I){return typeof C=="object"&&C!==null&&C.key!=null?ce(""+C.key):I.toString(36)}function xe(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(V,V):(C.status="pending",C.then(function(I){C.status==="pending"&&(C.status="fulfilled",C.value=I)},function(I){C.status==="pending"&&(C.status="rejected",C.reason=I)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function z(C,I,ae,M,F){var G=typeof C;(G==="undefined"||G==="boolean")&&(C=null);var te=!1;if(C===null)te=!0;else switch(G){case"bigint":case"string":case"number":te=!0;break;case"object":switch(C.$$typeof){case e:case n:te=!0;break;case b:return te=C._init,z(te(C._payload),I,ae,M,F)}}if(te)return F=F(C),te=M===""?"."+de(C,0):M,U(F)?(ae="",te!=null&&(ae=te.replace(Q,"$&/")+"/"),z(F,I,ae,"",function(me){return me})):F!=null&&(J(F)&&(F=H(F,ae+(F.key==null||C&&C.key===F.key?"":(""+F.key).replace(Q,"$&/")+"/")+te)),I.push(F)),1;te=0;var L=M===""?".":M+":";if(U(C))for(var ie=0;ie<C.length;ie++)M=C[ie],G=L+de(M,ie),te+=z(M,I,ae,G,F);else if(ie=E(C),typeof ie=="function")for(C=ie.call(C),ie=0;!(M=C.next()).done;)M=M.value,G=L+de(M,ie++),te+=z(M,I,ae,G,F);else if(G==="object"){if(typeof C.then=="function")return z(xe(C),I,ae,M,F);throw I=String(C),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return te}function ee(C,I,ae){if(C==null)return C;var M=[],F=0;return z(C,M,"","",function(G){return I.call(ae,G,F++)}),M}function K(C){if(C._status===-1){var I=C._result;I=I(),I.then(function(ae){(C._status===0||C._status===-1)&&(C._status=1,C._result=ae)},function(ae){(C._status===0||C._status===-1)&&(C._status=2,C._result=ae)}),C._status===-1&&(C._status=0,C._result=I)}if(C._status===1)return C._result.default;throw C._result}var be=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},ve={map:ee,forEach:function(C,I,ae){ee(C,function(){I.apply(this,arguments)},ae)},count:function(C){var I=0;return ee(C,function(){I++}),I},toArray:function(C){return ee(C,function(I){return I})||[]},only:function(C){if(!J(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return We.Activity=y,We.Children=ve,We.Component=A,We.Fragment=r,We.Profiler=c,We.PureComponent=R,We.StrictMode=i,We.Suspense=x,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,We.__COMPILER_RUNTIME={__proto__:null,c:function(C){return $.H.useMemoCache(C)}},We.cache=function(C){return function(){return C.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(C,I,ae){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var M=j({},C.props),F=C.key;if(I!=null)for(G in I.key!==void 0&&(F=""+I.key),I)!re.call(I,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&I.ref===void 0||(M[G]=I[G]);var G=arguments.length-2;if(G===1)M.children=ae;else if(1<G){for(var te=Array(G),L=0;L<G;L++)te[L]=arguments[L+2];M.children=te}return B(C.type,F,M)},We.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},We.createElement=function(C,I,ae){var M,F={},G=null;if(I!=null)for(M in I.key!==void 0&&(G=""+I.key),I)re.call(I,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(F[M]=I[M]);var te=arguments.length-2;if(te===1)F.children=ae;else if(1<te){for(var L=Array(te),ie=0;ie<te;ie++)L[ie]=arguments[ie+2];F.children=L}if(C&&C.defaultProps)for(M in te=C.defaultProps,te)F[M]===void 0&&(F[M]=te[M]);return B(C,G,F)},We.createRef=function(){return{current:null}},We.forwardRef=function(C){return{$$typeof:m,render:C}},We.isValidElement=J,We.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:K}},We.memo=function(C,I){return{$$typeof:g,type:C,compare:I===void 0?null:I}},We.startTransition=function(C){var I=$.T,ae={};$.T=ae;try{var M=C(),F=$.S;F!==null&&F(ae,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(V,be)}catch(G){be(G)}finally{I!==null&&ae.types!==null&&(I.types=ae.types),$.T=I}},We.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},We.use=function(C){return $.H.use(C)},We.useActionState=function(C,I,ae){return $.H.useActionState(C,I,ae)},We.useCallback=function(C,I){return $.H.useCallback(C,I)},We.useContext=function(C){return $.H.useContext(C)},We.useDebugValue=function(){},We.useDeferredValue=function(C,I){return $.H.useDeferredValue(C,I)},We.useEffect=function(C,I){return $.H.useEffect(C,I)},We.useEffectEvent=function(C){return $.H.useEffectEvent(C)},We.useId=function(){return $.H.useId()},We.useImperativeHandle=function(C,I,ae){return $.H.useImperativeHandle(C,I,ae)},We.useInsertionEffect=function(C,I){return $.H.useInsertionEffect(C,I)},We.useLayoutEffect=function(C,I){return $.H.useLayoutEffect(C,I)},We.useMemo=function(C,I){return $.H.useMemo(C,I)},We.useOptimistic=function(C,I){return $.H.useOptimistic(C,I)},We.useReducer=function(C,I,ae){return $.H.useReducer(C,I,ae)},We.useRef=function(C){return $.H.useRef(C)},We.useState=function(C){return $.H.useState(C)},We.useSyncExternalStore=function(C,I,ae){return $.H.useSyncExternalStore(C,I,ae)},We.useTransition=function(){return $.H.useTransition()},We.version="19.2.0",We}var Mx;function gh(){return Mx||(Mx=1,Nf.exports=Z1()),Nf.exports}var p=gh();const vt=kb(p);var Cf={exports:{}},Ul={},_f={exports:{}},kf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function F1(){return zx||(zx=1,(function(e){function n(z,ee){var K=z.length;z.push(ee);e:for(;0<K;){var be=K-1>>>1,ve=z[be];if(0<c(ve,ee))z[be]=ee,z[K]=ve,K=be;else break e}}function r(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ee=z[0],K=z.pop();if(K!==ee){z[0]=K;e:for(var be=0,ve=z.length,C=ve>>>1;be<C;){var I=2*(be+1)-1,ae=z[I],M=I+1,F=z[M];if(0>c(ae,K))M<ve&&0>c(F,ae)?(z[be]=F,z[M]=K,be=M):(z[be]=ae,z[I]=K,be=I);else if(M<ve&&0>c(F,K))z[be]=F,z[M]=K,be=M;else break e}}return ee}function c(z,ee){var K=z.sortIndex-ee.sortIndex;return K!==0?K:z.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var x=[],g=[],b=1,y=null,w=3,E=!1,N=!1,j=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function q(z){for(var ee=r(g);ee!==null;){if(ee.callback===null)i(g);else if(ee.startTime<=z)i(g),ee.sortIndex=ee.expirationTime,n(x,ee);else break;ee=r(g)}}function U(z){if(j=!1,q(z),!N)if(r(x)!==null)N=!0,V||(V=!0,ce());else{var ee=r(g);ee!==null&&xe(U,ee.startTime-z)}}var V=!1,$=-1,re=5,B=-1;function H(){return _?!0:!(e.unstable_now()-B<re)}function J(){if(_=!1,V){var z=e.unstable_now();B=z;var ee=!0;try{e:{N=!1,j&&(j=!1,D($),$=-1),E=!0;var K=w;try{t:{for(q(z),y=r(x);y!==null&&!(y.expirationTime>z&&H());){var be=y.callback;if(typeof be=="function"){y.callback=null,w=y.priorityLevel;var ve=be(y.expirationTime<=z);if(z=e.unstable_now(),typeof ve=="function"){y.callback=ve,q(z),ee=!0;break t}y===r(x)&&i(x),q(z)}else i(x);y=r(x)}if(y!==null)ee=!0;else{var C=r(g);C!==null&&xe(U,C.startTime-z),ee=!1}}break e}finally{y=null,w=K,E=!1}ee=void 0}}finally{ee?ce():V=!1}}}var ce;if(typeof R=="function")ce=function(){R(J)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,de=Q.port2;Q.port1.onmessage=J,ce=function(){de.postMessage(null)}}else ce=function(){A(J,0)};function xe(z,ee){$=A(function(){z(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(z){switch(w){case 1:case 2:case 3:var ee=3;break;default:ee=w}var K=w;w=ee;try{return z()}finally{w=K}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=w;w=z;try{return ee()}finally{w=K}},e.unstable_scheduleCallback=function(z,ee,K){var be=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?be+K:be):K=be,z){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=K+ve,z={id:b++,callback:ee,priorityLevel:z,startTime:K,expirationTime:ve,sortIndex:-1},K>be?(z.sortIndex=K,n(g,z),r(x)===null&&z===r(g)&&(j?(D($),$=-1):j=!0,xe(U,K-be))):(z.sortIndex=ve,n(x,z),N||E||(N=!0,V||(V=!0,ce()))),z},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(z){var ee=w;return function(){var K=w;w=ee;try{return z.apply(this,arguments)}finally{w=K}}}})(kf)),kf}var Ox;function V1(){return Ox||(Ox=1,_f.exports=F1()),_f.exports}var Tf={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function Q1(){if(Lx)return kn;Lx=1;var e=gh();function n(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:x,containerInfo:g,implementation:b}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,kn.createPortal=function(x,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(x,g,null,b)},kn.flushSync=function(x){var g=d.T,b=i.p;try{if(d.T=null,i.p=2,x)return x()}finally{d.T=g,i.p=b,i.d.f()}},kn.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},kn.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},kn.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var b=g.as,y=m(b,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:E}):b==="script"&&i.d.X(x,{crossOrigin:y,integrity:w,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},kn.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},kn.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,y=m(b,g.crossOrigin);i.d.L(x,b,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},kn.preloadModule=function(x,g){if(typeof x=="string")if(g){var b=m(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},kn.requestFormReset=function(x){i.d.r(x)},kn.unstable_batchedUpdates=function(x,g){return x(g)},kn.useFormState=function(x,g,b){return d.H.useFormState(x,g,b)},kn.useFormStatus=function(){return d.H.useHostTransitionStatus()},kn.version="19.2.0",kn}var Ux;function Tb(){if(Ux)return Tf.exports;Ux=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Tf.exports=Q1(),Tf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function I1(){if(Bx)return Ul;Bx=1;var e=V1(),n=gh(),r=Tb();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(i(188))}function g(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,o=s;;){var f=a.return;if(f===null)break;var h=f.alternate;if(h===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===a)return x(f),t;if(h===o)return x(f),s;h=h.sibling}throw Error(i(188))}if(a.return!==o.return)a=f,o=h;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,o=h;break}if(S===o){v=!0,o=f,a=h;break}S=S.sibling}if(!v){for(S=h.child;S;){if(S===a){v=!0,a=h,o=f;break}if(S===o){v=!0,o=h,a=f;break}S=S.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var Q=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Q?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case U:return"Suspense";case V:return"SuspenseList";case B:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case R:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case q:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return s=t.displayName||null,s!==null?s:de(t.type)||"Memo";case re:s=t._payload,t=t._init;try{return de(t(s))}catch{}}return null}var xe=Array.isArray,z=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},be=[],ve=-1;function C(t){return{current:t}}function I(t){0>ve||(t.current=be[ve],be[ve]=null,ve--)}function ae(t,s){ve++,be[ve]=t.current,t.current=s}var M=C(null),F=C(null),G=C(null),te=C(null);function L(t,s){switch(ae(G,s),ae(F,t),ae(M,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Jg(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Jg(s),t=ex(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}I(M),ae(M,t)}function ie(){I(M),I(F),I(G)}function me(t){t.memoizedState!==null&&ae(te,t);var s=M.current,a=ex(s,t.type);s!==a&&(ae(F,t),ae(M,a))}function Te(t){F.current===t&&(I(M),I(F)),te.current===t&&(I(te),Rl._currentValue=K)}var Fe,Se;function _e(t){if(Fe===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Fe=s&&s[1]||"",Se=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+t+Se}var ne=!1;function Ee(t,s){if(!t||ne)return"";ne=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var se=oe}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(oe){se=oe}t.call(pe.prototype)}}else{try{throw Error()}catch(oe){se=oe}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),v=h[0],S=h[1];if(v&&S){var T=v.split(`
`),X=S.split(`
`);for(f=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(o===T.length||f===X.length)for(o=T.length-1,f=X.length-1;1<=o&&0<=f&&T[o]!==X[f];)f--;for(;1<=o&&0<=f;o--,f--)if(T[o]!==X[f]){if(o!==1||f!==1)do if(o--,f--,0>f||T[o]!==X[f]){var ue=`
`+T[o].replace(" at new "," at ");return t.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",t.displayName)),ue}while(1<=o&&0<=f);break}}}finally{ne=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?_e(a):""}function Ue(t,s){switch(t.tag){case 26:case 27:case 5:return _e(t.type);case 16:return _e("Lazy");case 13:return t.child!==s&&s!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Ee(t.type,!1);case 11:return Ee(t.type.render,!1);case 1:return Ee(t.type,!0);case 31:return _e("Activity");default:return""}}function qe(t){try{var s="",a=null;do s+=Ue(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var tt=Object.prototype.hasOwnProperty,k=e.unstable_scheduleCallback,W=e.unstable_cancelCallback,le=e.unstable_shouldYield,Ce=e.unstable_requestPaint,we=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,Ae=e.unstable_ImmediatePriority,Pe=e.unstable_UserBlockingPriority,Ge=e.unstable_NormalPriority,Nt=e.unstable_LowPriority,Ne=e.unstable_IdlePriority,ke=e.log,Ie=e.unstable_setDisableYieldValue,Dt=null,it=null;function Pt(t){if(typeof ke=="function"&&Ie(t),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Dt,t)}catch{}}var Ct=Math.clz32?Math.clz32:Ba,yr=Math.log,Un=Math.LN2;function Ba(t){return t>>>=0,t===0?32:31-(yr(t)/Un|0)|0}var Ys=256,wr=262144,_t=4194304;function Mt(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ht(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var f=0,h=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~h,o!==0?f=Mt(o):(v&=S,v!==0?f=Mt(v):a||(a=S&~t,a!==0&&(f=Mt(a))))):(S=o&~h,S!==0?f=Mt(S):v!==0?f=Mt(v):a||(a=o&~t,a!==0&&(f=Mt(a)))),f===0?0:s!==0&&s!==f&&(s&h)===0&&(h=f&-f,a=s&-s,h>=a||h===32&&(a&4194048)!==0)?s:f}function Wt(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Zt(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dn(){var t=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),t}function fn(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Bn(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zt(t,s,a,o,f,h){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,T=t.expirationTimes,X=t.hiddenUpdates;for(a=v&~a;0<a;){var ue=31-Ct(a),pe=1<<ue;S[ue]=0,T[ue]=-1;var se=X[ue];if(se!==null)for(X[ue]=null,ue=0;ue<se.length;ue++){var oe=se[ue];oe!==null&&(oe.lane&=-536870913)}a&=~pe}o!==0&&qn(t,o,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(v&~s))}function qn(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-Ct(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Cn(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-Ct(a),f=1<<o;f&s|t[o]&s&&(t[o]|=s),a&=~f}}function hn(t,s){var a=s&-s;return a=(a&42)!==0?1:Gn(a),(a&(t.suspendedLanes|s))!==0?0:a}function Gn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Kn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Dn(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:jx(t.type))}function Xe(t,s){var a=ee.p;try{return ee.p=t,s()}finally{ee.p=a}}var bn=Math.random().toString(36).slice(2),at="__reactFiber$"+bn,vn="__reactProps$"+bn,An="__reactContainer$"+bn,$s="__reactEvents$"+bn,vu="__reactListeners$"+bn,ho="__reactHandles$"+bn,mo="__reactResources$"+bn,He="__reactMarker$"+bn;function Sr(t){delete t[at],delete t[vn],delete t[$s],delete t[vu],delete t[ho]}function Xs(t){var s=t[at];if(s)return s;for(var a=t.parentNode;a;){if(s=a[An]||a[at]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=lx(t);t!==null;){if(a=t[at])return a;t=lx(t)}return s}t=a,a=t.parentNode}return null}function jr(t){if(t=t[at]||t[An]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function ta(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Gt(t){var s=t[mo];return s||(s=t[mo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(t){t[He]=!0}var po=new Set,Ns={};function $n(t,s){Cs(t,s),Cs(t+"Capture",s)}function Cs(t,s){for(Ns[t]=s,t=0;t<s.length;t++)po.add(s[t])}var qa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),go={},$a={};function yu(t){return tt.call($a,t)?!0:tt.call(go,t)?!1:qa.test(t)?$a[t]=!0:(go[t]=!0,!1)}function _s(t,s,a){if(yu(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Ut(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function ks(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ts(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Hi(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,h.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ha(t){if(!t._valueTracker){var s=Ts(t)?"checked":"value";t._valueTracker=Hi(t,s,""+t[s])}}function cs(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Ts(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zi=/[\n"\\]/g;function Rn(t){return t.replace(Zi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Er(t,s,a,o,f,h,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+an(s)):t.value!==""+an(s)&&(t.value=""+an(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?xo(t,v,an(s)):a!=null?xo(t,v,an(a)):o!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+an(S):t.removeAttribute("name")}function Yn(t,s,a,o,f,h,v,S){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),s!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||s!=null)){Ha(t);return}a=a!=null?""+an(a):"",s=s!=null?""+an(s):a,S||s===t.value||(t.value=s),t.defaultValue=s}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ha(t)}function xo(t,s,a){s==="number"&&us(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function na(t,s,a,o){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&o&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function bo(t,s,a){if(s!=null&&(s=""+an(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+an(a):""}function Za(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(i(92));if(xe(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=an(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Ha(t)}function Js(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yo(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||vo.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function sa(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in s)o=s[f],s.hasOwnProperty(f)&&a[f]!==o&&yo(t,f,o)}else for(var h in s)s.hasOwnProperty(h)&&yo(t,h,s[h])}function Fi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function er(t){return wo.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ds(){}var Vi=null;function Qi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var As=null,Xn=null;function Fa(t){var s=jr(t);if(s&&(t=s.stateNode)){var a=t[vn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Er(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var f=o[vn]||null;if(!f)throw Error(i(90));Er(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&cs(o)}break e;case"textarea":bo(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&na(t,!!a.multiple,s,!1)}}}var ra=!1;function Va(t,s,a){if(ra)return t(s,a);ra=!0;try{var o=t(s);return o}finally{if(ra=!1,(As!==null||Xn!==null)&&(ic(),As&&(s=As,t=Xn,Xn=As=null,Fa(s),t)))for(s=0;s<t.length;s++)Fa(t[s])}}function ds(t,s){var a=t.stateNode;if(a===null)return null;var o=a[vn]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ii=!1;if(Rs)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Ii=!1}var Hs=null,Jn=null,Qa=null;function So(){if(Qa)return Qa;var t,s=Jn,a=s.length,o,f="value"in Hs?Hs.value:Hs.textContent,h=f.length;for(t=0;t<a&&s[t]===f[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===f[h-o];o++);return Qa=f.slice(t,1<o?1-o:void 0)}function Ia(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function jo(){return!1}function _n(t){function s(a,o,f,h,v){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(h):h[S]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Pa:jo,this.isPropagationStopped=jo,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),s}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=_n(tr),Nr=y({},tr,{view:0,detail:0}),Su=_n(Nr),Pi,Wi,ia,Ga=y({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ia&&(ia&&t.type==="mousemove"?(Pi=t.screenX-ia.screenX,Wi=t.screenY-ia.screenY):Wi=Pi=0,ia=t),Pi)},movementY:function(t){return"movementY"in t?t.movementY:Wi}}),Eo=_n(Ga),ju=y({},Ga,{dataTransfer:0}),Eu=_n(ju),Nu=y({},Nr,{relatedTarget:0}),Gi=_n(Nu),Cu=y({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ki=_n(Cu),P=y({},tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),he=_n(P),Re=y({},tr,{data:0}),De=_n(Re),Ve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=dt[t])?!!s[t]:!1}function Yi(){return Mn}var _u=y({},Nr,{key:function(t){if(t.key){var s=Ve[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yi,charCode:function(t){return t.type==="keypress"?Ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xi=_n(_u),rm=y({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=_n(rm),la=y({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yi}),tw=_n(la),nw=y({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sw=_n(nw),rw=y({},Ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aw=_n(rw),iw=y({},tr,{newState:0,oldState:0}),lw=_n(iw),ow=[9,13,27,32],Tu=Rs&&"CompositionEvent"in window,Ji=null;Rs&&"documentMode"in document&&(Ji=document.documentMode);var cw=Rs&&"TextEvent"in window&&!Ji,am=Rs&&(!Tu||Ji&&8<Ji&&11>=Ji),im=" ",lm=!1;function om(t,s){switch(t){case"keyup":return ow.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ka=!1;function uw(t,s){switch(t){case"compositionend":return cm(s);case"keypress":return s.which!==32?null:(lm=!0,im);case"textInput":return t=s.data,t===im&&lm?null:t;default:return null}}function dw(t,s){if(Ka)return t==="compositionend"||!Tu&&om(t,s)?(t=So(),Qa=Jn=Hs=null,Ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return am&&s.locale!=="ko"?null:s.data;default:return null}}var fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!fw[t.type]:s==="textarea"}function dm(t,s,a,o){As?Xn?Xn.push(o):Xn=[o]:As=o,s=hc(s,"onChange"),0<s.length&&(a=new Wa("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var el=null,tl=null;function hw(t){Pg(t,0)}function No(t){var s=ta(t);if(cs(s))return t}function fm(t,s){if(t==="change")return s}var hm=!1;if(Rs){var Du;if(Rs){var Au="oninput"in document;if(!Au){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),Au=typeof mm.oninput=="function"}Du=Au}else Du=!1;hm=Du&&(!document.documentMode||9<document.documentMode)}function pm(){el&&(el.detachEvent("onpropertychange",gm),tl=el=null)}function gm(t){if(t.propertyName==="value"&&No(tl)){var s=[];dm(s,tl,t,Qi(t)),Va(hw,s)}}function mw(t,s,a){t==="focusin"?(pm(),el=s,tl=a,el.attachEvent("onpropertychange",gm)):t==="focusout"&&pm()}function pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return No(tl)}function gw(t,s){if(t==="click")return No(s)}function xw(t,s){if(t==="input"||t==="change")return No(s)}function bw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var es=typeof Object.is=="function"?Object.is:bw;function nl(t,s){if(es(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!tt.call(s,f)||!es(t[f],s[f]))return!1}return!0}function xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bm(t,s){var a=xm(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xm(a)}}function vm(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?vm(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ym(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=us(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=us(t.document)}return s}function Ru(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var vw=Rs&&"documentMode"in document&&11>=document.documentMode,Ya=null,Mu=null,sl=null,zu=!1;function wm(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zu||Ya==null||Ya!==us(o)||(o=Ya,"selectionStart"in o&&Ru(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),sl&&nl(sl,o)||(sl=o,o=hc(Mu,"onSelect"),0<o.length&&(s=new Wa("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Ya)))}function oa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Xa={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},Ou={},Sm={};Rs&&(Sm=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function ca(t){if(Ou[t])return Ou[t];if(!Xa[t])return t;var s=Xa[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Sm)return Ou[t]=s[a];return t}var jm=ca("animationend"),Em=ca("animationiteration"),Nm=ca("animationstart"),yw=ca("transitionrun"),ww=ca("transitionstart"),Sw=ca("transitioncancel"),Cm=ca("transitionend"),_m=new Map,Lu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lu.push("scrollEnd");function Ms(t,s){_m.set(t,s),$n(s,[t])}var Co=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},fs=[],Ja=0,Uu=0;function _o(){for(var t=Ja,s=Uu=Ja=0;s<t;){var a=fs[s];fs[s++]=null;var o=fs[s];fs[s++]=null;var f=fs[s];fs[s++]=null;var h=fs[s];if(fs[s++]=null,o!==null&&f!==null){var v=o.pending;v===null?f.next=f:(f.next=v.next,v.next=f),o.pending=f}h!==0&&km(a,f,h)}}function ko(t,s,a,o){fs[Ja++]=t,fs[Ja++]=s,fs[Ja++]=a,fs[Ja++]=o,Uu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Bu(t,s,a,o){return ko(t,s,a,o),To(t)}function ua(t,s){return ko(t,null,null,s),To(t)}function km(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var f=!1,h=t.return;h!==null;)h.childLanes|=a,o=h.alternate,o!==null&&(o.childLanes|=a),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,f&&s!==null&&(f=31-Ct(a),t=h.hiddenUpdates,o=t[f],o===null?t[f]=[s]:o.push(s),s.lane=a|536870912),h):null}function To(t){if(50<Nl)throw Nl=0,Pd=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ei={};function jw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(t,s,a,o){return new jw(t,s,a,o)}function qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nr(t,s){var a=t.alternate;return a===null?(a=ts(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Tm(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Do(t,s,a,o,f,h){var v=0;if(o=t,typeof t=="function")qu(t)&&(v=1);else if(typeof t=="string")v=k1(t,a,M.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case B:return t=ts(31,a,s,f),t.elementType=B,t.lanes=h,t;case j:return da(a.children,f,h,s);case _:v=8,f|=24;break;case A:return t=ts(12,a,s,f|2),t.elementType=A,t.lanes=h,t;case U:return t=ts(13,a,s,f),t.elementType=U,t.lanes=h,t;case V:return t=ts(19,a,s,f),t.elementType=V,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:v=10;break e;case D:v=9;break e;case q:v=11;break e;case $:v=14;break e;case re:v=16,o=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),o=null}return s=ts(v,a,s,f),s.elementType=t,s.type=o,s.lanes=h,s}function da(t,s,a,o){return t=ts(7,t,o,s),t.lanes=a,t}function $u(t,s,a){return t=ts(6,t,null,s),t.lanes=a,t}function Dm(t){var s=ts(18,null,null,0);return s.stateNode=t,s}function Hu(t,s,a){return s=ts(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Am=new WeakMap;function hs(t,s){if(typeof t=="object"&&t!==null){var a=Am.get(t);return a!==void 0?a:(s={value:t,source:s,stack:qe(s)},Am.set(t,s),s)}return{value:t,source:s,stack:qe(s)}}var ti=[],ni=0,Ao=null,rl=0,ms=[],ps=0,Cr=null,Zs=1,Fs="";function sr(t,s){ti[ni++]=rl,ti[ni++]=Ao,Ao=t,rl=s}function Rm(t,s,a){ms[ps++]=Zs,ms[ps++]=Fs,ms[ps++]=Cr,Cr=t;var o=Zs;t=Fs;var f=32-Ct(o)-1;o&=~(1<<f),a+=1;var h=32-Ct(s)+f;if(30<h){var v=f-f%5;h=(o&(1<<v)-1).toString(32),o>>=v,f-=v,Zs=1<<32-Ct(s)+f|a<<f|o,Fs=h+t}else Zs=1<<h|a<<f|o,Fs=t}function Zu(t){t.return!==null&&(sr(t,1),Rm(t,1,0))}function Fu(t){for(;t===Ao;)Ao=ti[--ni],ti[ni]=null,rl=ti[--ni],ti[ni]=null;for(;t===Cr;)Cr=ms[--ps],ms[ps]=null,Fs=ms[--ps],ms[ps]=null,Zs=ms[--ps],ms[ps]=null}function Mm(t,s){ms[ps++]=Zs,ms[ps++]=Fs,ms[ps++]=Cr,Zs=s.id,Fs=s.overflow,Cr=t}var yn=null,kt=null,rt=!1,_r=null,gs=!1,Vu=Error(i(519));function kr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(hs(s,t)),Vu}function zm(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[at]=t,s[vn]=o,a){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(a=0;a<_l.length;a++)et(_l[a],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),Yn(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),Za(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||Yg(s.textContent,a)?(o.popover!=null&&(et("beforetoggle",s),et("toggle",s)),o.onScroll!=null&&et("scroll",s),o.onScrollEnd!=null&&et("scrollend",s),o.onClick!=null&&(s.onclick=Ds),s=!0):s=!1,s||kr(t,!0)}function Om(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 31:case 13:gs=!1;return;case 27:case 3:gs=!0;return;default:yn=yn.return}}function si(t){if(t!==yn)return!1;if(!rt)return Om(t),rt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||cf(t.type,t.memoizedProps)),a=!a),a&&kt&&kr(t),Om(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));kt=ix(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));kt=ix(t)}else s===27?(s=kt,Zr(t.type)?(t=mf,mf=null,kt=t):kt=s):kt=yn?bs(t.stateNode.nextSibling):null;return!0}function fa(){kt=yn=null,rt=!1}function Qu(){var t=_r;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),_r=null),t}function al(t){_r===null?_r=[t]:_r.push(t)}var Iu=C(null),ha=null,rr=null;function Tr(t,s,a){ae(Iu,s._currentValue),s._currentValue=a}function ar(t){t._currentValue=Iu.current,I(Iu)}function Pu(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Wu(t,s,a,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var v=f.child;h=h.firstContext;e:for(;h!==null;){var S=h;h=f;for(var T=0;T<s.length;T++)if(S.context===s[T]){h.lanes|=a,S=h.alternate,S!==null&&(S.lanes|=a),Pu(h.return,a,t),o||(v=null);break e}h=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=a,h=v.alternate,h!==null&&(h.lanes|=a),Pu(v,a,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ri(t,s,a,o){t=null;for(var f=s,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var S=f.type;es(f.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(f===te.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Rl):t=[Rl])}f=f.return}t!==null&&Wu(s,t,a,o),s.flags|=262144}function Ro(t){for(t=t.firstContext;t!==null;){if(!es(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ma(t){ha=t,rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wn(t){return Lm(ha,t)}function Mo(t,s){return ha===null&&ma(t),Lm(t,s)}function Lm(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},rr===null){if(t===null)throw Error(i(308));rr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else rr=rr.next=s;return a}var Ew=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Nw=e.unstable_scheduleCallback,Cw=e.unstable_NormalPriority,Yt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gu(){return{controller:new Ew,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&Nw(Cw,function(){t.controller.abort()})}var ll=null,Ku=0,ai=0,ii=null;function _w(t,s){if(ll===null){var a=ll=[];Ku=0,ai=Jd(),ii={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ku++,s.then(Um,Um),s}function Um(){if(--Ku===0&&ll!==null){ii!==null&&(ii.status="fulfilled");var t=ll;ll=null,ai=0,ii=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function kw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var Bm=z.S;z.S=function(t,s){wg=we(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_w(t,s),Bm!==null&&Bm(t,s)};var pa=C(null);function Yu(){var t=pa.current;return t!==null?t:yt.pooledCache}function zo(t,s){s===null?ae(pa,pa.current):ae(pa,s.pool)}function qm(){var t=Yu();return t===null?null:{parent:Yt._currentValue,pool:t}}var li=Error(i(460)),Xu=Error(i(474)),Oo=Error(i(542)),Lo={then:function(){}};function $m(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hm(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Ds,Ds),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Fm(t),t;default:if(typeof s.status=="string")s.then(Ds,Ds);else{if(t=yt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=o}},function(o){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Fm(t),t}throw xa=s,li}}function ga(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xa=a,li):a}}var xa=null;function Zm(){if(xa===null)throw Error(i(459));var t=xa;return xa=null,t}function Fm(t){if(t===li||t===Oo)throw Error(i(483))}var oi=null,ol=0;function Uo(t){var s=ol;return ol+=1,oi===null&&(oi=[]),Hm(oi,t,s)}function cl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Bo(t,s){throw s.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Vm(t){function s(Z,O){if(t){var Y=Z.deletions;Y===null?(Z.deletions=[O],Z.flags|=16):Y.push(O)}}function a(Z,O){if(!t)return null;for(;O!==null;)s(Z,O),O=O.sibling;return null}function o(Z){for(var O=new Map;Z!==null;)Z.key!==null?O.set(Z.key,Z):O.set(Z.index,Z),Z=Z.sibling;return O}function f(Z,O){return Z=nr(Z,O),Z.index=0,Z.sibling=null,Z}function h(Z,O,Y){return Z.index=Y,t?(Y=Z.alternate,Y!==null?(Y=Y.index,Y<O?(Z.flags|=67108866,O):Y):(Z.flags|=67108866,O)):(Z.flags|=1048576,O)}function v(Z){return t&&Z.alternate===null&&(Z.flags|=67108866),Z}function S(Z,O,Y,fe){return O===null||O.tag!==6?(O=$u(Y,Z.mode,fe),O.return=Z,O):(O=f(O,Y),O.return=Z,O)}function T(Z,O,Y,fe){var Be=Y.type;return Be===j?ue(Z,O,Y.props.children,fe,Y.key):O!==null&&(O.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===re&&ga(Be)===O.type)?(O=f(O,Y.props),cl(O,Y),O.return=Z,O):(O=Do(Y.type,Y.key,Y.props,null,Z.mode,fe),cl(O,Y),O.return=Z,O)}function X(Z,O,Y,fe){return O===null||O.tag!==4||O.stateNode.containerInfo!==Y.containerInfo||O.stateNode.implementation!==Y.implementation?(O=Hu(Y,Z.mode,fe),O.return=Z,O):(O=f(O,Y.children||[]),O.return=Z,O)}function ue(Z,O,Y,fe,Be){return O===null||O.tag!==7?(O=da(Y,Z.mode,fe,Be),O.return=Z,O):(O=f(O,Y),O.return=Z,O)}function pe(Z,O,Y){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=$u(""+O,Z.mode,Y),O.return=Z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case E:return Y=Do(O.type,O.key,O.props,null,Z.mode,Y),cl(Y,O),Y.return=Z,Y;case N:return O=Hu(O,Z.mode,Y),O.return=Z,O;case re:return O=ga(O),pe(Z,O,Y)}if(xe(O)||ce(O))return O=da(O,Z.mode,Y,null),O.return=Z,O;if(typeof O.then=="function")return pe(Z,Uo(O),Y);if(O.$$typeof===R)return pe(Z,Mo(Z,O),Y);Bo(Z,O)}return null}function se(Z,O,Y,fe){var Be=O!==null?O.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Be!==null?null:S(Z,O,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===Be?T(Z,O,Y,fe):null;case N:return Y.key===Be?X(Z,O,Y,fe):null;case re:return Y=ga(Y),se(Z,O,Y,fe)}if(xe(Y)||ce(Y))return Be!==null?null:ue(Z,O,Y,fe,null);if(typeof Y.then=="function")return se(Z,O,Uo(Y),fe);if(Y.$$typeof===R)return se(Z,O,Mo(Z,Y),fe);Bo(Z,Y)}return null}function oe(Z,O,Y,fe,Be){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Z=Z.get(Y)||null,S(O,Z,""+fe,Be);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case E:return Z=Z.get(fe.key===null?Y:fe.key)||null,T(O,Z,fe,Be);case N:return Z=Z.get(fe.key===null?Y:fe.key)||null,X(O,Z,fe,Be);case re:return fe=ga(fe),oe(Z,O,Y,fe,Be)}if(xe(fe)||ce(fe))return Z=Z.get(Y)||null,ue(O,Z,fe,Be,null);if(typeof fe.then=="function")return oe(Z,O,Y,Uo(fe),Be);if(fe.$$typeof===R)return oe(Z,O,Y,Mo(O,fe),Be);Bo(O,fe)}return null}function Me(Z,O,Y,fe){for(var Be=null,lt=null,Le=O,Ye=O=0,st=null;Le!==null&&Ye<Y.length;Ye++){Le.index>Ye?(st=Le,Le=null):st=Le.sibling;var ot=se(Z,Le,Y[Ye],fe);if(ot===null){Le===null&&(Le=st);break}t&&Le&&ot.alternate===null&&s(Z,Le),O=h(ot,O,Ye),lt===null?Be=ot:lt.sibling=ot,lt=ot,Le=st}if(Ye===Y.length)return a(Z,Le),rt&&sr(Z,Ye),Be;if(Le===null){for(;Ye<Y.length;Ye++)Le=pe(Z,Y[Ye],fe),Le!==null&&(O=h(Le,O,Ye),lt===null?Be=Le:lt.sibling=Le,lt=Le);return rt&&sr(Z,Ye),Be}for(Le=o(Le);Ye<Y.length;Ye++)st=oe(Le,Z,Ye,Y[Ye],fe),st!==null&&(t&&st.alternate!==null&&Le.delete(st.key===null?Ye:st.key),O=h(st,O,Ye),lt===null?Be=st:lt.sibling=st,lt=st);return t&&Le.forEach(function(Pr){return s(Z,Pr)}),rt&&sr(Z,Ye),Be}function $e(Z,O,Y,fe){if(Y==null)throw Error(i(151));for(var Be=null,lt=null,Le=O,Ye=O=0,st=null,ot=Y.next();Le!==null&&!ot.done;Ye++,ot=Y.next()){Le.index>Ye?(st=Le,Le=null):st=Le.sibling;var Pr=se(Z,Le,ot.value,fe);if(Pr===null){Le===null&&(Le=st);break}t&&Le&&Pr.alternate===null&&s(Z,Le),O=h(Pr,O,Ye),lt===null?Be=Pr:lt.sibling=Pr,lt=Pr,Le=st}if(ot.done)return a(Z,Le),rt&&sr(Z,Ye),Be;if(Le===null){for(;!ot.done;Ye++,ot=Y.next())ot=pe(Z,ot.value,fe),ot!==null&&(O=h(ot,O,Ye),lt===null?Be=ot:lt.sibling=ot,lt=ot);return rt&&sr(Z,Ye),Be}for(Le=o(Le);!ot.done;Ye++,ot=Y.next())ot=oe(Le,Z,Ye,ot.value,fe),ot!==null&&(t&&ot.alternate!==null&&Le.delete(ot.key===null?Ye:ot.key),O=h(ot,O,Ye),lt===null?Be=ot:lt.sibling=ot,lt=ot);return t&&Le.forEach(function(q1){return s(Z,q1)}),rt&&sr(Z,Ye),Be}function bt(Z,O,Y,fe){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var Be=Y.key;O!==null;){if(O.key===Be){if(Be=Y.type,Be===j){if(O.tag===7){a(Z,O.sibling),fe=f(O,Y.props.children),fe.return=Z,Z=fe;break e}}else if(O.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===re&&ga(Be)===O.type){a(Z,O.sibling),fe=f(O,Y.props),cl(fe,Y),fe.return=Z,Z=fe;break e}a(Z,O);break}else s(Z,O);O=O.sibling}Y.type===j?(fe=da(Y.props.children,Z.mode,fe,Y.key),fe.return=Z,Z=fe):(fe=Do(Y.type,Y.key,Y.props,null,Z.mode,fe),cl(fe,Y),fe.return=Z,Z=fe)}return v(Z);case N:e:{for(Be=Y.key;O!==null;){if(O.key===Be)if(O.tag===4&&O.stateNode.containerInfo===Y.containerInfo&&O.stateNode.implementation===Y.implementation){a(Z,O.sibling),fe=f(O,Y.children||[]),fe.return=Z,Z=fe;break e}else{a(Z,O);break}else s(Z,O);O=O.sibling}fe=Hu(Y,Z.mode,fe),fe.return=Z,Z=fe}return v(Z);case re:return Y=ga(Y),bt(Z,O,Y,fe)}if(xe(Y))return Me(Z,O,Y,fe);if(ce(Y)){if(Be=ce(Y),typeof Be!="function")throw Error(i(150));return Y=Be.call(Y),$e(Z,O,Y,fe)}if(typeof Y.then=="function")return bt(Z,O,Uo(Y),fe);if(Y.$$typeof===R)return bt(Z,O,Mo(Z,Y),fe);Bo(Z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,O!==null&&O.tag===6?(a(Z,O.sibling),fe=f(O,Y),fe.return=Z,Z=fe):(a(Z,O),fe=$u(Y,Z.mode,fe),fe.return=Z,Z=fe),v(Z)):a(Z,O)}return function(Z,O,Y,fe){try{ol=0;var Be=bt(Z,O,Y,fe);return oi=null,Be}catch(Le){if(Le===li||Le===Oo)throw Le;var lt=ts(29,Le,null,Z.mode);return lt.lanes=fe,lt.return=Z,lt}finally{}}}var ba=Vm(!0),Qm=Vm(!1),Dr=!1;function Ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ed(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ar(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Rr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ct&2)!==0){var f=o.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s,s=To(t),km(t,null,a),s}return ko(t,o,s,a),To(t)}function ul(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Cn(t,a)}}function td(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?f=h=v:h=h.next=v,a=a.next}while(a!==null);h===null?f=h=s:h=h.next=s}else f=h=s;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var nd=!1;function dl(){if(nd){var t=ii;if(t!==null)throw t}}function fl(t,s,a,o){nd=!1;var f=t.updateQueue;Dr=!1;var h=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var T=S,X=T.next;T.next=null,v===null?h=X:v.next=X,v=T;var ue=t.alternate;ue!==null&&(ue=ue.updateQueue,S=ue.lastBaseUpdate,S!==v&&(S===null?ue.firstBaseUpdate=X:S.next=X,ue.lastBaseUpdate=T))}if(h!==null){var pe=f.baseState;v=0,ue=X=T=null,S=h;do{var se=S.lane&-536870913,oe=se!==S.lane;if(oe?(nt&se)===se:(o&se)===se){se!==0&&se===ai&&(nd=!0),ue!==null&&(ue=ue.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Me=t,$e=S;se=s;var bt=a;switch($e.tag){case 1:if(Me=$e.payload,typeof Me=="function"){pe=Me.call(bt,pe,se);break e}pe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=$e.payload,se=typeof Me=="function"?Me.call(bt,pe,se):Me,se==null)break e;pe=y({},pe,se);break e;case 2:Dr=!0}}se=S.callback,se!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ue===null?(X=ue=oe,T=pe):ue=ue.next=oe,v|=se;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;oe=S,S=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);ue===null&&(T=pe),f.baseState=T,f.firstBaseUpdate=X,f.lastBaseUpdate=ue,h===null&&(f.shared.lanes=0),Ur|=v,t.lanes=v,t.memoizedState=pe}}function Im(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Pm(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Im(a[t],s)}var ci=C(null),qo=C(0);function Wm(t,s){t=mr,ae(qo,t),ae(ci,s),mr=t|s.baseLanes}function sd(){ae(qo,mr),ae(ci,ci.current)}function rd(){mr=qo.current,I(ci),I(qo)}var ns=C(null),xs=null;function Mr(t){var s=t.alternate;ae(Ft,Ft.current&1),ae(ns,t),xs===null&&(s===null||ci.current!==null||s.memoizedState!==null)&&(xs=t)}function ad(t){ae(Ft,Ft.current),ae(ns,t),xs===null&&(xs=t)}function Gm(t){t.tag===22?(ae(Ft,Ft.current),ae(ns,t),xs===null&&(xs=t)):zr()}function zr(){ae(Ft,Ft.current),ae(ns,ns.current)}function ss(t){I(ns),xs===t&&(xs=null),I(Ft)}var Ft=C(0);function $o(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ff(a)||hf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ir=0,Ke=null,gt=null,Xt=null,Ho=!1,ui=!1,va=!1,Zo=0,hl=0,di=null,Tw=0;function Bt(){throw Error(i(321))}function id(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!es(t[a],s[a]))return!1;return!0}function ld(t,s,a,o,f,h){return ir=h,Ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=t===null||t.memoizedState===null?Rp:Sd,va=!1,h=a(o,f),va=!1,ui&&(h=Ym(s,a,o,f)),Km(t),h}function Km(t){z.H=gl;var s=gt!==null&&gt.next!==null;if(ir=0,Xt=gt=Ke=null,Ho=!1,hl=0,di=null,s)throw Error(i(300));t===null||Jt||(t=t.dependencies,t!==null&&Ro(t)&&(Jt=!0))}function Ym(t,s,a,o){Ke=t;var f=0;do{if(ui&&(di=null),hl=0,ui=!1,25<=f)throw Error(i(301));if(f+=1,Xt=gt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}z.H=Mp,h=s(a,o)}while(ui);return h}function Dw(){var t=z.H,s=t.useState()[0];return s=typeof s.then=="function"?ml(s):s,t=t.useState()[0],(gt!==null?gt.memoizedState:null)!==t&&(Ke.flags|=1024),s}function od(){var t=Zo!==0;return Zo=0,t}function cd(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function ud(t){if(Ho){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ho=!1}ir=0,Xt=gt=Ke=null,ui=!1,hl=Zo=0,di=null}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Ke.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Vt(){if(gt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var s=Xt===null?Ke.memoizedState:Xt.next;if(s!==null)Xt=s,gt=t;else{if(t===null)throw Ke.alternate===null?Error(i(467)):Error(i(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Xt===null?Ke.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(t){var s=hl;return hl+=1,di===null&&(di=[]),t=Hm(di,t,s),s=Ke,(Xt===null?s.memoizedState:Xt.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?Rp:Sd),t}function Vo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ml(t);if(t.$$typeof===R)return wn(t)}throw Error(i(438,String(t)))}function dd(t){var s=null,a=Ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ke.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Fo(),Ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=H;return s.index++,a}function lr(t,s){return typeof s=="function"?s(t):s}function Qo(t){var s=Vt();return fd(s,gt,t)}function fd(t,s,a){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var f=t.baseQueue,h=o.pending;if(h!==null){if(f!==null){var v=f.next;f.next=h.next,h.next=v}s.baseQueue=f=h,o.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{s=f.next;var S=v=null,T=null,X=s,ue=!1;do{var pe=X.lane&-536870913;if(pe!==X.lane?(nt&pe)===pe:(ir&pe)===pe){var se=X.revertLane;if(se===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),pe===ai&&(ue=!0);else if((ir&se)===se){X=X.next,se===ai&&(ue=!0);continue}else pe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},T===null?(S=T=pe,v=h):T=T.next=pe,Ke.lanes|=se,Ur|=se;pe=X.action,va&&a(h,pe),h=X.hasEagerState?X.eagerState:a(h,pe)}else se={lane:pe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},T===null?(S=T=se,v=h):T=T.next=se,Ke.lanes|=pe,Ur|=pe;X=X.next}while(X!==null&&X!==s);if(T===null?v=h:T.next=S,!es(h,t.memoizedState)&&(Jt=!0,ue&&(a=ii,a!==null)))throw a;t.memoizedState=h,t.baseState=v,t.baseQueue=T,o.lastRenderedState=h}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function hd(t){var s=Vt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var o=a.dispatch,f=a.pending,h=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do h=t(h,v.action),v=v.next;while(v!==f);es(h,s.memoizedState)||(Jt=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),a.lastRenderedState=h}return[h,o]}function Xm(t,s,a){var o=Ke,f=Vt(),h=rt;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=s();var v=!es((gt||f).memoizedState,a);if(v&&(f.memoizedState=a,Jt=!0),f=f.queue,gd(tp.bind(null,o,f,t),[t]),f.getSnapshot!==s||v||Xt!==null&&Xt.memoizedState.tag&1){if(o.flags|=2048,fi(9,{destroy:void 0},ep.bind(null,o,f,a,s),null),yt===null)throw Error(i(349));h||(ir&127)!==0||Jm(o,s,a)}return a}function Jm(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ke.updateQueue,s===null?(s=Fo(),Ke.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function ep(t,s,a,o){s.value=a,s.getSnapshot=o,np(s)&&sp(t)}function tp(t,s,a){return a(function(){np(s)&&sp(t)})}function np(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!es(t,a)}catch{return!0}}function sp(t){var s=ua(t,2);s!==null&&Qn(s,t,2)}function md(t){var s=zn();if(typeof t=="function"){var a=t;if(t=a(),va){Pt(!0);try{a()}finally{Pt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:t},s}function rp(t,s,a,o){return t.baseState=a,fd(t,gt,typeof o=="function"?o:lr)}function Aw(t,s,a,o,f){if(Wo(t))throw Error(i(485));if(t=s.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};z.T!==null?a(!0):h.isTransition=!1,o(h),a=s.pending,a===null?(h.next=s.pending=h,ap(s,h)):(h.next=a.next,s.pending=a.next=h)}}function ap(t,s){var a=s.action,o=s.payload,f=t.state;if(s.isTransition){var h=z.T,v={};z.T=v;try{var S=a(f,o),T=z.S;T!==null&&T(v,S),ip(t,s,S)}catch(X){pd(t,s,X)}finally{h!==null&&v.types!==null&&(h.types=v.types),z.T=h}}else try{h=a(f,o),ip(t,s,h)}catch(X){pd(t,s,X)}}function ip(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){lp(t,s,o)},function(o){return pd(t,s,o)}):lp(t,s,a)}function lp(t,s,a){s.status="fulfilled",s.value=a,op(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,ap(t,a)))}function pd(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,op(s),s=s.next;while(s!==o)}t.action=null}function op(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function cp(t,s){return s}function up(t,s){if(rt){var a=yt.formState;if(a!==null){e:{var o=Ke;if(rt){if(kt){t:{for(var f=kt,h=gs;f.nodeType!==8;){if(!h){f=null;break t}if(f=bs(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){kt=bs(f.nextSibling),o=f.data==="F!";break e}}kr(o)}o=!1}o&&(s=a[0])}}return a=zn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:s},a.queue=o,a=Tp.bind(null,Ke,o),o.dispatch=a,o=md(!1),h=wd.bind(null,Ke,!1,o.queue),o=zn(),f={state:s,dispatch:null,action:t,pending:null},o.queue=f,a=Aw.bind(null,Ke,f,h,a),f.dispatch=a,o.memoizedState=t,[s,a,!1]}function dp(t){var s=Vt();return fp(s,gt,t)}function fp(t,s,a){if(s=fd(t,s,cp)[0],t=Qo(lr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=ml(s)}catch(v){throw v===li?Oo:v}else o=s;s=Vt();var f=s.queue,h=f.dispatch;return a!==s.memoizedState&&(Ke.flags|=2048,fi(9,{destroy:void 0},Rw.bind(null,f,a),null)),[o,h,t]}function Rw(t,s){t.action=s}function hp(t){var s=Vt(),a=gt;if(a!==null)return fp(s,a,t);Vt(),s=s.memoizedState,a=Vt();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function fi(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Ke.updateQueue,s===null&&(s=Fo(),Ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function mp(){return Vt().memoizedState}function Io(t,s,a,o){var f=zn();Ke.flags|=t,f.memoizedState=fi(1|s,{destroy:void 0},a,o===void 0?null:o)}function Po(t,s,a,o){var f=Vt();o=o===void 0?null:o;var h=f.memoizedState.inst;gt!==null&&o!==null&&id(o,gt.memoizedState.deps)?f.memoizedState=fi(s,h,a,o):(Ke.flags|=t,f.memoizedState=fi(1|s,h,a,o))}function pp(t,s){Io(8390656,8,t,s)}function gd(t,s){Po(2048,8,t,s)}function Mw(t){Ke.flags|=4;var s=Ke.updateQueue;if(s===null)s=Fo(),Ke.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function gp(t){var s=Vt().memoizedState;return Mw({ref:s,nextImpl:t}),function(){if((ct&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function xp(t,s){return Po(4,2,t,s)}function bp(t,s){return Po(4,4,t,s)}function vp(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function yp(t,s,a){a=a!=null?a.concat([t]):null,Po(4,4,vp.bind(null,s,t),a)}function xd(){}function wp(t,s){var a=Vt();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&id(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function Sp(t,s){var a=Vt();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&id(s,o[1]))return o[0];if(o=t(),va){Pt(!0);try{t()}finally{Pt(!1)}}return a.memoizedState=[o,s],o}function bd(t,s,a){return a===void 0||(ir&1073741824)!==0&&(nt&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=jg(),Ke.lanes|=t,Ur|=t,a)}function jp(t,s,a,o){return es(a,s)?a:ci.current!==null?(t=bd(t,a,o),es(t,s)||(Jt=!0),t):(ir&42)===0||(ir&1073741824)!==0&&(nt&261930)===0?(Jt=!0,t.memoizedState=a):(t=jg(),Ke.lanes|=t,Ur|=t,s)}function Ep(t,s,a,o,f){var h=ee.p;ee.p=h!==0&&8>h?h:8;var v=z.T,S={};z.T=S,wd(t,!1,s,a);try{var T=f(),X=z.S;if(X!==null&&X(S,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var ue=kw(T,o);pl(t,s,ue,is(t))}else pl(t,s,o,is(t))}catch(pe){pl(t,s,{then:function(){},status:"rejected",reason:pe},is())}finally{ee.p=h,v!==null&&S.types!==null&&(v.types=S.types),z.T=v}}function zw(){}function vd(t,s,a,o){if(t.tag!==5)throw Error(i(476));var f=Np(t).queue;Ep(t,f,s,K,a===null?zw:function(){return Cp(t),a(o)})}function Np(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:K},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Cp(t){var s=Np(t);s.next===null&&(s=t.alternate.memoizedState),pl(t,s.next.queue,{},is())}function yd(){return wn(Rl)}function _p(){return Vt().memoizedState}function kp(){return Vt().memoizedState}function Ow(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=is();t=Ar(a);var o=Rr(s,t,a);o!==null&&(Qn(o,s,a),ul(o,s,a)),s={cache:Gu()},t.payload=s;return}s=s.return}}function Lw(t,s,a){var o=is();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Wo(t)?Dp(s,a):(a=Bu(t,s,a,o),a!==null&&(Qn(a,t,o),Ap(a,s,o)))}function Tp(t,s,a){var o=is();pl(t,s,a,o)}function pl(t,s,a,o){var f={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wo(t))Dp(s,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var v=s.lastRenderedState,S=h(v,a);if(f.hasEagerState=!0,f.eagerState=S,es(S,v))return ko(t,s,f,0),yt===null&&_o(),!1}catch{}finally{}if(a=Bu(t,s,f,o),a!==null)return Qn(a,t,o),Ap(a,s,o),!0}return!1}function wd(t,s,a,o){if(o={lane:2,revertLane:Jd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Wo(t)){if(s)throw Error(i(479))}else s=Bu(t,a,o,2),s!==null&&Qn(s,t,2)}function Wo(t){var s=t.alternate;return t===Ke||s!==null&&s===Ke}function Dp(t,s){ui=Ho=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ap(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Cn(t,a)}}var gl={readContext:wn,use:Vo,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};gl.useEffectEvent=Bt;var Rp={readContext:wn,use:Vo,useCallback:function(t,s){return zn().memoizedState=[t,s===void 0?null:s],t},useContext:wn,useEffect:pp,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Io(4194308,4,vp.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Io(4194308,4,t,s)},useInsertionEffect:function(t,s){Io(4,2,t,s)},useMemo:function(t,s){var a=zn();s=s===void 0?null:s;var o=t();if(va){Pt(!0);try{t()}finally{Pt(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=zn();if(a!==void 0){var f=a(s);if(va){Pt(!0);try{a(s)}finally{Pt(!1)}}}else f=s;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=Lw.bind(null,Ke,t),[o.memoizedState,t]},useRef:function(t){var s=zn();return t={current:t},s.memoizedState=t},useState:function(t){t=md(t);var s=t.queue,a=Tp.bind(null,Ke,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:xd,useDeferredValue:function(t,s){var a=zn();return bd(a,t,s)},useTransition:function(){var t=md(!1);return t=Ep.bind(null,Ke,t.queue,!0,!1),zn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Ke,f=zn();if(rt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),yt===null)throw Error(i(349));(nt&127)!==0||Jm(o,s,a)}f.memoizedState=a;var h={value:a,getSnapshot:s};return f.queue=h,pp(tp.bind(null,o,h,t),[t]),o.flags|=2048,fi(9,{destroy:void 0},ep.bind(null,o,h,a,s),null),a},useId:function(){var t=zn(),s=yt.identifierPrefix;if(rt){var a=Fs,o=Zs;a=(o&~(1<<32-Ct(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Zo++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Tw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:yd,useFormState:up,useActionState:up,useOptimistic:function(t){var s=zn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=wd.bind(null,Ke,!0,a),a.dispatch=s,[t,s]},useMemoCache:dd,useCacheRefresh:function(){return zn().memoizedState=Ow.bind(null,Ke)},useEffectEvent:function(t){var s=zn(),a={impl:t};return s.memoizedState=a,function(){if((ct&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Sd={readContext:wn,use:Vo,useCallback:wp,useContext:wn,useEffect:gd,useImperativeHandle:yp,useInsertionEffect:xp,useLayoutEffect:bp,useMemo:Sp,useReducer:Qo,useRef:mp,useState:function(){return Qo(lr)},useDebugValue:xd,useDeferredValue:function(t,s){var a=Vt();return jp(a,gt.memoizedState,t,s)},useTransition:function(){var t=Qo(lr)[0],s=Vt().memoizedState;return[typeof t=="boolean"?t:ml(t),s]},useSyncExternalStore:Xm,useId:_p,useHostTransitionStatus:yd,useFormState:dp,useActionState:dp,useOptimistic:function(t,s){var a=Vt();return rp(a,gt,t,s)},useMemoCache:dd,useCacheRefresh:kp};Sd.useEffectEvent=gp;var Mp={readContext:wn,use:Vo,useCallback:wp,useContext:wn,useEffect:gd,useImperativeHandle:yp,useInsertionEffect:xp,useLayoutEffect:bp,useMemo:Sp,useReducer:hd,useRef:mp,useState:function(){return hd(lr)},useDebugValue:xd,useDeferredValue:function(t,s){var a=Vt();return gt===null?bd(a,t,s):jp(a,gt.memoizedState,t,s)},useTransition:function(){var t=hd(lr)[0],s=Vt().memoizedState;return[typeof t=="boolean"?t:ml(t),s]},useSyncExternalStore:Xm,useId:_p,useHostTransitionStatus:yd,useFormState:hp,useActionState:hp,useOptimistic:function(t,s){var a=Vt();return gt!==null?rp(a,gt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:dd,useCacheRefresh:kp};Mp.useEffectEvent=gp;function jd(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:y({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ed={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=is(),f=Ar(o);f.payload=s,a!=null&&(f.callback=a),s=Rr(t,f,o),s!==null&&(Qn(s,t,o),ul(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=is(),f=Ar(o);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Rr(t,f,o),s!==null&&(Qn(s,t,o),ul(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=is(),o=Ar(a);o.tag=2,s!=null&&(o.callback=s),s=Rr(t,o,a),s!==null&&(Qn(s,t,a),ul(s,t,a))}};function zp(t,s,a,o,f,h,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,v):s.prototype&&s.prototype.isPureReactComponent?!nl(a,o)||!nl(f,h):!0}function Op(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&Ed.enqueueReplaceState(s,s.state,null)}function ya(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=y({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Lp(t){Co(t)}function Up(t){console.error(t)}function Bp(t){Co(t)}function Go(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function qp(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Nd(t,s,a){return a=Ar(a),a.tag=3,a.payload={element:null},a.callback=function(){Go(t,s)},a}function $p(t){return t=Ar(t),t.tag=3,t}function Hp(t,s,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var h=o.value;t.payload=function(){return f(h)},t.callback=function(){qp(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){qp(s,a,o),typeof f!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function Uw(t,s,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&ri(s,a,f,!0),a=ns.current,a!==null){switch(a.tag){case 31:case 13:return xs===null?lc():a.alternate===null&&qt===0&&(qt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===Lo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Kd(t,o,f)),!1;case 22:return a.flags|=65536,o===Lo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Kd(t,o,f)),!1}throw Error(i(435,a.tag))}return Kd(t,o,f),lc(),!1}if(rt)return s=ns.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,o!==Vu&&(t=Error(i(422),{cause:o}),al(hs(t,a)))):(o!==Vu&&(s=Error(i(423),{cause:o}),al(hs(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=hs(o,a),f=Nd(t.stateNode,o,f),td(t,f),qt!==4&&(qt=2)),!1;var h=Error(i(520),{cause:o});if(h=hs(h,a),El===null?El=[h]:El.push(h),qt!==4&&(qt=2),s===null)return!0;o=hs(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Nd(a.stateNode,o,t),td(a,t),!1;case 1:if(s=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Br===null||!Br.has(h))))return a.flags|=65536,f&=-f,a.lanes|=f,f=$p(f),Hp(f,t,a,o),td(a,f),!1}a=a.return}while(a!==null);return!1}var Cd=Error(i(461)),Jt=!1;function Sn(t,s,a,o){s.child=t===null?Qm(s,null,a,o):ba(s,t.child,a,o)}function Zp(t,s,a,o,f){a=a.render;var h=s.ref;if("ref"in o){var v={};for(var S in o)S!=="ref"&&(v[S]=o[S])}else v=o;return ma(s),o=ld(t,s,a,v,h,f),S=od(),t!==null&&!Jt?(cd(t,s,f),or(t,s,f)):(rt&&S&&Zu(s),s.flags|=1,Sn(t,s,o,f),s.child)}function Fp(t,s,a,o,f){if(t===null){var h=a.type;return typeof h=="function"&&!qu(h)&&h.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=h,Vp(t,s,h,o,f)):(t=Do(a.type,null,o,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(h=t.child,!zd(t,f)){var v=h.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(v,o)&&t.ref===s.ref)return or(t,s,f)}return s.flags|=1,t=nr(h,o),t.ref=s.ref,t.return=s,s.child=t}function Vp(t,s,a,o,f){if(t!==null){var h=t.memoizedProps;if(nl(h,o)&&t.ref===s.ref)if(Jt=!1,s.pendingProps=o=h,zd(t,f))(t.flags&131072)!==0&&(Jt=!0);else return s.lanes=t.lanes,or(t,s,f)}return _d(t,s,a,o,f)}function Qp(t,s,a,o){var f=o.children,h=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,t!==null){for(o=s.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~h}else o=0,s.child=null;return Ip(t,s,h,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&zo(s,h!==null?h.cachePool:null),h!==null?Wm(s,h):sd(),Gm(s);else return o=s.lanes=536870912,Ip(t,s,h!==null?h.baseLanes|a:a,a,o)}else h!==null?(zo(s,h.cachePool),Wm(s,h),zr(),s.memoizedState=null):(t!==null&&zo(s,null),sd(),zr());return Sn(t,s,f,a),s.child}function xl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ip(t,s,a,o,f){var h=Yu();return h=h===null?null:{parent:Yt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&zo(s,null),sd(),Gm(s),t!==null&&ri(t,s,o,!0),s.childLanes=f,null}function Ko(t,s){return s=Xo({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Pp(t,s,a){return ba(s,t.child,null,a),t=Ko(s,s.pendingProps),t.flags|=2,ss(s),s.memoizedState=null,t}function Bw(t,s,a){var o=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(rt){if(o.mode==="hidden")return t=Ko(s,o),s.lanes=536870912,xl(null,t);if(ad(s),(t=kt)?(t=ax(t,gs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Cr!==null?{id:Zs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},a=Dm(t),a.return=s,s.child=a,yn=s,kt=null)):t=null,t===null)throw kr(s);return s.lanes=536870912,null}return Ko(s,o)}var h=t.memoizedState;if(h!==null){var v=h.dehydrated;if(ad(s),f)if(s.flags&256)s.flags&=-257,s=Pp(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Jt||ri(t,s,a,!1),f=(a&t.childLanes)!==0,Jt||f){if(o=yt,o!==null&&(v=hn(o,a),v!==0&&v!==h.retryLane))throw h.retryLane=v,ua(t,v),Qn(o,t,v),Cd;lc(),s=Pp(t,s,a)}else t=h.treeContext,kt=bs(v.nextSibling),yn=s,rt=!0,_r=null,gs=!1,t!==null&&Mm(s,t),s=Ko(s,o),s.flags|=4096;return s}return t=nr(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Yo(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function _d(t,s,a,o,f){return ma(s),a=ld(t,s,a,o,void 0,f),o=od(),t!==null&&!Jt?(cd(t,s,f),or(t,s,f)):(rt&&o&&Zu(s),s.flags|=1,Sn(t,s,a,f),s.child)}function Wp(t,s,a,o,f,h){return ma(s),s.updateQueue=null,a=Ym(s,o,a,f),Km(t),o=od(),t!==null&&!Jt?(cd(t,s,h),or(t,s,h)):(rt&&o&&Zu(s),s.flags|=1,Sn(t,s,a,h),s.child)}function Gp(t,s,a,o,f){if(ma(s),s.stateNode===null){var h=ei,v=a.contextType;typeof v=="object"&&v!==null&&(h=wn(v)),h=new a(o,h),s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Ed,s.stateNode=h,h._reactInternals=s,h=s.stateNode,h.props=o,h.state=s.memoizedState,h.refs={},Ju(s),v=a.contextType,h.context=typeof v=="object"&&v!==null?wn(v):ei,h.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(jd(s,a,v,o),h.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Ed.enqueueReplaceState(h,h.state,null),fl(s,o,h,f),dl(),h.state=s.memoizedState),typeof h.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){h=s.stateNode;var S=s.memoizedProps,T=ya(a,S);h.props=T;var X=h.context,ue=a.contextType;v=ei,typeof ue=="object"&&ue!==null&&(v=wn(ue));var pe=a.getDerivedStateFromProps;ue=typeof pe=="function"||typeof h.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,ue||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(S||X!==v)&&Op(s,h,o,v),Dr=!1;var se=s.memoizedState;h.state=se,fl(s,o,h,f),dl(),X=s.memoizedState,S||se!==X||Dr?(typeof pe=="function"&&(jd(s,a,pe,o),X=s.memoizedState),(T=Dr||zp(s,a,T,o,se,X,v))?(ue||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=X),h.props=o,h.state=X,h.context=v,o=T):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{h=s.stateNode,ed(t,s),v=s.memoizedProps,ue=ya(a,v),h.props=ue,pe=s.pendingProps,se=h.context,X=a.contextType,T=ei,typeof X=="object"&&X!==null&&(T=wn(X)),S=a.getDerivedStateFromProps,(X=typeof S=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==pe||se!==T)&&Op(s,h,o,T),Dr=!1,se=s.memoizedState,h.state=se,fl(s,o,h,f),dl();var oe=s.memoizedState;v!==pe||se!==oe||Dr||t!==null&&t.dependencies!==null&&Ro(t.dependencies)?(typeof S=="function"&&(jd(s,a,S,o),oe=s.memoizedState),(ue=Dr||zp(s,a,ue,o,se,oe,T)||t!==null&&t.dependencies!==null&&Ro(t.dependencies))?(X||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,oe,T),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,oe,T)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=oe),h.props=o,h.state=oe,h.context=T,o=ue):(typeof h.componentDidUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(s.flags|=1024),o=!1)}return h=o,Yo(t,s),o=(s.flags&128)!==0,h||o?(h=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:h.render(),s.flags|=1,t!==null&&o?(s.child=ba(s,t.child,null,f),s.child=ba(s,null,a,f)):Sn(t,s,a,f),s.memoizedState=h.state,t=s.child):t=or(t,s,f),t}function Kp(t,s,a,o){return fa(),s.flags|=256,Sn(t,s,a,o),s.child}var kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(t){return{baseLanes:t,cachePool:qm()}}function Dd(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=as),t}function Yp(t,s,a){var o=s.pendingProps,f=!1,h=(s.flags&128)!==0,v;if((v=h)||(v=t!==null&&t.memoizedState===null?!1:(Ft.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(rt){if(f?Mr(s):zr(),(t=kt)?(t=ax(t,gs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Cr!==null?{id:Zs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},a=Dm(t),a.return=s,s.child=a,yn=s,kt=null)):t=null,t===null)throw kr(s);return hf(t)?s.lanes=32:s.lanes=536870912,null}var S=o.children;return o=o.fallback,f?(zr(),f=s.mode,S=Xo({mode:"hidden",children:S},f),o=da(o,f,a,null),S.return=s,o.return=s,S.sibling=o,s.child=S,o=s.child,o.memoizedState=Td(a),o.childLanes=Dd(t,v,a),s.memoizedState=kd,xl(null,o)):(Mr(s),Ad(s,S))}var T=t.memoizedState;if(T!==null&&(S=T.dehydrated,S!==null)){if(h)s.flags&256?(Mr(s),s.flags&=-257,s=Rd(t,s,a)):s.memoizedState!==null?(zr(),s.child=t.child,s.flags|=128,s=null):(zr(),S=o.fallback,f=s.mode,o=Xo({mode:"visible",children:o.children},f),S=da(S,f,a,null),S.flags|=2,o.return=s,S.return=s,o.sibling=S,s.child=o,ba(s,t.child,null,a),o=s.child,o.memoizedState=Td(a),o.childLanes=Dd(t,v,a),s.memoizedState=kd,s=xl(null,o));else if(Mr(s),hf(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var X=v.dgst;v=X,o=Error(i(419)),o.stack="",o.digest=v,al({value:o,source:null,stack:null}),s=Rd(t,s,a)}else if(Jt||ri(t,s,a,!1),v=(a&t.childLanes)!==0,Jt||v){if(v=yt,v!==null&&(o=hn(v,a),o!==0&&o!==T.retryLane))throw T.retryLane=o,ua(t,o),Qn(v,t,o),Cd;ff(S)||lc(),s=Rd(t,s,a)}else ff(S)?(s.flags|=192,s.child=t.child,s=null):(t=T.treeContext,kt=bs(S.nextSibling),yn=s,rt=!0,_r=null,gs=!1,t!==null&&Mm(s,t),s=Ad(s,o.children),s.flags|=4096);return s}return f?(zr(),S=o.fallback,f=s.mode,T=t.child,X=T.sibling,o=nr(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,X!==null?S=nr(X,S):(S=da(S,f,a,null),S.flags|=2),S.return=s,o.return=s,o.sibling=S,s.child=o,xl(null,o),o=s.child,S=t.child.memoizedState,S===null?S=Td(a):(f=S.cachePool,f!==null?(T=Yt._currentValue,f=f.parent!==T?{parent:T,pool:T}:f):f=qm(),S={baseLanes:S.baseLanes|a,cachePool:f}),o.memoizedState=S,o.childLanes=Dd(t,v,a),s.memoizedState=kd,xl(t.child,o)):(Mr(s),a=t.child,t=a.sibling,a=nr(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function Ad(t,s){return s=Xo({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Xo(t,s){return t=ts(22,t,null,s),t.lanes=0,t}function Rd(t,s,a){return ba(s,t.child,null,a),t=Ad(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Xp(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Pu(t.return,s,a)}function Md(t,s,a,o,f,h){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f,treeForkCount:h}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=f,v.treeForkCount=h)}function Jp(t,s,a){var o=s.pendingProps,f=o.revealOrder,h=o.tail;o=o.children;var v=Ft.current,S=(v&2)!==0;if(S?(v=v&1|2,s.flags|=128):v&=1,ae(Ft,v),Sn(t,s,o,a),o=rt?rl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xp(t,a,s);else if(t.tag===19)Xp(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&$o(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Md(s,!1,f,a,h,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&$o(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Md(s,!0,a,null,h,o);break;case"together":Md(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function or(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ur|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(ri(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=nr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=nr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function zd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Ro(t)))}function qw(t,s,a){switch(s.tag){case 3:L(s,s.stateNode.containerInfo),Tr(s,Yt,t.memoizedState.cache),fa();break;case 27:case 5:me(s);break;case 4:L(s,s.stateNode.containerInfo);break;case 10:Tr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ad(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(Mr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Yp(t,s,a):(Mr(s),t=or(t,s,a),t!==null?t.sibling:null);Mr(s);break;case 19:var f=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(ri(t,s,a,!1),o=(a&s.childLanes)!==0),f){if(o)return Jp(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Ft,Ft.current),o)break;return null;case 22:return s.lanes=0,Qp(t,s,a,s.pendingProps);case 24:Tr(s,Yt,t.memoizedState.cache)}return or(t,s,a)}function eg(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Jt=!0;else{if(!zd(t,a)&&(s.flags&128)===0)return Jt=!1,qw(t,s,a);Jt=(t.flags&131072)!==0}else Jt=!1,rt&&(s.flags&1048576)!==0&&Rm(s,rl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=ga(s.elementType),s.type=t,typeof t=="function")qu(t)?(o=ya(t,o),s.tag=1,s=Gp(null,s,t,o,a)):(s.tag=0,s=_d(null,s,t,o,a));else{if(t!=null){var f=t.$$typeof;if(f===q){s.tag=11,s=Zp(null,s,t,o,a);break e}else if(f===$){s.tag=14,s=Fp(null,s,t,o,a);break e}}throw s=de(t)||t,Error(i(306,s,""))}}return s;case 0:return _d(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,f=ya(o,s.pendingProps),Gp(t,s,o,f,a);case 3:e:{if(L(s,s.stateNode.containerInfo),t===null)throw Error(i(387));o=s.pendingProps;var h=s.memoizedState;f=h.element,ed(t,s),fl(s,o,null,a);var v=s.memoizedState;if(o=v.cache,Tr(s,Yt,o),o!==h.cache&&Wu(s,[Yt],a,!0),dl(),o=v.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){s=Kp(t,s,o,a);break e}else if(o!==f){f=hs(Error(i(424)),s),al(f),s=Kp(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(kt=bs(t.firstChild),yn=s,rt=!0,_r=null,gs=!0,a=Qm(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fa(),o===f){s=or(t,s,a);break e}Sn(t,s,o,a)}s=s.child}return s;case 26:return Yo(t,s),t===null?(a=dx(s.type,null,s.pendingProps,null))?s.memoizedState=a:rt||(a=s.type,t=s.pendingProps,o=mc(G.current).createElement(a),o[at]=s,o[vn]=t,jn(o,a,t),jt(o),s.stateNode=o):s.memoizedState=dx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return me(s),t===null&&rt&&(o=s.stateNode=ox(s.type,s.pendingProps,G.current),yn=s,gs=!0,f=kt,Zr(s.type)?(mf=f,kt=bs(o.firstChild)):kt=f),Sn(t,s,s.pendingProps.children,a),Yo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&rt&&((f=o=kt)&&(o=p1(o,s.type,s.pendingProps,gs),o!==null?(s.stateNode=o,yn=s,kt=bs(o.firstChild),gs=!1,f=!0):f=!1),f||kr(s)),me(s),f=s.type,h=s.pendingProps,v=t!==null?t.memoizedProps:null,o=h.children,cf(f,h)?o=null:v!==null&&cf(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=ld(t,s,Dw,null,null,a),Rl._currentValue=f),Yo(t,s),Sn(t,s,o,a),s.child;case 6:return t===null&&rt&&((t=a=kt)&&(a=g1(a,s.pendingProps,gs),a!==null?(s.stateNode=a,yn=s,kt=null,t=!0):t=!1),t||kr(s)),null;case 13:return Yp(t,s,a);case 4:return L(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=ba(s,null,o,a):Sn(t,s,o,a),s.child;case 11:return Zp(t,s,s.type,s.pendingProps,a);case 7:return Sn(t,s,s.pendingProps,a),s.child;case 8:return Sn(t,s,s.pendingProps.children,a),s.child;case 12:return Sn(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,Tr(s,s.type,o.value),Sn(t,s,o.children,a),s.child;case 9:return f=s.type._context,o=s.pendingProps.children,ma(s),f=wn(f),o=o(f),s.flags|=1,Sn(t,s,o,a),s.child;case 14:return Fp(t,s,s.type,s.pendingProps,a);case 15:return Vp(t,s,s.type,s.pendingProps,a);case 19:return Jp(t,s,a);case 31:return Bw(t,s,a);case 22:return Qp(t,s,a,s.pendingProps);case 24:return ma(s),o=wn(Yt),t===null?(f=Yu(),f===null&&(f=yt,h=Gu(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=a),f=h),s.memoizedState={parent:o,cache:f},Ju(s),Tr(s,Yt,f)):((t.lanes&a)!==0&&(ed(t,s),fl(s,null,null,a),dl()),f=t.memoizedState,h=s.memoizedState,f.parent!==o?(f={parent:o,cache:o},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Tr(s,Yt,o)):(o=h.cache,Tr(s,Yt,o),o!==f.cache&&Wu(s,[Yt],a,!0))),Sn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function cr(t){t.flags|=4}function Od(t,s,a,o,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(_g())t.flags|=8192;else throw xa=Lo,Xu}else t.flags&=-16777217}function tg(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!gx(s))if(_g())t.flags|=8192;else throw xa=Lo,Xu}function Jo(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?dn():536870912,t.lanes|=s,gi|=s)}function bl(t,s){if(!rt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Tt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function $w(t,s,a){var o=s.pendingProps;switch(Fu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ar(Yt),ie(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(si(s)?cr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qu())),Tt(s),null;case 26:var f=s.type,h=s.memoizedState;return t===null?(cr(s),h!==null?(Tt(s),tg(s,h)):(Tt(s),Od(s,f,null,o,a))):h?h!==t.memoizedState?(cr(s),Tt(s),tg(s,h)):(Tt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&cr(s),Tt(s),Od(s,f,t,o,a)),null;case 27:if(Te(s),a=G.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&cr(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Tt(s),null}t=M.current,si(s)?zm(s):(t=ox(f,o,a),s.stateNode=t,cr(s))}return Tt(s),null;case 5:if(Te(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&cr(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Tt(s),null}if(h=M.current,si(s))zm(s);else{var v=mc(G.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?v.createElement(f,{is:o.is}):v.createElement(f)}}h[at]=s,h[vn]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=h;e:switch(jn(h,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&cr(s)}}return Tt(s),Od(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&cr(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(t=G.current,si(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,f=yn,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[at]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Yg(t.nodeValue,a)),t||kr(s,!0)}else t=mc(t).createTextNode(o),t[at]=s,s.stateNode=t}return Tt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=si(s),a!==null){if(t===null){if(!o)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[at]=s}else fa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),t=!1}else a=Qu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(ss(s),s):(ss(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Tt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=si(s),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[at]=s}else fa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),f=!1}else f=Qu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ss(s),s):(ss(s),null)}return ss(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==f&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Jo(s,s.updateQueue),Tt(s),null);case 4:return ie(),t===null&&sf(s.stateNode.containerInfo),Tt(s),null;case 10:return ar(s.type),Tt(s),null;case 19:if(I(Ft),o=s.memoizedState,o===null)return Tt(s),null;if(f=(s.flags&128)!==0,h=o.rendering,h===null)if(f)bl(o,!1);else{if(qt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(h=$o(t),h!==null){for(s.flags|=128,bl(o,!1),t=h.updateQueue,s.updateQueue=t,Jo(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Tm(a,t),a=a.sibling;return ae(Ft,Ft.current&1|2),rt&&sr(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&we()>rc&&(s.flags|=128,f=!0,bl(o,!1),s.lanes=4194304)}else{if(!f)if(t=$o(h),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,Jo(s,t),bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!rt)return Tt(s),null}else 2*we()-o.renderingStartTime>rc&&a!==536870912&&(s.flags|=128,f=!0,bl(o,!1),s.lanes=4194304);o.isBackwards?(h.sibling=s.child,s.child=h):(t=o.last,t!==null?t.sibling=h:s.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=we(),t.sibling=null,a=Ft.current,ae(Ft,f?a&1|2:a&1),rt&&sr(s,o.treeForkCount),t):(Tt(s),null);case 22:case 23:return ss(s),rd(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),a=s.updateQueue,a!==null&&Jo(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&I(pa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ar(Yt),Tt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Hw(t,s){switch(Fu(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ar(Yt),ie(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Te(s),null;case 31:if(s.memoizedState!==null){if(ss(s),s.alternate===null)throw Error(i(340));fa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(ss(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));fa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return I(Ft),null;case 4:return ie(),null;case 10:return ar(s.type),null;case 22:case 23:return ss(s),rd(),t!==null&&I(pa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ar(Yt),null;case 25:return null;default:return null}}function ng(t,s){switch(Fu(s),s.tag){case 3:ar(Yt),ie();break;case 26:case 27:case 5:Te(s);break;case 4:ie();break;case 31:s.memoizedState!==null&&ss(s);break;case 13:ss(s);break;case 19:I(Ft);break;case 10:ar(s.type);break;case 22:case 23:ss(s),rd(),t!==null&&I(pa);break;case 24:ar(Yt)}}function vl(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&t)===t){o=void 0;var h=a.create,v=a.inst;o=h(),v.destroy=o}a=a.next}while(a!==f)}}catch(S){ht(s,s.return,S)}}function Or(t,s,a){try{var o=s.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var h=f.next;o=h;do{if((o.tag&t)===t){var v=o.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=s;var T=a,X=S;try{X()}catch(ue){ht(f,T,ue)}}}o=o.next}while(o!==h)}}catch(ue){ht(s,s.return,ue)}}function sg(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Pm(s,a)}catch(o){ht(t,t.return,o)}}}function rg(t,s,a){a.props=ya(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){ht(t,s,o)}}function yl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(f){ht(t,s,f)}}function Vs(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){ht(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ht(t,s,f)}else a.current=null}function ag(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){ht(t,t.return,f)}}function Ld(t,s,a){try{var o=t.stateNode;c1(o,t.type,a,s),o[vn]=s}catch(f){ht(t,t.return,f)}}function ig(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zr(t.type)||t.tag===4}function Ud(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ig(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bd(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ds));else if(o!==4&&(o===27&&Zr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Bd(t,s,a),t=t.sibling;t!==null;)Bd(t,s,a),t=t.sibling}function ec(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&Zr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ec(t,s,a),t=t.sibling;t!==null;)ec(t,s,a),t=t.sibling}function lg(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);jn(s,o,a),s[at]=t,s[vn]=a}catch(h){ht(t,t.return,h)}}var ur=!1,en=!1,qd=!1,og=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Zw(t,s){if(t=t.containerInfo,lf=wc,t=ym(t),Ru(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var v=0,S=-1,T=-1,X=0,ue=0,pe=t,se=null;t:for(;;){for(var oe;pe!==a||f!==0&&pe.nodeType!==3||(S=v+f),pe!==h||o!==0&&pe.nodeType!==3||(T=v+o),pe.nodeType===3&&(v+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)se=pe,pe=oe;for(;;){if(pe===t)break t;if(se===a&&++X===f&&(S=v),se===h&&++ue===o&&(T=v),(oe=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=oe}a=S===-1||T===-1?null:{start:S,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(of={focusedElem:t,selectionRange:a},wc=!1,mn=s;mn!==null;)if(s=mn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,mn=t;else for(;mn!==null;){switch(s=mn,h=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,a=s,f=h.memoizedProps,h=h.memoizedState,o=a.stateNode;try{var Me=ya(a.type,f);t=o.getSnapshotBeforeUpdate(Me,h),o.__reactInternalSnapshotBeforeUpdate=t}catch($e){ht(a,a.return,$e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)df(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":df(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,mn=t;break}mn=s.return}}function cg(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:fr(t,a),o&4&&vl(5,a);break;case 1:if(fr(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){ht(a,a.return,v)}else{var f=ya(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ht(a,a.return,v)}}o&64&&sg(a),o&512&&yl(a,a.return);break;case 3:if(fr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Pm(t,s)}catch(v){ht(a,a.return,v)}}break;case 27:s===null&&o&4&&lg(a);case 26:case 5:fr(t,a),s===null&&o&4&&ag(a),o&512&&yl(a,a.return);break;case 12:fr(t,a);break;case 31:fr(t,a),o&4&&fg(t,a);break;case 13:fr(t,a),o&4&&hg(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Yw.bind(null,a),x1(t,a))));break;case 22:if(o=a.memoizedState!==null||ur,!o){s=s!==null&&s.memoizedState!==null||en,f=ur;var h=en;ur=o,(en=s)&&!h?hr(t,a,(a.subtreeFlags&8772)!==0):fr(t,a),ur=f,en=h}break;case 30:break;default:fr(t,a)}}function ug(t){var s=t.alternate;s!==null&&(t.alternate=null,ug(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Sr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var At=null,Hn=!1;function dr(t,s,a){for(a=a.child;a!==null;)dg(t,s,a),a=a.sibling}function dg(t,s,a){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Dt,a)}catch{}switch(a.tag){case 26:en||Vs(a,s),dr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||Vs(a,s);var o=At,f=Hn;Zr(a.type)&&(At=a.stateNode,Hn=!1),dr(t,s,a),Tl(a.stateNode),At=o,Hn=f;break;case 5:en||Vs(a,s);case 6:if(o=At,f=Hn,At=null,dr(t,s,a),At=o,Hn=f,At!==null)if(Hn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(a.stateNode)}catch(h){ht(a,s,h)}else try{At.removeChild(a.stateNode)}catch(h){ht(a,s,h)}break;case 18:At!==null&&(Hn?(t=At,sx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ei(t)):sx(At,a.stateNode));break;case 4:o=At,f=Hn,At=a.stateNode.containerInfo,Hn=!0,dr(t,s,a),At=o,Hn=f;break;case 0:case 11:case 14:case 15:Or(2,a,s),en||Or(4,a,s),dr(t,s,a);break;case 1:en||(Vs(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&rg(a,s,o)),dr(t,s,a);break;case 21:dr(t,s,a);break;case 22:en=(o=en)||a.memoizedState!==null,dr(t,s,a),en=o;break;default:dr(t,s,a)}}function fg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ei(t)}catch(a){ht(s,s.return,a)}}}function hg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ei(t)}catch(a){ht(s,s.return,a)}}function Fw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new og),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new og),s;default:throw Error(i(435,t.tag))}}function tc(t,s){var a=Fw(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var f=Xw.bind(null,t,o);o.then(f,f)}})}function Zn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],h=t,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Zr(S.type)){At=S.stateNode,Hn=!1;break e}break;case 5:At=S.stateNode,Hn=!1;break e;case 3:case 4:At=S.stateNode.containerInfo,Hn=!0;break e}S=S.return}if(At===null)throw Error(i(160));dg(h,v,f),At=null,Hn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)mg(s,t),s=s.sibling}var zs=null;function mg(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Zn(s,t),Fn(t),o&4&&(Or(3,t,t.return),vl(3,t),Or(5,t,t.return));break;case 1:Zn(s,t),Fn(t),o&512&&(en||a===null||Vs(a,a.return)),o&64&&ur&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=zs;if(Zn(s,t),Fn(t),o&512&&(en||a===null||Vs(a,a.return)),o&4){var h=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":h=f.getElementsByTagName("title")[0],(!h||h[He]||h[at]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(o),f.head.insertBefore(h,f.querySelector("head > title"))),jn(h,o,a),h[at]=t,jt(h),o=h;break e;case"link":var v=mx("link","href",f).get(o+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(h=v[S],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}h=f.createElement(o),jn(h,o,a),f.head.appendChild(h);break;case"meta":if(v=mx("meta","content",f).get(o+(a.content||""))){for(S=0;S<v.length;S++)if(h=v[S],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}h=f.createElement(o),jn(h,o,a),f.head.appendChild(h);break;default:throw Error(i(468,o))}h[at]=t,jt(h),o=h}t.stateNode=o}else px(f,t.type,t.stateNode);else t.stateNode=hx(f,o,t.memoizedProps);else h!==o?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,o===null?px(f,t.type,t.stateNode):hx(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ld(t,t.memoizedProps,a.memoizedProps)}break;case 27:Zn(s,t),Fn(t),o&512&&(en||a===null||Vs(a,a.return)),a!==null&&o&4&&Ld(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Zn(s,t),Fn(t),o&512&&(en||a===null||Vs(a,a.return)),t.flags&32){f=t.stateNode;try{Js(f,"")}catch(Me){ht(t,t.return,Me)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,Ld(t,f,a!==null?a.memoizedProps:f)),o&1024&&(qd=!0);break;case 6:if(Zn(s,t),Fn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(Me){ht(t,t.return,Me)}}break;case 3:if(xc=null,f=zs,zs=pc(s.containerInfo),Zn(s,t),zs=f,Fn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ei(s.containerInfo)}catch(Me){ht(t,t.return,Me)}qd&&(qd=!1,pg(t));break;case 4:o=zs,zs=pc(t.stateNode.containerInfo),Zn(s,t),Fn(t),zs=o;break;case 12:Zn(s,t),Fn(t);break;case 31:Zn(s,t),Fn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,tc(t,o)));break;case 13:Zn(s,t),Fn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sc=we()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,tc(t,o)));break;case 22:f=t.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,X=ur,ue=en;if(ur=X||f,en=ue||T,Zn(s,t),en=ue,ur=X,Fn(t),o&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||T||ur||en||wa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){T=a=s;try{if(h=T.stateNode,f)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=T.stateNode;var pe=T.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;S.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Me){ht(T,T.return,Me)}}}else if(s.tag===6){if(a===null){T=s;try{T.stateNode.nodeValue=f?"":T.memoizedProps}catch(Me){ht(T,T.return,Me)}}}else if(s.tag===18){if(a===null){T=s;try{var oe=T.stateNode;f?rx(oe,!0):rx(T.stateNode,!1)}catch(Me){ht(T,T.return,Me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,tc(t,a))));break;case 19:Zn(s,t),Fn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,tc(t,o)));break;case 30:break;case 21:break;default:Zn(s,t),Fn(t)}}function Fn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(ig(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,h=Ud(t);ec(t,h,f);break;case 5:var v=a.stateNode;a.flags&32&&(Js(v,""),a.flags&=-33);var S=Ud(t);ec(t,S,v);break;case 3:case 4:var T=a.stateNode.containerInfo,X=Ud(t);Bd(t,X,T);break;default:throw Error(i(161))}}catch(ue){ht(t,t.return,ue)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function pg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;pg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function fr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)cg(t,s.alternate,s),s=s.sibling}function wa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Or(4,s,s.return),wa(s);break;case 1:Vs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&rg(s,s.return,a),wa(s);break;case 27:Tl(s.stateNode);case 26:case 5:Vs(s,s.return),wa(s);break;case 22:s.memoizedState===null&&wa(s);break;case 30:wa(s);break;default:wa(s)}t=t.sibling}}function hr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,f=t,h=s,v=h.flags;switch(h.tag){case 0:case 11:case 15:hr(f,h,a),vl(4,h);break;case 1:if(hr(f,h,a),o=h,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){ht(o,o.return,X)}if(o=h,f=o.updateQueue,f!==null){var S=o.stateNode;try{var T=f.shared.hiddenCallbacks;if(T!==null)for(f.shared.hiddenCallbacks=null,f=0;f<T.length;f++)Im(T[f],S)}catch(X){ht(o,o.return,X)}}a&&v&64&&sg(h),yl(h,h.return);break;case 27:lg(h);case 26:case 5:hr(f,h,a),a&&o===null&&v&4&&ag(h),yl(h,h.return);break;case 12:hr(f,h,a);break;case 31:hr(f,h,a),a&&v&4&&fg(f,h);break;case 13:hr(f,h,a),a&&v&4&&hg(f,h);break;case 22:h.memoizedState===null&&hr(f,h,a),yl(h,h.return);break;case 30:break;default:hr(f,h,a)}s=s.sibling}}function $d(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&il(a))}function Hd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&il(t))}function Os(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gg(t,s,a,o),s=s.sibling}function gg(t,s,a,o){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Os(t,s,a,o),f&2048&&vl(9,s);break;case 1:Os(t,s,a,o);break;case 3:Os(t,s,a,o),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&il(t)));break;case 12:if(f&2048){Os(t,s,a,o),t=s.stateNode;try{var h=s.memoizedProps,v=h.id,S=h.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(T){ht(s,s.return,T)}}else Os(t,s,a,o);break;case 31:Os(t,s,a,o);break;case 13:Os(t,s,a,o);break;case 23:break;case 22:h=s.stateNode,v=s.alternate,s.memoizedState!==null?h._visibility&2?Os(t,s,a,o):wl(t,s):h._visibility&2?Os(t,s,a,o):(h._visibility|=2,hi(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),f&2048&&$d(v,s);break;case 24:Os(t,s,a,o),f&2048&&Hd(s.alternate,s);break;default:Os(t,s,a,o)}}function hi(t,s,a,o,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var h=t,v=s,S=a,T=o,X=v.flags;switch(v.tag){case 0:case 11:case 15:hi(h,v,S,T,f),vl(8,v);break;case 23:break;case 22:var ue=v.stateNode;v.memoizedState!==null?ue._visibility&2?hi(h,v,S,T,f):wl(h,v):(ue._visibility|=2,hi(h,v,S,T,f)),f&&X&2048&&$d(v.alternate,v);break;case 24:hi(h,v,S,T,f),f&&X&2048&&Hd(v.alternate,v);break;default:hi(h,v,S,T,f)}s=s.sibling}}function wl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,f=o.flags;switch(o.tag){case 22:wl(a,o),f&2048&&$d(o.alternate,o);break;case 24:wl(a,o),f&2048&&Hd(o.alternate,o);break;default:wl(a,o)}s=s.sibling}}var Sl=8192;function mi(t,s,a){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)xg(t,s,a),t=t.sibling}function xg(t,s,a){switch(t.tag){case 26:mi(t,s,a),t.flags&Sl&&t.memoizedState!==null&&T1(a,zs,t.memoizedState,t.memoizedProps);break;case 5:mi(t,s,a);break;case 3:case 4:var o=zs;zs=pc(t.stateNode.containerInfo),mi(t,s,a),zs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Sl,Sl=16777216,mi(t,s,a),Sl=o):mi(t,s,a));break;default:mi(t,s,a)}}function bg(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function jl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];mn=o,yg(o,t)}bg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vg(t),t=t.sibling}function vg(t){switch(t.tag){case 0:case 11:case 15:jl(t),t.flags&2048&&Or(9,t,t.return);break;case 3:jl(t);break;case 12:jl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,nc(t)):jl(t);break;default:jl(t)}}function nc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];mn=o,yg(o,t)}bg(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Or(8,s,s.return),nc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,nc(s));break;default:nc(s)}t=t.sibling}}function yg(t,s){for(;mn!==null;){var a=mn;switch(a.tag){case 0:case 11:case 15:Or(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:il(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,mn=o;else e:for(a=t;mn!==null;){o=mn;var f=o.sibling,h=o.return;if(ug(o),o===a){mn=null;break e}if(f!==null){f.return=h,mn=f;break e}mn=h}}}var Vw={getCacheForType:function(t){var s=wn(Yt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return wn(Yt).controller.signal}},Qw=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,Je=null,nt=0,ft=0,rs=null,Lr=!1,pi=!1,Zd=!1,mr=0,qt=0,Ur=0,Sa=0,Fd=0,as=0,gi=0,El=null,Vn=null,Vd=!1,sc=0,wg=0,rc=1/0,ac=null,Br=null,ln=0,qr=null,xi=null,pr=0,Qd=0,Id=null,Sg=null,Nl=0,Pd=null;function is(){return(ct&2)!==0&&nt!==0?nt&-nt:z.T!==null?Jd():Dn()}function jg(){if(as===0)if((nt&536870912)===0||rt){var t=wr;wr<<=1,(wr&3932160)===0&&(wr=262144),as=t}else as=536870912;return t=ns.current,t!==null&&(t.flags|=32),as}function Qn(t,s,a){(t===yt&&(ft===2||ft===9)||t.cancelPendingCommit!==null)&&(bi(t,0),$r(t,nt,as,!1)),Bn(t,a),((ct&2)===0||t!==yt)&&(t===yt&&((ct&2)===0&&(Sa|=a),qt===4&&$r(t,nt,as,!1)),Qs(t))}function Eg(t,s,a){if((ct&6)!==0)throw Error(i(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Wt(t,s),f=o?Ww(t,s):Gd(t,s,!0),h=o;do{if(f===0){pi&&!o&&$r(t,s,0,!1);break}else{if(a=t.current.alternate,h&&!Iw(a)){f=Gd(t,s,!1),h=!1;continue}if(f===2){if(h=s,t.errorRecoveryDisabledLanes&h)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var S=t;f=El;var T=S.current.memoizedState.isDehydrated;if(T&&(bi(S,v).flags|=256),v=Gd(S,v,!1),v!==2){if(Zd&&!T){S.errorRecoveryDisabledLanes|=h,Sa|=h,f=4;break e}h=Vn,Vn=f,h!==null&&(Vn===null?Vn=h:Vn.push.apply(Vn,h))}f=v}if(h=!1,f!==2)continue}}if(f===1){bi(t,0),$r(t,s,0,!0);break}e:{switch(o=t,h=f,h){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:$r(o,s,as,!Lr);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=sc+300-we(),10<f)){if($r(o,s,as,!Lr),Ht(o,0,!0)!==0)break e;pr=s,o.timeoutHandle=tx(Ng.bind(null,o,a,Vn,ac,Vd,s,as,Sa,gi,Lr,h,"Throttled",-0,0),f);break e}Ng(o,a,Vn,ac,Vd,s,as,Sa,gi,Lr,h,null,-0,0)}}break}while(!0);Qs(t)}function Ng(t,s,a,o,f,h,v,S,T,X,ue,pe,se,oe){if(t.timeoutHandle=-1,pe=s.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ds},xg(s,h,pe);var Me=(h&62914560)===h?sc-we():(h&4194048)===h?wg-we():0;if(Me=D1(pe,Me),Me!==null){pr=h,t.cancelPendingCommit=Me(Mg.bind(null,t,s,h,a,o,f,v,S,T,ue,pe,null,se,oe)),$r(t,h,v,!X);return}}Mg(t,s,h,a,o,f,v,S,T)}function Iw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],h=f.getSnapshot;f=f.value;try{if(!es(h(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $r(t,s,a,o){s&=~Fd,s&=~Sa,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var f=s;0<f;){var h=31-Ct(f),v=1<<h;o[h]=-1,f&=~v}a!==0&&qn(t,a,s)}function ic(){return(ct&6)===0?(Cl(0),!1):!0}function Wd(){if(Je!==null){if(ft===0)var t=Je.return;else t=Je,rr=ha=null,ud(t),oi=null,ol=0,t=Je;for(;t!==null;)ng(t.alternate,t),t=t.return;Je=null}}function bi(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,f1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),pr=0,Wd(),yt=t,Je=a=nr(t.current,null),nt=s,ft=0,rs=null,Lr=!1,pi=Wt(t,s),Zd=!1,gi=as=Fd=Sa=Ur=qt=0,Vn=El=null,Vd=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var f=31-Ct(o),h=1<<f;s|=t[f],o&=~h}return mr=s,_o(),a}function Cg(t,s){Ke=null,z.H=gl,s===li||s===Oo?(s=Zm(),ft=3):s===Xu?(s=Zm(),ft=4):ft=s===Cd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,rs=s,Je===null&&(qt=1,Go(t,hs(s,t.current)))}function _g(){var t=ns.current;return t===null?!0:(nt&4194048)===nt?xs===null:(nt&62914560)===nt||(nt&536870912)!==0?t===xs:!1}function kg(){var t=z.H;return z.H=gl,t===null?gl:t}function Tg(){var t=z.A;return z.A=Vw,t}function lc(){qt=4,Lr||(nt&4194048)!==nt&&ns.current!==null||(pi=!0),(Ur&134217727)===0&&(Sa&134217727)===0||yt===null||$r(yt,nt,as,!1)}function Gd(t,s,a){var o=ct;ct|=2;var f=kg(),h=Tg();(yt!==t||nt!==s)&&(ac=null,bi(t,s)),s=!1;var v=qt;e:do try{if(ft!==0&&Je!==null){var S=Je,T=rs;switch(ft){case 8:Wd(),v=6;break e;case 3:case 2:case 9:case 6:ns.current===null&&(s=!0);var X=ft;if(ft=0,rs=null,vi(t,S,T,X),a&&pi){v=0;break e}break;default:X=ft,ft=0,rs=null,vi(t,S,T,X)}}Pw(),v=qt;break}catch(ue){Cg(t,ue)}while(!0);return s&&t.shellSuspendCounter++,rr=ha=null,ct=o,z.H=f,z.A=h,Je===null&&(yt=null,nt=0,_o()),v}function Pw(){for(;Je!==null;)Dg(Je)}function Ww(t,s){var a=ct;ct|=2;var o=kg(),f=Tg();yt!==t||nt!==s?(ac=null,rc=we()+500,bi(t,s)):pi=Wt(t,s);e:do try{if(ft!==0&&Je!==null){s=Je;var h=rs;t:switch(ft){case 1:ft=0,rs=null,vi(t,s,h,1);break;case 2:case 9:if($m(h)){ft=0,rs=null,Ag(s);break}s=function(){ft!==2&&ft!==9||yt!==t||(ft=7),Qs(t)},h.then(s,s);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:$m(h)?(ft=0,rs=null,Ag(s)):(ft=0,rs=null,vi(t,s,h,7));break;case 5:var v=null;switch(Je.tag){case 26:v=Je.memoizedState;case 5:case 27:var S=Je;if(v?gx(v):S.stateNode.complete){ft=0,rs=null;var T=S.sibling;if(T!==null)Je=T;else{var X=S.return;X!==null?(Je=X,oc(X)):Je=null}break t}}ft=0,rs=null,vi(t,s,h,5);break;case 6:ft=0,rs=null,vi(t,s,h,6);break;case 8:Wd(),qt=6;break e;default:throw Error(i(462))}}Gw();break}catch(ue){Cg(t,ue)}while(!0);return rr=ha=null,z.H=o,z.A=f,ct=a,Je!==null?0:(yt=null,nt=0,_o(),qt)}function Gw(){for(;Je!==null&&!le();)Dg(Je)}function Dg(t){var s=eg(t.alternate,t,mr);t.memoizedProps=t.pendingProps,s===null?oc(t):Je=s}function Ag(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Wp(a,s,s.pendingProps,s.type,void 0,nt);break;case 11:s=Wp(a,s,s.pendingProps,s.type.render,s.ref,nt);break;case 5:ud(s);default:ng(a,s),s=Je=Tm(s,mr),s=eg(a,s,mr)}t.memoizedProps=t.pendingProps,s===null?oc(t):Je=s}function vi(t,s,a,o){rr=ha=null,ud(s),oi=null,ol=0;var f=s.return;try{if(Uw(t,f,s,a,nt)){qt=1,Go(t,hs(a,t.current)),Je=null;return}}catch(h){if(f!==null)throw Je=f,h;qt=1,Go(t,hs(a,t.current)),Je=null;return}s.flags&32768?(rt||o===1?t=!0:pi||(nt&536870912)!==0?t=!1:(Lr=t=!0,(o===2||o===9||o===3||o===6)&&(o=ns.current,o!==null&&o.tag===13&&(o.flags|=16384))),Rg(s,t)):oc(s)}function oc(t){var s=t;do{if((s.flags&32768)!==0){Rg(s,Lr);return}t=s.return;var a=$w(s.alternate,s,mr);if(a!==null){Je=a;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=t}while(s!==null);qt===0&&(qt=5)}function Rg(t,s){do{var a=Hw(t.alternate,t);if(a!==null){a.flags&=32767,Je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Je=t;return}Je=t=a}while(t!==null);qt=6,Je=null}function Mg(t,s,a,o,f,h,v,S,T){t.cancelPendingCommit=null;do cc();while(ln!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(h=s.lanes|s.childLanes,h|=Uu,zt(t,a,h,v,S,T),t===yt&&(Je=yt=null,nt=0),xi=s,qr=t,pr=a,Qd=h,Id=f,Sg=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Jw(Ge,function(){return Bg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=z.T,z.T=null,f=ee.p,ee.p=2,v=ct,ct|=4;try{Zw(t,s,a)}finally{ct=v,ee.p=f,z.T=o}}ln=1,zg(),Og(),Lg()}}function zg(){if(ln===1){ln=0;var t=qr,s=xi,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var o=ee.p;ee.p=2;var f=ct;ct|=4;try{mg(s,t);var h=of,v=ym(t.containerInfo),S=h.focusedElem,T=h.selectionRange;if(v!==S&&S&&S.ownerDocument&&vm(S.ownerDocument.documentElement,S)){if(T!==null&&Ru(S)){var X=T.start,ue=T.end;if(ue===void 0&&(ue=X),"selectionStart"in S)S.selectionStart=X,S.selectionEnd=Math.min(ue,S.value.length);else{var pe=S.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var oe=se.getSelection(),Me=S.textContent.length,$e=Math.min(T.start,Me),bt=T.end===void 0?$e:Math.min(T.end,Me);!oe.extend&&$e>bt&&(v=bt,bt=$e,$e=v);var Z=bm(S,$e),O=bm(S,bt);if(Z&&O&&(oe.rangeCount!==1||oe.anchorNode!==Z.node||oe.anchorOffset!==Z.offset||oe.focusNode!==O.node||oe.focusOffset!==O.offset)){var Y=pe.createRange();Y.setStart(Z.node,Z.offset),oe.removeAllRanges(),$e>bt?(oe.addRange(Y),oe.extend(O.node,O.offset)):(Y.setEnd(O.node,O.offset),oe.addRange(Y))}}}}for(pe=[],oe=S;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<pe.length;S++){var fe=pe[S];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}wc=!!lf,of=lf=null}finally{ct=f,ee.p=o,z.T=a}}t.current=s,ln=2}}function Og(){if(ln===2){ln=0;var t=qr,s=xi,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var o=ee.p;ee.p=2;var f=ct;ct|=4;try{cg(t,s.alternate,s)}finally{ct=f,ee.p=o,z.T=a}}ln=3}}function Lg(){if(ln===4||ln===3){ln=0,Ce();var t=qr,s=xi,a=pr,o=Sg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ln=5:(ln=0,xi=qr=null,Ug(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Br=null),Kn(a),s=s.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Dt,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=z.T,f=ee.p,ee.p=2,z.T=null;try{for(var h=t.onRecoverableError,v=0;v<o.length;v++){var S=o[v];h(S.value,{componentStack:S.stack})}}finally{z.T=s,ee.p=f}}(pr&3)!==0&&cc(),Qs(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Pd?Nl++:(Nl=0,Pd=t):Nl=0,Cl(0)}}function Ug(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,il(s)))}function cc(){return zg(),Og(),Lg(),Bg()}function Bg(){if(ln!==5)return!1;var t=qr,s=Qd;Qd=0;var a=Kn(pr),o=z.T,f=ee.p;try{ee.p=32>a?32:a,z.T=null,a=Id,Id=null;var h=qr,v=pr;if(ln=0,xi=qr=null,pr=0,(ct&6)!==0)throw Error(i(331));var S=ct;if(ct|=4,vg(h.current),gg(h,h.current,v,a),ct=S,Cl(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Dt,h)}catch{}return!0}finally{ee.p=f,z.T=o,Ug(t,s)}}function qg(t,s,a){s=hs(a,s),s=Nd(t.stateNode,s,2),t=Rr(t,s,2),t!==null&&(Bn(t,2),Qs(t))}function ht(t,s,a){if(t.tag===3)qg(t,t,a);else for(;s!==null;){if(s.tag===3){qg(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Br===null||!Br.has(o))){t=hs(a,t),a=$p(2),o=Rr(s,a,2),o!==null&&(Hp(a,o,s,t),Bn(o,2),Qs(o));break}}s=s.return}}function Kd(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Qw;var f=new Set;o.set(s,f)}else f=o.get(s),f===void 0&&(f=new Set,o.set(s,f));f.has(a)||(Zd=!0,f.add(a),t=Kw.bind(null,t,s,a),s.then(t,t))}function Kw(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,yt===t&&(nt&a)===a&&(qt===4||qt===3&&(nt&62914560)===nt&&300>we()-sc?(ct&2)===0&&bi(t,0):Fd|=a,gi===nt&&(gi=0)),Qs(t)}function $g(t,s){s===0&&(s=dn()),t=ua(t,s),t!==null&&(Bn(t,s),Qs(t))}function Yw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),$g(t,a)}function Xw(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),$g(t,a)}function Jw(t,s){return k(t,s)}var uc=null,yi=null,Yd=!1,dc=!1,Xd=!1,Hr=0;function Qs(t){t!==yi&&t.next===null&&(yi===null?uc=yi=t:yi=yi.next=t),dc=!0,Yd||(Yd=!0,t1())}function Cl(t,s){if(!Xd&&dc){Xd=!0;do for(var a=!1,o=uc;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var h=0;else{var v=o.suspendedLanes,S=o.pingedLanes;h=(1<<31-Ct(42|t)+1)-1,h&=f&~(v&~S),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Vg(o,h))}else h=nt,h=Ht(o,o===yt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Wt(o,h)||(a=!0,Vg(o,h));o=o.next}while(a);Xd=!1}}function e1(){Hg()}function Hg(){dc=Yd=!1;var t=0;Hr!==0&&d1()&&(t=Hr);for(var s=we(),a=null,o=uc;o!==null;){var f=o.next,h=Zg(o,s);h===0?(o.next=null,a===null?uc=f:a.next=f,f===null&&(yi=a)):(a=o,(t!==0||(h&3)!==0)&&(dc=!0)),o=f}ln!==0&&ln!==5||Cl(t),Hr!==0&&(Hr=0)}function Zg(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var v=31-Ct(h),S=1<<v,T=f[v];T===-1?((S&a)===0||(S&o)!==0)&&(f[v]=Zt(S,s)):T<=s&&(t.expiredLanes|=S),h&=~S}if(s=yt,a=nt,a=Ht(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(ft===2||ft===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&W(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Wt(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&W(o),Kn(a)){case 2:case 8:a=Pe;break;case 32:a=Ge;break;case 268435456:a=Ne;break;default:a=Ge}return o=Fg.bind(null,t),a=k(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&W(o),t.callbackPriority=2,t.callbackNode=null,2}function Fg(t,s){if(ln!==0&&ln!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(cc()&&t.callbackNode!==a)return null;var o=nt;return o=Ht(t,t===yt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Eg(t,o,s),Zg(t,we()),t.callbackNode!=null&&t.callbackNode===a?Fg.bind(null,t):null)}function Vg(t,s){if(cc())return null;Eg(t,s,!0)}function t1(){h1(function(){(ct&6)!==0?k(Ae,e1):Hg()})}function Jd(){if(Hr===0){var t=ai;t===0&&(t=Ys,Ys<<=1,(Ys&261888)===0&&(Ys=256)),Hr=t}return Hr}function Qg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:er(""+t)}function Ig(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function n1(t,s,a,o,f){if(s==="submit"&&a&&a.stateNode===f){var h=Qg((f[vn]||null).action),v=o.submitter;v&&(s=(s=v[vn]||null)?Qg(s.formAction):v.getAttribute("formAction"),s!==null&&(h=s,v=null));var S=new Wa("action","action",null,o,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hr!==0){var T=v?Ig(f,v):new FormData(f);vd(a,{pending:!0,data:T,method:f.method,action:h},null,T)}}else typeof h=="function"&&(S.preventDefault(),T=v?Ig(f,v):new FormData(f),vd(a,{pending:!0,data:T,method:f.method,action:h},h,T))},currentTarget:f}]})}}for(var ef=0;ef<Lu.length;ef++){var tf=Lu[ef],s1=tf.toLowerCase(),r1=tf[0].toUpperCase()+tf.slice(1);Ms(s1,"on"+r1)}Ms(jm,"onAnimationEnd"),Ms(Em,"onAnimationIteration"),Ms(Nm,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(yw,"onTransitionRun"),Ms(ww,"onTransitionStart"),Ms(Sw,"onTransitionCancel"),Ms(Cm,"onTransitionEnd"),Cs("onMouseEnter",["mouseout","mouseover"]),Cs("onMouseLeave",["mouseout","mouseover"]),Cs("onPointerEnter",["pointerout","pointerover"]),Cs("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function Pg(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],f=o.event;o=o.listeners;e:{var h=void 0;if(s)for(var v=o.length-1;0<=v;v--){var S=o[v],T=S.instance,X=S.currentTarget;if(S=S.listener,T!==h&&f.isPropagationStopped())break e;h=S,f.currentTarget=X;try{h(f)}catch(ue){Co(ue)}f.currentTarget=null,h=T}else for(v=0;v<o.length;v++){if(S=o[v],T=S.instance,X=S.currentTarget,S=S.listener,T!==h&&f.isPropagationStopped())break e;h=S,f.currentTarget=X;try{h(f)}catch(ue){Co(ue)}f.currentTarget=null,h=T}}}}function et(t,s){var a=s[$s];a===void 0&&(a=s[$s]=new Set);var o=t+"__bubble";a.has(o)||(Wg(s,t,2,!1),a.add(o))}function nf(t,s,a){var o=0;s&&(o|=4),Wg(a,t,o,s)}var fc="_reactListening"+Math.random().toString(36).slice(2);function sf(t){if(!t[fc]){t[fc]=!0,po.forEach(function(a){a!=="selectionchange"&&(a1.has(a)||nf(a,!1,t),nf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[fc]||(s[fc]=!0,nf("selectionchange",!1,s))}}function Wg(t,s,a,o){switch(jx(s)){case 2:var f=M1;break;case 8:f=z1;break;default:f=vf}a=f.bind(null,s,a,t),f=void 0,!Ii||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function rf(t,s,a,o,f){var h=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var S=o.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=o.return;v!==null;){var T=v.tag;if((T===3||T===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=Xs(S),v===null)return;if(T=v.tag,T===5||T===6||T===26||T===27){o=h=v;continue e}S=S.parentNode}}o=o.return}Va(function(){var X=h,ue=Qi(a),pe=[];e:{var se=_m.get(t);if(se!==void 0){var oe=Wa,Me=t;switch(t){case"keypress":if(Ia(a)===0)break e;case"keydown":case"keyup":oe=Xi;break;case"focusin":Me="focus",oe=Gi;break;case"focusout":Me="blur",oe=Gi;break;case"beforeblur":case"afterblur":oe=Gi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=tw;break;case jm:case Em:case Nm:oe=Ki;break;case Cm:oe=sw;break;case"scroll":case"scrollend":oe=Su;break;case"wheel":oe=aw;break;case"copy":case"cut":case"paste":oe=he;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ku;break;case"toggle":case"beforetoggle":oe=lw}var $e=(s&4)!==0,bt=!$e&&(t==="scroll"||t==="scrollend"),Z=$e?se!==null?se+"Capture":null:se;$e=[];for(var O=X,Y;O!==null;){var fe=O;if(Y=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Y===null||Z===null||(fe=ds(O,Z),fe!=null&&$e.push(kl(O,fe,Y))),bt)break;O=O.return}0<$e.length&&(se=new oe(se,Me,null,a,ue),pe.push({event:se,listeners:$e}))}}if((s&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",se&&a!==Vi&&(Me=a.relatedTarget||a.fromElement)&&(Xs(Me)||Me[An]))break e;if((oe||se)&&(se=ue.window===ue?ue:(se=ue.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(Me=a.relatedTarget||a.toElement,oe=X,Me=Me?Xs(Me):null,Me!==null&&(bt=u(Me),$e=Me.tag,Me!==bt||$e!==5&&$e!==27&&$e!==6)&&(Me=null)):(oe=null,Me=X),oe!==Me)){if($e=Eo,fe="onMouseLeave",Z="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&($e=ku,fe="onPointerLeave",Z="onPointerEnter",O="pointer"),bt=oe==null?se:ta(oe),Y=Me==null?se:ta(Me),se=new $e(fe,O+"leave",oe,a,ue),se.target=bt,se.relatedTarget=Y,fe=null,Xs(ue)===X&&($e=new $e(Z,O+"enter",Me,a,ue),$e.target=Y,$e.relatedTarget=bt,fe=$e),bt=fe,oe&&Me)t:{for($e=i1,Z=oe,O=Me,Y=0,fe=Z;fe;fe=$e(fe))Y++;fe=0;for(var Be=O;Be;Be=$e(Be))fe++;for(;0<Y-fe;)Z=$e(Z),Y--;for(;0<fe-Y;)O=$e(O),fe--;for(;Y--;){if(Z===O||O!==null&&Z===O.alternate){$e=Z;break t}Z=$e(Z),O=$e(O)}$e=null}else $e=null;oe!==null&&Gg(pe,se,oe,$e,!1),Me!==null&&bt!==null&&Gg(pe,bt,Me,$e,!0)}}e:{if(se=X?ta(X):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var lt=fm;else if(um(se))if(hm)lt=xw;else{lt=pw;var Le=mw}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?X&&Fi(X.elementType)&&(lt=fm):lt=gw;if(lt&&(lt=lt(t,X))){dm(pe,lt,a,ue);break e}Le&&Le(t,se,X),t==="focusout"&&X&&se.type==="number"&&X.memoizedProps.value!=null&&xo(se,"number",se.value)}switch(Le=X?ta(X):window,t){case"focusin":(um(Le)||Le.contentEditable==="true")&&(Ya=Le,Mu=X,sl=null);break;case"focusout":sl=Mu=Ya=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,wm(pe,a,ue);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":wm(pe,a,ue)}var Ye;if(Tu)e:{switch(t){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Ka?om(t,a)&&(st="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&(am&&a.locale!=="ko"&&(Ka||st!=="onCompositionStart"?st==="onCompositionEnd"&&Ka&&(Ye=So()):(Hs=ue,Jn="value"in Hs?Hs.value:Hs.textContent,Ka=!0)),Le=hc(X,st),0<Le.length&&(st=new De(st,t,null,a,ue),pe.push({event:st,listeners:Le}),Ye?st.data=Ye:(Ye=cm(a),Ye!==null&&(st.data=Ye)))),(Ye=cw?uw(t,a):dw(t,a))&&(st=hc(X,"onBeforeInput"),0<st.length&&(Le=new De("onBeforeInput","beforeinput",null,a,ue),pe.push({event:Le,listeners:st}),Le.data=Ye)),n1(pe,t,X,a,ue)}Pg(pe,s)})}function kl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function hc(t,s){for(var a=s+"Capture",o=[];t!==null;){var f=t,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=ds(t,a),f!=null&&o.unshift(kl(t,f,h)),f=ds(t,s),f!=null&&o.push(kl(t,f,h))),t.tag===3)return o;t=t.return}return[]}function i1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gg(t,s,a,o,f){for(var h=s._reactName,v=[];a!==null&&a!==o;){var S=a,T=S.alternate,X=S.stateNode;if(S=S.tag,T!==null&&T===o)break;S!==5&&S!==26&&S!==27||X===null||(T=X,f?(X=ds(a,h),X!=null&&v.unshift(kl(a,X,T))):f||(X=ds(a,h),X!=null&&v.push(kl(a,X,T)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var l1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(l1,`
`).replace(o1,"")}function Yg(t,s){return s=Kg(s),Kg(t)===s}function xt(t,s,a,o,f,h){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Js(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Js(t,""+o);break;case"className":Ut(t,"class",o);break;case"tabIndex":Ut(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(t,a,o);break;case"style":sa(t,o,h);break;case"data":if(s!=="object"){Ut(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=er(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(s!=="input"&&xt(t,s,"name",f.name,f,null),xt(t,s,"formEncType",f.formEncType,f,null),xt(t,s,"formMethod",f.formMethod,f,null),xt(t,s,"formTarget",f.formTarget,f,null)):(xt(t,s,"encType",f.encType,f,null),xt(t,s,"method",f.method,f,null),xt(t,s,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=er(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Ds);break;case"onScroll":o!=null&&et("scroll",t);break;case"onScrollEnd":o!=null&&et("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=er(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":et("beforetoggle",t),et("toggle",t),_s(t,"popover",o);break;case"xlinkActuate":ks(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ks(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ks(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ks(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ks(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ks(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ks(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ks(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ks(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":_s(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wu.get(a)||a,_s(t,a,o))}}function af(t,s,a,o,f,h){switch(a){case"style":sa(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Js(t,o):(typeof o=="number"||typeof o=="bigint")&&Js(t,""+o);break;case"onScroll":o!=null&&et("scroll",t);break;case"onScrollEnd":o!=null&&et("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ds);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ns.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),h=t[vn]||null,h=h!=null?h[a]:null,typeof h=="function"&&t.removeEventListener(s,h,f),typeof o=="function")){typeof h!="function"&&h!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,f);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):_s(t,a,o)}}}function jn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",t),et("load",t);var o=!1,f=!1,h;for(h in a)if(a.hasOwnProperty(h)){var v=a[h];if(v!=null)switch(h){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(t,s,h,v,a,null)}}f&&xt(t,s,"srcSet",a.srcSet,a,null),o&&xt(t,s,"src",a.src,a,null);return;case"input":et("invalid",t);var S=h=v=f=null,T=null,X=null;for(o in a)if(a.hasOwnProperty(o)){var ue=a[o];if(ue!=null)switch(o){case"name":f=ue;break;case"type":v=ue;break;case"checked":T=ue;break;case"defaultChecked":X=ue;break;case"value":h=ue;break;case"defaultValue":S=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,s));break;default:xt(t,s,o,ue,a,null)}}Yn(t,h,S,T,X,v,f,!1);return;case"select":et("invalid",t),o=v=h=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":h=S;break;case"defaultValue":v=S;break;case"multiple":o=S;default:xt(t,s,f,S,a,null)}s=h,a=v,t.multiple=!!o,s!=null?na(t,!!o,s,!1):a!=null&&na(t,!!o,a,!0);return;case"textarea":et("invalid",t),h=f=o=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":o=S;break;case"defaultValue":f=S;break;case"children":h=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:xt(t,s,v,S,a,null)}Za(t,o,f,h);return;case"option":for(T in a)if(a.hasOwnProperty(T)&&(o=a[T],o!=null))switch(T){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:xt(t,s,T,o,a,null)}return;case"dialog":et("beforetoggle",t),et("toggle",t),et("cancel",t),et("close",t);break;case"iframe":case"object":et("load",t);break;case"video":case"audio":for(o=0;o<_l.length;o++)et(_l[o],t);break;case"image":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"embed":case"source":case"link":et("error",t),et("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in a)if(a.hasOwnProperty(X)&&(o=a[X],o!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(t,s,X,o,a,null)}return;default:if(Fi(s)){for(ue in a)a.hasOwnProperty(ue)&&(o=a[ue],o!==void 0&&af(t,s,ue,o,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(o=a[S],o!=null&&xt(t,s,S,o,a,null))}function c1(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,v=null,S=null,T=null,X=null,ue=null;for(oe in a){var pe=a[oe];if(a.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":T=pe;default:o.hasOwnProperty(oe)||xt(t,s,oe,null,o,pe)}}for(var se in o){var oe=o[se];if(pe=a[se],o.hasOwnProperty(se)&&(oe!=null||pe!=null))switch(se){case"type":h=oe;break;case"name":f=oe;break;case"checked":X=oe;break;case"defaultChecked":ue=oe;break;case"value":v=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:oe!==pe&&xt(t,s,se,oe,o,pe)}}Er(t,v,S,T,X,ue,h,f);return;case"select":oe=v=S=se=null;for(h in a)if(T=a[h],a.hasOwnProperty(h)&&T!=null)switch(h){case"value":break;case"multiple":oe=T;default:o.hasOwnProperty(h)||xt(t,s,h,null,o,T)}for(f in o)if(h=o[f],T=a[f],o.hasOwnProperty(f)&&(h!=null||T!=null))switch(f){case"value":se=h;break;case"defaultValue":S=h;break;case"multiple":v=h;default:h!==T&&xt(t,s,f,h,o,T)}s=S,a=v,o=oe,se!=null?na(t,!!a,se,!1):!!o!=!!a&&(s!=null?na(t,!!a,s,!0):na(t,!!a,a?[]:"",!1));return;case"textarea":oe=se=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:xt(t,s,S,null,o,f)}for(v in o)if(f=o[v],h=a[v],o.hasOwnProperty(v)&&(f!=null||h!=null))switch(v){case"value":se=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==h&&xt(t,s,v,f,o,h)}bo(t,se,oe);return;case"option":for(var Me in a)if(se=a[Me],a.hasOwnProperty(Me)&&se!=null&&!o.hasOwnProperty(Me))switch(Me){case"selected":t.selected=!1;break;default:xt(t,s,Me,null,o,se)}for(T in o)if(se=o[T],oe=a[T],o.hasOwnProperty(T)&&se!==oe&&(se!=null||oe!=null))switch(T){case"selected":t.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:xt(t,s,T,se,o,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in a)se=a[$e],a.hasOwnProperty($e)&&se!=null&&!o.hasOwnProperty($e)&&xt(t,s,$e,null,o,se);for(X in o)if(se=o[X],oe=a[X],o.hasOwnProperty(X)&&se!==oe&&(se!=null||oe!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:xt(t,s,X,se,o,oe)}return;default:if(Fi(s)){for(var bt in a)se=a[bt],a.hasOwnProperty(bt)&&se!==void 0&&!o.hasOwnProperty(bt)&&af(t,s,bt,void 0,o,se);for(ue in o)se=o[ue],oe=a[ue],!o.hasOwnProperty(ue)||se===oe||se===void 0&&oe===void 0||af(t,s,ue,se,o,oe);return}}for(var Z in a)se=a[Z],a.hasOwnProperty(Z)&&se!=null&&!o.hasOwnProperty(Z)&&xt(t,s,Z,null,o,se);for(pe in o)se=o[pe],oe=a[pe],!o.hasOwnProperty(pe)||se===oe||se==null&&oe==null||xt(t,s,pe,se,o,oe)}function Xg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var f=a[o],h=f.transferSize,v=f.initiatorType,S=f.duration;if(h&&S&&Xg(v)){for(v=0,S=f.responseEnd,o+=1;o<a.length;o++){var T=a[o],X=T.startTime;if(X>S)break;var ue=T.transferSize,pe=T.initiatorType;ue&&Xg(pe)&&(T=T.responseEnd,v+=ue*(T<S?1:(S-X)/(T-X)))}if(--o,s+=8*(h+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lf=null,of=null;function mc(t){return t.nodeType===9?t:t.ownerDocument}function Jg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ex(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function cf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var uf=null;function d1(){var t=window.event;return t&&t.type==="popstate"?t===uf?!1:(uf=t,!0):(uf=null,!1)}var tx=typeof setTimeout=="function"?setTimeout:void 0,f1=typeof clearTimeout=="function"?clearTimeout:void 0,nx=typeof Promise=="function"?Promise:void 0,h1=typeof queueMicrotask=="function"?queueMicrotask:typeof nx<"u"?function(t){return nx.resolve(null).then(t).catch(m1)}:tx;function m1(t){setTimeout(function(){throw t})}function Zr(t){return t==="head"}function sx(t,s){var a=s,o=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(f),Ei(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Tl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Tl(a);for(var h=a.firstChild;h;){var v=h.nextSibling,S=h.nodeName;h[He]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=v}}else a==="body"&&Tl(t.ownerDocument.body);a=f}while(a);Ei(s)}function rx(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function df(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":df(a),Sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function p1(t,s,a,o){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[He])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=bs(t.nextSibling),t===null)break}return null}function g1(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=bs(t.nextSibling),t===null))return null;return t}function ax(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=bs(t.nextSibling),t===null))return null;return t}function ff(t){return t.data==="$?"||t.data==="$~"}function hf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function x1(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function bs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var mf=null;function ix(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return bs(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function lx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function ox(t,s,a){switch(s=mc(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Tl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Sr(t)}var vs=new Map,cx=new Set;function pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gr=ee.d;ee.d={f:b1,r:v1,D:y1,C:w1,L:S1,m:j1,X:N1,S:E1,M:C1};function b1(){var t=gr.f(),s=ic();return t||s}function v1(t){var s=jr(t);s!==null&&s.tag===5&&s.type==="form"?Cp(s):gr.r(t)}var wi=typeof document>"u"?null:document;function ux(t,s,a){var o=wi;if(o&&typeof s=="string"&&s){var f=Rn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),cx.has(f)||(cx.add(f),t={rel:t,crossOrigin:a,href:s},o.querySelector(f)===null&&(s=o.createElement("link"),jn(s,"link",t),jt(s),o.head.appendChild(s)))}}function y1(t){gr.D(t),ux("dns-prefetch",t,null)}function w1(t,s){gr.C(t,s),ux("preconnect",t,s)}function S1(t,s,a){gr.L(t,s,a);var o=wi;if(o&&t&&s){var f='link[rel="preload"][as="'+Rn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Rn(a.imageSizes)+'"]')):f+='[href="'+Rn(t)+'"]';var h=f;switch(s){case"style":h=Si(t);break;case"script":h=ji(t)}vs.has(h)||(t=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),vs.set(h,t),o.querySelector(f)!==null||s==="style"&&o.querySelector(Dl(h))||s==="script"&&o.querySelector(Al(h))||(s=o.createElement("link"),jn(s,"link",t),jt(s),o.head.appendChild(s)))}}function j1(t,s){gr.m(t,s);var a=wi;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Rn(o)+'"][href="'+Rn(t)+'"]',h=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ji(t)}if(!vs.has(h)&&(t=y({rel:"modulepreload",href:t},s),vs.set(h,t),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(h)))return}o=a.createElement("link"),jn(o,"link",t),jt(o),a.head.appendChild(o)}}}function E1(t,s,a){gr.S(t,s,a);var o=wi;if(o&&t){var f=Gt(o).hoistableStyles,h=Si(t);s=s||"default";var v=f.get(h);if(!v){var S={loading:0,preload:null};if(v=o.querySelector(Dl(h)))S.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":s},a),(a=vs.get(h))&&pf(t,a);var T=v=o.createElement("link");jt(T),jn(T,"link",t),T._p=new Promise(function(X,ue){T.onload=X,T.onerror=ue}),T.addEventListener("load",function(){S.loading|=1}),T.addEventListener("error",function(){S.loading|=2}),S.loading|=4,gc(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(h,v)}}}function N1(t,s){gr.X(t,s);var a=wi;if(a&&t){var o=Gt(a).hoistableScripts,f=ji(t),h=o.get(f);h||(h=a.querySelector(Al(f)),h||(t=y({src:t,async:!0},s),(s=vs.get(f))&&gf(t,s),h=a.createElement("script"),jt(h),jn(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function C1(t,s){gr.M(t,s);var a=wi;if(a&&t){var o=Gt(a).hoistableScripts,f=ji(t),h=o.get(f);h||(h=a.querySelector(Al(f)),h||(t=y({src:t,async:!0,type:"module"},s),(s=vs.get(f))&&gf(t,s),h=a.createElement("script"),jt(h),jn(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function dx(t,s,a,o){var f=(f=G.current)?pc(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Si(a.href),a=Gt(f).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Si(a.href);var h=Gt(f).hoistableStyles,v=h.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,v),(h=f.querySelector(Dl(t)))&&!h._p&&(v.instance=h,v.state.loading=5),vs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},vs.set(t,a),h||_1(f,t,a,v.state))),s&&o===null)throw Error(i(528,""));return v}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ji(a),a=Gt(f).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Si(t){return'href="'+Rn(t)+'"'}function Dl(t){return'link[rel="stylesheet"]['+t+"]"}function fx(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function _1(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),jn(s,"link",a),jt(s),t.head.appendChild(s))}function ji(t){return'[src="'+Rn(t)+'"]'}function Al(t){return"script[async]"+t}function hx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(o)return s.instance=o,jt(o),o;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),jt(o),jn(o,"style",f),gc(o,a.precedence,t),s.instance=o;case"stylesheet":f=Si(a.href);var h=t.querySelector(Dl(f));if(h)return s.state.loading|=4,s.instance=h,jt(h),h;o=fx(a),(f=vs.get(f))&&pf(o,f),h=(t.ownerDocument||t).createElement("link"),jt(h);var v=h;return v._p=new Promise(function(S,T){v.onload=S,v.onerror=T}),jn(h,"link",o),s.state.loading|=4,gc(h,a.precedence,t),s.instance=h;case"script":return h=ji(a.src),(f=t.querySelector(Al(h)))?(s.instance=f,jt(f),f):(o=a,(f=vs.get(h))&&(o=y({},a),gf(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),jt(f),jn(f,"link",o),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,gc(o,a.precedence,t));return s.instance}function gc(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,h=f,v=0;v<o.length;v++){var S=o[v];if(S.dataset.precedence===s)h=S;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function pf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function gf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var xc=null;function mx(t,s,a){if(xc===null){var o=new Map,f=xc=new Map;f.set(a,o)}else f=xc,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var h=a[f];if(!(h[He]||h[at]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(s)||"";v=t+v;var S=o.get(v);S?S.push(h):o.set(v,[h])}}return o}function px(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function k1(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function T1(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Si(o.href),h=s.querySelector(Dl(f));if(h){s=h._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=bc.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=h,jt(h);return}h=s.ownerDocument||s,o=fx(o),(f=vs.get(f))&&pf(o,f),h=h.createElement("link"),jt(h);var v=h;v._p=new Promise(function(S,T){v.onload=S,v.onerror=T}),jn(h,"link",o),a.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=bc.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var xf=0;function D1(t,s){return t.stylesheets&&t.count===0&&yc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&yc(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+s);0<t.imgBytes&&xf===0&&(xf=62500*u1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&yc(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>xf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vc=null;function yc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vc=new Map,s.forEach(A1,t),vc=null,bc.call(t))}function A1(t,s){if(!(s.state.loading&4)){var a=vc.get(t);if(a)var o=a.get(null);else{a=new Map,vc.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var v=f[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}f=s.instance,v=f.getAttribute("data-precedence"),h=a.get(v)||o,h===o&&a.set(null,f),a.set(v,f),this.count++,o=bc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Rl={$$typeof:R,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function R1(t,s,a,o,f,h,v,S,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fn(0),this.hiddenUpdates=fn(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function xx(t,s,a,o,f,h,v,S,T,X,ue,pe){return t=new R1(t,s,a,v,T,X,ue,pe,S),s=1,h===!0&&(s|=24),h=ts(3,null,null,s),t.current=h,h.stateNode=t,s=Gu(),s.refCount++,t.pooledCache=s,s.refCount++,h.memoizedState={element:o,isDehydrated:a,cache:s},Ju(h),t}function bx(t){return t?(t=ei,t):ei}function vx(t,s,a,o,f,h){f=bx(f),o.context===null?o.context=f:o.pendingContext=f,o=Ar(s),o.payload={element:a},h=h===void 0?null:h,h!==null&&(o.callback=h),a=Rr(t,o,s),a!==null&&(Qn(a,t,s),ul(a,t,s))}function yx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function bf(t,s){yx(t,s),(t=t.alternate)&&yx(t,s)}function wx(t){if(t.tag===13||t.tag===31){var s=ua(t,67108864);s!==null&&Qn(s,t,67108864),bf(t,67108864)}}function Sx(t){if(t.tag===13||t.tag===31){var s=is();s=Gn(s);var a=ua(t,s);a!==null&&Qn(a,t,s),bf(t,s)}}var wc=!0;function M1(t,s,a,o){var f=z.T;z.T=null;var h=ee.p;try{ee.p=2,vf(t,s,a,o)}finally{ee.p=h,z.T=f}}function z1(t,s,a,o){var f=z.T;z.T=null;var h=ee.p;try{ee.p=8,vf(t,s,a,o)}finally{ee.p=h,z.T=f}}function vf(t,s,a,o){if(wc){var f=yf(o);if(f===null)rf(t,s,o,Sc,a),Ex(t,o);else if(L1(f,t,s,a,o))o.stopPropagation();else if(Ex(t,o),s&4&&-1<O1.indexOf(t)){for(;f!==null;){var h=jr(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=Mt(h.pendingLanes);if(v!==0){var S=h;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var T=1<<31-Ct(v);S.entanglements[1]|=T,v&=~T}Qs(h),(ct&6)===0&&(rc=we()+500,Cl(0))}}break;case 31:case 13:S=ua(h,2),S!==null&&Qn(S,h,2),ic(),bf(h,2)}if(h=yf(o),h===null&&rf(t,s,o,Sc,a),h===f)break;f=h}f!==null&&o.stopPropagation()}else rf(t,s,o,null,a)}}function yf(t){return t=Qi(t),wf(t)}var Sc=null;function wf(t){if(Sc=null,t=Xs(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=m(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Sc=t,null}function jx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case Ae:return 2;case Pe:return 8;case Ge:case Nt:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var Sf=!1,Fr=null,Vr=null,Qr=null,Ml=new Map,zl=new Map,Ir=[],O1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ex(t,s){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ml.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(s.pointerId)}}function Ol(t,s,a,o,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:h,targetContainers:[f]},s!==null&&(s=jr(s),s!==null&&wx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function L1(t,s,a,o,f){switch(s){case"focusin":return Fr=Ol(Fr,t,s,a,o,f),!0;case"dragenter":return Vr=Ol(Vr,t,s,a,o,f),!0;case"mouseover":return Qr=Ol(Qr,t,s,a,o,f),!0;case"pointerover":var h=f.pointerId;return Ml.set(h,Ol(Ml.get(h)||null,t,s,a,o,f)),!0;case"gotpointercapture":return h=f.pointerId,zl.set(h,Ol(zl.get(h)||null,t,s,a,o,f)),!0}return!1}function Nx(t){var s=Xs(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,Xe(t.priority,function(){Sx(a)});return}}else if(s===31){if(s=m(a),s!==null){t.blockedOn=s,Xe(t.priority,function(){Sx(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=yf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Vi=o,a.target.dispatchEvent(o),Vi=null}else return s=jr(a),s!==null&&wx(s),t.blockedOn=a,!1;s.shift()}return!0}function Cx(t,s,a){jc(t)&&a.delete(s)}function U1(){Sf=!1,Fr!==null&&jc(Fr)&&(Fr=null),Vr!==null&&jc(Vr)&&(Vr=null),Qr!==null&&jc(Qr)&&(Qr=null),Ml.forEach(Cx),zl.forEach(Cx)}function Ec(t,s){t.blockedOn===s&&(t.blockedOn=null,Sf||(Sf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U1)))}var Nc=null;function _x(t){Nc!==t&&(Nc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Nc===t&&(Nc=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],f=t[s+2];if(typeof o!="function"){if(wf(o||a)===null)continue;break}var h=jr(a);h!==null&&(t.splice(s,3),s-=3,vd(h,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function Ei(t){function s(T){return Ec(T,t)}Fr!==null&&Ec(Fr,t),Vr!==null&&Ec(Vr,t),Qr!==null&&Ec(Qr,t),Ml.forEach(s),zl.forEach(s);for(var a=0;a<Ir.length;a++){var o=Ir[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ir.length&&(a=Ir[0],a.blockedOn===null);)Nx(a),a.blockedOn===null&&Ir.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],h=a[o+1],v=f[vn]||null;if(typeof h=="function")v||_x(a);else if(v){var S=null;if(h&&h.hasAttribute("formAction")){if(f=h,v=h[vn]||null)S=v.formAction;else if(wf(f)!==null)continue}else S=v.action;typeof S=="function"?a[o+1]=S:(a.splice(o,3),o-=3),_x(a)}}}function kx(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function jf(t){this._internalRoot=t}Cc.prototype.render=jf.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,o=is();vx(a,o,t,s,null,null)},Cc.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;vx(t.current,2,null,t,null,null),ic(),s[An]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var s=Dn();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Ir.length&&s!==0&&s<Ir[a].priority;a++);Ir.splice(a,0,t),a===0&&Nx(t)}};var Tx=n.version;if(Tx!=="19.2.0")throw Error(i(527,Tx,"19.2.0"));ee.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var B1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{Dt=_c.inject(B1),it=_c}catch{}}return Ul.createRoot=function(t,s){if(!c(t))throw Error(i(299));var a=!1,o="",f=Lp,h=Up,v=Bp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=xx(t,1,!1,null,null,a,o,null,f,h,v,kx),t[An]=s.current,sf(t),new jf(s)},Ul.hydrateRoot=function(t,s,a){if(!c(t))throw Error(i(299));var o=!1,f="",h=Lp,v=Up,S=Bp,T=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(T=a.formState)),s=xx(t,1,!0,s,a??null,o,f,T,h,v,S,kx),s.context=bx(null),a=s.current,o=is(),o=Gn(o),f=Ar(o),f.callback=null,Rr(a,f,o),a=o,s.current.lanes=a,Bn(s,a),Qs(s),t[An]=s.current,sf(t),new Cc(s)},Ul.version="19.2.0",Ul}var qx;function P1(){if(qx)return Cf.exports;qx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Cf.exports=I1(),Cf.exports}var W1=P1();const G1=kb(W1),su=p.createContext(null);function K1({children:e}){const[n,r]=p.useState(()=>({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash})),i=p.useRef(new Set),c=p.useRef(n);p.useEffect(()=>{c.current=n},[n]);const u=p.useCallback(g=>{for(const b of i.current)if(b(g)===!1)return!1;return!0},[]);p.useEffect(()=>{const g=()=>{const b={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},y=`${b.pathname}${b.search}${b.hash}`;if(!u({kind:"pop",to:y,location:b})){const E=c.current;window.history.pushState(null,"",`${E.pathname}${E.search}${E.hash}`);return}r(b)};return window.addEventListener("popstate",g),()=>window.removeEventListener("popstate",g)},[u]);const d=p.useCallback(g=>(i.current.add(g),()=>{i.current.delete(g)}),[]),m=p.useCallback((g,b)=>{const y=new URL(g,window.location.origin),w={pathname:y.pathname,search:y.search,hash:y.hash},E=`${w.pathname}${w.search}${w.hash}`,N=b?.replace?"replace":"push";u({kind:N,to:E,location:w})&&(b?.replace?window.history.replaceState(null,"",E):window.history.pushState(null,"",E),window.dispatchEvent(new PopStateEvent("popstate")))},[u]),x=p.useMemo(()=>({location:n,navigate:m,registerBlocker:d}),[n,m,d]);return l.jsx(su.Provider,{value:x,children:e})}function js(){const e=p.useContext(su);if(!e)throw new Error("useLocation must be used within NavProvider");return e.location}function Nn(){const e=p.useContext(su);if(!e)throw new Error("useNavigate must be used within NavProvider");return e.navigate}function Y1(e,n=!0){const r=p.useContext(su);if(!r)throw new Error("useNavigationBlocker must be used within NavProvider");p.useEffect(()=>{if(n)return r.registerBlocker(e)},[e,r,n])}var Ui=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},X1={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},J1=class{#e=X1;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},Ea=new J1;function eS(e){setTimeout(e,0)}var Ta=typeof window>"u"||"Deno"in globalThis;function On(){}function tS(e,n){return typeof e=="function"?e(n):e}function Vf(e){return typeof e=="number"&&e>=0&&e!==1/0}function Db(e,n){return Math.max(e+(n||0)-Date.now(),0)}function Yr(e,n){return typeof e=="function"?e(n):e}function ys(e,n){return typeof e=="function"?e(n):e}function $x(e,n){const{type:r="all",exact:i,fetchStatus:c,predicate:u,queryKey:d,stale:m}=e;if(d){if(i){if(n.queryHash!==xh(d,n.options))return!1}else if(!Pl(n.queryKey,d))return!1}if(r!=="all"){const x=n.isActive();if(r==="active"&&!x||r==="inactive"&&x)return!1}return!(typeof m=="boolean"&&n.isStale()!==m||c&&c!==n.state.fetchStatus||u&&!u(n))}function Hx(e,n){const{exact:r,status:i,predicate:c,mutationKey:u}=e;if(u){if(!n.options.mutationKey)return!1;if(r){if(Da(n.options.mutationKey)!==Da(u))return!1}else if(!Pl(n.options.mutationKey,u))return!1}return!(i&&n.state.status!==i||c&&!c(n))}function xh(e,n){return(n?.queryKeyHashFn||Da)(e)}function Da(e){return JSON.stringify(e,(n,r)=>Qf(r)?Object.keys(r).sort().reduce((i,c)=>(i[c]=r[c],i),{}):r)}function Pl(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(r=>Pl(e[r],n[r])):!1}var nS=Object.prototype.hasOwnProperty;function Ab(e,n){if(e===n)return e;const r=Zx(e)&&Zx(n);if(!r&&!(Qf(e)&&Qf(n)))return n;const c=(r?e:Object.keys(e)).length,u=r?n:Object.keys(n),d=u.length,m=r?new Array(d):{};let x=0;for(let g=0;g<d;g++){const b=r?g:u[g],y=e[b],w=n[b];if(y===w){m[b]=y,(r?g<c:nS.call(e,b))&&x++;continue}if(y===null||w===null||typeof y!="object"||typeof w!="object"){m[b]=w;continue}const E=Ab(y,w);m[b]=E,E===y&&x++}return c===d&&x===c?e:m}function Zc(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}function Zx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Qf(e){if(!Fx(e))return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(!Fx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Fx(e){return Object.prototype.toString.call(e)==="[object Object]"}function sS(e){return new Promise(n=>{Ea.setTimeout(n,e)})}function If(e,n,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,n):r.structuralSharing!==!1?Ab(e,n):n}function rS(e,n,r=0){const i=[...e,n];return r&&i.length>r?i.slice(1):i}function aS(e,n,r=0){const i=[n,...e];return r&&i.length>r?i.slice(0,-1):i}var bh=Symbol();function Rb(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===bh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Mb(e,n){return typeof e=="function"?e(...n):!!e}var iS=class extends Ui{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Ta&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},vh=new iS;function Pf(){let e,n;const r=new Promise((c,u)=>{e=c,n=u});r.status="pending",r.catch(()=>{});function i(c){Object.assign(r,c),delete r.resolve,delete r.reject}return r.resolve=c=>{i({status:"fulfilled",value:c}),e(c)},r.reject=c=>{i({status:"rejected",reason:c}),n(c)},r}var lS=eS;function oS(){let e=[],n=0,r=m=>{m()},i=m=>{m()},c=lS;const u=m=>{n?e.push(m):c(()=>{r(m)})},d=()=>{const m=e;e=[],m.length&&c(()=>{i(()=>{m.forEach(x=>{r(x)})})})};return{batch:m=>{let x;n++;try{x=m()}finally{n--,n||d()}return x},batchCalls:m=>(...x)=>{u(()=>{m(...x)})},schedule:u,setNotifyFunction:m=>{r=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{c=m}}}var cn=oS(),cS=class extends Ui{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Ta&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Fc=new cS;function uS(e){return Math.min(1e3*2**e,3e4)}function zb(e){return(e??"online")==="online"?Fc.isOnline():!0}var Wf=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Ob(e){let n=!1,r=0,i;const c=Pf(),u=()=>c.status!=="pending",d=j=>{if(!u()){const _=new Wf(j);w(_),e.onCancel?.(_)}},m=()=>{n=!0},x=()=>{n=!1},g=()=>vh.isFocused()&&(e.networkMode==="always"||Fc.isOnline())&&e.canRun(),b=()=>zb(e.networkMode)&&e.canRun(),y=j=>{u()||(i?.(),c.resolve(j))},w=j=>{u()||(i?.(),c.reject(j))},E=()=>new Promise(j=>{i=_=>{(u()||g())&&j(_)},e.onPause?.()}).then(()=>{i=void 0,u()||e.onContinue?.()}),N=()=>{if(u())return;let j;const _=r===0?e.initialPromise:void 0;try{j=_??e.fn()}catch(A){j=Promise.reject(A)}Promise.resolve(j).then(y).catch(A=>{if(u())return;const D=e.retry??(Ta?0:3),R=e.retryDelay??uS,q=typeof R=="function"?R(r,A):R,U=D===!0||typeof D=="number"&&r<D||typeof D=="function"&&D(r,A);if(n||!U){w(A);return}r++,e.onFail?.(r,A),sS(q).then(()=>g()?void 0:E()).then(()=>{n?w(A):N()})})};return{promise:c,status:()=>c.status,cancel:d,continue:()=>(i?.(),c),cancelRetry:m,continueRetry:x,canStart:b,start:()=>(b()?N():E().then(N),c)}}var Lb=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vf(this.gcTime)&&(this.#e=Ea.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ta?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ea.clearTimeout(this.#e),this.#e=void 0)}},dS=class extends Lb{#e;#t;#n;#r;#s;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Vx(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Vx(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const r=If(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.#a({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ys(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Yr(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Db(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#l=!0,r.signal)})},c=()=>{const m=Rb(this.options,n),g=(()=>{const b={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(b),b})();return this.#l=!1,this.options.persister?this.options.persister(m,g,this):m(g)},d=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:c};return i(m),m})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#a({type:"fetch",meta:d.fetchOptions?.meta}),this.#s=Ob({initialPromise:n?.initialPromise,fn:d.fetchFn,onCancel:m=>{m instanceof Wf&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(m,x)=>{this.#a({type:"failed",failureCount:m,error:x})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const m=await this.#s.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#n.config.onSuccess?.(m,this),this.#n.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof Wf){if(m.silent)return this.#s.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#a({type:"error",error:m}),this.#n.config.onError?.(m,this),this.#n.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#a(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ub(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const c=e.error;return{...r,error:c,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),cn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Ub(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zb(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Vx(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,r=n!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Bb=class extends Ui{constructor(e,n){super(),this.options=n,this.#e=e,this.#a=null,this.#l=Pf(),this.bindMethods(),this.setOptions(n)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#i;#l;#a;#p;#f;#h;#c;#u;#o;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Qx(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ys(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),n._defaulted&&!Zc(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&Ix(this.#t,r,this.options,n)&&this.#d(),this.updateResult(),i&&(this.#t!==r||ys(this.options.enabled,this.#t)!==ys(n.enabled,this.#t)||Yr(this.options.staleTime,this.#t)!==Yr(n.staleTime,this.#t))&&this.#g();const c=this.#x();i&&(this.#t!==r||ys(this.options.enabled,this.#t)!==ys(n.enabled,this.#t)||c!==this.#o)&&this.#b(c)}getOptimisticResult(e){const n=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(n,e);return hS(this,r)&&(this.#r=r,this.#i=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#S();let n=this.#t.fetch(this.options,e);return e?.throwOnError||(n=n.catch(On)),n}#g(){this.#y();const e=Yr(this.options.staleTime,this.#t);if(Ta||this.#r.isStale||!Vf(e))return;const r=Db(this.#r.dataUpdatedAt,e)+1;this.#c=Ea.setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(e){this.#w(),this.#o=e,!(Ta||ys(this.options.enabled,this.#t)===!1||!Vf(this.#o)||this.#o===0)&&(this.#u=Ea.setInterval(()=>{(this.options.refetchIntervalInBackground||vh.isFocused())&&this.#d()},this.#o))}#v(){this.#g(),this.#b(this.#x())}#y(){this.#c&&(Ea.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Ea.clearInterval(this.#u),this.#u=void 0)}createResult(e,n){const r=this.#t,i=this.options,c=this.#r,u=this.#s,d=this.#i,x=e!==r?e.state:this.#n,{state:g}=e;let b={...g},y=!1,w;if(n._optimisticResults){const re=this.hasListeners(),B=!re&&Qx(e,n),H=re&&Ix(e,r,n,i);(B||H)&&(b={...b,...Ub(g.data,e.options)}),n._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:E,errorUpdatedAt:N,status:j}=b;w=b.data;let _=!1;if(n.placeholderData!==void 0&&w===void 0&&j==="pending"){let re;c?.isPlaceholderData&&n.placeholderData===d?.placeholderData?(re=c.data,_=!0):re=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,re!==void 0&&(j="success",w=If(c?.data,re,n),y=!0)}if(n.select&&w!==void 0&&!_)if(c&&w===u?.data&&n.select===this.#p)w=this.#f;else try{this.#p=n.select,w=n.select(w),w=If(c?.data,w,n),this.#f=w,this.#a=null}catch(re){this.#a=re}this.#a&&(E=this.#a,w=this.#f,N=Date.now(),j="error");const A=b.fetchStatus==="fetching",D=j==="pending",R=j==="error",q=D&&A,U=w!==void 0,$={status:j,fetchStatus:b.fetchStatus,isPending:D,isSuccess:j==="success",isError:R,isInitialLoading:q,isLoading:q,data:w,dataUpdatedAt:b.dataUpdatedAt,error:E,errorUpdatedAt:N,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>x.dataUpdateCount||b.errorUpdateCount>x.errorUpdateCount,isFetching:A,isRefetching:A&&!D,isLoadingError:R&&!U,isPaused:b.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:R&&U,isStale:yh(e,n),refetch:this.refetch,promise:this.#l,isEnabled:ys(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const re=J=>{$.status==="error"?J.reject($.error):$.data!==void 0&&J.resolve($.data)},B=()=>{const J=this.#l=$.promise=Pf();re(J)},H=this.#l;switch(H.status){case"pending":e.queryHash===r.queryHash&&re(H);break;case"fulfilled":($.status==="error"||$.data!==H.value)&&B();break;case"rejected":($.status!=="error"||$.error!==H.reason)&&B();break}}return $}updateResult(){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Zc(n,e))return;this.#r=n;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,c=typeof i=="function"?i():i;if(c==="all"||!c&&!this.#m.size)return!0;const u=new Set(c??this.#m);return this.options.throwOnError&&u.add("error"),Object.keys(this.#r).some(d=>{const m=d;return this.#r[m]!==e[m]&&u.has(m)})};this.#j({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const n=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#j(e){cn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function fS(e,n){return ys(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function Qx(e,n){return fS(e,n)||e.state.data!==void 0&&Gf(e,n,n.refetchOnMount)}function Gf(e,n,r){if(ys(n.enabled,e)!==!1&&Yr(n.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&yh(e,n)}return!1}function Ix(e,n,r,i){return(e!==n||ys(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&yh(e,r)}function yh(e,n){return ys(n.enabled,e)!==!1&&e.isStaleByTime(Yr(n.staleTime,e))}function hS(e,n){return!Zc(e.getCurrentResult(),n)}function Vc(e){return{onFetch:(n,r)=>{const i=n.options,c=n.fetchOptions?.meta?.fetchMore?.direction,u=n.state.data?.pages||[],d=n.state.data?.pageParams||[];let m={pages:[],pageParams:[]},x=0;const g=async()=>{let b=!1;const y=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(n.signal.aborted?b=!0:n.signal.addEventListener("abort",()=>{b=!0}),n.signal)})},w=Rb(n.options,n.fetchOptions),E=async(N,j,_)=>{if(b)return Promise.reject();if(j==null&&N.pages.length)return Promise.resolve(N);const D=(()=>{const V={client:n.client,queryKey:n.queryKey,pageParam:j,direction:_?"backward":"forward",meta:n.options.meta};return y(V),V})(),R=await w(D),{maxPages:q}=n.options,U=_?aS:rS;return{pages:U(N.pages,R,q),pageParams:U(N.pageParams,j,q)}};if(c&&u.length){const N=c==="backward",j=N?qb:Kf,_={pages:u,pageParams:d},A=j(i,_);m=await E(_,A,N)}else{const N=e??u.length;do{const j=x===0?d[0]??i.initialPageParam:Kf(i,m);if(x>0&&j==null)break;m=await E(m,j),x++}while(x<N)}return m};n.options.persister?n.fetchFn=()=>n.options.persister?.(g,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},r):n.fetchFn=g}}}function Kf(e,{pages:n,pageParams:r}){const i=n.length-1;return n.length>0?e.getNextPageParam(n[i],n,r[i],r):void 0}function qb(e,{pages:n,pageParams:r}){return n.length>0?e.getPreviousPageParam?.(n[0],n,r[0],r):void 0}function mS(e,n){return n?Kf(e,n)!=null:!1}function pS(e,n){return!n||!e.getPreviousPageParam?!1:qb(e,n)!=null}var gS=class extends Bb{constructor(e,n){super(e,n)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Vc()})}getOptimisticResult(e){return e.behavior=Vc(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,n){const{state:r}=e,i=super.createResult(e,n),{isFetching:c,isRefetching:u,isError:d,isRefetchError:m}=i,x=r.fetchMeta?.fetchMore?.direction,g=d&&x==="forward",b=c&&x==="forward",y=d&&x==="backward",w=c&&x==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:mS(n,r.data),hasPreviousPage:pS(n,r.data),isFetchNextPageError:g,isFetchingNextPage:b,isFetchPreviousPageError:y,isFetchingPreviousPage:w,isRefetchError:m&&!g&&!y,isRefetching:u&&!b&&!w}}},xS=class extends Lb{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||$b(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Ob({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(u,d)=>{this.#s({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",c=!this.#r.canStart();try{if(i)n();else{this.#s({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,r);const d=await this.options.onMutate?.(e,r);d!==this.state.context&&this.#s({type:"pending",context:d,variables:e,isPaused:c})}const u=await this.#r.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,r),await this.options.onSuccess?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(u,null,e,this.state.context,r),this.#s({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,r),await this.options.onError?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,u,e,this.state.context,r),u}finally{this.#s({type:"error",error:u})}}finally{this.#n.runNext(this)}}#s(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),cn.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function $b(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bS=class extends Ui{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,r){const i=new xS({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){this.#e.add(e);const n=kc(e);if(typeof n=="string"){const r=this.#t.get(n);r?r.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=kc(e);if(typeof n=="string"){const r=this.#t.get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=kc(e);if(typeof n=="string"){const i=this.#t.get(n)?.find(c=>c.state.status==="pending");return!i||i===e}else return!0}runNext(e){const n=kc(e);return typeof n=="string"?this.#t.get(n)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){cn.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Hx(n,r))}findAll(e={}){return this.getAll().filter(n=>Hx(e,n))}notify(e){cn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return cn.batch(()=>Promise.all(e.map(n=>n.continue().catch(On))))}};function kc(e){return e.options.scope?.id}var vS=class extends Ui{#e;#t=void 0;#n;#r;constructor(n,r){super(),this.#e=n,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const r=this.options;this.options=this.#e.defaultMutationOptions(n),Zc(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&Da(r.mutationKey)!==Da(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??$b();this.#t={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){cn.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,i=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};n?.type==="success"?(this.#r.onSuccess?.(n.data,r,i,c),this.#r.onSettled?.(n.data,null,r,i,c)):n?.type==="error"&&(this.#r.onError?.(n.error,r,i,c),this.#r.onSettled?.(void 0,n.error,r,i,c))}this.listeners.forEach(r=>{r(this.#t)})})}},yS=class extends Ui{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,r){const i=n.queryKey,c=n.queryHash??xh(i,n);let u=this.get(c);return u||(u=new dS({client:e,queryKey:i,queryHash:c,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){cn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>$x(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>$x(e,r)):n}notify(e){cn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){cn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){cn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wS=class{#e;#t;#n;#r;#s;#i;#l;#a;constructor(e={}){this.#e=e.queryCache||new yS,this.#t=e.mutationCache||new bS,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=vh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Fc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),r=this.#e.build(this,n),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Yr(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.defaultQueryOptions({queryKey:e}),u=this.#e.get(i.queryHash)?.state.data,d=tS(n,u);if(d!==void 0)return this.#e.build(this,i).setData(d,{...r,manual:!0})}setQueriesData(e,n,r){return cn.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;cn.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=this.#e;return cn.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const r={revert:!0,...n},i=cn.batch(()=>this.#e.findAll(e).map(c=>c.cancel(r)));return Promise.all(i).then(On).catch(On)}invalidateQueries(e,n={}){return cn.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},i=cn.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let u=c.fetch(void 0,r);return r.throwOnError||(u=u.catch(On)),c.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(On)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(Yr(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(On).catch(On)}fetchInfiniteQuery(e){return e.behavior=Vc(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(On).catch(On)}ensureInfiniteQueryData(e){return e.behavior=Vc(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(Da(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()],r={};return n.forEach(i=>{Pl(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,n){this.#s.set(Da(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],r={};return n.forEach(i=>{Pl(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=xh(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===bh&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Hb=p.createContext(void 0),pt=e=>{const n=p.useContext(Hb);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},SS=({client:e,children:n})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(Hb.Provider,{value:e,children:n})),Zb=p.createContext(!1),jS=()=>p.useContext(Zb);Zb.Provider;function ES(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var NS=p.createContext(ES()),CS=()=>p.useContext(NS),_S=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},kS=e=>{p.useEffect(()=>{e.clearReset()},[e])},TS=({result:e,errorResetBoundary:n,throwOnError:r,query:i,suspense:c})=>e.isError&&!n.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||Mb(r,[e.error,i])),DS=e=>{if(e.suspense){const r=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>r(i(...c)):r(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},AS=(e,n)=>e.isLoading&&e.isFetching&&!n,RS=(e,n)=>e?.suspense&&n.isPending,Px=(e,n,r)=>n.fetchOptimistic(e).catch(()=>{r.clearReset()});function Fb(e,n,r){const i=jS(),c=CS(),u=pt(),d=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=i?"isRestoring":"optimistic",DS(d),_S(d,c),kS(c);const m=!u.getQueryCache().get(d.queryHash),[x]=p.useState(()=>new n(u,d)),g=x.getOptimisticResult(d),b=!i&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(y=>{const w=b?x.subscribe(cn.batchCalls(y)):On;return x.updateResult(),w},[x,b]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),p.useEffect(()=>{x.setOptions(d)},[d,x]),RS(d,g))throw Px(d,x,c);if(TS({result:g,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw g.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(d,g),d.experimental_prefetchInRender&&!Ta&&AS(g,i)&&(m?Px(d,x,c):u.getQueryCache().get(d.queryHash)?.promise)?.catch(On).finally(()=>{x.updateResult()}),d.notifyOnChangeProps?g:x.trackResult(g)}function xn(e,n){return Fb(e,Bb)}function sn(e,n){const r=pt(),[i]=p.useState(()=>new vS(r,e));p.useEffect(()=>{i.setOptions(e)},[i,e]);const c=p.useSyncExternalStore(p.useCallback(d=>i.subscribe(cn.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=p.useCallback((d,m)=>{i.mutate(d,m).catch(On)},[i]);if(c.error&&Mb(i.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}function Vb(e,n){return Fb(e,gS)}const MS="modulepreload",zS=function(e){return"/"+e},Wx={},OS=function(n,r,i){let c=Promise.resolve();if(r&&r.length>0){let x=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");c=x(r.map(g=>{if(g=zS(g),g in Wx)return;Wx[g]=!0;const b=g.endsWith(".css"),y=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":MS,b||(w.as="script"),w.crossOrigin="",w.href=g,m&&w.setAttribute("nonce",m),document.head.appendChild(w),b)return new Promise((E,N)=>{w.addEventListener("load",E),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return c.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return n().catch(u)})};function LS({children:e}){const[n]=p.useState(()=>new wS({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}}));return l.jsxs(SS,{client:n,children:[e,null]})}const US=["ade_csrf","backend_app_csrf"];function BS(){return US}function qS(){if(typeof document>"u")return null;const e=document.cookie;if(!e)return null;const n=new Map,r=e.split(";");for(const i of r){const[c,...u]=i.trim().split("=");c&&n.set(c,decodeURIComponent(u.join("=")))}return n}function wh(){const e=qS();if(!e)return null;for(const n of BS()){const r=e.get(n);if(r)return r}return null}const Qb="/api/v1",$S=new Set(["GET","HEAD","OPTIONS"]);class Tn extends Error{status;problem;constructor(n,r,i){super(n),this.name="ApiError",this.status=r,this.problem=i}}class HS{baseUrl;constructor(n=Qb){this.baseUrl=n.endsWith("/")?n.slice(0,-1):n}async request(n,r={}){const{parseJson:i=!0,returnRawResponse:c=!1,headers:u,body:d,method:m,credentials:x,...g}=r,b=(m??"GET").toUpperCase(),y=this.composeUrl(n),w=new Headers({Accept:i&&!c?"application/json":"*/*"});if(this.copyHeaders(w,u),d&&!(d instanceof FormData)&&!w.has("Content-Type")&&w.set("Content-Type","application/json"),!$S.has(b)&&!w.has("X-CSRF-Token")){const j=wh();j&&w.set("X-CSRF-Token",j)}const E=await fetch(y,{...g,method:b,headers:w,body:d,credentials:x??"include"});if(!E.ok){const j=await this.tryParseProblem(E),_=j?.title??`Request failed with status ${E.status}`;throw new Tn(_,E.status,j)}if(c)return E;if(!i||E.status===204)return;const N=await E.text();return N?JSON.parse(N):void 0}composeUrl(n){if(!n.startsWith("/"))throw new Error("API paths must include a leading slash.");return this.baseUrl?`${this.baseUrl}${n}`:n}copyHeaders(n,r){if(r){if(r instanceof Headers){r.forEach((i,c)=>n.set(c,i));return}if(Array.isArray(r)){r.forEach(([i,c])=>n.set(i,c));return}Object.entries(r).forEach(([i,c])=>{typeof c>"u"||n.set(i,Array.isArray(c)?c.join(", "):c)})}}async tryParseProblem(n){if((n.headers.get("content-type")??"").includes("application/json"))try{return await n.json()}catch(i){const c=i instanceof Error?i:new Error(String(i));console.warn("Failed to parse problem details",c);return}}}new HS(Qb);const ZS=/\{[^{}]+\}/g,FS=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function VS(){return Math.random().toString(36).slice(2,11)}function QS(e){let{baseUrl:n="",Request:r=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:c,bodySerializer:u,headers:d,requestInitExt:m=void 0,...x}={...e};m=FS()?m:void 0,n=Yx(n);const g=[];async function b(y,w){const{baseUrl:E,fetch:N=i,Request:j=r,headers:_,params:A={},parseAs:D="json",querySerializer:R,bodySerializer:q=u??PS,body:U,middleware:V=[],...$}=w||{};let re=n;E&&(re=Yx(E)??n);let B=typeof c=="function"?c:Gx(c);R&&(B=typeof R=="function"?R:Gx({...typeof c=="object"?c:{},...R}));const H=U===void 0?void 0:q(U,Kx(d,_,A.header)),J=Kx(H===void 0||H instanceof FormData?{}:{"Content-Type":"application/json"},d,_,A.header),ce=[...g,...V],Q={redirect:"follow",...x,...$,body:H,headers:J};let de,xe,z=new j(WS(y,{baseUrl:re,params:A,querySerializer:B}),Q),ee;for(const be in $)be in z||(z[be]=$[be]);if(ce.length){de=VS(),xe=Object.freeze({baseUrl:re,fetch:N,parseAs:D,querySerializer:B,bodySerializer:q});for(const be of ce)if(be&&typeof be=="object"&&typeof be.onRequest=="function"){const ve=await be.onRequest({request:z,schemaPath:y,params:A,options:xe,id:de});if(ve)if(ve instanceof j)z=ve;else if(ve instanceof Response){ee=ve;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!ee){try{ee=await N(z,m)}catch(be){let ve=be;if(ce.length)for(let C=ce.length-1;C>=0;C--){const I=ce[C];if(I&&typeof I=="object"&&typeof I.onError=="function"){const ae=await I.onError({request:z,error:ve,schemaPath:y,params:A,options:xe,id:de});if(ae){if(ae instanceof Response){ve=void 0,ee=ae;break}if(ae instanceof Error){ve=ae;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(ve)throw ve}if(ce.length)for(let be=ce.length-1;be>=0;be--){const ve=ce[be];if(ve&&typeof ve=="object"&&typeof ve.onResponse=="function"){const C=await ve.onResponse({request:z,response:ee,schemaPath:y,params:A,options:xe,id:de});if(C){if(!(C instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");ee=C}}}}if(ee.status===204||z.method==="HEAD"||ee.headers.get("Content-Length")==="0")return ee.ok?{data:void 0,response:ee}:{error:void 0,response:ee};if(ee.ok)return D==="stream"?{data:ee.body,response:ee}:{data:await ee[D](),response:ee};let K=await ee.text();try{K=JSON.parse(K)}catch{}return{error:K,response:ee}}return{request(y,w,E){return b(w,{...E,method:y.toUpperCase()})},GET(y,w){return b(y,{...w,method:"GET"})},PUT(y,w){return b(y,{...w,method:"PUT"})},POST(y,w){return b(y,{...w,method:"POST"})},DELETE(y,w){return b(y,{...w,method:"DELETE"})},OPTIONS(y,w){return b(y,{...w,method:"OPTIONS"})},HEAD(y,w){return b(y,{...w,method:"HEAD"})},PATCH(y,w){return b(y,{...w,method:"PATCH"})},TRACE(y,w){return b(y,{...w,method:"TRACE"})},use(...y){for(const w of y)if(w){if(typeof w!="object"||!("onRequest"in w||"onResponse"in w||"onError"in w))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");g.push(w)}},eject(...y){for(const w of y){const E=g.indexOf(w);E!==-1&&g.splice(E,1)}}}}function ru(e,n,r){if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${r?.allowReserved===!0?n:encodeURIComponent(n)}`}function Ib(e,n,r){if(!n||typeof n!="object")return"";const i=[],c={simple:",",label:".",matrix:";"}[r.style]||"&";if(r.style!=="deepObject"&&r.explode===!1){for(const m in n)i.push(m,r.allowReserved===!0?n[m]:encodeURIComponent(n[m]));const d=i.join(",");switch(r.style){case"form":return`${e}=${d}`;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return d}}for(const d in n){const m=r.style==="deepObject"?`${e}[${d}]`:d;i.push(ru(m,n[d],r))}const u=i.join(c);return r.style==="label"||r.style==="matrix"?`${c}${u}`:u}function Pb(e,n,r){if(!Array.isArray(n))return"";if(r.explode===!1){const u={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",d=(r.allowReserved===!0?n:n.map(m=>encodeURIComponent(m))).join(u);switch(r.style){case"simple":return d;case"label":return`.${d}`;case"matrix":return`;${e}=${d}`;default:return`${e}=${d}`}}const i={simple:",",label:".",matrix:";"}[r.style]||"&",c=[];for(const u of n)r.style==="simple"||r.style==="label"?c.push(r.allowReserved===!0?u:encodeURIComponent(u)):c.push(ru(e,u,r));return r.style==="label"||r.style==="matrix"?`${i}${c.join(i)}`:c.join(i)}function Gx(e){return function(r){const i=[];if(r&&typeof r=="object")for(const c in r){const u=r[c];if(u!=null){if(Array.isArray(u)){if(u.length===0)continue;i.push(Pb(c,u,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof u=="object"){i.push(Ib(c,u,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}i.push(ru(c,u,e))}}return i.join("&")}}function IS(e,n){let r=e;for(const i of e.match(ZS)??[]){let c=i.substring(1,i.length-1),u=!1,d="simple";if(c.endsWith("*")&&(u=!0,c=c.substring(0,c.length-1)),c.startsWith(".")?(d="label",c=c.substring(1)):c.startsWith(";")&&(d="matrix",c=c.substring(1)),!n||n[c]===void 0||n[c]===null)continue;const m=n[c];if(Array.isArray(m)){r=r.replace(i,Pb(c,m,{style:d,explode:u}));continue}if(typeof m=="object"){r=r.replace(i,Ib(c,m,{style:d,explode:u}));continue}if(d==="matrix"){r=r.replace(i,`;${ru(c,m)}`);continue}r=r.replace(i,d==="label"?`.${encodeURIComponent(m)}`:encodeURIComponent(m))}return r}function PS(e,n){return e instanceof FormData?e:n&&(n.get instanceof Function?n.get("Content-Type")??n.get("content-type"):n["Content-Type"]??n["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function WS(e,n){let r=`${n.baseUrl}${e}`;n.params?.path&&(r=IS(r,n.params.path));let i=n.querySerializer(n.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(r+=`?${i}`),r}function Kx(...e){const n=new Headers;for(const r of e){if(!r||typeof r!="object")continue;const i=r instanceof Headers?r.entries():Object.entries(r);for(const[c,u]of i)if(u===null)n.delete(c);else if(Array.isArray(u))for(const d of u)n.append(c,d);else u!==void 0&&n.set(c,u)}return n}function Yx(e){return e.endsWith("/")?e.substring(0,e.length-1):e}const Wb=new Set(["GET","HEAD","OPTIONS","TRACE"]),GS="ade.auth.tokens",Df="",Qc=Df.endsWith("/api/v1")?Df.slice(0,-7):Df;function au(e){if(!e.startsWith("/"))throw new Error("API paths must begin with '/' relative to the server root");return Qc.length>0?`${Qc}${e}`:e}async function KS(e,n={}){const r=au(e),i=new Headers(n.headers??{});if(i.set("X-Requested-With","fetch"),!i.has("Authorization")){const d=Gb();d&&i.set("Authorization",`${d.token_type} ${d.access_token}`)}const c=n.method?.toUpperCase()??"GET";if(!Wb.has(c)){const d=wh();d&&!i.has("X-CSRF-Token")&&i.set("X-CSRF-Token",d)}return await fetch(r,{credentials:"include",...n,headers:i})}const Ze=QS({baseUrl:Qc.length>0?Qc:void 0,credentials:"include",headers:{"X-Requested-With":"fetch"}}),YS={onRequest({request:e}){const n=e.method?.toUpperCase()??"GET";if(!Wb.has(n)){const r=wh();r&&!e.headers.has("X-CSRF-Token")&&e.headers.set("X-CSRF-Token",r)}return e}},XS={onRequest({request:e}){if(!e.headers.has("Authorization")){const n=Gb();n&&e.headers.set("Authorization",`${n.token_type} ${n.access_token}`)}return e}},JS={async onResponse({response:e}){if(e.ok)return e;const n=await ej(e),r=n?.title??`Request failed with status ${e.status}`;throw new Tn(r,e.status,n)}};Ze.use(YS);Ze.use(XS);Ze.use(JS);function Gb(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(GS);if(!e)return null;const n=JSON.parse(e);if(n&&typeof n.access_token=="string")return{access_token:n.access_token,token_type:n.token_type??"bearer"}}catch{}return null}async function ej(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Bs={root:["auth"],detail:()=>[...Bs.root,"session"],providers:()=>[...Bs.root,"providers"],setupStatus:()=>[...Bs.root,"setup-status"]},Sh="ade.auth.tokens";let to=tj();function tj(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Sh);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.access_token!="string"?null:{access_token:n.access_token,token_type:n.token_type??"bearer",expires_at:n.expires_at??null,refresh_expires_at:n.refresh_expires_at??null}}catch{return null}}function Xx(e,n){if(e){const r=Date.parse(e);if(!Number.isNaN(r))return r}return typeof n=="number"?Date.now()+n*1e3:null}function nj(e){const n={access_token:e.access_token,token_type:e.token_type??"bearer",expires_at:Xx(e.expires_at,e.expires_in),refresh_expires_at:Xx(e.refresh_expires_at,e.refresh_expires_in)};if(to=n,typeof window<"u")try{window.localStorage.setItem(Sh,JSON.stringify(n))}catch{}return n}function jh(){if(to=null,typeof window<"u")try{window.localStorage.removeItem(Sh)}catch{}}function sj(){return to}function rj(e=to){return e?.access_token?{Authorization:`${e.token_type?.trim()||"bearer"} ${e.access_token}`}:{}}function Jx(e){if(!e)return null;const n=new Date(e);return Number.isNaN(n.getTime())?null:n.toISOString()}function aj(e){const n=e.items.find(r=>r.is_default);return n?n.id:null}function e0(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function ij(e){return e?{...e,items:e.items??[]}:{items:[],page:1,page_size:0,total:0,has_next:!1,has_previous:!1}}async function Kb(e,n){const r="/api/v1/me/bootstrap";try{const{data:i}=await Ze.GET(r,{signal:n,headers:rj(e),params:{query:{page:1,page_size:200,include_total:!1}}});return i??null}catch(i){if(i instanceof Tn&&(i.status===401||i.status===403))return null;throw i}}function Yb(e,n=to,r=null,i=null){const c=e0(e.roles),u=e0(e.permissions),d=ij(e.workspaces);return{user:{...e.user,roles:c,permissions:u,preferred_workspace_id:aj(d)??null},workspaces:d,roles:c,permissions:u,expires_at:Jx(n?.expires_at??null),refresh_expires_at:Jx(n?.refresh_expires_at??null),return_to:r,state:i}}async function iu(e,n={}){const r=nj(e.session),i=await Kb(r,n.signal);if(!i)throw jh(),new Error("Unable to load session after authentication.");return Yb(i,r,null,null)}async function lj(e={}){try{const{data:n}=await Ze.GET("/api/v1/auth/providers",{signal:e.signal});return n?hj(n):{providers:[],force_sso:!1}}catch(n){if(n instanceof Tn&&n.status===404)return{providers:[],force_sso:!1};throw n}}async function oj(e={}){const n=sj(),r=await Kb(n,e.signal);return r?Yb(r,n):(n&&jh(),null)}async function cj(e,n={}){const{data:r}=await Ze.POST("/api/v1/auth/session",{body:e,signal:n.signal});if(!r)throw new Error("Expected session payload from login response.");return iu(r,n)}async function uj(e={}){const{data:n}=await Ze.POST("/api/v1/auth/session/refresh",{body:void 0,signal:e.signal});if(!n)throw new Error("Expected session payload from refresh response.");return iu(n,e)}async function dj(e){const{code:n,state:r,provider:i="sso",signal:c}=e,{data:u}=await Ze.GET("/api/v1/auth/sso/{provider}/callback",{signal:c,params:{path:{provider:i},query:{code:n,state:r}}});if(!u)throw new Error("Expected session payload from SSO callback.");return iu(u,{signal:c})}async function fj(e={}){try{await Ze.DELETE("/api/v1/auth/session",{signal:e.signal,body:void 0})}catch(n){!(n instanceof Tn)||n.status!==401&&n.status}finally{jh()}}function hj(e){return{providers:(e.providers??[]).map(mj),force_sso:!!e.force_sso}}function mj(e){return{...e,start_url:e.start_url??"",icon_url:e.icon_url??null}}const Xb=p.createContext(void 0);function Tc(e){return e instanceof Error?e:new Error(String(e))}function t0({session:e,refetch:n,children:r}){return xj(e,n),l.jsx(Xb.Provider,{value:{session:e,refetch:n},children:r})}function pj(){const e=p.useContext(Xb);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e}function Oa(){return pj().session}const gj=6e4;function xj(e,n){p.useEffect(()=>{if(typeof window>"u")return;const r=typeof e.expires_at=="string"?Date.parse(e.expires_at):NaN,i=typeof e.refresh_expires_at=="string"?Date.parse(e.refresh_expires_at):NaN;if(Number.isNaN(r)||Number.isNaN(i))return;const c=Date.now();if(i<=c){n().catch(g=>{console.warn("Failed to refetch session after refresh expiry",Tc(g))});return}const u=Math.min(r,i)-gj,d=Math.max(u-c,0);let m=!1;const x=window.setTimeout(async()=>{try{if(await uj(),m)return;await n().catch(g=>{console.warn("Failed to refetch session after refresh",Tc(g))})}catch(g){if(m)return;console.warn("Failed to refresh session",Tc(g)),await n().catch(b=>{console.warn("Failed to refetch session after refresh failure",Tc(b))})}},d);return()=>{m=!0,window.clearTimeout(x)}},[n,e.expires_at,e.refresh_expires_at])}function Jb(e={}){const n=pt(),r=xn({queryKey:Bs.detail(),queryFn:async({signal:c})=>{const u=await oj({signal:c});return u||null},enabled:e.enabled??!0,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnMount:!0}),i=r.data??null;return p.useEffect(()=>{i||n.removeQueries({queryKey:Bs.providers(),exact:!1})},[n,i]),{...r,session:i}}async function bj(e={}){try{const{data:n}=await Ze.GET("/api/v1/auth/setup",{signal:e.signal});if(!n)throw new Error("Expected setup status payload.");return n}catch(n){if(n instanceof Tn&&n.status===404)return{requires_setup:!1,has_users:!0};throw n}}async function vj(e){const{data:n}=await Ze.POST("/api/v1/auth/setup",{body:e});if(!n)throw new Error("Expected session payload from setup response.");return iu(n)}function Eh(e=!0){return xn({queryKey:Bs.setupStatus(),queryFn:({signal:n})=>bj({signal:n}),enabled:e,staleTime:3e5,refetchOnWindowFocus:!1})}const no="/workspaces",yj=new Set(["/","/login","/setup","/logout"]);function wj(e){if(!e)return!0;const n=jj(e);return!!(yj.has(n)||n==="/auth"||n.startsWith("/auth/"))}function Sj(e){return`${e.pathname}${e.search}${e.hash}`}function n0(e){const n=Sj(e)||"/";return Ic(n)??no}function Ic(e){if(!e)return null;const n=e.trim();return!n.startsWith("/")||n.startsWith("//")?null:n==="/"?no:wj(n)?null:n}function Wl(e){return Ic(e)??no}function ev(e){return nv("/login",e)}function tv(e){return nv("/setup",e)}function nv(e,n){const r=Wl(n),i=new URLSearchParams;r!==no&&i.set("redirectTo",r);const c=i.toString();return c?`${e}?${c}`:e}function Pc(e,n){const r=Ic(e);if(r)return r;const i=Ic(n);return i||no}function jj(e){let n=e;const r=n.indexOf("#");r>=0&&(n=n.slice(0,r));const i=n.indexOf("?");return i>=0&&(n=n.slice(0,i)),n?n.startsWith("/")?n:`/${n}`:"/"}function lu({children:e}){const n=js(),r=Nn(),i=Jb(),{session:c,isLoading:u,isError:d,refetch:m}=i,x=!c&&!u&&!d,{data:g,isPending:b,isError:y,isSuccess:w,refetch:E}=Eh(x);return p.useEffect(()=>{if(c||u||d)return;if(x){if(b||y)return;if(w&&g?.requires_setup){const j=n0(n);r(tv(j),{replace:!0});return}}const N=n0(n);r(ev(N),{replace:!0})},[d,u,y,b,w,n,r,c,g?.requires_setup,x]),u?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:l.jsx("p",{children:"Loading your workspace"})}):d?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[l.jsx("p",{children:"We were unable to confirm your session."}),l.jsx("button",{onClick:()=>m(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):c?e?l.jsx(t0,{session:c,refetch:m,children:e}):l.jsx(t0,{session:c,refetch:m,children:e??null}):x&&b?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:l.jsx("p",{children:"Preparing initial setup"})}):x&&y?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[l.jsx("p",{children:"We were unable to check whether ADE is ready."}),l.jsx("button",{onClick:()=>E(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):null}const Ej=100,Nj=100,Cj=100,_j=200,sv="global",kj="workspace";async function Tj(e={}){const{page:n,pageSize:r,includeTotal:i,signal:c}=e,u={};typeof n=="number"&&n>0&&(u.page=n),typeof r=="number"&&r>0&&(u.page_size=r),i&&(u.include_total=!0);const{data:d}=await Ze.GET("/api/v1/workspaces",{params:{query:u},signal:c});if(!d)throw new Error("Expected workspace page payload.");const m=[...d.items].sort((x,g)=>x.name.localeCompare(g.name));return{...d,items:m}}async function Dj(e){const{data:n}=await Ze.POST("/api/v1/workspaces",{body:e});if(!n)throw new Error("Expected workspace payload.");return n}async function Aj(e,n){const{data:r}=await Ze.PATCH("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}},body:n});if(!r)throw new Error("Expected workspace payload.");return r}async function Rj(e,n={}){const{page:r,pageSize:i,includeTotal:c,signal:u}=n,d={};typeof r=="number"&&r>0&&(d.page=r),typeof i=="number"&&i>0&&(d.page_size=i),c&&(d.include_total=!0);const{data:m}=await Ze.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e},query:d},signal:u});if(!m)throw new Error("Expected workspace member page payload.");return m}async function Mj(e,n){const{data:r}=await Ze.POST("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},body:n});if(!r)throw new Error("Expected workspace member payload.");return r}async function zj(e,n,r){const{data:i}=await Ze.PUT("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}},body:r});if(!i)throw new Error("Expected workspace member payload.");return i}async function Oj(e,n){await Ze.DELETE("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}}})}async function Lj(e={}){const{page:n,pageSize:r,includeTotal:i,signal:c}=e,u={scope:kj};typeof n=="number"&&n>0&&(u.page=n),typeof r=="number"&&r>0&&(u.page_size=r),i&&(u.include_total=!0);const{data:d}=await Ze.GET("/api/v1/rbac/roles",{params:{query:u},signal:c});if(!d)throw new Error("Expected workspace role page payload.");return d}async function Uj(e,n){const{data:r}=await Ze.POST("/api/v1/rbac/roles",{body:n});if(!r)throw new Error("Expected role payload.");return r}async function Bj(e,n,r){const{data:i}=await Ze.PATCH("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}},body:r});if(!i)throw new Error("Expected role payload.");return i}async function qj(e,n){await Ze.DELETE("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}}})}async function $j(e={}){const{scope:n=sv,page:r,pageSize:i,includeTotal:c,signal:u}=e,d={scope:n};typeof r=="number"&&r>0&&(d.page=r),typeof i=="number"&&i>0&&(d.page_size=i),c&&(d.include_total=!0);const{data:m}=await Ze.GET("/api/v1/rbac/permissions",{params:{query:d},signal:u});if(!m)throw new Error("Expected permission page payload.");return m}const _a={page:1,pageSize:Ej,includeTotal:!1},Hj={page:1,pageSize:Nj,includeTotal:!1},Zj={page:1,pageSize:Cj,includeTotal:!1},Fj={scope:sv,page:1,pageSize:_j,includeTotal:!1},It={all:()=>["workspaces"],list:(e=_a)=>[...It.all(),"list",{...e}],detail:e=>[...It.all(),"detail",e],members:(e,n=Hj)=>[...It.detail(e),"members",{...n}],roles:(e,n=Zj)=>[...It.detail(e),"roles",{...n}],permissions:(e=Fj)=>["permissions",{...e}]};function Vj(e={}){const n=e.page??_a.page,r=e.pageSize??_a.pageSize,i=e.includeTotal??_a.includeTotal;return{queryKey:It.list({page:n,pageSize:r,includeTotal:i}),queryFn:({signal:c})=>Tj({page:n,pageSize:r,includeTotal:i,signal:c}),staleTime:6e4,enabled:e.enabled??!0}}function ou(e={}){const n=pt(),r=Vj(e),i=n.getQueryData(r.queryKey);return xn({...r,initialData:i})}const rv={page:_a.page,pageSize:_a.pageSize,includeTotal:_a.includeTotal},Qj="/api/v1/workspaces/{workspace_id}/default";async function Ij(e){await Ze.PUT(Qj,{params:{path:{workspace_id:e}}})}function Pj(e,n){if(!e||typeof e!="object")return e;if("items"in e){const r=e;if(!Array.isArray(r.items))return e;const i=r.items.map(c=>({...c,is_default:c.id===n}));return{...r,items:i}}if("id"in e&&"is_default"in e){const r=e;return{...r,is_default:r.id===n}}return e}function Wj(){const e=pt();return sn({mutationFn:n=>Ij(n),onSuccess:(n,r)=>{e.setQueriesData({queryKey:It.all()},i=>Pj(i,r))}})}function Af(e){return e instanceof Error?e:new Error(String(e))}function Ws(e){return{get(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):null}catch(n){return console.warn("Failed to read from storage",Af(n)),null}},set(n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch(r){console.warn("Failed to write to storage",Af(r))}},clear(){if(!(typeof window>"u"))try{window.localStorage.removeItem(e)}catch(n){console.warn("Failed to clear storage",Af(n))}}}}const Gj="backend.app.active_workspace",Yf=Ws(Gj);function Kj(){return Yf.get()}function av(e){if(!e){Yf.clear();return}Yf.set(e.id)}function iv(e){var n,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(n=0;n<c;n++)e[n]&&(r=iv(e[n]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function ge(){for(var e,n,r=0,i="",c=arguments.length;r<c;r++)(e=arguments[r])&&(n=iv(e))&&(i&&(i+=" "),i+=n);return i}const lv=p.createContext(void 0);function Yj({workspace:e,workspaces:n,children:r}){const i=p.useMemo(()=>{const c=e.permissions;return{workspace:e,workspaces:n,permissions:c,hasPermission(u){const d=u.toLowerCase();return c.includes(u)||c.includes(d)}}},[e,n]);return l.jsx(lv.Provider,{value:i,children:r})}function Xr(){const e=p.useContext(lv);if(!e)throw new Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}var br=Tb();const Xj=[{id:"explorer",label:"Explorer",icon:l.jsx(eE,{})},{id:"search",label:"Search",icon:l.jsx(tE,{})},{id:"scm",label:"Source Control",icon:l.jsx(nE,{})},{id:"extensions",label:"Extensions",icon:l.jsx(sE,{})}];function Jj({activeView:e,onSelectView:n,onOpenSettings:r,appearance:i}){const c=i==="dark"?{bg:"bg-[#1b1b1f]",border:"border-[#111111]",iconIdle:"text-slate-400",iconActive:"text-[#4fc1ff]",hover:"hover:text-white hover:bg-white/5 focus-visible:text-white",indicator:"bg-[#4fc1ff]"}:{bg:"bg-[#f3f3f3]",border:"border-[#d0d0d0]",iconIdle:"text-slate-500",iconActive:"text-[#005fb8]",hover:"hover:text-[#0f172a] hover:bg-black/5 focus-visible:text-[#0f172a]",indicator:"bg-[#005fb8]"};return l.jsxs("aside",{className:ge("flex h-full w-14 flex-col items-center justify-between border-r",c.bg,c.border,c.iconIdle),"aria-label":"Workbench navigation",children:[l.jsx("div",{className:"flex flex-col items-center gap-1 py-3",children:Xj.map(u=>{const d=e===u.id;return l.jsxs("button",{type:"button",onClick:()=>n(u.id),className:ge("relative flex h-10 w-10 items-center justify-center rounded-lg text-base transition",d?c.iconActive:ge(c.iconIdle,c.hover)),"aria-label":u.label,"aria-pressed":d,children:[d?l.jsx("span",{className:ge("absolute left-0 top-1/2 h-6 w-1 -translate-y-1/2 rounded",c.indicator)}):null,u.icon]},u.id)})}),l.jsx("div",{className:"flex flex-col items-center gap-3 pb-3",children:l.jsx("button",{type:"button",onClick:r,className:ge("flex h-10 w-10 items-center justify-center rounded-lg text-base transition",c.iconIdle,c.hover),"aria-label":"Open settings",children:l.jsx(rE,{})})})]})}function eE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"4",y:"4",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"}),l.jsx("path",{d:"M4 8.25h12",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M8.25 4v12",stroke:"currentColor",strokeWidth:"1.2"})]})}function tE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"9",cy:"9",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M12.7 12.7l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function nE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6.5 4a1.75 1.75 0 1 1-1.5 0v12m9-8a1.75 1.75 0 1 1-1.5 0v8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),l.jsx("path",{d:"M5 9.5h10",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function sE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6 4.5h4l4 4v6.5a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.3"}),l.jsx("path",{d:"M10 4.5v4h4",stroke:"currentColor",strokeWidth:"1.3"})]})}function rE(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M10 6.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M3 10h2m10 0h2M10 3v2m0 10v2M5.2 5.2l1.4 1.4m7 7 1.4 1.4M14.8 5.2l-1.4 1.4m-7 7-1.4 1.4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}const Nh=p.createContext(null);function Ch({value:e,onValueChange:n,children:r}){const i=p.useId(),c=p.useRef([]),u=p.useRef(new Map),d=p.useCallback((y,w)=>{c.current.includes(y)||c.current.push(y),u.current.set(y,w)},[]),m=p.useCallback(y=>{c.current=c.current.filter(w=>w!==y),u.current.delete(y)},[]),x=p.useCallback(y=>{y&&u.current.get(y)?.focus()},[]),g=p.useCallback(()=>c.current.slice(),[]),b=p.useMemo(()=>({value:e,setValue:n,baseId:i,registerValue:d,unregisterValue:m,focusValue:x,getValues:g}),[e,n,i,d,m,x,g]);return l.jsx(Nh.Provider,{value:b,children:r})}function _h({children:e,...n}){return l.jsx("div",{role:"tablist",...n,children:e})}function ql({value:e,children:n,className:r,onClick:i,onKeyDown:c,disabled:u,...d}){const m=p.useContext(Nh);if(!m)throw new Error("TabsTrigger must be used within a TabsRoot");const{registerValue:x,unregisterValue:g,focusValue:b,getValues:y}=m,w=m.value===e,E=`${m.baseId}-tab-${e}`,N=`${m.baseId}-panel-${e}`,j=p.useCallback(A=>{x(e,A)},[x,e]);p.useLayoutEffect(()=>()=>g(e),[g,e]);const _=A=>{if(c?.(A),A.defaultPrevented)return;const D=y(),R=D.indexOf(e);if(R===-1||D.length===0)return;let q=R;A.key==="ArrowRight"?(A.preventDefault(),q=(R+1)%D.length):A.key==="ArrowLeft"?(A.preventDefault(),q=(R-1+D.length)%D.length):A.key==="Home"?(A.preventDefault(),q=0):A.key==="End"&&(A.preventDefault(),q=D.length-1);const U=D[q];U&&U!==m.value&&m.setValue(U),b(U)};return l.jsx("button",{...d,ref:j,type:"button",role:"tab",id:E,"aria-selected":w,"aria-controls":N,tabIndex:w?0:-1,className:r,disabled:u,onKeyDown:_,onClick:A=>{i?.(A),!A.defaultPrevented&&!u&&m.setValue(e)},children:n})}function ka({value:e,children:n,className:r,...i}){const c=p.useContext(Nh);if(!c)throw new Error("TabsContent must be used within a TabsRoot");const u=c.value===e,d=`${c.baseId}-panel-${e}`,m=`${c.baseId}-tab-${e}`;return l.jsx("div",{...i,role:"tabpanel",id:d,"aria-labelledby":m,className:r,hidden:!u,tabIndex:0,children:n})}function ov(e){if(!e||typeof e!="object")return!1;const n=e,r=n.created_at,i=typeof r=="string"||typeof r=="number"||r instanceof Date;return typeof n.type=="string"&&i}function kh(e){const n=e.created_at,r=new Date(n);return Number.isNaN(r.getTime())?new Date().toISOString():r.toISOString()}const aE={hour:"2-digit",minute:"2-digit",second:"2-digit"};function Aa(e){const n=e instanceof Date?Number.isNaN(e.getTime())?null:e.toISOString():e;if(!n)return"";const r=new Date(n);return Number.isNaN(r.getTime())?"":r.toLocaleTimeString([],aE)}function iE(e){const n=u=>u.raw?u:{...u,raw:e};if(!ov(e))return n({level:"info",message:JSON.stringify(e),timestamp:"",origin:"raw"});const r=dv(e),i=Aa(kh(e)),c=e.type;if(c==="console.line")return n(cv(e,r,i,"build"));if(!c?.startsWith("build."))return n({level:"info",message:JSON.stringify(e),timestamp:i,origin:"build"});switch(c){case"build.queued":{const u=r.reason??void 0;return n({level:"info",message:u?`Build queued (${u}).`:"Build queued.",timestamp:i,origin:"build"})}case"build.created":{const u=r.reason??"queued";return n({level:"info",message:`Build queued (${u}).`,timestamp:i,origin:"build"})}case"build.started":{const u=r.reason??void 0;return n({level:"info",message:u?`Build started (${u}).`:"Build started.",timestamp:i,origin:"build"})}case"build.phase.started":{const u=r.phase??"building",d=r.message??`Starting ${u}`;return n({level:"info",message:d,timestamp:i,origin:"build"})}case"build.progress":{const u=r.message??(r.step?`Build: ${r.step}`:"Build progress");return n({level:"info",message:u,timestamp:i,origin:"build"})}case"build.phase.completed":{const u=r.phase??"build",d=r.status??"completed",m=fv(r.duration_ms),x=r.message??`${u} ${d}${m?` in ${m}`:""}`;return n({level:d==="failed"?"error":d==="skipped"?"warning":"success",message:x,timestamp:i,origin:"build"})}case"build.completed":return n(oE(r,i));default:return n({level:"info",message:JSON.stringify(e),timestamp:i,origin:"build"})}}function lE(e){const n=u=>u.raw?u:{...u,raw:e};if(!ov(e))return n({level:"info",message:JSON.stringify(e),timestamp:"",origin:"raw"});const r=dv(e),i=Aa(kh(e)),c=e.type;if(c==="console.line")return n(cv(e,r,i,r.scope==="build"?"build":"run"));if(!c?.startsWith("run."))return n({level:"info",message:JSON.stringify(e),timestamp:i,origin:"run"});switch(c){case"run.queued":{const u=r.mode??void 0,d=e.run_id??"",m=u?` (${u})`:"";return n({level:"info",message:`Run ${d?`${d} `:""}queued${m}.`,timestamp:i,origin:"run"})}case"run.waiting_for_build":{const u=r.reason??void 0,d=r.build_id??void 0,m=u?` (${u})`:"",x=d?`  ${d}`:"";return n({level:"info",message:`Waiting for build${m}${x}.`,timestamp:i,origin:"run"})}case"run.started":{const u=r.mode??void 0,d=r.env??void 0,m=d?.reused?" (reused environment)":d?.reason?` (${d.reason})`:"";return n({level:"info",message:`Run started${u?` (${u})`:""}${m}.`,timestamp:i,origin:"run"})}case"run.phase.started":{const u=r.phase??"progress",d=r.message??`Phase: ${u}`,m=uv(r.level??"info");return n({level:m,message:d,timestamp:i,origin:"run"})}case"run.phase.completed":{const u=r.phase??"phase",d=r.status??"completed",m=fv(r.duration_ms),x=r.message??`Phase ${u} ${d}${m?` in ${m}`:""}`;return n({level:d==="failed"?"error":d==="skipped"?"warning":"success",message:x,timestamp:i,origin:"run"})}case"run.table.summary":{const u=r.source_sheet??r.source_file??r.table_id??"table";return n({level:"info",message:`Table completed (${u})`,timestamp:i,origin:"run"})}case"run.validation.issue":{const u=r.severity??"info";return n({level:u==="error"?"error":u==="warning"?"warning":"info",message:`Validation issue${r.code?`: ${r.code}`:""}`,timestamp:i,origin:"run"})}case"run.validation.summary":{const u=r.issues_total??0,d=r.max_severity??void 0,m=d==="error"?"error":d==="warning"||u>0?"warning":"info",x=d?`${d}`:u>0?"issues":"clean";return n({level:m,message:`Validation summary: ${u} ${x}`,timestamp:i,origin:"run"})}case"run.error":{const u=r.code??"unknown_error",d=r.message??"Run error.",m=r.stage??r.phase,x=m?` [${m}]`:"";return n({level:"error",message:`${d}${x} (${u})`,timestamp:i,origin:"run"})}case"run.completed":return n(cE(r,i));default:return n({level:"info",message:JSON.stringify(e),timestamp:i,origin:"run"})}}function cv(e,n,r,i){const c=n.stream,u=n.level??(c==="stderr"?"warning":"info"),d=n.message??(typeof n.text=="string"?n.text:JSON.stringify(n)),m=n.scope??void 0,x=i??(m==="build"?"build":"run");return{level:uv(u),message:String(d??""),timestamp:r,origin:x,raw:e}}function oE(e,n){const r=e.status??"completed",i=e.summary?.trim(),c=typeof e.exit_code=="number"?e.exit_code:void 0,u=typeof e.error=="object"&&e.error!==null?e.error.message:void 0;if(r==="succeeded"||r==="reused")return{level:"success",message:i||`Build ${r}.`,timestamp:n,origin:"build",raw:e};if(r==="canceled"||r==="cancelled")return{level:"warning",message:"Build was canceled before completion.",timestamp:n,origin:"build",raw:e};if(r==="failed"){const d=typeof c=="number"?` (exit code ${c})`:"";return{level:"error",message:(u||i||"Build failed.")+d,timestamp:n,origin:"build",raw:e}}return r==="skipped"?{level:"info",message:i||"Build skipped.",timestamp:n,origin:"build",raw:e}:{level:"info",message:i||`Build ${r}.`,timestamp:n,origin:"build",raw:e}}function cE(e,n){const r=e.status??"completed",i=e.execution??{},c=typeof i.exit_code=="number"?i.exit_code:void 0,u=e.failure,d=typeof u?.message=="string"?u.message.trim():null,m=typeof e.summary=="string"?e.summary.trim():null,g=r==="failed"?"error":r==="canceled"||r==="cancelled"?"warning":r==="succeeded"?"success":"info",b=d||m||`Run ${r}`,y=typeof c=="number"?` (exit code ${c})`:"";return{level:g,message:`${b}${y}.`,timestamp:n,origin:"run",raw:e}}function uv(e){return e==="error"?"error":e==="warning"||e==="warn"?"warning":e==="success"?"success":"info"}function dv(e){const n=e.payload;return n&&typeof n=="object"?n:{}}function fv(e){if(typeof e!="number"||Number.isNaN(e)||e<0)return null;if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function s0(e){return e==="error"?3:e==="warning"?2:e==="success"||e==="info"?1:0}function uE(e){const n=dE(e);if(!n){if(e.includes(`
`)){const c=e.split(/\r?\n/),[u,...d]=c;return l.jsxs("div",{className:"flex flex-col gap-[2px]",children:[l.jsx("span",{className:"break-words",children:u||" "}),d.length>0?l.jsx("pre",{className:"whitespace-pre-wrap break-words border-l border-[#2f2f2f] pl-3 text-[12px] leading-snug text-[#9da5b4]",children:d.join(`
`)}):null]})}return e}const r=hE(n);if(r)return r;const i=JSON.stringify(n,null,2);return l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[13px] leading-relaxed text-[#d4d4d4]",children:fE(i)})}function dE(e){try{const n=JSON.parse(e);if(n&&typeof n=="object")return n}catch{return null}return null}function fE(e){const n=/("(?:\\.|[^"])*"(?=:)|"(?:\\.|[^"])*")|(-?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b)|\b(true|false|null)\b/g,r=[];let i=0,c,u=0;for(;(c=n.exec(e))!==null;){c.index>i&&r.push(e.slice(i,c.index));const d=c[0],m=c[1]?"text-sky-300":c[2]?"text-amber-300":"text-rose-300";r.push(l.jsx("span",{className:m,children:d},`json-${u++}`)),i=n.lastIndex}return i<e.length&&r.push(e.slice(i)),r}function hE(e){const n=typeof e.type=="string"?e.type:"",r=e.payload??{},i=typeof r.status=="string"?r.status:void 0,c=typeof r.reason=="string"?r.reason:void 0,u=typeof r.step=="string"?r.step:void 0,d=typeof r.message=="string"?r.message:void 0,m=typeof r.duration_ms=="number"&&Number.isFinite(r.duration_ms)?r.duration_ms:void 0,x=g=>{if(!g||g<0)return"";if(g<1e3)return`${Math.round(g)} ms`;if(g<6e4)return`${(g/1e3).toFixed(1)} s`;const b=Math.floor(g/6e4),y=Math.round(g%6e4/1e3);return`${b}m ${y}s`};switch(n){case"run.queued":{const g=typeof r.mode=="string"?r.mode:void 0;return`Run queued${g?` (${g})`:""}.`}case"run.waiting_for_build":return`Waiting for build${c?` (${c})`:""}${r.build_id?`  ${r.build_id}`:""}`;case"run.started":{const g=typeof r.mode=="string"?r.mode:void 0;return`Run started${g?` (${g})`:""}.`}case"run.completed":return`Run ${i??"completed"}${m?` in ${x(m)}`:""}.`;case"build.queued":return`Build queued${c?` (${c})`:""}.`;case"build.started":return`Build started${c?` (${c})`:""}.`;case"build.completed":return`Build ${i??"completed"}.`;case"build.progress":return d??(u?`Build: ${u}`:"Build progress");default:if(n.startsWith("run.phase.")){const g=typeof r.phase=="string"?r.phase:"phase";if(n.endsWith(".completed"))return`${g} ${i??"completed"}${m?` in ${x(m)}`:""}.`;if(n.endsWith(".started"))return`Starting ${g}${d?`  ${d}`:""}`}if(n.startsWith("build.phase.")){const g=typeof r.phase=="string"?r.phase:"build";if(n.endsWith(".completed"))return`${g} ${i??"completed"}${m?` in ${x(m)}`:""}.`;if(n.endsWith(".started"))return`Starting ${g}${d?`  ${d}`:""}`}return null}}function mE({consoleLines:e,latestRun:n,onClearConsole:r,onShowRunDetails:i,runStatus:c}){const[u,d]=p.useState({origin:"all",level:"all"}),[m,x]=p.useState(!0),[g,b]=p.useState(!1),[y,w]=p.useState("parsed"),E=p.useRef(null),N=p.useMemo(()=>{const H=s0(u.level);return e.filter(J=>{const ce=u.origin==="all"||(J.origin??"run")===u.origin,Q=s0(J.level),de=u.level==="all"||Q>=H;return ce&&de})},[e,u]),j=p.useMemo(()=>N.map((H,J)=>({...H,key:H.id??`${H.timestamp??"tbd"}-${H.origin??"run"}-${J}`,rendered:y==="raw"?SE(H.raw??H.message):uE(H.message)})),[N,y]),_=p.useMemo(()=>N.map(H=>jE(H,y)).join(`
`),[N,y]),A=typeof navigator<"u"&&typeof navigator.clipboard?.writeText=="function",D=!!_,R=j.length>0,q=e.length>0,U=c&&c!=="idle"?c:null;p.useEffect(()=>{if(!m)return;const H=E.current;H&&(H.scrollTop=H.scrollHeight)},[j,m]);const V=H=>{const J=H.currentTarget,Q=J.scrollHeight-J.scrollTop-J.clientHeight<16;!Q&&m?x(!1):Q&&!m&&x(!0)},$=()=>{x(!0);const H=E.current;H&&(H.scrollTop=H.scrollHeight)},re=p.useCallback(async H=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(H),!0}catch{}if(typeof document>"u")return!1;try{const J=document.createElement("textarea");J.value=H,J.setAttribute("readonly","true"),J.style.position="fixed",J.style.left="-9999px",document.body.appendChild(J),J.select();const ce=document.execCommand("copy");return document.body.removeChild(J),ce}catch{return!1}},[]),B=async()=>{if(!D)return;const H=await re(_);b(H),H&&window.setTimeout(()=>b(!1),1500)};return l.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-md border border-[#2a2a2a] bg-[#1e1e1e] font-mono text-[13px] leading-relaxed text-[#d4d4d4] shadow-[0_8px_24px_rgba(0,0,0,0.45)]",children:[l.jsxs("div",{className:"flex flex-col border-b border-[#2a2a2a] bg-gradient-to-r from-[#1f1f1f] to-[#232323]",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-4 py-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase tracking-[0.22em] text-[#9da5b4]",children:[l.jsx("span",{className:"font-semibold tracking-[0.3em] text-[#d4d4d4]",children:"Terminal"}),l.jsx("span",{className:"text-[10px] tracking-[0.3em] text-emerald-400",children:"live"}),U?l.jsx("span",{className:"rounded-full border border-[#3a3a3a] bg-[#2b2b2b] px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.2em] text-[#d4d4d4]",children:U}):null]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-300",children:[l.jsxs("label",{className:"flex items-center gap-1 text-slate-400",title:"Filter by event origin",children:["Origin",l.jsxs("select",{value:u.origin,onChange:H=>d(J=>({...J,origin:H.target.value})),className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[11px] text-slate-100 shadow-sm focus:border-emerald-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"run",children:"Run"}),l.jsx("option",{value:"build",children:"Build"}),l.jsx("option",{value:"raw",children:"Raw"})]})]}),l.jsxs("label",{className:"flex items-center gap-1 text-slate-400",title:"Filter by severity",children:["Level",l.jsxs("select",{value:u.level,onChange:H=>d(J=>({...J,level:H.target.value})),className:"rounded border border-slate-700 bg-[#151515] px-2 py-1 text-[11px] text-slate-100 shadow-sm focus:border-emerald-500",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"info",children:"Info"}),l.jsx("option",{value:"warning",children:"Warning"}),l.jsx("option",{value:"error",children:"Error"}),l.jsx("option",{value:"success",children:"Success"})]})]}),l.jsxs("div",{className:"flex items-center rounded border border-slate-600 text-[11px] font-semibold uppercase tracking-[0.12em] text-slate-200",title:"Toggle between parsed view and raw JSON events",children:[l.jsx("button",{type:"button",onClick:()=>w("parsed"),className:ge("px-2 py-[6px] transition",y==="parsed"?"bg-slate-700 text-white":"hover:bg-[#0f0f0f] text-slate-300"),children:"Parsed"}),l.jsx("button",{type:"button",onClick:()=>w("raw"),className:ge("px-2 py-[6px] border-l border-slate-600 transition",y==="raw"?"bg-slate-700 text-white":"hover:bg-[#0f0f0f] text-slate-300"),children:"Raw"})]}),l.jsx("button",{type:"button",onClick:()=>m?x(!1):$(),className:ge("rounded px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",m?"border border-emerald-600/60 bg-transparent text-emerald-200":"border border-slate-600 bg-transparent text-slate-200 hover:border-slate-400"),title:"Auto-scroll to newest logs",children:m?"Following":"Follow"}),l.jsx("button",{type:"button",onClick:B,className:ge("rounded border px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] transition",g?"border-emerald-600/60 bg-transparent text-emerald-200":"border border-slate-600 bg-transparent text-slate-200 hover:border-slate-400"),disabled:!D,title:A?"Copy visible console output":"Copy may be blocked by browser permissions",children:g?"Copied":"Copy"}),l.jsx("button",{type:"button",onClick:()=>r?.(),className:"rounded border border-slate-600 bg-[#0f0f0f] px-2 py-[6px] text-[11px] font-semibold uppercase tracking-[0.14em] text-slate-200 transition hover:border-slate-400",title:"Clear console output",children:"Clear"})]})]}),n?l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-[#2a2a2a] bg-[#181818] px-4 py-1.5 text-[11px] text-[#7f8794]",children:[l.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[l.jsx(pE,{status:n.status}),l.jsxs("span",{className:"truncate",title:n.runId,children:["Run ",n.runId]}),l.jsxs("span",{className:"truncate text-slate-500",children:[n.documentName??"Document not recorded",a0(n.sheetNames)?`  ${a0(n.sheetNames)}`:""]}),n.durationMs!=null?l.jsxs("span",{className:"text-slate-600",children:[" ",EE(n.durationMs)]}):null]}),l.jsx("button",{type:"button",className:"text-[11px] font-semibold text-emerald-300 transition hover:text-emerald-200",onClick:()=>i?.(),children:"View details "})]}):null]}),l.jsx("div",{ref:E,onScroll:V,className:"flex-1 overflow-auto bg-[#1e1e1e] [color-scheme:dark]",style:{scrollbarColor:"#2f2f2f #111111"},children:R?l.jsx("ul",{className:"bg-[#1e1e1e]",children:j.map(H=>l.jsx("li",{className:"flex items-start gap-3 border-b border-[#1a1a1a] px-3 py-[2px] transition hover:bg-[#232323] last:border-b-0",children:l.jsxs("div",{className:"flex min-w-0 flex-1 items-baseline gap-2",children:[vE(H.timestamp),l.jsx("span",{className:"shrink-0 font-mono text-[11px] leading-snug text-[#606674]",children:hv(H.origin)}),l.jsx("span",{className:ge("shrink-0 font-mono text-[11px] leading-snug",wE(H.level)),children:yE(H.level)}),l.jsx("div",{className:ge("min-w-0 whitespace-pre-wrap break-words text-[13px] leading-snug",gE(H.level)),children:H.rendered})]})},H.key))}):q?l.jsx(r0,{title:"No console output matches these filters.",description:"Adjust origin or level filters to see more."}):l.jsx(r0,{title:"Waiting for ADE output",description:"Run validation or a test to stream logs into this terminal."})})]})}function r0({title:e,description:n}){return l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-slate-500",children:[l.jsx("p",{className:"tracking-wide text-slate-300",children:e}),l.jsx("p",{className:"text-[12px] leading-relaxed text-slate-500",children:n})]})}function pE({status:e}){const n=bE(e),r=e==="succeeded"?"bg-emerald-500":e==="running"||e==="queued"?"bg-amber-400":n?"bg-slate-400":"bg-rose-500";return l.jsx("span",{className:ge("inline-block h-2.5 w-2.5 rounded-full",r),"aria-hidden":!0})}function gE(e){switch(e){case"warning":return"text-amber-100";case"error":return"text-rose-100";case"success":return"text-emerald-100";default:return"text-[#d4d4d4]"}}function xE(e){switch(e){case"warning":return"WARN";case"error":return"ERROR";case"success":return"DONE";default:return"INFO"}}function bE(e){return e==="cancelled"||e==="canceled"}function hv(e){return e==="build"?"[build]":e==="raw"?"[raw]":"[run]"}function vE(e){const n=mv(e);return n?l.jsxs("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-[#7a8090]",children:["[",n,"]"]}):l.jsx("span",{className:"shrink-0 tabular-nums text-[11px] leading-snug text-[#4f5665]","aria-hidden":!0,children:""})}function yE(e){switch(e){case"warning":return" warn";case"error":return" error";case"success":return" done";default:return" info"}}function wE(e){switch(e){case"warning":return"text-amber-300";case"error":return"text-rose-300";case"success":return"text-emerald-300";default:return"text-[#6f7683]"}}function mv(e){if(!e)return"";const n=Aa(e);if(n&&n.trim().length>0)return n;const r=e.trim();return r.length>0?r:""}function SE(e){return typeof e=="string"?l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-snug text-[#d4d4d4]",children:e}):e&&typeof e=="object"?l.jsx("pre",{className:"whitespace-pre-wrap break-words text-[12px] leading-snug text-[#d4d4d4]",children:JSON.stringify(e,null,2)}):null}function jE(e,n){const r=mv(e.timestamp),i=hv(e.origin),c=xE(e.level).toLowerCase();if(n==="raw"){const u=typeof e.raw=="string"?e.raw:e.raw?JSON.stringify(e.raw,null,2):e.message??"";return`${r?`[${r}] `:""}${i} ${c} ${u}`.trim()}return`${r?`[${r}] `:""}${i} ${c} ${e.message??""}`.trim()}function a0(e){return e?e.length===0?"All worksheets":e.join(", "):null}function EE(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function NE({validation:e}){const n=_E(e),r=kE(e);return l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[l.jsx("span",{children:n}),e.lastRunAt?l.jsxs("span",{children:["Last run ",TE(e.lastRunAt)]}):null]}),e.messages.length>0?l.jsx("ul",{className:"space-y-1.5",children:e.messages.map((i,c)=>l.jsxs("li",{className:CE(i.level),children:[i.path?l.jsx("span",{className:"block text-[11px] font-medium uppercase tracking-wide text-slate-500",children:i.path}):null,l.jsx("span",{className:"text-[13px]",children:i.message})]},`${i.level}-${i.path??c}-${c}`))}):l.jsx("p",{className:"text-xs leading-relaxed text-slate-500",children:r})]})}function CE(e){switch(e){case"error":return"text-danger-600";case"warning":return"text-amber-600";default:return"text-slate-600"}}function _E(e){switch(e.status){case"running":return"Running validation...";case"success":{if(e.messages.length===0)return"Validation completed with no issues.";const n=e.messages.length;return`Validation completed with ${n} ${n===1?"issue":"issues"}.`}case"error":return e.error??"Validation failed.";default:return"No validation run yet."}}function kE(e){return e.status==="running"?"Validation in progress...":e.status==="success"?"No validation issues detected.":e.status==="error"?e.error??"Validation failed.":"Trigger validation from the workbench header to see ADE parsing results and manifest issues."}function TE(e){const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function pv({summary:e}){const n=e.core.validation_issue_count_total;return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:[l.jsx(Dc,{label:"Tables",value:e.core.table_count}),l.jsx(Dc,{label:"Rows",value:e.core.row_count??""}),l.jsx(Dc,{label:"Mapped fields",value:e.core.mapped_field_count}),l.jsx(Dc,{label:"Issues",value:n,intent:n>0?"warn":"ok"})]}),l.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[l.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Files"}),e.breakdowns.by_file.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No files recorded."}):l.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:e.breakdowns.by_file.map(r=>l.jsxs("li",{className:"flex items-center justify-between gap-3",children:[l.jsx("span",{className:"truncate font-semibold text-slate-800",children:r.source_file}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[r.table_count," tables  ",r.row_count??"?"," rows  ",r.validation_issue_count_total," issues"]})]},r.source_file))})]}),l.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Fields"}),e.breakdowns.by_field.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No field mappings recorded."}):l.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[e.breakdowns.by_field.slice(0,6).map(r=>l.jsxs("li",{className:"flex items-center justify-between gap-3",children:[l.jsxs("span",{className:"truncate font-semibold text-slate-800",children:[r.label||r.field," ",r.required?" required":""]}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[r.mapped?"mapped":"unmapped","  ",r.validation_issue_count_total," issues"]})]},r.field)),e.breakdowns.by_field.length>6?l.jsxs("li",{className:"text-[11px] text-slate-500",children:["+",e.breakdowns.by_field.length-6," more fields"]}):null]})]})]})]})}function gv({events:e}){if(!e.length)return l.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."});const n=e.reduce((i,c)=>{const u=Xf(c),d=u.stream==="stderr"?"warning":void 0,m=u.level??d??"info";return i[m]=(i[m]??0)+1,i},{}),r=e.slice(-6).reverse();return l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex flex-wrap gap-2 text-[11px] text-slate-600",children:Object.entries(n).map(([i,c])=>l.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 font-semibold text-slate-700",children:[i,": ",c]},i))}),l.jsx("ul",{className:"space-y-1",children:r.map(i=>l.jsx("li",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-800",children:(()=>{const u=Xf(i).message?.trim();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[l.jsx("span",{className:"font-semibold",children:i.type}),l.jsx("span",{className:"text-[11px] text-slate-500",children:DE(i.created_at)})]}),l.jsx("p",{className:"text-[11px] text-slate-600",children:u||`Level: ${AE(i)}`})]})})()},`${i.created_at}-${i.type}`))})]})}function DE(e){const n=e instanceof Date?e:new Date(e);return Number.isNaN(n.getTime())?String(e):n.toLocaleString()}function AE(e){const n=Xf(e),r=n.stream==="stderr"?"warning":void 0;return n.level??r??"info"}function Xf(e){const n=e.payload;return n&&typeof n=="object"?n:{}}function Dc({label:e,value:n,intent:r="default"}){const i=r==="warn"?"text-amber-700":r==="ok"?"text-emerald-700":"text-slate-700";return l.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1",children:[l.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:e}),l.jsx("p",{className:`text-sm font-semibold ${i}`,children:n})]})}function RE({latestRun:e,buildPhases:n,runPhases:r,runStatus:i,runMode:c}){return e?l.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-3 overflow-auto",children:[l.jsx(ME,{buildPhases:n,runPhases:r,runStatus:i,runMode:c}),l.jsx(zE,{summary:e}),l.jsx(OE,{summary:e}),l.jsx(LE,{summary:e}),l.jsx(UE,{summary:e})]}):l.jsx("div",{className:"flex flex-1 items-center justify-center text-xs text-slate-500",children:"No run yet. Run a test or validation to see details here."})}function ME({buildPhases:e,runPhases:n,runStatus:r,runMode:i}){const c=Object.entries(e),u=Object.entries(n);return c.length>0||u.length>0||r?l.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[l.jsx("div",{className:"flex items-center justify-between gap-3",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Run timeline"}),l.jsxs("p",{className:"text-[12px] text-slate-500",children:[i?i==="validation"?"Validation":"Test run":"Run","  ",r??"idle"]})]})}),l.jsxs("div",{className:"mt-3 grid gap-4 md:grid-cols-2",children:[l.jsx(i0,{title:"Build",entries:c,fallback:VE(r)}),l.jsx(i0,{title:"Run",entries:u,fallback:QE(r)})]})]}):null}function i0({title:e,entries:n,fallback:r}){return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:e}),n.length===0?l.jsx("p",{className:"text-[12px] text-slate-500",children:r??"Waiting for updates"}):l.jsx("ul",{className:"space-y-1.5",children:n.map(([i,c])=>l.jsxs("li",{className:"flex items-start gap-2 rounded border border-slate-100 px-2 py-1",children:[l.jsx("span",{className:ge("mt-[3px] inline-flex h-2 w-2 rounded-full",HE(c.status)),"aria-hidden":!0}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-[13px] font-semibold text-slate-700",children:FE(i)}),l.jsxs("p",{className:"text-[12px] text-slate-500",children:[c.message??ZE(c.status),c.durationMs!=null?`  ${xv(c.durationMs)}`:""]})]})]},i))})]})}function zE({summary:e}){const n=e.durationMs!=null?xv(e.durationMs):null,r=e.sheetNames&&e.sheetNames.length>0?e.sheetNames.join(", "):e.sheetNames?"All worksheets":null;return l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3 rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[11px] uppercase tracking-[0.18em] text-slate-500",children:[l.jsx(BE,{status:e.status}),l.jsx("span",{className:"font-semibold text-slate-700",children:"Run"}),l.jsxs("span",{className:"text-slate-400",title:e.runId,children:["#",e.runId]})]}),l.jsxs("div",{className:"text-sm font-semibold text-slate-800",children:[qE(e.status),n?l.jsxs("span",{className:"font-normal text-slate-500",children:["  ",n]}):null]}),l.jsxs("div",{className:"text-xs text-slate-500",children:[e.documentName??"Document not recorded",r?`  ${r}`:null]}),e.completedAt?l.jsxs("div",{className:"text-[11px] text-slate-400",children:["Completed ",$E(e.completedAt)]}):null]}),l.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.logsUrl?l.jsx("a",{href:e.logsUrl,className:"inline-flex items-center gap-2 rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-[12px] font-semibold text-slate-700 shadow-sm hover:border-slate-300 hover:bg-white",children:"Download logs"}):null})]})}function OE({summary:e}){return l.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Output files"}),e.outputsLoaded?null:l.jsx("span",{className:"text-[12px] text-slate-400",children:"Loading"})]}),e.error?l.jsx("p",{className:"mt-2 text-sm text-rose-600",children:e.error}):e.outputsLoaded?e.outputs.length>0?l.jsx("ul",{className:"mt-2 space-y-1 text-sm text-slate-800",children:e.outputs.map(n=>{const r=n.path?.split("/").map(encodeURIComponent).join("/")??n.name.split("/").map(encodeURIComponent).join("/"),i=n.download_url?n.download_url:e.outputsBase?`${e.outputsBase}/${r}`:void 0,c=l.jsx("span",{className:"text-brand-600",children:n.name||n.path});return l.jsxs("li",{className:"flex items-center justify-between gap-2 break-all rounded border border-slate-100 px-2 py-1",children:[i?l.jsx("a",{href:i,className:"text-brand-600 hover:underline",children:n.name||n.path}):c,l.jsxs("span",{className:"text-[11px] text-slate-500",children:[n.byte_size.toLocaleString()," bytes"]})]},n.path??n.name)})}):l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No output files were generated."}):l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Loading outputs"})]})}function LE({summary:e}){return l.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[l.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Run summary"}),e.summaryError?l.jsx("p",{className:"mt-2 text-sm text-rose-600",children:e.summaryError}):e.summaryLoaded?e.summary?l.jsx("div",{className:"mt-2",children:l.jsx(pv,{summary:e.summary})}):l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Summary not available."}):l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Loading summary"})]})}function UE({summary:e}){return l.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[l.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Telemetry summary"}),e.telemetryError?l.jsx("p",{className:"mt-2 text-sm text-rose-600",children:e.telemetryError}):e.telemetryLoaded?e.telemetry&&e.telemetry.length>0?l.jsx("div",{className:"mt-2",children:l.jsx(gv,{events:[...e.telemetry]})}):l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No telemetry events captured."}):l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Loading telemetry"})]})}function BE({status:e}){const n=bv(e),r=e==="succeeded"?"bg-emerald-500":e==="running"||e==="queued"?"bg-amber-400":n?"bg-slate-400":"bg-rose-500";return l.jsx("span",{className:ge("inline-block h-2.5 w-2.5 rounded-full",r),"aria-hidden":!0})}function xv(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function qE(e){if(bv(e))return"Canceled";switch(e){case"succeeded":return"Succeeded";case"failed":return"Failed";case"queued":return"Queued";case"running":return"Running";default:return e}}function $E(e){const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function HE(e){switch(e){case"succeeded":return"bg-emerald-500";case"running":return"bg-amber-400";case"failed":return"bg-rose-500";case"skipped":return"bg-slate-400";default:return"bg-slate-300"}}function ZE(e){switch(e){case"succeeded":return"Completed";case"running":return"In progress";case"failed":return"Failed";case"skipped":return"Skipped";default:return"Pending"}}function bv(e){return e==="cancelled"||e==="canceled"}function FE(e){return e.replace(/[-_]/g," ").replace(/\b\w/g,n=>n.toUpperCase()).trim()}function VE(e){return e==="waiting_for_build"?"Waiting for build queue":e==="queued"?"Queued":e==="building"?"Building environment":"No build phases reported."}function QE(e){return e==="running"?"Running":e==="queued"||e==="waiting_for_build"||e==="building"?"Run pending.":"No run phases reported."}function IE({height:e,consoleLines:n,validation:r,activePane:i,onPaneChange:c,latestRun:u,onShowRunDetails:d,onClearConsole:m,runStatus:x,buildPhases:g,runPhases:b,runMode:y,onToggleCollapse:w,appearance:E="light"}){const N=r.messages.length>0,j=!!u,_=E==="dark"?{surface:"border-[#1f2431] bg-[#0f111a] text-slate-100",header:"border-[#1f2431] bg-[#0f111a]",hideButton:"border-[#2b3040] bg-[#161926] text-slate-100 hover:border-[#3b4153] hover:bg-[#1e2333]"}:{surface:"border-slate-200 bg-slate-50 text-slate-800",header:"border-slate-200 bg-slate-50",hideButton:"border-slate-300 bg-white text-slate-700 hover:border-slate-400"},A=E==="dark"?"text-slate-300":"text-slate-500";return l.jsx("section",{className:ge("flex min-h-0 flex-col overflow-hidden border-t",_.surface),style:{height:e},children:l.jsxs(Ch,{value:i,onValueChange:D=>c(D),children:[l.jsxs("div",{className:ge("flex flex-none items-center justify-between border-b px-3 py-1.5",_.header),onDoubleClick:w,title:w?"Double-click to hide console":void 0,children:[l.jsxs(_h,{className:"flex items-center gap-3 text-[11px] font-medium",children:[l.jsx(ql,{value:"terminal",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:"Terminal"}),l.jsxs(ql,{value:"runSummary",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Run",j?l.jsx("span",{className:ge("ml-1 text-[10px] lowercase",A),children:u?.status}):null]}),l.jsxs(ql,{value:"problems",className:"flex items-center gap-1 rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Problems",N?l.jsx("span",{className:"inline-flex h-4 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-600 px-1 text-[10px] font-semibold text-white",children:r.messages.length}):null]})]}),w?l.jsx("button",{type:"button",onClick:w,className:ge("rounded px-2 py-1 text-[11px] font-semibold uppercase tracking-wide shadow-sm transition",_.hideButton),title:"Hide console",children:"Hide"}):null]}),l.jsx(ka,{value:"terminal",className:"flex min-h-0 flex-1 flex-col",children:l.jsx(mE,{consoleLines:n,latestRun:u,onClearConsole:m,onShowRunDetails:d,runStatus:x})}),l.jsx(ka,{value:"problems",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:l.jsx(NE,{validation:r})}),l.jsx(ka,{value:"runSummary",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:l.jsx(RE,{latestRun:u,buildPhases:g,runPhases:b,runStatus:x,runMode:y})})]})})}function PE({containerRef:e,tabs:n,activeTabId:r,onCloseTab:i,onSelectRecentTab:c,onSelectTab:u}){return p.useEffect(()=>{if(!n.length)return;const d=x=>{const g=e.current;if(!g)return!1;const b=x.target;if(b instanceof Node&&g.contains(b))return!0;const y=document.activeElement;return!!(y&&g.contains(y))},m=x=>{if(!(x.ctrlKey||x.metaKey)||!d(x))return;if(x.key.toLowerCase()==="w"){if(!r)return;x.preventDefault(),i(r);return}if(x.key==="Tab"){if(n.length<2)return;x.preventDefault(),c(x.shiftKey?"backward":"forward");return}const g=b=>{if(n.length<2)return;const y=n.findIndex(j=>j.id===r),E=((y>=0?y:0)+b+n.length)%n.length,N=n[E];N&&u(N.id)};if(x.key==="PageUp"){x.preventDefault(),g(-1);return}x.key==="PageDown"&&(x.preventDefault(),g(1))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[n,r,i,c,u,e]),null}const WE=p.lazy(()=>OS(()=>import("./MonacoCodeEditor-5YQybBN9.js"),[])),GE=p.forwardRef(function(n,r){const{className:i,...c}=n;return l.jsx(p.Suspense,{fallback:l.jsx("div",{className:ge("relative h-full w-full",i),children:l.jsx("div",{className:"flex h-full items-center justify-center text-xs text-slate-400",children:"Loading editor"})}),children:l.jsx(WE,{...c,ref:r,className:i})})});function KE({tabs:e,activeTabId:n,editorTheme:r,onContentChange:i,onSaveTab:c,canSaveFiles:u=!1,onRetryTabLoad:d,onSelectTab:m,isTabDragging:x=!1}){return p.useMemo(()=>e.find(b=>b.id===n)??null,[e,n])?l.jsx("div",{className:"flex min-h-0 min-w-0 flex-1",children:e.map(b=>l.jsx(ka,{value:b.id,className:"flex min-h-0 min-w-0 flex-1",children:b.status==="loading"?l.jsxs("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:["Loading ",b.name,""]}):b.status==="error"?l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 text-center text-sm text-slate-500",children:[l.jsx("p",{children:b.error??"Unable to load the file."}),l.jsx("button",{type:"button",className:"rounded bg-brand-600 px-3 py-1 text-xs font-medium text-white hover:bg-brand-500",onClick:()=>d?d(b.id):m(b.id),children:"Retry loading"})]}):l.jsx("div",{className:ge("flex min-h-0 min-w-0 flex-1",x&&"pointer-events-none select-none"),children:l.jsx(GE,{value:b.content,language:b.language??"plaintext",path:b.id,theme:r,onChange:y=>i(b.id,y??""),onSaveShortcut:()=>{u&&c?.(b.id)}})})},b.id))}):l.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."})}function YE(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.useMemo(()=>i=>{n.forEach(c=>c(i))},n)}const cu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bi(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Th(e){return"nodeType"in e}function Wn(e){var n,r;return e?Bi(e)?e:Th(e)&&(n=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function Dh(e){const{Document:n}=Wn(e);return e instanceof n}function so(e){return Bi(e)?!1:e instanceof Wn(e).HTMLElement}function vv(e){return e instanceof Wn(e).SVGElement}function qi(e){return e?Bi(e)?e.document:Th(e)?Dh(e)?e:so(e)||vv(e)?e.ownerDocument:document:document:document}const Gs=cu?p.useLayoutEffect:p.useEffect;function Ah(e){const n=p.useRef(e);return Gs(()=>{n.current=e}),p.useCallback(function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return n.current==null?void 0:n.current(...i)},[])}function XE(){const e=p.useRef(null),n=p.useCallback((i,c)=>{e.current=setInterval(i,c)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,r]}function Gl(e,n){n===void 0&&(n=[e]);const r=p.useRef(e);return Gs(()=>{r.current!==e&&(r.current=e)},n),r}function ro(e,n){const r=p.useRef();return p.useMemo(()=>{const i=e(r.current);return r.current=i,i},[...n])}function Wc(e){const n=Ah(e),r=p.useRef(null),i=p.useCallback(c=>{c!==r.current&&n?.(c,r.current),r.current=c},[]);return[r,i]}function Jf(e){const n=p.useRef();return p.useEffect(()=>{n.current=e},[e]),n.current}let Rf={};function ao(e,n){return p.useMemo(()=>{if(n)return n;const r=Rf[e]==null?0:Rf[e]+1;return Rf[e]=r,e+"-"+r},[e,n])}function yv(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return i.reduce((u,d)=>{const m=Object.entries(d);for(const[x,g]of m){const b=u[x];b!=null&&(u[x]=b+e*g)}return u},{...n})}}const Di=yv(1),Gc=yv(-1);function JE(e){return"clientX"in e&&"clientY"in e}function Rh(e){if(!e)return!1;const{KeyboardEvent:n}=Wn(e.target);return n&&e instanceof n}function eN(e){if(!e)return!1;const{TouchEvent:n}=Wn(e.target);return n&&e instanceof n}function eh(e){if(eN(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return JE(e)?{x:e.clientX,y:e.clientY}:null}const Kl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Kl.Translate.toString(e),Kl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:i}=e;return n+" "+r+"ms "+i}}}),l0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function tN(e){return e.matches(l0)?e:e.querySelector(l0)}const nN={display:"none"};function sN(e){let{id:n,value:r}=e;return vt.createElement("div",{id:n,style:nN},r)}function rN(e){let{id:n,announcement:r,ariaLiveType:i="assertive"}=e;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:n,style:c,role:"status","aria-live":i,"aria-atomic":!0},r)}function aN(){const[e,n]=p.useState("");return{announce:p.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const wv=p.createContext(null);function iN(e){const n=p.useContext(wv);p.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function lN(){const[e]=p.useState(()=>new Set),n=p.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[p.useCallback(i=>{let{type:c,event:u}=i;e.forEach(d=>{var m;return(m=d[c])==null?void 0:m.call(d,u)})},[e]),n]}const oN={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},cN={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function uN(e){let{announcements:n=cN,container:r,hiddenTextDescribedById:i,screenReaderInstructions:c=oN}=e;const{announce:u,announcement:d}=aN(),m=ao("DndLiveRegion"),[x,g]=p.useState(!1);if(p.useEffect(()=>{g(!0)},[]),iN(p.useMemo(()=>({onDragStart(y){let{active:w}=y;u(n.onDragStart({active:w}))},onDragMove(y){let{active:w,over:E}=y;n.onDragMove&&u(n.onDragMove({active:w,over:E}))},onDragOver(y){let{active:w,over:E}=y;u(n.onDragOver({active:w,over:E}))},onDragEnd(y){let{active:w,over:E}=y;u(n.onDragEnd({active:w,over:E}))},onDragCancel(y){let{active:w,over:E}=y;u(n.onDragCancel({active:w,over:E}))}}),[u,n])),!x)return null;const b=vt.createElement(vt.Fragment,null,vt.createElement(sN,{id:i,value:c.draggable}),vt.createElement(rN,{id:m,announcement:d}));return r?br.createPortal(b,r):b}var on;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(on||(on={}));function Kc(){}function dN(e,n){return p.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function fN(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const qs=Object.freeze({x:0,y:0});function hN(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function mN(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return r-i}function pN(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return i-r}function gN(e,n){if(!e||e.length===0)return null;const[r]=e;return r[n]}function o0(e,n,r){return n===void 0&&(n=e.left),r===void 0&&(r=e.top),{x:n+e.width*.5,y:r+e.height*.5}}const xN=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e;const c=o0(n,n.left,n.top),u=[];for(const d of i){const{id:m}=d,x=r.get(m);if(x){const g=hN(o0(x),c);u.push({id:m,data:{droppableContainer:d,value:g}})}}return u.sort(mN)};function bN(e,n){const r=Math.max(n.top,e.top),i=Math.max(n.left,e.left),c=Math.min(n.left+n.width,e.left+e.width),u=Math.min(n.top+n.height,e.top+e.height),d=c-i,m=u-r;if(i<c&&r<u){const x=n.width*n.height,g=e.width*e.height,b=d*m,y=b/(x+g-b);return Number(y.toFixed(4))}return 0}const vN=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e;const c=[];for(const u of i){const{id:d}=u,m=r.get(d);if(m){const x=bN(m,n);x>0&&c.push({id:d,data:{droppableContainer:u,value:x}})}}return c.sort(pN)};function yN(e,n,r){return{...e,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function Sv(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:qs}function wN(e){return function(r){for(var i=arguments.length,c=new Array(i>1?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];return c.reduce((d,m)=>({...d,top:d.top+e*m.y,bottom:d.bottom+e*m.y,left:d.left+e*m.x,right:d.right+e*m.x}),{...r})}}const SN=wN(1);function jN(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function EN(e,n,r){const i=jN(n);if(!i)return e;const{scaleX:c,scaleY:u,x:d,y:m}=i,x=e.left-d-(1-c)*parseFloat(r),g=e.top-m-(1-u)*parseFloat(r.slice(r.indexOf(" ")+1)),b=c?e.width/c:e.width,y=u?e.height/u:e.height;return{width:b,height:y,top:g,right:x+b,bottom:g+y,left:x}}const NN={ignoreTransform:!1};function $i(e,n){n===void 0&&(n=NN);let r=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:g,transformOrigin:b}=Wn(e).getComputedStyle(e);g&&(r=EN(r,g,b))}const{top:i,left:c,width:u,height:d,bottom:m,right:x}=r;return{top:i,left:c,width:u,height:d,bottom:m,right:x}}function c0(e){return $i(e,{ignoreTransform:!0})}function CN(e){const n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function _N(e,n){return n===void 0&&(n=Wn(e).getComputedStyle(e)),n.position==="fixed"}function kN(e,n){n===void 0&&(n=Wn(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const u=n[c];return typeof u=="string"?r.test(u):!1})}function Mh(e,n){const r=[];function i(c){if(n!=null&&r.length>=n||!c)return r;if(Dh(c)&&c.scrollingElement!=null&&!r.includes(c.scrollingElement))return r.push(c.scrollingElement),r;if(!so(c)||vv(c)||r.includes(c))return r;const u=Wn(e).getComputedStyle(c);return c!==e&&kN(c,u)&&r.push(c),_N(c,u)?r:i(c.parentNode)}return e?i(e):r}function jv(e){const[n]=Mh(e,1);return n??null}function Mf(e){return!cu||!e?null:Bi(e)?e:Th(e)?Dh(e)||e===qi(e).scrollingElement?window:so(e)?e:null:null}function Ev(e){return Bi(e)?e.scrollX:e.scrollLeft}function Nv(e){return Bi(e)?e.scrollY:e.scrollTop}function th(e){return{x:Ev(e),y:Nv(e)}}var gn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(gn||(gn={}));function Cv(e){return!cu||!e?!1:e===document.scrollingElement}function _v(e){const n={x:0,y:0},r=Cv(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},c=e.scrollTop<=n.y,u=e.scrollLeft<=n.x,d=e.scrollTop>=i.y,m=e.scrollLeft>=i.x;return{isTop:c,isLeft:u,isBottom:d,isRight:m,maxScroll:i,minScroll:n}}const TN={x:.2,y:.2};function DN(e,n,r,i,c){let{top:u,left:d,right:m,bottom:x}=r;i===void 0&&(i=10),c===void 0&&(c=TN);const{isTop:g,isBottom:b,isLeft:y,isRight:w}=_v(e),E={x:0,y:0},N={x:0,y:0},j={height:n.height*c.y,width:n.width*c.x};return!g&&u<=n.top+j.height?(E.y=gn.Backward,N.y=i*Math.abs((n.top+j.height-u)/j.height)):!b&&x>=n.bottom-j.height&&(E.y=gn.Forward,N.y=i*Math.abs((n.bottom-j.height-x)/j.height)),!w&&m>=n.right-j.width?(E.x=gn.Forward,N.x=i*Math.abs((n.right-j.width-m)/j.width)):!y&&d<=n.left+j.width&&(E.x=gn.Backward,N.x=i*Math.abs((n.left+j.width-d)/j.width)),{direction:E,speed:N}}function AN(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:n,left:r,right:i,bottom:c}=e.getBoundingClientRect();return{top:n,left:r,right:i,bottom:c,width:e.clientWidth,height:e.clientHeight}}function kv(e){return e.reduce((n,r)=>Di(n,th(r)),qs)}function RN(e){return e.reduce((n,r)=>n+Ev(r),0)}function MN(e){return e.reduce((n,r)=>n+Nv(r),0)}function zN(e,n){if(n===void 0&&(n=$i),!e)return;const{top:r,left:i,bottom:c,right:u}=n(e);jv(e)&&(c<=0||u<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ON=[["x",["left","right"],RN],["y",["top","bottom"],MN]];class zh{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Mh(r),c=kv(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[u,d,m]of ON)for(const x of d)Object.defineProperty(this,x,{get:()=>{const g=m(i),b=c[u]-g;return this.rect[x]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $l{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...r)})},this.target=n}add(n,r,i){var c;(c=this.target)==null||c.addEventListener(n,r,i),this.listeners.push([n,r,i])}}function LN(e){const{EventTarget:n}=Wn(e);return e instanceof n?e:qi(e)}function zf(e,n){const r=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(r**2+i**2)>n:"x"in n&&"y"in n?r>n.x&&i>n.y:"x"in n?r>n.x:"y"in n?i>n.y:!1}var ws;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ws||(ws={}));function u0(e){e.preventDefault()}function UN(e){e.stopPropagation()}var ut;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ut||(ut={}));const Tv={start:[ut.Space,ut.Enter],cancel:[ut.Esc],end:[ut.Space,ut.Enter,ut.Tab]},BN=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case ut.Right:return{...r,x:r.x+25};case ut.Left:return{...r,x:r.x-25};case ut.Down:return{...r,y:r.y+25};case ut.Up:return{...r,y:r.y-25}}};class Dv{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new $l(qi(r)),this.windowListeners=new $l(Wn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ws.Resize,this.handleCancel),this.windowListeners.add(ws.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ws.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,i=n.node.current;i&&zN(i),r(qs)}handleKeyDown(n){if(Rh(n)){const{active:r,context:i,options:c}=this.props,{keyboardCodes:u=Tv,coordinateGetter:d=BN,scrollBehavior:m="smooth"}=c,{code:x}=n;if(u.end.includes(x)){this.handleEnd(n);return}if(u.cancel.includes(x)){this.handleCancel(n);return}const{collisionRect:g}=i.current,b=g?{x:g.left,y:g.top}:qs;this.referenceCoordinates||(this.referenceCoordinates=b);const y=d(n,{active:r,context:i.current,currentCoordinates:b});if(y){const w=Gc(y,b),E={x:0,y:0},{scrollableAncestors:N}=i.current;for(const j of N){const _=n.code,{isTop:A,isRight:D,isLeft:R,isBottom:q,maxScroll:U,minScroll:V}=_v(j),$=AN(j),re={x:Math.min(_===ut.Right?$.right-$.width/2:$.right,Math.max(_===ut.Right?$.left:$.left+$.width/2,y.x)),y:Math.min(_===ut.Down?$.bottom-$.height/2:$.bottom,Math.max(_===ut.Down?$.top:$.top+$.height/2,y.y))},B=_===ut.Right&&!D||_===ut.Left&&!R,H=_===ut.Down&&!q||_===ut.Up&&!A;if(B&&re.x!==y.x){const J=j.scrollLeft+w.x,ce=_===ut.Right&&J<=U.x||_===ut.Left&&J>=V.x;if(ce&&!w.y){j.scrollTo({left:J,behavior:m});return}ce?E.x=j.scrollLeft-J:E.x=_===ut.Right?j.scrollLeft-U.x:j.scrollLeft-V.x,E.x&&j.scrollBy({left:-E.x,behavior:m});break}else if(H&&re.y!==y.y){const J=j.scrollTop+w.y,ce=_===ut.Down&&J<=U.y||_===ut.Up&&J>=V.y;if(ce&&!w.x){j.scrollTo({top:J,behavior:m});return}ce?E.y=j.scrollTop-J:E.y=_===ut.Down?j.scrollTop-U.y:j.scrollTop-V.y,E.y&&j.scrollBy({top:-E.y,behavior:m});break}}this.handleMove(n,Di(Gc(y,this.referenceCoordinates),E))}}}handleMove(n,r){const{onMove:i}=this.props;n.preventDefault(),i(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dv.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:i=Tv,onActivation:c}=n,{active:u}=r;const{code:d}=e.nativeEvent;if(i.start.includes(d)){const m=u.activatorNode.current;return m&&e.target!==m?!1:(e.preventDefault(),c?.({event:e.nativeEvent}),!0)}return!1}}];function d0(e){return!!(e&&"distance"in e)}function f0(e){return!!(e&&"delay"in e)}class Oh{constructor(n,r,i){var c;i===void 0&&(i=LN(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:u}=n,{target:d}=u;this.props=n,this.events=r,this.document=qi(d),this.documentListeners=new $l(this.document),this.listeners=new $l(i),this.windowListeners=new $l(Wn(d)),this.initialCoordinates=(c=eh(u))!=null?c:qs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(ws.Resize,this.handleCancel),this.windowListeners.add(ws.DragStart,u0),this.windowListeners.add(ws.VisibilityChange,this.handleCancel),this.windowListeners.add(ws.ContextMenu,u0),this.documentListeners.add(ws.Keydown,this.handleKeydown),r){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(f0(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(d0(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:i,onPending:c}=this.props;c(i,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(ws.Click,UN,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ws.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:i,initialCoordinates:c,props:u}=this,{onMove:d,options:{activationConstraint:m}}=u;if(!c)return;const x=(r=eh(n))!=null?r:qs,g=Gc(c,x);if(!i&&m){if(d0(m)){if(m.tolerance!=null&&zf(g,m.tolerance))return this.handleCancel();if(zf(g,m.distance))return this.handleStart()}if(f0(m)&&zf(g,m.tolerance))return this.handleCancel();this.handlePending(m,g);return}n.cancelable&&n.preventDefault(),d(x)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===ut.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const qN={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lh extends Oh{constructor(n){const{event:r}=n,i=qi(r.target);super(n,qN,i)}}Lh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return!r.isPrimary||r.button!==0?!1:(i?.({event:r}),!0)}}];const $N={move:{name:"mousemove"},end:{name:"mouseup"}};var nh;(function(e){e[e.RightClick=2]="RightClick"})(nh||(nh={}));class HN extends Oh{constructor(n){super(n,$N,qi(n.event.target))}}HN.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return r.button===nh.RightClick?!1:(i?.({event:r}),!0)}}];const Of={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ZN extends Oh{constructor(n){super(n,Of)}static setup(){return window.addEventListener(Of.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Of.move.name,n)};function n(){}}}ZN.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;const{touches:c}=r;return c.length>1?!1:(i?.({event:r}),!0)}}];var Hl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Hl||(Hl={}));var Yc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yc||(Yc={}));function FN(e){let{acceleration:n,activator:r=Hl.Pointer,canScroll:i,draggingRect:c,enabled:u,interval:d=5,order:m=Yc.TreeOrder,pointerCoordinates:x,scrollableAncestors:g,scrollableAncestorRects:b,delta:y,threshold:w}=e;const E=QN({delta:y,disabled:!u}),[N,j]=XE(),_=p.useRef({x:0,y:0}),A=p.useRef({x:0,y:0}),D=p.useMemo(()=>{switch(r){case Hl.Pointer:return x?{top:x.y,bottom:x.y,left:x.x,right:x.x}:null;case Hl.DraggableRect:return c}},[r,c,x]),R=p.useRef(null),q=p.useCallback(()=>{const V=R.current;if(!V)return;const $=_.current.x*A.current.x,re=_.current.y*A.current.y;V.scrollBy($,re)},[]),U=p.useMemo(()=>m===Yc.TreeOrder?[...g].reverse():g,[m,g]);p.useEffect(()=>{if(!u||!g.length||!D){j();return}for(const V of U){if(i?.(V)===!1)continue;const $=g.indexOf(V),re=b[$];if(!re)continue;const{direction:B,speed:H}=DN(V,re,D,n,w);for(const J of["x","y"])E[J][B[J]]||(H[J]=0,B[J]=0);if(H.x>0||H.y>0){j(),R.current=V,N(q,d),_.current=H,A.current=B;return}}_.current={x:0,y:0},A.current={x:0,y:0},j()},[n,q,i,j,u,d,JSON.stringify(D),JSON.stringify(E),N,g,U,b,JSON.stringify(w)])}const VN={x:{[gn.Backward]:!1,[gn.Forward]:!1},y:{[gn.Backward]:!1,[gn.Forward]:!1}};function QN(e){let{delta:n,disabled:r}=e;const i=Jf(n);return ro(c=>{if(r||!i||!c)return VN;const u={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[gn.Backward]:c.x[gn.Backward]||u.x===-1,[gn.Forward]:c.x[gn.Forward]||u.x===1},y:{[gn.Backward]:c.y[gn.Backward]||u.y===-1,[gn.Forward]:c.y[gn.Forward]||u.y===1}}},[r,n,i])}function IN(e,n){const r=n!=null?e.get(n):void 0,i=r?r.node.current:null;return ro(c=>{var u;return n==null?null:(u=i??c)!=null?u:null},[i,n])}function PN(e,n){return p.useMemo(()=>e.reduce((r,i)=>{const{sensor:c}=i,u=c.activators.map(d=>({eventName:d.eventName,handler:n(d.handler,i)}));return[...r,...u]},[]),[e,n])}var Yl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Yl||(Yl={}));var sh;(function(e){e.Optimized="optimized"})(sh||(sh={}));const h0=new Map;function WN(e,n){let{dragging:r,dependencies:i,config:c}=n;const[u,d]=p.useState(null),{frequency:m,measure:x,strategy:g}=c,b=p.useRef(e),y=_(),w=Gl(y),E=p.useCallback(function(A){A===void 0&&(A=[]),!w.current&&d(D=>D===null?A:D.concat(A.filter(R=>!D.includes(R))))},[w]),N=p.useRef(null),j=ro(A=>{if(y&&!r)return h0;if(!A||A===h0||b.current!==e||u!=null){const D=new Map;for(let R of e){if(!R)continue;if(u&&u.length>0&&!u.includes(R.id)&&R.rect.current){D.set(R.id,R.rect.current);continue}const q=R.node.current,U=q?new zh(x(q),q):null;R.rect.current=U,U&&D.set(R.id,U)}return D}return A},[e,u,r,y,x]);return p.useEffect(()=>{b.current=e},[e]),p.useEffect(()=>{y||E()},[r,y]),p.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),p.useEffect(()=>{y||typeof m!="number"||N.current!==null||(N.current=setTimeout(()=>{E(),N.current=null},m))},[m,y,E,...i]),{droppableRects:j,measureDroppableContainers:E,measuringScheduled:u!=null};function _(){switch(g){case Yl.Always:return!1;case Yl.BeforeDragging:return r;default:return!r}}}function Av(e,n){return ro(r=>e?r||(typeof n=="function"?n(e):e):null,[n,e])}function GN(e,n){return Av(e,n)}function KN(e){let{callback:n,disabled:r}=e;const i=Ah(n),c=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(i)},[i,r]);return p.useEffect(()=>()=>c?.disconnect(),[c]),c}function uu(e){let{callback:n,disabled:r}=e;const i=Ah(n),c=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(i)},[r]);return p.useEffect(()=>()=>c?.disconnect(),[c]),c}function YN(e){return new zh($i(e),e)}function m0(e,n,r){n===void 0&&(n=YN);const[i,c]=p.useState(null);function u(){c(x=>{if(!e)return null;if(e.isConnected===!1){var g;return(g=x??r)!=null?g:null}const b=n(e);return JSON.stringify(x)===JSON.stringify(b)?x:b})}const d=KN({callback(x){if(e)for(const g of x){const{type:b,target:y}=g;if(b==="childList"&&y instanceof HTMLElement&&y.contains(e)){u();break}}}}),m=uu({callback:u});return Gs(()=>{u(),e?(m?.observe(e),d?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),d?.disconnect())},[e]),i}function XN(e){const n=Av(e);return Sv(e,n)}const p0=[];function JN(e){const n=p.useRef(e),r=ro(i=>e?i&&i!==p0&&e&&n.current&&e.parentNode===n.current.parentNode?i:Mh(e):p0,[e]);return p.useEffect(()=>{n.current=e},[e]),r}function e2(e){const[n,r]=p.useState(null),i=p.useRef(e),c=p.useCallback(u=>{const d=Mf(u.target);d&&r(m=>m?(m.set(d,th(d)),new Map(m)):null)},[]);return p.useEffect(()=>{const u=i.current;if(e!==u){d(u);const m=e.map(x=>{const g=Mf(x);return g?(g.addEventListener("scroll",c,{passive:!0}),[g,th(g)]):null}).filter(x=>x!=null);r(m.length?new Map(m):null),i.current=e}return()=>{d(e),d(u)};function d(m){m.forEach(x=>{const g=Mf(x);g?.removeEventListener("scroll",c)})}},[c,e]),p.useMemo(()=>e.length?n?Array.from(n.values()).reduce((u,d)=>Di(u,d),qs):kv(e):qs,[e,n])}function g0(e,n){n===void 0&&(n=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},n),p.useEffect(()=>{const i=e!==qs;i&&!r.current&&(r.current=e),!i&&r.current&&(r.current=null)},[e]),r.current?Gc(e,r.current):qs}function t2(e){p.useEffect(()=>{if(!cu)return;const n=e.map(r=>{let{sensor:i}=r;return i.setup==null?void 0:i.setup()});return()=>{for(const r of n)r?.()}},e.map(n=>{let{sensor:r}=n;return r}))}function n2(e,n){return p.useMemo(()=>e.reduce((r,i)=>{let{eventName:c,handler:u}=i;return r[c]=d=>{u(d,n)},r},{}),[e,n])}function Rv(e){return p.useMemo(()=>e?CN(e):null,[e])}const x0=[];function s2(e,n){n===void 0&&(n=$i);const[r]=e,i=Rv(r?Wn(r):null),[c,u]=p.useState(x0);function d(){u(()=>e.length?e.map(x=>Cv(x)?i:new zh(n(x),x)):x0)}const m=uu({callback:d});return Gs(()=>{m?.disconnect(),d(),e.forEach(x=>m?.observe(x))},[e]),c}function r2(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return so(n)?n:e}function a2(e){let{measure:n}=e;const[r,i]=p.useState(null),c=p.useCallback(g=>{for(const{target:b}of g)if(so(b)){i(y=>{const w=n(b);return y?{...y,width:w.width,height:w.height}:w});break}},[n]),u=uu({callback:c}),d=p.useCallback(g=>{const b=r2(g);u?.disconnect(),b&&u?.observe(b),i(b?n(b):null)},[n,u]),[m,x]=Wc(d);return p.useMemo(()=>({nodeRef:m,rect:r,setRef:x}),[r,m,x])}const i2=[{sensor:Lh,options:{}},{sensor:Dv,options:{}}],l2={current:{}},Hc={draggable:{measure:c0},droppable:{measure:c0,strategy:Yl.WhileDragging,frequency:sh.Optimized},dragOverlay:{measure:$i}};class Zl extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,i;return(r=(i=this.get(n))==null?void 0:i.node.current)!=null?r:void 0}}const o2={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hc,measureDroppableContainers:Kc,windowRect:null,measuringScheduled:!1},c2={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kc,draggableNodes:new Map,over:null,measureDroppableContainers:Kc},du=p.createContext(c2),Mv=p.createContext(o2);function u2(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zl}}}function d2(e,n){switch(n.type){case on.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case on.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case on.DragEnd:case on.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case on.RegisterDroppable:{const{element:r}=n,{id:i}=r,c=new Zl(e.droppable.containers);return c.set(i,r),{...e,droppable:{...e.droppable,containers:c}}}case on.SetDroppableDisabled:{const{id:r,key:i,disabled:c}=n,u=e.droppable.containers.get(r);if(!u||i!==u.key)return e;const d=new Zl(e.droppable.containers);return d.set(r,{...u,disabled:c}),{...e,droppable:{...e.droppable,containers:d}}}case on.UnregisterDroppable:{const{id:r,key:i}=n,c=e.droppable.containers.get(r);if(!c||i!==c.key)return e;const u=new Zl(e.droppable.containers);return u.delete(r),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function f2(e){let{disabled:n}=e;const{active:r,activatorEvent:i,draggableNodes:c}=p.useContext(du),u=Jf(i),d=Jf(r?.id);return p.useEffect(()=>{if(!n&&!i&&u&&d!=null){if(!Rh(u)||document.activeElement===u.target)return;const m=c.get(d);if(!m)return;const{activatorNode:x,node:g}=m;if(!x.current&&!g.current)return;requestAnimationFrame(()=>{for(const b of[x.current,g.current]){if(!b)continue;const y=tN(b);if(y){y.focus();break}}})}},[i,n,c,d,u]),null}function h2(e,n){let{transform:r,...i}=n;return e!=null&&e.length?e.reduce((c,u)=>u({transform:c,...i}),r):r}function m2(e){return p.useMemo(()=>({draggable:{...Hc.draggable,...e?.draggable},droppable:{...Hc.droppable,...e?.droppable},dragOverlay:{...Hc.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function p2(e){let{activeNode:n,measure:r,initialRect:i,config:c=!0}=e;const u=p.useRef(!1),{x:d,y:m}=typeof c=="boolean"?{x:c,y:c}:c;Gs(()=>{if(!d&&!m||!n){u.current=!1;return}if(u.current||!i)return;const g=n?.node.current;if(!g||g.isConnected===!1)return;const b=r(g),y=Sv(b,i);if(d||(y.x=0),m||(y.y=0),u.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const w=jv(g);w&&w.scrollBy({top:y.y,left:y.x})}},[n,d,m,i,r])}const zv=p.createContext({...qs,scaleX:1,scaleY:1});var Wr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Wr||(Wr={}));const g2=p.memo(function(n){var r,i,c,u;let{id:d,accessibility:m,autoScroll:x=!0,children:g,sensors:b=i2,collisionDetection:y=vN,measuring:w,modifiers:E,...N}=n;const j=p.useReducer(d2,void 0,u2),[_,A]=j,[D,R]=lN(),[q,U]=p.useState(Wr.Uninitialized),V=q===Wr.Initialized,{draggable:{active:$,nodes:re,translate:B},droppable:{containers:H}}=_,J=$!=null?re.get($):null,ce=p.useRef({initial:null,translated:null}),Q=p.useMemo(()=>{var _t;return $!=null?{id:$,data:(_t=J?.data)!=null?_t:l2,rect:ce}:null},[$,J]),de=p.useRef(null),[xe,z]=p.useState(null),[ee,K]=p.useState(null),be=Gl(N,Object.values(N)),ve=ao("DndDescribedBy",d),C=p.useMemo(()=>H.getEnabled(),[H]),I=m2(w),{droppableRects:ae,measureDroppableContainers:M,measuringScheduled:F}=WN(C,{dragging:V,dependencies:[B.x,B.y],config:I.droppable}),G=IN(re,$),te=p.useMemo(()=>ee?eh(ee):null,[ee]),L=wr(),ie=GN(G,I.draggable.measure);p2({activeNode:$!=null?re.get($):null,config:L.layoutShiftCompensation,initialRect:ie,measure:I.draggable.measure});const me=m0(G,I.draggable.measure,ie),Te=m0(G?G.parentElement:null),Fe=p.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:re,draggingNode:null,draggingNodeRect:null,droppableContainers:H,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=H.getNodeFor((r=Fe.current.over)==null?void 0:r.id),_e=a2({measure:I.dragOverlay.measure}),ne=(i=_e.nodeRef.current)!=null?i:G,Ee=V?(c=_e.rect)!=null?c:me:null,Ue=!!(_e.nodeRef.current&&_e.rect),qe=XN(Ue?null:me),tt=Rv(ne?Wn(ne):null),k=JN(V?Se??G:null),W=s2(k),le=h2(E,{transform:{x:B.x-qe.x,y:B.y-qe.y,scaleX:1,scaleY:1},activatorEvent:ee,active:Q,activeNodeRect:me,containerNodeRect:Te,draggingNodeRect:Ee,over:Fe.current.over,overlayNodeRect:_e.rect,scrollableAncestors:k,scrollableAncestorRects:W,windowRect:tt}),Ce=te?Di(te,B):null,we=e2(k),je=g0(we),Ae=g0(we,[me]),Pe=Di(le,je),Ge=Ee?SN(Ee,le):null,Nt=Q&&Ge?y({active:Q,collisionRect:Ge,droppableRects:ae,droppableContainers:C,pointerCoordinates:Ce}):null,Ne=gN(Nt,"id"),[ke,Ie]=p.useState(null),Dt=Ue?le:Di(le,Ae),it=yN(Dt,(u=ke?.rect)!=null?u:null,me),Pt=p.useRef(null),Ct=p.useCallback((_t,Mt)=>{let{sensor:Ht,options:Wt}=Mt;if(de.current==null)return;const Zt=re.get(de.current);if(!Zt)return;const dn=_t.nativeEvent,fn=new Ht({active:de.current,activeNode:Zt,event:dn,options:Wt,context:Fe,onAbort(zt){if(!re.get(zt))return;const{onDragAbort:Cn}=be.current,hn={id:zt};Cn?.(hn),D({type:"onDragAbort",event:hn})},onPending(zt,qn,Cn,hn){if(!re.get(zt))return;const{onDragPending:Kn}=be.current,Dn={id:zt,constraint:qn,initialCoordinates:Cn,offset:hn};Kn?.(Dn),D({type:"onDragPending",event:Dn})},onStart(zt){const qn=de.current;if(qn==null)return;const Cn=re.get(qn);if(!Cn)return;const{onDragStart:hn}=be.current,Gn={activatorEvent:dn,active:{id:qn,data:Cn.data,rect:ce}};br.unstable_batchedUpdates(()=>{hn?.(Gn),U(Wr.Initializing),A({type:on.DragStart,initialCoordinates:zt,active:qn}),D({type:"onDragStart",event:Gn}),z(Pt.current),K(dn)})},onMove(zt){A({type:on.DragMove,coordinates:zt})},onEnd:Bn(on.DragEnd),onCancel:Bn(on.DragCancel)});Pt.current=fn;function Bn(zt){return async function(){const{active:Cn,collisions:hn,over:Gn,scrollAdjustedTranslate:Kn}=Fe.current;let Dn=null;if(Cn&&Kn){const{cancelDrop:Xe}=be.current;Dn={activatorEvent:dn,active:Cn,collisions:hn,delta:Kn,over:Gn},zt===on.DragEnd&&typeof Xe=="function"&&await Promise.resolve(Xe(Dn))&&(zt=on.DragCancel)}de.current=null,br.unstable_batchedUpdates(()=>{A({type:zt}),U(Wr.Uninitialized),Ie(null),z(null),K(null),Pt.current=null;const Xe=zt===on.DragEnd?"onDragEnd":"onDragCancel";if(Dn){const bn=be.current[Xe];bn?.(Dn),D({type:Xe,event:Dn})}})}}},[re]),yr=p.useCallback((_t,Mt)=>(Ht,Wt)=>{const Zt=Ht.nativeEvent,dn=re.get(Wt);if(de.current!==null||!dn||Zt.dndKit||Zt.defaultPrevented)return;const fn={active:dn};_t(Ht,Mt.options,fn)===!0&&(Zt.dndKit={capturedBy:Mt.sensor},de.current=Wt,Ct(Ht,Mt))},[re,Ct]),Un=PN(b,yr);t2(b),Gs(()=>{me&&q===Wr.Initializing&&U(Wr.Initialized)},[me,q]),p.useEffect(()=>{const{onDragMove:_t}=be.current,{active:Mt,activatorEvent:Ht,collisions:Wt,over:Zt}=Fe.current;if(!Mt||!Ht)return;const dn={active:Mt,activatorEvent:Ht,collisions:Wt,delta:{x:Pe.x,y:Pe.y},over:Zt};br.unstable_batchedUpdates(()=>{_t?.(dn),D({type:"onDragMove",event:dn})})},[Pe.x,Pe.y]),p.useEffect(()=>{const{active:_t,activatorEvent:Mt,collisions:Ht,droppableContainers:Wt,scrollAdjustedTranslate:Zt}=Fe.current;if(!_t||de.current==null||!Mt||!Zt)return;const{onDragOver:dn}=be.current,fn=Wt.get(Ne),Bn=fn&&fn.rect.current?{id:fn.id,rect:fn.rect.current,data:fn.data,disabled:fn.disabled}:null,zt={active:_t,activatorEvent:Mt,collisions:Ht,delta:{x:Zt.x,y:Zt.y},over:Bn};br.unstable_batchedUpdates(()=>{Ie(Bn),dn?.(zt),D({type:"onDragOver",event:zt})})},[Ne]),Gs(()=>{Fe.current={activatorEvent:ee,active:Q,activeNode:G,collisionRect:Ge,collisions:Nt,droppableRects:ae,draggableNodes:re,draggingNode:ne,draggingNodeRect:Ee,droppableContainers:H,over:ke,scrollableAncestors:k,scrollAdjustedTranslate:Pe},ce.current={initial:Ee,translated:Ge}},[Q,G,Nt,Ge,re,ne,Ee,ae,H,ke,k,Pe]),FN({...L,delta:B,draggingRect:Ge,pointerCoordinates:Ce,scrollableAncestors:k,scrollableAncestorRects:W});const Ba=p.useMemo(()=>({active:Q,activeNode:G,activeNodeRect:me,activatorEvent:ee,collisions:Nt,containerNodeRect:Te,dragOverlay:_e,draggableNodes:re,droppableContainers:H,droppableRects:ae,over:ke,measureDroppableContainers:M,scrollableAncestors:k,scrollableAncestorRects:W,measuringConfiguration:I,measuringScheduled:F,windowRect:tt}),[Q,G,me,ee,Nt,Te,_e,re,H,ae,ke,M,k,W,I,F,tt]),Ys=p.useMemo(()=>({activatorEvent:ee,activators:Un,active:Q,activeNodeRect:me,ariaDescribedById:{draggable:ve},dispatch:A,draggableNodes:re,over:ke,measureDroppableContainers:M}),[ee,Un,Q,me,A,ve,re,ke,M]);return vt.createElement(wv.Provider,{value:R},vt.createElement(du.Provider,{value:Ys},vt.createElement(Mv.Provider,{value:Ba},vt.createElement(zv.Provider,{value:it},g)),vt.createElement(f2,{disabled:m?.restoreFocus===!1})),vt.createElement(uN,{...m,hiddenTextDescribedById:ve}));function wr(){const _t=xe?.autoScrollEnabled===!1,Mt=typeof x=="object"?x.enabled===!1:x===!1,Ht=V&&!_t&&!Mt;return typeof x=="object"?{...x,enabled:Ht}:{enabled:Ht}}}),x2=p.createContext(null),b0="button",b2="Draggable";function v2(e){let{id:n,data:r,disabled:i=!1,attributes:c}=e;const u=ao(b2),{activators:d,activatorEvent:m,active:x,activeNodeRect:g,ariaDescribedById:b,draggableNodes:y,over:w}=p.useContext(du),{role:E=b0,roleDescription:N="draggable",tabIndex:j=0}=c??{},_=x?.id===n,A=p.useContext(_?zv:x2),[D,R]=Wc(),[q,U]=Wc(),V=n2(d,n),$=Gl(r);Gs(()=>(y.set(n,{id:n,key:u,node:D,activatorNode:q,data:$}),()=>{const B=y.get(n);B&&B.key===u&&y.delete(n)}),[y,n]);const re=p.useMemo(()=>({role:E,tabIndex:j,"aria-disabled":i,"aria-pressed":_&&E===b0?!0:void 0,"aria-roledescription":N,"aria-describedby":b.draggable}),[i,E,j,_,N,b.draggable]);return{active:x,activatorEvent:m,activeNodeRect:g,attributes:re,isDragging:_,listeners:i?void 0:V,node:D,over:w,setNodeRef:R,setActivatorNodeRef:U,transform:A}}function y2(){return p.useContext(Mv)}const w2="Droppable",S2={timeout:25};function j2(e){let{data:n,disabled:r=!1,id:i,resizeObserverConfig:c}=e;const u=ao(w2),{active:d,dispatch:m,over:x,measureDroppableContainers:g}=p.useContext(du),b=p.useRef({disabled:r}),y=p.useRef(!1),w=p.useRef(null),E=p.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:_}={...S2,...c},A=Gl(j??i),D=p.useCallback(()=>{if(!y.current){y.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{g(Array.isArray(A.current)?A.current:[A.current]),E.current=null},_)},[_]),R=uu({callback:D,disabled:N||!d}),q=p.useCallback((re,B)=>{R&&(B&&(R.unobserve(B),y.current=!1),re&&R.observe(re))},[R]),[U,V]=Wc(q),$=Gl(n);return p.useEffect(()=>{!R||!U.current||(R.disconnect(),y.current=!1,R.observe(U.current))},[U,R]),p.useEffect(()=>(m({type:on.RegisterDroppable,element:{id:i,key:u,disabled:r,node:U,rect:w,data:$}}),()=>m({type:on.UnregisterDroppable,key:u,id:i})),[i]),p.useEffect(()=>{r!==b.current.disabled&&(m({type:on.SetDroppableDisabled,id:i,key:u,disabled:r}),b.current.disabled=r)},[i,u,r,m]),{active:d,rect:w,isOver:x?.id===i,node:U,over:x,setNodeRef:V}}function Ov(e,n,r){const i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}function E2(e,n){return e.reduce((r,i,c)=>{const u=n.get(i);return u&&(r[c]=u),r},Array(e.length))}function Ac(e){return e!==null&&e>=0}function N2(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function C2(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Rc={scaleX:1,scaleY:1},_2=e=>{var n;let{rects:r,activeNodeRect:i,activeIndex:c,overIndex:u,index:d}=e;const m=(n=r[c])!=null?n:i;if(!m)return null;const x=k2(r,d,c);if(d===c){const g=r[u];return g?{x:c<u?g.left+g.width-(m.left+m.width):g.left-m.left,y:0,...Rc}:null}return d>c&&d<=u?{x:-m.width-x,y:0,...Rc}:d<c&&d>=u?{x:m.width+x,y:0,...Rc}:{x:0,y:0,...Rc}};function k2(e,n,r){const i=e[n],c=e[n-1],u=e[n+1];return!i||!c&&!u?0:r<n?c?i.left-(c.left+c.width):u.left-(i.left+i.width):u?u.left-(i.left+i.width):i.left-(c.left+c.width)}const Lv=e=>{let{rects:n,activeIndex:r,overIndex:i,index:c}=e;const u=Ov(n,i,r),d=n[c],m=u[c];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},Uv="Sortable",Bv=vt.createContext({activeIndex:-1,containerId:Uv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Lv,disabled:{draggable:!1,droppable:!1}});function T2(e){let{children:n,id:r,items:i,strategy:c=Lv,disabled:u=!1}=e;const{active:d,dragOverlay:m,droppableRects:x,over:g,measureDroppableContainers:b}=y2(),y=ao(Uv,r),w=m.rect!==null,E=p.useMemo(()=>i.map(V=>typeof V=="object"&&"id"in V?V.id:V),[i]),N=d!=null,j=d?E.indexOf(d.id):-1,_=g?E.indexOf(g.id):-1,A=p.useRef(E),D=!N2(E,A.current),R=_!==-1&&j===-1||D,q=C2(u);Gs(()=>{D&&N&&b(E)},[D,E,N,b]),p.useEffect(()=>{A.current=E},[E]);const U=p.useMemo(()=>({activeIndex:j,containerId:y,disabled:q,disableTransforms:R,items:E,overIndex:_,useDragOverlay:w,sortedRects:E2(E,x),strategy:c}),[j,y,q.draggable,q.droppable,R,E,_,x,w,c]);return vt.createElement(Bv.Provider,{value:U},n)}const D2=e=>{let{id:n,items:r,activeIndex:i,overIndex:c}=e;return Ov(r,i,c).indexOf(n)},A2=e=>{let{containerId:n,isSorting:r,wasDragging:i,index:c,items:u,newIndex:d,previousItems:m,previousContainerId:x,transition:g}=e;return!g||!i||m!==u&&c===d?!1:r?!0:d!==c&&n===x},R2={duration:200,easing:"ease"},qv="transform",M2=Kl.Transition.toString({property:qv,duration:0,easing:"linear"}),z2={roleDescription:"sortable"};function O2(e){let{disabled:n,index:r,node:i,rect:c}=e;const[u,d]=p.useState(null),m=p.useRef(r);return Gs(()=>{if(!n&&r!==m.current&&i.current){const x=c.current;if(x){const g=$i(i.current,{ignoreTransform:!0}),b={x:x.left-g.left,y:x.top-g.top,scaleX:x.width/g.width,scaleY:x.height/g.height};(b.x||b.y)&&d(b)}}r!==m.current&&(m.current=r)},[n,r,i,c]),p.useEffect(()=>{u&&d(null)},[u]),u}function L2(e){let{animateLayoutChanges:n=A2,attributes:r,disabled:i,data:c,getNewIndex:u=D2,id:d,strategy:m,resizeObserverConfig:x,transition:g=R2}=e;const{items:b,containerId:y,activeIndex:w,disabled:E,disableTransforms:N,sortedRects:j,overIndex:_,useDragOverlay:A,strategy:D}=p.useContext(Bv),R=U2(i,E),q=b.indexOf(d),U=p.useMemo(()=>({sortable:{containerId:y,index:q,items:b},...c}),[y,c,q,b]),V=p.useMemo(()=>b.slice(b.indexOf(d)),[b,d]),{rect:$,node:re,isOver:B,setNodeRef:H}=j2({id:d,data:U,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...x}}),{active:J,activatorEvent:ce,activeNodeRect:Q,attributes:de,setNodeRef:xe,listeners:z,isDragging:ee,over:K,setActivatorNodeRef:be,transform:ve}=v2({id:d,data:U,attributes:{...z2,...r},disabled:R.draggable}),C=YE(H,xe),I=!!J,ae=I&&!N&&Ac(w)&&Ac(_),M=!A&&ee,F=M&&ae?ve:null,te=ae?F??(m??D)({rects:j,activeNodeRect:Q,activeIndex:w,overIndex:_,index:q}):null,L=Ac(w)&&Ac(_)?u({id:d,items:b,activeIndex:w,overIndex:_}):q,ie=J?.id,me=p.useRef({activeId:ie,items:b,newIndex:L,containerId:y}),Te=b!==me.current.items,Fe=n({active:J,containerId:y,isDragging:ee,isSorting:I,id:d,index:q,items:b,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:g,wasDragging:me.current.activeId!=null}),Se=O2({disabled:!Fe,index:q,node:re,rect:$});return p.useEffect(()=>{I&&me.current.newIndex!==L&&(me.current.newIndex=L),y!==me.current.containerId&&(me.current.containerId=y),b!==me.current.items&&(me.current.items=b)},[I,L,y,b]),p.useEffect(()=>{if(ie===me.current.activeId)return;if(ie!=null&&me.current.activeId==null){me.current.activeId=ie;return}const ne=setTimeout(()=>{me.current.activeId=ie},50);return()=>clearTimeout(ne)},[ie]),{active:J,activeIndex:w,attributes:de,data:U,rect:$,index:q,newIndex:L,items:b,isOver:B,isSorting:I,isDragging:ee,listeners:z,node:re,overIndex:_,over:K,setNodeRef:C,setActivatorNodeRef:be,setDroppableNodeRef:H,setDraggableNodeRef:xe,transform:Se??te,transition:_e()};function _e(){if(Se||Te&&me.current.newIndex===q)return M2;if(!(M&&!Rh(ce)||!g)&&(I||Fe))return Kl.Transition.toString({...g,property:qv})}}function U2(e,n){var r,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:n.draggable,droppable:(i=e?.droppable)!=null?i:n.droppable}}ut.Down,ut.Right,ut.Up,ut.Left;const B2=232,q2=30,ja=6;function Ai({open:e,position:n,onClose:r,items:i,appearance:c="dark"}){const u=p.useRef(null),d=p.useRef([]),[m,x]=p.useState(null),g=p.useMemo(()=>i.findIndex(E=>!E.disabled),[i]),[b,y]=p.useState(()=>g>=0?g:0);if(p.useEffect(()=>{if(!e||!n||typeof window>"u"){x(null);return}const E=i.length*q2+ja*2,N=Math.max(ja,(window.innerWidth||0)-B2-ja),j=Math.max(ja,(window.innerHeight||0)-E-ja),_=Math.min(Math.max(n.x,ja),N),A=Math.min(Math.max(n.y,ja),j);x({x:_,y:A})},[e,n,i.length]),p.useEffect(()=>{e&&y(g>=0?g:0)},[e,g]),p.useEffect(()=>{if(!e)return;d.current[b]?.focus()},[e,b]),p.useEffect(()=>{if(!e||typeof window>"u")return;const E=_=>{u.current&&(u.current.contains(_.target)||r())},N=_=>{if(u.current){if(u.current.contains(_.target)){_.preventDefault();return}r()}},j=_=>{if(_.key==="Escape"){_.preventDefault(),r();return}if(_.key==="ArrowDown"||_.key==="ArrowUp"){_.preventDefault();const A=_.key==="ArrowDown"?1:-1;y(D=>{if(i.length===0)return D;let R=D;for(let q=0;q<i.length;q+=1)if(R=(R+A+i.length)%i.length,!i[R]?.disabled)return R;return D});return}if(_.key==="Enter"||_.key===" "){_.preventDefault();const A=i[b];A&&!A.disabled&&(A.onSelect(),r())}};return window.addEventListener("mousedown",E),window.addEventListener("contextmenu",N),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",E),window.removeEventListener("contextmenu",N),window.removeEventListener("keydown",j)}},[e,r,i,b]),!e||!n||typeof window>"u"||!m)return null;const w=c==="dark"?{bg:"bg-[#1f1f1f] text-[#f3f3f3]",border:"border-[#3c3c3c]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.55)]",item:"hover:bg-[#094771] focus-visible:bg-[#094771]",disabled:"text-[#7a7a7a]",danger:"text-[#f48771] hover:text-white hover:bg-[#be1a1a] focus-visible:bg-[#be1a1a]",shortcut:"text-[#9f9f9f]",separator:"border-[#3f3f3f]"}:{bg:"bg-[#fdfdfd] text-[#1f1f1f]",border:"border-[#cfcfcf]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.15)]",item:"hover:bg-[#dfe9f6] focus-visible:bg-[#dfe9f6]",disabled:"text-[#9c9c9c]",danger:"text-[#b02020] hover:bg-[#fde7e7] focus-visible:bg-[#fde7e7]",shortcut:"text-[#6d6d6d]",separator:"border-[#e0e0e0]"};return br.createPortal(l.jsx("div",{ref:u,role:"menu",className:ge("z-[60] min-w-[200px] rounded-sm border backdrop-blur-sm",w.bg,w.border,w.shadow),style:{top:m.y,left:m.x,position:"fixed"},children:l.jsx("ul",{className:"py-1",role:"none",children:i.map((E,N)=>{const j=!!E.disabled,_=!!E.danger;return l.jsxs(p.Fragment,{children:[E.dividerAbove?l.jsx("li",{role:"separator",className:ge("mx-2 my-1 border-t",w.separator)}):null,l.jsx("li",{role:"none",children:l.jsxs("button",{ref:A=>{d.current[N]=A},type:"button",role:"menuitem",className:ge("flex w-full items-center justify-between gap-6 px-3 py-1.5 text-[13px] leading-5 outline-none transition",w.item,j&&w.disabled,_&&!j&&w.danger,j&&"cursor-default"),onClick:A=>{A.stopPropagation(),!j&&(E.onSelect(),r())},onMouseEnter:()=>{j||y(N)},disabled:j,children:[l.jsxs("span",{className:"flex min-w-0 items-center gap-3",children:[E.icon?l.jsx("span",{className:"text-base opacity-80",children:E.icon}):l.jsx("span",{className:"inline-block h-4 w-4"}),l.jsx("span",{className:"truncate",children:E.label})]}),E.shortcut?l.jsx("span",{className:ge("text-[11px] uppercase tracking-wide",w.shortcut),children:E.shortcut}):null]})})]},E.id)})})}),window.document.body)}const vr="h-4 w-4 text-current opacity-80";function $2({filled:e}){return e?l.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"currentColor",className:"text-slate-500"})}):l.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"none",stroke:"currentColor",strokeWidth:"1.2",className:"text-slate-400"})})}function H2(){return l.jsxs("svg",{className:"h-3 w-3 animate-spin text-brand-500",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"1.2",opacity:"0.3"}),l.jsx("path",{d:"M14 8a6 6 0 0 0-6-6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Z2(){return l.jsxs("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M4 2.5h7.5L13.5 5v8.5H4z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function F2(){return l.jsxs("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 3.5h6l3 3v5.5h-9z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 3.5v3.5h3.5v-3.5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M5 11h4",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),l.jsx("path",{d:"M6.5 6.5h6l1.5 1.5v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",opacity:"0.6"})]})}function V2(){return l.jsx("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M4 4l8 8m0-8l-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function Q2(){return l.jsxs("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("rect",{x:"2.5",y:"3",width:"8",height:"10",rx:"1.2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),l.jsx("path",{d:"M7 7l5 5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function I2(){return l.jsxs("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M5 3v10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M7 5l5 3-5 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M12 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function P2(){return l.jsxs("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 4h3a1 1 0 0 1 1 1v7.5M12.5 12h-3a1 1 0 0 1-1-1V3.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M5 6l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function $v(){return l.jsx("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5.5 2.5h5l.5 4h2v1.5h-4V13l-1-.5V8h-3V6.5h3z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function W2(){return l.jsx("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M3.5 3.5l9 9M5.5 2.5h5l.5 4h2v1.5H10M8 8v4.5L7 12.5V8H4V6.5h1",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function G2(){return l.jsx("svg",{className:vr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 2.5h4l2.5 2.5V13.5H5z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"})})}function K2(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M10 3L5 8l5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function Y2(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M6 3l5 5-5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function X2(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function J2({tab:e,isActive:n,isDirty:r,draggingId:i,onContextMenu:c,onCloseTab:u,setTabNode:d}){const{attributes:m,listeners:x,setNodeRef:g,transform:b,transition:y,isDragging:w}=L2({id:e.id}),E={transform:Kl.Transform.toString(b),transition:y},N=w||i===e.id,j=!!e.pinned;return l.jsxs("div",{ref:_=>{g(_),d(e.id,_)},style:E,className:ge("group relative mr-1 flex min-w-0 items-stretch",N&&"opacity-60"),"data-editor-tab":"true",onContextMenu:c,onMouseDown:_=>{_.button===1&&(_.preventDefault(),u(e.id))},...m,...x,children:[l.jsxs(ql,{value:e.id,"data-tab-id":e.id,title:e.id,className:ge("relative flex min-w-[3rem] max-w-[16rem] items-center gap-2 overflow-hidden rounded-t-lg border px-2 py-1.5 pr-8 text-sm font-medium transition-[background-color,border-color,color] duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50",n?"border-slate-200 border-b-white bg-white text-slate-900 shadow-[0_1px_0_rgba(15,23,42,0.08)]":"border-transparent border-b-slate-200 text-slate-500 hover:border-slate-200 hover:bg-white/70 hover:text-slate-900",j?"min-w-[4rem] max-w-[8rem] justify-center":"min-w-[9rem] justify-start px-3"),children:[j?l.jsx("span",{className:"flex-none text-[12px]","aria-label":"Pinned",children:l.jsx($2,{filled:n})}):null,l.jsx("span",{className:"block min-w-0 flex-1 truncate text-left",children:e.name}),e.status==="loading"?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-slate-400","aria-label":"Loading",children:""}):null,e.status==="error"?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Load failed",children:"!"}):null,e.saving?l.jsx("span",{className:"flex-none","aria-label":"Saving",title:"Saving changes",children:l.jsx(H2,{})}):null,e.saveError?l.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Save failed",title:e.saveError,children:"!"}):null,r?l.jsx("span",{className:"flex-none text-xs leading-none text-brand-600",children:""}):null]}),l.jsx("button",{type:"button",className:ge("absolute right-1 top-1/2 -translate-y-1/2 rounded p-0.5 text-xs transition focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-1 focus-visible:ring-offset-white",n?"text-slate-500 hover:bg-slate-200 hover:text-slate-900":"text-slate-400 opacity-0 group-hover:opacity-100 hover:bg-slate-200 hover:text-slate-700"),onClick:_=>{_.stopPropagation(),u(e.id)},"aria-label":`Close ${e.name}`,children:""})]})}function eC({currentTab:e,tabs:n,canSaveFiles:r,hasDirtyTabs:i,onCloseTab:c,onCloseOtherTabs:u,onCloseTabsToRight:d,onCloseAllTabs:m,onPinTab:x,onUnpinTab:g,onSaveTab:b,onSaveAllTabs:y}){const w=n.findIndex(R=>R.id===e.id),E=w>=0&&w<n.length-1,N=n.length>1,j=e.status==="ready"&&e.content!==e.initialContent,_=!!b&&r&&j&&!e.saving,A=!!y&&r&&i,D={save:"Ctrl+S",saveAll:"Ctrl+Shift+S",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W"};return[{id:"save",label:e.saving?"Saving":"Save",icon:l.jsx(Z2,{}),disabled:!_,shortcut:D.save,onSelect:()=>b?.(e.id)},{id:"save-all",label:"Save All",icon:l.jsx(F2,{}),disabled:!A,shortcut:D.saveAll,onSelect:()=>y?.()},{id:"pin",label:e.pinned?"Unpin":"Pin",icon:e.pinned?l.jsx(W2,{}):l.jsx($v,{}),dividerAbove:!0,onSelect:()=>e.pinned?g(e.id):x(e.id)},{id:"close",label:"Close",icon:l.jsx(V2,{}),dividerAbove:!0,shortcut:D.close,onSelect:()=>c(e.id)},{id:"close-others",label:"Close Others",icon:l.jsx(Q2,{}),disabled:!N,shortcut:D.closeOthers,onSelect:()=>u(e.id)},{id:"close-right",label:"Close Tabs to the Right",icon:l.jsx(I2,{}),disabled:!E,shortcut:D.closeRight,onSelect:()=>d(e.id)},{id:"close-all",label:"Close All",icon:l.jsx(P2,{}),dividerAbove:!0,disabled:n.length===0,shortcut:D.closeAll,onSelect:()=>m()}]}function tC({pinnedTabs:e,regularTabs:n,activeTabId:r,onSelectTab:i}){if(e.length===0&&n.length===0)return[{id:"empty",label:"No open editors",onSelect:()=>{},disabled:!0}];const c=[],u=(d,m)=>{const x=d.status==="ready"&&d.content!==d.initialContent,g=[];d.id===r&&g.push("Active"),d.saving?g.push("Saving"):x&&g.push("Unsaved"),c.push({id:`switch-${d.id}`,label:`${d.saving?" ":x?" ":""}${d.name}`,icon:d.pinned?l.jsx($v,{}):l.jsx(G2,{}),shortcut:g.length>0?g.join("  "):void 0,dividerAbove:m,onSelect:()=>i(d.id)})};return e.forEach(d=>u(d,!1)),n.forEach((d,m)=>u(d,m===0&&e.length>0)),c}const v0=220,y0=64,nC=14;function sC({tabs:e,activeTabId:n,menuAppearance:r,canSaveFiles:i=!1,onSelectTab:c,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:m,onCloseAllTabs:x,onMoveTab:g,onPinTab:b,onUnpinTab:y,onSaveTab:w,onSaveAllTabs:E,onTabDragStateChange:N}){const[j,_]=p.useState(null),[A,D]=p.useState(null),[R,q]=p.useState(null),[U,V]=p.useState({left:!1,right:!1}),[$,re]=p.useState(0),B=p.useRef(null),H=p.useRef(null),J=p.useRef(new Map),ce=p.useMemo(()=>e.filter(L=>L.pinned),[e]),Q=p.useMemo(()=>e.filter(L=>!L.pinned),[e]),xe=p.useMemo(()=>e.filter(L=>L.status==="ready"&&L.content!==L.initialContent),[e]).length>0,z=fN(dN(Lh,{activationConstraint:{distance:5}})),ee=r==="dark"?"border-[#1f2937] bg-[#0f172a]":"border-slate-200 bg-slate-900/5",K=r==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white focus-visible:ring-white/30 focus-visible:ring-offset-0":"text-slate-500 hover:bg-white hover:text-slate-900 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5",be=p.useCallback((L,ie)=>{const me=J.current;ie?me.set(L,ie):me.delete(L)},[]);p.useEffect(()=>{j&&!e.some(L=>L.id===j.tabId)&&_(null),e.length||D(null)},[j,e]);const ve=p.useCallback(L=>{q(String(L.active.id)),N?.(!0)},[N]),C=p.useCallback(L=>{const ie=L.active.id,me=L.over?.id;if(me&&ie!==me){const Te=e.findIndex(Se=>Se.id===ie),Fe=e.findIndex(Se=>Se.id===me);if(Te!==-1&&Fe!==-1){const Se=Te<Fe?Fe+1:Fe;g(String(ie),Se)}}q(null),N?.(!1)},[g,N,e]),I=p.useCallback(()=>{q(null),N?.(!1)},[N]),ae=p.useCallback(()=>{const L=B.current;if(!L){V({left:!1,right:!1});return}const{scrollLeft:ie,scrollWidth:me,clientWidth:Te}=L;V({left:ie>2,right:ie+Te<me-2})},[]);p.useEffect(()=>{const L=B.current;if(!L){V({left:!1,right:!1});return}ae();const ie=()=>ae();L.addEventListener("scroll",ie),window.addEventListener("resize",ae);const me=typeof ResizeObserver<"u"?new ResizeObserver(ae):null;return me?.observe(L),()=>{L.removeEventListener("scroll",ie),window.removeEventListener("resize",ae),me?.disconnect()}},[e.length,ae]),p.useEffect(()=>{if(!R){re(0);return}const L=ie=>{const me=B.current;if(!me){re(0);return}const Te=me.getBoundingClientRect();ie.clientX<Te.left+y0?re(-1):ie.clientX>Te.right-y0?re(1):re(0)};return window.addEventListener("pointermove",L),()=>{window.removeEventListener("pointermove",L),re(0)}},[R]),p.useEffect(()=>{if(!R||$===0)return;let L;const ie=()=>{const me=B.current;me&&(me.scrollBy({left:$*nC}),L=window.requestAnimationFrame(ie))};return L=window.requestAnimationFrame(ie),()=>window.cancelAnimationFrame(L)},[$,R]),p.useEffect(()=>{J.current.get(n)?.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},[n,e.length]);const M=p.useMemo(()=>{if(!j)return[];const L=e.find(ie=>ie.id===j.tabId);return L?eC({currentTab:L,tabs:e,canSaveFiles:i,hasDirtyTabs:xe,onCloseTab:u,onCloseOtherTabs:d,onCloseTabsToRight:m,onCloseAllTabs:x,onPinTab:b,onUnpinTab:y,onSaveTab:w,onSaveAllTabs:E}):[]},[i,j,xe,x,d,u,m,b,E,w,y,e]),F=p.useMemo(()=>tC({pinnedTabs:ce,regularTabs:Q,activeTabId:n,onSelectTab:c}),[ce,Q,n,c]),G=p.useCallback(L=>{B.current?.scrollBy({left:L,behavior:"smooth"})},[]),te=p.useCallback(()=>{const L=H.current?.getBoundingClientRect();L&&D({x:L.left,y:L.bottom+6})},[]);return l.jsxs(l.Fragment,{children:[l.jsx(g2,{sensors:z,collisionDetection:xN,onDragStart:ve,onDragEnd:C,onDragCancel:I,children:l.jsx(T2,{items:e.map(L=>L.id),strategy:_2,children:l.jsxs("div",{className:ge("flex items-center gap-1 px-1",ee,"border-b"),children:[l.jsx(w0,{appearance:r,direction:"left",disabled:!U.left,onClick:()=>G(-v0)}),l.jsxs("div",{className:"relative flex min-w-0 flex-1 items-stretch",children:[U.left?l.jsx(S0,{position:"left",appearance:r}):null,U.right?l.jsx(S0,{position:"right",appearance:r}):null,l.jsx("div",{ref:B,className:"flex min-w-0 flex-1 overflow-x-auto pb-1",onWheel:L=>{Math.abs(L.deltaY)>Math.abs(L.deltaX)&&(L.preventDefault(),B.current?.scrollBy({left:L.deltaY}))},children:l.jsx(_h,{className:"flex min-h-[2.75rem] flex-1 items-end gap-0 px-1",children:e.map(L=>{const ie=L.status==="ready"&&L.content!==L.initialContent,me=L.id===n;return l.jsx(J2,{tab:L,isActive:me,isDirty:ie,draggingId:R,setTabNode:be,onContextMenu:Te=>{Te.preventDefault(),_({tabId:L.id,x:Te.clientX,y:Te.clientY})},onCloseTab:u},L.id)})})})]}),l.jsx(w0,{appearance:r,direction:"right",disabled:!U.right,onClick:()=>G(v0)}),l.jsx("button",{ref:H,type:"button",className:ge("mx-1 flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2",K),"aria-label":"Open editors list",onClick:te,children:l.jsx(X2,{})})]})})}),l.jsx(Ai,{open:!!j,position:j&&{x:j.x,y:j.y},onClose:()=>_(null),items:M,appearance:r}),l.jsx(Ai,{open:!!A,position:A,onClose:()=>D(null),items:F,appearance:r})]})}function w0({appearance:e,direction:n,disabled:r,onClick:i}){const c=e==="dark"?"hover:bg-white/10 hover:text-white focus-visible:ring-2 focus-visible:ring-white/30":"hover:bg-white hover:text-slate-900 focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5";return l.jsx("button",{type:"button",className:ge("flex h-8 w-8 items-center justify-center rounded-md transition focus-visible:outline-none",e==="dark"?"text-slate-300":"text-slate-500",r?"cursor-default opacity-30":c),onClick:i,disabled:r,"aria-label":n==="left"?"Scroll tabs left":"Scroll tabs right",children:n==="left"?l.jsx(K2,{}):l.jsx(Y2,{})})}function S0({position:e,appearance:n}){const r=n==="dark"?e==="left"?"left-0 bg-gradient-to-r from-[#0f172a] via-[#0f172a]/80 to-transparent":"right-0 bg-gradient-to-l from-[#0f172a] via-[#0f172a]/80 to-transparent":e==="left"?"left-0 bg-gradient-to-r from-slate-100 via-slate-100/70 to-transparent":"right-0 bg-gradient-to-l from-slate-100 via-slate-100/70 to-transparent";return l.jsx("div",{className:ge("pointer-events-none absolute top-0 bottom-0 w-8",r)})}function rC({tabs:e,activeTabId:n,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:c,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:m,onPinTab:x,onUnpinTab:g,onContentChange:b,onSaveTab:y,onSaveAllTabs:w,onSelectRecentTab:E,editorTheme:N,menuAppearance:j,canSaveFiles:_=!1,minHeight:A,onRetryTabLoad:D}){const R=e.length>0,q=p.useRef(null),[U,V]=p.useState(!1),$=p.useMemo(()=>e.find(re=>re.id===n)??null,[e,n]);return!R||!$?l.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."}):l.jsxs("div",{ref:q,className:"flex min-h-0 min-w-0 flex-1 flex-col",style:A?{minHeight:A}:void 0,"data-editor-area":!0,children:[l.jsx(PE,{containerRef:q,tabs:e,activeTabId:n,onCloseTab:i,onSelectTab:r,onSelectRecentTab:E}),l.jsxs(Ch,{value:$.id,onValueChange:r,children:[l.jsx(sC,{tabs:e,activeTabId:$.id,menuAppearance:j,canSaveFiles:_,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:c,onCloseTabsToRight:u,onCloseAllTabs:d,onMoveTab:m,onPinTab:x,onUnpinTab:g,onSaveTab:y,onSaveAllTabs:w,onTabDragStateChange:V}),l.jsx(KE,{tabs:e,activeTabId:$.id,editorTheme:N,onContentChange:b,onSaveTab:y,canSaveFiles:_,onRetryTabLoad:D,onSelectTab:r,isTabDragging:U})]})]})}const aC={dark:{surface:"#1e1e1e",border:"#252526",heading:"#cccccc",label:"#999999",textPrimary:"#f3f3f3",textMuted:"#c5c5c5",rowHover:"#2a2d2e",folderActiveBg:"transparent",selectionBg:"#2f3136",selectionText:"#f8f8f8",badgeActive:"#4fc1ff",badgeOpen:"#858585",folderIcon:"#c8ae7d",folderIconActive:"#e0c08e",chevronIdle:"#7a7a7a",chevronActive:"#d4d4d4"},light:{surface:"#f3f3f3",border:"#d4d4d4",heading:"#616161",label:"#8a8a8a",textPrimary:"#1e1e1e",textMuted:"#555555",rowHover:"#e8e8e8",folderActiveBg:"transparent",selectionBg:"#dcdcdc",selectionText:"#0f172a",badgeActive:"#0e639c",badgeOpen:"#6b6b6b",folderIcon:"#c0933a",folderIconActive:"#a67c32",chevronIdle:"#7a7a7a",chevronActive:"#3c3c3c"}},iC={dark:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-[#252526]",light:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-white"};function lC(e){const n=new Set,r=i=>{i.kind==="folder"&&(n.add(i.id),i.children?.forEach(r))};return r(e),n}function Lf(e,n,r){const i=new Set;for(const c of e)n.has(c)&&i.add(c);return i.add(r),i}function j0(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function oC({width:e,tree:n,activeFileId:r="",openFileIds:i=[],onSelectFile:c,theme:u,canCreateFile:d=!1,canCreateFolder:m=!1,isCreatingEntry:x=!1,onCreateFile:g,onCreateFolder:b,canDeleteFile:y=!1,deletingFilePath:w=null,canDeleteFolder:E=!1,deletingFolderPath:N=null,onDeleteFile:j,onDeleteFolder:_,expandedStorageKey:A,onHide:D}){const R=p.useMemo(()=>A?Ws(A):null,[A]),q=p.useMemo(()=>lC(n),[n]),[U,V]=p.useState(()=>{const L=R?.get()??null,ie=L?new Set(L):new Set([n.id]);return Lf(ie,q,n.id)}),[$,re]=p.useState(null),[B,H]=p.useState(null),[J,ce]=p.useState(null);p.useEffect(()=>{H(null),ce(null)},[n.id]),p.useEffect(()=>{V(L=>{const ie=Lf(L,q,n.id);return j0(L,ie)?L:ie})},[q,n.id]),p.useEffect(()=>{if(!R)return;const L=R.get();if(!L)return;const ie=Lf(new Set(L),q,n.id);V(me=>j0(me,ie)?me:ie)},[R,q,n.id]),p.useEffect(()=>{if(!R)return;const L=Array.from(U).filter(ie=>ie!==n.id&&q.has(ie));R.set(L)},[U,R,q,n.id]);const Q=p.useCallback(L=>{V(ie=>{const me=new Set(ie);return me.has(L)?me.delete(L):me.add(L),me.add(n.id),me})},[n.id]),de=p.useCallback((L,ie)=>{V(me=>{const Te=new Set(me);return ie?Te.add(L):L!==n.id&&Te.delete(L),Te.add(n.id),Te})},[n.id]),xe=p.useCallback(()=>{V(new Set([n.id]))},[n.id]),z=p.useCallback((L,ie)=>{ce(null),V(me=>{const Te=new Set(me);return Te.add(n.id),Te.add(L),Te}),H({parentId:L,kind:ie})},[n.id]),ee=p.useCallback(async(L,ie,me)=>{const Te=ie.trim();if(!Te){ce("Name cannot be empty.");return}const Fe=me==="folder"?b:g;if(Fe)try{ce(null),await Fe(L===n.id?"":L,Te),H(null)}catch(Se){const _e=Se instanceof Error?Se.message:"Unable to create entry.";ce(_e)}},[g,b,n.id]),K=p.useCallback(()=>{H(null),ce(null)},[]),be=p.useCallback((L,ie)=>{L.preventDefault(),re({node:ie,position:{x:L.clientX,y:L.clientY}})},[]),ve=p.useCallback(async L=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(L);return}catch{}if(typeof document>"u")return;const ie=document.createElement("textarea");ie.value=L,ie.setAttribute("readonly","true"),ie.style.position="absolute",ie.style.left="-9999px",document.body.appendChild(ie),ie.select(),document.execCommand("copy"),document.body.removeChild(ie)},[]),C=p.useCallback(L=>{j&&(j(L),re(null))},[j]),I=p.useCallback(L=>{_&&(_(L),re(null))},[_]),ae=p.useMemo(()=>{if(!$)return[];const{node:L}=$,ie={open:"Enter",newFile:"Ctrl+N",newFolder:"Ctrl+Shift+N",copyPath:"Ctrl+K Ctrl+C",collapseAll:"Ctrl+K Ctrl+0",delete:"Delete"};if(L.kind==="file")return[{id:"open-file",label:"Open",icon:l.jsx(mC,{}),shortcut:ie.open,onSelect:()=>c(L.id)},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:l.jsx(N0,{}),shortcut:ie.copyPath,onSelect:()=>{ve(L.id)}},{id:"delete-file",label:"Delete",icon:l.jsx(C0,{}),shortcut:ie.delete,disabled:!y||!j,onSelect:()=>C(L.id)}];const me=U.has(L.id);return[{id:"new-file",label:"New File",icon:l.jsx(Zv,{}),shortcut:ie.newFile,disabled:!d||!g,onSelect:()=>{!d||!g||(z(L.id,"file"),re(null))}},{id:"new-folder",label:"New Folder",icon:l.jsx(rh,{}),shortcut:ie.newFolder,disabled:!m||!b,onSelect:()=>{!m||!b||(z(L.id,"folder"),re(null))}},{id:"toggle-folder",label:me?"Collapse Folder":"Expand Folder",icon:me?l.jsx(pC,{}):l.jsx(gC,{}),onSelect:()=>de(L.id,!me)},{id:"collapse-all",label:"Collapse All",icon:l.jsx(xC,{}),shortcut:ie.collapseAll,dividerAbove:!0,onSelect:()=>xe()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:l.jsx(N0,{}),shortcut:ie.copyPath,onSelect:()=>{ve(L.id)}},{id:"delete-folder",label:"Delete Folder",icon:l.jsx(C0,{}),shortcut:ie.delete,disabled:!E||!_,onSelect:()=>I(L.id)}]},[$,c,ve,y,j,U,de,xe,d,m,g,b,z,E,_,I,C]),M=aC[u],F=iC[u],G=p.useMemo(()=>n.children??[],[n]),te=u==="dark"?"dark":"light";return l.jsxs(l.Fragment,{children:[l.jsxs("aside",{className:"flex h-full min-h-0 flex-col border-r text-[13px]",style:{width:e,backgroundColor:M.surface,borderColor:M.border,color:M.textPrimary},"aria-label":"Config files explorer",children:[l.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",style:{borderColor:M.border,backgroundColor:u==="dark"?"#181818":"#ececec"},children:[l.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em]",style:{color:M.heading},children:"Explorer"}),l.jsx("button",{type:"button",onClick:D,"aria-label":"Hide explorer",className:ge("flex h-7 w-7 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",u==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white":"text-slate-600 hover:bg-black/10 hover:text-slate-900"),children:l.jsx(hC,{})})]}),l.jsx("nav",{className:"flex-1 overflow-auto px-2 py-2","aria-label":"Workspace files tree",children:l.jsxs("ul",{className:"space-y-0.5",children:[G.map(L=>l.jsx(Hv,{node:L,depth:0,expanded:U,activeFileId:r,openFileIds:i,onToggleFolder:Q,onSelectFile:c,tokens:M,theme:u,focusRingClass:F,onContextMenu:be,editing:B,onSubmitCreateEntry:ee,onCancelCreateEntry:K,createError:J,isCreatingEntry:x,deletingFilePath:w,deletingFolderPath:N,onClearCreateError:()=>ce(null)},L.id)),B?.parentId===n.id?l.jsx("li",{className:"pl-2",children:l.jsx(Fv,{appearance:u,icon:B.kind==="folder"?l.jsx(rh,{}):void 0,placeholder:B.kind==="folder"?"new_folder":"new_file.py",onSubmit:L=>ee(n.id,L,B.kind),onCancel:K,onChange:()=>ce(null),isSubmitting:x,error:J})}):null]})})]}),l.jsx(Ai,{open:!!$,position:$?$.position:null,onClose:()=>re(null),items:ae,appearance:te})]})}function Hv({node:e,depth:n,expanded:r,activeFileId:i,openFileIds:c,onToggleFolder:u,onSelectFile:d,tokens:m,theme:x,focusRingClass:g,onContextMenu:b,editing:y,onSubmitCreateEntry:w,onCancelCreateEntry:E,createError:N,isCreatingEntry:j,deletingFilePath:_,deletingFolderPath:A,onClearCreateError:D}){const q={paddingLeft:8+n*16,"--tree-hover-bg":m.rowHover};if(e.kind==="folder"){const H=r.has(e.id),J=A===e.id,ce=y?.parentId===e.id,Q={...q,color:H?m.textPrimary:m.textMuted};return H&&m.folderActiveBg!=="transparent"&&(Q.backgroundColor=m.folderActiveBg),l.jsxs("li",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>u(e.id),onContextMenu:de=>b(de,e),className:ge("group flex w-full items-center gap-2 rounded-md px-2 py-1 text-left font-medium transition hover:bg-[var(--tree-hover-bg)]",g,J&&"opacity-60"),style:Q,"aria-expanded":H,disabled:J,children:[l.jsx(uC,{open:H,tokens:m}),l.jsx(dC,{open:H,tokens:m}),l.jsx("span",{className:"truncate",children:e.name})]}),H?l.jsxs("ul",{className:"mt-0.5 space-y-0.5",children:[e.children?.map(de=>l.jsx(Hv,{node:de,depth:n+1,expanded:r,activeFileId:i,openFileIds:c,onToggleFolder:u,onSelectFile:d,tokens:m,theme:x,focusRingClass:g,onContextMenu:b,editing:y,onSubmitCreateEntry:w,onCancelCreateEntry:E,createError:N,isCreatingEntry:j,deletingFilePath:_,deletingFolderPath:A,onClearCreateError:D},de.id)),ce?l.jsx("li",{className:"pl-2",children:l.jsx(Fv,{appearance:x,icon:y?.kind==="folder"?l.jsx(rh,{}):void 0,placeholder:y?.kind==="folder"?"new_folder":"new_file.py",onSubmit:de=>{y&&w(e.id,de,y.kind)},onCancel:E,onChange:D,isSubmitting:j,error:N})}):null]}):null]})}const U=i===e.id,V=c.includes(e.id),$=_===e.id,re=cC(e.name,e.language),B={...q,color:m.textPrimary};return U&&(B.backgroundColor=m.selectionBg,B.color=m.selectionText),l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>d(e.id),onContextMenu:H=>b(H,e),className:ge("flex w-full items-center gap-2 rounded-md px-2 py-1 text-left transition hover:bg-[var(--tree-hover-bg)]",g,U&&"shadow-inner shadow-[#00000033]",$&&"opacity-60"),style:B,disabled:$,children:[l.jsx("span",{className:"inline-flex w-4 justify-center",children:l.jsx(fC,{className:ge(re,V&&!U&&"opacity-90",!V&&!U&&"opacity-75")})}),l.jsx("span",{className:ge("flex-1 truncate",U&&"font-semibold"),children:e.name}),V&&!U?l.jsx("span",{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:m.badgeOpen}}):null]})})}const E0={json:"text-[#f1d06b]",py:"text-[#519aba]",ts:"text-[#519aba]",tsx:"text-[#519aba]",js:"text-[#f4d13d]",jsx:"text-[#519aba]",md:"text-[#4ec9b0]",env:"text-[#b5cea8]",txt:"text-[#9cdcfe]",lock:"text-[#c586c0]"};function cC(e,n){if(n==="python")return"text-sky-300";const r=e.toLowerCase().split("."),i=r.length>1?r.pop()??"":"";return i&&E0[i]?E0[i]:"text-slate-400"}function uC({open:e,tokens:n}){return l.jsx("svg",{className:ge("h-3 w-3 flex-shrink-0 transition-transform duration-150",e?"rotate-90":void 0),viewBox:"0 0 10 10","aria-hidden":!0,children:l.jsx("path",{d:"M3 1l4 4-4 4",stroke:e?n.chevronActive:n.chevronIdle,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}function dC({open:e,tokens:n}){return l.jsx("svg",{className:"h-4 w-4 flex-shrink-0 transition-colors",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M3.5 5.5h4l1.5 1.5H16a1 1 0 0 1 1 1V15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6.5a1 1 0 0 1 1-1Z",stroke:e?n.folderIconActive:n.folderIcon,strokeWidth:1.4,strokeLinejoin:"round",fill:e?n.folderIconActive:"none",opacity:e?.25:1})})}function fC({className:e}){return l.jsxs("svg",{className:ge("h-4 w-4 flex-shrink-0",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M6 3h4l4 4v9a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 3v4h4",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})]})}function hC(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M3 3h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 13h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 8h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M11 5l2 3-2 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}const Jr="h-4 w-4 text-current opacity-80";function mC(){return l.jsx("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M3 4.5h3l1 1H13a1 1 0 0 1 1 1V12.5a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}function N0(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M6 4.5h5.5a1 1 0 0 1 1 1V13",stroke:"currentColor",strokeWidth:"1.1",strokeLinecap:"round"}),l.jsx("rect",{x:"3.5",y:"2.5",width:"6",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.1",fill:"none"})]})}function pC(){return l.jsx("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 6l3 3 3-3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function Zv(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 4.5h4.5l3 3V13a1 1 0 0 1-1 1h-6.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),l.jsx("path",{d:"M11 7.5h-2v-2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M8.5 7.5h2.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function rh(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3.5 5h3.5l1.2 1.4H12.5a1 1 0 0 1 1 1V12a1 1 0 0 1-1 1h-9a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none",strokeLinejoin:"round"}),l.jsx("path",{d:"M8 8v3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M6.5 9.5h3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function gC(){return l.jsx("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:l.jsx("path",{d:"M5 10l3-3 3 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function xC(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M3 5h10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 8h6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M3 11h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function C0(){return l.jsxs("svg",{className:Jr,viewBox:"0 0 16 16","aria-hidden":!0,children:[l.jsx("path",{d:"M6 3.5h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M4 4.5h8",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M5.5 4.5v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),l.jsx("path",{d:"M9.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Fv({appearance:e,onSubmit:n,onCancel:r,onChange:i,isSubmitting:c,error:u,placeholder:d="new_file.py",icon:m}){const[x,g]=p.useState(""),b=p.useRef(null);p.useEffect(()=>{b.current?.focus(),b.current?.select()},[]);const y=p.useCallback(()=>{n(x.trim())},[n,x]),w=e==="dark"?"text-slate-300":"text-slate-600",E=e==="dark"?"#232323":"#e8e8e8",N=e==="dark"?"#2f2f2f":"#d4d4d4";return l.jsxs("div",{className:"rounded-md border px-2 py-1",style:{backgroundColor:E,borderColor:N},onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex w-4 justify-center text-[#4fc1ff]",children:m??l.jsx(Zv,{})}),l.jsx("input",{ref:b,value:x,onChange:j=>{g(j.target.value),i?.()},onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),y()),j.key==="Escape"&&(j.preventDefault(),r())},className:"flex-1 rounded-sm border border-transparent bg-white/80 px-2 py-1 text-[13px] text-slate-900 outline-none focus:border-[#007acc]",placeholder:d,disabled:c}),l.jsx("button",{type:"button",className:ge("rounded-sm px-2 py-1 text-[12px] font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",c?"cursor-wait bg-slate-300 text-slate-500":"bg-[#007acc] text-white hover:bg-[#0e78c6]"),onClick:y,disabled:c,children:c?"Creating":"Create"}),l.jsx("button",{type:"button",className:"rounded-sm px-2 py-1 text-[12px] font-semibold text-slate-500 transition hover:text-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",onClick:r,disabled:c,children:"Cancel"})]}),l.jsx("div",{className:ge("mt-1 text-[11px]",w),children:"Enter a name and press Enter. Escape to cancel."}),u?l.jsx("div",{className:"mt-1 text-[11px] font-semibold text-danger-500",children:u}):null]})}function _0({orientation:e,onPointerDown:n,onDoubleClick:r,onToggle:i,collapsed:c}){const u=e==="vertical",d=u?"":c?"":"";return l.jsxs("div",{role:"separator","aria-orientation":e,className:ge("relative select-none bg-transparent group",u?"w-4 cursor-col-resize":"h-3 cursor-row-resize"),style:{touchAction:"none"},onPointerDown:n,onDoubleClick:r,title:u?"Drag to resize":"Drag to resize  Double-click to hide/show console",children:[l.jsx("span",{className:"sr-only",children:"Resize panel"}),l.jsx("div",{className:ge("absolute inset-0 flex items-center justify-center",u?"px-[6px]":"py-[6px]"),"aria-hidden":!0,children:l.jsx("div",{className:ge(u?"h-full w-px":"h-px w-full","bg-slate-400/50")})}),i&&!u?l.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),i()},className:"absolute right-1/2 top-1/2 h-5 w-5 -translate-y-1/2 translate-x-[40%] rounded bg-slate-800/70 text-[10px] text-slate-100 opacity-0 shadow-sm transition-opacity group-hover:opacity-100 focus:opacity-100 focus:outline-none","aria-label":c?"Show console":"Hide console",title:c?"Show console":"Hide console",children:d}):null]})}const bC={json:"json",py:"python",ts:"typescript",tsx:"typescriptreact",js:"javascript",jsx:"javascriptreact",env:"dotenv",md:"markdown",yml:"yaml",yaml:"yaml",toml:"toml"};function k0(e){const n=e.root||e.prefix||e.entries[0]?.parent||"",r=e.entries.length>0;if(!n&&!r)return null;const i=Fl(n),c={id:n,name:T0(n),kind:"folder",children:[]},u=new Map([[n,c]]),d=x=>{if(x.length===0)return c;const g=Fl(x),b=g===i?n:g,y=u.get(b);if(y)return y;const w={id:b,name:T0(b),kind:"folder",children:[]};u.set(b,w);const E=b===n?"":wC(b)??n,N=d(E);return Uf(N,w),w},m=[...e.entries].sort((x,g)=>x.depth!==g.depth?x.depth-g.depth:x.path.localeCompare(g.path));for(const x of m){const g=x.parent&&x.parent.length>0?Fl(x.parent):n,b=d(g);if(x.kind==="dir"){const w=d(x.path);w.name=x.name,w.metadata={size:x.size??null,modifiedAt:x.mtime,contentType:x.content_type,etag:x.etag},w!==b&&Uf(b,w);continue}const y={id:x.path,name:x.name,kind:"file",language:yC(x.path),metadata:{size:x.size??null,modifiedAt:x.mtime,contentType:x.content_type,etag:x.etag}};u.set(x.path,y),Uf(b,y)}return c}function Uf(e,n){const r=e.children??[],i=r.some(c=>c.id===n.id)?r.map(c=>c.id===n.id?n:c):[...r,n];e.children=i.sort(vC)}function vC(e,n){return e.kind!==n.kind?e.kind==="folder"?-1:1:e.name.localeCompare(n.name)}function yC(e){const n=e.toLowerCase(),r=n.lastIndexOf(".");if(r===-1)return;const i=n.slice(r+1);return bC[i]}function T0(e){const n=Fl(e);if(!n)return"";const r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}function wC(e){const n=Fl(e);if(!n)return;const r=n.lastIndexOf("/");return r===-1?"":n.slice(0,r)}function Fl(e){return e?e.replace(/\/+$/,""):""}function Ss(e,n){if(e.id===n)return e;if(!e.children)return null;for(const r of e.children){const i=Ss(r,n);if(i)return i}return null}function Uh(e){if(e.kind==="file")return e;if(!e.children)return null;for(const n of e.children){const r=Uh(n);if(r)return r}return null}function SC({tree:e,initialActiveFileId:n,loadFile:r,persistence:i}){const[c,u]=p.useState([]),[d,m]=p.useState(""),[x,g]=p.useState([]),[b,y]=p.useState(()=>!i),[w,E]=p.useState(!1),N=p.useRef(new Set),j=p.useRef([]),_=p.useRef(""),A=p.useRef([]),D=p.useCallback(M=>{m(F=>F===M?F:M),g(F=>{const G=F.filter(L=>j.current.some(ie=>ie.id===L));if(!M)return G;const te=G.filter(L=>L!==M);return[M,...te]})},[]);p.useEffect(()=>{_.current=d},[d]),p.useEffect(()=>{A.current=x},[x]),p.useEffect(()=>{if(!e){u([]),m(""),g([]);return}u(F=>F.filter(G=>!!Ss(e,G.id)).map(G=>{const te=Ss(e,G.id);return!te||te.kind!=="file"?G:{...G,name:te.name,language:te.language,metadata:te.metadata}}));const M=_.current;(!M||!Ss(e,M))&&D("")},[e,D]);const R=p.useMemo(()=>c.find(M=>M.id===d)??c[0]??null,[d,c]),q=p.useCallback(async M=>{if(!j.current.some(G=>G.id===M))return;let F=!1;if(u(G=>G.map(te=>te.id!==M?te:te.status==="ready"?(F=!0,te):{...te,status:"loading",error:null})),!F)try{const G=await r(M);u(te=>te.map(L=>L.id===M?{...L,initialContent:G.content,content:G.content,status:"ready",error:null,etag:G.etag??null,saving:!1,saveError:null}:L))}catch(G){const te=G instanceof Error?G.message:"Unable to load file.";u(L=>L.map(ie=>ie.id===M?{...ie,status:"error",error:te}:ie))}},[r]),U=p.useCallback((M,F)=>{if(!e)return;const G=Ss(e,M);!G||G.kind!=="file"||(u(te=>{if(te.some(ie=>ie.id===M))return te;const L={id:G.id,name:G.name,language:G.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:G.metadata,pinned:!1,saving:!1,saveError:null,lastSavedAt:null};return[...te,L]}),(F?.activate??!0)&&D(M))},[e,D]);p.useEffect(()=>{if(b||!i||!e){i||y(!0);return}const M=i.get(),G=(M?.openTabs??[]).map(te=>typeof te=="string"?{id:te,pinned:!1}:te).filter(te=>!!(te&&te.id));if(G.length>0){const te=[];for(const L of G){const ie=Ss(e,L.id);!ie||ie.kind!=="file"||te.push({id:ie.id,name:ie.name,language:ie.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:ie.metadata,pinned:!!L.pinned,saving:!1,saveError:null,lastSavedAt:null})}if(te.length>0){u(te);const L=(M?.activeTabId&&te.some(Te=>Te.id===M.activeTabId)?M.activeTabId:te[0]?.id)??"";m(L);const me=(M?.mru&&M.mru.length>0?M.mru:te.map(Te=>Te.id)).filter(Te=>te.some(Fe=>Fe.id===Te));g(me),E(!0)}}y(!0)},[b,i,e]),p.useEffect(()=>{if(!e||!b)return;if(c.length>0){w||E(!0);return}if(w)return;const M=n&&Ss(e,n)||Uh(e);if(!M){E(!0);return}U(M.id),E(!0)},[e,n,U,b,c.length,w]);const V=p.useCallback(M=>{U(M)},[U]),$=p.useCallback(M=>{D(M),u(F=>F.map(G=>G.id===M&&G.status==="error"?{...G,status:"loading",error:null}:G))},[D]),re=p.useCallback(M=>{u(F=>{const G=F.filter(ie=>ie.id!==M),te=_.current,L=te===M?G[G.length-1]?.id??"":G.some(ie=>ie.id===te)?te:G[G.length-1]?.id??"";return D(L),G})},[D]),B=p.useCallback(M=>{u(F=>!F.some(G=>G.id===M)||F.length<=1?F:(D(M),F.filter(G=>G.id===M)))},[D]),H=p.useCallback(M=>{u(F=>{const G=F.findIndex(ie=>ie.id===M);if(G===-1||G===F.length-1)return F;const te=F.slice(0,G+1),L=te.some(ie=>ie.id===_.current)?_.current:M;return D(L),te})},[D]),J=p.useCallback(()=>{u([]),m(""),g([])},[]),ce=p.useCallback((M,F)=>{u(G=>{if(G.length<=1)return G;const te=G.findIndex(_e=>_e.id===M);if(te===-1)return G;const L=G.filter((_e,ne)=>ne!==te),ie=Math.max(0,Math.min(F,L.length)),me=[],Te=[],Fe=G[te];if(L.forEach(_e=>{_e.pinned?me.push(_e):Te.push(_e)}),(ie<=me.length?"pinned":"regular")==="pinned"){const _e=Math.max(0,Math.min(ie,me.length));me.splice(_e,0,{...Fe,pinned:!0})}else{const _e=Math.max(0,Math.min(ie-me.length,Te.length));Te.splice(_e,0,{...Fe,pinned:!1})}return[...me,...Te]})},[]),Q=p.useCallback(M=>{if(N.current.has(M))return;let F=!1;u(G=>G.map(te=>te.id!==M?te:(F=!0,{...te,status:"loading",error:null}))),F&&(N.current.add(M),q(M).finally(()=>{N.current.delete(M)}))},[q]),de=p.useCallback(M=>{u(F=>{const G=[],te=[];let L=null;for(const me of F){if(me.id===M){L=me;continue}me.pinned?G.push(me):te.push(me)}if(!L||L.pinned)return F;const ie={...L,pinned:!0};return[...G,ie,...te]})},[]),xe=p.useCallback(M=>{u(F=>{const G=[],te=[];let L=null;for(const me of F){if(me.id===M){L=me;continue}me.pinned?G.push(me):te.push(me)}if(!L||!L.pinned)return F;const ie={...L,pinned:!1};return[...G,ie,...te]})},[]),z=p.useCallback((M,F)=>{F?de(M):xe(M)},[de,xe]),ee=p.useCallback(M=>{const F=A.current.filter(Fe=>j.current.some(Se=>Se.id===Fe));if(F.length<=1)return;const G=_.current||F[0],te=F.indexOf(G),me=((te>=0?te:0)+(M==="forward"?1:-1)+F.length)%F.length,Te=F[me];Te&&Te!==G&&D(Te)},[D]),K=p.useCallback((M,F)=>{u(G=>G.map(te=>te.id===M?{...te,content:F,status:te.status==="ready"?te.status:"ready",error:null,saveError:null}:te))},[]),be=p.useCallback(M=>{u(F=>F.map(G=>G.id===M?{...G,saving:!0,saveError:null}:G))},[]),ve=p.useCallback((M,F)=>{u(G=>G.map(te=>{if(te.id!==M)return te;const L=F?.metadata??te.metadata??null,ie=F?.etag??te.etag??null,me=F?.savedContent??te.content;return{...te,saving:!1,saveError:null,initialContent:me,etag:ie,metadata:L&&{...L,etag:L.etag??ie??null},lastSavedAt:new Date().toISOString()}}))},[]),C=p.useCallback((M,F)=>{u(G=>G.map(te=>te.id===M?{...te,saving:!1,saveError:F}:te))},[]),I=p.useCallback((M,F)=>{u(G=>G.map(te=>te.id!==M?te:{...te,content:F.content,initialContent:F.content,status:"ready",error:null,saving:!1,saveError:null,etag:F.etag??te.etag??null,metadata:F.metadata??te.metadata}))},[]),ae=p.useMemo(()=>c.some(M=>M.status==="ready"&&M.content!==M.initialContent),[c]);return p.useEffect(()=>{j.current=c},[c]),p.useEffect(()=>{g(M=>{const F=M.filter(G=>c.some(te=>te.id===G));return F.length===M.length?M:F})},[c]),p.useEffect(()=>{const M=new Set(c.map(F=>F.id));for(const F of N.current)M.has(F)||N.current.delete(F);for(const F of c){if(F.status!=="loading"||N.current.has(F.id))continue;N.current.add(F.id),q(F.id).finally(()=>{N.current.delete(F.id)})}},[c,q]),p.useEffect(()=>{if(!i||!b)return;const M=[d,...x].filter(F=>!!F).filter((F,G,te)=>te.indexOf(F)===G).filter(F=>c.some(G=>G.id===F));i.set({openTabs:c.map(F=>({id:F.id,pinned:!!F.pinned})),activeTabId:d||null,mru:M})},[i,c,d,x,b]),{tree:e,tabs:c,activeTabId:d,activeTab:R,openFile:V,selectTab:$,closeTab:re,closeOtherTabs:B,closeTabsToRight:H,closeAllTabs:J,moveTab:ce,reloadTab:Q,pinTab:de,unpinTab:xe,toggleTabPin:z,selectRecentTab:ee,updateContent:K,beginSavingTab:be,completeSavingTab:ve,failSavingTab:C,replaceTabContent:I,isDirty:ae}}function Vv(e){if(e instanceof URLSearchParams)return new URLSearchParams(e);if(typeof e=="string"||Array.isArray(e))return new URLSearchParams(e);const n=new URLSearchParams;for(const[r,i]of Object.entries(e)){if(i==null)continue;const c=Array.isArray(i)?i:[i];for(const u of c)u!=null&&n.append(r,String(u))}return n}const Qv=p.createContext(null);function jC({value:e,children:n}){return p.createElement(Qv.Provider,{value:e},n)}function Bh(){const e=p.useContext(Qv),n=js(),r=Nn(),i=p.useMemo(()=>new URLSearchParams(n.search),[n.search]),c=p.useCallback((u,d)=>{const m=typeof u=="function"?u(new URLSearchParams(i)):u,g=Vv(m).toString(),b=`${n.pathname}${g?`?${g}`:""}${n.hash}`;r(b,{replace:d?.replace})},[n.hash,n.pathname,r,i]);return[e?.params??i,e?.setSearchParams??c]}const Gr={tab:"editor",pane:"terminal",console:"closed",view:"editor"},EC=["tab","pane","console","view","file","runId"];function NC(e){return e==="open"?"open":"closed"}function CC(e){return e==="runSummary"?"runSummary":e==="problems"?"problems":e==="terminal"?"terminal":Gr.pane}function _C(e){return e==="split"||e==="zen"?e:"editor"}function Iv(e){const n=e instanceof URLSearchParams?e:new URLSearchParams(e),r=n.get("tab"),i=n.get("pane"),c=n.get("console"),u=n.get("view"),d=n.get("file"),m=n.get("runId"),x=m&&m.length>0?m:void 0;return{...{tab:r==="editor"?"editor":Gr.tab,pane:CC(i),console:NC(c),view:_C(u),file:d??void 0,runId:x},present:{tab:n.has("tab"),pane:n.has("pane"),console:n.has("console"),view:n.has("view"),file:n.has("file"),runId:n.has("runId")}}}function Bf(e,n){const r=Iv(e),i={...Gr,...r,...n},c=new URLSearchParams(e);for(const u of EC)c.delete(u);return i.tab!==Gr.tab&&c.set("tab",i.tab),i.pane!==Gr.pane&&c.set("pane",i.pane),i.console!==Gr.console&&c.set("console",i.console),i.view!==Gr.view&&c.set("view",i.view),i.file&&i.file.length>0&&c.set("file",i.file),i.runId&&i.runId.length>0&&c.set("runId",i.runId),c}function kC(){const[e,n]=Bh(),r=p.useMemo(()=>Iv(e),[e]),i=p.useCallback(d=>{r.file===d||!d&&!r.present.file||n(m=>Bf(m,{file:d??void 0}),{replace:!0})},[n,r.file,r.present.file]),c=p.useCallback(d=>{r.pane!==d&&n(m=>Bf(m,{pane:d}),{replace:!0})},[n,r.pane]),u=p.useCallback(d=>{r.console!==d&&n(m=>Bf(m,{console:d}),{replace:!0})},[n,r.console]);return{fileId:r.file??Gr.file,pane:r.pane,console:r.console,consoleExplicit:r.present.console,setFileId:i,setPane:c,setConsole:u}}const TC="You have unsaved changes in the config editor. Are you sure you want to leave?";function DC({isDirty:e,confirm:n=window.confirm,message:r=TC,shouldBypassNavigation:i}){const c=js(),u=p.useCallback(d=>!e||i?.()||d.location.pathname===c.pathname?!0:n(r),[n,e,c.pathname,r,i]);Y1(u,e),p.useEffect(()=>{if(!e)return;const d=m=>(m.preventDefault(),m.returnValue=r,r);return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[e,r])}const D0="(prefers-color-scheme: dark)";function A0(e){return e==="light"||e==="dark"||e==="system"?e:"system"}function AC(e,n){return e==="dark"||e==="system"&&n?"ade-dark":"vs-light"}function RC(e){const n=p.useMemo(()=>Ws(e),[e]),[r,i]=p.useState(()=>{const x=n.get();return A0(x)}),[c,u]=p.useState(()=>typeof window>"u"?!1:window.matchMedia(D0).matches);p.useEffect(()=>{const x=A0(n.get());i(g=>g===x?g:x)},[n]),p.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia(D0),g=b=>{u(b.matches)};return typeof x.addEventListener=="function"?x.addEventListener("change",g):typeof x.addListener=="function"&&x.addListener(g),u(x.matches),()=>{typeof x.removeEventListener=="function"?x.removeEventListener("change",g):typeof x.removeListener=="function"&&x.removeListener(g)}},[]),p.useEffect(()=>{n.set(r)},[r,n]);const d=p.useMemo(()=>AC(r,c),[r,c]),m=p.useCallback(x=>{i(x)},[]);return{preference:r,resolvedTheme:d,setPreference:m}}function ls(e,n,r){return Math.min(Math.max(e,n),r)}function R0(e,n){const{onMove:r,onEnd:i,cursor:c}=n;if(typeof window>"u")return;e.preventDefault();const u=e.pointerId,d=e.currentTarget,m=document.body.style.cursor,x=document.body.style.userSelect;let g=null,b=null,y=!0;const w=_=>{if(y){if(y=!1,g!==null&&(cancelAnimationFrame(g),g=null),document.body.style.cursor=m,document.body.style.userSelect=x,window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",N),d.removeEventListener("lostpointercapture",j),d.hasPointerCapture?.(u))try{d.releasePointerCapture(u)}catch{}i&&i(_)}},E=_=>{!y||_.pointerId!==u||(b=_,g===null&&(g=window.requestAnimationFrame(()=>{g=null,b&&r(b)})))},N=_=>{_.pointerId===u&&w(_)},j=_=>{_.pointerId===u&&w(_)};c&&(document.body.style.cursor=c),document.body.style.userSelect="none";try{d.setPointerCapture(u)}catch{}window.addEventListener("pointermove",E),window.addEventListener("pointerup",N),window.addEventListener("pointercancel",N),d.addEventListener("lostpointercapture",j)}const MC="inline-flex items-center gap-2 rounded-l-md px-3 py-1.5 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed",zC="inline-flex items-center justify-center rounded-r-md border-l px-2 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed";function OC({label:e,icon:n,disabled:r,isLoading:i,highlight:c,className:u,primaryClassName:d,menuClassName:m,title:x,menuAriaLabel:g="Open menu",menuIcon:b=l.jsx(LC,{}),onPrimaryClick:y,onOpenMenu:w,onContextMenu:E}){const N=p.useRef(null),j=!!(r||i),_=A=>{if(j)return;A.preventDefault();const D=N.current?.getBoundingClientRect();if(D){w?.({x:D.left,y:D.bottom});return}w?.({x:A.clientX,y:A.clientY})};return l.jsxs("div",{role:"group",className:ge("inline-flex items-stretch rounded-md shadow-sm",c&&"ring-2 ring-amber-300/70 ring-offset-2 ring-offset-transparent",u),onContextMenu:E,children:[l.jsxs("button",{type:"button",title:x,disabled:j,className:ge(MC,d),onClick:A=>{j||y?.(A)},children:[n,l.jsx("span",{className:"whitespace-nowrap",children:e})]}),l.jsx("button",{ref:N,type:"button","aria-label":g,"aria-haspopup":"menu","aria-expanded":"false",disabled:j,className:ge(zC,m),onClick:_,children:b})]})}function LC(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:l.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}const UC={loading:"animate-spin border-2 border-brand-500 border-t-transparent",empty:"bg-slate-200",error:"bg-danger-500"};function mt({title:e,description:n,action:r,variant:i="empty",className:c}){return l.jsxs("div",{className:ge("flex min-h-[240px] flex-col items-center justify-center rounded-xl border border-dashed border-slate-300 bg-white/70 px-6 py-12 text-center text-sm text-slate-600",c),children:[l.jsx("span",{"aria-hidden":"true",className:ge("mb-4 h-8 w-8 rounded-full border-current",UC[i])}),l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:e}),n?l.jsx("p",{className:"mt-2 max-w-md leading-relaxed",children:n}):null,r?l.jsx("div",{className:"mt-4",children:r}):null]})}const BC=new TextEncoder;async function qC(e,n={}){const{signal:r,page:i,pageSize:c,includeTotal:u}=n,d={};typeof i=="number"&&i>0&&(d.page=i),typeof c=="number"&&c>0&&(d.page_size=c),u&&(d.include_total=!0);const{data:m}=await Ze.GET("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e},query:d},signal:r});if(!m)throw new Error("Expected configuration page payload.");return m}async function $C(e,n,r){const{data:i}=await Ze.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}",{params:{path:{workspace_id:e,configuration_id:n}},signal:r});return i??null}async function HC(e,n,r={}){const{prefix:i,depth:c,include:u,exclude:d,limit:m,pageToken:x,sort:g,order:b,signal:y}=r,{data:w}=await Ze.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files",{params:{path:{workspace_id:e,configuration_id:n},query:{prefix:i??"",depth:c??"infinity",include:u?.length?[...u]:void 0,exclude:d?.length?[...d]:void 0,limit:m,page_token:x??void 0,sort:g,order:b}},signal:y,requestInitExt:{cache:"no-store"}});if(!w)throw new Error("Expected file listing payload.");return w}async function M0(e,n,r,i){const{data:c}=await Ze.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:r}},headers:{Accept:"application/json"},signal:i,requestInitExt:{cache:"no-store"}});if(!c)throw new Error("Expected file payload.");return c}async function ZC(e,n){const{data:r,response:i}=await Ze.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/export",{params:{path:{workspace_id:e,configuration_id:n}},parseAs:"blob"});if(!r)throw new Error("Expected configuration archive payload.");const d=(i?.headers?.get("content-disposition")??"").match(/filename="?([^";]+)"?/i)?.[1];return{blob:r,filename:d??void 0}}async function FC(e,n,r){const i=YC(r.path),c=r.parents?"?parents=1":"",u=await KS(`/api/v1/workspaces/${e}/configurations/${n}/files/${i}${c}`,{method:"PUT",body:BC.encode(r.content),headers:{"Content-Type":"application/octet-stream",...r.create?{"If-None-Match":"*"}:r.etag?{"If-Match":r.etag}:{}}});if(!u.ok){const m=await XC(u),x=m?.title??`Request failed with status ${u.status}`;throw new Tn(x,u.status,m)}const d=await u.json().catch(()=>({}));if(!d||!d.path)throw new Error("Expected write response payload.");return d}async function VC(e,n,r,i={}){await Ze.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:r}},headers:i.etag?{"If-Match":i.etag}:void 0})}async function QC(e,n,r){const{data:i}=await Ze.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:r}}});if(!i)throw new Error("Expected directory response payload.");return i}async function IC(e,n,r,i={}){const c={};i.recursive&&(c.recursive=!0),await Ze.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:r},query:c}})}async function PC(e,n){const r=new FormData;r.append("display_name",n.displayName),r.append("file",n.file);const{data:i}=await Ze.POST("/api/v1/workspaces/{workspace_id}/configurations/import",{params:{path:{workspace_id:e}},body:r,bodySerializer:()=>r});if(!i)throw new Error("Expected configuration payload.");return i}async function WC(e,n,r){const i=new FormData;i.append("file",r.file);const{data:c}=await Ze.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/import",{params:{path:{workspace_id:e,configuration_id:n}},headers:r.ifMatch?{"If-Match":r.ifMatch}:void 0,body:i,bodySerializer:()=>i});if(!c)throw new Error("Expected configuration payload.");return c}function GC(e){return e.type==="template"?{type:"template",template_id:e.templateId.trim()}:{type:"clone",configuration_id:e.configurationId.trim()}}async function KC(e,n){const{data:r}=await Ze.POST("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e}},body:{display_name:n.displayName.trim(),source:GC(n.source)}});if(!r)throw new Error("Expected configuration payload.");return r}function YC(e){return e.split("/").map(n=>encodeURIComponent(n)).join("/")}async function XC(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const En={root:e=>["workspaces",e,"configurations"],list:(e,n={})=>[...En.root(e),"list",{...n}],detail:(e,n)=>[...En.root(e),"detail",n],files:(e,n)=>[...En.detail(e,n),"files"],file:(e,n,r)=>[...En.files(e,n),"file",r]};function JC({workspaceId:e,configId:n,enabled:r=!0,...i}){const{prefix:c="",depth:u="infinity",include:d,exclude:m,limit:x,pageToken:g,sort:b="path",order:y="asc"}=i;return xn({queryKey:[...En.files(e,n),c,u,d?.join("|")??"",m?.join("|")??"",x??"",g??"",b,y],queryFn:({signal:w})=>HC(e,n,{prefix:c,depth:u,include:d,exclude:m,limit:x,pageToken:g,sort:b,order:y,signal:w}),enabled:r&&e.length>0&&n.length>0,staleTime:5e3})}function e_(e,n){const r=pt();return sn({mutationFn:i=>FC(e,n,i),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:En.files(e,n)}),r.invalidateQueries({queryKey:En.file(e,n,c.path)})])}})}function t_(e,n){const r=pt();return sn({mutationFn:i=>VC(e,n,i.path,{etag:i.etag}),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:En.files(e,n)}),r.invalidateQueries({queryKey:En.file(e,n,c.path)})])}})}function n_(e,n){const r=pt();return sn({mutationFn:i=>QC(e,n,i.path),async onSuccess(){await r.invalidateQueries({queryKey:En.files(e,n)})}})}function s_(e,n){const r=pt();return sn({mutationFn:i=>IC(e,n,i.path,{recursive:i.recursive}),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:En.files(e,n)}),r.invalidateQueries({queryKey:En.file(e,n,c.path)})])}})}function r_(e){return sn({mutationFn:n=>PC(e,n)})}function a_(e,n){return sn({mutationFn:r=>WC(e,n,r)})}async function Pv(e,n,r){const{data:i}=await Ze.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/sheets",{params:{path:{workspace_id:e,document_id:n}},signal:r});return i??[]}const Wv=p.createContext(null),i_=6e3,l_=7e3,z0=4;function o_({children:e}){const[n,r]=p.useState([]),[i,c]=p.useState([]),u=p.useCallback(b=>{r(y=>y.filter(w=>w.id!==b)),c(y=>y.filter(w=>w.id!==b))},[]),d=p.useCallback(b=>{const y={kind:"toast",id:b.id??O0(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?i_:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,createdAt:Date.now()};return r(w=>{const N=[...y.persistKey?w.filter(j=>j.persistKey!==y.persistKey):w,y];return N.length>z0?N.slice(N.length-z0):N}),typeof window<"u"&&y.duration&&y.duration>0&&window.setTimeout(()=>u(y.id),y.duration+50),y.id},[u]),m=p.useCallback(b=>{const y={kind:"banner",id:b.id??O0(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?b.sticky?null:l_:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,sticky:b.sticky??!1,createdAt:Date.now()};return c(w=>[...y.persistKey?w.filter(N=>N.persistKey!==y.persistKey):w,y]),typeof window<"u"&&y.duration&&y.duration>0&&window.setTimeout(()=>u(y.id),y.duration+50),y.id},[u]),x=p.useCallback((b,y)=>{b&&((!y||y==="toast")&&r(w=>w.filter(E=>E.scope!==b)),(!y||y==="banner")&&c(w=>w.filter(E=>E.scope!==b)))},[]),g=p.useMemo(()=>({toasts:n,banners:i,pushToast:d,pushBanner:m,dismiss:u,clearScope:x}),[n,i,d,m,u,x]);return l.jsxs(Wv.Provider,{value:g,children:[e,l.jsx(c_,{})]})}function Gv(){const e=p.useContext(Wv);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e}function c_(){const{toasts:e,banners:n,dismiss:r}=Gv(),[i,c]=p.useState(!1);return p.useEffect(()=>c(!0),[]),!i||typeof document>"u"?null:br.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-0 z-[205] flex flex-col items-center gap-3 px-4 pt-3 sm:items-end sm:pr-6",children:n.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>l.jsx(d_,{banner:u,onDismiss:r},u.id))}),l.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-[210] flex flex-col items-center gap-3 px-4 sm:inset-x-auto sm:right-6 sm:bottom-6 sm:items-end sm:px-0",children:e.slice().sort((u,d)=>u.createdAt-d.createdAt).map(u=>l.jsx(u_,{toast:u,onDismiss:r},u.id))})]}),document.body)}function u_({toast:e,onDismiss:n}){const r=e.duration!==null&&e.duration>0,[i,c]=p.useState(100);p.useEffect(()=>{if(!r||!e.duration)return;c(100);const d=requestAnimationFrame(()=>c(0)),m=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(m)}},[r,e.duration,e.id,n]);const u=f_[e.intent];return l.jsxs("div",{className:ge("pointer-events-auto w-full max-w-sm rounded-2xl border px-4 py-3 text-sm shadow-2xl backdrop-blur",u.container,u.border),children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx("div",{className:ge("mt-1 flex h-8 w-8 items-center justify-center rounded-full",u.icon),children:e.icon??Yv(e.intent)}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l.jsx("p",{className:"text-sm font-semibold leading-snug text-white",children:e.title}),e.description?l.jsx("p",{className:"mt-1 text-xs leading-relaxed text-white/70",children:e.description}):null,e.actions.length>0?l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(d=>l.jsx(Kv,{action:d,onPress:()=>{d.onSelect(),n(e.id)},appearance:"dark"},d.label))}):null]}),e.dismissible?l.jsx("button",{type:"button",className:"ml-2 inline-flex h-8 w-8 items-center justify-center rounded-full text-white/60 transition hover:bg-white/10 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30","aria-label":"Dismiss notification",onClick:()=>n(e.id),children:l.jsx(Xv,{})}):null]}),r&&e.duration?l.jsx("div",{className:"mt-4 h-1 overflow-hidden rounded-full bg-white/10",children:l.jsx("div",{className:ge("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function d_({banner:e,onDismiss:n}){const r=!e.sticky&&e.duration!==null&&e.duration>0,[i,c]=p.useState(100);p.useEffect(()=>{if(!r||!e.duration)return;c(100);const d=requestAnimationFrame(()=>c(0)),m=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(d),window.clearTimeout(m)}},[r,e.duration,e.id,n]);const u=h_[e.intent];return l.jsxs("div",{className:ge("pointer-events-auto w-full max-w-sm rounded-lg border px-3.5 py-2.5 shadow-lg shadow-black/30 backdrop-blur-sm sm:min-w-[300px]",u.container,u.border),children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:ge("flex h-7 w-7 items-center justify-center rounded-full text-base",u.icon),children:e.icon??Yv(e.intent)}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[l.jsx("p",{className:"text-[13px] font-semibold leading-tight",children:e.title}),e.description?l.jsx("p",{className:"text-[12px] leading-relaxed text-white/75",children:e.description}):null,e.actions.length>0?l.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:e.actions.map(d=>l.jsx(Kv,{action:d,onPress:()=>{d.onSelect(),e.sticky||n(e.id)},appearance:"light"},d.label))}):null]}),e.dismissible?l.jsx("button",{type:"button",className:ge("ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full text-white/70 transition hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30",u.dismiss),"aria-label":"Dismiss notification",onClick:()=>n(e.id),children:l.jsx(Xv,{})}):null]}),r&&e.duration?l.jsx("div",{className:"mt-2 h-0.5 overflow-hidden rounded-full bg-white/10",children:l.jsx("div",{className:ge("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function Kv({action:e,onPress:n,appearance:r}){const i=e.variant??"secondary",c=r==="dark"?"border-white/15 text-white/90 hover:bg-white/10 focus-visible:ring-white/30":"border-white/20 text-white hover:bg-white/10 focus-visible:ring-white/30";return l.jsx("button",{type:"button",className:ge("inline-flex items-center justify-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2",i==="primary"?"bg-white text-slate-900 hover:bg-slate-100 focus-visible:ring-white/40":c),onClick:n,children:e.label})}function Yv(e){switch(e){case"success":return l.jsx(p_,{});case"warning":return l.jsx(g_,{});case"danger":return l.jsx(x_,{});default:return l.jsx(m_,{})}}const f_={info:{container:"bg-[#0b1220]/95 text-white",border:"border-white/5",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400"},success:{container:"bg-[#031b16]/95 text-emerald-50",border:"border-emerald-500/20",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400"},warning:{container:"bg-[#211604]/95 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-400/20 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400"},danger:{container:"bg-[#22060b]/95 text-rose-50",border:"border-rose-500/30",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400"}},h_={info:{container:"bg-[#101828]/85 text-white",border:"border-white/10",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400",dismiss:"hover:bg-white/10"},success:{container:"bg-[#0d1c17]/85 text-emerald-50",border:"border-emerald-500/15",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400",dismiss:"hover:bg-white/10"},warning:{container:"bg-[#1b1507]/85 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-500/15 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400",dismiss:"hover:bg-white/10"},danger:{container:"bg-[#200912]/85 text-rose-50",border:"border-rose-500/25",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400",dismiss:"hover:bg-white/10"}};function O0(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}function m_(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M10 7.5v.2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),l.jsx("path",{d:"M9.2 9.5h1.6V14",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function p_(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M6.5 10.5l2.5 2.5 4.5-5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}function g_(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M9 4.6l-6 10.4a1 1 0 0 0 .87 1.5h12.26a1 1 0 0 0 .87-1.5L11 4.6a1 1 0 0 0-1.74 0Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M10 8v3.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),l.jsx("path",{d:"M10 14h.01",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}function x_(){return l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),l.jsx("path",{d:"M7 7l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function Xv(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 4l8 8m0-8-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function b_(){const e=Gv();return p.useMemo(()=>({notifyToast:n=>e.pushToast(n),notifyBanner:n=>e.pushBanner(n),dismissNotification:n=>e.dismiss(n),dismissScope:(n,r)=>e.clearScope(n,r)}),[e])}const v_="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",Ra=p.forwardRef(({className:e,...n},r)=>l.jsx("select",{ref:r,className:ge(v_,e),...n}));Ra.displayName="Select";const y_={primary:"bg-brand-600 text-white hover:bg-brand-700 focus-visible:ring-brand-500 disabled:bg-brand-300",secondary:"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 focus-visible:ring-slate-400 disabled:text-slate-400",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus-visible:ring-slate-300",danger:"bg-rose-600 text-white hover:bg-rose-700 focus-visible:ring-rose-500 disabled:bg-rose-300"},w_={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},Oe=p.forwardRef(({type:e="button",variant:n="primary",size:r="md",isLoading:i=!1,className:c,children:u,disabled:d,...m},x)=>{const g=d||i;return l.jsxs("button",{ref:x,type:e,disabled:g,"aria-busy":i||void 0,className:ge("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed",y_[n],w_[r],c),...m,children:[i?l.jsx("span",{"aria-hidden":"true",className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,l.jsx("span",{children:u})]})});Oe.displayName="Button";const S_={info:"bg-brand-50 text-brand-700 ring-brand-100",success:"bg-success-50 text-success-700 ring-success-100",warning:"bg-warning-50 text-warning-700 ring-warning-100",danger:"bg-danger-50 text-danger-700 ring-danger-100"};function St({tone:e="info",heading:n,icon:r,className:i,children:c,...u}){return l.jsxs("div",{role:"status",className:ge("flex w-full items-start gap-3 rounded-lg px-4 py-3 text-sm ring-1 ring-inset",S_[e],i),...u,children:[r?l.jsx("span",{"aria-hidden":"true",children:r}):null,l.jsxs("div",{className:"space-y-1",children:[n?l.jsx("p",{className:"font-semibold",children:n}):null,c?l.jsx("p",{className:"leading-relaxed",children:c}):null]})]})}function Jv(e,n){const r=A_(qh(n??[],e),"initial");return{runId:null,runMode:void 0,status:"idle",buildPhases:{},runPhases:{},consoleLines:r,validationSummary:null,completedPayload:null,maxConsoleLines:e}}function j_(e,n){switch(n.type){case"RESET":return{...Jv(e.maxConsoleLines,n.initialLines),runId:n.runId??null};case"ATTACH_RUN":return{...e,runId:n.runId,runMode:n.runMode??e.runMode};case"CLEAR_CONSOLE":return{...e,consoleLines:[]};case"APPEND_LINE":{const r=qh([...e.consoleLines,$h(n.line,e.consoleLines.length)],e.maxConsoleLines);return{...e,consoleLines:r}}case"EVENT":return E_(e,n.event);default:return e}}function E_(e,n){const r=k_(n),i=typeof n.type=="string"?n.type:"",u=i.startsWith("build.")||i==="console.line"&&r.scope==="build"?iE(n):lE(n),d=qh([...e.consoleLines,$h(u,e.consoleLines.length)],e.maxConsoleLines),m=i==="build.phase.started"?{...e.buildPhases,[r.phase]:{status:"running",message:r.message}}:i==="build.phase.completed"?{...e.buildPhases,[r.phase]:{status:L0(r.status),durationMs:ah(r.duration_ms),message:r.message}}:e.buildPhases,x=i==="run.phase.started"?{...e.runPhases,[r.phase]:{status:"running",message:r.message}}:i==="run.phase.completed"?{...e.runPhases,[r.phase]:{status:L0(r.status),durationMs:ah(r.duration_ms),message:r.message}}:e.runPhases;let g=e.validationSummary;if(i==="run.validation.issue"){const N=ty(r),j=g?.issues??[];g={...g,issues:N?[...j,N]:j}}else i==="run.validation.summary"&&(g=T_(r,g));const b=i==="run.completed"?r:e.completedPayload,y=N_(e.status,i,r),w=e.runId??(typeof n.run_id=="string"?n.run_id:null),E=typeof r.mode=="string"?r.mode==="validation"?"validation":"extraction":e.runMode;return{...e,status:y,runId:w,runMode:E,buildPhases:m,runPhases:x,consoleLines:d,validationSummary:g,completedPayload:b}}function N_(e,n,r){switch(n){case"run.queued":return"queued";case"run.waiting_for_build":return"waiting_for_build";case"build.started":return"building";case"run.started":return"running";case"run.error":return e==="failed"?e:"failed";case"run.completed":return __(r.status);default:return e}}function io(e){return e==="queued"?"queued":e==="waiting_for_build"?"waiting_for_build":e==="cancelled"?"canceled":e==="building"?"building":e==="running"?"running":e==="succeeded"?"succeeded":e==="failed"?"failed":e==="canceled"?"canceled":"idle"}function ey(e){const n=io(e);return n==="queued"||n==="waiting_for_build"||n==="building"||n==="running"}function C_(e){const n=io(e);return n==="succeeded"||n==="failed"||n==="canceled"}function __(e){return e==="succeeded"?"succeeded":e==="failed"?"failed":e==="canceled"||e==="cancelled"?"canceled":e==="waiting_for_build"?"waiting_for_build":"running"}function L0(e){return e==="failed"?"failed":e==="skipped"?"skipped":e==="succeeded"?"succeeded":e==="running"?"running":"pending"}function k_(e){const n=e?.payload;return n&&typeof n=="object"?n:{}}function ty(e){const n=e.severity??e.level,r=n==="error"?"error":n==="warning"?"warning":"info",i=e.message??e.code??"Validation issue",c=e.path,u=e.code;return{level:r,message:i,path:c,code:u}}function T_(e,n){const r={...n??{}},i=e.issues;if(Array.isArray(i)){const c=i.map(u=>u&&typeof u=="object"?ty(u):null).filter(Boolean);r.issues=c}if("issues_total"in e){const c=ah(e.issues_total);typeof c=="number"&&(r.issues_total=c)}if("max_severity"in e){const c=R_(e.max_severity);c&&(r.max_severity=c)}if("content_digest"in e){const c=typeof e.content_digest=="string"?e.content_digest:null;c!==void 0&&(r.content_digest=c)}if("error"in e){const c=typeof e.error=="string"?e.error:null;r.error=c}return r}function D_(e,n){const r=e.validationSummary??(n?{issues:n}:null),i=e.runMode??(r?"validation":void 0);if(!i&&!r)return{status:"idle",messages:[],lastRunAt:void 0,error:null,digest:null};const c=io(e.status),u=ey(c),d=r?.issues??[],m=!!r?.error,x=typeof e.completedPayload?.completed_at=="string"&&e.completedPayload.completed_at||void 0;let g;u&&i==="validation"?g="running":m||c==="failed"||c==="canceled"?g="error":d.length>0||c==="succeeded"?g="success":g="idle";const b=g==="error"?r?.error??"Validation failed.":null;return{status:g,messages:d,lastRunAt:x??void 0,error:b,digest:r?.content_digest??null}}function qh(e,n){return e.length<=n?e.slice():e.slice(e.length-n)}function A_(e,n){return e.map((r,i)=>$h(r,i,n))}function $h(e,n,r="line"){if(e.id)return e;const i=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(16).slice(2),c=e.origin??"run",u=e.timestamp??"ts";return{...e,id:`${r}-${c}-${u}-${n}-${i}`}}function ah(e){if(!(typeof e!="number"||Number.isNaN(e)))return e}function R_(e){if(e==="error")return"error";if(e==="warning")return"warning";if(e==="info")return"info"}const M_={dry_run:!1,validate_only:!1,force_rebuild:!1};async function z_(e,n={},r){const i={configuration_id:e},u={options:{...M_,...n}},{data:d}=await Ze.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:i},body:u,signal:r});if(!d)throw new Error("Expected run creation response.");return d}async function*O_(e,n){const r=new DOMException("Aborted","AbortError"),i=[],c=[];let u=null,d=!1,m;const x=["ade.event","run.queued","run.started","run.completed","run.failed","run.canceled","run.waiting_for_build","build.queued","build.started","build.progress","build.phase.started","build.completed","build.failed","console.line"],g=()=>{for(;c.length;)c.shift()?.()},b=w=>{d||(d=!0,w&&(m=w),u&&(x.forEach(E=>{u?.removeEventListener?.(E,y)}),u.onmessage=null,u.onerror=null,u.close()),i.push(null),g())},y=w=>{try{const E=JSON.parse(w.data);i.push(E),g(),E.type==="run.completed"&&b()}catch(E){console.warn("Skipping malformed run event",E,w.data)}};u=new EventSource(e,{withCredentials:!0}),x.forEach(w=>{u?.addEventListener(w,y)}),u.onmessage=y,u.onerror=()=>{if(n?.aborted){b(r);return}d||b(new Error("Run event stream interrupted"))},n&&(n.aborted?b(r):n.addEventListener("abort",()=>b(r)));try{for(;;){i.length||await new Promise(E=>c.push(E));const w=i.shift();if(w===null){if(m)throw m;break}if(w){if(m)throw m;yield w}}}finally{b()}}function L_(e,n){const r=e.links?.events_stream??e.links?.events;if(!r)return null;const i=[];r.endsWith("/stream")||r.includes("stream=true")||i.push("stream=true");const u=i.length?i.join("&"):void 0;return U_(r,{appendQuery:u})}async function ny(e,n){const r=typeof e=="string"?await lo(e,n):e,i=r.links?.outputs,c=r.id;if(!i||!c)throw new Error("Run outputs link unavailable.");const{data:u,error:d}=await Ze.GET("/api/v1/runs/{run_id}/outputs",{params:{path:{run_id:c}},signal:n});if(d||!u)throw new Error("Run outputs unavailable");return u}async function sy(e,n){const r=typeof e=="string"?await lo(e,n):e,i=r.links?.logs,c=r.id;if(!i||!c)throw new Error("Run logs link unavailable.");const{data:u,error:d}=await Ze.GET("/api/v1/runs/{run_id}/logs",{params:{path:{run_id:c}},headers:{Accept:"application/x-ndjson"},signal:n,parseAs:"text"});if(d)throw new Error("Run telemetry unavailable");return(u??"").split(/\r?\n/).filter(Boolean).map(x=>{try{return JSON.parse(x)}catch(g){return console.warn("Skipping invalid telemetry line",{error:g,line:x}),null}}).filter(x=>!!x)}async function lo(e,n){const{data:r}=await Ze.GET("/api/v1/runs/{run_id}",{params:{path:{run_id:e}},signal:n});if(!r)throw new Error("Run not found");return r}async function ry(e,n){try{const{data:c}=await Ze.GET("/api/v1/runs/{run_id}/summary",{params:{path:{run_id:e}},signal:n});if(c)return c}catch(c){console.warn("Falling back to embedded run summary",c)}const i=(await lo(e,n))?.summary;if(!i)return null;if(typeof i=="string")try{return JSON.parse(i)}catch(c){return console.warn("Unable to parse run summary",{error:c}),null}return i}function ih(e){const n=e.links?.outputs;return n?au(n):null}function lh(e){const n=e.links?.logs;return n?au(n):null}function U_(e,n){const r=e.includes("?"),i=n?.appendQuery?`${e}${r?"&":"?"}${n.appendQuery}`:e;return au(i)}const Mc={detail:e=>["run",e],outputs:e=>["run-outputs",e],telemetry:e=>["run-telemetry",e],summary:e=>["run-summary",e]};function B_({configId:e,runId:n,onRunIdChange:r,seed:i,maxConsoleLines:c=400,onError:u}){const d=p.useMemo(()=>{const B=Jv(c,i?.console?[...i.console].slice(-c):void 0);return i?.validation?.length?{...B,runMode:"validation",validationSummary:{issues:[...i.validation]}}:B},[c,i?.console,i?.validation]),[m,x]=p.useReducer(j_,d),g=p.useRef(m),b=p.useRef(null),y=p.useRef(null),w=p.useRef(null),E=p.useRef(null),N=p.useRef(!1);p.useEffect(()=>{g.current=m},[m]);const j=p.useCallback(()=>{const B=E.current;B&&(B.abort(),E.current=null)},[]);p.useEffect(()=>{n===null&&(j(),b.current=null,y.current=null,w.current=null)},[n,j]);const _=p.useCallback(B=>x({type:"APPEND_LINE",line:B}),[x]),A=p.useCallback(()=>{x({type:"CLEAR_CONSOLE"})},[x]),D=p.useCallback(B=>{if(u){u(B);return}_({level:"error",message:q_(B),timestamp:Aa(new Date),origin:"run"})},[_,u]),R=p.useCallback(async(B,H)=>{j();const J=L_(B);if(!J)throw new Error("Run events link unavailable.");b.current=B,y.current=H??null,w.current=B.started_at??w.current??null,x({type:"ATTACH_RUN",runId:B.id,runMode:H?.mode});const ce=new AbortController;E.current=ce;try{for await(const Q of O_(J,ce.signal)){if(Q?.type==="run.started"){const de=Q?.payload??{},xe=typeof de.started_at=="string"?de.started_at:kh(Q);w.current=xe}x({type:"EVENT",event:Q})}}catch(Q){ce.signal.aborted||D(Q)}finally{E.current===ce&&(E.current=null)}},[D,j]),q=io(m.status),U=m.runMode??y.current?.mode,V=ey(q),$=p.useMemo(()=>D_(m,i?.validation),[m,i?.validation]),re=p.useCallback(async(B,H,J)=>{const Q=J?.forceRebuild??!1?{...B,force_rebuild:!0}:B;if(V||N.current||J?.prepare&&J.prepare()===!1)return null;const de=new Date;x({type:"RESET",runId:null,initialLines:[{level:"info",message:H.mode==="validation"?"Starting ADE run (validate-only)":"Starting ADE extraction",timestamp:Aa(de),origin:"run"}]}),N.current=!0;try{const xe=await z_(e,Q);return y.current=H,w.current=de.toISOString(),r?.(xe.id),await R(xe,H),{runId:xe.id,startedAt:de.toISOString()}}catch(xe){return D(xe),null}finally{N.current=!1}},[e,R,x,r,D,V]);return p.useEffect(()=>()=>{j()},[j]),{stream:m,runResource:b.current,runMetadata:y.current,runStartedAt:w.current,runStatus:q,runMode:U,runInProgress:V,validation:$,appendConsoleLine:_,clearConsole:A,startRun:re}}function q_(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unexpected error"}function $_({configId:e,runId:n,seed:r,maxConsoleLines:i,onRunIdChange:c,onRunComplete:u}){const{stream:d,runResource:m,runMetadata:x,runStartedAt:g,runStatus:b,runMode:y,runInProgress:w,validation:E,appendConsoleLine:N,clearConsole:j,startRun:_}=B_({configId:e,runId:n,onRunIdChange:c,seed:r,maxConsoleLines:i}),A=d.consoleLines,[D,R]=p.useState(null),q=p.useRef(null);p.useEffect(()=>{if(!n||!C_(b)||q.current===n)return;q.current=n;const V=d.completedPayload??{},$=V.failure,re=typeof $?.message=="string"?$.message.trim():null,B=typeof V.summary=="string"?V.summary.trim():null,H=typeof V.started_at=="string"?V.started_at:void 0,J=io(V.status??b),ce=J==="canceled"?"cancelled":J,Q=y??x?.mode??"extraction",de=H??m?.started_at??g??void 0,xe=V.completed_at??m?.completed_at??new Date().toISOString(),z=de?new Date(de):null,ee=xe?new Date(xe):new Date,K=z&&ee?Math.max(0,ee.getTime()-z.getTime()):void 0;u?.({runId:n,status:ce,mode:Q,startedAt:de??null,completedAt:ee.toISOString(),durationMs:K,payload:d.completedPayload}),Q!=="validation"&&(R(be=>{const ve=m?ih(m)??void 0:be?.outputsBase,C=m?lh(m)??void 0:be?.logsUrl;return{runId:n,status:ce,outputsBase:ve,logsUrl:C,documentName:x?.documentName,sheetNames:x?.sheetNames??[],outputs:[],outputsLoaded:!1,summary:null,summaryLoaded:!1,summaryError:null,telemetry:null,telemetryLoaded:!1,telemetryError:null,error:re??B??null,startedAt:de??null,completedAt:ee.toISOString(),durationMs:K}}),(async()=>{let be=m;if(!be)try{be=await lo(n)}catch(ve){R(C=>C&&C.runId===n?{...C,outputsLoaded:!0,summaryLoaded:!0,telemetryLoaded:!0,error:zc(ve)}:C)}if(be){const ve=ih(be)??void 0,C=lh(be)??void 0;R(I=>I&&I.runId===n?{...I,outputsBase:ve,logsUrl:C}:I);try{const I=await ny(be??n),M=(Array.isArray(I.files)?I.files:[]).map(F=>{const G=F.path;return{name:F.name??G??"output",path:G,byte_size:F.byte_size??0,download_url:F.download_url??void 0}});R(F=>F&&F.runId===n?{...F,outputs:M,outputsLoaded:!0}:F)}catch(I){R(ae=>ae&&ae.runId===n?{...ae,outputsLoaded:!0,error:zc(I)}:ae)}}try{const ve=await ry(n);R(C=>C&&C.runId===n?{...C,summary:ve,summaryLoaded:!0}:C)}catch(ve){R(C=>C&&C.runId===n?{...C,summaryLoaded:!0,summaryError:zc(ve)}:C)}try{const ve=await sy(n);R(C=>C&&C.runId===n?{...C,telemetry:ve,telemetryLoaded:!0}:C)}catch(ve){R(C=>C&&C.runId===n?{...C,telemetryLoaded:!0,telemetryError:zc(ve)}:C)}})())},[n,b,y,x,m,g,d.completedPayload,u]);const U=p.useCallback(async(V,$,re)=>{const B=await _(V,$,re);return B&&$.mode==="extraction"&&R(null),B},[_]);return p.useMemo(()=>({stream:d,runStatus:b,runMode:y,runInProgress:w,validation:E,consoleLines:A,latestRun:D,appendConsoleLine:N,clearConsole:j,startRun:U}),[d,b,y,w,E,A,D,N,j,U])}function zc(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unexpected error"}const ay=e=>`ade.ui.workspace.${e}.config-builder.last`;function Hh(e){return Ws(ay(e))}function Zh(e,n){if(n){const r={configId:n};return e.set(r),r}return e.clear(),null}const H_={min:200,max:420},Z_=320,F_=120,qf=140,V_=220,Q_=40,I_=400,U0=10,P_=56,B0="Panel closed to keep the editor readable on this screen size. Resize the window or collapse other panes to reopen it.",W_=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.tabs`,G_=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.console`,K_=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.editor-theme`,Y_=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.explorer.expanded`,X_=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.layout`,J_=[{value:"system",label:"System"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}],ek={explorer:"",search:"Search coming soon",scm:"Source Control coming soon",extensions:"Extensions coming soon"};function iy({workspaceId:e,configId:n,configName:r,seed:i,windowState:c,onMinimizeWindow:u,onMaximizeWindow:d,onRestoreWindow:m,onCloseWorkbench:x,shouldBypassUnsavedGuard:g}){const b=pt(),{fileId:y,pane:w,console:E,consoleExplicit:N,setFileId:j,setPane:_,setConsole:A}=kC(),[D,R]=p.useState(null),q=!!i,U=JC({workspaceId:e,configId:n,depth:"infinity",sort:"path",order:"asc",enabled:!q}),V=U.data?.fileset_hash??null,$=U.data?.status==="draft",re=p.useMemo(()=>Hh(e),[e]),B=p.useMemo(()=>i?i.tree:U.data?k0(U.data):null,[i,U.data]);p.useEffect(()=>{n&&(q||U.isSuccess)&&Zh(re,n)},[n,q,U.isSuccess,re]);const[H,J]=p.useState(null),ce=p.useCallback(P=>{J(P)},[]),Q=a_(e,n),de=p.useRef(null),[xe,z]=p.useState(null),[ee,K]=p.useState(!1),[be,ve]=p.useState(!1),{stream:C,runStatus:I,runMode:ae,runInProgress:M,validation:F,consoleLines:G,latestRun:te,appendConsoleLine:L,clearConsole:ie,startRun:me}=$_({configId:n,runId:D,seed:i,maxConsoleLines:I_,onRunIdChange:R,onRunComplete:ce}),[Te,Fe]=p.useState(!1),Se=p.useMemo(()=>i?null:Ws(W_(e,n)),[e,n,i]),_e=p.useMemo(()=>i?null:Ws(G_(e,n)),[e,n,i]),ne=p.useMemo(()=>Ws(X_(e,n)),[e,n]),Ee=p.useRef(null),Ue=RC(K_(e,n)),qe=Ue.resolvedTheme==="vs-light"?"light":"dark",tt=F.lastRunAt?`Last run ${xk(F.lastRunAt)}`:void 0,[k,W]=p.useState(()=>{const P=ne.get();return P?.explorer?{collapsed:!!P.explorer.collapsed,fraction:P.explorer.fraction??280/1200}:{collapsed:!1,fraction:280/1200}}),[le,Ce]=p.useState(null),we=p.useRef(null),[je,Ae]=p.useState(!1);p.useEffect(()=>{_e?Ee.current=_e.get()??null:Ee.current=null,we.current=null,Ce(null),Ae(!1)},[_e]);const[Pe,Ge]=p.useState({width:0,height:0}),[Nt,Ne]=p.useState(null),[ke,Ie]=p.useState("explorer"),[Dt,it]=p.useState(null),[Pt,Ct]=p.useState(null),[yr,Un]=p.useState(!1),[Ba,Ys]=p.useState(!1),[wr,_t]=p.useState(!1),[Mt,Ht]=p.useState(!1),[Wt,Zt]=p.useState(null),[dn,fn]=p.useState(null),[Bn,zt]=p.useState(null),{notifyBanner:qn,dismissScope:Cn}=b_(),hn=p.useMemo(()=>`workbench-console:${e}:${n}`,[e,n]),Gn=t_(e,n),Kn=n_(e,n),Dn=s_(e,n),Xe=p.useCallback((P,he)=>{qn({title:P,intent:he?.intent??"info",duration:he?.duration??6e3,dismissible:!0,scope:hn,persistKey:hn})},[qn,hn]),bn=p.useCallback(()=>{Cn(hn,"banner")},[Cn,hn]),at=p.useCallback(P=>{const he=gk(P);L({level:"error",message:he,timestamp:Aa(new Date),origin:"run"}),Xe(he,{intent:"danger",duration:null})},[L,Xe]),vn=p.useCallback(async()=>{K(!0);try{const P=await ZC(e,n),he=P.filename??`${n}.zip`,Re=URL.createObjectURL(P.blob),De=document.createElement("a");De.href=Re,De.download=he,De.click(),URL.revokeObjectURL(Re),Xe(`Exported ${he}`,{intent:"success",duration:4e3})}catch(P){at(P),Xe("Export failed. Try again in a moment.",{intent:"danger",duration:6e3})}finally{K(!1)}},[e,n,Xe,at]);p.useEffect(()=>{if(!H)return;const{runId:P,status:he,mode:Re,durationMs:De,payload:Ve,completedAt:Kt}=H,dt=Ve?.failure??void 0,Mn=typeof dt?.message=="string"?dt.message.trim():null,Yi=typeof Ve?.summary=="string"?Ve.summary.trim():null,_u=Mn||Yi||"ADE run failed.",Xi=he==="cancelled"||he==="canceled";if(Xe(he==="succeeded"?"ADE run completed successfully.":Xi?"ADE run canceled.":_u,{intent:he==="succeeded"?"success":Xi?"info":"danger"}),Re!=="validation"){const la=Kt?new Date(Kt):new Date;L({level:he==="succeeded"?"success":Xi?"warning":"error",message:typeof De=="number"&&De>0?`Run ${he} in ${ik(De)}. Open Run summary for details.`:`Run ${he}. Open Run summary for details.`,timestamp:Aa(la),origin:"run"})}J(la=>la&&la.runId===P?null:la)},[H,L,Xe,J]);const An=c==="maximized",$s=typeof navigator<"u"?/mac/i.test(navigator.platform):!1,vu=p.useCallback(()=>{x()},[x]),ho=!k.collapsed,mo=p.useCallback(async P=>{if(i)return{content:i.content[P]??"",etag:null};const he=await b.fetchQuery({queryKey:En.file(e,n,P),queryFn:({signal:Re})=>M0(e,n,P,Re)});if(!he)throw new Error("File could not be loaded.");return{content:$0(he),etag:he.etag??null}},[i,b,e,n]),He=SC({tree:B,initialActiveFileId:y,loadFile:mo,persistence:Se??void 0}),Sr=e_(e,n),Xs=p.useCallback(async P=>{if(q)return null;const he=await b.fetchQuery({queryKey:En.file(e,n,P),queryFn:({signal:De})=>M0(e,n,P,De)}),Re=$0(he);return He.replaceTabContent(P,{content:Re,etag:he.etag??null,metadata:{size:he.size??null,modifiedAt:he.mtime??null,contentType:he.content_type??He.tabs.find(De=>De.id===P)?.metadata?.contentType??null,etag:he.etag??null}}),he},[q,b,e,n,He]);DC({isDirty:He.isDirty,shouldBypassNavigation:g});const jr=p.useCallback(()=>{u()},[u]),ta=p.useCallback(()=>{An?m():d()},[An,d,m]),Gt=E!=="open",jt=p.useMemo(()=>He.tabs.filter(P=>P.status==="ready"&&P.content!==P.initialContent),[He.tabs]),po=He.tabs.some(P=>P.saving),Ns=!q&&jt.length>0;p.useEffect(()=>{typeof window>"u"||requestAnimationFrame(()=>{window.dispatchEvent(new Event("ade:workbench-layout"))})},[k.collapsed,k.fraction,Gt,le,An,w]);const $n=p.useCallback(async P=>{if(q)return!1;const he=He.tabs.find(Ve=>Ve.id===P);if(!he||he.status!=="ready"||he.content===he.initialContent||he.saving)return!1;const Re=he.content,De=he.etag??void 0;He.beginSavingTab(P);try{const Ve=await Sr.mutateAsync({path:he.id,content:Re,etag:De,create:!De,parents:!0}),Kt={size:Ve.size??he.metadata?.size??null,modifiedAt:Ve.mtime??he.metadata?.modifiedAt??null,contentType:he.metadata?.contentType??null,etag:Ve.etag??he.metadata?.etag??null};return He.completeSavingTab(P,{etag:Ve.etag??he.etag??null,metadata:Kt,savedContent:Re}),Xe(`Saved ${he.name}`,{intent:"success",duration:4e3}),!0}catch(Ve){const Kt=Ve instanceof Tn&&Ve.status===412,dt=Kt?new Error("Save blocked because this file changed on the server. Reloading latest version."):Ve;if(He.failSavingTab(P,dt instanceof Error?dt.message:String(dt)),Kt)try{await Xs(P),Xe("File reloaded with the latest version from the server. Review before saving again.",{intent:"warning",duration:6e3})}catch(Mn){at(Mn)}return at(dt),!1}},[q,He,Sr,Xe,Xs,at]),Cs=p.useCallback(async P=>{const he=[];for(const Re of P)await $n(Re)&&he.push(Re);return he},[$n]),qa=p.useCallback(async()=>{if(!Ns||jt.length===0)return!0;const he=(await Cs(jt.map(Re=>Re.id))).length===jt.length;return he||Xe("Save failed. Fix errors before running again.",{intent:"danger",duration:7e3}),he},[Ns,jt,Cs,Xe]),go=p.useCallback(P=>{$n(P)},[$n]),$a=p.useCallback(()=>{He.activeTab&&$n(He.activeTab.id)},[He.activeTab,$n]),yu=p.useCallback(()=>{if(!Ns)return;const P=jt.map(he=>he.id);(async()=>{const he=await Cs(P);he.length>1&&Xe(`Saved ${he.length} files`,{intent:"success",duration:5e3})})()},[Ns,jt,Cs,Xe]);p.useEffect(()=>{const P=Nt;if(!P||typeof window>"u")return;const he=()=>{const De=P.getBoundingClientRect(),Ve=De.width,Kt=De.height;Ge({width:Ve,height:Kt}),window.dispatchEvent(new Event("ade:workbench-layout"))};if(he(),typeof window.ResizeObserver>"u")return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he);const Re=new window.ResizeObserver(()=>he());return Re.observe(P),()=>Re.disconnect()},[Nt]);const _s=Gt?Z_:F_,Ut=p.useMemo(()=>{const P=Math.max(0,Pe.height),Re=Math.max(0,P-_s-U0),De=Math.min(qf,Re);return{container:P,minPx:De,maxPx:Re}},[Pe.height,_s]),ks=p.useCallback((P,he=Ut)=>ls(P,he.minPx,he.maxPx),[Ut]),an=p.useCallback(()=>{const P=Ee.current;return P&&"version"in P&&P.version===2&&typeof P.fraction=="number"?ls(P.fraction,0,1):P&&"height"in P&&typeof P.height=="number"&&Ut.container>0?ls(P.height/Ut.container,0,1):.25},[Ut.container]);p.useEffect(()=>{le===null&&Ut.container>0&&Ce(an())},[le,Ut.container,an]);const Ts=p.useCallback(()=>Ut.container>0&&Ut.maxPx<qf?(A("closed"),Xe(B0,{intent:"warning",duration:1e4}),!1):(bn(),A("open"),Ce(P=>P!==null?ls(P,0,1):we.current!==null?ls(we.current,0,1):an()),!0),[Ut,A,Xe,bn,an]),Hi=p.useCallback(()=>{we.current=le,A("closed"),bn()},[le,A,bn]);p.useEffect(()=>{if(je)return;const P=Ee.current?.state;if(N||!P){Ae(!0);return}(P==="open"||P==="closed")&&P!==E&&A(P),Ae(!0)},[N,E,A,je]),p.useEffect(()=>{!_e||Ba||le===null||_e.set({version:2,fraction:ls(le,0,1),state:E})},[_e,le,E,Ba]),p.useEffect(()=>{if(!(E!=="open"||!Ut.container)){if(Ut.maxPx<qf){A("closed"),Xe(B0,{intent:"warning",duration:1e4});return}Ce(P=>P===null?an():ls(P,0,1))}},[E,Ut,A,Xe,an]);const Ha=p.useCallback((P,he)=>{if(P<=0)return{minPx:he.min,maxPx:he.max,minFrac:0,maxFrac:1};const Re=Math.min(he.min,P),De=Math.min(he.max,P);return{minPx:Re,maxPx:De,minFrac:Re/P,maxFrac:De/P}},[]),cs=Math.max(0,Pe.width-P_),us=p.useMemo(()=>Ha(cs,H_),[cs,Ha]),Zi=p.useCallback((P,he)=>ls(P,he.minFrac,he.maxFrac),[]);p.useEffect(()=>{cs<=0||W(P=>{if(P.collapsed)return P;const he=Zi(P.fraction,us);return he===P.fraction?P:{...P,fraction:he}})},[cs,us,Zi]),p.useEffect(()=>{ne.set({version:2,explorer:{collapsed:k.collapsed,fraction:k.fraction}})},[ne,k]);const Rn=k.collapsed?0:ls(k.fraction,us.minFrac,us.maxFrac)*cs,Er=cs>0?Math.min(Rn,cs):Rn,Yn=Math.max(0,Ut.container),bo=(le??(Yn>0?ls(V_/Yn,0,1):.25))*Yn,Za=Yn>0?ks(bo):0,Js=U0,vo=Gt?Q_:Za,yo=Yn>0?Math.max(_s,Yn-Js-vo):_s;p.useEffect(()=>{const P=He.activeTabId;if(!P){j(void 0);return}j(P)},[He.activeTabId,j]),p.useEffect(()=>{!Wt||!B||Ss(B,Wt)&&(He.openFile(Wt),j(Wt),Zt(null))},[Wt,B,He,j]);const sa=p.useCallback(()=>Ts()?(_("terminal"),!0):!1,[Ts,_]),Fi=p.useCallback(async()=>{q||!B||U.isLoading||U.isError||!await qa()||await me({validate_only:!0},{mode:"validation"},{prepare:sa})},[q,B,U.isLoading,U.isError,qa,me,sa]),wu=p.useCallback(async P=>{if(Fe(!1),Un(!1),q||!B||U.isLoading||U.isError||!await qa())return;const Re=Array.from(new Set((P.sheetNames??[]).filter(Boolean)));me({input_document_id:P.documentId,input_sheet_names:Re.length?Re:void 0,input_sheet_name:Re.length===1?Re[0]:void 0},{mode:"extraction",documentId:P.documentId,documentName:P.documentName,sheetNames:Re},{forceRebuild:yr,prepare:sa})},[q,B,U.isLoading,U.isError,me,yr,sa,qa]);p.useEffect(()=>{if(typeof window>"u")return;const P=he=>{if(!($s?he.metaKey:he.ctrlKey)||he.altKey||he.key.toLowerCase()!=="s")return;const De=he.target;if(De){const Ve=De.tagName;if(Ve==="INPUT"||Ve==="TEXTAREA"||De.isContentEditable)return}Ns&&(he.preventDefault(),$a())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[$s,Ns,$a]);const wo=ae??(M?"extraction":void 0),er=M,Ds=F.status==="running"||er&&wo==="validation",Vi=!q&&!!B&&!U.isLoading&&!U.isError&&!er&&F.status!=="running",Qi=er&&wo!=="validation",As=!q&&!!B&&!U.isLoading&&!U.isError&&!er,Xn=!q&&!U.isLoading&&!U.isError,Fa=Xn&&!Gn.isPending,ra=Xn&&!Kn.isPending,Va=Xn&&!Dn.isPending,ds=$&&!q&&!Q.isPending&&!!V,Rs=p.useCallback(P=>{Ie(P),P==="explorer"&&W(he=>({...he,collapsed:!1}))},[]),Ii=p.useCallback(P=>{P.preventDefault();const he=P.currentTarget.getBoundingClientRect();it({x:he.right+8,y:he.top})},[]),aa=p.useCallback(P=>{z(P)},[]),Hs=p.useCallback(()=>it(null),[]),Jn=p.useCallback(()=>{Gt?Ts():Hi()},[Gt,Ts,Hi]);p.useEffect(()=>{if(typeof window>"u")return;const P=he=>{if(!($s?he.metaKey:he.ctrlKey)||he.altKey||he.key?.toLowerCase()!=="`"&&he.code!=="Backquote")return;const Ve=he.target;if(Ve&&!(typeof Ve.closest=="function"?Ve.closest("[data-editor-area]"):null)){const dt=Ve.tagName,Mn=Ve.getAttribute("role");if(dt==="INPUT"||dt==="TEXTAREA"||Mn==="textbox"||Ve.isContentEditable)return}he.preventDefault(),Jn()};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[$s,Jn]);const Qa=p.useCallback(()=>{ie()},[ie]),So=p.useCallback(()=>{te&&(Ts(),_("runSummary"))},[te,Ts,_]),Ia=p.useCallback(()=>{W(P=>({...P,collapsed:!P.collapsed}))},[]),Pa=p.useCallback(()=>{W(P=>({...P,collapsed:!0}))},[]),jo=p.useCallback(async(P,he)=>{const Re=he.trim();if(!Re)throw new Error("Enter a file name.");if(Re.includes(".."))throw new Error("File name cannot include '..'.");if(!Xn)throw new Error("Files are still loading.");const De=P.replace(/\/+$/,""),Ve=Re.replace(/^\/+/,"").replace(/\/+/g,"/"),dt=(De?`${De}/${Ve}`:Ve).replace(/\/+/g,"/");if(!dt||dt.endsWith("/"))throw new Error("Enter a valid file name.");if(B&&Ss(B,dt))throw new Error("A file or folder with that name already exists.");_t(!0);try{await Sr.mutateAsync({path:dt,content:"",parents:!0,create:!0}),Zt(dt),await U.refetch(),Xe(`Created ${dt}`,{intent:"success",duration:4e3})}catch(Mn){throw at(Mn),Mn instanceof Error?Mn:new Error("Unable to create file.")}finally{_t(!1)}},[Xn,B,Sr,U,Xe,at]),_n=p.useCallback(async(P,he)=>{const Re=he.trim();if(!Re)throw new Error("Enter a folder name.");if(Re.includes(".."))throw new Error("Folder name cannot include '..'.");if(!ra)throw new Error("Files are still loading.");const De=P.replace(/\/+$/,""),Ve=Re.replace(/^\/+/,"").replace(/\/+/g,"/"),dt=(De?`${De}/${Ve}`:Ve).replace(/\/+/g,"/").replace(/\/$/,"");if(!dt)throw new Error("Enter a valid folder name.");if(B&&Ss(B,dt))throw new Error("A file or folder with that name already exists.");Ht(!0);try{await Kn.mutateAsync({path:dt}),await U.refetch(),Xe(`Folder ready: ${dt}`,{intent:"success",duration:4e3})}catch(Mn){throw at(Mn),Mn instanceof Error?Mn:new Error("Unable to create folder.")}finally{Ht(!1)}},[ra,B,Kn,U,Xe,at]),tr=p.useCallback(async P=>{if(!Fa)throw new Error("Files are still loading.");const he=B?Ss(B,P):null;if(!B||!he)throw new Error("File not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete ${P}? This cannot be undone.`)){_t(!1),fn(P);try{await Gn.mutateAsync({path:P,etag:he.metadata?.etag}),He.closeTab(P),Zt(De=>De===P?null:De),await U.refetch(),Xe(`Deleted ${P}`,{intent:"info",duration:4e3})}catch(De){const Ve=De instanceof Tn&&De.status===428?"Delete blocked: missing latest file version. Reload the explorer and try again.":De instanceof Error?De.message:"Unable to delete file.";throw at(Ve),new Error(Ve)}finally{fn(De=>De===P?null:De)}}},[Fa,B,Gn,He,U,Xe,at,fn]),Wa=p.useCallback(async P=>{if(!Va)throw new Error("Files are still loading.");const he=B?Ss(B,P):null;if(!B||!he||he.kind!=="folder")throw new Error("Folder not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete folder ${P} and all contents? This cannot be undone.`)){zt(P);try{await Dn.mutateAsync({path:P,recursive:!0}),Zt(De=>De===P?null:De),He.closeTab(P),await U.refetch(),Xe(`Deleted folder ${P}`,{intent:"info",duration:4e3})}catch(De){const Ve=De instanceof Error?De.message:"Unable to delete folder.";throw at(Ve),new Error(Ve)}finally{zt(De=>De===P?null:De)}}},[Va,B,Dn,He,U,Xe,at,zt]),Nr=p.useCallback(()=>{if(!ds){Xe("Replace is only available for draft configurations.",{intent:"warning",duration:6e3}),z(null);return}z(null),ve(!0)},[ds,Xe]),Su=p.useCallback(async P=>{const he=P.target.files?.[0]??null;if(P.target.value="",!!he)try{await Q.mutateAsync({file:he,ifMatch:V}),Se?.clear?.(),He.closeAllTabs(),j(void 0);const De=(await U.refetch()).data??U.data??null,Ve=De?k0(De):null,Kt=Ve?Uh(Ve):null;Zt(Kt?.id??null),Xe("Configuration replaced from archive.",{intent:"success",duration:6e3})}catch(Re){const De=Re instanceof Tn&&Re.status===412?"Replace blocked: the configuration changed on the server. Reload and try again.":Re instanceof Tn&&Re.status===428?"Replace blocked: refresh the file list and try again.":Re instanceof Error?Re.message:"Unable to replace configuration.";at(De),Xe(De,{intent:"danger",duration:6e3})}},[Q,V,Se,He,U,j,Zt,Xe,at]),Pi=p.useMemo(()=>{const P=l.jsx("span",{className:"inline-block h-4 w-4 opacity-0"}),he=J_.map(Re=>({id:`theme-${Re.value}`,label:`${Re.label} theme`,icon:Ue.preference===Re.value?l.jsx($f,{}):P,onSelect:()=>Ue.setPreference(Re.value)}));return he.push({id:"toggle-explorer",label:k.collapsed?"Show Explorer":"Hide Explorer",dividerAbove:!0,icon:k.collapsed?P:l.jsx($f,{}),onSelect:()=>W(Re=>({...Re,collapsed:!Re.collapsed}))},{id:"toggle-console",label:Gt?"Show Console":"Hide Console",icon:Gt?P:l.jsx($f,{}),onSelect:Jn}),he},[Ue,k.collapsed,Gt,Jn]),Wi=p.useMemo(()=>[{id:"export",label:ee?"Exporting":"Export (.zip)",disabled:ee,onSelect:()=>{z(null),vn()}},{id:"replace",label:"Import from zip",disabled:!ds,onSelect:Nr}],[ds,vn,Nr,ee]);p.useEffect(()=>{if(typeof document>"u"||!An)return;const P=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=P||""}},[An]);const ia=bk(e),Ga=$s?"S":"Ctrl+S",Eo=$s?"`":"Ctrl+`",ju=p.useMemo(()=>{const P=!As;return[{id:"test-default",label:"Test",disabled:P,onSelect:()=>{Un(!1),Fe(!0),Ct(null)}},{id:"test-force",label:"Force build and test",disabled:P,onSelect:()=>{Un(!0),Fe(!0),Ct(null)}}]},[As,Un,Fe,Ct]);if(!i&&U.isLoading)return l.jsx(mt,{variant:"loading",title:"Loading configuration files",description:"Fetching workspace configuration files for the workbench."});if(!i&&U.isError)return l.jsx(mt,{variant:"error",title:"Unable to load configuration files",description:"Try reloading the page or check your connection."});if(!B)return l.jsx(mt,{variant:"empty",title:"No configuration files found",description:"Create files in the ADE configuration package to begin editing."});const Eu=An?qe==="dark"?"bg-[#0f111a] text-white":"bg-slate-50 text-slate-900":qe==="dark"?"bg-transparent text-white":"bg-transparent text-slate-900",Nu=qe==="dark"?"#1b1f27":"#ffffff",Gi=qe==="dark"?"#f5f6fb":"#0f172a",Cu=An?ge("fixed inset-0 z-[90] flex flex-col",qe==="dark"?"bg-[#0f111a] text-white":"bg-white text-slate-900"):ge("flex w-full min-h-0 min-w-0 flex-1 flex-col overflow-hidden",qe==="dark"?"bg-[#101322] text-white":"bg-white text-slate-900"),Ki=qe==="dark"?{bar:"border-[#1f2431] bg-[#0f111a] text-slate-200",hint:"text-slate-400",button:"border-[#2b3040] bg-[#161926] text-slate-100 hover:border-[#3b4153] hover:bg-[#1e2333]"}:{bar:"border-slate-300 bg-white text-slate-700",hint:"text-slate-500",button:"border-slate-300 bg-slate-50 text-slate-700 hover:border-slate-400"};return l.jsxs("div",{className:ge("flex h-full min-h-0 w-full min-w-0 flex-1 flex-col overflow-hidden",Eu),children:[An?l.jsx("div",{className:"fixed inset-0 z-40 bg-slate-900/60"}):null,l.jsxs("div",{className:Cu,children:[l.jsx(nk,{configName:r,workspaceLabel:ia,validationLabel:tt,canSaveFiles:Ns,isSavingFiles:po,onSaveFile:$a,saveShortcutLabel:Ga,onOpenTestMenu:P=>Ct(P),onOpenActionsMenu:aa,canRunValidation:Vi,isRunningValidation:Ds,onRunValidation:Fi,canRunExtraction:As,isRunningExtraction:Qi,onRunExtraction:P=>{As&&(Un(P),Fe(!0))},explorerVisible:ho,onToggleExplorer:Ia,consoleOpen:!Gt,onToggleConsole:Jn,appearance:qe,windowState:c,onMinimizeWindow:jr,onToggleMaximize:ta,onCloseWindow:vu,actionsBusy:ee||Q.isPending}),l.jsxs("div",{ref:Ne,className:"flex min-h-0 min-w-0 flex-1 overflow-hidden",children:[l.jsx(Jj,{activeView:ke,onSelectView:Rs,onOpenSettings:Ii,appearance:qe}),ho?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex min-h-0",style:{width:Er},children:ke==="explorer"&&He.tree?l.jsx(oC,{width:Er,tree:He.tree,activeFileId:He.activeTab?.id??"",openFileIds:He.tabs.map(P=>P.id),onSelectFile:P=>{He.openFile(P),j(P)},theme:qe,canCreateFile:Xn,canCreateFolder:ra,isCreatingEntry:wr||Mt,onCreateFile:jo,onCreateFolder:_n,canDeleteFile:Fa,canDeleteFolder:Va,deletingFilePath:dn,deletingFolderPath:Bn,onDeleteFile:tr,onDeleteFolder:Wa,expandedStorageKey:Y_(e,n),onHide:Pa}):l.jsx(tk,{width:Er,view:ke,appearance:qe})}),l.jsx(_0,{orientation:"vertical",onPointerDown:P=>{const he=P.clientX,Re=Er;R0(P,{cursor:"col-resize",onMove:De=>{const Ve=De.clientX-he,Kt=ls(Re+Ve,us.minPx,us.maxPx);W(dt=>dt.collapsed||cs<=0?dt:{...dt,fraction:Zi(Kt/cs,us)})}})}})]}):null,l.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",style:{backgroundColor:Nu,color:Gi},children:l.jsxs("div",{className:"grid min-h-0 min-w-0 flex-1",style:{height:Yn>0?`${Yn}px`:void 0,gridTemplateRows:`${Math.max(_s,yo)}px ${Js}px ${Math.max(0,vo)}px`},children:[l.jsx(rC,{tabs:He.tabs,activeTabId:He.activeTab?.id??"",onSelectTab:P=>{He.selectTab(P),j(P)},onCloseTab:He.closeTab,onCloseOtherTabs:He.closeOtherTabs,onCloseTabsToRight:He.closeTabsToRight,onCloseAllTabs:He.closeAllTabs,onContentChange:He.updateContent,onSaveTab:go,onSaveAllTabs:yu,onMoveTab:He.moveTab,onRetryTabLoad:He.reloadTab,onPinTab:He.pinTab,onUnpinTab:He.unpinTab,onSelectRecentTab:He.selectRecentTab,editorTheme:Ue.resolvedTheme,menuAppearance:qe,canSaveFiles:Ns,minHeight:_s}),l.jsx(_0,{orientation:"horizontal",onPointerDown:P=>{Ys(!0);const he=P.clientY,Re=Za;let De=!1;R0(P,{cursor:"row-resize",onMove:Ve=>{if(Gt&&!De&&(Ts(),De=!0),Ut.maxPx<=0||Yn<=0)return;const Kt=he-Ve.clientY,dt=ls(Re+Kt,Ut.minPx,Ut.maxPx);Ce(ls(dt/Yn,0,1))},onEnd:()=>{Ys(!1)}})},onDoubleClick:()=>{Gt?Ts():Hi()},onToggle:Jn,collapsed:Gt}),Gt?l.jsxs("div",{className:ge("flex cursor-pointer items-center justify-between border-t px-4 py-2 text-[12px] shadow-inner",Ki.bar),onDoubleClick:Jn,title:"Double-click to show console",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:"Console hidden"}),l.jsxs("span",{className:ge("text-[11px]",Ki.hint),children:["(double-click gutter or ",Eo,")"]})]}),l.jsx("button",{type:"button",onClick:Jn,className:ge("rounded px-3 py-1 text-[11px] font-semibold uppercase tracking-wide transition",Ki.button),title:"Show console",children:"Show console"})]}):l.jsx(IE,{height:Math.max(0,Za),consoleLines:G,validation:F,activePane:w,onPaneChange:_,latestRun:te,onShowRunDetails:So,onClearConsole:Qa,runStatus:I,buildPhases:C.buildPhases,runPhases:C.runPhases,runMode:ae,onToggleCollapse:Jn})]})})]})]}),Te?l.jsx(sk,{open:Te,workspaceId:e,onClose:()=>{Fe(!1),Un(!1)},onRun:wu}):null,l.jsx("input",{ref:de,type:"file",accept:".zip",onChange:Su,className:"hidden"}),be?l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"replace-config-title",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h2",{id:"replace-config-title",className:"text-lg font-semibold text-slate-900",children:"Import from zip"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Importing will replace this configurations current code with the uploaded archive. Unsaved editor changes will be discarded."}),ds?null:l.jsx("p",{className:"text-sm font-medium text-danger-600",children:"Only draft configurations can be replaced."}),He.isDirty?l.jsx("p",{className:"text-sm font-medium text-amber-700",children:"You have unsaved changes that will be lost."}):null]}),l.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[l.jsx(Oe,{variant:"secondary",onClick:()=>ve(!1),disabled:Q.isPending,children:"Cancel"}),l.jsx(Oe,{onClick:()=>{ve(!1),de.current?.click()},disabled:!ds||Q.isPending,isLoading:Q.isPending,children:"Continue"})]})]})}):null,l.jsx(Ai,{open:!!xe,position:xe,onClose:()=>z(null),items:Wi,appearance:qe}),l.jsx(Ai,{open:!!Pt,position:Pt,onClose:()=>Ct(null),items:ju,appearance:qe}),l.jsx(Ai,{open:!!Dt,position:Dt,onClose:Hs,items:Pi,appearance:qe})]})}function tk({width:e,view:n,appearance:r}){const i=ek[n]||"Coming soon",c=r==="dark"?"border-[#111111] bg-[#1e1e1e] text-slate-300":"border-slate-200 bg-slate-50 text-slate-600";return l.jsx("div",{className:ge("flex h-full min-h-0 flex-col items-center justify-center border-r px-4 text-center text-[11px] uppercase tracking-wide",c),style:{width:e},"aria-live":"polite",children:i})}function $f(){return l.jsx("svg",{className:"h-4 w-4 text-[#4fc1ff]",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 8l3 3 5-6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function nk({configName:e,workspaceLabel:n,validationLabel:r,canSaveFiles:i,isSavingFiles:c,onSaveFile:u,saveShortcutLabel:d,onOpenTestMenu:m,onOpenActionsMenu:x,canRunValidation:g,isRunningValidation:b,onRunValidation:y,canRunExtraction:w,isRunningExtraction:E,onRunExtraction:N,explorerVisible:j,onToggleExplorer:_,consoleOpen:A,onToggleConsole:D,appearance:R,windowState:q,onMinimizeWindow:U,onToggleMaximize:V,onCloseWindow:$,actionsBusy:re=!1}){const B=R==="dark",H=B?"border-white/10 bg-[#151821] text-white":"border-slate-200 bg-white text-slate-900",J=B?"text-white/60":"text-slate-500",ce=B?"bg-emerald-400/20 text-emerald-50 hover:bg-emerald-400/30 disabled:bg-white/10 disabled:text-white/30":"bg-emerald-500 text-white hover:bg-emerald-400 disabled:bg-slate-200 disabled:text-slate-500",Q=B?"bg-brand-500 text-white hover:bg-brand-400 disabled:bg-white/20 disabled:text-white/40":"bg-brand-600 text-white hover:bg-brand-500 disabled:bg-slate-200 disabled:text-slate-500",de=q==="maximized";return l.jsxs("div",{className:ge("flex items-center justify-between border-b px-4 py-2",H),children:[l.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[l.jsx(lk,{}),l.jsxs("div",{className:"min-w-0 leading-tight",children:[l.jsx("div",{className:ge("text-[10px] font-semibold uppercase tracking-[0.35em]",J),children:"Config Workbench"}),l.jsx("div",{className:"truncate text-sm font-semibold",title:e,children:e}),l.jsxs("div",{className:ge("text-[11px]",J),title:n,children:["Workspace  ",n]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[r?l.jsx("span",{className:ge("text-xs",J),children:r}):null,l.jsxs("button",{type:"button",onClick:u,disabled:!i,className:ge("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",ce),title:`Save (${d})`,children:[c?l.jsx(Hf,{}):l.jsx(pk,{}),c?"Saving":"Save"]}),l.jsxs("button",{type:"button",onClick:y,disabled:!g,className:ge("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",Q),children:[b?l.jsx(Hf,{}):l.jsx(q0,{}),b?"Running":"Run validation"]}),l.jsx(OC,{label:E?"Running":"Test run",icon:E?l.jsx(Hf,{}):l.jsx(q0,{}),disabled:!w,isLoading:E,title:"Run test run",primaryClassName:ge(Q,"rounded-r-none focus-visible:ring-offset-0"),menuClassName:ge(Q,"rounded-l-none px-2",B?"border-white/20":"border-slate-300"),menuAriaLabel:"Open test options",onPrimaryClick:()=>N(!1),onOpenMenu:xe=>m(xe),onContextMenu:xe=>{xe.preventDefault(),m({x:xe.clientX,y:xe.clientY})}}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ni,{ariaLabel:j?"Hide explorer":"Show explorer",onClick:_,appearance:R,active:j,icon:l.jsx(ok,{active:j})}),l.jsx(Ni,{ariaLabel:A?"Hide console":"Show console",onClick:D,appearance:R,active:A,icon:l.jsx(ck,{})})]}),l.jsx(Ni,{ariaLabel:"Configuration actions",onClick:xe=>{const z=xe.currentTarget.getBoundingClientRect();x({x:z.right+8,y:z.bottom})},appearance:R,disabled:re,icon:l.jsx(mk,{})}),l.jsxs("div",{className:ge("flex items-center gap-2 border-l pl-3",R==="dark"?"border-white/20":"border-slate-200/70"),children:[l.jsx(Ni,{ariaLabel:"Minimize workbench",onClick:U,appearance:R,icon:l.jsx(fk,{})}),l.jsx(Ni,{ariaLabel:de?"Restore workbench":"Maximize workbench",onClick:V,appearance:R,active:de,icon:de?l.jsx(dk,{}):l.jsx(uk,{})}),l.jsx(Ni,{ariaLabel:"Close workbench",onClick:$,appearance:R,icon:l.jsx(hk,{})})]})]})]})}function sk({open:e,workspaceId:n,onClose:r,onRun:i}){const c=p.useRef(null),u=xn({queryKey:["builder-documents",n],queryFn:({signal:R})=>rk(n,R),staleTime:6e4,enabled:e}),d=p.useMemo(()=>u.data??[],[u.data]),[m,x]=p.useState("");p.useEffect(()=>{if(e){if(!d.length){x("");return}x(R=>R&&d.some(q=>q.id===R)?R:d[0]?.id??"")}},[d,e]);const g=d.find(R=>R.id===m)??null,b=xn({queryKey:["builder-document-sheets",n,m],queryFn:({signal:R})=>Pv(n,m,R),enabled:e&&!!m,staleTime:6e4}),y=p.useMemo(()=>b.data??[],[b.data]),[w,E]=p.useState([]);p.useEffect(()=>{if(e){if(!y.length){E([]);return}E(R=>R.filter(q=>y.some(U=>U.name===q)))}},[e,y]);const N=p.useMemo(()=>Array.from(new Set(w.filter(R=>y.some(q=>q.name===R)))),[w,y]),j=p.useCallback(R=>{E(q=>q.includes(R)?q.filter(U=>U!==R):[...q,R])},[]);if(!e)return null;const _=!g||u.isLoading||u.isError,A=y.length>0,D=l.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:l.jsxs("div",{ref:c,role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-2xl",children:[l.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Select a document"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Choose a workspace document and optional worksheet before running a test."})]}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:r,children:"Close"})]}),u.isError?l.jsx(St,{tone:"danger",children:"Unable to load documents. Try again later."}):u.isLoading?l.jsx("p",{className:"text-sm text-slate-500",children:"Loading documents"}):d.length===0?l.jsx("p",{className:"text-sm text-slate-500",children:"Upload a document in the workspace to run the extractor."}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"builder-run-document-select",children:"Document"}),l.jsx(Ra,{id:"builder-run-document-select",value:m,onChange:R=>x(R.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm",children:d.map(R=>l.jsx("option",{value:R.id,children:R.name},R.id))}),g?l.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",ak(g.created_at)," "," ",(g.byte_size??0).toLocaleString()," bytes"]}):null]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheet"}),b.isLoading?l.jsx("p",{className:"text-sm text-slate-500",children:"Loading worksheets"}):b.isError?l.jsx(St,{tone:"warning",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>b.refetch(),disabled:b.isFetching,children:"Retry loading"}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>E([]),children:"Use all worksheets"})]})]})}):A?l.jsxs("div",{className:"space-y-3 rounded-lg border border-slate-200 p-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheets"}),l.jsx("p",{className:"text-xs text-slate-500",children:N.length===0?"All worksheets will be processed by default. Select specific sheets to narrow the run.":`${N.length.toLocaleString()} worksheet${N.length===1?"":"s"} selected.`})]}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>E([]),children:"Use all worksheets"})]}),l.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:y.map(R=>{const q=N.includes(R.name);return l.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:q,onChange:()=>j(R.name)}),l.jsxs("span",{className:"flex-1 truncate",children:[R.name,R.is_active?" (active)":""]})]},`${R.index}-${R.name}`)})})]}):l.jsx("p",{className:"text-sm text-slate-500",children:"This file will be ingested directly."})]})]}),l.jsxs("footer",{className:"mt-6 flex items-center justify-end gap-2",children:[l.jsx(Oe,{variant:"ghost",onClick:r,children:"Cancel"}),l.jsx(Oe,{onClick:()=>{g&&i({documentId:g.id,documentName:g.name,sheetNames:N.length>0?N:void 0})},disabled:_,children:"Start test run"})]})]})});return typeof document>"u"?null:br.createPortal(D,document.body)}async function rk(e,n){const{data:r}=await Ze.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:{sort:"-created_at",page_size:50}},signal:n});return r?.items??[]}function ak(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function Ni({ariaLabel:e,onClick:n,icon:r,appearance:i,active:c=!1,disabled:u=!1}){const d=i==="dark",m=d?"text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20 focus-visible:ring-white/40":"text-slate-500 hover:text-slate-900 hover:bg-slate-100 hover:border-slate-300 focus-visible:ring-slate-400/40",x=d?"text-white border-white/30 bg-white/10":"text-slate-900 border-slate-300 bg-slate-200/70";return l.jsx("button",{type:"button","aria-label":e,onClick:n,disabled:u,className:ge("flex h-7 w-7 items-center justify-center rounded-[4px] border border-transparent text-sm transition focus-visible:outline-none focus-visible:ring-2",m,c&&x,u&&"cursor-not-allowed opacity-50"),title:e,children:r})}function ik(e){if(e==null||!Number.isFinite(e)||e<0)return null;if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function lk(){return l.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#4fc1ff] via-[#2d7dff] to-[#7c4dff] text-white shadow-lg shadow-[#10121f]",children:l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none",children:[l.jsx("rect",{x:"2",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"2",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"})]})})}function ok({active:e}){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"3",y:"4",width:"14",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6}),l.jsx("path",{d:"M7 4v12",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6})]})}function ck(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M3 10.5h10",stroke:"currentColor",strokeWidth:"1.2"})]})}function uk(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1.5",stroke:"currentColor",strokeWidth:"1.2"})})}function dk(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 4h6v6",stroke:"currentColor",strokeWidth:"1.2"})]})}function fk(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4 11h8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function hk(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M5 5l6 6M11 5l-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function Hf(){return l.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"currentColor",strokeWidth:"2",opacity:"0.35"}),l.jsx("path",{d:"M20 12a8 8 0 0 0-8-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function q0(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4.5 3.5v9l7-4.5-7-4.5Z",fill:"currentColor"})})}function mk(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("circle",{cx:"3",cy:"8",r:"1.3",fill:"currentColor"}),l.jsx("circle",{cx:"8",cy:"8",r:"1.3",fill:"currentColor"}),l.jsx("circle",{cx:"13",cy:"8",r:"1.3",fill:"currentColor"})]})}function pk(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4 2.5h7.25L13.5 4.8v8.7H4z",stroke:"currentColor",strokeWidth:"1.3",strokeLinejoin:"round",fill:"none"}),l.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function gk(e){return e instanceof Tn?e.message:e instanceof DOMException&&e.name==="AbortError"?"Operation canceled.":e instanceof Error?e.message:String(e)}function xk(e){if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function bk(e){return e.length<=12?e:`${e.slice(0,6)}${e.slice(-4)}`}function $0(e){if(e.encoding==="base64"){const n=globalThis.Buffer;if(n)return n.from(e.content,"base64").toString("utf-8");if(typeof atob=="function")try{const r=atob(e.content),i=new Uint8Array(r.length);for(let u=0;u<r.length;u+=1)i[u]=r.charCodeAt(u);if(typeof TextDecoder<"u")return new TextDecoder("utf-8",{fatal:!1}).decode(i);let c="";for(let u=0;u<i.length;u+=1)c+=String.fromCharCode(i[u]);return c}catch{}}return e.content}function vk(e){return`ade.ui.workspace.${e}.workbench.returnPath`}const ly=p.createContext(null);function oy(){const e=p.useContext(ly);if(!e)throw new Error("useWorkbenchWindow must be used within a WorkbenchWindowProvider");return e}function yk({workspaceId:e,children:n}){const r=Nn(),i=js(),[c,u]=p.useState(null),[d,m]=p.useState("restored"),x=p.useRef(0),g=p.useRef(null),b=p.useRef(!1),y=p.useMemo(()=>Ws(vk(e)),[e]),w=p.useMemo(()=>`/workspaces/${e}/config-builder`,[e]),E=p.useMemo(()=>Ck(i.pathname,e),[i.pathname,e]),N=!!E;p.useEffect(()=>{y.get()||y.set(w)},[y,w]),p.useEffect(()=>{N||y.set(`${i.pathname}${i.search}${i.hash}`)},[N,i.pathname,i.search,i.hash,y]),p.useEffect(()=>{if(!c){g.current=null;return}const H=g.current;if(N&&E===c.configId){if(H==="dock"){g.current=null,m("minimized");return}H&&(g.current=null);return}if(H==="dock"){g.current=null;return}if(H==="close"){g.current=null;return}u(null),m("restored"),g.current=null},[c,N,E,d]),p.useEffect(()=>{if(!c||!N||E!==c.configId)return;const H=Z0(i.search);H!==c.editorSearch&&u(J=>!J||J.instanceId!==c.instanceId?J:{...J,editorSearch:H})},[c,N,E,i.search]);const j=p.useCallback(()=>y.get()??w,[y,w]),_=p.useCallback(H=>{u(J=>{if(!J)return J;const ce=new URLSearchParams(J.editorSearch),Q=typeof H=="function"?H(new URLSearchParams(ce)):H,xe=Vv(Q).toString();return xe===J.editorSearch?J:{...J,editorSearch:xe}})},[]),A=p.useCallback(H=>{const J=Z0(H.editorSearch??i.search);let ce=d==="minimized";u(Q=>{if(Q&&Q.workspaceId===H.workspaceId&&Q.configId===H.configId){const de=H.seed??Q.seed,xe=H.editorSearch!==void 0?J:Q.editorSearch;return Q.configName===H.configName&&Q.seed===de&&Q.editorSearch===xe?Q:{...Q,configName:H.configName,seed:de,editorSearch:xe}}return ce=!0,x.current+=1,{...H,editorSearch:J,instanceId:`${H.workspaceId}:${H.configId}:${x.current}`}}),ce&&m("restored")},[i.search,d]),D=p.useCallback(()=>{c&&(u(null),m("restored"),g.current="close",r(j()))},[c,r,j]),R=p.useCallback(()=>{c&&(b.current=!0,m("minimized"),g.current="dock",r(j()))},[c,r,j]),q=p.useCallback(()=>{if(!c)return;m("restored");const H=_k(c.workspaceId,c.configId,c.editorSearch);`${i.pathname}${i.search}`!==H&&r(H)},[c,r,i.pathname,i.search]),U=p.useCallback(()=>{c&&m("maximized")},[c]),V=p.useCallback(()=>{const H=b.current;return b.current=!1,H},[]),$=p.useMemo(()=>({session:c,windowState:d,openSession:A,closeSession:D,minimizeWindow:R,maximizeWindow:U,restoreWindow:q,shouldBypassUnsavedGuard:V}),[c,d,A,D,R,U,q,V]),re=!!c&&(!N||E!==c?.configId),B=p.useMemo(()=>re&&c?{params:new URLSearchParams(c.editorSearch),setSearchParams:_}:null,[re,c,_]);return l.jsxs(ly.Provider,{value:$,children:[n,l.jsx(jC,{value:B,children:l.jsx(wk,{session:c,windowState:d,onClose:D,onMinimize:R,onMaximize:U,onRestore:q,shouldBypassUnsavedGuard:V})}),c&&d==="minimized"?l.jsx(Sk,{configName:c.configName,onRestore:q,onDismiss:D}):null]})}function wk({session:e,windowState:n,onClose:r,onMinimize:i,onMaximize:c,onRestore:u,shouldBypassUnsavedGuard:d}){return!e||n!=="maximized"?null:l.jsx("div",{className:"fixed inset-0 z-40 flex flex-col bg-slate-50",children:l.jsx(iy,{workspaceId:e.workspaceId,configId:e.configId,configName:e.configName,seed:e.seed,windowState:"maximized",onCloseWorkbench:r,onMinimizeWindow:i,onMaximizeWindow:c,onRestoreWindow:u,shouldBypassUnsavedGuard:d},e.instanceId)})}function Sk({configName:e,onRestore:n,onDismiss:r}){return l.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40",children:l.jsx("div",{className:"pointer-events-auto border-t border-slate-200 bg-white/95 shadow-[0_-12px_40px_rgba(15,23,42,0.15)] backdrop-blur",children:l.jsxs("div",{className:"relative mx-auto flex h-14 max-w-6xl items-center px-4 text-slate-900",children:[l.jsxs("button",{type:"button",onClick:n,className:"group flex min-w-0 flex-1 items-center gap-4 rounded-md px-3 py-1.5 text-left transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-slate-200 bg-slate-50 text-brand-600 shadow-inner",children:l.jsx(jk,{})}),l.jsxs("span",{className:"flex min-w-0 flex-col leading-tight",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-slate-400",children:"Config workbench"}),l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",title:e,children:e})]}),l.jsx("span",{className:"ml-auto inline-flex items-center rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-600 transition group-hover:border-slate-300 group-hover:bg-slate-50",children:"Restore"})]}),l.jsxs("div",{className:"ml-3 flex h-10 overflow-hidden rounded-md border border-slate-200 bg-white text-slate-500",children:[l.jsx(H0,{ariaLabel:"Restore minimized workbench",onClick:n,destructive:!1,children:l.jsx(Ek,{})}),l.jsx(H0,{ariaLabel:"Close minimized workbench",onClick:r,destructive:!0,children:l.jsx(Nk,{})})]})]})})})}function H0({ariaLabel:e,onClick:n,children:r,destructive:i=!1}){return l.jsx("button",{type:"button","aria-label":e,onClick:n,className:ge("flex h-full w-12 items-center justify-center transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",i?"text-rose-600 hover:bg-rose-50":"text-slate-500 hover:bg-slate-100 hover:text-slate-900"),children:r})}function jk(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"})]})}function Ek(){return l.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:l.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"})})}function Nk(){return l.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[l.jsx("path",{d:"M4.5 11.5 11.5 4.5",stroke:"currentColor",strokeWidth:"1.2"}),l.jsx("path",{d:"M11.5 11.5 4.5 4.5",stroke:"currentColor",strokeWidth:"1.2"})]})}function Ck(e,n){const r=`/workspaces/${n}/config-builder/`;if(!e.startsWith(r))return null;const i=e.slice(r.length).split("/").filter(Boolean);if(i.length>=2&&i[1]==="editor")try{return decodeURIComponent(i[0])}catch{return i[0]}return null}function _k(e,n,r){const i=`/workspaces/${e}/config-builder/${encodeURIComponent(n)}/editor`;return r.length>0?`${i}?${r}`:i}function Z0(e){return e?e.startsWith("?")?e.slice(1):e:""}function cy({id:e,value:n,defaultValue:r="",placeholder:i="Search",ariaLabel:c,shortcutHint:u="K",shortcutKey:d="k",enableShortcut:m=!0,scopeLabel:x,leadingIcon:g,trailingIcon:b,className:y,variant:w="default",isLoading:E=!1,loadingLabel:N="Loading suggestions",filters:j,onSelectFilter:_,emptyState:A,onChange:D,onSubmit:R,onClear:q,onFocus:U,onBlur:V,suggestions:$=[],onSelectSuggestion:re,renderSuggestion:B}){const H=p.useId(),J=e??H,ce=`${H}-suggestions`,Q=p.useRef(null),de=n!==void 0,[xe,z]=p.useState(r),[ee,K]=p.useState(!1),[be,ve]=p.useState(0),C=de?n??"":xe,I=$.length>0,ae=!!j?.length,M=ee&&(I||E||!!A||ae),F=ee&&!I&&!E&&!!A,G=!!(q||!de),te=u||"K",L=c??i;p.useEffect(()=>{de||z(r)},[r,de]),p.useEffect(()=>{ve(0)},[$.length,C]),p.useEffect(()=>{if(!m||typeof window>"u")return;const ne=Ee=>{(Ee.metaKey||Ee.ctrlKey)&&Ee.key.toLowerCase()===d.toLowerCase()&&(Ee.preventDefault(),Q.current?.focus())};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[m,d]);const ie=ne=>{ne.preventDefault();const Ee=C.trim();!Ee&&!R||R?.(Ee)},me=ne=>{de||z(ne),D?.(ne)},Te=()=>{C&&(de||z(""),D?.(""),q?.(),Q.current?.focus())},Fe=ne=>{ne&&(re?.(ne),ne.action?.(),K(!1),Q.current?.blur())},Se=ne=>{if(!M||!I){ne.key==="Escape"&&(K(!1),ne.currentTarget.blur());return}if(ne.key==="ArrowDown"){ne.preventDefault(),ve(Ee=>(Ee+1)%$.length);return}if(ne.key==="ArrowUp"){ne.preventDefault(),ve(Ee=>(Ee-1+$.length)%$.length);return}if(ne.key==="Enter"){ne.preventDefault(),Fe($[be]);return}ne.key==="Escape"&&(ne.preventDefault(),K(!1),ne.currentTarget.blur())},_e=w==="minimal"?"rounded-lg border border-slate-200 bg-white shadow-sm focus-within:border-brand-200":"rounded-xl border border-slate-200/70 bg-gradient-to-r from-white/95 via-slate-50/80 to-white/95 shadow-[0_20px_45px_-30px_rgba(15,23,42,0.65)] ring-1 ring-inset ring-white/80 transition focus-within:border-brand-200 focus-within:shadow-[0_25px_55px_-35px_rgba(79,70,229,0.55)] sm:rounded-2xl";return l.jsxs("div",{className:ge("relative",y),children:[l.jsx("div",{className:ge("group/search overflow-hidden",_e,M&&w==="default"&&"focus-within:shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)]"),children:l.jsxs("form",{className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-slate-600 sm:px-5 sm:py-2.5",role:"search","aria-label":L,onSubmit:ie,children:[l.jsx("label",{htmlFor:J,className:"sr-only",children:L}),g??l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/90 text-brand-600 shadow-inner shadow-white/60 ring-1 ring-inset ring-white/70 sm:h-10 sm:w-10 sm:rounded-xl",children:l.jsx(Tk,{className:"h-4 w-4 flex-shrink-0 text-brand-600"})}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[x?l.jsx("span",{className:"text-[0.6rem] font-semibold uppercase tracking-wide text-slate-400 sm:text-[0.65rem]",children:x}):null,l.jsx("input",{ref:Q,id:J,type:"search",value:C,onChange:ne=>me(ne.target.value),onFocus:()=>{K(!0),U?.(),I||ve(0)},onBlur:()=>{K(!1),V?.()},onKeyDown:Se,placeholder:i,className:"w-full border-0 bg-transparent text-base font-medium text-slate-900 placeholder:text-slate-400 focus:outline-none","aria-expanded":M,"aria-controls":M?ce:void 0})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[G&&C?l.jsx("button",{type:"button",onClick:Te,"aria-label":"Clear search",className:"focus-ring inline-flex h-7 w-7 items-center justify-center rounded-full border border-transparent text-slate-400 hover:border-slate-200 hover:bg-white",children:l.jsx(Dk,{className:"h-3.5 w-3.5"})}):null,E?l.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center","aria-live":"polite","aria-label":N,children:l.jsx(Ak,{className:"h-4 w-4 text-brand-600"})}):null,b,l.jsx("span",{className:"hidden items-center gap-1 rounded-full border border-slate-200/80 bg-white/80 px-2 py-1 text-xs font-semibold text-slate-500 shadow-inner shadow-white/60 md:inline-flex",children:te})]})]})}),M?l.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-2 overflow-hidden rounded-2xl border border-slate-200/70 bg-white/95 shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)] ring-1 ring-inset ring-white/80",children:[I?l.jsx("ul",{id:ce,role:"listbox","aria-label":"Search suggestions",className:"divide-y divide-slate-100/80",children:$.map((ne,Ee)=>{const Ue=Ee===be,qe=B?.({suggestion:ne,active:Ue})??l.jsx(kk,{suggestion:ne,active:Ue});return l.jsx("li",{children:l.jsx("button",{type:"button",role:"option","aria-selected":Ue,onMouseEnter:()=>ve(Ee),onMouseDown:tt=>tt.preventDefault(),onClick:()=>Fe(ne),className:ge("flex w-full px-5 py-3 text-left transition",Ue?"bg-brand-50/60":"hover:bg-slate-50/80"),children:qe})},ne.id)})}):null,F?l.jsx("div",{className:"px-5 py-4 text-sm text-slate-500",role:"status",children:A}):null,ae?l.jsx("div",{className:"border-t border-slate-100/80 bg-slate-50/60 px-4 py-2.5",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-slate-500",children:[l.jsx("span",{className:"uppercase tracking-wide text-[0.6rem] text-slate-400",children:"Filters:"}),j?.map(ne=>l.jsx("button",{type:"button",onMouseDown:Ee=>Ee.preventDefault(),onClick:()=>_?.(ne),className:ge("focus-ring inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-semibold transition",ne.active?"border-brand-300 bg-brand-50 text-brand-700":"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:ne.label},ne.id))]})}):null]}):null]})}function kk({suggestion:e,active:n}){return l.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.icon?l.jsx("span",{className:"mt-0.5 text-slate-400",children:e.icon}):l.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-slate-200","aria-hidden":!0}),l.jsxs("span",{className:"flex min-w-0 flex-col",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.label}),e.shortcutHint?l.jsx("span",{className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-slate-400",children:e.shortcutHint}):null]}),e.description?l.jsx("span",{className:ge("text-xs",n?"text-brand-700":"text-slate-500"),children:e.description}):null]})]})}function Tk({className:e="h-4 w-4 flex-shrink-0 text-slate-400"}){return l.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("circle",{cx:"9",cy:"9",r:"5",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"m13.5 13.5 3 3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Dk({className:e="h-3.5 w-3.5"}){return l.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function Ak({className:e="h-4 w-4"}){return l.jsxs("svg",{className:ge("animate-spin",e),viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-20",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),l.jsx("path",{className:"opacity-70",d:"M22 12a10 10 0 0 0-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function uy({brand:e,leading:n,actions:r,trailing:i,search:c,secondaryContent:u}){const d=!!c,m=c?{...c,className:ge("order-last w-full lg:order-none lg:max-w-2xl lg:justify-self-center",c.className)}:void 0;return l.jsx("header",{className:"sticky top-0 z-40 border-b border-slate-200/70 bg-gradient-to-b from-white/95 via-slate-50/70 to-white/90 shadow-[0_12px_40px_-30px_rgba(15,23,42,0.8)] backdrop-blur supports-[backdrop-filter]:backdrop-blur-xl",children:l.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3 sm:px-6 lg:px-10",children:[l.jsxs("div",{className:ge("flex min-h-[3.5rem] w-full flex-wrap items-center gap-3 sm:gap-4",d?"lg:grid lg:grid-cols-[auto_minmax(0,1fr)_auto] lg:items-center lg:gap-8":"justify-between"),children:[l.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3 lg:flex-none",children:[e,n]}),m?l.jsx(cy,{...m}):null,l.jsxs("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2 sm:flex-none",children:[r,i]})]}),u?l.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u}):null]})})}function dy({displayName:e,email:n,actions:r=[]}){const[i,c]=p.useState(!1),[u,d]=p.useState(!1),m=p.useRef(null),x=p.useRef(null),g=Nn(),b=p.useMemo(()=>Rk(e||n),[e,n]),y=p.useCallback(()=>c(!1),[]);p.useEffect(()=>{if(!i)return;const N=_=>{const A=_.target;A&&(x.current?.contains(A)||m.current?.contains(A)||y())},j=_=>{_.key==="Escape"&&y()};return window.addEventListener("mousedown",N),window.addEventListener("touchstart",N,{passive:!0}),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",N),window.removeEventListener("touchstart",N),window.removeEventListener("keydown",j)}},[y,i]),p.useEffect(()=>{if(!i)return;x.current?.querySelector("button[data-menu-item]")?.focus({preventScroll:!0})},[i]);const w=p.useCallback(N=>{y(),N()},[y]),E=p.useCallback(async()=>{u||(y(),d(!0),g("/logout",{replace:!0}))},[y,u,g]);return l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:m,type:"button",className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-2.5 py-1.5 text-left text-sm font-semibold text-slate-700 shadow-sm transition hover:border-slate-300 hover:text-slate-900","aria-haspopup":"menu","aria-expanded":i,onClick:()=>c(N=>!N),children:[l.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-sm font-semibold text-white shadow-sm",children:b}),l.jsxs("span",{className:"hidden min-w-0 flex-col sm:flex",children:[l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:e}),l.jsx("span",{className:"truncate text-xs text-slate-400",children:n})]}),l.jsx(zk,{className:ge("text-slate-400 transition-transform",i&&"rotate-180")})]}),i?l.jsxs("div",{ref:x,role:"menu",className:"absolute right-0 z-50 mt-2 w-72 origin-top-right rounded-xl border border-slate-200 bg-white p-2 text-sm shadow-xl",children:[l.jsxs("div",{className:"px-2 pb-2",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Signed in as"}),l.jsx("p",{className:"truncate text-xs text-slate-500",children:n})]}),l.jsx("ul",{className:"space-y-1",role:"none",children:r.map(N=>l.jsx("li",{role:"none",children:l.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>w(N.onSelect),children:[l.jsx("span",{className:"inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100 text-xs font-semibold text-slate-500",children:N.icon??N.label.charAt(0).toUpperCase()}),l.jsxs("span",{className:"flex min-w-0 flex-col",children:[l.jsx("span",{className:"truncate",children:N.label}),N.description?l.jsx("span",{className:"truncate text-xs font-normal text-slate-400",children:N.description}):null]})]})},N.id))}),l.jsx("div",{className:"mt-2 border-t border-slate-200 pt-2",children:l.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"focus-ring flex w-full items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 transition hover:border-brand-200 hover:text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",onClick:E,disabled:u,children:[l.jsx("span",{children:"Sign out"}),u?l.jsx(Mk,{}):null]})})]}):null]})}function Rk(e){const n=e.split(" ").map(r=>r.trim()).filter(Boolean);return n.length===0?"":n.length===1?n[0].charAt(0).toUpperCase():`${n[0].charAt(0)}${n[n.length-1].charAt(0)}`.toUpperCase()}function Mk(){return l.jsx("svg",{className:"h-4 w-4 animate-spin text-brand-600",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:l.jsx("path",{d:"M10 3a7 7 0 1 1-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}function zk({className:e}){return l.jsx("svg",{className:ge("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:l.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}function oh({to:e,replace:n,className:r,title:i,children:c,onClick:u}){const d=Nn();return l.jsx("a",{href:e,className:r,title:i,onClick:m=>{u?.(m),!(m.defaultPrevented||m.metaKey||m.ctrlKey||m.shiftKey||m.altKey)&&(m.preventDefault(),d(e,{replace:n}))},children:c})}function Ok({to:e,end:n,className:r,children:i,title:c,onClick:u}){const{pathname:d}=js(),m=n?d===e:d===e||d.startsWith(`${e}/`),x=typeof r=="function"?r({isActive:m}):r,g=typeof i=="function"?i({isActive:m}):i;return l.jsx(oh,{to:e,className:x,title:c,onClick:u,children:g})}function oo(e){return function({title:r,...i}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":r?void 0:!0,role:r?"img":"presentation",...i,children:[r?l.jsx("title",{children:r}):null,l.jsx("path",{d:e})]})}}const Lk=oo("M7 3h7l7 7v11a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2ZM14 3v5a1 1 0 0 0 1 1h5"),Uk=oo("M5 6h14M5 12h14M5 18h8M7 4v4M12 10v4M15 16v4"),Bk=oo("M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM16.5 12a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5ZM10 7.5h4M7.5 10v4M15.5 10.5 12 14"),qk=oo("M5 7h14M5 17h14M9 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm10 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-7-5h7m-9 0H5"),$k=oo("M4 10.5 12 4l8 6.5V19a1 1 0 0 1-1 1h-4v-5h-6v5H5a1 1 0 0 1-1-1v-8.5Z"),fy=[{id:"documents",path:"documents",label:"Documents",icon:Lk},{id:"runs",path:"runs",label:"Runs",icon:Uk},{id:"config-builder",path:"config-builder",label:"Config Builder",icon:Bk},{id:"settings",path:"settings",label:"Workspace Settings",icon:qk}],Mi=fy[0];function hy(e){return fy.map(n=>({id:n.id,label:n.label,href:`/workspaces/${e.id}/${n.path}`,icon:n.icon}))}const Hk="4.25rem",Zk="18.75rem";function Fk({workspace:e,collapsed:n,onToggleCollapse:r,items:i,onGoToWorkspaces:c}){const u=i??hy(e),d=Ik(e.name);return l.jsx("aside",{className:"hidden h-screen flex-shrink-0 bg-gradient-to-b from-slate-50/80 via-white to-slate-50/60 px-3 py-4 transition-[width] duration-200 ease-out lg:flex",style:{width:n?Hk:Zk},"aria-label":"Primary workspace navigation","aria-expanded":!n,children:l.jsxs("div",{className:ge("flex h-full w-full flex-col rounded-[1.7rem] border border-white/70 bg-white/90 shadow-[0_25px_60px_-40px_rgba(15,23,42,0.7)] ring-1 ring-slate-100/60 backdrop-blur-sm",n?"items-center gap-4 px-2 py-5":"gap-5 px-4 py-6"),children:[l.jsxs("div",{className:ge("flex w-full items-center gap-3 rounded-2xl border border-white/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-3 py-4 text-sm font-semibold text-slate-700 shadow-inner shadow-white/60",n?"flex-col text-center text-xs":""),children:[l.jsxs("button",{type:"button",onClick:c,className:"flex flex-1 items-center gap-3 text-left",children:[l.jsx("span",{className:ge("inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 text-sm font-bold uppercase text-white shadow-[0_10px_25px_-10px_rgba(79,70,229,0.7)]",n&&"h-9 w-9 text-xs"),children:d}),n?l.jsx("span",{className:"sr-only",children:e.name}):l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"truncate",children:e.name}),l.jsx("p",{className:"text-xs font-normal text-slate-500",children:"Switch workspace"})]})]}),l.jsx("button",{type:"button",onClick:r,className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-transparent text-slate-500 hover:border-brand-200 hover:text-brand-600","aria-label":n?"Expand navigation":"Collapse navigation",children:n?l.jsx(Qk,{}):l.jsx(Vk,{})})]}),l.jsx("nav",{className:"mt-4 flex-1 overflow-y-auto pr-1","aria-label":"Workspace sections",children:l.jsx(my,{items:u,collapsed:n})})]})})}function my({items:e,collapsed:n=!1,onNavigate:r,className:i,showHeading:c=!0}){return l.jsxs(l.Fragment,{children:[c&&!n?l.jsx("p",{className:"mb-3 px-1 text-[0.63rem] font-semibold uppercase tracking-[0.4em] text-slate-400/90",children:"Workspace"}):null,l.jsx("ul",{className:ge("flex flex-col gap-1.5",n?"items-center":void 0,i),role:"list",children:e.map(u=>l.jsx("li",{className:"w-full",children:l.jsx(Ok,{to:u.href,end:!0,title:n?u.label:void 0,onClick:r,className:({isActive:d})=>ge("group relative flex w-full items-center rounded-2xl border border-transparent text-sm font-medium text-slate-600 transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white/80",n?"h-11 justify-center px-0":"gap-3 px-3 py-2.5",d?"border-brand-100 bg-white/90 text-slate-900 shadow-[0_12px_30px_-20px_rgba(79,70,229,0.55)]":"border-transparent hover:border-slate-200 hover:bg-white/70"),children:({isActive:d})=>l.jsxs(l.Fragment,{children:[l.jsx("span",{"aria-hidden":!0,className:ge("absolute left-1.5 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-brand-400 to-brand-500 opacity-0 transition-opacity duration-150",n&&"hidden",d?"opacity-100":"group-hover:opacity-60")}),l.jsx("span",{"aria-hidden":!0,className:ge("flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-slate-100 text-slate-500 transition",n&&"h-9 w-9 rounded-lg",d?"bg-brand-50 text-brand-600":"group-hover:bg-slate-100/80"),children:l.jsx(u.icon,{className:ge("h-5 w-5 flex-shrink-0 transition-colors duration-150",d?"text-brand-600":"text-slate-500")})}),l.jsx("div",{className:ge("flex min-w-0 flex-col text-left",n&&"sr-only"),children:l.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:u.label})})]})})},u.id))})]})}function Vk(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:l.jsx("path",{d:"M12.5 6 9 10l3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function Qk(){return l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:l.jsx("path",{d:"m7.5 6 3.5 4-3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function Ik(e){const n=e.trim().split(/\s+/);return n.length===0?"WS":n.slice(0,2).map(i=>i[0]??"").join("").toUpperCase()}async function py(e={}){const{data:n}=await Ze.GET("/api/v1/system/safe-mode",{signal:e.signal}),r=n??{},i=!!r.enabled,c=typeof r.detail=="string"&&r.detail.trim().length>0?r.detail.trim():Ps;return{enabled:i,detail:c}}async function Pk(e,n={}){return await Ze.PUT("/api/v1/system/safe-mode",{body:e,signal:n.signal}),py(n)}const Ps="ADE safe mode enabled; skipping engine execution until ADE_SAFE_MODE is disabled.",ch=["system","safe-mode"];function Fh(){const n=pt().getQueryData(ch);return xn({queryKey:ch,queryFn:({signal:r})=>py({signal:r}),initialData:n,staleTime:3e4,refetchInterval:6e4})}function Wk(){const e=pt();return sn({mutationFn:n=>Pk(n),onSuccess:n=>{e.setQueryData(ch,n)}})}const Gk="K",Kk="Ctrl+K";function gy({macLabel:e=Gk,windowsLabel:n=Kk}={}){const[r,i]=p.useState(e);return p.useEffect(()=>{if(typeof window>"u")return;const c=window.navigator.platform??"",u=/Mac|iPhone|iPad|Macintosh/.test(c);i(u?e:n)},[e,n]),r}function Yk(){return l.jsxs("section",{children:[l.jsx("h1",{className:"text-xl font-semibold",children:"Workspace Overview"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: add workspace summary widgets."})]})}const Xk=100;function xy({workspaceId:e,enabled:n=!0,page:r=1,pageSize:i=Xk}){return xn({queryKey:En.list(e,{page:r,pageSize:i}),queryFn:({signal:c})=>qC(e,{page:r,pageSize:i,signal:c}),enabled:n&&e.length>0,staleTime:15e3,placeholderData:c=>c})}function by({workspaceId:e,configurationId:n,enabled:r=!0}){return xn({queryKey:En.detail(e,n??""),queryFn:({signal:i})=>n?$C(e,n,i):Promise.resolve(null),enabled:r&&e.length>0&&!!n,staleTime:1e4})}function Jk(e){const n=pt();return sn({mutationFn:r=>KC(e,r),async onSuccess(){await n.invalidateQueries({queryKey:En.root(e)})}})}function vy(e,n){return p.useMemo(()=>{if(!e||e.length===0)return[];const r=[],i=new Map;for(const c of e){const u=Array.isArray(c.items)?c.items:[];for(const d of u){const m=n(d),x=i.get(m);if(x===void 0){i.set(m,r.length),r.push(d);continue}r[x]=d}}return r},[e,n])}const yy={uploaded:"Uploaded",processing:"Processing",processed:"Processed",failed:"Failed",archived:"Archived"},e5=["-created_at","created_at","-last_run_at","last_run_at","-byte_size","byte_size","name","-name","status","-status","source","-source"],Vl="mine",Na={mine:{label:"My uploads",description:"Documents you uploaded",uploader:"me"},team:{label:"All documents",description:"Everything in this workspace"},attention:{label:"Needs attention",description:"Failed or processing files",presetStatuses:["failed","processing"]},recent:{label:"Recently run",description:"Latest run activity",presetSort:"-last_run_at"}};function t5(e){return e&&Object.keys(Na).includes(e)?e:Vl}function n5(e){if(!e)return new Set;const r=e.split(",").map(i=>i.trim()).filter(Boolean).filter(i=>["uploaded","processing","processed","failed","archived"].includes(i));return new Set(r)}function s5(e){return new Set(e5).has(e??"")?e:"-created_at"}const wy=new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),zi={all:()=>["documents"],workspace:e=>[...zi.all(),e],list:(e,n,r)=>[...zi.workspace(e),"list",{sort:n,uploader:r}]},Sy=50;function r5(){const{workspace:e}=Xr(),n=Oa(),[r,i]=Bh(),c=p.useRef(i);p.useEffect(()=>{c.current=i},[i]);const u=t5(r.get("view")),[d,m]=p.useState(u),[x,g]=p.useState(()=>{const Ne=r.get("status");if(Ne)return n5(Ne);const ke=Na[u].presetStatuses??[];return new Set(ke)}),[b,y]=p.useState(()=>{const Ne=r.get("sort");return Ne?s5(Ne):Na[u].presetSort??"-created_at"}),[w,E]=p.useState(r.get("q")??""),[N,j]=p.useState(w.trim()),_=p.useMemo(()=>Array.from(x),[x]),D=Na[d].uploader??null,R=p.useRef(null),[q,U]=p.useState(new Set),V=p.useMemo(()=>new Set(q),[q]),$=p.useMemo(()=>Array.from(V),[V]),re=V.size,B=i5(e.id),H=l5(e.id),J=Fh(),ce=J.data?.enabled??!1,Q=J.data?.detail??Ps,de=J.isPending,[xe,z]=p.useState(null),[ee,K]=p.useState(null),[be,ve]=p.useState(null),C=B.isPending,I=H.isPending,ae=a5(e.id,{sort:b,uploader:D}),{refetch:M}=ae,F=p.useCallback(Ne=>Ne.id,[]),G=vy(ae.data?.pages,F),te=p.useMemo(()=>{const Ne=N.toLowerCase(),ke=D==="me"?n.user.id:null,Ie=D==="me"?n.user.email??null:null;return G.filter(Dt=>{if(_.length>0&&!_.includes(Dt.status))return!1;if(D==="me"){const it=Dt.uploader_id??Dt.uploader?.id??null,Pt=Dt.uploader?.email??null;if(ke&&it&&it!==ke||!it&&Ie&&Pt&&Pt!==Ie)return!1}return!(Ne&&!`${Dt.name??""} ${Dt.source??""}`.toLowerCase().includes(Ne))})},[N,G,n.user.email,n.user.id,_,D]),L=ae.isFetchingNextPage,ie=ae.isFetching&&!L,me=te.length;p.useEffect(()=>{const Ne=r.get("q")??"";E(Ie=>Ie===Ne?Ie:Ne);const ke=Ne.trim();j(Ie=>Ie===ke?Ie:ke)},[r]),p.useEffect(()=>{const Ne=new URLSearchParams;x.size>0&&Ne.set("status",Array.from(x).join(",")),b!=="-created_at"&&Ne.set("sort",b),N&&Ne.set("q",N),d!==Vl&&Ne.set("view",d),c.current(Ne,{replace:!0})},[x,b,N,d]),p.useEffect(()=>{const Ne=window.setTimeout(()=>j(w.trim()),250);return()=>window.clearTimeout(Ne)},[w]),p.useEffect(()=>{U(Ne=>{if(Ne.size===0)return Ne;const ke=new Set,Ie=new Set(te.map(it=>it.id));let Dt=!1;for(const it of Ne)Ie.has(it)?ke.add(it):Dt=!0;return Dt?ke:Ne})},[te]);const Te=p.useMemo(()=>{for(const Ne of te)if(V.has(Ne.id))return Ne;return null},[te,V]),Fe=p.useCallback(Ne=>{const ke=Na[Ne];m(Ne),g(new Set(ke.presetStatuses??[])),y(ke.presetSort??"-created_at"),E(""),j("")},[]),Se=p.useCallback(Ne=>{g(ke=>{const Ie=new Set(ke);return Ie.has(Ne)?Ie.delete(Ne):Ie.add(Ne),Ie})},[]),_e=p.useCallback(()=>{g(new Set)},[]);p.useEffect(()=>{const Ne=ke=>{if((ke.metaKey||ke.ctrlKey)&&ke.key.toLowerCase()==="u"){ke.preventDefault(),R.current?.click();return}(ke.key==="Delete"||ke.key==="Backspace")&&re>0&&(ke.preventDefault(),le())};return window.addEventListener("keydown",Ne),()=>window.removeEventListener("keydown",Ne)},[re]);const ne=p.useCallback(Ne=>yy[Ne]??Ne,[]),Ee=p.useCallback(Ne=>l.jsx(A5,{document:Ne}),[]),Ue=p.useCallback(()=>{R.current?.click()},[]),qe=p.useCallback(async Ne=>{if(Ne.length){z(null);try{await B.mutateAsync({files:Ne})}catch(ke){const Ie=ke instanceof Error?ke.message:"Failed to upload documents.";z({tone:"error",message:Ie})}}},[B]),tt=async Ne=>{const ke=Array.from(Ne.target.files??[]);await qe(ke),Ne.target.value=""},k=Ne=>{U(ke=>{const Ie=new Set(ke);return Ie.has(Ne)?Ie.delete(Ne):Ie.add(Ne),Ie})},W=()=>{U(Ne=>{if(te.length===0)return new Set;const ke=te.map(Ie=>Ie.id);return Ne.size===te.length&&ke.every(Ie=>Ne.has(Ie))?new Set:new Set(ke)})},le=p.useCallback(async()=>{const Ne=$;if(Ne.length){z(null);try{await H.mutateAsync({documentIds:Ne}),U(new Set)}catch(ke){const Ie=ke instanceof Error?ke.message:"Failed to delete documents.";z({tone:"error",message:Ie})}}},[H,$]),Ce=p.useCallback(async Ne=>{z(null);try{await H.mutateAsync({documentIds:[Ne.id]}),U(ke=>{const Ie=new Set(ke);return Ie.delete(Ne.id),Ie})}catch(ke){const Ie=ke instanceof Error?ke.message:"Failed to delete document.";z({tone:"error",message:Ie})}},[H]),we=p.useCallback(async Ne=>{try{K(Ne.id);const{blob:ke,filename:Ie}=await d5(e.id,Ne.id);O5(ke,Ie??Ne.name)}catch(ke){const Ie=ke instanceof Error?ke.message:"Failed to download document.";z({tone:"error",message:Ie})}finally{K(null)}},[e.id]),je=p.useCallback(Ne=>{ve(Ne)},[]),Ae=p.useCallback(()=>{M()},[M]),Pe=p.useCallback(Ne=>{z({tone:"error",message:Ne})},[]),Ge=()=>{m(Vl),E(""),j(""),g(new Set),y("-created_at")},Nt=d===Vl&&x.size===0&&b==="-created_at"&&!N;return l.jsxs(l.Fragment,{children:[l.jsx(_5,{workspaceName:e.name??void 0,disabled:C,onFiles:async Ne=>{await qe(Ne)}}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{ref:R,type:"file",accept:".csv,.pdf,.tsv,.xls,.xlsx,.xlsm,.xlsb",multiple:!0,className:"hidden",onChange:tt}),l.jsx(h5,{workspaceName:e.name,totalDocuments:me,view:d,onChangeView:Fe,sort:b,onSort:y,onReset:Ge,isFetching:ae.isFetching,isDefault:Nt,onUploadClick:Ue,uploadDisabled:C,selectedStatuses:x,onToggleStatus:Se,onClearStatuses:_e}),xe?l.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",role:"alert",children:xe.message}):null,l.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white text-sm text-slate-700",children:ae.isLoading?l.jsx("div",{className:"p-4",children:l.jsx(k5,{})}):ae.isError?l.jsx("p",{className:"p-4 text-rose-600",children:"Failed to load documents."}):te.length===0?l.jsx("div",{className:"p-6",children:l.jsx(D5,{onUploadClick:Ue})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto p-2 sm:p-3",children:l.jsx(g5,{documents:te,selectedIds:V,onToggleDocument:k,onToggleAll:W,disableSelection:ie||I||B.isPending,disableRowActions:H.isPending,formatStatusLabel:ne,onDeleteDocument:Ce,onDownloadDocument:we,onRunDocument:je,downloadingId:ee,renderRunStatus:Ee,safeModeEnabled:ce,safeModeMessage:Q,safeModeLoading:de})}),ae.hasNextPage?l.jsx("div",{className:"flex justify-center border-t border-slate-200 bg-slate-50/60 px-3 py-2",children:l.jsx(Oe,{type:"button",variant:"ghost",onClick:()=>ae.fetchNextPage(),disabled:L,children:L?"Loading more documents":"Load more documents"})}):null]})})]}),l.jsx(T5,{count:re,onClear:()=>U(new Set),onRun:()=>{Te&&!ce&&!de&&je(Te)},onDelete:le,busy:I,safeModeEnabled:ce,safeModeMessage:Q,safeModeLoading:de}),l.jsx(N5,{open:!!be,workspaceId:e.id,documentRecord:be,onClose:()=>ve(null),onRunSuccess:Ae,onRunError:Pe,safeModeEnabled:ce,safeModeMessage:Q,safeModeLoading:de})]})}function a5(e,n){const r=n.sort.trim()||null;return Vb({queryKey:zi.list(e,r,n.uploader??null),initialPageParam:1,queryFn:({pageParam:i,signal:c})=>u5(e,{sort:r,page:typeof i=="number"?i:1,pageSize:Sy},c),getNextPageParam:i=>i.has_next?i.page+1:void 0,enabled:e.length>0,placeholderData:i=>i,staleTime:15e3})}function i5(e){const n=pt();return sn({mutationFn:async({files:r})=>{const i=Array.from(r);for(const c of i)await Ze.POST("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e}},body:{file:""},bodySerializer:()=>{const u=new FormData;return u.append("file",c),u}})},onSuccess:()=>{n.invalidateQueries({queryKey:zi.workspace(e)})}})}function l5(e){const n=pt();return sn({mutationFn:async({documentIds:r})=>{await Promise.all(r.map(i=>Ze.DELETE("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:i}}})))},onSuccess:()=>{n.invalidateQueries({queryKey:zi.workspace(e)})}})}function o5(e){const n=pt();return sn({mutationFn:async({configId:r,options:i})=>{const{data:c}=await Ze.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:{configuration_id:r}},body:{options:i}});if(!c)throw new Error("Expected run payload.");return c},onSuccess:()=>{n.invalidateQueries({queryKey:zi.workspace(e)})}})}function c5(e,n){const r=p.useMemo(()=>Ws(`ade.workspace.${e}.document_runs`),[e]),[i,c]=p.useState(()=>F0(r,n));p.useEffect(()=>{c(F0(r,n))},[r,n]);const u=p.useCallback(d=>{c(d);const m=r.get()??{};r.set({...m,[n]:{configId:d.configId,sheetNames:d.sheetNames&&d.sheetNames.length>0?[...d.sheetNames]:null}})},[r,n]);return{preferences:i,setPreferences:u}}async function u5(e,n,r){const i={sort:n.sort??void 0,page:n.page>0?n.page:1,page_size:n.pageSize>0?n.pageSize:Sy,include_total:!1},{data:c}=await Ze.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:i},signal:r});if(!c)throw new Error("Expected document page payload.");return c}async function d5(e,n){const{data:r,response:i}=await Ze.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/download",{params:{path:{workspace_id:e,document_id:n}},parseAs:"blob"});if(!r)throw new Error("Expected document download payload.");const c=f5(i.headers.get("content-disposition"))??`document-${n}`;return{blob:r,filename:c}}function f5(e){if(!e)return null;const n=e.match(/filename\*=UTF-8''([^;]+)/i);if(n?.[1])try{return decodeURIComponent(n[1])}catch{return n[1]}return e.match(/filename="?([^";]+)"?/i)?.[1]??null}function F0(e,n){const r=e.get();if(r&&typeof r=="object"&&n in r){const i=r[n];if(i&&typeof i=="object"){const c=[];if("sheetName"in i){const m=i.sheetName;typeof m=="string"&&c.push(m)}const d=(Array.isArray(i.sheetNames)?i.sheetNames.filter(m=>typeof m=="string"&&m.length>0):null)??(c.length>0?c:null);return{configId:i.configId??null,sheetNames:d}}}return{configId:null,sheetNames:null}}function h5({workspaceName:e,totalDocuments:n,view:r,onChangeView:i,sort:c,onSort:u,onReset:d,isFetching:m,isDefault:x,onUploadClick:g,uploadDisabled:b,selectedStatuses:y,onToggleStatus:w,onClearStatuses:E}){const N=typeof n=="number"?`${n.toLocaleString()} files`:e?`Uploads and runs for ${e}`:"Manage workspace uploads and runs";return l.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/95 p-3 sm:p-4",role:"region","aria-label":"Documents header and filters",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("h1",{className:"truncate text-lg font-semibold text-slate-900 sm:text-xl",children:e?`${e} documents`:"Documents"}),l.jsx("p",{className:"text-xs text-slate-500",children:N})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("button",{type:"button",onClick:d,disabled:x,className:ge("rounded border border-transparent px-3 py-1 text-sm font-medium",x?"cursor-default text-slate-300":"text-slate-600 hover:border-slate-200 hover:bg-slate-50 hover:text-slate-900"),children:"Reset"}),l.jsx(Oe,{className:"shrink-0",onClick:g,disabled:b,isLoading:b,"aria-label":"Upload documents",children:"Upload"})]})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[l.jsx(m5,{view:r,onChange:i}),l.jsx(p5,{selectedStatuses:y,onToggleStatus:w,onClearStatuses:E}),l.jsxs(Ra,{value:c,onChange:j=>u(j.target.value),className:"w-40","aria-label":"Sort documents",children:[l.jsx("option",{value:"-created_at",children:"Newest first"}),l.jsx("option",{value:"created_at",children:"Oldest first"}),l.jsx("option",{value:"-last_run_at",children:"Recent runs"}),l.jsx("option",{value:"last_run_at",children:"Least recently run"}),l.jsx("option",{value:"-byte_size",children:"Largest files"}),l.jsx("option",{value:"byte_size",children:"Smallest files"}),l.jsx("option",{value:"name",children:"Name AZ"}),l.jsx("option",{value:"-name",children:"Name ZA"})]}),l.jsxs("span",{className:ge("ml-auto inline-flex items-center gap-1 text-[11px] text-slate-500",m?"opacity-100":"opacity-0"),role:"status","aria-live":"polite",children:[l.jsx("span",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-slate-400"}),"Updating"]})]})]})}function m5({view:e,onChange:n}){return l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(Na).map(r=>{const i=Na[r],c=r===e;return l.jsx("button",{type:"button",onClick:()=>n(r),className:ge("rounded-full px-3 py-1 text-xs font-medium transition",c?"bg-brand-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-900"),title:i.description,children:i.label},r)})})}function p5({selectedStatuses:e,onToggleStatus:n,onClearStatuses:r}){const[i,c]=p.useState(!1),u=p.useRef(null),d=Object.entries(yy),m=e.size>0,x=m?`${e.size} ${e.size===1?"status":"statuses"}`:"All statuses";return p.useEffect(()=>{if(!i)return;const g=b=>{u.current&&!u.current.contains(b.target)&&c(!1)};return window.addEventListener("mousedown",g),()=>window.removeEventListener("mousedown",g)},[i]),l.jsxs("div",{className:"relative",ref:u,children:[l.jsxs("button",{type:"button",onClick:()=>c(g=>!g),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 shadow-sm hover:border-slate-300","aria-haspopup":"true","aria-expanded":i,children:["Status: ",x,l.jsx(j5,{className:"h-3 w-3"})]}),i?l.jsxs("div",{className:"absolute z-30 mt-2 w-60 rounded-xl border border-slate-200 bg-white p-3 text-sm shadow-xl",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-500",children:[l.jsx("span",{children:"Status filters"}),l.jsx("button",{type:"button",onClick:()=>{r(),c(!1)},className:ge("text-[11px]",m?"text-slate-500 underline underline-offset-4":"text-slate-300"),children:"Clear"})]}),l.jsx("ul",{className:"space-y-1 text-xs text-slate-600",children:d.map(([g,b])=>{const y=e.has(g);return l.jsx("li",{children:l.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1 hover:bg-slate-50",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:()=>n(g),className:"h-3.5 w-3.5 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),l.jsx("span",{className:"truncate",children:b})]})},g)})}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>c(!1),children:"Done"})})]}):null]})}function g5({documents:e,selectedIds:n,onToggleDocument:r,onToggleAll:i,disableSelection:c=!1,disableRowActions:u=!1,formatStatusLabel:d,onDeleteDocument:m,onDownloadDocument:x,onRunDocument:g,downloadingId:b=null,renderRunStatus:y,safeModeEnabled:w=!1,safeModeMessage:E,safeModeLoading:N=!1}){const j=p.useRef(null),{allSelected:_,someSelected:A}=p.useMemo(()=>{if(e.length===0)return{allSelected:!1,someSelected:!1};const D=e.reduce((R,q)=>n.has(q.id)?R+1:R,0);return{allSelected:D===e.length,someSelected:D>0&&D<e.length}},[e,n]);return p.useEffect(()=>{j.current&&(j.current.indeterminate=A)},[A]),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full table-fixed border-separate border-spacing-0 text-sm text-slate-700",children:[l.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/80 backdrop-blur-sm text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{scope:"col",className:"w-10 px-2 py-2",children:l.jsx("input",{ref:j,type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:_,onChange:i,disabled:c||e.length===0})}),l.jsx("th",{scope:"col",className:"w-20 px-2 py-2 text-left",children:"ID"}),l.jsx("th",{scope:"col",className:"px-2 py-2 text-left",children:"Document"}),l.jsx("th",{scope:"col",className:"w-40 px-2 py-2 text-left",children:"Uploaded"}),l.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Uploader"}),l.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Latest run"}),l.jsx("th",{scope:"col",className:"w-32 px-2 py-2 text-left",children:"Status"}),l.jsx("th",{scope:"col",className:"w-36 px-2 py-2 text-right",children:"Actions"})]})}),l.jsx("tbody",{children:e.map(D=>{const R=n.has(D.id);return l.jsxs("tr",{className:ge("border-b border-slate-200 last:border-b-0 transition-colors hover:bg-slate-50",R?"bg-brand-50/50":"bg-white"),children:[l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:R,onChange:()=>r(D.id),disabled:c})}),l.jsx("td",{className:"px-2 py-2 align-middle font-mono text-xs text-slate-500",children:D.id.slice(-6)}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"truncate font-semibold text-slate-900",title:D.name,children:D.name}),l.jsx("div",{className:"text-xs text-slate-500",children:b5(D)})]})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("time",{dateTime:D.created_at,className:"block text-xs text-slate-600",title:wy.format(new Date(D.created_at)),children:S5(D)})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("span",{className:"block truncate text-xs text-slate-600",children:D.uploader?.name??D.uploader?.email??""})}),l.jsx("td",{className:"px-2 py-2 align-middle",children:y?y(D):null}),l.jsx("td",{className:"px-2 py-2 align-middle",children:l.jsx("span",{className:ge("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",w5(D.status)),children:d?d(D.status):D.status})}),l.jsx("td",{className:"px-2 py-2 align-middle text-right",children:l.jsx(x5,{document:D,onDownload:x,onDelete:m,onRun:g,disabled:u,downloading:b===D.id,safeModeEnabled:w,safeModeMessage:E,safeModeLoading:N})})]},D.id)})})]})})}function x5({document:e,onDownload:n,onDelete:r,onRun:i,disabled:c=!1,downloading:u=!1,safeModeEnabled:d=!1,safeModeMessage:m,safeModeLoading:x=!1}){const g=c||!i||d||x,b=d?m??Ps:x?"Checking ADE safe mode status...":void 0;return l.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[l.jsx(Oe,{type:"button",size:"sm",variant:"primary",onClick:()=>{g||i?.(e)},disabled:g,title:b,children:"Run"}),l.jsx("button",{type:"button",onClick:()=>n?.(e),className:ge("px-2 py-1 text-xs font-medium text-slate-600 underline underline-offset-4 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",u&&"opacity-60"),disabled:c||u,children:u?"Downloading":"Download"}),l.jsx("button",{type:"button",onClick:()=>r?.(e),className:"px-2 py-1 text-xs font-semibold text-danger-600 hover:text-danger-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-danger-500",disabled:c,children:"Delete"})]})}function b5(e){const n=[];return e.content_type&&n.push(v5(e.content_type)),typeof e.byte_size=="number"&&e.byte_size>=0&&n.push(y5(e.byte_size)),n.join("  ")||"Unknown type"}function v5(e){return{"application/pdf":"PDF document","text/csv":"CSV file","text/tab-separated-values":"TSV file","application/vnd.ms-excel":"Excel spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel spreadsheet","application/vnd.ms-excel.sheet.macroEnabled.12":"Excel macro spreadsheet"}[e]??e}function y5(e){if(e<1024)return`${e} B`;const n=["KB","MB","GB","TB"];let r=e/1024,i=0;for(;r>=1024&&i<n.length-1;)r/=1024,i+=1;return`${r>=10?Math.round(r):Math.round(r*10)/10} ${n[i]}`}function w5(e){switch(e){case"processed":return"bg-success-100 text-success-700";case"processing":return"bg-warning-100 text-warning-700";case"failed":return"bg-danger-100 text-danger-700";case"archived":return"bg-slate-200 text-slate-700";default:return"bg-slate-100 text-slate-700"}}function S5(e){return wy.format(new Date(e.created_at))}function j5({className:e}){return l.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.8,className:e,children:l.jsx("path",{d:"M5 8l5 5 5-5",strokeLinecap:"round",strokeLinejoin:"round"})})}function E5({className:e}){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:ge("animate-spin text-slate-500",e),role:"presentation",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),l.jsx("path",{className:"opacity-75",d:"M22 12c0-5.523-4.477-10-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function N5({open:e,workspaceId:n,documentRecord:r,onClose:i,onRunSuccess:c,onRunError:u,safeModeEnabled:d=!1,safeModeMessage:m,safeModeLoading:x=!1}){const g=p.useRef(null);return p.useEffect(()=>{typeof window>"u"||(e?g.current=window.document.activeElement instanceof HTMLElement?window.document.activeElement:null:(g.current?.focus(),g.current=null))},[e]),p.useEffect(()=>{if(!e||typeof window>"u")return;const b=window.document.body.style.overflow;return window.document.body.style.overflow="hidden",()=>{window.document.body.style.overflow=b}},[e]),typeof window>"u"||!e||!r?null:br.createPortal(l.jsx(C5,{workspaceId:n,documentRecord:r,onClose:i,onRunSuccess:c,onRunError:u,safeModeEnabled:d,safeModeMessage:m,safeModeLoading:x}),window.document.body)}function C5({workspaceId:e,documentRecord:n,onClose:r,onRunSuccess:i,onRunError:c,safeModeEnabled:u=!1,safeModeMessage:d,safeModeLoading:m=!1}){const x=p.useRef(null),g=p.useId(),b=p.useId(),y=xy({workspaceId:e}),[w,E]=p.useState(""),N=o5(e),{preferences:j,setPreferences:_}=c5(e,n.id),[A,D]=p.useState(n.last_run?.run_id??null);p.useEffect(()=>{D(n.last_run?.run_id??null)},[n.id,n.last_run?.run_id]);const R=p.useMemo(()=>y.data?.items??[],[y.data]),q=p.useMemo(()=>R.filter(Se=>!("deleted_at"in Se&&Se.deleted_at)),[R]),U=p.useMemo(()=>{if(j.configId){const Se=q.find(_e=>_e.id===j.configId);if(Se)return Se.id}return q[0]?.id??""},[j.configId,q]);p.useEffect(()=>{E(U)},[U]);const V=p.useMemo(()=>q.find(Se=>Se.id===w)??null,[q,w]),$=p.useCallback(Se=>{const _e=typeof Se.status=="string"?Se.status:"draft";return`${Se.title??Se.display_name??"Untitled configuration"} (${_e.charAt(0).toUpperCase()}${_e.slice(1)})`},[]),[re,B]=p.useState(null),H=d??Ps,J=xn({queryKey:A?Mc.detail(A):["run","none"],queryFn:({signal:Se})=>A?lo(A,Se):Promise.reject(new Error("No run selected")),enabled:!!A,refetchInterval:Se=>{const _e=Se.state.data?.status;return _e==="running"||_e==="queued"?2e3:!1}}),ce=xn({queryKey:A?Mc.outputs(A):["run-outputs","none"],queryFn:({signal:Se})=>{if(!A)return Promise.reject(new Error("No run selected"));const _e=J.data??A;return ny(_e,Se)},enabled:!!A&&(J.data?.status==="succeeded"||J.data?.status==="failed"),staleTime:5e3}),Q=xn({queryKey:A?Mc.summary(A):["run-summary","none"],queryFn:({signal:Se})=>A?ry(A,Se):Promise.reject(new Error("No run selected")),enabled:!!A&&(J.data?.status==="succeeded"||J.data?.status==="failed"),staleTime:5e3}),de=xn({queryKey:A?Mc.telemetry(A):["run-telemetry","none"],queryFn:({signal:Se})=>{if(!A)return Promise.reject(new Error("No run selected"));const _e=J.data??A;return sy(_e,Se)},enabled:!!A&&(J.data?.status==="succeeded"||J.data?.status==="failed"),staleTime:5e3}),xe=xn({queryKey:["document-sheets",e,n.id],queryFn:({signal:Se})=>Pv(e,n.id,Se),staleTime:6e4}),z=p.useMemo(()=>xe.data??[],[xe.data]),[ee,K]=p.useState([]);p.useEffect(()=>{if(!z.length){K([]);return}const Se=(j.sheetNames??[]).filter(ne=>z.some(Ee=>Ee.name===ne)),_e=Array.from(new Set(Se));K(_e)},[z,j.sheetNames]);const be=p.useMemo(()=>Array.from(new Set(ee.filter(Se=>z.some(_e=>_e.name===Se)))),[ee,z]);p.useEffect(()=>{V&&_({configId:V.id,sheetNames:be.length?be:null})},[be,V,_]);const ve=p.useCallback(Se=>{K(_e=>_e.includes(Se)?_e.filter(ne=>ne!==Se):[..._e,Se])},[]),C=J.data??null,I=C?.status??null,ae=I==="running"||I==="queued",M=C?ih(C):null,F=C?lh(C):null,G=ce.data?.files??[],te=Q.data??null,L=de.data??[];p.useEffect(()=>{const Se=x.current;if(!Se)return;(V0(Se)[0]??Se).focus();const ne=Ee=>{if(Ee.key==="Escape"){Ee.preventDefault(),r();return}if(Ee.key!=="Tab")return;const Ue=V0(Se);if(Ue.length===0){Ee.preventDefault();return}const qe=Ue[0],tt=Ue[Ue.length-1],k=window.document.activeElement;if(Ee.shiftKey){(!Se.contains(k)||k===qe)&&(Ee.preventDefault(),tt.focus());return}k===tt&&(Ee.preventDefault(),qe.focus())};return Se.addEventListener("keydown",ne),()=>Se.removeEventListener("keydown",ne)},[r]);const ie=q.length>0,me=N.isPending||ae||m||u||!ie||!V,Te=u?H:m?"Checking ADE safe mode status...":void 0,Fe=()=>{if(u||m)return;if(!V){B("Select a configuration before running the extractor.");return}B(null),D(null);const Se=be,_e={dry_run:!1,validate_only:!1,force_rebuild:!1},ne=Se.length>0?{..._e,input_sheet_names:Se}:_e;N.mutate({configId:V.id,options:{...ne,input_document_id:n.id}},{onSuccess:Ee=>{_({configId:V.id,sheetNames:Se.length?Se:null}),i?.(Ee),D(Ee.id)},onError:Ee=>{const Ue=Ee instanceof Error?Ee.message:"Unable to submit extraction run.";B(Ue),c?.(Ue)}})};return l.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[l.jsx("button",{type:"button",tabIndex:-1,"aria-hidden":"true",className:"flex-1 bg-slate-900/30 backdrop-blur-sm",onClick:r}),l.jsxs("aside",{ref:x,role:"dialog","aria-modal":"true","aria-labelledby":g,"aria-describedby":b,tabIndex:-1,className:"relative flex h-full w-[min(28rem,92vw)] flex-col border-l border-slate-200 bg-white shadow-2xl",children:[l.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[l.jsxs("div",{children:[l.jsx("h2",{id:g,className:"text-lg font-semibold text-slate-900",children:"Run extraction"}),l.jsx("p",{id:b,className:"text-xs text-slate-500",children:"Prepare and submit a processing run."})]}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:r,disabled:N.isPending,children:"Close"})]}),l.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-sm text-slate-600",children:[l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Document"}),l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[l.jsx("p",{className:"font-semibold text-slate-800",title:n.name,children:n.name}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",new Date(n.created_at).toLocaleString()]}),n.last_run_at?l.jsxs("p",{className:"text-xs text-slate-500",children:["Last run ",new Date(n.last_run_at).toLocaleString()]}):null]})]}),l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Configuration"}),y.isLoading?l.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"Loading configurations"}):y.isError?l.jsxs(St,{tone:"danger",children:["Unable to load configurations."," ",y.error instanceof Error?y.error.message:"Try again later."]}):ie?l.jsx("div",{className:"space-y-2",children:l.jsxs(Ra,{value:w,onChange:Se=>{const _e=Se.target.value;E(_e)},disabled:N.isPending,children:[l.jsx("option",{value:"",children:"Select configuration"}),q.map(Se=>l.jsx("option",{value:Se.id,children:$(Se)},Se.id))]})}):l.jsx(St,{tone:"info",children:"No configurations available. Create one before running extraction."})]}),l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Advanced options"}),xe.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading worksheets"}):xe.isError?l.jsx(St,{tone:"warning",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>xe.refetch(),disabled:xe.isFetching,children:"Retry loading"}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>K([]),disabled:N.isPending,children:"Use all worksheets"})]})]})}):z.length>0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Worksheets"}),l.jsx("p",{className:"text-[11px] text-slate-500",children:be.length===0?"All worksheets will be processed by default. Select any subset to narrow the run.":`${be.length.toLocaleString()} worksheet${be.length===1?"":"s"} selected. Clear selections to process every sheet.`})]}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>K([]),disabled:N.isPending,children:"Use all worksheets"})]}),l.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:z.map(Se=>{const _e=be.includes(Se.name);return l.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:_e,onChange:()=>ve(Se.name)}),l.jsxs("span",{className:"flex-1 truncate",children:[Se.name,Se.is_active?" (active)":""]})]},`${Se.index}-${Se.name}`)})})]}):l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"This document does not expose multiple worksheets, so ADE will ingest the uploaded file directly."})]}),A?l.jsxs("section",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Latest run"}),l.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-slate-800",title:A,children:["Run ",A]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",I??"loading"]})]}),ae?l.jsx(E5,{className:"h-4 w-4 text-slate-500"}):null]}),F?l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.jsx("a",{href:F,className:"inline-flex items-center rounded border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:bg-slate-100",children:"Download logs"})}):null,l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Output files"}),ce.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading outputs"}):G.length>0?l.jsx("ul",{className:"mt-1 space-y-1 text-xs text-slate-700",children:G.map(Se=>{const _e=Se.path??Se.name,ne=typeof Se.byte_size=="number"?Se.byte_size:0,Ee=Se.download_url??(M?`${M}/${_e.split("/").map(encodeURIComponent).join("/")}`:void 0);return l.jsxs("li",{className:"flex items-center justify-between gap-2 break-all rounded border border-slate-100 px-2 py-1",children:[Ee?l.jsx("a",{href:Ee,className:"text-emerald-700 hover:underline",children:Se.name}):l.jsx("span",{className:"text-slate-500",children:Se.name}),l.jsxs("span",{className:"text-[11px] text-slate-500",children:[ne.toLocaleString()," bytes"]})]},_e)})}):l.jsx("p",{className:"text-xs text-slate-500",children:"Outputs will appear here after the run completes."})]}),l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Run summary"}),Q.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading summary"}):Q.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load run summary."}):te?l.jsx(pv,{summary:te}):l.jsx("p",{className:"text-xs text-slate-500",children:"Summary not available."})]}),l.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Telemetry summary"}),de.isLoading?l.jsx("p",{className:"text-xs text-slate-500",children:"Loading telemetry"}):de.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load telemetry events."}):L.length>0?l.jsx(gv,{events:L}):l.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."})]})]})]}):null,u?l.jsx(St,{tone:"warning",children:H}):null,re?l.jsx(St,{tone:"danger",children:re}):null]}),l.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t border-slate-200 px-5 py-4",children:[l.jsx(Oe,{type:"button",variant:"ghost",onClick:r,disabled:N.isPending,children:"Cancel"}),l.jsx(Oe,{type:"button",onClick:Fe,isLoading:N.isPending,disabled:me,title:Te,children:"Run extraction"})]})]})]})}function _5({onFiles:e,disabled:n,workspaceName:r}){const[i,c]=p.useState(!1),u=p.useRef(0);return p.useEffect(()=>{if(n)return;const d=b=>{!b.dataTransfer||![...b.dataTransfer.types].includes("Files")||(u.current+=1,c(!0))},m=b=>{i&&b.preventDefault()},x=()=>{u.current=Math.max(0,u.current-1),u.current===0&&c(!1)},g=b=>{b.preventDefault(),c(!1),u.current=0;const y=Array.from(b.dataTransfer?.files??[]);y.length&&e(y)};return window.addEventListener("dragenter",d),window.addEventListener("dragover",m),window.addEventListener("dragleave",x),window.addEventListener("drop",g),()=>{window.removeEventListener("dragenter",d),window.removeEventListener("dragover",m),window.removeEventListener("dragleave",x),window.removeEventListener("drop",g)}},[i,n,e]),l.jsxs("div",{"aria-hidden":!i,className:ge("pointer-events-none fixed inset-0 z-[60] transition",i?"opacity-100":"opacity-0"),children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/25 backdrop-blur-[2px]"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:l.jsx("div",{className:"pointer-events-none rounded-2xl border border-white/70 bg-white/90 px-6 py-5 shadow-2xl",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow",children:l.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 text-slate-700",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[l.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsxs("div",{className:"text-center sm:text-left",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Drop to upload"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Files will upload to ",l.jsx("span",{className:"font-medium",children:r??"this workspace"})]})]})]})})})]})}function k5(){return l.jsx("div",{className:"space-y-3","aria-hidden":!0,children:Array.from({length:6}).map((e,n)=>l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-4 w-4 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 flex-1 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 w-24 rounded bg-slate-100"}),l.jsx("div",{className:"h-4 w-40 rounded bg-slate-100"}),l.jsx("div",{className:"h-8 w-40 rounded bg-slate-100"})]},n))})}function T5({count:e,onClear:n,onRun:r,onDelete:i,busy:c,safeModeEnabled:u=!1,safeModeMessage:d,safeModeLoading:m=!1}){if(e===0)return null;const x=c||u||m,g=u?d??Ps:m?"Checking ADE safe mode status...":void 0;return l.jsx("div",{className:"fixed inset-x-0 bottom-0 z-40 mx-auto max-w-7xl px-2 pb-2 sm:px-4 sm:pb-4",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white/95 p-3 text-sm text-slate-700 shadow-lg backdrop-blur",children:[l.jsxs("span",{className:"mr-2",children:[l.jsx("strong",{children:e})," selected"]}),l.jsx(Oe,{variant:"ghost",size:"sm",onClick:n,children:"Clear"}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsx(Oe,{size:"sm",onClick:()=>!x&&r(),disabled:x,title:g,children:"Run extraction"}),l.jsx(Oe,{size:"sm",variant:"danger",onClick:i,disabled:c,isLoading:c,children:"Delete selected"})]})]})})}function D5({onUploadClick:e}){return l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-center",children:[l.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-50",children:l.jsxs("svg",{className:"h-6 w-6 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[l.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No documents yet"}),l.jsx("p",{className:"max-w-md text-sm text-slate-600",children:"Tap Upload or drag files anywhere in the window."}),l.jsx(Oe,{onClick:e,className:"w-full sm:w-auto",children:"Upload"})]})}function A5({document:e}){const n=e.last_run;return n?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("span",{className:ge("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",R5(n.status)),children:[M5(n.status),n.run_at?l.jsx("span",{className:"ml-1 font-normal text-slate-500",children:z5(n.run_at)}):null]}),n.message?l.jsx("span",{className:"text-[11px] text-slate-500",children:n.message}):null]}):l.jsx("span",{className:"text-xs text-slate-400",children:"No runs yet"})}function R5(e){switch(e){case"succeeded":return"bg-success-100 text-success-700";case"failed":return"bg-danger-100 text-danger-700";case"running":return"bg-brand-100 text-brand-700";default:return"bg-slate-200 text-slate-700"}}function M5(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ci=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});function z5(e){if(!e)return"unknown";const n=new Date(e);if(Number.isNaN(n.getTime()))return"unknown";const r=n.getTime()-Date.now(),i=Math.round(r/1e3);if(Math.abs(i)<60)return Ci.format(i,"second");const u=Math.round(i/60);if(Math.abs(u)<60)return Ci.format(u,"minute");const m=Math.round(u/60);if(Math.abs(m)<24)return Ci.format(m,"hour");const g=Math.round(m/24);if(Math.abs(g)<30)return Ci.format(g,"day");const b=Math.round(g/30);if(Math.abs(b)<12)return Ci.format(b,"month");const y=Math.round(g/365);return Ci.format(y,"year")}function O5(e,n){const r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=n,i.click(),window.setTimeout(()=>URL.revokeObjectURL(r),1e3)}function V0(e){const n=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(e.querySelectorAll(n.join(","))).filter(r=>!r.hasAttribute("disabled")&&r.getAttribute("aria-hidden")!=="true")}function L5({params:e}){return l.jsxs("section",{children:[l.jsxs("h1",{className:"text-lg font-semibold",children:["Document ",e.documentId]}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: render document details or drawer."})]})}function U5(){return l.jsx(mt,{title:"Runs",description:"Run history will appear here once runs APIs expose listing endpoints.",variant:"empty"})}function Ot({label:e,hint:n,error:r,required:i=!1,children:c,className:u}){const d=p.useId(),m=p.isValidElement(c)?c.props??{}:{},x=m.id??d,g=n?`${x}-hint`:void 0,b=r?`${x}-error`:void 0,y=[g,b,m["aria-describedby"]].filter(Boolean).join(" ")||void 0;return l.jsxs("div",{className:ge("space-y-2",u),children:[e?l.jsxs("label",{htmlFor:x,className:"text-sm font-medium text-slate-700","aria-required":i||void 0,children:[e,i?l.jsx("span",{className:"ml-1 text-danger-600","aria-hidden":"true",children:"*"}):null]}):null,p.isValidElement(c)?p.cloneElement(c,{id:x,required:i||m.required,"aria-describedby":y,"aria-invalid":r?!0:m["aria-invalid"]}):c,n?l.jsx("p",{id:g,className:"text-xs text-slate-500",children:n}):null,r?l.jsx("p",{id:b,className:"text-xs font-medium text-danger-600",children:r}):null]})}const jy="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",$t=p.forwardRef(({className:e,invalid:n=!1,...r},i)=>l.jsx("input",{ref:i,className:ge(jy,n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...r}));$t.displayName="Input";const Ey=p.forwardRef(({className:e,invalid:n=!1,rows:r=4,...i},c)=>l.jsx("textarea",{ref:c,rows:r,className:ge(jy,"resize-y",n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...i}));Ey.displayName="TextArea";const Oc=[{value:"default",label:"Default template"}],Lc=(e,n)=>`/workspaces/${e}/config-builder/${encodeURIComponent(n)}`;function B5(){const{workspace:e}=Xr(),n=Nn(),r=p.useMemo(()=>ay(e.id),[e.id]),i=p.useMemo(()=>Hh(e.id),[e.id]),c=xy({workspaceId:e.id}),u=Jk(e.id),d=r_(e.id),[m,x]=p.useState(()=>`${e.name} Config`),[g,b]=p.useState(Oc[0]?.value??"default"),[y,w]=p.useState(null),[E,N]=p.useState(()=>`${e.name} Import`),[j,_]=p.useState(null),[A,D]=p.useState(null),[R,q]=p.useState(()=>i.get()),U=p.useRef(null),V=p.useRef(null),$=p.useMemo(()=>(c.data?.items??[]).filter(K=>!("deleted_at"in K&&K.deleted_at)),[c.data]),re=p.useMemo(()=>$.find(K=>K.id===R?.configId)??null,[$,R]),B=p.useCallback(K=>{q(Zh(i,K))},[i]);p.useEffect(()=>{q(i.get())},[i]),p.useEffect(()=>{const K=V.current,be=K?.id!==e.id,ve=K?.name!==e.name;if(!(!be&&!ve)){if(V.current={id:e.id,name:e.name},be){x(`${e.name} Config`),b(Oc[0]?.value??"default"),w(null),N(`${e.name} Import`),_(null),D(null),U.current&&(U.current.value="");return}ve&&(x(C=>C===`${K?.name??""} Config`?`${e.name} Config`:C),N(C=>C===`${K?.name??""} Import`?`${e.name} Import`:C))}},[e.id,e.name]),p.useEffect(()=>{if(typeof window>"u")return;const K=be=>{if(!(be.storageArea!==window.localStorage||be.key!==r))try{q(be.newValue?JSON.parse(be.newValue):null)}catch{q(null)}};return window.addEventListener("storage",K),()=>window.removeEventListener("storage",K)},[r]),p.useEffect(()=>{R?.configId&&($.some(K=>K.id===R.configId)||B(null))},[$,R?.configId,B]);const H=K=>{B(K),n(Lc(e.id,K))},J=K=>{B(K),n(`${Lc(e.id,K)}/editor`)},ce=p.useCallback(K=>{D(null),_(K.target.files?.[0]??null),K.target.value=""},[]),Q=K=>{K.preventDefault();const be=m.trim();if(!be){w("Enter a display name for the configuration.");return}w(null),u.mutate({displayName:be,source:{type:"template",templateId:g}},{onSuccess(ve){B(ve.id),n(Lc(e.id,ve.id))}})},de=K=>{K.preventDefault();const be=E.trim();if(!be){D("Enter a display name for the imported configuration.");return}if(!j){D("Select a .zip file to import.");return}D(null),d.mutate({displayName:be,file:j},{onSuccess(ve){B(ve.id),_(null),c.refetch(),n(Lc(e.id,ve.id))},onError(ve){D(ve instanceof Error?ve.message:"Unable to import configuration.")}})},xe=y??(u.error instanceof Error?u.error.message:null),z=m.trim().length>0&&!u.isPending,ee=E.trim().length>0&&!!j&&!d.isPending;return c.isLoading?l.jsx(mt,{variant:"loading",title:"Loading configurations",description:"Fetching workspace configurations"}):c.isError?l.jsx(mt,{variant:"error",title:"Unable to load configurations",description:"Try refreshing the page."}):$.length===0?l.jsx(mt,{className:"mx-auto w-full max-w-xl",title:"Create your first configuration",description:"Copy a starter template into this workspace to begin editing detectors, hooks, and manifests.",action:l.jsxs("div",{className:"space-y-6 text-left",children:[l.jsxs("form",{onSubmit:Q,className:"space-y-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsx(Ot,{label:"Configuration name",required:!0,children:l.jsx($t,{value:m,onChange:K=>x(K.target.value),placeholder:"Membership normalization",disabled:u.isPending,autoFocus:!0})}),l.jsx(Ot,{label:"Template",children:l.jsx(Ra,{value:g,onChange:K=>b(K.target.value),disabled:u.isPending,children:Oc.map(K=>l.jsx("option",{value:K.value,children:K.label},K.value))})}),xe?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:xe}):null,l.jsx(Oe,{type:"submit",className:"w-full",disabled:!z,isLoading:u.isPending,children:"Create from template"})]}),l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"Import configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),l.jsxs("form",{onSubmit:de,className:"mt-3 space-y-4",children:[l.jsx(Ot,{label:"Configuration name",required:!0,children:l.jsx($t,{value:E,onChange:K=>N(K.target.value),placeholder:"Imported configuration",disabled:d.isPending})}),l.jsxs(Ot,{label:"Archive (.zip)",required:!0,children:[l.jsx($t,{type:"file",ref:U,accept:".zip",onChange:ce,disabled:d.isPending}),j?l.jsx("p",{className:"mt-1 text-xs text-slate-500","aria-live":"polite",children:j.name}):null]}),A?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:A}):null,l.jsx(Oe,{type:"submit",className:"w-full",disabled:!ee,isLoading:d.isPending,children:"Import archive"})]})]})]})}):l.jsxs("div",{className:"grid gap-6 p-4 lg:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",children:[l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Configurations"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Open an existing configuration to view manifest summaries, run validation, or launch the editor."})]}),re?l.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>H(re.id),children:"Resume last opened"}):null]}),l.jsx("div",{className:"divide-y divide-slate-200 rounded-xl border border-slate-200",children:$.map(K=>l.jsxs("article",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:K.display_name}),l.jsx(q5,{status:K.status}),re?.id===K.id?l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-brand-600",children:"Last opened"}):null]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Updated ",$5(K.updated_at)]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[l.jsx(Oe,{size:"sm",variant:"secondary",onClick:()=>H(K.id),children:"View details"}),l.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>J(K.id),children:"Open editor"})]})]},K.id))})]}),l.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"New configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Copy the starter template to begin editing detectors, hooks, and manifests."})]}),l.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[l.jsx(Ot,{label:"Configuration name",required:!0,children:l.jsx($t,{value:m,onChange:K=>x(K.target.value),placeholder:"Membership normalization",disabled:u.isPending})}),l.jsx(Ot,{label:"Template",children:l.jsx(Ra,{value:g,onChange:K=>b(K.target.value),disabled:u.isPending,children:Oc.map(K=>l.jsx("option",{value:K.value,children:K.label},K.value))})}),xe?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:xe}):null,l.jsx(Oe,{type:"submit",className:"w-full",disabled:!z,isLoading:u.isPending,children:"Create from template"})]}),l.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Import configuration"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Upload an ADE export (.zip) to create a new draft configuration."})]}),l.jsxs("form",{onSubmit:de,className:"mt-3 space-y-4",children:[l.jsx(Ot,{label:"Configuration name",required:!0,children:l.jsx($t,{value:E,onChange:K=>N(K.target.value),placeholder:"Imported configuration",disabled:d.isPending})}),l.jsxs(Ot,{label:"Archive (.zip)",required:!0,children:[l.jsx($t,{type:"file",ref:U,accept:".zip",onChange:ce,disabled:d.isPending}),j?l.jsx("p",{className:"mt-1 text-xs text-slate-500","aria-live":"polite",children:j.name}):null]}),A?l.jsx("p",{className:"text-sm font-medium text-danger-600",children:A}):null,l.jsx(Oe,{type:"submit",className:"w-full",disabled:!ee,isLoading:d.isPending,children:"Import archive"})]})]})]})]})}function q5({status:e}){const n=e.toLowerCase(),r=n==="active"?"bg-emerald-100 text-emerald-700":n==="draft"?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-700";return l.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${r}`,children:e})}function $5(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function H5({params:e}={}){const{workspace:n}=Xr(),r=Nn(),i=e?.configId,c=p.useMemo(()=>Hh(n.id),[n.id]),u=by({workspaceId:n.id,configurationId:i}),d=u.data;return p.useEffect(()=>{!i||!d||Zh(c,i)},[i,d,c]),i?u.isLoading?l.jsx(mt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details."}):u.isError?l.jsx(mt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page."}):d?l.jsxs("div",{className:"flex h-full flex-col gap-4 p-4",children:[l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Configuration"}),l.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:d.display_name})]}),l.jsx(Oe,{variant:"secondary",onClick:()=>r(`/workspaces/${n.id}/config-builder/${encodeURIComponent(d.id)}/editor`),children:"Open editor"})]}),l.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Config ID"}),l.jsx("dd",{className:"text-sm text-slate-700",children:d.id})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Status"}),l.jsx("dd",{className:"text-sm capitalize text-slate-700",children:d.status.toLowerCase()})]}),l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Updated"}),l.jsx("dd",{className:"text-sm text-slate-700",children:Z5(d.updated_at)})]})]})]}),l.jsxs("section",{className:"flex-1 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6",children:[l.jsx("h2",{className:"text-base font-semibold text-slate-800",children:"Overview"}),l.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:"The refreshed config workbench will eventually surface manifest summaries, validation history, and deployment metrics here. For now this page offers a quick launch point into the editor while we rebuild the experience."})]})]}):l.jsx(mt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."}):l.jsx(mt,{variant:"error",title:"Configuration not found",description:"Pick a configuration from the list to view its details."})}function Z5(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function F5({params:e}={}){const{workspace:n}=Xr(),{session:r,windowState:i,openSession:c,closeSession:u,minimizeWindow:d,maximizeWindow:m,restoreWindow:x,shouldBypassUnsavedGuard:g}=oy(),b=e?.configId,y=by({workspaceId:n.id,configurationId:b});if(p.useEffect(()=>{b||u()},[b,u]),p.useEffect(()=>{if(!b||y.isError)return;const _=y.data?.display_name??b;c({workspaceId:n.id,configId:b,configName:`${n.name}  ${_}`})},[b,y.data?.display_name,y.isError,n.id,n.name,c]),p.useEffect(()=>{b&&(y.isError||y.isSuccess&&!y.data)&&u()},[u,b,y.data,y.isError,y.isSuccess]),!b)return l.jsx(mt,{variant:"error",title:"Select a configuration",description:"Choose a configuration from the list to open the workbench."});if(y.isLoading)return l.jsx(mt,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details before opening the workbench."});if(y.isError)return l.jsx(mt,{variant:"error",title:"Unable to load configuration",description:"Try refreshing the page or pick a different configuration."});if(!y.data)return l.jsx(mt,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."});const w=r&&r.configId===b?r:null,E=!!(w&&i==="minimized"),N=!!(w&&i==="restored"),j=!!(w&&i==="maximized");return N&&w?l.jsx("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:l.jsx(iy,{workspaceId:n.id,configId:w.configId,configName:w.configName,windowState:"restored",onMinimizeWindow:d,onMaximizeWindow:m,onRestoreWindow:x,onCloseWorkbench:u,shouldBypassUnsavedGuard:g})}):j?l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(mt,{variant:"empty",title:"Immersive focus active",description:"Exit immersive mode from the workbench focus menu to return here."})}):E?l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(mt,{variant:"empty",title:"Workbench docked",description:"Use the dock at the bottom of the screen to resume editing."})}):l.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:l.jsx(mt,{variant:"loading",title:"Launching config workbench",description:"If the editor does not appear, refresh the page."})})}var co=e=>e.type==="checkbox",Ca=e=>e instanceof Date,Pn=e=>e==null;const Ny=e=>typeof e=="object";var nn=e=>!Pn(e)&&!Array.isArray(e)&&Ny(e)&&!Ca(e),V5=e=>nn(e)&&e.target?co(e.target)?e.target.checked:e.target.value:e,Q5=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,I5=(e,n)=>e.has(Q5(n)),P5=e=>{const n=e.constructor&&e.constructor.prototype;return nn(n)&&n.hasOwnProperty("isPrototypeOf")},Vh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function pn(e){let n;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(!(Vh&&(e instanceof Blob||i))&&(r||nn(e)))if(n=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!P5(e))n=e;else for(const c in e)e.hasOwnProperty(c)&&(n[c]=pn(e[c]));else return e;return n}var fu=e=>/^\w*$/.test(e),Qt=e=>e===void 0,Qh=e=>Array.isArray(e)?e.filter(Boolean):[],Ih=e=>Qh(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ze=(e,n,r)=>{if(!n||!nn(e))return r;const i=(fu(n)?[n]:Ih(n)).reduce((c,u)=>Pn(c)?c:c[u],e);return Qt(i)||i===e?Qt(e[n])?r:e[n]:i},Is=e=>typeof e=="boolean",wt=(e,n,r)=>{let i=-1;const c=fu(n)?[n]:Ih(n),u=c.length,d=u-1;for(;++i<u;){const m=c[i];let x=r;if(i!==d){const g=e[m];x=nn(g)||Array.isArray(g)?g:isNaN(+c[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;e[m]=x,e=e[m]}};const Q0={BLUR:"blur",FOCUS_OUT:"focusout"},Ls={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},W5=vt.createContext(null);W5.displayName="HookFormContext";var G5=(e,n,r,i=!0)=>{const c={defaultValues:n._defaultValues};for(const u in e)Object.defineProperty(c,u,{get:()=>{const d=u;return n._proxyFormState[d]!==Ls.all&&(n._proxyFormState[d]=!i||Ls.all),e[d]}});return c};const K5=typeof window<"u"?vt.useLayoutEffect:vt.useEffect;var os=e=>typeof e=="string",Y5=(e,n,r,i,c)=>os(e)?(i&&n.watch.add(e),ze(r,e,c)):Array.isArray(e)?e.map(u=>(i&&n.watch.add(u),ze(r,u))):(i&&(n.watchAll=!0),r),uh=e=>Pn(e)||!Ny(e);function Kr(e,n,r=new WeakSet){if(uh(e)||uh(n))return e===n;if(Ca(e)&&Ca(n))return e.getTime()===n.getTime();const i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;if(r.has(e)||r.has(n))return!0;r.add(e),r.add(n);for(const u of i){const d=e[u];if(!c.includes(u))return!1;if(u!=="ref"){const m=n[u];if(Ca(d)&&Ca(m)||nn(d)&&nn(m)||Array.isArray(d)&&Array.isArray(m)?!Kr(d,m,r):d!==m)return!1}}return!0}var Ph=(e,n,r,i,c)=>n?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:c||!0}}:{},Ql=e=>Array.isArray(e)?e:[e],I0=()=>{let e=[];return{get observers(){return e},next:c=>{for(const u of e)u.next&&u.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(u=>u!==c)}}),unsubscribe:()=>{e=[]}}};function Cy(e,n){const r={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],u=n[i];if(c&&nn(c)&&u){const d=Cy(c,u);nn(d)&&(r[i]=d)}else e[i]&&(r[i]=u)}return r}var In=e=>nn(e)&&!Object.keys(e).length,Wh=e=>e.type==="file",Us=e=>typeof e=="function",Xc=e=>{if(!Vh)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},_y=e=>e.type==="select-multiple",Gh=e=>e.type==="radio",X5=e=>Gh(e)||co(e),Zf=e=>Xc(e)&&e.isConnected;function J5(e,n){const r=n.slice(0,-1).length;let i=0;for(;i<r;)e=Qt(e)?i++:e[n[i++]];return e}function eT(e){for(const n in e)if(e.hasOwnProperty(n)&&!Qt(e[n]))return!1;return!0}function tn(e,n){const r=Array.isArray(n)?n:fu(n)?[n]:Ih(n),i=r.length===1?e:J5(e,r),c=r.length-1,u=r[c];return i&&delete i[u],c!==0&&(nn(i)&&In(i)||Array.isArray(i)&&eT(i))&&tn(e,r.slice(0,-1)),e}var tT=e=>{for(const n in e)if(Us(e[n]))return!0;return!1};function ky(e){return Array.isArray(e)||nn(e)&&!tT(e)}function dh(e,n={}){for(const r in e)ky(e[r])?(n[r]=Array.isArray(e[r])?[]:{},dh(e[r],n[r])):Qt(e[r])||(n[r]=!0);return n}function ki(e,n,r){r||(r=dh(n));for(const i in e)ky(e[i])?Qt(n)||uh(r[i])?r[i]=dh(e[i],Array.isArray(e[i])?[]:{}):ki(e[i],Pn(n)?{}:n[i],r[i]):r[i]=!Kr(e[i],n[i]);return r}const P0={value:!1,isValid:!1},W0={value:!0,isValid:!0};var Ty=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Qt(e[0].attributes.value)?Qt(e[0].value)||e[0].value===""?W0:{value:e[0].value,isValid:!0}:W0:P0}return P0},Dy=(e,{valueAsNumber:n,valueAsDate:r,setValueAs:i})=>Qt(e)?e:n?e===""?NaN:e&&+e:r&&os(e)?new Date(e):i?i(e):e;const G0={isValid:!1,value:null};var Ay=e=>Array.isArray(e)?e.reduce((n,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:n,G0):G0;function K0(e){const n=e.ref;return Wh(n)?n.files:Gh(n)?Ay(e.refs).value:_y(n)?[...n.selectedOptions].map(({value:r})=>r):co(n)?Ty(e.refs).value:Dy(Qt(n.value)?e.ref.value:n.value,e)}var nT=(e,n,r,i)=>{const c={};for(const u of e){const d=ze(n,u);d&&wt(c,u,d._f)}return{criteriaMode:r,names:[...e],fields:c,shouldUseNativeValidation:i}},Jc=e=>e instanceof RegExp,Bl=e=>Qt(e)?e:Jc(e)?e.source:nn(e)?Jc(e.value)?e.value.source:e.value:e,Y0=e=>({isOnSubmit:!e||e===Ls.onSubmit,isOnBlur:e===Ls.onBlur,isOnChange:e===Ls.onChange,isOnAll:e===Ls.all,isOnTouch:e===Ls.onTouched});const X0="AsyncFunction";var sT=e=>!!e&&!!e.validate&&!!(Us(e.validate)&&e.validate.constructor.name===X0||nn(e.validate)&&Object.values(e.validate).find(n=>n.constructor.name===X0)),rT=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),J0=(e,n,r)=>!r&&(n.watchAll||n.watch.has(e)||[...n.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Il=(e,n,r,i)=>{for(const c of r||Object.keys(e)){const u=ze(e,c);if(u){const{_f:d,...m}=u;if(d){if(d.refs&&d.refs[0]&&n(d.refs[0],c)&&!i)return!0;if(d.ref&&n(d.ref,d.name)&&!i)return!0;if(Il(m,n))break}else if(nn(m)&&Il(m,n))break}}};function eb(e,n,r){const i=ze(e,r);if(i||fu(r))return{error:i,name:r};const c=r.split(".");for(;c.length;){const u=c.join("."),d=ze(n,u),m=ze(e,u);if(d&&!Array.isArray(d)&&r!==u)return{name:r};if(m&&m.type)return{name:u,error:m};if(m&&m.root&&m.root.type)return{name:`${u}.root`,error:m.root};c.pop()}return{name:r}}var aT=(e,n,r,i)=>{r(e);const{name:c,...u}=e;return In(u)||Object.keys(u).length>=Object.keys(n).length||Object.keys(u).find(d=>n[d]===(!i||Ls.all))},iT=(e,n,r)=>!e||!n||e===n||Ql(e).some(i=>i&&(r?i===n:i.startsWith(n)||n.startsWith(i))),lT=(e,n,r,i,c)=>c.isOnAll?!1:!r&&c.isOnTouch?!(n||e):(r?i.isOnBlur:c.isOnBlur)?!e:(r?i.isOnChange:c.isOnChange)?e:!0,oT=(e,n)=>!Qh(ze(e,n)).length&&tn(e,n),cT=(e,n,r)=>{const i=Ql(ze(e,r));return wt(i,"root",n[r]),wt(e,r,i),e};function tb(e,n,r="validate"){if(os(e)||Array.isArray(e)&&e.every(os)||Is(e)&&!e)return{type:r,message:os(e)?e:"",ref:n}}var _i=e=>nn(e)&&!Jc(e)?e:{value:e,message:""},nb=async(e,n,r,i,c,u)=>{const{ref:d,refs:m,required:x,maxLength:g,minLength:b,min:y,max:w,pattern:E,validate:N,name:j,valueAsNumber:_,mount:A}=e._f,D=ze(r,j);if(!A||n.has(j))return{};const R=m?m[0]:d,q=ce=>{c&&R.reportValidity&&(R.setCustomValidity(Is(ce)?"":ce||""),R.reportValidity())},U={},V=Gh(d),$=co(d),re=V||$,B=(_||Wh(d))&&Qt(d.value)&&Qt(D)||Xc(d)&&d.value===""||D===""||Array.isArray(D)&&!D.length,H=Ph.bind(null,j,i,U),J=(ce,Q,de,xe=xr.maxLength,z=xr.minLength)=>{const ee=ce?Q:de;U[j]={type:ce?xe:z,message:ee,ref:d,...H(ce?xe:z,ee)}};if(u?!Array.isArray(D)||!D.length:x&&(!re&&(B||Pn(D))||Is(D)&&!D||$&&!Ty(m).isValid||V&&!Ay(m).isValid)){const{value:ce,message:Q}=os(x)?{value:!!x,message:x}:_i(x);if(ce&&(U[j]={type:xr.required,message:Q,ref:R,...H(xr.required,Q)},!i))return q(Q),U}if(!B&&(!Pn(y)||!Pn(w))){let ce,Q;const de=_i(w),xe=_i(y);if(!Pn(D)&&!isNaN(D)){const z=d.valueAsNumber||D&&+D;Pn(de.value)||(ce=z>de.value),Pn(xe.value)||(Q=z<xe.value)}else{const z=d.valueAsDate||new Date(D),ee=ve=>new Date(new Date().toDateString()+" "+ve),K=d.type=="time",be=d.type=="week";os(de.value)&&D&&(ce=K?ee(D)>ee(de.value):be?D>de.value:z>new Date(de.value)),os(xe.value)&&D&&(Q=K?ee(D)<ee(xe.value):be?D<xe.value:z<new Date(xe.value))}if((ce||Q)&&(J(!!ce,de.message,xe.message,xr.max,xr.min),!i))return q(U[j].message),U}if((g||b)&&!B&&(os(D)||u&&Array.isArray(D))){const ce=_i(g),Q=_i(b),de=!Pn(ce.value)&&D.length>+ce.value,xe=!Pn(Q.value)&&D.length<+Q.value;if((de||xe)&&(J(de,ce.message,Q.message),!i))return q(U[j].message),U}if(E&&!B&&os(D)){const{value:ce,message:Q}=_i(E);if(Jc(ce)&&!D.match(ce)&&(U[j]={type:xr.pattern,message:Q,ref:d,...H(xr.pattern,Q)},!i))return q(Q),U}if(N){if(Us(N)){const ce=await N(D,r),Q=tb(ce,R);if(Q&&(U[j]={...Q,...H(xr.validate,Q.message)},!i))return q(Q.message),U}else if(nn(N)){let ce={};for(const Q in N){if(!In(ce)&&!i)break;const de=tb(await N[Q](D,r),R,Q);de&&(ce={...de,...H(Q,de.message)},q(de.message),i&&(U[j]=ce))}if(!In(ce)&&(U[j]={ref:R,...ce},!i))return U}}return q(!0),U};const uT={mode:Ls.onSubmit,reValidateMode:Ls.onChange,shouldFocusError:!0};function dT(e={}){let n={...uT,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Us(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},c=nn(n.defaultValues)||nn(n.values)?pn(n.defaultValues||n.values)||{}:{},u=n.shouldUnregister?{}:pn(c),d={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,g=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...b};const w={array:I0(),state:I0()},E=n.criteriaMode===Ls.all,N=k=>W=>{clearTimeout(g),g=setTimeout(k,W)},j=async k=>{if(!n.disabled&&(b.isValid||y.isValid||k)){const W=n.resolver?In((await $()).errors):await B(i,!0);W!==r.isValid&&w.state.next({isValid:W})}},_=(k,W)=>{!n.disabled&&(b.isValidating||b.validatingFields||y.isValidating||y.validatingFields)&&((k||Array.from(m.mount)).forEach(le=>{le&&(W?wt(r.validatingFields,le,W):tn(r.validatingFields,le))}),w.state.next({validatingFields:r.validatingFields,isValidating:!In(r.validatingFields)}))},A=(k,W=[],le,Ce,we=!0,je=!0)=>{if(Ce&&le&&!n.disabled){if(d.action=!0,je&&Array.isArray(ze(i,k))){const Ae=le(ze(i,k),Ce.argA,Ce.argB);we&&wt(i,k,Ae)}if(je&&Array.isArray(ze(r.errors,k))){const Ae=le(ze(r.errors,k),Ce.argA,Ce.argB);we&&wt(r.errors,k,Ae),oT(r.errors,k)}if((b.touchedFields||y.touchedFields)&&je&&Array.isArray(ze(r.touchedFields,k))){const Ae=le(ze(r.touchedFields,k),Ce.argA,Ce.argB);we&&wt(r.touchedFields,k,Ae)}(b.dirtyFields||y.dirtyFields)&&(r.dirtyFields=ki(c,u)),w.state.next({name:k,isDirty:J(k,W),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else wt(u,k,W)},D=(k,W)=>{wt(r.errors,k,W),w.state.next({errors:r.errors})},R=k=>{r.errors=k,w.state.next({errors:r.errors,isValid:!1})},q=(k,W,le,Ce)=>{const we=ze(i,k);if(we){const je=ze(u,k,Qt(le)?ze(c,k):le);Qt(je)||Ce&&Ce.defaultChecked||W?wt(u,k,W?je:K0(we._f)):de(k,je),d.mount&&j()}},U=(k,W,le,Ce,we)=>{let je=!1,Ae=!1;const Pe={name:k};if(!n.disabled){if(!le||Ce){(b.isDirty||y.isDirty)&&(Ae=r.isDirty,r.isDirty=Pe.isDirty=J(),je=Ae!==Pe.isDirty);const Ge=Kr(ze(c,k),W);Ae=!!ze(r.dirtyFields,k),Ge?tn(r.dirtyFields,k):wt(r.dirtyFields,k,!0),Pe.dirtyFields=r.dirtyFields,je=je||(b.dirtyFields||y.dirtyFields)&&Ae!==!Ge}if(le){const Ge=ze(r.touchedFields,k);Ge||(wt(r.touchedFields,k,le),Pe.touchedFields=r.touchedFields,je=je||(b.touchedFields||y.touchedFields)&&Ge!==le)}je&&we&&w.state.next(Pe)}return je?Pe:{}},V=(k,W,le,Ce)=>{const we=ze(r.errors,k),je=(b.isValid||y.isValid)&&Is(W)&&r.isValid!==W;if(n.delayError&&le?(x=N(()=>D(k,le)),x(n.delayError)):(clearTimeout(g),x=null,le?wt(r.errors,k,le):tn(r.errors,k)),(le?!Kr(we,le):we)||!In(Ce)||je){const Ae={...Ce,...je&&Is(W)?{isValid:W}:{},errors:r.errors,name:k};r={...r,...Ae},w.state.next(Ae)}},$=async k=>{_(k,!0);const W=await n.resolver(u,n.context,nT(k||m.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return _(k),W},re=async k=>{const{errors:W}=await $(k);if(k)for(const le of k){const Ce=ze(W,le);Ce?wt(r.errors,le,Ce):tn(r.errors,le)}else r.errors=W;return W},B=async(k,W,le={valid:!0})=>{for(const Ce in k){const we=k[Ce];if(we){const{_f:je,...Ae}=we;if(je){const Pe=m.array.has(je.name),Ge=we._f&&sT(we._f);Ge&&b.validatingFields&&_([je.name],!0);const Nt=await nb(we,m.disabled,u,E,n.shouldUseNativeValidation&&!W,Pe);if(Ge&&b.validatingFields&&_([je.name]),Nt[je.name]&&(le.valid=!1,W))break;!W&&(ze(Nt,je.name)?Pe?cT(r.errors,Nt,je.name):wt(r.errors,je.name,Nt[je.name]):tn(r.errors,je.name))}!In(Ae)&&await B(Ae,W,le)}}return le.valid},H=()=>{for(const k of m.unMount){const W=ze(i,k);W&&(W._f.refs?W._f.refs.every(le=>!Zf(le)):!Zf(W._f.ref))&&te(k)}m.unMount=new Set},J=(k,W)=>!n.disabled&&(k&&W&&wt(u,k,W),!Kr(ve(),c)),ce=(k,W,le)=>Y5(k,m,{...d.mount?u:Qt(W)?c:os(k)?{[k]:W}:W},le,W),Q=k=>Qh(ze(d.mount?u:c,k,n.shouldUnregister?ze(c,k,[]):[])),de=(k,W,le={})=>{const Ce=ze(i,k);let we=W;if(Ce){const je=Ce._f;je&&(!je.disabled&&wt(u,k,Dy(W,je)),we=Xc(je.ref)&&Pn(W)?"":W,_y(je.ref)?[...je.ref.options].forEach(Ae=>Ae.selected=we.includes(Ae.value)):je.refs?co(je.ref)?je.refs.forEach(Ae=>{(!Ae.defaultChecked||!Ae.disabled)&&(Array.isArray(we)?Ae.checked=!!we.find(Pe=>Pe===Ae.value):Ae.checked=we===Ae.value||!!we)}):je.refs.forEach(Ae=>Ae.checked=Ae.value===we):Wh(je.ref)?je.ref.value="":(je.ref.value=we,je.ref.type||w.state.next({name:k,values:pn(u)})))}(le.shouldDirty||le.shouldTouch)&&U(k,we,le.shouldTouch,le.shouldDirty,!0),le.shouldValidate&&be(k)},xe=(k,W,le)=>{for(const Ce in W){if(!W.hasOwnProperty(Ce))return;const we=W[Ce],je=k+"."+Ce,Ae=ze(i,je);(m.array.has(k)||nn(we)||Ae&&!Ae._f)&&!Ca(we)?xe(je,we,le):de(je,we,le)}},z=(k,W,le={})=>{const Ce=ze(i,k),we=m.array.has(k),je=pn(W);wt(u,k,je),we?(w.array.next({name:k,values:pn(u)}),(b.isDirty||b.dirtyFields||y.isDirty||y.dirtyFields)&&le.shouldDirty&&w.state.next({name:k,dirtyFields:ki(c,u),isDirty:J(k,je)})):Ce&&!Ce._f&&!Pn(je)?xe(k,je,le):de(k,je,le),J0(k,m)&&w.state.next({...r,name:k}),w.state.next({name:d.mount?k:void 0,values:pn(u)})},ee=async k=>{d.mount=!0;const W=k.target;let le=W.name,Ce=!0;const we=ze(i,le),je=Ge=>{Ce=Number.isNaN(Ge)||Ca(Ge)&&isNaN(Ge.getTime())||Kr(Ge,ze(u,le,Ge))},Ae=Y0(n.mode),Pe=Y0(n.reValidateMode);if(we){let Ge,Nt;const Ne=W.type?K0(we._f):V5(k),ke=k.type===Q0.BLUR||k.type===Q0.FOCUS_OUT,Ie=!rT(we._f)&&!n.resolver&&!ze(r.errors,le)&&!we._f.deps||lT(ke,ze(r.touchedFields,le),r.isSubmitted,Pe,Ae),Dt=J0(le,m,ke);wt(u,le,Ne),ke?(!W||!W.readOnly)&&(we._f.onBlur&&we._f.onBlur(k),x&&x(0)):we._f.onChange&&we._f.onChange(k);const it=U(le,Ne,ke),Pt=!In(it)||Dt;if(!ke&&w.state.next({name:le,type:k.type,values:pn(u)}),Ie)return(b.isValid||y.isValid)&&(n.mode==="onBlur"?ke&&j():ke||j()),Pt&&w.state.next({name:le,...Dt?{}:it});if(!ke&&Dt&&w.state.next({...r}),n.resolver){const{errors:Ct}=await $([le]);if(je(Ne),Ce){const yr=eb(r.errors,i,le),Un=eb(Ct,i,yr.name||le);Ge=Un.error,le=Un.name,Nt=In(Ct)}}else _([le],!0),Ge=(await nb(we,m.disabled,u,E,n.shouldUseNativeValidation))[le],_([le]),je(Ne),Ce&&(Ge?Nt=!1:(b.isValid||y.isValid)&&(Nt=await B(i,!0)));Ce&&(we._f.deps&&(!Array.isArray(we._f.deps)||we._f.deps.length>0)&&be(we._f.deps),V(le,Nt,Ge,it))}},K=(k,W)=>{if(ze(r.errors,W)&&k.focus)return k.focus(),1},be=async(k,W={})=>{let le,Ce;const we=Ql(k);if(n.resolver){const je=await re(Qt(k)?k:we);le=In(je),Ce=k?!we.some(Ae=>ze(je,Ae)):le}else k?(Ce=(await Promise.all(we.map(async je=>{const Ae=ze(i,je);return await B(Ae&&Ae._f?{[je]:Ae}:Ae)}))).every(Boolean),!(!Ce&&!r.isValid)&&j()):Ce=le=await B(i);return w.state.next({...!os(k)||(b.isValid||y.isValid)&&le!==r.isValid?{}:{name:k},...n.resolver||!k?{isValid:le}:{},errors:r.errors}),W.shouldFocus&&!Ce&&Il(i,K,k?we:m.mount),Ce},ve=(k,W)=>{let le={...d.mount?u:c};return W&&(le=Cy(W.dirtyFields?r.dirtyFields:r.touchedFields,le)),Qt(k)?le:os(k)?ze(le,k):k.map(Ce=>ze(le,Ce))},C=(k,W)=>({invalid:!!ze((W||r).errors,k),isDirty:!!ze((W||r).dirtyFields,k),error:ze((W||r).errors,k),isValidating:!!ze(r.validatingFields,k),isTouched:!!ze((W||r).touchedFields,k)}),I=k=>{k&&Ql(k).forEach(W=>tn(r.errors,W)),w.state.next({errors:k?r.errors:{}})},ae=(k,W,le)=>{const Ce=(ze(i,k,{_f:{}})._f||{}).ref,we=ze(r.errors,k)||{},{ref:je,message:Ae,type:Pe,...Ge}=we;wt(r.errors,k,{...Ge,...W,ref:Ce}),w.state.next({name:k,errors:r.errors,isValid:!1}),le&&le.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},M=(k,W)=>Us(k)?w.state.subscribe({next:le=>"values"in le&&k(ce(void 0,W),le)}):ce(k,W,!0),F=k=>w.state.subscribe({next:W=>{iT(k.name,W.name,k.exact)&&aT(W,k.formState||b,Ue,k.reRenderRoot)&&k.callback({values:{...u},...r,...W,defaultValues:c})}}).unsubscribe,G=k=>(d.mount=!0,y={...y,...k.formState},F({...k,formState:y})),te=(k,W={})=>{for(const le of k?Ql(k):m.mount)m.mount.delete(le),m.array.delete(le),W.keepValue||(tn(i,le),tn(u,le)),!W.keepError&&tn(r.errors,le),!W.keepDirty&&tn(r.dirtyFields,le),!W.keepTouched&&tn(r.touchedFields,le),!W.keepIsValidating&&tn(r.validatingFields,le),!n.shouldUnregister&&!W.keepDefaultValue&&tn(c,le);w.state.next({values:pn(u)}),w.state.next({...r,...W.keepDirty?{isDirty:J()}:{}}),!W.keepIsValid&&j()},L=({disabled:k,name:W})=>{(Is(k)&&d.mount||k||m.disabled.has(W))&&(k?m.disabled.add(W):m.disabled.delete(W))},ie=(k,W={})=>{let le=ze(i,k);const Ce=Is(W.disabled)||Is(n.disabled);return wt(i,k,{...le||{},_f:{...le&&le._f?le._f:{ref:{name:k}},name:k,mount:!0,...W}}),m.mount.add(k),le?L({disabled:Is(W.disabled)?W.disabled:n.disabled,name:k}):q(k,!0,W.value),{...Ce?{disabled:W.disabled||n.disabled}:{},...n.progressive?{required:!!W.required,min:Bl(W.min),max:Bl(W.max),minLength:Bl(W.minLength),maxLength:Bl(W.maxLength),pattern:Bl(W.pattern)}:{},name:k,onChange:ee,onBlur:ee,ref:we=>{if(we){ie(k,W),le=ze(i,k);const je=Qt(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Ae=X5(je),Pe=le._f.refs||[];if(Ae?Pe.find(Ge=>Ge===je):je===le._f.ref)return;wt(i,k,{_f:{...le._f,...Ae?{refs:[...Pe.filter(Zf),je,...Array.isArray(ze(c,k))?[{}]:[]],ref:{type:je.type,name:k}}:{ref:je}}}),q(k,!1,void 0,je)}else le=ze(i,k,{}),le._f&&(le._f.mount=!1),(n.shouldUnregister||W.shouldUnregister)&&!(I5(m.array,k)&&d.action)&&m.unMount.add(k)}}},me=()=>n.shouldFocusError&&Il(i,K,m.mount),Te=k=>{Is(k)&&(w.state.next({disabled:k}),Il(i,(W,le)=>{const Ce=ze(i,le);Ce&&(W.disabled=Ce._f.disabled||k,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(we=>{we.disabled=Ce._f.disabled||k}))},0,!1))},Fe=(k,W)=>async le=>{let Ce;le&&(le.preventDefault&&le.preventDefault(),le.persist&&le.persist());let we=pn(u);if(w.state.next({isSubmitting:!0}),n.resolver){const{errors:je,values:Ae}=await $();r.errors=je,we=pn(Ae)}else await B(i);if(m.disabled.size)for(const je of m.disabled)tn(we,je);if(tn(r.errors,"root"),In(r.errors)){w.state.next({errors:{}});try{await k(we,le)}catch(je){Ce=je}}else W&&await W({...r.errors},le),me(),setTimeout(me);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:In(r.errors)&&!Ce,submitCount:r.submitCount+1,errors:r.errors}),Ce)throw Ce},Se=(k,W={})=>{ze(i,k)&&(Qt(W.defaultValue)?z(k,pn(ze(c,k))):(z(k,W.defaultValue),wt(c,k,pn(W.defaultValue))),W.keepTouched||tn(r.touchedFields,k),W.keepDirty||(tn(r.dirtyFields,k),r.isDirty=W.defaultValue?J(k,pn(ze(c,k))):J()),W.keepError||(tn(r.errors,k),b.isValid&&j()),w.state.next({...r}))},_e=(k,W={})=>{const le=k?pn(k):c,Ce=pn(le),we=In(k),je=we?c:Ce;if(W.keepDefaultValues||(c=le),!W.keepValues){if(W.keepDirtyValues){const Ae=new Set([...m.mount,...Object.keys(ki(c,u))]);for(const Pe of Array.from(Ae))ze(r.dirtyFields,Pe)?wt(je,Pe,ze(u,Pe)):z(Pe,ze(je,Pe))}else{if(Vh&&Qt(k))for(const Ae of m.mount){const Pe=ze(i,Ae);if(Pe&&Pe._f){const Ge=Array.isArray(Pe._f.refs)?Pe._f.refs[0]:Pe._f.ref;if(Xc(Ge)){const Nt=Ge.closest("form");if(Nt){Nt.reset();break}}}}if(W.keepFieldsRef)for(const Ae of m.mount)z(Ae,ze(je,Ae));else i={}}u=n.shouldUnregister?W.keepDefaultValues?pn(c):{}:pn(je),w.array.next({values:{...je}}),w.state.next({values:{...je}})}m={mount:W.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!b.isValid||!!W.keepIsValid||!!W.keepDirtyValues,d.watch=!!n.shouldUnregister,w.state.next({submitCount:W.keepSubmitCount?r.submitCount:0,isDirty:we?!1:W.keepDirty?r.isDirty:!!(W.keepDefaultValues&&!Kr(k,c)),isSubmitted:W.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:we?{}:W.keepDirtyValues?W.keepDefaultValues&&u?ki(c,u):r.dirtyFields:W.keepDefaultValues&&k?ki(c,k):W.keepDirty?r.dirtyFields:{},touchedFields:W.keepTouched?r.touchedFields:{},errors:W.keepErrors?r.errors:{},isSubmitSuccessful:W.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},ne=(k,W)=>_e(Us(k)?k(u):k,W),Ee=(k,W={})=>{const le=ze(i,k),Ce=le&&le._f;if(Ce){const we=Ce.refs?Ce.refs[0]:Ce.ref;we.focus&&(we.focus(),W.shouldSelect&&Us(we.select)&&we.select())}},Ue=k=>{r={...r,...k}},tt={control:{register:ie,unregister:te,getFieldState:C,handleSubmit:Fe,setError:ae,_subscribe:F,_runSchema:$,_focusError:me,_getWatch:ce,_getDirty:J,_setValid:j,_setFieldArray:A,_setDisabledField:L,_setErrors:R,_getFieldArray:Q,_reset:_e,_resetDefaultValues:()=>Us(n.defaultValues)&&n.defaultValues().then(k=>{ne(k,n.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:Te,_subjects:w,_proxyFormState:b,get _fields(){return i},get _formValues(){return u},get _state(){return d},set _state(k){d=k},get _defaultValues(){return c},get _names(){return m},set _names(k){m=k},get _formState(){return r},get _options(){return n},set _options(k){n={...n,...k}}},subscribe:G,trigger:be,register:ie,handleSubmit:Fe,watch:M,setValue:z,getValues:ve,reset:ne,resetField:Se,clearErrors:I,unregister:te,setError:ae,setFocus:Ee,getFieldState:C};return{...tt,formControl:tt}}function Kh(e={}){const n=vt.useRef(void 0),r=vt.useRef(void 0),[i,c]=vt.useState({isDirty:!1,isValidating:!1,isLoading:Us(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Us(e.defaultValues)?void 0:e.defaultValues});if(!n.current)if(e.formControl)n.current={...e.formControl,formState:i},e.defaultValues&&!Us(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...m}=dT(e);n.current={...m,formState:i}}const u=n.current.control;return u._options=e,K5(()=>{const d=u._subscribe({formState:u._proxyFormState,callback:()=>c({...u._formState}),reRenderRoot:!0});return c(m=>({...m,isReady:!0})),u._formState.isReady=!0,d},[u]),vt.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),vt.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),vt.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),vt.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),vt.useEffect(()=>{if(u._proxyFormState.isDirty){const d=u._getDirty();d!==i.isDirty&&u._subjects.state.next({isDirty:d})}},[u,i.isDirty]),vt.useEffect(()=>{e.values&&!Kr(e.values,r.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),r.current=e.values,c(d=>({...d}))):u._resetDefaultValues()},[u,e.values]),vt.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),n.current.formState=G5(i,u),n.current}function ye(e,n,r){function i(m,x){var g;Object.defineProperty(m,"_zod",{value:m._zod??{},enumerable:!1}),(g=m._zod).traits??(g.traits=new Set),m._zod.traits.add(e),n(m,x);for(const b in d.prototype)b in m||Object.defineProperty(m,b,{value:d.prototype[b].bind(m)});m._zod.constr=d,m._zod.def=x}const c=r?.Parent??Object;class u extends c{}Object.defineProperty(u,"name",{value:e});function d(m){var x;const g=r?.Parent?new u:this;i(g,m),(x=g._zod).deferred??(x.deferred=[]);for(const b of g._zod.deferred)b();return g}return Object.defineProperty(d,"init",{value:i}),Object.defineProperty(d,Symbol.hasInstance,{value:m=>r?.Parent&&m instanceof r.Parent?!0:m?._zod?.traits?.has(e)}),Object.defineProperty(d,"name",{value:e}),d}class Ri extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Ry extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const My={};function Ma(e){return My}function fT(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>n.indexOf(+i)===-1).map(([i,c])=>c)}function fh(e,n){return typeof n=="bigint"?n.toString():n}function Yh(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function Xh(e){return e==null}function Jh(e){const n=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(n,r)}const sb=Symbol("evaluating");function Et(e,n,r){let i;Object.defineProperty(e,n,{get(){if(i!==sb)return i===void 0&&(i=sb,i=r()),i},set(c){Object.defineProperty(e,n,{value:c})},configurable:!0})}function La(e,n,r){Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ua(...e){const n={};for(const r of e){const i=Object.getOwnPropertyDescriptors(r);Object.assign(n,i)}return Object.defineProperties({},n)}function rb(e){return JSON.stringify(e)}const zy="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function eu(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const hT=Yh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Xl(e){if(eu(e)===!1)return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(eu(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Oy(e){return Xl(e)?{...e}:Array.isArray(e)?[...e]:e}const mT=new Set(["string","number","symbol"]);function Oi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ea(e,n,r){const i=new e._zod.constr(n??e._zod.def);return(!n||r?.parent)&&(i._zod.parent=e),i}function Qe(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function pT(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}function gT(e,n){const r=e._zod.def,i=Ua(e._zod.def,{get shape(){const c={};for(const u in n){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(c[u]=r.shape[u])}return La(this,"shape",c),c},checks:[]});return ea(e,i)}function xT(e,n){const r=e._zod.def,i=Ua(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const u in n){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&delete c[u]}return La(this,"shape",c),c},checks:[]});return ea(e,i)}function bT(e,n){if(!Xl(n))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=Ua(e._zod.def,{get shape(){const u={...e._zod.def.shape,...n};return La(this,"shape",u),u},checks:[]});return ea(e,c)}function vT(e,n){if(!Xl(n))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const i={...e._zod.def.shape,...n};return La(this,"shape",i),i},checks:e._zod.def.checks};return ea(e,r)}function yT(e,n){const r=Ua(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return La(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return ea(e,r)}function wT(e,n,r){const i=Ua(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(r)for(const d in r){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=e?new e({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)u[d]=e?new e({type:"optional",innerType:c[d]}):c[d];return La(this,"shape",u),u},checks:[]});return ea(n,i)}function ST(e,n,r){const i=Ua(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(r)for(const d in r){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);r[d]&&(u[d]=new e({type:"nonoptional",innerType:c[d]}))}else for(const d in c)u[d]=new e({type:"nonoptional",innerType:c[d]});return La(this,"shape",u),u},checks:[]});return ea(n,i)}function Ti(e,n=0){if(e.aborted===!0)return!0;for(let r=n;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Ly(e,n){return n.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(e),r})}function Uc(e){return typeof e=="string"?e:e?.message}function za(e,n,r){const i={...e,path:e.path??[]};if(!e.message){const c=Uc(e.inst?._zod.def?.error?.(e))??Uc(n?.error?.(e))??Uc(r.customError?.(e))??Uc(r.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function em(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Jl(...e){const[n,r,i]=e;return typeof n=="string"?{message:n,code:"custom",input:r,inst:i}:{...n}}const Uy=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,fh,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},tm=ye("$ZodError",Uy),hu=ye("$ZodError",Uy,{Parent:Error});function jT(e,n=r=>r.message){const r={},i=[];for(const c of e.issues)c.path.length>0?(r[c.path[0]]=r[c.path[0]]||[],r[c.path[0]].push(n(c))):i.push(n(c));return{formErrors:i,fieldErrors:r}}function ET(e,n=r=>r.message){const r={_errors:[]},i=c=>{for(const u of c.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>i({issues:d}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)r._errors.push(n(u));else{let d=r,m=0;for(;m<u.path.length;){const x=u.path[m];m===u.path.length-1?(d[x]=d[x]||{_errors:[]},d[x]._errors.push(n(u))):d[x]=d[x]||{_errors:[]},d=d[x],m++}}};return i(e),r}const mu=e=>(n,r,i,c)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},d=n._zod.run({value:r,issues:[]},u);if(d instanceof Promise)throw new Ri;if(d.issues.length){const m=new(c?.Err??e)(d.issues.map(x=>za(x,u,Ma())));throw zy(m,c?.callee),m}return d.value},NT=mu(hu),pu=e=>async(n,r,i,c)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let d=n._zod.run({value:r,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const m=new(c?.Err??e)(d.issues.map(x=>za(x,u,Ma())));throw zy(m,c?.callee),m}return d.value},CT=pu(hu),gu=e=>(n,r,i)=>{const c=i?{...i,async:!1}:{async:!1},u=n._zod.run({value:r,issues:[]},c);if(u instanceof Promise)throw new Ri;return u.issues.length?{success:!1,error:new(e??tm)(u.issues.map(d=>za(d,c,Ma())))}:{success:!0,data:u.value}},_T=gu(hu),xu=e=>async(n,r,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:r,issues:[]},c);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>za(d,c,Ma())))}:{success:!0,data:u.value}},kT=xu(hu),TT=e=>(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return mu(e)(n,r,c)},DT=e=>(n,r,i)=>mu(e)(n,r,i),AT=e=>async(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return pu(e)(n,r,c)},RT=e=>async(n,r,i)=>pu(e)(n,r,i),MT=e=>(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return gu(e)(n,r,c)},zT=e=>(n,r,i)=>gu(e)(n,r,i),OT=e=>async(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return xu(e)(n,r,c)},LT=e=>async(n,r,i)=>xu(e)(n,r,i),UT=/^[cC][^\s-]{8,}$/,BT=/^[0-9a-z]+$/,qT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$T=/^[0-9a-vA-V]{20}$/,HT=/^[A-Za-z0-9]{27}$/,ZT=/^[a-zA-Z0-9_-]{21}$/,FT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,VT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ab=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,QT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,IT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function PT(){return new RegExp(IT,"u")}const WT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,GT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,KT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,YT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,XT=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,By=/^[A-Za-z0-9_-]*$/,JT=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,eD=/^\+(?:[0-9]){6,14}[0-9]$/,qy="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",tD=new RegExp(`^${qy}$`);function $y(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function nD(e){return new RegExp(`^${$y(e)}$`)}function sD(e){const n=$y({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${r.join("|")})`;return new RegExp(`^${qy}T(?:${i})$`)}const rD=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},aD=/^[^A-Z]*$/,iD=/^[^a-z]*$/,Ks=ye("$ZodCheck",(e,n)=>{var r;e._zod??(e._zod={}),e._zod.def=n,(r=e._zod).onattach??(r.onattach=[])}),lD=ye("$ZodCheckMaxLength",(e,n)=>{var r;Ks.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!Xh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<c&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=n.maximum)return;const d=em(c);i.issues.push({origin:d,code:"too_big",maximum:n.maximum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),oD=ye("$ZodCheckMinLength",(e,n)=>{var r;Ks.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!Xh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>c&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=n.minimum)return;const d=em(c);i.issues.push({origin:d,code:"too_small",minimum:n.minimum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),cD=ye("$ZodCheckLengthEquals",(e,n)=>{var r;Ks.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!Xh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=n.length,c.maximum=n.length,c.length=n.length}),e._zod.check=i=>{const c=i.value,u=c.length;if(u===n.length)return;const d=em(c),m=u>n.length;i.issues.push({origin:d,...m?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),bu=ye("$ZodCheckStringFormat",(e,n)=>{var r,i;Ks.init(e,n),e._zod.onattach.push(c=>{const u=c._zod.bag;u.format=n.format,n.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(n.pattern))}),n.pattern?(r=e._zod).check??(r.check=c=>{n.pattern.lastIndex=0,!n.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:n.format,input:c.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),uD=ye("$ZodCheckRegex",(e,n)=>{bu.init(e,n),e._zod.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),dD=ye("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=aD),bu.init(e,n)}),fD=ye("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=iD),bu.init(e,n)}),hD=ye("$ZodCheckIncludes",(e,n)=>{Ks.init(e,n);const r=Oi(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${r}`:r);n.pattern=i,e._zod.onattach.push(c=>{const u=c._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=c=>{c.value.includes(n.includes,n.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:c.value,inst:e,continue:!n.abort})}}),mD=ye("$ZodCheckStartsWith",(e,n)=>{Ks.init(e,n);const r=new RegExp(`^${Oi(n.prefix)}.*`);n.pattern??(n.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),pD=ye("$ZodCheckEndsWith",(e,n)=>{Ks.init(e,n);const r=new RegExp(`.*${Oi(n.suffix)}$`);n.pattern??(n.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),gD=ye("$ZodCheckOverwrite",(e,n)=>{Ks.init(e,n),e._zod.check=r=>{r.value=n.tx(r.value)}});class xD{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(d=>d),c=Math.min(...i.map(d=>d.length-d.trimStart().length)),u=i.map(d=>d.slice(c)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const n=Function,r=this?.args,c=[...(this?.content??[""]).map(u=>`  ${u}`)];return new n(...r,c.join(`
`))}}const bD={major:4,minor:1,patch:12},rn=ye("$ZodType",(e,n)=>{var r;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=bD;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const u of c._zod.onattach)u(e);if(i.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(d,m,x)=>{let g=Ti(d),b;for(const y of m){if(y._zod.def.when){if(!y._zod.def.when(d))continue}else if(g)continue;const w=d.issues.length,E=y._zod.check(d);if(E instanceof Promise&&x?.async===!1)throw new Ri;if(b||E instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await E,d.issues.length!==w&&(g||(g=Ti(d,w)))});else{if(d.issues.length===w)continue;g||(g=Ti(d,w))}}return b?b.then(()=>d):d},u=(d,m,x)=>{if(Ti(d))return d.aborted=!0,d;const g=c(m,i,x);if(g instanceof Promise){if(x.async===!1)throw new Ri;return g.then(b=>e._zod.parse(b,x))}return e._zod.parse(g,x)};e._zod.run=(d,m)=>{if(m.skipChecks)return e._zod.parse(d,m);if(m.direction==="backward"){const g=e._zod.parse({value:d.value,issues:[]},{...m,skipChecks:!0});return g instanceof Promise?g.then(b=>u(b,d,m)):u(g,d,m)}const x=e._zod.parse(d,m);if(x instanceof Promise){if(m.async===!1)throw new Ri;return x.then(g=>c(g,i,m))}return c(x,i,m)}}e["~standard"]={validate:c=>{try{const u=_T(e,c);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return kT(e,c).then(d=>d.success?{value:d.data}:{issues:d.error?.issues})}},vendor:"zod",version:1}}),nm=ye("$ZodString",(e,n)=>{rn.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??rD(e._zod.bag),e._zod.parse=(r,i)=>{if(n.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Rt=ye("$ZodStringFormat",(e,n)=>{bu.init(e,n),nm.init(e,n)}),vD=ye("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=VT),Rt.init(e,n)}),yD=ye("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=ab(i))}else n.pattern??(n.pattern=ab());Rt.init(e,n)}),wD=ye("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=QT),Rt.init(e,n)}),SD=ye("$ZodURL",(e,n)=>{Rt.init(e,n),e._zod.check=r=>{try{const i=r.value.trim(),c=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(c.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:JT.source,input:r.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:r.value,inst:e,continue:!n.abort})),n.normalize?r.value=c.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!n.abort})}}}),jD=ye("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=PT()),Rt.init(e,n)}),ED=ye("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=ZT),Rt.init(e,n)}),ND=ye("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=UT),Rt.init(e,n)}),CD=ye("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=BT),Rt.init(e,n)}),_D=ye("$ZodULID",(e,n)=>{n.pattern??(n.pattern=qT),Rt.init(e,n)}),kD=ye("$ZodXID",(e,n)=>{n.pattern??(n.pattern=$T),Rt.init(e,n)}),TD=ye("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=HT),Rt.init(e,n)}),DD=ye("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=sD(n)),Rt.init(e,n)}),AD=ye("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=tD),Rt.init(e,n)}),RD=ye("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=nD(n)),Rt.init(e,n)}),MD=ye("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=FT),Rt.init(e,n)}),zD=ye("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=WT),Rt.init(e,n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv4"})}),OD=ye("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=GT),Rt.init(e,n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!n.abort})}}}),LD=ye("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=KT),Rt.init(e,n)}),UD=ye("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=YT),Rt.init(e,n),e._zod.check=r=>{const i=r.value.split("/");try{if(i.length!==2)throw new Error;const[c,u]=i;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${c}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!n.abort})}}});function Hy(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const BD=ye("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=XT),Rt.init(e,n),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Hy(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!n.abort})}});function qD(e){if(!By.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=n.padEnd(Math.ceil(n.length/4)*4,"=");return Hy(r)}const $D=ye("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=By),Rt.init(e,n),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{qD(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!n.abort})}}),HD=ye("$ZodE164",(e,n)=>{n.pattern??(n.pattern=eD),Rt.init(e,n)});function ZD(e,n=null){try{const r=e.split(".");if(r.length!==3)return!1;const[i]=r;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||n&&(!("alg"in c)||c.alg!==n))}catch{return!1}}const FD=ye("$ZodJWT",(e,n)=>{Rt.init(e,n),e._zod.check=r=>{ZD(r.value,n.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!n.abort})}}),VD=ye("$ZodUnknown",(e,n)=>{rn.init(e,n),e._zod.parse=r=>r}),QD=ye("$ZodNever",(e,n)=>{rn.init(e,n),e._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function ib(e,n,r){e.issues.length&&n.issues.push(...Ly(r,e.issues)),n.value[r]=e.value}const ID=ye("$ZodArray",(e,n)=>{rn.init(e,n),e._zod.parse=(r,i)=>{const c=r.value;if(!Array.isArray(c))return r.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),r;r.value=Array(c.length);const u=[];for(let d=0;d<c.length;d++){const m=c[d],x=n.element._zod.run({value:m,issues:[]},i);x instanceof Promise?u.push(x.then(g=>ib(g,r,d))):ib(x,r,d)}return u.length?Promise.all(u).then(()=>r):r}});function tu(e,n,r,i){e.issues.length&&n.issues.push(...Ly(r,e.issues)),e.value===void 0?r in i&&(n.value[r]=void 0):n.value[r]=e.value}function Zy(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const r=pT(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(r)}}function Fy(e,n,r,i,c,u){const d=[],m=c.keySet,x=c.catchall._zod,g=x.def.type;for(const b of Object.keys(n)){if(m.has(b))continue;if(g==="never"){d.push(b);continue}const y=x.run({value:n[b],issues:[]},i);y instanceof Promise?e.push(y.then(w=>tu(w,r,b,n))):tu(y,r,b,n)}return d.length&&r.issues.push({code:"unrecognized_keys",keys:d,input:n,inst:u}),e.length?Promise.all(e).then(()=>r):r}const PD=ye("$ZodObject",(e,n)=>{if(rn.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const m=n.shape;Object.defineProperty(n,"shape",{get:()=>{const x={...m};return Object.defineProperty(n,"shape",{value:x}),x}})}const i=Yh(()=>Zy(n));Et(e._zod,"propValues",()=>{const m=n.shape,x={};for(const g in m){const b=m[g]._zod;if(b.values){x[g]??(x[g]=new Set);for(const y of b.values)x[g].add(y)}}return x});const c=eu,u=n.catchall;let d;e._zod.parse=(m,x)=>{d??(d=i.value);const g=m.value;if(!c(g))return m.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),m;m.value={};const b=[],y=d.shape;for(const w of d.keys){const N=y[w]._zod.run({value:g[w],issues:[]},x);N instanceof Promise?b.push(N.then(j=>tu(j,m,w,g))):tu(N,m,w,g)}return u?Fy(b,g,m,x,i.value,e):b.length?Promise.all(b).then(()=>m):m}}),WD=ye("$ZodObjectJIT",(e,n)=>{PD.init(e,n);const r=e._zod.parse,i=Yh(()=>Zy(n)),c=w=>{const E=new xD(["shape","payload","ctx"]),N=i.value,j=R=>{const q=rb(R);return`shape[${q}]._zod.run({ value: input[${q}], issues: [] }, ctx)`};E.write("const input = payload.value;");const _=Object.create(null);let A=0;for(const R of N.keys)_[R]=`key_${A++}`;E.write("const newResult = {};");for(const R of N.keys){const q=_[R],U=rb(R);E.write(`const ${q} = ${j(R)};`),E.write(`
        if (${q}.issues.length) {
          payload.issues = payload.issues.concat(${q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${U}, ...iss.path] : [${U}]
          })));
        }
        
        
        if (${q}.value === undefined) {
          if (${U} in input) {
            newResult[${U}] = undefined;
          }
        } else {
          newResult[${U}] = ${q}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const D=E.compile();return(R,q)=>D(w,R,q)};let u;const d=eu,m=!My.jitless,g=m&&hT.value,b=n.catchall;let y;e._zod.parse=(w,E)=>{y??(y=i.value);const N=w.value;return d(N)?m&&g&&E?.async===!1&&E.jitless!==!0?(u||(u=c(n.shape)),w=u(w,E),b?Fy([],N,w,E,y,e):w):r(w,E):(w.issues.push({expected:"object",code:"invalid_type",input:N,inst:e}),w)}});function lb(e,n,r,i){for(const u of e)if(u.issues.length===0)return n.value=u.value,n;const c=e.filter(u=>!Ti(u));return c.length===1?(n.value=c[0].value,c[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:r,errors:e.map(u=>u.issues.map(d=>za(d,i,Ma())))}),n)}const GD=ye("$ZodUnion",(e,n)=>{rn.init(e,n),Et(e._zod,"optin",()=>n.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Et(e._zod,"optout",()=>n.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Et(e._zod,"values",()=>{if(n.options.every(c=>c._zod.values))return new Set(n.options.flatMap(c=>Array.from(c._zod.values)))}),Et(e._zod,"pattern",()=>{if(n.options.every(c=>c._zod.pattern)){const c=n.options.map(u=>u._zod.pattern);return new RegExp(`^(${c.map(u=>Jh(u.source)).join("|")})$`)}});const r=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(c,u)=>{if(r)return i(c,u);let d=!1;const m=[];for(const x of n.options){const g=x._zod.run({value:c.value,issues:[]},u);if(g instanceof Promise)m.push(g),d=!0;else{if(g.issues.length===0)return g;m.push(g)}}return d?Promise.all(m).then(x=>lb(x,c,e,u)):lb(m,c,e,u)}}),KD=ye("$ZodIntersection",(e,n)=>{rn.init(e,n),e._zod.parse=(r,i)=>{const c=r.value,u=n.left._zod.run({value:c,issues:[]},i),d=n.right._zod.run({value:c,issues:[]},i);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([x,g])=>ob(r,x,g)):ob(r,u,d)}});function hh(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Xl(e)&&Xl(n)){const r=Object.keys(n),i=Object.keys(e).filter(u=>r.indexOf(u)!==-1),c={...e,...n};for(const u of i){const d=hh(e[u],n[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};c[u]=d.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let i=0;i<e.length;i++){const c=e[i],u=n[i],d=hh(c,u);if(!d.valid)return{valid:!1,mergeErrorPath:[i,...d.mergeErrorPath]};r.push(d.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ob(e,n,r){if(n.issues.length&&e.issues.push(...n.issues),r.issues.length&&e.issues.push(...r.issues),Ti(e))return e;const i=hh(n.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const YD=ye("$ZodEnum",(e,n)=>{rn.init(e,n);const r=fT(n.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=new RegExp(`^(${r.filter(c=>mT.has(typeof c)).map(c=>typeof c=="string"?Oi(c):c.toString()).join("|")})$`),e._zod.parse=(c,u)=>{const d=c.value;return i.has(d)||c.issues.push({code:"invalid_value",values:r,input:d,inst:e}),c}}),XD=ye("$ZodLiteral",(e,n)=>{if(rn.init(e,n),n.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(n.values),e._zod.pattern=new RegExp(`^(${n.values.map(r=>typeof r=="string"?Oi(r):r?Oi(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,i)=>{const c=r.value;return e._zod.values.has(c)||r.issues.push({code:"invalid_value",values:n.values,input:c,inst:e}),r}}),JD=ye("$ZodTransform",(e,n)=>{rn.init(e,n),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Ry(e.constructor.name);const c=n.transform(r.value,r);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(d=>(r.value=d,r));if(c instanceof Promise)throw new Ri;return r.value=c,r}});function cb(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const eA=ye("$ZodOptional",(e,n)=>{rn.init(e,n),e._zod.optin="optional",e._zod.optout="optional",Et(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),Et(e._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${Jh(r.source)})?$`):void 0}),e._zod.parse=(r,i)=>{if(n.innerType._zod.optin==="optional"){const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>cb(u,r.value)):cb(c,r.value)}return r.value===void 0?r:n.innerType._zod.run(r,i)}}),tA=ye("$ZodNullable",(e,n)=>{rn.init(e,n),Et(e._zod,"optin",()=>n.innerType._zod.optin),Et(e._zod,"optout",()=>n.innerType._zod.optout),Et(e._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${Jh(r.source)}|null)$`):void 0}),Et(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(r,i)=>r.value===null?r:n.innerType._zod.run(r,i)}),nA=ye("$ZodDefault",(e,n)=>{rn.init(e,n),e._zod.optin="optional",Et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);if(r.value===void 0)return r.value=n.defaultValue,r;const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>ub(u,n)):ub(c,n)}});function ub(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const sA=ye("$ZodPrefault",(e,n)=>{rn.init(e,n),e._zod.optin="optional",Et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=n.defaultValue),n.innerType._zod.run(r,i))}),rA=ye("$ZodNonOptional",(e,n)=>{rn.init(e,n),Et(e._zod,"values",()=>{const r=n.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),e._zod.parse=(r,i)=>{const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>db(u,e)):db(c,e)}});function db(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const aA=ye("$ZodCatch",(e,n)=>{rn.init(e,n),Et(e._zod,"optin",()=>n.innerType._zod.optin),Et(e._zod,"optout",()=>n.innerType._zod.optout),Et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>(r.value=u.value,u.issues.length&&(r.value=n.catchValue({...r,error:{issues:u.issues.map(d=>za(d,i,Ma()))},input:r.value}),r.issues=[]),r)):(r.value=c.value,c.issues.length&&(r.value=n.catchValue({...r,error:{issues:c.issues.map(u=>za(u,i,Ma()))},input:r.value}),r.issues=[]),r)}}),iA=ye("$ZodPipe",(e,n)=>{rn.init(e,n),Et(e._zod,"values",()=>n.in._zod.values),Et(e._zod,"optin",()=>n.in._zod.optin),Et(e._zod,"optout",()=>n.out._zod.optout),Et(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(r,i)=>{if(i.direction==="backward"){const u=n.out._zod.run(r,i);return u instanceof Promise?u.then(d=>Bc(d,n.in,i)):Bc(u,n.in,i)}const c=n.in._zod.run(r,i);return c instanceof Promise?c.then(u=>Bc(u,n.out,i)):Bc(c,n.out,i)}});function Bc(e,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},r)}const lA=ye("$ZodReadonly",(e,n)=>{rn.init(e,n),Et(e._zod,"propValues",()=>n.innerType._zod.propValues),Et(e._zod,"values",()=>n.innerType._zod.values),Et(e._zod,"optin",()=>n.innerType._zod.optin),Et(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(fb):fb(c)}});function fb(e){return e.value=Object.freeze(e.value),e}const oA=ye("$ZodCustom",(e,n)=>{Ks.init(e,n),rn.init(e,n),e._zod.parse=(r,i)=>r,e._zod.check=r=>{const i=r.value,c=n.fn(i);if(c instanceof Promise)return c.then(u=>hb(u,r,i,e));hb(c,r,i,e)}});function hb(e,n,r,i){if(!e){const c={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),n.issues.push(Jl(c))}}class cA{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...r){const i=r[0];if(this._map.set(n,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,n)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const r=this._map.get(n);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(n),this}get(n){const r=n._zod.parent;if(r){const i={...this.get(r)??{}};delete i.id;const c={...i,...this._map.get(n)};return Object.keys(c).length?c:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function uA(){return new cA}const qc=uA();function dA(e,n){return new e({type:"string",...Qe(n)})}function fA(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Qe(n)})}function mb(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Qe(n)})}function hA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Qe(n)})}function mA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Qe(n)})}function pA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Qe(n)})}function gA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Qe(n)})}function xA(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Qe(n)})}function bA(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Qe(n)})}function vA(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Qe(n)})}function yA(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Qe(n)})}function wA(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Qe(n)})}function SA(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Qe(n)})}function jA(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Qe(n)})}function EA(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Qe(n)})}function NA(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Qe(n)})}function CA(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Qe(n)})}function _A(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Qe(n)})}function kA(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Qe(n)})}function TA(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Qe(n)})}function DA(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Qe(n)})}function AA(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Qe(n)})}function RA(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Qe(n)})}function MA(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Qe(n)})}function zA(e,n){return new e({type:"string",format:"date",check:"string_format",...Qe(n)})}function OA(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Qe(n)})}function LA(e,n){return new e({type:"string",format:"duration",check:"string_format",...Qe(n)})}function UA(e){return new e({type:"unknown"})}function BA(e,n){return new e({type:"never",...Qe(n)})}function Vy(e,n){return new lD({check:"max_length",...Qe(n),maximum:e})}function nu(e,n){return new oD({check:"min_length",...Qe(n),minimum:e})}function Qy(e,n){return new cD({check:"length_equals",...Qe(n),length:e})}function qA(e,n){return new uD({check:"string_format",format:"regex",...Qe(n),pattern:e})}function $A(e){return new dD({check:"string_format",format:"lowercase",...Qe(e)})}function HA(e){return new fD({check:"string_format",format:"uppercase",...Qe(e)})}function ZA(e,n){return new hD({check:"string_format",format:"includes",...Qe(n),includes:e})}function FA(e,n){return new mD({check:"string_format",format:"starts_with",...Qe(n),prefix:e})}function VA(e,n){return new pD({check:"string_format",format:"ends_with",...Qe(n),suffix:e})}function uo(e){return new gD({check:"overwrite",tx:e})}function QA(e){return uo(n=>n.normalize(e))}function IA(){return uo(e=>e.trim())}function PA(){return uo(e=>e.toLowerCase())}function WA(){return uo(e=>e.toUpperCase())}function GA(e,n,r){return new e({type:"array",element:n,...Qe(r)})}function KA(e,n,r){return new e({type:"custom",check:"custom",fn:n,...Qe(r)})}function YA(e){const n=XA(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(Jl(i,r.value,n._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=r.value),c.inst??(c.inst=n),c.continue??(c.continue=!n._zod.def.abort),r.issues.push(Jl(c))}},e(r.value,r)));return n}function XA(e,n){const r=new Ks({check:"custom",...Qe(n)});return r._zod.check=e,r}const JA=ye("ZodISODateTime",(e,n)=>{DD.init(e,n),Lt.init(e,n)});function e4(e){return MA(JA,e)}const t4=ye("ZodISODate",(e,n)=>{AD.init(e,n),Lt.init(e,n)});function n4(e){return zA(t4,e)}const s4=ye("ZodISOTime",(e,n)=>{RD.init(e,n),Lt.init(e,n)});function r4(e){return OA(s4,e)}const a4=ye("ZodISODuration",(e,n)=>{MD.init(e,n),Lt.init(e,n)});function i4(e){return LA(a4,e)}const l4=(e,n)=>{tm.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ET(e,r)},flatten:{value:r=>jT(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,fh,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,fh,2)}},isEmpty:{get(){return e.issues.length===0}}})},Es=ye("ZodError",l4,{Parent:Error}),o4=mu(Es),c4=pu(Es),u4=gu(Es),d4=xu(Es),f4=TT(Es),h4=DT(Es),m4=AT(Es),p4=RT(Es),g4=MT(Es),x4=zT(Es),b4=OT(Es),v4=LT(Es),un=ye("ZodType",(e,n)=>(rn.init(e,n),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...r)=>e.clone(Ua(n,{checks:[...n.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(r,i)=>ea(e,r,i),e.brand=()=>e,e.register=((r,i)=>(r.add(e,i),e)),e.parse=(r,i)=>o4(e,r,i,{callee:e.parse}),e.safeParse=(r,i)=>u4(e,r,i),e.parseAsync=async(r,i)=>c4(e,r,i,{callee:e.parseAsync}),e.safeParseAsync=async(r,i)=>d4(e,r,i),e.spa=e.safeParseAsync,e.encode=(r,i)=>f4(e,r,i),e.decode=(r,i)=>h4(e,r,i),e.encodeAsync=async(r,i)=>m4(e,r,i),e.decodeAsync=async(r,i)=>p4(e,r,i),e.safeEncode=(r,i)=>g4(e,r,i),e.safeDecode=(r,i)=>x4(e,r,i),e.safeEncodeAsync=async(r,i)=>b4(e,r,i),e.safeDecodeAsync=async(r,i)=>v4(e,r,i),e.refine=(r,i)=>e.check(cR(r,i)),e.superRefine=r=>e.check(uR(r)),e.overwrite=r=>e.check(uo(r)),e.optional=()=>bb(e),e.nullable=()=>vb(e),e.nullish=()=>bb(vb(e)),e.nonoptional=r=>nR(e,r),e.array=()=>Py(e),e.or=r=>V4([e,r]),e.and=r=>I4(e,r),e.transform=r=>yb(e,K4(r)),e.default=r=>J4(e,r),e.prefault=r=>tR(e,r),e.catch=r=>rR(e,r),e.pipe=r=>yb(e,r),e.readonly=()=>lR(e),e.describe=r=>{const i=e.clone();return qc.add(i,{description:r}),i},Object.defineProperty(e,"description",{get(){return qc.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return qc.get(e);const i=e.clone();return qc.add(i,r[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Iy=ye("_ZodString",(e,n)=>{nm.init(e,n),un.init(e,n);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...i)=>e.check(qA(...i)),e.includes=(...i)=>e.check(ZA(...i)),e.startsWith=(...i)=>e.check(FA(...i)),e.endsWith=(...i)=>e.check(VA(...i)),e.min=(...i)=>e.check(nu(...i)),e.max=(...i)=>e.check(Vy(...i)),e.length=(...i)=>e.check(Qy(...i)),e.nonempty=(...i)=>e.check(nu(1,...i)),e.lowercase=i=>e.check($A(i)),e.uppercase=i=>e.check(HA(i)),e.trim=()=>e.check(IA()),e.normalize=(...i)=>e.check(QA(...i)),e.toLowerCase=()=>e.check(PA()),e.toUpperCase=()=>e.check(WA())}),y4=ye("ZodString",(e,n)=>{nm.init(e,n),Iy.init(e,n),e.email=r=>e.check(fA(w4,r)),e.url=r=>e.check(xA(S4,r)),e.jwt=r=>e.check(RA(U4,r)),e.emoji=r=>e.check(bA(j4,r)),e.guid=r=>e.check(mb(pb,r)),e.uuid=r=>e.check(hA($c,r)),e.uuidv4=r=>e.check(mA($c,r)),e.uuidv6=r=>e.check(pA($c,r)),e.uuidv7=r=>e.check(gA($c,r)),e.nanoid=r=>e.check(vA(E4,r)),e.guid=r=>e.check(mb(pb,r)),e.cuid=r=>e.check(yA(N4,r)),e.cuid2=r=>e.check(wA(C4,r)),e.ulid=r=>e.check(SA(_4,r)),e.base64=r=>e.check(TA(z4,r)),e.base64url=r=>e.check(DA(O4,r)),e.xid=r=>e.check(jA(k4,r)),e.ksuid=r=>e.check(EA(T4,r)),e.ipv4=r=>e.check(NA(D4,r)),e.ipv6=r=>e.check(CA(A4,r)),e.cidrv4=r=>e.check(_A(R4,r)),e.cidrv6=r=>e.check(kA(M4,r)),e.e164=r=>e.check(AA(L4,r)),e.datetime=r=>e.check(e4(r)),e.date=r=>e.check(n4(r)),e.time=r=>e.check(r4(r)),e.duration=r=>e.check(i4(r))});function Ln(e){return dA(y4,e)}const Lt=ye("ZodStringFormat",(e,n)=>{Rt.init(e,n),Iy.init(e,n)}),w4=ye("ZodEmail",(e,n)=>{wD.init(e,n),Lt.init(e,n)}),pb=ye("ZodGUID",(e,n)=>{vD.init(e,n),Lt.init(e,n)}),$c=ye("ZodUUID",(e,n)=>{yD.init(e,n),Lt.init(e,n)}),S4=ye("ZodURL",(e,n)=>{SD.init(e,n),Lt.init(e,n)}),j4=ye("ZodEmoji",(e,n)=>{jD.init(e,n),Lt.init(e,n)}),E4=ye("ZodNanoID",(e,n)=>{ED.init(e,n),Lt.init(e,n)}),N4=ye("ZodCUID",(e,n)=>{ND.init(e,n),Lt.init(e,n)}),C4=ye("ZodCUID2",(e,n)=>{CD.init(e,n),Lt.init(e,n)}),_4=ye("ZodULID",(e,n)=>{_D.init(e,n),Lt.init(e,n)}),k4=ye("ZodXID",(e,n)=>{kD.init(e,n),Lt.init(e,n)}),T4=ye("ZodKSUID",(e,n)=>{TD.init(e,n),Lt.init(e,n)}),D4=ye("ZodIPv4",(e,n)=>{zD.init(e,n),Lt.init(e,n)}),A4=ye("ZodIPv6",(e,n)=>{OD.init(e,n),Lt.init(e,n)}),R4=ye("ZodCIDRv4",(e,n)=>{LD.init(e,n),Lt.init(e,n)}),M4=ye("ZodCIDRv6",(e,n)=>{UD.init(e,n),Lt.init(e,n)}),z4=ye("ZodBase64",(e,n)=>{BD.init(e,n),Lt.init(e,n)}),O4=ye("ZodBase64URL",(e,n)=>{$D.init(e,n),Lt.init(e,n)}),L4=ye("ZodE164",(e,n)=>{HD.init(e,n),Lt.init(e,n)}),U4=ye("ZodJWT",(e,n)=>{FD.init(e,n),Lt.init(e,n)}),B4=ye("ZodUnknown",(e,n)=>{VD.init(e,n),un.init(e,n)});function gb(){return UA(B4)}const q4=ye("ZodNever",(e,n)=>{QD.init(e,n),un.init(e,n)});function $4(e){return BA(q4,e)}const H4=ye("ZodArray",(e,n)=>{ID.init(e,n),un.init(e,n),e.element=n.element,e.min=(r,i)=>e.check(nu(r,i)),e.nonempty=r=>e.check(nu(1,r)),e.max=(r,i)=>e.check(Vy(r,i)),e.length=(r,i)=>e.check(Qy(r,i)),e.unwrap=()=>e.element});function Py(e,n){return GA(H4,e,n)}const Z4=ye("ZodObject",(e,n)=>{WD.init(e,n),un.init(e,n),Et(e,"shape",()=>n.shape),e.keyof=()=>P4(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:gb()}),e.loose=()=>e.clone({...e._zod.def,catchall:gb()}),e.strict=()=>e.clone({...e._zod.def,catchall:$4()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>bT(e,r),e.safeExtend=r=>vT(e,r),e.merge=r=>yT(e,r),e.pick=r=>gT(e,r),e.omit=r=>xT(e,r),e.partial=(...r)=>wT(Wy,e,r[0]),e.required=(...r)=>ST(Gy,e,r[0])});function fo(e,n){const r={type:"object",shape:e??{},...Qe(n)};return new Z4(r)}const F4=ye("ZodUnion",(e,n)=>{GD.init(e,n),un.init(e,n),e.options=n.options});function V4(e,n){return new F4({type:"union",options:e,...Qe(n)})}const Q4=ye("ZodIntersection",(e,n)=>{KD.init(e,n),un.init(e,n)});function I4(e,n){return new Q4({type:"intersection",left:e,right:n})}const mh=ye("ZodEnum",(e,n)=>{YD.init(e,n),un.init(e,n),e.enum=n.entries,e.options=Object.values(n.entries);const r=new Set(Object.keys(n.entries));e.extract=(i,c)=>{const u={};for(const d of i)if(r.has(d))u[d]=n.entries[d];else throw new Error(`Key ${d} not found in enum`);return new mh({...n,checks:[],...Qe(c),entries:u})},e.exclude=(i,c)=>{const u={...n.entries};for(const d of i)if(r.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new mh({...n,checks:[],...Qe(c),entries:u})}});function P4(e,n){const r=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new mh({type:"enum",entries:r,...Qe(n)})}const W4=ye("ZodLiteral",(e,n)=>{XD.init(e,n),un.init(e,n),e.values=new Set(n.values),Object.defineProperty(e,"value",{get(){if(n.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return n.values[0]}})});function xb(e,n){return new W4({type:"literal",values:Array.isArray(e)?e:[e],...Qe(n)})}const G4=ye("ZodTransform",(e,n)=>{JD.init(e,n),un.init(e,n),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Ry(e.constructor.name);r.addIssue=u=>{if(typeof u=="string")r.issues.push(Jl(u,r.value,n));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=r.value),d.inst??(d.inst=e),r.issues.push(Jl(d))}};const c=n.transform(r.value,r);return c instanceof Promise?c.then(u=>(r.value=u,r)):(r.value=c,r)}});function K4(e){return new G4({type:"transform",transform:e})}const Wy=ye("ZodOptional",(e,n)=>{eA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType});function bb(e){return new Wy({type:"optional",innerType:e})}const Y4=ye("ZodNullable",(e,n)=>{tA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType});function vb(e){return new Y4({type:"nullable",innerType:e})}const X4=ye("ZodDefault",(e,n)=>{nA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function J4(e,n){return new X4({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Oy(n)}})}const eR=ye("ZodPrefault",(e,n)=>{sA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType});function tR(e,n){return new eR({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Oy(n)}})}const Gy=ye("ZodNonOptional",(e,n)=>{rA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType});function nR(e,n){return new Gy({type:"nonoptional",innerType:e,...Qe(n)})}const sR=ye("ZodCatch",(e,n)=>{aA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function rR(e,n){return new sR({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const aR=ye("ZodPipe",(e,n)=>{iA.init(e,n),un.init(e,n),e.in=n.in,e.out=n.out});function yb(e,n){return new aR({type:"pipe",in:e,out:n})}const iR=ye("ZodReadonly",(e,n)=>{lA.init(e,n),un.init(e,n),e.unwrap=()=>e._zod.def.innerType});function lR(e){return new iR({type:"readonly",innerType:e})}const oR=ye("ZodCustom",(e,n)=>{oA.init(e,n),un.init(e,n)});function cR(e,n={}){return KA(oR,e,n)}function uR(e){return YA(e)}const wb=(e,n,r)=>{if(e&&"reportValidity"in e){const i=ze(r,n);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},ph=(e,n)=>{for(const r in n.fields){const i=n.fields[r];i&&i.ref&&"reportValidity"in i.ref?wb(i.ref,r,e):i&&i.refs&&i.refs.forEach(c=>wb(c,r,e))}},Sb=(e,n)=>{n.shouldUseNativeValidation&&ph(e,n);const r={};for(const i in e){const c=ze(n.fields,i),u=Object.assign(e[i]||{},{ref:c&&c.ref});if(dR(n.names||Object.keys(e),i)){const d=Object.assign({},ze(r,i));wt(d,"root",u),wt(r,i,d)}else wt(r,i,u)}return r},dR=(e,n)=>{const r=jb(n);return e.some(i=>jb(i).match(`^${r}\\.\\d+`))};function jb(e){return e.replace(/\]|\[/g,"")}function Eb(e,n){try{var r=e()}catch(i){return n(i)}return r&&r.then?r.then(void 0,n):r}function fR(e,n){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,d=i.path.join(".");if(!r[d])if("unionErrors"in i){var m=i.unionErrors[0].errors[0];r[d]={message:m.message,type:m.code}}else r[d]={message:u,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(b){return b.errors.forEach(function(y){return e.push(y)})}),n){var x=r[d].types,g=x&&x[i.code];r[d]=Ph(d,n,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function hR(e,n){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,d=i.path.join(".");if(!r[d])if(i.code==="invalid_union"&&i.errors.length>0){var m=i.errors[0][0];r[d]={message:m.message,type:m.code}}else r[d]={message:u,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(b){return b.forEach(function(y){return e.push(y)})}),n){var x=r[d].types,g=x&&x[i.code];r[d]=Ph(d,n,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function sm(e,n,r){if(r===void 0&&(r={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,u){try{return Promise.resolve(Eb(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,n)).then(function(d){return u.shouldUseNativeValidation&&ph({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(m){return Array.isArray(m?.issues)})(d))return{values:{},errors:Sb(fR(d.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,u){try{return Promise.resolve(Eb(function(){return Promise.resolve((r.mode==="sync"?NT:CT)(e,i,n)).then(function(d){return u.shouldUseNativeValidation&&ph({},u),{errors:{},values:r.raw?Object.assign({},i):d}})},function(d){if((function(m){return m instanceof tm})(d))return{values:{},errors:Sb(hR(d.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw d}))}catch(d){return Promise.reject(d)}};throw new Error("Invalid input: not a Zod schema")}function mR(e){const n=pt();return sn({mutationFn:r=>Aj(e,r),onSuccess:r=>{n.setQueryData(It.list(rv),i=>i&&{...i,items:i.items.map(c=>c.id===r.id?r:c)}),n.invalidateQueries({queryKey:It.detail(e),exact:!1})}})}async function pR(e={}){const{page:n,pageSize:r,search:i,includeTotal:c,signal:u}=e,d={};typeof n=="number"&&n>0&&(d.page=n),typeof r=="number"&&r>0&&(d.page_size=r),c&&(d.include_total=!0);const m=i?.trim();m&&(d.q=m);const{data:x}=await Ze.GET("/api/v1/users",{params:{query:d},signal:u});if(!x)throw new Error("Expected user page payload.");return x}function Ky(e={}){const{enabled:n=!0,search:r="",pageSize:i}=e,c=r.trim(),u=c.length>=2?c:"",d=Vb({queryKey:["users","all",{search:c,pageSize:i}],initialPageParam:1,queryFn:({pageParam:g,signal:b})=>pR(gR({page:typeof g=="number"?g:1,pageSize:i,search:u||void 0,signal:b})),getNextPageParam:g=>g.has_next?g.page+1:void 0,enabled:n,staleTime:6e4}),m=p.useCallback(g=>g.id,[]),x=vy(d.data?.pages,m);return{...d,users:x}}function gR(e){const n=!e.page||e.page<1?1:e.page;return{...e,page:n}}const eo=200;function xR(e){const n={page:1,pageSize:eo,includeTotal:!0};return xn({queryKey:It.members(e,n),queryFn:({signal:r})=>Rj(e,{signal:r,pageSize:eo,includeTotal:!0}),enabled:e.length>0,staleTime:15e3,placeholderData:r=>r})}function bR(e){const n=pt(),r=It.members(e,{page:1,pageSize:eo,includeTotal:!0});return sn({mutationFn:async({user:i,roleIds:c})=>{const u={user_id:i.id,role_ids:Array.from(c)};return Mj(e,u)},onMutate:async({user:i,roleIds:c})=>{await n.cancelQueries({queryKey:r});const u=n.getQueryData(r),d={user_id:i.id,role_ids:Array.from(c),role_slugs:[],created_at:new Date().toISOString(),user:i};return n.setQueryData(r,m=>m&&{...m,items:[d,...m.items],total:typeof m.total=="number"?m.total+1:m.total}),{previous:u,optimisticId:d.user_id}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:(i,c,u)=>{n.setQueryData(r,d=>d&&(u?{...d,items:d.items.map(m=>m.user_id===u.optimisticId?{...i,user:m.user??i.user}:m)}:{...d,items:[i,...d.items],total:typeof d.total=="number"?d.total+1:d.total}))},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function vR(e){const n=pt(),r=It.members(e,{page:1,pageSize:eo,includeTotal:!0});return sn({mutationFn:({userId:i,roleIds:c})=>zj(e,i,{role_ids:Array.from(c)}),onMutate:async({userId:i,roleIds:c})=>{await n.cancelQueries({queryKey:r});const u=n.getQueryData(r);return n.setQueryData(r,d=>d&&{...d,items:d.items.map(m=>m.user_id===i?{...m,role_ids:Array.from(c)}:m)}),{previous:u}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:i=>{n.setQueryData(r,c=>c&&{...c,items:c.items.map(u=>u.user_id===i.user_id?{...i,user:u.user??i.user}:u)})},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function yR(e){const n=pt(),r=It.members(e,{page:1,pageSize:eo,includeTotal:!0});return sn({mutationFn:i=>Oj(e,i),onMutate:async i=>{await n.cancelQueries({queryKey:r});const c=n.getQueryData(r);return n.setQueryData(r,u=>{if(!u)return u;const d=u.items.filter(m=>m.user_id!==i);return{...u,items:d,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}}),{previous:c}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}const Li=200,Nb=200;function Yy(e){const n={page:1,pageSize:Li,includeTotal:!0};return xn({queryKey:It.roles(e,n),queryFn:({signal:r})=>Lj({signal:r,pageSize:Li,includeTotal:!0}),enabled:e.length>0,staleTime:15e3,placeholderData:r=>r})}function wR(){const e={scope:"global",page:1,pageSize:Nb,includeTotal:!1};return xn({queryKey:It.permissions(e),queryFn:({signal:n})=>$j({signal:n,scope:"global",pageSize:Nb}),staleTime:6e4,placeholderData:n=>n})}function SR(e){const n=pt(),r=It.roles(e,{page:1,pageSize:Li});return sn({mutationFn:i=>Uj(e,i),onMutate:async i=>{await n.cancelQueries({queryKey:r});const c=n.getQueryData(r),u={id:`optimistic-${Date.now()}`,slug:i.slug??i.name.toLowerCase().replace(/\s+/g,"-"),name:i.name,description:i.description??null,permissions:Array.from(i.permissions??[]),is_system:!1,is_editable:!0,created_at:new Date().toISOString(),updated_at:null};return n.setQueryData(r,d=>Cb(d,u)),{previous:c,optimisticId:u.id}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:(i,c,u)=>{n.setQueryData(r,d=>d&&(u?{...d,items:d.items.map(m=>m.id===u.optimisticId?i:m)}:Cb(d,i)))},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function jR(e){const n=pt(),r=It.roles(e,{page:1,pageSize:Li});return sn({mutationFn:({roleId:i,payload:c})=>Bj(e,i,c),onMutate:async({roleId:i,payload:c})=>{await n.cancelQueries({queryKey:r});const u=n.getQueryData(r);return n.setQueryData(r,d=>d&&{...d,items:d.items.map(m=>m.id===i?{...m,name:c.name??m.name,description:c.description??null,permissions:Array.from(c.permissions??[])}:m)}),{previous:u}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:i=>{n.setQueryData(r,c=>c&&{...c,items:c.items.map(u=>u.id===i.id?i:u)})},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function ER(e){const n=pt(),r=It.roles(e,{page:1,pageSize:Li});return sn({mutationFn:i=>qj(e,i),onMutate:async i=>{await n.cancelQueries({queryKey:r});const c=n.getQueryData(r);return n.setQueryData(r,u=>{if(!u)return u;const d=u.items.filter(m=>m.id!==i);return{...u,items:d,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}}),{previous:c}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function Cb(e,n){return e?{...e,items:[n,...e.items],total:typeof e.total=="number"?e.total+1:e.total}:{items:[n],page:1,page_size:Li,has_next:!1,has_previous:!1,total:1}}const NR={sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function CR(e,n){if(e&&e.trim().length>0){const r=e.trim().split(/\s+/u),i=r[0]?.[0],c=r[r.length-1]?.[0];if(i)return`${i}${c??""}`.toUpperCase()}return n&&n.trim().length>0?n.trim()[0]?.toUpperCase():"?"}function _R({name:e,email:n,size:r="md",className:i}){const c=p.useMemo(()=>CR(e,n),[e,n]);return l.jsx("span",{"aria-hidden":"true",className:ge("inline-flex select-none items-center justify-center rounded-full bg-gradient-to-br from-brand-100 via-brand-200 to-brand-300 font-semibold text-brand-900 shadow-sm",NR[r],i),children:c})}function kR(){const{workspace:e,hasPermission:n}=Xr(),r=n("workspace.members.manage"),i=xR(e.id),c=Yy(e.id),u=bR(e.id),d=vR(e.id),m=yR(e.id),[x,g]=p.useState(null),[b,y]=p.useState([]),[w,E]=p.useState(""),[N,j]=p.useState([]),[_,A]=p.useState(""),[D,R]=p.useState(""),[q,U]=p.useState(""),[V,$]=p.useState(null);p.useEffect(()=>{const ne=window.setTimeout(()=>{R(_.trim())},250);return()=>window.clearTimeout(ne)},[_]);const re=Ky({enabled:r,search:D,pageSize:50}),B=p.useMemo(()=>{const ne=new Map;for(const Ee of re.users)ne.set(Ee.id,Ee);return ne},[re.users]),H=p.useMemo(()=>{const ne=new Map;for(const Ee of c.data?.items??[])ne.set(Ee.id,Ee);return ne},[c.data]),J=p.useMemo(()=>{const Ee=(i.data?.items??[]).map(qe=>({...qe,user:qe.user??B.get(qe.user_id)})),Ue=new Intl.Collator("en",{sensitivity:"base"});return Ee.sort((qe,tt)=>{const k=qe.user?.display_name??qe.user?.email??qe.user_id,W=tt.user?.display_name??tt.user?.email??tt.user_id;return Ue.compare(k??"",W??"")})},[i.data,B]),ce=p.useMemo(()=>new Set(J.map(ne=>ne.user?.id??ne.user_id)),[J]),Q=q.trim().toLowerCase(),de=p.useMemo(()=>Q?J.filter(ne=>{const Ee=ne.user?.display_name??"",Ue=ne.user?.email??"";return Ee.toLowerCase().includes(Q)||Ue.toLowerCase().includes(Q)||ne.user_id.toLowerCase().includes(Q)}):J,[J,Q]),xe=re.isPending&&re.users.length===0,z=re.isFetchingNextPage,ee=p.useMemo(()=>{const ne=new Intl.Collator("en",{sensitivity:"base"});return re.users.filter(Ee=>!ce.has(Ee.id)).sort((Ee,Ue)=>{const qe=Ee.display_name??Ee.email,tt=Ue.display_name??Ue.email;return ne.compare(qe??"",tt??"")})},[ce,re.users]),K=_.trim().toLowerCase(),ve=D.trim().toLowerCase().length>=2,C=_.trim().length>0&&_.trim().length<2,I=p.useMemo(()=>!K||ve?ee:ee.filter(ne=>(ne.display_name??"").toLowerCase().includes(K)||ne.email.toLowerCase().includes(K)),[ee,K,ve]),ae=p.useMemo(()=>ee.find(ne=>ne.id===w),[ee,w]),M=p.useMemo(()=>{const ne=new Intl.Collator("en",{sensitivity:"base"});return(c.data?.items??[]).sort((Ee,Ue)=>ne.compare(Ee.name,Ue.name))},[c.data]),F=(ne,Ee)=>{y(Ue=>Ee?Ue.includes(ne)?Ue:[...Ue,ne]:Ue.filter(qe=>qe!==ne))},G=(ne,Ee)=>{j(Ue=>Ee?Ue.includes(ne)?Ue:[...Ue,ne]:Ue.filter(qe=>qe!==ne))},te=ne=>{g(ne.user_id),y(ne.role_ids),$(null)},L=()=>{g(null),y([])},ie=()=>{x&&($(null),d.mutate({userId:x,roleIds:b},{onSuccess:()=>{$({tone:"success",message:"Member roles updated."}),L()},onError:ne=>{const Ee=ne instanceof Error?ne.message:"Unable to update member roles.";$({tone:"danger",message:Ee})}}))},me=ne=>{!r||!window.confirm(`Remove ${ne.user?.display_name??ne.user?.email??ne.user_id} from the workspace?`)||($(null),m.mutate(ne.user_id,{onSuccess:()=>{$({tone:"success",message:"Member removed."})},onError:Ue=>{const qe=Ue instanceof Error?Ue.message:"Unable to remove member.";$({tone:"danger",message:qe})}}))},Te=u.isPending,Fe=!!w&&N.length>0,Se=async ne=>{ne.preventDefault(),$(null);try{if(!w){$({tone:"danger",message:"Select a user to add."});return}if(N.length===0){$({tone:"danger",message:"Select at least one role for this member."});return}const Ee=ee.find(Ue=>Ue.id===w)??B.get(w);if(!Ee){$({tone:"danger",message:"Selected user is no longer available."});return}await u.mutateAsync({user:Ee,roleIds:N}),E(""),j([]),A(""),$({tone:"success",message:`${Ee.display_name??Ee.email} added to the workspace.`})}catch(Ee){const Ue=Ee instanceof Error?Ee.message:"Unable to add member.";$({tone:"danger",message:Ue})}};p.useEffect(()=>{ae&&(I.some(ne=>ne.id===ae.id)||A(""))},[I,ae]);const _e=()=>{E(""),A(""),j([])};return l.jsxs("div",{className:"space-y-6",children:[V?l.jsx(St,{tone:V.tone,children:V.message}):null,i.isError?l.jsx(St,{tone:"danger",children:i.error instanceof Error?i.error.message:"Unable to load workspace members."}):null,c.isError?l.jsx(St,{tone:"warning",children:c.error instanceof Error?c.error.message:"Unable to load workspace roles."}):null,r?l.jsxs("form",{onSubmit:Se,className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Add member"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Add an existing teammate and choose the roles that reflect what they should be able to do here."})]}),re.isError?l.jsx(St,{tone:"warning",children:"We couldn't load the user directory. Retry or add a member later."}):null,l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx(Ot,{label:"Search directory",hint:"Filter by name or email to quickly find a teammate.",children:l.jsx($t,{value:_,onChange:ne=>A(ne.target.value),placeholder:"e.g. Casey or casey@example.com",disabled:Te||xe})}),C?l.jsx("p",{className:"text-xs text-slate-500",children:"Enter at least two characters to search the full directory."}):null,re.isError?l.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load users. Try again shortly."}):null,l.jsx(Ot,{label:"User",required:!0,children:l.jsxs(Ra,{value:w,onChange:ne=>{E(ne.target.value),ne.target.value&&A("")},disabled:Te||xe,required:!0,children:[l.jsx("option",{value:"",children:"Select a user"}),ae&&!I.some(ne=>ne.id===ae.id)?l.jsx("option",{value:ae.id,children:ae.display_name?`${ae.display_name} (${ae.email})`:ae.email}):null,I.map(ne=>l.jsx("option",{value:ne.id,children:ne.display_name?`${ne.display_name} (${ne.email})`:ne.email},ne.id))]})}),I.length===0&&_?l.jsxs("p",{className:"text-xs text-slate-500",children:['No users matched "',_,'". Clear the search to see everyone.']}):null,re.hasNextPage?l.jsx("div",{className:"pt-2",children:l.jsx(Oe,{type:"button",variant:"ghost",onClick:()=>re.fetchNextPage(),disabled:xe||z,children:z?"Loading more users":"Load more users"})}):null]}),l.jsxs("fieldset",{className:"space-y-3",children:[l.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Roles"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Roles control which actions a member can perform inside this workspace."}),l.jsx("div",{className:"flex flex-wrap gap-2",children:M.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No workspace roles available yet."}):M.map(ne=>l.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:N.includes(ne.id),onChange:Ee=>G(ne.id,Ee.target.checked),disabled:Te}),l.jsx("span",{children:ne.name})]},ne.id))}),N.length>0?l.jsxs("p",{className:"text-xs text-slate-500",children:[N.length," role(s) selected."]}):null]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[w||_||N.length>0?l.jsx(Oe,{type:"button",variant:"ghost",onClick:_e,disabled:Te,children:"Clear"}):null,l.jsx(Oe,{type:"submit",isLoading:Te,disabled:!Fe||Te,children:"Add member"})]})]}):l.jsx(St,{tone:"info",children:"You do not have permission to manage workspace members. Contact an administrator for access."}),l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Current members"}),l.jsx("p",{className:"text-sm text-slate-500",children:i.isLoading?"Loading members":`${J.length} member${J.length===1?"":"s"}`})]}),l.jsx(Ot,{label:"Search members",className:"w-full max-w-xs",children:l.jsx($t,{value:q,onChange:ne=>U(ne.target.value),placeholder:"Search by name, email, or ID",disabled:i.isLoading})})]}),i.isLoading?l.jsx("p",{className:"text-sm text-slate-600",children:"Loading members"}):J.length===0?l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:"No members yet. Add teammates to collaborate on this workspace."}):de.length===0?l.jsxs("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:['No members match "',q,'".']}):l.jsx("ul",{className:"space-y-4",role:"list",children:de.map(ne=>{const Ee=ne.user?.display_name??ne.user?.email??ne.user_id,Ue=ne.role_ids.map(tt=>H.get(tt)?.name??tt),qe=x===ne.user_id;return l.jsxs("li",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(_R,{name:ne.user?.display_name,email:ne.user?.email,size:"sm"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:Ee}),l.jsx("p",{className:"text-sm text-slate-500",children:ne.user?.email??ne.user_id}),l.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:l.jsxs("span",{children:["ID: ",ne.user_id]})})]})]}),r?l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>qe?L():te(ne),disabled:d.isPending||m.isPending||qe&&d.isPending,children:qe?"Cancel":"Manage roles"}),l.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>me(ne),disabled:m.isPending,children:"Remove"})]}):null]}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Ue.length>0?Ue.map(tt=>l.jsx("span",{className:"inline-flex items-center rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm",children:tt},`${ne.user_id}-${tt}`)):l.jsx("span",{className:"text-xs text-slate-500",children:"No roles assigned."})}),qe?l.jsxs("div",{className:"mt-4 space-y-3 rounded-lg border border-slate-200 bg-white p-4",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Assign roles"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(tt=>l.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:b.includes(tt.id),onChange:k=>F(tt.id,k.target.checked),disabled:d.isPending}),l.jsx("span",{children:tt.name})]},tt.id))}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:L,disabled:d.isPending,children:"Cancel"}),l.jsx(Oe,{type:"button",size:"sm",onClick:ie,isLoading:d.isPending,disabled:d.isPending,children:"Save roles"})]})]}):null]},ne.user_id)})})]})]})}const TR=fo({name:Ln().min(1,"Role name is required.").max(150,"Keep the name under 150 characters."),slug:Ln().max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.").optional().or(xb("")),description:Ln().max(500,"Keep the description concise.").optional().or(xb("")),permissions:Py(Ln())});function DR(){const{workspace:e,hasPermission:n}=Xr(),r=n("workspace.roles.manage"),i=Yy(e.id),c=wR(),u=SR(e.id),d=jR(e.id),m=ER(e.id),[x,g]=p.useState(!1),[b,y]=p.useState(null),[w,E]=p.useState(null),N=p.useMemo(()=>(c.data?.items??[]).filter(V=>V.scope_type==="workspace"),[c.data]),j=p.useMemo(()=>{const V=new Map;for(const $ of N)V.set($.key,$);return V},[N]),_=i.data?.items??[],A=()=>{E(null),g(!0),y(null)},D=()=>{g(!1)},R=V=>{E(null),y(V.id),g(!1)},q=()=>{y(null)},U=V=>{!r||V.is_system||!V.is_editable||!window.confirm(`Delete the role "${V.name}"? This action cannot be undone.`)||(E(null),m.mutate(V.id,{onSuccess:()=>{E({tone:"success",message:"Role deleted."})},onError:re=>{const B=re instanceof Error?re.message:"Unable to delete role.";E({tone:"danger",message:B})}}))};return l.jsxs("div",{className:"space-y-6",children:[w?l.jsx(St,{tone:w.tone,children:w.message}):null,i.isError?l.jsx(St,{tone:"danger",children:i.error instanceof Error?i.error.message:"Unable to load workspace roles."}):null,c.isError?l.jsx(St,{tone:"warning",children:c.error instanceof Error?c.error.message:"Unable to load permission catalog."}):null,r?l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Create role"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Compose a custom role by selecting workspace permissions."})]}),l.jsx(Oe,{type:"button",variant:x?"ghost":"primary",onClick:()=>x?D():A(),children:x?"Hide form":"New role"})]}),x?l.jsx("div",{className:"mt-4",children:l.jsx(_b,{availablePermissions:N,allowSlugEdit:!0,onCancel:D,onSubmit:V=>{E(null),u.mutate({name:V.name.trim(),slug:V.slug?V.slug.trim():void 0,description:V.description?.trim()?V.description.trim():void 0,permissions:V.permissions},{onSuccess:()=>{E({tone:"success",message:"Role created."}),D()},onError:$=>{const re=$ instanceof Error?$.message:"Unable to create role.";E({tone:"danger",message:re})}})},isSubmitting:u.isPending},"create-role")}):null]}):null,l.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsx("header",{className:"flex flex-wrap items-center justify-between gap-2",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Workspace roles"}),l.jsx("p",{className:"text-sm text-slate-500",children:i.isLoading?"Loading roles":`${_.length} role${_.length===1?"":"s"}`})]})}),i.isLoading?l.jsx("p",{className:"text-sm text-slate-600",children:"Loading roles"}):_.length===0?l.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:"No workspace roles yet. Create one to tailor permissions for your team."}):l.jsx("ul",{className:"space-y-4",role:"list",children:_.map(V=>{const $=b===V.id,re=V.permissions.map(B=>j.get(B)?.label??B);return l.jsxs("li",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[l.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:"text-base font-semibold text-slate-900",children:V.name}),V.is_system?l.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-200 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"System"}):null,V.is_editable?null:l.jsx("span",{className:"inline-flex items-center rounded-full bg-warning-100 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-warning-700",children:"Locked"})]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Slug: ",V.slug]}),V.description?l.jsx("p",{className:"text-sm text-slate-600",children:V.description}):null]}),r&&V.is_editable?l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>$?q():R(V),disabled:d.isPending||m.isPending,children:$?"Cancel":"Edit"}),V.is_system?null:l.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>U(V),disabled:m.isPending||V.is_system||!V.is_editable,children:"Delete"})]}):null]}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:re.length>0?re.map(B=>l.jsx("span",{className:"inline-flex items-center rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm",children:B},`${V.id}-${B}`)):l.jsx("span",{className:"text-xs text-slate-500",children:"No permissions assigned."})}),$?l.jsx("div",{className:"mt-4",children:l.jsx(_b,{availablePermissions:N,initialValues:{name:V.name,slug:V.slug,description:V.description??"",permissions:V.permissions},allowSlugEdit:!1,onCancel:q,onSubmit:B=>{E(null),d.mutate({roleId:V.id,payload:{name:B.name.trim(),description:B.description?.trim()?B.description.trim():void 0,permissions:B.permissions}},{onSuccess:()=>{E({tone:"success",message:"Role updated."}),q()},onError:H=>{const J=H instanceof Error?H.message:"Unable to update role.";E({tone:"danger",message:J})}})},isSubmitting:d.isPending},V.id)}):null]},V.id)})})]})]})}function _b({availablePermissions:e,initialValues:n,onSubmit:r,onCancel:i,isSubmitting:c,allowSlugEdit:u=!0}){const{register:d,handleSubmit:m,watch:x,setValue:g,formState:{errors:b},reset:y}=Kh({resolver:sm(TR),defaultValues:n??{name:"",slug:"",description:"",permissions:[]}});p.useEffect(()=>{n&&y(n)},[n,y]);const w=x("permissions"),E=(j,_)=>{g("permissions",_?Array.from(new Set([...w??[],j])):(w??[]).filter(A=>A!==j))},N=m(j=>{const _={name:j.name.trim(),slug:u?j.slug?.trim()??"":n?.slug??"",description:j.description?.trim()??"",permissions:j.permissions??[]};r(_)});return l.jsxs("form",{className:"space-y-4 rounded-xl border border-slate-200 bg-white p-4",onSubmit:N,noValidate:!0,children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("label",{className:"space-y-2 text-sm font-medium text-slate-700",children:["Role name",l.jsx($t,{...d("name"),placeholder:"Data reviewer",invalid:!!b.name,disabled:c}),b.name?l.jsx("span",{className:"block text-xs font-semibold text-danger-600",children:b.name.message}):null]}),u?l.jsxs("label",{className:"space-y-2 text-sm font-medium text-slate-700",children:["Role slug",l.jsx($t,{...d("slug"),placeholder:"data-reviewer",invalid:!!b.slug,disabled:c}),l.jsx("span",{className:"block text-xs text-slate-500",children:"Optional. Leave blank to auto-generate from the name."}),b.slug?l.jsx("span",{className:"block text-xs font-semibold text-danger-600",children:b.slug.message}):null]}):null]}),l.jsxs("label",{className:"space-y-2 text-sm font-medium text-slate-700",children:["Description",l.jsx($t,{...d("description"),placeholder:"What does this role control?",invalid:!!b.description,disabled:c}),b.description?l.jsx("span",{className:"block text-xs font-semibold text-danger-600",children:b.description.message}):null]}),l.jsxs("fieldset",{className:"space-y-3",children:[l.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Permissions"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:e.length===0?l.jsx("p",{className:"text-xs text-slate-500",children:"No workspace permissions available."}):e.map(j=>l.jsxs("label",{className:"flex items-start gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[l.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-300",checked:w?.includes(j.key)??!1,onChange:_=>E(j.key,_.target.checked),disabled:c}),l.jsxs("span",{children:[l.jsx("span",{className:"block font-semibold",children:j.label}),l.jsx("span",{className:"block text-xs text-slate-500",children:j.description})]})]},j.key))})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[i?l.jsx(Oe,{type:"button",variant:"ghost",onClick:i,disabled:c,children:"Cancel"}):null,l.jsx(Oe,{type:"submit",isLoading:c,children:"Save role"})]})]})}function Xy(){const e=Oa(),n=Fh(),r=Wk(),[i,c]=p.useState(Ps),u=n.data;p.useEffect(()=>{u?.detail&&c(u.detail)},[u?.detail]);const d=p.useMemo(()=>(e.user.permissions??[]).map(y=>y.toLowerCase()).includes("system.settings.manage"),[e.user.permissions]),m=n.isFetching||r.isPending,x=i.trim()||Ps,g=b=>{r.mutate({enabled:b,detail:x},{onSuccess:y=>{c(y.detail)}})};return l.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"ADE safe mode"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Toggle whether streamed runs should short-circuit before invoking the ADE engine. Use this to pause execution during maintenance or while verifying a new config release."})]}),n.isError?l.jsx(St,{tone:"danger",children:"Unable to load safe mode status."}):null,d?null:l.jsxs(St,{tone:"warning",children:["You need the ",l.jsx("strong",{children:"system.settings.manage"})," permission to change safe mode."]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("span",{className:u?.enabled?"inline-flex rounded-full bg-amber-100 px-3 py-1 font-semibold text-amber-800":"inline-flex rounded-full bg-emerald-100 px-3 py-1 font-semibold text-emerald-800",children:u?.enabled?"Safe mode enabled":"Safe mode disabled"}),l.jsx("span",{className:"text-slate-500",children:n.isFetching?"Checking safe mode state...":u?.detail??Ps})]}),l.jsx(Ot,{label:"Safe mode message",hint:"Shown in the health check and workspace banner when safe mode is active.",children:l.jsx(Ey,{value:i,onChange:b=>c(b.target.value),disabled:!d||m})}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>c(u?.detail??Ps),disabled:!d||m,children:"Reset message"}),l.jsx(Oe,{type:"button",variant:u?.enabled?"primary":"danger",onClick:()=>g(!u?.enabled),isLoading:r.isPending,disabled:!d,children:u?.enabled?"Disable safe mode":"Enable safe mode"})]})]})}Xy.displayName="SafeModeControls";const Jy=[{id:"general",label:"General"},{id:"members",label:"Members"},{id:"roles",label:"Roles"}],AR=new Set(Jy.map(e=>e.id)),Ff=e=>!!(e&&AR.has(e));function RR(){Xr();const[e,n]=Bh(),r=e.get("view"),i=Ff(r)?r:"general";p.useEffect(()=>{if(r&&!Ff(r)){const u=new URLSearchParams(e);u.set("view","general"),n(u,{replace:!0})}},[r,e,n]);const c=u=>{if(!Ff(u))return;const d=new URLSearchParams(e);d.set("view",u),n(d,{replace:!0})};return l.jsx(Ch,{value:i,onValueChange:c,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(_h,{className:"flex gap-2 rounded-full border border-slate-200 bg-white p-1 shadow-soft","aria-label":"Workspace settings views",children:Jy.map(u=>{const d=u.id===i;return l.jsx(ql,{value:u.id,className:`rounded-full px-4 py-1 text-sm font-medium focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-500 ${d?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:u.label},u.id)})}),l.jsx(ka,{value:"general","aria-live":"polite",children:i==="general"?l.jsx(zR,{}):null}),l.jsx(ka,{value:"members","aria-live":"polite",children:i==="members"?l.jsx(kR,{}):null}),l.jsx(ka,{value:"roles","aria-live":"polite",children:i==="roles"?l.jsx(DR,{}):null})]})})}const MR=fo({name:Ln().min(1,"Workspace name is required.").max(255,"Keep the name under 255 characters."),slug:Ln().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.")});function zR(){const{workspace:e}=Xr(),n=mR(e.id),[r,i]=p.useState(null),{register:c,handleSubmit:u,formState:{errors:d,isDirty:m},reset:x}=Kh({resolver:sm(MR),defaultValues:{name:e.name,slug:e.slug}});p.useEffect(()=>{x({name:e.name,slug:e.slug})},[x,e.name,e.slug]);const g=u(b=>{i(null),n.mutate({name:b.name.trim(),slug:b.slug.trim()},{onSuccess:()=>{i("Workspace details saved.")}})});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("form",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",onSubmit:g,noValidate:!0,children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Workspace identity"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Update the name and slug. Changes apply immediately across navigation and shared links."})]}),r?l.jsx(St,{tone:"success",children:r}):null,n.isError?l.jsx(St,{tone:"danger",children:n.error instanceof Error?n.error.message:"Unable to save workspace details."}):null,l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsx(Ot,{label:"Workspace name",required:!0,error:d.name?.message,children:l.jsx($t,{...c("name"),placeholder:"Finance Operations",invalid:!!d.name,disabled:n.isPending})}),l.jsx(Ot,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier.",required:!0,error:d.slug?.message,children:l.jsx($t,{...c("slug"),placeholder:"finance-ops",invalid:!!d.slug,disabled:n.isPending})})]}),l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx(Oe,{type:"button",variant:"ghost",onClick:()=>{x(),i(null)},disabled:n.isPending||!m,children:"Reset"}),l.jsx(Oe,{type:"submit",isLoading:n.isPending,disabled:!m,children:"Save changes"})]})]}),l.jsx(Xy,{})]})}function OR(){return l.jsx(lu,{children:l.jsx(LR,{})})}function LR(){const e=js(),n=Nn(),r=pt(),i=ou(),c=p.useMemo(()=>i.data?.items??[],[i.data?.items]),u=qR(e.pathname),d=p.useMemo(()=>HR(c,u),[c,u]);return p.useEffect(()=>{i.data&&r.setQueryData(It.list(rv),i.data)},[r,i.data]),p.useEffect(()=>{!i.isLoading&&!i.isError&&c.length===0&&n("/workspaces",{replace:!0})},[i.isLoading,i.isError,c.length,n]),p.useEffect(()=>{d&&!u&&n(`/workspaces/${d.id}/${Mi.path}${e.search}${e.hash}`,{replace:!0})},[d,u,e.search,e.hash,n]),p.useEffect(()=>{if(!(!d||!u)&&u!==d.id){const m=ZR(e.pathname,e.search,d.id,u);m!==e.pathname+e.search&&n(m+e.hash,{replace:!0})}},[d,u,e.pathname,e.search,e.hash,n]),p.useEffect(()=>{d&&av(d)},[d]),i.isLoading?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(mt,{title:"Loading workspace",variant:"loading"})}):i.isError?l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-slate-50 px-6 text-center",children:[l.jsx(mt,{title:"Unable to load workspace",description:"We were unable to fetch workspace information. Refresh the page to try again.",variant:"error"}),l.jsx("button",{type:"button",className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-100",onClick:()=>i.refetch(),children:"Retry"})]}):d?l.jsx(Yj,{workspace:d,workspaces:c,children:l.jsx(UR,{workspace:d})}):null}function UR({workspace:e}){return l.jsx(o_,{children:l.jsx(yk,{workspaceId:e.id,children:l.jsx(BR,{workspace:e})})})}function BR({workspace:e}){const n=Oa(),r=Nn(),i=js(),{session:c,windowState:u}=oy(),d=Fh(),m=d.data?.enabled??!1,x=d.data?.detail??Ps,g=gy(),b=p.useMemo(()=>hy(e),[e]),[y,w]=p.useState(""),[E,N]=p.useState(!1),j=y.trim().toLowerCase(),_=!!(c&&u==="maximized"),A=p.useMemo(()=>b.map(M=>({id:M.id,label:M.label,description:`Jump to ${M.label}`,icon:l.jsx(M.icon,{className:"h-4 w-4 text-slate-400","aria-hidden":!0})})),[b]),D=p.useMemo(()=>Ws(`ade.ui.workspace.${e.id}.navCollapsed`),[e.id]),[R,q]=p.useState(()=>{const M=D.get();return typeof M=="boolean"?M:!1});p.useEffect(()=>{const M=D.get();q(typeof M=="boolean"?M:!1)},[D]),p.useEffect(()=>{D.set(R)},[R,D]),p.useEffect(()=>{w("")},[e.id]),p.useEffect(()=>{if(typeof window>"u")return;const M=()=>{window.innerWidth>=1024&&N(!1)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),p.useEffect(()=>{if(typeof document>"u")return;const M=document.body.style.overflow;return E?document.body.style.overflow="hidden":document.body.style.overflow=M||"",()=>{document.body.style.overflow=M}},[E]),p.useEffect(()=>{_&&N(!1)},[_]);const U=p.useCallback(()=>{if(!j)return;const M=b.find(F=>F.label.toLowerCase().includes(j))??b.find(F=>F.id.toLowerCase().includes(j));M&&r(M.href)},[j,b,r]),V=p.useCallback(M=>{const F=b.find(G=>G.id===M.id);F&&(r(F.href),w(""))},[b,r]),$=p.useCallback(()=>N(!0),[]),re=p.useCallback(()=>N(!1),[]),B=l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("button",{type:"button",onClick:$,className:"focus-ring inline-flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-600 shadow-sm lg:hidden","aria-label":"Open workspace navigation",children:l.jsx(FR,{})})}),H=n.user.display_name||n.user.email||"Signed in",J=n.user.email??"",ce=l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(dy,{displayName:H,email:J})}),Q={value:y,onChange:w,onSubmit:U,placeholder:`Search ${e.name} or jump to a section`,shortcutHint:g,scopeLabel:e.name,suggestions:A,onSelectSuggestion:V},de=$R(i.pathname,e.id),xe=QR(e.id,de,i.search,i.hash),z=xe?.kind==="content"&&xe.key.startsWith("documents"),ee=z?new URLSearchParams(i.search).get("q")??"":"",K=p.useCallback(M=>{if(!z)return;const F=new URLSearchParams(i.search);M?F.set("q",M):F.delete("q");const G=F.toString();r(`${i.pathname}${G?`?${G}`:""}${i.hash}`,{replace:!0})},[z,i.hash,i.pathname,i.search,r]),be=p.useCallback(M=>{K(M)},[K]),ve=p.useCallback(()=>{K("")},[K]),I=(z?{value:ee,onChange:K,onSubmit:be,onClear:ve,placeholder:"Search documents",shortcutHint:g,scopeLabel:"Documents",enableShortcut:!0}:void 0)??Q;if(p.useEffect(()=>{xe?.kind==="redirect"&&r(xe.to,{replace:!0})},[xe,r]),!xe||xe.kind==="redirect")return null;const ae=xe.fullHeight??!1;return l.jsxs("div",{className:ge("flex min-w-0 bg-slate-50 text-slate-900",ae?"h-screen overflow-hidden":"min-h-screen"),children:[_?null:l.jsx(Fk,{workspace:e,items:b,collapsed:R,onToggleCollapse:()=>q(M=>!M),onGoToWorkspaces:()=>r("/workspaces")}),l.jsxs("div",{className:"flex flex-1 min-w-0 flex-col",children:[_?null:l.jsx(uy,{brand:B,trailing:ce,search:I}),!_&&E?l.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:re}),l.jsxs("div",{className:"absolute inset-y-0 left-0 flex h-full w-[min(20rem,85vw)] max-w-xs flex-col rounded-r-3xl border-r border-slate-100/70 bg-gradient-to-b from-white via-slate-50 to-white/95 shadow-[0_45px_90px_-50px_rgba(15,23,42,0.85)]",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[l.jsxs("div",{className:"flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.name}),l.jsx("span",{className:"text-xs text-slate-400",children:"Workspace navigation"})]}),l.jsx("button",{type:"button",onClick:re,className:"focus-ring inline-flex h-9 w-9 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-500","aria-label":"Close navigation",children:l.jsx(VR,{})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:l.jsx(my,{items:b,onNavigate:re,showHeading:!1})})]})]}):null,l.jsx("div",{className:"relative flex flex-1 min-w-0 overflow-hidden",children:l.jsx("main",{className:ge("relative flex-1 min-w-0",ae?"flex min-h-0 flex-col overflow-hidden":"overflow-y-auto"),children:l.jsxs("div",{className:ge(ae?"flex w-full flex-1 min-h-0 flex-col px-0 py-0":"mx-auto flex w-full max-w-7xl flex-col px-4 py-6"),children:[m?l.jsx("div",{className:ge("mb-4",ae?"px-6 pt-4":""),children:l.jsx(St,{tone:"warning",heading:"Safe mode active",children:x})}):null,l.jsx("div",{className:ge(ae?"flex min-h-0 min-w-0 flex-1 flex-col":"flex min-w-0 flex-1 flex-col"),children:xe.element})]})})},`section-${xe.key}`)]})]})}function qR(e){return e.match(/^\/workspaces\/([^/]+)/)?.[1]??null}function $R(e,n){const r=`/workspaces/${n}`;return e.startsWith(r)?e.slice(r.length).split("/").map(c=>c.trim()).filter(c=>c.length>0):[]}function HR(e,n){return n?e.find(r=>r.id===n)??e.find(r=>r.slug===n)??e[0]??null:e[0]??null}function ZR(e,n,r,i){const c=`/workspaces/${i}`,u=e.startsWith(c)?e.slice(c.length):"",d=u&&u!=="/"?u:`/${Mi.path}`;return`/workspaces/${r}${d}${n}`}function FR(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M4 6h12",strokeLinecap:"round"}),l.jsx("path",{d:"M4 10h12",strokeLinecap:"round"}),l.jsx("path",{d:"M4 14h8",strokeLinecap:"round"})]})}function VR(){return l.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[l.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),l.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function QR(e,n,r,i){const c=`${r}${i}`;if(n.length===0)return{kind:"redirect",to:`/workspaces/${e}/${Mi.path}${c}`};const[u,d,m]=n;switch(u){case"overview":return{kind:"content",key:"overview",element:l.jsx(Yk,{})};case Mi.path:case"documents":return d?{kind:"content",key:`documents:${d}`,element:l.jsx(L5,{params:{documentId:decodeURIComponent(d)}})}:{kind:"content",key:"documents",element:l.jsx(r5,{})};case"runs":return{kind:"content",key:"runs",element:l.jsx(U5,{})};case"config-builder":return d?m==="editor"?{kind:"content",key:`config-builder:${d}:editor`,element:l.jsx(IR,{configId:decodeURIComponent(d)}),fullHeight:!0}:{kind:"content",key:`config-builder:${d}`,element:l.jsx(H5,{params:{configId:decodeURIComponent(d)}})}:{kind:"content",key:"config-builder",element:l.jsx(B5,{})};case"configs":return{kind:"redirect",to:`${`/workspaces/${e}/config-builder${d?`/${d}`:""}${m?`/${m}`:""}`}${c}`};case"settings":return{kind:"content",key:"settings",element:l.jsx(RR,{})};default:return{kind:"content",key:`not-found:${n.join("/")}`,element:l.jsx(mt,{title:"Section not found",description:"The requested workspace section could not be located.",variant:"error"})}}}function IR({configId:e}){return l.jsx(F5,{params:{configId:e}})}function PR(e){return`/workspaces/${e}/${Mi.path}`}function WR(){return l.jsx(lu,{children:l.jsx(GR,{})})}function GR(){const e=js(),n=Nn(),r=Oa(),i=ou(),c=i.data?.items??[],m=[Kj(),r.user.preferred_workspace_id].filter(x=>!!x).map(x=>c.find(g=>g.id===x)).find(x=>!!x)??c[0]??null;return p.useEffect(()=>{if(i.isLoading||i.isError)return;if(!m){e.pathname!=="/workspaces"&&n("/workspaces",{replace:!0});return}const x=PR(m.id);e.pathname+e.search!==x&&n(x,{replace:!0})},[e.pathname,e.search,n,m,i.isError,i.isLoading]),i.isLoading?l.jsx(mt,{title:"Loading workspaces",variant:"loading"}):i.isError?l.jsx(mt,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error",action:l.jsx(Oe,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})}):null}function KR(){return xn({queryKey:Bs.providers(),queryFn:({signal:e})=>lj({signal:e}),staleTime:6e5,retry:!1,refetchOnWindowFocus:!1})}const YR=fo({email:Ln().trim().min(1,"Enter your email address.").email("Enter a valid email address."),password:Ln().min(1,"Enter your password.")});function XR(){const e=js(),n=Nn(),r=pt(),i=Jb(),{session:c,isLoading:u,isError:d}=i,m=!c&&!u&&!d,x=Eh(m),g=KR(),b=g.data?.providers??[],y=g.data?.force_sso??!1,w=g.isError&&!g.isFetching?"We couldn't load the list of providers. Refresh the page or continue with email.":null,E=p.useMemo(()=>{const U=new URLSearchParams(e.search);return Wl(U.get("redirectTo"))},[e.search]);p.useEffect(()=>{c&&n(Pc(c.return_to,E),{replace:!0})},[n,E,c]),p.useEffect(()=>{m&&(x.isPending||x.isError||x.data?.requires_setup&&n(tv(E),{replace:!0}))},[n,E,x.data?.requires_setup,x.isError,x.isPending,m]);const[N,j]=p.useState(null),[_,A]=p.useState(!1);if(p.useEffect(()=>{j(null)},[e.search]),u)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Checking your session"})});if(d)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to verify your session. Refresh the page to try again."}),l.jsx(Oe,{variant:"secondary",onClick:()=>i.refetch(),children:"Retry"})]});if(x.isPending&&m)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Preparing initial setup"})});if(x.isError&&m)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to check whether ADE is ready."}),l.jsx(Oe,{variant:"secondary",onClick:()=>x.refetch(),children:"Try again"})]});const D=async U=>{U.preventDefault(),j(null);const V=new FormData(U.currentTarget),$=Object.fromEntries(V.entries()),re=YR.safeParse($);if(!re.success){const Q=re.error.issues[0]?.message??"Invalid input.";j(Q);return}const{email:B,password:H}=re.data,J=typeof $.redirectTo=="string"?$.redirectTo:null,ce=Wl(J);A(!0);try{const Q=await cj({email:B,password:H});r.setQueryData(Bs.detail(),Q),n(Pc(Q.return_to,ce),{replace:!0})}catch(Q){if(Q instanceof Tn){const de=Q.problem?.detail??Q.message??"Unable to sign in.";j(de)}else Q instanceof Error?j(Q.message):j("Unable to sign in.")}finally{A(!1)}},R=!!N&&!_,q=g.isLoading||g.isFetching;return l.jsx("div",{className:"mx-auto flex min-h-screen flex-col justify-center bg-slate-50 px-6 py-16",children:l.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[l.jsxs("header",{className:"space-y-2 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Welcome back"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Sign in to ADE"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email and password or continue with a connected provider."})]}),w?l.jsx(St,{tone:"warning",className:"mt-6",children:w}):null,q?l.jsxs("div",{className:"mt-6 space-y-3",children:[l.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"}),l.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"})]}):b.length>0?l.jsx("div",{className:"mt-6 space-y-3",children:b.map(U=>l.jsxs("a",{href:U.start_url??"#",className:"flex w-full items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:["Continue with ",U.label]},U.id))}):null,y?l.jsx(St,{tone:"info",className:"mt-8",children:"Password sign-in is disabled for this deployment. Use one of the configured providers above."}):l.jsxs("form",{method:"post",className:"mt-8 space-y-6",onSubmit:D,children:[l.jsx("input",{type:"hidden",name:"redirectTo",value:E}),l.jsx(Ot,{label:"Email address",required:!0,children:l.jsx($t,{id:"email",type:"email",autoComplete:"email",placeholder:"you@example.com",name:"email",disabled:_})}),l.jsx(Ot,{label:"Password",required:!0,children:l.jsx($t,{id:"password",type:"password",autoComplete:"current-password",placeholder:"",name:"password",disabled:_})}),R?l.jsx(St,{tone:"danger",children:N}):null,l.jsx(Oe,{type:"submit",className:"w-full justify-center",isLoading:_,disabled:_,children:_?"Signing in":"Continue"})]})]})})}function JR(){const e=Nn(),n=js(),r=pt(),[i,c]=p.useState(null);return p.useEffect(()=>{let u=!1;const d=new URLSearchParams(n.search),m=d.get("code")??"",x=d.get("state")??"";if(!m||!x){c("Missing authorization details from the identity provider.");return}async function g(){try{const b=await dj({code:m,state:x});if(u)return;r.setQueryData(Bs.detail(),b);const y=Pc(b.return_to,d.get("next"));e(y,{replace:!0})}catch(b){if(u)return;b instanceof Tn?c(b.problem?.detail??b.message):b instanceof Error?c(b.message):c("Unexpected callback error.")}}return g(),()=>{u=!0}},[n.search,e,r]),i?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(mt,{title:"Unable to finish sign-in",description:i,variant:"error",action:l.jsx(Oe,{variant:"secondary",onClick:()=>e("/login",{replace:!0}),children:"Return to sign in"})})}):l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(mt,{title:"Finishing sign-in",variant:"loading"})})}const eM=fo({displayName:Ln().min(1,"Display name is required."),email:Ln().min(1,"Email is required.").email("Enter a valid email address."),password:Ln().min(12,"Use at least 12 characters."),confirmPassword:Ln().min(1,"Confirm your password.")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match."});function tM(){const e=js(),n=Nn(),r=pt(),i=Eh(!0),c=p.useMemo(()=>{const b=new URLSearchParams(e.search);return Wl(b.get("redirectTo"))},[e.search]);p.useEffect(()=>{i.isPending||i.isError||i.data?.requires_setup||n(ev(c),{replace:!0})},[n,c,i.data?.requires_setup,i.isError,i.isPending]);const[u,d]=p.useState(null),[m,x]=p.useState(!1);if(i.isPending)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx("p",{className:"text-sm text-slate-600",children:"Loading setup status"})});if(i.isError)return l.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600",children:"We couldn't check whether ADE requires initial setup."}),l.jsx(Oe,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})]});if(!i.data?.requires_setup)return null;const g=async b=>{b.preventDefault(),d(null);const y=new FormData(b.currentTarget),w=Object.fromEntries(y.entries()),E=eM.safeParse(w);if(!E.success){const j=E.error.issues[0]?.message??"Invalid input.";d(j);return}x(!0);const N=Wl(w.redirectTo);try{const j=await vj({display_name:E.data.displayName,email:E.data.email,password:E.data.password});r.setQueryData(Bs.detail(),j),n(Pc(j.return_to,N),{replace:!0})}catch(j){if(j instanceof Tn){const _=j.problem?.detail??j.message??"Setup failed. Try again.";d(_)}else j instanceof Error?d(j.message):d("Setup failed. Try again.")}finally{x(!1)}};return l.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col justify-center bg-slate-50 px-6 py-16",children:l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[l.jsxs("header",{className:"space-y-3 text-center",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"First-run configuration"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Create the first administrator"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Provide credentials for the inaugural administrator account. We'll redirect after completion."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[l.jsx("input",{type:"hidden",name:"redirectTo",value:c}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsx(Ot,{label:"Display name",required:!0,children:l.jsx($t,{id:"displayName",name:"displayName",placeholder:"Casey Operator",required:!0,disabled:m})}),l.jsx(Ot,{label:"Email",required:!0,children:l.jsx($t,{id:"email",name:"email",type:"email",placeholder:"casey@example.com",required:!0,disabled:m})})]}),l.jsx(Ot,{label:"Password",hint:"Use at least 12 characters.",required:!0,children:l.jsx($t,{id:"password",name:"password",type:"password",minLength:12,placeholder:"",required:!0,disabled:m})}),l.jsx(Ot,{label:"Confirm password",required:!0,children:l.jsx($t,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:12,placeholder:"Re-enter your password",required:!0,disabled:m})}),u?l.jsx(St,{tone:"danger",children:u}):null,l.jsx("div",{className:"flex justify-end",children:l.jsx(Oe,{type:"submit",isLoading:m,disabled:m,children:m?"Creating administrator":"Create administrator"})})]})]})})}function ew({children:e,sidePanel:n,actions:r,search:i}){const c=Oa(),u=Nn(),d=c.user.display_name||c.user.email||"Signed in",m=c.user.email??"";return l.jsxs("div",{className:"flex min-h-screen flex-col bg-slate-50 text-slate-900",children:[l.jsx(uy,{brand:l.jsxs("button",{type:"button",onClick:()=>u("/workspaces"),className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-transparent bg-white px-3 py-2 text-left text-sm font-semibold text-slate-900 shadow-sm transition hover:border-slate-200",children:[l.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-sm",children:l.jsx($k,{className:"h-5 w-5","aria-hidden":!0})}),l.jsxs("span",{className:"flex flex-col leading-tight",children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Workspace directory"}),l.jsx("span",{className:"text-xs text-slate-400",children:"Automatic Data Extractor"})]})]}),search:i,actions:r?l.jsx("div",{className:"flex items-center gap-2",children:r}):void 0,trailing:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(dy,{displayName:d,email:m})})}),l.jsx("main",{className:"flex flex-1 overflow-y-auto",children:l.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:l.jsxs("div",{className:`grid gap-6 ${n?"lg:grid-cols-[minmax(0,1fr)_280px]":""}`,children:[l.jsx("div",{children:e}),n?l.jsx("aside",{className:"space-y-6",children:n}):null]})})})]})}function nM(){return l.jsx(lu,{children:l.jsx(sM,{})})}function sM(){const e=Nn(),n=Oa(),r=ou(),i=Wj(),[c,u]=p.useState(null),[d,m]=p.useState(null),x=p.useMemo(()=>(n.user.permissions??[]).map(Q=>Q.toLowerCase()),[n.user.permissions]),g=x.includes("workspaces.create")||x.includes("workspaces.manage_all"),[b,y]=p.useState(""),w=gy(),E=r.data,N=p.useMemo(()=>E?.items??[],[E?.items]),j=b.trim().toLowerCase(),_=p.useMemo(()=>j?N.filter(Q=>{const de=Q.name.toLowerCase(),xe=Q.slug?.toLowerCase()??"";return de.includes(j)||xe.includes(j)}):N,[N,j]),A=p.useCallback(Q=>e(`/workspaces/${Q}/${Mi.path}`),[e]),D=g?l.jsx(Oe,{variant:"primary",onClick:()=>e("/workspaces/new"),children:"Create workspace"}):void 0,R=p.useCallback(()=>{if(!j)return;const Q=_[0];Q&&A(Q.id)},[_,j,A]),q=p.useCallback(()=>y(""),[]),V=(j?_:N).slice(0,5).map(Q=>({id:Q.id,label:Q.name,description:Q.slug?`Slug  ${Q.slug}`:"Workspace"})),$=p.useCallback(Q=>{y(""),A(Q.id)},[A]),re=p.useCallback(async Q=>{m(null),u(Q.id);try{await i.mutateAsync(Q.id),av(Q)}catch(de){console.warn("workspaces.set_default.failed",de),m("Unable to set the default workspace. Please try again.")}finally{u(null)}},[i]),B=p.useCallback((Q,de)=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),A(de))},[A]),H={value:b,onChange:y,onSubmit:R,placeholder:"Search workspaces or jump to one instantly",shortcutHint:w,scopeLabel:"Workspace directory",suggestions:V,onSelectSuggestion:$,onClear:q},J={...H,shortcutHint:void 0,onClear:q,enableShortcut:!1,variant:"minimal"};if(r.isLoading)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(mt,{title:"Loading workspaces",variant:"loading"})});if(r.isError)return l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:l.jsx(mt,{title:"We couldn't load your workspaces",description:"Refresh the page or try again later.",variant:"error",action:l.jsx(Oe,{variant:"secondary",onClick:()=>r.refetch(),children:"Retry"})})});const ce=N.length===0?g?l.jsx(aM,{onCreate:()=>e("/workspaces/new")}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("h1",{id:"page-title",className:"sr-only",children:"Workspaces"}),l.jsx(mt,{title:"No workspaces available",description:"You don't have access to any workspaces yet. Ask an administrator to add you or create one on your behalf.",variant:"empty"})]}):_.length===0?l.jsx("div",{className:"space-y-4",children:l.jsx(mt,{title:`No workspaces matching "${b}"`,description:"Try searching by another workspace name or slug.",action:l.jsx(Oe,{variant:"secondary",onClick:q,children:"Clear search"})})}):l.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[l.jsxs("header",{children:[l.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"Workspaces"}),l.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Select a workspace to jump straight into documents."})]}),d?l.jsx(St,{tone:"danger",heading:"We couldn't update your default workspace",children:d}):null,l.jsx(cy,{...J,className:"w-full"}),l.jsx("section",{className:"grid gap-5 lg:grid-cols-2",children:_.map(Q=>{const de=i.isPending&&c===Q.id;return l.jsxs("article",{role:"button",tabIndex:0,onClick:()=>A(Q.id),onKeyDown:xe=>B(xe,Q.id),className:"group rounded-xl border border-slate-200 bg-white p-5 text-left shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:Q.name}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Slug: ",Q.slug]})]}),Q.is_default?l.jsx("span",{className:"rounded-full bg-brand-50 px-2 py-1 text-xs font-semibold text-brand-600",children:"Default"}):l.jsx(Oe,{variant:"secondary",size:"sm",isLoading:de,disabled:de,onClick:xe=>{xe.stopPropagation(),re(Q)},children:"Set as default"})]}),l.jsx("p",{className:"mt-4 text-xs font-medium uppercase tracking-wide text-slate-500",children:"Permissions"}),l.jsx("p",{className:"text-sm text-slate-600",children:Q.permissions.length>0?Q.permissions.join(", "):"None"})]},Q.id)})})]});return l.jsx(ew,{actions:D,search:H,sidePanel:l.jsx(rM,{canCreate:g,onCreate:()=>e("/workspaces/new")}),children:ce})}function rM({canCreate:e,onCreate:n}){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Workspace tips"}),l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Why multiple workspaces?"})]}),l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Segment teams by business unit or client, control access with roles, and tailor extraction settings per workspace. Everything stays organised and secure."}),e?l.jsx(Oe,{variant:"secondary",onClick:n,className:"w-full",children:"New workspace"}):null]}),l.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Need a hand?"}),l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Workspace setup checklist"})]}),l.jsxs("ul",{className:"space-y-2 text-xs text-slate-600",children:[l.jsx("li",{children:"Invite at least one additional administrator."}),l.jsx("li",{children:"Review configurations before uploading production files."}),l.jsx("li",{children:"Review workspace permissions for external collaborators."})]})]})]})}function aM({onCreate:e}){return l.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-dashed border-slate-300 bg-white p-10 text-center shadow-soft",children:[l.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"No workspaces yet"}),l.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Create your first workspace to start uploading configuration sets and documents."}),l.jsx(Oe,{variant:"primary",onClick:e,className:"mt-6",children:"Create workspace"})]})}function iM(){const e=pt();return sn({mutationFn:Dj,onSuccess(n){e.setQueryData(It.detail(n.id),n),e.getQueriesData({queryKey:It.all()}).forEach(([r,i])=>{if(!Array.isArray(r)||r[0]!=="workspaces"||r[1]!=="list"||!i)return;const c=i.items.findIndex(x=>x.id===n.id),d=[...c>=0?i.items.map(x=>x.id===n.id?n:x):[...i.items,n]].sort((x,g)=>x.name.localeCompare(g.name)),m=typeof i.total=="number"&&c===-1?i.total+1:i.total;e.setQueryData(r,{...i,items:d,total:m})}),e.invalidateQueries({queryKey:It.all()})}})}const lM=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,oM=fo({name:Ln().min(1,"Workspace name is required.").max(100,"Keep the name under 100 characters."),slug:Ln().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(lM,"Use lowercase letters, numbers, and dashes."),ownerUserId:Ln().optional()});function cM(){return l.jsx(lu,{children:l.jsx(uM,{})})}function uM(){const e=Nn(),n=Oa(),r=ou(),i=iM(),u=p.useMemo(()=>(n.user.permissions??[]).map(B=>B.toLowerCase()),[n.user.permissions]).includes("users.read_all"),d=Ky({enabled:u,pageSize:50}),m=p.useMemo(()=>d.users,[d.users]),x=p.useMemo(()=>n.user.id?m.filter(B=>B.id!==n.user.id):m,[m,n.user.id]),{register:g,handleSubmit:b,watch:y,setValue:w,setError:E,clearErrors:N,formState:{errors:j,dirtyFields:_}}=Kh({resolver:sm(oM),defaultValues:{name:"",slug:"",ownerUserId:n.user.id??""}}),A=y("name"),D=y("slug");p.useEffect(()=>{if(_.slug)return;const B=dM(A);B!==D&&w("slug",B,{shouldValidate:!!B})},[_.slug,A,w,D]),p.useEffect(()=>{!u&&n.user.id&&w("ownerUserId",n.user.id,{shouldDirty:!1})},[u,n.user.id,w]);const R=i.isPending,q=d.isPending&&d.users.length===0,U=R||q||!u,V=n.user.display_name?`${n.user.display_name} (you)`:`${n.user.email??"Current user"} (you)`,$=g("ownerUserId"),re=b(B=>{if(N("root"),u&&!B.ownerUserId){E("ownerUserId",{type:"manual",message:"Select a workspace owner."});return}i.mutate({name:B.name.trim(),slug:B.slug.trim(),owner_user_id:u&&B.ownerUserId||void 0},{onSuccess(H){r.refetch(),e(`/workspaces/${H.id}`)},onError(H){if(H instanceof Tn){const J=H.problem?.detail??H.message,ce=H.problem?.errors??{};E("root",{type:"server",message:J}),ce.name?.[0]&&E("name",{type:"server",message:ce.name[0]}),ce.slug?.[0]&&E("slug",{type:"server",message:ce.slug[0]}),ce.owner_user_id?.[0]&&E("ownerUserId",{type:"server",message:ce.owner_user_id[0]});return}E("root",{type:"server",message:H instanceof Error?H.message:"Workspace creation failed."})}})});return l.jsx(ew,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Create a workspace"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Name the workspace and choose who should own it. You can adjust settings and permissions after the workspace is created."})]}),l.jsxs("form",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",onSubmit:re,children:[l.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[l.jsx(Ot,{label:"Workspace name",required:!0,error:j.name?.message,children:l.jsx($t,{id:"workspaceName",placeholder:"Finance Operations",...g("name"),invalid:!!j.name,disabled:R})}),l.jsx(Ot,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier",required:!0,error:j.slug?.message,children:l.jsx($t,{id:"workspaceSlug",placeholder:"finance-ops",...g("slug"),invalid:!!j.slug,disabled:R})})]}),u?l.jsxs(Ot,{label:"Workspace owner",hint:"Owner receives workspace-level permissions immediately.",error:j.ownerUserId?.message,children:[l.jsxs("select",{id:"workspaceOwner",...$,onChange:B=>{$.onChange(B),N("ownerUserId")},disabled:U,className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",children:[l.jsx("option",{value:n.user.id??"",children:V}),x.map(B=>l.jsx("option",{value:B.id,children:B.display_name?`${B.display_name} (${B.email})`:B.email},B.id))]}),d.hasNextPage?l.jsx("div",{className:"pt-2",children:l.jsx(Oe,{type:"button",variant:"ghost",onClick:()=>d.fetchNextPage(),disabled:d.isFetchingNextPage,children:d.isFetchingNextPage?"Loading more users":"Load more users"})}):null]}):null,j.root?l.jsx(St,{tone:"danger",children:j.root.message}):null,u&&d.isError?l.jsx(St,{tone:"warning",children:"Unable to load the user list. Continue with yourself as the workspace owner or try again later."}):null,l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[l.jsx(Oe,{type:"button",variant:"secondary",onClick:()=>e("/workspaces"),disabled:R,children:"Cancel"}),l.jsx(Oe,{type:"submit",isLoading:R,children:R?"Creating workspace":"Create workspace"})]})]})]})})}function dM(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}function fM(){const e=Nn(),n=pt();return p.useEffect(()=>{let r=!1;const i=new AbortController;return(async()=>{try{await fj({signal:i.signal})}finally{r||(n.removeQueries({queryKey:Bs.root,exact:!1}),e("/login",{replace:!0}))}})().catch(()=>{r||e("/login",{replace:!0})}),()=>{r=!0,i.abort()}},[e,n]),null}function hM(){return l.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col justify-center px-6 py-16 text-center",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-brand-600",children:"404"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Page not found"}),l.jsxs("p",{className:"text-sm text-slate-600",children:["The resource you're looking for doesn't exist yet. Add a screen under ",l.jsx("code",{children:"src/screens/<ScreenName>/"})," and register it inside ",l.jsx("code",{children:"src/app/App.tsx"})," if this surface should exist in the routerless SPA."]}),l.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[l.jsx(oh,{to:"/",className:"focus-ring inline-flex items-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-white transition hover:bg-brand-700",children:"Return home"}),l.jsx(oh,{to:"/login",className:"focus-ring inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-50",children:"Go to sign in"})]})]})})}function mM(){return l.jsx(K1,{children:l.jsx(LS,{children:l.jsx(pM,{})})})}function pM(){const e=js(),r=gM(e.pathname).split("/").filter(Boolean);if(r.length===0)return l.jsx(WR,{});const[i,c]=r;switch(i){case"login":return l.jsx(XR,{});case"logout":return l.jsx(fM,{});case"auth":if(c==="callback")return l.jsx(JR,{});break;case"setup":return l.jsx(tM,{});case"workspaces":return c?c==="new"?l.jsx(cM,{}):l.jsx(OR,{}):l.jsx(nM,{})}return l.jsx(hM,{})}function gM(e){return!e||e==="/"?"/":e.endsWith("/")&&e.length>1?e.slice(0,-1):e}G1.createRoot(document.getElementById("root")).render(l.jsx(vt.StrictMode,{children:l.jsx(mM,{})}));export{vt as W,ge as c,l as j,p as r};
