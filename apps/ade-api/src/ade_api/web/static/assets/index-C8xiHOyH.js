(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function kv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nf={exports:{}},$l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ax;function A1(){if(Ax)return $l;Ax=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:e,type:i,key:f,ref:c!==void 0?c:null,props:u}}return $l.Fragment=n,$l.jsx=r,$l.jsxs=r,$l}var Dx;function D1(){return Dx||(Dx=1,Nf.exports=A1()),Nf.exports}var o=D1(),_f={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function M1(){if(Mx)return We;Mx=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function j(C){return C===null||typeof C!="object"?null:(C=w&&C[w]||C["@@iterator"],typeof C=="function"?C:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function O(C,W,M){this.props=C,this.context=W,this.refs=A,this.updater=M||_}O.prototype.isReactComponent={},O.prototype.setState=function(C,W){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,W,"setState")},O.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function N(){}N.prototype=O.prototype;function D(C,W,M){this.props=C,this.context=W,this.refs=A,this.updater=M||_}var B=D.prototype=new N;B.constructor=D,E(B,O.prototype),B.isPureReactComponent=!0;var J=Array.isArray;function Y(){}var Q={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function ee(C,W,M){var R=M.ref;return{$$typeof:e,type:C,key:W,ref:R!==void 0?R:null,props:M}}function ie(C,W){return ee(C.type,W,C.props)}function ae(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function ce(C){var W={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(M){return W[M]})}var V=/\/+/g;function he(C,W){return typeof C=="object"&&C!==null&&C.key!=null?ce(""+C.key):W.toString(36)}function xe(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Y,Y):(C.status="pending",C.then(function(W){C.status==="pending"&&(C.status="fulfilled",C.value=W)},function(W){C.status==="pending"&&(C.status="rejected",C.reason=W)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function U(C,W,M,R,F){var z=typeof C;(z==="undefined"||z==="boolean")&&(C=null);var re=!1;if(C===null)re=!0;else switch(z){case"bigint":case"string":case"number":re=!0;break;case"object":switch(C.$$typeof){case e:case n:re=!0;break;case b:return re=C._init,U(re(C._payload),W,M,R,F)}}if(re)return F=F(C),re=R===""?"."+he(C,0):R,J(F)?(M="",re!=null&&(M=re.replace(V,"$&/")+"/"),U(F,W,M,"",function(H){return H})):F!=null&&(ae(F)&&(F=ie(F,M+(F.key==null||C&&C.key===F.key?"":(""+F.key).replace(V,"$&/")+"/")+re)),W.push(F)),1;re=0;var ge=R===""?".":R+":";if(J(C))for(var Ne=0;Ne<C.length;Ne++)R=C[Ne],z=ge+he(R,Ne),re+=U(R,W,M,z,F);else if(Ne=j(C),typeof Ne=="function")for(C=Ne.call(C),Ne=0;!(R=C.next()).done;)R=R.value,z=ge+he(R,Ne++),re+=U(R,W,M,z,F);else if(z==="object"){if(typeof C.then=="function")return U(xe(C),W,M,R,F);throw W=String(C),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return re}function P(C,W,M){if(C==null)return C;var R=[],F=0;return U(C,R,"","",function(z){return W.call(M,z,F++)}),R}function me(C){if(C._status===-1){var W=C._result;W=W(),W.then(function(M){(C._status===0||C._status===-1)&&(C._status=1,C._result=M)},function(M){(C._status===0||C._status===-1)&&(C._status=2,C._result=M)}),C._status===-1&&(C._status=0,C._result=W)}if(C._status===1)return C._result.default;throw C._result}var je=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},_e={map:P,forEach:function(C,W,M){P(C,function(){W.apply(this,arguments)},M)},count:function(C){var W=0;return P(C,function(){W++}),W},toArray:function(C){return P(C,function(W){return W})||[]},only:function(C){if(!ae(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return We.Activity=y,We.Children=_e,We.Component=O,We.Fragment=r,We.Profiler=c,We.PureComponent=D,We.StrictMode=i,We.Suspense=x,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,We.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Q.H.useMemoCache(C)}},We.cache=function(C){return function(){return C.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(C,W,M){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var R=E({},C.props),F=C.key;if(W!=null)for(z in W.key!==void 0&&(F=""+W.key),W)!se.call(W,z)||z==="key"||z==="__self"||z==="__source"||z==="ref"&&W.ref===void 0||(R[z]=W[z]);var z=arguments.length-2;if(z===1)R.children=M;else if(1<z){for(var re=Array(z),ge=0;ge<z;ge++)re[ge]=arguments[ge+2];R.children=re}return ee(C.type,F,R)},We.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},We.createElement=function(C,W,M){var R,F={},z=null;if(W!=null)for(R in W.key!==void 0&&(z=""+W.key),W)se.call(W,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(F[R]=W[R]);var re=arguments.length-2;if(re===1)F.children=M;else if(1<re){for(var ge=Array(re),Ne=0;Ne<re;Ne++)ge[Ne]=arguments[Ne+2];F.children=ge}if(C&&C.defaultProps)for(R in re=C.defaultProps,re)F[R]===void 0&&(F[R]=re[R]);return ee(C,z,F)},We.createRef=function(){return{current:null}},We.forwardRef=function(C){return{$$typeof:m,render:C}},We.isValidElement=ae,We.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:me}},We.memo=function(C,W){return{$$typeof:g,type:C,compare:W===void 0?null:W}},We.startTransition=function(C){var W=Q.T,M={};Q.T=M;try{var R=C(),F=Q.S;F!==null&&F(M,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(Y,je)}catch(z){je(z)}finally{W!==null&&M.types!==null&&(W.types=M.types),Q.T=W}},We.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},We.use=function(C){return Q.H.use(C)},We.useActionState=function(C,W,M){return Q.H.useActionState(C,W,M)},We.useCallback=function(C,W){return Q.H.useCallback(C,W)},We.useContext=function(C){return Q.H.useContext(C)},We.useDebugValue=function(){},We.useDeferredValue=function(C,W){return Q.H.useDeferredValue(C,W)},We.useEffect=function(C,W){return Q.H.useEffect(C,W)},We.useEffectEvent=function(C){return Q.H.useEffectEvent(C)},We.useId=function(){return Q.H.useId()},We.useImperativeHandle=function(C,W,M){return Q.H.useImperativeHandle(C,W,M)},We.useInsertionEffect=function(C,W){return Q.H.useInsertionEffect(C,W)},We.useLayoutEffect=function(C,W){return Q.H.useLayoutEffect(C,W)},We.useMemo=function(C,W){return Q.H.useMemo(C,W)},We.useOptimistic=function(C,W){return Q.H.useOptimistic(C,W)},We.useReducer=function(C,W,M){return Q.H.useReducer(C,W,M)},We.useRef=function(C){return Q.H.useRef(C)},We.useState=function(C){return Q.H.useState(C)},We.useSyncExternalStore=function(C,W,M){return Q.H.useSyncExternalStore(C,W,M)},We.useTransition=function(){return Q.H.useTransition()},We.version="19.2.0",We}var Rx;function xh(){return Rx||(Rx=1,_f.exports=M1()),_f.exports}var p=xh();const bt=kv(p);var Cf={exports:{}},Hl={},kf={exports:{}},Tf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function R1(){return zx||(zx=1,(function(e){function n(U,P){var me=U.length;U.push(P);e:for(;0<me;){var je=me-1>>>1,_e=U[je];if(0<c(_e,P))U[je]=P,U[me]=_e,me=je;else break e}}function r(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var P=U[0],me=U.pop();if(me!==P){U[0]=me;e:for(var je=0,_e=U.length,C=_e>>>1;je<C;){var W=2*(je+1)-1,M=U[W],R=W+1,F=U[R];if(0>c(M,me))R<_e&&0>c(F,M)?(U[je]=F,U[R]=me,je=R):(U[je]=M,U[W]=me,je=W);else if(R<_e&&0>c(F,me))U[je]=F,U[R]=me,je=R;else break e}}return P}function c(U,P){var me=U.sortIndex-P.sortIndex;return me!==0?me:U.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();e.unstable_now=function(){return f.now()-m}}var x=[],g=[],b=1,y=null,w=3,j=!1,_=!1,E=!1,A=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(U){for(var P=r(g);P!==null;){if(P.callback===null)i(g);else if(P.startTime<=U)i(g),P.sortIndex=P.expirationTime,n(x,P);else break;P=r(g)}}function J(U){if(E=!1,B(U),!_)if(r(x)!==null)_=!0,Y||(Y=!0,ce());else{var P=r(g);P!==null&&xe(J,P.startTime-U)}}var Y=!1,Q=-1,se=5,ee=-1;function ie(){return A?!0:!(e.unstable_now()-ee<se)}function ae(){if(A=!1,Y){var U=e.unstable_now();ee=U;var P=!0;try{e:{_=!1,E&&(E=!1,N(Q),Q=-1),j=!0;var me=w;try{t:{for(B(U),y=r(x);y!==null&&!(y.expirationTime>U&&ie());){var je=y.callback;if(typeof je=="function"){y.callback=null,w=y.priorityLevel;var _e=je(y.expirationTime<=U);if(U=e.unstable_now(),typeof _e=="function"){y.callback=_e,B(U),P=!0;break t}y===r(x)&&i(x),B(U)}else i(x);y=r(x)}if(y!==null)P=!0;else{var C=r(g);C!==null&&xe(J,C.startTime-U),P=!1}}break e}finally{y=null,w=me,j=!1}P=void 0}}finally{P?ce():Y=!1}}}var ce;if(typeof D=="function")ce=function(){D(ae)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,he=V.port2;V.port1.onmessage=ae,ce=function(){he.postMessage(null)}}else ce=function(){O(ae,0)};function xe(U,P){Q=O(function(){U(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(U){switch(w){case 1:case 2:case 3:var P=3;break;default:P=w}var me=w;w=P;try{return U()}finally{w=me}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(U,P){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var me=w;w=U;try{return P()}finally{w=me}},e.unstable_scheduleCallback=function(U,P,me){var je=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?je+me:je):me=je,U){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=me+_e,U={id:b++,callback:P,priorityLevel:U,startTime:me,expirationTime:_e,sortIndex:-1},me>je?(U.sortIndex=me,n(g,U),r(x)===null&&U===r(g)&&(E?(N(Q),Q=-1):E=!0,xe(J,me-je))):(U.sortIndex=_e,n(x,U),_||j||(_=!0,Y||(Y=!0,ce()))),U},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(U){var P=w;return function(){var me=w;w=P;try{return U.apply(this,arguments)}finally{w=me}}}})(Tf)),Tf}var Ox;function z1(){return Ox||(Ox=1,kf.exports=R1()),kf.exports}var Af={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function O1(){if(Lx)return Rn;Lx=1;var e=xh();function n(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(x,g,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:x,containerInfo:g,implementation:b}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rn.createPortal=function(x,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(x,g,null,b)},Rn.flushSync=function(x){var g=f.T,b=i.p;try{if(f.T=null,i.p=2,x)return x()}finally{f.T=g,i.p=b,i.d.f()}},Rn.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},Rn.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},Rn.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var b=g.as,y=m(b,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,j=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:j}):b==="script"&&i.d.X(x,{crossOrigin:y,integrity:w,fetchPriority:j,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Rn.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},Rn.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,y=m(b,g.crossOrigin);i.d.L(x,b,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Rn.preloadModule=function(x,g){if(typeof x=="string")if(g){var b=m(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},Rn.requestFormReset=function(x){i.d.r(x)},Rn.unstable_batchedUpdates=function(x,g){return x(g)},Rn.useFormState=function(x,g,b){return f.H.useFormState(x,g,b)},Rn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rn.version="19.2.0",Rn}var Ux;function Tv(){if(Ux)return Af.exports;Ux=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Af.exports=O1(),Af.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function L1(){if(Bx)return Hl;Bx=1;var e=z1(),n=xh(),r=Tv();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(i(188))}function g(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return x(d),t;if(h===l)return x(d),s;h=h.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=h;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,l=h;break}if(S===l){v=!0,l=d,a=h;break}S=S.sibling}if(!v){for(S=h.child;S;){if(S===a){v=!0,a=h,l=d;break}if(S===l){v=!0,l=h,a=d;break}S=S.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=ae&&t[ae]||t["@@iterator"],typeof t=="function"?t:null)}var V=Symbol.for("react.client.reference");function he(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case O:return"Profiler";case A:return"StrictMode";case J:return"Suspense";case Y:return"SuspenseList";case ee:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case D:return t.displayName||"Context";case N:return(t._context.displayName||"Context")+".Consumer";case B:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return s=t.displayName||null,s!==null?s:he(t.type)||"Memo";case se:s=t._payload,t=t._init;try{return he(t(s))}catch{}}return null}var xe=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},je=[],_e=-1;function C(t){return{current:t}}function W(t){0>_e||(t.current=je[_e],je[_e]=null,_e--)}function M(t,s){_e++,je[_e]=t.current,t.current=s}var R=C(null),F=C(null),z=C(null),re=C(null);function ge(t,s){switch(M(z,s),M(F,t),M(R,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Jg(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Jg(s),t=ex(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(R),M(R,t)}function Ne(){W(R),W(F),W(z)}function H(t){t.memoizedState!==null&&M(re,t);var s=R.current,a=ex(s,t.type);s!==a&&(M(F,t),M(R,a))}function Se(t){F.current===t&&(W(R),W(F)),re.current===t&&(W(re),Ll._currentValue=me)}var ke,fe;function Te(t){if(ke===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ke=s&&s[1]||"",fe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+t+fe}var Z=!1;function be(t,s){if(!t||Z)return"";Z=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(te){var X=te}Reflect.construct(t,[],de)}else{try{de.call()}catch(te){X=te}t.call(de.prototype)}}else{try{throw Error()}catch(te){X=te}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(te){if(te&&X&&typeof te.stack=="string")return[te.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),v=h[0],S=h[1];if(v&&S){var T=v.split(`
`),K=S.split(`
`);for(d=l=0;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===T.length||d===K.length)for(l=T.length-1,d=K.length-1;1<=l&&0<=d&&T[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(T[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||T[l]!==K[d]){var oe=`
`+T[l].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=l&&0<=d);break}}}finally{Z=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Te(a):""}function Re(t,s){switch(t.tag){case 26:case 27:case 5:return Te(t.type);case 16:return Te("Lazy");case 13:return t.child!==s&&s!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return be(t.type,!1);case 11:return be(t.type.render,!1);case 1:return be(t.type,!0);case 31:return Te("Activity");default:return""}}function Ie(t){try{var s="",a=null;do s+=Re(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var et=Object.prototype.hasOwnProperty,k=e.unstable_scheduleCallback,I=e.unstable_cancelCallback,ne=e.unstable_shouldYield,Ce=e.unstable_requestPaint,ve=e.unstable_now,ye=e.unstable_getCurrentPriorityLevel,Oe=e.unstable_ImmediatePriority,Ze=e.unstable_UserBlockingPriority,Ge=e.unstable_NormalPriority,Nt=e.unstable_LowPriority,Ee=e.unstable_IdlePriority,Ae=e.log,Qe=e.unstable_setDisableYieldValue,Dt=null,rt=null;function $t(t){if(typeof Ae=="function"&&Qe(t),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Dt,t)}catch{}}var Ft=Math.clz32?Math.clz32:ia,Ys=Math.log,Xs=Math.LN2;function ia(t){return t>>>=0,t===0?32:31-(Ys(t)/Xs|0)|0}var Js=256,er=262144,yt=4194304;function _t(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ht(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,h=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~h,l!==0?d=_t(l):(v&=S,v!==0?d=_t(v):a||(a=S&~t,a!==0&&(d=_t(a))))):(S=l&~h,S!==0?d=_t(S):v!==0?d=_t(v):a||(a=l&~t,a!==0&&(d=_t(a)))),d===0?0:s!==0&&s!==d&&(s&h)===0&&(h=d&-d,a=s&-s,h>=a||h===32&&(a&4194048)!==0)?s:d}function fn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function tt(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var t=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),t}function mt(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function It(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Lt(t,s,a,l,d,h){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,T=t.expirationTimes,K=t.hiddenUpdates;for(a=v&~a;0<a;){var oe=31-Ft(a),de=1<<oe;S[oe]=0,T[oe]=-1;var X=K[oe];if(X!==null)for(K[oe]=null,oe=0;oe<X.length;oe++){var te=X[oe];te!==null&&(te.lane&=-536870913)}a&=~de}l!==0&&es(t,l,0),h!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=h&~(v&~s))}function es(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Ft(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function En(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Ft(a),d=1<<l;d&s|t[l]&s&&(t[l]|=s),a&=~d}}function Bn(t,s){var a=s&-s;return a=(a&42)!==0?1:De(a),(a&(t.suspendedLanes|s))!==0?0:a}function De(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $n(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:jx(t.type))}function Bs(t,s){var a=P.p;try{return P.p=t,s()}finally{P.p=a}}var Hn=Math.random().toString(36).slice(2),ut="__reactFiber$"+Hn,hn="__reactProps$"+Hn,Nr="__reactContainer$"+Hn,Ns="__reactEvents$"+Hn,_r="__reactListeners$"+Hn,bo="__reactHandles$"+Hn,Vi="__reactResources$"+Hn,tr="__reactMarker$"+Hn;function Fa(t){delete t[ut],delete t[hn],delete t[Ns],delete t[_r],delete t[bo]}function Zn(t){var s=t[ut];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Nr]||a[ut]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=lx(t);t!==null;){if(a=t[ut])return a;t=lx(t)}return s}t=a,a=t.parentNode}return null}function Mt(t){if(t=t[ut]||t[Nr]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function la(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function ts(t){var s=t[Vi];return s||(s=t[Vi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(t){t[tr]=!0}var Fi=new Set,oa={};function Ut(t,s){zn(t,s),zn(t+"Capture",s)}function zn(t,s){for(oa[t]=s,t=0;t<s.length;t++)Fi.add(s[t])}var qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cr={},Qa={};function Ia(t){return et.call(Qa,t)?!0:et.call(Cr,t)?!1:qs.test(t)?Qa[t]=!0:(Cr[t]=!0,!1)}function nr(t,s,a){if(Ia(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function $s(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function ns(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eu(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Nu(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,h.call(this,v)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Qi(t){if(!t._valueTracker){var s=Eu(t)?"checked":"value";t._valueTracker=Nu(t,s,""+t[s])}}function ca(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Eu(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ga=/[\n"\\]/g;function Vn(t){return t.replace(Ga,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ii(t,s,a,l,d,h,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Bt(s)):t.value!==""+Bt(s)&&(t.value=""+Bt(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?Ka(t,v,Bt(s)):a!=null?Ka(t,v,Bt(a)):l!=null&&t.removeAttribute("value"),d==null&&h!=null&&(t.defaultChecked=!!h),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Bt(S):t.removeAttribute("name")}function Wi(t,s,a,l,d,h,v,S){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),s!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||s!=null)){Qi(t);return}a=a!=null?""+Bt(a):"",s=s!=null?""+Bt(s):a,S||s===t.value||(t.value=s),t.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Qi(t)}function Ka(t,s,a){s==="number"&&Wa(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function sr(t,s,a,l){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Bt(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function yo(t,s,a){if(s!=null&&(s=""+Bt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Bt(a):""}function wo(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(xe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Bt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Qi(t)}function kr(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var _u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function So(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||_u.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function ua(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&So(t,d,l)}else for(var h in s)s.hasOwnProperty(h)&&So(t,h,s[h])}function Hs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tr(t){return Ki.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function _s(){}var Pi=null;function Yi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zs=null,Ar=null;function jo(t){var s=Mt(t);if(s&&(t=s.stateNode)){var a=t[hn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Ii(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Vn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var d=l[hn]||null;if(!d)throw Error(i(90));Ii(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&ca(l)}break e;case"textarea":yo(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&sr(t,!!a.multiple,s,!1)}}}var Xi=!1;function Eo(t,s,a){if(Xi)return t(s,a);Xi=!0;try{var l=t(s);return l}finally{if(Xi=!1,(Zs!==null||Ar!==null)&&(hc(),Zs&&(s=Zs,t=Ar,Ar=Zs=null,jo(s),t)))for(s=0;s<t.length;s++)jo(t[s])}}function da(t,s){var a=t.stateNode;if(a===null)return null;var l=a[hn]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ji=!1;if(Cs)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{Ji=!1}var Vs=null,el=null,Pa=null;function No(){if(Pa)return Pa;var t,s=el,a=s.length,l,d="value"in Vs?Vs.value:Vs.textContent,h=d.length;for(t=0;t<a&&s[t]===d[t];t++);var v=a-t;for(l=1;l<=v&&s[a-l]===d[h-l];l++);return Pa=d.slice(t,1<l?1-l:void 0)}function Ya(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Xa(){return!0}function _o(){return!1}function Dn(t){function s(a,l,d,h,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(h):h[S]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Xa:_o,this.isPropagationStopped=_o,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),s}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q=Dn(rr),le=y({},rr,{view:0,detail:0}),Me=Dn(le),Le,Ye,Rt,pt=y({},le,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rt&&(Rt&&t.type==="mousemove"?(Le=t.screenX-Rt.screenX,Ye=t.screenY-Rt.screenY):Ye=Le=0,Rt=t),Le)},movementY:function(t){return"movementY"in t?t.movementY:Ye}}),mn=Dn(pt),pn=y({},pt,{dataTransfer:0}),Co=Dn(pn),ar=y({},le,{relatedTarget:0}),tl=Dn(ar),tm=y({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),ko=Dn(tm),Dr=y({},rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ks=Dn(Dr),To=y({},rr,{data:0}),Ao=Dn(To),Cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=sm[t])?!!s[t]:!1}function gn(){return rm}var ir=y({},le,{key:function(t){if(t.key){var s=Cu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(t){return t.type==="keypress"?Ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nl=Dn(ir),ha=y({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mn=Dn(ha),ku=y({},le,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn}),Tu=Dn(ku),rn=y({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xn=Dn(rn),vn=y({},pt,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ts=Dn(vn),Do=y({},rr,{newState:0,oldState:0}),Yy=Dn(Do),Xy=[9,13,27,32],Au=Cs&&"CompositionEvent"in window,sl=null;Cs&&"documentMode"in document&&(sl=document.documentMode);var Jy=Cs&&"TextEvent"in window&&!sl,am=Cs&&(!Au||sl&&8<sl&&11>=sl),im=" ",lm=!1;function om(t,s){switch(t){case"keyup":return Xy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ja=!1;function ew(t,s){switch(t){case"compositionend":return cm(s);case"keypress":return s.which!==32?null:(lm=!0,im);case"textInput":return t=s.data,t===im&&lm?null:t;default:return null}}function tw(t,s){if(Ja)return t==="compositionend"||!Au&&om(t,s)?(t=No(),Pa=el=Vs=null,Ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return am&&s.locale!=="ko"?null:s.data;default:return null}}var nw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!nw[t.type]:s==="textarea"}function dm(t,s,a,l){Zs?Ar?Ar.push(l):Ar=[l]:Zs=l,s=yc(s,"onChange"),0<s.length&&(a=new q("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var rl=null,al=null;function sw(t){Wg(t,0)}function Mo(t){var s=la(t);if(ca(s))return t}function fm(t,s){if(t==="change")return s}var hm=!1;if(Cs){var Du;if(Cs){var Mu="oninput"in document;if(!Mu){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),Mu=typeof mm.oninput=="function"}Du=Mu}else Du=!1;hm=Du&&(!document.documentMode||9<document.documentMode)}function pm(){rl&&(rl.detachEvent("onpropertychange",gm),al=rl=null)}function gm(t){if(t.propertyName==="value"&&Mo(al)){var s=[];dm(s,al,t,Yi(t)),Eo(sw,s)}}function rw(t,s,a){t==="focusin"?(pm(),rl=s,al=a,rl.attachEvent("onpropertychange",gm)):t==="focusout"&&pm()}function aw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mo(al)}function iw(t,s){if(t==="click")return Mo(s)}function lw(t,s){if(t==="input"||t==="change")return Mo(s)}function ow(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ss=typeof Object.is=="function"?Object.is:ow;function il(t,s){if(ss(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!et.call(s,d)||!ss(t[d],s[d]))return!1}return!0}function xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vm(t,s){var a=xm(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xm(a)}}function bm(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?bm(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ym(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Wa(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Wa(t.document)}return s}function Ru(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var cw=Cs&&"documentMode"in document&&11>=document.documentMode,ei=null,zu=null,ll=null,Ou=!1;function wm(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ou||ei==null||ei!==Wa(l)||(l=ei,"selectionStart"in l&&Ru(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&il(ll,l)||(ll=l,l=yc(zu,"onSelect"),0<l.length&&(s=new q("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=ei)))}function ma(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var ti={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},Lu={},Sm={};Cs&&(Sm=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function pa(t){if(Lu[t])return Lu[t];if(!ti[t])return t;var s=ti[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Sm)return Lu[t]=s[a];return t}var jm=pa("animationend"),Em=pa("animationiteration"),Nm=pa("animationstart"),uw=pa("transitionrun"),dw=pa("transitionstart"),fw=pa("transitioncancel"),_m=pa("transitionend"),Cm=new Map,Uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uu.push("scrollEnd");function As(t,s){Cm.set(t,s),Ut(s,[t])}var Ro=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ds=[],ni=0,Bu=0;function zo(){for(var t=ni,s=Bu=ni=0;s<t;){var a=ds[s];ds[s++]=null;var l=ds[s];ds[s++]=null;var d=ds[s];ds[s++]=null;var h=ds[s];if(ds[s++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}h!==0&&km(a,d,h)}}function Oo(t,s,a,l){ds[ni++]=t,ds[ni++]=s,ds[ni++]=a,ds[ni++]=l,Bu|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function qu(t,s,a,l){return Oo(t,s,a,l),Lo(t)}function ga(t,s){return Oo(t,null,null,s),Lo(t)}function km(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,h=t.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(d=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,d&&s!==null&&(d=31-Ft(a),t=h.hiddenUpdates,l=t[d],l===null?t[d]=[s]:l.push(s),s.lane=a|536870912),h):null}function Lo(t){if(50<Tl)throw Tl=0,Gd=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var si={};function hw(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(t,s,a,l){return new hw(t,s,a,l)}function $u(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lr(t,s){var a=t.alternate;return a===null?(a=rs(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Tm(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Uo(t,s,a,l,d,h){var v=0;if(l=t,typeof t=="function")$u(t)&&(v=1);else if(typeof t=="string")v=v1(t,a,R.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ee:return t=rs(31,a,s,d),t.elementType=ee,t.lanes=h,t;case E:return xa(a.children,d,h,s);case A:v=8,d|=24;break;case O:return t=rs(12,a,s,d|2),t.elementType=O,t.lanes=h,t;case J:return t=rs(13,a,s,d),t.elementType=J,t.lanes=h,t;case Y:return t=rs(19,a,s,d),t.elementType=Y,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:v=10;break e;case N:v=9;break e;case B:v=11;break e;case Q:v=14;break e;case se:v=16,l=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=rs(v,a,s,d),s.elementType=t,s.type=l,s.lanes=h,s}function xa(t,s,a,l){return t=rs(7,t,l,s),t.lanes=a,t}function Hu(t,s,a){return t=rs(6,t,null,s),t.lanes=a,t}function Am(t){var s=rs(18,null,null,0);return s.stateNode=t,s}function Zu(t,s,a){return s=rs(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Dm=new WeakMap;function fs(t,s){if(typeof t=="object"&&t!==null){var a=Dm.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ie(s)},Dm.set(t,s),s)}return{value:t,source:s,stack:Ie(s)}}var ri=[],ai=0,Bo=null,ol=0,hs=[],ms=0,Mr=null,Fs=1,Qs="";function or(t,s){ri[ai++]=ol,ri[ai++]=Bo,Bo=t,ol=s}function Mm(t,s,a){hs[ms++]=Fs,hs[ms++]=Qs,hs[ms++]=Mr,Mr=t;var l=Fs;t=Qs;var d=32-Ft(l)-1;l&=~(1<<d),a+=1;var h=32-Ft(s)+d;if(30<h){var v=d-d%5;h=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Fs=1<<32-Ft(s)+d|a<<d|l,Qs=h+t}else Fs=1<<h|a<<d|l,Qs=t}function Vu(t){t.return!==null&&(or(t,1),Mm(t,1,0))}function Fu(t){for(;t===Bo;)Bo=ri[--ai],ri[ai]=null,ol=ri[--ai],ri[ai]=null;for(;t===Mr;)Mr=hs[--ms],hs[ms]=null,Qs=hs[--ms],hs[ms]=null,Fs=hs[--ms],hs[ms]=null}function Rm(t,s){hs[ms++]=Fs,hs[ms++]=Qs,hs[ms++]=Mr,Fs=s.id,Qs=s.overflow,Mr=t}var Nn=null,kt=null,at=!1,Rr=null,ps=!1,Qu=Error(i(519));function zr(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(fs(s,t)),Qu}function zm(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[ut]=t,s[hn]=l,a){case"dialog":Je("cancel",s),Je("close",s);break;case"iframe":case"object":case"embed":Je("load",s);break;case"video":case"audio":for(a=0;a<Dl.length;a++)Je(Dl[a],s);break;case"source":Je("error",s);break;case"img":case"image":case"link":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"input":Je("invalid",s),Wi(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Je("invalid",s);break;case"textarea":Je("invalid",s),wo(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Yg(s.textContent,a)?(l.popover!=null&&(Je("beforetoggle",s),Je("toggle",s)),l.onScroll!=null&&Je("scroll",s),l.onScrollEnd!=null&&Je("scrollend",s),l.onClick!=null&&(s.onclick=_s),s=!0):s=!1,s||zr(t,!0)}function Om(t){for(Nn=t.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:Nn=Nn.return}}function ii(t){if(t!==Nn)return!1;if(!at)return Om(t),at=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||uf(t.type,t.memoizedProps)),a=!a),a&&kt&&zr(t),Om(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));kt=ix(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));kt=ix(t)}else s===27?(s=kt,Gr(t.type)?(t=pf,pf=null,kt=t):kt=s):kt=Nn?xs(t.stateNode.nextSibling):null;return!0}function va(){kt=Nn=null,at=!1}function Iu(){var t=Rr;return t!==null&&(Wn===null?Wn=t:Wn.push.apply(Wn,t),Rr=null),t}function cl(t){Rr===null?Rr=[t]:Rr.push(t)}var Wu=C(null),ba=null,cr=null;function Or(t,s,a){M(Wu,s._currentValue),s._currentValue=a}function ur(t){t._currentValue=Wu.current,W(Wu)}function Gu(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Ku(t,s,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var S=h;h=d;for(var T=0;T<s.length;T++)if(S.context===s[T]){h.lanes|=a,S=h.alternate,S!==null&&(S.lanes|=a),Gu(h.return,a,t),l||(v=null);break e}h=S.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=a,h=v.alternate,h!==null&&(h.lanes|=a),Gu(v,a,t),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===t){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function li(t,s,a,l){t=null;for(var d=s,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var S=d.type;ss(d.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(d===re.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}d=d.return}t!==null&&Ku(s,t,a,l),s.flags|=262144}function qo(t){for(t=t.firstContext;t!==null;){if(!ss(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ya(t){ba=t,cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _n(t){return Lm(ba,t)}function $o(t,s){return ba===null&&ya(t),Lm(t,s)}function Lm(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},cr===null){if(t===null)throw Error(i(308));cr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else cr=cr.next=s;return a}var mw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},pw=e.unstable_scheduleCallback,gw=e.unstable_NormalPriority,Yt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new mw,data:new Map,refCount:0}}function ul(t){t.refCount--,t.refCount===0&&pw(gw,function(){t.controller.abort()})}var dl=null,Yu=0,oi=0,ci=null;function xw(t,s){if(dl===null){var a=dl=[];Yu=0,oi=ef(),ci={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yu++,s.then(Um,Um),s}function Um(){if(--Yu===0&&dl!==null){ci!==null&&(ci.status="fulfilled");var t=dl;dl=null,oi=0,ci=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function vw(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Bm=U.S;U.S=function(t,s){wg=ve(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&xw(t,s),Bm!==null&&Bm(t,s)};var wa=C(null);function Xu(){var t=wa.current;return t!==null?t:wt.pooledCache}function Ho(t,s){s===null?M(wa,wa.current):M(wa,s.pool)}function qm(){var t=Xu();return t===null?null:{parent:Yt._currentValue,pool:t}}var ui=Error(i(460)),Ju=Error(i(474)),Zo=Error(i(542)),Vo={then:function(){}};function $m(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hm(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(_s,_s),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vm(t),t;default:if(typeof s.status=="string")s.then(_s,_s);else{if(t=wt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vm(t),t}throw ja=s,ui}}function Sa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ja=a,ui):a}}var ja=null;function Zm(){if(ja===null)throw Error(i(459));var t=ja;return ja=null,t}function Vm(t){if(t===ui||t===Zo)throw Error(i(483))}var di=null,fl=0;function Fo(t){var s=fl;return fl+=1,di===null&&(di=[]),Hm(di,t,s)}function hl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Qo(t,s){throw s.$$typeof===w?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Fm(t){function s($,L){if(t){var G=$.deletions;G===null?($.deletions=[L],$.flags|=16):G.push(L)}}function a($,L){if(!t)return null;for(;L!==null;)s($,L),L=L.sibling;return null}function l($){for(var L=new Map;$!==null;)$.key!==null?L.set($.key,$):L.set($.index,$),$=$.sibling;return L}function d($,L){return $=lr($,L),$.index=0,$.sibling=null,$}function h($,L,G){return $.index=G,t?(G=$.alternate,G!==null?(G=G.index,G<L?($.flags|=67108866,L):G):($.flags|=67108866,L)):($.flags|=1048576,L)}function v($){return t&&$.alternate===null&&($.flags|=67108866),$}function S($,L,G,ue){return L===null||L.tag!==6?(L=Hu(G,$.mode,ue),L.return=$,L):(L=d(L,G),L.return=$,L)}function T($,L,G,ue){var $e=G.type;return $e===E?oe($,L,G.props.children,ue,G.key):L!==null&&(L.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===se&&Sa($e)===L.type)?(L=d(L,G.props),hl(L,G),L.return=$,L):(L=Uo(G.type,G.key,G.props,null,$.mode,ue),hl(L,G),L.return=$,L)}function K($,L,G,ue){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=Zu(G,$.mode,ue),L.return=$,L):(L=d(L,G.children||[]),L.return=$,L)}function oe($,L,G,ue,$e){return L===null||L.tag!==7?(L=xa(G,$.mode,ue,$e),L.return=$,L):(L=d(L,G),L.return=$,L)}function de($,L,G){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Hu(""+L,$.mode,G),L.return=$,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case j:return G=Uo(L.type,L.key,L.props,null,$.mode,G),hl(G,L),G.return=$,G;case _:return L=Zu(L,$.mode,G),L.return=$,L;case se:return L=Sa(L),de($,L,G)}if(xe(L)||ce(L))return L=xa(L,$.mode,G,null),L.return=$,L;if(typeof L.then=="function")return de($,Fo(L),G);if(L.$$typeof===D)return de($,$o($,L),G);Qo($,L)}return null}function X($,L,G,ue){var $e=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return $e!==null?null:S($,L,""+G,ue);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return G.key===$e?T($,L,G,ue):null;case _:return G.key===$e?K($,L,G,ue):null;case se:return G=Sa(G),X($,L,G,ue)}if(xe(G)||ce(G))return $e!==null?null:oe($,L,G,ue,null);if(typeof G.then=="function")return X($,L,Fo(G),ue);if(G.$$typeof===D)return X($,L,$o($,G),ue);Qo($,G)}return null}function te($,L,G,ue,$e){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $=$.get(G)||null,S(L,$,""+ue,$e);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case j:return $=$.get(ue.key===null?G:ue.key)||null,T(L,$,ue,$e);case _:return $=$.get(ue.key===null?G:ue.key)||null,K(L,$,ue,$e);case se:return ue=Sa(ue),te($,L,G,ue,$e)}if(xe(ue)||ce(ue))return $=$.get(G)||null,oe(L,$,ue,$e,null);if(typeof ue.then=="function")return te($,L,G,Fo(ue),$e);if(ue.$$typeof===D)return te($,L,G,$o(L,ue),$e);Qo(L,ue)}return null}function ze($,L,G,ue){for(var $e=null,it=null,Be=L,Pe=L=0,st=null;Be!==null&&Pe<G.length;Pe++){Be.index>Pe?(st=Be,Be=null):st=Be.sibling;var lt=X($,Be,G[Pe],ue);if(lt===null){Be===null&&(Be=st);break}t&&Be&&lt.alternate===null&&s($,Be),L=h(lt,L,Pe),it===null?$e=lt:it.sibling=lt,it=lt,Be=st}if(Pe===G.length)return a($,Be),at&&or($,Pe),$e;if(Be===null){for(;Pe<G.length;Pe++)Be=de($,G[Pe],ue),Be!==null&&(L=h(Be,L,Pe),it===null?$e=Be:it.sibling=Be,it=Be);return at&&or($,Pe),$e}for(Be=l(Be);Pe<G.length;Pe++)st=te(Be,$,Pe,G[Pe],ue),st!==null&&(t&&st.alternate!==null&&Be.delete(st.key===null?Pe:st.key),L=h(st,L,Pe),it===null?$e=st:it.sibling=st,it=st);return t&&Be.forEach(function(Jr){return s($,Jr)}),at&&or($,Pe),$e}function He($,L,G,ue){if(G==null)throw Error(i(151));for(var $e=null,it=null,Be=L,Pe=L=0,st=null,lt=G.next();Be!==null&&!lt.done;Pe++,lt=G.next()){Be.index>Pe?(st=Be,Be=null):st=Be.sibling;var Jr=X($,Be,lt.value,ue);if(Jr===null){Be===null&&(Be=st);break}t&&Be&&Jr.alternate===null&&s($,Be),L=h(Jr,L,Pe),it===null?$e=Jr:it.sibling=Jr,it=Jr,Be=st}if(lt.done)return a($,Be),at&&or($,Pe),$e;if(Be===null){for(;!lt.done;Pe++,lt=G.next())lt=de($,lt.value,ue),lt!==null&&(L=h(lt,L,Pe),it===null?$e=lt:it.sibling=lt,it=lt);return at&&or($,Pe),$e}for(Be=l(Be);!lt.done;Pe++,lt=G.next())lt=te(Be,$,Pe,lt.value,ue),lt!==null&&(t&&lt.alternate!==null&&Be.delete(lt.key===null?Pe:lt.key),L=h(lt,L,Pe),it===null?$e=lt:it.sibling=lt,it=lt);return t&&Be.forEach(function(T1){return s($,T1)}),at&&or($,Pe),$e}function vt($,L,G,ue){if(typeof G=="object"&&G!==null&&G.type===E&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case j:e:{for(var $e=G.key;L!==null;){if(L.key===$e){if($e=G.type,$e===E){if(L.tag===7){a($,L.sibling),ue=d(L,G.props.children),ue.return=$,$=ue;break e}}else if(L.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===se&&Sa($e)===L.type){a($,L.sibling),ue=d(L,G.props),hl(ue,G),ue.return=$,$=ue;break e}a($,L);break}else s($,L);L=L.sibling}G.type===E?(ue=xa(G.props.children,$.mode,ue,G.key),ue.return=$,$=ue):(ue=Uo(G.type,G.key,G.props,null,$.mode,ue),hl(ue,G),ue.return=$,$=ue)}return v($);case _:e:{for($e=G.key;L!==null;){if(L.key===$e)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){a($,L.sibling),ue=d(L,G.children||[]),ue.return=$,$=ue;break e}else{a($,L);break}else s($,L);L=L.sibling}ue=Zu(G,$.mode,ue),ue.return=$,$=ue}return v($);case se:return G=Sa(G),vt($,L,G,ue)}if(xe(G))return ze($,L,G,ue);if(ce(G)){if($e=ce(G),typeof $e!="function")throw Error(i(150));return G=$e.call(G),He($,L,G,ue)}if(typeof G.then=="function")return vt($,L,Fo(G),ue);if(G.$$typeof===D)return vt($,L,$o($,G),ue);Qo($,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,L!==null&&L.tag===6?(a($,L.sibling),ue=d(L,G),ue.return=$,$=ue):(a($,L),ue=Hu(G,$.mode,ue),ue.return=$,$=ue),v($)):a($,L)}return function($,L,G,ue){try{fl=0;var $e=vt($,L,G,ue);return di=null,$e}catch(Be){if(Be===ui||Be===Zo)throw Be;var it=rs(29,Be,null,$.mode);return it.lanes=ue,it.return=$,it}finally{}}}var Ea=Fm(!0),Qm=Fm(!1),Lr=!1;function ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ur(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Br(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ot&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=Lo(t),km(t,null,a),s}return Oo(t,l,s,a),Lo(t)}function ml(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,En(t,a)}}function nd(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,a=a.next}while(a!==null);h===null?d=h=s:h=h.next=s}else d=h=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var sd=!1;function pl(){if(sd){var t=ci;if(t!==null)throw t}}function gl(t,s,a,l){sd=!1;var d=t.updateQueue;Lr=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var T=S,K=T.next;T.next=null,v===null?h=K:v.next=K,v=T;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,S=oe.lastBaseUpdate,S!==v&&(S===null?oe.firstBaseUpdate=K:S.next=K,oe.lastBaseUpdate=T))}if(h!==null){var de=d.baseState;v=0,oe=K=T=null,S=h;do{var X=S.lane&-536870913,te=X!==S.lane;if(te?(nt&X)===X:(l&X)===X){X!==0&&X===oi&&(sd=!0),oe!==null&&(oe=oe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ze=t,He=S;X=s;var vt=a;switch(He.tag){case 1:if(ze=He.payload,typeof ze=="function"){de=ze.call(vt,de,X);break e}de=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=He.payload,X=typeof ze=="function"?ze.call(vt,de,X):ze,X==null)break e;de=y({},de,X);break e;case 2:Lr=!0}}X=S.callback,X!==null&&(t.flags|=64,te&&(t.flags|=8192),te=d.callbacks,te===null?d.callbacks=[X]:te.push(X))}else te={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},oe===null?(K=oe=te,T=de):oe=oe.next=te,v|=X;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;te=S,S=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);oe===null&&(T=de),d.baseState=T,d.firstBaseUpdate=K,d.lastBaseUpdate=oe,h===null&&(d.shared.lanes=0),Vr|=v,t.lanes=v,t.memoizedState=de}}function Im(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Wm(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Im(a[t],s)}var fi=C(null),Io=C(0);function Gm(t,s){t=br,M(Io,t),M(fi,s),br=t|s.baseLanes}function rd(){M(Io,br),M(fi,fi.current)}function ad(){br=Io.current,W(fi),W(Io)}var as=C(null),gs=null;function qr(t){var s=t.alternate;M(Wt,Wt.current&1),M(as,t),gs===null&&(s===null||fi.current!==null||s.memoizedState!==null)&&(gs=t)}function id(t){M(Wt,Wt.current),M(as,t),gs===null&&(gs=t)}function Km(t){t.tag===22?(M(Wt,Wt.current),M(as,t),gs===null&&(gs=t)):$r()}function $r(){M(Wt,Wt.current),M(as,as.current)}function is(t){W(as),gs===t&&(gs=null),W(Wt)}var Wt=C(0);function Wo(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hf(a)||mf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var dr=0,Ke=null,gt=null,Xt=null,Go=!1,hi=!1,Na=!1,Ko=0,xl=0,mi=null,bw=0;function Zt(){throw Error(i(321))}function ld(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!ss(t[a],s[a]))return!1;return!0}function od(t,s,a,l,d,h){return dr=h,Ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=t===null||t.memoizedState===null?Mp:jd,Na=!1,h=a(l,d),Na=!1,hi&&(h=Ym(s,a,l,d)),Pm(t),h}function Pm(t){U.H=yl;var s=gt!==null&&gt.next!==null;if(dr=0,Xt=gt=Ke=null,Go=!1,xl=0,mi=null,s)throw Error(i(300));t===null||Jt||(t=t.dependencies,t!==null&&qo(t)&&(Jt=!0))}function Ym(t,s,a,l){Ke=t;var d=0;do{if(hi&&(mi=null),xl=0,hi=!1,25<=d)throw Error(i(301));if(d+=1,Xt=gt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}U.H=Rp,h=s(a,l)}while(hi);return h}function yw(){var t=U.H,s=t.useState()[0];return s=typeof s.then=="function"?vl(s):s,t=t.useState()[0],(gt!==null?gt.memoizedState:null)!==t&&(Ke.flags|=1024),s}function cd(){var t=Ko!==0;return Ko=0,t}function ud(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function dd(t){if(Go){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Go=!1}dr=0,Xt=gt=Ke=null,hi=!1,xl=Ko=0,mi=null}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Ke.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Gt(){if(gt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var s=Xt===null?Ke.memoizedState:Xt.next;if(s!==null)Xt=s,gt=t;else{if(t===null)throw Ke.alternate===null?Error(i(467)):Error(i(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Xt===null?Ke.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Po(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var s=xl;return xl+=1,mi===null&&(mi=[]),t=Hm(mi,t,s),s=Ke,(Xt===null?s.memoizedState:Xt.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?Mp:jd),t}function Yo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===D)return _n(t)}throw Error(i(438,String(t)))}function fd(t){var s=null,a=Ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Po(),Ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=ie;return s.index++,a}function fr(t,s){return typeof s=="function"?s(t):s}function Xo(t){var s=Gt();return hd(s,gt,t)}function hd(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=t.baseQueue,h=l.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}s.baseQueue=d=h,l.pending=null}if(h=t.baseState,d===null)t.memoizedState=h;else{s=d.next;var S=v=null,T=null,K=s,oe=!1;do{var de=K.lane&-536870913;if(de!==K.lane?(nt&de)===de:(dr&de)===de){var X=K.revertLane;if(X===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),de===oi&&(oe=!0);else if((dr&X)===X){K=K.next,X===oi&&(oe=!0);continue}else de={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},T===null?(S=T=de,v=h):T=T.next=de,Ke.lanes|=X,Vr|=X;de=K.action,Na&&a(h,de),h=K.hasEagerState?K.eagerState:a(h,de)}else X={lane:de,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},T===null?(S=T=X,v=h):T=T.next=X,Ke.lanes|=de,Vr|=de;K=K.next}while(K!==null&&K!==s);if(T===null?v=h:T.next=S,!ss(h,t.memoizedState)&&(Jt=!0,oe&&(a=ci,a!==null)))throw a;t.memoizedState=h,t.baseState=v,t.baseQueue=T,l.lastRenderedState=h}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function md(t){var s=Gt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,h=s.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do h=t(h,v.action),v=v.next;while(v!==d);ss(h,s.memoizedState)||(Jt=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),a.lastRenderedState=h}return[h,l]}function Xm(t,s,a){var l=Ke,d=Gt(),h=at;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=s();var v=!ss((gt||d).memoizedState,a);if(v&&(d.memoizedState=a,Jt=!0),d=d.queue,xd(tp.bind(null,l,d,t),[t]),d.getSnapshot!==s||v||Xt!==null&&Xt.memoizedState.tag&1){if(l.flags|=2048,pi(9,{destroy:void 0},ep.bind(null,l,d,a,s),null),wt===null)throw Error(i(349));h||(dr&127)!==0||Jm(l,s,a)}return a}function Jm(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ke.updateQueue,s===null?(s=Po(),Ke.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function ep(t,s,a,l){s.value=a,s.getSnapshot=l,np(s)&&sp(t)}function tp(t,s,a){return a(function(){np(s)&&sp(t)})}function np(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!ss(t,a)}catch{return!0}}function sp(t){var s=ga(t,2);s!==null&&Gn(s,t,2)}function pd(t){var s=On();if(typeof t=="function"){var a=t;if(t=a(),Na){$t(!0);try{a()}finally{$t(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:t},s}function rp(t,s,a,l){return t.baseState=a,hd(t,gt,typeof l=="function"?l:fr)}function ww(t,s,a,l,d){if(tc(t))throw Error(i(485));if(t=s.action,t!==null){var h={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};U.T!==null?a(!0):h.isTransition=!1,l(h),a=s.pending,a===null?(h.next=s.pending=h,ap(s,h)):(h.next=a.next,s.pending=a.next=h)}}function ap(t,s){var a=s.action,l=s.payload,d=t.state;if(s.isTransition){var h=U.T,v={};U.T=v;try{var S=a(d,l),T=U.S;T!==null&&T(v,S),ip(t,s,S)}catch(K){gd(t,s,K)}finally{h!==null&&v.types!==null&&(h.types=v.types),U.T=h}}else try{h=a(d,l),ip(t,s,h)}catch(K){gd(t,s,K)}}function ip(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){lp(t,s,l)},function(l){return gd(t,s,l)}):lp(t,s,a)}function lp(t,s,a){s.status="fulfilled",s.value=a,op(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,ap(t,a)))}function gd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,op(s),s=s.next;while(s!==l)}t.action=null}function op(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function cp(t,s){return s}function up(t,s){if(at){var a=wt.formState;if(a!==null){e:{var l=Ke;if(at){if(kt){t:{for(var d=kt,h=ps;d.nodeType!==8;){if(!h){d=null;break t}if(d=xs(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){kt=xs(d.nextSibling),l=d.data==="F!";break e}}zr(l)}l=!1}l&&(s=a[0])}}return a=On(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:s},a.queue=l,a=Tp.bind(null,Ke,l),l.dispatch=a,l=pd(!1),h=Sd.bind(null,Ke,!1,l.queue),l=On(),d={state:s,dispatch:null,action:t,pending:null},l.queue=d,a=ww.bind(null,Ke,d,h,a),d.dispatch=a,l.memoizedState=t,[s,a,!1]}function dp(t){var s=Gt();return fp(s,gt,t)}function fp(t,s,a){if(s=hd(t,s,cp)[0],t=Xo(fr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=vl(s)}catch(v){throw v===ui?Zo:v}else l=s;s=Gt();var d=s.queue,h=d.dispatch;return a!==s.memoizedState&&(Ke.flags|=2048,pi(9,{destroy:void 0},Sw.bind(null,d,a),null)),[l,h,t]}function Sw(t,s){t.action=s}function hp(t){var s=Gt(),a=gt;if(a!==null)return fp(s,a,t);Gt(),s=s.memoizedState,a=Gt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function pi(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ke.updateQueue,s===null&&(s=Po(),Ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function mp(){return Gt().memoizedState}function Jo(t,s,a,l){var d=On();Ke.flags|=t,d.memoizedState=pi(1|s,{destroy:void 0},a,l===void 0?null:l)}function ec(t,s,a,l){var d=Gt();l=l===void 0?null:l;var h=d.memoizedState.inst;gt!==null&&l!==null&&ld(l,gt.memoizedState.deps)?d.memoizedState=pi(s,h,a,l):(Ke.flags|=t,d.memoizedState=pi(1|s,h,a,l))}function pp(t,s){Jo(8390656,8,t,s)}function xd(t,s){ec(2048,8,t,s)}function jw(t){Ke.flags|=4;var s=Ke.updateQueue;if(s===null)s=Po(),Ke.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function gp(t){var s=Gt().memoizedState;return jw({ref:s,nextImpl:t}),function(){if((ot&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function xp(t,s){return ec(4,2,t,s)}function vp(t,s){return ec(4,4,t,s)}function bp(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function yp(t,s,a){a=a!=null?a.concat([t]):null,ec(4,4,bp.bind(null,s,t),a)}function vd(){}function wp(t,s){var a=Gt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&ld(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Sp(t,s){var a=Gt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&ld(s,l[1]))return l[0];if(l=t(),Na){$t(!0);try{t()}finally{$t(!1)}}return a.memoizedState=[l,s],l}function bd(t,s,a){return a===void 0||(dr&1073741824)!==0&&(nt&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=jg(),Ke.lanes|=t,Vr|=t,a)}function jp(t,s,a,l){return ss(a,s)?a:fi.current!==null?(t=bd(t,a,l),ss(t,s)||(Jt=!0),t):(dr&42)===0||(dr&1073741824)!==0&&(nt&261930)===0?(Jt=!0,t.memoizedState=a):(t=jg(),Ke.lanes|=t,Vr|=t,s)}function Ep(t,s,a,l,d){var h=P.p;P.p=h!==0&&8>h?h:8;var v=U.T,S={};U.T=S,Sd(t,!1,s,a);try{var T=d(),K=U.S;if(K!==null&&K(S,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var oe=vw(T,l);bl(t,s,oe,cs(t))}else bl(t,s,l,cs(t))}catch(de){bl(t,s,{then:function(){},status:"rejected",reason:de},cs())}finally{P.p=h,v!==null&&S.types!==null&&(v.types=S.types),U.T=v}}function Ew(){}function yd(t,s,a,l){if(t.tag!==5)throw Error(i(476));var d=Np(t).queue;Ep(t,d,s,me,a===null?Ew:function(){return _p(t),a(l)})}function Np(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:me},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function _p(t){var s=Np(t);s.next===null&&(s=t.alternate.memoizedState),bl(t,s.next.queue,{},cs())}function wd(){return _n(Ll)}function Cp(){return Gt().memoizedState}function kp(){return Gt().memoizedState}function Nw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=cs();t=Ur(a);var l=Br(s,t,a);l!==null&&(Gn(l,s,a),ml(l,s,a)),s={cache:Pu()},t.payload=s;return}s=s.return}}function _w(t,s,a){var l=cs();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},tc(t)?Ap(s,a):(a=qu(t,s,a,l),a!==null&&(Gn(a,t,l),Dp(a,s,l)))}function Tp(t,s,a){var l=cs();bl(t,s,a,l)}function bl(t,s,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(tc(t))Ap(s,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var v=s.lastRenderedState,S=h(v,a);if(d.hasEagerState=!0,d.eagerState=S,ss(S,v))return Oo(t,s,d,0),wt===null&&zo(),!1}catch{}finally{}if(a=qu(t,s,d,l),a!==null)return Gn(a,t,l),Dp(a,s,l),!0}return!1}function Sd(t,s,a,l){if(l={lane:2,revertLane:ef(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},tc(t)){if(s)throw Error(i(479))}else s=qu(t,a,l,2),s!==null&&Gn(s,t,2)}function tc(t){var s=t.alternate;return t===Ke||s!==null&&s===Ke}function Ap(t,s){hi=Go=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Dp(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,En(t,a)}}var yl={readContext:_n,use:Yo,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};yl.useEffectEvent=Zt;var Mp={readContext:_n,use:Yo,useCallback:function(t,s){return On().memoizedState=[t,s===void 0?null:s],t},useContext:_n,useEffect:pp,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Jo(4194308,4,bp.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Jo(4194308,4,t,s)},useInsertionEffect:function(t,s){Jo(4,2,t,s)},useMemo:function(t,s){var a=On();s=s===void 0?null:s;var l=t();if(Na){$t(!0);try{t()}finally{$t(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=On();if(a!==void 0){var d=a(s);if(Na){$t(!0);try{a(s)}finally{$t(!1)}}}else d=s;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=_w.bind(null,Ke,t),[l.memoizedState,t]},useRef:function(t){var s=On();return t={current:t},s.memoizedState=t},useState:function(t){t=pd(t);var s=t.queue,a=Tp.bind(null,Ke,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:vd,useDeferredValue:function(t,s){var a=On();return bd(a,t,s)},useTransition:function(){var t=pd(!1);return t=Ep.bind(null,Ke,t.queue,!0,!1),On().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ke,d=On();if(at){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),wt===null)throw Error(i(349));(nt&127)!==0||Jm(l,s,a)}d.memoizedState=a;var h={value:a,getSnapshot:s};return d.queue=h,pp(tp.bind(null,l,h,t),[t]),l.flags|=2048,pi(9,{destroy:void 0},ep.bind(null,l,h,a,s),null),a},useId:function(){var t=On(),s=wt.identifierPrefix;if(at){var a=Qs,l=Fs;a=(l&~(1<<32-Ft(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ko++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=bw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:wd,useFormState:up,useActionState:up,useOptimistic:function(t){var s=On();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Sd.bind(null,Ke,!0,a),a.dispatch=s,[t,s]},useMemoCache:fd,useCacheRefresh:function(){return On().memoizedState=Nw.bind(null,Ke)},useEffectEvent:function(t){var s=On(),a={impl:t};return s.memoizedState=a,function(){if((ot&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},jd={readContext:_n,use:Yo,useCallback:wp,useContext:_n,useEffect:xd,useImperativeHandle:yp,useInsertionEffect:xp,useLayoutEffect:vp,useMemo:Sp,useReducer:Xo,useRef:mp,useState:function(){return Xo(fr)},useDebugValue:vd,useDeferredValue:function(t,s){var a=Gt();return jp(a,gt.memoizedState,t,s)},useTransition:function(){var t=Xo(fr)[0],s=Gt().memoizedState;return[typeof t=="boolean"?t:vl(t),s]},useSyncExternalStore:Xm,useId:Cp,useHostTransitionStatus:wd,useFormState:dp,useActionState:dp,useOptimistic:function(t,s){var a=Gt();return rp(a,gt,t,s)},useMemoCache:fd,useCacheRefresh:kp};jd.useEffectEvent=gp;var Rp={readContext:_n,use:Yo,useCallback:wp,useContext:_n,useEffect:xd,useImperativeHandle:yp,useInsertionEffect:xp,useLayoutEffect:vp,useMemo:Sp,useReducer:md,useRef:mp,useState:function(){return md(fr)},useDebugValue:vd,useDeferredValue:function(t,s){var a=Gt();return gt===null?bd(a,t,s):jp(a,gt.memoizedState,t,s)},useTransition:function(){var t=md(fr)[0],s=Gt().memoizedState;return[typeof t=="boolean"?t:vl(t),s]},useSyncExternalStore:Xm,useId:Cp,useHostTransitionStatus:wd,useFormState:hp,useActionState:hp,useOptimistic:function(t,s){var a=Gt();return gt!==null?rp(a,gt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:fd,useCacheRefresh:kp};Rp.useEffectEvent=gp;function Ed(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:y({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Nd={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=cs(),d=Ur(l);d.payload=s,a!=null&&(d.callback=a),s=Br(t,d,l),s!==null&&(Gn(s,t,l),ml(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=cs(),d=Ur(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Br(t,d,l),s!==null&&(Gn(s,t,l),ml(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=cs(),l=Ur(a);l.tag=2,s!=null&&(l.callback=s),s=Br(t,l,a),s!==null&&(Gn(s,t,a),ml(s,t,a))}};function zp(t,s,a,l,d,h,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,h,v):s.prototype&&s.prototype.isPureReactComponent?!il(a,l)||!il(d,h):!0}function Op(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Nd.enqueueReplaceState(s,s.state,null)}function _a(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=y({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function Lp(t){Ro(t)}function Up(t){console.error(t)}function Bp(t){Ro(t)}function nc(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function qp(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _d(t,s,a){return a=Ur(a),a.tag=3,a.payload={element:null},a.callback=function(){nc(t,s)},a}function $p(t){return t=Ur(t),t.tag=3,t}function Hp(t,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;t.payload=function(){return d(h)},t.callback=function(){qp(s,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){qp(s,a,l),typeof d!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function Cw(t,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&li(s,a,d,!0),a=as.current,a!==null){switch(a.tag){case 31:case 13:return gs===null?mc():a.alternate===null&&Vt===0&&(Vt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Vo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Yd(t,l,d)),!1;case 22:return a.flags|=65536,l===Vo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Yd(t,l,d)),!1}throw Error(i(435,a.tag))}return Yd(t,l,d),mc(),!1}if(at)return s=as.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==Qu&&(t=Error(i(422),{cause:l}),cl(fs(t,a)))):(l!==Qu&&(s=Error(i(423),{cause:l}),cl(fs(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=fs(l,a),d=_d(t.stateNode,l,d),nd(t,d),Vt!==4&&(Vt=2)),!1;var h=Error(i(520),{cause:l});if(h=fs(h,a),kl===null?kl=[h]:kl.push(h),Vt!==4&&(Vt=2),s===null)return!0;l=fs(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=_d(a.stateNode,l,t),nd(a,t),!1;case 1:if(s=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Fr===null||!Fr.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=$p(d),Hp(d,t,a,l),nd(a,d),!1}a=a.return}while(a!==null);return!1}var Cd=Error(i(461)),Jt=!1;function Cn(t,s,a,l){s.child=t===null?Qm(s,null,a,l):Ea(s,t.child,a,l)}function Zp(t,s,a,l,d){a=a.render;var h=s.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return ya(s),l=od(t,s,a,v,h,d),S=cd(),t!==null&&!Jt?(ud(t,s,d),hr(t,s,d)):(at&&S&&Vu(s),s.flags|=1,Cn(t,s,l,d),s.child)}function Vp(t,s,a,l,d){if(t===null){var h=a.type;return typeof h=="function"&&!$u(h)&&h.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=h,Fp(t,s,h,l,d)):(t=Uo(a.type,null,l,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(h=t.child,!Od(t,d)){var v=h.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(v,l)&&t.ref===s.ref)return hr(t,s,d)}return s.flags|=1,t=lr(h,l),t.ref=s.ref,t.return=s,s.child=t}function Fp(t,s,a,l,d){if(t!==null){var h=t.memoizedProps;if(il(h,l)&&t.ref===s.ref)if(Jt=!1,s.pendingProps=l=h,Od(t,d))(t.flags&131072)!==0&&(Jt=!0);else return s.lanes=t.lanes,hr(t,s,d)}return kd(t,s,a,l,d)}function Qp(t,s,a,l){var d=l.children,h=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,t!==null){for(l=s.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,s.child=null;return Ip(t,s,h,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ho(s,h!==null?h.cachePool:null),h!==null?Gm(s,h):rd(),Km(s);else return l=s.lanes=536870912,Ip(t,s,h!==null?h.baseLanes|a:a,a,l)}else h!==null?(Ho(s,h.cachePool),Gm(s,h),$r(),s.memoizedState=null):(t!==null&&Ho(s,null),rd(),$r());return Cn(t,s,d,a),s.child}function wl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ip(t,s,a,l,d){var h=Xu();return h=h===null?null:{parent:Yt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&Ho(s,null),rd(),Km(s),t!==null&&li(t,s,l,!0),s.childLanes=d,null}function sc(t,s){return s=ac({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Wp(t,s,a){return Ea(s,t.child,null,a),t=sc(s,s.pendingProps),t.flags|=2,is(s),s.memoizedState=null,t}function kw(t,s,a){var l=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(at){if(l.mode==="hidden")return t=sc(s,l),s.lanes=536870912,wl(null,t);if(id(s),(t=kt)?(t=ax(t,ps),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Mr!==null?{id:Fs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=Am(t),a.return=s,s.child=a,Nn=s,kt=null)):t=null,t===null)throw zr(s);return s.lanes=536870912,null}return sc(s,l)}var h=t.memoizedState;if(h!==null){var v=h.dehydrated;if(id(s),d)if(s.flags&256)s.flags&=-257,s=Wp(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Jt||li(t,s,a,!1),d=(a&t.childLanes)!==0,Jt||d){if(l=wt,l!==null&&(v=Bn(l,a),v!==0&&v!==h.retryLane))throw h.retryLane=v,ga(t,v),Gn(l,t,v),Cd;mc(),s=Wp(t,s,a)}else t=h.treeContext,kt=xs(v.nextSibling),Nn=s,at=!0,Rr=null,ps=!1,t!==null&&Rm(s,t),s=sc(s,l),s.flags|=4096;return s}return t=lr(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function rc(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function kd(t,s,a,l,d){return ya(s),a=od(t,s,a,l,void 0,d),l=cd(),t!==null&&!Jt?(ud(t,s,d),hr(t,s,d)):(at&&l&&Vu(s),s.flags|=1,Cn(t,s,a,d),s.child)}function Gp(t,s,a,l,d,h){return ya(s),s.updateQueue=null,a=Ym(s,l,a,d),Pm(t),l=cd(),t!==null&&!Jt?(ud(t,s,h),hr(t,s,h)):(at&&l&&Vu(s),s.flags|=1,Cn(t,s,a,h),s.child)}function Kp(t,s,a,l,d){if(ya(s),s.stateNode===null){var h=si,v=a.contextType;typeof v=="object"&&v!==null&&(h=_n(v)),h=new a(l,h),s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Nd,s.stateNode=h,h._reactInternals=s,h=s.stateNode,h.props=l,h.state=s.memoizedState,h.refs={},ed(s),v=a.contextType,h.context=typeof v=="object"&&v!==null?_n(v):si,h.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ed(s,a,v,l),h.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Nd.enqueueReplaceState(h,h.state,null),gl(s,l,h,d),pl(),h.state=s.memoizedState),typeof h.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){h=s.stateNode;var S=s.memoizedProps,T=_a(a,S);h.props=T;var K=h.context,oe=a.contextType;v=si,typeof oe=="object"&&oe!==null&&(v=_n(oe));var de=a.getDerivedStateFromProps;oe=typeof de=="function"||typeof h.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,oe||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(S||K!==v)&&Op(s,h,l,v),Lr=!1;var X=s.memoizedState;h.state=X,gl(s,l,h,d),pl(),K=s.memoizedState,S||X!==K||Lr?(typeof de=="function"&&(Ed(s,a,de,l),K=s.memoizedState),(T=Lr||zp(s,a,T,l,X,K,v))?(oe||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=K),h.props=l,h.state=K,h.context=v,l=T):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{h=s.stateNode,td(t,s),v=s.memoizedProps,oe=_a(a,v),h.props=oe,de=s.pendingProps,X=h.context,K=a.contextType,T=si,typeof K=="object"&&K!==null&&(T=_n(K)),S=a.getDerivedStateFromProps,(K=typeof S=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==de||X!==T)&&Op(s,h,l,T),Lr=!1,X=s.memoizedState,h.state=X,gl(s,l,h,d),pl();var te=s.memoizedState;v!==de||X!==te||Lr||t!==null&&t.dependencies!==null&&qo(t.dependencies)?(typeof S=="function"&&(Ed(s,a,S,l),te=s.memoizedState),(oe=Lr||zp(s,a,oe,l,X,te,T)||t!==null&&t.dependencies!==null&&qo(t.dependencies))?(K||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,te,T),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,te,T)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=te),h.props=l,h.state=te,h.context=T,l=oe):(typeof h.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),l=!1)}return h=l,rc(t,s),l=(s.flags&128)!==0,h||l?(h=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),s.flags|=1,t!==null&&l?(s.child=Ea(s,t.child,null,d),s.child=Ea(s,null,a,d)):Cn(t,s,a,d),s.memoizedState=h.state,t=s.child):t=hr(t,s,d),t}function Pp(t,s,a,l){return va(),s.flags|=256,Cn(t,s,a,l),s.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(t){return{baseLanes:t,cachePool:qm()}}function Dd(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=os),t}function Yp(t,s,a){var l=s.pendingProps,d=!1,h=(s.flags&128)!==0,v;if((v=h)||(v=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(at){if(d?qr(s):$r(),(t=kt)?(t=ax(t,ps),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Mr!==null?{id:Fs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=Am(t),a.return=s,s.child=a,Nn=s,kt=null)):t=null,t===null)throw zr(s);return mf(t)?s.lanes=32:s.lanes=536870912,null}var S=l.children;return l=l.fallback,d?($r(),d=s.mode,S=ac({mode:"hidden",children:S},d),l=xa(l,d,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,l=s.child,l.memoizedState=Ad(a),l.childLanes=Dd(t,v,a),s.memoizedState=Td,wl(null,l)):(qr(s),Md(s,S))}var T=t.memoizedState;if(T!==null&&(S=T.dehydrated,S!==null)){if(h)s.flags&256?(qr(s),s.flags&=-257,s=Rd(t,s,a)):s.memoizedState!==null?($r(),s.child=t.child,s.flags|=128,s=null):($r(),S=l.fallback,d=s.mode,l=ac({mode:"visible",children:l.children},d),S=xa(S,d,a,null),S.flags|=2,l.return=s,S.return=s,l.sibling=S,s.child=l,Ea(s,t.child,null,a),l=s.child,l.memoizedState=Ad(a),l.childLanes=Dd(t,v,a),s.memoizedState=Td,s=wl(null,l));else if(qr(s),mf(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var K=v.dgst;v=K,l=Error(i(419)),l.stack="",l.digest=v,cl({value:l,source:null,stack:null}),s=Rd(t,s,a)}else if(Jt||li(t,s,a,!1),v=(a&t.childLanes)!==0,Jt||v){if(v=wt,v!==null&&(l=Bn(v,a),l!==0&&l!==T.retryLane))throw T.retryLane=l,ga(t,l),Gn(v,t,l),Cd;hf(S)||mc(),s=Rd(t,s,a)}else hf(S)?(s.flags|=192,s.child=t.child,s=null):(t=T.treeContext,kt=xs(S.nextSibling),Nn=s,at=!0,Rr=null,ps=!1,t!==null&&Rm(s,t),s=Md(s,l.children),s.flags|=4096);return s}return d?($r(),S=l.fallback,d=s.mode,T=t.child,K=T.sibling,l=lr(T,{mode:"hidden",children:l.children}),l.subtreeFlags=T.subtreeFlags&65011712,K!==null?S=lr(K,S):(S=xa(S,d,a,null),S.flags|=2),S.return=s,l.return=s,l.sibling=S,s.child=l,wl(null,l),l=s.child,S=t.child.memoizedState,S===null?S=Ad(a):(d=S.cachePool,d!==null?(T=Yt._currentValue,d=d.parent!==T?{parent:T,pool:T}:d):d=qm(),S={baseLanes:S.baseLanes|a,cachePool:d}),l.memoizedState=S,l.childLanes=Dd(t,v,a),s.memoizedState=Td,wl(t.child,l)):(qr(s),a=t.child,t=a.sibling,a=lr(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function Md(t,s){return s=ac({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ac(t,s){return t=rs(22,t,null,s),t.lanes=0,t}function Rd(t,s,a){return Ea(s,t.child,null,a),t=Md(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Xp(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Gu(t.return,s,a)}function zd(t,s,a,l,d,h){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:h}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=d,v.treeForkCount=h)}function Jp(t,s,a){var l=s.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var v=Wt.current,S=(v&2)!==0;if(S?(v=v&1|2,s.flags|=128):v&=1,M(Wt,v),Cn(t,s,l,a),l=at?ol:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xp(t,a,s);else if(t.tag===19)Xp(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&Wo(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),zd(s,!1,d,a,h,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Wo(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}zd(s,!0,a,null,h,l);break;case"together":zd(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function hr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Vr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(li(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=lr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=lr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Od(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&qo(t)))}function Tw(t,s,a){switch(s.tag){case 3:ge(s,s.stateNode.containerInfo),Or(s,Yt,t.memoizedState.cache),va();break;case 27:case 5:H(s);break;case 4:ge(s,s.stateNode.containerInfo);break;case 10:Or(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,id(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(qr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Yp(t,s,a):(qr(s),t=hr(t,s,a),t!==null?t.sibling:null);qr(s);break;case 19:var d=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(li(t,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return Jp(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),M(Wt,Wt.current),l)break;return null;case 22:return s.lanes=0,Qp(t,s,a,s.pendingProps);case 24:Or(s,Yt,t.memoizedState.cache)}return hr(t,s,a)}function eg(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Jt=!0;else{if(!Od(t,a)&&(s.flags&128)===0)return Jt=!1,Tw(t,s,a);Jt=(t.flags&131072)!==0}else Jt=!1,at&&(s.flags&1048576)!==0&&Mm(s,ol,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Sa(s.elementType),s.type=t,typeof t=="function")$u(t)?(l=_a(t,l),s.tag=1,s=Kp(null,s,t,l,a)):(s.tag=0,s=kd(null,s,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===B){s.tag=11,s=Zp(null,s,t,l,a);break e}else if(d===Q){s.tag=14,s=Vp(null,s,t,l,a);break e}}throw s=he(t)||t,Error(i(306,s,""))}}return s;case 0:return kd(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=_a(l,s.pendingProps),Kp(t,s,l,d,a);case 3:e:{if(ge(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var h=s.memoizedState;d=h.element,td(t,s),gl(s,l,null,a);var v=s.memoizedState;if(l=v.cache,Or(s,Yt,l),l!==h.cache&&Ku(s,[Yt],a,!0),pl(),l=v.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){s=Pp(t,s,l,a);break e}else if(l!==d){d=fs(Error(i(424)),s),cl(d),s=Pp(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(kt=xs(t.firstChild),Nn=s,at=!0,Rr=null,ps=!0,a=Qm(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(va(),l===d){s=hr(t,s,a);break e}Cn(t,s,l,a)}s=s.child}return s;case 26:return rc(t,s),t===null?(a=dx(s.type,null,s.pendingProps,null))?s.memoizedState=a:at||(a=s.type,t=s.pendingProps,l=wc(z.current).createElement(a),l[ut]=s,l[hn]=t,kn(l,a,t),Ct(l),s.stateNode=l):s.memoizedState=dx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return H(s),t===null&&at&&(l=s.stateNode=ox(s.type,s.pendingProps,z.current),Nn=s,ps=!0,d=kt,Gr(s.type)?(pf=d,kt=xs(l.firstChild)):kt=d),Cn(t,s,s.pendingProps.children,a),rc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&at&&((d=l=kt)&&(l=a1(l,s.type,s.pendingProps,ps),l!==null?(s.stateNode=l,Nn=s,kt=xs(l.firstChild),ps=!1,d=!0):d=!1),d||zr(s)),H(s),d=s.type,h=s.pendingProps,v=t!==null?t.memoizedProps:null,l=h.children,uf(d,h)?l=null:v!==null&&uf(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=od(t,s,yw,null,null,a),Ll._currentValue=d),rc(t,s),Cn(t,s,l,a),s.child;case 6:return t===null&&at&&((t=a=kt)&&(a=i1(a,s.pendingProps,ps),a!==null?(s.stateNode=a,Nn=s,kt=null,t=!0):t=!1),t||zr(s)),null;case 13:return Yp(t,s,a);case 4:return ge(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Ea(s,null,l,a):Cn(t,s,l,a),s.child;case 11:return Zp(t,s,s.type,s.pendingProps,a);case 7:return Cn(t,s,s.pendingProps,a),s.child;case 8:return Cn(t,s,s.pendingProps.children,a),s.child;case 12:return Cn(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Or(s,s.type,l.value),Cn(t,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,ya(s),d=_n(d),l=l(d),s.flags|=1,Cn(t,s,l,a),s.child;case 14:return Vp(t,s,s.type,s.pendingProps,a);case 15:return Fp(t,s,s.type,s.pendingProps,a);case 19:return Jp(t,s,a);case 31:return kw(t,s,a);case 22:return Qp(t,s,a,s.pendingProps);case 24:return ya(s),l=_n(Yt),t===null?(d=Xu(),d===null&&(d=wt,h=Pu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),s.memoizedState={parent:l,cache:d},ed(s),Or(s,Yt,d)):((t.lanes&a)!==0&&(td(t,s),gl(s,null,null,a),pl()),d=t.memoizedState,h=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Or(s,Yt,l)):(l=h.cache,Or(s,Yt,l),l!==d.cache&&Ku(s,[Yt],a,!0))),Cn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function mr(t){t.flags|=4}function Ld(t,s,a,l,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Cg())t.flags|=8192;else throw ja=Vo,Ju}else t.flags&=-16777217}function tg(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!gx(s))if(Cg())t.flags|=8192;else throw ja=Vo,Ju}function ic(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Qt():536870912,t.lanes|=s,bi|=s)}function Sl(t,s){if(!at)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Tt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function Aw(t,s,a){var l=s.pendingProps;switch(Fu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ur(Yt),Ne(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ii(s)?mr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Iu())),Tt(s),null;case 26:var d=s.type,h=s.memoizedState;return t===null?(mr(s),h!==null?(Tt(s),tg(s,h)):(Tt(s),Ld(s,d,null,l,a))):h?h!==t.memoizedState?(mr(s),Tt(s),tg(s,h)):(Tt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&mr(s),Tt(s),Ld(s,d,t,l,a)),null;case 27:if(Se(s),a=z.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&mr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Tt(s),null}t=R.current,ii(s)?zm(s):(t=ox(d,l,a),s.stateNode=t,mr(s))}return Tt(s),null;case 5:if(Se(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&mr(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return Tt(s),null}if(h=R.current,ii(s))zm(s);else{var v=wc(z.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}h[ut]=s,h[hn]=l;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=h;e:switch(kn(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mr(s)}}return Tt(s),Ld(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&mr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=z.current,ii(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,d=Nn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[ut]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Yg(t.nodeValue,a)),t||zr(s,!0)}else t=wc(t).createTextNode(l),t[ut]=s,s.stateNode=t}return Tt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=ii(s),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[ut]=s}else va(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),t=!1}else a=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(is(s),s):(is(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Tt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=ii(s),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[ut]=s}else va(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),d=!1}else d=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(is(s),s):(is(s),null)}return is(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),ic(s,s.updateQueue),Tt(s),null);case 4:return Ne(),t===null&&rf(s.stateNode.containerInfo),Tt(s),null;case 10:return ur(s.type),Tt(s),null;case 19:if(W(Wt),l=s.memoizedState,l===null)return Tt(s),null;if(d=(s.flags&128)!==0,h=l.rendering,h===null)if(d)Sl(l,!1);else{if(Vt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(h=Wo(t),h!==null){for(s.flags|=128,Sl(l,!1),t=h.updateQueue,s.updateQueue=t,ic(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Tm(a,t),a=a.sibling;return M(Wt,Wt.current&1|2),at&&or(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&ve()>dc&&(s.flags|=128,d=!0,Sl(l,!1),s.lanes=4194304)}else{if(!d)if(t=Wo(h),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,ic(s,t),Sl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!at)return Tt(s),null}else 2*ve()-l.renderingStartTime>dc&&a!==536870912&&(s.flags|=128,d=!0,Sl(l,!1),s.lanes=4194304);l.isBackwards?(h.sibling=s.child,s.child=h):(t=l.last,t!==null?t.sibling=h:s.child=h,l.last=h)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ve(),t.sibling=null,a=Wt.current,M(Wt,d?a&1|2:a&1),at&&or(s,l.treeForkCount),t):(Tt(s),null);case 22:case 23:return is(s),ad(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),a=s.updateQueue,a!==null&&ic(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&W(wa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ur(Yt),Tt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Dw(t,s){switch(Fu(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ur(Yt),Ne(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Se(s),null;case 31:if(s.memoizedState!==null){if(is(s),s.alternate===null)throw Error(i(340));va()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(is(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));va()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return W(Wt),null;case 4:return Ne(),null;case 10:return ur(s.type),null;case 22:case 23:return is(s),ad(),t!==null&&W(wa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ur(Yt),null;case 25:return null;default:return null}}function ng(t,s){switch(Fu(s),s.tag){case 3:ur(Yt),Ne();break;case 26:case 27:case 5:Se(s);break;case 4:Ne();break;case 31:s.memoizedState!==null&&is(s);break;case 13:is(s);break;case 19:W(Wt);break;case 10:ur(s.type);break;case 22:case 23:is(s),ad(),t!==null&&W(wa);break;case 24:ur(Yt)}}function jl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var h=a.create,v=a.inst;l=h(),v.destroy=l}a=a.next}while(a!==d)}}catch(S){ft(s,s.return,S)}}function Hr(t,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,d=s;var T=a,K=S;try{K()}catch(oe){ft(d,T,oe)}}}l=l.next}while(l!==h)}}catch(oe){ft(s,s.return,oe)}}function sg(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Wm(s,a)}catch(l){ft(t,t.return,l)}}}function rg(t,s,a){a.props=_a(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ft(t,s,l)}}function El(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){ft(t,s,d)}}function Is(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ft(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ft(t,s,d)}else a.current=null}function ag(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ft(t,t.return,d)}}function Ud(t,s,a){try{var l=t.stateNode;Jw(l,t.type,a,s),l[hn]=s}catch(d){ft(t,t.return,d)}}function ig(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gr(t.type)||t.tag===4}function Bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ig(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=_s));else if(l!==4&&(l===27&&Gr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(qd(t,s,a),t=t.sibling;t!==null;)qd(t,s,a),t=t.sibling}function lc(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Gr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(lc(t,s,a),t=t.sibling;t!==null;)lc(t,s,a),t=t.sibling}function lg(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);kn(s,l,a),s[ut]=t,s[hn]=a}catch(h){ft(t,t.return,h)}}var pr=!1,en=!1,$d=!1,og=typeof WeakSet=="function"?WeakSet:Set,bn=null;function Mw(t,s){if(t=t.containerInfo,of=kc,t=ym(t),Ru(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var v=0,S=-1,T=-1,K=0,oe=0,de=t,X=null;t:for(;;){for(var te;de!==a||d!==0&&de.nodeType!==3||(S=v+d),de!==h||l!==0&&de.nodeType!==3||(T=v+l),de.nodeType===3&&(v+=de.nodeValue.length),(te=de.firstChild)!==null;)X=de,de=te;for(;;){if(de===t)break t;if(X===a&&++K===d&&(S=v),X===h&&++oe===l&&(T=v),(te=de.nextSibling)!==null)break;de=X,X=de.parentNode}de=te}a=S===-1||T===-1?null:{start:S,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(cf={focusedElem:t,selectionRange:a},kc=!1,bn=s;bn!==null;)if(s=bn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,bn=t;else for(;bn!==null;){switch(s=bn,h=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,a=s,d=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var ze=_a(a.type,d);t=l.getSnapshotBeforeUpdate(ze,h),l.__reactInternalSnapshotBeforeUpdate=t}catch(He){ft(a,a.return,He)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,bn=t;break}bn=s.return}}function cg(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:xr(t,a),l&4&&jl(5,a);break;case 1:if(xr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){ft(a,a.return,v)}else{var d=_a(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ft(a,a.return,v)}}l&64&&sg(a),l&512&&El(a,a.return);break;case 3:if(xr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Wm(t,s)}catch(v){ft(a,a.return,v)}}break;case 27:s===null&&l&4&&lg(a);case 26:case 5:xr(t,a),s===null&&l&4&&ag(a),l&512&&El(a,a.return);break;case 12:xr(t,a);break;case 31:xr(t,a),l&4&&fg(t,a);break;case 13:xr(t,a),l&4&&hg(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Hw.bind(null,a),l1(t,a))));break;case 22:if(l=a.memoizedState!==null||pr,!l){s=s!==null&&s.memoizedState!==null||en,d=pr;var h=en;pr=l,(en=s)&&!h?vr(t,a,(a.subtreeFlags&8772)!==0):xr(t,a),pr=d,en=h}break;case 30:break;default:xr(t,a)}}function ug(t){var s=t.alternate;s!==null&&(t.alternate=null,ug(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Fa(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var zt=null,Fn=!1;function gr(t,s,a){for(a=a.child;a!==null;)dg(t,s,a),a=a.sibling}function dg(t,s,a){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Dt,a)}catch{}switch(a.tag){case 26:en||Is(a,s),gr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||Is(a,s);var l=zt,d=Fn;Gr(a.type)&&(zt=a.stateNode,Fn=!1),gr(t,s,a),Rl(a.stateNode),zt=l,Fn=d;break;case 5:en||Is(a,s);case 6:if(l=zt,d=Fn,zt=null,gr(t,s,a),zt=l,Fn=d,zt!==null)if(Fn)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(a.stateNode)}catch(h){ft(a,s,h)}else try{zt.removeChild(a.stateNode)}catch(h){ft(a,s,h)}break;case 18:zt!==null&&(Fn?(t=zt,sx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ci(t)):sx(zt,a.stateNode));break;case 4:l=zt,d=Fn,zt=a.stateNode.containerInfo,Fn=!0,gr(t,s,a),zt=l,Fn=d;break;case 0:case 11:case 14:case 15:Hr(2,a,s),en||Hr(4,a,s),gr(t,s,a);break;case 1:en||(Is(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&rg(a,s,l)),gr(t,s,a);break;case 21:gr(t,s,a);break;case 22:en=(l=en)||a.memoizedState!==null,gr(t,s,a),en=l;break;default:gr(t,s,a)}}function fg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ci(t)}catch(a){ft(s,s.return,a)}}}function hg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ci(t)}catch(a){ft(s,s.return,a)}}function Rw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new og),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new og),s;default:throw Error(i(435,t.tag))}}function oc(t,s){var a=Rw(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var d=Zw.bind(null,t,l);l.then(d,d)}})}function Qn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],h=t,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Gr(S.type)){zt=S.stateNode,Fn=!1;break e}break;case 5:zt=S.stateNode,Fn=!1;break e;case 3:case 4:zt=S.stateNode.containerInfo,Fn=!0;break e}S=S.return}if(zt===null)throw Error(i(160));dg(h,v,d),zt=null,Fn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)mg(s,t),s=s.sibling}var Ds=null;function mg(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Qn(s,t),In(t),l&4&&(Hr(3,t,t.return),jl(3,t),Hr(5,t,t.return));break;case 1:Qn(s,t),In(t),l&512&&(en||a===null||Is(a,a.return)),l&64&&pr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Ds;if(Qn(s,t),In(t),l&512&&(en||a===null||Is(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[tr]||h[ut]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),kn(h,l,a),h[ut]=t,Ct(h),l=h;break e;case"link":var v=mx("link","href",d).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(h=v[S],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}h=d.createElement(l),kn(h,l,a),d.head.appendChild(h);break;case"meta":if(v=mx("meta","content",d).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(h=v[S],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}h=d.createElement(l),kn(h,l,a),d.head.appendChild(h);break;default:throw Error(i(468,l))}h[ut]=t,Ct(h),l=h}t.stateNode=l}else px(d,t.type,t.stateNode);else t.stateNode=hx(d,l,t.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?px(d,t.type,t.stateNode):hx(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:Qn(s,t),In(t),l&512&&(en||a===null||Is(a,a.return)),a!==null&&l&4&&Ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Qn(s,t),In(t),l&512&&(en||a===null||Is(a,a.return)),t.flags&32){d=t.stateNode;try{kr(d,"")}catch(ze){ft(t,t.return,ze)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Ud(t,d,a!==null?a.memoizedProps:d)),l&1024&&($d=!0);break;case 6:if(Qn(s,t),In(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ze){ft(t,t.return,ze)}}break;case 3:if(Ec=null,d=Ds,Ds=Sc(s.containerInfo),Qn(s,t),Ds=d,In(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ci(s.containerInfo)}catch(ze){ft(t,t.return,ze)}$d&&($d=!1,pg(t));break;case 4:l=Ds,Ds=Sc(t.stateNode.containerInfo),Qn(s,t),In(t),Ds=l;break;case 12:Qn(s,t),In(t);break;case 31:Qn(s,t),In(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 13:Qn(s,t),In(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=ve()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 22:d=t.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,K=pr,oe=en;if(pr=K||d,en=oe||T,Qn(s,t),en=oe,pr=K,In(t),l&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||T||pr||en||Ca(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){T=a=s;try{if(h=T.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=T.stateNode;var de=T.memoizedProps.style,X=de!=null&&de.hasOwnProperty("display")?de.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ze){ft(T,T.return,ze)}}}else if(s.tag===6){if(a===null){T=s;try{T.stateNode.nodeValue=d?"":T.memoizedProps}catch(ze){ft(T,T.return,ze)}}}else if(s.tag===18){if(a===null){T=s;try{var te=T.stateNode;d?rx(te,!0):rx(T.stateNode,!1)}catch(ze){ft(T,T.return,ze)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,oc(t,a))));break;case 19:Qn(s,t),In(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 30:break;case 21:break;default:Qn(s,t),In(t)}}function In(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(ig(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=Bd(t);lc(t,h,d);break;case 5:var v=a.stateNode;a.flags&32&&(kr(v,""),a.flags&=-33);var S=Bd(t);lc(t,S,v);break;case 3:case 4:var T=a.stateNode.containerInfo,K=Bd(t);qd(t,K,T);break;default:throw Error(i(161))}}catch(oe){ft(t,t.return,oe)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function pg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;pg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function xr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)cg(t,s.alternate,s),s=s.sibling}function Ca(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Hr(4,s,s.return),Ca(s);break;case 1:Is(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&rg(s,s.return,a),Ca(s);break;case 27:Rl(s.stateNode);case 26:case 5:Is(s,s.return),Ca(s);break;case 22:s.memoizedState===null&&Ca(s);break;case 30:Ca(s);break;default:Ca(s)}t=t.sibling}}function vr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=t,h=s,v=h.flags;switch(h.tag){case 0:case 11:case 15:vr(d,h,a),jl(4,h);break;case 1:if(vr(d,h,a),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){ft(l,l.return,K)}if(l=h,d=l.updateQueue,d!==null){var S=l.stateNode;try{var T=d.shared.hiddenCallbacks;if(T!==null)for(d.shared.hiddenCallbacks=null,d=0;d<T.length;d++)Im(T[d],S)}catch(K){ft(l,l.return,K)}}a&&v&64&&sg(h),El(h,h.return);break;case 27:lg(h);case 26:case 5:vr(d,h,a),a&&l===null&&v&4&&ag(h),El(h,h.return);break;case 12:vr(d,h,a);break;case 31:vr(d,h,a),a&&v&4&&fg(d,h);break;case 13:vr(d,h,a),a&&v&4&&hg(d,h);break;case 22:h.memoizedState===null&&vr(d,h,a),El(h,h.return);break;case 30:break;default:vr(d,h,a)}s=s.sibling}}function Hd(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ul(a))}function Zd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ul(t))}function Ms(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gg(t,s,a,l),s=s.sibling}function gg(t,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Ms(t,s,a,l),d&2048&&jl(9,s);break;case 1:Ms(t,s,a,l);break;case 3:Ms(t,s,a,l),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ul(t)));break;case 12:if(d&2048){Ms(t,s,a,l),t=s.stateNode;try{var h=s.memoizedProps,v=h.id,S=h.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(T){ft(s,s.return,T)}}else Ms(t,s,a,l);break;case 31:Ms(t,s,a,l);break;case 13:Ms(t,s,a,l);break;case 23:break;case 22:h=s.stateNode,v=s.alternate,s.memoizedState!==null?h._visibility&2?Ms(t,s,a,l):Nl(t,s):h._visibility&2?Ms(t,s,a,l):(h._visibility|=2,gi(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Hd(v,s);break;case 24:Ms(t,s,a,l),d&2048&&Zd(s.alternate,s);break;default:Ms(t,s,a,l)}}function gi(t,s,a,l,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var h=t,v=s,S=a,T=l,K=v.flags;switch(v.tag){case 0:case 11:case 15:gi(h,v,S,T,d),jl(8,v);break;case 23:break;case 22:var oe=v.stateNode;v.memoizedState!==null?oe._visibility&2?gi(h,v,S,T,d):Nl(h,v):(oe._visibility|=2,gi(h,v,S,T,d)),d&&K&2048&&Hd(v.alternate,v);break;case 24:gi(h,v,S,T,d),d&&K&2048&&Zd(v.alternate,v);break;default:gi(h,v,S,T,d)}s=s.sibling}}function Nl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,d=l.flags;switch(l.tag){case 22:Nl(a,l),d&2048&&Hd(l.alternate,l);break;case 24:Nl(a,l),d&2048&&Zd(l.alternate,l);break;default:Nl(a,l)}s=s.sibling}}var _l=8192;function xi(t,s,a){if(t.subtreeFlags&_l)for(t=t.child;t!==null;)xg(t,s,a),t=t.sibling}function xg(t,s,a){switch(t.tag){case 26:xi(t,s,a),t.flags&_l&&t.memoizedState!==null&&b1(a,Ds,t.memoizedState,t.memoizedProps);break;case 5:xi(t,s,a);break;case 3:case 4:var l=Ds;Ds=Sc(t.stateNode.containerInfo),xi(t,s,a),Ds=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=_l,_l=16777216,xi(t,s,a),_l=l):xi(t,s,a));break;default:xi(t,s,a)}}function vg(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Cl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];bn=l,yg(l,t)}vg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bg(t),t=t.sibling}function bg(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&Hr(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,cc(t)):Cl(t);break;default:Cl(t)}}function cc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];bn=l,yg(l,t)}vg(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Hr(8,s,s.return),cc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,cc(s));break;default:cc(s)}t=t.sibling}}function yg(t,s){for(;bn!==null;){var a=bn;switch(a.tag){case 0:case 11:case 15:Hr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,bn=l;else e:for(a=t;bn!==null;){l=bn;var d=l.sibling,h=l.return;if(ug(l),l===a){bn=null;break e}if(d!==null){d.return=h,bn=d;break e}bn=h}}}var zw={getCacheForType:function(t){var s=_n(Yt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return _n(Yt).controller.signal}},Ow=typeof WeakMap=="function"?WeakMap:Map,ot=0,wt=null,Xe=null,nt=0,dt=0,ls=null,Zr=!1,vi=!1,Vd=!1,br=0,Vt=0,Vr=0,ka=0,Fd=0,os=0,bi=0,kl=null,Wn=null,Qd=!1,uc=0,wg=0,dc=1/0,fc=null,Fr=null,an=0,Qr=null,yi=null,yr=0,Id=0,Wd=null,Sg=null,Tl=0,Gd=null;function cs(){return(ot&2)!==0&&nt!==0?nt&-nt:U.T!==null?ef():$n()}function jg(){if(os===0)if((nt&536870912)===0||at){var t=er;er<<=1,(er&3932160)===0&&(er=262144),os=t}else os=536870912;return t=as.current,t!==null&&(t.flags|=32),os}function Gn(t,s,a){(t===wt&&(dt===2||dt===9)||t.cancelPendingCommit!==null)&&(wi(t,0),Ir(t,nt,os,!1)),It(t,a),((ot&2)===0||t!==wt)&&(t===wt&&((ot&2)===0&&(ka|=a),Vt===4&&Ir(t,nt,os,!1)),Ws(t))}function Eg(t,s,a){if((ot&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||fn(t,s),d=l?Bw(t,s):Pd(t,s,!0),h=l;do{if(d===0){vi&&!l&&Ir(t,s,0,!1);break}else{if(a=t.current.alternate,h&&!Lw(a)){d=Pd(t,s,!1),h=!1;continue}if(d===2){if(h=s,t.errorRecoveryDisabledLanes&h)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var S=t;d=kl;var T=S.current.memoizedState.isDehydrated;if(T&&(wi(S,v).flags|=256),v=Pd(S,v,!1),v!==2){if(Vd&&!T){S.errorRecoveryDisabledLanes|=h,ka|=h,d=4;break e}h=Wn,Wn=d,h!==null&&(Wn===null?Wn=h:Wn.push.apply(Wn,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){wi(t,0),Ir(t,s,0,!0);break}e:{switch(l=t,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ir(l,s,os,!Zr);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=uc+300-ve(),10<d)){if(Ir(l,s,os,!Zr),Ht(l,0,!0)!==0)break e;yr=s,l.timeoutHandle=tx(Ng.bind(null,l,a,Wn,fc,Qd,s,os,ka,bi,Zr,h,"Throttled",-0,0),d);break e}Ng(l,a,Wn,fc,Qd,s,os,ka,bi,Zr,h,null,-0,0)}}break}while(!0);Ws(t)}function Ng(t,s,a,l,d,h,v,S,T,K,oe,de,X,te){if(t.timeoutHandle=-1,de=s.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_s},xg(s,h,de);var ze=(h&62914560)===h?uc-ve():(h&4194048)===h?wg-ve():0;if(ze=y1(de,ze),ze!==null){yr=h,t.cancelPendingCommit=ze(Rg.bind(null,t,s,h,a,l,d,v,S,T,oe,de,null,X,te)),Ir(t,h,v,!K);return}}Rg(t,s,h,a,l,d,v,S,T)}function Lw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],h=d.getSnapshot;d=d.value;try{if(!ss(h(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ir(t,s,a,l){s&=~Fd,s&=~ka,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var d=s;0<d;){var h=31-Ft(d),v=1<<h;l[h]=-1,d&=~v}a!==0&&es(t,a,s)}function hc(){return(ot&6)===0?(Al(0),!1):!0}function Kd(){if(Xe!==null){if(dt===0)var t=Xe.return;else t=Xe,cr=ba=null,dd(t),di=null,fl=0,t=Xe;for(;t!==null;)ng(t.alternate,t),t=t.return;Xe=null}}function wi(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,n1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),yr=0,Kd(),wt=t,Xe=a=lr(t.current,null),nt=s,dt=0,ls=null,Zr=!1,vi=fn(t,s),Vd=!1,bi=os=Fd=ka=Vr=Vt=0,Wn=kl=null,Qd=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var d=31-Ft(l),h=1<<d;s|=t[d],l&=~h}return br=s,zo(),a}function _g(t,s){Ke=null,U.H=yl,s===ui||s===Zo?(s=Zm(),dt=3):s===Ju?(s=Zm(),dt=4):dt=s===Cd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ls=s,Xe===null&&(Vt=1,nc(t,fs(s,t.current)))}function Cg(){var t=as.current;return t===null?!0:(nt&4194048)===nt?gs===null:(nt&62914560)===nt||(nt&536870912)!==0?t===gs:!1}function kg(){var t=U.H;return U.H=yl,t===null?yl:t}function Tg(){var t=U.A;return U.A=zw,t}function mc(){Vt=4,Zr||(nt&4194048)!==nt&&as.current!==null||(vi=!0),(Vr&134217727)===0&&(ka&134217727)===0||wt===null||Ir(wt,nt,os,!1)}function Pd(t,s,a){var l=ot;ot|=2;var d=kg(),h=Tg();(wt!==t||nt!==s)&&(fc=null,wi(t,s)),s=!1;var v=Vt;e:do try{if(dt!==0&&Xe!==null){var S=Xe,T=ls;switch(dt){case 8:Kd(),v=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(s=!0);var K=dt;if(dt=0,ls=null,Si(t,S,T,K),a&&vi){v=0;break e}break;default:K=dt,dt=0,ls=null,Si(t,S,T,K)}}Uw(),v=Vt;break}catch(oe){_g(t,oe)}while(!0);return s&&t.shellSuspendCounter++,cr=ba=null,ot=l,U.H=d,U.A=h,Xe===null&&(wt=null,nt=0,zo()),v}function Uw(){for(;Xe!==null;)Ag(Xe)}function Bw(t,s){var a=ot;ot|=2;var l=kg(),d=Tg();wt!==t||nt!==s?(fc=null,dc=ve()+500,wi(t,s)):vi=fn(t,s);e:do try{if(dt!==0&&Xe!==null){s=Xe;var h=ls;t:switch(dt){case 1:dt=0,ls=null,Si(t,s,h,1);break;case 2:case 9:if($m(h)){dt=0,ls=null,Dg(s);break}s=function(){dt!==2&&dt!==9||wt!==t||(dt=7),Ws(t)},h.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:$m(h)?(dt=0,ls=null,Dg(s)):(dt=0,ls=null,Si(t,s,h,7));break;case 5:var v=null;switch(Xe.tag){case 26:v=Xe.memoizedState;case 5:case 27:var S=Xe;if(v?gx(v):S.stateNode.complete){dt=0,ls=null;var T=S.sibling;if(T!==null)Xe=T;else{var K=S.return;K!==null?(Xe=K,pc(K)):Xe=null}break t}}dt=0,ls=null,Si(t,s,h,5);break;case 6:dt=0,ls=null,Si(t,s,h,6);break;case 8:Kd(),Vt=6;break e;default:throw Error(i(462))}}qw();break}catch(oe){_g(t,oe)}while(!0);return cr=ba=null,U.H=l,U.A=d,ot=a,Xe!==null?0:(wt=null,nt=0,zo(),Vt)}function qw(){for(;Xe!==null&&!ne();)Ag(Xe)}function Ag(t){var s=eg(t.alternate,t,br);t.memoizedProps=t.pendingProps,s===null?pc(t):Xe=s}function Dg(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Gp(a,s,s.pendingProps,s.type,void 0,nt);break;case 11:s=Gp(a,s,s.pendingProps,s.type.render,s.ref,nt);break;case 5:dd(s);default:ng(a,s),s=Xe=Tm(s,br),s=eg(a,s,br)}t.memoizedProps=t.pendingProps,s===null?pc(t):Xe=s}function Si(t,s,a,l){cr=ba=null,dd(s),di=null,fl=0;var d=s.return;try{if(Cw(t,d,s,a,nt)){Vt=1,nc(t,fs(a,t.current)),Xe=null;return}}catch(h){if(d!==null)throw Xe=d,h;Vt=1,nc(t,fs(a,t.current)),Xe=null;return}s.flags&32768?(at||l===1?t=!0:vi||(nt&536870912)!==0?t=!1:(Zr=t=!0,(l===2||l===9||l===3||l===6)&&(l=as.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mg(s,t)):pc(s)}function pc(t){var s=t;do{if((s.flags&32768)!==0){Mg(s,Zr);return}t=s.return;var a=Aw(s.alternate,s,br);if(a!==null){Xe=a;return}if(s=s.sibling,s!==null){Xe=s;return}Xe=s=t}while(s!==null);Vt===0&&(Vt=5)}function Mg(t,s){do{var a=Dw(t.alternate,t);if(a!==null){a.flags&=32767,Xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Xe=t;return}Xe=t=a}while(t!==null);Vt=6,Xe=null}function Rg(t,s,a,l,d,h,v,S,T){t.cancelPendingCommit=null;do gc();while(an!==0);if((ot&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(h=s.lanes|s.childLanes,h|=Bu,Lt(t,a,h,v,S,T),t===wt&&(Xe=wt=null,nt=0),yi=s,Qr=t,yr=a,Id=h,Wd=d,Sg=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Vw(Ge,function(){return Bg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,d=P.p,P.p=2,v=ot,ot|=4;try{Mw(t,s,a)}finally{ot=v,P.p=d,U.T=l}}an=1,zg(),Og(),Lg()}}function zg(){if(an===1){an=0;var t=Qr,s=yi,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var l=P.p;P.p=2;var d=ot;ot|=4;try{mg(s,t);var h=cf,v=ym(t.containerInfo),S=h.focusedElem,T=h.selectionRange;if(v!==S&&S&&S.ownerDocument&&bm(S.ownerDocument.documentElement,S)){if(T!==null&&Ru(S)){var K=T.start,oe=T.end;if(oe===void 0&&(oe=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(oe,S.value.length);else{var de=S.ownerDocument||document,X=de&&de.defaultView||window;if(X.getSelection){var te=X.getSelection(),ze=S.textContent.length,He=Math.min(T.start,ze),vt=T.end===void 0?He:Math.min(T.end,ze);!te.extend&&He>vt&&(v=vt,vt=He,He=v);var $=vm(S,He),L=vm(S,vt);if($&&L&&(te.rangeCount!==1||te.anchorNode!==$.node||te.anchorOffset!==$.offset||te.focusNode!==L.node||te.focusOffset!==L.offset)){var G=de.createRange();G.setStart($.node,$.offset),te.removeAllRanges(),He>vt?(te.addRange(G),te.extend(L.node,L.offset)):(G.setEnd(L.node,L.offset),te.addRange(G))}}}}for(de=[],te=S;te=te.parentNode;)te.nodeType===1&&de.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<de.length;S++){var ue=de[S];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}kc=!!of,cf=of=null}finally{ot=d,P.p=l,U.T=a}}t.current=s,an=2}}function Og(){if(an===2){an=0;var t=Qr,s=yi,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var l=P.p;P.p=2;var d=ot;ot|=4;try{cg(t,s.alternate,s)}finally{ot=d,P.p=l,U.T=a}}an=3}}function Lg(){if(an===4||an===3){an=0,Ce();var t=Qr,s=yi,a=yr,l=Sg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?an=5:(an=0,yi=Qr=null,Ug(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Fr=null),qn(a),s=s.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Dt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=U.T,d=P.p,P.p=2,U.T=null;try{for(var h=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];h(S.value,{componentStack:S.stack})}}finally{U.T=s,P.p=d}}(yr&3)!==0&&gc(),Ws(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Gd?Tl++:(Tl=0,Gd=t):Tl=0,Al(0)}}function Ug(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ul(s)))}function gc(){return zg(),Og(),Lg(),Bg()}function Bg(){if(an!==5)return!1;var t=Qr,s=Id;Id=0;var a=qn(yr),l=U.T,d=P.p;try{P.p=32>a?32:a,U.T=null,a=Wd,Wd=null;var h=Qr,v=yr;if(an=0,yi=Qr=null,yr=0,(ot&6)!==0)throw Error(i(331));var S=ot;if(ot|=4,bg(h.current),gg(h,h.current,v,a),ot=S,Al(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Dt,h)}catch{}return!0}finally{P.p=d,U.T=l,Ug(t,s)}}function qg(t,s,a){s=fs(a,s),s=_d(t.stateNode,s,2),t=Br(t,s,2),t!==null&&(It(t,2),Ws(t))}function ft(t,s,a){if(t.tag===3)qg(t,t,a);else for(;s!==null;){if(s.tag===3){qg(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fr===null||!Fr.has(l))){t=fs(a,t),a=$p(2),l=Br(s,a,2),l!==null&&(Hp(a,l,s,t),It(l,2),Ws(l));break}}s=s.return}}function Yd(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Ow;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(Vd=!0,d.add(a),t=$w.bind(null,t,s,a),s.then(t,t))}function $w(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,wt===t&&(nt&a)===a&&(Vt===4||Vt===3&&(nt&62914560)===nt&&300>ve()-uc?(ot&2)===0&&wi(t,0):Fd|=a,bi===nt&&(bi=0)),Ws(t)}function $g(t,s){s===0&&(s=Qt()),t=ga(t,s),t!==null&&(It(t,s),Ws(t))}function Hw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),$g(t,a)}function Zw(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),$g(t,a)}function Vw(t,s){return k(t,s)}var xc=null,ji=null,Xd=!1,vc=!1,Jd=!1,Wr=0;function Ws(t){t!==ji&&t.next===null&&(ji===null?xc=ji=t:ji=ji.next=t),vc=!0,Xd||(Xd=!0,Qw())}function Al(t,s){if(!Jd&&vc){Jd=!0;do for(var a=!1,l=xc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var v=l.suspendedLanes,S=l.pingedLanes;h=(1<<31-Ft(42|t)+1)-1,h&=d&~(v&~S),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Fg(l,h))}else h=nt,h=Ht(l,l===wt?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||fn(l,h)||(a=!0,Fg(l,h));l=l.next}while(a);Jd=!1}}function Fw(){Hg()}function Hg(){vc=Xd=!1;var t=0;Wr!==0&&t1()&&(t=Wr);for(var s=ve(),a=null,l=xc;l!==null;){var d=l.next,h=Zg(l,s);h===0?(l.next=null,a===null?xc=d:a.next=d,d===null&&(ji=a)):(a=l,(t!==0||(h&3)!==0)&&(vc=!0)),l=d}an!==0&&an!==5||Al(t),Wr!==0&&(Wr=0)}function Zg(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var v=31-Ft(h),S=1<<v,T=d[v];T===-1?((S&a)===0||(S&l)!==0)&&(d[v]=tt(S,s)):T<=s&&(t.expiredLanes|=S),h&=~S}if(s=wt,a=nt,a=Ht(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(dt===2||dt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&I(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||fn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&I(l),qn(a)){case 2:case 8:a=Ze;break;case 32:a=Ge;break;case 268435456:a=Ee;break;default:a=Ge}return l=Vg.bind(null,t),a=k(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&I(l),t.callbackPriority=2,t.callbackNode=null,2}function Vg(t,s){if(an!==0&&an!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(gc()&&t.callbackNode!==a)return null;var l=nt;return l=Ht(t,t===wt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Eg(t,l,s),Zg(t,ve()),t.callbackNode!=null&&t.callbackNode===a?Vg.bind(null,t):null)}function Fg(t,s){if(gc())return null;Eg(t,s,!0)}function Qw(){s1(function(){(ot&6)!==0?k(Oe,Fw):Hg()})}function ef(){if(Wr===0){var t=oi;t===0&&(t=Js,Js<<=1,(Js&261888)===0&&(Js=256)),Wr=t}return Wr}function Qg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Tr(""+t)}function Ig(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Iw(t,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var h=Qg((d[hn]||null).action),v=l.submitter;v&&(s=(s=v[hn]||null)?Qg(s.formAction):v.getAttribute("formAction"),s!==null&&(h=s,v=null));var S=new q("action","action",null,l,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wr!==0){var T=v?Ig(d,v):new FormData(d);yd(a,{pending:!0,data:T,method:d.method,action:h},null,T)}}else typeof h=="function"&&(S.preventDefault(),T=v?Ig(d,v):new FormData(d),yd(a,{pending:!0,data:T,method:d.method,action:h},h,T))},currentTarget:d}]})}}for(var tf=0;tf<Uu.length;tf++){var nf=Uu[tf],Ww=nf.toLowerCase(),Gw=nf[0].toUpperCase()+nf.slice(1);As(Ww,"on"+Gw)}As(jm,"onAnimationEnd"),As(Em,"onAnimationIteration"),As(Nm,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(uw,"onTransitionRun"),As(dw,"onTransitionStart"),As(fw,"onTransitionCancel"),As(_m,"onTransitionEnd"),zn("onMouseEnter",["mouseout","mouseover"]),zn("onMouseLeave",["mouseout","mouseover"]),zn("onPointerEnter",["pointerout","pointerover"]),zn("onPointerLeave",["pointerout","pointerover"]),Ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function Wg(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var h=void 0;if(s)for(var v=l.length-1;0<=v;v--){var S=l[v],T=S.instance,K=S.currentTarget;if(S=S.listener,T!==h&&d.isPropagationStopped())break e;h=S,d.currentTarget=K;try{h(d)}catch(oe){Ro(oe)}d.currentTarget=null,h=T}else for(v=0;v<l.length;v++){if(S=l[v],T=S.instance,K=S.currentTarget,S=S.listener,T!==h&&d.isPropagationStopped())break e;h=S,d.currentTarget=K;try{h(d)}catch(oe){Ro(oe)}d.currentTarget=null,h=T}}}}function Je(t,s){var a=s[Ns];a===void 0&&(a=s[Ns]=new Set);var l=t+"__bubble";a.has(l)||(Gg(s,t,2,!1),a.add(l))}function sf(t,s,a){var l=0;s&&(l|=4),Gg(a,t,l,s)}var bc="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[bc]){t[bc]=!0,Fi.forEach(function(a){a!=="selectionchange"&&(Kw.has(a)||sf(a,!1,t),sf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[bc]||(s[bc]=!0,sf("selectionchange",!1,s))}}function Gg(t,s,a,l){switch(jx(s)){case 2:var d=j1;break;case 8:d=E1;break;default:d=yf}a=d.bind(null,s,a,t),d=void 0,!Ji||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function af(t,s,a,l,d){var h=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===d)break;if(v===4)for(v=l.return;v!==null;){var T=v.tag;if((T===3||T===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;S!==null;){if(v=Zn(S),v===null)return;if(T=v.tag,T===5||T===6||T===26||T===27){l=h=v;continue e}S=S.parentNode}}l=l.return}Eo(function(){var K=h,oe=Yi(a),de=[];e:{var X=Cm.get(t);if(X!==void 0){var te=q,ze=t;switch(t){case"keypress":if(Ya(a)===0)break e;case"keydown":case"keyup":te=nl;break;case"focusin":ze="focus",te=tl;break;case"focusout":ze="blur",te=tl;break;case"beforeblur":case"afterblur":te=tl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Tu;break;case jm:case Em:case Nm:te=ko;break;case _m:te=xn;break;case"scroll":case"scrollend":te=Me;break;case"wheel":te=Ts;break;case"copy":case"cut":case"paste":te=ks;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Mn;break;case"toggle":case"beforetoggle":te=Yy}var He=(s&4)!==0,vt=!He&&(t==="scroll"||t==="scrollend"),$=He?X!==null?X+"Capture":null:X;He=[];for(var L=K,G;L!==null;){var ue=L;if(G=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||G===null||$===null||(ue=da(L,$),ue!=null&&He.push(Ml(L,ue,G))),vt)break;L=L.return}0<He.length&&(X=new te(X,ze,null,a,oe),de.push({event:X,listeners:He}))}}if((s&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",X&&a!==Pi&&(ze=a.relatedTarget||a.fromElement)&&(Zn(ze)||ze[Nr]))break e;if((te||X)&&(X=oe.window===oe?oe:(X=oe.ownerDocument)?X.defaultView||X.parentWindow:window,te?(ze=a.relatedTarget||a.toElement,te=K,ze=ze?Zn(ze):null,ze!==null&&(vt=u(ze),He=ze.tag,ze!==vt||He!==5&&He!==27&&He!==6)&&(ze=null)):(te=null,ze=K),te!==ze)){if(He=mn,ue="onMouseLeave",$="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(He=Mn,ue="onPointerLeave",$="onPointerEnter",L="pointer"),vt=te==null?X:la(te),G=ze==null?X:la(ze),X=new He(ue,L+"leave",te,a,oe),X.target=vt,X.relatedTarget=G,ue=null,Zn(oe)===K&&(He=new He($,L+"enter",ze,a,oe),He.target=G,He.relatedTarget=vt,ue=He),vt=ue,te&&ze)t:{for(He=Pw,$=te,L=ze,G=0,ue=$;ue;ue=He(ue))G++;ue=0;for(var $e=L;$e;$e=He($e))ue++;for(;0<G-ue;)$=He($),G--;for(;0<ue-G;)L=He(L),ue--;for(;G--;){if($===L||L!==null&&$===L.alternate){He=$;break t}$=He($),L=He(L)}He=null}else He=null;te!==null&&Kg(de,X,te,He,!1),ze!==null&&vt!==null&&Kg(de,vt,ze,He,!0)}}e:{if(X=K?la(K):window,te=X.nodeName&&X.nodeName.toLowerCase(),te==="select"||te==="input"&&X.type==="file")var it=fm;else if(um(X))if(hm)it=lw;else{it=aw;var Be=rw}else te=X.nodeName,!te||te.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&Hs(K.elementType)&&(it=fm):it=iw;if(it&&(it=it(t,K))){dm(de,it,a,oe);break e}Be&&Be(t,X,K),t==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&Ka(X,"number",X.value)}switch(Be=K?la(K):window,t){case"focusin":(um(Be)||Be.contentEditable==="true")&&(ei=Be,zu=K,ll=null);break;case"focusout":ll=zu=ei=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,wm(de,a,oe);break;case"selectionchange":if(cw)break;case"keydown":case"keyup":wm(de,a,oe)}var Pe;if(Au)e:{switch(t){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Ja?om(t,a)&&(st="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&(am&&a.locale!=="ko"&&(Ja||st!=="onCompositionStart"?st==="onCompositionEnd"&&Ja&&(Pe=No()):(Vs=oe,el="value"in Vs?Vs.value:Vs.textContent,Ja=!0)),Be=yc(K,st),0<Be.length&&(st=new Ao(st,t,null,a,oe),de.push({event:st,listeners:Be}),Pe?st.data=Pe:(Pe=cm(a),Pe!==null&&(st.data=Pe)))),(Pe=Jy?ew(t,a):tw(t,a))&&(st=yc(K,"onBeforeInput"),0<st.length&&(Be=new Ao("onBeforeInput","beforeinput",null,a,oe),de.push({event:Be,listeners:st}),Be.data=Pe)),Iw(de,t,K,a,oe)}Wg(de,s)})}function Ml(t,s,a){return{instance:t,listener:s,currentTarget:a}}function yc(t,s){for(var a=s+"Capture",l=[];t!==null;){var d=t,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=da(t,a),d!=null&&l.unshift(Ml(t,d,h)),d=da(t,s),d!=null&&l.push(Ml(t,d,h))),t.tag===3)return l;t=t.return}return[]}function Pw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Kg(t,s,a,l,d){for(var h=s._reactName,v=[];a!==null&&a!==l;){var S=a,T=S.alternate,K=S.stateNode;if(S=S.tag,T!==null&&T===l)break;S!==5&&S!==26&&S!==27||K===null||(T=K,d?(K=da(a,h),K!=null&&v.unshift(Ml(a,K,T))):d||(K=da(a,h),K!=null&&v.push(Ml(a,K,T)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var Yw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function Pg(t){return(typeof t=="string"?t:""+t).replace(Yw,`
`).replace(Xw,"")}function Yg(t,s){return s=Pg(s),Pg(t)===s}function xt(t,s,a,l,d,h){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||kr(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&kr(t,""+l);break;case"className":$s(t,"class",l);break;case"tabIndex":$s(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$s(t,a,l);break;case"style":ua(t,l,h);break;case"data":if(s!=="object"){$s(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Tr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(s!=="input"&&xt(t,s,"name",d.name,d,null),xt(t,s,"formEncType",d.formEncType,d,null),xt(t,s,"formMethod",d.formMethod,d,null),xt(t,s,"formTarget",d.formTarget,d,null)):(xt(t,s,"encType",d.encType,d,null),xt(t,s,"method",d.method,d,null),xt(t,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Tr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=_s);break;case"onScroll":l!=null&&Je("scroll",t);break;case"onScrollEnd":l!=null&&Je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Tr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Je("beforetoggle",t),Je("toggle",t),nr(t,"popover",l);break;case"xlinkActuate":ns(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ns(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ns(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ns(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ns(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ns(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ns(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ns(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ns(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":nr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gi.get(a)||a,nr(t,a,l))}}function lf(t,s,a,l,d,h){switch(a){case"style":ua(t,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?kr(t,l):(typeof l=="number"||typeof l=="bigint")&&kr(t,""+l);break;case"onScroll":l!=null&&Je("scroll",t);break;case"onScrollEnd":l!=null&&Je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=_s);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),h=t[hn]||null,h=h!=null?h[a]:null,typeof h=="function"&&t.removeEventListener(s,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):nr(t,a,l)}}}function kn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",t),Je("load",t);var l=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var v=a[h];if(v!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(t,s,h,v,a,null)}}d&&xt(t,s,"srcSet",a.srcSet,a,null),l&&xt(t,s,"src",a.src,a,null);return;case"input":Je("invalid",t);var S=h=v=d=null,T=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":d=oe;break;case"type":v=oe;break;case"checked":T=oe;break;case"defaultChecked":K=oe;break;case"value":h=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:xt(t,s,l,oe,a,null)}}Wi(t,h,S,T,K,v,d,!1);return;case"select":Je("invalid",t),l=v=h=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":h=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:xt(t,s,d,S,a,null)}s=h,a=v,t.multiple=!!l,s!=null?sr(t,!!l,s,!1):a!=null&&sr(t,!!l,a,!0);return;case"textarea":Je("invalid",t),h=d=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":d=S;break;case"children":h=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:xt(t,s,v,S,a,null)}wo(t,l,d,h);return;case"option":for(T in a)if(a.hasOwnProperty(T)&&(l=a[T],l!=null))switch(T){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:xt(t,s,T,l,a,null)}return;case"dialog":Je("beforetoggle",t),Je("toggle",t),Je("cancel",t),Je("close",t);break;case"iframe":case"object":Je("load",t);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Je(Dl[l],t);break;case"image":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"embed":case"source":case"link":Je("error",t),Je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(t,s,K,l,a,null)}return;default:if(Hs(s)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&lf(t,s,oe,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&xt(t,s,S,l,a,null))}function Jw(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,S=null,T=null,K=null,oe=null;for(te in a){var de=a[te];if(a.hasOwnProperty(te)&&de!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":T=de;default:l.hasOwnProperty(te)||xt(t,s,te,null,l,de)}}for(var X in l){var te=l[X];if(de=a[X],l.hasOwnProperty(X)&&(te!=null||de!=null))switch(X){case"type":h=te;break;case"name":d=te;break;case"checked":K=te;break;case"defaultChecked":oe=te;break;case"value":v=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:te!==de&&xt(t,s,X,te,l,de)}}Ii(t,v,S,T,K,oe,h,d);return;case"select":te=v=S=X=null;for(h in a)if(T=a[h],a.hasOwnProperty(h)&&T!=null)switch(h){case"value":break;case"multiple":te=T;default:l.hasOwnProperty(h)||xt(t,s,h,null,l,T)}for(d in l)if(h=l[d],T=a[d],l.hasOwnProperty(d)&&(h!=null||T!=null))switch(d){case"value":X=h;break;case"defaultValue":S=h;break;case"multiple":v=h;default:h!==T&&xt(t,s,d,h,l,T)}s=S,a=v,l=te,X!=null?sr(t,!!a,X,!1):!!l!=!!a&&(s!=null?sr(t,!!a,s,!0):sr(t,!!a,a?[]:"",!1));return;case"textarea":te=X=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:xt(t,s,S,null,l,d)}for(v in l)if(d=l[v],h=a[v],l.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":X=d;break;case"defaultValue":te=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&xt(t,s,v,d,l,h)}yo(t,X,te);return;case"option":for(var ze in a)if(X=a[ze],a.hasOwnProperty(ze)&&X!=null&&!l.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:xt(t,s,ze,null,l,X)}for(T in l)if(X=l[T],te=a[T],l.hasOwnProperty(T)&&X!==te&&(X!=null||te!=null))switch(T){case"selected":t.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:xt(t,s,T,X,l,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in a)X=a[He],a.hasOwnProperty(He)&&X!=null&&!l.hasOwnProperty(He)&&xt(t,s,He,null,l,X);for(K in l)if(X=l[K],te=a[K],l.hasOwnProperty(K)&&X!==te&&(X!=null||te!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:xt(t,s,K,X,l,te)}return;default:if(Hs(s)){for(var vt in a)X=a[vt],a.hasOwnProperty(vt)&&X!==void 0&&!l.hasOwnProperty(vt)&&lf(t,s,vt,void 0,l,X);for(oe in l)X=l[oe],te=a[oe],!l.hasOwnProperty(oe)||X===te||X===void 0&&te===void 0||lf(t,s,oe,X,l,te);return}}for(var $ in a)X=a[$],a.hasOwnProperty($)&&X!=null&&!l.hasOwnProperty($)&&xt(t,s,$,null,l,X);for(de in l)X=l[de],te=a[de],!l.hasOwnProperty(de)||X===te||X==null&&te==null||xt(t,s,de,X,l,te)}function Xg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function e1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],h=d.transferSize,v=d.initiatorType,S=d.duration;if(h&&S&&Xg(v)){for(v=0,S=d.responseEnd,l+=1;l<a.length;l++){var T=a[l],K=T.startTime;if(K>S)break;var oe=T.transferSize,de=T.initiatorType;oe&&Xg(de)&&(T=T.responseEnd,v+=oe*(T<S?1:(S-K)/(T-K)))}if(--l,s+=8*(h+v)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var of=null,cf=null;function wc(t){return t.nodeType===9?t:t.ownerDocument}function Jg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ex(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function uf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var df=null;function t1(){var t=window.event;return t&&t.type==="popstate"?t===df?!1:(df=t,!0):(df=null,!1)}var tx=typeof setTimeout=="function"?setTimeout:void 0,n1=typeof clearTimeout=="function"?clearTimeout:void 0,nx=typeof Promise=="function"?Promise:void 0,s1=typeof queueMicrotask=="function"?queueMicrotask:typeof nx<"u"?function(t){return nx.resolve(null).then(t).catch(r1)}:tx;function r1(t){setTimeout(function(){throw t})}function Gr(t){return t==="head"}function sx(t,s){var a=s,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),Ci(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Rl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Rl(a);for(var h=a.firstChild;h;){var v=h.nextSibling,S=h.nodeName;h[tr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=v}}else a==="body"&&Rl(t.ownerDocument.body);a=d}while(a);Ci(s)}function rx(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function ff(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ff(a),Fa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function a1(t,s,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[tr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=xs(t.nextSibling),t===null)break}return null}function i1(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=xs(t.nextSibling),t===null))return null;return t}function ax(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=xs(t.nextSibling),t===null))return null;return t}function hf(t){return t.data==="$?"||t.data==="$~"}function mf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function l1(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function xs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var pf=null;function ix(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return xs(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function lx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function ox(t,s,a){switch(s=wc(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Rl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Fa(t)}var vs=new Map,cx=new Set;function Sc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wr=P.d;P.d={f:o1,r:c1,D:u1,C:d1,L:f1,m:h1,X:p1,S:m1,M:g1};function o1(){var t=wr.f(),s=hc();return t||s}function c1(t){var s=Mt(t);s!==null&&s.tag===5&&s.type==="form"?_p(s):wr.r(t)}var Ei=typeof document>"u"?null:document;function ux(t,s,a){var l=Ei;if(l&&typeof s=="string"&&s){var d=Vn(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),cx.has(d)||(cx.add(d),t={rel:t,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),kn(s,"link",t),Ct(s),l.head.appendChild(s)))}}function u1(t){wr.D(t),ux("dns-prefetch",t,null)}function d1(t,s){wr.C(t,s),ux("preconnect",t,s)}function f1(t,s,a){wr.L(t,s,a);var l=Ei;if(l&&t&&s){var d='link[rel="preload"][as="'+Vn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Vn(a.imageSizes)+'"]')):d+='[href="'+Vn(t)+'"]';var h=d;switch(s){case"style":h=Ni(t);break;case"script":h=_i(t)}vs.has(h)||(t=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),vs.set(h,t),l.querySelector(d)!==null||s==="style"&&l.querySelector(zl(h))||s==="script"&&l.querySelector(Ol(h))||(s=l.createElement("link"),kn(s,"link",t),Ct(s),l.head.appendChild(s)))}}function h1(t,s){wr.m(t,s);var a=Ei;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Vn(l)+'"][href="'+Vn(t)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=_i(t)}if(!vs.has(h)&&(t=y({rel:"modulepreload",href:t},s),vs.set(h,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ol(h)))return}l=a.createElement("link"),kn(l,"link",t),Ct(l),a.head.appendChild(l)}}}function m1(t,s,a){wr.S(t,s,a);var l=Ei;if(l&&t){var d=ts(l).hoistableStyles,h=Ni(t);s=s||"default";var v=d.get(h);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(zl(h)))S.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":s},a),(a=vs.get(h))&&gf(t,a);var T=v=l.createElement("link");Ct(T),kn(T,"link",t),T._p=new Promise(function(K,oe){T.onload=K,T.onerror=oe}),T.addEventListener("load",function(){S.loading|=1}),T.addEventListener("error",function(){S.loading|=2}),S.loading|=4,jc(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:S},d.set(h,v)}}}function p1(t,s){wr.X(t,s);var a=Ei;if(a&&t){var l=ts(a).hoistableScripts,d=_i(t),h=l.get(d);h||(h=a.querySelector(Ol(d)),h||(t=y({src:t,async:!0},s),(s=vs.get(d))&&xf(t,s),h=a.createElement("script"),Ct(h),kn(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function g1(t,s){wr.M(t,s);var a=Ei;if(a&&t){var l=ts(a).hoistableScripts,d=_i(t),h=l.get(d);h||(h=a.querySelector(Ol(d)),h||(t=y({src:t,async:!0,type:"module"},s),(s=vs.get(d))&&xf(t,s),h=a.createElement("script"),Ct(h),kn(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function dx(t,s,a,l){var d=(d=z.current)?Sc(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ni(a.href),a=ts(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ni(a.href);var h=ts(d).hoistableStyles,v=h.get(t);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,v),(h=d.querySelector(zl(t)))&&!h._p&&(v.instance=h,v.state.loading=5),vs.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},vs.set(t,a),h||x1(d,t,a,v.state))),s&&l===null)throw Error(i(528,""));return v}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_i(a),a=ts(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ni(t){return'href="'+Vn(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function fx(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function x1(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),kn(s,"link",a),Ct(s),t.head.appendChild(s))}function _i(t){return'[src="'+Vn(t)+'"]'}function Ol(t){return"script[async]"+t}function hx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Vn(a.href)+'"]');if(l)return s.instance=l,Ct(l),l;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ct(l),kn(l,"style",d),jc(l,a.precedence,t),s.instance=l;case"stylesheet":d=Ni(a.href);var h=t.querySelector(zl(d));if(h)return s.state.loading|=4,s.instance=h,Ct(h),h;l=fx(a),(d=vs.get(d))&&gf(l,d),h=(t.ownerDocument||t).createElement("link"),Ct(h);var v=h;return v._p=new Promise(function(S,T){v.onload=S,v.onerror=T}),kn(h,"link",l),s.state.loading|=4,jc(h,a.precedence,t),s.instance=h;case"script":return h=_i(a.src),(d=t.querySelector(Ol(h)))?(s.instance=d,Ct(d),d):(l=a,(d=vs.get(h))&&(l=y({},a),xf(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Ct(d),kn(d,"link",l),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,jc(l,a.precedence,t));return s.instance}function jc(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===s)h=S;else if(h!==d)break}h?h.parentNode.insertBefore(t,h.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function gf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function xf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ec=null;function mx(t,s,a){if(Ec===null){var l=new Map,d=Ec=new Map;d.set(a,l)}else d=Ec,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var h=a[d];if(!(h[tr]||h[ut]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(s)||"";v=t+v;var S=l.get(v);S?S.push(h):l.set(v,[h])}}return l}function px(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function v1(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gx(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function b1(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ni(l.href),h=s.querySelector(zl(d));if(h){s=h._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Nc.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=h,Ct(h);return}h=s.ownerDocument||s,l=fx(l),(d=vs.get(d))&&gf(l,d),h=h.createElement("link"),Ct(h);var v=h;v._p=new Promise(function(S,T){v.onload=S,v.onerror=T}),kn(h,"link",l),a.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Nc.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var vf=0;function y1(t,s){return t.stylesheets&&t.count===0&&Cc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+s);0<t.imgBytes&&vf===0&&(vf=62500*e1());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>vf?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _c=null;function Cc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_c=new Map,s.forEach(w1,t),_c=null,Nc.call(t))}function w1(t,s){if(!(s.state.loading&4)){var a=_c.get(t);if(a)var l=a.get(null);else{a=new Map,_c.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}d=s.instance,v=d.getAttribute("data-precedence"),h=a.get(v)||l,h===l&&a.set(null,d),a.set(v,d),this.count++,l=Nc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Ll={$$typeof:D,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function S1(t,s,a,l,d,h,v,S,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.hiddenUpdates=mt(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function xx(t,s,a,l,d,h,v,S,T,K,oe,de){return t=new S1(t,s,a,v,T,K,oe,de,S),s=1,h===!0&&(s|=24),h=rs(3,null,null,s),t.current=h,h.stateNode=t,s=Pu(),s.refCount++,t.pooledCache=s,s.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:s},ed(h),t}function vx(t){return t?(t=si,t):si}function bx(t,s,a,l,d,h){d=vx(d),l.context===null?l.context=d:l.pendingContext=d,l=Ur(s),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=Br(t,l,s),a!==null&&(Gn(a,t,s),ml(a,t,s))}function yx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function bf(t,s){yx(t,s),(t=t.alternate)&&yx(t,s)}function wx(t){if(t.tag===13||t.tag===31){var s=ga(t,67108864);s!==null&&Gn(s,t,67108864),bf(t,67108864)}}function Sx(t){if(t.tag===13||t.tag===31){var s=cs();s=De(s);var a=ga(t,s);a!==null&&Gn(a,t,s),bf(t,s)}}var kc=!0;function j1(t,s,a,l){var d=U.T;U.T=null;var h=P.p;try{P.p=2,yf(t,s,a,l)}finally{P.p=h,U.T=d}}function E1(t,s,a,l){var d=U.T;U.T=null;var h=P.p;try{P.p=8,yf(t,s,a,l)}finally{P.p=h,U.T=d}}function yf(t,s,a,l){if(kc){var d=wf(l);if(d===null)af(t,s,l,Tc,a),Ex(t,l);else if(_1(d,t,s,a,l))l.stopPropagation();else if(Ex(t,l),s&4&&-1<N1.indexOf(t)){for(;d!==null;){var h=Mt(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=_t(h.pendingLanes);if(v!==0){var S=h;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var T=1<<31-Ft(v);S.entanglements[1]|=T,v&=~T}Ws(h),(ot&6)===0&&(dc=ve()+500,Al(0))}}break;case 31:case 13:S=ga(h,2),S!==null&&Gn(S,h,2),hc(),bf(h,2)}if(h=wf(l),h===null&&af(t,s,l,Tc,a),h===d)break;d=h}d!==null&&l.stopPropagation()}else af(t,s,l,null,a)}}function wf(t){return t=Yi(t),Sf(t)}var Tc=null;function Sf(t){if(Tc=null,t=Zn(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=m(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Tc=t,null}function jx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ye()){case Oe:return 2;case Ze:return 8;case Ge:case Nt:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var jf=!1,Kr=null,Pr=null,Yr=null,Ul=new Map,Bl=new Map,Xr=[],N1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ex(t,s){switch(t){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Ul.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(s.pointerId)}}function ql(t,s,a,l,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},s!==null&&(s=Mt(s),s!==null&&wx(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function _1(t,s,a,l,d){switch(s){case"focusin":return Kr=ql(Kr,t,s,a,l,d),!0;case"dragenter":return Pr=ql(Pr,t,s,a,l,d),!0;case"mouseover":return Yr=ql(Yr,t,s,a,l,d),!0;case"pointerover":var h=d.pointerId;return Ul.set(h,ql(Ul.get(h)||null,t,s,a,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Bl.set(h,ql(Bl.get(h)||null,t,s,a,l,d)),!0}return!1}function Nx(t){var s=Zn(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,Bs(t.priority,function(){Sx(a)});return}}else if(s===31){if(s=m(a),s!==null){t.blockedOn=s,Bs(t.priority,function(){Sx(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=wf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Pi=l,a.target.dispatchEvent(l),Pi=null}else return s=Mt(a),s!==null&&wx(s),t.blockedOn=a,!1;s.shift()}return!0}function _x(t,s,a){Ac(t)&&a.delete(s)}function C1(){jf=!1,Kr!==null&&Ac(Kr)&&(Kr=null),Pr!==null&&Ac(Pr)&&(Pr=null),Yr!==null&&Ac(Yr)&&(Yr=null),Ul.forEach(_x),Bl.forEach(_x)}function Dc(t,s){t.blockedOn===s&&(t.blockedOn=null,jf||(jf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,C1)))}var Mc=null;function Cx(t){Mc!==t&&(Mc=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Mc===t&&(Mc=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],d=t[s+2];if(typeof l!="function"){if(Sf(l||a)===null)continue;break}var h=Mt(a);h!==null&&(t.splice(s,3),s-=3,yd(h,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Ci(t){function s(T){return Dc(T,t)}Kr!==null&&Dc(Kr,t),Pr!==null&&Dc(Pr,t),Yr!==null&&Dc(Yr,t),Ul.forEach(s),Bl.forEach(s);for(var a=0;a<Xr.length;a++){var l=Xr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Xr.length&&(a=Xr[0],a.blockedOn===null);)Nx(a),a.blockedOn===null&&Xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],h=a[l+1],v=d[hn]||null;if(typeof h=="function")v||Cx(a);else if(v){var S=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[hn]||null)S=v.formAction;else if(Sf(d)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Cx(a)}}}function kx(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Ef(t){this._internalRoot=t}Rc.prototype.render=Ef.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=cs();bx(a,l,t,s,null,null)},Rc.prototype.unmount=Ef.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;bx(t.current,2,null,t,null,null),hc(),s[Nr]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var s=$n();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Xr.length&&s!==0&&s<Xr[a].priority;a++);Xr.splice(a,0,t),a===0&&Nx(t)}};var Tx=n.version;if(Tx!=="19.2.0")throw Error(i(527,Tx,"19.2.0"));P.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var k1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Dt=zc.inject(k1),rt=zc}catch{}}return Hl.createRoot=function(t,s){if(!c(t))throw Error(i(299));var a=!1,l="",d=Lp,h=Up,v=Bp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=xx(t,1,!1,null,null,a,l,null,d,h,v,kx),t[Nr]=s.current,rf(t),new Ef(s)},Hl.hydrateRoot=function(t,s,a){if(!c(t))throw Error(i(299));var l=!1,d="",h=Lp,v=Up,S=Bp,T=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(T=a.formState)),s=xx(t,1,!0,s,a??null,l,d,T,h,v,S,kx),s.context=vx(null),a=s.current,l=cs(),l=De(l),d=Ur(l),d.callback=null,Br(a,d,l),a=l,s.current.lanes=a,It(s,a),Ws(s),t[Nr]=s.current,rf(t),new Rc(s)},Hl.version="19.2.0",Hl}var qx;function U1(){if(qx)return Cf.exports;qx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Cf.exports=L1(),Cf.exports}var B1=U1();const q1=kv(B1),ou=p.createContext(null);function $1({children:e}){const[n,r]=p.useState(()=>({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash})),i=p.useRef(new Set),c=p.useRef(n);p.useEffect(()=>{c.current=n},[n]);const u=p.useCallback(g=>{for(const b of i.current)if(b(g)===!1)return!1;return!0},[]);p.useEffect(()=>{const g=()=>{const b={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash},y=`${b.pathname}${b.search}${b.hash}`;if(!u({kind:"pop",to:y,location:b})){const j=c.current;window.history.pushState(null,"",`${j.pathname}${j.search}${j.hash}`);return}r(b)};return window.addEventListener("popstate",g),()=>window.removeEventListener("popstate",g)},[u]);const f=p.useCallback(g=>(i.current.add(g),()=>{i.current.delete(g)}),[]),m=p.useCallback((g,b)=>{const y=new URL(g,window.location.origin),w={pathname:y.pathname,search:y.search,hash:y.hash},j=`${w.pathname}${w.search}${w.hash}`,_=b?.replace?"replace":"push";u({kind:_,to:j,location:w})&&(b?.replace?window.history.replaceState(null,"",j):window.history.pushState(null,"",j),window.dispatchEvent(new PopStateEvent("popstate")))},[u]),x=p.useMemo(()=>({location:n,navigate:m,registerBlocker:f}),[n,m,f]);return o.jsx(ou.Provider,{value:x,children:e})}function Ss(){const e=p.useContext(ou);if(!e)throw new Error("useLocation must be used within NavProvider");return e.location}function An(){const e=p.useContext(ou);if(!e)throw new Error("useNavigate must be used within NavProvider");return e.navigate}function H1(e,n=!0){const r=p.useContext(ou);if(!r)throw new Error("useNavigationBlocker must be used within NavProvider");p.useEffect(()=>{if(n)return r.registerBlocker(e)},[e,r,n])}var qi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Z1={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},V1=class{#e=Z1;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},Da=new V1;function F1(e){setTimeout(e,0)}var La=typeof window>"u"||"Deno"in globalThis;function Ln(){}function Q1(e,n){return typeof e=="function"?e(n):e}function Wf(e){return typeof e=="number"&&e>=0&&e!==1/0}function Av(e,n){return Math.max(e+(n||0)-Date.now(),0)}function na(e,n){return typeof e=="function"?e(n):e}function bs(e,n){return typeof e=="function"?e(n):e}function $x(e,n){const{type:r="all",exact:i,fetchStatus:c,predicate:u,queryKey:f,stale:m}=e;if(f){if(i){if(n.queryHash!==vh(f,n.options))return!1}else if(!Jl(n.queryKey,f))return!1}if(r!=="all"){const x=n.isActive();if(r==="active"&&!x||r==="inactive"&&x)return!1}return!(typeof m=="boolean"&&n.isStale()!==m||c&&c!==n.state.fetchStatus||u&&!u(n))}function Hx(e,n){const{exact:r,status:i,predicate:c,mutationKey:u}=e;if(u){if(!n.options.mutationKey)return!1;if(r){if(Ua(n.options.mutationKey)!==Ua(u))return!1}else if(!Jl(n.options.mutationKey,u))return!1}return!(i&&n.state.status!==i||c&&!c(n))}function vh(e,n){return(n?.queryKeyHashFn||Ua)(e)}function Ua(e){return JSON.stringify(e,(n,r)=>Gf(r)?Object.keys(r).sort().reduce((i,c)=>(i[c]=r[c],i),{}):r)}function Jl(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(r=>Jl(e[r],n[r])):!1}var I1=Object.prototype.hasOwnProperty;function Dv(e,n){if(e===n)return e;const r=Zx(e)&&Zx(n);if(!r&&!(Gf(e)&&Gf(n)))return n;const c=(r?e:Object.keys(e)).length,u=r?n:Object.keys(n),f=u.length,m=r?new Array(f):{};let x=0;for(let g=0;g<f;g++){const b=r?g:u[g],y=e[b],w=n[b];if(y===w){m[b]=y,(r?g<c:I1.call(e,b))&&x++;continue}if(y===null||w===null||typeof y!="object"||typeof w!="object"){m[b]=w;continue}const j=Dv(y,w);m[b]=j,j===y&&x++}return c===f&&x===c?e:m}function Wc(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}function Zx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gf(e){if(!Vx(e))return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(!Vx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Vx(e){return Object.prototype.toString.call(e)==="[object Object]"}function W1(e){return new Promise(n=>{Da.setTimeout(n,e)})}function Kf(e,n,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,n):r.structuralSharing!==!1?Dv(e,n):n}function G1(e,n,r=0){const i=[...e,n];return r&&i.length>r?i.slice(1):i}function K1(e,n,r=0){const i=[n,...e];return r&&i.length>r?i.slice(0,-1):i}var bh=Symbol();function Mv(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===bh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Rv(e,n){return typeof e=="function"?e(...n):!!e}var P1=class extends qi{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!La&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},yh=new P1;function Pf(){let e,n;const r=new Promise((c,u)=>{e=c,n=u});r.status="pending",r.catch(()=>{});function i(c){Object.assign(r,c),delete r.resolve,delete r.reject}return r.resolve=c=>{i({status:"fulfilled",value:c}),e(c)},r.reject=c=>{i({status:"rejected",reason:c}),n(c)},r}var Y1=F1;function X1(){let e=[],n=0,r=m=>{m()},i=m=>{m()},c=Y1;const u=m=>{n?e.push(m):c(()=>{r(m)})},f=()=>{const m=e;e=[],m.length&&c(()=>{i(()=>{m.forEach(x=>{r(x)})})})};return{batch:m=>{let x;n++;try{x=m()}finally{n--,n||f()}return x},batchCalls:m=>(...x)=>{u(()=>{m(...x)})},schedule:u,setNotifyFunction:m=>{r=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{c=m}}}var on=X1(),J1=class extends qi{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!La&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Gc=new J1;function eS(e){return Math.min(1e3*2**e,3e4)}function zv(e){return(e??"online")==="online"?Gc.isOnline():!0}var Yf=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Ov(e){let n=!1,r=0,i;const c=Pf(),u=()=>c.status!=="pending",f=E=>{if(!u()){const A=new Yf(E);w(A),e.onCancel?.(A)}},m=()=>{n=!0},x=()=>{n=!1},g=()=>yh.isFocused()&&(e.networkMode==="always"||Gc.isOnline())&&e.canRun(),b=()=>zv(e.networkMode)&&e.canRun(),y=E=>{u()||(i?.(),c.resolve(E))},w=E=>{u()||(i?.(),c.reject(E))},j=()=>new Promise(E=>{i=A=>{(u()||g())&&E(A)},e.onPause?.()}).then(()=>{i=void 0,u()||e.onContinue?.()}),_=()=>{if(u())return;let E;const A=r===0?e.initialPromise:void 0;try{E=A??e.fn()}catch(O){E=Promise.reject(O)}Promise.resolve(E).then(y).catch(O=>{if(u())return;const N=e.retry??(La?0:3),D=e.retryDelay??eS,B=typeof D=="function"?D(r,O):D,J=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,O);if(n||!J){w(O);return}r++,e.onFail?.(r,O),W1(B).then(()=>g()?void 0:j()).then(()=>{n?w(O):_()})})};return{promise:c,status:()=>c.status,cancel:f,continue:()=>(i?.(),c),cancelRetry:m,continueRetry:x,canStart:b,start:()=>(b()?_():j().then(_),c)}}var Lv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wf(this.gcTime)&&(this.#e=Da.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(La?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Da.clearTimeout(this.#e),this.#e=void 0)}},tS=class extends Lv{#e;#t;#n;#r;#s;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Fx(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Fx(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const r=Kf(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.#a({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(Ln).catch(Ln):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>bs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>na(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Av(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#l=!0,r.signal)})},c=()=>{const m=Mv(this.options,n),g=(()=>{const b={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(b),b})();return this.#l=!1,this.options.persister?this.options.persister(m,g,this):m(g)},f=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:c};return i(m),m})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#a({type:"fetch",meta:f.fetchOptions?.meta}),this.#s=Ov({initialPromise:n?.initialPromise,fn:f.fetchFn,onCancel:m=>{m instanceof Yf&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(m,x)=>{this.#a({type:"failed",failureCount:m,error:x})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const m=await this.#s.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#n.config.onSuccess?.(m,this),this.#n.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof Yf){if(m.silent)return this.#s.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#a({type:"error",error:m}),this.#n.config.onError?.(m,this),this.#n.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#a(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Uv(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const c=e.error;return{...r,error:c,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),on.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Uv(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zv(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Fx(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,r=n!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Bv=class extends qi{constructor(e,n){super(),this.options=n,this.#e=e,this.#a=null,this.#l=Pf(),this.bindMethods(),this.setOptions(n)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#i;#l;#a;#p;#f;#h;#c;#u;#o;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Qx(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xf(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xf(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),n._defaulted&&!Wc(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&Ix(this.#t,r,this.options,n)&&this.#d(),this.updateResult(),i&&(this.#t!==r||bs(this.options.enabled,this.#t)!==bs(n.enabled,this.#t)||na(this.options.staleTime,this.#t)!==na(n.staleTime,this.#t))&&this.#g();const c=this.#x();i&&(this.#t!==r||bs(this.options.enabled,this.#t)!==bs(n.enabled,this.#t)||c!==this.#o)&&this.#v(c)}getOptimisticResult(e){const n=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(n,e);return sS(this,r)&&(this.#r=r,this.#i=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#S();let n=this.#t.fetch(this.options,e);return e?.throwOnError||(n=n.catch(Ln)),n}#g(){this.#y();const e=na(this.options.staleTime,this.#t);if(La||this.#r.isStale||!Wf(e))return;const r=Av(this.#r.dataUpdatedAt,e)+1;this.#c=Da.setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#o=e,!(La||bs(this.options.enabled,this.#t)===!1||!Wf(this.#o)||this.#o===0)&&(this.#u=Da.setInterval(()=>{(this.options.refetchIntervalInBackground||yh.isFocused())&&this.#d()},this.#o))}#b(){this.#g(),this.#v(this.#x())}#y(){this.#c&&(Da.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Da.clearInterval(this.#u),this.#u=void 0)}createResult(e,n){const r=this.#t,i=this.options,c=this.#r,u=this.#s,f=this.#i,x=e!==r?e.state:this.#n,{state:g}=e;let b={...g},y=!1,w;if(n._optimisticResults){const se=this.hasListeners(),ee=!se&&Qx(e,n),ie=se&&Ix(e,r,n,i);(ee||ie)&&(b={...b,...Uv(g.data,e.options)}),n._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:j,errorUpdatedAt:_,status:E}=b;w=b.data;let A=!1;if(n.placeholderData!==void 0&&w===void 0&&E==="pending"){let se;c?.isPlaceholderData&&n.placeholderData===f?.placeholderData?(se=c.data,A=!0):se=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,se!==void 0&&(E="success",w=Kf(c?.data,se,n),y=!0)}if(n.select&&w!==void 0&&!A)if(c&&w===u?.data&&n.select===this.#p)w=this.#f;else try{this.#p=n.select,w=n.select(w),w=Kf(c?.data,w,n),this.#f=w,this.#a=null}catch(se){this.#a=se}this.#a&&(j=this.#a,w=this.#f,_=Date.now(),E="error");const O=b.fetchStatus==="fetching",N=E==="pending",D=E==="error",B=N&&O,J=w!==void 0,Q={status:E,fetchStatus:b.fetchStatus,isPending:N,isSuccess:E==="success",isError:D,isInitialLoading:B,isLoading:B,data:w,dataUpdatedAt:b.dataUpdatedAt,error:j,errorUpdatedAt:_,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>x.dataUpdateCount||b.errorUpdateCount>x.errorUpdateCount,isFetching:O,isRefetching:O&&!N,isLoadingError:D&&!J,isPaused:b.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:D&&J,isStale:wh(e,n),refetch:this.refetch,promise:this.#l,isEnabled:bs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const se=ae=>{Q.status==="error"?ae.reject(Q.error):Q.data!==void 0&&ae.resolve(Q.data)},ee=()=>{const ae=this.#l=Q.promise=Pf();se(ae)},ie=this.#l;switch(ie.status){case"pending":e.queryHash===r.queryHash&&se(ie);break;case"fulfilled":(Q.status==="error"||Q.data!==ie.value)&&ee();break;case"rejected":(Q.status!=="error"||Q.error!==ie.reason)&&ee();break}}return Q}updateResult(){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Wc(n,e))return;this.#r=n;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,c=typeof i=="function"?i():i;if(c==="all"||!c&&!this.#m.size)return!0;const u=new Set(c??this.#m);return this.options.throwOnError&&u.add("error"),Object.keys(this.#r).some(f=>{const m=f;return this.#r[m]!==e[m]&&u.has(m)})};this.#j({listeners:r()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const n=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#j(e){on.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function nS(e,n){return bs(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function Qx(e,n){return nS(e,n)||e.state.data!==void 0&&Xf(e,n,n.refetchOnMount)}function Xf(e,n,r){if(bs(n.enabled,e)!==!1&&na(n.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&wh(e,n)}return!1}function Ix(e,n,r,i){return(e!==n||bs(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&wh(e,r)}function wh(e,n){return bs(n.enabled,e)!==!1&&e.isStaleByTime(na(n.staleTime,e))}function sS(e,n){return!Wc(e.getCurrentResult(),n)}function Kc(e){return{onFetch:(n,r)=>{const i=n.options,c=n.fetchOptions?.meta?.fetchMore?.direction,u=n.state.data?.pages||[],f=n.state.data?.pageParams||[];let m={pages:[],pageParams:[]},x=0;const g=async()=>{let b=!1;const y=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(n.signal.aborted?b=!0:n.signal.addEventListener("abort",()=>{b=!0}),n.signal)})},w=Mv(n.options,n.fetchOptions),j=async(_,E,A)=>{if(b)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const N=(()=>{const Y={client:n.client,queryKey:n.queryKey,pageParam:E,direction:A?"backward":"forward",meta:n.options.meta};return y(Y),Y})(),D=await w(N),{maxPages:B}=n.options,J=A?K1:G1;return{pages:J(_.pages,D,B),pageParams:J(_.pageParams,E,B)}};if(c&&u.length){const _=c==="backward",E=_?qv:Jf,A={pages:u,pageParams:f},O=E(i,A);m=await j(A,O,_)}else{const _=e??u.length;do{const E=x===0?f[0]??i.initialPageParam:Jf(i,m);if(x>0&&E==null)break;m=await j(m,E),x++}while(x<_)}return m};n.options.persister?n.fetchFn=()=>n.options.persister?.(g,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},r):n.fetchFn=g}}}function Jf(e,{pages:n,pageParams:r}){const i=n.length-1;return n.length>0?e.getNextPageParam(n[i],n,r[i],r):void 0}function qv(e,{pages:n,pageParams:r}){return n.length>0?e.getPreviousPageParam?.(n[0],n,r[0],r):void 0}function rS(e,n){return n?Jf(e,n)!=null:!1}function aS(e,n){return!n||!e.getPreviousPageParam?!1:qv(e,n)!=null}var iS=class extends Bv{constructor(e,n){super(e,n)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Kc()})}getOptimisticResult(e){return e.behavior=Kc(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,n){const{state:r}=e,i=super.createResult(e,n),{isFetching:c,isRefetching:u,isError:f,isRefetchError:m}=i,x=r.fetchMeta?.fetchMore?.direction,g=f&&x==="forward",b=c&&x==="forward",y=f&&x==="backward",w=c&&x==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:rS(n,r.data),hasPreviousPage:aS(n,r.data),isFetchNextPageError:g,isFetchingNextPage:b,isFetchPreviousPageError:y,isFetchingPreviousPage:w,isRefetchError:m&&!g&&!y,isRefetching:u&&!b&&!w}}},lS=class extends Lv{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||$v(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Ov({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(u,f)=>{this.#s({type:"failed",failureCount:u,error:f})},onPause:()=>{this.#s({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",c=!this.#r.canStart();try{if(i)n();else{this.#s({type:"pending",variables:e,isPaused:c}),await this.#n.config.onMutate?.(e,this,r);const f=await this.options.onMutate?.(e,r);f!==this.state.context&&this.#s({type:"pending",context:f,variables:e,isPaused:c})}const u=await this.#r.start();return await this.#n.config.onSuccess?.(u,e,this.state.context,this,r),await this.options.onSuccess?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(u,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(u,null,e,this.state.context,r),this.#s({type:"success",data:u}),u}catch(u){try{throw await this.#n.config.onError?.(u,e,this.state.context,this,r),await this.options.onError?.(u,e,this.state.context,r),await this.#n.config.onSettled?.(void 0,u,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,u,e,this.state.context,r),u}finally{this.#s({type:"error",error:u})}}finally{this.#n.runNext(this)}}#s(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),on.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function $v(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oS=class extends qi{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,r){const i=new lS({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){this.#e.add(e);const n=Oc(e);if(typeof n=="string"){const r=this.#t.get(n);r?r.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=Oc(e);if(typeof n=="string"){const r=this.#t.get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Oc(e);if(typeof n=="string"){const i=this.#t.get(n)?.find(c=>c.state.status==="pending");return!i||i===e}else return!0}runNext(e){const n=Oc(e);return typeof n=="string"?this.#t.get(n)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){on.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Hx(n,r))}findAll(e={}){return this.getAll().filter(n=>Hx(e,n))}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return on.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ln))))}};function Oc(e){return e.options.scope?.id}var cS=class extends qi{#e;#t=void 0;#n;#r;constructor(n,r){super(),this.#e=n,this.setOptions(r),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const r=this.options;this.options=this.#e.defaultMutationOptions(n),Wc(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ua(r.mutationKey)!==Ua(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,r){return this.#r=r,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??$v();this.#t={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){on.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,i=this.#t.context,c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};n?.type==="success"?(this.#r.onSuccess?.(n.data,r,i,c),this.#r.onSettled?.(n.data,null,r,i,c)):n?.type==="error"&&(this.#r.onError?.(n.error,r,i,c),this.#r.onSettled?.(void 0,n.error,r,i,c))}this.listeners.forEach(r=>{r(this.#t)})})}},uS=class extends qi{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,r){const i=n.queryKey,c=n.queryHash??vh(i,n);let u=this.get(c);return u||(u=new tS({client:e,queryKey:i,queryHash:c,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>$x(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>$x(e,r)):n}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){on.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){on.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},dS=class{#e;#t;#n;#r;#s;#i;#l;#a;constructor(e={}){this.#e=e.queryCache||new uS,this.#t=e.mutationCache||new oS,this.#n=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=yh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Gc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),r=this.#e.build(this,n),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(na(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.defaultQueryOptions({queryKey:e}),u=this.#e.get(i.queryHash)?.state.data,f=Q1(n,u);if(f!==void 0)return this.#e.build(this,i).setData(f,{...r,manual:!0})}setQueriesData(e,n,r){return on.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;on.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=this.#e;return on.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const r={revert:!0,...n},i=on.batch(()=>this.#e.findAll(e).map(c=>c.cancel(r)));return Promise.all(i).then(Ln).catch(Ln)}invalidateQueries(e,n={}){return on.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},i=on.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let u=c.fetch(void 0,r);return r.throwOnError||(u=u.catch(Ln)),c.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(Ln)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(na(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ln).catch(Ln)}fetchInfiniteQuery(e){return e.behavior=Kc(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ln).catch(Ln)}ensureInfiniteQueryData(e){return e.behavior=Kc(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(Ua(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()],r={};return n.forEach(i=>{Jl(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,n){this.#s.set(Ua(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],r={};return n.forEach(i=>{Jl(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=vh(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===bh&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Hv=p.createContext(void 0),ht=e=>{const n=p.useContext(Hv);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},fS=({client:e,children:n})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(Hv.Provider,{value:e,children:n})),Zv=p.createContext(!1),hS=()=>p.useContext(Zv);Zv.Provider;function mS(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var pS=p.createContext(mS()),gS=()=>p.useContext(pS),xS=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},vS=e=>{p.useEffect(()=>{e.clearReset()},[e])},bS=({result:e,errorResetBoundary:n,throwOnError:r,query:i,suspense:c})=>e.isError&&!n.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||Rv(r,[e.error,i])),yS=e=>{if(e.suspense){const r=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>r(i(...c)):r(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wS=(e,n)=>e.isLoading&&e.isFetching&&!n,SS=(e,n)=>e?.suspense&&n.isPending,Wx=(e,n,r)=>n.fetchOptimistic(e).catch(()=>{r.clearReset()});function Vv(e,n,r){const i=hS(),c=gS(),u=ht(),f=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=i?"isRestoring":"optimistic",yS(f),xS(f,c),vS(c);const m=!u.getQueryCache().get(f.queryHash),[x]=p.useState(()=>new n(u,f)),g=x.getOptimisticResult(f),b=!i&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(y=>{const w=b?x.subscribe(on.batchCalls(y)):Ln;return x.updateResult(),w},[x,b]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),p.useEffect(()=>{x.setOptions(f)},[f,x]),SS(f,g))throw Wx(f,x,c);if(bS({result:g,errorResetBoundary:c,throwOnError:f.throwOnError,query:u.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw g.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(f,g),f.experimental_prefetchInRender&&!La&&wS(g,i)&&(m?Wx(f,x,c):u.getQueryCache().get(f.queryHash)?.promise)?.catch(Ln).finally(()=>{x.updateResult()}),f.notifyOnChangeProps?g:x.trackResult(g)}function Sn(e,n){return Vv(e,Bv)}function un(e,n){const r=ht(),[i]=p.useState(()=>new cS(r,e));p.useEffect(()=>{i.setOptions(e)},[i,e]);const c=p.useSyncExternalStore(p.useCallback(f=>i.subscribe(on.batchCalls(f)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=p.useCallback((f,m)=>{i.mutate(f,m).catch(Ln)},[i]);if(c.error&&Rv(i.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}function Fv(e,n){return Vv(e,iS)}const jS="modulepreload",ES=function(e){return"/"+e},Gx={},NS=function(n,r,i){let c=Promise.resolve();if(r&&r.length>0){let x=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");c=x(r.map(g=>{if(g=ES(g),g in Gx)return;Gx[g]=!0;const b=g.endsWith(".css"),y=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":jS,b||(w.as="script"),w.crossOrigin="",w.href=g,m&&w.setAttribute("nonce",m),document.head.appendChild(w),b)return new Promise((j,_)=>{w.addEventListener("load",j),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return c.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return n().catch(u)})};function _S({children:e}){const[n]=p.useState(()=>new dS({defaultOptions:{queries:{retry:1,staleTime:3e4,refetchOnWindowFocus:!1}}}));return o.jsxs(fS,{client:n,children:[e,null]})}const CS=["ade_csrf","backend_app_csrf"];function kS(){return CS}function TS(){if(typeof document>"u")return null;const e=document.cookie;if(!e)return null;const n=new Map,r=e.split(";");for(const i of r){const[c,...u]=i.trim().split("=");c&&n.set(c,decodeURIComponent(u.join("=")))}return n}function Sh(){const e=TS();if(!e)return null;for(const n of kS()){const r=e.get(n);if(r)return r}return null}const Qv="/api/v1",AS=new Set(["GET","HEAD","OPTIONS"]);class Xn extends Error{status;problem;constructor(n,r,i){super(n),this.name="ApiError",this.status=r,this.problem=i}}class DS{baseUrl;constructor(n=Qv){this.baseUrl=n.endsWith("/")?n.slice(0,-1):n}async request(n,r={}){const{parseJson:i=!0,returnRawResponse:c=!1,headers:u,body:f,method:m,credentials:x,...g}=r,b=(m??"GET").toUpperCase(),y=this.composeUrl(n),w=new Headers({Accept:i&&!c?"application/json":"*/*"});if(this.copyHeaders(w,u),f&&!(f instanceof FormData)&&!w.has("Content-Type")&&w.set("Content-Type","application/json"),!AS.has(b)&&!w.has("X-CSRF-Token")){const E=Sh();E&&w.set("X-CSRF-Token",E)}const j=await fetch(y,{...g,method:b,headers:w,body:f,credentials:x??"include"});if(!j.ok){const E=await this.tryParseProblem(j),A=E?.title??`Request failed with status ${j.status}`;throw new Xn(A,j.status,E)}if(c)return j;if(!i||j.status===204)return;const _=await j.text();return _?JSON.parse(_):void 0}composeUrl(n){if(!n.startsWith("/"))throw new Error("API paths must include a leading slash.");return this.baseUrl?`${this.baseUrl}${n}`:n}copyHeaders(n,r){if(r){if(r instanceof Headers){r.forEach((i,c)=>n.set(c,i));return}if(Array.isArray(r)){r.forEach(([i,c])=>n.set(i,c));return}Object.entries(r).forEach(([i,c])=>{typeof c>"u"||n.set(i,Array.isArray(c)?c.join(", "):c)})}}async tryParseProblem(n){if((n.headers.get("content-type")??"").includes("application/json"))try{return await n.json()}catch(i){const c=i instanceof Error?i:new Error(String(i));console.warn("Failed to parse problem details",c);return}}}new DS(Qv);const MS=/\{[^{}]+\}/g,RS=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function zS(){return Math.random().toString(36).slice(2,11)}function OS(e){let{baseUrl:n="",Request:r=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:c,bodySerializer:u,headers:f,requestInitExt:m=void 0,...x}={...e};m=RS()?m:void 0,n=Yx(n);const g=[];async function b(y,w){const{baseUrl:j,fetch:_=i,Request:E=r,headers:A,params:O={},parseAs:N="json",querySerializer:D,bodySerializer:B=u??US,body:J,middleware:Y=[],...Q}=w||{};let se=n;j&&(se=Yx(j)??n);let ee=typeof c=="function"?c:Kx(c);D&&(ee=typeof D=="function"?D:Kx({...typeof c=="object"?c:{},...D}));const ie=J===void 0?void 0:B(J,Px(f,A,O.header)),ae=Px(ie===void 0||ie instanceof FormData?{}:{"Content-Type":"application/json"},f,A,O.header),ce=[...g,...Y],V={redirect:"follow",...x,...Q,body:ie,headers:ae};let he,xe,U=new E(BS(y,{baseUrl:se,params:O,querySerializer:ee}),V),P;for(const je in Q)je in U||(U[je]=Q[je]);if(ce.length){he=zS(),xe=Object.freeze({baseUrl:se,fetch:_,parseAs:N,querySerializer:ee,bodySerializer:B});for(const je of ce)if(je&&typeof je=="object"&&typeof je.onRequest=="function"){const _e=await je.onRequest({request:U,schemaPath:y,params:O,options:xe,id:he});if(_e)if(_e instanceof E)U=_e;else if(_e instanceof Response){P=_e;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!P){try{P=await _(U,m)}catch(je){let _e=je;if(ce.length)for(let C=ce.length-1;C>=0;C--){const W=ce[C];if(W&&typeof W=="object"&&typeof W.onError=="function"){const M=await W.onError({request:U,error:_e,schemaPath:y,params:O,options:xe,id:he});if(M){if(M instanceof Response){_e=void 0,P=M;break}if(M instanceof Error){_e=M;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(_e)throw _e}if(ce.length)for(let je=ce.length-1;je>=0;je--){const _e=ce[je];if(_e&&typeof _e=="object"&&typeof _e.onResponse=="function"){const C=await _e.onResponse({request:U,response:P,schemaPath:y,params:O,options:xe,id:he});if(C){if(!(C instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");P=C}}}}if(P.status===204||U.method==="HEAD"||P.headers.get("Content-Length")==="0")return P.ok?{data:void 0,response:P}:{error:void 0,response:P};if(P.ok)return N==="stream"?{data:P.body,response:P}:{data:await P[N](),response:P};let me=await P.text();try{me=JSON.parse(me)}catch{}return{error:me,response:P}}return{request(y,w,j){return b(w,{...j,method:y.toUpperCase()})},GET(y,w){return b(y,{...w,method:"GET"})},PUT(y,w){return b(y,{...w,method:"PUT"})},POST(y,w){return b(y,{...w,method:"POST"})},DELETE(y,w){return b(y,{...w,method:"DELETE"})},OPTIONS(y,w){return b(y,{...w,method:"OPTIONS"})},HEAD(y,w){return b(y,{...w,method:"HEAD"})},PATCH(y,w){return b(y,{...w,method:"PATCH"})},TRACE(y,w){return b(y,{...w,method:"TRACE"})},use(...y){for(const w of y)if(w){if(typeof w!="object"||!("onRequest"in w||"onResponse"in w||"onError"in w))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");g.push(w)}},eject(...y){for(const w of y){const j=g.indexOf(w);j!==-1&&g.splice(j,1)}}}}function cu(e,n,r){if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${r?.allowReserved===!0?n:encodeURIComponent(n)}`}function Iv(e,n,r){if(!n||typeof n!="object")return"";const i=[],c={simple:",",label:".",matrix:";"}[r.style]||"&";if(r.style!=="deepObject"&&r.explode===!1){for(const m in n)i.push(m,r.allowReserved===!0?n[m]:encodeURIComponent(n[m]));const f=i.join(",");switch(r.style){case"form":return`${e}=${f}`;case"label":return`.${f}`;case"matrix":return`;${e}=${f}`;default:return f}}for(const f in n){const m=r.style==="deepObject"?`${e}[${f}]`:f;i.push(cu(m,n[f],r))}const u=i.join(c);return r.style==="label"||r.style==="matrix"?`${c}${u}`:u}function Wv(e,n,r){if(!Array.isArray(n))return"";if(r.explode===!1){const u={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",f=(r.allowReserved===!0?n:n.map(m=>encodeURIComponent(m))).join(u);switch(r.style){case"simple":return f;case"label":return`.${f}`;case"matrix":return`;${e}=${f}`;default:return`${e}=${f}`}}const i={simple:",",label:".",matrix:";"}[r.style]||"&",c=[];for(const u of n)r.style==="simple"||r.style==="label"?c.push(r.allowReserved===!0?u:encodeURIComponent(u)):c.push(cu(e,u,r));return r.style==="label"||r.style==="matrix"?`${i}${c.join(i)}`:c.join(i)}function Kx(e){return function(r){const i=[];if(r&&typeof r=="object")for(const c in r){const u=r[c];if(u!=null){if(Array.isArray(u)){if(u.length===0)continue;i.push(Wv(c,u,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof u=="object"){i.push(Iv(c,u,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}i.push(cu(c,u,e))}}return i.join("&")}}function LS(e,n){let r=e;for(const i of e.match(MS)??[]){let c=i.substring(1,i.length-1),u=!1,f="simple";if(c.endsWith("*")&&(u=!0,c=c.substring(0,c.length-1)),c.startsWith(".")?(f="label",c=c.substring(1)):c.startsWith(";")&&(f="matrix",c=c.substring(1)),!n||n[c]===void 0||n[c]===null)continue;const m=n[c];if(Array.isArray(m)){r=r.replace(i,Wv(c,m,{style:f,explode:u}));continue}if(typeof m=="object"){r=r.replace(i,Iv(c,m,{style:f,explode:u}));continue}if(f==="matrix"){r=r.replace(i,`;${cu(c,m)}`);continue}r=r.replace(i,f==="label"?`.${encodeURIComponent(m)}`:encodeURIComponent(m))}return r}function US(e,n){return e instanceof FormData?e:n&&(n.get instanceof Function?n.get("Content-Type")??n.get("content-type"):n["Content-Type"]??n["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(e).toString():JSON.stringify(e)}function BS(e,n){let r=`${n.baseUrl}${e}`;n.params?.path&&(r=LS(r,n.params.path));let i=n.querySerializer(n.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(r+=`?${i}`),r}function Px(...e){const n=new Headers;for(const r of e){if(!r||typeof r!="object")continue;const i=r instanceof Headers?r.entries():Object.entries(r);for(const[c,u]of i)if(u===null)n.delete(c);else if(Array.isArray(u))for(const f of u)n.append(c,f);else u!==void 0&&n.set(c,u)}return n}function Yx(e){return e.endsWith("/")?e.substring(0,e.length-1):e}const Gv=new Set(["GET","HEAD","OPTIONS","TRACE"]),qS="ade.auth.tokens",Df="",Pc=Df.endsWith("/api/v1")?Df.slice(0,-7):Df;function uu(e){if(!e.startsWith("/"))throw new Error("API paths must begin with '/' relative to the server root");return Pc.length>0?`${Pc}${e}`:e}async function $S(e,n={}){const r=uu(e),i=new Headers(n.headers??{});if(i.set("X-Requested-With","fetch"),!i.has("Authorization")){const f=Kv();f&&i.set("Authorization",`${f.token_type} ${f.access_token}`)}const c=n.method?.toUpperCase()??"GET";if(!Gv.has(c)){const f=Sh();f&&!i.has("X-CSRF-Token")&&i.set("X-CSRF-Token",f)}return await fetch(r,{credentials:"include",...n,headers:i})}const Ve=OS({baseUrl:Pc.length>0?Pc:void 0,credentials:"include",headers:{"X-Requested-With":"fetch"}}),HS={onRequest({request:e}){const n=e.method?.toUpperCase()??"GET";if(!Gv.has(n)){const r=Sh();r&&!e.headers.has("X-CSRF-Token")&&e.headers.set("X-CSRF-Token",r)}return e}},ZS={onRequest({request:e}){if(!e.headers.has("Authorization")){const n=Kv();n&&e.headers.set("Authorization",`${n.token_type} ${n.access_token}`)}return e}},VS={async onResponse({response:e}){if(e.ok)return e;const n=await FS(e),r=n?.title??`Request failed with status ${e.status}`;throw new Xn(r,e.status,n)}};Ve.use(HS);Ve.use(ZS);Ve.use(VS);function Kv(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(qS);if(!e)return null;const n=JSON.parse(e);if(n&&typeof n.access_token=="string")return{access_token:n.access_token,token_type:n.token_type??"bearer"}}catch{}return null}async function FS(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Ls={root:["auth"],detail:()=>[...Ls.root,"session"],providers:()=>[...Ls.root,"providers"],setupStatus:()=>[...Ls.root,"setup-status"]},jh="ade.auth.tokens";let oo=QS();function QS(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(jh);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.access_token!="string"?null:{access_token:n.access_token,token_type:n.token_type??"bearer",expires_at:n.expires_at??null,refresh_expires_at:n.refresh_expires_at??null}}catch{return null}}function IS(e){const n=Date.now(),r={access_token:e.access_token,token_type:e.token_type??"bearer",expires_at:typeof e.expires_in=="number"?n+e.expires_in*1e3:null,refresh_expires_at:typeof e.refresh_expires_in=="number"?n+e.refresh_expires_in*1e3:null};if(oo=r,typeof window<"u")try{window.localStorage.setItem(jh,JSON.stringify(r))}catch{}return r}function Eh(){if(oo=null,typeof window<"u")try{window.localStorage.removeItem(jh)}catch{}}function WS(){return oo}function GS(e=oo){return e?.access_token?{Authorization:`${e.token_type?.trim()||"bearer"} ${e.access_token}`}:{}}function Xx(e){if(!e)return null;const n=new Date(e);return Number.isNaN(n.getTime())?null:n.toISOString()}async function Pv(e,n){const r="/api/v1/me/bootstrap";try{const{data:i}=await Ve.GET(r,{signal:n,headers:GS(e),params:{query:{page:1,page_size:200,include_total:!1}}});return i??null}catch(i){if(i instanceof Xn&&(i.status===401||i.status===403))return null;throw i}}function Yv(e,n=oo){return{user:{...e.user,roles:[...e.global_roles??[]],permissions:[...e.global_permissions??[]],preferred_workspace_id:null},workspaces:e.workspaces,global_roles:e.global_roles??[],global_permissions:e.global_permissions??[],expires_at:Xx(n?.expires_at??null),refresh_expires_at:Xx(n?.refresh_expires_at??null),return_to:null}}async function du(e,n){const r=IS(e),i=await Pv(r,n);if(!i)throw Eh(),new Error("Unable to load session after authentication.");return Yv(i,r)}async function KS(e={}){try{const{data:n}=await Ve.GET("/api/v1/auth/providers",{signal:e.signal});return n?nj(n):{providers:[],force_sso:!1}}catch(n){if(n instanceof Xn&&n.status===404)return{providers:[],force_sso:!1};throw n}}async function PS(e={}){const n=WS(),r=await Pv(n,e.signal);return r?Yv(r,n):(n&&Eh(),null)}async function YS(e,n={}){const{data:r}=await Ve.POST("/api/v1/auth/session",{body:e,signal:n.signal});if(!r)throw new Error("Expected tokens from login response.");return du(r,n.signal)}async function XS(e={}){const{data:n}=await Ve.POST("/api/v1/auth/session/refresh",{body:void 0,signal:e.signal});if(!n)throw new Error("Expected tokens from refresh response.");return du(n,e.signal)}async function JS(e){const{code:n,state:r,provider:i="sso",signal:c}=e,{data:u}=await Ve.GET("/api/v1/auth/sso/{provider}/callback",{signal:c,params:{path:{provider:i},query:{code:n,state:r}}});if(!u)throw new Error("Expected tokens from SSO callback.");return du(u,c)}async function ej(e={}){try{await Ve.DELETE("/api/v1/auth/session",{signal:e.signal,body:void 0})}catch(n){!(n instanceof Xn)||n.status!==401&&n.status}finally{Eh()}}async function tj(e,n){return du(e,n)}function nj(e){return{providers:(e.providers??[]).map(sj),force_sso:!!e.force_sso}}function sj(e){return{...e,start_url:e.start_url??"",icon_url:e.icon_url??null}}const Xv=p.createContext(void 0);function Lc(e){return e instanceof Error?e:new Error(String(e))}function Jx({session:e,refetch:n,children:r}){return ij(e,n),o.jsx(Xv.Provider,{value:{session:e,refetch:n},children:r})}function rj(){const e=p.useContext(Xv);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e}function Ha(){return rj().session}const aj=6e4;function ij(e,n){p.useEffect(()=>{if(typeof window>"u")return;const r=typeof e.expires_at=="string"?Date.parse(e.expires_at):NaN,i=typeof e.refresh_expires_at=="string"?Date.parse(e.refresh_expires_at):NaN;if(Number.isNaN(r)||Number.isNaN(i))return;const c=Date.now();if(i<=c){n().catch(g=>{console.warn("Failed to refetch session after refresh expiry",Lc(g))});return}const u=Math.min(r,i)-aj,f=Math.max(u-c,0);let m=!1;const x=window.setTimeout(async()=>{try{if(await XS(),m)return;await n().catch(g=>{console.warn("Failed to refetch session after refresh",Lc(g))})}catch(g){if(m)return;console.warn("Failed to refresh session",Lc(g)),await n().catch(b=>{console.warn("Failed to refetch session after refresh failure",Lc(b))})}},f);return()=>{m=!0,window.clearTimeout(x)}},[n,e.expires_at,e.refresh_expires_at])}function Jv(e={}){const n=ht(),r=Sn({queryKey:Ls.detail(),queryFn:async({signal:c})=>{const u=await PS({signal:c});return u||null},enabled:e.enabled??!0,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!1,refetchOnMount:!0}),i=r.data??null;return p.useEffect(()=>{i||n.removeQueries({queryKey:Ls.providers(),exact:!1})},[n,i]),{...r,session:i}}async function lj(e={}){try{const{data:n}=await Ve.GET("/api/v1/auth/setup",{signal:e.signal});if(!n)throw new Error("Expected setup status payload.");return n}catch(n){if(n instanceof Xn&&n.status===404)return{requires_setup:!1,has_users:!0};throw n}}async function oj(e){const{data:n}=await Ve.POST("/api/v1/auth/setup",{body:e});if(!n)throw new Error("Expected tokens from setup response.");return tj(n)}function Nh(e=!0){return Sn({queryKey:Ls.setupStatus(),queryFn:({signal:n})=>lj({signal:n}),enabled:e,staleTime:3e5,refetchOnWindowFocus:!1})}const co="/workspaces",cj=new Set(["/","/login","/setup","/logout"]);function uj(e){if(!e)return!0;const n=fj(e);return!!(cj.has(n)||n==="/auth"||n.startsWith("/auth/"))}function dj(e){return`${e.pathname}${e.search}${e.hash}`}function e0(e){const n=dj(e)||"/";return Yc(n)??co}function Yc(e){if(!e)return null;const n=e.trim();return!n.startsWith("/")||n.startsWith("//")?null:n==="/"?co:uj(n)?null:n}function eo(e){return Yc(e)??co}function eb(e){return nb("/login",e)}function tb(e){return nb("/setup",e)}function nb(e,n){const r=eo(n),i=new URLSearchParams;r!==co&&i.set("redirectTo",r);const c=i.toString();return c?`${e}?${c}`:e}function Xc(e,n){const r=Yc(e);if(r)return r;const i=Yc(n);return i||co}function fj(e){let n=e;const r=n.indexOf("#");r>=0&&(n=n.slice(0,r));const i=n.indexOf("?");return i>=0&&(n=n.slice(0,i)),n?n.startsWith("/")?n:`/${n}`:"/"}function fu({children:e}){const n=Ss(),r=An(),i=Jv(),{session:c,isLoading:u,isError:f,refetch:m}=i,x=!c&&!u&&!f,{data:g,isPending:b,isError:y,isSuccess:w,refetch:j}=Nh(x);return p.useEffect(()=>{if(c||u||f)return;if(x){if(b||y)return;if(w&&g?.requires_setup){const E=e0(n);r(tb(E),{replace:!0});return}}const _=e0(n);r(eb(_),{replace:!0})},[f,u,y,b,w,n,r,c,g?.requires_setup,x]),u?o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:o.jsx("p",{children:"Loading your workspace"})}):f?o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[o.jsx("p",{children:"We were unable to confirm your session."}),o.jsx("button",{onClick:()=>m(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):c?e?o.jsx(Jx,{session:c,refetch:m,children:e}):o.jsx(Jx,{session:c,refetch:m,children:e??null}):x&&b?o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 text-sm text-slate-500",children:o.jsx("p",{children:"Preparing initial setup"})}):x&&y?o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 text-center text-sm text-slate-500",children:[o.jsx("p",{children:"We were unable to check whether ADE is ready."}),o.jsx("button",{onClick:()=>j(),className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Try again"})]}):null}const hj=100,mj=100,pj=100,gj=200,sb="global",xj="workspace";async function vj(e={}){const{page:n,pageSize:r,includeTotal:i,signal:c}=e,u={};typeof n=="number"&&n>0&&(u.page=n),typeof r=="number"&&r>0&&(u.page_size=r),i&&(u.include_total=!0);const{data:f}=await Ve.GET("/api/v1/workspaces",{params:{query:u},signal:c});if(!f)throw new Error("Expected workspace page payload.");const m=[...f.items].sort((x,g)=>x.name.localeCompare(g.name));return{...f,items:m}}async function bj(e){const{data:n}=await Ve.POST("/api/v1/workspaces",{body:e});if(!n)throw new Error("Expected workspace payload.");return n}async function yj(e,n){const{data:r}=await Ve.PATCH("/api/v1/workspaces/{workspace_id}",{params:{path:{workspace_id:e}},body:n});if(!r)throw new Error("Expected workspace payload.");return r}async function wj(e,n={}){const{page:r,pageSize:i,includeTotal:c,signal:u}=n,f={};typeof r=="number"&&r>0&&(f.page=r),typeof i=="number"&&i>0&&(f.page_size=i),c&&(f.include_total=!0);const{data:m}=await Ve.GET("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e},query:f},signal:u});if(!m)throw new Error("Expected workspace member page payload.");return m}async function Sj(e,n){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/members",{params:{path:{workspace_id:e}},body:n});if(!r)throw new Error("Expected workspace member payload.");return r}async function jj(e,n,r){const{data:i}=await Ve.PUT("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}},body:r});if(!i)throw new Error("Expected workspace member payload.");return i}async function Ej(e,n){await Ve.DELETE("/api/v1/workspaces/{workspace_id}/members/{user_id}",{params:{path:{workspace_id:e,user_id:n}}})}async function Nj(e={}){const{page:n,pageSize:r,includeTotal:i,signal:c}=e,u={scope:xj};typeof n=="number"&&n>0&&(u.page=n),typeof r=="number"&&r>0&&(u.page_size=r),i&&(u.include_total=!0);const{data:f}=await Ve.GET("/api/v1/rbac/roles",{params:{query:u},signal:c});if(!f)throw new Error("Expected workspace role page payload.");return f}async function _j(e,n){const{data:r}=await Ve.POST("/api/v1/rbac/roles",{body:n});if(!r)throw new Error("Expected role payload.");return r}async function Cj(e,n,r){const{data:i}=await Ve.PATCH("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}},body:r});if(!i)throw new Error("Expected role payload.");return i}async function kj(e,n){await Ve.DELETE("/api/v1/rbac/roles/{role_id}",{params:{path:{role_id:n}}})}async function Tj(e={}){const{scope:n=sb,page:r,pageSize:i,includeTotal:c,signal:u}=e,f={scope:n};typeof r=="number"&&r>0&&(f.page=r),typeof i=="number"&&i>0&&(f.page_size=i),c&&(f.include_total=!0);const{data:m}=await Ve.GET("/api/v1/rbac/permissions",{params:{query:f},signal:u});if(!m)throw new Error("Expected permission page payload.");return m}const za={page:1,pageSize:hj,includeTotal:!1},Aj={page:1,pageSize:mj,includeTotal:!1},Dj={page:1,pageSize:pj,includeTotal:!1},Mj={scope:sb,page:1,pageSize:gj,includeTotal:!1},Pt={all:()=>["workspaces"],list:(e=za)=>[...Pt.all(),"list",{...e}],detail:e=>[...Pt.all(),"detail",e],members:(e,n=Aj)=>[...Pt.detail(e),"members",{...n}],roles:(e,n=Dj)=>[...Pt.detail(e),"roles",{...n}],permissions:(e=Mj)=>["permissions",{...e}]};function Rj(e={}){const n=e.page??za.page,r=e.pageSize??za.pageSize,i=e.includeTotal??za.includeTotal;return{queryKey:Pt.list({page:n,pageSize:r,includeTotal:i}),queryFn:({signal:c})=>vj({page:n,pageSize:r,includeTotal:i,signal:c}),staleTime:6e4,enabled:e.enabled??!0}}function hu(e={}){const n=ht(),r=Rj(e),i=n.getQueryData(r.queryKey);return Sn({...r,initialData:i})}const rb={page:za.page,pageSize:za.pageSize,includeTotal:za.includeTotal},zj="/api/v1/workspaces/{workspace_id}/default";async function Oj(e){await Ve.PUT(zj,{params:{path:{workspace_id:e}}})}function Lj(e,n){if(!e||typeof e!="object")return e;if("items"in e){const r=e;if(!Array.isArray(r.items))return e;const i=r.items.map(c=>({...c,is_default:c.id===n}));return{...r,items:i}}if("id"in e&&"is_default"in e){const r=e;return{...r,is_default:r.id===n}}return e}function Uj(){const e=ht();return un({mutationFn:n=>Oj(n),onSuccess:(n,r)=>{e.setQueriesData({queryKey:Pt.all()},i=>Lj(i,r))}})}function Mf(e){return e instanceof Error?e:new Error(String(e))}function sa(e){return{get(){if(typeof window>"u")return null;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):null}catch(n){return console.warn("Failed to read from storage",Mf(n)),null}},set(n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch(r){console.warn("Failed to write to storage",Mf(r))}},clear(){if(!(typeof window>"u"))try{window.localStorage.removeItem(e)}catch(n){console.warn("Failed to clear storage",Mf(n))}}}}const Bj="backend.app.active_workspace",eh=sa(Bj);function qj(){return eh.get()}function ab(e){if(!e){eh.clear();return}eh.set(e.id)}function ib(e){var n,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(n=0;n<c;n++)e[n]&&(r=ib(e[n]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function we(){for(var e,n,r=0,i="",c=arguments.length;r<c;r++)(e=arguments[r])&&(n=ib(e))&&(i&&(i+=" "),i+=n);return i}const lb=p.createContext(void 0);function $j({workspace:e,workspaces:n,children:r}){const i=p.useMemo(()=>{const c=e.permissions;return{workspace:e,workspaces:n,permissions:c,hasPermission(u){const f=u.toLowerCase();return c.includes(u)||c.includes(f)}}},[e,n]);return o.jsx(lb.Provider,{value:i,children:r})}function ra(){const e=p.useContext(lb);if(!e)throw new Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}var jr=Tv();const Hj=[{id:"explorer",label:"Explorer",icon:o.jsx(Vj,{})},{id:"search",label:"Search",icon:o.jsx(Fj,{})},{id:"scm",label:"Source Control",icon:o.jsx(Qj,{})},{id:"extensions",label:"Extensions",icon:o.jsx(Ij,{})}];function Zj({activeView:e,onSelectView:n,onOpenSettings:r,appearance:i}){const c=i==="dark"?{bg:"bg-[#1b1b1f]",border:"border-[#111111]",iconIdle:"text-slate-400",iconActive:"text-[#4fc1ff]",hover:"hover:text-white hover:bg-white/5 focus-visible:text-white",indicator:"bg-[#4fc1ff]"}:{bg:"bg-[#f3f3f3]",border:"border-[#d0d0d0]",iconIdle:"text-slate-500",iconActive:"text-[#005fb8]",hover:"hover:text-[#0f172a] hover:bg-black/5 focus-visible:text-[#0f172a]",indicator:"bg-[#005fb8]"};return o.jsxs("aside",{className:we("flex h-full w-14 flex-col items-center justify-between border-r",c.bg,c.border,c.iconIdle),"aria-label":"Workbench navigation",children:[o.jsx("div",{className:"flex flex-col items-center gap-1 py-3",children:Hj.map(u=>{const f=e===u.id;return o.jsxs("button",{type:"button",onClick:()=>n(u.id),className:we("relative flex h-10 w-10 items-center justify-center rounded-lg text-base transition",f?c.iconActive:we(c.iconIdle,c.hover)),"aria-label":u.label,"aria-pressed":f,children:[f?o.jsx("span",{className:we("absolute left-0 top-1/2 h-6 w-1 -translate-y-1/2 rounded",c.indicator)}):null,u.icon]},u.id)})}),o.jsx("div",{className:"flex flex-col items-center gap-3 pb-3",children:o.jsx("button",{type:"button",onClick:r,className:we("flex h-10 w-10 items-center justify-center rounded-lg text-base transition",c.iconIdle,c.hover),"aria-label":"Open settings",children:o.jsx(Wj,{})})})]})}function Vj(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("rect",{x:"4",y:"4",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4"}),o.jsx("path",{d:"M4 8.25h12",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M8.25 4v12",stroke:"currentColor",strokeWidth:"1.2"})]})}function Fj(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("circle",{cx:"9",cy:"9",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),o.jsx("path",{d:"M12.7 12.7l4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function Qj(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M6.5 4a1.75 1.75 0 1 1-1.5 0v12m9-8a1.75 1.75 0 1 1-1.5 0v8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),o.jsx("path",{d:"M5 9.5h10",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function Ij(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M6 4.5h4l4 4v6.5a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.3"}),o.jsx("path",{d:"M10 4.5v4h4",stroke:"currentColor",strokeWidth:"1.3"})]})}function Wj(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M10 6.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M3 10h2m10 0h2M10 3v2m0 10v2M5.2 5.2l1.4 1.4m7 7 1.4 1.4M14.8 5.2l-1.4 1.4m-7 7-1.4 1.4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}const _h=p.createContext(null);function Ch({value:e,onValueChange:n,children:r}){const i=p.useId(),c=p.useRef([]),u=p.useRef(new Map),f=p.useCallback((y,w)=>{c.current.includes(y)||c.current.push(y),u.current.set(y,w)},[]),m=p.useCallback(y=>{c.current=c.current.filter(w=>w!==y),u.current.delete(y)},[]),x=p.useCallback(y=>{y&&u.current.get(y)?.focus()},[]),g=p.useCallback(()=>c.current.slice(),[]),b=p.useMemo(()=>({value:e,setValue:n,baseId:i,registerValue:f,unregisterValue:m,focusValue:x,getValues:g}),[e,n,i,f,m,x,g]);return o.jsx(_h.Provider,{value:b,children:r})}function kh({children:e,...n}){return o.jsx("div",{role:"tablist",...n,children:e})}function Fl({value:e,children:n,className:r,onClick:i,onKeyDown:c,disabled:u,...f}){const m=p.useContext(_h);if(!m)throw new Error("TabsTrigger must be used within a TabsRoot");const{registerValue:x,unregisterValue:g,focusValue:b,getValues:y}=m,w=m.value===e,j=`${m.baseId}-tab-${e}`,_=`${m.baseId}-panel-${e}`,E=p.useCallback(O=>{x(e,O)},[x,e]);p.useLayoutEffect(()=>()=>g(e),[g,e]);const A=O=>{if(c?.(O),O.defaultPrevented)return;const N=y(),D=N.indexOf(e);if(D===-1||N.length===0)return;let B=D;O.key==="ArrowRight"?(O.preventDefault(),B=(D+1)%N.length):O.key==="ArrowLeft"?(O.preventDefault(),B=(D-1+N.length)%N.length):O.key==="Home"?(O.preventDefault(),B=0):O.key==="End"&&(O.preventDefault(),B=N.length-1);const J=N[B];J&&J!==m.value&&m.setValue(J),b(J)};return o.jsx("button",{...f,ref:E,type:"button",role:"tab",id:j,"aria-selected":w,"aria-controls":_,tabIndex:w?0:-1,className:r,disabled:u,onKeyDown:A,onClick:O=>{i?.(O),!O.defaultPrevented&&!u&&m.setValue(e)},children:n})}function Oa({value:e,children:n,className:r,...i}){const c=p.useContext(_h);if(!c)throw new Error("TabsContent must be used within a TabsRoot");const u=c.value===e,f=`${c.baseId}-panel-${e}`,m=`${c.baseId}-tab-${e}`;return o.jsx("div",{...i,role:"tabpanel",id:f,"aria-labelledby":m,className:r,hidden:!u,tabIndex:0,children:n})}function ob({summary:e}){const n=e.core.validation_issue_count_total;return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-4",children:[o.jsx(Uc,{label:"Tables",value:e.core.table_count}),o.jsx(Uc,{label:"Rows",value:e.core.row_count??""}),o.jsx(Uc,{label:"Mapped fields",value:e.core.mapped_field_count}),o.jsx(Uc,{label:"Issues",value:n,intent:n>0?"warn":"ok"})]}),o.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[o.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[o.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Files"}),e.breakdowns.by_file.length===0?o.jsx("p",{className:"text-xs text-slate-500",children:"No files recorded."}):o.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:e.breakdowns.by_file.map(r=>o.jsxs("li",{className:"flex items-center justify-between gap-3",children:[o.jsx("span",{className:"truncate font-semibold text-slate-800",children:r.source_file}),o.jsxs("span",{className:"text-[11px] text-slate-500",children:[r.table_count," tables  ",r.row_count??"?"," rows  ",r.validation_issue_count_total," issues"]})]},r.source_file))})]}),o.jsxs("div",{className:"rounded border border-slate-200 bg-white px-3 py-2",children:[o.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Fields"}),e.breakdowns.by_field.length===0?o.jsx("p",{className:"text-xs text-slate-500",children:"No field mappings recorded."}):o.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[e.breakdowns.by_field.slice(0,6).map(r=>o.jsxs("li",{className:"flex items-center justify-between gap-3",children:[o.jsxs("span",{className:"truncate font-semibold text-slate-800",children:[r.label||r.field," ",r.required?" required":""]}),o.jsxs("span",{className:"text-[11px] text-slate-500",children:[r.mapped?"mapped":"unmapped","  ",r.validation_issue_count_total," issues"]})]},r.field)),e.breakdowns.by_field.length>6?o.jsxs("li",{className:"text-[11px] text-slate-500",children:["+",e.breakdowns.by_field.length-6," more fields"]}):null]})]})]})]})}function cb({events:e}){if(!e.length)return o.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."});const n=e.reduce((i,c)=>{const u=th(c),f=u.stream==="stderr"?"warning":void 0,m=u.level??f??"info";return i[m]=(i[m]??0)+1,i},{}),r=e.slice(-6).reverse();return o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex flex-wrap gap-2 text-[11px] text-slate-600",children:Object.entries(n).map(([i,c])=>o.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 font-semibold text-slate-700",children:[i,": ",c]},i))}),o.jsx("ul",{className:"space-y-1",children:r.map(i=>o.jsx("li",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1 text-xs text-slate-800",children:(()=>{const u=th(i).message?.trim();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsx("span",{className:"font-semibold",children:i.type}),o.jsx("span",{className:"text-[11px] text-slate-500",children:Gj(i.created_at)})]}),o.jsx("p",{className:"text-[11px] text-slate-600",children:u||`Level: ${Kj(i)}`})]})})()},`${i.created_at}-${i.type}`))})]})}function Gj(e){const n=e instanceof Date?e:new Date(e);return Number.isNaN(n.getTime())?String(e):n.toLocaleString()}function Kj(e){const n=th(e),r=n.stream==="stderr"?"warning":void 0;return n.level??r??"info"}function th(e){const n=e.payload;return n&&typeof n=="object"?n:{}}function Uc({label:e,value:n,intent:r="default"}){const i=r==="warn"?"text-amber-700":r==="ok"?"text-emerald-700":"text-slate-700";return o.jsxs("div",{className:"rounded border border-slate-200 bg-slate-50 px-2 py-1",children:[o.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:e}),o.jsx("p",{className:`text-sm font-semibold ${i}`,children:n})]})}function Pj({height:e,consoleLines:n,validation:r,activePane:i,onPaneChange:c,latestRun:u,onShowRunDetails:f,onClearConsole:m,runStatus:x}){const[g,b]=p.useState("all"),[y,w]=p.useState("all"),[j,_]=p.useState(!0),E=p.useMemo(()=>{const B=i0(y);return n.filter(J=>{const Y=g==="all"||(J.origin??"run")===g,Q=i0(J.level),se=y==="all"||Q>=B;return Y&&se})},[n,g,y]),A=E.length>0,O=n.length>0,N=r.messages.length>0,D=!!u;return o.jsx("section",{className:"flex min-h-0 flex-col overflow-hidden border-t border-slate-200 bg-slate-50",style:{height:e},children:o.jsxs(Ch,{value:i,onValueChange:B=>c(B),children:[o.jsxs("div",{className:"flex flex-none items-center justify-between border-b border-slate-200 px-3 py-1.5",children:[o.jsxs(kh,{className:"flex items-center gap-3 text-[11px] font-medium",children:[o.jsx(Fl,{value:"terminal",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:"Terminal"}),o.jsxs(Fl,{value:"runSummary",className:"rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Run",D?o.jsx("span",{className:"ml-1 text-[10px] lowercase text-slate-500",children:u?.status}):null]}),o.jsxs(Fl,{value:"problems",className:"flex items-center gap-1 rounded px-2 py-1 uppercase tracking-[0.16em]",children:["Problems",N?o.jsx("span",{className:"inline-flex h-4 min-w-[1.25rem] items-center justify-center rounded-full bg-rose-600 px-1 text-[10px] font-semibold text-white",children:r.messages.length}):null]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[o.jsxs("label",{className:"flex items-center gap-1 text-slate-500",children:["Origin",o.jsxs("select",{value:g,onChange:B=>b(B.target.value),className:"rounded border border-slate-300 bg-white px-2 py-1 text-[11px] text-slate-700 shadow-sm",children:[o.jsx("option",{value:"all",children:"All"}),o.jsx("option",{value:"run",children:"Run"}),o.jsx("option",{value:"build",children:"Build"}),o.jsx("option",{value:"raw",children:"Raw"})]})]}),o.jsxs("label",{className:"flex items-center gap-1 text-slate-500",children:["Level",o.jsxs("select",{value:y,onChange:B=>w(B.target.value),className:"rounded border border-slate-300 bg-white px-2 py-1 text-[11px] text-slate-700 shadow-sm",children:[o.jsx("option",{value:"all",children:"All"}),o.jsx("option",{value:"info",children:"Info"}),o.jsx("option",{value:"warning",children:"Warning"}),o.jsx("option",{value:"error",children:"Error"}),o.jsx("option",{value:"success",children:"Success"})]})]}),o.jsx("button",{type:"button",onClick:()=>_(B=>!B),className:we("rounded px-2 py-1 font-semibold uppercase tracking-wide transition",j?"border border-emerald-500 bg-emerald-50 text-emerald-700":"border border-slate-300 bg-white text-slate-600 hover:border-slate-400"),children:j?"Follow":"Scroll"}),o.jsx("button",{type:"button",onClick:()=>m?.(),className:"rounded border border-slate-300 bg-white px-2 py-1 font-semibold uppercase tracking-wide text-slate-600 transition hover:border-slate-400",children:"Clear"})]})]}),o.jsx(Oa,{value:"terminal",className:"flex min-h-0 flex-1 flex-col",children:o.jsx(Yj,{consoleLines:E,hasConsoleLines:A,hasAnyConsoleLines:O,latestRun:u,onShowRunDetails:f,followLogs:j,runStatus:x})}),o.jsx(Oa,{value:"problems",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:o.jsx(Xj,{validation:r})}),o.jsx(Oa,{value:"runSummary",className:"flex min-h-0 flex-1 flex-col overflow-auto px-3 py-2 text-sm",children:o.jsx(Jj,{latestRun:u})})]})})}function Yj({consoleLines:e,hasConsoleLines:n,hasAnyConsoleLines:r,latestRun:i,onShowRunDetails:c,followLogs:u,runStatus:f}){const m=p.useRef(null);p.useEffect(()=>{u&&m.current?.scrollIntoView({behavior:"smooth"})},[e,u]);const x=f&&f!=="idle"?f:null;return o.jsxs("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden rounded-md border border-slate-900/80 bg-slate-950 font-mono text-[13px] leading-relaxed text-slate-100 shadow-inner shadow-black/30",children:[o.jsxs("div",{className:"flex flex-col border-b border-white/5 bg-slate-950/80",children:[o.jsxs("div",{className:"flex items-center gap-3 px-4 py-1.5 text-[11px] uppercase tracking-[0.35em] text-slate-500",children:[o.jsx("span",{className:"font-semibold tracking-[0.45em] text-slate-200",children:"Terminal"}),o.jsx("span",{className:"text-[10px] tracking-[0.45em] text-emerald-400",children:"live"}),x?o.jsx("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.25em] text-slate-100",children:x}):null]}),i?o.jsxs("div",{className:"flex items-center justify-between gap-3 border-t border-white/5 px-4 py-1.5 text-[11px] text-slate-400",children:[o.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[o.jsx(ub,{status:i.status}),o.jsxs("span",{className:"truncate",title:i.runId,children:["Run ",i.runId]}),o.jsxs("span",{className:"truncate text-slate-500",children:[i.documentName??"Document not recorded",a0(i.sheetNames)?`  ${a0(i.sheetNames)}`:""]}),i.durationMs!=null?o.jsxs("span",{className:"text-slate-600",children:[" ",fb(i.durationMs)]}):null]}),o.jsx("button",{type:"button",className:"text-[11px] font-semibold text-emerald-300 transition hover:text-emerald-200",onClick:()=>c?.(),children:"View details "})]}):null]}),o.jsx("div",{className:"flex-1 overflow-auto",children:n?o.jsxs("ul",{className:"divide-y divide-white/5",children:[e.map((g,b)=>o.jsxs("li",{className:"grid grid-cols-[auto_auto_1fr] items-baseline gap-4 px-4 py-1.5",children:[o.jsx("span",{className:"whitespace-nowrap text-[11px] tabular-nums text-slate-500",children:uE(g.timestamp)}),o.jsx("span",{className:we("text-[10px] uppercase tracking-[0.3em]",iE(g.level)),children:lE(g.level)}),o.jsxs("span",{className:"flex flex-wrap items-baseline gap-2 text-[13px] text-slate-100",children:[o.jsx("span",{className:we("text-sm",rE(g.level)),children:"$"}),o.jsx("span",{className:we("flex-1 whitespace-pre-wrap break-words",aE(g.level)),children:g.message})]})]},`${g.timestamp??b}-${g.message}`)),o.jsx("div",{ref:m})]}):r?o.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-slate-500",children:[o.jsx("p",{className:"tracking-wide text-slate-300",children:"No console output matches these filters."}),o.jsx("p",{className:"text-[12px] leading-relaxed text-slate-500",children:"Adjust origin or level filters to see more."})]}):o.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-2 px-6 py-8 text-center text-[13px] text-slate-500",children:[o.jsx("p",{className:"tracking-wide text-slate-300",children:"Waiting for ADE output"}),o.jsx("p",{className:"text-[12px] leading-relaxed text-slate-500",children:"Run validation or a test to stream logs into this terminal."})]})})]})}function Xj({validation:e}){const n=cE(e),r=dE(e);return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[o.jsx("span",{children:n}),e.lastRunAt?o.jsxs("span",{children:["Last run ",db(e.lastRunAt)]}):null]}),e.messages.length>0?o.jsx("ul",{className:"space-y-1.5",children:e.messages.map((i,c)=>o.jsxs("li",{className:oE(i.level),children:[i.path?o.jsx("span",{className:"block text-[11px] font-medium uppercase tracking-wide text-slate-500",children:i.path}):null,o.jsx("span",{className:"text-[13px]",children:i.message})]},`${i.level}-${i.path??c}-${c}`))}):o.jsx("p",{className:"text-xs leading-relaxed text-slate-500",children:r})]})}function Jj({latestRun:e}){return e?o.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-3 overflow-auto",children:[o.jsx(eE,{summary:e}),o.jsx(tE,{summary:e}),o.jsx(nE,{summary:e}),o.jsx(sE,{summary:e})]}):o.jsx("div",{className:"flex flex-1 items-center justify-center text-xs text-slate-500",children:"No run yet. Run a test or validation to see details here."})}function eE({summary:e}){const n=e.durationMs!=null?fb(e.durationMs):null,r=e.sheetNames&&e.sheetNames.length>0?e.sheetNames.join(", "):e.sheetNames?"All worksheets":null;return o.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3 rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-[11px] uppercase tracking-[0.18em] text-slate-500",children:[o.jsx(ub,{status:e.status}),o.jsx("span",{className:"font-semibold text-slate-700",children:"Run"}),o.jsxs("span",{className:"text-slate-400",title:e.runId,children:["#",e.runId]})]}),o.jsxs("div",{className:"text-sm font-semibold text-slate-800",children:[fE(e.status),n?o.jsxs("span",{className:"font-normal text-slate-500",children:["  ",n]}):null]}),o.jsxs("div",{className:"text-xs text-slate-500",children:[e.documentName??"Document not recorded",r?`  ${r}`:null]}),e.completedAt?o.jsxs("div",{className:"text-[11px] text-slate-400",children:["Completed ",db(e.completedAt)]}):null]}),o.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.logsUrl?o.jsx("a",{href:e.logsUrl,className:"inline-flex items-center gap-2 rounded-md border border-slate-200 bg-slate-50 px-3 py-1.5 text-[12px] font-semibold text-slate-700 shadow-sm hover:border-slate-300 hover:bg-white",children:"Download logs"}):null})]})}function tE({summary:e}){return o.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Output files"}),e.outputsLoaded?null:o.jsx("span",{className:"text-[12px] text-slate-400",children:"Loading"})]}),e.error?o.jsx("p",{className:"mt-2 text-sm text-rose-600",children:e.error}):e.outputsLoaded?e.outputs.length>0?o.jsx("ul",{className:"mt-2 space-y-1 text-sm text-slate-800",children:e.outputs.map(n=>{const r=n.path?.split("/").map(encodeURIComponent).join("/")??n.name.split("/").map(encodeURIComponent).join("/"),i=n.download_url?n.download_url:e.outputsBase?`${e.outputsBase}/${r}`:void 0,c=o.jsx("span",{className:"text-brand-600",children:n.name||n.path});return o.jsxs("li",{className:"flex items-center justify-between gap-2 break-all rounded border border-slate-100 px-2 py-1",children:[i?o.jsx("a",{href:i,className:"text-brand-600 hover:underline",children:n.name||n.path}):c,o.jsxs("span",{className:"text-[11px] text-slate-500",children:[n.byte_size.toLocaleString()," bytes"]})]},n.path??n.name)})}):o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No output files were generated."}):o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Loading outputs"})]})}function nE({summary:e}){return o.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[o.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Run summary"}),e.summaryError?o.jsx("p",{className:"mt-2 text-sm text-rose-600",children:e.summaryError}):e.summaryLoaded?e.summary?o.jsx("div",{className:"mt-2",children:o.jsx(ob,{summary:e.summary})}):o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Summary not available."}):o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Loading summary"})]})}function sE({summary:e}){return o.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[o.jsx("p",{className:"text-[12px] font-semibold uppercase tracking-wide text-slate-500",children:"Telemetry summary"}),e.telemetryError?o.jsx("p",{className:"mt-2 text-sm text-rose-600",children:e.telemetryError}):e.telemetryLoaded?e.telemetry&&e.telemetry.length>0?o.jsx("div",{className:"mt-2",children:o.jsx(cb,{events:[...e.telemetry]})}):o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No telemetry events captured."}):o.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Loading telemetry"})]})}function ub({status:e}){const n=e==="succeeded"?"bg-emerald-500":e==="running"||e==="queued"?"bg-amber-400":e==="canceled"?"bg-slate-400":"bg-rose-500";return o.jsx("span",{className:we("inline-block h-2.5 w-2.5 rounded-full",n),"aria-hidden":!0})}const t0={info:"text-[#569cd6]",warning:"text-[#dcdcaa]",error:"text-[#f48771]",success:"text-[#89d185]"},n0={info:"text-slate-100",warning:"text-amber-100",error:"text-rose-100",success:"text-emerald-100"},s0={info:"text-slate-400",warning:"text-amber-400",error:"text-rose-400",success:"text-emerald-300"},r0={info:"INFO",warning:"WARN",error:"ERROR",success:"DONE"};function rE(e){return t0[e]??t0.info}function aE(e){return n0[e]??n0.info}function iE(e){return s0[e]??s0.info}function lE(e){return r0[e]??r0.info}function oE(e){switch(e){case"error":return"text-danger-600";case"warning":return"text-amber-600";default:return"text-slate-600"}}function cE(e){switch(e.status){case"running":return"Running validation...";case"success":{if(e.messages.length===0)return"Validation completed with no issues.";const n=e.messages.length;return`Validation completed with ${n} ${n===1?"issue":"issues"}.`}case"error":return e.error??"Validation failed.";default:return"No validation run yet."}}function db(e){const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function uE(e){if(!e)return" ";const n=e.replace(/\s+/g," ").trim(),r=Date.parse(n);return!Number.isNaN(r)&&n.includes("T")?new Date(r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):n}function dE(e){return e.status==="running"?"Validation in progress...":e.status==="success"?"No validation issues detected.":e.status==="error"?e.error??"Validation failed.":"Trigger validation from the workbench header to see ADE parsing results and manifest issues."}function fb(e){if(!Number.isFinite(e)||e<0)return"";if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function fE(e){switch(e){case"succeeded":return"Succeeded";case"failed":return"Failed";case"canceled":return"Canceled";case"queued":return"Queued";case"running":return"Running";default:return e}}function a0(e){return e?e.length===0?"All worksheets":e.join(", "):null}function i0(e){return e==="error"?3:e==="warning"?2:e==="success"||e==="info"?1:0}function hE(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.useMemo(()=>i=>{n.forEach(c=>c(i))},n)}const mu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $i(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Th(e){return"nodeType"in e}function Jn(e){var n,r;return e?$i(e)?e:Th(e)&&(n=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function Ah(e){const{Document:n}=Jn(e);return e instanceof n}function uo(e){return $i(e)?!1:e instanceof Jn(e).HTMLElement}function hb(e){return e instanceof Jn(e).SVGElement}function Hi(e){return e?$i(e)?e.document:Th(e)?Ah(e)?e:uo(e)||hb(e)?e.ownerDocument:document:document:document}const Ks=mu?p.useLayoutEffect:p.useEffect;function Dh(e){const n=p.useRef(e);return Ks(()=>{n.current=e}),p.useCallback(function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return n.current==null?void 0:n.current(...i)},[])}function mE(){const e=p.useRef(null),n=p.useCallback((i,c)=>{e.current=setInterval(i,c)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,r]}function to(e,n){n===void 0&&(n=[e]);const r=p.useRef(e);return Ks(()=>{r.current!==e&&(r.current=e)},n),r}function fo(e,n){const r=p.useRef();return p.useMemo(()=>{const i=e(r.current);return r.current=i,i},[...n])}function Jc(e){const n=Dh(e),r=p.useRef(null),i=p.useCallback(c=>{c!==r.current&&n?.(c,r.current),r.current=c},[]);return[r,i]}function nh(e){const n=p.useRef();return p.useEffect(()=>{n.current=e},[e]),n.current}let Rf={};function ho(e,n){return p.useMemo(()=>{if(n)return n;const r=Rf[e]==null?0:Rf[e]+1;return Rf[e]=r,e+"-"+r},[e,n])}function mb(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return i.reduce((u,f)=>{const m=Object.entries(f);for(const[x,g]of m){const b=u[x];b!=null&&(u[x]=b+e*g)}return u},{...n})}}const Ri=mb(1),eu=mb(-1);function pE(e){return"clientX"in e&&"clientY"in e}function Mh(e){if(!e)return!1;const{KeyboardEvent:n}=Jn(e.target);return n&&e instanceof n}function gE(e){if(!e)return!1;const{TouchEvent:n}=Jn(e.target);return n&&e instanceof n}function sh(e){if(gE(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return pE(e)?{x:e.clientX,y:e.clientY}:null}const no=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[no.Translate.toString(e),no.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:i}=e;return n+" "+r+"ms "+i}}}),l0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xE(e){return e.matches(l0)?e:e.querySelector(l0)}const vE={display:"none"};function bE(e){let{id:n,value:r}=e;return bt.createElement("div",{id:n,style:vE},r)}function yE(e){let{id:n,announcement:r,ariaLiveType:i="assertive"}=e;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bt.createElement("div",{id:n,style:c,role:"status","aria-live":i,"aria-atomic":!0},r)}function wE(){const[e,n]=p.useState("");return{announce:p.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const pb=p.createContext(null);function SE(e){const n=p.useContext(pb);p.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function jE(){const[e]=p.useState(()=>new Set),n=p.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[p.useCallback(i=>{let{type:c,event:u}=i;e.forEach(f=>{var m;return(m=f[c])==null?void 0:m.call(f,u)})},[e]),n]}const EE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},NE={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function _E(e){let{announcements:n=NE,container:r,hiddenTextDescribedById:i,screenReaderInstructions:c=EE}=e;const{announce:u,announcement:f}=wE(),m=ho("DndLiveRegion"),[x,g]=p.useState(!1);if(p.useEffect(()=>{g(!0)},[]),SE(p.useMemo(()=>({onDragStart(y){let{active:w}=y;u(n.onDragStart({active:w}))},onDragMove(y){let{active:w,over:j}=y;n.onDragMove&&u(n.onDragMove({active:w,over:j}))},onDragOver(y){let{active:w,over:j}=y;u(n.onDragOver({active:w,over:j}))},onDragEnd(y){let{active:w,over:j}=y;u(n.onDragEnd({active:w,over:j}))},onDragCancel(y){let{active:w,over:j}=y;u(n.onDragCancel({active:w,over:j}))}}),[u,n])),!x)return null;const b=bt.createElement(bt.Fragment,null,bt.createElement(bE,{id:i,value:c.draggable}),bt.createElement(yE,{id:m,announcement:f}));return r?jr.createPortal(b,r):b}var ln;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ln||(ln={}));function tu(){}function CE(e,n){return p.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function kE(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const Us=Object.freeze({x:0,y:0});function TE(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function AE(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return r-i}function DE(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return i-r}function ME(e,n){if(!e||e.length===0)return null;const[r]=e;return r[n]}function o0(e,n,r){return n===void 0&&(n=e.left),r===void 0&&(r=e.top),{x:n+e.width*.5,y:r+e.height*.5}}const RE=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e;const c=o0(n,n.left,n.top),u=[];for(const f of i){const{id:m}=f,x=r.get(m);if(x){const g=TE(o0(x),c);u.push({id:m,data:{droppableContainer:f,value:g}})}}return u.sort(AE)};function zE(e,n){const r=Math.max(n.top,e.top),i=Math.max(n.left,e.left),c=Math.min(n.left+n.width,e.left+e.width),u=Math.min(n.top+n.height,e.top+e.height),f=c-i,m=u-r;if(i<c&&r<u){const x=n.width*n.height,g=e.width*e.height,b=f*m,y=b/(x+g-b);return Number(y.toFixed(4))}return 0}const OE=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e;const c=[];for(const u of i){const{id:f}=u,m=r.get(f);if(m){const x=zE(m,n);x>0&&c.push({id:f,data:{droppableContainer:u,value:x}})}}return c.sort(DE)};function LE(e,n,r){return{...e,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function gb(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Us}function UE(e){return function(r){for(var i=arguments.length,c=new Array(i>1?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];return c.reduce((f,m)=>({...f,top:f.top+e*m.y,bottom:f.bottom+e*m.y,left:f.left+e*m.x,right:f.right+e*m.x}),{...r})}}const BE=UE(1);function qE(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function $E(e,n,r){const i=qE(n);if(!i)return e;const{scaleX:c,scaleY:u,x:f,y:m}=i,x=e.left-f-(1-c)*parseFloat(r),g=e.top-m-(1-u)*parseFloat(r.slice(r.indexOf(" ")+1)),b=c?e.width/c:e.width,y=u?e.height/u:e.height;return{width:b,height:y,top:g,right:x+b,bottom:g+y,left:x}}const HE={ignoreTransform:!1};function Zi(e,n){n===void 0&&(n=HE);let r=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:g,transformOrigin:b}=Jn(e).getComputedStyle(e);g&&(r=$E(r,g,b))}const{top:i,left:c,width:u,height:f,bottom:m,right:x}=r;return{top:i,left:c,width:u,height:f,bottom:m,right:x}}function c0(e){return Zi(e,{ignoreTransform:!0})}function ZE(e){const n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function VE(e,n){return n===void 0&&(n=Jn(e).getComputedStyle(e)),n.position==="fixed"}function FE(e,n){n===void 0&&(n=Jn(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const u=n[c];return typeof u=="string"?r.test(u):!1})}function Rh(e,n){const r=[];function i(c){if(n!=null&&r.length>=n||!c)return r;if(Ah(c)&&c.scrollingElement!=null&&!r.includes(c.scrollingElement))return r.push(c.scrollingElement),r;if(!uo(c)||hb(c)||r.includes(c))return r;const u=Jn(e).getComputedStyle(c);return c!==e&&FE(c,u)&&r.push(c),VE(c,u)?r:i(c.parentNode)}return e?i(e):r}function xb(e){const[n]=Rh(e,1);return n??null}function zf(e){return!mu||!e?null:$i(e)?e:Th(e)?Ah(e)||e===Hi(e).scrollingElement?window:uo(e)?e:null:null}function vb(e){return $i(e)?e.scrollX:e.scrollLeft}function bb(e){return $i(e)?e.scrollY:e.scrollTop}function rh(e){return{x:vb(e),y:bb(e)}}var wn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(wn||(wn={}));function yb(e){return!mu||!e?!1:e===document.scrollingElement}function wb(e){const n={x:0,y:0},r=yb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},c=e.scrollTop<=n.y,u=e.scrollLeft<=n.x,f=e.scrollTop>=i.y,m=e.scrollLeft>=i.x;return{isTop:c,isLeft:u,isBottom:f,isRight:m,maxScroll:i,minScroll:n}}const QE={x:.2,y:.2};function IE(e,n,r,i,c){let{top:u,left:f,right:m,bottom:x}=r;i===void 0&&(i=10),c===void 0&&(c=QE);const{isTop:g,isBottom:b,isLeft:y,isRight:w}=wb(e),j={x:0,y:0},_={x:0,y:0},E={height:n.height*c.y,width:n.width*c.x};return!g&&u<=n.top+E.height?(j.y=wn.Backward,_.y=i*Math.abs((n.top+E.height-u)/E.height)):!b&&x>=n.bottom-E.height&&(j.y=wn.Forward,_.y=i*Math.abs((n.bottom-E.height-x)/E.height)),!w&&m>=n.right-E.width?(j.x=wn.Forward,_.x=i*Math.abs((n.right-E.width-m)/E.width)):!y&&f<=n.left+E.width&&(j.x=wn.Backward,_.x=i*Math.abs((n.left+E.width-f)/E.width)),{direction:j,speed:_}}function WE(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:f}=window;return{top:0,left:0,right:u,bottom:f,width:u,height:f}}const{top:n,left:r,right:i,bottom:c}=e.getBoundingClientRect();return{top:n,left:r,right:i,bottom:c,width:e.clientWidth,height:e.clientHeight}}function Sb(e){return e.reduce((n,r)=>Ri(n,rh(r)),Us)}function GE(e){return e.reduce((n,r)=>n+vb(r),0)}function KE(e){return e.reduce((n,r)=>n+bb(r),0)}function PE(e,n){if(n===void 0&&(n=Zi),!e)return;const{top:r,left:i,bottom:c,right:u}=n(e);xb(e)&&(c<=0||u<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const YE=[["x",["left","right"],GE],["y",["top","bottom"],KE]];class zh{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Rh(r),c=Sb(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[u,f,m]of YE)for(const x of f)Object.defineProperty(this,x,{get:()=>{const g=m(i),b=c[u]-g;return this.rect[x]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ql{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...r)})},this.target=n}add(n,r,i){var c;(c=this.target)==null||c.addEventListener(n,r,i),this.listeners.push([n,r,i])}}function XE(e){const{EventTarget:n}=Jn(e);return e instanceof n?e:Hi(e)}function Of(e,n){const r=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(r**2+i**2)>n:"x"in n&&"y"in n?r>n.x&&i>n.y:"x"in n?r>n.x:"y"in n?i>n.y:!1}var ys;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ys||(ys={}));function u0(e){e.preventDefault()}function JE(e){e.stopPropagation()}var ct;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ct||(ct={}));const jb={start:[ct.Space,ct.Enter],cancel:[ct.Esc],end:[ct.Space,ct.Enter,ct.Tab]},eN=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case ct.Right:return{...r,x:r.x+25};case ct.Left:return{...r,x:r.x-25};case ct.Down:return{...r,y:r.y+25};case ct.Up:return{...r,y:r.y-25}}};class Eb{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new Ql(Hi(r)),this.windowListeners=new Ql(Jn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ys.Resize,this.handleCancel),this.windowListeners.add(ys.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ys.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,i=n.node.current;i&&PE(i),r(Us)}handleKeyDown(n){if(Mh(n)){const{active:r,context:i,options:c}=this.props,{keyboardCodes:u=jb,coordinateGetter:f=eN,scrollBehavior:m="smooth"}=c,{code:x}=n;if(u.end.includes(x)){this.handleEnd(n);return}if(u.cancel.includes(x)){this.handleCancel(n);return}const{collisionRect:g}=i.current,b=g?{x:g.left,y:g.top}:Us;this.referenceCoordinates||(this.referenceCoordinates=b);const y=f(n,{active:r,context:i.current,currentCoordinates:b});if(y){const w=eu(y,b),j={x:0,y:0},{scrollableAncestors:_}=i.current;for(const E of _){const A=n.code,{isTop:O,isRight:N,isLeft:D,isBottom:B,maxScroll:J,minScroll:Y}=wb(E),Q=WE(E),se={x:Math.min(A===ct.Right?Q.right-Q.width/2:Q.right,Math.max(A===ct.Right?Q.left:Q.left+Q.width/2,y.x)),y:Math.min(A===ct.Down?Q.bottom-Q.height/2:Q.bottom,Math.max(A===ct.Down?Q.top:Q.top+Q.height/2,y.y))},ee=A===ct.Right&&!N||A===ct.Left&&!D,ie=A===ct.Down&&!B||A===ct.Up&&!O;if(ee&&se.x!==y.x){const ae=E.scrollLeft+w.x,ce=A===ct.Right&&ae<=J.x||A===ct.Left&&ae>=Y.x;if(ce&&!w.y){E.scrollTo({left:ae,behavior:m});return}ce?j.x=E.scrollLeft-ae:j.x=A===ct.Right?E.scrollLeft-J.x:E.scrollLeft-Y.x,j.x&&E.scrollBy({left:-j.x,behavior:m});break}else if(ie&&se.y!==y.y){const ae=E.scrollTop+w.y,ce=A===ct.Down&&ae<=J.y||A===ct.Up&&ae>=Y.y;if(ce&&!w.x){E.scrollTo({top:ae,behavior:m});return}ce?j.y=E.scrollTop-ae:j.y=A===ct.Down?E.scrollTop-J.y:E.scrollTop-Y.y,j.y&&E.scrollBy({top:-j.y,behavior:m});break}}this.handleMove(n,Ri(eu(y,this.referenceCoordinates),j))}}}handleMove(n,r){const{onMove:i}=this.props;n.preventDefault(),i(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Eb.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:i=jb,onActivation:c}=n,{active:u}=r;const{code:f}=e.nativeEvent;if(i.start.includes(f)){const m=u.activatorNode.current;return m&&e.target!==m?!1:(e.preventDefault(),c?.({event:e.nativeEvent}),!0)}return!1}}];function d0(e){return!!(e&&"distance"in e)}function f0(e){return!!(e&&"delay"in e)}class Oh{constructor(n,r,i){var c;i===void 0&&(i=XE(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:u}=n,{target:f}=u;this.props=n,this.events=r,this.document=Hi(f),this.documentListeners=new Ql(this.document),this.listeners=new Ql(i),this.windowListeners=new Ql(Jn(f)),this.initialCoordinates=(c=sh(u))!=null?c:Us,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(ys.Resize,this.handleCancel),this.windowListeners.add(ys.DragStart,u0),this.windowListeners.add(ys.VisibilityChange,this.handleCancel),this.windowListeners.add(ys.ContextMenu,u0),this.documentListeners.add(ys.Keydown,this.handleKeydown),r){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(f0(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(d0(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:i,onPending:c}=this.props;c(i,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(ys.Click,JE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ys.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:i,initialCoordinates:c,props:u}=this,{onMove:f,options:{activationConstraint:m}}=u;if(!c)return;const x=(r=sh(n))!=null?r:Us,g=eu(c,x);if(!i&&m){if(d0(m)){if(m.tolerance!=null&&Of(g,m.tolerance))return this.handleCancel();if(Of(g,m.distance))return this.handleStart()}if(f0(m)&&Of(g,m.tolerance))return this.handleCancel();this.handlePending(m,g);return}n.cancelable&&n.preventDefault(),f(x)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===ct.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const tN={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lh extends Oh{constructor(n){const{event:r}=n,i=Hi(r.target);super(n,tN,i)}}Lh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return!r.isPrimary||r.button!==0?!1:(i?.({event:r}),!0)}}];const nN={move:{name:"mousemove"},end:{name:"mouseup"}};var ah;(function(e){e[e.RightClick=2]="RightClick"})(ah||(ah={}));class sN extends Oh{constructor(n){super(n,nN,Hi(n.event.target))}}sN.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return r.button===ah.RightClick?!1:(i?.({event:r}),!0)}}];const Lf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class rN extends Oh{constructor(n){super(n,Lf)}static setup(){return window.addEventListener(Lf.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Lf.move.name,n)};function n(){}}}rN.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;const{touches:c}=r;return c.length>1?!1:(i?.({event:r}),!0)}}];var Il;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Il||(Il={}));var nu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(nu||(nu={}));function aN(e){let{acceleration:n,activator:r=Il.Pointer,canScroll:i,draggingRect:c,enabled:u,interval:f=5,order:m=nu.TreeOrder,pointerCoordinates:x,scrollableAncestors:g,scrollableAncestorRects:b,delta:y,threshold:w}=e;const j=lN({delta:y,disabled:!u}),[_,E]=mE(),A=p.useRef({x:0,y:0}),O=p.useRef({x:0,y:0}),N=p.useMemo(()=>{switch(r){case Il.Pointer:return x?{top:x.y,bottom:x.y,left:x.x,right:x.x}:null;case Il.DraggableRect:return c}},[r,c,x]),D=p.useRef(null),B=p.useCallback(()=>{const Y=D.current;if(!Y)return;const Q=A.current.x*O.current.x,se=A.current.y*O.current.y;Y.scrollBy(Q,se)},[]),J=p.useMemo(()=>m===nu.TreeOrder?[...g].reverse():g,[m,g]);p.useEffect(()=>{if(!u||!g.length||!N){E();return}for(const Y of J){if(i?.(Y)===!1)continue;const Q=g.indexOf(Y),se=b[Q];if(!se)continue;const{direction:ee,speed:ie}=IE(Y,se,N,n,w);for(const ae of["x","y"])j[ae][ee[ae]]||(ie[ae]=0,ee[ae]=0);if(ie.x>0||ie.y>0){E(),D.current=Y,_(B,f),A.current=ie,O.current=ee;return}}A.current={x:0,y:0},O.current={x:0,y:0},E()},[n,B,i,E,u,f,JSON.stringify(N),JSON.stringify(j),_,g,J,b,JSON.stringify(w)])}const iN={x:{[wn.Backward]:!1,[wn.Forward]:!1},y:{[wn.Backward]:!1,[wn.Forward]:!1}};function lN(e){let{delta:n,disabled:r}=e;const i=nh(n);return fo(c=>{if(r||!i||!c)return iN;const u={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[wn.Backward]:c.x[wn.Backward]||u.x===-1,[wn.Forward]:c.x[wn.Forward]||u.x===1},y:{[wn.Backward]:c.y[wn.Backward]||u.y===-1,[wn.Forward]:c.y[wn.Forward]||u.y===1}}},[r,n,i])}function oN(e,n){const r=n!=null?e.get(n):void 0,i=r?r.node.current:null;return fo(c=>{var u;return n==null?null:(u=i??c)!=null?u:null},[i,n])}function cN(e,n){return p.useMemo(()=>e.reduce((r,i)=>{const{sensor:c}=i,u=c.activators.map(f=>({eventName:f.eventName,handler:n(f.handler,i)}));return[...r,...u]},[]),[e,n])}var so;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(so||(so={}));var ih;(function(e){e.Optimized="optimized"})(ih||(ih={}));const h0=new Map;function uN(e,n){let{dragging:r,dependencies:i,config:c}=n;const[u,f]=p.useState(null),{frequency:m,measure:x,strategy:g}=c,b=p.useRef(e),y=A(),w=to(y),j=p.useCallback(function(O){O===void 0&&(O=[]),!w.current&&f(N=>N===null?O:N.concat(O.filter(D=>!N.includes(D))))},[w]),_=p.useRef(null),E=fo(O=>{if(y&&!r)return h0;if(!O||O===h0||b.current!==e||u!=null){const N=new Map;for(let D of e){if(!D)continue;if(u&&u.length>0&&!u.includes(D.id)&&D.rect.current){N.set(D.id,D.rect.current);continue}const B=D.node.current,J=B?new zh(x(B),B):null;D.rect.current=J,J&&N.set(D.id,J)}return N}return O},[e,u,r,y,x]);return p.useEffect(()=>{b.current=e},[e]),p.useEffect(()=>{y||j()},[r,y]),p.useEffect(()=>{u&&u.length>0&&f(null)},[JSON.stringify(u)]),p.useEffect(()=>{y||typeof m!="number"||_.current!==null||(_.current=setTimeout(()=>{j(),_.current=null},m))},[m,y,j,...i]),{droppableRects:E,measureDroppableContainers:j,measuringScheduled:u!=null};function A(){switch(g){case so.Always:return!1;case so.BeforeDragging:return r;default:return!r}}}function Nb(e,n){return fo(r=>e?r||(typeof n=="function"?n(e):e):null,[n,e])}function dN(e,n){return Nb(e,n)}function fN(e){let{callback:n,disabled:r}=e;const i=Dh(n),c=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(i)},[i,r]);return p.useEffect(()=>()=>c?.disconnect(),[c]),c}function pu(e){let{callback:n,disabled:r}=e;const i=Dh(n),c=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(i)},[r]);return p.useEffect(()=>()=>c?.disconnect(),[c]),c}function hN(e){return new zh(Zi(e),e)}function m0(e,n,r){n===void 0&&(n=hN);const[i,c]=p.useState(null);function u(){c(x=>{if(!e)return null;if(e.isConnected===!1){var g;return(g=x??r)!=null?g:null}const b=n(e);return JSON.stringify(x)===JSON.stringify(b)?x:b})}const f=fN({callback(x){if(e)for(const g of x){const{type:b,target:y}=g;if(b==="childList"&&y instanceof HTMLElement&&y.contains(e)){u();break}}}}),m=pu({callback:u});return Ks(()=>{u(),e?(m?.observe(e),f?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),f?.disconnect())},[e]),i}function mN(e){const n=Nb(e);return gb(e,n)}const p0=[];function pN(e){const n=p.useRef(e),r=fo(i=>e?i&&i!==p0&&e&&n.current&&e.parentNode===n.current.parentNode?i:Rh(e):p0,[e]);return p.useEffect(()=>{n.current=e},[e]),r}function gN(e){const[n,r]=p.useState(null),i=p.useRef(e),c=p.useCallback(u=>{const f=zf(u.target);f&&r(m=>m?(m.set(f,rh(f)),new Map(m)):null)},[]);return p.useEffect(()=>{const u=i.current;if(e!==u){f(u);const m=e.map(x=>{const g=zf(x);return g?(g.addEventListener("scroll",c,{passive:!0}),[g,rh(g)]):null}).filter(x=>x!=null);r(m.length?new Map(m):null),i.current=e}return()=>{f(e),f(u)};function f(m){m.forEach(x=>{const g=zf(x);g?.removeEventListener("scroll",c)})}},[c,e]),p.useMemo(()=>e.length?n?Array.from(n.values()).reduce((u,f)=>Ri(u,f),Us):Sb(e):Us,[e,n])}function g0(e,n){n===void 0&&(n=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},n),p.useEffect(()=>{const i=e!==Us;i&&!r.current&&(r.current=e),!i&&r.current&&(r.current=null)},[e]),r.current?eu(e,r.current):Us}function xN(e){p.useEffect(()=>{if(!mu)return;const n=e.map(r=>{let{sensor:i}=r;return i.setup==null?void 0:i.setup()});return()=>{for(const r of n)r?.()}},e.map(n=>{let{sensor:r}=n;return r}))}function vN(e,n){return p.useMemo(()=>e.reduce((r,i)=>{let{eventName:c,handler:u}=i;return r[c]=f=>{u(f,n)},r},{}),[e,n])}function _b(e){return p.useMemo(()=>e?ZE(e):null,[e])}const x0=[];function bN(e,n){n===void 0&&(n=Zi);const[r]=e,i=_b(r?Jn(r):null),[c,u]=p.useState(x0);function f(){u(()=>e.length?e.map(x=>yb(x)?i:new zh(n(x),x)):x0)}const m=pu({callback:f});return Ks(()=>{m?.disconnect(),f(),e.forEach(x=>m?.observe(x))},[e]),c}function yN(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return uo(n)?n:e}function wN(e){let{measure:n}=e;const[r,i]=p.useState(null),c=p.useCallback(g=>{for(const{target:b}of g)if(uo(b)){i(y=>{const w=n(b);return y?{...y,width:w.width,height:w.height}:w});break}},[n]),u=pu({callback:c}),f=p.useCallback(g=>{const b=yN(g);u?.disconnect(),b&&u?.observe(b),i(b?n(b):null)},[n,u]),[m,x]=Jc(f);return p.useMemo(()=>({nodeRef:m,rect:r,setRef:x}),[r,m,x])}const SN=[{sensor:Lh,options:{}},{sensor:Eb,options:{}}],jN={current:{}},Ic={draggable:{measure:c0},droppable:{measure:c0,strategy:so.WhileDragging,frequency:ih.Optimized},dragOverlay:{measure:Zi}};class Wl extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,i;return(r=(i=this.get(n))==null?void 0:i.node.current)!=null?r:void 0}}const EN={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ic,measureDroppableContainers:tu,windowRect:null,measuringScheduled:!1},NN={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tu,draggableNodes:new Map,over:null,measureDroppableContainers:tu},gu=p.createContext(NN),Cb=p.createContext(EN);function _N(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wl}}}function CN(e,n){switch(n.type){case ln.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case ln.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case ln.DragEnd:case ln.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ln.RegisterDroppable:{const{element:r}=n,{id:i}=r,c=new Wl(e.droppable.containers);return c.set(i,r),{...e,droppable:{...e.droppable,containers:c}}}case ln.SetDroppableDisabled:{const{id:r,key:i,disabled:c}=n,u=e.droppable.containers.get(r);if(!u||i!==u.key)return e;const f=new Wl(e.droppable.containers);return f.set(r,{...u,disabled:c}),{...e,droppable:{...e.droppable,containers:f}}}case ln.UnregisterDroppable:{const{id:r,key:i}=n,c=e.droppable.containers.get(r);if(!c||i!==c.key)return e;const u=new Wl(e.droppable.containers);return u.delete(r),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function kN(e){let{disabled:n}=e;const{active:r,activatorEvent:i,draggableNodes:c}=p.useContext(gu),u=nh(i),f=nh(r?.id);return p.useEffect(()=>{if(!n&&!i&&u&&f!=null){if(!Mh(u)||document.activeElement===u.target)return;const m=c.get(f);if(!m)return;const{activatorNode:x,node:g}=m;if(!x.current&&!g.current)return;requestAnimationFrame(()=>{for(const b of[x.current,g.current]){if(!b)continue;const y=xE(b);if(y){y.focus();break}}})}},[i,n,c,f,u]),null}function TN(e,n){let{transform:r,...i}=n;return e!=null&&e.length?e.reduce((c,u)=>u({transform:c,...i}),r):r}function AN(e){return p.useMemo(()=>({draggable:{...Ic.draggable,...e?.draggable},droppable:{...Ic.droppable,...e?.droppable},dragOverlay:{...Ic.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function DN(e){let{activeNode:n,measure:r,initialRect:i,config:c=!0}=e;const u=p.useRef(!1),{x:f,y:m}=typeof c=="boolean"?{x:c,y:c}:c;Ks(()=>{if(!f&&!m||!n){u.current=!1;return}if(u.current||!i)return;const g=n?.node.current;if(!g||g.isConnected===!1)return;const b=r(g),y=gb(b,i);if(f||(y.x=0),m||(y.y=0),u.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const w=xb(g);w&&w.scrollBy({top:y.y,left:y.x})}},[n,f,m,i,r])}const kb=p.createContext({...Us,scaleX:1,scaleY:1});var ea;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ea||(ea={}));const MN=p.memo(function(n){var r,i,c,u;let{id:f,accessibility:m,autoScroll:x=!0,children:g,sensors:b=SN,collisionDetection:y=OE,measuring:w,modifiers:j,..._}=n;const E=p.useReducer(CN,void 0,_N),[A,O]=E,[N,D]=jE(),[B,J]=p.useState(ea.Uninitialized),Y=B===ea.Initialized,{draggable:{active:Q,nodes:se,translate:ee},droppable:{containers:ie}}=A,ae=Q!=null?se.get(Q):null,ce=p.useRef({initial:null,translated:null}),V=p.useMemo(()=>{var yt;return Q!=null?{id:Q,data:(yt=ae?.data)!=null?yt:jN,rect:ce}:null},[Q,ae]),he=p.useRef(null),[xe,U]=p.useState(null),[P,me]=p.useState(null),je=to(_,Object.values(_)),_e=ho("DndDescribedBy",f),C=p.useMemo(()=>ie.getEnabled(),[ie]),W=AN(w),{droppableRects:M,measureDroppableContainers:R,measuringScheduled:F}=uN(C,{dragging:Y,dependencies:[ee.x,ee.y],config:W.droppable}),z=oN(se,Q),re=p.useMemo(()=>P?sh(P):null,[P]),ge=er(),Ne=dN(z,W.draggable.measure);DN({activeNode:Q!=null?se.get(Q):null,config:ge.layoutShiftCompensation,initialRect:Ne,measure:W.draggable.measure});const H=m0(z,W.draggable.measure,Ne),Se=m0(z?z.parentElement:null),ke=p.useRef({activatorEvent:null,active:null,activeNode:z,collisionRect:null,collisions:null,droppableRects:M,draggableNodes:se,draggingNode:null,draggingNodeRect:null,droppableContainers:ie,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),fe=ie.getNodeFor((r=ke.current.over)==null?void 0:r.id),Te=wN({measure:W.dragOverlay.measure}),Z=(i=Te.nodeRef.current)!=null?i:z,be=Y?(c=Te.rect)!=null?c:H:null,Re=!!(Te.nodeRef.current&&Te.rect),Ie=mN(Re?null:H),et=_b(Z?Jn(Z):null),k=pN(Y?fe??z:null),I=bN(k),ne=TN(j,{transform:{x:ee.x-Ie.x,y:ee.y-Ie.y,scaleX:1,scaleY:1},activatorEvent:P,active:V,activeNodeRect:H,containerNodeRect:Se,draggingNodeRect:be,over:ke.current.over,overlayNodeRect:Te.rect,scrollableAncestors:k,scrollableAncestorRects:I,windowRect:et}),Ce=re?Ri(re,ee):null,ve=gN(k),ye=g0(ve),Oe=g0(ve,[H]),Ze=Ri(ne,ye),Ge=be?BE(be,ne):null,Nt=V&&Ge?y({active:V,collisionRect:Ge,droppableRects:M,droppableContainers:C,pointerCoordinates:Ce}):null,Ee=ME(Nt,"id"),[Ae,Qe]=p.useState(null),Dt=Re?ne:Ri(ne,Oe),rt=LE(Dt,(u=Ae?.rect)!=null?u:null,H),$t=p.useRef(null),Ft=p.useCallback((yt,_t)=>{let{sensor:Ht,options:fn}=_t;if(he.current==null)return;const tt=se.get(he.current);if(!tt)return;const Qt=yt.nativeEvent,mt=new Ht({active:he.current,activeNode:tt,event:Qt,options:fn,context:ke,onAbort(Lt){if(!se.get(Lt))return;const{onDragAbort:En}=je.current,Bn={id:Lt};En?.(Bn),N({type:"onDragAbort",event:Bn})},onPending(Lt,es,En,Bn){if(!se.get(Lt))return;const{onDragPending:qn}=je.current,$n={id:Lt,constraint:es,initialCoordinates:En,offset:Bn};qn?.($n),N({type:"onDragPending",event:$n})},onStart(Lt){const es=he.current;if(es==null)return;const En=se.get(es);if(!En)return;const{onDragStart:Bn}=je.current,De={activatorEvent:Qt,active:{id:es,data:En.data,rect:ce}};jr.unstable_batchedUpdates(()=>{Bn?.(De),J(ea.Initializing),O({type:ln.DragStart,initialCoordinates:Lt,active:es}),N({type:"onDragStart",event:De}),U($t.current),me(Qt)})},onMove(Lt){O({type:ln.DragMove,coordinates:Lt})},onEnd:It(ln.DragEnd),onCancel:It(ln.DragCancel)});$t.current=mt;function It(Lt){return async function(){const{active:En,collisions:Bn,over:De,scrollAdjustedTranslate:qn}=ke.current;let $n=null;if(En&&qn){const{cancelDrop:Bs}=je.current;$n={activatorEvent:Qt,active:En,collisions:Bn,delta:qn,over:De},Lt===ln.DragEnd&&typeof Bs=="function"&&await Promise.resolve(Bs($n))&&(Lt=ln.DragCancel)}he.current=null,jr.unstable_batchedUpdates(()=>{O({type:Lt}),J(ea.Uninitialized),Qe(null),U(null),me(null),$t.current=null;const Bs=Lt===ln.DragEnd?"onDragEnd":"onDragCancel";if($n){const Hn=je.current[Bs];Hn?.($n),N({type:Bs,event:$n})}})}}},[se]),Ys=p.useCallback((yt,_t)=>(Ht,fn)=>{const tt=Ht.nativeEvent,Qt=se.get(fn);if(he.current!==null||!Qt||tt.dndKit||tt.defaultPrevented)return;const mt={active:Qt};yt(Ht,_t.options,mt)===!0&&(tt.dndKit={capturedBy:_t.sensor},he.current=fn,Ft(Ht,_t))},[se,Ft]),Xs=cN(b,Ys);xN(b),Ks(()=>{H&&B===ea.Initializing&&J(ea.Initialized)},[H,B]),p.useEffect(()=>{const{onDragMove:yt}=je.current,{active:_t,activatorEvent:Ht,collisions:fn,over:tt}=ke.current;if(!_t||!Ht)return;const Qt={active:_t,activatorEvent:Ht,collisions:fn,delta:{x:Ze.x,y:Ze.y},over:tt};jr.unstable_batchedUpdates(()=>{yt?.(Qt),N({type:"onDragMove",event:Qt})})},[Ze.x,Ze.y]),p.useEffect(()=>{const{active:yt,activatorEvent:_t,collisions:Ht,droppableContainers:fn,scrollAdjustedTranslate:tt}=ke.current;if(!yt||he.current==null||!_t||!tt)return;const{onDragOver:Qt}=je.current,mt=fn.get(Ee),It=mt&&mt.rect.current?{id:mt.id,rect:mt.rect.current,data:mt.data,disabled:mt.disabled}:null,Lt={active:yt,activatorEvent:_t,collisions:Ht,delta:{x:tt.x,y:tt.y},over:It};jr.unstable_batchedUpdates(()=>{Qe(It),Qt?.(Lt),N({type:"onDragOver",event:Lt})})},[Ee]),Ks(()=>{ke.current={activatorEvent:P,active:V,activeNode:z,collisionRect:Ge,collisions:Nt,droppableRects:M,draggableNodes:se,draggingNode:Z,draggingNodeRect:be,droppableContainers:ie,over:Ae,scrollableAncestors:k,scrollAdjustedTranslate:Ze},ce.current={initial:be,translated:Ge}},[V,z,Nt,Ge,se,Z,be,M,ie,Ae,k,Ze]),aN({...ge,delta:ee,draggingRect:Ge,pointerCoordinates:Ce,scrollableAncestors:k,scrollableAncestorRects:I});const ia=p.useMemo(()=>({active:V,activeNode:z,activeNodeRect:H,activatorEvent:P,collisions:Nt,containerNodeRect:Se,dragOverlay:Te,draggableNodes:se,droppableContainers:ie,droppableRects:M,over:Ae,measureDroppableContainers:R,scrollableAncestors:k,scrollableAncestorRects:I,measuringConfiguration:W,measuringScheduled:F,windowRect:et}),[V,z,H,P,Nt,Se,Te,se,ie,M,Ae,R,k,I,W,F,et]),Js=p.useMemo(()=>({activatorEvent:P,activators:Xs,active:V,activeNodeRect:H,ariaDescribedById:{draggable:_e},dispatch:O,draggableNodes:se,over:Ae,measureDroppableContainers:R}),[P,Xs,V,H,O,_e,se,Ae,R]);return bt.createElement(pb.Provider,{value:D},bt.createElement(gu.Provider,{value:Js},bt.createElement(Cb.Provider,{value:ia},bt.createElement(kb.Provider,{value:rt},g)),bt.createElement(kN,{disabled:m?.restoreFocus===!1})),bt.createElement(_E,{...m,hiddenTextDescribedById:_e}));function er(){const yt=xe?.autoScrollEnabled===!1,_t=typeof x=="object"?x.enabled===!1:x===!1,Ht=Y&&!yt&&!_t;return typeof x=="object"?{...x,enabled:Ht}:{enabled:Ht}}}),RN=p.createContext(null),v0="button",zN="Draggable";function ON(e){let{id:n,data:r,disabled:i=!1,attributes:c}=e;const u=ho(zN),{activators:f,activatorEvent:m,active:x,activeNodeRect:g,ariaDescribedById:b,draggableNodes:y,over:w}=p.useContext(gu),{role:j=v0,roleDescription:_="draggable",tabIndex:E=0}=c??{},A=x?.id===n,O=p.useContext(A?kb:RN),[N,D]=Jc(),[B,J]=Jc(),Y=vN(f,n),Q=to(r);Ks(()=>(y.set(n,{id:n,key:u,node:N,activatorNode:B,data:Q}),()=>{const ee=y.get(n);ee&&ee.key===u&&y.delete(n)}),[y,n]);const se=p.useMemo(()=>({role:j,tabIndex:E,"aria-disabled":i,"aria-pressed":A&&j===v0?!0:void 0,"aria-roledescription":_,"aria-describedby":b.draggable}),[i,j,E,A,_,b.draggable]);return{active:x,activatorEvent:m,activeNodeRect:g,attributes:se,isDragging:A,listeners:i?void 0:Y,node:N,over:w,setNodeRef:D,setActivatorNodeRef:J,transform:O}}function LN(){return p.useContext(Cb)}const UN="Droppable",BN={timeout:25};function qN(e){let{data:n,disabled:r=!1,id:i,resizeObserverConfig:c}=e;const u=ho(UN),{active:f,dispatch:m,over:x,measureDroppableContainers:g}=p.useContext(gu),b=p.useRef({disabled:r}),y=p.useRef(!1),w=p.useRef(null),j=p.useRef(null),{disabled:_,updateMeasurementsFor:E,timeout:A}={...BN,...c},O=to(E??i),N=p.useCallback(()=>{if(!y.current){y.current=!0;return}j.current!=null&&clearTimeout(j.current),j.current=setTimeout(()=>{g(Array.isArray(O.current)?O.current:[O.current]),j.current=null},A)},[A]),D=pu({callback:N,disabled:_||!f}),B=p.useCallback((se,ee)=>{D&&(ee&&(D.unobserve(ee),y.current=!1),se&&D.observe(se))},[D]),[J,Y]=Jc(B),Q=to(n);return p.useEffect(()=>{!D||!J.current||(D.disconnect(),y.current=!1,D.observe(J.current))},[J,D]),p.useEffect(()=>(m({type:ln.RegisterDroppable,element:{id:i,key:u,disabled:r,node:J,rect:w,data:Q}}),()=>m({type:ln.UnregisterDroppable,key:u,id:i})),[i]),p.useEffect(()=>{r!==b.current.disabled&&(m({type:ln.SetDroppableDisabled,id:i,key:u,disabled:r}),b.current.disabled=r)},[i,u,r,m]),{active:f,rect:w,isOver:x?.id===i,node:J,over:x,setNodeRef:Y}}function Tb(e,n,r){const i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}function $N(e,n){return e.reduce((r,i,c)=>{const u=n.get(i);return u&&(r[c]=u),r},Array(e.length))}function Bc(e){return e!==null&&e>=0}function HN(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function ZN(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const qc={scaleX:1,scaleY:1},VN=e=>{var n;let{rects:r,activeNodeRect:i,activeIndex:c,overIndex:u,index:f}=e;const m=(n=r[c])!=null?n:i;if(!m)return null;const x=FN(r,f,c);if(f===c){const g=r[u];return g?{x:c<u?g.left+g.width-(m.left+m.width):g.left-m.left,y:0,...qc}:null}return f>c&&f<=u?{x:-m.width-x,y:0,...qc}:f<c&&f>=u?{x:m.width+x,y:0,...qc}:{x:0,y:0,...qc}};function FN(e,n,r){const i=e[n],c=e[n-1],u=e[n+1];return!i||!c&&!u?0:r<n?c?i.left-(c.left+c.width):u.left-(i.left+i.width):u?u.left-(i.left+i.width):i.left-(c.left+c.width)}const Ab=e=>{let{rects:n,activeIndex:r,overIndex:i,index:c}=e;const u=Tb(n,i,r),f=n[c],m=u[c];return!m||!f?null:{x:m.left-f.left,y:m.top-f.top,scaleX:m.width/f.width,scaleY:m.height/f.height}},Db="Sortable",Mb=bt.createContext({activeIndex:-1,containerId:Db,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ab,disabled:{draggable:!1,droppable:!1}});function QN(e){let{children:n,id:r,items:i,strategy:c=Ab,disabled:u=!1}=e;const{active:f,dragOverlay:m,droppableRects:x,over:g,measureDroppableContainers:b}=LN(),y=ho(Db,r),w=m.rect!==null,j=p.useMemo(()=>i.map(Y=>typeof Y=="object"&&"id"in Y?Y.id:Y),[i]),_=f!=null,E=f?j.indexOf(f.id):-1,A=g?j.indexOf(g.id):-1,O=p.useRef(j),N=!HN(j,O.current),D=A!==-1&&E===-1||N,B=ZN(u);Ks(()=>{N&&_&&b(j)},[N,j,_,b]),p.useEffect(()=>{O.current=j},[j]);const J=p.useMemo(()=>({activeIndex:E,containerId:y,disabled:B,disableTransforms:D,items:j,overIndex:A,useDragOverlay:w,sortedRects:$N(j,x),strategy:c}),[E,y,B.draggable,B.droppable,D,j,A,x,w,c]);return bt.createElement(Mb.Provider,{value:J},n)}const IN=e=>{let{id:n,items:r,activeIndex:i,overIndex:c}=e;return Tb(r,i,c).indexOf(n)},WN=e=>{let{containerId:n,isSorting:r,wasDragging:i,index:c,items:u,newIndex:f,previousItems:m,previousContainerId:x,transition:g}=e;return!g||!i||m!==u&&c===f?!1:r?!0:f!==c&&n===x},GN={duration:200,easing:"ease"},Rb="transform",KN=no.Transition.toString({property:Rb,duration:0,easing:"linear"}),PN={roleDescription:"sortable"};function YN(e){let{disabled:n,index:r,node:i,rect:c}=e;const[u,f]=p.useState(null),m=p.useRef(r);return Ks(()=>{if(!n&&r!==m.current&&i.current){const x=c.current;if(x){const g=Zi(i.current,{ignoreTransform:!0}),b={x:x.left-g.left,y:x.top-g.top,scaleX:x.width/g.width,scaleY:x.height/g.height};(b.x||b.y)&&f(b)}}r!==m.current&&(m.current=r)},[n,r,i,c]),p.useEffect(()=>{u&&f(null)},[u]),u}function XN(e){let{animateLayoutChanges:n=WN,attributes:r,disabled:i,data:c,getNewIndex:u=IN,id:f,strategy:m,resizeObserverConfig:x,transition:g=GN}=e;const{items:b,containerId:y,activeIndex:w,disabled:j,disableTransforms:_,sortedRects:E,overIndex:A,useDragOverlay:O,strategy:N}=p.useContext(Mb),D=JN(i,j),B=b.indexOf(f),J=p.useMemo(()=>({sortable:{containerId:y,index:B,items:b},...c}),[y,c,B,b]),Y=p.useMemo(()=>b.slice(b.indexOf(f)),[b,f]),{rect:Q,node:se,isOver:ee,setNodeRef:ie}=qN({id:f,data:J,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:Y,...x}}),{active:ae,activatorEvent:ce,activeNodeRect:V,attributes:he,setNodeRef:xe,listeners:U,isDragging:P,over:me,setActivatorNodeRef:je,transform:_e}=ON({id:f,data:J,attributes:{...PN,...r},disabled:D.draggable}),C=hE(ie,xe),W=!!ae,M=W&&!_&&Bc(w)&&Bc(A),R=!O&&P,F=R&&M?_e:null,re=M?F??(m??N)({rects:E,activeNodeRect:V,activeIndex:w,overIndex:A,index:B}):null,ge=Bc(w)&&Bc(A)?u({id:f,items:b,activeIndex:w,overIndex:A}):B,Ne=ae?.id,H=p.useRef({activeId:Ne,items:b,newIndex:ge,containerId:y}),Se=b!==H.current.items,ke=n({active:ae,containerId:y,isDragging:P,isSorting:W,id:f,index:B,items:b,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:g,wasDragging:H.current.activeId!=null}),fe=YN({disabled:!ke,index:B,node:se,rect:Q});return p.useEffect(()=>{W&&H.current.newIndex!==ge&&(H.current.newIndex=ge),y!==H.current.containerId&&(H.current.containerId=y),b!==H.current.items&&(H.current.items=b)},[W,ge,y,b]),p.useEffect(()=>{if(Ne===H.current.activeId)return;if(Ne!=null&&H.current.activeId==null){H.current.activeId=Ne;return}const Z=setTimeout(()=>{H.current.activeId=Ne},50);return()=>clearTimeout(Z)},[Ne]),{active:ae,activeIndex:w,attributes:he,data:J,rect:Q,index:B,newIndex:ge,items:b,isOver:ee,isSorting:W,isDragging:P,listeners:U,node:se,overIndex:A,over:me,setNodeRef:C,setActivatorNodeRef:je,setDroppableNodeRef:ie,setDraggableNodeRef:xe,transform:fe??re,transition:Te()};function Te(){if(fe||Se&&H.current.newIndex===B)return KN;if(!(R&&!Mh(ce)||!g)&&(W||ke))return no.Transition.toString({...g,property:Rb})}}function JN(e,n){var r,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e?.draggable)!=null?r:n.draggable,droppable:(i=e?.droppable)!=null?i:n.droppable}}ct.Down,ct.Right,ct.Up,ct.Left;const e2=p.lazy(()=>NS(()=>import("./MonacoCodeEditor-sHnAwZlT.js"),[])),t2=p.forwardRef(function(n,r){const{className:i,...c}=n;return o.jsx(p.Suspense,{fallback:o.jsx("div",{className:we("relative h-full w-full",i),children:o.jsx("div",{className:"flex h-full items-center justify-center text-xs text-slate-400",children:"Loading editor"})}),children:o.jsx(e2,{...c,ref:r,className:i})})}),n2=232,s2=30,Ta=6;function ro({open:e,position:n,onClose:r,items:i,appearance:c="dark"}){const u=p.useRef(null),f=p.useRef([]),[m,x]=p.useState(null),g=p.useMemo(()=>i.findIndex(j=>!j.disabled),[i]),[b,y]=p.useState(()=>g>=0?g:0);if(p.useEffect(()=>{if(!e||!n||typeof window>"u"){x(null);return}const j=i.length*s2+Ta*2,_=Math.max(Ta,(window.innerWidth||0)-n2-Ta),E=Math.max(Ta,(window.innerHeight||0)-j-Ta),A=Math.min(Math.max(n.x,Ta),_),O=Math.min(Math.max(n.y,Ta),E);x({x:A,y:O})},[e,n,i.length]),p.useEffect(()=>{e&&y(g>=0?g:0)},[e,g]),p.useEffect(()=>{if(!e)return;f.current[b]?.focus()},[e,b]),p.useEffect(()=>{if(!e||typeof window>"u")return;const j=A=>{u.current&&(u.current.contains(A.target)||r())},_=A=>{if(u.current){if(u.current.contains(A.target)){A.preventDefault();return}r()}},E=A=>{if(A.key==="Escape"){A.preventDefault(),r();return}if(A.key==="ArrowDown"||A.key==="ArrowUp"){A.preventDefault();const O=A.key==="ArrowDown"?1:-1;y(N=>{if(i.length===0)return N;let D=N;for(let B=0;B<i.length;B+=1)if(D=(D+O+i.length)%i.length,!i[D]?.disabled)return D;return N});return}if(A.key==="Enter"||A.key===" "){A.preventDefault();const O=i[b];O&&!O.disabled&&(O.onSelect(),r())}};return window.addEventListener("mousedown",j),window.addEventListener("contextmenu",_),window.addEventListener("keydown",E),()=>{window.removeEventListener("mousedown",j),window.removeEventListener("contextmenu",_),window.removeEventListener("keydown",E)}},[e,r,i,b]),!e||!n||typeof window>"u"||!m)return null;const w=c==="dark"?{bg:"bg-[#1f1f1f] text-[#f3f3f3]",border:"border-[#3c3c3c]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.55)]",item:"hover:bg-[#094771] focus-visible:bg-[#094771]",disabled:"text-[#7a7a7a]",danger:"text-[#f48771] hover:text-white hover:bg-[#be1a1a] focus-visible:bg-[#be1a1a]",shortcut:"text-[#9f9f9f]",separator:"border-[#3f3f3f]"}:{bg:"bg-[#fdfdfd] text-[#1f1f1f]",border:"border-[#cfcfcf]",shadow:"shadow-[0_12px_28px_rgba(0,0,0,0.15)]",item:"hover:bg-[#dfe9f6] focus-visible:bg-[#dfe9f6]",disabled:"text-[#9c9c9c]",danger:"text-[#b02020] hover:bg-[#fde7e7] focus-visible:bg-[#fde7e7]",shortcut:"text-[#6d6d6d]",separator:"border-[#e0e0e0]"};return jr.createPortal(o.jsx("div",{ref:u,role:"menu",className:we("z-[60] min-w-[200px] rounded-sm border backdrop-blur-sm",w.bg,w.border,w.shadow),style:{top:m.y,left:m.x,position:"fixed"},children:o.jsx("ul",{className:"py-1",role:"none",children:i.map((j,_)=>{const E=!!j.disabled,A=!!j.danger;return o.jsxs(p.Fragment,{children:[j.dividerAbove?o.jsx("li",{role:"separator",className:we("mx-2 my-1 border-t",w.separator)}):null,o.jsx("li",{role:"none",children:o.jsxs("button",{ref:O=>{f.current[_]=O},type:"button",role:"menuitem",className:we("flex w-full items-center justify-between gap-6 px-3 py-1.5 text-[13px] leading-5 outline-none transition",w.item,E&&w.disabled,A&&!E&&w.danger,E&&"cursor-default"),onClick:O=>{O.stopPropagation(),!E&&(j.onSelect(),r())},onMouseEnter:()=>{E||y(_)},disabled:E,children:[o.jsxs("span",{className:"flex min-w-0 items-center gap-3",children:[j.icon?o.jsx("span",{className:"text-base opacity-80",children:j.icon}):o.jsx("span",{className:"inline-block h-4 w-4"}),o.jsx("span",{className:"truncate",children:j.label})]}),j.shortcut?o.jsx("span",{className:we("text-[11px] uppercase tracking-wide",w.shortcut),children:j.shortcut}):null]})})]},j.id)})})}),window.document.body)}const b0=220,y0=64,r2=14;function w0({tabs:e,activeTabId:n,onSelectTab:r,onCloseTab:i,onCloseOtherTabs:c,onCloseTabsToRight:u,onCloseAllTabs:f,onMoveTab:m,onPinTab:x,onUnpinTab:g,onContentChange:b,onSaveTab:y,onSaveAllTabs:w,onSelectRecentTab:j,editorTheme:_,menuAppearance:E,canSaveFiles:A=!1,minHeight:O}){const N=e.length>0,[D,B]=p.useState(null),[J,Y]=p.useState(null),[Q,se]=p.useState(null),[ee,ie]=p.useState({left:!1,right:!1}),[ae,ce]=p.useState(0),V=p.useRef(null),he=p.useRef(null),xe=p.useMemo(()=>e.find(H=>H.id===n)??e[0]??null,[e,n]),U=p.useMemo(()=>e.filter(H=>H.pinned),[e]),P=p.useMemo(()=>e.filter(H=>!H.pinned),[e]),me=p.useMemo(()=>e.slice().sort((H,Se)=>H.id.localeCompare(Se.id)),[e]),_e=p.useMemo(()=>e.filter(H=>H.status==="ready"&&H.content!==H.initialContent),[e]).length>0,C=kE(CE(Lh,{activationConstraint:{distance:5}}));p.useEffect(()=>{if(!N)return;const H=Se=>{if(!(Se.ctrlKey||Se.metaKey))return;if(Se.key.toLowerCase()==="w"){if(!n)return;Se.preventDefault(),i(n);return}if(Se.key==="Tab"){if(e.length<2)return;Se.preventDefault(),j(Se.shiftKey?"backward":"forward");return}const ke=fe=>{if(e.length<2)return;const Te=e.findIndex(Ie=>Ie.id===n),be=((Te>=0?Te:0)+fe+e.length)%e.length,Re=e[be];Re&&r(Re.id)};if(Se.key==="PageUp"){Se.preventDefault(),ke(-1);return}Se.key==="PageDown"&&(Se.preventDefault(),ke(1))};return window.addEventListener("keydown",H),()=>{window.removeEventListener("keydown",H)}},[N,e,n,i,r,j]),p.useEffect(()=>{D&&(e.some(H=>H.id===D.tabId)||B(null))},[D,e]);const W=H=>{se(String(H.active.id))},M=H=>{const Se=H.active.id,ke=H.over?.id;if(!ke){se(null);return}if(Se!==ke){const fe=e.findIndex(Z=>Z.id===Se),Te=e.findIndex(Z=>Z.id===ke);if(fe!==-1&&Te!==-1){const Z=fe<Te?Te+1:Te,Re=e[Te]?.pinned?"pinned":"regular";m(String(Se),Z,{zone:Re})}}se(null)},R=()=>{se(null)},F=p.useCallback(()=>{const H=V.current;if(!H){ie({left:!1,right:!1});return}const{scrollLeft:Se,scrollWidth:ke,clientWidth:fe}=H;ie({left:Se>2,right:Se+fe<ke-2})},[]);p.useEffect(()=>{const H=V.current;if(!H){ie({left:!1,right:!1});return}F();const Se=()=>F();H.addEventListener("scroll",Se),window.addEventListener("resize",F);const ke=typeof ResizeObserver<"u"?new ResizeObserver(F):null;return ke?.observe(H),()=>{H.removeEventListener("scroll",Se),window.removeEventListener("resize",F),ke?.disconnect()}},[e.length,F]),p.useEffect(()=>{if(!Q){ce(0);return}const H=Se=>{const ke=V.current;if(!ke){ce(0);return}const fe=ke.getBoundingClientRect();Se.clientX<fe.left+y0?ce(-1):Se.clientX>fe.right-y0?ce(1):ce(0)};return window.addEventListener("pointermove",H),()=>{window.removeEventListener("pointermove",H),ce(0)}},[Q]),p.useEffect(()=>{if(!Q||ae===0)return;let H;const Se=()=>{const ke=V.current;ke&&(ke.scrollBy({left:ae*r2}),H=window.requestAnimationFrame(Se))};return H=window.requestAnimationFrame(Se),()=>{window.cancelAnimationFrame(H)}},[ae,Q]),p.useEffect(()=>{if(!n)return;const H=V.current;if(!H)return;const Se=`[data-tab-id="${b2(n)}"]`;H.querySelector(Se)?.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},[n,e.length]);const z=p.useMemo(()=>{if(!D)return[];const H=e.find(Ie=>Ie.id===D.tabId);if(!H)return[];const Se=e.findIndex(Ie=>Ie.id===D.tabId),ke=Se>=0&&Se<e.length-1,fe=e.length>1,Te=H.status==="ready"&&H.content!==H.initialContent,Z=!!y&&A&&Te&&!H.saving,be=!!w&&A&&_e,Re={save:"Ctrl+S",saveAll:"Ctrl+Shift+S",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W"};return[{id:"save",label:H.saving?"Saving":"Save",icon:o.jsx(o2,{}),disabled:!Z,shortcut:Re.save,onSelect:()=>y?.(H.id)},{id:"save-all",label:"Save All",icon:o.jsx(c2,{}),disabled:!be,shortcut:Re.saveAll,onSelect:()=>w?.()},{id:"pin",label:H.pinned?"Unpin":"Pin",icon:H.pinned?o.jsx(m2,{}):o.jsx(E0,{}),dividerAbove:!0,onSelect:()=>H.pinned?g(H.id):x(H.id)},{id:"close",label:"Close",icon:o.jsx(u2,{}),dividerAbove:!0,shortcut:Re.close,onSelect:()=>i(H.id)},{id:"close-others",label:"Close Others",icon:o.jsx(d2,{}),disabled:!fe,shortcut:Re.closeOthers,onSelect:()=>c(H.id)},{id:"close-right",label:"Close Tabs to the Right",icon:o.jsx(f2,{}),disabled:!ke,shortcut:Re.closeRight,onSelect:()=>u(H.id)},{id:"close-all",label:"Close All",icon:o.jsx(h2,{}),dividerAbove:!0,disabled:e.length===0,shortcut:Re.closeAll,onSelect:()=>f()}]},[D,e,_e,A,x,g,i,c,u,f,y,w]),re=p.useMemo(()=>{if(!N)return[{id:"empty",label:"No open editors",onSelect:()=>{},disabled:!0}];const H=[],Se=(ke,fe)=>{H.push({id:`switch-${ke.id}`,label:ke.name,icon:ke.pinned?o.jsx(E0,{}):o.jsx(p2,{}),shortcut:ke.id===n?"Active":void 0,dividerAbove:fe,onSelect:()=>r(ke.id)})};return U.forEach(ke=>Se(ke,!1)),P.forEach((ke,fe)=>Se(ke,fe===0&&U.length>0)),H},[N,U,P,n,r]),ge=H=>{V.current?.scrollBy({left:H,behavior:"smooth"})},Ne=()=>{if(typeof window>"u")return;const H=he.current?.getBoundingClientRect();H&&Y({x:H.left,y:H.bottom+6})};return!N||!xe?o.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:"Select a file from the explorer to begin editing."}):o.jsxs("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",style:O?{minHeight:O}:void 0,children:[o.jsxs(Ch,{value:xe.id,onValueChange:r,children:[o.jsx(MN,{sensors:C,collisionDetection:RE,onDragStart:W,onDragEnd:M,onDragCancel:R,children:o.jsx(QN,{items:e.map(H=>H.id),strategy:VN,children:o.jsxs("div",{className:"flex items-center gap-1 border-b border-slate-200 bg-slate-900/5 px-1",children:[o.jsx(S0,{direction:"left",disabled:!ee.left,onClick:()=>ge(-b0)}),o.jsxs("div",{className:"relative flex min-w-0 flex-1 items-stretch",children:[ee.left?o.jsx(j0,{position:"left"}):null,ee.right?o.jsx(j0,{position:"right"}):null,o.jsx("div",{ref:V,className:"flex min-w-0 flex-1 overflow-x-auto pb-1",onWheel:H=>{Math.abs(H.deltaY)>Math.abs(H.deltaX)&&(H.preventDefault(),V.current?.scrollBy({left:H.deltaY}))},children:o.jsx(kh,{className:"flex min-h-[2.75rem] flex-1 items-end gap-0 px-1",children:e.map(H=>{const Se=H.status==="ready"&&H.content!==H.initialContent,ke=H.id===xe.id;return o.jsx(a2,{tab:H,isActive:ke,isDirty:Se,draggingId:Q,onContextMenu:fe=>{fe.preventDefault(),B({tabId:H.id,x:fe.clientX,y:fe.clientY})},onCloseTab:i},H.id)})})})]}),o.jsx(S0,{direction:"right",disabled:!ee.right,onClick:()=>ge(b0)}),o.jsx("button",{ref:he,type:"button",className:"mx-1 flex h-8 w-8 items-center justify-center rounded-md text-slate-500 transition hover:bg-white hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500","aria-label":"Open editors list",onClick:Ne,children:o.jsx(v2,{})})]})})}),me.map(H=>o.jsx(Oa,{value:H.id,className:"flex min-h-0 min-w-0 flex-1",children:H.status==="loading"?o.jsxs("div",{className:"flex flex-1 items-center justify-center text-sm text-slate-500",children:["Loading ",H.name,""]}):H.status==="error"?o.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-3 text-center text-sm text-slate-500",children:[o.jsx("p",{children:H.error??"Unable to load the file."}),o.jsx("button",{type:"button",className:"rounded bg-brand-600 px-3 py-1 text-xs font-medium text-white hover:bg-brand-500",onClick:()=>r(H.id),children:"Retry loading"})]}):o.jsx("div",{className:we("flex min-h-0 min-w-0 flex-1",Q&&"pointer-events-none select-none"),children:o.jsx(t2,{value:H.content,language:H.language??"plaintext",path:H.id,theme:_,onChange:Se=>b(H.id,Se??""),onSaveShortcut:()=>{A&&y?.(H.id)}})})},H.id))]}),o.jsx(ro,{open:!!D,position:D&&{x:D.x,y:D.y},onClose:()=>B(null),items:z,appearance:E}),o.jsx(ro,{open:!!J,position:J,onClose:()=>Y(null),items:re,appearance:E})]})}function a2({tab:e,isActive:n,isDirty:r,draggingId:i,onContextMenu:c,onCloseTab:u}){const{attributes:f,listeners:m,setNodeRef:x,transform:g,transition:b,isDragging:y}=XN({id:e.id}),w={transform:no.Transform.toString(g),transition:b},j=y||i===e.id,_=!!e.pinned;return o.jsxs("div",{ref:x,style:w,className:we("group relative mr-1 flex min-w-0 items-stretch",j&&"opacity-60"),"data-editor-tab":"true",onContextMenu:c,onMouseDown:E=>{E.button===1&&(E.preventDefault(),u(e.id))},...f,...m,children:[o.jsxs(Fl,{value:e.id,"data-tab-id":e.id,title:e.id,className:we("relative flex min-w-[3rem] max-w-[16rem] items-center gap-2 overflow-hidden rounded-t-lg border px-2 py-1.5 pr-8 text-sm font-medium transition-[background-color,border-color,color] duration-150","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50",n?"border-slate-200 border-b-white bg-white text-slate-900 shadow-[0_1px_0_rgba(15,23,42,0.08)]":"border-transparent border-b-slate-200 text-slate-500 hover:border-slate-200 hover:bg-white/70 hover:text-slate-900",_?"min-w-[4rem] max-w-[8rem] justify-center":"min-w-[9rem] justify-start px-3"),children:[_?o.jsx("span",{className:"flex-none text-[12px]","aria-label":"Pinned",children:o.jsx(i2,{filled:n})}):null,o.jsx("span",{className:"block min-w-0 flex-1 truncate text-left",children:e.name}),e.status==="loading"?o.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-slate-400","aria-label":"Loading",children:""}):null,e.status==="error"?o.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Load failed",children:"!"}):null,e.saving?o.jsx("span",{className:"flex-none","aria-label":"Saving",title:"Saving changes",children:o.jsx(l2,{})}):null,e.saveError?o.jsx("span",{className:"flex-none text-[10px] font-semibold uppercase tracking-wide text-danger-600","aria-label":"Save failed",title:e.saveError,children:"!"}):null,r?o.jsx("span",{className:"flex-none text-xs leading-none text-brand-600",children:""}):null]}),o.jsx("button",{type:"button",className:we("absolute right-1 top-1/2 -translate-y-1/2 rounded p-0.5 text-xs transition focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-1 focus-visible:ring-offset-white",n?"text-slate-500 hover:bg-slate-200 hover:text-slate-900":"text-slate-400 opacity-0 group-hover:opacity-100 hover:bg-slate-200 hover:text-slate-700"),onClick:E=>{E.stopPropagation(),u(e.id)},"aria-label":`Close ${e.name}`,children:""})]})}function S0({direction:e,disabled:n,onClick:r}){return o.jsx("button",{type:"button",className:we("flex h-8 w-8 items-center justify-center rounded-md text-slate-500 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",n?"cursor-default opacity-30":"hover:bg-white hover:text-slate-900 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/5"),onClick:r,disabled:n,"aria-label":e==="left"?"Scroll tabs left":"Scroll tabs right",children:e==="left"?o.jsx(g2,{}):o.jsx(x2,{})})}function j0({position:e}){return o.jsx("div",{className:we("pointer-events-none absolute top-0 bottom-0 w-8",e==="left"?"left-0 bg-gradient-to-r from-slate-100 via-slate-100/70 to-transparent":"right-0 bg-gradient-to-l from-slate-100 via-slate-100/70 to-transparent")})}function i2({filled:e}){return e?o.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"currentColor",className:"text-slate-500"})}):o.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M6.5 2.5h3l.5 4h2v1.5h-4V13l-1-.5V8H4V6.5h2z",fill:"none",stroke:"currentColor",strokeWidth:"1.2",className:"text-slate-400"})})}const Er="h-4 w-4 text-current opacity-80";function l2(){return o.jsxs("svg",{className:"h-3 w-3 animate-spin text-brand-500",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"1.2",opacity:"0.3"}),o.jsx("path",{d:"M14 8a6 6 0 0 0-6-6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function o2(){return o.jsxs("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M4 2.5h7.5L13.5 5v8.5H4z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),o.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function c2(){return o.jsxs("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M3.5 3.5h6l3 3v5.5h-9z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"}),o.jsx("path",{d:"M6 3.5v3.5h3.5v-3.5",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M5 11h4",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round"}),o.jsx("path",{d:"M6.5 6.5h6l1.5 1.5v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",opacity:"0.6"})]})}function u2(){return o.jsx("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M4 4l8 8m0-8l-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function d2(){return o.jsxs("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("rect",{x:"2.5",y:"3",width:"8",height:"10",rx:"1.2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),o.jsx("path",{d:"M7 7l5 5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function f2(){return o.jsxs("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M5 3v10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M7 5l5 3-5 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function h2(){return o.jsxs("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M3.5 4h3a1 1 0 0 1 1 1v7.5M12.5 12h-3a1 1 0 0 1-1-1V3.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M5 6l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function E0(){return o.jsx("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M5.5 2.5h5l.5 4h2v1.5h-4V13l-1-.5V8h-3V6.5h3z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function m2(){return o.jsx("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M3.5 3.5l9 9M5.5 2.5h5l.5 4h2v1.5H10M8 8v4.5L7 12.5V8H4V6.5h1",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})}function p2(){return o.jsx("svg",{className:Er,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M5 2.5h4l2.5 2.5V13.5H5z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round",fill:"none"})})}function g2(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M10 3L5 8l5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function x2(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M6 3l5 5-5 5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function v2(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function b2(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}const zb={dark:{surface:"#1e1e1e",border:"#252526",heading:"#cccccc",label:"#999999",textPrimary:"#f3f3f3",textMuted:"#c5c5c5",rowHover:"#2a2d2e",folderActiveBg:"transparent",selectionBg:"#2f3136",selectionText:"#f8f8f8",badgeActive:"#4fc1ff",badgeOpen:"#858585",folderIcon:"#c8ae7d",folderIconActive:"#e0c08e",chevronIdle:"#7a7a7a",chevronActive:"#d4d4d4"},light:{surface:"#f3f3f3",border:"#d4d4d4",heading:"#616161",label:"#8a8a8a",textPrimary:"#1e1e1e",textMuted:"#555555",rowHover:"#e8e8e8",folderActiveBg:"transparent",selectionBg:"#dcdcdc",selectionText:"#0f172a",badgeActive:"#0e639c",badgeOpen:"#6b6b6b",folderIcon:"#c0933a",folderIconActive:"#a67c32",chevronIdle:"#7a7a7a",chevronActive:"#3c3c3c"}},y2={dark:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-[#252526]",light:"focus-visible:ring-2 focus-visible:ring-[#007acc] focus-visible:ring-offset-2 focus-visible:ring-offset-white"};function N0(e){const n=new Set,r=i=>{n.add(i.id),i.children?.forEach(c=>{c.kind==="folder"&&r(c)})};return r(e),n}function w2({width:e,tree:n,activeFileId:r,openFileIds:i,onSelectFile:c,theme:u,canCreateFile:f=!1,canCreateFolder:m=!1,isCreatingEntry:x=!1,onCreateFile:g,onCreateFolder:b,canDeleteFile:y=!1,deletingFilePath:w=null,canDeleteFolder:j=!1,deletingFolderPath:_=null,onDeleteFile:E,onDeleteFolder:A,onCloseFile:O,onCloseOtherFiles:N,onCloseTabsToRight:D,onCloseAllFiles:B,onHide:J}){const[Y,Q]=p.useState(()=>N0(n)),[se,ee]=p.useState(null),[ie,ae]=p.useState(null),[ce,V]=p.useState(null),he=ie?.folderId??null,xe=ie?.kind??null;p.useEffect(()=>{Q(N0(n))},[n]);const U=p.useCallback(z=>{Q(re=>{const ge=new Set(re);return ge.has(z)?ge.delete(z):ge.add(z),ge})},[]),P=p.useCallback((z,re)=>{Q(ge=>{const Ne=new Set(ge);return re?Ne.add(z):z!==n.id&&Ne.delete(z),Ne.has(n.id)||Ne.add(n.id),Ne})},[n.id]),me=p.useCallback(()=>{Q(new Set([n.id]))},[n.id]),je=p.useMemo(()=>n.children??[],[n]),_e=u==="dark"?"dark":"light",C=p.useCallback((z,re)=>{z.preventDefault(),ee({node:re,position:{x:z.clientX,y:z.clientY}})},[]),W=p.useCallback(async z=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(z);return}catch{}if(typeof document>"u")return;const re=document.createElement("textarea");re.value=z,re.setAttribute("readonly","true"),re.style.position="absolute",re.style.left="-9999px",document.body.appendChild(re),re.select(),document.execCommand("copy"),document.body.removeChild(re)},[]),M=p.useMemo(()=>{if(!se)return[];const z=se.node,re={open:"Enter",close:"Ctrl+W",closeOthers:"Ctrl+K Ctrl+O",closeRight:"Ctrl+K Ctrl+Right",closeAll:"Ctrl+K Ctrl+W",copyPath:"Ctrl+K Ctrl+C",collapseAll:"Ctrl+K Ctrl+0",delete:"Delete"};if(z.kind==="file"){const Ne=i.includes(z.id),H=i.length,Se=i.indexOf(z.id),ke=Se>=0&&Se<H-1;return[{id:"open-file",label:"Open",icon:o.jsx(C2,{}),shortcut:re.open,onSelect:()=>c(z.id)},{id:"close-file",label:"Close",icon:o.jsx(D2,{}),disabled:!Ne,shortcut:re.close,onSelect:()=>O(z.id)},{id:"close-file-others",label:"Close Others",icon:o.jsx(M2,{}),disabled:!Ne||H<=1,shortcut:re.closeOthers,onSelect:()=>N(z.id)},{id:"close-file-right",label:"Close Tabs to the Right",icon:o.jsx(R2,{}),disabled:!Ne||!ke,shortcut:re.closeRight,onSelect:()=>D(z.id)},{id:"close-file-all",label:"Close All",dividerAbove:!0,disabled:H===0,icon:o.jsx(z2,{}),shortcut:re.closeAll,onSelect:()=>B()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:o.jsx(C0,{}),shortcut:re.copyPath,onSelect:()=>{W(z.id)}},{id:"delete-file",label:"Delete",icon:o.jsx(k0,{}),shortcut:re.delete,disabled:!y||!E,onSelect:()=>{E&&(E(z.id),ee(null))}}]}const ge=Y.has(z.id);return[{id:"new-file",label:"New File",icon:o.jsx(Lb,{}),disabled:!f||!g,onSelect:()=>{!f||!g||(V(null),P(z.id,!0),ae({folderId:z.id,kind:"file"}),ee(null))}},{id:"new-folder",label:"New Folder",icon:o.jsx(lh,{}),disabled:!m||!b,onSelect:()=>{!m||!b||(V(null),P(z.id,!0),ae({folderId:z.id,kind:"folder"}),ee(null))}},{id:"toggle-folder",label:ge?"Collapse Folder":"Expand Folder",icon:ge?o.jsx(k2,{}):o.jsx(T2,{}),onSelect:()=>P(z.id,!ge)},{id:"collapse-all",label:"Collapse All",icon:o.jsx(A2,{}),shortcut:re.collapseAll,dividerAbove:!0,onSelect:()=>me()},{id:"copy-path",label:"Copy Path",dividerAbove:!0,icon:o.jsx(C0,{}),shortcut:re.copyPath,onSelect:()=>{W(z.id)}},{id:"delete-folder",label:"Delete Folder",icon:o.jsx(k0,{}),shortcut:re.delete,disabled:!j||!A,onSelect:()=>{A&&(A(z.id),ee(null))}}]},[se,i,c,O,N,D,B,W,Y,P,me,f,m,g,b,y,j,E,A,V,ae,ee]),R=zb[u],F=y2[u];return o.jsxs(o.Fragment,{children:[o.jsxs("aside",{className:"flex h-full min-h-0 flex-col border-r text-[13px]",style:{width:e,backgroundColor:R.surface,borderColor:R.border,color:R.textPrimary},"aria-label":"Config files explorer",children:[o.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",style:{borderColor:R.border,backgroundColor:u==="dark"?"#181818":"#ececec"},children:[o.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-[0.3em]",style:{color:R.heading},children:"Explorer"}),o.jsx("button",{type:"button",onClick:J,"aria-label":"Hide explorer",className:we("flex h-7 w-7 items-center justify-center rounded-md transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",u==="dark"?"text-slate-300 hover:bg-white/10 hover:text-white":"text-slate-600 hover:bg-black/10 hover:text-slate-900"),children:o.jsx(_2,{})})]}),o.jsx("nav",{className:"flex-1 overflow-auto px-2 py-2","aria-label":"Workspace files tree",children:o.jsxs("ul",{className:"space-y-0.5",children:[je.map(z=>o.jsx(Ob,{node:z,depth:0,expanded:Y,activeFileId:r,openFileIds:i,onToggleFolder:U,onSelectFile:c,tokens:R,focusRingClass:F,onContextMenu:C,canCreateFile:f,canCreateFolder:m,isCreatingEntry:x,pendingCreateFolderId:he,pendingCreateKind:xe,createError:ce,onSubmitCreateEntry:async(re,ge,Ne)=>{const H=Ne==="folder"?b:g;if(H){V(null);try{await H(re,ge),ae(null)}catch(Se){const ke=Se instanceof Error?Se.message:"Unable to create file.";V(ke)}}},onCancelCreateEntry:()=>{ae(null),V(null)},canDeleteFile:y,canDeleteFolder:j,deletingFilePath:w,deletingFolderPath:_,onDeleteFile:E,onDeleteFolder:A},z.id)),he&&!je.some(z=>z.id===he)?o.jsx("li",{className:"pl-2",children:o.jsx(Ub,{appearance:u,icon:xe==="folder"?o.jsx(lh,{}):void 0,placeholder:xe==="folder"?"new_folder":"new_file.py",onSubmit:z=>{const re=xe==="folder"?b:g;!re||!xe||(V(null),re("",z).then(()=>ae(null),ge=>V(ge instanceof Error?ge.message:"Unable to create file.")))},onCancel:()=>{ae(null),V(null)},isSubmitting:x,error:ce})}):null]})})]}),o.jsx(ro,{open:!!se,position:se&&se.position,onClose:()=>ee(null),items:M,appearance:_e})]})}function Ob({node:e,depth:n,expanded:r,activeFileId:i,openFileIds:c,onToggleFolder:u,onSelectFile:f,tokens:m,focusRingClass:x,onContextMenu:g,canCreateFile:b,canCreateFolder:y,isCreatingEntry:w,pendingCreateFolderId:j,pendingCreateKind:_,createError:E,onSubmitCreateEntry:A,onCancelCreateEntry:O,canDeleteFile:N,canDeleteFolder:D,deletingFilePath:B,deletingFolderPath:J,onDeleteFile:Y,onDeleteFolder:Q}){const ee={paddingLeft:8+n*16,"--tree-hover-bg":m.rowHover};if(e.kind==="folder"){const he=r.has(e.id),xe=J===e.id,U={...ee,color:he?m.textPrimary:m.textMuted};return he&&m.folderActiveBg!=="transparent"&&(U.backgroundColor=m.folderActiveBg),o.jsxs("li",{className:"relative",children:[o.jsxs("button",{type:"button",onClick:()=>u(e.id),onContextMenu:P=>g(P,e),className:we("group flex w-full items-center gap-2 rounded-md px-2 py-1 text-left font-medium transition hover:bg-[var(--tree-hover-bg)]",x,xe&&"opacity-60"),style:U,"aria-expanded":he,disabled:xe,children:[o.jsx(j2,{open:he,tokens:m}),o.jsx(E2,{open:he,tokens:m}),o.jsx("span",{className:"truncate",children:e.name})]}),he&&(e.children?.length||j===e.id)?o.jsxs("ul",{className:"mt-0.5 space-y-0.5",children:[e.children?.map(P=>o.jsx(Ob,{node:P,depth:n+1,expanded:r,activeFileId:i,openFileIds:c,onToggleFolder:u,onSelectFile:f,tokens:m,focusRingClass:x,onContextMenu:g,canCreateFile:b,canCreateFolder:y,isCreatingEntry:w,pendingCreateFolderId:j,pendingCreateKind:_,createError:E,onSubmitCreateEntry:A,onCancelCreateEntry:O,canDeleteFile:N,canDeleteFolder:D,deletingFilePath:B,deletingFolderPath:J,onDeleteFile:Y,onDeleteFolder:Q},P.id)),j===e.id?o.jsx("li",{className:"pl-2",children:o.jsx(Ub,{appearance:m===zb.dark?"dark":"light",icon:_==="folder"?o.jsx(lh,{}):void 0,placeholder:_==="folder"?"new_folder":"new_file.py",onSubmit:P=>{const me=_??"file";A(e.id,P,me)},onCancel:O,isSubmitting:w,error:E})}):null]}):null]})}const ie=i===e.id,ae=c.includes(e.id),ce=S2(e.name,e.language),V={...ee,color:m.textPrimary};return ie&&(V.backgroundColor=m.selectionBg,V.color=m.selectionText),o.jsx("li",{children:o.jsxs("button",{type:"button",onClick:()=>f(e.id),onContextMenu:he=>g(he,e),className:we("flex w-full items-center gap-2 rounded-md px-2 py-1 text-left transition hover:bg-[var(--tree-hover-bg)]",x,ie&&"shadow-inner shadow-[#00000033]",B===e.id&&"opacity-60"),style:V,disabled:B===e.id,children:[o.jsx("span",{className:"inline-flex w-4 justify-center",children:o.jsx(N2,{className:ce})}),o.jsx("span",{className:"flex-1 truncate",children:e.name}),ie?o.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide",style:{color:m.badgeActive},children:"Active"}):ae?o.jsx("span",{className:"text-[9px] uppercase tracking-wide",style:{color:m.badgeOpen},children:"Open"}):null]})})}const _0={json:"text-[#f1d06b]",py:"text-[#519aba]",ts:"text-[#519aba]",tsx:"text-[#519aba]",js:"text-[#f4d13d]",jsx:"text-[#519aba]",md:"text-[#4ec9b0]",env:"text-[#b5cea8]",txt:"text-[#9cdcfe]",lock:"text-[#c586c0]"};function S2(e,n){if(n==="python")return"text-sky-300";const r=e.toLowerCase().split("."),i=r.length>1?r.pop()??"":"";return i&&_0[i]?_0[i]:"text-slate-400"}function j2({open:e,tokens:n}){return o.jsx("svg",{className:we("h-3 w-3 flex-shrink-0 transition-transform duration-150",e?"rotate-90":void 0),viewBox:"0 0 10 10","aria-hidden":!0,children:o.jsx("path",{d:"M3 1l4 4-4 4",stroke:e?n.chevronActive:n.chevronIdle,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}function E2({open:e,tokens:n}){return o.jsx("svg",{className:"h-4 w-4 flex-shrink-0 transition-colors",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M3.5 5.5h4l1.5 1.5H16a1 1 0 0 1 1 1V15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6.5a1 1 0 0 1 1-1Z",stroke:e?n.folderIconActive:n.folderIcon,strokeWidth:1.4,strokeLinejoin:"round",fill:e?n.folderIconActive:"none",opacity:e?.25:1})})}function N2({className:e}){return o.jsxs("svg",{className:we("h-4 w-4 flex-shrink-0",e),viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M6 3h4l4 4v9a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M10 3v4h4",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})]})}function _2(){return o.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M3 3h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M3 13h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M3 8h5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M11 5l2 3-2 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}const js="h-4 w-4 text-current opacity-80";function C2(){return o.jsx("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M3 4.5h3l1 1H13a1 1 0 0 1 1 1V12.5a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}function C0(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M6 4.5h5.5a1 1 0 0 1 1 1V13",stroke:"currentColor",strokeWidth:"1.1",strokeLinecap:"round"}),o.jsx("rect",{x:"3.5",y:"2.5",width:"6",height:"9",rx:"1",stroke:"currentColor",strokeWidth:"1.1",fill:"none"})]})}function k2(){return o.jsx("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M5 6l3 3 3-3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function Lb(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M3.5 4.5h4.5l3 3V13a1 1 0 0 1-1 1h-6.5a1 1 0 0 1-1-1V5.5a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),o.jsx("path",{d:"M11 7.5h-2v-2",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M8.5 7.5h2.5",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function lh(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M3.5 5h3.5l1.2 1.4H12.5a1 1 0 0 1 1 1V12a1 1 0 0 1-1 1h-9a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z",stroke:"currentColor",strokeWidth:"1.2",fill:"none",strokeLinejoin:"round"}),o.jsx("path",{d:"M8 8v3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M6.5 9.5h3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function T2(){return o.jsx("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M5 10l3-3 3 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})}function A2(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M3 5h10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M3 8h6",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M3 11h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function D2(){return o.jsx("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:o.jsx("path",{d:"M4 4l8 8m0-8l-8 8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function M2(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("rect",{x:"2.5",y:"3",width:"8",height:"10",rx:"1.2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),o.jsx("path",{d:"M7 7l5 5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function R2(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M5 3v10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M7 5l5 3-5 3",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function z2(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M3.5 4.5h3.5a1 1 0 0 1 1 1V13M12.5 11.5h-3.5a1 1 0 0 1-1-1V3",stroke:"currentColor",strokeWidth:"1.1",strokeLinecap:"round"}),o.jsx("path",{d:"M4.5 6.5l7 7m0-7-7 7",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function k0(){return o.jsxs("svg",{className:js,viewBox:"0 0 16 16","aria-hidden":!0,children:[o.jsx("path",{d:"M6 3.5h4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M4 4.5h8",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M5.5 4.5v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M6.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),o.jsx("path",{d:"M9.5 6v4",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}function Ub({appearance:e,onSubmit:n,onCancel:r,isSubmitting:i,error:c,placeholder:u="new_file.py",icon:f}){const[m,x]=p.useState(""),g=p.useRef(null);p.useEffect(()=>{g.current?.focus(),g.current?.select()},[]);const b=e==="dark"?"text-slate-300":"text-slate-600",y=e==="dark"?"#232323":"#e8e8e8",w=e==="dark"?"#2f2f2f":"#d4d4d4";return o.jsxs("div",{className:"rounded-md border px-2 py-1",style:{backgroundColor:y,borderColor:w},onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-flex w-4 justify-center text-[#4fc1ff]",children:f??o.jsx(Lb,{})}),o.jsx("input",{ref:g,value:m,onChange:j=>x(j.target.value),onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),n(m.trim())),j.key==="Escape"&&(j.preventDefault(),r())},className:"flex-1 rounded-sm border border-transparent bg-white/80 px-2 py-1 text-[13px] text-slate-900 outline-none focus:border-[#007acc]",placeholder:u,disabled:i}),o.jsx("button",{type:"button",className:we("rounded-sm px-2 py-1 text-[12px] font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",i?"cursor-wait bg-slate-300 text-slate-500":"bg-[#007acc] text-white hover:bg-[#0e78c6]"),onClick:()=>n(m.trim()),disabled:i,children:i?"Creating":"Create"}),o.jsx("button",{type:"button",className:"rounded-sm px-2 py-1 text-[12px] font-semibold text-slate-500 transition hover:text-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#007acc]",onClick:r,disabled:i,children:"Cancel"})]}),o.jsx("div",{className:we("mt-1 text-[11px]",b),children:"Enter a name and press Enter. Escape to cancel."}),c?o.jsx("div",{className:"mt-1 text-[11px] font-semibold text-danger-500",children:c}):null]})}function O2({width:e,file:n}){if(!n)return null;const r=n.status==="ready"&&n.content!==n.initialContent,i=n.metadata;return o.jsxs("aside",{className:"flex h-full min-h-0 flex-shrink-0 flex-col border-l border-slate-200 bg-slate-50",style:{width:e},children:[o.jsx("header",{className:"border-b border-slate-200 px-3 py-2",children:o.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Inspector"})}),o.jsxs("div",{className:"flex-1 space-y-4 overflow-auto px-3 py-4 text-sm text-slate-600",children:[o.jsxs("section",{className:"space-y-2 text-xs",children:[o.jsx("h3",{className:"text-[0.7rem] font-semibold uppercase tracking-wide text-slate-500",children:"File"}),o.jsxs("dl",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Name"}),o.jsx("dd",{className:"text-slate-700",children:n.name})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Path"}),o.jsx("dd",{className:"break-words text-slate-700",children:n.id})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Language"}),o.jsx("dd",{className:"text-slate-700",children:n.language??"plain text"})]})]})]}),o.jsxs("section",{className:"space-y-2 text-xs",children:[o.jsx("h3",{className:"text-[0.7rem] font-semibold uppercase tracking-wide text-slate-500",children:"Metadata"}),o.jsxs("dl",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Size"}),o.jsx("dd",{className:"text-slate-700",children:L2(i?.size)})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Last modified"}),o.jsx("dd",{className:"text-slate-700",children:U2(i?.modifiedAt)})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Content type"}),o.jsx("dd",{className:"text-slate-700",children:i?.contentType??""})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"ETag"}),o.jsx("dd",{className:"break-words text-slate-700",children:i?.etag??""})]})]})]}),o.jsxs("section",{className:"space-y-2 text-xs",children:[o.jsx("h3",{className:"text-[0.7rem] font-semibold uppercase tracking-wide text-slate-500",children:"Editor"}),o.jsxs("dl",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Load status"}),o.jsx("dd",{className:"text-slate-700 capitalize",children:n.status})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"font-medium text-slate-500",children:"Dirty"}),o.jsx("dd",{className:"text-slate-700",children:r?"Yes":"No"})]})]})]}),o.jsx("p",{className:"text-xs leading-relaxed text-slate-500",children:"The inspector stays in sync with the active tab. Future work can hydrate this panel with schema-aware helpers and quick actions without reworking the layout."})]})]})}function L2(e){if(e==null)return"";if(e<1024)return`${e} B`;const n=["KB","MB","GB"];let r=e/1024,i=0;for(;r>=1024&&i<n.length-1;)r/=1024,i+=1;return`${r.toFixed(r>=10?0:1)} ${n[i]}`}function U2(e){if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function Uf({orientation:e,onPointerDown:n}){const r=e==="vertical";return o.jsx("div",{role:"separator","aria-orientation":e,className:r?"w-1 cursor-col-resize select-none bg-transparent":"h-1 cursor-row-resize select-none bg-transparent",style:{touchAction:"none"},onPointerDown:n,children:o.jsx("span",{className:"sr-only",children:"Resize panel"})})}const B2={json:"json",py:"python",ts:"typescript",tsx:"typescriptreact",js:"javascript",jsx:"javascriptreact",env:"dotenv",md:"markdown",yml:"yaml",yaml:"yaml",toml:"toml"};function q2(e){const n=e.root||e.prefix||e.entries[0]?.parent||"",r=e.entries.length>0;if(!n&&!r)return null;const i=Gl(n),c={id:n,name:T0(n),kind:"folder",children:[]},u=new Map([[n,c]]),f=x=>{if(x.length===0)return c;const g=Gl(x),b=g===i?n:g,y=u.get(b);if(y)return y;const w={id:b,name:T0(b),kind:"folder",children:[]};u.set(b,w);const j=b===n?"":Z2(b)??n,_=f(j);return Bf(_,w),w},m=[...e.entries].sort((x,g)=>x.depth!==g.depth?x.depth-g.depth:x.path.localeCompare(g.path));for(const x of m){const g=x.parent&&x.parent.length>0?Gl(x.parent):n,b=f(g);if(x.kind==="dir"){const w=f(x.path);w.name=x.name,w.metadata={size:x.size??null,modifiedAt:x.mtime,contentType:x.content_type,etag:x.etag},w!==b&&Bf(b,w);continue}const y={id:x.path,name:x.name,kind:"file",language:H2(x.path),metadata:{size:x.size??null,modifiedAt:x.mtime,contentType:x.content_type,etag:x.etag}};u.set(x.path,y),Bf(b,y)}return c}function Bf(e,n){const r=e.children??[],i=r.some(c=>c.id===n.id)?r.map(c=>c.id===n.id?n:c):[...r,n];e.children=i.sort($2)}function $2(e,n){return e.kind!==n.kind?e.kind==="folder"?-1:1:e.name.localeCompare(n.name)}function H2(e){const n=e.toLowerCase(),r=n.lastIndexOf(".");if(r===-1)return;const i=n.slice(r+1);return B2[i]}function T0(e){const n=Gl(e);if(!n)return"";const r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}function Z2(e){const n=Gl(e);if(!n)return;const r=n.lastIndexOf("/");return r===-1?"":n.slice(0,r)}function Gl(e){return e?e.replace(/\/+$/,""):""}function ws(e,n){if(e.id===n)return e;if(!e.children)return null;for(const r of e.children){const i=ws(r,n);if(i)return i}return null}function Bb(e){if(e.kind==="file")return e;if(!e.children)return null;for(const n of e.children){const r=Bb(n);if(r)return r}return null}function V2({tree:e,initialActiveFileId:n,loadFile:r,persistence:i}){const[c,u]=p.useState([]),[f,m]=p.useState(""),[x,g]=p.useState([]),[b,y]=p.useState(()=>!i),[w,j]=p.useState(!1),_=p.useRef(new Set),E=p.useRef([]),A=p.useRef(""),O=p.useRef([]),N=p.useCallback(M=>{m(R=>R===M?R:M),g(R=>{const F=R.filter(re=>E.current.some(ge=>ge.id===re));if(!M)return F;const z=F.filter(re=>re!==M);return[M,...z]})},[]);p.useEffect(()=>{A.current=f},[f]),p.useEffect(()=>{O.current=x},[x]),p.useEffect(()=>{if(!e){u([]),m(""),g([]);return}u(R=>R.filter(F=>!!ws(e,F.id)).map(F=>{const z=ws(e,F.id);return!z||z.kind!=="file"?F:{...F,name:z.name,language:z.language,metadata:z.metadata}}));const M=A.current;(!M||!ws(e,M))&&N("")},[e,N]);const D=p.useMemo(()=>c.find(M=>M.id===f)??c[0]??null,[f,c]),B=p.useCallback(async M=>{if(!E.current.some(F=>F.id===M))return;let R=!1;if(u(F=>F.map(z=>z.id!==M?z:z.status==="ready"?(R=!0,z):{...z,status:"loading",error:null})),!R)try{const F=await r(M);u(z=>z.map(re=>re.id===M?{...re,initialContent:F.content,content:F.content,status:"ready",error:null,etag:F.etag??null,saving:!1,saveError:null}:re))}catch(F){const z=F instanceof Error?F.message:"Unable to load file.";u(re=>re.map(ge=>ge.id===M?{...ge,status:"error",error:z}:ge))}},[r]),J=p.useCallback((M,R)=>{if(!e)return;const F=ws(e,M);!F||F.kind!=="file"||(u(z=>{if(z.some(ge=>ge.id===M))return z;const re={id:F.id,name:F.name,language:F.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:F.metadata,pinned:!1,saving:!1,saveError:null,lastSavedAt:null};return[...z,re]}),(R?.activate??!0)&&N(M))},[e,N]);p.useEffect(()=>{if(b||!i||!e){i||y(!0);return}const M=i.get(),F=(M?.openTabs??[]).map(z=>typeof z=="string"?{id:z,pinned:!1}:z).filter(z=>!!(z&&z.id));if(F.length>0){const z=[];for(const re of F){const ge=ws(e,re.id);!ge||ge.kind!=="file"||z.push({id:ge.id,name:ge.name,language:ge.language,initialContent:"",content:"",status:"loading",error:null,etag:null,metadata:ge.metadata,pinned:!!re.pinned,saving:!1,saveError:null,lastSavedAt:null})}if(z.length>0){u(z);const re=(M?.activeTabId&&z.some(H=>H.id===M.activeTabId)?M.activeTabId:z[0]?.id)??"";m(re);const Ne=(M?.mru&&M.mru.length>0?M.mru:z.map(H=>H.id)).filter(H=>z.some(Se=>Se.id===H));g(Ne),j(!0)}}y(!0)},[b,i,e]),p.useEffect(()=>{if(!e||!b)return;if(c.length>0){w||j(!0);return}if(w)return;const M=n&&ws(e,n)||Bb(e);if(!M){j(!0);return}J(M.id),j(!0)},[e,n,J,b,c.length,w]);const Y=p.useCallback(M=>{J(M)},[J]),Q=p.useCallback(M=>{N(M),u(R=>R.map(F=>F.id===M&&F.status==="error"?{...F,status:"loading",error:null}:F))},[N]),se=p.useCallback(M=>{u(R=>{const F=R.filter(ge=>ge.id!==M),z=A.current,re=z===M?F[F.length-1]?.id??"":F.some(ge=>ge.id===z)?z:F[F.length-1]?.id??"";return N(re),F})},[N]),ee=p.useCallback(M=>{u(R=>!R.some(F=>F.id===M)||R.length<=1?R:(N(M),R.filter(F=>F.id===M)))},[N]),ie=p.useCallback(M=>{u(R=>{const F=R.findIndex(ge=>ge.id===M);if(F===-1||F===R.length-1)return R;const z=R.slice(0,F+1),re=z.some(ge=>ge.id===A.current)?A.current:M;return N(re),z})},[N]),ae=p.useCallback(()=>{u([]),m(""),g([])},[]),ce=p.useCallback((M,R,F)=>{u(z=>{if(z.length<=1)return z;const re=z.findIndex(Z=>Z.id===M);if(re===-1)return z;const ge=Math.max(0,Math.min(R,z.length));let Ne=ge;re<ge&&(Ne-=1);const H=[],Se=[];let ke=null;if(z.forEach((Z,be)=>{if(be===re){ke=Z;return}Z.pinned?H.push(Z):Se.push(Z)}),!ke)return z;const fe=ke;if((F?.zone??(Ne<=H.length?"pinned":"regular"))==="pinned"){const Z=Math.max(0,Math.min(Ne,H.length));H.splice(Z,0,{...fe,pinned:!0})}else{const Z=Math.max(0,Math.min(Ne-H.length,Se.length));Se.splice(Z,0,{...fe,pinned:!1})}return[...H,...Se]})},[]),V=p.useCallback(M=>{u(R=>{const F=[],z=[];let re=null;for(const Ne of R){if(Ne.id===M){re=Ne;continue}Ne.pinned?F.push(Ne):z.push(Ne)}if(!re||re.pinned)return R;const ge={...re,pinned:!0};return[...F,ge,...z]})},[]),he=p.useCallback(M=>{u(R=>{const F=[],z=[];let re=null;for(const Ne of R){if(Ne.id===M){re=Ne;continue}Ne.pinned?F.push(Ne):z.push(Ne)}if(!re||!re.pinned)return R;const ge={...re,pinned:!1};return[...F,ge,...z]})},[]),xe=p.useCallback((M,R)=>{R?V(M):he(M)},[V,he]),U=p.useCallback(M=>{const R=O.current.filter(Se=>E.current.some(ke=>ke.id===Se));if(R.length<=1)return;const F=A.current||R[0],z=R.indexOf(F),Ne=((z>=0?z:0)+(M==="forward"?1:-1)+R.length)%R.length,H=R[Ne];H&&H!==F&&N(H)},[N]),P=p.useCallback((M,R)=>{u(F=>F.map(z=>z.id===M?{...z,content:R,status:z.status==="ready"?z.status:"ready",error:null,saveError:null}:z))},[]),me=p.useCallback(M=>{u(R=>R.map(F=>F.id===M?{...F,saving:!0,saveError:null}:F))},[]),je=p.useCallback((M,R)=>{u(F=>F.map(z=>{if(z.id!==M)return z;const re=R?.metadata??z.metadata??null,ge=R?.etag??z.etag??null;return{...z,saving:!1,saveError:null,initialContent:z.content,etag:ge,metadata:re&&{...re,etag:re.etag??ge??null},lastSavedAt:new Date().toISOString()}}))},[]),_e=p.useCallback((M,R)=>{u(F=>F.map(z=>z.id===M?{...z,saving:!1,saveError:R}:z))},[]),C=p.useCallback((M,R)=>{u(F=>F.map(z=>z.id!==M?z:{...z,content:R.content,initialContent:R.content,status:"ready",error:null,saving:!1,saveError:null,etag:R.etag??z.etag??null,metadata:R.metadata??z.metadata}))},[]),W=p.useMemo(()=>c.some(M=>M.status==="ready"&&M.content!==M.initialContent),[c]);return p.useEffect(()=>{E.current=c},[c]),p.useEffect(()=>{g(M=>{const R=M.filter(F=>c.some(z=>z.id===F));return R.length===M.length?M:R})},[c]),p.useEffect(()=>{const M=new Set(c.map(R=>R.id));for(const R of _.current)M.has(R)||_.current.delete(R);for(const R of c){if(R.status!=="loading"||_.current.has(R.id))continue;_.current.add(R.id),B(R.id).finally(()=>{_.current.delete(R.id)})}},[c,B]),p.useEffect(()=>{if(!i||!b)return;const M=[f,...x].filter(R=>!!R).filter((R,F,z)=>z.indexOf(R)===F).filter(R=>c.some(F=>F.id===R));i.set({openTabs:c.map(R=>({id:R.id,pinned:!!R.pinned})),activeTabId:f||null,mru:M})},[i,c,f,x,b]),{tree:e,tabs:c,activeTabId:f,activeTab:D,openFile:Y,selectTab:Q,closeTab:se,closeOtherTabs:ee,closeTabsToRight:ie,closeAllTabs:ae,moveTab:ce,pinTab:V,unpinTab:he,toggleTabPin:xe,selectRecentTab:U,updateContent:P,beginSavingTab:me,completeSavingTab:je,failSavingTab:_e,replaceTabContent:C,isDirty:W}}function qb(e){if(e instanceof URLSearchParams)return new URLSearchParams(e);if(typeof e=="string"||Array.isArray(e))return new URLSearchParams(e);const n=new URLSearchParams;for(const[r,i]of Object.entries(e)){if(i==null)continue;const c=Array.isArray(i)?i:[i];for(const u of c)u!=null&&n.append(r,String(u))}return n}const $b=p.createContext(null);function F2({value:e,children:n}){return p.createElement($b.Provider,{value:e},n)}function Uh(){const e=p.useContext($b),n=Ss(),r=An(),i=p.useMemo(()=>new URLSearchParams(n.search),[n.search]),c=p.useCallback((u,f)=>{const m=typeof u=="function"?u(new URLSearchParams(i)):u,g=qb(m).toString(),b=`${n.pathname}${g?`?${g}`:""}${n.hash}`;r(b,{replace:f?.replace})},[n.hash,n.pathname,r,i]);return[e?.params??i,e?.setSearchParams??c]}const Aa={tab:"editor",pane:"terminal",console:"closed",view:"editor"},Q2=["tab","pane","console","view","file","path"];function I2(e){return e==="open"?"open":"closed"}function W2(e){return e==="runSummary"||e==="run-summary"||e==="summary"?"runSummary":e==="validation"||e==="problems"||e==="issues"?"problems":"terminal"}function G2(e){return e==="split"||e==="zen"?e:"editor"}function Hb(e){const n=e instanceof URLSearchParams?e:new URLSearchParams(e),r=n.get("tab"),i=n.get("pane"),c=n.get("console"),u=n.get("view"),f=n.get("file")??n.get("path");return{...{tab:r==="editor"?"editor":Aa.tab,pane:W2(i),console:I2(c),view:G2(u),file:f??void 0},present:{tab:n.has("tab"),pane:n.has("pane"),console:n.has("console"),view:n.has("view"),file:n.has("file")||n.has("path")}}}function qf(e,n){const r=Hb(e),i={...Aa,...r,...n},c=new URLSearchParams(e);for(const u of Q2)c.delete(u);return i.tab!==Aa.tab&&c.set("tab",i.tab),i.pane!==Aa.pane&&c.set("pane",i.pane),i.console!==Aa.console&&c.set("console",i.console),i.view!==Aa.view&&c.set("view",i.view),i.file&&i.file.length>0&&c.set("file",i.file),c}function K2(){const[e,n]=Uh(),r=p.useMemo(()=>Hb(e),[e]),i=p.useCallback(f=>{r.file===f||!f&&!r.present.file||n(m=>qf(m,{file:f??void 0}),{replace:!0})},[n,r.file,r.present.file]),c=p.useCallback(f=>{r.pane!==f&&n(m=>qf(m,{pane:f}),{replace:!0})},[n,r.pane]),u=p.useCallback(f=>{r.console!==f&&n(m=>qf(m,{console:f}),{replace:!0})},[n,r.console]);return{fileId:r.file??Aa.file,pane:r.pane,console:r.console,consoleExplicit:r.present.console,setFileId:i,setPane:c,setConsole:u}}const P2="You have unsaved changes in the config editor. Are you sure you want to leave?";function Y2({isDirty:e,confirm:n=window.confirm,message:r=P2,shouldBypassNavigation:i}){const c=Ss(),u=p.useCallback(f=>!e||i?.()||f.location.pathname===c.pathname?!0:n(r),[n,e,c.pathname,r,i]);H1(u,e),p.useEffect(()=>{if(!e)return;const f=m=>(m.preventDefault(),m.returnValue=r,r);return window.addEventListener("beforeunload",f),()=>{window.removeEventListener("beforeunload",f)}},[e,r])}const A0="(prefers-color-scheme: dark)";function D0(e){return e==="light"||e==="dark"||e==="system"?e:"system"}function X2(e,n){return e==="dark"||e==="system"&&n?"ade-dark":"vs-light"}function J2(e){const n=p.useMemo(()=>sa(e),[e]),[r,i]=p.useState(()=>{const x=n.get();return D0(x)}),[c,u]=p.useState(()=>typeof window>"u"?!1:window.matchMedia(A0).matches);p.useEffect(()=>{const x=D0(n.get());i(g=>g===x?g:x)},[n]),p.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia(A0),g=b=>{u(b.matches)};return typeof x.addEventListener=="function"?x.addEventListener("change",g):typeof x.addListener=="function"&&x.addListener(g),u(x.matches),()=>{typeof x.removeEventListener=="function"?x.removeEventListener("change",g):typeof x.removeListener=="function"&&x.removeListener(g)}},[]),p.useEffect(()=>{n.set(r)},[r,n]);const f=p.useMemo(()=>X2(r,c),[r,c]),m=p.useCallback(x=>{i(x)},[]);return{preference:r,resolvedTheme:f,setPreference:m}}function Kn(e,n,r){return Math.min(Math.max(e,n),r)}function $f(e,n){const{onMove:r,onEnd:i,cursor:c}=n;if(typeof window>"u")return;e.preventDefault();const u=e.pointerId,f=e.currentTarget,m=document.body.style.cursor,x=document.body.style.userSelect;let g=null,b=null,y=!0;const w=A=>{if(y){if(y=!1,g!==null&&(cancelAnimationFrame(g),g=null),document.body.style.cursor=m,document.body.style.userSelect=x,window.removeEventListener("pointermove",j),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_),f.removeEventListener("lostpointercapture",E),f.hasPointerCapture?.(u))try{f.releasePointerCapture(u)}catch{}i&&i(A)}},j=A=>{!y||A.pointerId!==u||(b=A,g===null&&(g=window.requestAnimationFrame(()=>{g=null,b&&r(b)})))},_=A=>{A.pointerId===u&&w(A)},E=A=>{A.pointerId===u&&w(A)};c&&(document.body.style.cursor=c),document.body.style.userSelect="none";try{f.setPointerCapture(u)}catch{}window.addEventListener("pointermove",j),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_),f.addEventListener("lostpointercapture",E)}const e_="inline-flex items-center gap-2 rounded-l-md px-3 py-1.5 text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed",t_="inline-flex items-center justify-center rounded-r-md border-l px-2 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed";function n_({label:e,icon:n,disabled:r,isLoading:i,highlight:c,className:u,primaryClassName:f,menuClassName:m,title:x,menuAriaLabel:g="Open menu",menuIcon:b=o.jsx(s_,{}),onPrimaryClick:y,onOpenMenu:w,onContextMenu:j}){const _=p.useRef(null),E=!!(r||i),A=O=>{if(E)return;O.preventDefault();const N=_.current?.getBoundingClientRect();if(N){w?.({x:N.left,y:N.bottom});return}w?.({x:O.clientX,y:O.clientY})};return o.jsxs("div",{role:"group",className:we("inline-flex items-stretch rounded-md shadow-sm",c&&"ring-2 ring-amber-300/70 ring-offset-2 ring-offset-transparent",u),onContextMenu:j,children:[o.jsxs("button",{type:"button",title:x,disabled:E,className:we(e_,f),onClick:O=>{E||y?.(O)},children:[n,o.jsx("span",{className:"whitespace-nowrap",children:e})]}),o.jsx("button",{ref:_,type:"button","aria-label":g,"aria-haspopup":"menu","aria-expanded":"false",disabled:E,className:we(t_,m),onClick:A,children:b})]})}function s_(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16","aria-hidden":"true",focusable:"false",children:o.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}const r_={loading:"animate-spin border-2 border-brand-500 border-t-transparent",empty:"bg-slate-200",error:"bg-danger-500"};function At({title:e,description:n,action:r,variant:i="empty",className:c}){return o.jsxs("div",{className:we("flex min-h-[240px] flex-col items-center justify-center rounded-xl border border-dashed border-slate-300 bg-white/70 px-6 py-12 text-center text-sm text-slate-600",c),children:[o.jsx("span",{"aria-hidden":"true",className:we("mb-4 h-8 w-8 rounded-full border-current",r_[i])}),o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:e}),n?o.jsx("p",{className:"mt-2 max-w-md leading-relaxed",children:n}):null,r?o.jsx("div",{className:"mt-4",children:r}):null]})}const a_=new TextEncoder;async function i_(e,n={}){const{signal:r,page:i,pageSize:c,includeTotal:u}=n,f={};typeof i=="number"&&i>0&&(f.page=i),typeof c=="number"&&c>0&&(f.page_size=c),u&&(f.include_total=!0);const{data:m}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e},query:f},signal:r});if(!m)throw new Error("Expected configuration page payload.");return m}async function l_(e,n,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}",{params:{path:{workspace_id:e,configuration_id:n}},signal:r});return i??null}async function o_(e,n){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/validate",{params:{path:{workspace_id:e,configuration_id:n}}});if(!r)throw new Error("Expected validation payload.");return r}async function c_(e,n,r={}){const{prefix:i,depth:c,include:u,exclude:f,limit:m,pageToken:x,sort:g,order:b,signal:y}=r,{data:w}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files",{params:{path:{workspace_id:e,configuration_id:n},query:{prefix:i??"",depth:c??"infinity",include:u?.length?[...u]:void 0,exclude:f?.length?[...f]:void 0,limit:m,page_token:x??void 0,sort:g,order:b}},signal:y,requestInitExt:{cache:"no-store"}});if(!w)throw new Error("Expected file listing payload.");return w}async function M0(e,n,r,i){const{data:c}=await Ve.GET("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:r}},headers:{Accept:"application/json"},signal:i,requestInitExt:{cache:"no-store"}});if(!c)throw new Error("Expected file payload.");return c}async function u_(e,n,r){const i=g_(r.path),c=r.parents?"?parents=1":"",u=await $S(`/api/v1/workspaces/${e}/configurations/${n}/files/${i}${c}`,{method:"PUT",body:a_.encode(r.content),headers:{"Content-Type":"application/octet-stream",...r.create?{"If-None-Match":"*"}:r.etag?{"If-Match":r.etag}:{}}});if(!u.ok){const m=await x_(u),x=m?.title??`Request failed with status ${u.status}`;throw new Xn(x,u.status,m)}const f=await u.json().catch(()=>({}));if(!f||!f.path)throw new Error("Expected write response payload.");return f}async function d_(e,n,r,i={}){await Ve.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/files/{file_path}",{params:{path:{workspace_id:e,configuration_id:n,file_path:r}},headers:i.etag?{"If-Match":i.etag}:void 0})}async function f_(e,n,r){const{data:i}=await Ve.PUT("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:r}}});if(!i)throw new Error("Expected directory response payload.");return i}async function h_(e,n,r,i={}){const c={};i.recursive&&(c.recursive=!0),await Ve.DELETE("/api/v1/workspaces/{workspace_id}/configurations/{configuration_id}/directories/{directory_path}",{params:{path:{workspace_id:e,configuration_id:n,directory_path:r},query:c}})}function m_(e){return e.type==="template"?{type:"template",template_id:e.templateId.trim()}:{type:"clone",configuration_id:e.configurationId.trim()}}async function p_(e,n){const{data:r}=await Ve.POST("/api/v1/workspaces/{workspace_id}/configurations",{params:{path:{workspace_id:e}},body:{display_name:n.displayName.trim(),source:m_(n.source)}});if(!r)throw new Error("Expected configuration payload.");return r}function g_(e){return e.split("/").map(n=>encodeURIComponent(n)).join("/")}async function x_(e){if((e.headers.get("content-type")??"").includes("application/json"))try{return await e.clone().json()}catch{return}}const Tn={root:e=>["workspaces",e,"configurations"],list:(e,n={})=>[...Tn.root(e),"list",{...n}],detail:(e,n)=>[...Tn.root(e),"detail",n],files:(e,n)=>[...Tn.detail(e,n),"files"],file:(e,n,r)=>[...Tn.files(e,n),"file",r]};function v_({workspaceId:e,configId:n,enabled:r=!0,...i}){const{prefix:c="",depth:u="infinity",include:f,exclude:m,limit:x,pageToken:g,sort:b="path",order:y="asc"}=i;return Sn({queryKey:[...Tn.files(e,n),c,u,f?.join("|")??"",m?.join("|")??"",x??"",g??"",b,y],queryFn:({signal:w})=>c_(e,n,{prefix:c,depth:u,include:f,exclude:m,limit:x,pageToken:g,sort:b,order:y,signal:w}),enabled:r&&e.length>0&&n.length>0,staleTime:5e3})}function b_(e,n){const r=ht();return un({mutationFn:i=>u_(e,n,i),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:Tn.files(e,n)}),r.invalidateQueries({queryKey:Tn.file(e,n,c.path)})])}})}function y_(e,n){const r=ht();return un({mutationFn:i=>d_(e,n,i.path,{etag:i.etag}),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:Tn.files(e,n)}),r.invalidateQueries({queryKey:Tn.file(e,n,c.path)})])}})}function w_(e,n){const r=ht();return un({mutationFn:i=>f_(e,n,i.path),async onSuccess(){await r.invalidateQueries({queryKey:Tn.files(e,n)})}})}function S_(e,n){const r=ht();return un({mutationFn:i=>h_(e,n,i.path,{recursive:i.recursive}),async onSuccess(i,c){await Promise.all([r.invalidateQueries({queryKey:Tn.files(e,n)}),r.invalidateQueries({queryKey:Tn.file(e,n,c.path)})])}})}function j_(e,n){return un({mutationFn:()=>o_(e,n)})}const E_={dry_run:!1,validate_only:!1,force_rebuild:!1};async function*N_(e,n={},r){const i={configuration_id:e},u={stream:!1,options:{...E_,...n}},{data:f}=await Ve.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:i},body:u,signal:r});if(!f)throw new Error("Expected run creation response.");const m=f.id,x=f.links?.events;if(!m||!x)throw new Error("Run creation response is missing required links.");const g=C_(x,{appendQuery:"stream=true&after_sequence=0"});for await(const b of __(g,r))yield b}async function*__(e,n){const r=new DOMException("Aborted","AbortError"),i=[],c=[];let u=null,f=!1,m;const x=()=>{for(;c.length;)c.shift()?.()},g=y=>{f||(f=!0,y&&(m=y),u&&(u.removeEventListener?.("ade.event",b),u.onmessage=null,u.onerror=null,u.close()),i.push(null),x())},b=y=>{try{const w=JSON.parse(y.data);i.push(w),x(),w.type==="run.completed"&&g()}catch(w){console.warn("Skipping malformed run event",w,y.data)}};u=new EventSource(e,{withCredentials:!0}),u.addEventListener("ade.event",b),u.onmessage=b,u.onerror=()=>{if(n?.aborted){g(r);return}f||g(new Error("Run event stream interrupted"))},n&&(n.aborted?g(r):n.addEventListener("abort",()=>g(r)));try{for(;;){i.length||await new Promise(w=>c.push(w));const y=i.shift();if(y===null){if(m)throw m;break}if(y){if(m)throw m;yield y}}}finally{g()}}async function Zb(e,n){const r=typeof e=="string"?await mo(e,n):e,i=r.links?.outputs,c=r.id;if(!i||!c)throw new Error("Run outputs link unavailable.");const{data:u,error:f}=await Ve.GET("/api/v1/runs/{run_id}/outputs",{params:{path:{run_id:c}},signal:n});if(f||!u)throw new Error("Run outputs unavailable");return u}async function oh(e,n){const r=typeof e=="string"?await mo(e,n):e,i=r.links?.logs,c=r.id;if(!i||!c)throw new Error("Run logs link unavailable.");const{data:u,error:f}=await Ve.GET("/api/v1/runs/{run_id}/logs",{params:{path:{run_id:c}},headers:{Accept:"application/x-ndjson"},signal:n,parseAs:"text"});if(f)throw new Error("Run telemetry unavailable");return(u??"").split(/\r?\n/).filter(Boolean).map(x=>{try{return JSON.parse(x)}catch(g){return console.warn("Skipping invalid telemetry line",{error:g,line:x}),null}}).filter(x=>!!x)}async function mo(e,n){const{data:r}=await Ve.GET("/api/v1/runs/{run_id}",{params:{path:{run_id:e}},signal:n});if(!r)throw new Error("Run not found");return r}async function Vb(e,n){try{const{data:c}=await Ve.GET("/api/v1/runs/{run_id}/summary",{params:{path:{run_id:e}},signal:n});if(c)return c}catch(c){console.warn("Falling back to embedded run summary",c)}const i=(await mo(e,n))?.summary;if(!i)return null;if(typeof i=="string")try{return JSON.parse(i)}catch(c){return console.warn("Unable to parse run summary",{error:c}),null}return i}function Fb(e){const n=e.links?.outputs;return n?uu(n):null}function Qb(e){const n=e.links?.logs;return n?uu(n):null}function C_(e,n){const r=e.includes("?"),i=n?.appendQuery?`${e}${r?"&":"?"}${n.appendQuery}`:e;return uu(i)}const $c={detail:e=>["run",e],outputs:e=>["run-outputs",e],telemetry:e=>["run-telemetry",e],summary:e=>["run-summary",e]};async function Ib(e,n,r){const{data:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/sheets",{params:{path:{workspace_id:e,document_id:n}},signal:r});return i??[]}function Wb(e){if(!e||typeof e!="object")return!1;const n=e,r=n.created_at,i=typeof r=="string"||typeof r=="number"||r instanceof Date;return typeof n.type=="string"&&i}function Gb(e){const n=e.created_at;if(n instanceof Date)return n.toISOString();if(typeof n=="string")return n;if(typeof n=="number"){const r=n>1e12?n:n*1e3;return new Date(r).toISOString()}return new Date().toISOString()}const k_={hour:"2-digit",minute:"2-digit",second:"2-digit"};function Kl(e){const n=e instanceof Date?Number.isNaN(e.getTime())?null:e.toISOString():e;if(!n)return"";const r=new Date(n);return Number.isNaN(r.getTime())?"":r.toLocaleTimeString([],k_)}function T_(e){if(!Wb(e))return{level:"info",message:JSON.stringify(e),timestamp:"",origin:"raw"};const n=Yb(e),r=Kl(Gb(e)),i=e.type;if(i==="console.line")return Kb(e,n,r,"build");if(!i?.startsWith("build."))return{level:"info",message:JSON.stringify(e),timestamp:r,origin:"build"};switch(i){case"build.created":return{level:"info",message:`Build queued (${n.reason??"queued"}).`,timestamp:r,origin:"build"};case"build.started":{const c=n.reason??void 0;return{level:"info",message:c?`Build started (${c}).`:"Build started.",timestamp:r,origin:"build"}}case"build.phase.started":{const c=n.phase??"building";return{level:"info",message:n.message??`Starting ${c}`,timestamp:r,origin:"build"}}case"build.phase.completed":{const c=n.phase??"build",u=n.status??"completed",f=Xb(n.duration_ms),m=n.message??`${c} ${u}${f?` in ${f}`:""}`;return{level:u==="failed"?"error":u==="skipped"?"warning":"success",message:m,timestamp:r,origin:"build"}}case"build.completed":return D_(n,r);default:return{level:"info",message:JSON.stringify(e),timestamp:r,origin:"build"}}}function A_(e){if(!Wb(e))return{level:"info",message:JSON.stringify(e),timestamp:"",origin:"raw"};const n=Yb(e),r=Kl(Gb(e)),i=e.type;if(i==="console.line")return Kb(e,n,r,n.scope==="build"?"build":"run");if(!i?.startsWith("run."))return{level:"info",message:JSON.stringify(e),timestamp:r,origin:"run"};switch(i){case"run.queued":{const c=n.mode??void 0,u=e.run_id??"",f=c?` (${c})`:"";return{level:"info",message:`Run ${u?`${u} `:""}queued${f}.`,timestamp:r,origin:"run"}}case"run.started":{const c=n.mode??void 0,u=n.env??void 0,f=u?.reused?" (reused environment)":u?.reason?` (${u.reason})`:"";return{level:"info",message:`Run started${c?` (${c})`:""}${f}.`,timestamp:r,origin:"run"}}case"run.phase.started":{const c=n.phase??"progress",u=n.message??`Phase: ${c}`;return{level:Pb(n.level??"info"),message:u,timestamp:r,origin:"run"}}case"run.phase.completed":{const c=n.phase??"phase",u=n.status??"completed",f=Xb(n.duration_ms),m=n.message??`Phase ${c} ${u}${f?` in ${f}`:""}`;return{level:u==="failed"?"error":u==="skipped"?"warning":"success",message:m,timestamp:r,origin:"run"}}case"run.table.summary":return{level:"info",message:`Table completed (${n.source_sheet??n.source_file??n.table_id??"table"})`,timestamp:r,origin:"run"};case"run.validation.issue":{const c=n.severity??"info";return{level:c==="error"?"error":c==="warning"?"warning":"info",message:`Validation issue${n.code?`: ${n.code}`:""}`,timestamp:r,origin:"run"}}case"run.validation.summary":{const c=n.issues_total??0,u=n.max_severity??void 0,f=u==="error"?"error":u==="warning"||c>0?"warning":"info",m=u?`${u}`:c>0?"issues":"clean";return{level:f,message:`Validation summary: ${c} ${m}`,timestamp:r,origin:"run"}}case"run.error":{const c=n.code??"unknown_error",u=n.message??"Run error.",f=n.stage??n.phase,m=f?` [${f}]`:"";return{level:"error",message:`${u}${m} (${c})`,timestamp:r,origin:"run"}}case"run.completed":return M_(n,r);default:return{level:"info",message:JSON.stringify(e),timestamp:r,origin:"run"}}}function Kb(e,n,r,i){const c=n.stream,u=n.level??(c==="stderr"?"warning":"info"),f=n.message??(typeof n.text=="string"?n.text:JSON.stringify(n)),m=n.scope??void 0,x=i??(m==="build"?"build":"run");return{level:Pb(u),message:String(f??""),timestamp:r,origin:x}}function D_(e,n){const r=e.status??"completed",i=e.summary?.trim(),c=typeof e.exit_code=="number"?e.exit_code:void 0,u=typeof e.error=="object"&&e.error!==null?e.error.message:void 0;if(r==="succeeded"||r==="reused")return{level:"success",message:i||`Build ${r}.`,timestamp:n,origin:"build"};if(r==="canceled")return{level:"warning",message:"Build was canceled before completion.",timestamp:n,origin:"build"};if(r==="failed"){const f=typeof c=="number"?` (exit code ${c})`:"";return{level:"error",message:(u||i||"Build failed.")+f,timestamp:n,origin:"build"}}return r==="skipped"?{level:"info",message:i||"Build skipped.",timestamp:n,origin:"build"}:{level:"info",message:i||`Build ${r}.`,timestamp:n,origin:"build"}}function M_(e,n){const r=e.status??"completed",i=e.execution??{},c=typeof i.exit_code=="number"?i.exit_code:void 0,u=e.failure,f=typeof u?.message=="string"?u.message.trim():null,m=typeof e.summary=="string"?e.summary.trim():null,x=r==="failed"?"error":r==="canceled"?"warning":r==="succeeded"?"success":"info",g=f||m||`Run ${r}`,b=typeof c=="number"?` (exit code ${c})`:"";return{level:x,message:`${g}${b}.`,timestamp:n,origin:"run"}}function Pb(e){return e==="error"?"error":e==="warning"||e==="warn"?"warning":e==="success"?"success":"info"}function Yb(e){const n=e.payload;return n&&typeof n=="object"?n:{}}function Xb(e){if(typeof e!="number"||Number.isNaN(e)||e<0)return null;if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}const Jb=p.createContext(null),R_=6e3,z_=7e3,R0=4;function O_({children:e}){const[n,r]=p.useState([]),[i,c]=p.useState([]),u=p.useCallback(b=>{r(y=>y.filter(w=>w.id!==b)),c(y=>y.filter(w=>w.id!==b))},[]),f=p.useCallback(b=>{const y={kind:"toast",id:b.id??z0(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?R_:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,createdAt:Date.now()};return r(w=>{const _=[...y.persistKey?w.filter(E=>E.persistKey!==y.persistKey):w,y];return _.length>R0?_.slice(_.length-R0):_}),typeof window<"u"&&y.duration&&y.duration>0&&window.setTimeout(()=>u(y.id),y.duration+50),y.id},[u]),m=p.useCallback(b=>{const y={kind:"banner",id:b.id??z0(),title:b.title,description:b.description,intent:b.intent??"info",actions:b.actions??[],duration:b.duration===void 0?b.sticky?null:z_:b.duration,dismissible:b.dismissible??!0,scope:b.scope,persistKey:b.persistKey,icon:b.icon,sticky:b.sticky??!1,createdAt:Date.now()};return c(w=>[...y.persistKey?w.filter(_=>_.persistKey!==y.persistKey):w,y]),typeof window<"u"&&y.duration&&y.duration>0&&window.setTimeout(()=>u(y.id),y.duration+50),y.id},[u]),x=p.useCallback((b,y)=>{b&&((!y||y==="toast")&&r(w=>w.filter(j=>j.scope!==b)),(!y||y==="banner")&&c(w=>w.filter(j=>j.scope!==b)))},[]),g=p.useMemo(()=>({toasts:n,banners:i,pushToast:f,pushBanner:m,dismiss:u,clearScope:x}),[n,i,f,m,u,x]);return o.jsxs(Jb.Provider,{value:g,children:[e,o.jsx(L_,{})]})}function ey(){const e=p.useContext(Jb);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e}function L_(){const{toasts:e,banners:n,dismiss:r}=ey(),[i,c]=p.useState(!1);return p.useEffect(()=>c(!0),[]),!i||typeof document>"u"?null:jr.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-0 z-[205] flex flex-col items-center gap-3 px-4 pt-3 sm:items-end sm:pr-6",children:n.slice().sort((u,f)=>u.createdAt-f.createdAt).map(u=>o.jsx(B_,{banner:u,onDismiss:r},u.id))}),o.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-4 z-[210] flex flex-col items-center gap-3 px-4 sm:inset-x-auto sm:right-6 sm:bottom-6 sm:items-end sm:px-0",children:e.slice().sort((u,f)=>u.createdAt-f.createdAt).map(u=>o.jsx(U_,{toast:u,onDismiss:r},u.id))})]}),document.body)}function U_({toast:e,onDismiss:n}){const r=e.duration!==null&&e.duration>0,[i,c]=p.useState(100);p.useEffect(()=>{if(!r||!e.duration)return;c(100);const f=requestAnimationFrame(()=>c(0)),m=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(f),window.clearTimeout(m)}},[r,e.duration,e.id,n]);const u=q_[e.intent];return o.jsxs("div",{className:we("pointer-events-auto w-full max-w-sm rounded-2xl border px-4 py-3 text-sm shadow-2xl backdrop-blur",u.container,u.border),children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:we("mt-1 flex h-8 w-8 items-center justify-center rounded-full",u.icon),children:e.icon??ny(e.intent)}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx("p",{className:"text-sm font-semibold leading-snug text-white",children:e.title}),e.description?o.jsx("p",{className:"mt-1 text-xs leading-relaxed text-white/70",children:e.description}):null,e.actions.length>0?o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(f=>o.jsx(ty,{action:f,onPress:()=>{f.onSelect(),n(e.id)},appearance:"dark"},f.label))}):null]}),e.dismissible?o.jsx("button",{type:"button",className:"ml-2 inline-flex h-8 w-8 items-center justify-center rounded-full text-white/60 transition hover:bg-white/10 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30","aria-label":"Dismiss notification",onClick:()=>n(e.id),children:o.jsx(sy,{})}):null]}),r&&e.duration?o.jsx("div",{className:"mt-4 h-1 overflow-hidden rounded-full bg-white/10",children:o.jsx("div",{className:we("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function B_({banner:e,onDismiss:n}){const r=!e.sticky&&e.duration!==null&&e.duration>0,[i,c]=p.useState(100);p.useEffect(()=>{if(!r||!e.duration)return;c(100);const f=requestAnimationFrame(()=>c(0)),m=window.setTimeout(()=>n(e.id),e.duration);return()=>{window.cancelAnimationFrame(f),window.clearTimeout(m)}},[r,e.duration,e.id,n]);const u=$_[e.intent];return o.jsxs("div",{className:we("pointer-events-auto w-full max-w-sm rounded-lg border px-3.5 py-2.5 shadow-lg shadow-black/30 backdrop-blur-sm sm:min-w-[300px]",u.container,u.border),children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:we("flex h-7 w-7 items-center justify-center rounded-full text-base",u.icon),children:e.icon??ny(e.intent)}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[o.jsx("p",{className:"text-[13px] font-semibold leading-tight",children:e.title}),e.description?o.jsx("p",{className:"text-[12px] leading-relaxed text-white/75",children:e.description}):null,e.actions.length>0?o.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:e.actions.map(f=>o.jsx(ty,{action:f,onPress:()=>{f.onSelect(),e.sticky||n(e.id)},appearance:"light"},f.label))}):null]}),e.dismissible?o.jsx("button",{type:"button",className:we("ml-2 inline-flex h-7 w-7 items-center justify-center rounded-full text-white/70 transition hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30",u.dismiss),"aria-label":"Dismiss notification",onClick:()=>n(e.id),children:o.jsx(sy,{})}):null]}),r&&e.duration?o.jsx("div",{className:"mt-2 h-0.5 overflow-hidden rounded-full bg-white/10",children:o.jsx("div",{className:we("h-full rounded-full",u.progress),style:{width:`${i}%`,transition:`width ${e.duration}ms linear`}})}):null]})}function ty({action:e,onPress:n,appearance:r}){const i=e.variant??"secondary",c=r==="dark"?"border-white/15 text-white/90 hover:bg-white/10 focus-visible:ring-white/30":"border-white/20 text-white hover:bg-white/10 focus-visible:ring-white/30";return o.jsx("button",{type:"button",className:we("inline-flex items-center justify-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2",i==="primary"?"bg-white text-slate-900 hover:bg-slate-100 focus-visible:ring-white/40":c),onClick:n,children:e.label})}function ny(e){switch(e){case"success":return o.jsx(Z_,{});case"warning":return o.jsx(V_,{});case"danger":return o.jsx(F_,{});default:return o.jsx(H_,{})}}const q_={info:{container:"bg-[#0b1220]/95 text-white",border:"border-white/5",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400"},success:{container:"bg-[#031b16]/95 text-emerald-50",border:"border-emerald-500/20",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400"},warning:{container:"bg-[#211604]/95 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-400/20 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400"},danger:{container:"bg-[#22060b]/95 text-rose-50",border:"border-rose-500/30",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400"}},$_={info:{container:"bg-[#101828]/85 text-white",border:"border-white/10",icon:"bg-sky-500/15 text-sky-200",progress:"bg-gradient-to-r from-sky-500 to-blue-400",dismiss:"hover:bg-white/10"},success:{container:"bg-[#0d1c17]/85 text-emerald-50",border:"border-emerald-500/15",icon:"bg-emerald-500/15 text-emerald-200",progress:"bg-gradient-to-r from-emerald-400 to-lime-400",dismiss:"hover:bg-white/10"},warning:{container:"bg-[#1b1507]/85 text-amber-50",border:"border-amber-500/25",icon:"bg-amber-500/15 text-amber-100",progress:"bg-gradient-to-r from-amber-400 to-orange-400",dismiss:"hover:bg-white/10"},danger:{container:"bg-[#200912]/85 text-rose-50",border:"border-rose-500/25",icon:"bg-rose-500/15 text-rose-100",progress:"bg-gradient-to-r from-rose-500 to-rose-400",dismiss:"hover:bg-white/10"}};function z0(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}function H_(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),o.jsx("path",{d:"M10 7.5v.2",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),o.jsx("path",{d:"M9.2 9.5h1.6V14",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function Z_(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),o.jsx("path",{d:"M6.5 10.5l2.5 2.5 4.5-5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})}function V_(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M9 4.6l-6 10.4a1 1 0 0 0 .87 1.5h12.26a1 1 0 0 0 .87-1.5L11 4.6a1 1 0 0 0-1.74 0Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M10 8v3.5",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"}),o.jsx("path",{d:"M10 14h.01",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}function F_(){return o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"1.6",opacity:.8}),o.jsx("path",{d:"M7 7l6 6m0-6-6 6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function sy(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M4 4l8 8m0-8-8 8",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})})}function Q_(){const e=ey();return p.useMemo(()=>({notifyToast:n=>e.pushToast(n),notifyBanner:n=>e.pushBanner(n),dismissNotification:n=>e.dismiss(n),dismissScope:(n,r)=>e.clearScope(n,r)}),[e])}const I_="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",Ba=p.forwardRef(({className:e,...n},r)=>o.jsx("select",{ref:r,className:we(I_,e),...n}));Ba.displayName="Select";const W_={primary:"bg-brand-600 text-white hover:bg-brand-700 focus-visible:ring-brand-500 disabled:bg-brand-300",secondary:"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 focus-visible:ring-slate-400 disabled:text-slate-400",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus-visible:ring-slate-300",danger:"bg-rose-600 text-white hover:bg-rose-700 focus-visible:ring-rose-500 disabled:bg-rose-300"},G_={sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"},qe=p.forwardRef(({type:e="button",variant:n="primary",size:r="md",isLoading:i=!1,className:c,children:u,disabled:f,...m},x)=>{const g=f||i;return o.jsxs("button",{ref:x,type:e,disabled:g,"aria-busy":i||void 0,className:we("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed",W_[n],G_[r],c),...m,children:[i?o.jsx("span",{"aria-hidden":"true",className:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,o.jsx("span",{children:u})]})});qe.displayName="Button";const K_={info:"bg-brand-50 text-brand-700 ring-brand-100",success:"bg-success-50 text-success-700 ring-success-100",warning:"bg-warning-50 text-warning-700 ring-warning-100",danger:"bg-danger-50 text-danger-700 ring-danger-100"};function jt({tone:e="info",heading:n,icon:r,className:i,children:c,...u}){return o.jsxs("div",{role:"status",className:we("flex w-full items-start gap-3 rounded-lg px-4 py-3 text-sm ring-1 ring-inset",K_[e],i),...u,children:[r?o.jsx("span",{"aria-hidden":"true",children:r}):null,o.jsxs("div",{className:"space-y-1",children:[n?o.jsx("p",{className:"font-semibold",children:n}):null,c?o.jsx("p",{className:"leading-relaxed",children:c}):null]})]})}function ry(e,n){return{runId:null,status:"idle",buildPhases:{},runPhases:{},consoleLines:Bh(n??[],e),tableSummaries:{},validationSummary:null,completedPayload:null,lastSequence:0,maxConsoleLines:e}}function P_(e,n){switch(n.type){case"RESET":return{...ry(e.maxConsoleLines,n.initialLines),runId:n.runId??null};case"CLEAR_CONSOLE":return{...e,consoleLines:[]};case"APPEND_LINE":{const r=Bh([...e.consoleLines,n.line],e.maxConsoleLines);return{...e,consoleLines:r}}case"EVENT":return Y_(e,n.event);default:return e}}function Y_(e,n){const r=eC(n),i=typeof n.type=="string"?n.type:"",c=typeof n.sequence=="number"&&Number.isFinite(n.sequence)?n.sequence:e.lastSequence,f=i.startsWith("build.")||i==="console.line"&&r.scope==="build"?T_(n):A_(n),m=Bh([...e.consoleLines,f],e.maxConsoleLines),x=i==="build.phase.started"?{...e.buildPhases,[r.phase]:{status:"running",message:r.message}}:i==="build.phase.completed"?{...e.buildPhases,[r.phase]:{status:O0(r.status),durationMs:L0(r.duration_ms),message:r.message}}:e.buildPhases,g=i==="run.phase.started"?{...e.runPhases,[r.phase]:{status:"running",message:r.message}}:i==="run.phase.completed"?{...e.runPhases,[r.phase]:{status:O0(r.status),durationMs:L0(r.duration_ms),message:r.message}}:e.runPhases,b=i==="run.validation.summary"?r:e.validationSummary,y=i==="run.table.summary"&&typeof r.table_id=="string"?{...e.tableSummaries,[r.table_id]:r}:e.tableSummaries,w=i==="run.completed"?r:e.completedPayload,j=X_(e.status,i,r),_=e.runId??(typeof n.run_id=="string"?n.run_id:null);return{...e,status:j,runId:_,buildPhases:x,runPhases:g,consoleLines:m,tableSummaries:y,validationSummary:b,completedPayload:w,lastSequence:Math.max(e.lastSequence,c)}}function X_(e,n,r){switch(n){case"run.queued":return"queued";case"build.started":return"building";case"run.started":return"running";case"run.error":return e==="failed"?e:"failed";case"run.completed":return J_(r.status);default:return e}}function J_(e){return e==="succeeded"?"succeeded":e==="failed"?"failed":e==="canceled"||e==="cancelled"?"canceled":"running"}function O0(e){return e==="failed"?"failed":e==="skipped"?"skipped":e==="succeeded"?"succeeded":e==="running"?"running":"pending"}function eC(e){const n=e?.payload;return n&&typeof n=="object"?n:{}}function Bh(e,n){return e.length<=n?e.slice():e.slice(e.length-n)}function L0(e){if(!(typeof e!="number"||Number.isNaN(e)))return e}const tC={min:200,max:420},nC={min:260,max:420},sC=320,rC=120,Hf=140,aC=220,U0=400,Zl=4,iC=56,B0="Console closed to keep the editor readable on this screen size. Resize the window or collapse other panes to reopen it.",lC=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.tabs`,oC=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.console`,cC=(e,n)=>`ade.ui.workspace.${e}.configuration.${n}.editor-theme`,uC=[{value:"system",label:"System"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}],dC={explorer:"",search:"Search coming soon",scm:"Source Control coming soon",extensions:"Extensions coming soon"};function ay({workspaceId:e,configId:n,configName:r,seed:i,windowState:c,onMinimizeWindow:u,onMaximizeWindow:f,onRestoreWindow:m,onCloseWorkbench:x,shouldBypassUnsavedGuard:g}){const b=ht(),{fileId:y,pane:w,console:j,consoleExplicit:_,setFileId:E,setPane:A,setConsole:O}=K2(),N=!!i,D=v_({workspaceId:e,configId:n,depth:"infinity",sort:"path",order:"asc",enabled:!N}),B=p.useMemo(()=>i?i.tree:D.data?q2(D.data):null,[i,D.data]),[J,Y]=p.useReducer(P_,i?.console?.slice(-U0)??[],q=>ry(U0,Array.isArray(q)?q:void 0)),Q=J.consoleLines,se=p.useRef(J);p.useEffect(()=>{se.current=J},[J]);const[ee,ie]=p.useState(()=>({status:i?.validation?.length?"success":"idle",messages:i?.validation??[],lastRunAt:i?.validation?.length?new Date().toISOString():void 0,error:null,digest:null})),ae=p.useRef(null),ce=p.useRef(!0),[V,he]=p.useState(null),[xe,U]=p.useState(null),[P,me]=p.useState(!1),je=p.useCallback(q=>{if(!ce.current)return;const le=Kl(new Date);Y({type:"RESET",initialLines:[{level:"info",message:q,timestamp:le,origin:"run"}]})},[Y]),_e=p.useCallback(q=>{ce.current&&Y({type:"APPEND_LINE",line:q})},[Y]);p.useEffect(()=>{i?.validation&&ie({status:"success",messages:i.validation,lastRunAt:new Date().toISOString(),error:null,digest:null})},[i?.validation]),p.useEffect(()=>(ce.current=!0,()=>{ce.current=!1,ae.current?.abort()}),[]);const C=j_(e,n),W=p.useMemo(()=>i?null:sa(lC(e,n)),[e,n,i]),M=p.useMemo(()=>i?null:sa(oC(e,n)),[e,n,i]),R=p.useRef(null);!R.current&&M&&(R.current=M.get()??null);const F=J2(cC(e,n)),z=F.resolvedTheme==="vs-light"?"light":"dark",re=ee.lastRunAt?`Last run ${kC(ee.lastRunAt)}`:void 0,[ge,Ne]=p.useState({collapsed:!1,fraction:280/1200}),[H,Se]=p.useState({collapsed:!1,fraction:300/1200}),[ke,fe]=p.useState(null),[Te,Z]=p.useState(!1),[be,Re]=p.useState({width:0,height:0}),[Ie,et]=p.useState(null),[k,I]=p.useState("explorer"),[ne,Ce]=p.useState(null),[ve,ye]=p.useState(null),[Oe,Ze]=p.useState(!1),[Ge,Nt]=p.useState(!1),[Ee,Ae]=p.useState(!1),[Qe,Dt]=p.useState(!1),[rt,$t]=p.useState(null),[Ft,Ys]=p.useState(null),[Xs,ia]=p.useState(null),{notifyBanner:Js,dismissScope:er}=Q_(),yt=p.useMemo(()=>`workbench-console:${e}:${n}`,[e,n]),_t=y_(e,n),Ht=w_(e,n),fn=S_(e,n),tt=p.useCallback((q,le)=>{Js({title:q,intent:le?.intent??"info",duration:le?.duration??6e3,dismissible:!0,scope:yt,persistKey:yt})},[Js,yt]),Qt=p.useCallback(()=>{er(yt,"banner")},[er,yt]),mt=p.useCallback(q=>{if(!ce.current)return;const le=CC(q);_e({level:"error",message:le,timestamp:Kl(new Date),origin:"run"}),tt(le,{intent:"danger",duration:null})},[_e,tt]),It=c==="maximized",Lt=typeof navigator<"u"?/mac/i.test(navigator.platform):!1,es=p.useCallback(()=>{x()},[x]),En=!ge.collapsed,Bn=p.useCallback(async q=>{if(i)return{content:i.content[q]??"",etag:null};const le=await b.fetchQuery({queryKey:Tn.file(e,n,q),queryFn:({signal:Me})=>M0(e,n,q,Me)});if(!le)throw new Error("File could not be loaded.");return{content:$0(le),etag:le.etag??null}},[i,b,e,n]),De=V2({tree:B,initialActiveFileId:y,loadFile:Bn,persistence:W??void 0}),qn=b_(e,n),$n=p.useCallback(async q=>{if(N)return null;const le=await b.fetchQuery({queryKey:Tn.file(e,n,q),queryFn:({signal:Le})=>M0(e,n,q,Le)}),Me=$0(le);return De.replaceTabContent(q,{content:Me,etag:le.etag??null,metadata:{size:le.size??null,modifiedAt:le.mtime??null,contentType:le.content_type??De.tabs.find(Le=>Le.id===q)?.metadata?.contentType??null,etag:le.etag??null}}),le},[N,b,e,n,De]);Y2({isDirty:De.isDirty,shouldBypassNavigation:g});const Bs=p.useCallback(()=>{u()},[u]),Hn=p.useCallback(()=>{It?m():f()},[It,f,m]),ut=j!=="open",hn=p.useMemo(()=>De.tabs.filter(q=>q.status==="ready"&&q.content!==q.initialContent),[De.tabs]),Nr=De.tabs.some(q=>q.saving),Ns=!N&&hn.length>0;p.useEffect(()=>{typeof window>"u"||requestAnimationFrame(()=>{window.dispatchEvent(new Event("ade:workbench-layout"))})},[ge.collapsed,ge.fraction,H.collapsed,H.fraction,ut,ke,It]);const _r=p.useCallback(async q=>{if(N)return!1;const le=De.tabs.find(Me=>Me.id===q);if(!le||le.status!=="ready"||le.content===le.initialContent||le.saving)return!1;De.beginSavingTab(q);try{const Me=await qn.mutateAsync({path:le.id,content:le.content,etag:le.etag??void 0,create:!le.etag,parents:!0}),Le={size:Me.size??le.metadata?.size??null,modifiedAt:Me.mtime??le.metadata?.modifiedAt??null,contentType:le.metadata?.contentType??null,etag:Me.etag??le.metadata?.etag??null};return De.completeSavingTab(q,{etag:Me.etag??le.etag??null,metadata:Le}),tt(`Saved ${le.name}`,{intent:"success",duration:4e3}),!0}catch(Me){const Le=Me instanceof Xn&&Me.status===412,Ye=Le?new Error("Save blocked because this file changed on the server. Reloading latest version."):Me;if(De.failSavingTab(q,Ye instanceof Error?Ye.message:String(Ye)),Le)try{await $n(q),tt("File reloaded with the latest version from the server. Review before saving again.",{intent:"warning",duration:6e3})}catch(Rt){mt(Rt)}return mt(Ye),!1}},[N,De,qn,tt,$n,mt]),bo=p.useCallback(async q=>{const le=[];for(const Me of q)await _r(Me)&&le.push(Me);return le},[_r]),Vi=p.useCallback(q=>{_r(q)},[_r]),tr=p.useCallback(()=>{De.activeTab&&_r(De.activeTab.id)},[De.activeTab,_r]),Fa=p.useCallback(()=>{if(!Ns)return;const q=hn.map(le=>le.id);(async()=>{const le=await bo(q);le.length>1&&tt(`Saved ${le.length} files`,{intent:"success",duration:5e3})})()},[Ns,hn,bo,tt]);p.useEffect(()=>{const q=Ie;if(!q||typeof window>"u")return;const le=()=>{const Le=q.getBoundingClientRect(),Ye=Le.width,Rt=Le.height;Re({width:Ye,height:Rt}),window.dispatchEvent(new Event("ade:workbench-layout"))};if(le(),typeof window.ResizeObserver>"u")return window.addEventListener("resize",le),()=>window.removeEventListener("resize",le);const Me=new window.ResizeObserver(()=>le());return Me.observe(q),()=>Me.disconnect()},[Ie]);const Zn=ut?sC:rC,Mt=p.useMemo(()=>{const q=Math.max(0,be.height),Me=Math.max(0,q-Zn-Zl),Le=Math.min(Hf,Me);return{container:q,minPx:Le,maxPx:Me}},[be.height,Zn]),la=p.useCallback((q,le=Mt)=>Kn(q,le.minPx,le.maxPx),[Mt]),ts=p.useCallback(()=>{const q=R.current;return q&&"version"in q&&q.version===2&&typeof q.fraction=="number"?Kn(q.fraction,0,1):q&&"height"in q&&typeof q.height=="number"&&Mt.container>0?Kn(q.height/Mt.container,0,1):.25},[Mt.container]);p.useEffect(()=>{ke===null&&Mt.container>0&&fe(ts())},[ke,Mt.container,ts]);const Ct=p.useCallback(()=>Mt.container>0&&Mt.maxPx<Hf?(O("closed"),tt(B0,{intent:"warning",duration:1e4}),!1):(Qt(),O("open"),fe(q=>q!==null?Kn(q,0,1):ts()),!0),[Mt,O,tt,Qt,ts]),Fi=p.useCallback(()=>{O("closed"),Qt()},[O,Qt]);p.useEffect(()=>{if(Te)return;const q=R.current?.state;if(_||!q){Z(!0);return}(q==="open"||q==="closed")&&q!==j&&O(q),Z(!0)},[_,j,O,Te]),p.useEffect(()=>{!M||Ge||ke===null||M.set({version:2,fraction:Kn(ke,0,1),state:j})},[M,ke,j,Ge]),p.useEffect(()=>{if(!(j!=="open"||!Mt.container)){if(Mt.maxPx<Hf){O("closed"),tt(B0,{intent:"warning",duration:1e4});return}fe(q=>q===null?ts():Kn(q,0,1))}},[j,Mt,O,tt,ts]);const oa=p.useCallback((q,le)=>{if(q<=0)return{minPx:le.min,maxPx:le.max,minFrac:0,maxFrac:1};const Me=Math.min(le.min,q),Le=Math.min(le.max,q);return{minPx:Me,maxPx:Le,minFrac:Me/q,maxFrac:Le/q}},[]),Ut=Math.max(0,be.width-iC),zn=p.useMemo(()=>oa(Ut,tC),[Ut,oa]),qs=p.useMemo(()=>oa(Ut,nC),[Ut,oa]),Cr=p.useCallback((q,le)=>Kn(q,le.minFrac,le.maxFrac),[]);p.useEffect(()=>{Ut<=0||(Ne(q=>{if(q.collapsed)return q;const le=Cr(q.fraction,zn);return le===q.fraction?q:{...q,fraction:le}}),Se(q=>{if(q.collapsed)return q;const le=Cr(q.fraction,qs);return le===q.fraction?q:{...q,fraction:le}}))},[Ut,zn,qs,Cr]);const Qa=!H.collapsed&&!!De.activeTab,Ia=ge.collapsed?0:Kn(ge.fraction,zn.minFrac,zn.maxFrac)*Ut,nr=Qa?Kn(H.fraction,qs.minFrac,qs.maxFrac)*Ut:0;let $s=Ia,ns=nr;if(Ut>0){const q=(En?Zl:0)+(Qa?Zl:0),le=Ia+nr+q;if(le>Ut){const Me=le-Ut,Le=Math.min(Me,Math.max(0,nr-qs.minPx));ns=nr-Le;const Ye=Me-Le;if(Ye>0){const Rt=Math.min(Ye,Math.max(0,Ia-zn.minPx));$s=Ia-Rt}}}const Bt=Math.max(0,Mt.container),Nu=ke??(Bt>0?Kn(aC/Bt,0,1):.25),Qi=ut?0:Nu*Bt,ca=ut?0:Bt>0?la(Qi):0,Wa=Bt>0?Math.max(Zn,Bt-Zl-ca):Zn;p.useEffect(()=>{const q=De.activeTabId;if(!q){E(void 0);return}E(q)},[De.activeTabId,E]),p.useEffect(()=>{!rt||!B||ws(B,rt)&&(De.openFile(rt),E(rt),$t(null))},[rt,B,De,E]);const Ga=p.useCallback((q,le,Me=!1)=>{const Le=Me?{...q,force_rebuild:!0}:q;if(N||!B||D.isLoading||D.isError||V!==null||le.mode==="validation"&&C.isPending||!Ct())return null;const Ye=new Date,Rt=Ye.toISOString();A("terminal"),je(le.mode==="validation"?"Starting ADE run (validate-only)":"Starting ADE extraction"),le.mode==="validation"?ie(mn=>({...mn,status:"running",lastRunAt:Rt,error:null})):U(null);const pt=new AbortController;return ae.current?.abort(),ae.current=pt,he({kind:"run",startedAt:Rt,metadata:le}),(async()=>{let mn=null;try{for await(const pn of N_(n,Le,pt.signal)){if(Y({type:"EVENT",event:pn}),!ce.current)return;const Co=pn&&typeof pn=="object"&&pn.payload&&typeof pn.payload=="object"?pn.payload:{},ar=pn.type,tl=Co.scope??null;if(typeof ar=="string"&&ar.startsWith("build.")||ar==="console.line"&&tl==="build")continue;const ko=typeof ar=="string"&&ar.startsWith("run.");if(ko&&!mn&&(mn=pn.run_id??null),!!ko){if(ar==="run.queued"){const Dr=pn.id??null;mn=pn.run_id??Dr??mn}if(ar==="run.completed"){const Dr=Co,ks=Dr.status??"succeeded",To=Dr.failure,Ao=typeof To?.message=="string"?To.message.trim():null,Cu=typeof Dr.summary=="string"?Dr.summary.trim():null;tt(ks==="succeeded"?"ADE run completed successfully.":ks==="canceled"?"ADE run canceled.":Ao||Cu||"ADE run failed.",{intent:ks==="succeeded"?"success":ks==="canceled"?"info":"danger"});const gn=mn??pn.run_id??pn.id??null;if(gn)try{const ir=await oh(gn),nl=se.current.lastSequence,ha=ir.filter(Mn=>Mn&&typeof Mn=="object"&&typeof Mn.sequence=="number"&&Mn.sequence>nl);for(const Mn of ha)Y({type:"EVENT",event:Mn})}catch(ir){console.warn("Unable to hydrate run telemetry",ir)}if(le.mode==="extraction"&&gn){const ir=new Date,nl=ir.toISOString(),ha=Math.max(0,ir.getTime()-Ye.getTime());let Mn=null;try{Mn=await mo(gn)}catch(rn){console.warn("Unable to fetch run resource for download links",rn)}const ku=Mn?Fb(Mn)??void 0:void 0,Tu=Mn?Qb(Mn)??void 0:void 0;U({runId:gn,status:ks,outputsBase:ku,logsUrl:Tu,documentName:le.documentName,sheetNames:le.sheetNames??[],outputs:[],outputsLoaded:!1,summary:null,summaryLoaded:!1,summaryError:null,telemetry:null,telemetryLoaded:!1,telemetryError:null,error:null,startedAt:Rt,completedAt:nl,durationMs:ha}),_e({level:ks==="succeeded"?"success":ks==="canceled"?"warning":"error",message:ha>0?`Run ${ks} in ${xC(ha)}. Open Run summary for details.`:`Run ${ks}. Open Run summary for details.`,timestamp:Kl(ir),origin:"run"});try{const rn=await Zb(Mn??gn),vn=(Array.isArray(rn.files)?rn.files:[]).map(Ts=>{const Do=Ts.path;return{name:Ts.name??Do??"output",path:Do,byte_size:Ts.byte_size??0,download_url:Ts.download_url??void 0}});U(Ts=>Ts&&Ts.runId===gn?{...Ts,outputs:vn,outputsLoaded:!0}:Ts)}catch(rn){const xn=rn instanceof Error?rn.message:"Unable to load run outputs.";U(vn=>vn&&vn.runId===gn?{...vn,outputsLoaded:!0,error:xn}:vn)}try{const rn=await Vb(gn);U(xn=>xn&&xn.runId===gn?{...xn,summary:rn,summaryLoaded:!0}:xn)}catch(rn){const xn=rn instanceof Error?rn.message:"Unable to load run summary.";U(vn=>vn&&vn.runId===gn?{...vn,summaryLoaded:!0,summaryError:xn}:vn)}try{const rn=await oh(gn);U(xn=>xn&&xn.runId===gn?{...xn,telemetry:rn,telemetryLoaded:!0}:xn)}catch(rn){const xn=rn instanceof Error?rn.message:"Unable to load run telemetry.";U(vn=>vn&&vn.runId===gn?{...vn,telemetryLoaded:!0,telemetryError:xn}:vn)}}}}}}catch(pn){if(pn instanceof DOMException&&pn.name==="AbortError")return;mt(pn)}finally{ae.current===pt&&(ae.current=null),ce.current&&he(null)}})(),Rt},[N,B,D.isLoading,D.isError,V,C.isPending,Ct,A,je,ie,U,ae,he,n,_e,tt,mt]),Vn=p.useCallback(()=>{const q=Ga({validate_only:!0},{mode:"validation"},!1);q&&C.mutate(void 0,{onSuccess(le){const Le=(le.issues??[]).map(Ye=>({level:"error",message:Ye.message,path:Ye.path}));ie({status:"success",messages:Le,lastRunAt:q,error:null,digest:le.content_digest??null})},onError(le){const Me=le instanceof Error?le.message:"Validation failed.";ie({status:"error",messages:[{level:"error",message:Me}],lastRunAt:q,error:Me,digest:null})}})},[Ga,C,ie]),Ii=p.useCallback(q=>{const le=Array.from(new Set((q.sheetNames??[]).filter(Boolean)));Ga({input_document_id:q.documentId,input_sheet_names:le.length?le:void 0,input_sheet_name:le.length===1?le[0]:void 0},{mode:"extraction",documentId:q.documentId,documentName:q.documentName,sheetNames:le},Oe)&&(me(!1),Ze(!1))},[Ga,me,Ze,Oe]);p.useEffect(()=>{if(typeof window>"u")return;const q=le=>{if(!(Lt?le.metaKey:le.ctrlKey)||le.altKey||le.key.toLowerCase()!=="s")return;const Le=le.target;if(Le){const Ye=Le.tagName;if(Ye==="INPUT"||Ye==="TEXTAREA"||Le.isContentEditable)return}Ns&&(le.preventDefault(),tr())};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[Lt,Ns,tr]);const Wi=V?.metadata,Ka=V!==null,sr=V!==null,yo=Ka&&Wi?.mode==="extraction",wo=Ka&&Wi?.mode!=="extraction",kr=ee.status==="running"||C.isPending||wo,_u=!N&&!!B&&!D.isLoading&&!D.isError&&!sr&&!C.isPending&&ee.status!=="running",So=yo,ua=!N&&!!B&&!D.isLoading&&!D.isError&&!sr,Hs=!N&&!D.isLoading&&!D.isError,Gi=Hs&&!_t.isPending,Ki=Hs&&!Ht.isPending,Tr=Hs&&!fn.isPending,_s=p.useCallback(q=>{I(q),q==="explorer"&&Ne(le=>({...le,collapsed:!1}))},[]),Pi=p.useCallback(q=>{q.preventDefault();const le=q.currentTarget.getBoundingClientRect();Ce({x:le.right+8,y:le.top})},[]),Yi=p.useCallback(()=>Ce(null),[]),Zs=p.useCallback(()=>{ut?Ct():Fi()},[ut,Ct,Fi]),Ar=p.useCallback(()=>{Y({type:"CLEAR_CONSOLE"})},[Y]),jo=p.useCallback(()=>{xe&&(Ct(),A("runSummary"))},[xe,Ct,A]),Xi=p.useCallback(()=>{Ne(q=>({...q,collapsed:!q.collapsed}))},[]),Eo=p.useCallback(()=>{Ne(q=>({...q,collapsed:!0}))},[]),da=p.useCallback(()=>{Se(q=>({...q,collapsed:!q.collapsed}))},[]),Cs=p.useCallback(async(q,le)=>{const Me=le.trim();if(!Me)throw new Error("Enter a file name.");if(Me.includes(".."))throw new Error("File name cannot include '..'.");if(!Hs)throw new Error("Files are still loading.");const Le=q.replace(/\/+$/,""),Ye=Me.replace(/^\/+/,"").replace(/\/+/g,"/"),pt=(Le?`${Le}/${Ye}`:Ye).replace(/\/+/g,"/");if(!pt||pt.endsWith("/"))throw new Error("Enter a valid file name.");if(B&&ws(B,pt))throw new Error("A file or folder with that name already exists.");Ae(!0);try{await qn.mutateAsync({path:pt,content:"",parents:!0,create:!0}),$t(pt),await D.refetch(),tt(`Created ${pt}`,{intent:"success",duration:4e3})}catch(mn){throw mt(mn),mn instanceof Error?mn:new Error("Unable to create file.")}finally{Ae(!1)}},[Hs,B,qn,D,tt,mt]),Ji=p.useCallback(async(q,le)=>{const Me=le.trim();if(!Me)throw new Error("Enter a folder name.");if(Me.includes(".."))throw new Error("Folder name cannot include '..'.");if(!Ki)throw new Error("Files are still loading.");const Le=q.replace(/\/+$/,""),Ye=Me.replace(/^\/+/,"").replace(/\/+/g,"/"),pt=(Le?`${Le}/${Ye}`:Ye).replace(/\/+/g,"/").replace(/\/$/,"");if(!pt)throw new Error("Enter a valid folder name.");if(B&&ws(B,pt))throw new Error("A file or folder with that name already exists.");Dt(!0);try{await Ht.mutateAsync({path:pt}),await D.refetch(),tt(`Folder ready: ${pt}`,{intent:"success",duration:4e3})}catch(mn){throw mt(mn),mn instanceof Error?mn:new Error("Unable to create folder.")}finally{Dt(!1)}},[Ki,B,Ht,D,tt,mt]),fa=p.useCallback(async q=>{if(!Gi)throw new Error("Files are still loading.");const le=B?ws(B,q):null;if(!B||!le)throw new Error("File not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete ${q}? This cannot be undone.`)){Ae(!1),Ys(q);try{await _t.mutateAsync({path:q,etag:le.metadata?.etag}),De.closeTab(q),$t(Le=>Le===q?null:Le),await D.refetch(),tt(`Deleted ${q}`,{intent:"info",duration:4e3})}catch(Le){const Ye=Le instanceof Xn&&Le.status===428?"Delete blocked: missing latest file version. Reload the explorer and try again.":Le instanceof Error?Le.message:"Unable to delete file.";throw mt(Ye),new Error(Ye)}finally{Ys(Le=>Le===q?null:Le)}}},[Gi,B,_t,De,D,tt,mt,Ys]),Vs=p.useCallback(async q=>{if(!Tr)throw new Error("Files are still loading.");const le=B?ws(B,q):null;if(!B||!le||le.kind!=="folder")throw new Error("Folder not found in workspace.");if(!(typeof window<"u")||window.confirm(`Delete folder ${q} and all contents? This cannot be undone.`)){ia(q);try{await fn.mutateAsync({path:q,recursive:!0}),$t(Le=>Le===q?null:Le),De.closeTab(q),await D.refetch(),tt(`Deleted folder ${q}`,{intent:"info",duration:4e3})}catch(Le){const Ye=Le instanceof Error?Le.message:"Unable to delete folder.";throw mt(Ye),new Error(Ye)}finally{ia(Le=>Le===q?null:Le)}}},[Tr,B,fn,De,D,tt,mt,ia]),el=p.useMemo(()=>{const q=o.jsx("span",{className:"inline-block h-4 w-4 opacity-0"}),le=uC.map(Me=>({id:`theme-${Me.value}`,label:`${Me.label} theme`,icon:F.preference===Me.value?o.jsx(Hc,{}):q,onSelect:()=>F.setPreference(Me.value)}));return le.push({id:"toggle-explorer",label:ge.collapsed?"Show Explorer":"Hide Explorer",dividerAbove:!0,icon:ge.collapsed?q:o.jsx(Hc,{}),onSelect:()=>Ne(Me=>({...Me,collapsed:!Me.collapsed}))},{id:"toggle-inspector",label:H.collapsed?"Show Inspector":"Hide Inspector",icon:H.collapsed?q:o.jsx(Hc,{}),onSelect:()=>Se(Me=>({...Me,collapsed:!Me.collapsed}))},{id:"toggle-console",label:ut?"Show Console":"Hide Console",icon:ut?q:o.jsx(Hc,{}),onSelect:Zs}),le},[F,ge.collapsed,H.collapsed,ut,Zs]);p.useEffect(()=>{if(typeof document>"u"||!It)return;const q=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=q||""}},[It]);const Pa=TC(e),No=Lt?"S":"Ctrl+S",Ya=p.useMemo(()=>{const q=!ua;return[{id:"test-default",label:"Test",disabled:q,onSelect:()=>{Ze(!1),me(!0),ye(null)}},{id:"test-force",label:"Force build and test",disabled:q,onSelect:()=>{Ze(!0),me(!0),ye(null)}}]},[ua,Ze,me,ye]);if(!i&&D.isLoading)return o.jsx(At,{variant:"loading",title:"Loading configuration files",description:"Fetching workspace configuration files for the workbench."});if(!i&&D.isError)return o.jsx(At,{variant:"error",title:"Unable to load configuration files",description:"Try reloading the page or check your connection."});if(!B)return o.jsx(At,{variant:"empty",title:"No configuration files found",description:"Create files in the ADE configuration package to begin editing."});const Xa=It?z==="dark"?"bg-[#0f111a] text-white":"bg-slate-50 text-slate-900":z==="dark"?"bg-transparent text-white":"bg-transparent text-slate-900",_o=z==="dark"?"#1b1f27":"#ffffff",Dn=z==="dark"?"#f5f6fb":"#0f172a",rr=It?we("fixed inset-0 z-[90] flex flex-col",z==="dark"?"bg-[#0f111a] text-white":"bg-white text-slate-900"):we("flex w-full min-h-0 min-w-0 flex-1 flex-col overflow-hidden",z==="dark"?"bg-[#101322] text-white":"bg-white text-slate-900");return o.jsxs("div",{className:we("flex h-full min-h-0 w-full min-w-0 flex-1 flex-col overflow-hidden",Xa),children:[It?o.jsx("div",{className:"fixed inset-0 z-40 bg-slate-900/60"}):null,o.jsxs("div",{className:rr,children:[o.jsx(hC,{configName:r,workspaceLabel:Pa,validationLabel:re,canSaveFiles:Ns,isSavingFiles:Nr,onSaveFile:tr,saveShortcutLabel:No,onOpenTestMenu:q=>ye(q),canRunValidation:_u,isRunningValidation:kr,onRunValidation:Vn,canRunExtraction:ua,isRunningExtraction:So,onRunExtraction:q=>{ua&&(Ze(q),me(!0))},explorerVisible:En,onToggleExplorer:Xi,consoleOpen:!ut,onToggleConsole:Zs,inspectorCollapsed:H.collapsed,onToggleInspector:da,appearance:z,windowState:c,onMinimizeWindow:Bs,onToggleMaximize:Hn,onCloseWindow:es}),o.jsxs("div",{ref:et,className:"flex min-h-0 min-w-0 flex-1 overflow-hidden",children:[o.jsx(Zj,{activeView:k,onSelectView:_s,onOpenSettings:Pi,appearance:z}),En?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex min-h-0",style:{width:$s},children:k==="explorer"&&De.tree?o.jsx(w2,{width:$s,tree:De.tree,activeFileId:De.activeTab?.id??"",openFileIds:De.tabs.map(q=>q.id),onSelectFile:q=>{De.openFile(q),E(q)},theme:z,canCreateFile:Hs,canCreateFolder:Ki,isCreatingEntry:Ee||Qe,onCreateFile:Cs,onCreateFolder:Ji,canDeleteFile:Gi,canDeleteFolder:Tr,deletingFilePath:Ft,deletingFolderPath:Xs,onDeleteFile:fa,onDeleteFolder:Vs,onCloseFile:De.closeTab,onCloseOtherFiles:De.closeOtherTabs,onCloseTabsToRight:De.closeTabsToRight,onCloseAllFiles:De.closeAllTabs,onHide:Eo}):o.jsx(fC,{width:$s,view:k})}),o.jsx(Uf,{orientation:"vertical",onPointerDown:q=>{const le=q.clientX,Me=$s;$f(q,{cursor:"col-resize",onMove:Le=>{const Ye=Le.clientX-le,Rt=Kn(Me+Ye,zn.minPx,zn.maxPx);Ne(pt=>pt.collapsed||Ut<=0?pt:{...pt,fraction:Cr(Rt/Ut,zn)})}})}})]}):null,o.jsx("div",{className:"flex min-h-0 min-w-0 flex-1 flex-col",style:{backgroundColor:_o,color:Dn},children:ut?o.jsx(w0,{tabs:De.tabs,activeTabId:De.activeTab?.id??"",onSelectTab:q=>{De.selectTab(q),E(q)},onCloseTab:De.closeTab,onCloseOtherTabs:De.closeOtherTabs,onCloseTabsToRight:De.closeTabsToRight,onCloseAllTabs:De.closeAllTabs,onContentChange:De.updateContent,onSaveTab:Vi,onSaveAllTabs:Fa,onMoveTab:De.moveTab,onPinTab:De.pinTab,onUnpinTab:De.unpinTab,onSelectRecentTab:De.selectRecentTab,editorTheme:F.resolvedTheme,menuAppearance:z,canSaveFiles:Ns,minHeight:Zn}):o.jsxs("div",{className:"grid min-h-0 min-w-0 flex-1",style:{height:Bt>0?`${Bt}px`:void 0,gridTemplateRows:`${Math.max(Zn,Wa)}px ${Zl}px ${Math.max(0,ca)}px`},children:[o.jsx(w0,{tabs:De.tabs,activeTabId:De.activeTab?.id??"",onSelectTab:q=>{De.selectTab(q),E(q)},onCloseTab:De.closeTab,onCloseOtherTabs:De.closeOtherTabs,onCloseTabsToRight:De.closeTabsToRight,onCloseAllTabs:De.closeAllTabs,onContentChange:De.updateContent,onSaveTab:Vi,onSaveAllTabs:Fa,onMoveTab:De.moveTab,onPinTab:De.pinTab,onUnpinTab:De.unpinTab,onSelectRecentTab:De.selectRecentTab,editorTheme:F.resolvedTheme,menuAppearance:z,canSaveFiles:Ns,minHeight:Zn}),o.jsx(Uf,{orientation:"horizontal",onPointerDown:q=>{Nt(!0);const le=q.clientY,Me=ca;$f(q,{cursor:"row-resize",onMove:Le=>{if(Mt.maxPx<=0||Bt<=0)return;const Ye=le-Le.clientY,Rt=Kn(Me+Ye,Mt.minPx,Mt.maxPx);fe(Kn(Rt/Bt,0,1))},onEnd:()=>{Nt(!1)}})}}),o.jsx(Pj,{height:Math.max(0,ca),consoleLines:Q,validation:ee,activePane:w,onPaneChange:A,latestRun:xe,onShowRunDetails:jo,onClearConsole:Ar,runStatus:J.status})]})}),Qa?o.jsxs(o.Fragment,{children:[o.jsx(Uf,{orientation:"vertical",onPointerDown:q=>{const le=q.clientX,Me=ns;$f(q,{cursor:"col-resize",onMove:Le=>{const Ye=le-Le.clientX,Rt=Kn(Me+Ye,qs.minPx,qs.maxPx);Se(pt=>pt.collapsed||Ut<=0?pt:{...pt,fraction:Cr(Rt/Ut,qs)})}})}}),o.jsx(O2,{width:ns,file:De.activeTab??null})]}):null]})]}),P?o.jsx(mC,{open:P,workspaceId:e,onClose:()=>{me(!1),Ze(!1)},onRun:Ii}):null,o.jsx(ro,{open:!!ve,position:ve,onClose:()=>ye(null),items:Ya,appearance:z}),o.jsx(ro,{open:!!ne,position:ne,onClose:Yi,items:el,appearance:z})]})}function fC({width:e,view:n}){const r=dC[n]||"Coming soon";return o.jsx("div",{className:"flex h-full min-h-0 flex-col items-center justify-center border-r border-[#111111] bg-[#1e1e1e] px-4 text-center text-[11px] uppercase tracking-wide text-slate-400",style:{width:e},"aria-live":"polite",children:r})}function Hc(){return o.jsx("svg",{className:"h-4 w-4 text-[#4fc1ff]",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M4 8l3 3 5-6",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}function hC({configName:e,workspaceLabel:n,validationLabel:r,canSaveFiles:i,isSavingFiles:c,onSaveFile:u,saveShortcutLabel:f,onOpenTestMenu:m,canRunValidation:x,isRunningValidation:g,onRunValidation:b,canRunExtraction:y,isRunningExtraction:w,onRunExtraction:j,explorerVisible:_,onToggleExplorer:E,consoleOpen:A,onToggleConsole:O,inspectorCollapsed:N,onToggleInspector:D,appearance:B,windowState:J,onMinimizeWindow:Y,onToggleMaximize:Q,onCloseWindow:se}){const ee=B==="dark",ie=ee?"border-white/10 bg-[#151821] text-white":"border-slate-200 bg-white text-slate-900",ae=ee?"text-white/60":"text-slate-500",ce=ee?"bg-emerald-400/20 text-emerald-50 hover:bg-emerald-400/30 disabled:bg-white/10 disabled:text-white/30":"bg-emerald-500 text-white hover:bg-emerald-400 disabled:bg-slate-200 disabled:text-slate-500",V=ee?"bg-brand-500 text-white hover:bg-brand-400 disabled:bg-white/20 disabled:text-white/40":"bg-brand-600 text-white hover:bg-brand-500 disabled:bg-slate-200 disabled:text-slate-500",he=J==="maximized";return o.jsxs("div",{className:we("flex items-center justify-between border-b px-4 py-2",ie),children:[o.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[o.jsx(vC,{}),o.jsxs("div",{className:"min-w-0 leading-tight",children:[o.jsx("div",{className:we("text-[10px] font-semibold uppercase tracking-[0.35em]",ae),children:"Config Workbench"}),o.jsx("div",{className:"truncate text-sm font-semibold",title:e,children:e}),o.jsxs("div",{className:we("text-[11px]",ae),title:n,children:["Workspace  ",n]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[r?o.jsx("span",{className:we("text-xs",ae),children:r}):null,o.jsxs("button",{type:"button",onClick:u,disabled:!i,className:we("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",ce),title:`Save (${f})`,children:[c?o.jsx(Zf,{}):o.jsx(_C,{}),c?"Saving":"Save"]}),o.jsxs("button",{type:"button",onClick:b,disabled:!x,className:we("inline-flex items-center gap-2 rounded-md px-3 py-1.5 text-sm font-semibold shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0",V),children:[g?o.jsx(Zf,{}):o.jsx(q0,{}),g?"Running":"Run validation"]}),o.jsx(n_,{label:w?"Running":"Test run",icon:w?o.jsx(Zf,{}):o.jsx(q0,{}),disabled:!y,isLoading:w,title:"Run test run",primaryClassName:we(V,"rounded-r-none focus-visible:ring-offset-0"),menuClassName:we(V,"rounded-l-none px-2",ee?"border-white/20":"border-slate-300"),menuAriaLabel:"Open test options",onPrimaryClick:()=>j(!1),onOpenMenu:xe=>m(xe),onContextMenu:xe=>{xe.preventDefault(),m({x:xe.clientX,y:xe.clientY})}}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ki,{ariaLabel:_?"Hide explorer":"Show explorer",onClick:E,appearance:B,active:_,icon:o.jsx(bC,{active:_})}),o.jsx(ki,{ariaLabel:N?"Show inspector":"Hide inspector",onClick:D,appearance:B,active:!N,icon:o.jsx(wC,{})}),o.jsx(ki,{ariaLabel:A?"Hide console":"Show console",onClick:O,appearance:B,active:A,icon:o.jsx(yC,{})})]}),o.jsxs("div",{className:we("flex items-center gap-2 border-l pl-3",B==="dark"?"border-white/20":"border-slate-200/70"),children:[o.jsx(ki,{ariaLabel:"Minimize workbench",onClick:Y,appearance:B,icon:o.jsx(EC,{})}),o.jsx(ki,{ariaLabel:he?"Restore workbench":"Maximize workbench",onClick:Q,appearance:B,active:he,icon:he?o.jsx(jC,{}):o.jsx(SC,{})}),o.jsx(ki,{ariaLabel:"Close workbench",onClick:se,appearance:B,icon:o.jsx(NC,{})})]})]})]})}function mC({open:e,workspaceId:n,onClose:r,onRun:i}){const c=p.useRef(null),u=Sn({queryKey:["builder-documents",n],queryFn:({signal:D})=>pC(n,D),staleTime:6e4}),f=p.useMemo(()=>u.data??[],[u.data]),[m,x]=p.useState("");p.useEffect(()=>{if(!f.length){x("");return}x(D=>D&&f.some(B=>B.id===D)?D:f[0]?.id??"")},[f]);const g=f.find(D=>D.id===m)??null,b=Sn({queryKey:["builder-document-sheets",n,m],queryFn:({signal:D})=>Ib(n,m,D),enabled:!!m,staleTime:6e4}),y=p.useMemo(()=>b.data??[],[b.data]),[w,j]=p.useState([]);p.useEffect(()=>{if(!y.length){j([]);return}j(D=>D.filter(B=>y.some(J=>J.name===B)))},[y]);const _=p.useMemo(()=>Array.from(new Set(w.filter(D=>y.some(B=>B.name===D)))),[w,y]),E=p.useCallback(D=>{j(B=>B.includes(D)?B.filter(J=>J!==D):[...B,D])},[]);if(!e)return null;const A=!g||u.isLoading||u.isError,O=y.length>0,N=o.jsx("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-slate-900/60 px-4",children:o.jsxs("div",{ref:c,role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl border border-slate-200 bg-white p-6 shadow-2xl",children:[o.jsxs("header",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Select a document"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Choose a workspace document and optional worksheet before running a test."})]}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:r,children:"Close"})]}),u.isError?o.jsx(jt,{tone:"danger",children:"Unable to load documents. Try again later."}):u.isLoading?o.jsx("p",{className:"text-sm text-slate-500",children:"Loading documents"}):f.length===0?o.jsx("p",{className:"text-sm text-slate-500",children:"Upload a document in the workspace to run the extractor."}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:"builder-run-document-select",children:"Document"}),o.jsx(Ba,{id:"builder-run-document-select",value:m,onChange:D=>x(D.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm",children:f.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))}),g?o.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",gC(g.created_at)," "," ",(g.byte_size??0).toLocaleString()," bytes"]}):null]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheet"}),b.isLoading?o.jsx("p",{className:"text-sm text-slate-500",children:"Loading worksheets"}):b.isError?o.jsx(jt,{tone:"warning",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qe,{variant:"secondary",size:"sm",onClick:()=>b.refetch(),disabled:b.isFetching,children:"Retry loading"}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>j([]),children:"Use all worksheets"})]})]})}):O?o.jsxs("div",{className:"space-y-3 rounded-lg border border-slate-200 p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Worksheets"}),o.jsx("p",{className:"text-xs text-slate-500",children:_.length===0?"All worksheets will be processed by default. Select specific sheets to narrow the run.":`${_.length.toLocaleString()} worksheet${_.length===1?"":"s"} selected.`})]}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>j([]),children:"Use all worksheets"})]}),o.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:y.map(D=>{const B=_.includes(D.name);return o.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:B,onChange:()=>E(D.name)}),o.jsxs("span",{className:"flex-1 truncate",children:[D.name,D.is_active?" (active)":""]})]},`${D.index}-${D.name}`)})})]}):o.jsx("p",{className:"text-sm text-slate-500",children:"This file will be ingested directly."})]})]}),o.jsxs("footer",{className:"mt-6 flex items-center justify-end gap-2",children:[o.jsx(qe,{variant:"ghost",onClick:r,children:"Cancel"}),o.jsx(qe,{onClick:()=>{g&&i({documentId:g.id,documentName:g.name,sheetNames:_.length>0?_:void 0})},disabled:A,children:"Start test run"})]})]})});return typeof document>"u"?null:jr.createPortal(N,document.body)}async function pC(e,n){const{data:r}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:{sort:"-created_at",page_size:50}},signal:n});return r?.items??[]}function gC(e){if(!e)return"unknown";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function ki({ariaLabel:e,onClick:n,icon:r,appearance:i,active:c=!1}){const u=i==="dark",f=u?"text-white/70 hover:text-white hover:bg-white/5 hover:border-white/20 focus-visible:ring-white/40":"text-slate-500 hover:text-slate-900 hover:bg-slate-100 hover:border-slate-300 focus-visible:ring-slate-400/40",m=u?"text-white border-white/30 bg-white/10":"text-slate-900 border-slate-300 bg-slate-200/70";return o.jsx("button",{type:"button","aria-label":e,onClick:n,className:we("flex h-7 w-7 items-center justify-center rounded-[4px] border border-transparent text-sm transition focus-visible:outline-none focus-visible:ring-2",f,c&&m),title:e,children:r})}function xC(e){if(e==null||!Number.isFinite(e)||e<0)return null;if(e<1e3)return`${Math.round(e)} ms`;if(e<6e4)return`${(e/1e3).toFixed(1)} s`;const n=Math.floor(e/6e4),r=Math.round(e%6e4/1e3);return`${n}m ${r}s`}function vC(){return o.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-[#4fc1ff] via-[#2d7dff] to-[#7c4dff] text-white shadow-lg shadow-[#10121f]",children:o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none",children:[o.jsx("rect",{x:"2",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("rect",{x:"9",y:"2",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("rect",{x:"2",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("rect",{x:"9",y:"9",width:"5",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"1.2"})]})})}function bC({active:e}){return o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:[o.jsx("rect",{x:"3",y:"4",width:"14",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6}),o.jsx("path",{d:"M7 4v12",stroke:"currentColor",strokeWidth:"1.4",opacity:e?1:.6})]})}function yC(){return o.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M3 10.5h10",stroke:"currentColor",strokeWidth:"1.2"})]})}function wC(){return o.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M10 3v10",stroke:"currentColor",strokeWidth:"1.2"})]})}function SC(){return o.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1.5",stroke:"currentColor",strokeWidth:"1.2"})})}function jC(){return o.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M6 4h6v6",stroke:"currentColor",strokeWidth:"1.2"})]})}function EC(){return o.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M4 11h8",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function NC(){return o.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M5 5l6 6M11 5l-6 6",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})})}function Zf(){return o.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[o.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"currentColor",strokeWidth:"2",opacity:"0.35"}),o.jsx("path",{d:"M20 12a8 8 0 0 0-8-8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function q0(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M4.5 3.5v9l7-4.5-7-4.5Z",fill:"currentColor"})})}function _C(){return o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M4 2.5h7.25L13.5 4.8v8.7H4z",stroke:"currentColor",strokeWidth:"1.3",strokeLinejoin:"round",fill:"none"}),o.jsx("path",{d:"M6 2.5v4h4v-4",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M6 11h4",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round"})]})}function CC(e){return e instanceof Xn?e.message:e instanceof DOMException&&e.name==="AbortError"?"Operation canceled.":e instanceof Error?e.message:String(e)}function kC(e){if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?e:n.toLocaleString()}function TC(e){return e.length<=12?e:`${e.slice(0,6)}${e.slice(-4)}`}function $0(e){if(e.encoding==="base64"){if(typeof atob=="function")return atob(e.content);const n=globalThis.Buffer;if(n)return n.from(e.content,"base64").toString("utf-8")}return e.content}function AC(e){return`ade.ui.workspace.${e}.workbench.returnPath`}const iy=p.createContext(null);function ly(){const e=p.useContext(iy);if(!e)throw new Error("useWorkbenchWindow must be used within a WorkbenchWindowProvider");return e}function DC({workspaceId:e,children:n}){const r=An(),i=Ss(),[c,u]=p.useState(null),[f,m]=p.useState("restored"),x=p.useRef(0),g=p.useRef(null),b=p.useRef(!1),y=p.useMemo(()=>sa(AC(e)),[e]),w=p.useMemo(()=>`/workspaces/${e}/config-builder`,[e]),j=p.useMemo(()=>UC(i.pathname,e),[i.pathname,e]),_=!!j;p.useEffect(()=>{y.get()||y.set(w)},[y,w]),p.useEffect(()=>{_||y.set(`${i.pathname}${i.search}${i.hash}`)},[_,i.pathname,i.search,i.hash,y]),p.useEffect(()=>{if(!c){g.current=null;return}const ie=g.current;if(_&&j===c.configId){if(ie==="dock"){g.current=null,m("minimized");return}ie&&(g.current=null);return}if(ie==="dock"){g.current=null;return}if(ie==="close"){g.current=null;return}u(null),m("restored"),g.current=null},[c,_,j,f]),p.useEffect(()=>{if(!c||!_||j!==c.configId)return;const ie=Z0(i.search);ie!==c.editorSearch&&u(ae=>!ae||ae.instanceId!==c.instanceId?ae:{...ae,editorSearch:ie})},[c,_,j,i.search]);const E=p.useCallback(()=>y.get()??w,[y,w]),A=p.useCallback(ie=>{u(ae=>{if(!ae)return ae;const ce=new URLSearchParams(ae.editorSearch),V=typeof ie=="function"?ie(new URLSearchParams(ce)):ie,xe=qb(V).toString();return xe===ae.editorSearch?ae:{...ae,editorSearch:xe}})},[]),O=p.useCallback(ie=>{const ae=Z0(ie.editorSearch??i.search);let ce=f==="minimized";u(V=>{if(V&&V.workspaceId===ie.workspaceId&&V.configId===ie.configId){const he=ie.seed??V.seed,xe=ie.editorSearch!==void 0?ae:V.editorSearch;return V.configName===ie.configName&&V.seed===he&&V.editorSearch===xe?V:{...V,configName:ie.configName,seed:he,editorSearch:xe}}return ce=!0,x.current+=1,{...ie,editorSearch:ae,instanceId:`${ie.workspaceId}:${ie.configId}:${x.current}`}}),ce&&m("restored")},[i.search,f]),N=p.useCallback(()=>{c&&(u(null),m("restored"),g.current="close",r(E()))},[c,r,E]),D=p.useCallback(()=>{c&&(b.current=!0,m("minimized"),g.current="dock",r(E()))},[c,r,E]),B=p.useCallback(()=>{if(!c)return;m("restored");const ie=BC(c.workspaceId,c.configId,c.editorSearch);`${i.pathname}${i.search}`!==ie&&r(ie)},[c,r,i.pathname,i.search]),J=p.useCallback(()=>{c&&m("maximized")},[c]),Y=p.useCallback(()=>{const ie=b.current;return b.current=!1,ie},[]),Q=p.useMemo(()=>({session:c,windowState:f,openSession:O,closeSession:N,minimizeWindow:D,maximizeWindow:J,restoreWindow:B,shouldBypassUnsavedGuard:Y}),[c,f,O,N,D,J,B,Y]),se=!!c&&(!_||j!==c?.configId),ee=p.useMemo(()=>se&&c?{params:new URLSearchParams(c.editorSearch),setSearchParams:A}:null,[se,c,A]);return o.jsxs(iy.Provider,{value:Q,children:[n,o.jsx(F2,{value:ee,children:o.jsx(MC,{session:c,windowState:f,onClose:N,onMinimize:D,onMaximize:J,onRestore:B,shouldBypassUnsavedGuard:Y})}),c&&f==="minimized"?o.jsx(RC,{configName:c.configName,onRestore:B,onDismiss:N}):null]})}function MC({session:e,windowState:n,onClose:r,onMinimize:i,onMaximize:c,onRestore:u,shouldBypassUnsavedGuard:f}){return!e||n!=="maximized"?null:o.jsx("div",{className:"fixed inset-0 z-40 flex flex-col bg-slate-50",children:o.jsx(ay,{workspaceId:e.workspaceId,configId:e.configId,configName:e.configName,seed:e.seed,windowState:"maximized",onCloseWorkbench:r,onMinimizeWindow:i,onMaximizeWindow:c,onRestoreWindow:u,shouldBypassUnsavedGuard:f},e.instanceId)})}function RC({configName:e,onRestore:n,onDismiss:r}){return o.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 z-40",children:o.jsx("div",{className:"pointer-events-auto border-t border-slate-200 bg-white/95 shadow-[0_-12px_40px_rgba(15,23,42,0.15)] backdrop-blur",children:o.jsxs("div",{className:"relative mx-auto flex h-14 max-w-6xl items-center px-4 text-slate-900",children:[o.jsxs("button",{type:"button",onClick:n,className:"group flex min-w-0 flex-1 items-center gap-4 rounded-md px-3 py-1.5 text-left transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",children:[o.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-md border border-slate-200 bg-slate-50 text-brand-600 shadow-inner",children:o.jsx(zC,{})}),o.jsxs("span",{className:"flex min-w-0 flex-col leading-tight",children:[o.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-slate-400",children:"Config workbench"}),o.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",title:e,children:e})]}),o.jsx("span",{className:"ml-auto inline-flex items-center rounded border border-slate-200 bg-white px-2 py-0.5 text-[11px] font-medium text-slate-600 transition group-hover:border-slate-300 group-hover:bg-slate-50",children:"Restore"})]}),o.jsxs("div",{className:"ml-3 flex h-10 overflow-hidden rounded-md border border-slate-200 bg-white text-slate-500",children:[o.jsx(H0,{ariaLabel:"Restore minimized workbench",onClick:n,destructive:!1,children:o.jsx(OC,{})}),o.jsx(H0,{ariaLabel:"Close minimized workbench",onClick:r,destructive:!0,children:o.jsx(LC,{})})]})]})})})}function H0({ariaLabel:e,onClick:n,children:r,destructive:i=!1}){return o.jsx("button",{type:"button","aria-label":e,onClick:n,className:we("flex h-full w-12 items-center justify-center transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40",i?"text-rose-600 hover:bg-rose-50":"text-slate-500 hover:bg-slate-100 hover:text-slate-900"),children:r})}function zC(){return o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("rect",{x:"2",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("rect",{x:"9",y:"2",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("rect",{x:"2",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("rect",{x:"9",y:"9",width:"5",height:"5",stroke:"currentColor",strokeWidth:"1.2"})]})}function OC(){return o.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:o.jsx("path",{d:"M4.5 5.5h6v6h-6z",stroke:"currentColor",strokeWidth:"1.2"})})}function LC(){return o.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,children:[o.jsx("path",{d:"M4.5 11.5 11.5 4.5",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M11.5 11.5 4.5 4.5",stroke:"currentColor",strokeWidth:"1.2"})]})}function UC(e,n){const r=`/workspaces/${n}/config-builder/`;if(!e.startsWith(r))return null;const i=e.slice(r.length).split("/").filter(Boolean);if(i.length>=2&&i[1]==="editor")try{return decodeURIComponent(i[0])}catch{return i[0]}return null}function BC(e,n,r){const i=`/workspaces/${e}/config-builder/${encodeURIComponent(n)}/editor`;return r.length>0?`${i}?${r}`:i}function Z0(e){return e?e.startsWith("?")?e.slice(1):e:""}function oy({id:e,value:n,defaultValue:r="",placeholder:i="Search",ariaLabel:c,shortcutHint:u="K",shortcutKey:f="k",enableShortcut:m=!0,scopeLabel:x,leadingIcon:g,trailingIcon:b,className:y,variant:w="default",isLoading:j=!1,loadingLabel:_="Loading suggestions",filters:E,onSelectFilter:A,emptyState:O,onChange:N,onSubmit:D,onClear:B,onFocus:J,onBlur:Y,suggestions:Q=[],onSelectSuggestion:se,renderSuggestion:ee}){const ie=p.useId(),ae=e??ie,ce=`${ie}-suggestions`,V=p.useRef(null),he=n!==void 0,[xe,U]=p.useState(r),[P,me]=p.useState(!1),[je,_e]=p.useState(0),C=he?n??"":xe,W=Q.length>0,M=!!E?.length,R=P&&(W||j||!!O||M),F=P&&!W&&!j&&!!O,z=!!(B||!he),re=u||"K",ge=c??i;p.useEffect(()=>{he||U(r)},[r,he]),p.useEffect(()=>{_e(0)},[Q.length,C]),p.useEffect(()=>{if(!m||typeof window>"u")return;const Z=be=>{(be.metaKey||be.ctrlKey)&&be.key.toLowerCase()===f.toLowerCase()&&(be.preventDefault(),V.current?.focus())};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[m,f]);const Ne=Z=>{Z.preventDefault();const be=C.trim();!be&&!D||D?.(be)},H=Z=>{he||U(Z),N?.(Z)},Se=()=>{C&&(he||U(""),N?.(""),B?.(),V.current?.focus())},ke=Z=>{Z&&(se?.(Z),Z.action?.(),me(!1),V.current?.blur())},fe=Z=>{if(!R||!W){Z.key==="Escape"&&(me(!1),Z.currentTarget.blur());return}if(Z.key==="ArrowDown"){Z.preventDefault(),_e(be=>(be+1)%Q.length);return}if(Z.key==="ArrowUp"){Z.preventDefault(),_e(be=>(be-1+Q.length)%Q.length);return}if(Z.key==="Enter"){Z.preventDefault(),ke(Q[je]);return}Z.key==="Escape"&&(Z.preventDefault(),me(!1),Z.currentTarget.blur())},Te=w==="minimal"?"rounded-lg border border-slate-200 bg-white shadow-sm focus-within:border-brand-200":"rounded-xl border border-slate-200/70 bg-gradient-to-r from-white/95 via-slate-50/80 to-white/95 shadow-[0_20px_45px_-30px_rgba(15,23,42,0.65)] ring-1 ring-inset ring-white/80 transition focus-within:border-brand-200 focus-within:shadow-[0_25px_55px_-35px_rgba(79,70,229,0.55)] sm:rounded-2xl";return o.jsxs("div",{className:we("relative",y),children:[o.jsx("div",{className:we("group/search overflow-hidden",Te,R&&w==="default"&&"focus-within:shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)]"),children:o.jsxs("form",{className:"flex w-full items-center gap-3 px-4 py-2 text-sm text-slate-600 sm:px-5 sm:py-2.5",role:"search","aria-label":ge,onSubmit:Ne,children:[o.jsx("label",{htmlFor:ae,className:"sr-only",children:ge}),g??o.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/90 text-brand-600 shadow-inner shadow-white/60 ring-1 ring-inset ring-white/70 sm:h-10 sm:w-10 sm:rounded-xl",children:o.jsx($C,{className:"h-4 w-4 flex-shrink-0 text-brand-600"})}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[x?o.jsx("span",{className:"text-[0.6rem] font-semibold uppercase tracking-wide text-slate-400 sm:text-[0.65rem]",children:x}):null,o.jsx("input",{ref:V,id:ae,type:"search",value:C,onChange:Z=>H(Z.target.value),onFocus:()=>{me(!0),J?.(),W||_e(0)},onBlur:()=>{me(!1),Y?.()},onKeyDown:fe,placeholder:i,className:"w-full border-0 bg-transparent text-base font-medium text-slate-900 placeholder:text-slate-400 focus:outline-none","aria-expanded":R,"aria-controls":R?ce:void 0})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[z&&C?o.jsx("button",{type:"button",onClick:Se,"aria-label":"Clear search",className:"focus-ring inline-flex h-7 w-7 items-center justify-center rounded-full border border-transparent text-slate-400 hover:border-slate-200 hover:bg-white",children:o.jsx(HC,{className:"h-3.5 w-3.5"})}):null,j?o.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center","aria-live":"polite","aria-label":_,children:o.jsx(ZC,{className:"h-4 w-4 text-brand-600"})}):null,b,o.jsx("span",{className:"hidden items-center gap-1 rounded-full border border-slate-200/80 bg-white/80 px-2 py-1 text-xs font-semibold text-slate-500 shadow-inner shadow-white/60 md:inline-flex",children:re})]})]})}),R?o.jsxs("div",{className:"absolute left-0 right-0 top-full z-30 mt-2 overflow-hidden rounded-2xl border border-slate-200/70 bg-white/95 shadow-[0_35px_80px_-40px_rgba(79,70,229,0.55)] ring-1 ring-inset ring-white/80",children:[W?o.jsx("ul",{id:ce,role:"listbox","aria-label":"Search suggestions",className:"divide-y divide-slate-100/80",children:Q.map((Z,be)=>{const Re=be===je,Ie=ee?.({suggestion:Z,active:Re})??o.jsx(qC,{suggestion:Z,active:Re});return o.jsx("li",{children:o.jsx("button",{type:"button",role:"option","aria-selected":Re,onMouseEnter:()=>_e(be),onMouseDown:et=>et.preventDefault(),onClick:()=>ke(Z),className:we("flex w-full px-5 py-3 text-left transition",Re?"bg-brand-50/60":"hover:bg-slate-50/80"),children:Ie})},Z.id)})}):null,F?o.jsx("div",{className:"px-5 py-4 text-sm text-slate-500",role:"status",children:O}):null,M?o.jsx("div",{className:"border-t border-slate-100/80 bg-slate-50/60 px-4 py-2.5",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-slate-500",children:[o.jsx("span",{className:"uppercase tracking-wide text-[0.6rem] text-slate-400",children:"Filters:"}),E?.map(Z=>o.jsx("button",{type:"button",onMouseDown:be=>be.preventDefault(),onClick:()=>A?.(Z),className:we("focus-ring inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs font-semibold transition",Z.active?"border-brand-300 bg-brand-50 text-brand-700":"border-slate-200 bg-white text-slate-500 hover:border-slate-300"),children:Z.label},Z.id))]})}):null]}):null]})}function qC({suggestion:e,active:n}){return o.jsxs("div",{className:"flex w-full items-start gap-3",children:[e.icon?o.jsx("span",{className:"mt-0.5 text-slate-400",children:e.icon}):o.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-slate-200","aria-hidden":!0}),o.jsxs("span",{className:"flex min-w-0 flex-col",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.label}),e.shortcutHint?o.jsx("span",{className:"rounded border border-slate-200 bg-white px-1.5 py-0.5 text-[0.65rem] font-semibold uppercase tracking-wide text-slate-400",children:e.shortcutHint}):null]}),e.description?o.jsx("span",{className:we("text-xs",n?"text-brand-700":"text-slate-500"),children:e.description}):null]})]})}function $C({className:e="h-4 w-4 flex-shrink-0 text-slate-400"}){return o.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[o.jsx("circle",{cx:"9",cy:"9",r:"5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"m13.5 13.5 3 3",strokeLinecap:"round",strokeLinejoin:"round"})]})}function HC({className:e="h-3.5 w-3.5"}){return o.jsxs("svg",{className:e,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[o.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),o.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function ZC({className:e="h-4 w-4"}){return o.jsxs("svg",{className:we("animate-spin",e),viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-20",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),o.jsx("path",{className:"opacity-70",d:"M22 12a10 10 0 0 0-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function cy({brand:e,leading:n,actions:r,trailing:i,search:c,secondaryContent:u}){const f=!!c,m=c?{...c,className:we("order-last w-full lg:order-none lg:max-w-2xl lg:justify-self-center",c.className)}:void 0;return o.jsx("header",{className:"sticky top-0 z-40 border-b border-slate-200/70 bg-gradient-to-b from-white/95 via-slate-50/70 to-white/90 shadow-[0_12px_40px_-30px_rgba(15,23,42,0.8)] backdrop-blur supports-[backdrop-filter]:backdrop-blur-xl",children:o.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3 sm:px-6 lg:px-10",children:[o.jsxs("div",{className:we("flex min-h-[3.5rem] w-full flex-wrap items-center gap-3 sm:gap-4",f?"lg:grid lg:grid-cols-[auto_minmax(0,1fr)_auto] lg:items-center lg:gap-8":"justify-between"),children:[o.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-3 lg:flex-none",children:[e,n]}),m?o.jsx(oy,{...m}):null,o.jsxs("div",{className:"flex min-w-0 flex-1 items-center justify-end gap-2 sm:flex-none",children:[r,i]})]}),u?o.jsx("div",{className:"flex flex-wrap items-center gap-2",children:u}):null]})})}function uy({displayName:e,email:n,actions:r=[]}){const[i,c]=p.useState(!1),[u,f]=p.useState(!1),m=p.useRef(null),x=p.useRef(null),g=An(),b=p.useMemo(()=>VC(e||n),[e,n]),y=p.useCallback(()=>c(!1),[]);p.useEffect(()=>{if(!i)return;const _=A=>{const O=A.target;O&&(x.current?.contains(O)||m.current?.contains(O)||y())},E=A=>{A.key==="Escape"&&y()};return window.addEventListener("mousedown",_),window.addEventListener("touchstart",_,{passive:!0}),window.addEventListener("keydown",E),()=>{window.removeEventListener("mousedown",_),window.removeEventListener("touchstart",_),window.removeEventListener("keydown",E)}},[y,i]),p.useEffect(()=>{if(!i)return;x.current?.querySelector("button[data-menu-item]")?.focus({preventScroll:!0})},[i]);const w=p.useCallback(_=>{y(),_()},[y]),j=p.useCallback(async()=>{u||(y(),f(!0),g("/logout",{replace:!0}))},[y,u,g]);return o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:m,type:"button",className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-2.5 py-1.5 text-left text-sm font-semibold text-slate-700 shadow-sm transition hover:border-slate-300 hover:text-slate-900","aria-haspopup":"menu","aria-expanded":i,onClick:()=>c(_=>!_),children:[o.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-brand-600 text-sm font-semibold text-white shadow-sm",children:b}),o.jsxs("span",{className:"hidden min-w-0 flex-col sm:flex",children:[o.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:e}),o.jsx("span",{className:"truncate text-xs text-slate-400",children:n})]}),o.jsx(QC,{className:we("text-slate-400 transition-transform",i&&"rotate-180")})]}),i?o.jsxs("div",{ref:x,role:"menu",className:"absolute right-0 z-50 mt-2 w-72 origin-top-right rounded-xl border border-slate-200 bg-white p-2 text-sm shadow-xl",children:[o.jsxs("div",{className:"px-2 pb-2",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Signed in as"}),o.jsx("p",{className:"truncate text-xs text-slate-500",children:n})]}),o.jsx("ul",{className:"space-y-1",role:"none",children:r.map(_=>o.jsx("li",{role:"none",children:o.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm font-medium text-slate-700 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",onClick:()=>w(_.onSelect),children:[o.jsx("span",{className:"inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-slate-100 text-xs font-semibold text-slate-500",children:_.icon??_.label.charAt(0).toUpperCase()}),o.jsxs("span",{className:"flex min-w-0 flex-col",children:[o.jsx("span",{className:"truncate",children:_.label}),_.description?o.jsx("span",{className:"truncate text-xs font-normal text-slate-400",children:_.description}):null]})]})},_.id))}),o.jsx("div",{className:"mt-2 border-t border-slate-200 pt-2",children:o.jsxs("button",{type:"button",role:"menuitem","data-menu-item":!0,className:"focus-ring flex w-full items-center justify-between gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700 transition hover:border-brand-200 hover:text-brand-700 disabled:cursor-not-allowed disabled:opacity-60",onClick:j,disabled:u,children:[o.jsx("span",{children:"Sign out"}),u?o.jsx(FC,{}):null]})})]}):null]})}function VC(e){const n=e.split(" ").map(r=>r.trim()).filter(Boolean);return n.length===0?"":n.length===1?n[0].charAt(0).toUpperCase():`${n[0].charAt(0)}${n[n.length-1].charAt(0)}`.toUpperCase()}function FC(){return o.jsx("svg",{className:"h-4 w-4 animate-spin text-brand-600",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:o.jsx("path",{d:"M10 3a7 7 0 1 1-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})}function QC({className:e}){return o.jsx("svg",{className:we("h-4 w-4",e),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:o.jsx("path",{d:"M6 8l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"})})}function ch({to:e,replace:n,className:r,title:i,children:c,onClick:u}){const f=An();return o.jsx("a",{href:e,className:r,title:i,onClick:m=>{u?.(m),!(m.defaultPrevented||m.metaKey||m.ctrlKey||m.shiftKey||m.altKey)&&(m.preventDefault(),f(e,{replace:n}))},children:c})}function IC({to:e,end:n,className:r,children:i,title:c,onClick:u}){const{pathname:f}=Ss(),m=n?f===e:f===e||f.startsWith(`${e}/`),x=typeof r=="function"?r({isActive:m}):r,g=typeof i=="function"?i({isActive:m}):i;return o.jsx(ch,{to:e,className:x,title:c,onClick:u,children:g})}function po(e){return function({title:r,...i}){return o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":r?void 0:!0,role:r?"img":"presentation",...i,children:[r?o.jsx("title",{children:r}):null,o.jsx("path",{d:e})]})}}const WC=po("M7 3h7l7 7v11a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2ZM14 3v5a1 1 0 0 0 1 1h5"),GC=po("M5 6h14M5 12h14M5 18h8M7 4v4M12 10v4M15 16v4"),KC=po("M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM16.5 12a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5ZM10 7.5h4M7.5 10v4M15.5 10.5 12 14"),PC=po("M5 7h14M5 17h14M9 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm10 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-7-5h7m-9 0H5"),YC=po("M4 10.5 12 4l8 6.5V19a1 1 0 0 1-1 1h-4v-5h-6v5H5a1 1 0 0 1-1-1v-8.5Z"),dy=[{id:"documents",path:"documents",label:"Documents",icon:WC},{id:"runs",path:"runs",label:"Runs",icon:GC},{id:"config-builder",path:"config-builder",label:"Config Builder",icon:KC},{id:"settings",path:"settings",label:"Workspace Settings",icon:PC}],Oi=dy[0];function fy(e){return dy.map(n=>({id:n.id,label:n.label,href:`/workspaces/${e.id}/${n.path}`,icon:n.icon}))}const XC="4.25rem",JC="18.75rem";function ek({workspace:e,collapsed:n,onToggleCollapse:r,items:i,onGoToWorkspaces:c}){const u=i??fy(e),f=sk(e.name);return o.jsx("aside",{className:"hidden h-screen flex-shrink-0 bg-gradient-to-b from-slate-50/80 via-white to-slate-50/60 px-3 py-4 transition-[width] duration-200 ease-out lg:flex",style:{width:n?XC:JC},"aria-label":"Primary workspace navigation","aria-expanded":!n,children:o.jsxs("div",{className:we("flex h-full w-full flex-col rounded-[1.7rem] border border-white/70 bg-white/90 shadow-[0_25px_60px_-40px_rgba(15,23,42,0.7)] ring-1 ring-slate-100/60 backdrop-blur-sm",n?"items-center gap-4 px-2 py-5":"gap-5 px-4 py-6"),children:[o.jsxs("div",{className:we("flex w-full items-center gap-3 rounded-2xl border border-white/80 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-3 py-4 text-sm font-semibold text-slate-700 shadow-inner shadow-white/60",n?"flex-col text-center text-xs":""),children:[o.jsxs("button",{type:"button",onClick:c,className:"flex flex-1 items-center gap-3 text-left",children:[o.jsx("span",{className:we("inline-flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-brand-500 to-brand-700 text-sm font-bold uppercase text-white shadow-[0_10px_25px_-10px_rgba(79,70,229,0.7)]",n&&"h-9 w-9 text-xs"),children:f}),n?o.jsx("span",{className:"sr-only",children:e.name}):o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"truncate",children:e.name}),o.jsx("p",{className:"text-xs font-normal text-slate-500",children:"Switch workspace"})]})]}),o.jsx("button",{type:"button",onClick:r,className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-transparent text-slate-500 hover:border-brand-200 hover:text-brand-600","aria-label":n?"Expand navigation":"Collapse navigation",children:n?o.jsx(nk,{}):o.jsx(tk,{})})]}),o.jsx("nav",{className:"mt-4 flex-1 overflow-y-auto pr-1","aria-label":"Workspace sections",children:o.jsx(hy,{items:u,collapsed:n})})]})})}function hy({items:e,collapsed:n=!1,onNavigate:r,className:i,showHeading:c=!0}){return o.jsxs(o.Fragment,{children:[c&&!n?o.jsx("p",{className:"mb-3 px-1 text-[0.63rem] font-semibold uppercase tracking-[0.4em] text-slate-400/90",children:"Workspace"}):null,o.jsx("ul",{className:we("flex flex-col gap-1.5",n?"items-center":void 0,i),role:"list",children:e.map(u=>o.jsx("li",{className:"w-full",children:o.jsx(IC,{to:u.href,end:!0,title:n?u.label:void 0,onClick:r,className:({isActive:f})=>we("group relative flex w-full items-center rounded-2xl border border-transparent text-sm font-medium text-slate-600 transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white/80",n?"h-11 justify-center px-0":"gap-3 px-3 py-2.5",f?"border-brand-100 bg-white/90 text-slate-900 shadow-[0_12px_30px_-20px_rgba(79,70,229,0.55)]":"border-transparent hover:border-slate-200 hover:bg-white/70"),children:({isActive:f})=>o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":!0,className:we("absolute left-1.5 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-brand-400 to-brand-500 opacity-0 transition-opacity duration-150",n&&"hidden",f?"opacity-100":"group-hover:opacity-60")}),o.jsx("span",{"aria-hidden":!0,className:we("flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-slate-100 text-slate-500 transition",n&&"h-9 w-9 rounded-lg",f?"bg-brand-50 text-brand-600":"group-hover:bg-slate-100/80"),children:o.jsx(u.icon,{className:we("h-5 w-5 flex-shrink-0 transition-colors duration-150",f?"text-brand-600":"text-slate-500")})}),o.jsx("div",{className:we("flex min-w-0 flex-col text-left",n&&"sr-only"),children:o.jsx("span",{className:"truncate text-sm font-semibold text-slate-900",children:u.label})})]})})},u.id))})]})}function tk(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:o.jsx("path",{d:"M12.5 6 9 10l3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function nk(){return o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.7,children:o.jsx("path",{d:"m7.5 6 3.5 4-3.5 4",strokeLinecap:"round",strokeLinejoin:"round"})})}function sk(e){const n=e.trim().split(/\s+/);return n.length===0?"WS":n.slice(0,2).map(i=>i[0]??"").join("").toUpperCase()}async function rk(e={}){const{data:n}=await Ve.GET("/api/v1/system/safe-mode",{signal:e.signal}),r=n??{},i=!!r.enabled,c=typeof r.detail=="string"&&r.detail.trim().length>0?r.detail.trim():Os;return{enabled:i,detail:c}}async function ak(e,n={}){const{data:r}=await Ve.PUT("/api/v1/system/safe-mode",{body:e,signal:n.signal}),i=r??{};return{enabled:!!i.enabled,detail:typeof i.detail=="string"&&i.detail.trim().length>0?i.detail.trim():Os}}const Os="ADE safe mode enabled; skipping engine execution until ADE_SAFE_MODE is disabled.",uh=["system","safe-mode"];function qh(){const n=ht().getQueryData(uh);return Sn({queryKey:uh,queryFn:({signal:r})=>rk({signal:r}),initialData:n,staleTime:3e4,refetchInterval:6e4})}function ik(){const e=ht();return un({mutationFn:n=>ak(n),onSuccess:()=>{e.invalidateQueries({queryKey:uh})}})}const lk="K",ok="Ctrl+K";function my({macLabel:e=lk,windowsLabel:n=ok}={}){const[r,i]=p.useState(e);return p.useEffect(()=>{if(typeof window>"u")return;const c=window.navigator.platform??"",u=/Mac|iPhone|iPad|Macintosh/.test(c);i(u?e:n)},[e,n]),r}function ck(){return o.jsxs("section",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Workspace Overview"}),o.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: add workspace summary widgets."})]})}const uk=100;function $h({workspaceId:e,enabled:n=!0,page:r=1,pageSize:i=uk}){return Sn({queryKey:Tn.list(e,{page:r,pageSize:i}),queryFn:({signal:c})=>i_(e,{page:r,pageSize:i,signal:c}),enabled:n&&e.length>0,staleTime:15e3,placeholderData:c=>c})}function dk({workspaceId:e,configurationId:n,enabled:r=!0}){return Sn({queryKey:Tn.detail(e,n??""),queryFn:({signal:i})=>n?l_(e,n,i):Promise.resolve(null),enabled:r&&e.length>0&&!!n,staleTime:1e4})}function fk(e){const n=ht();return un({mutationFn:r=>p_(e,r),async onSuccess(){await n.invalidateQueries({queryKey:Tn.root(e)})}})}function py(e,n){return p.useMemo(()=>{if(!e||e.length===0)return[];const r=[],i=new Map;for(const c of e){const u=Array.isArray(c.items)?c.items:[];for(const f of u){const m=n(f),x=i.get(m);if(x===void 0){i.set(m,r.length),r.push(f);continue}r[x]=f}}return r},[e,n])}const gy={uploaded:"Uploaded",processing:"Processing",processed:"Processed",failed:"Failed",archived:"Archived"},hk=["-created_at","created_at","-last_run_at","last_run_at","-byte_size","byte_size","name","-name","status","-status","source","-source"],Pl="mine",Ma={mine:{label:"My uploads",description:"Documents you uploaded",uploader:"me"},team:{label:"All documents",description:"Everything in this workspace"},attention:{label:"Needs attention",description:"Failed or processing files",presetStatuses:["failed","processing"]},recent:{label:"Recently run",description:"Latest run activity",presetSort:"-last_run_at"}};function mk(e){return e&&Object.keys(Ma).includes(e)?e:Pl}function pk(e){if(!e)return new Set;const r=e.split(",").map(i=>i.trim()).filter(Boolean).filter(i=>["uploaded","processing","processed","failed","archived"].includes(i));return new Set(r)}function gk(e){return new Set(hk).has(e??"")?e:"-created_at"}const xy=new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}),Li={all:()=>["documents"],workspace:e=>[...Li.all(),e],list:(e,n,r)=>[...Li.workspace(e),"list",{sort:n,uploader:r}]},vy=50;function xk(){const{workspace:e}=ra(),n=Ha(),[r,i]=Uh(),c=p.useRef(i);p.useEffect(()=>{c.current=i},[i]);const u=mk(r.get("view")),[f,m]=p.useState(u),[x,g]=p.useState(()=>{const Ee=r.get("status");if(Ee)return pk(Ee);const Ae=Ma[u].presetStatuses??[];return new Set(Ae)}),[b,y]=p.useState(()=>{const Ee=r.get("sort");return Ee?gk(Ee):Ma[u].presetSort??"-created_at"}),[w,j]=p.useState(r.get("q")??""),[_,E]=p.useState(w.trim()),A=p.useMemo(()=>Array.from(x),[x]),N=Ma[f].uploader??null,D=p.useRef(null),[B,J]=p.useState(new Set),Y=p.useMemo(()=>new Set(B),[B]),Q=p.useMemo(()=>Array.from(Y),[Y]),se=Y.size,ee=bk(e.id),ie=yk(e.id),ae=qh(),ce=ae.data?.enabled??!1,V=ae.data?.detail??Os,he=ae.isPending,[xe,U]=p.useState(null),[P,me]=p.useState(null),[je,_e]=p.useState(null),C=ee.isPending,W=ie.isPending,M=vk(e.id,{sort:b,uploader:N}),{refetch:R}=M,F=p.useCallback(Ee=>Ee.id,[]),z=py(M.data?.pages,F),re=p.useMemo(()=>{const Ee=_.toLowerCase(),Ae=N==="me"?n.user.id:null,Qe=N==="me"?n.user.email??null:null;return z.filter(Dt=>{if(A.length>0&&!A.includes(Dt.status))return!1;if(N==="me"){const rt=Dt.uploader_id??Dt.uploader?.id??null,$t=Dt.uploader?.email??null;if(Ae&&rt&&rt!==Ae||!rt&&Qe&&$t&&$t!==Qe)return!1}return!(Ee&&!`${Dt.name??""} ${Dt.source??""}`.toLowerCase().includes(Ee))})},[_,z,n.user.email,n.user.id,A,N]),ge=M.isFetchingNextPage,Ne=M.isFetching&&!ge,H=re.length;p.useEffect(()=>{const Ee=r.get("q")??"";j(Qe=>Qe===Ee?Qe:Ee);const Ae=Ee.trim();E(Qe=>Qe===Ae?Qe:Ae)},[r]),p.useEffect(()=>{const Ee=new URLSearchParams;x.size>0&&Ee.set("status",Array.from(x).join(",")),b!=="-created_at"&&Ee.set("sort",b),_&&Ee.set("q",_),f!==Pl&&Ee.set("view",f),c.current(Ee,{replace:!0})},[x,b,_,f]),p.useEffect(()=>{const Ee=window.setTimeout(()=>E(w.trim()),250);return()=>window.clearTimeout(Ee)},[w]),p.useEffect(()=>{J(Ee=>{if(Ee.size===0)return Ee;const Ae=new Set,Qe=new Set(re.map(rt=>rt.id));let Dt=!1;for(const rt of Ee)Qe.has(rt)?Ae.add(rt):Dt=!0;return Dt?Ae:Ee})},[re]);const Se=p.useMemo(()=>{for(const Ee of re)if(Y.has(Ee.id))return Ee;return null},[re,Y]),ke=p.useCallback(Ee=>{const Ae=Ma[Ee];m(Ee),g(new Set(Ae.presetStatuses??[])),y(Ae.presetSort??"-created_at"),j(""),E("")},[]),fe=p.useCallback(Ee=>{g(Ae=>{const Qe=new Set(Ae);return Qe.has(Ee)?Qe.delete(Ee):Qe.add(Ee),Qe})},[]),Te=p.useCallback(()=>{g(new Set)},[]);p.useEffect(()=>{const Ee=Ae=>{if((Ae.metaKey||Ae.ctrlKey)&&Ae.key.toLowerCase()==="u"){Ae.preventDefault(),D.current?.click();return}(Ae.key==="Delete"||Ae.key==="Backspace")&&se>0&&(Ae.preventDefault(),ne())};return window.addEventListener("keydown",Ee),()=>window.removeEventListener("keydown",Ee)},[se]);const Z=p.useCallback(Ee=>gy[Ee]??Ee,[]),be=p.useCallback(Ee=>o.jsx(Fk,{document:Ee}),[]),Re=p.useCallback(()=>{D.current?.click()},[]),Ie=p.useCallback(async Ee=>{if(Ee.length){U(null);try{await ee.mutateAsync({files:Ee})}catch(Ae){const Qe=Ae instanceof Error?Ae.message:"Failed to upload documents.";U({tone:"error",message:Qe})}}},[ee]),et=async Ee=>{const Ae=Array.from(Ee.target.files??[]);await Ie(Ae),Ee.target.value=""},k=Ee=>{J(Ae=>{const Qe=new Set(Ae);return Qe.has(Ee)?Qe.delete(Ee):Qe.add(Ee),Qe})},I=()=>{J(Ee=>{if(re.length===0)return new Set;const Ae=re.map(Qe=>Qe.id);return Ee.size===re.length&&Ae.every(Qe=>Ee.has(Qe))?new Set:new Set(Ae)})},ne=p.useCallback(async()=>{const Ee=Q;if(Ee.length){U(null);try{await ie.mutateAsync({documentIds:Ee}),J(new Set)}catch(Ae){const Qe=Ae instanceof Error?Ae.message:"Failed to delete documents.";U({tone:"error",message:Qe})}}},[ie,Q]),Ce=p.useCallback(async Ee=>{U(null);try{await ie.mutateAsync({documentIds:[Ee.id]}),J(Ae=>{const Qe=new Set(Ae);return Qe.delete(Ee.id),Qe})}catch(Ae){const Qe=Ae instanceof Error?Ae.message:"Failed to delete document.";U({tone:"error",message:Qe})}},[ie]),ve=p.useCallback(async Ee=>{try{me(Ee.id);const{blob:Ae,filename:Qe}=await Ek(e.id,Ee.id);Gk(Ae,Qe??Ee.name)}catch(Ae){const Qe=Ae instanceof Error?Ae.message:"Failed to download document.";U({tone:"error",message:Qe})}finally{me(null)}},[e.id]),ye=p.useCallback(Ee=>{_e(Ee)},[]),Oe=p.useCallback(()=>{R()},[R]),Ze=p.useCallback(Ee=>{U({tone:"error",message:Ee})},[]),Ge=()=>{m(Pl),j(""),E(""),g(new Set),y("-created_at")},Nt=f===Pl&&x.size===0&&b==="-created_at"&&!_;return o.jsxs(o.Fragment,{children:[o.jsx($k,{workspaceName:e.name??void 0,disabled:C,onFiles:async Ee=>{await Ie(Ee)}}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{ref:D,type:"file",accept:".csv,.pdf,.tsv,.xls,.xlsx,.xlsm,.xlsb",multiple:!0,className:"hidden",onChange:et}),o.jsx(_k,{workspaceName:e.name,totalDocuments:H,view:f,onChangeView:ke,sort:b,onSort:y,onReset:Ge,isFetching:M.isFetching,isDefault:Nt,onUploadClick:Re,uploadDisabled:C,selectedStatuses:x,onToggleStatus:fe,onClearStatuses:Te}),xe?o.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",role:"alert",children:xe.message}):null,o.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white text-sm text-slate-700",children:M.isLoading?o.jsx("div",{className:"p-4",children:o.jsx(Hk,{})}):M.isError?o.jsx("p",{className:"p-4 text-rose-600",children:"Failed to load documents."}):re.length===0?o.jsx("div",{className:"p-6",children:o.jsx(Vk,{onUploadClick:Re})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto p-2 sm:p-3",children:o.jsx(Tk,{documents:re,selectedIds:Y,onToggleDocument:k,onToggleAll:I,disableSelection:Ne||W||ee.isPending,disableRowActions:ie.isPending,formatStatusLabel:Z,onDeleteDocument:Ce,onDownloadDocument:ve,onRunDocument:ye,downloadingId:P,renderRunStatus:be,safeModeEnabled:ce,safeModeMessage:V,safeModeLoading:he})}),M.hasNextPage?o.jsx("div",{className:"flex justify-center border-t border-slate-200 bg-slate-50/60 px-3 py-2",children:o.jsx(qe,{type:"button",variant:"ghost",onClick:()=>M.fetchNextPage(),disabled:ge,children:ge?"Loading more documents":"Load more documents"})}):null]})})]}),o.jsx(Zk,{count:se,onClear:()=>J(new Set),onRun:()=>{Se&&!ce&&!he&&ye(Se)},onDelete:ne,busy:W,safeModeEnabled:ce,safeModeMessage:V,safeModeLoading:he}),o.jsx(Bk,{open:!!je,workspaceId:e.id,documentRecord:je,onClose:()=>_e(null),onRunSuccess:Oe,onRunError:Ze,safeModeEnabled:ce,safeModeMessage:V,safeModeLoading:he})]})}function vk(e,n){const r=n.sort.trim()||null;return Fv({queryKey:Li.list(e,r,n.uploader??null),initialPageParam:1,queryFn:({pageParam:i,signal:c})=>jk(e,{sort:r,page:typeof i=="number"?i:1,pageSize:vy},c),getNextPageParam:i=>i.has_next?i.page+1:void 0,enabled:e.length>0,placeholderData:i=>i,staleTime:15e3})}function bk(e){const n=ht();return un({mutationFn:async({files:r})=>{const i=Array.from(r);for(const c of i)await Ve.POST("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e}},body:{file:""},bodySerializer:()=>{const u=new FormData;return u.append("file",c),u}})},onSuccess:()=>{n.invalidateQueries({queryKey:Li.workspace(e)})}})}function yk(e){const n=ht();return un({mutationFn:async({documentIds:r})=>{await Promise.all(r.map(i=>Ve.DELETE("/api/v1/workspaces/{workspace_id}/documents/{document_id}",{params:{path:{workspace_id:e,document_id:i}}})))},onSuccess:()=>{n.invalidateQueries({queryKey:Li.workspace(e)})}})}function wk(e){const n=ht();return un({mutationFn:async({configId:r,options:i})=>{const{data:c}=await Ve.POST("/api/v1/configurations/{configuration_id}/runs",{params:{path:{configuration_id:r}},body:{stream:!1,options:i}});if(!c)throw new Error("Expected run payload.");return c},onSuccess:()=>{n.invalidateQueries({queryKey:Li.workspace(e)})}})}function Sk(e,n){const r=p.useMemo(()=>sa(`ade.workspace.${e}.document_runs`),[e]),[i,c]=p.useState(()=>V0(r,n));p.useEffect(()=>{c(V0(r,n))},[r,n]);const u=p.useCallback(f=>{c(f);const m=r.get()??{};r.set({...m,[n]:{configId:f.configId,sheetNames:f.sheetNames&&f.sheetNames.length>0?[...f.sheetNames]:null}})},[r,n]);return{preferences:i,setPreferences:u}}async function jk(e,n,r){const i={sort:n.sort??void 0,page:n.page>0?n.page:1,page_size:n.pageSize>0?n.pageSize:vy,include_total:!1},{data:c}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents",{params:{path:{workspace_id:e},query:i},signal:r});if(!c)throw new Error("Expected document page payload.");return c}async function Ek(e,n){const{data:r,response:i}=await Ve.GET("/api/v1/workspaces/{workspace_id}/documents/{document_id}/download",{params:{path:{workspace_id:e,document_id:n}},parseAs:"blob"});if(!r)throw new Error("Expected document download payload.");const c=Nk(i.headers.get("content-disposition"))??`document-${n}`;return{blob:r,filename:c}}function Nk(e){if(!e)return null;const n=e.match(/filename\*=UTF-8''([^;]+)/i);if(n?.[1])try{return decodeURIComponent(n[1])}catch{return n[1]}return e.match(/filename="?([^";]+)"?/i)?.[1]??null}function V0(e,n){const r=e.get();if(r&&typeof r=="object"&&n in r){const i=r[n];if(i&&typeof i=="object"){const c=[];if("sheetName"in i){const m=i.sheetName;typeof m=="string"&&c.push(m)}const f=(Array.isArray(i.sheetNames)?i.sheetNames.filter(m=>typeof m=="string"&&m.length>0):null)??(c.length>0?c:null);return{configId:i.configId??null,sheetNames:f}}}return{configId:null,sheetNames:null}}function _k({workspaceName:e,totalDocuments:n,view:r,onChangeView:i,sort:c,onSort:u,onReset:f,isFetching:m,isDefault:x,onUploadClick:g,uploadDisabled:b,selectedStatuses:y,onToggleStatus:w,onClearStatuses:j}){const _=typeof n=="number"?`${n.toLocaleString()} files`:e?`Uploads and runs for ${e}`:"Manage workspace uploads and runs";return o.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/95 p-3 sm:p-4",role:"region","aria-label":"Documents header and filters",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h1",{className:"truncate text-lg font-semibold text-slate-900 sm:text-xl",children:e?`${e} documents`:"Documents"}),o.jsx("p",{className:"text-xs text-slate-500",children:_})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("button",{type:"button",onClick:f,disabled:x,className:we("rounded border border-transparent px-3 py-1 text-sm font-medium",x?"cursor-default text-slate-300":"text-slate-600 hover:border-slate-200 hover:bg-slate-50 hover:text-slate-900"),children:"Reset"}),o.jsx(qe,{className:"shrink-0",onClick:g,disabled:b,isLoading:b,"aria-label":"Upload documents",children:"Upload"})]})]}),o.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[o.jsx(Ck,{view:r,onChange:i}),o.jsx(kk,{selectedStatuses:y,onToggleStatus:w,onClearStatuses:j}),o.jsxs(Ba,{value:c,onChange:E=>u(E.target.value),className:"w-40","aria-label":"Sort documents",children:[o.jsx("option",{value:"-created_at",children:"Newest first"}),o.jsx("option",{value:"created_at",children:"Oldest first"}),o.jsx("option",{value:"-last_run_at",children:"Recent runs"}),o.jsx("option",{value:"last_run_at",children:"Least recently run"}),o.jsx("option",{value:"-byte_size",children:"Largest files"}),o.jsx("option",{value:"byte_size",children:"Smallest files"}),o.jsx("option",{value:"name",children:"Name AZ"}),o.jsx("option",{value:"-name",children:"Name ZA"})]}),o.jsxs("span",{className:we("ml-auto inline-flex items-center gap-1 text-[11px] text-slate-500",m?"opacity-100":"opacity-0"),role:"status","aria-live":"polite",children:[o.jsx("span",{className:"h-1.5 w-1.5 animate-pulse rounded-full bg-slate-400"}),"Updating"]})]})]})}function Ck({view:e,onChange:n}){return o.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(Ma).map(r=>{const i=Ma[r],c=r===e;return o.jsx("button",{type:"button",onClick:()=>n(r),className:we("rounded-full px-3 py-1 text-xs font-medium transition",c?"bg-brand-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-900"),title:i.description,children:i.label},r)})})}function kk({selectedStatuses:e,onToggleStatus:n,onClearStatuses:r}){const[i,c]=p.useState(!1),u=p.useRef(null),f=Object.entries(gy),m=e.size>0,x=m?`${e.size} ${e.size===1?"status":"statuses"}`:"All statuses";return p.useEffect(()=>{if(!i)return;const g=b=>{u.current&&!u.current.contains(b.target)&&c(!1)};return window.addEventListener("mousedown",g),()=>window.removeEventListener("mousedown",g)},[i]),o.jsxs("div",{className:"relative",ref:u,children:[o.jsxs("button",{type:"button",onClick:()=>c(g=>!g),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 shadow-sm hover:border-slate-300","aria-haspopup":"true","aria-expanded":i,children:["Status: ",x,o.jsx(Lk,{className:"h-3 w-3"})]}),i?o.jsxs("div",{className:"absolute z-30 mt-2 w-60 rounded-xl border border-slate-200 bg-white p-3 text-sm shadow-xl",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-500",children:[o.jsx("span",{children:"Status filters"}),o.jsx("button",{type:"button",onClick:()=>{r(),c(!1)},className:we("text-[11px]",m?"text-slate-500 underline underline-offset-4":"text-slate-300"),children:"Clear"})]}),o.jsx("ul",{className:"space-y-1 text-xs text-slate-600",children:f.map(([g,b])=>{const y=e.has(g);return o.jsx("li",{children:o.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1 hover:bg-slate-50",children:[o.jsx("input",{type:"checkbox",checked:y,onChange:()=>n(g),className:"h-3.5 w-3.5 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),o.jsx("span",{className:"truncate",children:b})]})},g)})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>c(!1),children:"Done"})})]}):null]})}function Tk({documents:e,selectedIds:n,onToggleDocument:r,onToggleAll:i,disableSelection:c=!1,disableRowActions:u=!1,formatStatusLabel:f,onDeleteDocument:m,onDownloadDocument:x,onRunDocument:g,downloadingId:b=null,renderRunStatus:y,safeModeEnabled:w=!1,safeModeMessage:j,safeModeLoading:_=!1}){const E=p.useRef(null),{allSelected:A,someSelected:O}=p.useMemo(()=>{if(e.length===0)return{allSelected:!1,someSelected:!1};const N=e.reduce((D,B)=>n.has(B.id)?D+1:D,0);return{allSelected:N===e.length,someSelected:N>0&&N<e.length}},[e,n]);return p.useEffect(()=>{E.current&&(E.current.indeterminate=O)},[O]),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full table-fixed border-separate border-spacing-0 text-sm text-slate-700",children:[o.jsx("thead",{className:"sticky top-0 z-10 bg-slate-50/80 backdrop-blur-sm text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:o.jsxs("tr",{className:"border-b border-slate-200",children:[o.jsx("th",{scope:"col",className:"w-10 px-2 py-2",children:o.jsx("input",{ref:E,type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:A,onChange:i,disabled:c||e.length===0})}),o.jsx("th",{scope:"col",className:"w-20 px-2 py-2 text-left",children:"ID"}),o.jsx("th",{scope:"col",className:"px-2 py-2 text-left",children:"Document"}),o.jsx("th",{scope:"col",className:"w-40 px-2 py-2 text-left",children:"Uploaded"}),o.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Uploader"}),o.jsx("th",{scope:"col",className:"w-48 px-2 py-2 text-left",children:"Latest run"}),o.jsx("th",{scope:"col",className:"w-32 px-2 py-2 text-left",children:"Status"}),o.jsx("th",{scope:"col",className:"w-36 px-2 py-2 text-right",children:"Actions"})]})}),o.jsx("tbody",{children:e.map(N=>{const D=n.has(N.id);return o.jsxs("tr",{className:we("border-b border-slate-200 last:border-b-0 transition-colors hover:bg-slate-50",D?"bg-brand-50/50":"bg-white"),children:[o.jsx("td",{className:"px-2 py-2 align-middle",children:o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border border-slate-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",checked:D,onChange:()=>r(N.id),disabled:c})}),o.jsx("td",{className:"px-2 py-2 align-middle font-mono text-xs text-slate-500",children:N.id.slice(-6)}),o.jsx("td",{className:"px-2 py-2 align-middle",children:o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"truncate font-semibold text-slate-900",title:N.name,children:N.name}),o.jsx("div",{className:"text-xs text-slate-500",children:Dk(N)})]})}),o.jsx("td",{className:"px-2 py-2 align-middle",children:o.jsx("time",{dateTime:N.created_at,className:"block text-xs text-slate-600",title:xy.format(new Date(N.created_at)),children:Ok(N)})}),o.jsx("td",{className:"px-2 py-2 align-middle",children:o.jsx("span",{className:"block truncate text-xs text-slate-600",children:N.uploader?.name??N.uploader?.email??""})}),o.jsx("td",{className:"px-2 py-2 align-middle",children:y?y(N):null}),o.jsx("td",{className:"px-2 py-2 align-middle",children:o.jsx("span",{className:we("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",zk(N.status)),children:f?f(N.status):N.status})}),o.jsx("td",{className:"px-2 py-2 align-middle text-right",children:o.jsx(Ak,{document:N,onDownload:x,onDelete:m,onRun:g,disabled:u,downloading:b===N.id,safeModeEnabled:w,safeModeMessage:j,safeModeLoading:_})})]},N.id)})})]})})}function Ak({document:e,onDownload:n,onDelete:r,onRun:i,disabled:c=!1,downloading:u=!1,safeModeEnabled:f=!1,safeModeMessage:m,safeModeLoading:x=!1}){const g=c||!i||f||x,b=f?m??Os:x?"Checking ADE safe mode status...":void 0;return o.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[o.jsx(qe,{type:"button",size:"sm",variant:"primary",onClick:()=>{g||i?.(e)},disabled:g,title:b,children:"Run"}),o.jsx("button",{type:"button",onClick:()=>n?.(e),className:we("px-2 py-1 text-xs font-medium text-slate-600 underline underline-offset-4 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500",u&&"opacity-60"),disabled:c||u,children:u?"Downloading":"Download"}),o.jsx("button",{type:"button",onClick:()=>r?.(e),className:"px-2 py-1 text-xs font-semibold text-danger-600 hover:text-danger-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-danger-500",disabled:c,children:"Delete"})]})}function Dk(e){const n=[];return e.content_type&&n.push(Mk(e.content_type)),typeof e.byte_size=="number"&&e.byte_size>=0&&n.push(Rk(e.byte_size)),n.join("  ")||"Unknown type"}function Mk(e){return{"application/pdf":"PDF document","text/csv":"CSV file","text/tab-separated-values":"TSV file","application/vnd.ms-excel":"Excel spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel spreadsheet","application/vnd.ms-excel.sheet.macroEnabled.12":"Excel macro spreadsheet"}[e]??e}function Rk(e){if(e<1024)return`${e} B`;const n=["KB","MB","GB","TB"];let r=e/1024,i=0;for(;r>=1024&&i<n.length-1;)r/=1024,i+=1;return`${r>=10?Math.round(r):Math.round(r*10)/10} ${n[i]}`}function zk(e){switch(e){case"processed":return"bg-success-100 text-success-700";case"processing":return"bg-warning-100 text-warning-700";case"failed":return"bg-danger-100 text-danger-700";case"archived":return"bg-slate-200 text-slate-700";default:return"bg-slate-100 text-slate-700"}}function Ok(e){return xy.format(new Date(e.created_at))}function Lk({className:e}){return o.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.8,className:e,children:o.jsx("path",{d:"M5 8l5 5 5-5",strokeLinecap:"round",strokeLinejoin:"round"})})}function Uk({className:e}){return o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:we("animate-spin text-slate-500",e),role:"presentation",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),o.jsx("path",{className:"opacity-75",d:"M22 12c0-5.523-4.477-10-10-10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function Bk({open:e,workspaceId:n,documentRecord:r,onClose:i,onRunSuccess:c,onRunError:u,safeModeEnabled:f=!1,safeModeMessage:m,safeModeLoading:x=!1}){const g=p.useRef(null);return p.useEffect(()=>{typeof window>"u"||(e?g.current=window.document.activeElement instanceof HTMLElement?window.document.activeElement:null:(g.current?.focus(),g.current=null))},[e]),p.useEffect(()=>{if(!e||typeof window>"u")return;const b=window.document.body.style.overflow;return window.document.body.style.overflow="hidden",()=>{window.document.body.style.overflow=b}},[e]),typeof window>"u"||!e||!r?null:jr.createPortal(o.jsx(qk,{workspaceId:n,documentRecord:r,onClose:i,onRunSuccess:c,onRunError:u,safeModeEnabled:f,safeModeMessage:m,safeModeLoading:x}),window.document.body)}function qk({workspaceId:e,documentRecord:n,onClose:r,onRunSuccess:i,onRunError:c,safeModeEnabled:u=!1,safeModeMessage:f,safeModeLoading:m=!1}){const x=p.useRef(null),g=p.useId(),b=p.useId(),y=$h({workspaceId:e}),[w,j]=p.useState(""),_=wk(e),{preferences:E,setPreferences:A}=Sk(e,n.id),[O,N]=p.useState(n.last_run?.run_id??null);p.useEffect(()=>{N(n.last_run?.run_id??null)},[n.id,n.last_run?.run_id]);const D=p.useMemo(()=>y.data?.items??[],[y.data]),B=p.useMemo(()=>D.filter(fe=>!("deleted_at"in fe&&fe.deleted_at)),[D]),J=p.useMemo(()=>{if(E.configId){const fe=B.find(Te=>Te.id===E.configId);if(fe)return fe.id}return B[0]?.id??""},[E.configId,B]);p.useEffect(()=>{j(J)},[J]);const Y=p.useMemo(()=>B.find(fe=>fe.id===w)??null,[B,w]),Q=p.useCallback(fe=>{const Te=typeof fe.status=="string"?fe.status:"draft";return`${fe.title??fe.display_name??"Untitled configuration"} (${Te.charAt(0).toUpperCase()}${Te.slice(1)})`},[]),[se,ee]=p.useState(null),ie=f??Os,ae=Sn({queryKey:O?$c.detail(O):["run","none"],queryFn:({signal:fe})=>O?mo(O,fe):Promise.reject(new Error("No run selected")),enabled:!!O,refetchInterval:fe=>{const Te=fe.state.data?.status;return Te==="running"||Te==="queued"?2e3:!1}}),ce=Sn({queryKey:O?$c.outputs(O):["run-outputs","none"],queryFn:({signal:fe})=>{if(!O)return Promise.reject(new Error("No run selected"));const Te=ae.data??O;return Zb(Te,fe)},enabled:!!O&&(ae.data?.status==="succeeded"||ae.data?.status==="failed"),staleTime:5e3}),V=Sn({queryKey:O?$c.summary(O):["run-summary","none"],queryFn:({signal:fe})=>O?Vb(O,fe):Promise.reject(new Error("No run selected")),enabled:!!O&&(ae.data?.status==="succeeded"||ae.data?.status==="failed"),staleTime:5e3}),he=Sn({queryKey:O?$c.telemetry(O):["run-telemetry","none"],queryFn:({signal:fe})=>{if(!O)return Promise.reject(new Error("No run selected"));const Te=ae.data??O;return oh(Te,fe)},enabled:!!O&&(ae.data?.status==="succeeded"||ae.data?.status==="failed"),staleTime:5e3}),xe=Sn({queryKey:["document-sheets",e,n.id],queryFn:({signal:fe})=>Ib(e,n.id,fe),staleTime:6e4}),U=p.useMemo(()=>xe.data??[],[xe.data]),[P,me]=p.useState([]);p.useEffect(()=>{if(!U.length){me([]);return}const fe=(E.sheetNames??[]).filter(Z=>U.some(be=>be.name===Z)),Te=Array.from(new Set(fe));me(Te)},[U,E.sheetNames]);const je=p.useMemo(()=>Array.from(new Set(P.filter(fe=>U.some(Te=>Te.name===fe)))),[P,U]);p.useEffect(()=>{Y&&A({configId:Y.id,sheetNames:je.length?je:null})},[je,Y,A]);const _e=p.useCallback(fe=>{me(Te=>Te.includes(fe)?Te.filter(Z=>Z!==fe):[...Te,fe])},[]),C=ae.data??null,W=C?.status??null,M=W==="running"||W==="queued",R=C?Fb(C):null,F=C?Qb(C):null,z=ce.data?.files??[],re=V.data??null,ge=he.data??[];p.useEffect(()=>{const fe=x.current;if(!fe)return;(F0(fe)[0]??fe).focus();const Z=be=>{if(be.key==="Escape"){be.preventDefault(),r();return}if(be.key!=="Tab")return;const Re=F0(fe);if(Re.length===0){be.preventDefault();return}const Ie=Re[0],et=Re[Re.length-1],k=window.document.activeElement;if(be.shiftKey){(!fe.contains(k)||k===Ie)&&(be.preventDefault(),et.focus());return}k===et&&(be.preventDefault(),Ie.focus())};return fe.addEventListener("keydown",Z),()=>fe.removeEventListener("keydown",Z)},[r]);const Ne=B.length>0,H=_.isPending||M||m||u||!Ne||!Y,Se=u?ie:m?"Checking ADE safe mode status...":void 0,ke=()=>{if(u||m)return;if(!Y){ee("Select a configuration before running the extractor.");return}ee(null),N(null);const fe=je,Te={dry_run:!1,validate_only:!1,force_rebuild:!1},Z=fe.length>0?{...Te,input_sheet_names:fe}:Te;_.mutate({configId:Y.id,options:{...Z,input_document_id:n.id}},{onSuccess:be=>{A({configId:Y.id,sheetNames:fe.length?fe:null}),i?.(be),N(be.id)},onError:be=>{const Re=be instanceof Error?be.message:"Unable to submit extraction run.";ee(Re),c?.(Re)}})};return o.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[o.jsx("button",{type:"button",tabIndex:-1,"aria-hidden":"true",className:"flex-1 bg-slate-900/30 backdrop-blur-sm",onClick:r}),o.jsxs("aside",{ref:x,role:"dialog","aria-modal":"true","aria-labelledby":g,"aria-describedby":b,tabIndex:-1,className:"relative flex h-full w-[min(28rem,92vw)] flex-col border-l border-slate-200 bg-white shadow-2xl",children:[o.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx("h2",{id:g,className:"text-lg font-semibold text-slate-900",children:"Run extraction"}),o.jsx("p",{id:b,className:"text-xs text-slate-500",children:"Prepare and submit a processing run."})]}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:r,disabled:_.isPending,children:"Close"})]}),o.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4 text-sm text-slate-600",children:[o.jsxs("section",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Document"}),o.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[o.jsx("p",{className:"font-semibold text-slate-800",title:n.name,children:n.name}),o.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",new Date(n.created_at).toLocaleString()]}),n.last_run_at?o.jsxs("p",{className:"text-xs text-slate-500",children:["Last run ",new Date(n.last_run_at).toLocaleString()]}):null]})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Configuration"}),y.isLoading?o.jsx("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"Loading configurations"}):y.isError?o.jsxs(jt,{tone:"danger",children:["Unable to load configurations."," ",y.error instanceof Error?y.error.message:"Try again later."]}):Ne?o.jsx("div",{className:"space-y-2",children:o.jsxs(Ba,{value:w,onChange:fe=>{const Te=fe.target.value;j(Te)},disabled:_.isPending,children:[o.jsx("option",{value:"",children:"Select configuration"}),B.map(fe=>o.jsx("option",{value:fe.id,children:Q(fe)},fe.id))]})}):o.jsx(jt,{tone:"info",children:"No configurations available. Create one before running extraction."})]}),o.jsxs("section",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Advanced options"}),xe.isLoading?o.jsx("p",{className:"text-xs text-slate-500",children:"Loading worksheets"}):xe.isError?o.jsx(jt,{tone:"warning",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-slate-700",children:"Worksheet metadata is temporarily unavailable. The run will process the entire file unless you retry and pick specific sheets."}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qe,{variant:"secondary",size:"sm",onClick:()=>xe.refetch(),disabled:xe.isFetching,children:"Retry loading"}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>me([]),disabled:_.isPending,children:"Use all worksheets"})]})]})}):U.length>0?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-slate-600",children:"Worksheets"}),o.jsx("p",{className:"text-[11px] text-slate-500",children:je.length===0?"All worksheets will be processed by default. Select any subset to narrow the run.":`${je.length.toLocaleString()} worksheet${je.length===1?"":"s"} selected. Clear selections to process every sheet.`})]}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>me([]),disabled:_.isPending,children:"Use all worksheets"})]}),o.jsx("div",{className:"max-h-48 space-y-2 overflow-auto rounded-md border border-slate-200 p-2",children:U.map(fe=>{const Te=je.includes(fe.name);return o.jsxs("label",{className:"flex items-center gap-2 rounded px-2 py-1 text-sm text-slate-700 hover:bg-slate-100",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500",checked:Te,onChange:()=>_e(fe.name)}),o.jsxs("span",{className:"flex-1 truncate",children:[fe.name,fe.is_active?" (active)":""]})]},`${fe.index}-${fe.name}`)})})]}):o.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-500",children:"This document does not expose multiple worksheets, so ADE will ingest the uploaded file directly."})]}),O?o.jsxs("section",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Latest run"}),o.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-slate-800",title:O,children:["Run ",O]}),o.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",W??"loading"]})]}),M?o.jsx(Uk,{className:"h-4 w-4 text-slate-500"}):null]}),F?o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:o.jsx("a",{href:F,className:"inline-flex items-center rounded border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:bg-slate-100",children:"Download logs"})}):null,o.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Output files"}),ce.isLoading?o.jsx("p",{className:"text-xs text-slate-500",children:"Loading outputs"}):z.length>0?o.jsx("ul",{className:"mt-1 space-y-1 text-xs text-slate-700",children:z.map(fe=>{const Te=fe.path??fe.name,Z=typeof fe.byte_size=="number"?fe.byte_size:0,be=fe.download_url??(R?`${R}/${Te.split("/").map(encodeURIComponent).join("/")}`:void 0);return o.jsxs("li",{className:"flex items-center justify-between gap-2 break-all rounded border border-slate-100 px-2 py-1",children:[be?o.jsx("a",{href:be,className:"text-emerald-700 hover:underline",children:fe.name}):o.jsx("span",{className:"text-slate-500",children:fe.name}),o.jsxs("span",{className:"text-[11px] text-slate-500",children:[Z.toLocaleString()," bytes"]})]},Te)})}):o.jsx("p",{className:"text-xs text-slate-500",children:"Outputs will appear here after the run completes."})]}),o.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Run summary"}),V.isLoading?o.jsx("p",{className:"text-xs text-slate-500",children:"Loading summary"}):V.isError?o.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load run summary."}):re?o.jsx(ob,{summary:re}):o.jsx("p",{className:"text-xs text-slate-500",children:"Summary not available."})]}),o.jsxs("div",{className:"mt-3 rounded-md border border-slate-200 bg-white px-3 py-2",children:[o.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Telemetry summary"}),he.isLoading?o.jsx("p",{className:"text-xs text-slate-500",children:"Loading telemetry"}):he.isError?o.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load telemetry events."}):ge.length>0?o.jsx(cb,{events:ge}):o.jsx("p",{className:"text-xs text-slate-500",children:"No telemetry events captured."})]})]})]}):null,u?o.jsx(jt,{tone:"warning",children:ie}):null,se?o.jsx(jt,{tone:"danger",children:se}):null]}),o.jsxs("footer",{className:"flex items-center justify-end gap-2 border-t border-slate-200 px-5 py-4",children:[o.jsx(qe,{type:"button",variant:"ghost",onClick:r,disabled:_.isPending,children:"Cancel"}),o.jsx(qe,{type:"button",onClick:ke,isLoading:_.isPending,disabled:H,title:Se,children:"Run extraction"})]})]})]})}function $k({onFiles:e,disabled:n,workspaceName:r}){const[i,c]=p.useState(!1),u=p.useRef(0);return p.useEffect(()=>{if(n)return;const f=b=>{!b.dataTransfer||![...b.dataTransfer.types].includes("Files")||(u.current+=1,c(!0))},m=b=>{i&&b.preventDefault()},x=()=>{u.current=Math.max(0,u.current-1),u.current===0&&c(!1)},g=b=>{b.preventDefault(),c(!1),u.current=0;const y=Array.from(b.dataTransfer?.files??[]);y.length&&e(y)};return window.addEventListener("dragenter",f),window.addEventListener("dragover",m),window.addEventListener("dragleave",x),window.addEventListener("drop",g),()=>{window.removeEventListener("dragenter",f),window.removeEventListener("dragover",m),window.removeEventListener("dragleave",x),window.removeEventListener("drop",g)}},[i,n,e]),o.jsxs("div",{"aria-hidden":!i,className:we("pointer-events-none fixed inset-0 z-[60] transition",i?"opacity-100":"opacity-0"),children:[o.jsx("div",{className:"absolute inset-0 bg-slate-900/25 backdrop-blur-[2px]"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6",children:o.jsx("div",{className:"pointer-events-none rounded-2xl border border-white/70 bg-white/90 px-6 py-5 shadow-2xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow",children:o.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 text-slate-700",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[o.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("p",{className:"text-base font-semibold text-slate-900",children:"Drop to upload"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Files will upload to ",o.jsx("span",{className:"font-medium",children:r??"this workspace"})]})]})]})})})]})}function Hk(){return o.jsx("div",{className:"space-y-3","aria-hidden":!0,children:Array.from({length:6}).map((e,n)=>o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"h-4 w-4 rounded bg-slate-100"}),o.jsx("div",{className:"h-4 flex-1 rounded bg-slate-100"}),o.jsx("div",{className:"h-4 w-24 rounded bg-slate-100"}),o.jsx("div",{className:"h-4 w-40 rounded bg-slate-100"}),o.jsx("div",{className:"h-8 w-40 rounded bg-slate-100"})]},n))})}function Zk({count:e,onClear:n,onRun:r,onDelete:i,busy:c,safeModeEnabled:u=!1,safeModeMessage:f,safeModeLoading:m=!1}){if(e===0)return null;const x=c||u||m,g=u?f??Os:m?"Checking ADE safe mode status...":void 0;return o.jsx("div",{className:"fixed inset-x-0 bottom-0 z-40 mx-auto max-w-7xl px-2 pb-2 sm:px-4 sm:pb-4",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white/95 p-3 text-sm text-slate-700 shadow-lg backdrop-blur",children:[o.jsxs("span",{className:"mr-2",children:[o.jsx("strong",{children:e})," selected"]}),o.jsx(qe,{variant:"ghost",size:"sm",onClick:n,children:"Clear"}),o.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[o.jsx(qe,{size:"sm",onClick:()=>!x&&r(),disabled:x,title:g,children:"Run extraction"}),o.jsx(qe,{size:"sm",variant:"danger",onClick:i,disabled:c,isLoading:c,children:"Delete selected"})]})]})})}function Vk({onUploadClick:e}){return o.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-center",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-50",children:o.jsxs("svg",{className:"h-6 w-6 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[o.jsx("path",{d:"M12 16V4",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M6 10l6-6 6 6",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No documents yet"}),o.jsx("p",{className:"max-w-md text-sm text-slate-600",children:"Tap Upload or drag files anywhere in the window."}),o.jsx(qe,{onClick:e,className:"w-full sm:w-auto",children:"Upload"})]})}function Fk({document:e}){const n=e.last_run;return n?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("span",{className:we("inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",Qk(n.status)),children:[Ik(n.status),n.run_at?o.jsx("span",{className:"ml-1 font-normal text-slate-500",children:Wk(n.run_at)}):null]}),n.message?o.jsx("span",{className:"text-[11px] text-slate-500",children:n.message}):null]}):o.jsx("span",{className:"text-xs text-slate-400",children:"No runs yet"})}function Qk(e){switch(e){case"succeeded":return"bg-success-100 text-success-700";case"failed":return"bg-danger-100 text-danger-700";case"running":return"bg-brand-100 text-brand-700";default:return"bg-slate-200 text-slate-700"}}function Ik(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ti=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});function Wk(e){if(!e)return"unknown";const n=new Date(e);if(Number.isNaN(n.getTime()))return"unknown";const r=n.getTime()-Date.now(),i=Math.round(r/1e3);if(Math.abs(i)<60)return Ti.format(i,"second");const u=Math.round(i/60);if(Math.abs(u)<60)return Ti.format(u,"minute");const m=Math.round(u/60);if(Math.abs(m)<24)return Ti.format(m,"hour");const g=Math.round(m/24);if(Math.abs(g)<30)return Ti.format(g,"day");const b=Math.round(g/30);if(Math.abs(b)<12)return Ti.format(b,"month");const y=Math.round(g/365);return Ti.format(y,"year")}function Gk(e,n){const r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=n,i.click(),window.setTimeout(()=>URL.revokeObjectURL(r),1e3)}function F0(e){const n=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(e.querySelectorAll(n.join(","))).filter(r=>!r.hasAttribute("disabled")&&r.getAttribute("aria-hidden")!=="true")}function Kk({params:e}){return o.jsxs("section",{children:[o.jsxs("h1",{className:"text-lg font-semibold",children:["Document ",e.documentId]}),o.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"TODO: render document details or drawer."})]})}function Pk(){return o.jsx(At,{title:"Runs",description:"Run history will appear here once runs APIs expose listing endpoints.",variant:"empty"})}function cn({label:e,hint:n,error:r,required:i=!1,children:c,className:u}){const f=p.useId(),m=p.isValidElement(c)?c.props??{}:{},x=m.id??f,g=n?`${x}-hint`:void 0,b=r?`${x}-error`:void 0,y=[g,b,m["aria-describedby"]].filter(Boolean).join(" ")||void 0;return o.jsxs("div",{className:we("space-y-2",u),children:[e?o.jsxs("label",{htmlFor:x,className:"text-sm font-medium text-slate-700","aria-required":i||void 0,children:[e,i?o.jsx("span",{className:"ml-1 text-danger-600","aria-hidden":"true",children:"*"}):null]}):null,p.isValidElement(c)?p.cloneElement(c,{id:x,required:i||m.required,"aria-describedby":y,"aria-invalid":r?!0:m["aria-invalid"]}):c,n?o.jsx("p",{id:g,className:"text-xs text-slate-500",children:n}):null,r?o.jsx("p",{id:b,className:"text-xs font-medium text-danger-600",children:r}):null]})}const by="block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",jn=p.forwardRef(({className:e,invalid:n=!1,...r},i)=>o.jsx("input",{ref:i,className:we(by,n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...r}));jn.displayName="Input";const yy=p.forwardRef(({className:e,invalid:n=!1,rows:r=4,...i},c)=>o.jsx("textarea",{ref:c,rows:r,className:we(by,"resize-y",n&&"border-danger-500 focus-visible:ring-danger-500",e),"aria-invalid":n||void 0,...i}));yy.displayName="TextArea";const Vf=[{value:"default",label:"Default template"}],Yk=e=>`ade.ui.workspace.${e}.config-builder.last`,Ff=(e,n)=>`/workspaces/${e}/config-builder/${encodeURIComponent(n)}`;function Xk(){const{workspace:e}=ra(),n=An(),r=p.useMemo(()=>sa(Yk(e.id)),[e.id]),i=$h({workspaceId:e.id}),c=fk(e.id),[u,f]=p.useState(()=>`${e.name} Config`),[m,x]=p.useState(Vf[0]?.value??"default"),[g,b]=p.useState(null),y=p.useMemo(()=>(i.data?.items??[]).filter(N=>!("deleted_at"in N&&N.deleted_at)),[i.data]),w=p.useMemo(()=>r.get(),[r]),j=N=>{r.set({configId:N}),n(Ff(e.id,N))},_=N=>{r.set({configId:N}),n(`${Ff(e.id,N)}/editor`)},E=N=>{N.preventDefault();const D=u.trim();if(!D){b("Enter a display name for the configuration.");return}b(null),c.mutate({displayName:D,source:{type:"template",templateId:m}},{onSuccess(B){r.set({configId:B.id}),n(Ff(e.id,B.id))}})},A=g??(c.error instanceof Error?c.error.message:null),O=u.trim().length>0&&!c.isPending;return i.isLoading?o.jsx(At,{variant:"loading",title:"Loading configurations",description:"Fetching workspace configurations"}):i.isError?o.jsx(At,{variant:"error",title:"Unable to load configurations",description:"Try refreshing the page."}):y.length===0?o.jsx(At,{className:"mx-auto w-full max-w-xl",title:"Create your first configuration",description:"Copy a starter template into this workspace to begin editing detectors, hooks, and manifests.",action:o.jsxs("form",{onSubmit:E,className:"space-y-4 text-left",children:[o.jsx(cn,{label:"Configuration name",required:!0,children:o.jsx(jn,{value:u,onChange:N=>f(N.target.value),placeholder:"Membership normalization",disabled:c.isPending,autoFocus:!0})}),o.jsx(cn,{label:"Template",children:o.jsx(Ba,{value:m,onChange:N=>x(N.target.value),disabled:c.isPending,children:Vf.map(N=>o.jsx("option",{value:N.value,children:N.label},N.value))})}),A?o.jsx("p",{className:"text-sm font-medium text-danger-600",children:A}):null,o.jsx(qe,{type:"submit",className:"w-full",disabled:!O,isLoading:c.isPending,children:"Create from template"})]})}):o.jsxs("div",{className:"grid gap-6 p-4 lg:grid-cols-[minmax(0,2fr),minmax(0,1fr)]",children:[o.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Configurations"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Open an existing configuration to view manifest summaries, run validation, or launch the editor."})]}),w?.configId?o.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>j(w.configId),children:"Resume last opened"}):null]}),o.jsx("div",{className:"divide-y divide-slate-200 rounded-xl border border-slate-200",children:y.map(N=>o.jsxs("article",{className:"grid gap-3 p-4 md:grid-cols-[minmax(0,2fr),auto] md:items-center",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:N.display_name}),o.jsx(Jk,{status:N.status}),w?.configId===N.id?o.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-brand-600",children:"Last opened"}):null]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Updated ",new Date(N.updated_at).toLocaleString()]})]}),o.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[o.jsx(qe,{size:"sm",variant:"secondary",onClick:()=>j(N.id),children:"View details"}),o.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>_(N.id),children:"Open editor"})]})]},N.id))})]}),o.jsxs("aside",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"New configuration"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Copy the starter template to begin editing detectors, hooks, and manifests."})]}),o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[o.jsx(cn,{label:"Configuration name",required:!0,children:o.jsx(jn,{value:u,onChange:N=>f(N.target.value),placeholder:"Membership normalization",disabled:c.isPending})}),o.jsx(cn,{label:"Template",children:o.jsx(Ba,{value:m,onChange:N=>x(N.target.value),disabled:c.isPending,children:Vf.map(N=>o.jsx("option",{value:N.value,children:N.label},N.value))})}),A?o.jsx("p",{className:"text-sm font-medium text-danger-600",children:A}):null,o.jsx(qe,{type:"submit",className:"w-full",disabled:!O,isLoading:c.isPending,children:"Create from template"})]})]})]})}function Jk({status:e}){const n=e.toLowerCase(),r=n==="active"?"bg-emerald-100 text-emerald-700":n==="draft"?"bg-amber-100 text-amber-700":"bg-slate-200 text-slate-700";return o.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${r}`,children:e})}function e5({params:e}={}){const{workspace:n}=ra(),r=An(),i=e?.configId,c=$h({workspaceId:n.id}),u=p.useMemo(()=>c.data?.items.find(f=>f.id===i),[c.data,i]);return i?c.isLoading?o.jsx(At,{variant:"loading",title:"Loading configuration",description:"Fetching configuration details."}):u?o.jsxs("div",{className:"flex h-full flex-col gap-4 p-4",children:[o.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Configuration"}),o.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:u.display_name})]}),o.jsx(qe,{variant:"secondary",onClick:()=>r(`/workspaces/${n.id}/config-builder/${encodeURIComponent(u.id)}/editor`),children:"Open editor"})]}),o.jsxs("dl",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Config ID"}),o.jsx("dd",{className:"text-sm text-slate-700",children:u.id})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Status"}),o.jsx("dd",{className:"text-sm capitalize text-slate-700",children:u.status.toLowerCase()})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Updated"}),o.jsx("dd",{className:"text-sm text-slate-700",children:new Date(u.updated_at).toLocaleString()})]})]})]}),o.jsxs("section",{className:"flex-1 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6",children:[o.jsx("h2",{className:"text-base font-semibold text-slate-800",children:"Overview"}),o.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:"The refreshed config workbench will eventually surface manifest summaries, validation history, and deployment metrics here. For now this page offers a quick launch point into the editor while we rebuild the experience."})]})]}):o.jsx(At,{variant:"error",title:"Configuration unavailable",description:"The selected configuration could not be found. It may have been deleted."}):o.jsx(At,{variant:"error",title:"Configuration not found",description:"Pick a configuration from the list to view its details."})}function t5({params:e}={}){const{workspace:n}=ra(),{session:r,windowState:i,openSession:c,closeSession:u,minimizeWindow:f,maximizeWindow:m,restoreWindow:x,shouldBypassUnsavedGuard:g}=ly(),b=e?.configId,y=dk({workspaceId:n.id,configurationId:b});if(p.useEffect(()=>{b||u()},[b,u]),p.useEffect(()=>{if(!b)return;const A=y.data?.display_name??b;c({workspaceId:n.id,configId:b,configName:`${n.name}  ${A}`})},[b,y.data?.display_name,n.id,n.name,c]),!b)return o.jsx(At,{variant:"error",title:"Select a configuration",description:"Choose a configuration from the list to open the workbench."});const w=r&&r.configId===b?r:null,j=!!(w&&i==="minimized"),_=!!(w&&i==="restored"),E=!!(w&&i==="maximized");return _&&w?o.jsx("div",{className:"flex h-full min-h-0 flex-1 flex-col",children:o.jsx(ay,{workspaceId:n.id,configId:w.configId,configName:w.configName,windowState:"restored",onMinimizeWindow:f,onMaximizeWindow:m,onRestoreWindow:x,onCloseWorkbench:u,shouldBypassUnsavedGuard:g})}):E?o.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:o.jsx(At,{variant:"empty",title:"Immersive focus active",description:"Exit immersive mode from the workbench focus menu to return here."})}):j?o.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:o.jsx(At,{variant:"empty",title:"Workbench docked",description:"Use the dock at the bottom of the screen to resume editing."})}):o.jsx("div",{className:"flex h-full min-h-0 flex-1 items-center justify-center px-6 py-8",children:o.jsx(At,{variant:"loading",title:"Launching config workbench",description:"If the editor does not appear, refresh the page."})})}var go=e=>e.type==="checkbox",Ra=e=>e instanceof Date,Yn=e=>e==null;const wy=e=>typeof e=="object";var nn=e=>!Yn(e)&&!Array.isArray(e)&&wy(e)&&!Ra(e),n5=e=>nn(e)&&e.target?go(e.target)?e.target.checked:e.target.value:e,s5=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,r5=(e,n)=>e.has(s5(n)),a5=e=>{const n=e.constructor&&e.constructor.prototype;return nn(n)&&n.hasOwnProperty("isPrototypeOf")},Hh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function yn(e){let n;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(!(Hh&&(e instanceof Blob||i))&&(r||nn(e)))if(n=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!a5(e))n=e;else for(const c in e)e.hasOwnProperty(c)&&(n[c]=yn(e[c]));else return e;return n}var xu=e=>/^\w*$/.test(e),Kt=e=>e===void 0,Zh=e=>Array.isArray(e)?e.filter(Boolean):[],Vh=e=>Zh(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ue=(e,n,r)=>{if(!n||!nn(e))return r;const i=(xu(n)?[n]:Vh(n)).reduce((c,u)=>Yn(c)?c:c[u],e);return Kt(i)||i===e?Kt(e[n])?r:e[n]:i},Gs=e=>typeof e=="boolean",St=(e,n,r)=>{let i=-1;const c=xu(n)?[n]:Vh(n),u=c.length,f=u-1;for(;++i<u;){const m=c[i];let x=r;if(i!==f){const g=e[m];x=nn(g)||Array.isArray(g)?g:isNaN(+c[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;e[m]=x,e=e[m]}};const Q0={BLUR:"blur",FOCUS_OUT:"focusout"},Rs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Sr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},i5=bt.createContext(null);i5.displayName="HookFormContext";var l5=(e,n,r,i=!0)=>{const c={defaultValues:n._defaultValues};for(const u in e)Object.defineProperty(c,u,{get:()=>{const f=u;return n._proxyFormState[f]!==Rs.all&&(n._proxyFormState[f]=!i||Rs.all),e[f]}});return c};const o5=typeof window<"u"?bt.useLayoutEffect:bt.useEffect;var us=e=>typeof e=="string",c5=(e,n,r,i,c)=>us(e)?(i&&n.watch.add(e),Ue(r,e,c)):Array.isArray(e)?e.map(u=>(i&&n.watch.add(u),Ue(r,u))):(i&&(n.watchAll=!0),r),dh=e=>Yn(e)||!wy(e);function ta(e,n,r=new WeakSet){if(dh(e)||dh(n))return e===n;if(Ra(e)&&Ra(n))return e.getTime()===n.getTime();const i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;if(r.has(e)||r.has(n))return!0;r.add(e),r.add(n);for(const u of i){const f=e[u];if(!c.includes(u))return!1;if(u!=="ref"){const m=n[u];if(Ra(f)&&Ra(m)||nn(f)&&nn(m)||Array.isArray(f)&&Array.isArray(m)?!ta(f,m,r):f!==m)return!1}}return!0}var Fh=(e,n,r,i,c)=>n?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:c||!0}}:{},Yl=e=>Array.isArray(e)?e:[e],I0=()=>{let e=[];return{get observers(){return e},next:c=>{for(const u of e)u.next&&u.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(u=>u!==c)}}),unsubscribe:()=>{e=[]}}};function Sy(e,n){const r={};for(const i in e)if(e.hasOwnProperty(i)){const c=e[i],u=n[i];if(c&&nn(c)&&u){const f=Sy(c,u);nn(f)&&(r[i]=f)}else e[i]&&(r[i]=u)}return r}var Pn=e=>nn(e)&&!Object.keys(e).length,Qh=e=>e.type==="file",zs=e=>typeof e=="function",su=e=>{if(!Hh)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},jy=e=>e.type==="select-multiple",Ih=e=>e.type==="radio",u5=e=>Ih(e)||go(e),Qf=e=>su(e)&&e.isConnected;function d5(e,n){const r=n.slice(0,-1).length;let i=0;for(;i<r;)e=Kt(e)?i++:e[n[i++]];return e}function f5(e){for(const n in e)if(e.hasOwnProperty(n)&&!Kt(e[n]))return!1;return!0}function tn(e,n){const r=Array.isArray(n)?n:xu(n)?[n]:Vh(n),i=r.length===1?e:d5(e,r),c=r.length-1,u=r[c];return i&&delete i[u],c!==0&&(nn(i)&&Pn(i)||Array.isArray(i)&&f5(i))&&tn(e,r.slice(0,-1)),e}var h5=e=>{for(const n in e)if(zs(e[n]))return!0;return!1};function Ey(e){return Array.isArray(e)||nn(e)&&!h5(e)}function fh(e,n={}){for(const r in e)Ey(e[r])?(n[r]=Array.isArray(e[r])?[]:{},fh(e[r],n[r])):Kt(e[r])||(n[r]=!0);return n}function Di(e,n,r){r||(r=fh(n));for(const i in e)Ey(e[i])?Kt(n)||dh(r[i])?r[i]=fh(e[i],Array.isArray(e[i])?[]:{}):Di(e[i],Yn(n)?{}:n[i],r[i]):r[i]=!ta(e[i],n[i]);return r}const W0={value:!1,isValid:!1},G0={value:!0,isValid:!0};var Ny=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Kt(e[0].attributes.value)?Kt(e[0].value)||e[0].value===""?G0:{value:e[0].value,isValid:!0}:G0:W0}return W0},_y=(e,{valueAsNumber:n,valueAsDate:r,setValueAs:i})=>Kt(e)?e:n?e===""?NaN:e&&+e:r&&us(e)?new Date(e):i?i(e):e;const K0={isValid:!1,value:null};var Cy=e=>Array.isArray(e)?e.reduce((n,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:n,K0):K0;function P0(e){const n=e.ref;return Qh(n)?n.files:Ih(n)?Cy(e.refs).value:jy(n)?[...n.selectedOptions].map(({value:r})=>r):go(n)?Ny(e.refs).value:_y(Kt(n.value)?e.ref.value:n.value,e)}var m5=(e,n,r,i)=>{const c={};for(const u of e){const f=Ue(n,u);f&&St(c,u,f._f)}return{criteriaMode:r,names:[...e],fields:c,shouldUseNativeValidation:i}},ru=e=>e instanceof RegExp,Vl=e=>Kt(e)?e:ru(e)?e.source:nn(e)?ru(e.value)?e.value.source:e.value:e,Y0=e=>({isOnSubmit:!e||e===Rs.onSubmit,isOnBlur:e===Rs.onBlur,isOnChange:e===Rs.onChange,isOnAll:e===Rs.all,isOnTouch:e===Rs.onTouched});const X0="AsyncFunction";var p5=e=>!!e&&!!e.validate&&!!(zs(e.validate)&&e.validate.constructor.name===X0||nn(e.validate)&&Object.values(e.validate).find(n=>n.constructor.name===X0)),g5=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),J0=(e,n,r)=>!r&&(n.watchAll||n.watch.has(e)||[...n.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Xl=(e,n,r,i)=>{for(const c of r||Object.keys(e)){const u=Ue(e,c);if(u){const{_f:f,...m}=u;if(f){if(f.refs&&f.refs[0]&&n(f.refs[0],c)&&!i)return!0;if(f.ref&&n(f.ref,f.name)&&!i)return!0;if(Xl(m,n))break}else if(nn(m)&&Xl(m,n))break}}};function ev(e,n,r){const i=Ue(e,r);if(i||xu(r))return{error:i,name:r};const c=r.split(".");for(;c.length;){const u=c.join("."),f=Ue(n,u),m=Ue(e,u);if(f&&!Array.isArray(f)&&r!==u)return{name:r};if(m&&m.type)return{name:u,error:m};if(m&&m.root&&m.root.type)return{name:`${u}.root`,error:m.root};c.pop()}return{name:r}}var x5=(e,n,r,i)=>{r(e);const{name:c,...u}=e;return Pn(u)||Object.keys(u).length>=Object.keys(n).length||Object.keys(u).find(f=>n[f]===(!i||Rs.all))},v5=(e,n,r)=>!e||!n||e===n||Yl(e).some(i=>i&&(r?i===n:i.startsWith(n)||n.startsWith(i))),b5=(e,n,r,i,c)=>c.isOnAll?!1:!r&&c.isOnTouch?!(n||e):(r?i.isOnBlur:c.isOnBlur)?!e:(r?i.isOnChange:c.isOnChange)?e:!0,y5=(e,n)=>!Zh(Ue(e,n)).length&&tn(e,n),w5=(e,n,r)=>{const i=Yl(Ue(e,r));return St(i,"root",n[r]),St(e,r,i),e};function tv(e,n,r="validate"){if(us(e)||Array.isArray(e)&&e.every(us)||Gs(e)&&!e)return{type:r,message:us(e)?e:"",ref:n}}var Ai=e=>nn(e)&&!ru(e)?e:{value:e,message:""},nv=async(e,n,r,i,c,u)=>{const{ref:f,refs:m,required:x,maxLength:g,minLength:b,min:y,max:w,pattern:j,validate:_,name:E,valueAsNumber:A,mount:O}=e._f,N=Ue(r,E);if(!O||n.has(E))return{};const D=m?m[0]:f,B=ce=>{c&&D.reportValidity&&(D.setCustomValidity(Gs(ce)?"":ce||""),D.reportValidity())},J={},Y=Ih(f),Q=go(f),se=Y||Q,ee=(A||Qh(f))&&Kt(f.value)&&Kt(N)||su(f)&&f.value===""||N===""||Array.isArray(N)&&!N.length,ie=Fh.bind(null,E,i,J),ae=(ce,V,he,xe=Sr.maxLength,U=Sr.minLength)=>{const P=ce?V:he;J[E]={type:ce?xe:U,message:P,ref:f,...ie(ce?xe:U,P)}};if(u?!Array.isArray(N)||!N.length:x&&(!se&&(ee||Yn(N))||Gs(N)&&!N||Q&&!Ny(m).isValid||Y&&!Cy(m).isValid)){const{value:ce,message:V}=us(x)?{value:!!x,message:x}:Ai(x);if(ce&&(J[E]={type:Sr.required,message:V,ref:D,...ie(Sr.required,V)},!i))return B(V),J}if(!ee&&(!Yn(y)||!Yn(w))){let ce,V;const he=Ai(w),xe=Ai(y);if(!Yn(N)&&!isNaN(N)){const U=f.valueAsNumber||N&&+N;Yn(he.value)||(ce=U>he.value),Yn(xe.value)||(V=U<xe.value)}else{const U=f.valueAsDate||new Date(N),P=_e=>new Date(new Date().toDateString()+" "+_e),me=f.type=="time",je=f.type=="week";us(he.value)&&N&&(ce=me?P(N)>P(he.value):je?N>he.value:U>new Date(he.value)),us(xe.value)&&N&&(V=me?P(N)<P(xe.value):je?N<xe.value:U<new Date(xe.value))}if((ce||V)&&(ae(!!ce,he.message,xe.message,Sr.max,Sr.min),!i))return B(J[E].message),J}if((g||b)&&!ee&&(us(N)||u&&Array.isArray(N))){const ce=Ai(g),V=Ai(b),he=!Yn(ce.value)&&N.length>+ce.value,xe=!Yn(V.value)&&N.length<+V.value;if((he||xe)&&(ae(he,ce.message,V.message),!i))return B(J[E].message),J}if(j&&!ee&&us(N)){const{value:ce,message:V}=Ai(j);if(ru(ce)&&!N.match(ce)&&(J[E]={type:Sr.pattern,message:V,ref:f,...ie(Sr.pattern,V)},!i))return B(V),J}if(_){if(zs(_)){const ce=await _(N,r),V=tv(ce,D);if(V&&(J[E]={...V,...ie(Sr.validate,V.message)},!i))return B(V.message),J}else if(nn(_)){let ce={};for(const V in _){if(!Pn(ce)&&!i)break;const he=tv(await _[V](N,r),D,V);he&&(ce={...he,...ie(V,he.message)},B(he.message),i&&(J[E]=ce))}if(!Pn(ce)&&(J[E]={ref:D,...ce},!i))return J}}return B(!0),J};const S5={mode:Rs.onSubmit,reValidateMode:Rs.onChange,shouldFocusError:!0};function j5(e={}){let n={...S5,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:zs(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},c=nn(n.defaultValues)||nn(n.values)?yn(n.defaultValues||n.values)||{}:{},u=n.shouldUnregister?{}:yn(c),f={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,g=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...b};const w={array:I0(),state:I0()},j=n.criteriaMode===Rs.all,_=k=>I=>{clearTimeout(g),g=setTimeout(k,I)},E=async k=>{if(!n.disabled&&(b.isValid||y.isValid||k)){const I=n.resolver?Pn((await Q()).errors):await ee(i,!0);I!==r.isValid&&w.state.next({isValid:I})}},A=(k,I)=>{!n.disabled&&(b.isValidating||b.validatingFields||y.isValidating||y.validatingFields)&&((k||Array.from(m.mount)).forEach(ne=>{ne&&(I?St(r.validatingFields,ne,I):tn(r.validatingFields,ne))}),w.state.next({validatingFields:r.validatingFields,isValidating:!Pn(r.validatingFields)}))},O=(k,I=[],ne,Ce,ve=!0,ye=!0)=>{if(Ce&&ne&&!n.disabled){if(f.action=!0,ye&&Array.isArray(Ue(i,k))){const Oe=ne(Ue(i,k),Ce.argA,Ce.argB);ve&&St(i,k,Oe)}if(ye&&Array.isArray(Ue(r.errors,k))){const Oe=ne(Ue(r.errors,k),Ce.argA,Ce.argB);ve&&St(r.errors,k,Oe),y5(r.errors,k)}if((b.touchedFields||y.touchedFields)&&ye&&Array.isArray(Ue(r.touchedFields,k))){const Oe=ne(Ue(r.touchedFields,k),Ce.argA,Ce.argB);ve&&St(r.touchedFields,k,Oe)}(b.dirtyFields||y.dirtyFields)&&(r.dirtyFields=Di(c,u)),w.state.next({name:k,isDirty:ae(k,I),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else St(u,k,I)},N=(k,I)=>{St(r.errors,k,I),w.state.next({errors:r.errors})},D=k=>{r.errors=k,w.state.next({errors:r.errors,isValid:!1})},B=(k,I,ne,Ce)=>{const ve=Ue(i,k);if(ve){const ye=Ue(u,k,Kt(ne)?Ue(c,k):ne);Kt(ye)||Ce&&Ce.defaultChecked||I?St(u,k,I?ye:P0(ve._f)):he(k,ye),f.mount&&E()}},J=(k,I,ne,Ce,ve)=>{let ye=!1,Oe=!1;const Ze={name:k};if(!n.disabled){if(!ne||Ce){(b.isDirty||y.isDirty)&&(Oe=r.isDirty,r.isDirty=Ze.isDirty=ae(),ye=Oe!==Ze.isDirty);const Ge=ta(Ue(c,k),I);Oe=!!Ue(r.dirtyFields,k),Ge?tn(r.dirtyFields,k):St(r.dirtyFields,k,!0),Ze.dirtyFields=r.dirtyFields,ye=ye||(b.dirtyFields||y.dirtyFields)&&Oe!==!Ge}if(ne){const Ge=Ue(r.touchedFields,k);Ge||(St(r.touchedFields,k,ne),Ze.touchedFields=r.touchedFields,ye=ye||(b.touchedFields||y.touchedFields)&&Ge!==ne)}ye&&ve&&w.state.next(Ze)}return ye?Ze:{}},Y=(k,I,ne,Ce)=>{const ve=Ue(r.errors,k),ye=(b.isValid||y.isValid)&&Gs(I)&&r.isValid!==I;if(n.delayError&&ne?(x=_(()=>N(k,ne)),x(n.delayError)):(clearTimeout(g),x=null,ne?St(r.errors,k,ne):tn(r.errors,k)),(ne?!ta(ve,ne):ve)||!Pn(Ce)||ye){const Oe={...Ce,...ye&&Gs(I)?{isValid:I}:{},errors:r.errors,name:k};r={...r,...Oe},w.state.next(Oe)}},Q=async k=>{A(k,!0);const I=await n.resolver(u,n.context,m5(k||m.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return A(k),I},se=async k=>{const{errors:I}=await Q(k);if(k)for(const ne of k){const Ce=Ue(I,ne);Ce?St(r.errors,ne,Ce):tn(r.errors,ne)}else r.errors=I;return I},ee=async(k,I,ne={valid:!0})=>{for(const Ce in k){const ve=k[Ce];if(ve){const{_f:ye,...Oe}=ve;if(ye){const Ze=m.array.has(ye.name),Ge=ve._f&&p5(ve._f);Ge&&b.validatingFields&&A([ye.name],!0);const Nt=await nv(ve,m.disabled,u,j,n.shouldUseNativeValidation&&!I,Ze);if(Ge&&b.validatingFields&&A([ye.name]),Nt[ye.name]&&(ne.valid=!1,I))break;!I&&(Ue(Nt,ye.name)?Ze?w5(r.errors,Nt,ye.name):St(r.errors,ye.name,Nt[ye.name]):tn(r.errors,ye.name))}!Pn(Oe)&&await ee(Oe,I,ne)}}return ne.valid},ie=()=>{for(const k of m.unMount){const I=Ue(i,k);I&&(I._f.refs?I._f.refs.every(ne=>!Qf(ne)):!Qf(I._f.ref))&&re(k)}m.unMount=new Set},ae=(k,I)=>!n.disabled&&(k&&I&&St(u,k,I),!ta(_e(),c)),ce=(k,I,ne)=>c5(k,m,{...f.mount?u:Kt(I)?c:us(k)?{[k]:I}:I},ne,I),V=k=>Zh(Ue(f.mount?u:c,k,n.shouldUnregister?Ue(c,k,[]):[])),he=(k,I,ne={})=>{const Ce=Ue(i,k);let ve=I;if(Ce){const ye=Ce._f;ye&&(!ye.disabled&&St(u,k,_y(I,ye)),ve=su(ye.ref)&&Yn(I)?"":I,jy(ye.ref)?[...ye.ref.options].forEach(Oe=>Oe.selected=ve.includes(Oe.value)):ye.refs?go(ye.ref)?ye.refs.forEach(Oe=>{(!Oe.defaultChecked||!Oe.disabled)&&(Array.isArray(ve)?Oe.checked=!!ve.find(Ze=>Ze===Oe.value):Oe.checked=ve===Oe.value||!!ve)}):ye.refs.forEach(Oe=>Oe.checked=Oe.value===ve):Qh(ye.ref)?ye.ref.value="":(ye.ref.value=ve,ye.ref.type||w.state.next({name:k,values:yn(u)})))}(ne.shouldDirty||ne.shouldTouch)&&J(k,ve,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&je(k)},xe=(k,I,ne)=>{for(const Ce in I){if(!I.hasOwnProperty(Ce))return;const ve=I[Ce],ye=k+"."+Ce,Oe=Ue(i,ye);(m.array.has(k)||nn(ve)||Oe&&!Oe._f)&&!Ra(ve)?xe(ye,ve,ne):he(ye,ve,ne)}},U=(k,I,ne={})=>{const Ce=Ue(i,k),ve=m.array.has(k),ye=yn(I);St(u,k,ye),ve?(w.array.next({name:k,values:yn(u)}),(b.isDirty||b.dirtyFields||y.isDirty||y.dirtyFields)&&ne.shouldDirty&&w.state.next({name:k,dirtyFields:Di(c,u),isDirty:ae(k,ye)})):Ce&&!Ce._f&&!Yn(ye)?xe(k,ye,ne):he(k,ye,ne),J0(k,m)&&w.state.next({...r,name:k}),w.state.next({name:f.mount?k:void 0,values:yn(u)})},P=async k=>{f.mount=!0;const I=k.target;let ne=I.name,Ce=!0;const ve=Ue(i,ne),ye=Ge=>{Ce=Number.isNaN(Ge)||Ra(Ge)&&isNaN(Ge.getTime())||ta(Ge,Ue(u,ne,Ge))},Oe=Y0(n.mode),Ze=Y0(n.reValidateMode);if(ve){let Ge,Nt;const Ee=I.type?P0(ve._f):n5(k),Ae=k.type===Q0.BLUR||k.type===Q0.FOCUS_OUT,Qe=!g5(ve._f)&&!n.resolver&&!Ue(r.errors,ne)&&!ve._f.deps||b5(Ae,Ue(r.touchedFields,ne),r.isSubmitted,Ze,Oe),Dt=J0(ne,m,Ae);St(u,ne,Ee),Ae?(!I||!I.readOnly)&&(ve._f.onBlur&&ve._f.onBlur(k),x&&x(0)):ve._f.onChange&&ve._f.onChange(k);const rt=J(ne,Ee,Ae),$t=!Pn(rt)||Dt;if(!Ae&&w.state.next({name:ne,type:k.type,values:yn(u)}),Qe)return(b.isValid||y.isValid)&&(n.mode==="onBlur"?Ae&&E():Ae||E()),$t&&w.state.next({name:ne,...Dt?{}:rt});if(!Ae&&Dt&&w.state.next({...r}),n.resolver){const{errors:Ft}=await Q([ne]);if(ye(Ee),Ce){const Ys=ev(r.errors,i,ne),Xs=ev(Ft,i,Ys.name||ne);Ge=Xs.error,ne=Xs.name,Nt=Pn(Ft)}}else A([ne],!0),Ge=(await nv(ve,m.disabled,u,j,n.shouldUseNativeValidation))[ne],A([ne]),ye(Ee),Ce&&(Ge?Nt=!1:(b.isValid||y.isValid)&&(Nt=await ee(i,!0)));Ce&&(ve._f.deps&&(!Array.isArray(ve._f.deps)||ve._f.deps.length>0)&&je(ve._f.deps),Y(ne,Nt,Ge,rt))}},me=(k,I)=>{if(Ue(r.errors,I)&&k.focus)return k.focus(),1},je=async(k,I={})=>{let ne,Ce;const ve=Yl(k);if(n.resolver){const ye=await se(Kt(k)?k:ve);ne=Pn(ye),Ce=k?!ve.some(Oe=>Ue(ye,Oe)):ne}else k?(Ce=(await Promise.all(ve.map(async ye=>{const Oe=Ue(i,ye);return await ee(Oe&&Oe._f?{[ye]:Oe}:Oe)}))).every(Boolean),!(!Ce&&!r.isValid)&&E()):Ce=ne=await ee(i);return w.state.next({...!us(k)||(b.isValid||y.isValid)&&ne!==r.isValid?{}:{name:k},...n.resolver||!k?{isValid:ne}:{},errors:r.errors}),I.shouldFocus&&!Ce&&Xl(i,me,k?ve:m.mount),Ce},_e=(k,I)=>{let ne={...f.mount?u:c};return I&&(ne=Sy(I.dirtyFields?r.dirtyFields:r.touchedFields,ne)),Kt(k)?ne:us(k)?Ue(ne,k):k.map(Ce=>Ue(ne,Ce))},C=(k,I)=>({invalid:!!Ue((I||r).errors,k),isDirty:!!Ue((I||r).dirtyFields,k),error:Ue((I||r).errors,k),isValidating:!!Ue(r.validatingFields,k),isTouched:!!Ue((I||r).touchedFields,k)}),W=k=>{k&&Yl(k).forEach(I=>tn(r.errors,I)),w.state.next({errors:k?r.errors:{}})},M=(k,I,ne)=>{const Ce=(Ue(i,k,{_f:{}})._f||{}).ref,ve=Ue(r.errors,k)||{},{ref:ye,message:Oe,type:Ze,...Ge}=ve;St(r.errors,k,{...Ge,...I,ref:Ce}),w.state.next({name:k,errors:r.errors,isValid:!1}),ne&&ne.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},R=(k,I)=>zs(k)?w.state.subscribe({next:ne=>"values"in ne&&k(ce(void 0,I),ne)}):ce(k,I,!0),F=k=>w.state.subscribe({next:I=>{v5(k.name,I.name,k.exact)&&x5(I,k.formState||b,Re,k.reRenderRoot)&&k.callback({values:{...u},...r,...I,defaultValues:c})}}).unsubscribe,z=k=>(f.mount=!0,y={...y,...k.formState},F({...k,formState:y})),re=(k,I={})=>{for(const ne of k?Yl(k):m.mount)m.mount.delete(ne),m.array.delete(ne),I.keepValue||(tn(i,ne),tn(u,ne)),!I.keepError&&tn(r.errors,ne),!I.keepDirty&&tn(r.dirtyFields,ne),!I.keepTouched&&tn(r.touchedFields,ne),!I.keepIsValidating&&tn(r.validatingFields,ne),!n.shouldUnregister&&!I.keepDefaultValue&&tn(c,ne);w.state.next({values:yn(u)}),w.state.next({...r,...I.keepDirty?{isDirty:ae()}:{}}),!I.keepIsValid&&E()},ge=({disabled:k,name:I})=>{(Gs(k)&&f.mount||k||m.disabled.has(I))&&(k?m.disabled.add(I):m.disabled.delete(I))},Ne=(k,I={})=>{let ne=Ue(i,k);const Ce=Gs(I.disabled)||Gs(n.disabled);return St(i,k,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:k}},name:k,mount:!0,...I}}),m.mount.add(k),ne?ge({disabled:Gs(I.disabled)?I.disabled:n.disabled,name:k}):B(k,!0,I.value),{...Ce?{disabled:I.disabled||n.disabled}:{},...n.progressive?{required:!!I.required,min:Vl(I.min),max:Vl(I.max),minLength:Vl(I.minLength),maxLength:Vl(I.maxLength),pattern:Vl(I.pattern)}:{},name:k,onChange:P,onBlur:P,ref:ve=>{if(ve){Ne(k,I),ne=Ue(i,k);const ye=Kt(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,Oe=u5(ye),Ze=ne._f.refs||[];if(Oe?Ze.find(Ge=>Ge===ye):ye===ne._f.ref)return;St(i,k,{_f:{...ne._f,...Oe?{refs:[...Ze.filter(Qf),ye,...Array.isArray(Ue(c,k))?[{}]:[]],ref:{type:ye.type,name:k}}:{ref:ye}}}),B(k,!1,void 0,ye)}else ne=Ue(i,k,{}),ne._f&&(ne._f.mount=!1),(n.shouldUnregister||I.shouldUnregister)&&!(r5(m.array,k)&&f.action)&&m.unMount.add(k)}}},H=()=>n.shouldFocusError&&Xl(i,me,m.mount),Se=k=>{Gs(k)&&(w.state.next({disabled:k}),Xl(i,(I,ne)=>{const Ce=Ue(i,ne);Ce&&(I.disabled=Ce._f.disabled||k,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(ve=>{ve.disabled=Ce._f.disabled||k}))},0,!1))},ke=(k,I)=>async ne=>{let Ce;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let ve=yn(u);if(w.state.next({isSubmitting:!0}),n.resolver){const{errors:ye,values:Oe}=await Q();r.errors=ye,ve=yn(Oe)}else await ee(i);if(m.disabled.size)for(const ye of m.disabled)tn(ve,ye);if(tn(r.errors,"root"),Pn(r.errors)){w.state.next({errors:{}});try{await k(ve,ne)}catch(ye){Ce=ye}}else I&&await I({...r.errors},ne),H(),setTimeout(H);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Pn(r.errors)&&!Ce,submitCount:r.submitCount+1,errors:r.errors}),Ce)throw Ce},fe=(k,I={})=>{Ue(i,k)&&(Kt(I.defaultValue)?U(k,yn(Ue(c,k))):(U(k,I.defaultValue),St(c,k,yn(I.defaultValue))),I.keepTouched||tn(r.touchedFields,k),I.keepDirty||(tn(r.dirtyFields,k),r.isDirty=I.defaultValue?ae(k,yn(Ue(c,k))):ae()),I.keepError||(tn(r.errors,k),b.isValid&&E()),w.state.next({...r}))},Te=(k,I={})=>{const ne=k?yn(k):c,Ce=yn(ne),ve=Pn(k),ye=ve?c:Ce;if(I.keepDefaultValues||(c=ne),!I.keepValues){if(I.keepDirtyValues){const Oe=new Set([...m.mount,...Object.keys(Di(c,u))]);for(const Ze of Array.from(Oe))Ue(r.dirtyFields,Ze)?St(ye,Ze,Ue(u,Ze)):U(Ze,Ue(ye,Ze))}else{if(Hh&&Kt(k))for(const Oe of m.mount){const Ze=Ue(i,Oe);if(Ze&&Ze._f){const Ge=Array.isArray(Ze._f.refs)?Ze._f.refs[0]:Ze._f.ref;if(su(Ge)){const Nt=Ge.closest("form");if(Nt){Nt.reset();break}}}}if(I.keepFieldsRef)for(const Oe of m.mount)U(Oe,Ue(ye,Oe));else i={}}u=n.shouldUnregister?I.keepDefaultValues?yn(c):{}:yn(ye),w.array.next({values:{...ye}}),w.state.next({values:{...ye}})}m={mount:I.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!b.isValid||!!I.keepIsValid||!!I.keepDirtyValues,f.watch=!!n.shouldUnregister,w.state.next({submitCount:I.keepSubmitCount?r.submitCount:0,isDirty:ve?!1:I.keepDirty?r.isDirty:!!(I.keepDefaultValues&&!ta(k,c)),isSubmitted:I.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ve?{}:I.keepDirtyValues?I.keepDefaultValues&&u?Di(c,u):r.dirtyFields:I.keepDefaultValues&&k?Di(c,k):I.keepDirty?r.dirtyFields:{},touchedFields:I.keepTouched?r.touchedFields:{},errors:I.keepErrors?r.errors:{},isSubmitSuccessful:I.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:c})},Z=(k,I)=>Te(zs(k)?k(u):k,I),be=(k,I={})=>{const ne=Ue(i,k),Ce=ne&&ne._f;if(Ce){const ve=Ce.refs?Ce.refs[0]:Ce.ref;ve.focus&&(ve.focus(),I.shouldSelect&&zs(ve.select)&&ve.select())}},Re=k=>{r={...r,...k}},et={control:{register:Ne,unregister:re,getFieldState:C,handleSubmit:ke,setError:M,_subscribe:F,_runSchema:Q,_focusError:H,_getWatch:ce,_getDirty:ae,_setValid:E,_setFieldArray:O,_setDisabledField:ge,_setErrors:D,_getFieldArray:V,_reset:Te,_resetDefaultValues:()=>zs(n.defaultValues)&&n.defaultValues().then(k=>{Z(k,n.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:Se,_subjects:w,_proxyFormState:b,get _fields(){return i},get _formValues(){return u},get _state(){return f},set _state(k){f=k},get _defaultValues(){return c},get _names(){return m},set _names(k){m=k},get _formState(){return r},get _options(){return n},set _options(k){n={...n,...k}}},subscribe:z,trigger:je,register:Ne,handleSubmit:ke,watch:R,setValue:U,getValues:_e,reset:Z,resetField:fe,clearErrors:W,unregister:re,setError:M,setFocus:be,getFieldState:C};return{...et,formControl:et}}function Wh(e={}){const n=bt.useRef(void 0),r=bt.useRef(void 0),[i,c]=bt.useState({isDirty:!1,isValidating:!1,isLoading:zs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:zs(e.defaultValues)?void 0:e.defaultValues});if(!n.current)if(e.formControl)n.current={...e.formControl,formState:i},e.defaultValues&&!zs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...m}=j5(e);n.current={...m,formState:i}}const u=n.current.control;return u._options=e,o5(()=>{const f=u._subscribe({formState:u._proxyFormState,callback:()=>c({...u._formState}),reRenderRoot:!0});return c(m=>({...m,isReady:!0})),u._formState.isReady=!0,f},[u]),bt.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),bt.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),bt.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),bt.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),bt.useEffect(()=>{if(u._proxyFormState.isDirty){const f=u._getDirty();f!==i.isDirty&&u._subjects.state.next({isDirty:f})}},[u,i.isDirty]),bt.useEffect(()=>{e.values&&!ta(e.values,r.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),r.current=e.values,c(f=>({...f}))):u._resetDefaultValues()},[u,e.values]),bt.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),n.current.formState=l5(i,u),n.current}function pe(e,n,r){function i(m,x){var g;Object.defineProperty(m,"_zod",{value:m._zod??{},enumerable:!1}),(g=m._zod).traits??(g.traits=new Set),m._zod.traits.add(e),n(m,x);for(const b in f.prototype)b in m||Object.defineProperty(m,b,{value:f.prototype[b].bind(m)});m._zod.constr=f,m._zod.def=x}const c=r?.Parent??Object;class u extends c{}Object.defineProperty(u,"name",{value:e});function f(m){var x;const g=r?.Parent?new u:this;i(g,m),(x=g._zod).deferred??(x.deferred=[]);for(const b of g._zod.deferred)b();return g}return Object.defineProperty(f,"init",{value:i}),Object.defineProperty(f,Symbol.hasInstance,{value:m=>r?.Parent&&m instanceof r.Parent?!0:m?._zod?.traits?.has(e)}),Object.defineProperty(f,"name",{value:e}),f}class zi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class ky extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const Ty={};function qa(e){return Ty}function E5(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,c])=>n.indexOf(+i)===-1).map(([i,c])=>c)}function hh(e,n){return typeof n=="bigint"?n.toString():n}function Gh(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function Kh(e){return e==null}function Ph(e){const n=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(n,r)}const sv=Symbol("evaluating");function Et(e,n,r){let i;Object.defineProperty(e,n,{get(){if(i!==sv)return i===void 0&&(i=sv,i=r()),i},set(c){Object.defineProperty(e,n,{value:c})},configurable:!0})}function Za(e,n,r){Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Va(...e){const n={};for(const r of e){const i=Object.getOwnPropertyDescriptors(r);Object.assign(n,i)}return Object.defineProperties({},n)}function rv(e){return JSON.stringify(e)}const Ay="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function au(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const N5=Gh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function ao(e){if(au(e)===!1)return!1;const n=e.constructor;if(n===void 0)return!0;const r=n.prototype;return!(au(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Dy(e){return ao(e)?{...e}:Array.isArray(e)?[...e]:e}const _5=new Set(["string","number","symbol"]);function Ui(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function aa(e,n,r){const i=new e._zod.constr(n??e._zod.def);return(!n||r?.parent)&&(i._zod.parent=e),i}function Fe(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function C5(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}function k5(e,n){const r=e._zod.def,i=Va(e._zod.def,{get shape(){const c={};for(const u in n){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(c[u]=r.shape[u])}return Za(this,"shape",c),c},checks:[]});return aa(e,i)}function T5(e,n){const r=e._zod.def,i=Va(e._zod.def,{get shape(){const c={...e._zod.def.shape};for(const u in n){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);n[u]&&delete c[u]}return Za(this,"shape",c),c},checks:[]});return aa(e,i)}function A5(e,n){if(!ao(n))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const c=Va(e._zod.def,{get shape(){const u={...e._zod.def.shape,...n};return Za(this,"shape",u),u},checks:[]});return aa(e,c)}function D5(e,n){if(!ao(n))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const i={...e._zod.def.shape,...n};return Za(this,"shape",i),i},checks:e._zod.def.checks};return aa(e,r)}function M5(e,n){const r=Va(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return Za(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return aa(e,r)}function R5(e,n,r){const i=Va(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(r)for(const f in r){if(!(f in c))throw new Error(`Unrecognized key: "${f}"`);r[f]&&(u[f]=e?new e({type:"optional",innerType:c[f]}):c[f])}else for(const f in c)u[f]=e?new e({type:"optional",innerType:c[f]}):c[f];return Za(this,"shape",u),u},checks:[]});return aa(n,i)}function z5(e,n,r){const i=Va(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(r)for(const f in r){if(!(f in u))throw new Error(`Unrecognized key: "${f}"`);r[f]&&(u[f]=new e({type:"nonoptional",innerType:c[f]}))}else for(const f in c)u[f]=new e({type:"nonoptional",innerType:c[f]});return Za(this,"shape",u),u},checks:[]});return aa(n,i)}function Mi(e,n=0){if(e.aborted===!0)return!0;for(let r=n;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function My(e,n){return n.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(e),r})}function Zc(e){return typeof e=="string"?e:e?.message}function $a(e,n,r){const i={...e,path:e.path??[]};if(!e.message){const c=Zc(e.inst?._zod.def?.error?.(e))??Zc(n?.error?.(e))??Zc(r.customError?.(e))??Zc(r.localeError?.(e))??"Invalid input";i.message=c}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function Yh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function io(...e){const[n,r,i]=e;return typeof n=="string"?{message:n,code:"custom",input:r,inst:i}:{...n}}const Ry=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,hh,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Xh=pe("$ZodError",Ry),vu=pe("$ZodError",Ry,{Parent:Error});function O5(e,n=r=>r.message){const r={},i=[];for(const c of e.issues)c.path.length>0?(r[c.path[0]]=r[c.path[0]]||[],r[c.path[0]].push(n(c))):i.push(n(c));return{formErrors:i,fieldErrors:r}}function L5(e,n=r=>r.message){const r={_errors:[]},i=c=>{for(const u of c.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(f=>i({issues:f}));else if(u.code==="invalid_key")i({issues:u.issues});else if(u.code==="invalid_element")i({issues:u.issues});else if(u.path.length===0)r._errors.push(n(u));else{let f=r,m=0;for(;m<u.path.length;){const x=u.path[m];m===u.path.length-1?(f[x]=f[x]||{_errors:[]},f[x]._errors.push(n(u))):f[x]=f[x]||{_errors:[]},f=f[x],m++}}};return i(e),r}const bu=e=>(n,r,i,c)=>{const u=i?Object.assign(i,{async:!1}):{async:!1},f=n._zod.run({value:r,issues:[]},u);if(f instanceof Promise)throw new zi;if(f.issues.length){const m=new(c?.Err??e)(f.issues.map(x=>$a(x,u,qa())));throw Ay(m,c?.callee),m}return f.value},U5=bu(vu),yu=e=>async(n,r,i,c)=>{const u=i?Object.assign(i,{async:!0}):{async:!0};let f=n._zod.run({value:r,issues:[]},u);if(f instanceof Promise&&(f=await f),f.issues.length){const m=new(c?.Err??e)(f.issues.map(x=>$a(x,u,qa())));throw Ay(m,c?.callee),m}return f.value},B5=yu(vu),wu=e=>(n,r,i)=>{const c=i?{...i,async:!1}:{async:!1},u=n._zod.run({value:r,issues:[]},c);if(u instanceof Promise)throw new zi;return u.issues.length?{success:!1,error:new(e??Xh)(u.issues.map(f=>$a(f,c,qa())))}:{success:!0,data:u.value}},q5=wu(vu),Su=e=>async(n,r,i)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:r,issues:[]},c);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(f=>$a(f,c,qa())))}:{success:!0,data:u.value}},$5=Su(vu),H5=e=>(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return bu(e)(n,r,c)},Z5=e=>(n,r,i)=>bu(e)(n,r,i),V5=e=>async(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return yu(e)(n,r,c)},F5=e=>async(n,r,i)=>yu(e)(n,r,i),Q5=e=>(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return wu(e)(n,r,c)},I5=e=>(n,r,i)=>wu(e)(n,r,i),W5=e=>async(n,r,i)=>{const c=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Su(e)(n,r,c)},G5=e=>async(n,r,i)=>Su(e)(n,r,i),K5=/^[cC][^\s-]{8,}$/,P5=/^[0-9a-z]+$/,Y5=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,X5=/^[0-9a-vA-V]{20}$/,J5=/^[A-Za-z0-9]{27}$/,eT=/^[a-zA-Z0-9_-]{21}$/,tT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,av=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,sT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,rT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function aT(){return new RegExp(rT,"u")}const iT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,oT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uT=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,zy=/^[A-Za-z0-9_-]*$/,dT=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,fT=/^\+(?:[0-9]){6,14}[0-9]$/,Oy="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hT=new RegExp(`^${Oy}$`);function Ly(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function mT(e){return new RegExp(`^${Ly(e)}$`)}function pT(e){const n=Ly({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${r.join("|")})`;return new RegExp(`^${Oy}T(?:${i})$`)}const gT=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},xT=/^[^A-Z]*$/,vT=/^[^a-z]*$/,Ps=pe("$ZodCheck",(e,n)=>{var r;e._zod??(e._zod={}),e._zod.def=n,(r=e._zod).onattach??(r.onattach=[])}),bT=pe("$ZodCheckMaxLength",(e,n)=>{var r;Ps.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!Kh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<c&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const c=i.value;if(c.length<=n.maximum)return;const f=Yh(c);i.issues.push({origin:f,code:"too_big",maximum:n.maximum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),yT=pe("$ZodCheckMinLength",(e,n)=>{var r;Ps.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!Kh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>c&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const c=i.value;if(c.length>=n.minimum)return;const f=Yh(c);i.issues.push({origin:f,code:"too_small",minimum:n.minimum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),wT=pe("$ZodCheckLengthEquals",(e,n)=>{var r;Ps.init(e,n),(r=e._zod.def).when??(r.when=i=>{const c=i.value;return!Kh(c)&&c.length!==void 0}),e._zod.onattach.push(i=>{const c=i._zod.bag;c.minimum=n.length,c.maximum=n.length,c.length=n.length}),e._zod.check=i=>{const c=i.value,u=c.length;if(u===n.length)return;const f=Yh(c),m=u>n.length;i.issues.push({origin:f,...m?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),ju=pe("$ZodCheckStringFormat",(e,n)=>{var r,i;Ps.init(e,n),e._zod.onattach.push(c=>{const u=c._zod.bag;u.format=n.format,n.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(n.pattern))}),n.pattern?(r=e._zod).check??(r.check=c=>{n.pattern.lastIndex=0,!n.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:n.format,input:c.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),ST=pe("$ZodCheckRegex",(e,n)=>{ju.init(e,n),e._zod.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),jT=pe("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=xT),ju.init(e,n)}),ET=pe("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=vT),ju.init(e,n)}),NT=pe("$ZodCheckIncludes",(e,n)=>{Ps.init(e,n);const r=Ui(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${r}`:r);n.pattern=i,e._zod.onattach.push(c=>{const u=c._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(i)}),e._zod.check=c=>{c.value.includes(n.includes,n.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:c.value,inst:e,continue:!n.abort})}}),_T=pe("$ZodCheckStartsWith",(e,n)=>{Ps.init(e,n);const r=new RegExp(`^${Ui(n.prefix)}.*`);n.pattern??(n.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),CT=pe("$ZodCheckEndsWith",(e,n)=>{Ps.init(e,n);const r=new RegExp(`.*${Ui(n.suffix)}$`);n.pattern??(n.pattern=r),e._zod.onattach.push(i=>{const c=i._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(r)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),kT=pe("$ZodCheckOverwrite",(e,n)=>{Ps.init(e,n),e._zod.check=r=>{r.value=n.tx(r.value)}});class TT{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(f=>f),c=Math.min(...i.map(f=>f.length-f.trimStart().length)),u=i.map(f=>f.slice(c)).map(f=>" ".repeat(this.indent*2)+f);for(const f of u)this.content.push(f)}compile(){const n=Function,r=this?.args,c=[...(this?.content??[""]).map(u=>`  ${u}`)];return new n(...r,c.join(`
`))}}const AT={major:4,minor:1,patch:12},sn=pe("$ZodType",(e,n)=>{var r;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=AT;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const c of i)for(const u of c._zod.onattach)u(e);if(i.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const c=(f,m,x)=>{let g=Mi(f),b;for(const y of m){if(y._zod.def.when){if(!y._zod.def.when(f))continue}else if(g)continue;const w=f.issues.length,j=y._zod.check(f);if(j instanceof Promise&&x?.async===!1)throw new zi;if(b||j instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await j,f.issues.length!==w&&(g||(g=Mi(f,w)))});else{if(f.issues.length===w)continue;g||(g=Mi(f,w))}}return b?b.then(()=>f):f},u=(f,m,x)=>{if(Mi(f))return f.aborted=!0,f;const g=c(m,i,x);if(g instanceof Promise){if(x.async===!1)throw new zi;return g.then(b=>e._zod.parse(b,x))}return e._zod.parse(g,x)};e._zod.run=(f,m)=>{if(m.skipChecks)return e._zod.parse(f,m);if(m.direction==="backward"){const g=e._zod.parse({value:f.value,issues:[]},{...m,skipChecks:!0});return g instanceof Promise?g.then(b=>u(b,f,m)):u(g,f,m)}const x=e._zod.parse(f,m);if(x instanceof Promise){if(m.async===!1)throw new zi;return x.then(g=>c(g,i,m))}return c(x,i,m)}}e["~standard"]={validate:c=>{try{const u=q5(e,c);return u.success?{value:u.data}:{issues:u.error?.issues}}catch{return $5(e,c).then(f=>f.success?{value:f.data}:{issues:f.error?.issues})}},vendor:"zod",version:1}}),Jh=pe("$ZodString",(e,n)=>{sn.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??gT(e._zod.bag),e._zod.parse=(r,i)=>{if(n.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ot=pe("$ZodStringFormat",(e,n)=>{ju.init(e,n),Jh.init(e,n)}),DT=pe("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=nT),Ot.init(e,n)}),MT=pe("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=av(i))}else n.pattern??(n.pattern=av());Ot.init(e,n)}),RT=pe("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=sT),Ot.init(e,n)}),zT=pe("$ZodURL",(e,n)=>{Ot.init(e,n),e._zod.check=r=>{try{const i=r.value.trim(),c=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(c.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:dT.source,input:r.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:r.value,inst:e,continue:!n.abort})),n.normalize?r.value=c.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!n.abort})}}}),OT=pe("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=aT()),Ot.init(e,n)}),LT=pe("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=eT),Ot.init(e,n)}),UT=pe("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=K5),Ot.init(e,n)}),BT=pe("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=P5),Ot.init(e,n)}),qT=pe("$ZodULID",(e,n)=>{n.pattern??(n.pattern=Y5),Ot.init(e,n)}),$T=pe("$ZodXID",(e,n)=>{n.pattern??(n.pattern=X5),Ot.init(e,n)}),HT=pe("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=J5),Ot.init(e,n)}),ZT=pe("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=pT(n)),Ot.init(e,n)}),VT=pe("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=hT),Ot.init(e,n)}),FT=pe("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=mT(n)),Ot.init(e,n)}),QT=pe("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=tT),Ot.init(e,n)}),IT=pe("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=iT),Ot.init(e,n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv4"})}),WT=pe("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=lT),Ot.init(e,n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!n.abort})}}}),GT=pe("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=oT),Ot.init(e,n)}),KT=pe("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=cT),Ot.init(e,n),e._zod.check=r=>{const i=r.value.split("/");try{if(i.length!==2)throw new Error;const[c,u]=i;if(!u)throw new Error;const f=Number(u);if(`${f}`!==u)throw new Error;if(f<0||f>128)throw new Error;new URL(`http://[${c}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!n.abort})}}});function Uy(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const PT=pe("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=uT),Ot.init(e,n),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Uy(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!n.abort})}});function YT(e){if(!zy.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=n.padEnd(Math.ceil(n.length/4)*4,"=");return Uy(r)}const XT=pe("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=zy),Ot.init(e,n),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{YT(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!n.abort})}}),JT=pe("$ZodE164",(e,n)=>{n.pattern??(n.pattern=fT),Ot.init(e,n)});function eA(e,n=null){try{const r=e.split(".");if(r.length!==3)return!1;const[i]=r;if(!i)return!1;const c=JSON.parse(atob(i));return!("typ"in c&&c?.typ!=="JWT"||!c.alg||n&&(!("alg"in c)||c.alg!==n))}catch{return!1}}const tA=pe("$ZodJWT",(e,n)=>{Ot.init(e,n),e._zod.check=r=>{eA(r.value,n.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!n.abort})}}),nA=pe("$ZodUnknown",(e,n)=>{sn.init(e,n),e._zod.parse=r=>r}),sA=pe("$ZodNever",(e,n)=>{sn.init(e,n),e._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function iv(e,n,r){e.issues.length&&n.issues.push(...My(r,e.issues)),n.value[r]=e.value}const rA=pe("$ZodArray",(e,n)=>{sn.init(e,n),e._zod.parse=(r,i)=>{const c=r.value;if(!Array.isArray(c))return r.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),r;r.value=Array(c.length);const u=[];for(let f=0;f<c.length;f++){const m=c[f],x=n.element._zod.run({value:m,issues:[]},i);x instanceof Promise?u.push(x.then(g=>iv(g,r,f))):iv(x,r,f)}return u.length?Promise.all(u).then(()=>r):r}});function iu(e,n,r,i){e.issues.length&&n.issues.push(...My(r,e.issues)),e.value===void 0?r in i&&(n.value[r]=void 0):n.value[r]=e.value}function By(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const r=C5(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(r)}}function qy(e,n,r,i,c,u){const f=[],m=c.keySet,x=c.catchall._zod,g=x.def.type;for(const b of Object.keys(n)){if(m.has(b))continue;if(g==="never"){f.push(b);continue}const y=x.run({value:n[b],issues:[]},i);y instanceof Promise?e.push(y.then(w=>iu(w,r,b,n))):iu(y,r,b,n)}return f.length&&r.issues.push({code:"unrecognized_keys",keys:f,input:n,inst:u}),e.length?Promise.all(e).then(()=>r):r}const aA=pe("$ZodObject",(e,n)=>{if(sn.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const m=n.shape;Object.defineProperty(n,"shape",{get:()=>{const x={...m};return Object.defineProperty(n,"shape",{value:x}),x}})}const i=Gh(()=>By(n));Et(e._zod,"propValues",()=>{const m=n.shape,x={};for(const g in m){const b=m[g]._zod;if(b.values){x[g]??(x[g]=new Set);for(const y of b.values)x[g].add(y)}}return x});const c=au,u=n.catchall;let f;e._zod.parse=(m,x)=>{f??(f=i.value);const g=m.value;if(!c(g))return m.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),m;m.value={};const b=[],y=f.shape;for(const w of f.keys){const _=y[w]._zod.run({value:g[w],issues:[]},x);_ instanceof Promise?b.push(_.then(E=>iu(E,m,w,g))):iu(_,m,w,g)}return u?qy(b,g,m,x,i.value,e):b.length?Promise.all(b).then(()=>m):m}}),iA=pe("$ZodObjectJIT",(e,n)=>{aA.init(e,n);const r=e._zod.parse,i=Gh(()=>By(n)),c=w=>{const j=new TT(["shape","payload","ctx"]),_=i.value,E=D=>{const B=rv(D);return`shape[${B}]._zod.run({ value: input[${B}], issues: [] }, ctx)`};j.write("const input = payload.value;");const A=Object.create(null);let O=0;for(const D of _.keys)A[D]=`key_${O++}`;j.write("const newResult = {};");for(const D of _.keys){const B=A[D],J=rv(D);j.write(`const ${B} = ${E(D)};`),j.write(`
        if (${B}.issues.length) {
          payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${J}, ...iss.path] : [${J}]
          })));
        }
        
        
        if (${B}.value === undefined) {
          if (${J} in input) {
            newResult[${J}] = undefined;
          }
        } else {
          newResult[${J}] = ${B}.value;
        }
        
      `)}j.write("payload.value = newResult;"),j.write("return payload;");const N=j.compile();return(D,B)=>N(w,D,B)};let u;const f=au,m=!Ty.jitless,g=m&&N5.value,b=n.catchall;let y;e._zod.parse=(w,j)=>{y??(y=i.value);const _=w.value;return f(_)?m&&g&&j?.async===!1&&j.jitless!==!0?(u||(u=c(n.shape)),w=u(w,j),b?qy([],_,w,j,y,e):w):r(w,j):(w.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),w)}});function lv(e,n,r,i){for(const u of e)if(u.issues.length===0)return n.value=u.value,n;const c=e.filter(u=>!Mi(u));return c.length===1?(n.value=c[0].value,c[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:r,errors:e.map(u=>u.issues.map(f=>$a(f,i,qa())))}),n)}const lA=pe("$ZodUnion",(e,n)=>{sn.init(e,n),Et(e._zod,"optin",()=>n.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Et(e._zod,"optout",()=>n.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Et(e._zod,"values",()=>{if(n.options.every(c=>c._zod.values))return new Set(n.options.flatMap(c=>Array.from(c._zod.values)))}),Et(e._zod,"pattern",()=>{if(n.options.every(c=>c._zod.pattern)){const c=n.options.map(u=>u._zod.pattern);return new RegExp(`^(${c.map(u=>Ph(u.source)).join("|")})$`)}});const r=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(c,u)=>{if(r)return i(c,u);let f=!1;const m=[];for(const x of n.options){const g=x._zod.run({value:c.value,issues:[]},u);if(g instanceof Promise)m.push(g),f=!0;else{if(g.issues.length===0)return g;m.push(g)}}return f?Promise.all(m).then(x=>lv(x,c,e,u)):lv(m,c,e,u)}}),oA=pe("$ZodIntersection",(e,n)=>{sn.init(e,n),e._zod.parse=(r,i)=>{const c=r.value,u=n.left._zod.run({value:c,issues:[]},i),f=n.right._zod.run({value:c,issues:[]},i);return u instanceof Promise||f instanceof Promise?Promise.all([u,f]).then(([x,g])=>ov(r,x,g)):ov(r,u,f)}});function mh(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(ao(e)&&ao(n)){const r=Object.keys(n),i=Object.keys(e).filter(u=>r.indexOf(u)!==-1),c={...e,...n};for(const u of i){const f=mh(e[u],n[u]);if(!f.valid)return{valid:!1,mergeErrorPath:[u,...f.mergeErrorPath]};c[u]=f.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let i=0;i<e.length;i++){const c=e[i],u=n[i],f=mh(c,u);if(!f.valid)return{valid:!1,mergeErrorPath:[i,...f.mergeErrorPath]};r.push(f.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ov(e,n,r){if(n.issues.length&&e.issues.push(...n.issues),r.issues.length&&e.issues.push(...r.issues),Mi(e))return e;const i=mh(n.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const cA=pe("$ZodEnum",(e,n)=>{sn.init(e,n);const r=E5(n.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=new RegExp(`^(${r.filter(c=>_5.has(typeof c)).map(c=>typeof c=="string"?Ui(c):c.toString()).join("|")})$`),e._zod.parse=(c,u)=>{const f=c.value;return i.has(f)||c.issues.push({code:"invalid_value",values:r,input:f,inst:e}),c}}),uA=pe("$ZodLiteral",(e,n)=>{if(sn.init(e,n),n.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(n.values),e._zod.pattern=new RegExp(`^(${n.values.map(r=>typeof r=="string"?Ui(r):r?Ui(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,i)=>{const c=r.value;return e._zod.values.has(c)||r.issues.push({code:"invalid_value",values:n.values,input:c,inst:e}),r}}),dA=pe("$ZodTransform",(e,n)=>{sn.init(e,n),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new ky(e.constructor.name);const c=n.transform(r.value,r);if(i.async)return(c instanceof Promise?c:Promise.resolve(c)).then(f=>(r.value=f,r));if(c instanceof Promise)throw new zi;return r.value=c,r}});function cv(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const fA=pe("$ZodOptional",(e,n)=>{sn.init(e,n),e._zod.optin="optional",e._zod.optout="optional",Et(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),Et(e._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${Ph(r.source)})?$`):void 0}),e._zod.parse=(r,i)=>{if(n.innerType._zod.optin==="optional"){const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>cv(u,r.value)):cv(c,r.value)}return r.value===void 0?r:n.innerType._zod.run(r,i)}}),hA=pe("$ZodNullable",(e,n)=>{sn.init(e,n),Et(e._zod,"optin",()=>n.innerType._zod.optin),Et(e._zod,"optout",()=>n.innerType._zod.optout),Et(e._zod,"pattern",()=>{const r=n.innerType._zod.pattern;return r?new RegExp(`^(${Ph(r.source)}|null)$`):void 0}),Et(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(r,i)=>r.value===null?r:n.innerType._zod.run(r,i)}),mA=pe("$ZodDefault",(e,n)=>{sn.init(e,n),e._zod.optin="optional",Et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);if(r.value===void 0)return r.value=n.defaultValue,r;const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>uv(u,n)):uv(c,n)}});function uv(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const pA=pe("$ZodPrefault",(e,n)=>{sn.init(e,n),e._zod.optin="optional",Et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=n.defaultValue),n.innerType._zod.run(r,i))}),gA=pe("$ZodNonOptional",(e,n)=>{sn.init(e,n),Et(e._zod,"values",()=>{const r=n.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),e._zod.parse=(r,i)=>{const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>dv(u,e)):dv(c,e)}});function dv(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const xA=pe("$ZodCatch",(e,n)=>{sn.init(e,n),Et(e._zod,"optin",()=>n.innerType._zod.optin),Et(e._zod,"optout",()=>n.innerType._zod.optout),Et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(u=>(r.value=u.value,u.issues.length&&(r.value=n.catchValue({...r,error:{issues:u.issues.map(f=>$a(f,i,qa()))},input:r.value}),r.issues=[]),r)):(r.value=c.value,c.issues.length&&(r.value=n.catchValue({...r,error:{issues:c.issues.map(u=>$a(u,i,qa()))},input:r.value}),r.issues=[]),r)}}),vA=pe("$ZodPipe",(e,n)=>{sn.init(e,n),Et(e._zod,"values",()=>n.in._zod.values),Et(e._zod,"optin",()=>n.in._zod.optin),Et(e._zod,"optout",()=>n.out._zod.optout),Et(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(r,i)=>{if(i.direction==="backward"){const u=n.out._zod.run(r,i);return u instanceof Promise?u.then(f=>Vc(f,n.in,i)):Vc(u,n.in,i)}const c=n.in._zod.run(r,i);return c instanceof Promise?c.then(u=>Vc(u,n.out,i)):Vc(c,n.out,i)}});function Vc(e,n,r){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},r)}const bA=pe("$ZodReadonly",(e,n)=>{sn.init(e,n),Et(e._zod,"propValues",()=>n.innerType._zod.propValues),Et(e._zod,"values",()=>n.innerType._zod.values),Et(e._zod,"optin",()=>n.innerType._zod.optin),Et(e._zod,"optout",()=>n.innerType._zod.optout),e._zod.parse=(r,i)=>{if(i.direction==="backward")return n.innerType._zod.run(r,i);const c=n.innerType._zod.run(r,i);return c instanceof Promise?c.then(fv):fv(c)}});function fv(e){return e.value=Object.freeze(e.value),e}const yA=pe("$ZodCustom",(e,n)=>{Ps.init(e,n),sn.init(e,n),e._zod.parse=(r,i)=>r,e._zod.check=r=>{const i=r.value,c=n.fn(i);if(c instanceof Promise)return c.then(u=>hv(u,r,i,e));hv(c,r,i,e)}});function hv(e,n,r,i){if(!e){const c={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(c.params=i._zod.def.params),n.issues.push(io(c))}}class wA{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...r){const i=r[0];if(this._map.set(n,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,n)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const r=this._map.get(n);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(n),this}get(n){const r=n._zod.parent;if(r){const i={...this.get(r)??{}};delete i.id;const c={...i,...this._map.get(n)};return Object.keys(c).length?c:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function SA(){return new wA}const Fc=SA();function jA(e,n){return new e({type:"string",...Fe(n)})}function EA(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Fe(n)})}function mv(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Fe(n)})}function NA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Fe(n)})}function _A(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Fe(n)})}function CA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Fe(n)})}function kA(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Fe(n)})}function TA(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Fe(n)})}function AA(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Fe(n)})}function DA(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Fe(n)})}function MA(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Fe(n)})}function RA(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Fe(n)})}function zA(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Fe(n)})}function OA(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Fe(n)})}function LA(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Fe(n)})}function UA(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Fe(n)})}function BA(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Fe(n)})}function qA(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Fe(n)})}function $A(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Fe(n)})}function HA(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Fe(n)})}function ZA(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Fe(n)})}function VA(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Fe(n)})}function FA(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Fe(n)})}function QA(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Fe(n)})}function IA(e,n){return new e({type:"string",format:"date",check:"string_format",...Fe(n)})}function WA(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Fe(n)})}function GA(e,n){return new e({type:"string",format:"duration",check:"string_format",...Fe(n)})}function KA(e){return new e({type:"unknown"})}function PA(e,n){return new e({type:"never",...Fe(n)})}function $y(e,n){return new bT({check:"max_length",...Fe(n),maximum:e})}function lu(e,n){return new yT({check:"min_length",...Fe(n),minimum:e})}function Hy(e,n){return new wT({check:"length_equals",...Fe(n),length:e})}function YA(e,n){return new ST({check:"string_format",format:"regex",...Fe(n),pattern:e})}function XA(e){return new jT({check:"string_format",format:"lowercase",...Fe(e)})}function JA(e){return new ET({check:"string_format",format:"uppercase",...Fe(e)})}function eD(e,n){return new NT({check:"string_format",format:"includes",...Fe(n),includes:e})}function tD(e,n){return new _T({check:"string_format",format:"starts_with",...Fe(n),prefix:e})}function nD(e,n){return new CT({check:"string_format",format:"ends_with",...Fe(n),suffix:e})}function xo(e){return new kT({check:"overwrite",tx:e})}function sD(e){return xo(n=>n.normalize(e))}function rD(){return xo(e=>e.trim())}function aD(){return xo(e=>e.toLowerCase())}function iD(){return xo(e=>e.toUpperCase())}function lD(e,n,r){return new e({type:"array",element:n,...Fe(r)})}function oD(e,n,r){return new e({type:"custom",check:"custom",fn:n,...Fe(r)})}function cD(e){const n=uD(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(io(i,r.value,n._zod.def));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=r.value),c.inst??(c.inst=n),c.continue??(c.continue=!n._zod.def.abort),r.issues.push(io(c))}},e(r.value,r)));return n}function uD(e,n){const r=new Ps({check:"custom",...Fe(n)});return r._zod.check=e,r}const dD=pe("ZodISODateTime",(e,n)=>{ZT.init(e,n),qt.init(e,n)});function fD(e){return QA(dD,e)}const hD=pe("ZodISODate",(e,n)=>{VT.init(e,n),qt.init(e,n)});function mD(e){return IA(hD,e)}const pD=pe("ZodISOTime",(e,n)=>{FT.init(e,n),qt.init(e,n)});function gD(e){return WA(pD,e)}const xD=pe("ZodISODuration",(e,n)=>{QT.init(e,n),qt.init(e,n)});function vD(e){return GA(xD,e)}const bD=(e,n)=>{Xh.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>L5(e,r)},flatten:{value:r=>O5(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,hh,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,hh,2)}},isEmpty:{get(){return e.issues.length===0}}})},Es=pe("ZodError",bD,{Parent:Error}),yD=bu(Es),wD=yu(Es),SD=wu(Es),jD=Su(Es),ED=H5(Es),ND=Z5(Es),_D=V5(Es),CD=F5(Es),kD=Q5(Es),TD=I5(Es),AD=W5(Es),DD=G5(Es),dn=pe("ZodType",(e,n)=>(sn.init(e,n),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...r)=>e.clone(Va(n,{checks:[...n.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),e.clone=(r,i)=>aa(e,r,i),e.brand=()=>e,e.register=((r,i)=>(r.add(e,i),e)),e.parse=(r,i)=>yD(e,r,i,{callee:e.parse}),e.safeParse=(r,i)=>SD(e,r,i),e.parseAsync=async(r,i)=>wD(e,r,i,{callee:e.parseAsync}),e.safeParseAsync=async(r,i)=>jD(e,r,i),e.spa=e.safeParseAsync,e.encode=(r,i)=>ED(e,r,i),e.decode=(r,i)=>ND(e,r,i),e.encodeAsync=async(r,i)=>_D(e,r,i),e.decodeAsync=async(r,i)=>CD(e,r,i),e.safeEncode=(r,i)=>kD(e,r,i),e.safeDecode=(r,i)=>TD(e,r,i),e.safeEncodeAsync=async(r,i)=>AD(e,r,i),e.safeDecodeAsync=async(r,i)=>DD(e,r,i),e.refine=(r,i)=>e.check(wM(r,i)),e.superRefine=r=>e.check(SM(r)),e.overwrite=r=>e.check(xo(r)),e.optional=()=>vv(e),e.nullable=()=>bv(e),e.nullish=()=>vv(bv(e)),e.nonoptional=r=>mM(e,r),e.array=()=>Vy(e),e.or=r=>nM([e,r]),e.and=r=>rM(e,r),e.transform=r=>yv(e,oM(r)),e.default=r=>dM(e,r),e.prefault=r=>hM(e,r),e.catch=r=>gM(e,r),e.pipe=r=>yv(e,r),e.readonly=()=>bM(e),e.describe=r=>{const i=e.clone();return Fc.add(i,{description:r}),i},Object.defineProperty(e,"description",{get(){return Fc.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Fc.get(e);const i=e.clone();return Fc.add(i,r[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Zy=pe("_ZodString",(e,n)=>{Jh.init(e,n),dn.init(e,n);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...i)=>e.check(YA(...i)),e.includes=(...i)=>e.check(eD(...i)),e.startsWith=(...i)=>e.check(tD(...i)),e.endsWith=(...i)=>e.check(nD(...i)),e.min=(...i)=>e.check(lu(...i)),e.max=(...i)=>e.check($y(...i)),e.length=(...i)=>e.check(Hy(...i)),e.nonempty=(...i)=>e.check(lu(1,...i)),e.lowercase=i=>e.check(XA(i)),e.uppercase=i=>e.check(JA(i)),e.trim=()=>e.check(rD()),e.normalize=(...i)=>e.check(sD(...i)),e.toLowerCase=()=>e.check(aD()),e.toUpperCase=()=>e.check(iD())}),MD=pe("ZodString",(e,n)=>{Jh.init(e,n),Zy.init(e,n),e.email=r=>e.check(EA(RD,r)),e.url=r=>e.check(TA(zD,r)),e.jwt=r=>e.check(FA(KD,r)),e.emoji=r=>e.check(AA(OD,r)),e.guid=r=>e.check(mv(pv,r)),e.uuid=r=>e.check(NA(Qc,r)),e.uuidv4=r=>e.check(_A(Qc,r)),e.uuidv6=r=>e.check(CA(Qc,r)),e.uuidv7=r=>e.check(kA(Qc,r)),e.nanoid=r=>e.check(DA(LD,r)),e.guid=r=>e.check(mv(pv,r)),e.cuid=r=>e.check(MA(UD,r)),e.cuid2=r=>e.check(RA(BD,r)),e.ulid=r=>e.check(zA(qD,r)),e.base64=r=>e.check(HA(ID,r)),e.base64url=r=>e.check(ZA(WD,r)),e.xid=r=>e.check(OA($D,r)),e.ksuid=r=>e.check(LA(HD,r)),e.ipv4=r=>e.check(UA(ZD,r)),e.ipv6=r=>e.check(BA(VD,r)),e.cidrv4=r=>e.check(qA(FD,r)),e.cidrv6=r=>e.check($A(QD,r)),e.e164=r=>e.check(VA(GD,r)),e.datetime=r=>e.check(fD(r)),e.date=r=>e.check(mD(r)),e.time=r=>e.check(gD(r)),e.duration=r=>e.check(vD(r))});function Un(e){return jA(MD,e)}const qt=pe("ZodStringFormat",(e,n)=>{Ot.init(e,n),Zy.init(e,n)}),RD=pe("ZodEmail",(e,n)=>{RT.init(e,n),qt.init(e,n)}),pv=pe("ZodGUID",(e,n)=>{DT.init(e,n),qt.init(e,n)}),Qc=pe("ZodUUID",(e,n)=>{MT.init(e,n),qt.init(e,n)}),zD=pe("ZodURL",(e,n)=>{zT.init(e,n),qt.init(e,n)}),OD=pe("ZodEmoji",(e,n)=>{OT.init(e,n),qt.init(e,n)}),LD=pe("ZodNanoID",(e,n)=>{LT.init(e,n),qt.init(e,n)}),UD=pe("ZodCUID",(e,n)=>{UT.init(e,n),qt.init(e,n)}),BD=pe("ZodCUID2",(e,n)=>{BT.init(e,n),qt.init(e,n)}),qD=pe("ZodULID",(e,n)=>{qT.init(e,n),qt.init(e,n)}),$D=pe("ZodXID",(e,n)=>{$T.init(e,n),qt.init(e,n)}),HD=pe("ZodKSUID",(e,n)=>{HT.init(e,n),qt.init(e,n)}),ZD=pe("ZodIPv4",(e,n)=>{IT.init(e,n),qt.init(e,n)}),VD=pe("ZodIPv6",(e,n)=>{WT.init(e,n),qt.init(e,n)}),FD=pe("ZodCIDRv4",(e,n)=>{GT.init(e,n),qt.init(e,n)}),QD=pe("ZodCIDRv6",(e,n)=>{KT.init(e,n),qt.init(e,n)}),ID=pe("ZodBase64",(e,n)=>{PT.init(e,n),qt.init(e,n)}),WD=pe("ZodBase64URL",(e,n)=>{XT.init(e,n),qt.init(e,n)}),GD=pe("ZodE164",(e,n)=>{JT.init(e,n),qt.init(e,n)}),KD=pe("ZodJWT",(e,n)=>{tA.init(e,n),qt.init(e,n)}),PD=pe("ZodUnknown",(e,n)=>{nA.init(e,n),dn.init(e,n)});function gv(){return KA(PD)}const YD=pe("ZodNever",(e,n)=>{sA.init(e,n),dn.init(e,n)});function XD(e){return PA(YD,e)}const JD=pe("ZodArray",(e,n)=>{rA.init(e,n),dn.init(e,n),e.element=n.element,e.min=(r,i)=>e.check(lu(r,i)),e.nonempty=r=>e.check(lu(1,r)),e.max=(r,i)=>e.check($y(r,i)),e.length=(r,i)=>e.check(Hy(r,i)),e.unwrap=()=>e.element});function Vy(e,n){return lD(JD,e,n)}const eM=pe("ZodObject",(e,n)=>{iA.init(e,n),dn.init(e,n),Et(e,"shape",()=>n.shape),e.keyof=()=>aM(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:gv()}),e.loose=()=>e.clone({...e._zod.def,catchall:gv()}),e.strict=()=>e.clone({...e._zod.def,catchall:XD()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>A5(e,r),e.safeExtend=r=>D5(e,r),e.merge=r=>M5(e,r),e.pick=r=>k5(e,r),e.omit=r=>T5(e,r),e.partial=(...r)=>R5(Fy,e,r[0]),e.required=(...r)=>z5(Qy,e,r[0])});function vo(e,n){const r={type:"object",shape:e??{},...Fe(n)};return new eM(r)}const tM=pe("ZodUnion",(e,n)=>{lA.init(e,n),dn.init(e,n),e.options=n.options});function nM(e,n){return new tM({type:"union",options:e,...Fe(n)})}const sM=pe("ZodIntersection",(e,n)=>{oA.init(e,n),dn.init(e,n)});function rM(e,n){return new sM({type:"intersection",left:e,right:n})}const ph=pe("ZodEnum",(e,n)=>{cA.init(e,n),dn.init(e,n),e.enum=n.entries,e.options=Object.values(n.entries);const r=new Set(Object.keys(n.entries));e.extract=(i,c)=>{const u={};for(const f of i)if(r.has(f))u[f]=n.entries[f];else throw new Error(`Key ${f} not found in enum`);return new ph({...n,checks:[],...Fe(c),entries:u})},e.exclude=(i,c)=>{const u={...n.entries};for(const f of i)if(r.has(f))delete u[f];else throw new Error(`Key ${f} not found in enum`);return new ph({...n,checks:[],...Fe(c),entries:u})}});function aM(e,n){const r=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new ph({type:"enum",entries:r,...Fe(n)})}const iM=pe("ZodLiteral",(e,n)=>{uA.init(e,n),dn.init(e,n),e.values=new Set(n.values),Object.defineProperty(e,"value",{get(){if(n.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return n.values[0]}})});function xv(e,n){return new iM({type:"literal",values:Array.isArray(e)?e:[e],...Fe(n)})}const lM=pe("ZodTransform",(e,n)=>{dA.init(e,n),dn.init(e,n),e._zod.parse=(r,i)=>{if(i.direction==="backward")throw new ky(e.constructor.name);r.addIssue=u=>{if(typeof u=="string")r.issues.push(io(u,r.value,n));else{const f=u;f.fatal&&(f.continue=!1),f.code??(f.code="custom"),f.input??(f.input=r.value),f.inst??(f.inst=e),r.issues.push(io(f))}};const c=n.transform(r.value,r);return c instanceof Promise?c.then(u=>(r.value=u,r)):(r.value=c,r)}});function oM(e){return new lM({type:"transform",transform:e})}const Fy=pe("ZodOptional",(e,n)=>{fA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function vv(e){return new Fy({type:"optional",innerType:e})}const cM=pe("ZodNullable",(e,n)=>{hA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function bv(e){return new cM({type:"nullable",innerType:e})}const uM=pe("ZodDefault",(e,n)=>{mA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function dM(e,n){return new uM({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Dy(n)}})}const fM=pe("ZodPrefault",(e,n)=>{pA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function hM(e,n){return new fM({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Dy(n)}})}const Qy=pe("ZodNonOptional",(e,n)=>{gA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function mM(e,n){return new Qy({type:"nonoptional",innerType:e,...Fe(n)})}const pM=pe("ZodCatch",(e,n)=>{xA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function gM(e,n){return new pM({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const xM=pe("ZodPipe",(e,n)=>{vA.init(e,n),dn.init(e,n),e.in=n.in,e.out=n.out});function yv(e,n){return new xM({type:"pipe",in:e,out:n})}const vM=pe("ZodReadonly",(e,n)=>{bA.init(e,n),dn.init(e,n),e.unwrap=()=>e._zod.def.innerType});function bM(e){return new vM({type:"readonly",innerType:e})}const yM=pe("ZodCustom",(e,n)=>{yA.init(e,n),dn.init(e,n)});function wM(e,n={}){return oD(yM,e,n)}function SM(e){return cD(e)}const wv=(e,n,r)=>{if(e&&"reportValidity"in e){const i=Ue(r,n);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},gh=(e,n)=>{for(const r in n.fields){const i=n.fields[r];i&&i.ref&&"reportValidity"in i.ref?wv(i.ref,r,e):i&&i.refs&&i.refs.forEach(c=>wv(c,r,e))}},Sv=(e,n)=>{n.shouldUseNativeValidation&&gh(e,n);const r={};for(const i in e){const c=Ue(n.fields,i),u=Object.assign(e[i]||{},{ref:c&&c.ref});if(jM(n.names||Object.keys(e),i)){const f=Object.assign({},Ue(r,i));St(f,"root",u),St(r,i,f)}else St(r,i,u)}return r},jM=(e,n)=>{const r=jv(n);return e.some(i=>jv(i).match(`^${r}\\.\\d+`))};function jv(e){return e.replace(/\]|\[/g,"")}function Ev(e,n){try{var r=e()}catch(i){return n(i)}return r&&r.then?r.then(void 0,n):r}function EM(e,n){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,f=i.path.join(".");if(!r[f])if("unionErrors"in i){var m=i.unionErrors[0].errors[0];r[f]={message:m.message,type:m.code}}else r[f]={message:u,type:c};if("unionErrors"in i&&i.unionErrors.forEach(function(b){return b.errors.forEach(function(y){return e.push(y)})}),n){var x=r[f].types,g=x&&x[i.code];r[f]=Fh(f,n,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function NM(e,n){for(var r={};e.length;){var i=e[0],c=i.code,u=i.message,f=i.path.join(".");if(!r[f])if(i.code==="invalid_union"&&i.errors.length>0){var m=i.errors[0][0];r[f]={message:m.message,type:m.code}}else r[f]={message:u,type:c};if(i.code==="invalid_union"&&i.errors.forEach(function(b){return b.forEach(function(y){return e.push(y)})}),n){var x=r[f].types,g=x&&x[i.code];r[f]=Fh(f,n,r,c,g?[].concat(g,i.message):i.message)}e.shift()}return r}function em(e,n,r){if(r===void 0&&(r={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(e))return function(i,c,u){try{return Promise.resolve(Ev(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,n)).then(function(f){return u.shouldUseNativeValidation&&gh({},u),{errors:{},values:r.raw?Object.assign({},i):f}})},function(f){if((function(m){return Array.isArray(m?.issues)})(f))return{values:{},errors:Sv(EM(f.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw f}))}catch(f){return Promise.reject(f)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(e))return function(i,c,u){try{return Promise.resolve(Ev(function(){return Promise.resolve((r.mode==="sync"?U5:B5)(e,i,n)).then(function(f){return u.shouldUseNativeValidation&&gh({},u),{errors:{},values:r.raw?Object.assign({},i):f}})},function(f){if((function(m){return m instanceof Xh})(f))return{values:{},errors:Sv(NM(f.issues,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw f}))}catch(f){return Promise.reject(f)}};throw new Error("Invalid input: not a Zod schema")}function _M(e){const n=ht();return un({mutationFn:r=>yj(e,r),onSuccess:r=>{n.setQueryData(Pt.list(rb),i=>i&&{...i,items:i.items.map(c=>c.id===r.id?r:c)}),n.invalidateQueries({queryKey:Pt.detail(e),exact:!1})}})}async function CM(e={}){const{page:n,pageSize:r,search:i,includeTotal:c,signal:u}=e,f={};typeof n=="number"&&n>0&&(f.page=n),typeof r=="number"&&r>0&&(f.page_size=r),c&&(f.include_total=!0);const m=i?.trim();m&&(f.q=m);const{data:x}=await Ve.GET("/api/v1/users",{params:{query:f},signal:u});if(!x)throw new Error("Expected user page payload.");return x}function Iy(e={}){const{enabled:n=!0,search:r="",pageSize:i}=e,c=r.trim(),u=c.length>=2?c:"",f=Fv({queryKey:["users","all",{search:c,pageSize:i}],initialPageParam:1,queryFn:({pageParam:g,signal:b})=>CM(kM({page:typeof g=="number"?g:1,pageSize:i,search:u||void 0,signal:b})),getNextPageParam:g=>g.has_next?g.page+1:void 0,enabled:n,staleTime:6e4}),m=p.useCallback(g=>g.id,[]),x=py(f.data?.pages,m);return{...f,users:x}}function kM(e){const n=!e.page||e.page<1?1:e.page;return{...e,page:n}}const lo=200;function TM(e){const n={page:1,pageSize:lo,includeTotal:!0};return Sn({queryKey:Pt.members(e,n),queryFn:({signal:r})=>wj(e,{signal:r,pageSize:lo,includeTotal:!0}),enabled:e.length>0,staleTime:15e3,placeholderData:r=>r})}function AM(e){const n=ht(),r=Pt.members(e,{page:1,pageSize:lo,includeTotal:!0});return un({mutationFn:async({user:i,roleIds:c})=>{const u={user_id:i.id,role_ids:Array.from(c)};return Sj(e,u)},onMutate:async({user:i,roleIds:c})=>{await n.cancelQueries({queryKey:r});const u=n.getQueryData(r),f={user_id:i.id,role_ids:Array.from(c),role_slugs:[],created_at:new Date().toISOString(),user:i};return n.setQueryData(r,m=>m&&{...m,items:[f,...m.items],total:typeof m.total=="number"?m.total+1:m.total}),{previous:u,optimisticId:f.user_id}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:(i,c,u)=>{n.setQueryData(r,f=>f&&(u?{...f,items:f.items.map(m=>m.user_id===u.optimisticId?{...i,user:m.user??i.user}:m)}:{...f,items:[i,...f.items],total:typeof f.total=="number"?f.total+1:f.total}))},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function DM(e){const n=ht(),r=Pt.members(e,{page:1,pageSize:lo,includeTotal:!0});return un({mutationFn:({userId:i,roleIds:c})=>jj(e,i,{role_ids:Array.from(c)}),onMutate:async({userId:i,roleIds:c})=>{await n.cancelQueries({queryKey:r});const u=n.getQueryData(r);return n.setQueryData(r,f=>f&&{...f,items:f.items.map(m=>m.user_id===i?{...m,role_ids:Array.from(c)}:m)}),{previous:u}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:i=>{n.setQueryData(r,c=>c&&{...c,items:c.items.map(u=>u.user_id===i.user_id?{...i,user:u.user??i.user}:u)})},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function MM(e){const n=ht(),r=Pt.members(e,{page:1,pageSize:lo,includeTotal:!0});return un({mutationFn:i=>Ej(e,i),onMutate:async i=>{await n.cancelQueries({queryKey:r});const c=n.getQueryData(r);return n.setQueryData(r,u=>{if(!u)return u;const f=u.items.filter(m=>m.user_id!==i);return{...u,items:f,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}}),{previous:c}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}const Bi=200,Nv=200;function Wy(e){const n={page:1,pageSize:Bi,includeTotal:!0};return Sn({queryKey:Pt.roles(e,n),queryFn:({signal:r})=>Nj({signal:r,pageSize:Bi,includeTotal:!0}),enabled:e.length>0,staleTime:15e3,placeholderData:r=>r})}function RM(){const e={scope:"global",page:1,pageSize:Nv,includeTotal:!1};return Sn({queryKey:Pt.permissions(e),queryFn:({signal:n})=>Tj({signal:n,scope:"global",pageSize:Nv}),staleTime:6e4,placeholderData:n=>n})}function zM(e){const n=ht(),r=Pt.roles(e,{page:1,pageSize:Bi});return un({mutationFn:i=>_j(e,i),onMutate:async i=>{await n.cancelQueries({queryKey:r});const c=n.getQueryData(r),u={id:`optimistic-${Date.now()}`,slug:i.slug??i.name.toLowerCase().replace(/\s+/g,"-"),name:i.name,description:i.description??null,permissions:Array.from(i.permissions??[]),is_system:!1,is_editable:!0,created_at:new Date().toISOString(),updated_at:null};return n.setQueryData(r,f=>_v(f,u)),{previous:c,optimisticId:u.id}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:(i,c,u)=>{n.setQueryData(r,f=>f&&(u?{...f,items:f.items.map(m=>m.id===u.optimisticId?i:m)}:_v(f,i)))},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function OM(e){const n=ht(),r=Pt.roles(e,{page:1,pageSize:Bi});return un({mutationFn:({roleId:i,payload:c})=>Cj(e,i,c),onMutate:async({roleId:i,payload:c})=>{await n.cancelQueries({queryKey:r});const u=n.getQueryData(r);return n.setQueryData(r,f=>f&&{...f,items:f.items.map(m=>m.id===i?{...m,name:c.name??m.name,description:c.description??null,permissions:Array.from(c.permissions??[])}:m)}),{previous:u}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSuccess:i=>{n.setQueryData(r,c=>c&&{...c,items:c.items.map(u=>u.id===i.id?i:u)})},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function LM(e){const n=ht(),r=Pt.roles(e,{page:1,pageSize:Bi});return un({mutationFn:i=>kj(e,i),onMutate:async i=>{await n.cancelQueries({queryKey:r});const c=n.getQueryData(r);return n.setQueryData(r,u=>{if(!u)return u;const f=u.items.filter(m=>m.id!==i);return{...u,items:f,total:typeof u.total=="number"?Math.max(u.total-1,0):u.total}}),{previous:c}},onError:(i,c,u)=>{u?.previous&&n.setQueryData(r,u.previous)},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}function _v(e,n){return e?{...e,items:[n,...e.items],total:typeof e.total=="number"?e.total+1:e.total}:{items:[n],page:1,page_size:Bi,has_next:!1,has_previous:!1,total:1}}const UM={sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg"};function BM(e,n){if(e&&e.trim().length>0){const r=e.trim().split(/\s+/u),i=r[0]?.[0],c=r[r.length-1]?.[0];if(i)return`${i}${c??""}`.toUpperCase()}return n&&n.trim().length>0?n.trim()[0]?.toUpperCase():"?"}function qM({name:e,email:n,size:r="md",className:i}){const c=p.useMemo(()=>BM(e,n),[e,n]);return o.jsx("span",{"aria-hidden":"true",className:we("inline-flex select-none items-center justify-center rounded-full bg-gradient-to-br from-brand-100 via-brand-200 to-brand-300 font-semibold text-brand-900 shadow-sm",UM[r],i),children:c})}function $M(){const{workspace:e,hasPermission:n}=ra(),r=n("workspace.members.manage"),i=TM(e.id),c=Wy(e.id),u=AM(e.id),f=DM(e.id),m=MM(e.id),[x,g]=p.useState(null),[b,y]=p.useState([]),[w,j]=p.useState(""),[_,E]=p.useState([]),[A,O]=p.useState(""),[N,D]=p.useState(""),[B,J]=p.useState(""),[Y,Q]=p.useState(null);p.useEffect(()=>{const Z=window.setTimeout(()=>{D(A.trim())},250);return()=>window.clearTimeout(Z)},[A]);const se=Iy({enabled:r,search:N,pageSize:50}),ee=p.useMemo(()=>{const Z=new Map;for(const be of se.users)Z.set(be.id,be);return Z},[se.users]),ie=p.useMemo(()=>{const Z=new Map;for(const be of c.data?.items??[])Z.set(be.id,be);return Z},[c.data]),ae=p.useMemo(()=>{const be=(i.data?.items??[]).map(Ie=>({...Ie,user:Ie.user??ee.get(Ie.user_id)})),Re=new Intl.Collator("en",{sensitivity:"base"});return be.sort((Ie,et)=>{const k=Ie.user?.display_name??Ie.user?.email??Ie.user_id,I=et.user?.display_name??et.user?.email??et.user_id;return Re.compare(k??"",I??"")})},[i.data,ee]),ce=p.useMemo(()=>new Set(ae.map(Z=>Z.user?.id??Z.user_id)),[ae]),V=B.trim().toLowerCase(),he=p.useMemo(()=>V?ae.filter(Z=>{const be=Z.user?.display_name??"",Re=Z.user?.email??"";return be.toLowerCase().includes(V)||Re.toLowerCase().includes(V)||Z.user_id.toLowerCase().includes(V)}):ae,[ae,V]),xe=se.isPending&&se.users.length===0,U=se.isFetchingNextPage,P=p.useMemo(()=>{const Z=new Intl.Collator("en",{sensitivity:"base"});return se.users.filter(be=>!ce.has(be.id)).sort((be,Re)=>{const Ie=be.display_name??be.email,et=Re.display_name??Re.email;return Z.compare(Ie??"",et??"")})},[ce,se.users]),me=A.trim().toLowerCase(),_e=N.trim().toLowerCase().length>=2,C=A.trim().length>0&&A.trim().length<2,W=p.useMemo(()=>!me||_e?P:P.filter(Z=>(Z.display_name??"").toLowerCase().includes(me)||Z.email.toLowerCase().includes(me)),[P,me,_e]),M=p.useMemo(()=>P.find(Z=>Z.id===w),[P,w]),R=p.useMemo(()=>{const Z=new Intl.Collator("en",{sensitivity:"base"});return(c.data?.items??[]).sort((be,Re)=>Z.compare(be.name,Re.name))},[c.data]),F=(Z,be)=>{y(Re=>be?Re.includes(Z)?Re:[...Re,Z]:Re.filter(Ie=>Ie!==Z))},z=(Z,be)=>{E(Re=>be?Re.includes(Z)?Re:[...Re,Z]:Re.filter(Ie=>Ie!==Z))},re=Z=>{g(Z.user_id),y(Z.role_ids),Q(null)},ge=()=>{g(null),y([])},Ne=()=>{x&&(Q(null),f.mutate({userId:x,roleIds:b},{onSuccess:()=>{Q({tone:"success",message:"Member roles updated."}),ge()},onError:Z=>{const be=Z instanceof Error?Z.message:"Unable to update member roles.";Q({tone:"danger",message:be})}}))},H=Z=>{!r||!window.confirm(`Remove ${Z.user?.display_name??Z.user?.email??Z.user_id} from the workspace?`)||(Q(null),m.mutate(Z.user_id,{onSuccess:()=>{Q({tone:"success",message:"Member removed."})},onError:Re=>{const Ie=Re instanceof Error?Re.message:"Unable to remove member.";Q({tone:"danger",message:Ie})}}))},Se=u.isPending,ke=!!w&&_.length>0,fe=async Z=>{Z.preventDefault(),Q(null);try{if(!w){Q({tone:"danger",message:"Select a user to add."});return}if(_.length===0){Q({tone:"danger",message:"Select at least one role for this member."});return}const be=P.find(Re=>Re.id===w)??ee.get(w);if(!be){Q({tone:"danger",message:"Selected user is no longer available."});return}await u.mutateAsync({user:be,roleIds:_}),j(""),E([]),O(""),Q({tone:"success",message:`${be.display_name??be.email} added to the workspace.`})}catch(be){const Re=be instanceof Error?be.message:"Unable to add member.";Q({tone:"danger",message:Re})}};p.useEffect(()=>{M&&(W.some(Z=>Z.id===M.id)||O(""))},[W,M]);const Te=()=>{j(""),O(""),E([])};return o.jsxs("div",{className:"space-y-6",children:[Y?o.jsx(jt,{tone:Y.tone,children:Y.message}):null,i.isError?o.jsx(jt,{tone:"danger",children:i.error instanceof Error?i.error.message:"Unable to load workspace members."}):null,c.isError?o.jsx(jt,{tone:"warning",children:c.error instanceof Error?c.error.message:"Unable to load workspace roles."}):null,r?o.jsxs("form",{onSubmit:fe,className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[o.jsxs("header",{className:"space-y-1",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Add member"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Add an existing teammate and choose the roles that reflect what they should be able to do here."})]}),se.isError?o.jsx(jt,{tone:"warning",children:"We couldn't load the user directory. Retry or add a member later."}):null,o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx(cn,{label:"Search directory",hint:"Filter by name or email to quickly find a teammate.",children:o.jsx(jn,{value:A,onChange:Z=>O(Z.target.value),placeholder:"e.g. Casey or casey@example.com",disabled:Se||xe})}),C?o.jsx("p",{className:"text-xs text-slate-500",children:"Enter at least two characters to search the full directory."}):null,se.isError?o.jsx("p",{className:"text-xs text-rose-600",children:"Unable to load users. Try again shortly."}):null,o.jsx(cn,{label:"User",required:!0,children:o.jsxs(Ba,{value:w,onChange:Z=>{j(Z.target.value),Z.target.value&&O("")},disabled:Se||xe,required:!0,children:[o.jsx("option",{value:"",children:"Select a user"}),M&&!W.some(Z=>Z.id===M.id)?o.jsx("option",{value:M.id,children:M.display_name?`${M.display_name} (${M.email})`:M.email}):null,W.map(Z=>o.jsx("option",{value:Z.id,children:Z.display_name?`${Z.display_name} (${Z.email})`:Z.email},Z.id))]})}),W.length===0&&A?o.jsxs("p",{className:"text-xs text-slate-500",children:['No users matched "',A,'". Clear the search to see everyone.']}):null,se.hasNextPage?o.jsx("div",{className:"pt-2",children:o.jsx(qe,{type:"button",variant:"ghost",onClick:()=>se.fetchNextPage(),disabled:xe||U,children:U?"Loading more users":"Load more users"})}):null]}),o.jsxs("fieldset",{className:"space-y-3",children:[o.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Roles"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Roles control which actions a member can perform inside this workspace."}),o.jsx("div",{className:"flex flex-wrap gap-2",children:R.length===0?o.jsx("p",{className:"text-xs text-slate-500",children:"No workspace roles available yet."}):R.map(Z=>o.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:_.includes(Z.id),onChange:be=>z(Z.id,be.target.checked),disabled:Se}),o.jsx("span",{children:Z.name})]},Z.id))}),_.length>0?o.jsxs("p",{className:"text-xs text-slate-500",children:[_.length," role(s) selected."]}):null]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[w||A||_.length>0?o.jsx(qe,{type:"button",variant:"ghost",onClick:Te,disabled:Se,children:"Clear"}):null,o.jsx(qe,{type:"submit",isLoading:Se,disabled:!ke||Se,children:"Add member"})]})]}):o.jsx(jt,{tone:"info",children:"You do not have permission to manage workspace members. Contact an administrator for access."}),o.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[o.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Current members"}),o.jsx("p",{className:"text-sm text-slate-500",children:i.isLoading?"Loading members":`${ae.length} member${ae.length===1?"":"s"}`})]}),o.jsx(cn,{label:"Search members",className:"w-full max-w-xs",children:o.jsx(jn,{value:B,onChange:Z=>J(Z.target.value),placeholder:"Search by name, email, or ID",disabled:i.isLoading})})]}),i.isLoading?o.jsx("p",{className:"text-sm text-slate-600",children:"Loading members"}):ae.length===0?o.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:"No members yet. Add teammates to collaborate on this workspace."}):he.length===0?o.jsxs("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:['No members match "',B,'".']}):o.jsx("ul",{className:"space-y-4",role:"list",children:he.map(Z=>{const be=Z.user?.display_name??Z.user?.email??Z.user_id,Re=Z.role_ids.map(et=>ie.get(et)?.name??et),Ie=x===Z.user_id;return o.jsxs("li",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(qM,{name:Z.user?.display_name,email:Z.user?.email,size:"sm"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-base font-semibold text-slate-900",children:be}),o.jsx("p",{className:"text-sm text-slate-500",children:Z.user?.email??Z.user_id}),o.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:o.jsxs("span",{children:["ID: ",Z.user_id]})})]})]}),r?o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx(qe,{type:"button",variant:"ghost",size:"sm",onClick:()=>Ie?ge():re(Z),disabled:f.isPending||m.isPending||Ie&&f.isPending,children:Ie?"Cancel":"Manage roles"}),o.jsx(qe,{type:"button",variant:"ghost",size:"sm",onClick:()=>H(Z),disabled:m.isPending,children:"Remove"})]}):null]}),o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Re.length>0?Re.map(et=>o.jsx("span",{className:"inline-flex items-center rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm",children:et},`${Z.user_id}-${et}`)):o.jsx("span",{className:"text-xs text-slate-500",children:"No roles assigned."})}),Ie?o.jsxs("div",{className:"mt-4 space-y-3 rounded-lg border border-slate-200 bg-white p-4",children:[o.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Assign roles"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(et=>o.jsxs("label",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:b.includes(et.id),onChange:k=>F(et.id,k.target.checked),disabled:f.isPending}),o.jsx("span",{children:et.name})]},et.id))}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(qe,{type:"button",variant:"ghost",size:"sm",onClick:ge,disabled:f.isPending,children:"Cancel"}),o.jsx(qe,{type:"button",size:"sm",onClick:Ne,isLoading:f.isPending,disabled:f.isPending,children:"Save roles"})]})]}):null]},Z.user_id)})})]})]})}const HM=vo({name:Un().min(1,"Role name is required.").max(150,"Keep the name under 150 characters."),slug:Un().max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.").optional().or(xv("")),description:Un().max(500,"Keep the description concise.").optional().or(xv("")),permissions:Vy(Un())});function ZM(){const{workspace:e,hasPermission:n}=ra(),r=n("workspace.roles.manage"),i=Wy(e.id),c=RM(),u=zM(e.id),f=OM(e.id),m=LM(e.id),[x,g]=p.useState(!1),[b,y]=p.useState(null),[w,j]=p.useState(null),_=p.useMemo(()=>(c.data?.items??[]).filter(Y=>Y.scope_type==="workspace"),[c.data]),E=p.useMemo(()=>{const Y=new Map;for(const Q of _)Y.set(Q.key,Q);return Y},[_]),A=i.data?.items??[],O=()=>{j(null),g(!0),y(null)},N=()=>{g(!1)},D=Y=>{j(null),y(Y.id),g(!1)},B=()=>{y(null)},J=Y=>{!r||Y.is_system||!Y.is_editable||!window.confirm(`Delete the role "${Y.name}"? This action cannot be undone.`)||(j(null),m.mutate(Y.id,{onSuccess:()=>{j({tone:"success",message:"Role deleted."})},onError:se=>{const ee=se instanceof Error?se.message:"Unable to delete role.";j({tone:"danger",message:ee})}}))};return o.jsxs("div",{className:"space-y-6",children:[w?o.jsx(jt,{tone:w.tone,children:w.message}):null,i.isError?o.jsx(jt,{tone:"danger",children:i.error instanceof Error?i.error.message:"Unable to load workspace roles."}):null,c.isError?o.jsx(jt,{tone:"warning",children:c.error instanceof Error?c.error.message:"Unable to load permission catalog."}):null,r?o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Create role"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Compose a custom role by selecting workspace permissions."})]}),o.jsx(qe,{type:"button",variant:x?"ghost":"primary",onClick:()=>x?N():O(),children:x?"Hide form":"New role"})]}),x?o.jsx("div",{className:"mt-4",children:o.jsx(Cv,{availablePermissions:_,allowSlugEdit:!0,onCancel:N,onSubmit:Y=>{j(null),u.mutate({name:Y.name.trim(),slug:Y.slug?Y.slug.trim():void 0,description:Y.description?.trim()?Y.description.trim():void 0,permissions:Y.permissions},{onSuccess:()=>{j({tone:"success",message:"Role created."}),N()},onError:Q=>{const se=Q instanceof Error?Q.message:"Unable to create role.";j({tone:"danger",message:se})}})},isSubmitting:u.isPending},"create-role")}):null]}):null,o.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[o.jsx("header",{className:"flex flex-wrap items-center justify-between gap-2",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Workspace roles"}),o.jsx("p",{className:"text-sm text-slate-500",children:i.isLoading?"Loading roles":`${A.length} role${A.length===1?"":"s"}`})]})}),i.isLoading?o.jsx("p",{className:"text-sm text-slate-600",children:"Loading roles"}):A.length===0?o.jsx("p",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:"No workspace roles yet. Create one to tailor permissions for your team."}):o.jsx("ul",{className:"space-y-4",role:"list",children:A.map(Y=>{const Q=b===Y.id,se=Y.permissions.map(ee=>E.get(ee)?.label??ee);return o.jsxs("li",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 shadow-sm",children:[o.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-slate-900",children:Y.name}),Y.is_system?o.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-200 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"System"}):null,Y.is_editable?null:o.jsx("span",{className:"inline-flex items-center rounded-full bg-warning-100 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-warning-700",children:"Locked"})]}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Slug: ",Y.slug]}),Y.description?o.jsx("p",{className:"text-sm text-slate-600",children:Y.description}):null]}),r&&Y.is_editable?o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx(qe,{type:"button",variant:"ghost",size:"sm",onClick:()=>Q?B():D(Y),disabled:f.isPending||m.isPending,children:Q?"Cancel":"Edit"}),Y.is_system?null:o.jsx(qe,{type:"button",variant:"ghost",size:"sm",onClick:()=>J(Y),disabled:m.isPending||Y.is_system||!Y.is_editable,children:"Delete"})]}):null]}),o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:se.length>0?se.map(ee=>o.jsx("span",{className:"inline-flex items-center rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm",children:ee},`${Y.id}-${ee}`)):o.jsx("span",{className:"text-xs text-slate-500",children:"No permissions assigned."})}),Q?o.jsx("div",{className:"mt-4",children:o.jsx(Cv,{availablePermissions:_,initialValues:{name:Y.name,slug:Y.slug,description:Y.description??"",permissions:Y.permissions},allowSlugEdit:!1,onCancel:B,onSubmit:ee=>{j(null),f.mutate({roleId:Y.id,payload:{name:ee.name.trim(),description:ee.description?.trim()?ee.description.trim():void 0,permissions:ee.permissions}},{onSuccess:()=>{j({tone:"success",message:"Role updated."}),B()},onError:ie=>{const ae=ie instanceof Error?ie.message:"Unable to update role.";j({tone:"danger",message:ae})}})},isSubmitting:f.isPending},Y.id)}):null]},Y.id)})})]})]})}function Cv({availablePermissions:e,initialValues:n,onSubmit:r,onCancel:i,isSubmitting:c,allowSlugEdit:u=!0}){const{register:f,handleSubmit:m,watch:x,setValue:g,formState:{errors:b},reset:y}=Wh({resolver:em(HM),defaultValues:n??{name:"",slug:"",description:"",permissions:[]}});p.useEffect(()=>{n&&y(n)},[n,y]);const w=x("permissions"),j=(E,A)=>{g("permissions",A?Array.from(new Set([...w??[],E])):(w??[]).filter(O=>O!==E))},_=m(E=>{const A={name:E.name.trim(),slug:u?E.slug?.trim()??"":n?.slug??"",description:E.description?.trim()??"",permissions:E.permissions??[]};r(A)});return o.jsxs("form",{className:"space-y-4 rounded-xl border border-slate-200 bg-white p-4",onSubmit:_,noValidate:!0,children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("label",{className:"space-y-2 text-sm font-medium text-slate-700",children:["Role name",o.jsx(jn,{...f("name"),placeholder:"Data reviewer",invalid:!!b.name,disabled:c}),b.name?o.jsx("span",{className:"block text-xs font-semibold text-danger-600",children:b.name.message}):null]}),u?o.jsxs("label",{className:"space-y-2 text-sm font-medium text-slate-700",children:["Role slug",o.jsx(jn,{...f("slug"),placeholder:"data-reviewer",invalid:!!b.slug,disabled:c}),o.jsx("span",{className:"block text-xs text-slate-500",children:"Optional. Leave blank to auto-generate from the name."}),b.slug?o.jsx("span",{className:"block text-xs font-semibold text-danger-600",children:b.slug.message}):null]}):null]}),o.jsxs("label",{className:"space-y-2 text-sm font-medium text-slate-700",children:["Description",o.jsx(jn,{...f("description"),placeholder:"What does this role control?",invalid:!!b.description,disabled:c}),b.description?o.jsx("span",{className:"block text-xs font-semibold text-danger-600",children:b.description.message}):null]}),o.jsxs("fieldset",{className:"space-y-3",children:[o.jsx("legend",{className:"text-sm font-semibold text-slate-700",children:"Permissions"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:e.length===0?o.jsx("p",{className:"text-xs text-slate-500",children:"No workspace permissions available."}):e.map(E=>o.jsxs("label",{className:"flex items-start gap-2 rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:[o.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-300",checked:w?.includes(E.key)??!1,onChange:A=>j(E.key,A.target.checked),disabled:c}),o.jsxs("span",{children:[o.jsx("span",{className:"block font-semibold",children:E.label}),o.jsx("span",{className:"block text-xs text-slate-500",children:E.description})]})]},E.key))})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[i?o.jsx(qe,{type:"button",variant:"ghost",onClick:i,disabled:c,children:"Cancel"}):null,o.jsx(qe,{type:"submit",isLoading:c,children:"Save role"})]})]})}function Gy(){const e=Ha(),n=qh(),r=ik(),[i,c]=p.useState(Os),u=n.data;p.useEffect(()=>{u?.detail&&c(u.detail)},[u?.detail]);const f=p.useMemo(()=>(e.user.permissions??[]).map(y=>y.toLowerCase()).includes("system.settings.manage"),[e.user.permissions]),m=n.isFetching||r.isPending,x=i.trim()||Os,g=b=>{r.mutate({enabled:b,detail:x},{onSuccess:y=>{c(y.detail)}})};return o.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[o.jsxs("header",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"ADE safe mode"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Toggle whether streamed runs should short-circuit before invoking the ADE engine. Use this to pause execution during maintenance or while verifying a new config release."})]}),n.isError?o.jsx(jt,{tone:"danger",children:"Unable to load safe mode status."}):null,f?null:o.jsxs(jt,{tone:"warning",children:["You need the ",o.jsx("strong",{children:"system.settings.manage"})," permission to change safe mode."]}),o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsx("span",{className:u?.enabled?"inline-flex rounded-full bg-amber-100 px-3 py-1 font-semibold text-amber-800":"inline-flex rounded-full bg-emerald-100 px-3 py-1 font-semibold text-emerald-800",children:u?.enabled?"Safe mode enabled":"Safe mode disabled"}),o.jsx("span",{className:"text-slate-500",children:n.isFetching?"Checking safe mode state...":u?.detail??Os})]}),o.jsx(cn,{label:"Safe mode message",hint:"Shown in the health check and workspace banner when safe mode is active.",children:o.jsx(yy,{value:i,onChange:b=>c(b.target.value),disabled:!f||m})}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsx(qe,{type:"button",variant:"secondary",onClick:()=>c(u?.detail??Os),disabled:!f||m,children:"Reset message"}),o.jsx(qe,{type:"button",variant:u?.enabled?"primary":"danger",onClick:()=>g(!u?.enabled),isLoading:r.isPending,disabled:!f,children:u?.enabled?"Disable safe mode":"Enable safe mode"})]})]})}Gy.displayName="SafeModeControls";const Ky=[{id:"general",label:"General"},{id:"members",label:"Members"},{id:"roles",label:"Roles"}],VM=new Set(Ky.map(e=>e.id)),If=e=>!!(e&&VM.has(e));function FM(){ra();const[e,n]=Uh(),r=e.get("view"),i=If(r)?r:"general";p.useEffect(()=>{if(r&&!If(r)){const u=new URLSearchParams(e);u.set("view","general"),n(u,{replace:!0})}},[r,e,n]);const c=u=>{if(!If(u))return;const f=new URLSearchParams(e);f.set("view",u),n(f,{replace:!0})};return o.jsx(Ch,{value:i,onValueChange:c,children:o.jsxs("div",{className:"space-y-6",children:[o.jsx(kh,{className:"flex gap-2 rounded-full border border-slate-200 bg-white p-1 shadow-soft","aria-label":"Workspace settings views",children:Ky.map(u=>{const f=u.id===i;return o.jsx(Fl,{value:u.id,className:`rounded-full px-4 py-1 text-sm font-medium focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-500 ${f?"bg-brand-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:u.label},u.id)})}),o.jsx(Oa,{value:"general","aria-live":"polite",children:i==="general"?o.jsx(IM,{}):null}),o.jsx(Oa,{value:"members","aria-live":"polite",children:i==="members"?o.jsx($M,{}):null}),o.jsx(Oa,{value:"roles","aria-live":"polite",children:i==="roles"?o.jsx(ZM,{}):null})]})})}const QM=vo({name:Un().min(1,"Workspace name is required.").max(255,"Keep the name under 255 characters."),slug:Un().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Use lowercase letters, numbers, and dashes.")});function IM(){const{workspace:e}=ra(),n=_M(e.id),[r,i]=p.useState(null),{register:c,handleSubmit:u,formState:{errors:f,isDirty:m},reset:x}=Wh({resolver:em(QM),defaultValues:{name:e.name,slug:e.slug}});p.useEffect(()=>{x({name:e.name,slug:e.slug})},[x,e.name,e.slug]);const g=u(b=>{i(null),n.mutate({name:b.name.trim(),slug:b.slug.trim()},{onSuccess:()=>{i("Workspace details saved.")}})});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",onSubmit:g,noValidate:!0,children:[o.jsxs("header",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Workspace identity"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Update the name and slug. Changes apply immediately across navigation and shared links."})]}),r?o.jsx(jt,{tone:"success",children:r}):null,n.isError?o.jsx(jt,{tone:"danger",children:n.error instanceof Error?n.error.message:"Unable to save workspace details."}):null,o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsx(cn,{label:"Workspace name",required:!0,error:f.name?.message,children:o.jsx(jn,{...c("name"),placeholder:"Finance Operations",invalid:!!f.name,disabled:n.isPending})}),o.jsx(cn,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier.",required:!0,error:f.slug?.message,children:o.jsx(jn,{...c("slug"),placeholder:"finance-ops",invalid:!!f.slug,disabled:n.isPending})})]}),o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx(qe,{type:"button",variant:"ghost",onClick:()=>{x(),i(null)},disabled:n.isPending||!m,children:"Reset"}),o.jsx(qe,{type:"submit",isLoading:n.isPending,disabled:!m,children:"Save changes"})]})]}),o.jsx(Gy,{})]})}function WM(){return o.jsx(fu,{children:o.jsx(GM,{})})}function GM(){const e=Ss(),n=An(),r=ht(),i=hu(),c=p.useMemo(()=>i.data?.items??[],[i.data?.items]),u=YM(e.pathname),f=p.useMemo(()=>JM(c,u),[c,u]);return p.useEffect(()=>{i.data&&r.setQueryData(Pt.list(rb),i.data)},[r,i.data]),p.useEffect(()=>{!i.isLoading&&!i.isError&&c.length===0&&n("/workspaces",{replace:!0})},[i.isLoading,i.isError,c.length,n]),p.useEffect(()=>{f&&!u&&n(`/workspaces/${f.id}/${Oi.path}${e.search}${e.hash}`,{replace:!0})},[f,u,e.search,e.hash,n]),p.useEffect(()=>{if(!(!f||!u)&&u!==f.id){const m=e4(e.pathname,e.search,f.id,u);m!==e.pathname+e.search&&n(m+e.hash,{replace:!0})}},[f,u,e.pathname,e.search,e.hash,n]),p.useEffect(()=>{f&&ab(f)},[f]),i.isLoading?o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx(At,{title:"Loading workspace",variant:"loading"})}):i.isError?o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-slate-50 px-6 text-center",children:[o.jsx(At,{title:"Unable to load workspace",description:"We were unable to fetch workspace information. Refresh the page to try again.",variant:"error"}),o.jsx("button",{type:"button",className:"focus-ring rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-100",onClick:()=>i.refetch(),children:"Retry"})]}):f?o.jsx($j,{workspace:f,workspaces:c,children:o.jsx(KM,{workspace:f})}):null}function KM({workspace:e}){return o.jsx(O_,{children:o.jsx(DC,{workspaceId:e.id,children:o.jsx(PM,{workspace:e})})})}function PM({workspace:e}){const n=Ha(),r=An(),i=Ss(),{session:c,windowState:u}=ly(),f=qh(),m=f.data?.enabled??!1,x=f.data?.detail??Os,g=my(),b=p.useMemo(()=>fy(e),[e]),[y,w]=p.useState(""),[j,_]=p.useState(!1),E=y.trim().toLowerCase(),A=!!(c&&u==="maximized"),O=p.useMemo(()=>b.map(R=>({id:R.id,label:R.label,description:`Jump to ${R.label}`,icon:o.jsx(R.icon,{className:"h-4 w-4 text-slate-400","aria-hidden":!0})})),[b]),N=p.useMemo(()=>sa(`ade.ui.workspace.${e.id}.navCollapsed`),[e.id]),[D,B]=p.useState(()=>{const R=N.get();return typeof R=="boolean"?R:!1});p.useEffect(()=>{const R=N.get();B(typeof R=="boolean"?R:!1)},[N]),p.useEffect(()=>{N.set(D)},[D,N]),p.useEffect(()=>{w("")},[e.id]),p.useEffect(()=>{if(typeof window>"u")return;const R=()=>{window.innerWidth>=1024&&_(!1)};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),p.useEffect(()=>{if(typeof document>"u")return;const R=document.body.style.overflow;return j?document.body.style.overflow="hidden":document.body.style.overflow=R||"",()=>{document.body.style.overflow=R}},[j]),p.useEffect(()=>{A&&_(!1)},[A]);const J=p.useCallback(()=>{if(!E)return;const R=b.find(F=>F.label.toLowerCase().includes(E))??b.find(F=>F.id.toLowerCase().includes(E));R&&r(R.href)},[E,b,r]),Y=p.useCallback(R=>{const F=b.find(z=>z.id===R.id);F&&(r(F.href),w(""))},[b,r]),Q=p.useCallback(()=>_(!0),[]),se=p.useCallback(()=>_(!1),[]),ee=o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("button",{type:"button",onClick:Q,className:"focus-ring inline-flex h-11 w-11 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-600 shadow-sm lg:hidden","aria-label":"Open workspace navigation",children:o.jsx(t4,{})})}),ie=n.user.display_name||n.user.email||"Signed in",ae=n.user.email??"",ce=o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(uy,{displayName:ie,email:ae})}),V={value:y,onChange:w,onSubmit:J,placeholder:`Search ${e.name} or jump to a section`,shortcutHint:g,scopeLabel:e.name,suggestions:O,onSelectSuggestion:Y},he=XM(i.pathname,e.id),xe=s4(e.id,he,i.search,i.hash),U=xe?.kind==="content"&&xe.key.startsWith("documents"),P=U?new URLSearchParams(i.search).get("q")??"":"",me=p.useCallback(R=>{if(!U)return;const F=new URLSearchParams(i.search);R?F.set("q",R):F.delete("q");const z=F.toString();r(`${i.pathname}${z?`?${z}`:""}${i.hash}`,{replace:!0})},[U,i.hash,i.pathname,i.search,r]),je=p.useCallback(R=>{me(R)},[me]),_e=p.useCallback(()=>{me("")},[me]),W=(U?{value:P,onChange:me,onSubmit:je,onClear:_e,placeholder:"Search documents",shortcutHint:g,scopeLabel:"Documents",enableShortcut:!0}:void 0)??V;if(p.useEffect(()=>{xe?.kind==="redirect"&&r(xe.to,{replace:!0})},[xe,r]),!xe||xe.kind==="redirect")return null;const M=xe.fullHeight??!1;return o.jsxs("div",{className:we("flex min-w-0 bg-slate-50 text-slate-900",M?"h-screen overflow-hidden":"min-h-screen"),children:[A?null:o.jsx(ek,{workspace:e,items:b,collapsed:D,onToggleCollapse:()=>B(R=>!R),onGoToWorkspaces:()=>r("/workspaces")}),o.jsxs("div",{className:"flex flex-1 min-w-0 flex-col",children:[A?null:o.jsx(cy,{brand:ee,trailing:ce,search:W}),!A&&j?o.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:se}),o.jsxs("div",{className:"absolute inset-y-0 left-0 flex h-full w-[min(20rem,85vw)] max-w-xs flex-col rounded-r-3xl border-r border-slate-100/70 bg-gradient-to-b from-white via-slate-50 to-white/95 shadow-[0_45px_90px_-50px_rgba(15,23,42,0.85)]",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[o.jsxs("div",{className:"flex flex-col leading-tight",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:e.name}),o.jsx("span",{className:"text-xs text-slate-400",children:"Workspace navigation"})]}),o.jsx("button",{type:"button",onClick:se,className:"focus-ring inline-flex h-9 w-9 items-center justify-center rounded-xl border border-slate-200/80 bg-white text-slate-500","aria-label":"Close navigation",children:o.jsx(n4,{})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:o.jsx(hy,{items:b,onNavigate:se,showHeading:!1})})]})]}):null,o.jsx("div",{className:"relative flex flex-1 min-w-0 overflow-hidden",children:o.jsx("main",{className:we("relative flex-1 min-w-0",M?"flex min-h-0 flex-col overflow-hidden":"overflow-y-auto"),children:o.jsxs("div",{className:we(M?"flex w-full flex-1 min-h-0 flex-col px-0 py-0":"mx-auto flex w-full max-w-7xl flex-col px-4 py-6"),children:[m?o.jsx("div",{className:we("mb-4",M?"px-6 pt-4":""),children:o.jsx(jt,{tone:"warning",heading:"Safe mode active",children:x})}):null,o.jsx("div",{className:we(M?"flex min-h-0 min-w-0 flex-1 flex-col":"flex min-w-0 flex-1 flex-col"),children:xe.element})]})})},`section-${xe.key}`)]})]})}function YM(e){return e.match(/^\/workspaces\/([^/]+)/)?.[1]??null}function XM(e,n){const r=`/workspaces/${n}`;return e.startsWith(r)?e.slice(r.length).split("/").map(c=>c.trim()).filter(c=>c.length>0):[]}function JM(e,n){return n?e.find(r=>r.id===n)??e.find(r=>r.slug===n)??e[0]??null:e[0]??null}function e4(e,n,r,i){const c=`/workspaces/${i}`,u=e.startsWith(c)?e.slice(c.length):"",f=u&&u!=="/"?u:`/${Oi.path}`;return`/workspaces/${r}${f}${n}`}function t4(){return o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[o.jsx("path",{d:"M4 6h12",strokeLinecap:"round"}),o.jsx("path",{d:"M4 10h12",strokeLinecap:"round"}),o.jsx("path",{d:"M4 14h8",strokeLinecap:"round"})]})}function n4(){return o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:[o.jsx("path",{d:"M6 6l8 8",strokeLinecap:"round"}),o.jsx("path",{d:"M14 6l-8 8",strokeLinecap:"round"})]})}function s4(e,n,r,i){const c=`${r}${i}`;if(n.length===0)return{kind:"redirect",to:`/workspaces/${e}/${Oi.path}${c}`};const[u,f,m]=n;switch(u){case"overview":return{kind:"content",key:"overview",element:o.jsx(ck,{})};case Oi.path:case"documents":return f?{kind:"content",key:`documents:${f}`,element:o.jsx(Kk,{params:{documentId:decodeURIComponent(f)}})}:{kind:"content",key:"documents",element:o.jsx(xk,{})};case"runs":return{kind:"content",key:"runs",element:o.jsx(Pk,{})};case"config-builder":return f?m==="editor"?{kind:"content",key:`config-builder:${f}:editor`,element:o.jsx(r4,{configId:decodeURIComponent(f)}),fullHeight:!0}:{kind:"content",key:`config-builder:${f}`,element:o.jsx(e5,{params:{configId:decodeURIComponent(f)}})}:{kind:"content",key:"config-builder",element:o.jsx(Xk,{})};case"configs":return{kind:"redirect",to:`${`/workspaces/${e}/config-builder${f?`/${f}`:""}${m?`/${m}`:""}`}${c}`};case"settings":return{kind:"content",key:"settings",element:o.jsx(FM,{})};default:return{kind:"content",key:`not-found:${n.join("/")}`,element:o.jsx(At,{title:"Section not found",description:"The requested workspace section could not be located.",variant:"error"})}}}function r4({configId:e}){return o.jsx(t5,{params:{configId:e}})}function a4(e){return`/workspaces/${e}/${Oi.path}`}function i4(){return o.jsx(fu,{children:o.jsx(l4,{})})}function l4(){const e=Ss(),n=An(),r=Ha(),i=hu(),c=i.data?.items??[],m=[qj(),r.user.preferred_workspace_id].filter(x=>!!x).map(x=>c.find(g=>g.id===x)).find(x=>!!x)??c[0]??null;return p.useEffect(()=>{if(i.isLoading||i.isError)return;if(!m){e.pathname!=="/workspaces"&&n("/workspaces",{replace:!0});return}const x=a4(m.id);e.pathname+e.search!==x&&n(x,{replace:!0})},[e.pathname,e.search,n,m,i.isError,i.isLoading]),i.isLoading?o.jsx(At,{title:"Loading workspaces",variant:"loading"}):i.isError?o.jsx(At,{title:"Unable to load workspaces",description:"Refresh the page or try again later.",variant:"error",action:o.jsx(qe,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})}):null}function o4(){return Sn({queryKey:Ls.providers(),queryFn:({signal:e})=>KS({signal:e}),staleTime:6e5,retry:!1,refetchOnWindowFocus:!1})}const c4=vo({email:Un().trim().min(1,"Enter your email address.").email("Enter a valid email address."),password:Un().min(1,"Enter your password.")});function u4(){const e=Ss(),n=An(),r=ht(),i=Jv(),{session:c,isLoading:u,isError:f}=i,m=!c&&!u&&!f,x=Nh(m),g=o4(),b=g.data?.providers??[],y=g.data?.force_sso??!1,w=g.isError&&!g.isFetching?"We couldn't load the list of providers. Refresh the page or continue with email.":null,j=p.useMemo(()=>{const J=new URLSearchParams(e.search);return eo(J.get("redirectTo"))},[e.search]);p.useEffect(()=>{c&&n(Xc(c.return_to,j),{replace:!0})},[n,j,c]),p.useEffect(()=>{m&&(x.isPending||x.isError||x.data?.requires_setup&&n(tb(j),{replace:!0}))},[n,j,x.data?.requires_setup,x.isError,x.isPending,m]);const[_,E]=p.useState(null),[A,O]=p.useState(!1);if(p.useEffect(()=>{E(null)},[e.search]),u)return o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx("p",{className:"text-sm text-slate-600",children:"Checking your session"})});if(f)return o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to verify your session. Refresh the page to try again."}),o.jsx(qe,{variant:"secondary",onClick:()=>i.refetch(),children:"Retry"})]});if(x.isPending&&m)return o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx("p",{className:"text-sm text-slate-600",children:"Preparing initial setup"})});if(x.isError&&m)return o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"We were unable to check whether ADE is ready."}),o.jsx(qe,{variant:"secondary",onClick:()=>x.refetch(),children:"Try again"})]});const N=async J=>{J.preventDefault(),E(null);const Y=new FormData(J.currentTarget),Q=Object.fromEntries(Y.entries()),se=c4.safeParse(Q);if(!se.success){const V=se.error.issues[0]?.message??"Invalid input.";E(V);return}const{email:ee,password:ie}=se.data,ae=typeof Q.redirectTo=="string"?Q.redirectTo:null,ce=eo(ae);O(!0);try{const V=await YS({email:ee,password:ie});r.setQueryData(Ls.detail(),V),n(Xc(V.return_to,ce),{replace:!0})}catch(V){if(V instanceof Xn){const he=V.problem?.detail??V.message??"Unable to sign in.";E(he)}else V instanceof Error?E(V.message):E("Unable to sign in.")}finally{O(!1)}},D=!!_&&!A,B=g.isLoading||g.isFetching;return o.jsx("div",{className:"mx-auto flex min-h-screen flex-col justify-center bg-slate-50 px-6 py-16",children:o.jsxs("div",{className:"mx-auto w-full max-w-md rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[o.jsxs("header",{className:"space-y-2 text-center",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"Welcome back"}),o.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Sign in to ADE"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Enter your email and password or continue with a connected provider."})]}),w?o.jsx(jt,{tone:"warning",className:"mt-6",children:w}):null,B?o.jsxs("div",{className:"mt-6 space-y-3",children:[o.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"}),o.jsx("div",{className:"h-10 animate-pulse rounded-lg bg-slate-100"})]}):b.length>0?o.jsx("div",{className:"mt-6 space-y-3",children:b.map(J=>o.jsxs("a",{href:J.start_url??"#",className:"flex w-full items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:["Continue with ",J.label]},J.id))}):null,y?o.jsx(jt,{tone:"info",className:"mt-8",children:"Password sign-in is disabled for this deployment. Use one of the configured providers above."}):o.jsxs("form",{method:"post",className:"mt-8 space-y-6",onSubmit:N,children:[o.jsx("input",{type:"hidden",name:"redirectTo",value:j}),o.jsx(cn,{label:"Email address",required:!0,children:o.jsx(jn,{id:"email",type:"email",autoComplete:"email",placeholder:"you@example.com",name:"email",disabled:A})}),o.jsx(cn,{label:"Password",required:!0,children:o.jsx(jn,{id:"password",type:"password",autoComplete:"current-password",placeholder:"",name:"password",disabled:A})}),D?o.jsx(jt,{tone:"danger",children:_}):null,o.jsx(qe,{type:"submit",className:"w-full justify-center",isLoading:A,disabled:A,children:A?"Signing in":"Continue"})]})]})})}function d4(){const e=An(),n=Ss(),r=ht(),[i,c]=p.useState(null);return p.useEffect(()=>{let u=!1;const f=new URLSearchParams(n.search),m=f.get("code")??"",x=f.get("state")??"";if(!m||!x){c("Missing authorization details from the identity provider.");return}async function g(){try{const b=await JS({code:m,state:x});if(u)return;r.setQueryData(Ls.detail(),b);const y=Xc(b.return_to,f.get("next"));e(y,{replace:!0})}catch(b){if(u)return;b instanceof Xn?c(b.problem?.detail??b.message):b instanceof Error?c(b.message):c("Unexpected callback error.")}}return g(),()=>{u=!0}},[n.search,e,r]),i?o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx(At,{title:"Unable to finish sign-in",description:i,variant:"error",action:o.jsx(qe,{variant:"secondary",onClick:()=>e("/login",{replace:!0}),children:"Return to sign in"})})}):o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx(At,{title:"Finishing sign-in",variant:"loading"})})}const f4=vo({displayName:Un().min(1,"Display name is required."),email:Un().min(1,"Email is required.").email("Enter a valid email address."),password:Un().min(12,"Use at least 12 characters."),confirmPassword:Un().min(1,"Confirm your password.")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match."});function h4(){const e=Ss(),n=An(),r=ht(),i=Nh(!0),c=p.useMemo(()=>{const b=new URLSearchParams(e.search);return eo(b.get("redirectTo"))},[e.search]);p.useEffect(()=>{i.isPending||i.isError||i.data?.requires_setup||n(eb(c),{replace:!0})},[n,c,i.data?.requires_setup,i.isError,i.isPending]);const[u,f]=p.useState(null),[m,x]=p.useState(!1);if(i.isPending)return o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx("p",{className:"text-sm text-slate-600",children:"Loading setup status"})});if(i.isError)return o.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-3 bg-slate-50 px-6 text-center",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"We couldn't check whether ADE requires initial setup."}),o.jsx(qe,{variant:"secondary",onClick:()=>i.refetch(),children:"Try again"})]});if(!i.data?.requires_setup)return null;const g=async b=>{b.preventDefault(),f(null);const y=new FormData(b.currentTarget),w=Object.fromEntries(y.entries()),j=f4.safeParse(w);if(!j.success){const E=j.error.issues[0]?.message??"Invalid input.";f(E);return}x(!0);const _=eo(w.redirectTo);try{const E=await oj({display_name:j.data.displayName,email:j.data.email,password:j.data.password});r.setQueryData(Ls.detail(),E),n(Xc(E.return_to,_),{replace:!0})}catch(E){if(E instanceof Xn){const A=E.problem?.detail??E.message??"Setup failed. Try again.";f(A)}else E instanceof Error?f(E.message):f("Setup failed. Try again.")}finally{x(!1)}};return o.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col justify-center bg-slate-50 px-6 py-16",children:o.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-10 shadow-soft",children:[o.jsxs("header",{className:"space-y-3 text-center",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-600",children:"First-run configuration"}),o.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Create the first administrator"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Provide credentials for the inaugural administrator account. We'll redirect after completion."})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[o.jsx("input",{type:"hidden",name:"redirectTo",value:c}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsx(cn,{label:"Display name",required:!0,children:o.jsx(jn,{id:"displayName",name:"displayName",placeholder:"Casey Operator",required:!0,disabled:m})}),o.jsx(cn,{label:"Email",required:!0,children:o.jsx(jn,{id:"email",name:"email",type:"email",placeholder:"casey@example.com",required:!0,disabled:m})})]}),o.jsx(cn,{label:"Password",hint:"Use at least 12 characters.",required:!0,children:o.jsx(jn,{id:"password",name:"password",type:"password",minLength:12,placeholder:"",required:!0,disabled:m})}),o.jsx(cn,{label:"Confirm password",required:!0,children:o.jsx(jn,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:12,placeholder:"Re-enter your password",required:!0,disabled:m})}),u?o.jsx(jt,{tone:"danger",children:u}):null,o.jsx("div",{className:"flex justify-end",children:o.jsx(qe,{type:"submit",isLoading:m,disabled:m,children:m?"Creating administrator":"Create administrator"})})]})]})})}function Py({children:e,sidePanel:n,actions:r,search:i}){const c=Ha(),u=An(),f=c.user.display_name||c.user.email||"Signed in",m=c.user.email??"";return o.jsxs("div",{className:"flex min-h-screen flex-col bg-slate-50 text-slate-900",children:[o.jsx(cy,{brand:o.jsxs("button",{type:"button",onClick:()=>u("/workspaces"),className:"focus-ring inline-flex items-center gap-3 rounded-xl border border-transparent bg-white px-3 py-2 text-left text-sm font-semibold text-slate-900 shadow-sm transition hover:border-slate-200",children:[o.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white shadow-sm",children:o.jsx(YC,{className:"h-5 w-5","aria-hidden":!0})}),o.jsxs("span",{className:"flex flex-col leading-tight",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Workspace directory"}),o.jsx("span",{className:"text-xs text-slate-400",children:"Automatic Data Extractor"})]})]}),search:i,actions:r?o.jsx("div",{className:"flex items-center gap-2",children:r}):void 0,trailing:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(uy,{displayName:f,email:m})})}),o.jsx("main",{className:"flex flex-1 overflow-y-auto",children:o.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:o.jsxs("div",{className:`grid gap-6 ${n?"lg:grid-cols-[minmax(0,1fr)_280px]":""}`,children:[o.jsx("div",{children:e}),n?o.jsx("aside",{className:"space-y-6",children:n}):null]})})})]})}function m4(){return o.jsx(fu,{children:o.jsx(p4,{})})}function p4(){const e=An(),n=Ha(),r=hu(),i=Uj(),[c,u]=p.useState(null),[f,m]=p.useState(null),x=p.useMemo(()=>(n.user.permissions??[]).map(V=>V.toLowerCase()),[n.user.permissions]),g=x.includes("workspaces.create")||x.includes("workspaces.manage_all"),[b,y]=p.useState(""),w=my(),j=r.data,_=p.useMemo(()=>j?.items??[],[j?.items]),E=b.trim().toLowerCase(),A=p.useMemo(()=>E?_.filter(V=>{const he=V.name.toLowerCase(),xe=V.slug?.toLowerCase()??"";return he.includes(E)||xe.includes(E)}):_,[_,E]),O=p.useCallback(V=>e(`/workspaces/${V}/${Oi.path}`),[e]),N=g?o.jsx(qe,{variant:"primary",onClick:()=>e("/workspaces/new"),children:"Create workspace"}):void 0,D=p.useCallback(()=>{if(!E)return;const V=A[0];V&&O(V.id)},[A,E,O]),B=p.useCallback(()=>y(""),[]),Y=(E?A:_).slice(0,5).map(V=>({id:V.id,label:V.name,description:V.slug?`Slug  ${V.slug}`:"Workspace"})),Q=p.useCallback(V=>{y(""),O(V.id)},[O]),se=p.useCallback(async V=>{m(null),u(V.id);try{await i.mutateAsync(V.id),ab(V)}catch(he){console.warn("workspaces.set_default.failed",he),m("Unable to set the default workspace. Please try again.")}finally{u(null)}},[i]),ee=p.useCallback((V,he)=>{(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),O(he))},[O]),ie={value:b,onChange:y,onSubmit:D,placeholder:"Search workspaces or jump to one instantly",shortcutHint:w,scopeLabel:"Workspace directory",suggestions:Y,onSelectSuggestion:Q,onClear:B},ae={...ie,shortcutHint:void 0,onClear:B,enableShortcut:!1,variant:"minimal"};if(r.isLoading)return o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx(At,{title:"Loading workspaces",variant:"loading"})});if(r.isError)return o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 px-6",children:o.jsx(At,{title:"We couldn't load your workspaces",description:"Refresh the page or try again later.",variant:"error",action:o.jsx(qe,{variant:"secondary",onClick:()=>r.refetch(),children:"Retry"})})});const ce=_.length===0?g?o.jsx(x4,{onCreate:()=>e("/workspaces/new")}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("h1",{id:"page-title",className:"sr-only",children:"Workspaces"}),o.jsx(At,{title:"No workspaces available",description:"You don't have access to any workspaces yet. Ask an administrator to add you or create one on your behalf.",variant:"empty"})]}):A.length===0?o.jsx("div",{className:"space-y-4",children:o.jsx(At,{title:`No workspaces matching "${b}"`,description:"Try searching by another workspace name or slug.",action:o.jsx(qe,{variant:"secondary",onClick:B,children:"Clear search"})})}):o.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",children:[o.jsxs("header",{children:[o.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"Workspaces"}),o.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Select a workspace to jump straight into documents."})]}),f?o.jsx(jt,{tone:"danger",heading:"We couldn't update your default workspace",children:f}):null,o.jsx(oy,{...ae,className:"w-full"}),o.jsx("section",{className:"grid gap-5 lg:grid-cols-2",children:A.map(V=>{const he=i.isPending&&c===V.id;return o.jsxs("article",{role:"button",tabIndex:0,onClick:()=>O(V.id),onKeyDown:xe=>ee(xe,V.id),className:"group rounded-xl border border-slate-200 bg-white p-5 text-left shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:V.name}),o.jsxs("p",{className:"text-sm text-slate-500",children:["Slug: ",V.slug]})]}),V.is_default?o.jsx("span",{className:"rounded-full bg-brand-50 px-2 py-1 text-xs font-semibold text-brand-600",children:"Default"}):o.jsx(qe,{variant:"secondary",size:"sm",isLoading:he,disabled:he,onClick:xe=>{xe.stopPropagation(),se(V)},children:"Set as default"})]}),o.jsx("p",{className:"mt-4 text-xs font-medium uppercase tracking-wide text-slate-500",children:"Permissions"}),o.jsx("p",{className:"text-sm text-slate-600",children:V.permissions.length>0?V.permissions.join(", "):"None"})]},V.id)})})]});return o.jsx(Py,{actions:N,search:ie,sidePanel:o.jsx(g4,{canCreate:g,onCreate:()=>e("/workspaces/new")}),children:ce})}function g4({canCreate:e,onCreate:n}){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[o.jsxs("header",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Workspace tips"}),o.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Why multiple workspaces?"})]}),o.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:"Segment teams by business unit or client, control access with roles, and tailor extraction settings per workspace. Everything stays organised and secure."}),e?o.jsx(qe,{variant:"secondary",onClick:n,className:"w-full",children:"New workspace"}):null]}),o.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-soft",children:[o.jsxs("header",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Need a hand?"}),o.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Workspace setup checklist"})]}),o.jsxs("ul",{className:"space-y-2 text-xs text-slate-600",children:[o.jsx("li",{children:"Invite at least one additional administrator."}),o.jsx("li",{children:"Review configurations before uploading production files."}),o.jsx("li",{children:"Review workspace permissions for external collaborators."})]})]})]})}function x4({onCreate:e}){return o.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-dashed border-slate-300 bg-white p-10 text-center shadow-soft",children:[o.jsx("h1",{id:"page-title",className:"text-2xl font-semibold text-slate-900",children:"No workspaces yet"}),o.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Create your first workspace to start uploading configuration sets and documents."}),o.jsx(qe,{variant:"primary",onClick:e,className:"mt-6",children:"Create workspace"})]})}function v4(){const e=ht();return un({mutationFn:bj,onSuccess(n){e.setQueryData(Pt.detail(n.id),n),e.getQueriesData({queryKey:Pt.all()}).forEach(([r,i])=>{if(!Array.isArray(r)||r[0]!=="workspaces"||r[1]!=="list"||!i)return;const c=i.items.findIndex(x=>x.id===n.id),f=[...c>=0?i.items.map(x=>x.id===n.id?n:x):[...i.items,n]].sort((x,g)=>x.name.localeCompare(g.name)),m=typeof i.total=="number"&&c===-1?i.total+1:i.total;e.setQueryData(r,{...i,items:f,total:m})}),e.invalidateQueries({queryKey:Pt.all()})}})}const b4=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,y4=vo({name:Un().min(1,"Workspace name is required.").max(100,"Keep the name under 100 characters."),slug:Un().min(1,"Workspace slug is required.").max(100,"Keep the slug under 100 characters.").regex(b4,"Use lowercase letters, numbers, and dashes."),ownerUserId:Un().optional()});function w4(){return o.jsx(fu,{children:o.jsx(S4,{})})}function S4(){const e=An(),n=Ha(),r=hu(),i=v4(),u=p.useMemo(()=>(n.user.permissions??[]).map(ee=>ee.toLowerCase()),[n.user.permissions]).includes("users.read_all"),f=Iy({enabled:u,pageSize:50}),m=p.useMemo(()=>f.users,[f.users]),x=p.useMemo(()=>n.user.id?m.filter(ee=>ee.id!==n.user.id):m,[m,n.user.id]),{register:g,handleSubmit:b,watch:y,setValue:w,setError:j,clearErrors:_,formState:{errors:E,dirtyFields:A}}=Wh({resolver:em(y4),defaultValues:{name:"",slug:"",ownerUserId:n.user.id??""}}),O=y("name"),N=y("slug");p.useEffect(()=>{if(A.slug)return;const ee=j4(O);ee!==N&&w("slug",ee,{shouldValidate:!!ee})},[A.slug,O,w,N]),p.useEffect(()=>{!u&&n.user.id&&w("ownerUserId",n.user.id,{shouldDirty:!1})},[u,n.user.id,w]);const D=i.isPending,B=f.isPending&&f.users.length===0,J=D||B||!u,Y=n.user.display_name?`${n.user.display_name} (you)`:`${n.user.email??"Current user"} (you)`,Q=g("ownerUserId"),se=b(ee=>{if(_("root"),u&&!ee.ownerUserId){j("ownerUserId",{type:"manual",message:"Select a workspace owner."});return}i.mutate({name:ee.name.trim(),slug:ee.slug.trim(),owner_user_id:u&&ee.ownerUserId||void 0},{onSuccess(ie){r.refetch(),e(`/workspaces/${ie.id}`)},onError(ie){if(ie instanceof Xn){const ae=ie.problem?.detail??ie.message,ce=ie.problem?.errors??{};j("root",{type:"server",message:ae}),ce.name?.[0]&&j("name",{type:"server",message:ce.name[0]}),ce.slug?.[0]&&j("slug",{type:"server",message:ce.slug[0]}),ce.owner_user_id?.[0]&&j("ownerUserId",{type:"server",message:ce.owner_user_id[0]});return}j("root",{type:"server",message:ie instanceof Error?ie.message:"Workspace creation failed."})}})});return o.jsx(Py,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("header",{className:"space-y-2",children:[o.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Create a workspace"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Name the workspace and choose who should own it. You can adjust settings and permissions after the workspace is created."})]}),o.jsxs("form",{className:"space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft",onSubmit:se,children:[o.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[o.jsx(cn,{label:"Workspace name",required:!0,error:E.name?.message,children:o.jsx(jn,{id:"workspaceName",placeholder:"Finance Operations",...g("name"),invalid:!!E.name,disabled:D})}),o.jsx(cn,{label:"Workspace slug",hint:"Lowercase, URL-friendly identifier",required:!0,error:E.slug?.message,children:o.jsx(jn,{id:"workspaceSlug",placeholder:"finance-ops",...g("slug"),invalid:!!E.slug,disabled:D})})]}),u?o.jsxs(cn,{label:"Workspace owner",hint:"Owner receives workspace-level permissions immediately.",error:E.ownerUserId?.message,children:[o.jsxs("select",{id:"workspaceOwner",...Q,onChange:ee=>{Q.onChange(ee),_("ownerUserId")},disabled:J,className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-500",children:[o.jsx("option",{value:n.user.id??"",children:Y}),x.map(ee=>o.jsx("option",{value:ee.id,children:ee.display_name?`${ee.display_name} (${ee.email})`:ee.email},ee.id))]}),f.hasNextPage?o.jsx("div",{className:"pt-2",children:o.jsx(qe,{type:"button",variant:"ghost",onClick:()=>f.fetchNextPage(),disabled:f.isFetchingNextPage,children:f.isFetchingNextPage?"Loading more users":"Load more users"})}):null]}):null,E.root?o.jsx(jt,{tone:"danger",children:E.root.message}):null,u&&f.isError?o.jsx(jt,{tone:"warning",children:"Unable to load the user list. Continue with yourself as the workspace owner or try again later."}):null,o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[o.jsx(qe,{type:"button",variant:"secondary",onClick:()=>e("/workspaces"),disabled:D,children:"Cancel"}),o.jsx(qe,{type:"submit",isLoading:D,children:D?"Creating workspace":"Create workspace"})]})]})]})})}function j4(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,100)}function E4(){const e=An(),n=ht();return p.useEffect(()=>{let r=!1;const i=new AbortController;return(async()=>{try{await ej({signal:i.signal})}finally{r||(n.removeQueries({queryKey:Ls.root,exact:!1}),e("/login",{replace:!0}))}})().catch(()=>{r||e("/login",{replace:!0})}),()=>{r=!0,i.abort()}},[e,n]),null}function N4(){return o.jsx("div",{className:"mx-auto flex min-h-screen max-w-xl flex-col justify-center px-6 py-16 text-center",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-brand-600",children:"404"}),o.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Page not found"}),o.jsxs("p",{className:"text-sm text-slate-600",children:["The resource you're looking for doesn't exist yet. Add a screen under ",o.jsx("code",{children:"src/screens/<ScreenName>/"})," and register it inside ",o.jsx("code",{children:"src/app/App.tsx"})," if this surface should exist in the routerless SPA."]}),o.jsxs("div",{className:"flex justify-center gap-3 text-sm",children:[o.jsx(ch,{to:"/",className:"focus-ring inline-flex items-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-white transition hover:bg-brand-700",children:"Return home"}),o.jsx(ch,{to:"/login",className:"focus-ring inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 font-semibold text-slate-600 hover:bg-slate-50",children:"Go to sign in"})]})]})})}function _4(){return o.jsx($1,{children:o.jsx(_S,{children:o.jsx(C4,{})})})}function C4(){const e=Ss(),r=k4(e.pathname).split("/").filter(Boolean);if(r.length===0)return o.jsx(i4,{});const[i,c]=r;switch(i){case"login":return o.jsx(u4,{});case"logout":return o.jsx(E4,{});case"auth":if(c==="callback")return o.jsx(d4,{});break;case"setup":return o.jsx(h4,{});case"workspaces":return c?c==="new"?o.jsx(w4,{}):o.jsx(WM,{}):o.jsx(m4,{})}return o.jsx(N4,{})}function k4(e){return!e||e==="/"?"/":e.endsWith("/")&&e.length>1?e.slice(0,-1):e}q1.createRoot(document.getElementById("root")).render(o.jsx(bt.StrictMode,{children:o.jsx(_4,{})}));export{bt as W,we as c,o as j,p as r};
