# -----------------------------------------------------------------------------
# ADE env template (refactored)
# Copy to `.env` and adjust. Defaults target single-host SQLite.
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# Quick start
# -----------------------------------------------------------------------------
# Generate a long random secret for sessions/JWT:
# python -c "import secrets; print(secrets.token_urlsafe(64))"
ADE_JWT_SECRET=
ADE_SERVER_PUBLIC_URL=http://localhost:8000
ADE_API_HOST=0.0.0.0
ADE_API_PORT=8000
ADE_API_WORKERS=3
ADE_WEB_HOST=127.0.0.1
ADE_WEB_PORT=5173
ADE_DATA_DIR=./data

# -----------------------------------------------------------------------------
# API runtime
# -----------------------------------------------------------------------------
ADE_API_DOCS_ENABLED=false
ADE_SAFE_MODE=false
ADE_LOG_LEVEL=INFO
# ADE_SERVER_CORS_ORIGINS=["http://localhost:5173"]
# ADE_FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Auth & SSO
# -----------------------------------------------------------------------------
ADE_JWT_ACCESS_TTL=60m
ADE_FAILED_LOGIN_LOCK_THRESHOLD=5
ADE_FAILED_LOGIN_LOCK_DURATION=5m
# ADE_AUTH_FORCE_SSO=false
# ADE_AUTH_SSO_AUTO_PROVISION=false
# ADE_AUTH_SSO_PROVIDERS_JSON='[{"id":"entra-primary","type":"oidc","label":"Microsoft Entra ID","issuer":"https://login.microsoftonline.com/<TENANT_ID>/v2.0","clientId":"<CLIENT_ID>","clientSecret":"<CLIENT_SECRET>","domains":["example.com"],"status":"active"}]'
# ADE_SSO_ENCRYPTION_KEY=
# SSO providers are managed in the database via /api/v1/admin/sso/providers
# When ADE_AUTH_SSO_PROVIDERS_JSON is set (including "[]"), env-managed providers are synced on startup and locked.
# Dev only: bypass auth (never in production)
# ADE_AUTH_DISABLED=false
# ADE_AUTH_DISABLED_USER_EMAIL=developer@example.com
# ADE_AUTH_DISABLED_USER_NAME=Development User

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# Shared local data root (used by docker-compose.dev.yml + devcontainer)
# ADE_DATA_DIR=./data
# SQLite tuning (leave defaults unless needed)
# ADE_DATABASE_SQLITE_JOURNAL_MODE=WAL
# ADE_DATABASE_SQLITE_SYNCHRONOUS=NORMAL
# ADE_DATABASE_SQLITE_BUSY_TIMEOUT_MS=30000
# ADE_DATABASE_SQLITE_BEGIN_MODE=DEFERRED
# ADE_DATABASE_MIGRATION_TIMEOUT_S=15
# ADE_DATABASE_POOL_SIZE=5
# ADE_DATABASE_MAX_OVERFLOW=10
# ADE_DATABASE_POOL_TIMEOUT=30
# ADE_DATABASE_POOL_RECYCLE=1800
# SQL Server (set ADE_DATABASE_URL + ADE_DATABASE_AUTH_MODE; defaults use SQLite)
# ADE_DATABASE_URL=
# ADE_DATABASE_AUTH_MODE=sql_password  # or managed_identity
# ADE_DATABASE_MI_CLIENT_ID=
# Local SQL Server container (docker-compose.dev.yml)
# ADE_MSSQL_SA_PASSWORD=YourStrong!Passw0rd
# Examples:
# SQL auth URL: mssql+pyodbc://USERNAME:PASSWORD@SERVER:PORT/DATABASE?driver=ODBC+Driver+18+for+SQL+Server&Encrypt=yes&TrustServerCertificate=no&Connection+Timeout=30
# Managed identity URL: mssql+pyodbc://@server.database.windows.net:1433/db?driver=ODBC+Driver+18+for+SQL+Server&Encrypt=yes&TrustServerCertificate=no&Connection+Timeout=30
# ADE_DATABASE_ECHO=false
# ADE_DATABASE_LOG_LEVEL=DEBUG

# -----------------------------------------------------------------------------
# Storage & paths
# -----------------------------------------------------------------------------
# ADE_DATA_DIR=./data
ADE_STORAGE_UPLOAD_MAX_BYTES=26214400   # 25 MiB
ADE_STORAGE_DOCUMENT_RETENTION_PERIOD=30d

# -----------------------------------------------------------------------------
# Runs / queue (API control plane)
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# ade-worker runtime
# -----------------------------------------------------------------------------
# Path/spec for the engine package the worker installs into venvs.
ADE_ENGINE_PACKAGE_PATH=apps/ade-engine
ADE_WORKER_CONCURRENCY=3
ADE_WORKER_POLL_INTERVAL=0.5
ADE_WORKER_POLL_INTERVAL_MAX=2
ADE_WORKER_CLEANUP_INTERVAL=30
ADE_WORKER_LEASE_SECONDS=900
ADE_WORKER_MAX_ATTEMPTS_DEFAULT=3
ADE_WORKER_BACKOFF_BASE_SECONDS=5
ADE_WORKER_BACKOFF_MAX_SECONDS=300
# ADE_WORKER_RUN_TIMEOUT_SECONDS=
ADE_WORKER_ENV_BUILD_TIMEOUT_SECONDS=600
ADE_WORKER_ENABLE_GC=1
ADE_WORKER_GC_INTERVAL_SECONDS=3600
ADE_WORKER_ENV_TTL_DAYS=30
ADE_WORKER_RUN_ARTIFACT_TTL_DAYS=30
# ADE_WORKER_LOG_LEVEL=INFO
# ADE_WORKER_ID=

# -----------------------------------------------------------------------------
# Web / frontend
# -----------------------------------------------------------------------------
# ADE_WEB_LOG_LEVEL=info  # Vite: info|warn|error|silent
# ADE_FRONTEND_DIST_DIR=apps/ade-web/dist
