# -----------------------------------------------------------------------------
# ADE environment template
# Copy to `.env` and tweak values as needed.
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# Core backend settings (defaults mirror Settings model)
# -----------------------------------------------------------------------------
ADE_DEBUG=false
ADE_DEV_MODE=false
# Set to true to expose FastAPI's interactive docs at /docs and /redoc.
ADE_API_DOCS_ENABLED=false
ADE_LOGGING_LEVEL=INFO
# Keep ADE online for troubleshooting without executing user config code.
# When true the API serves existing data but job submissions return HTTP 400.
ADE_SAFE_MODE=false

# Bind interface and port for the uvicorn server. When running inside a
# container set the host to 0.0.0.0 so Docker can expose the port.
ADE_SERVER_HOST=localhost
ADE_SERVER_PORT=8000

# Public origin that browsers and webhooks should use. Defaults to localhost
# for development, but switch it to your DNS name (including https://) when you
# publish ADE behind a reverse proxy. Example:
# `ADE_SERVER_PUBLIC_URL=https://ade.example.com`
ADE_SERVER_PUBLIC_URL=http://localhost:8000

# Additional origins for CORS. Provide a JSON array (e.g. ["http://localhost:5173"]).
# Include the frontend dev server for local work. In production add hosted domains,
# such as `https://ade.example.com` for the shipped UI.
ADE_SERVER_CORS_ORIGINS=["http://localhost:5173"]

# JWT settings for session cookies. Defaults match the development profile.
ADE_JWT_SECRET=development-secret
ADE_JWT_ACCESS_TTL=60m
ADE_JWT_REFRESH_TTL=14d
# Lockout policy for repeated failed password attempts.
ADE_FAILED_LOGIN_LOCK_THRESHOLD=5
ADE_FAILED_LOGIN_LOCK_DURATION=5m

# -----------------------------------------------------------------------------
# Runtime directories (created automatically if they do not exist).
# -----------------------------------------------------------------------------
# Directory roots for documents, configs, venvs, jobs, and cache locations.
# Defaults point to ./data/... but you can provide arbitrary paths.
# ADE_DOCUMENTS_DIR=./data/documents
# ADE_CONFIGS_DIR=./data/config_packages
# ADE_VENVS_DIR=./data/.venv
# ADE_JOBS_DIR=./data/jobs
# ADE_PIP_CACHE_DIR=./data/cache/pip
# Maximum upload size (bytes); defaults to 25 MiB.
ADE_STORAGE_UPLOAD_MAX_BYTES=26214400
# Document retention window (accepts seconds or suffixed strings like 30d).
ADE_STORAGE_DOCUMENT_RETENTION_PERIOD=30d

# Secret key used to encrypt configuration secrets (base64 encoded 32 bytes).
ADE_SECRET_KEY=ZGV2ZWxvcG1lbnQtY29uZmlnLXNlY3JldC1rZXktMzI=

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# ADE_DATABASE_DSN defaults to the bundled SQLite database; uncomment to point
# at PostgreSQL or a different file path when you deploy.
# ADE_DATABASE_DSN=sqlite+aiosqlite:///./data/db/ade.sqlite

# -----------------------------------------------------------------------------
# Job execution & worker limits
# -----------------------------------------------------------------------------
# Maximum number of concurrent jobs the backend dispatcher will start.
# ADE_MAX_CONCURRENCY=2
# Maximum number of queued jobs before new submissions are rejected.
# ADE_QUEUE_SIZE=10
# Per-job wall-clock timeout enforced by the parent process (seconds or duration string).
# ADE_JOB_TIMEOUT_SECONDS=300
# Hard limits applied to each worker subprocess (best-effort via rlimit).
# ADE_WORKER_CPU_SECONDS=60
# ADE_WORKER_MEM_MB=512
# ADE_WORKER_FSIZE_MB=100

# -----------------------------------------------------------------------------
# Optional OpenID Connect configuration
# -----------------------------------------------------------------------------
# Enable and configure OIDC login by providing the core fields below. Scopes
# accept a space separated list (they will be deduplicated and sorted).
# ---------------------------------------------------------------------------
# Example Microsoft Entra ID (Azure AD) OpenID Connect configuration
# ---------------------------------------------------------------------------
# Enable OIDC authentication via Entra ID (Azure AD)
# ADE_OIDC_ENABLED=true
# ADE_OIDC_CLIENT_ID=your-entra-app-client-id
# ADE_OIDC_CLIENT_SECRET=your-entra-app-client-secret
# ADE_OIDC_ISSUER=https://login.microsoftonline.com/<tenant-id>/v2.0
# ADE_OIDC_REDIRECT_URL=/auth/callback
# ADE_OIDC_SCOPES=["openid","email","profile"]
# Toggle SSO behaviour once the base OIDC variables are configured.
# ADE_AUTH_FORCE_SSO=false
# ADE_AUTH_SSO_AUTO_PROVISION=true

# -----------------------------------------------------------------------------
# Local development helpers
# -----------------------------------------------------------------------------
# Set to true to bypass authentication/authorization for local debugging.
# WARNING: Never enable this outside of an isolated dev environment.
# ADE_AUTH_DISABLED=false
# ADE_AUTH_DISABLED_USER_EMAIL=developer@example.test
# ADE_AUTH_DISABLED_USER_NAME=Development User
